var She=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var lxt=She((mxt,XA)=>{function Mhe(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var a_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ih(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var yJ={exports:{}},sI={},vJ={exports:{}},Jr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H2=Symbol.for("react.element"),Ehe=Symbol.for("react.portal"),The=Symbol.for("react.fragment"),Che=Symbol.for("react.strict_mode"),Ahe=Symbol.for("react.profiler"),Phe=Symbol.for("react.provider"),khe=Symbol.for("react.context"),Ihe=Symbol.for("react.forward_ref"),Rhe=Symbol.for("react.suspense"),Ohe=Symbol.for("react.memo"),Lhe=Symbol.for("react.lazy"),jV=Symbol.iterator;function Dhe(t){return t===null||typeof t!="object"?null:(t=jV&&t[jV]||t["@@iterator"],typeof t=="function"?t:null)}var xJ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_J=Object.assign,bJ={};function t1(t,e,n){this.props=t,this.context=e,this.refs=bJ,this.updater=n||xJ}t1.prototype.isReactComponent={};t1.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};t1.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function wJ(){}wJ.prototype=t1.prototype;function n5(t,e,n){this.props=t,this.context=e,this.refs=bJ,this.updater=n||xJ}var r5=n5.prototype=new wJ;r5.constructor=n5;_J(r5,t1.prototype);r5.isPureReactComponent=!0;var UV=Array.isArray,SJ=Object.prototype.hasOwnProperty,i5={current:null},MJ={key:!0,ref:!0,__self:!0,__source:!0};function EJ(t,e,n){var r,i={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)SJ.call(e,r)&&!MJ.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:H2,type:t,key:o,ref:a,props:i,_owner:i5.current}}function Nhe(t,e){return{$$typeof:H2,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function o5(t){return typeof t=="object"&&t!==null&&t.$$typeof===H2}function zhe(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var VV=/\/+/g;function jL(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zhe(""+t.key):e.toString(36)}function uA(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case H2:case Ehe:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+jL(a,0):r,UV(i)?(n="",t!=null&&(n=t.replace(VV,"$&/")+"/"),uA(i,e,n,"",function(c){return c})):i!=null&&(o5(i)&&(i=Nhe(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(VV,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",UV(t))for(var s=0;s<t.length;s++){o=t[s];var l=r+jL(o,s);a+=uA(o,e,n,l,i)}else if(l=Dhe(t),typeof l=="function")for(t=l.call(t),s=0;!(o=t.next()).done;)o=o.value,l=r+jL(o,s++),a+=uA(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function fT(t,e,n){if(t==null)return t;var r=[],i=0;return uA(t,r,"","",function(o){return e.call(n,o,i++)}),r}function Fhe(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xl={current:null},dA={transition:null},Bhe={ReactCurrentDispatcher:Xl,ReactCurrentBatchConfig:dA,ReactCurrentOwner:i5};Jr.Children={map:fT,forEach:function(t,e,n){fT(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return fT(t,function(){e++}),e},toArray:function(t){return fT(t,function(e){return e})||[]},only:function(t){if(!o5(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Jr.Component=t1;Jr.Fragment=The;Jr.Profiler=Ahe;Jr.PureComponent=n5;Jr.StrictMode=Che;Jr.Suspense=Rhe;Jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bhe;Jr.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=_J({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=i5.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)SJ.call(e,l)&&!MJ.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];r.children=s}return{$$typeof:H2,type:t.type,key:i,ref:o,props:r,_owner:a}};Jr.createContext=function(t){return t={$$typeof:khe,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Phe,_context:t},t.Consumer=t};Jr.createElement=EJ;Jr.createFactory=function(t){var e=EJ.bind(null,t);return e.type=t,e};Jr.createRef=function(){return{current:null}};Jr.forwardRef=function(t){return{$$typeof:Ihe,render:t}};Jr.isValidElement=o5;Jr.lazy=function(t){return{$$typeof:Lhe,_payload:{_status:-1,_result:t},_init:Fhe}};Jr.memo=function(t,e){return{$$typeof:Ohe,type:t,compare:e===void 0?null:e}};Jr.startTransition=function(t){var e=dA.transition;dA.transition={};try{t()}finally{dA.transition=e}};Jr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Jr.useCallback=function(t,e){return Xl.current.useCallback(t,e)};Jr.useContext=function(t){return Xl.current.useContext(t)};Jr.useDebugValue=function(){};Jr.useDeferredValue=function(t){return Xl.current.useDeferredValue(t)};Jr.useEffect=function(t,e){return Xl.current.useEffect(t,e)};Jr.useId=function(){return Xl.current.useId()};Jr.useImperativeHandle=function(t,e,n){return Xl.current.useImperativeHandle(t,e,n)};Jr.useInsertionEffect=function(t,e){return Xl.current.useInsertionEffect(t,e)};Jr.useLayoutEffect=function(t,e){return Xl.current.useLayoutEffect(t,e)};Jr.useMemo=function(t,e){return Xl.current.useMemo(t,e)};Jr.useReducer=function(t,e,n){return Xl.current.useReducer(t,e,n)};Jr.useRef=function(t){return Xl.current.useRef(t)};Jr.useState=function(t){return Xl.current.useState(t)};Jr.useSyncExternalStore=function(t,e,n){return Xl.current.useSyncExternalStore(t,e,n)};Jr.useTransition=function(){return Xl.current.useTransition()};Jr.version="18.2.0";vJ.exports=Jr;var W=vJ.exports;const Ze=_i(W),KA=Mhe({__proto__:null,default:Ze},[W]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $he=W,jhe=Symbol.for("react.element"),Uhe=Symbol.for("react.fragment"),Vhe=Object.prototype.hasOwnProperty,Whe=$he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hhe={key:!0,ref:!0,__self:!0,__source:!0};function TJ(t,e,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Vhe.call(e,r)&&!Hhe.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:jhe,type:t,key:o,ref:a,props:i,_owner:Whe.current}}sI.Fragment=Uhe;sI.jsx=TJ;sI.jsxs=TJ;yJ.exports=sI;var F=yJ.exports,CJ={exports:{}},_u={},AJ={exports:{}},PJ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(te,he){var ve=te.length;te.push(he);e:for(;0<ve;){var ze=ve-1>>>1,Ue=te[ze];if(0<i(Ue,he))te[ze]=he,te[ve]=Ue,ve=ze;else break e}}function n(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var he=te[0],ve=te.pop();if(ve!==he){te[0]=ve;e:for(var ze=0,Ue=te.length,rt=Ue>>>1;ze<rt;){var Be=2*(ze+1)-1,st=te[Be],ct=Be+1,Dt=te[ct];if(0>i(st,ve))ct<Ue&&0>i(Dt,st)?(te[ze]=Dt,te[ct]=ve,ze=ct):(te[ze]=st,te[Be]=ve,ze=Be);else if(ct<Ue&&0>i(Dt,ve))te[ze]=Dt,te[ct]=ve,ze=ct;else break e}}return he}function i(te,he){var ve=te.sortIndex-he.sortIndex;return ve!==0?ve:te.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var l=[],c=[],h=1,p=null,g=3,v=!1,x=!1,b=!1,M=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(te){for(var he=n(c);he!==null;){if(he.callback===null)r(c);else if(he.startTime<=te)r(c),he.sortIndex=he.expirationTime,e(l,he);else break;he=n(c)}}function I(te){if(b=!1,C(te),!x)if(n(l)!==null)x=!0,fe(R);else{var he=n(c);he!==null&&xe(I,he.startTime-te)}}function R(te,he){x=!1,b&&(b=!1,w(U),U=-1),v=!0;var ve=g;try{for(C(he),p=n(l);p!==null&&(!(p.expirationTime>he)||te&&!X());){var ze=p.callback;if(typeof ze=="function"){p.callback=null,g=p.priorityLevel;var Ue=ze(p.expirationTime<=he);he=t.unstable_now(),typeof Ue=="function"?p.callback=Ue:p===n(l)&&r(l),C(he)}else r(l);p=n(l)}if(p!==null)var rt=!0;else{var Be=n(c);Be!==null&&xe(I,Be.startTime-he),rt=!1}return rt}finally{p=null,g=ve,v=!1}}var O=!1,B=null,U=-1,Z=5,j=-1;function X(){return!(t.unstable_now()-j<Z)}function le(){if(B!==null){var te=t.unstable_now();j=te;var he=!0;try{he=B(!0,te)}finally{he?me():(O=!1,B=null)}}else O=!1}var me;if(typeof T=="function")me=function(){T(le)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,ce=ie.port2;ie.port1.onmessage=le,me=function(){ce.postMessage(null)}}else me=function(){M(le,0)};function fe(te){B=te,O||(O=!0,me())}function xe(te,he){U=M(function(){te(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_continueExecution=function(){x||v||(x=!0,fe(R))},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(te){switch(g){case 1:case 2:case 3:var he=3;break;default:he=g}var ve=g;g=he;try{return te()}finally{g=ve}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(te,he){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ve=g;g=te;try{return he()}finally{g=ve}},t.unstable_scheduleCallback=function(te,he,ve){var ze=t.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?ze+ve:ze):ve=ze,te){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=ve+Ue,te={id:h++,callback:he,priorityLevel:te,startTime:ve,expirationTime:Ue,sortIndex:-1},ve>ze?(te.sortIndex=ve,e(c,te),n(l)===null&&te===n(c)&&(b?(w(U),U=-1):b=!0,xe(I,ve-ze))):(te.sortIndex=Ue,e(l,te),x||v||(x=!0,fe(R))),te},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(te){var he=g;return function(){var ve=g;g=he;try{return te.apply(this,arguments)}finally{g=ve}}}})(PJ);AJ.exports=PJ;var Ghe=AJ.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kJ=W,hu=Ghe;function hn(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var IJ=new Set,tM={};function B0(t,e){ob(t,e),ob(t+"Capture",e)}function ob(t,e){for(tM[t]=e,t=0;t<e.length;t++)IJ.add(e[t])}var $p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),iz=Object.prototype.hasOwnProperty,qhe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,WV={},HV={};function Yhe(t){return iz.call(HV,t)?!0:iz.call(WV,t)?!1:qhe.test(t)?HV[t]=!0:(WV[t]=!0,!1)}function Xhe(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Khe(t,e,n,r){if(e===null||typeof e>"u"||Xhe(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Kl(t,e,n,r,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Ba={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ba[t]=new Kl(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ba[e]=new Kl(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ba[t]=new Kl(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ba[t]=new Kl(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ba[t]=new Kl(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ba[t]=new Kl(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ba[t]=new Kl(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ba[t]=new Kl(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ba[t]=new Kl(t,5,!1,t.toLowerCase(),null,!1,!1)});var s5=/[\-:]([a-z])/g;function a5(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(s5,a5);Ba[e]=new Kl(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(s5,a5);Ba[e]=new Kl(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(s5,a5);Ba[e]=new Kl(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ba[t]=new Kl(t,1,!1,t.toLowerCase(),null,!1,!1)});Ba.xlinkHref=new Kl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ba[t]=new Kl(t,1,!1,t.toLowerCase(),null,!0,!0)});function l5(t,e,n,r){var i=Ba.hasOwnProperty(e)?Ba[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Khe(e,n,i,r)&&(n=null),r||i===null?Yhe(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var nm=kJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hT=Symbol.for("react.element"),l_=Symbol.for("react.portal"),c_=Symbol.for("react.fragment"),c5=Symbol.for("react.strict_mode"),oz=Symbol.for("react.profiler"),RJ=Symbol.for("react.provider"),OJ=Symbol.for("react.context"),u5=Symbol.for("react.forward_ref"),sz=Symbol.for("react.suspense"),az=Symbol.for("react.suspense_list"),d5=Symbol.for("react.memo"),vg=Symbol.for("react.lazy"),LJ=Symbol.for("react.offscreen"),GV=Symbol.iterator;function mw(t){return t===null||typeof t!="object"?null:(t=GV&&t[GV]||t["@@iterator"],typeof t=="function"?t:null)}var qo=Object.assign,UL;function dS(t){if(UL===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);UL=e&&e[1]||""}return`
`+UL+t}var VL=!1;function WL(t,e){if(!t||VL)return"";VL=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=s);break}}}finally{VL=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?dS(t):""}function Zhe(t){switch(t.tag){case 5:return dS(t.type);case 16:return dS("Lazy");case 13:return dS("Suspense");case 19:return dS("SuspenseList");case 0:case 2:case 15:return t=WL(t.type,!1),t;case 11:return t=WL(t.type.render,!1),t;case 1:return t=WL(t.type,!0),t;default:return""}}function lz(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case c_:return"Fragment";case l_:return"Portal";case oz:return"Profiler";case c5:return"StrictMode";case sz:return"Suspense";case az:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case OJ:return(t.displayName||"Context")+".Consumer";case RJ:return(t._context.displayName||"Context")+".Provider";case u5:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case d5:return e=t.displayName||null,e!==null?e:lz(t.type)||"Memo";case vg:e=t._payload,t=t._init;try{return lz(t(e))}catch{}}return null}function Jhe(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lz(e);case 8:return e===c5?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ty(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function DJ(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Qhe(t){var e=DJ(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pT(t){t._valueTracker||(t._valueTracker=Qhe(t))}function NJ(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=DJ(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ZA(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function cz(t,e){var n=e.checked;return qo({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function qV(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ty(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function zJ(t,e){e=e.checked,e!=null&&l5(t,"checked",e,!1)}function uz(t,e){zJ(t,e);var n=ty(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?dz(t,e.type,n):e.hasOwnProperty("defaultValue")&&dz(t,e.type,ty(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function YV(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function dz(t,e,n){(e!=="number"||ZA(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fS=Array.isArray;function B_(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ty(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function fz(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(hn(91));return qo({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function XV(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(hn(92));if(fS(n)){if(1<n.length)throw Error(hn(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ty(n)}}function FJ(t,e){var n=ty(e.value),r=ty(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function KV(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function BJ(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hz(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?BJ(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var mT,$J=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(mT=mT||document.createElement("div"),mT.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mT.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function nM(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var MS={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},epe=["Webkit","ms","Moz","O"];Object.keys(MS).forEach(function(t){epe.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),MS[e]=MS[t]})});function jJ(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||MS.hasOwnProperty(t)&&MS[t]?(""+e).trim():e+"px"}function UJ(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=jJ(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var tpe=qo({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pz(t,e){if(e){if(tpe[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(hn(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(hn(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(hn(61))}if(e.style!=null&&typeof e.style!="object")throw Error(hn(62))}}function mz(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gz=null;function f5(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yz=null,$_=null,j_=null;function ZV(t){if(t=Y2(t)){if(typeof yz!="function")throw Error(hn(280));var e=t.stateNode;e&&(e=dI(e),yz(t.stateNode,t.type,e))}}function VJ(t){$_?j_?j_.push(t):j_=[t]:$_=t}function WJ(){if($_){var t=$_,e=j_;if(j_=$_=null,ZV(t),e)for(t=0;t<e.length;t++)ZV(e[t])}}function HJ(t,e){return t(e)}function GJ(){}var HL=!1;function qJ(t,e,n){if(HL)return t(e,n);HL=!0;try{return HJ(t,e,n)}finally{HL=!1,($_!==null||j_!==null)&&(GJ(),WJ())}}function rM(t,e){var n=t.stateNode;if(n===null)return null;var r=dI(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(hn(231,e,typeof n));return n}var vz=!1;if($p)try{var gw={};Object.defineProperty(gw,"passive",{get:function(){vz=!0}}),window.addEventListener("test",gw,gw),window.removeEventListener("test",gw,gw)}catch{vz=!1}function npe(t,e,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var ES=!1,JA=null,QA=!1,xz=null,rpe={onError:function(t){ES=!0,JA=t}};function ipe(t,e,n,r,i,o,a,s,l){ES=!1,JA=null,npe.apply(rpe,arguments)}function ope(t,e,n,r,i,o,a,s,l){if(ipe.apply(this,arguments),ES){if(ES){var c=JA;ES=!1,JA=null}else throw Error(hn(198));QA||(QA=!0,xz=c)}}function $0(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function YJ(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function JV(t){if($0(t)!==t)throw Error(hn(188))}function spe(t){var e=t.alternate;if(!e){if(e=$0(t),e===null)throw Error(hn(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return JV(i),t;if(o===r)return JV(i),e;o=o.sibling}throw Error(hn(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(hn(189))}}if(n.alternate!==r)throw Error(hn(190))}if(n.tag!==3)throw Error(hn(188));return n.stateNode.current===n?t:e}function XJ(t){return t=spe(t),t!==null?KJ(t):null}function KJ(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=KJ(t);if(e!==null)return e;t=t.sibling}return null}var ZJ=hu.unstable_scheduleCallback,QV=hu.unstable_cancelCallback,ape=hu.unstable_shouldYield,lpe=hu.unstable_requestPaint,_s=hu.unstable_now,cpe=hu.unstable_getCurrentPriorityLevel,h5=hu.unstable_ImmediatePriority,JJ=hu.unstable_UserBlockingPriority,eP=hu.unstable_NormalPriority,upe=hu.unstable_LowPriority,QJ=hu.unstable_IdlePriority,aI=null,ph=null;function dpe(t){if(ph&&typeof ph.onCommitFiberRoot=="function")try{ph.onCommitFiberRoot(aI,t,void 0,(t.current.flags&128)===128)}catch{}}var uf=Math.clz32?Math.clz32:ppe,fpe=Math.log,hpe=Math.LN2;function ppe(t){return t>>>=0,t===0?32:31-(fpe(t)/hpe|0)|0}var gT=64,yT=4194304;function hS(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function tP(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var s=a&~i;s!==0?r=hS(s):(o&=a,o!==0&&(r=hS(o)))}else a=n&~i,a!==0?r=hS(a):o!==0&&(r=hS(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-uf(e),i=1<<n,r|=t[n],e&=~i;return r}function mpe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gpe(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-uf(o),s=1<<a,l=i[a];l===-1?(!(s&n)||s&r)&&(i[a]=mpe(s,e)):l<=e&&(t.expiredLanes|=s),o&=~s}}function _z(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function eQ(){var t=gT;return gT<<=1,!(gT&4194240)&&(gT=64),t}function GL(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function G2(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-uf(e),t[e]=n}function ype(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-uf(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function p5(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-uf(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Fi=0;function tQ(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var nQ,m5,rQ,iQ,oQ,bz=!1,vT=[],Ng=null,zg=null,Fg=null,iM=new Map,oM=new Map,bg=[],vpe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function eW(t,e){switch(t){case"focusin":case"focusout":Ng=null;break;case"dragenter":case"dragleave":zg=null;break;case"mouseover":case"mouseout":Fg=null;break;case"pointerover":case"pointerout":iM.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":oM.delete(e.pointerId)}}function yw(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Y2(e),e!==null&&m5(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function xpe(t,e,n,r,i){switch(e){case"focusin":return Ng=yw(Ng,t,e,n,r,i),!0;case"dragenter":return zg=yw(zg,t,e,n,r,i),!0;case"mouseover":return Fg=yw(Fg,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return iM.set(o,yw(iM.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,oM.set(o,yw(oM.get(o)||null,t,e,n,r,i)),!0}return!1}function sQ(t){var e=Hv(t.target);if(e!==null){var n=$0(e);if(n!==null){if(e=n.tag,e===13){if(e=YJ(n),e!==null){t.blockedOn=e,oQ(t.priority,function(){rQ(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fA(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wz(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);gz=r,n.target.dispatchEvent(r),gz=null}else return e=Y2(n),e!==null&&m5(e),t.blockedOn=n,!1;e.shift()}return!0}function tW(t,e,n){fA(t)&&n.delete(e)}function _pe(){bz=!1,Ng!==null&&fA(Ng)&&(Ng=null),zg!==null&&fA(zg)&&(zg=null),Fg!==null&&fA(Fg)&&(Fg=null),iM.forEach(tW),oM.forEach(tW)}function vw(t,e){t.blockedOn===e&&(t.blockedOn=null,bz||(bz=!0,hu.unstable_scheduleCallback(hu.unstable_NormalPriority,_pe)))}function sM(t){function e(i){return vw(i,t)}if(0<vT.length){vw(vT[0],t);for(var n=1;n<vT.length;n++){var r=vT[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ng!==null&&vw(Ng,t),zg!==null&&vw(zg,t),Fg!==null&&vw(Fg,t),iM.forEach(e),oM.forEach(e),n=0;n<bg.length;n++)r=bg[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<bg.length&&(n=bg[0],n.blockedOn===null);)sQ(n),n.blockedOn===null&&bg.shift()}var U_=nm.ReactCurrentBatchConfig,nP=!0;function bpe(t,e,n,r){var i=Fi,o=U_.transition;U_.transition=null;try{Fi=1,g5(t,e,n,r)}finally{Fi=i,U_.transition=o}}function wpe(t,e,n,r){var i=Fi,o=U_.transition;U_.transition=null;try{Fi=4,g5(t,e,n,r)}finally{Fi=i,U_.transition=o}}function g5(t,e,n,r){if(nP){var i=wz(t,e,n,r);if(i===null)nD(t,e,r,rP,n),eW(t,r);else if(xpe(i,t,e,n,r))r.stopPropagation();else if(eW(t,r),e&4&&-1<vpe.indexOf(t)){for(;i!==null;){var o=Y2(i);if(o!==null&&nQ(o),o=wz(t,e,n,r),o===null&&nD(t,e,r,rP,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else nD(t,e,r,null,n)}}var rP=null;function wz(t,e,n,r){if(rP=null,t=f5(r),t=Hv(t),t!==null)if(e=$0(t),e===null)t=null;else if(n=e.tag,n===13){if(t=YJ(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rP=t,null}function aQ(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cpe()){case h5:return 1;case JJ:return 4;case eP:case upe:return 16;case QJ:return 536870912;default:return 16}default:return 16}}var Tg=null,y5=null,hA=null;function lQ(){if(hA)return hA;var t,e=y5,n=e.length,r,i="value"in Tg?Tg.value:Tg.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[o-r];r++);return hA=i.slice(t,1<r?1-r:void 0)}function pA(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xT(){return!0}function nW(){return!1}function bu(t){function e(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?xT:nW,this.isPropagationStopped=nW,this}return qo(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xT)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xT)},persist:function(){},isPersistent:xT}),e}var n1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},v5=bu(n1),q2=qo({},n1,{view:0,detail:0}),Spe=bu(q2),qL,YL,xw,lI=qo({},q2,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:x5,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xw&&(xw&&t.type==="mousemove"?(qL=t.screenX-xw.screenX,YL=t.screenY-xw.screenY):YL=qL=0,xw=t),qL)},movementY:function(t){return"movementY"in t?t.movementY:YL}}),rW=bu(lI),Mpe=qo({},lI,{dataTransfer:0}),Epe=bu(Mpe),Tpe=qo({},q2,{relatedTarget:0}),XL=bu(Tpe),Cpe=qo({},n1,{animationName:0,elapsedTime:0,pseudoElement:0}),Ape=bu(Cpe),Ppe=qo({},n1,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kpe=bu(Ppe),Ipe=qo({},n1,{data:0}),iW=bu(Ipe),Rpe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ope={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lpe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dpe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Lpe[t])?!!e[t]:!1}function x5(){return Dpe}var Npe=qo({},q2,{key:function(t){if(t.key){var e=Rpe[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=pA(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ope[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:x5,charCode:function(t){return t.type==="keypress"?pA(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?pA(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zpe=bu(Npe),Fpe=qo({},lI,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oW=bu(Fpe),Bpe=qo({},q2,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:x5}),$pe=bu(Bpe),jpe=qo({},n1,{propertyName:0,elapsedTime:0,pseudoElement:0}),Upe=bu(jpe),Vpe=qo({},lI,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Wpe=bu(Vpe),Hpe=[9,13,27,32],_5=$p&&"CompositionEvent"in window,TS=null;$p&&"documentMode"in document&&(TS=document.documentMode);var Gpe=$p&&"TextEvent"in window&&!TS,cQ=$p&&(!_5||TS&&8<TS&&11>=TS),sW=" ",aW=!1;function uQ(t,e){switch(t){case"keyup":return Hpe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dQ(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var u_=!1;function qpe(t,e){switch(t){case"compositionend":return dQ(e);case"keypress":return e.which!==32?null:(aW=!0,sW);case"textInput":return t=e.data,t===sW&&aW?null:t;default:return null}}function Ype(t,e){if(u_)return t==="compositionend"||!_5&&uQ(t,e)?(t=lQ(),hA=y5=Tg=null,u_=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return cQ&&e.locale!=="ko"?null:e.data;default:return null}}var Xpe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lW(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Xpe[t.type]:e==="textarea"}function fQ(t,e,n,r){VJ(r),e=iP(e,"onChange"),0<e.length&&(n=new v5("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var CS=null,aM=null;function Kpe(t){SQ(t,0)}function cI(t){var e=h_(t);if(NJ(e))return t}function Zpe(t,e){if(t==="change")return e}var hQ=!1;if($p){var KL;if($p){var ZL="oninput"in document;if(!ZL){var cW=document.createElement("div");cW.setAttribute("oninput","return;"),ZL=typeof cW.oninput=="function"}KL=ZL}else KL=!1;hQ=KL&&(!document.documentMode||9<document.documentMode)}function uW(){CS&&(CS.detachEvent("onpropertychange",pQ),aM=CS=null)}function pQ(t){if(t.propertyName==="value"&&cI(aM)){var e=[];fQ(e,aM,t,f5(t)),qJ(Kpe,e)}}function Jpe(t,e,n){t==="focusin"?(uW(),CS=e,aM=n,CS.attachEvent("onpropertychange",pQ)):t==="focusout"&&uW()}function Qpe(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cI(aM)}function eme(t,e){if(t==="click")return cI(e)}function tme(t,e){if(t==="input"||t==="change")return cI(e)}function nme(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hf=typeof Object.is=="function"?Object.is:nme;function lM(t,e){if(hf(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!iz.call(e,i)||!hf(t[i],e[i]))return!1}return!0}function dW(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fW(t,e){var n=dW(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dW(n)}}function mQ(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?mQ(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function gQ(){for(var t=window,e=ZA();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ZA(t.document)}return e}function b5(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function rme(t){var e=gQ(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&mQ(n.ownerDocument.documentElement,n)){if(r!==null&&b5(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=fW(n,o);var a=fW(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ime=$p&&"documentMode"in document&&11>=document.documentMode,d_=null,Sz=null,AS=null,Mz=!1;function hW(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mz||d_==null||d_!==ZA(r)||(r=d_,"selectionStart"in r&&b5(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),AS&&lM(AS,r)||(AS=r,r=iP(Sz,"onSelect"),0<r.length&&(e=new v5("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=d_)))}function _T(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var f_={animationend:_T("Animation","AnimationEnd"),animationiteration:_T("Animation","AnimationIteration"),animationstart:_T("Animation","AnimationStart"),transitionend:_T("Transition","TransitionEnd")},JL={},yQ={};$p&&(yQ=document.createElement("div").style,"AnimationEvent"in window||(delete f_.animationend.animation,delete f_.animationiteration.animation,delete f_.animationstart.animation),"TransitionEvent"in window||delete f_.transitionend.transition);function uI(t){if(JL[t])return JL[t];if(!f_[t])return t;var e=f_[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in yQ)return JL[t]=e[n];return t}var vQ=uI("animationend"),xQ=uI("animationiteration"),_Q=uI("animationstart"),bQ=uI("transitionend"),wQ=new Map,pW="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dy(t,e){wQ.set(t,e),B0(e,[t])}for(var QL=0;QL<pW.length;QL++){var eD=pW[QL],ome=eD.toLowerCase(),sme=eD[0].toUpperCase()+eD.slice(1);dy(ome,"on"+sme)}dy(vQ,"onAnimationEnd");dy(xQ,"onAnimationIteration");dy(_Q,"onAnimationStart");dy("dblclick","onDoubleClick");dy("focusin","onFocus");dy("focusout","onBlur");dy(bQ,"onTransitionEnd");ob("onMouseEnter",["mouseout","mouseover"]);ob("onMouseLeave",["mouseout","mouseover"]);ob("onPointerEnter",["pointerout","pointerover"]);ob("onPointerLeave",["pointerout","pointerover"]);B0("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));B0("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));B0("onBeforeInput",["compositionend","keypress","textInput","paste"]);B0("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));B0("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));B0("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pS="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ame=new Set("cancel close invalid load scroll toggle".split(" ").concat(pS));function mW(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ope(r,e,void 0,t),t.currentTarget=null}function SQ(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;mW(i,s,c),o=l}else for(a=0;a<r.length;a++){if(s=r[a],l=s.instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;mW(i,s,c),o=l}}}if(QA)throw t=xz,QA=!1,xz=null,t}function _o(t,e){var n=e[Pz];n===void 0&&(n=e[Pz]=new Set);var r=t+"__bubble";n.has(r)||(MQ(e,t,2,!1),n.add(r))}function tD(t,e,n){var r=0;e&&(r|=4),MQ(n,t,r,e)}var bT="_reactListening"+Math.random().toString(36).slice(2);function cM(t){if(!t[bT]){t[bT]=!0,IJ.forEach(function(n){n!=="selectionchange"&&(ame.has(n)||tD(n,!1,t),tD(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bT]||(e[bT]=!0,tD("selectionchange",!1,e))}}function MQ(t,e,n,r){switch(aQ(e)){case 1:var i=bpe;break;case 4:i=wpe;break;default:i=g5}n=i.bind(null,e,n,t),i=void 0,!vz||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function nD(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;s!==null;){if(a=Hv(s),a===null)return;if(l=a.tag,l===5||l===6){r=o=a;continue e}s=s.parentNode}}r=r.return}qJ(function(){var c=o,h=f5(n),p=[];e:{var g=wQ.get(t);if(g!==void 0){var v=v5,x=t;switch(t){case"keypress":if(pA(n)===0)break e;case"keydown":case"keyup":v=zpe;break;case"focusin":x="focus",v=XL;break;case"focusout":x="blur",v=XL;break;case"beforeblur":case"afterblur":v=XL;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=rW;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Epe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=$pe;break;case vQ:case xQ:case _Q:v=Ape;break;case bQ:v=Upe;break;case"scroll":v=Spe;break;case"wheel":v=Wpe;break;case"copy":case"cut":case"paste":v=kpe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=oW}var b=(e&4)!==0,M=!b&&t==="scroll",w=b?g!==null?g+"Capture":null:g;b=[];for(var T=c,C;T!==null;){C=T;var I=C.stateNode;if(C.tag===5&&I!==null&&(C=I,w!==null&&(I=rM(T,w),I!=null&&b.push(uM(T,I,C)))),M)break;T=T.return}0<b.length&&(g=new v(g,x,null,n,h),p.push({event:g,listeners:b}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",g&&n!==gz&&(x=n.relatedTarget||n.fromElement)&&(Hv(x)||x[jp]))break e;if((v||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,v?(x=n.relatedTarget||n.toElement,v=c,x=x?Hv(x):null,x!==null&&(M=$0(x),x!==M||x.tag!==5&&x.tag!==6)&&(x=null)):(v=null,x=c),v!==x)){if(b=rW,I="onMouseLeave",w="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(b=oW,I="onPointerLeave",w="onPointerEnter",T="pointer"),M=v==null?g:h_(v),C=x==null?g:h_(x),g=new b(I,T+"leave",v,n,h),g.target=M,g.relatedTarget=C,I=null,Hv(h)===c&&(b=new b(w,T+"enter",x,n,h),b.target=C,b.relatedTarget=M,I=b),M=I,v&&x)t:{for(b=v,w=x,T=0,C=b;C;C=gx(C))T++;for(C=0,I=w;I;I=gx(I))C++;for(;0<T-C;)b=gx(b),T--;for(;0<C-T;)w=gx(w),C--;for(;T--;){if(b===w||w!==null&&b===w.alternate)break t;b=gx(b),w=gx(w)}b=null}else b=null;v!==null&&gW(p,g,v,b,!1),x!==null&&M!==null&&gW(p,M,x,b,!0)}}e:{if(g=c?h_(c):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var R=Zpe;else if(lW(g))if(hQ)R=tme;else{R=Qpe;var O=Jpe}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(R=eme);if(R&&(R=R(t,c))){fQ(p,R,n,h);break e}O&&O(t,g,c),t==="focusout"&&(O=g._wrapperState)&&O.controlled&&g.type==="number"&&dz(g,"number",g.value)}switch(O=c?h_(c):window,t){case"focusin":(lW(O)||O.contentEditable==="true")&&(d_=O,Sz=c,AS=null);break;case"focusout":AS=Sz=d_=null;break;case"mousedown":Mz=!0;break;case"contextmenu":case"mouseup":case"dragend":Mz=!1,hW(p,n,h);break;case"selectionchange":if(ime)break;case"keydown":case"keyup":hW(p,n,h)}var B;if(_5)e:{switch(t){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else u_?uQ(t,n)&&(U="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(U="onCompositionStart");U&&(cQ&&n.locale!=="ko"&&(u_||U!=="onCompositionStart"?U==="onCompositionEnd"&&u_&&(B=lQ()):(Tg=h,y5="value"in Tg?Tg.value:Tg.textContent,u_=!0)),O=iP(c,U),0<O.length&&(U=new iW(U,t,null,n,h),p.push({event:U,listeners:O}),B?U.data=B:(B=dQ(n),B!==null&&(U.data=B)))),(B=Gpe?qpe(t,n):Ype(t,n))&&(c=iP(c,"onBeforeInput"),0<c.length&&(h=new iW("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:c}),h.data=B))}SQ(p,e)})}function uM(t,e,n){return{instance:t,listener:e,currentTarget:n}}function iP(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=rM(t,n),o!=null&&r.unshift(uM(t,o,i)),o=rM(t,e),o!=null&&r.push(uM(t,o,i))),t=t.return}return r}function gx(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gW(t,e,n,r,i){for(var o=e._reactName,a=[];n!==null&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&c!==null&&(s=c,i?(l=rM(n,o),l!=null&&a.unshift(uM(n,l,s))):i||(l=rM(n,o),l!=null&&a.push(uM(n,l,s)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var lme=/\r\n?/g,cme=/\u0000|\uFFFD/g;function yW(t){return(typeof t=="string"?t:""+t).replace(lme,`
`).replace(cme,"")}function wT(t,e,n){if(e=yW(e),yW(t)!==e&&n)throw Error(hn(425))}function oP(){}var Ez=null,Tz=null;function Cz(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Az=typeof setTimeout=="function"?setTimeout:void 0,ume=typeof clearTimeout=="function"?clearTimeout:void 0,vW=typeof Promise=="function"?Promise:void 0,dme=typeof queueMicrotask=="function"?queueMicrotask:typeof vW<"u"?function(t){return vW.resolve(null).then(t).catch(fme)}:Az;function fme(t){setTimeout(function(){throw t})}function rD(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),sM(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);sM(e)}function Bg(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function xW(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var r1=Math.random().toString(36).slice(2),lh="__reactFiber$"+r1,dM="__reactProps$"+r1,jp="__reactContainer$"+r1,Pz="__reactEvents$"+r1,hme="__reactListeners$"+r1,pme="__reactHandles$"+r1;function Hv(t){var e=t[lh];if(e)return e;for(var n=t.parentNode;n;){if(e=n[jp]||n[lh]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=xW(t);t!==null;){if(n=t[lh])return n;t=xW(t)}return e}t=n,n=t.parentNode}return null}function Y2(t){return t=t[lh]||t[jp],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function h_(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(hn(33))}function dI(t){return t[dM]||null}var kz=[],p_=-1;function fy(t){return{current:t}}function So(t){0>p_||(t.current=kz[p_],kz[p_]=null,p_--)}function po(t,e){p_++,kz[p_]=t.current,t.current=e}var ny={},_l=fy(ny),wc=fy(!1),w0=ny;function sb(t,e){var n=t.type.contextTypes;if(!n)return ny;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Sc(t){return t=t.childContextTypes,t!=null}function sP(){So(wc),So(_l)}function _W(t,e,n){if(_l.current!==ny)throw Error(hn(168));po(_l,e),po(wc,n)}function EQ(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(hn(108,Jhe(t)||"Unknown",i));return qo({},n,r)}function aP(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ny,w0=_l.current,po(_l,t),po(wc,wc.current),!0}function bW(t,e,n){var r=t.stateNode;if(!r)throw Error(hn(169));n?(t=EQ(t,e,w0),r.__reactInternalMemoizedMergedChildContext=t,So(wc),So(_l),po(_l,t)):So(wc),po(wc,n)}var vp=null,fI=!1,iD=!1;function TQ(t){vp===null?vp=[t]:vp.push(t)}function mme(t){fI=!0,TQ(t)}function hy(){if(!iD&&vp!==null){iD=!0;var t=0,e=Fi;try{var n=vp;for(Fi=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}vp=null,fI=!1}catch(i){throw vp!==null&&(vp=vp.slice(t+1)),ZJ(h5,hy),i}finally{Fi=e,iD=!1}}return null}var m_=[],g_=0,lP=null,cP=0,Xu=[],Ku=0,S0=null,Sp=1,Mp="";function Pv(t,e){m_[g_++]=cP,m_[g_++]=lP,lP=t,cP=e}function CQ(t,e,n){Xu[Ku++]=Sp,Xu[Ku++]=Mp,Xu[Ku++]=S0,S0=t;var r=Sp;t=Mp;var i=32-uf(r)-1;r&=~(1<<i),n+=1;var o=32-uf(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Sp=1<<32-uf(e)+i|n<<i|r,Mp=o+t}else Sp=1<<o|n<<i|r,Mp=t}function w5(t){t.return!==null&&(Pv(t,1),CQ(t,1,0))}function S5(t){for(;t===lP;)lP=m_[--g_],m_[g_]=null,cP=m_[--g_],m_[g_]=null;for(;t===S0;)S0=Xu[--Ku],Xu[Ku]=null,Mp=Xu[--Ku],Xu[Ku]=null,Sp=Xu[--Ku],Xu[Ku]=null}var cu=null,au=null,Ro=!1,Qd=null;function AQ(t,e){var n=td(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function wW(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,cu=t,au=Bg(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,cu=t,au=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=S0!==null?{id:Sp,overflow:Mp}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=td(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,cu=t,au=null,!0):!1;default:return!1}}function Iz(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Rz(t){if(Ro){var e=au;if(e){var n=e;if(!wW(t,e)){if(Iz(t))throw Error(hn(418));e=Bg(n.nextSibling);var r=cu;e&&wW(t,e)?AQ(r,n):(t.flags=t.flags&-4097|2,Ro=!1,cu=t)}}else{if(Iz(t))throw Error(hn(418));t.flags=t.flags&-4097|2,Ro=!1,cu=t}}}function SW(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cu=t}function ST(t){if(t!==cu)return!1;if(!Ro)return SW(t),Ro=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Cz(t.type,t.memoizedProps)),e&&(e=au)){if(Iz(t))throw PQ(),Error(hn(418));for(;e;)AQ(t,e),e=Bg(e.nextSibling)}if(SW(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(hn(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){au=Bg(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}au=null}}else au=cu?Bg(t.stateNode.nextSibling):null;return!0}function PQ(){for(var t=au;t;)t=Bg(t.nextSibling)}function ab(){au=cu=null,Ro=!1}function M5(t){Qd===null?Qd=[t]:Qd.push(t)}var gme=nm.ReactCurrentBatchConfig;function Yd(t,e){if(t&&t.defaultProps){e=qo({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var uP=fy(null),dP=null,y_=null,E5=null;function T5(){E5=y_=dP=null}function C5(t){var e=uP.current;So(uP),t._currentValue=e}function Oz(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function V_(t,e){dP=t,E5=y_=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_c=!0),t.firstContext=null)}function ud(t){var e=t._currentValue;if(E5!==t)if(t={context:t,memoizedValue:e,next:null},y_===null){if(dP===null)throw Error(hn(308));y_=t,dP.dependencies={lanes:0,firstContext:t}}else y_=y_.next=t;return e}var Gv=null;function A5(t){Gv===null?Gv=[t]:Gv.push(t)}function kQ(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,A5(e)):(n.next=i.next,i.next=n),e.interleaved=n,Up(t,r)}function Up(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xg=!1;function P5(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IQ(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Lp(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function $g(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,di&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Up(t,n)}return i=r.interleaved,i===null?(e.next=e,A5(r)):(e.next=i.next,i.next=e),r.interleaved=e,Up(t,n)}function mA(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,p5(t,n)}}function MW(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fP(t,e,n,r){var i=t.updateQueue;xg=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,c=l.next;l.next=null,a===null?o=c:a.next=c,a=l;var h=t.alternate;h!==null&&(h=h.updateQueue,s=h.lastBaseUpdate,s!==a&&(s===null?h.firstBaseUpdate=c:s.next=c,h.lastBaseUpdate=l))}if(o!==null){var p=i.baseState;a=0,h=c=l=null,s=o;do{var g=s.lane,v=s.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:v,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var x=t,b=s;switch(g=e,v=n,b.tag){case 1:if(x=b.payload,typeof x=="function"){p=x.call(v,p,g);break e}p=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=b.payload,g=typeof x=="function"?x.call(v,p,g):x,g==null)break e;p=qo({},p,g);break e;case 2:xg=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[s]:g.push(s))}else v={eventTime:v,lane:g,tag:s.tag,payload:s.payload,callback:s.callback,next:null},h===null?(c=h=v,l=p):h=h.next=v,a|=g;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;g=s,s=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(h===null&&(l=p),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);E0|=a,t.lanes=a,t.memoizedState=p}}function EW(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(hn(191,i));i.call(r)}}}var RQ=new kJ.Component().refs;function Lz(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:qo({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var hI={isMounted:function(t){return(t=t._reactInternals)?$0(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Gl(),i=Ug(t),o=Lp(r,i);o.payload=e,n!=null&&(o.callback=n),e=$g(t,o,i),e!==null&&(df(e,t,i,r),mA(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Gl(),i=Ug(t),o=Lp(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=$g(t,o,i),e!==null&&(df(e,t,i,r),mA(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Gl(),r=Ug(t),i=Lp(n,r);i.tag=2,e!=null&&(i.callback=e),e=$g(t,i,r),e!==null&&(df(e,t,r,n),mA(e,t,r))}};function TW(t,e,n,r,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!lM(n,r)||!lM(i,o):!0}function OQ(t,e,n){var r=!1,i=ny,o=e.contextType;return typeof o=="object"&&o!==null?o=ud(o):(i=Sc(e)?w0:_l.current,r=e.contextTypes,o=(r=r!=null)?sb(t,i):ny),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hI,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function CW(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&hI.enqueueReplaceState(e,e.state,null)}function Dz(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=RQ,P5(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ud(o):(o=Sc(e)?w0:_l.current,i.context=sb(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Lz(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&hI.enqueueReplaceState(i,i.state,null),fP(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function _w(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(hn(309));var r=n.stateNode}if(!r)throw Error(hn(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var s=i.refs;s===RQ&&(s=i.refs={}),a===null?delete s[o]:s[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(hn(284));if(!n._owner)throw Error(hn(290,t))}return t}function MT(t,e){throw t=Object.prototype.toString.call(e),Error(hn(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function AW(t){var e=t._init;return e(t._payload)}function LQ(t){function e(w,T){if(t){var C=w.deletions;C===null?(w.deletions=[T],w.flags|=16):C.push(T)}}function n(w,T){if(!t)return null;for(;T!==null;)e(w,T),T=T.sibling;return null}function r(w,T){for(w=new Map;T!==null;)T.key!==null?w.set(T.key,T):w.set(T.index,T),T=T.sibling;return w}function i(w,T){return w=Vg(w,T),w.index=0,w.sibling=null,w}function o(w,T,C){return w.index=C,t?(C=w.alternate,C!==null?(C=C.index,C<T?(w.flags|=2,T):C):(w.flags|=2,T)):(w.flags|=1048576,T)}function a(w){return t&&w.alternate===null&&(w.flags|=2),w}function s(w,T,C,I){return T===null||T.tag!==6?(T=dD(C,w.mode,I),T.return=w,T):(T=i(T,C),T.return=w,T)}function l(w,T,C,I){var R=C.type;return R===c_?h(w,T,C.props.children,I,C.key):T!==null&&(T.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===vg&&AW(R)===T.type)?(I=i(T,C.props),I.ref=_w(w,T,C),I.return=w,I):(I=bA(C.type,C.key,C.props,null,w.mode,I),I.ref=_w(w,T,C),I.return=w,I)}function c(w,T,C,I){return T===null||T.tag!==4||T.stateNode.containerInfo!==C.containerInfo||T.stateNode.implementation!==C.implementation?(T=fD(C,w.mode,I),T.return=w,T):(T=i(T,C.children||[]),T.return=w,T)}function h(w,T,C,I,R){return T===null||T.tag!==7?(T=l0(C,w.mode,I,R),T.return=w,T):(T=i(T,C),T.return=w,T)}function p(w,T,C){if(typeof T=="string"&&T!==""||typeof T=="number")return T=dD(""+T,w.mode,C),T.return=w,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case hT:return C=bA(T.type,T.key,T.props,null,w.mode,C),C.ref=_w(w,null,T),C.return=w,C;case l_:return T=fD(T,w.mode,C),T.return=w,T;case vg:var I=T._init;return p(w,I(T._payload),C)}if(fS(T)||mw(T))return T=l0(T,w.mode,C,null),T.return=w,T;MT(w,T)}return null}function g(w,T,C,I){var R=T!==null?T.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return R!==null?null:s(w,T,""+C,I);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case hT:return C.key===R?l(w,T,C,I):null;case l_:return C.key===R?c(w,T,C,I):null;case vg:return R=C._init,g(w,T,R(C._payload),I)}if(fS(C)||mw(C))return R!==null?null:h(w,T,C,I,null);MT(w,C)}return null}function v(w,T,C,I,R){if(typeof I=="string"&&I!==""||typeof I=="number")return w=w.get(C)||null,s(T,w,""+I,R);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case hT:return w=w.get(I.key===null?C:I.key)||null,l(T,w,I,R);case l_:return w=w.get(I.key===null?C:I.key)||null,c(T,w,I,R);case vg:var O=I._init;return v(w,T,C,O(I._payload),R)}if(fS(I)||mw(I))return w=w.get(C)||null,h(T,w,I,R,null);MT(T,I)}return null}function x(w,T,C,I){for(var R=null,O=null,B=T,U=T=0,Z=null;B!==null&&U<C.length;U++){B.index>U?(Z=B,B=null):Z=B.sibling;var j=g(w,B,C[U],I);if(j===null){B===null&&(B=Z);break}t&&B&&j.alternate===null&&e(w,B),T=o(j,T,U),O===null?R=j:O.sibling=j,O=j,B=Z}if(U===C.length)return n(w,B),Ro&&Pv(w,U),R;if(B===null){for(;U<C.length;U++)B=p(w,C[U],I),B!==null&&(T=o(B,T,U),O===null?R=B:O.sibling=B,O=B);return Ro&&Pv(w,U),R}for(B=r(w,B);U<C.length;U++)Z=v(B,w,U,C[U],I),Z!==null&&(t&&Z.alternate!==null&&B.delete(Z.key===null?U:Z.key),T=o(Z,T,U),O===null?R=Z:O.sibling=Z,O=Z);return t&&B.forEach(function(X){return e(w,X)}),Ro&&Pv(w,U),R}function b(w,T,C,I){var R=mw(C);if(typeof R!="function")throw Error(hn(150));if(C=R.call(C),C==null)throw Error(hn(151));for(var O=R=null,B=T,U=T=0,Z=null,j=C.next();B!==null&&!j.done;U++,j=C.next()){B.index>U?(Z=B,B=null):Z=B.sibling;var X=g(w,B,j.value,I);if(X===null){B===null&&(B=Z);break}t&&B&&X.alternate===null&&e(w,B),T=o(X,T,U),O===null?R=X:O.sibling=X,O=X,B=Z}if(j.done)return n(w,B),Ro&&Pv(w,U),R;if(B===null){for(;!j.done;U++,j=C.next())j=p(w,j.value,I),j!==null&&(T=o(j,T,U),O===null?R=j:O.sibling=j,O=j);return Ro&&Pv(w,U),R}for(B=r(w,B);!j.done;U++,j=C.next())j=v(B,w,U,j.value,I),j!==null&&(t&&j.alternate!==null&&B.delete(j.key===null?U:j.key),T=o(j,T,U),O===null?R=j:O.sibling=j,O=j);return t&&B.forEach(function(le){return e(w,le)}),Ro&&Pv(w,U),R}function M(w,T,C,I){if(typeof C=="object"&&C!==null&&C.type===c_&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case hT:e:{for(var R=C.key,O=T;O!==null;){if(O.key===R){if(R=C.type,R===c_){if(O.tag===7){n(w,O.sibling),T=i(O,C.props.children),T.return=w,w=T;break e}}else if(O.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===vg&&AW(R)===O.type){n(w,O.sibling),T=i(O,C.props),T.ref=_w(w,O,C),T.return=w,w=T;break e}n(w,O);break}else e(w,O);O=O.sibling}C.type===c_?(T=l0(C.props.children,w.mode,I,C.key),T.return=w,w=T):(I=bA(C.type,C.key,C.props,null,w.mode,I),I.ref=_w(w,T,C),I.return=w,w=I)}return a(w);case l_:e:{for(O=C.key;T!==null;){if(T.key===O)if(T.tag===4&&T.stateNode.containerInfo===C.containerInfo&&T.stateNode.implementation===C.implementation){n(w,T.sibling),T=i(T,C.children||[]),T.return=w,w=T;break e}else{n(w,T);break}else e(w,T);T=T.sibling}T=fD(C,w.mode,I),T.return=w,w=T}return a(w);case vg:return O=C._init,M(w,T,O(C._payload),I)}if(fS(C))return x(w,T,C,I);if(mw(C))return b(w,T,C,I);MT(w,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,T!==null&&T.tag===6?(n(w,T.sibling),T=i(T,C),T.return=w,w=T):(n(w,T),T=dD(C,w.mode,I),T.return=w,w=T),a(w)):n(w,T)}return M}var lb=LQ(!0),DQ=LQ(!1),X2={},mh=fy(X2),fM=fy(X2),hM=fy(X2);function qv(t){if(t===X2)throw Error(hn(174));return t}function k5(t,e){switch(po(hM,e),po(fM,t),po(mh,X2),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hz(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hz(e,t)}So(mh),po(mh,e)}function cb(){So(mh),So(fM),So(hM)}function NQ(t){qv(hM.current);var e=qv(mh.current),n=hz(e,t.type);e!==n&&(po(fM,t),po(mh,n))}function I5(t){fM.current===t&&(So(mh),So(fM))}var jo=fy(0);function hP(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var oD=[];function R5(){for(var t=0;t<oD.length;t++)oD[t]._workInProgressVersionPrimary=null;oD.length=0}var gA=nm.ReactCurrentDispatcher,sD=nm.ReactCurrentBatchConfig,M0=0,Ho=null,Js=null,fa=null,pP=!1,PS=!1,pM=0,yme=0;function tl(){throw Error(hn(321))}function O5(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!hf(t[n],e[n]))return!1;return!0}function L5(t,e,n,r,i,o){if(M0=o,Ho=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,gA.current=t===null||t.memoizedState===null?bme:wme,t=n(r,i),PS){o=0;do{if(PS=!1,pM=0,25<=o)throw Error(hn(301));o+=1,fa=Js=null,e.updateQueue=null,gA.current=Sme,t=n(r,i)}while(PS)}if(gA.current=mP,e=Js!==null&&Js.next!==null,M0=0,fa=Js=Ho=null,pP=!1,e)throw Error(hn(300));return t}function D5(){var t=pM!==0;return pM=0,t}function ih(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fa===null?Ho.memoizedState=fa=t:fa=fa.next=t,fa}function dd(){if(Js===null){var t=Ho.alternate;t=t!==null?t.memoizedState:null}else t=Js.next;var e=fa===null?Ho.memoizedState:fa.next;if(e!==null)fa=e,Js=t;else{if(t===null)throw Error(hn(310));Js=t,t={memoizedState:Js.memoizedState,baseState:Js.baseState,baseQueue:Js.baseQueue,queue:Js.queue,next:null},fa===null?Ho.memoizedState=fa=t:fa=fa.next=t}return fa}function mM(t,e){return typeof e=="function"?e(t):e}function aD(t){var e=dd(),n=e.queue;if(n===null)throw Error(hn(311));n.lastRenderedReducer=t;var r=Js,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,l=null,c=o;do{var h=c.lane;if((M0&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(s=l=p,a=r):l=l.next=p,Ho.lanes|=h,E0|=h}c=c.next}while(c!==null&&c!==o);l===null?a=r:l.next=s,hf(r,e.memoizedState)||(_c=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Ho.lanes|=o,E0|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function lD(t){var e=dd(),n=e.queue;if(n===null)throw Error(hn(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);hf(o,e.memoizedState)||(_c=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function zQ(){}function FQ(t,e){var n=Ho,r=dd(),i=e(),o=!hf(r.memoizedState,i);if(o&&(r.memoizedState=i,_c=!0),r=r.queue,N5(jQ.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||fa!==null&&fa.memoizedState.tag&1){if(n.flags|=2048,gM(9,$Q.bind(null,n,r,i,e),void 0,null),ha===null)throw Error(hn(349));M0&30||BQ(n,e,i)}return i}function BQ(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ho.updateQueue,e===null?(e={lastEffect:null,stores:null},Ho.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $Q(t,e,n,r){e.value=n,e.getSnapshot=r,UQ(e)&&VQ(t)}function jQ(t,e,n){return n(function(){UQ(e)&&VQ(t)})}function UQ(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!hf(t,n)}catch{return!0}}function VQ(t){var e=Up(t,1);e!==null&&df(e,t,1,-1)}function PW(t){var e=ih();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mM,lastRenderedState:t},e.queue=t,t=t.dispatch=_me.bind(null,Ho,t),[e.memoizedState,t]}function gM(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ho.updateQueue,e===null?(e={lastEffect:null,stores:null},Ho.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function WQ(){return dd().memoizedState}function yA(t,e,n,r){var i=ih();Ho.flags|=t,i.memoizedState=gM(1|e,n,void 0,r===void 0?null:r)}function pI(t,e,n,r){var i=dd();r=r===void 0?null:r;var o=void 0;if(Js!==null){var a=Js.memoizedState;if(o=a.destroy,r!==null&&O5(r,a.deps)){i.memoizedState=gM(e,n,o,r);return}}Ho.flags|=t,i.memoizedState=gM(1|e,n,o,r)}function kW(t,e){return yA(8390656,8,t,e)}function N5(t,e){return pI(2048,8,t,e)}function HQ(t,e){return pI(4,2,t,e)}function GQ(t,e){return pI(4,4,t,e)}function qQ(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function YQ(t,e,n){return n=n!=null?n.concat([t]):null,pI(4,4,qQ.bind(null,e,t),n)}function z5(){}function XQ(t,e){var n=dd();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&O5(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function KQ(t,e){var n=dd();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&O5(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ZQ(t,e,n){return M0&21?(hf(n,e)||(n=eQ(),Ho.lanes|=n,E0|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_c=!0),t.memoizedState=n)}function vme(t,e){var n=Fi;Fi=n!==0&&4>n?n:4,t(!0);var r=sD.transition;sD.transition={};try{t(!1),e()}finally{Fi=n,sD.transition=r}}function JQ(){return dd().memoizedState}function xme(t,e,n){var r=Ug(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},QQ(t))eee(e,n);else if(n=kQ(t,e,n,r),n!==null){var i=Gl();df(n,t,r,i),tee(n,e,r)}}function _me(t,e,n){var r=Ug(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(QQ(t))eee(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,hf(s,a)){var l=e.interleaved;l===null?(i.next=i,A5(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=kQ(t,e,i,r),n!==null&&(i=Gl(),df(n,t,r,i),tee(n,e,r))}}function QQ(t){var e=t.alternate;return t===Ho||e!==null&&e===Ho}function eee(t,e){PS=pP=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function tee(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,p5(t,n)}}var mP={readContext:ud,useCallback:tl,useContext:tl,useEffect:tl,useImperativeHandle:tl,useInsertionEffect:tl,useLayoutEffect:tl,useMemo:tl,useReducer:tl,useRef:tl,useState:tl,useDebugValue:tl,useDeferredValue:tl,useTransition:tl,useMutableSource:tl,useSyncExternalStore:tl,useId:tl,unstable_isNewReconciler:!1},bme={readContext:ud,useCallback:function(t,e){return ih().memoizedState=[t,e===void 0?null:e],t},useContext:ud,useEffect:kW,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,yA(4194308,4,qQ.bind(null,e,t),n)},useLayoutEffect:function(t,e){return yA(4194308,4,t,e)},useInsertionEffect:function(t,e){return yA(4,2,t,e)},useMemo:function(t,e){var n=ih();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ih();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=xme.bind(null,Ho,t),[r.memoizedState,t]},useRef:function(t){var e=ih();return t={current:t},e.memoizedState=t},useState:PW,useDebugValue:z5,useDeferredValue:function(t){return ih().memoizedState=t},useTransition:function(){var t=PW(!1),e=t[0];return t=vme.bind(null,t[1]),ih().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ho,i=ih();if(Ro){if(n===void 0)throw Error(hn(407));n=n()}else{if(n=e(),ha===null)throw Error(hn(349));M0&30||BQ(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,kW(jQ.bind(null,r,o,t),[t]),r.flags|=2048,gM(9,$Q.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=ih(),e=ha.identifierPrefix;if(Ro){var n=Mp,r=Sp;n=(r&~(1<<32-uf(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=pM++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=yme++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},wme={readContext:ud,useCallback:XQ,useContext:ud,useEffect:N5,useImperativeHandle:YQ,useInsertionEffect:HQ,useLayoutEffect:GQ,useMemo:KQ,useReducer:aD,useRef:WQ,useState:function(){return aD(mM)},useDebugValue:z5,useDeferredValue:function(t){var e=dd();return ZQ(e,Js.memoizedState,t)},useTransition:function(){var t=aD(mM)[0],e=dd().memoizedState;return[t,e]},useMutableSource:zQ,useSyncExternalStore:FQ,useId:JQ,unstable_isNewReconciler:!1},Sme={readContext:ud,useCallback:XQ,useContext:ud,useEffect:N5,useImperativeHandle:YQ,useInsertionEffect:HQ,useLayoutEffect:GQ,useMemo:KQ,useReducer:lD,useRef:WQ,useState:function(){return lD(mM)},useDebugValue:z5,useDeferredValue:function(t){var e=dd();return Js===null?e.memoizedState=t:ZQ(e,Js.memoizedState,t)},useTransition:function(){var t=lD(mM)[0],e=dd().memoizedState;return[t,e]},useMutableSource:zQ,useSyncExternalStore:FQ,useId:JQ,unstable_isNewReconciler:!1};function ub(t,e){try{var n="",r=e;do n+=Zhe(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function cD(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Nz(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Mme=typeof WeakMap=="function"?WeakMap:Map;function nee(t,e,n){n=Lp(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){yP||(yP=!0,Gz=r),Nz(t,e)},n}function ree(t,e,n){n=Lp(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Nz(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Nz(t,e),typeof r!="function"&&(jg===null?jg=new Set([this]):jg.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function IW(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Mme;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Fme.bind(null,t,e,n),e.then(t,t))}function RW(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function OW(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Lp(-1,1),e.tag=2,$g(n,e,1))),n.lanes|=1),t)}var Eme=nm.ReactCurrentOwner,_c=!1;function $l(t,e,n,r){e.child=t===null?DQ(e,null,n,r):lb(e,t.child,n,r)}function LW(t,e,n,r,i){n=n.render;var o=e.ref;return V_(e,i),r=L5(t,e,n,r,o,i),n=D5(),t!==null&&!_c?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Vp(t,e,i)):(Ro&&n&&w5(e),e.flags|=1,$l(t,e,r,i),e.child)}function DW(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!H5(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,iee(t,e,o,r,i)):(t=bA(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:lM,n(a,r)&&t.ref===e.ref)return Vp(t,e,i)}return e.flags|=1,t=Vg(o,r),t.ref=e.ref,t.return=e,e.child=t}function iee(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(lM(o,r)&&t.ref===e.ref)if(_c=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(_c=!0);else return e.lanes=t.lanes,Vp(t,e,i)}return zz(t,e,n,r,i)}function oee(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},po(x_,Zc),Zc|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,po(x_,Zc),Zc|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,po(x_,Zc),Zc|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,po(x_,Zc),Zc|=r;return $l(t,e,i,n),e.child}function see(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function zz(t,e,n,r,i){var o=Sc(n)?w0:_l.current;return o=sb(e,o),V_(e,i),n=L5(t,e,n,r,o,i),r=D5(),t!==null&&!_c?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Vp(t,e,i)):(Ro&&r&&w5(e),e.flags|=1,$l(t,e,n,i),e.child)}function NW(t,e,n,r,i){if(Sc(n)){var o=!0;aP(e)}else o=!1;if(V_(e,i),e.stateNode===null)vA(t,e),OQ(e,n,r),Dz(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=ud(c):(c=Sc(n)?w0:_l.current,c=sb(e,c));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||l!==c)&&CW(e,a,r,c),xg=!1;var g=e.memoizedState;a.state=g,fP(e,r,a,i),l=e.memoizedState,s!==r||g!==l||wc.current||xg?(typeof h=="function"&&(Lz(e,n,h,r),l=e.memoizedState),(s=xg||TW(e,n,s,r,g,l,c))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,IQ(t,e),s=e.memoizedProps,c=e.type===e.elementType?s:Yd(e.type,s),a.props=c,p=e.pendingProps,g=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=ud(l):(l=Sc(n)?w0:_l.current,l=sb(e,l));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==p||g!==l)&&CW(e,a,r,l),xg=!1,g=e.memoizedState,a.state=g,fP(e,r,a,i);var x=e.memoizedState;s!==p||g!==x||wc.current||xg?(typeof v=="function"&&(Lz(e,n,v,r),x=e.memoizedState),(c=xg||TW(e,n,c,r,g,x,l)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,x,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,x,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),a.props=r,a.state=x,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Fz(t,e,n,r,o,i)}function Fz(t,e,n,r,i,o){see(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&bW(e,n,!1),Vp(t,e,o);r=e.stateNode,Eme.current=e;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=lb(e,t.child,null,o),e.child=lb(e,null,s,o)):$l(t,e,s,o),e.memoizedState=r.state,i&&bW(e,n,!0),e.child}function aee(t){var e=t.stateNode;e.pendingContext?_W(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_W(t,e.context,!1),k5(t,e.containerInfo)}function zW(t,e,n,r,i){return ab(),M5(i),e.flags|=256,$l(t,e,n,r),e.child}var Bz={dehydrated:null,treeContext:null,retryLane:0};function $z(t){return{baseLanes:t,cachePool:null,transitions:null}}function lee(t,e,n){var r=e.pendingProps,i=jo.current,o=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),po(jo,i&1),t===null)return Rz(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=yI(a,r,0,null),t=l0(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=$z(n),e.memoizedState=Bz,t):F5(e,a));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return Tme(t,e,a,r,s,i,n);if(o){o=r.fallback,a=e.mode,i=t.child,s=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Vg(i,l),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=Vg(s,o):(o=l0(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?$z(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=Bz,r}return o=t.child,t=o.sibling,r=Vg(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function F5(t,e){return e=yI({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ET(t,e,n,r){return r!==null&&M5(r),lb(e,t.child,null,n),t=F5(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Tme(t,e,n,r,i,o,a){if(n)return e.flags&256?(e.flags&=-257,r=cD(Error(hn(422))),ET(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=yI({mode:"visible",children:r.children},i,0,null),o=l0(o,i,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&lb(e,t.child,null,a),e.child.memoizedState=$z(a),e.memoizedState=Bz,o);if(!(e.mode&1))return ET(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(hn(419)),r=cD(o,r,void 0),ET(t,e,a,r)}if(s=(a&t.childLanes)!==0,_c||s){if(r=ha,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Up(t,i),df(r,t,i,-1))}return W5(),r=cD(Error(hn(421))),ET(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Bme.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,au=Bg(i.nextSibling),cu=e,Ro=!0,Qd=null,t!==null&&(Xu[Ku++]=Sp,Xu[Ku++]=Mp,Xu[Ku++]=S0,Sp=t.id,Mp=t.overflow,S0=e),e=F5(e,r.children),e.flags|=4096,e)}function FW(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Oz(t.return,e,n)}function uD(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function cee(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if($l(t,e,r.children,n),r=jo.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&FW(t,n,e);else if(t.tag===19)FW(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(po(jo,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&hP(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),uD(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&hP(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}uD(e,!0,n,null,o);break;case"together":uD(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function vA(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vp(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),E0|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(hn(153));if(e.child!==null){for(t=e.child,n=Vg(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Vg(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Cme(t,e,n){switch(e.tag){case 3:aee(e),ab();break;case 5:NQ(e);break;case 1:Sc(e.type)&&aP(e);break;case 4:k5(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;po(uP,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(po(jo,jo.current&1),e.flags|=128,null):n&e.child.childLanes?lee(t,e,n):(po(jo,jo.current&1),t=Vp(t,e,n),t!==null?t.sibling:null);po(jo,jo.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return cee(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),po(jo,jo.current),r)break;return null;case 22:case 23:return e.lanes=0,oee(t,e,n)}return Vp(t,e,n)}var uee,jz,dee,fee;uee=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};jz=function(){};dee=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,qv(mh.current);var o=null;switch(n){case"input":i=cz(t,i),r=cz(t,r),o=[];break;case"select":i=qo({},i,{value:void 0}),r=qo({},r,{value:void 0}),o=[];break;case"textarea":i=fz(t,i),r=fz(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=oP)}pz(n,r);var a;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var s=i[c];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(tM.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(s=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==s&&(l!=null||s!=null))if(c==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(tM.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&_o("scroll",t),o||s===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};fee=function(t,e,n,r){n!==r&&(e.flags|=4)};function bw(t,e){if(!Ro)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function nl(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ame(t,e,n){var r=e.pendingProps;switch(S5(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nl(e),null;case 1:return Sc(e.type)&&sP(),nl(e),null;case 3:return r=e.stateNode,cb(),So(wc),So(_l),R5(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ST(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qd!==null&&(Xz(Qd),Qd=null))),jz(t,e),nl(e),null;case 5:I5(e);var i=qv(hM.current);if(n=e.type,t!==null&&e.stateNode!=null)dee(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(hn(166));return nl(e),null}if(t=qv(mh.current),ST(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[lh]=e,r[dM]=o,t=(e.mode&1)!==0,n){case"dialog":_o("cancel",r),_o("close",r);break;case"iframe":case"object":case"embed":_o("load",r);break;case"video":case"audio":for(i=0;i<pS.length;i++)_o(pS[i],r);break;case"source":_o("error",r);break;case"img":case"image":case"link":_o("error",r),_o("load",r);break;case"details":_o("toggle",r);break;case"input":qV(r,o),_o("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},_o("invalid",r);break;case"textarea":XV(r,o),_o("invalid",r)}pz(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&wT(r.textContent,s,t),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&wT(r.textContent,s,t),i=["children",""+s]):tM.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&_o("scroll",r)}switch(n){case"input":pT(r),YV(r,o,!0);break;case"textarea":pT(r),KV(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=oP)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=BJ(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[lh]=e,t[dM]=r,uee(t,e,!1,!1),e.stateNode=t;e:{switch(a=mz(n,r),n){case"dialog":_o("cancel",t),_o("close",t),i=r;break;case"iframe":case"object":case"embed":_o("load",t),i=r;break;case"video":case"audio":for(i=0;i<pS.length;i++)_o(pS[i],t);i=r;break;case"source":_o("error",t),i=r;break;case"img":case"image":case"link":_o("error",t),_o("load",t),i=r;break;case"details":_o("toggle",t),i=r;break;case"input":qV(t,r),i=cz(t,r),_o("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=qo({},r,{value:void 0}),_o("invalid",t);break;case"textarea":XV(t,r),i=fz(t,r),_o("invalid",t);break;default:i=r}pz(n,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?UJ(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&$J(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&nM(t,l):typeof l=="number"&&nM(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(tM.hasOwnProperty(o)?l!=null&&o==="onScroll"&&_o("scroll",t):l!=null&&l5(t,o,l,a))}switch(n){case"input":pT(t),YV(t,r,!1);break;case"textarea":pT(t),KV(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ty(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?B_(t,!!r.multiple,o,!1):r.defaultValue!=null&&B_(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=oP)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return nl(e),null;case 6:if(t&&e.stateNode!=null)fee(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(hn(166));if(n=qv(hM.current),qv(mh.current),ST(e)){if(r=e.stateNode,n=e.memoizedProps,r[lh]=e,(o=r.nodeValue!==n)&&(t=cu,t!==null))switch(t.tag){case 3:wT(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wT(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[lh]=e,e.stateNode=r}return nl(e),null;case 13:if(So(jo),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ro&&au!==null&&e.mode&1&&!(e.flags&128))PQ(),ab(),e.flags|=98560,o=!1;else if(o=ST(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(hn(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(hn(317));o[lh]=e}else ab(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;nl(e),o=!1}else Qd!==null&&(Xz(Qd),Qd=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||jo.current&1?Qs===0&&(Qs=3):W5())),e.updateQueue!==null&&(e.flags|=4),nl(e),null);case 4:return cb(),jz(t,e),t===null&&cM(e.stateNode.containerInfo),nl(e),null;case 10:return C5(e.type._context),nl(e),null;case 17:return Sc(e.type)&&sP(),nl(e),null;case 19:if(So(jo),o=e.memoizedState,o===null)return nl(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)bw(o,!1);else{if(Qs!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=hP(t),a!==null){for(e.flags|=128,bw(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return po(jo,jo.current&1|2),e.child}t=t.sibling}o.tail!==null&&_s()>db&&(e.flags|=128,r=!0,bw(o,!1),e.lanes=4194304)}else{if(!r)if(t=hP(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),bw(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ro)return nl(e),null}else 2*_s()-o.renderingStartTime>db&&n!==1073741824&&(e.flags|=128,r=!0,bw(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=_s(),e.sibling=null,n=jo.current,po(jo,r?n&1|2:n&1),e):(nl(e),null);case 22:case 23:return V5(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Zc&1073741824&&(nl(e),e.subtreeFlags&6&&(e.flags|=8192)):nl(e),null;case 24:return null;case 25:return null}throw Error(hn(156,e.tag))}function Pme(t,e){switch(S5(e),e.tag){case 1:return Sc(e.type)&&sP(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return cb(),So(wc),So(_l),R5(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return I5(e),null;case 13:if(So(jo),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(hn(340));ab()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return So(jo),null;case 4:return cb(),null;case 10:return C5(e.type._context),null;case 22:case 23:return V5(),null;case 24:return null;default:return null}}var TT=!1,dl=!1,kme=typeof WeakSet=="function"?WeakSet:Set,qn=null;function v_(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ns(t,e,r)}else n.current=null}function Uz(t,e,n){try{n()}catch(r){ns(t,e,r)}}var BW=!1;function Ime(t,e){if(Ez=nP,t=gQ(),b5(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,l=-1,c=0,h=0,p=t,g=null;t:for(;;){for(var v;p!==n||i!==0&&p.nodeType!==3||(s=a+i),p!==o||r!==0&&p.nodeType!==3||(l=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(v=p.firstChild)!==null;)g=p,p=v;for(;;){if(p===t)break t;if(g===n&&++c===i&&(s=a),g===o&&++h===r&&(l=a),(v=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=v}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Tz={focusedElem:t,selectionRange:n},nP=!1,qn=e;qn!==null;)if(e=qn,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,qn=t;else for(;qn!==null;){e=qn;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var b=x.memoizedProps,M=x.memoizedState,w=e.stateNode,T=w.getSnapshotBeforeUpdate(e.elementType===e.type?b:Yd(e.type,b),M);w.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(hn(163))}}catch(I){ns(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,qn=t;break}qn=e.return}return x=BW,BW=!1,x}function kS(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Uz(e,n,o)}i=i.next}while(i!==r)}}function mI(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Vz(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function hee(t){var e=t.alternate;e!==null&&(t.alternate=null,hee(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[lh],delete e[dM],delete e[Pz],delete e[hme],delete e[pme])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function pee(t){return t.tag===5||t.tag===3||t.tag===4}function $W(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||pee(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wz(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=oP));else if(r!==4&&(t=t.child,t!==null))for(Wz(t,e,n),t=t.sibling;t!==null;)Wz(t,e,n),t=t.sibling}function Hz(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Hz(t,e,n),t=t.sibling;t!==null;)Hz(t,e,n),t=t.sibling}var Ra=null,Kd=!1;function Zm(t,e,n){for(n=n.child;n!==null;)mee(t,e,n),n=n.sibling}function mee(t,e,n){if(ph&&typeof ph.onCommitFiberUnmount=="function")try{ph.onCommitFiberUnmount(aI,n)}catch{}switch(n.tag){case 5:dl||v_(n,e);case 6:var r=Ra,i=Kd;Ra=null,Zm(t,e,n),Ra=r,Kd=i,Ra!==null&&(Kd?(t=Ra,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ra.removeChild(n.stateNode));break;case 18:Ra!==null&&(Kd?(t=Ra,n=n.stateNode,t.nodeType===8?rD(t.parentNode,n):t.nodeType===1&&rD(t,n),sM(t)):rD(Ra,n.stateNode));break;case 4:r=Ra,i=Kd,Ra=n.stateNode.containerInfo,Kd=!0,Zm(t,e,n),Ra=r,Kd=i;break;case 0:case 11:case 14:case 15:if(!dl&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Uz(n,e,a),i=i.next}while(i!==r)}Zm(t,e,n);break;case 1:if(!dl&&(v_(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){ns(n,e,s)}Zm(t,e,n);break;case 21:Zm(t,e,n);break;case 22:n.mode&1?(dl=(r=dl)||n.memoizedState!==null,Zm(t,e,n),dl=r):Zm(t,e,n);break;default:Zm(t,e,n)}}function jW(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new kme),e.forEach(function(r){var i=$me.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function jd(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,a=e,s=a;e:for(;s!==null;){switch(s.tag){case 5:Ra=s.stateNode,Kd=!1;break e;case 3:Ra=s.stateNode.containerInfo,Kd=!0;break e;case 4:Ra=s.stateNode.containerInfo,Kd=!0;break e}s=s.return}if(Ra===null)throw Error(hn(160));mee(o,a,i),Ra=null,Kd=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){ns(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)gee(e,t),e=e.sibling}function gee(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(jd(e,t),nh(t),r&4){try{kS(3,t,t.return),mI(3,t)}catch(b){ns(t,t.return,b)}try{kS(5,t,t.return)}catch(b){ns(t,t.return,b)}}break;case 1:jd(e,t),nh(t),r&512&&n!==null&&v_(n,n.return);break;case 5:if(jd(e,t),nh(t),r&512&&n!==null&&v_(n,n.return),t.flags&32){var i=t.stateNode;try{nM(i,"")}catch(b){ns(t,t.return,b)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&zJ(i,o),mz(s,a);var c=mz(s,o);for(a=0;a<l.length;a+=2){var h=l[a],p=l[a+1];h==="style"?UJ(i,p):h==="dangerouslySetInnerHTML"?$J(i,p):h==="children"?nM(i,p):l5(i,h,p,c)}switch(s){case"input":uz(i,o);break;case"textarea":FJ(i,o);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?B_(i,!!o.multiple,v,!1):g!==!!o.multiple&&(o.defaultValue!=null?B_(i,!!o.multiple,o.defaultValue,!0):B_(i,!!o.multiple,o.multiple?[]:"",!1))}i[dM]=o}catch(b){ns(t,t.return,b)}}break;case 6:if(jd(e,t),nh(t),r&4){if(t.stateNode===null)throw Error(hn(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(b){ns(t,t.return,b)}}break;case 3:if(jd(e,t),nh(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{sM(e.containerInfo)}catch(b){ns(t,t.return,b)}break;case 4:jd(e,t),nh(t);break;case 13:jd(e,t),nh(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(j5=_s())),r&4&&jW(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(dl=(c=dl)||h,jd(e,t),dl=c):jd(e,t),nh(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(qn=t,h=t.child;h!==null;){for(p=qn=h;qn!==null;){switch(g=qn,v=g.child,g.tag){case 0:case 11:case 14:case 15:kS(4,g,g.return);break;case 1:v_(g,g.return);var x=g.stateNode;if(typeof x.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(b){ns(r,n,b)}}break;case 5:v_(g,g.return);break;case 22:if(g.memoizedState!==null){VW(p);continue}}v!==null?(v.return=g,qn=v):VW(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=p.stateNode,l=p.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=jJ("display",a))}catch(b){ns(t,t.return,b)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(b){ns(t,t.return,b)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:jd(e,t),nh(t),r&4&&jW(t);break;case 21:break;default:jd(e,t),nh(t)}}function nh(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(pee(n)){var r=n;break e}n=n.return}throw Error(hn(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(nM(i,""),r.flags&=-33);var o=$W(t);Hz(t,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,s=$W(t);Wz(t,s,a);break;default:throw Error(hn(161))}}catch(l){ns(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Rme(t,e,n){qn=t,yee(t)}function yee(t,e,n){for(var r=(t.mode&1)!==0;qn!==null;){var i=qn,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||TT;if(!a){var s=i.alternate,l=s!==null&&s.memoizedState!==null||dl;s=TT;var c=dl;if(TT=a,(dl=l)&&!c)for(qn=i;qn!==null;)a=qn,l=a.child,a.tag===22&&a.memoizedState!==null?WW(i):l!==null?(l.return=a,qn=l):WW(i);for(;o!==null;)qn=o,yee(o),o=o.sibling;qn=i,TT=s,dl=c}UW(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,qn=o):UW(t)}}function UW(t){for(;qn!==null;){var e=qn;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dl||mI(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!dl)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Yd(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&EW(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}EW(e,a,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&sM(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(hn(163))}dl||e.flags&512&&Vz(e)}catch(g){ns(e,e.return,g)}}if(e===t){qn=null;break}if(n=e.sibling,n!==null){n.return=e.return,qn=n;break}qn=e.return}}function VW(t){for(;qn!==null;){var e=qn;if(e===t){qn=null;break}var n=e.sibling;if(n!==null){n.return=e.return,qn=n;break}qn=e.return}}function WW(t){for(;qn!==null;){var e=qn;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{mI(4,e)}catch(l){ns(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ns(e,i,l)}}var o=e.return;try{Vz(e)}catch(l){ns(e,o,l)}break;case 5:var a=e.return;try{Vz(e)}catch(l){ns(e,a,l)}}}catch(l){ns(e,e.return,l)}if(e===t){qn=null;break}var s=e.sibling;if(s!==null){s.return=e.return,qn=s;break}qn=e.return}}var Ome=Math.ceil,gP=nm.ReactCurrentDispatcher,B5=nm.ReactCurrentOwner,rd=nm.ReactCurrentBatchConfig,di=0,ha=null,Is=null,za=0,Zc=0,x_=fy(0),Qs=0,yM=null,E0=0,gI=0,$5=0,IS=null,vc=null,j5=0,db=1/0,gp=null,yP=!1,Gz=null,jg=null,CT=!1,Cg=null,vP=0,RS=0,qz=null,xA=-1,_A=0;function Gl(){return di&6?_s():xA!==-1?xA:xA=_s()}function Ug(t){return t.mode&1?di&2&&za!==0?za&-za:gme.transition!==null?(_A===0&&(_A=eQ()),_A):(t=Fi,t!==0||(t=window.event,t=t===void 0?16:aQ(t.type)),t):1}function df(t,e,n,r){if(50<RS)throw RS=0,qz=null,Error(hn(185));G2(t,n,r),(!(di&2)||t!==ha)&&(t===ha&&(!(di&2)&&(gI|=n),Qs===4&&wg(t,za)),Mc(t,r),n===1&&di===0&&!(e.mode&1)&&(db=_s()+500,fI&&hy()))}function Mc(t,e){var n=t.callbackNode;gpe(t,e);var r=tP(t,t===ha?za:0);if(r===0)n!==null&&QV(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&QV(n),e===1)t.tag===0?mme(HW.bind(null,t)):TQ(HW.bind(null,t)),dme(function(){!(di&6)&&hy()}),n=null;else{switch(tQ(r)){case 1:n=h5;break;case 4:n=JJ;break;case 16:n=eP;break;case 536870912:n=QJ;break;default:n=eP}n=Eee(n,vee.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function vee(t,e){if(xA=-1,_A=0,di&6)throw Error(hn(327));var n=t.callbackNode;if(W_()&&t.callbackNode!==n)return null;var r=tP(t,t===ha?za:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=xP(t,r);else{e=r;var i=di;di|=2;var o=_ee();(ha!==t||za!==e)&&(gp=null,db=_s()+500,a0(t,e));do try{Nme();break}catch(s){xee(t,s)}while(!0);T5(),gP.current=o,di=i,Is!==null?e=0:(ha=null,za=0,e=Qs)}if(e!==0){if(e===2&&(i=_z(t),i!==0&&(r=i,e=Yz(t,i))),e===1)throw n=yM,a0(t,0),wg(t,r),Mc(t,_s()),n;if(e===6)wg(t,r);else{if(i=t.current.alternate,!(r&30)&&!Lme(i)&&(e=xP(t,r),e===2&&(o=_z(t),o!==0&&(r=o,e=Yz(t,o))),e===1))throw n=yM,a0(t,0),wg(t,r),Mc(t,_s()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(hn(345));case 2:kv(t,vc,gp);break;case 3:if(wg(t,r),(r&130023424)===r&&(e=j5+500-_s(),10<e)){if(tP(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Gl(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Az(kv.bind(null,t,vc,gp),e);break}kv(t,vc,gp);break;case 4:if(wg(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-uf(r);o=1<<a,a=e[a],a>i&&(i=a),r&=~o}if(r=i,r=_s()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ome(r/1960))-r,10<r){t.timeoutHandle=Az(kv.bind(null,t,vc,gp),r);break}kv(t,vc,gp);break;case 5:kv(t,vc,gp);break;default:throw Error(hn(329))}}}return Mc(t,_s()),t.callbackNode===n?vee.bind(null,t):null}function Yz(t,e){var n=IS;return t.current.memoizedState.isDehydrated&&(a0(t,e).flags|=256),t=xP(t,e),t!==2&&(e=vc,vc=n,e!==null&&Xz(e)),t}function Xz(t){vc===null?vc=t:vc.push.apply(vc,t)}function Lme(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!hf(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wg(t,e){for(e&=~$5,e&=~gI,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-uf(e),r=1<<n;t[n]=-1,e&=~r}}function HW(t){if(di&6)throw Error(hn(327));W_();var e=tP(t,0);if(!(e&1))return Mc(t,_s()),null;var n=xP(t,e);if(t.tag!==0&&n===2){var r=_z(t);r!==0&&(e=r,n=Yz(t,r))}if(n===1)throw n=yM,a0(t,0),wg(t,e),Mc(t,_s()),n;if(n===6)throw Error(hn(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,kv(t,vc,gp),Mc(t,_s()),null}function U5(t,e){var n=di;di|=1;try{return t(e)}finally{di=n,di===0&&(db=_s()+500,fI&&hy())}}function T0(t){Cg!==null&&Cg.tag===0&&!(di&6)&&W_();var e=di;di|=1;var n=rd.transition,r=Fi;try{if(rd.transition=null,Fi=1,t)return t()}finally{Fi=r,rd.transition=n,di=e,!(di&6)&&hy()}}function V5(){Zc=x_.current,So(x_)}function a0(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ume(n)),Is!==null)for(n=Is.return;n!==null;){var r=n;switch(S5(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sP();break;case 3:cb(),So(wc),So(_l),R5();break;case 5:I5(r);break;case 4:cb();break;case 13:So(jo);break;case 19:So(jo);break;case 10:C5(r.type._context);break;case 22:case 23:V5()}n=n.return}if(ha=t,Is=t=Vg(t.current,null),za=Zc=e,Qs=0,yM=null,$5=gI=E0=0,vc=IS=null,Gv!==null){for(e=0;e<Gv.length;e++)if(n=Gv[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}Gv=null}return t}function xee(t,e){do{var n=Is;try{if(T5(),gA.current=mP,pP){for(var r=Ho.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}pP=!1}if(M0=0,fa=Js=Ho=null,PS=!1,pM=0,B5.current=null,n===null||n.return===null){Qs=1,yM=e,Is=null;break}e:{var o=t,a=n.return,s=n,l=e;if(e=za,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=s,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=RW(a);if(v!==null){v.flags&=-257,OW(v,a,s,o,e),v.mode&1&&IW(o,c,e),e=v,l=c;var x=e.updateQueue;if(x===null){var b=new Set;b.add(l),e.updateQueue=b}else x.add(l);break e}else{if(!(e&1)){IW(o,c,e),W5();break e}l=Error(hn(426))}}else if(Ro&&s.mode&1){var M=RW(a);if(M!==null){!(M.flags&65536)&&(M.flags|=256),OW(M,a,s,o,e),M5(ub(l,s));break e}}o=l=ub(l,s),Qs!==4&&(Qs=2),IS===null?IS=[o]:IS.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var w=nee(o,l,e);MW(o,w);break e;case 1:s=l;var T=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof T.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(jg===null||!jg.has(C)))){o.flags|=65536,e&=-e,o.lanes|=e;var I=ree(o,s,e);MW(o,I);break e}}o=o.return}while(o!==null)}wee(n)}catch(R){e=R,Is===n&&n!==null&&(Is=n=n.return);continue}break}while(!0)}function _ee(){var t=gP.current;return gP.current=mP,t===null?mP:t}function W5(){(Qs===0||Qs===3||Qs===2)&&(Qs=4),ha===null||!(E0&268435455)&&!(gI&268435455)||wg(ha,za)}function xP(t,e){var n=di;di|=2;var r=_ee();(ha!==t||za!==e)&&(gp=null,a0(t,e));do try{Dme();break}catch(i){xee(t,i)}while(!0);if(T5(),di=n,gP.current=r,Is!==null)throw Error(hn(261));return ha=null,za=0,Qs}function Dme(){for(;Is!==null;)bee(Is)}function Nme(){for(;Is!==null&&!ape();)bee(Is)}function bee(t){var e=Mee(t.alternate,t,Zc);t.memoizedProps=t.pendingProps,e===null?wee(t):Is=e,B5.current=null}function wee(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Pme(n,e),n!==null){n.flags&=32767,Is=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qs=6,Is=null;return}}else if(n=Ame(n,e,Zc),n!==null){Is=n;return}if(e=e.sibling,e!==null){Is=e;return}Is=e=t}while(e!==null);Qs===0&&(Qs=5)}function kv(t,e,n){var r=Fi,i=rd.transition;try{rd.transition=null,Fi=1,zme(t,e,n,r)}finally{rd.transition=i,Fi=r}return null}function zme(t,e,n,r){do W_();while(Cg!==null);if(di&6)throw Error(hn(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(hn(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(ype(t,o),t===ha&&(Is=ha=null,za=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||CT||(CT=!0,Eee(eP,function(){return W_(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=rd.transition,rd.transition=null;var a=Fi;Fi=1;var s=di;di|=4,B5.current=null,Ime(t,n),gee(n,t),rme(Tz),nP=!!Ez,Tz=Ez=null,t.current=n,Rme(n),lpe(),di=s,Fi=a,rd.transition=o}else t.current=n;if(CT&&(CT=!1,Cg=t,vP=i),o=t.pendingLanes,o===0&&(jg=null),dpe(n.stateNode),Mc(t,_s()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(yP)throw yP=!1,t=Gz,Gz=null,t;return vP&1&&t.tag!==0&&W_(),o=t.pendingLanes,o&1?t===qz?RS++:(RS=0,qz=t):RS=0,hy(),null}function W_(){if(Cg!==null){var t=tQ(vP),e=rd.transition,n=Fi;try{if(rd.transition=null,Fi=16>t?16:t,Cg===null)var r=!1;else{if(t=Cg,Cg=null,vP=0,di&6)throw Error(hn(331));var i=di;for(di|=4,qn=t.current;qn!==null;){var o=qn,a=o.child;if(qn.flags&16){var s=o.deletions;if(s!==null){for(var l=0;l<s.length;l++){var c=s[l];for(qn=c;qn!==null;){var h=qn;switch(h.tag){case 0:case 11:case 15:kS(8,h,o)}var p=h.child;if(p!==null)p.return=h,qn=p;else for(;qn!==null;){h=qn;var g=h.sibling,v=h.return;if(hee(h),h===c){qn=null;break}if(g!==null){g.return=v,qn=g;break}qn=v}}}var x=o.alternate;if(x!==null){var b=x.child;if(b!==null){x.child=null;do{var M=b.sibling;b.sibling=null,b=M}while(b!==null)}}qn=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,qn=a;else e:for(;qn!==null;){if(o=qn,o.flags&2048)switch(o.tag){case 0:case 11:case 15:kS(9,o,o.return)}var w=o.sibling;if(w!==null){w.return=o.return,qn=w;break e}qn=o.return}}var T=t.current;for(qn=T;qn!==null;){a=qn;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,qn=C;else e:for(a=T;qn!==null;){if(s=qn,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:mI(9,s)}}catch(R){ns(s,s.return,R)}if(s===a){qn=null;break e}var I=s.sibling;if(I!==null){I.return=s.return,qn=I;break e}qn=s.return}}if(di=i,hy(),ph&&typeof ph.onPostCommitFiberRoot=="function")try{ph.onPostCommitFiberRoot(aI,t)}catch{}r=!0}return r}finally{Fi=n,rd.transition=e}}return!1}function GW(t,e,n){e=ub(n,e),e=nee(t,e,1),t=$g(t,e,1),e=Gl(),t!==null&&(G2(t,1,e),Mc(t,e))}function ns(t,e,n){if(t.tag===3)GW(t,t,n);else for(;e!==null;){if(e.tag===3){GW(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jg===null||!jg.has(r))){t=ub(n,t),t=ree(e,t,1),e=$g(e,t,1),t=Gl(),e!==null&&(G2(e,1,t),Mc(e,t));break}}e=e.return}}function Fme(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Gl(),t.pingedLanes|=t.suspendedLanes&n,ha===t&&(za&n)===n&&(Qs===4||Qs===3&&(za&130023424)===za&&500>_s()-j5?a0(t,0):$5|=n),Mc(t,e)}function See(t,e){e===0&&(t.mode&1?(e=yT,yT<<=1,!(yT&130023424)&&(yT=4194304)):e=1);var n=Gl();t=Up(t,e),t!==null&&(G2(t,e,n),Mc(t,n))}function Bme(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),See(t,n)}function $me(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(hn(314))}r!==null&&r.delete(e),See(t,n)}var Mee;Mee=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wc.current)_c=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _c=!1,Cme(t,e,n);_c=!!(t.flags&131072)}else _c=!1,Ro&&e.flags&1048576&&CQ(e,cP,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;vA(t,e),t=e.pendingProps;var i=sb(e,_l.current);V_(e,n),i=L5(null,e,r,t,i,n);var o=D5();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Sc(r)?(o=!0,aP(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,P5(e),i.updater=hI,e.stateNode=i,i._reactInternals=e,Dz(e,r,t,n),e=Fz(null,e,r,!0,o,n)):(e.tag=0,Ro&&o&&w5(e),$l(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(vA(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Ume(r),t=Yd(r,t),i){case 0:e=zz(null,e,r,t,n);break e;case 1:e=NW(null,e,r,t,n);break e;case 11:e=LW(null,e,r,t,n);break e;case 14:e=DW(null,e,r,Yd(r.type,t),n);break e}throw Error(hn(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yd(r,i),zz(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yd(r,i),NW(t,e,r,i,n);case 3:e:{if(aee(e),t===null)throw Error(hn(387));r=e.pendingProps,o=e.memoizedState,i=o.element,IQ(t,e),fP(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=ub(Error(hn(423)),e),e=zW(t,e,r,n,i);break e}else if(r!==i){i=ub(Error(hn(424)),e),e=zW(t,e,r,n,i);break e}else for(au=Bg(e.stateNode.containerInfo.firstChild),cu=e,Ro=!0,Qd=null,n=DQ(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ab(),r===i){e=Vp(t,e,n);break e}$l(t,e,r,n)}e=e.child}return e;case 5:return NQ(e),t===null&&Rz(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,Cz(r,i)?a=null:o!==null&&Cz(r,o)&&(e.flags|=32),see(t,e),$l(t,e,a,n),e.child;case 6:return t===null&&Rz(e),null;case 13:return lee(t,e,n);case 4:return k5(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=lb(e,null,r,n):$l(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yd(r,i),LW(t,e,r,i,n);case 7:return $l(t,e,e.pendingProps,n),e.child;case 8:return $l(t,e,e.pendingProps.children,n),e.child;case 12:return $l(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,po(uP,r._currentValue),r._currentValue=a,o!==null)if(hf(o.value,a)){if(o.children===i.children&&!wc.current){e=Vp(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Lp(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Oz(o.return,n,e),s.lanes|=n;break}l=l.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(hn(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Oz(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}$l(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,V_(e,n),i=ud(i),r=r(i),e.flags|=1,$l(t,e,r,n),e.child;case 14:return r=e.type,i=Yd(r,e.pendingProps),i=Yd(r.type,i),DW(t,e,r,i,n);case 15:return iee(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yd(r,i),vA(t,e),e.tag=1,Sc(r)?(t=!0,aP(e)):t=!1,V_(e,n),OQ(e,r,i),Dz(e,r,i,n),Fz(null,e,r,!0,t,n);case 19:return cee(t,e,n);case 22:return oee(t,e,n)}throw Error(hn(156,e.tag))};function Eee(t,e){return ZJ(t,e)}function jme(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function td(t,e,n,r){return new jme(t,e,n,r)}function H5(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ume(t){if(typeof t=="function")return H5(t)?1:0;if(t!=null){if(t=t.$$typeof,t===u5)return 11;if(t===d5)return 14}return 2}function Vg(t,e){var n=t.alternate;return n===null?(n=td(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function bA(t,e,n,r,i,o){var a=2;if(r=t,typeof t=="function")H5(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case c_:return l0(n.children,i,o,e);case c5:a=8,i|=8;break;case oz:return t=td(12,n,e,i|2),t.elementType=oz,t.lanes=o,t;case sz:return t=td(13,n,e,i),t.elementType=sz,t.lanes=o,t;case az:return t=td(19,n,e,i),t.elementType=az,t.lanes=o,t;case LJ:return yI(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case RJ:a=10;break e;case OJ:a=9;break e;case u5:a=11;break e;case d5:a=14;break e;case vg:a=16,r=null;break e}throw Error(hn(130,t==null?t:typeof t,""))}return e=td(a,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function l0(t,e,n,r){return t=td(7,t,r,e),t.lanes=n,t}function yI(t,e,n,r){return t=td(22,t,r,e),t.elementType=LJ,t.lanes=n,t.stateNode={isHidden:!1},t}function dD(t,e,n){return t=td(6,t,null,e),t.lanes=n,t}function fD(t,e,n){return e=td(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Vme(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=GL(0),this.expirationTimes=GL(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=GL(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function G5(t,e,n,r,i,o,a,s,l){return t=new Vme(t,e,n,s,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=td(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},P5(o),t}function Wme(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l_,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Tee(t){if(!t)return ny;t=t._reactInternals;e:{if($0(t)!==t||t.tag!==1)throw Error(hn(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Sc(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(hn(171))}if(t.tag===1){var n=t.type;if(Sc(n))return EQ(t,n,e)}return e}function Cee(t,e,n,r,i,o,a,s,l){return t=G5(n,r,!0,t,i,o,a,s,l),t.context=Tee(null),n=t.current,r=Gl(),i=Ug(n),o=Lp(r,i),o.callback=e??null,$g(n,o,i),t.current.lanes=i,G2(t,i,r),Mc(t,r),t}function vI(t,e,n,r){var i=e.current,o=Gl(),a=Ug(i);return n=Tee(n),e.context===null?e.context=n:e.pendingContext=n,e=Lp(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=$g(i,e,a),t!==null&&(df(t,i,a,o),mA(t,i,a)),a}function _P(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function qW(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function q5(t,e){qW(t,e),(t=t.alternate)&&qW(t,e)}function Hme(){return null}var Aee=typeof reportError=="function"?reportError:function(t){console.error(t)};function Y5(t){this._internalRoot=t}xI.prototype.render=Y5.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(hn(409));vI(t,e,null,null)};xI.prototype.unmount=Y5.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;T0(function(){vI(null,t,null,null)}),e[jp]=null}};function xI(t){this._internalRoot=t}xI.prototype.unstable_scheduleHydration=function(t){if(t){var e=iQ();t={blockedOn:null,target:t,priority:e};for(var n=0;n<bg.length&&e!==0&&e<bg[n].priority;n++);bg.splice(n,0,t),n===0&&sQ(t)}};function X5(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _I(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function YW(){}function Gme(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=_P(a);o.call(c)}}var a=Cee(e,r,t,0,null,!1,!1,"",YW);return t._reactRootContainer=a,t[jp]=a.current,cM(t.nodeType===8?t.parentNode:t),T0(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var c=_P(l);s.call(c)}}var l=G5(t,0,!1,null,null,!1,!1,"",YW);return t._reactRootContainer=l,t[jp]=l.current,cM(t.nodeType===8?t.parentNode:t),T0(function(){vI(e,l,n,r)}),l}function bI(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var l=_P(a);s.call(l)}}vI(e,a,t,i)}else a=Gme(n,e,t,i,r);return _P(a)}nQ=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=hS(e.pendingLanes);n!==0&&(p5(e,n|1),Mc(e,_s()),!(di&6)&&(db=_s()+500,hy()))}break;case 13:T0(function(){var r=Up(t,1);if(r!==null){var i=Gl();df(r,t,1,i)}}),q5(t,1)}};m5=function(t){if(t.tag===13){var e=Up(t,134217728);if(e!==null){var n=Gl();df(e,t,134217728,n)}q5(t,134217728)}};rQ=function(t){if(t.tag===13){var e=Ug(t),n=Up(t,e);if(n!==null){var r=Gl();df(n,t,e,r)}q5(t,e)}};iQ=function(){return Fi};oQ=function(t,e){var n=Fi;try{return Fi=t,e()}finally{Fi=n}};yz=function(t,e,n){switch(e){case"input":if(uz(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=dI(r);if(!i)throw Error(hn(90));NJ(r),uz(r,i)}}}break;case"textarea":FJ(t,n);break;case"select":e=n.value,e!=null&&B_(t,!!n.multiple,e,!1)}};HJ=U5;GJ=T0;var qme={usingClientEntryPoint:!1,Events:[Y2,h_,dI,VJ,WJ,U5]},ww={findFiberByHostInstance:Hv,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Yme={bundleType:ww.bundleType,version:ww.version,rendererPackageName:ww.rendererPackageName,rendererConfig:ww.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nm.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=XJ(t),t===null?null:t.stateNode},findFiberByHostInstance:ww.findFiberByHostInstance||Hme,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var AT=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!AT.isDisabled&&AT.supportsFiber)try{aI=AT.inject(Yme),ph=AT}catch{}}_u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qme;_u.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!X5(e))throw Error(hn(200));return Wme(t,e,null,n)};_u.createRoot=function(t,e){if(!X5(t))throw Error(hn(299));var n=!1,r="",i=Aee;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=G5(t,1,!1,null,null,n,!1,r,i),t[jp]=e.current,cM(t.nodeType===8?t.parentNode:t),new Y5(e)};_u.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(hn(188)):(t=Object.keys(t).join(","),Error(hn(268,t)));return t=XJ(e),t=t===null?null:t.stateNode,t};_u.flushSync=function(t){return T0(t)};_u.hydrate=function(t,e,n){if(!_I(e))throw Error(hn(200));return bI(null,t,e,!0,n)};_u.hydrateRoot=function(t,e,n){if(!X5(t))throw Error(hn(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=Aee;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Cee(e,null,t,1,n??null,i,!1,o,a),t[jp]=e.current,cM(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new xI(e)};_u.render=function(t,e,n){if(!_I(e))throw Error(hn(200));return bI(null,t,e,!1,n)};_u.unmountComponentAtNode=function(t){if(!_I(t))throw Error(hn(40));return t._reactRootContainer?(T0(function(){bI(null,null,t,!1,function(){t._reactRootContainer=null,t[jp]=null})}),!0):!1};_u.unstable_batchedUpdates=U5;_u.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!_I(n))throw Error(hn(200));if(t==null||t._reactInternals===void 0)throw Error(hn(38));return bI(t,e,n,!1,r)};_u.version="18.2.0-next-9e3b772b8-20220608";function Pee(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Pee)}catch(t){console.error(t)}}Pee(),CJ.exports=_u;var py=CJ.exports;const PT=_i(py);var kee,XW=py;kee=XW.createRoot,XW.hydrateRoot;/**
 * @remix-run/router v1.14.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vM(){return vM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vM.apply(this,arguments)}var Ag;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ag||(Ag={}));const KW="popstate";function Xme(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:a,hash:s}=r.location;return Kz("",{pathname:o,search:a,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Iee(i)}return Zme(e,n,null,t)}function na(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function K5(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Kme(){return Math.random().toString(36).substr(2,8)}function ZW(t,e){return{usr:t.state,key:t.key,idx:e}}function Kz(t,e,n,r){return n===void 0&&(n=null),vM({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?i1(e):e,{state:n,key:e&&e.key||r||Kme()})}function Iee(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function i1(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Zme(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,s=Ag.Pop,l=null,c=h();c==null&&(c=0,a.replaceState(vM({},a.state,{idx:c}),""));function h(){return(a.state||{idx:null}).idx}function p(){s=Ag.Pop;let M=h(),w=M==null?null:M-c;c=M,l&&l({action:s,location:b.location,delta:w})}function g(M,w){s=Ag.Push;let T=Kz(b.location,M,w);n&&n(T,M),c=h()+1;let C=ZW(T,c),I=b.createHref(T);try{a.pushState(C,"",I)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(I)}o&&l&&l({action:s,location:b.location,delta:1})}function v(M,w){s=Ag.Replace;let T=Kz(b.location,M,w);n&&n(T,M),c=h();let C=ZW(T,c),I=b.createHref(T);a.replaceState(C,"",I),o&&l&&l({action:s,location:b.location,delta:0})}function x(M){let w=i.location.origin!=="null"?i.location.origin:i.location.href,T=typeof M=="string"?M:Iee(M);return na(w,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,w)}let b={get action(){return s},get location(){return t(i,a)},listen(M){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(KW,p),l=M,()=>{i.removeEventListener(KW,p),l=null}},createHref(M){return e(i,M)},createURL:x,encodeLocation(M){let w=x(M);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:g,replace:v,go(M){return a.go(M)}};return b}var JW;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(JW||(JW={}));function Jme(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?i1(e):e,i=Lee(r.pathname||"/",n);if(i==null)return null;let o=Ree(t);Qme(o);let a=null;for(let s=0;a==null&&s<o.length;++s)a=lge(o[s],dge(i));return a}function Ree(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,a,s)=>{let l={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};l.relativePath.startsWith("/")&&(na(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=c0([r,l.relativePath]),h=n.concat(l);o.children&&o.children.length>0&&(na(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Ree(o.children,e,h,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:sge(c,o.index),routesMeta:h})};return t.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))i(o,a);else for(let l of Oee(o.path))i(o,a,l)}),e}function Oee(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=Oee(r.join("/")),s=[];return s.push(...a.map(l=>l===""?o:[o,l].join("/"))),i&&s.push(...a),s.map(l=>t.startsWith("/")&&l===""?"/":l)}function Qme(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:age(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ege=/^:\w+$/,tge=3,nge=2,rge=1,ige=10,oge=-2,QW=t=>t==="*";function sge(t,e){let n=t.split("/"),r=n.length;return n.some(QW)&&(r+=oge),e&&(r+=nge),n.filter(i=>!QW(i)).reduce((i,o)=>i+(ege.test(o)?tge:o===""?rge:ige),r)}function age(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function lge(t,e){let{routesMeta:n}=t,r={},i="/",o=[];for(let a=0;a<n.length;++a){let s=n[a],l=a===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",h=cge({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},c);if(!h)return null;Object.assign(r,h.params);let p=s.route;o.push({params:r,pathname:c0([i,h.pathname]),pathnameBase:vge(c0([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=c0([i,h.pathnameBase]))}return o}function cge(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=uge(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((c,h,p)=>{let{paramName:g,isOptional:v}=h;if(g==="*"){let b=s[p]||"";a=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const x=s[p];return v&&!x?c[g]=void 0:c[g]=fge(x||"",g),c},{}),pathname:o,pathnameBase:a,pattern:t}}function uge(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),K5(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(a,s,l)=>(r.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function dge(t){try{return decodeURI(t)}catch(e){return K5(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function fge(t,e){try{return decodeURIComponent(t)}catch(n){return K5(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Lee(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function hge(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?i1(t):t;return{pathname:n?n.startsWith("/")?n:pge(n,e):e,search:xge(r),hash:_ge(i)}}function pge(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function hD(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function mge(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function gge(t,e){let n=mge(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function yge(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=i1(t):(i=vM({},t),na(!i.pathname||!i.pathname.includes("?"),hD("?","pathname","search",i)),na(!i.pathname||!i.pathname.includes("#"),hD("#","pathname","hash",i)),na(!i.search||!i.search.includes("#"),hD("#","search","hash",i)));let o=t===""||i.pathname==="",a=o?"/":i.pathname,s;if(a==null)s=n;else if(r){let p=e.length===0?[]:e[e.length-1].replace(/^\//,"").split("/");if(a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),p.pop();i.pathname=g.join("/")}s="/"+p.join("/")}else{let p=e.length-1;if(a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}s=p>=0?e[p]:"/"}let l=hge(i,s),c=a&&a!=="/"&&a.endsWith("/"),h=(o||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const c0=t=>t.join("/").replace(/\/\/+/g,"/"),vge=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),xge=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,_ge=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function bge(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Dee=["post","put","patch","delete"];new Set(Dee);const wge=["get",...Dee];new Set(wge);/**
 * React Router v6.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xM(){return xM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xM.apply(this,arguments)}const Z5=W.createContext(null),Sge=W.createContext(null),wI=W.createContext(null),SI=W.createContext(null),my=W.createContext({outlet:null,matches:[],isDataRoute:!1}),Nee=W.createContext(null);function MI(){return W.useContext(SI)!=null}function EI(){return MI()||na(!1),W.useContext(SI).location}function zee(t){W.useContext(wI).static||W.useLayoutEffect(t)}function rm(){let{isDataRoute:t}=W.useContext(my);return t?Bge():Mge()}function Mge(){MI()||na(!1);let t=W.useContext(Z5),{basename:e,future:n,navigator:r}=W.useContext(wI),{matches:i}=W.useContext(my),{pathname:o}=EI(),a=JSON.stringify(gge(i,n.v7_relativeSplatPath)),s=W.useRef(!1);return zee(()=>{s.current=!0}),W.useCallback(function(c,h){if(h===void 0&&(h={}),!s.current)return;if(typeof c=="number"){r.go(c);return}let p=yge(c,JSON.parse(a),o,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:c0([e,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[e,r,a,o,t])}const Ege=W.createContext(null);function Tge(t){let e=W.useContext(my).outlet;return e&&W.createElement(Ege.Provider,{value:t},e)}function Cge(){let{matches:t}=W.useContext(my),e=t[t.length-1];return e?e.params:{}}function Age(t,e){return Pge(t,e)}function Pge(t,e,n,r){MI()||na(!1);let{navigator:i}=W.useContext(wI),{matches:o}=W.useContext(my),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=EI(),h;if(e){var p;let M=typeof e=="string"?i1(e):e;l==="/"||(p=M.pathname)!=null&&p.startsWith(l)||na(!1),h=M}else h=c;let g=h.pathname||"/",v=l==="/"?g:g.slice(l.length)||"/",x=Jme(t,{pathname:v}),b=Lge(x&&x.map(M=>Object.assign({},M,{params:Object.assign({},s,M.params),pathname:c0([l,i.encodeLocation?i.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?l:c0([l,i.encodeLocation?i.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),o,n,r);return e&&b?W.createElement(SI.Provider,{value:{location:xM({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ag.Pop}},b):b}function kge(){let t=Fge(),e=bge(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),n?W.createElement("pre",{style:i},n):null,o)}const Ige=W.createElement(kge,null);class Rge extends W.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?W.createElement(my.Provider,{value:this.props.routeContext},W.createElement(Nee.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Oge(t){let{routeContext:e,match:n,children:r}=t,i=W.useContext(Z5);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),W.createElement(my.Provider,{value:e},r)}function Lge(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if((o=n)!=null&&o.errors)t=n.matches;else return null}let a=t,s=(i=n)==null?void 0:i.errors;if(s!=null){let h=a.findIndex(p=>p.route.id&&(s==null?void 0:s[p.route.id]));h>=0||na(!1),a=a.slice(0,Math.min(a.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<a.length;h++){let p=a[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=h),p.route.loader&&p.route.id&&n.loaderData[p.route.id]===void 0&&(!n.errors||n.errors[p.route.id]===void 0)){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}return a.reduceRight((h,p,g)=>{let v,x=!1,b=null,M=null;n&&(v=s&&p.route.id?s[p.route.id]:void 0,b=p.route.errorElement||Ige,l&&(c<0&&g===0?($ge("route-fallback",!1),x=!0,M=null):c===g&&(x=!0,M=p.route.hydrateFallbackElement||null)));let w=e.concat(a.slice(0,g+1)),T=()=>{let C;return v?C=b:x?C=M:p.route.Component?C=W.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=h,W.createElement(Oge,{match:p,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:C})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?W.createElement(Rge,{location:n.location,revalidation:n.revalidation,component:b,error:v,children:T(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):T()},null)}var Fee=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Fee||{}),bP=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(bP||{});function Dge(t){let e=W.useContext(Z5);return e||na(!1),e}function Nge(t){let e=W.useContext(Sge);return e||na(!1),e}function zge(t){let e=W.useContext(my);return e||na(!1),e}function Bee(t){let e=zge(),n=e.matches[e.matches.length-1];return n.route.id||na(!1),n.route.id}function Fge(){var t;let e=W.useContext(Nee),n=Nge(bP.UseRouteError),r=Bee(bP.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Bge(){let{router:t}=Dge(Fee.UseNavigateStable),e=Bee(bP.UseNavigateStable),n=W.useRef(!1);return zee(()=>{n.current=!0}),W.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,xM({fromRouteId:e},o)))},[t,e])}const eH={};function $ge(t,e,n){!e&&!eH[t]&&(eH[t]=!0)}function jge(t){return Tge(t.context)}function Nl(t){na(!1)}function Uge(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ag.Pop,navigator:o,static:a=!1,future:s}=t;MI()&&na(!1);let l=e.replace(/^\/*/,"/"),c=W.useMemo(()=>({basename:l,navigator:o,static:a,future:xM({v7_relativeSplatPath:!1},s)}),[l,s,o,a]);typeof r=="string"&&(r=i1(r));let{pathname:h="/",search:p="",hash:g="",state:v=null,key:x="default"}=r,b=W.useMemo(()=>{let M=Lee(h,l);return M==null?null:{location:{pathname:M,search:p,hash:g,state:v,key:x},navigationType:i}},[l,h,p,g,v,x,i]);return b==null?null:W.createElement(wI.Provider,{value:c},W.createElement(SI.Provider,{children:n,value:b}))}function Vge(t){let{children:e,location:n}=t;return Age(Zz(e),n)}new Promise(()=>{});function Zz(t,e){e===void 0&&(e=[]);let n=[];return W.Children.forEach(t,(r,i)=>{if(!W.isValidElement(r))return;let o=[...e,i];if(r.type===W.Fragment){n.push.apply(n,Zz(r.props.children,o));return}r.type!==Nl&&na(!1),!r.props.index||!r.props.children||na(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Zz(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Wge="startTransition",tH=KA[Wge];function Hge(t){let{basename:e,children:n,future:r,window:i}=t,o=W.useRef();o.current==null&&(o.current=Xme({window:i,v5Compat:!0}));let a=o.current,[s,l]=W.useState({action:a.action,location:a.location}),{v7_startTransition:c}=r||{},h=W.useCallback(p=>{c&&tH?tH(()=>l(p)):l(p)},[l,c]);return W.useLayoutEffect(()=>a.listen(h),[a,h]),W.createElement(Uge,{basename:e,children:n,location:s.location,navigationType:s.action,navigator:a,future:r})}var nH;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(nH||(nH={}));var rH;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(rH||(rH={}));var $ee={exports:{}},jee={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fb=W;function Gge(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qge=typeof Object.is=="function"?Object.is:Gge,Yge=fb.useState,Xge=fb.useEffect,Kge=fb.useLayoutEffect,Zge=fb.useDebugValue;function Jge(t,e){var n=e(),r=Yge({inst:{value:n,getSnapshot:e}}),i=r[0].inst,o=r[1];return Kge(function(){i.value=n,i.getSnapshot=e,pD(i)&&o({inst:i})},[t,n,e]),Xge(function(){return pD(i)&&o({inst:i}),t(function(){pD(i)&&o({inst:i})})},[t]),Zge(n),n}function pD(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qge(t,n)}catch{return!0}}function Qge(t,e){return e()}var eye=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Qge:Jge;jee.useSyncExternalStore=fb.useSyncExternalStore!==void 0?fb.useSyncExternalStore:eye;$ee.exports=jee;var Uee=$ee.exports,Vee={exports:{}},Wee={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TI=W,tye=Uee;function nye(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rye=typeof Object.is=="function"?Object.is:nye,iye=tye.useSyncExternalStore,oye=TI.useRef,sye=TI.useEffect,aye=TI.useMemo,lye=TI.useDebugValue;Wee.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var o=oye(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=aye(function(){function l(v){if(!c){if(c=!0,h=v,v=r(v),i!==void 0&&a.hasValue){var x=a.value;if(i(x,v))return p=x}return p=v}if(x=p,rye(h,v))return x;var b=r(v);return i!==void 0&&i(x,b)?x:(h=v,p=b)}var c=!1,h,p,g=n===void 0?null:n;return[function(){return l(e())},g===null?void 0:function(){return l(g())}]},[e,n,r,i]);var s=iye(t,o[0],o[1]);return sye(function(){a.hasValue=!0,a.value=s},[s]),lye(s),s};Vee.exports=Wee;var cye=Vee.exports;function uye(t){t()}let Hee=uye;const dye=t=>Hee=t,fye=()=>Hee,iH=Symbol.for("react-redux-context"),oH=typeof globalThis<"u"?globalThis:{};function hye(){var t;if(!W.createContext)return{};const e=(t=oH[iH])!=null?t:oH[iH]=new Map;let n=e.get(W.createContext);return n||(n=W.createContext(null),e.set(W.createContext,n)),n}const Wp=hye();function J5(t=Wp){return function(){return W.useContext(t)}}const Gee=J5(),qee=()=>{throw new Error("uSES not initialized!")};let Yee=qee;const pye=t=>{Yee=t},mye=(t,e)=>t===e;function gye(t=Wp){const e=t===Wp?Gee:J5(t);return function(r,i={}){const{equalityFn:o=mye,stabilityCheck:a=void 0,noopCheck:s=void 0}=typeof i=="function"?{equalityFn:i}:i,{store:l,subscription:c,getServerState:h,stabilityCheck:p,noopCheck:g}=e();W.useRef(!0);const v=W.useCallback({[r.name](b){return r(b)}}[r.name],[r,p,a]),x=Yee(c.addNestedSub,l.getState,h||l.getState,v,o);return W.useDebugValue(x),x}}const mr=gye();function de(){return de=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},de.apply(this,arguments)}function on(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Xee={exports:{}},Bi={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ma=typeof Symbol=="function"&&Symbol.for,Q5=ma?Symbol.for("react.element"):60103,e$=ma?Symbol.for("react.portal"):60106,CI=ma?Symbol.for("react.fragment"):60107,AI=ma?Symbol.for("react.strict_mode"):60108,PI=ma?Symbol.for("react.profiler"):60114,kI=ma?Symbol.for("react.provider"):60109,II=ma?Symbol.for("react.context"):60110,t$=ma?Symbol.for("react.async_mode"):60111,RI=ma?Symbol.for("react.concurrent_mode"):60111,OI=ma?Symbol.for("react.forward_ref"):60112,LI=ma?Symbol.for("react.suspense"):60113,yye=ma?Symbol.for("react.suspense_list"):60120,DI=ma?Symbol.for("react.memo"):60115,NI=ma?Symbol.for("react.lazy"):60116,vye=ma?Symbol.for("react.block"):60121,xye=ma?Symbol.for("react.fundamental"):60117,_ye=ma?Symbol.for("react.responder"):60118,bye=ma?Symbol.for("react.scope"):60119;function wu(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Q5:switch(t=t.type,t){case t$:case RI:case CI:case PI:case AI:case LI:return t;default:switch(t=t&&t.$$typeof,t){case II:case OI:case NI:case DI:case kI:return t;default:return e}}case e$:return e}}}function Kee(t){return wu(t)===RI}Bi.AsyncMode=t$;Bi.ConcurrentMode=RI;Bi.ContextConsumer=II;Bi.ContextProvider=kI;Bi.Element=Q5;Bi.ForwardRef=OI;Bi.Fragment=CI;Bi.Lazy=NI;Bi.Memo=DI;Bi.Portal=e$;Bi.Profiler=PI;Bi.StrictMode=AI;Bi.Suspense=LI;Bi.isAsyncMode=function(t){return Kee(t)||wu(t)===t$};Bi.isConcurrentMode=Kee;Bi.isContextConsumer=function(t){return wu(t)===II};Bi.isContextProvider=function(t){return wu(t)===kI};Bi.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Q5};Bi.isForwardRef=function(t){return wu(t)===OI};Bi.isFragment=function(t){return wu(t)===CI};Bi.isLazy=function(t){return wu(t)===NI};Bi.isMemo=function(t){return wu(t)===DI};Bi.isPortal=function(t){return wu(t)===e$};Bi.isProfiler=function(t){return wu(t)===PI};Bi.isStrictMode=function(t){return wu(t)===AI};Bi.isSuspense=function(t){return wu(t)===LI};Bi.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===CI||t===RI||t===PI||t===AI||t===LI||t===yye||typeof t=="object"&&t!==null&&(t.$$typeof===NI||t.$$typeof===DI||t.$$typeof===kI||t.$$typeof===II||t.$$typeof===OI||t.$$typeof===xye||t.$$typeof===_ye||t.$$typeof===bye||t.$$typeof===vye)};Bi.typeOf=wu;Xee.exports=Bi;var wye=Xee.exports,n$=wye,Sye={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Mye={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Eye={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Zee={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},r$={};r$[n$.ForwardRef]=Eye;r$[n$.Memo]=Zee;function sH(t){return n$.isMemo(t)?Zee:r$[t.$$typeof]||Sye}var Tye=Object.defineProperty,Cye=Object.getOwnPropertyNames,aH=Object.getOwnPropertySymbols,Aye=Object.getOwnPropertyDescriptor,Pye=Object.getPrototypeOf,lH=Object.prototype;function Jee(t,e,n){if(typeof e!="string"){if(lH){var r=Pye(e);r&&r!==lH&&Jee(t,r,n)}var i=Cye(e);aH&&(i=i.concat(aH(e)));for(var o=sH(t),a=sH(e),s=0;s<i.length;++s){var l=i[s];if(!Mye[l]&&!(n&&n[l])&&!(a&&a[l])&&!(o&&o[l])){var c=Aye(e,l);try{Tye(t,l,c)}catch{}}}}return t}var kye=Jee;const cH=_i(kye);var Qee={exports:{}},$i={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i$=Symbol.for("react.element"),o$=Symbol.for("react.portal"),zI=Symbol.for("react.fragment"),FI=Symbol.for("react.strict_mode"),BI=Symbol.for("react.profiler"),$I=Symbol.for("react.provider"),jI=Symbol.for("react.context"),Iye=Symbol.for("react.server_context"),UI=Symbol.for("react.forward_ref"),VI=Symbol.for("react.suspense"),WI=Symbol.for("react.suspense_list"),HI=Symbol.for("react.memo"),GI=Symbol.for("react.lazy"),Rye=Symbol.for("react.offscreen"),ete;ete=Symbol.for("react.module.reference");function yd(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case i$:switch(t=t.type,t){case zI:case BI:case FI:case VI:case WI:return t;default:switch(t=t&&t.$$typeof,t){case Iye:case jI:case UI:case GI:case HI:case $I:return t;default:return e}}case o$:return e}}}$i.ContextConsumer=jI;$i.ContextProvider=$I;$i.Element=i$;$i.ForwardRef=UI;$i.Fragment=zI;$i.Lazy=GI;$i.Memo=HI;$i.Portal=o$;$i.Profiler=BI;$i.StrictMode=FI;$i.Suspense=VI;$i.SuspenseList=WI;$i.isAsyncMode=function(){return!1};$i.isConcurrentMode=function(){return!1};$i.isContextConsumer=function(t){return yd(t)===jI};$i.isContextProvider=function(t){return yd(t)===$I};$i.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===i$};$i.isForwardRef=function(t){return yd(t)===UI};$i.isFragment=function(t){return yd(t)===zI};$i.isLazy=function(t){return yd(t)===GI};$i.isMemo=function(t){return yd(t)===HI};$i.isPortal=function(t){return yd(t)===o$};$i.isProfiler=function(t){return yd(t)===BI};$i.isStrictMode=function(t){return yd(t)===FI};$i.isSuspense=function(t){return yd(t)===VI};$i.isSuspenseList=function(t){return yd(t)===WI};$i.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===zI||t===BI||t===FI||t===VI||t===WI||t===Rye||typeof t=="object"&&t!==null&&(t.$$typeof===GI||t.$$typeof===HI||t.$$typeof===$I||t.$$typeof===jI||t.$$typeof===UI||t.$$typeof===ete||t.getModuleId!==void 0)};$i.typeOf=yd;Qee.exports=$i;var Jz=Qee.exports;const Oye=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Lye(t,e,n,r,{areStatesEqual:i,areOwnPropsEqual:o,areStatePropsEqual:a}){let s=!1,l,c,h,p,g;function v(T,C){return l=T,c=C,h=t(l,c),p=e(r,c),g=n(h,p,c),s=!0,g}function x(){return h=t(l,c),e.dependsOnOwnProps&&(p=e(r,c)),g=n(h,p,c),g}function b(){return t.dependsOnOwnProps&&(h=t(l,c)),e.dependsOnOwnProps&&(p=e(r,c)),g=n(h,p,c),g}function M(){const T=t(l,c),C=!a(T,h);return h=T,C&&(g=n(h,p,c)),g}function w(T,C){const I=!o(C,c),R=!i(T,l,C,c);return l=T,c=C,I&&R?x():I?b():R?M():g}return function(C,I){return s?w(C,I):v(C,I)}}function Dye(t,e){let{initMapStateToProps:n,initMapDispatchToProps:r,initMergeProps:i}=e,o=on(e,Oye);const a=n(t,o),s=r(t,o),l=i(t,o);return Lye(a,s,l,t,o)}function Nye(t,e){const n={};for(const r in t){const i=t[r];typeof i=="function"&&(n[r]=(...o)=>e(i(...o)))}return n}function Qz(t){return function(n){const r=t(n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function uH(t){return t.dependsOnOwnProps?!!t.dependsOnOwnProps:t.length!==1}function tte(t,e){return function(r,{displayName:i}){const o=function(s,l){return o.dependsOnOwnProps?o.mapToProps(s,l):o.mapToProps(s,void 0)};return o.dependsOnOwnProps=!0,o.mapToProps=function(s,l){o.mapToProps=t,o.dependsOnOwnProps=uH(t);let c=o(s,l);return typeof c=="function"&&(o.mapToProps=c,o.dependsOnOwnProps=uH(c),c=o(s,l)),c},o}}function s$(t,e){return(n,r)=>{throw new Error(`Invalid value of type ${typeof t} for ${e} argument when connecting component ${r.wrappedComponentName}.`)}}function zye(t){return t&&typeof t=="object"?Qz(e=>Nye(t,e)):t?typeof t=="function"?tte(t):s$(t,"mapDispatchToProps"):Qz(e=>({dispatch:e}))}function Fye(t){return t?typeof t=="function"?tte(t):s$(t,"mapStateToProps"):Qz(()=>({}))}function Bye(t,e,n){return de({},n,t,e)}function $ye(t){return function(n,{displayName:r,areMergedPropsEqual:i}){let o=!1,a;return function(l,c,h){const p=t(l,c,h);return o?i(p,a)||(a=p):(o=!0,a=p),a}}}function jye(t){return t?typeof t=="function"?$ye(t):s$(t,"mergeProps"):()=>Bye}function Uye(){const t=fye();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=e;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,o=n={callback:r,next:null,prev:n};return o.prev?o.prev.next=o:e=o,function(){!i||e===null||(i=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}const dH={notify(){},get:()=>[]};function nte(t,e){let n,r=dH,i=0,o=!1;function a(b){h();const M=r.subscribe(b);let w=!1;return()=>{w||(w=!0,M(),p())}}function s(){r.notify()}function l(){x.onStateChange&&x.onStateChange()}function c(){return o}function h(){i++,n||(n=e?e.addNestedSub(l):t.subscribe(l),r=Uye())}function p(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=dH)}function g(){o||(o=!0,h())}function v(){o&&(o=!1,p())}const x={addNestedSub:a,notifyNestedSubs:s,handleChangeWrapper:l,isSubscribed:c,trySubscribe:g,tryUnsubscribe:v,getListeners:()=>r};return x}const Vye=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wP=Vye?W.useLayoutEffect:W.useEffect;function fH(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function mD(t,e){if(fH(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!fH(t[n[i]],e[n[i]]))return!1;return!0}const Wye=["reactReduxForwardedRef"];let rte=qee;const Hye=t=>{rte=t},Gye=[null,null];function qye(t,e,n){wP(()=>t(...e),n)}function Yye(t,e,n,r,i,o){t.current=r,n.current=!1,i.current&&(i.current=null,o())}function Xye(t,e,n,r,i,o,a,s,l,c,h){if(!t)return()=>{};let p=!1,g=null;const v=()=>{if(p||!s.current)return;const b=e.getState();let M,w;try{M=r(b,i.current)}catch(T){w=T,g=T}w||(g=null),M===o.current?a.current||c():(o.current=M,l.current=M,a.current=!0,h())};return n.onStateChange=v,n.trySubscribe(),v(),()=>{if(p=!0,n.tryUnsubscribe(),n.onStateChange=null,g)throw g}}function Kye(t,e){return t===e}function Zye(t,e,n,{pure:r,areStatesEqual:i=Kye,areOwnPropsEqual:o=mD,areStatePropsEqual:a=mD,areMergedPropsEqual:s=mD,forwardRef:l=!1,context:c=Wp}={}){const h=c,p=Fye(t),g=zye(e),v=jye(n),x=!!t;return M=>{const w=M.displayName||M.name||"Component",T=`Connect(${w})`,C={shouldHandleStateChanges:x,displayName:T,wrappedComponentName:w,WrappedComponent:M,initMapStateToProps:p,initMapDispatchToProps:g,initMergeProps:v,areStatesEqual:i,areStatePropsEqual:a,areOwnPropsEqual:o,areMergedPropsEqual:s};function I(B){const[U,Z,j]=W.useMemo(()=>{const{reactReduxForwardedRef:ge}=B,et=on(B,Wye);return[B.context,ge,et]},[B]),X=W.useMemo(()=>U&&U.Consumer&&Jz.isContextConsumer(W.createElement(U.Consumer,null))?U:h,[U,h]),le=W.useContext(X),me=!!B.store&&!!B.store.getState&&!!B.store.dispatch,ie=!!le&&!!le.store,ce=me?B.store:le.store,fe=ie?le.getServerState:ce.getState,xe=W.useMemo(()=>Dye(ce.dispatch,C),[ce]),[te,he]=W.useMemo(()=>{if(!x)return Gye;const ge=nte(ce,me?void 0:le.subscription),et=ge.notifyNestedSubs.bind(ge);return[ge,et]},[ce,me,le]),ve=W.useMemo(()=>me?le:de({},le,{subscription:te}),[me,le,te]),ze=W.useRef(),Ue=W.useRef(j),rt=W.useRef(),Be=W.useRef(!1);W.useRef(!1);const st=W.useRef(!1),ct=W.useRef();wP(()=>(st.current=!0,()=>{st.current=!1}),[]);const Dt=W.useMemo(()=>()=>rt.current&&j===Ue.current?rt.current:xe(ce.getState(),j),[ce,j]),zt=W.useMemo(()=>et=>te?Xye(x,ce,te,xe,Ue,ze,Be,st,rt,he,et):()=>{},[te]);qye(Yye,[Ue,ze,Be,j,rt,he]);let Fe;try{Fe=rte(zt,Dt,fe?()=>xe(fe(),j):Dt)}catch(ge){throw ct.current&&(ge.message+=`
The error may be correlated with this previous error:
${ct.current.stack}

`),ge}wP(()=>{ct.current=void 0,rt.current=void 0,ze.current=Fe});const lt=W.useMemo(()=>W.createElement(M,de({},Fe,{ref:Z})),[Z,M,Fe]);return W.useMemo(()=>x?W.createElement(X.Provider,{value:ve},lt):lt,[X,lt,ve])}const O=W.memo(I);if(O.WrappedComponent=M,O.displayName=I.displayName=T,l){const U=W.forwardRef(function(j,X){return W.createElement(O,de({},j,{reactReduxForwardedRef:X}))});return U.displayName=T,U.WrappedComponent=M,cH(U,M)}return cH(O,M)}}function Jye({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",noopCheck:o="once"}){const a=W.useMemo(()=>{const c=nte(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:o}},[t,r,i,o]),s=W.useMemo(()=>t.getState(),[t]);wP(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,s]);const l=e||Wp;return W.createElement(l.Provider,{value:a},n)}function ite(t=Wp){const e=t===Wp?Gee:J5(t);return function(){const{store:r}=e();return r}}const Qye=ite();function eve(t=Wp){const e=t===Wp?Qye:ite(t);return function(){return e().dispatch}}const Zl=eve();pye(cye.useSyncExternalStoreWithSelector);Hye(Uee.useSyncExternalStore);dye(py.unstable_batchedUpdates);function of(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ry(t){return!!t&&!!t[ko]}function Hp(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===cve}(t)||Array.isArray(t)||!!t[xH]||!!(!((e=t.constructor)===null||e===void 0)&&e[xH])||a$(t)||l$(t))}function C0(t,e,n){n===void 0&&(n=!1),o1(t)===0?(n?Object.keys:G_)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,i){return e(i,r,t)})}function o1(t){var e=t[ko];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:a$(t)?2:l$(t)?3:0}function H_(t,e){return o1(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function tve(t,e){return o1(t)===2?t.get(e):t[e]}function ote(t,e,n){var r=o1(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function ste(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function a$(t){return ave&&t instanceof Map}function l$(t){return lve&&t instanceof Set}function Iv(t){return t.o||t.t}function c$(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=lte(t);delete e[ko];for(var n=G_(e),r=0;r<n.length;r++){var i=n[r],o=e[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function u$(t,e){return e===void 0&&(e=!1),d$(t)||ry(t)||!Hp(t)||(o1(t)>1&&(t.set=t.add=t.clear=t.delete=nve),Object.freeze(t),e&&C0(t,function(n,r){return u$(r,!0)},!0)),t}function nve(){of(2)}function d$(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function gh(t){var e=rF[t];return e||of(18,t),e}function rve(t,e){rF[t]||(rF[t]=e)}function eF(){return _M}function gD(t,e){e&&(gh("Patches"),t.u=[],t.s=[],t.v=e)}function SP(t){tF(t),t.p.forEach(ive),t.p=null}function tF(t){t===_M&&(_M=t.l)}function hH(t){return _M={p:[],l:_M,h:t,m:!0,_:0}}function ive(t){var e=t[ko];e.i===0||e.i===1?e.j():e.g=!0}function yD(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||gh("ES5").S(e,t,r),r?(n[ko].P&&(SP(e),of(4)),Hp(t)&&(t=MP(e,t),e.l||EP(e,t)),e.u&&gh("Patches").M(n[ko].t,t,e.u,e.s)):t=MP(e,n,[]),SP(e),e.u&&e.v(e.u,e.s),t!==ate?t:void 0}function MP(t,e,n){if(d$(e))return e;var r=e[ko];if(!r)return C0(e,function(s,l){return pH(t,r,e,s,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return EP(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=c$(r.k):r.o,o=i,a=!1;r.i===3&&(o=new Set(i),i.clear(),a=!0),C0(o,function(s,l){return pH(t,r,i,s,l,n,a)}),EP(t,i,!1),n&&t.u&&gh("Patches").N(r,n,t.u,t.s)}return r.o}function pH(t,e,n,r,i,o,a){if(ry(i)){var s=MP(t,i,o&&e&&e.i!==3&&!H_(e.R,r)?o.concat(r):void 0);if(ote(n,r,s),!ry(s))return;t.m=!1}else a&&n.add(i);if(Hp(i)&&!d$(i)){if(!t.h.D&&t._<1)return;MP(t,i),e&&e.A.l||EP(t,i)}}function EP(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&u$(e,n)}function vD(t,e){var n=t[ko];return(n?Iv(n):t)[e]}function mH(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function Sg(t){t.P||(t.P=!0,t.l&&Sg(t.l))}function xD(t){t.o||(t.o=c$(t.t))}function nF(t,e,n){var r=a$(e)?gh("MapSet").F(e,n):l$(e)?gh("MapSet").T(e,n):t.O?function(i,o){var a=Array.isArray(i),s={i:a?1:0,A:o?o.A:eF(),P:!1,I:!1,R:{},l:o,t:i,k:null,o:null,j:null,C:!1},l=s,c=bM;a&&(l=[s],c=mS);var h=Proxy.revocable(l,c),p=h.revoke,g=h.proxy;return s.k=g,s.j=p,g}(e,n):gh("ES5").J(e,n);return(n?n.A:eF()).p.push(r),r}function ove(t){return ry(t)||of(22,t),function e(n){if(!Hp(n))return n;var r,i=n[ko],o=o1(n);if(i){if(!i.P&&(i.i<4||!gh("ES5").K(i)))return i.t;i.I=!0,r=gH(n,o),i.I=!1}else r=gH(n,o);return C0(r,function(a,s){i&&tve(i.t,a)===s||ote(r,a,e(s))}),o===3?new Set(r):r}(t)}function gH(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return c$(t)}function sve(){function t(o,a){var s=i[o];return s?s.enumerable=a:i[o]=s={configurable:!0,enumerable:a,get:function(){var l=this[ko];return bM.get(l,o)},set:function(l){var c=this[ko];bM.set(c,o,l)}},s}function e(o){for(var a=o.length-1;a>=0;a--){var s=o[a][ko];if(!s.P)switch(s.i){case 5:r(s)&&Sg(s);break;case 4:n(s)&&Sg(s)}}}function n(o){for(var a=o.t,s=o.k,l=G_(s),c=l.length-1;c>=0;c--){var h=l[c];if(h!==ko){var p=a[h];if(p===void 0&&!H_(a,h))return!0;var g=s[h],v=g&&g[ko];if(v?v.t!==p:!ste(g,p))return!0}}var x=!!a[ko];return l.length!==G_(a).length+(x?0:1)}function r(o){var a=o.k;if(a.length!==o.t.length)return!0;var s=Object.getOwnPropertyDescriptor(a,a.length-1);if(s&&!s.get)return!0;for(var l=0;l<a.length;l++)if(!a.hasOwnProperty(l))return!0;return!1}var i={};rve("ES5",{J:function(o,a){var s=Array.isArray(o),l=function(h,p){if(h){for(var g=Array(p.length),v=0;v<p.length;v++)Object.defineProperty(g,""+v,t(v,!0));return g}var x=lte(p);delete x[ko];for(var b=G_(x),M=0;M<b.length;M++){var w=b[M];x[w]=t(w,h||!!x[w].enumerable)}return Object.create(Object.getPrototypeOf(p),x)}(s,o),c={i:s?5:4,A:a?a.A:eF(),P:!1,I:!1,R:{},l:a,t:o,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,ko,{value:c,writable:!0}),l},S:function(o,a,s){s?ry(a)&&a[ko].A===o&&e(o.p):(o.u&&function l(c){if(c&&typeof c=="object"){var h=c[ko];if(h){var p=h.t,g=h.k,v=h.R,x=h.i;if(x===4)C0(g,function(C){C!==ko&&(p[C]!==void 0||H_(p,C)?v[C]||l(g[C]):(v[C]=!0,Sg(h)))}),C0(p,function(C){g[C]!==void 0||H_(g,C)||(v[C]=!1,Sg(h))});else if(x===5){if(r(h)&&(Sg(h),v.length=!0),g.length<p.length)for(var b=g.length;b<p.length;b++)v[b]=!1;else for(var M=p.length;M<g.length;M++)v[M]=!0;for(var w=Math.min(g.length,p.length),T=0;T<w;T++)g.hasOwnProperty(T)||(v[T]=!0),v[T]===void 0&&l(g[T])}}}}(o.p[0]),e(o.p))},K:function(o){return o.i===4?n(o):r(o)}})}var yH,_M,f$=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",ave=typeof Map<"u",lve=typeof Set<"u",vH=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",ate=f$?Symbol.for("immer-nothing"):((yH={})["immer-nothing"]=!0,yH),xH=f$?Symbol.for("immer-draftable"):"__$immer_draftable",ko=f$?Symbol.for("immer-state"):"__$immer_state",cve=""+Object.prototype.constructor,G_=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,lte=Object.getOwnPropertyDescriptors||function(t){var e={};return G_(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},rF={},bM={get:function(t,e){if(e===ko)return t;var n=Iv(t);if(!H_(n,e))return function(i,o,a){var s,l=mH(o,a);return l?"value"in l?l.value:(s=l.get)===null||s===void 0?void 0:s.call(i.k):void 0}(t,n,e);var r=n[e];return t.I||!Hp(r)?r:r===vD(t.t,e)?(xD(t),t.o[e]=nF(t.A.h,r,t)):r},has:function(t,e){return e in Iv(t)},ownKeys:function(t){return Reflect.ownKeys(Iv(t))},set:function(t,e,n){var r=mH(Iv(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=vD(Iv(t),e),o=i==null?void 0:i[ko];if(o&&o.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(ste(n,i)&&(n!==void 0||H_(t.t,e)))return!0;xD(t),Sg(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return vD(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,xD(t),Sg(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=Iv(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){of(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){of(12)}},mS={};C0(bM,function(t,e){mS[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),mS.deleteProperty=function(t,e){return mS.set.call(this,t,e,void 0)},mS.set=function(t,e,n){return bM.set.call(this,t[0],e,n,t[0])};var uve=function(){function t(n){var r=this;this.O=vH,this.D=!0,this.produce=function(i,o,a){if(typeof i=="function"&&typeof o!="function"){var s=o;o=i;var l=r;return function(b){var M=this;b===void 0&&(b=s);for(var w=arguments.length,T=Array(w>1?w-1:0),C=1;C<w;C++)T[C-1]=arguments[C];return l.produce(b,function(I){var R;return(R=o).call.apply(R,[M,I].concat(T))})}}var c;if(typeof o!="function"&&of(6),a!==void 0&&typeof a!="function"&&of(7),Hp(i)){var h=hH(r),p=nF(r,i,void 0),g=!0;try{c=o(p),g=!1}finally{g?SP(h):tF(h)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(b){return gD(h,a),yD(b,h)},function(b){throw SP(h),b}):(gD(h,a),yD(c,h))}if(!i||typeof i!="object"){if((c=o(i))===void 0&&(c=i),c===ate&&(c=void 0),r.D&&u$(c,!0),a){var v=[],x=[];gh("Patches").M(i,c,v,x),a(v,x)}return c}of(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(c){for(var h=arguments.length,p=Array(h>1?h-1:0),g=1;g<h;g++)p[g-1]=arguments[g];return r.produceWithPatches(c,function(v){return i.apply(void 0,[v].concat(p))})};var a,s,l=r.produce(i,o,function(c,h){a=c,s=h});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,a,s]}):[l,a,s]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){Hp(n)||of(8),ry(n)&&(n=ove(n));var r=hH(this),i=nF(this,n,void 0);return i[ko].C=!0,tF(r),i},e.finishDraft=function(n,r){var i=n&&n[ko],o=i.A;return gD(o,r),yD(void 0,o)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!vH&&of(20),this.O=n},e.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var o=r[i];if(o.path.length===0&&o.op==="replace"){n=o.value;break}}i>-1&&(r=r.slice(i+1));var a=gh("Patches").$;return ry(n)?a(n,r):this.produce(n,function(s){return a(s,r)})},t}(),pu=new uve,cte=pu.produce;pu.produceWithPatches.bind(pu);pu.setAutoFreeze.bind(pu);pu.setUseProxies.bind(pu);pu.applyPatches.bind(pu);pu.createDraft.bind(pu);pu.finishDraft.bind(pu);function wM(t){"@babel/helpers - typeof";return wM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wM(t)}function dve(t,e){if(wM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(wM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ute(t){var e=dve(t,"string");return wM(e)=="symbol"?e:String(e)}function fve(t,e,n){return e=ute(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_H(Object(n),!0).forEach(function(r){fve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_H(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cl(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var wH=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),_D=function(){return Math.random().toString(36).substring(7).split("").join(".")},TP={INIT:"@@redux/INIT"+_D(),REPLACE:"@@redux/REPLACE"+_D(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+_D()}};function hve(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function dte(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(cl(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(cl(1));return n(dte)(t,e)}if(typeof t!="function")throw new Error(cl(2));var i=t,o=e,a=[],s=a,l=!1;function c(){s===a&&(s=a.slice())}function h(){if(l)throw new Error(cl(3));return o}function p(b){if(typeof b!="function")throw new Error(cl(4));if(l)throw new Error(cl(5));var M=!0;return c(),s.push(b),function(){if(M){if(l)throw new Error(cl(6));M=!1,c();var T=s.indexOf(b);s.splice(T,1),a=null}}}function g(b){if(!hve(b))throw new Error(cl(7));if(typeof b.type>"u")throw new Error(cl(8));if(l)throw new Error(cl(9));try{l=!0,o=i(o,b)}finally{l=!1}for(var M=a=s,w=0;w<M.length;w++){var T=M[w];T()}return b}function v(b){if(typeof b!="function")throw new Error(cl(10));i=b,g({type:TP.REPLACE})}function x(){var b,M=p;return b={subscribe:function(T){if(typeof T!="object"||T===null)throw new Error(cl(11));function C(){T.next&&T.next(h())}C();var I=M(C);return{unsubscribe:I}}},b[wH]=function(){return this},b}return g({type:TP.INIT}),r={dispatch:g,subscribe:p,getState:h,replaceReducer:v},r[wH]=x,r}function pve(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:TP.INIT});if(typeof r>"u")throw new Error(cl(12));if(typeof n(void 0,{type:TP.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(cl(13))})}function fte(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];typeof t[i]=="function"&&(n[i]=t[i])}var o=Object.keys(n),a;try{pve(n)}catch(s){a=s}return function(l,c){if(l===void 0&&(l={}),a)throw a;for(var h=!1,p={},g=0;g<o.length;g++){var v=o[g],x=n[v],b=l[v],M=x(b,c);if(typeof M>"u")throw c&&c.type,new Error(cl(14));p[v]=M,h=h||M!==b}return h=h||o.length!==Object.keys(l).length,h?p:l}}function CP(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function mve(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),o=function(){throw new Error(cl(15))},a={getState:i.getState,dispatch:function(){return o.apply(void 0,arguments)}},s=e.map(function(l){return l(a)});return o=CP.apply(void 0,s)(i.dispatch),bH(bH({},i),{},{dispatch:o})}}}function hte(t){var e=function(r){var i=r.dispatch,o=r.getState;return function(a){return function(s){return typeof s=="function"?s(i,o,t):a(s)}}};return e}var pte=hte();pte.withExtraArgument=hte;const SH=pte;var mte=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),gve=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(h){return l([c,h])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(h){c=[6,h],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},hb=function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},yve=Object.defineProperty,vve=Object.defineProperties,xve=Object.getOwnPropertyDescriptors,MH=Object.getOwnPropertySymbols,_ve=Object.prototype.hasOwnProperty,bve=Object.prototype.propertyIsEnumerable,EH=function(t,e,n){return e in t?yve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},Wg=function(t,e){for(var n in e||(e={}))_ve.call(e,n)&&EH(t,n,e[n]);if(MH)for(var r=0,i=MH(e);r<i.length;r++){var n=i[r];bve.call(e,n)&&EH(t,n,e[n])}return t},bD=function(t,e){return vve(t,xve(e))},wve=function(t,e,n){return new Promise(function(r,i){var o=function(l){try{s(n.next(l))}catch(c){i(c)}},a=function(l){try{s(n.throw(l))}catch(c){i(c)}},s=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(o,a)};s((n=n.apply(t,e)).next())})},Sve=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?CP:CP.apply(null,arguments)};function Mve(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}function Hg(t,e){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(e){var o=e.apply(void 0,r);if(!o)throw new Error("prepareAction did not return an object");return Wg(Wg({type:t,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}var Eve=function(t){mte(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,hb([void 0],n[0].concat(this)))):new(e.bind.apply(e,hb([void 0],n.concat(this))))},e}(Array),Tve=function(t){mte(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,hb([void 0],n[0].concat(this)))):new(e.bind.apply(e,hb([void 0],n.concat(this))))},e}(Array);function iF(t){return Hp(t)?cte(t,function(){}):t}function Cve(t){return typeof t=="boolean"}function Ave(){return function(e){return Pve(e)}}function Pve(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck,t.actionCreatorCheck;var r=new Eve;return n&&(Cve(n)?r.push(SH):r.push(SH.withExtraArgument(n.extraArgument))),r}var kve=!0;function Ive(t){var e=Ave(),n=t||{},r=n.reducer,i=r===void 0?void 0:r,o=n.middleware,a=o===void 0?e():o,s=n.devTools,l=s===void 0?!0:s,c=n.preloadedState,h=c===void 0?void 0:c,p=n.enhancers,g=p===void 0?void 0:p,v;if(typeof i=="function")v=i;else if(Mve(i))v=fte(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var x=a;typeof x=="function"&&(x=x(e));var b=mve.apply(void 0,x),M=CP;l&&(M=Sve(Wg({trace:!kve},typeof l=="object"&&l)));var w=new Tve(b),T=w;Array.isArray(g)?T=hb([b],g):typeof g=="function"&&(T=g(w));var C=M.apply(void 0,T);return dte(v,h,C)}function gte(t){var e={},n=[],r,i={addCase:function(o,a){var s=typeof o=="string"?o:o.type;if(!s)throw new Error("`builder.addCase` cannot be called with an empty action type");if(s in e)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return e[s]=a,i},addMatcher:function(o,a){return n.push({matcher:o,reducer:a}),i},addDefaultCase:function(o){return r=o,i}};return t(i),[e,n,r]}function Rve(t){return typeof t=="function"}function Ove(t,e,n,r){n===void 0&&(n=[]);var i=typeof e=="function"?gte(e):[e,n,r],o=i[0],a=i[1],s=i[2],l;if(Rve(t))l=function(){return iF(t())};else{var c=iF(t);l=function(){return c}}function h(p,g){p===void 0&&(p=l());var v=hb([o[g.type]],a.filter(function(x){var b=x.matcher;return b(g)}).map(function(x){var b=x.reducer;return b}));return v.filter(function(x){return!!x}).length===0&&(v=[s]),v.reduce(function(x,b){if(b)if(ry(x)){var M=x,w=b(M,g);return w===void 0?x:w}else{if(Hp(x))return cte(x,function(T){return b(T,g)});var w=b(x,g);if(w===void 0){if(x===null)return x;throw Error("A case reducer on a non-draftable value must not return undefined")}return w}return x},p)}return h.getInitialState=l,h}function Lve(t,e){return t+"/"+e}function s1(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:iF(t.initialState),r=t.reducers||{},i=Object.keys(r),o={},a={},s={};i.forEach(function(h){var p=r[h],g=Lve(e,h),v,x;"reducer"in p?(v=p.reducer,x=p.prepare):v=p,o[h]=v,a[g]=v,s[h]=x?Hg(g,x):Hg(g)});function l(){var h=typeof t.extraReducers=="function"?gte(t.extraReducers):[t.extraReducers],p=h[0],g=p===void 0?{}:p,v=h[1],x=v===void 0?[]:v,b=h[2],M=b===void 0?void 0:b,w=Wg(Wg({},g),a);return Ove(n,function(T){for(var C in w)T.addCase(C,w[C]);for(var I=0,R=x;I<R.length;I++){var O=R[I];T.addMatcher(O.matcher,O.reducer)}M&&T.addDefaultCase(M)})}var c;return{name:e,reducer:function(h,p){return c||(c=l()),c(h,p)},actions:s,caseReducers:o,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var Dve="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Nve=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=Dve[Math.random()*64|0];return e},zve=["name","message","stack","code"],wD=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),TH=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),Fve=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=zve;n<r.length;n++){var i=r[n];typeof t[i]=="string"&&(e[i]=t[i])}return e}return{message:String(t)}};(function(){function t(e,n,r){var i=Hg(e+"/fulfilled",function(c,h,p,g){return{payload:c,meta:bD(Wg({},g||{}),{arg:p,requestId:h,requestStatus:"fulfilled"})}}),o=Hg(e+"/pending",function(c,h,p){return{payload:void 0,meta:bD(Wg({},p||{}),{arg:h,requestId:c,requestStatus:"pending"})}}),a=Hg(e+"/rejected",function(c,h,p,g,v){return{payload:g,error:(r&&r.serializeError||Fve)(c||"Rejected"),meta:bD(Wg({},v||{}),{arg:p,requestId:h,rejectedWithValue:!!g,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"})}}),s=typeof AbortController<"u"?AbortController:function(){function c(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return c.prototype.abort=function(){},c}();function l(c){return function(h,p,g){var v=r!=null&&r.idGenerator?r.idGenerator(c):Nve(),x=new s,b;function M(T){b=T,x.abort()}var w=function(){return wve(this,null,function(){var T,C,I,R,O,B,U;return gve(this,function(Z){switch(Z.label){case 0:return Z.trys.push([0,4,,5]),R=(T=r==null?void 0:r.condition)==null?void 0:T.call(r,c,{getState:p,extra:g}),$ve(R)?[4,R]:[3,2];case 1:R=Z.sent(),Z.label=2;case 2:if(R===!1||x.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return O=new Promise(function(j,X){return x.signal.addEventListener("abort",function(){return X({name:"AbortError",message:b||"Aborted"})})}),h(o(v,c,(C=r==null?void 0:r.getPendingMeta)==null?void 0:C.call(r,{requestId:v,arg:c},{getState:p,extra:g}))),[4,Promise.race([O,Promise.resolve(n(c,{dispatch:h,getState:p,extra:g,requestId:v,signal:x.signal,abort:M,rejectWithValue:function(j,X){return new wD(j,X)},fulfillWithValue:function(j,X){return new TH(j,X)}})).then(function(j){if(j instanceof wD)throw j;return j instanceof TH?i(j.payload,v,c,j.meta):i(j,v,c)})])];case 3:return I=Z.sent(),[3,5];case 4:return B=Z.sent(),I=B instanceof wD?a(null,v,c,B.payload,B.meta):a(B,v,c),[3,5];case 5:return U=r&&!r.dispatchConditionRejection&&a.match(I)&&I.meta.condition,U||h(I),[2,I]}})})}();return Object.assign(w,{abort:M,requestId:v,arg:c,unwrap:function(){return w.then(Bve)}})}}return Object.assign(l,{pending:o,rejected:a,fulfilled:i,typePrefix:e})}return t.withTypes=function(){return t},t})();function Bve(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function $ve(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var h$="listenerMiddleware";Hg(h$+"/add");Hg(h$+"/removeAll");Hg(h$+"/remove");var CH;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);sve();const{reducer:jve,actions:yte}=s1({name:"errors",initialState:{errors:[]},reducers:{push(t,e){t.errors.push(e.payload)},pop(t){t.errors.length&&t.errors.shift()}}}),{reducer:Uve,actions:tu}=s1({name:"devices",initialState:{items:{},selectedId:null,selectedIds:[]},reducers:{refresh(t,e){t.items={},e.payload.forEach(n=>t.items[n.id]=n)},update1(t,e){t.items[e.payload.id]=e.payload},update(t,e){e.payload.forEach(n=>t.items[n.id]=n)},select(t,e){t.selectedId=e.payload},selectId(t,e){t.selectedId=e.payload,t.selectedIds=[t.selectedId]},selectIds(t,e){t.selectedIds=e.payload,[t.selectedId]=t.selectedIds},remove(t,e){delete t.items[e.payload]},clear(t,e){t.items={}}}}),{reducer:Vve,actions:SD}=s1({name:"data",initialState:{server:null,user:null,socket:null,camera:{},positions:{},history:{}},reducers:{updateServer(t,e){t.server=e.payload},updateUser(t,e){t.user=e.payload},updateSocket(t,e){t.socket=e.payload},updatePositions(t,e){Object.keys(e.payload).length>0&&e.payload.forEach(n=>{t.positions[n.deviceId]=n,t.history={}})},updatePosition(t,e){t.positions[e.payload.deviceId]===void 0&&(t.positions[e.payload.deviceId]={attributes:{}}),e.payload.hasOwnProperty("latitude")&&(t.positions[e.payload.deviceId].id=e.payload.id,t.positions[e.payload.deviceId].deviceId=e.payload.deviceId,t.positions[e.payload.deviceId].latitude=e.payload.latitude,t.positions[e.payload.deviceId].longitude=e.payload.longitude,t.positions[e.payload.deviceId].altitude=e.payload.altitude,t.positions[e.payload.deviceId].deviceTime=e.payload.deviceTime),e.payload.hasOwnProperty("course")&&(t.positions[e.payload.deviceId].course=e.payload.course),e.payload.hasOwnProperty("speed")&&(t.positions[e.payload.deviceId].speed=e.payload.speed),e.payload.hasOwnProperty("batteryLevel")&&(t.positions[e.payload.deviceId].attributes.batteryLevel=e.payload.batteryLevel)},updateCamera(t,e){Object.keys(e.payload).length>0&&e.payload.forEach(n=>{t.camera[n.deviceId]=n})}}}),Wve=t=>{let e=[];for(let n=0;n<t.length;n++){if(e[n]={},t[n].hasOwnProperty("uav")&&(e[n].uav=t[n].uav),e[n].id=n,e[n].name=t[n].name,e[n].wp=[],e[n].attributes={},Array.isArray(t[n].wp))for(let r=0;r<t[n].wp.length;r++)e[n].wp[r]={},e[n].wp[r].pos=t[n].wp[r].pos,e[n].wp[r].yaw=t[n].wp[r].yaw,e[n].wp[r].gimbal=t[n].wp[r].gimbal,t[n].wp[r].hasOwnProperty("speed")&&(e[n].wp[r].speed=t[n].wp[r].speed),t[n].wp[r].hasOwnProperty("action")&&(e[n].wp[r].action=t[n].wp[r].action);t[n].hasOwnProperty("attributes")?(t[n].attributes.hasOwnProperty("mode_landing")&&(console.log("have modelanding"+n),e[n].attributes.mode_landing=t[n].attributes.mode_landing),t[n].attributes.hasOwnProperty("mode_yaw")&&(e[n].attributes.mode_yaw=t[n].attributes.mode_yaw),t[n].attributes.hasOwnProperty("mode_gimbal")&&(e[n].attributes.mode_gimbal=t[n].attributes.mode_gimbal),t[n].attributes.hasOwnProperty("mode_trace")&&(e[n].attributes.mode_trace=t[n].attributes.mode_trace),t[n].attributes.hasOwnProperty("idle_vel")&&(e[n].attributes.idle_vel=t[n].attributes.idle_vel),t[n].attributes.hasOwnProperty("max_vel")&&(e[n].attributes.max_vel=t[n].attributes.max_vel)):(t[n].hasOwnProperty("mode_landing")&&(e[n].attributes.mode_landing=t[n].mode_landing),t[n].hasOwnProperty("mode_yaw")&&(e[n].attributes.mode_yaw=t[n].mode_yaw),t[n].hasOwnProperty("mode_gimbal")&&(e[n].attributes.mode_gimbal=t[n].mode_gimbal),t[n].hasOwnProperty("mode_trace")&&(e[n].attributes.mode_trace=t[n].mode_trace),t[n].hasOwnProperty("idle_vel")&&(e[n].attributes.idle_vel=t[n].idle_vel),t[n].hasOwnProperty("max_vel")&&(e[n].attributes.max_vel=t[n].max_vel))}return e},Hve=t=>{let e=[];console.log("mission < 3");for(let n=1;n<=t.uav_n;n++)if(t.hasOwnProperty("uav_"+n)){let r=n-1;console.log("uav - "+r),e[r]={},e[r].id=r,e[r].uav="uav_"+n,e[r].name="uav_"+n,e[r].wp=[],e[r].attributes={};for(let i=0;i<t["uav_"+n].wp_n;i++)e[r].wp[i]={},t["uav_"+n]["wp_"+i].length==3?(e[r].wp[i].yaw=0,e[r].wp[i].pos=t["uav_"+n]["wp_"+i]):(e[r].wp[i].yaw=t["uav_"+n]["wp_"+i][3],e[r].wp[i].pos=t["uav_"+n]["wp_"+i].slice(0,-1));t.hasOwnProperty("mode_landing")&&(e[r].attributes.mode_landing=t.mode_landing),t.hasOwnProperty("mode_yaw")&&(e[r].attributes.mode_yaw=t.mode_yaw),t.hasOwnProperty("idle_vel")&&(e[r].attributes.idle_vel=t.idle_vel),t["uav_"+n].hasOwnProperty("attributes")?(t["uav_"+n].attributes.hasOwnProperty("mode_landing")&&(console.log("have modelanding"+n),e[r].attributes.mode_landing=t["uav_"+n].attributes.mode_landing),t["uav_"+n].attributes.hasOwnProperty("mode_yaw")&&(e[r].attributes.mode_yaw=t["uav_"+n].attributes.mode_yaw),t["uav_"+n].attributes.hasOwnProperty("idle_vel")&&(e[r].attributes.idle_vel=t["uav_"+n].attributes.idle_vel),t["uav_"+n].attributes.hasOwnProperty("max_vel")&&(e[n].attributes.max_vel=t["uav_"+n].attributes.max_vel)):(t["uav_"+n].hasOwnProperty("mode_landing")&&(e[r].attributes.mode_landing=t["uav_"+n].mode_landing),t["uav_"+n].hasOwnProperty("mode_yaw")&&(e[r].attributes.mode_yaw=t["uav_"+n].mode_yaw),t["uav_"+n].hasOwnProperty("idle_vel")&&(e[r].attributes.idle_vel=t["uav_"+n].idle_vel))}return console.log("-----------   legacy   --------"),console.log(e),e},{reducer:Gve,actions:uh}=s1({name:"mission",initialState:{name:"Mission no loaded",description:"",home:[0,0],route:[],attributes:{},selectpoint:{id:-1}},reducers:{updateWpPos(t,e){e.payload.route_id>=0&&(t.route[e.payload.route_id].wp[e.payload.wp_id].pos[0]=e.payload.lat,t.route[e.payload.route_id].wp[e.payload.wp_id].pos[1]=e.payload.lng)},selectpoint(t,e){console.log("selec point"),t.selectpoint=e.payload},reloadMission(t,e){t.route=e.payload},reloadName(t,e){t.name=e.payload.name,t.description=e.payload.description},updateMission(t,e){if(t.name=e.payload.name,e.payload.version=="3"){let n=0;t.home=e.payload.route[n].wp[0].pos,t.route=Wve(e.payload.route)}else{let n=1;t.home=e.payload["uav_"+n].wp_0,t.route=Hve(e.payload)}},clearMission(t,e){console.log("clear mission"),t.name="Mission no loaded",t.route=[],t.attributes={}}}}),{reducer:qve,actions:ef}=s1({name:"session",initialState:{server:null,user:{latitude:37.19384768456065,longitude:-6.7029656624597465,zoom:10,attributes:{}},socket:null,positions:{},history:{},markers:{bases:[],elements:[]},planning:{id:1234,name:"no mission",objetivo:{id:0},loc:[],meteo:[],bases:[],settings:{}}},reducers:{updateServer(t,e){t.server=e.payload},updateServerROS(t,e){t.server.rosState=e.payload},updateUser(t,e){t.user=e.payload},updateSocket(t,e){t.socket=e.payload},updatePositions(t,e){const n=t.user.attributes.mapLiveRoutes||t.server.attributes.mapLiveRoutes||"none",r=t.user.attributes["web.liveRouteLength"]||t.user.attributes["web.liveRouteLength"]||10;e.payload.forEach(i=>{if(t.positions[i.deviceId]=i,n!=="none"){const o=t.history[i.deviceId]||[],a=o.at(-1);(!a||a[0]!==i.longitude&&a[1]!==i.latitude)&&(t.history[i.deviceId]=[...o.slice(1-r),[i.longitude,i.latitude]])}else t.history={}})},updateMarker(t,e){t.markers=e.payload},addMarkerElement(t,e){t.markers.elements.push(...e.payload)},addMarkerBase(t,e){t.markers.bases.push(...e.payload)},updatePlanning(t,e){t.planning=e.payload}}}),{reducer:Yve,actions:Xve}=s1({name:"events",initialState:{items:[]},reducers:{add(t,e){t.items.unshift(...e.payload),t.items.splice(50)},delete(t,e){t.items=t.items.filter(n=>n.id!==e.payload.id)},deleteAll(t){t.items=[]}}}),AH=3,Kve=1500,Zve=()=>t=>{const e=[];let n=!1,r=0;return setInterval(()=>{n?(e.length<AH&&(n=!1),py.unstable_batchedUpdates(()=>e.splice(0,e.length).forEach(i=>t(i)))):(r>AH&&(n=!0),r=0)},Kve),i=>i.type==="devices/update"||i.type==="positions/update"?n?(e.push(i),null):(r+=1,t(i)):t(i)},Jve=fte({errors:jve,devices:Uve,data:Vve,events:Yve,mission:Gve,session:qve}),Qve=Ive({reducer:Jve,middleware:t=>t().concat(Zve)}),e0e={black:"#000",white:"#fff"},A0=e0e,t0e={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},xp=t0e,n0e={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},yx=n0e,r0e={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},vte=r0e,i0e={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},vx=i0e,o0e={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},xx=o0e,s0e={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},tf=s0e,a0e={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",A100:"#ffe57f",A200:"#ffd740",A400:"#ffc400",A700:"#ffab00"},p$=a0e,l0e={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Sw=l0e,c0e={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},yh=c0e,Mw={white:A0.white,background:yh[50],primary:vte[900],secondary:tf[800],positive:tf[500],medium:p$[700],negative:xp[500],neutral:yh[500],geometry:"#3bb2d0"},u0e={0:"#F34C28",1:"#F39A28",2:"#1EC910",3:"#1012C9",4:"#C310C9",5:"#1FDBF1",6:"#F6FD04",7:"#808080"},iy={background:{default:Mw.background},primary:{main:Mw.primary},secondary:{main:Mw.secondary,contrastText:Mw.white},colors:Mw,colors_devices:u0e};var m$={exports:{}};m$.exports=xte;m$.exports.parse=xte;m$.exports.stringify=_te;var PH=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,kH=new RegExp("^"+PH.source+"(\\s"+PH.source+"){1,}");function xte(t){var e=t.split(";"),n=e.pop(),r=(e.shift()||"").split("=").pop(),i=0;function o(T){var C=n.substring(i).match(T);return C?(i+=C[0].length,C[0]):null}function a(T){return T&&r.match(/\d+/)&&(T.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+r}}),T}function s(){o(/^\s*/)}function l(){s();for(var T=0,C=[],I=[C],R=C,O;O=o(/^(\()/)||o(/^(\))/)||o(/^(,)/)||o(kH);){if(O==="(")I.push(R),R=[],I[I.length-1].push(R),T++;else if(O===")"){if(R.length===0||(R=I.pop(),!R))return null;if(T--,T===0)break}else if(O===",")R=[],I[I.length-1].push(R);else if(!O.split(/\s/g).some(isNaN))Array.prototype.push.apply(R,O.split(/\s/g).map(parseFloat));else return null;s()}return T!==0?null:C}function c(){for(var T=[],C,I;I=o(kH)||o(/^(,)/);)I===","?(T.push(C),C=[]):I.split(/\s/g).some(isNaN)||(C||(C=[]),Array.prototype.push.apply(C,I.split(/\s/g).map(parseFloat))),s();if(C)T.push(C);else return null;return T.length?T:null}function h(){if(!o(/^(point(\sz)?)/i)||(s(),!o(/^(\()/)))return null;var T=c();return!T||(s(),!o(/^(\))/))?null:{type:"Point",coordinates:T[0]}}function p(){if(!o(/^(multipoint)/i))return null;s();var T=n.substring(n.indexOf("(")+1,n.length-1).replace(/\(/g,"").replace(/\)/g,"");n="MULTIPOINT ("+T+")";var C=l();return C?(s(),{type:"MultiPoint",coordinates:C}):null}function g(){if(!o(/^(multilinestring)/i))return null;s();var T=l();return T?(s(),{type:"MultiLineString",coordinates:T}):null}function v(){if(!o(/^(linestring(\sz)?)/i)||(s(),!o(/^(\()/)))return null;var T=c();return!T||!o(/^(\))/)?null:{type:"LineString",coordinates:T}}function x(){if(!o(/^(polygon(\sz)?)/i))return null;s();var T=l();return T?{type:"Polygon",coordinates:T}:null}function b(){if(!o(/^(multipolygon)/i))return null;s();var T=l();return T?{type:"MultiPolygon",coordinates:T}:null}function M(){var T=[],C;if(!o(/^(geometrycollection)/i)||(s(),!o(/^(\()/)))return null;for(;C=w();)T.push(C),s(),o(/^(,)/),s();return o(/^(\))/)?{type:"GeometryCollection",geometries:T}:null}function w(){return h()||v()||x()||p()||g()||b()||M()}return a(w())}function _te(t){t.type==="Feature"&&(t=t.geometry);function e(a){return a.join(" ")}function n(a){return a.map(e).join(", ")}function r(a){return a.map(n).map(o).join(", ")}function i(a){return a.map(r).map(o).join(", ")}function o(a){return"("+a+")"}switch(t.type){case"Point":return"POINT ("+e(t.coordinates)+")";case"LineString":return"LINESTRING ("+n(t.coordinates)+")";case"Polygon":return"POLYGON ("+r(t.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+n(t.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+i(t.coordinates)+")";case"MultiLineString":return"MULTILINESTRING ("+r(t.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+t.geometries.map(_te).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}}const fv=t=>new Promise(e=>{const n=new Image;n.onload=()=>e(n),n.src=t}),MD=(t,e)=>{const n=document.createElement("canvas");n.width=t.width*devicePixelRatio,n.height=t.height*devicePixelRatio,n.style.width=`${t.width}px`,n.style.height=`${t.height}px`;const r=n.getContext("2d");return r.save(),r.fillStyle=e,r.globalAlpha=1,r.fillRect(0,0,n.width,n.height),r.globalCompositeOperation="destination-atop",r.globalAlpha=1,r.drawImage(t,0,0,n.width,n.height),r.restore(),n},Jm=(t,e,n,r,i)=>{const o=document.createElement("canvas");o.width=t.width*devicePixelRatio,o.height=t.height*devicePixelRatio,o.style.width=`${t.width}px`,o.style.height=`${t.height}px`;const a=o.getContext("2d");if(a.drawImage(t,0,0,o.width,o.height),e){r&&a.drawImage(MD(r,i),0,0,o.width,o.height);const s=.5,l=o.width*s,c=o.height*s;a.drawImage(MD(e,n),(o.width-l)/2,(o.height-c)/2,l,c)}else n&&a.drawImage(MD(t,n),0,0,o.width,o.height);return a.getImageData(0,0,o.width,o.height)},ff=t=>{var a;const e=new Set,{layers:n}=t.getStyle();(a=n==null?void 0:n.forEach)==null||a.call(n,s=>{var l,c,h;(h=(c=(l=s.layout)==null?void 0:l["text-font"])==null?void 0:c.forEach)==null||h.call(c,e.add,e)});const r=[...e],i=r.find(s=>s.includes("Regular"));if(i)return[i];const o=r.find(Boolean);return o?[o]:["Roboto Regular"]},d0e="data:image/svg+xml,%3csvg%20width='48px'%20height='48px'%20viewBox='0%200%2010%2010'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3cfilter%20id='shadow'%3e%3cfeDropShadow%20dx='0'%20dy='0.1'%20stdDeviation='0.3'%20flood-color='grey'/%3e%3c/filter%3e%3c/defs%3e%3ccircle%20cx='5'%20cy='50%25'%20r='4'%20style='fill:white;%20filter:url(%23shadow);'/%3e%3c/svg%3e",f0e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='56'%20height='56'%20version='1.1'%20viewBox='0%200%2011.667%2011.667'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m%205.833%200.1%20L%204.2%201.79%20A%205.83%205.83%200,0,1%207.4,1.79%20Z%20'%20fill='%23283593'%20/%3e%3c/svg%3e",h0e="data:image/svg+xml,%3csvg%20width='48px'%20height='48px'%20viewBox='0%200%2010%2010'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='5'%20cy='50%25'%20r='4'%20stroke='black'%20stroke-width='0.5'/%3e%3c/svg%3e",kT="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='24'%20height='24'%20fill='%23000000'%3e%3cpath%20d='M8,22h2l4.997-8H20c1.105,0,2-0.895,2-2s-0.895-2-2-2h-5.003L10,2H8l2.493,8H4.996L3.5,8H2l1,4l-1,4h1.5l1.496-2h5.497%20L8,22z'%20fill='%23000000'/%3e%3c/svg%3e",p0e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='24'%20height='24'%20fill='%23000000'%3e%3cpath%20d='M%202%203%20L%202%205%20L%209%205%20L%209%203%20L%202%203%20z%20M%2011%203%20L%2011%206.2050781%20C%208.584%206.6840781%207.012375%207.956%206.359375%209%20L%204%209%20L%204%207%20L%202%207%20L%202%2013%20L%204%2013%20L%204%2011%20L%206%2011%20L%206%2013.300781%20C%206%2015.370781%207.8795313%2017%2010.269531%2017%20L%2013.810547%2017%20C%2016.170547%2017%2021.570703%2017%2021.970703%2013%20L%2017%2013%20C%2014.79%2013%2013%2011.21%2013%209%20L%2013%203%20L%2011%203%20z%20M%2015%203%20L%2015%205%20L%2022%205%20L%2022%203%20L%2015%203%20z%20M%2015%206.1699219%20L%2015%209%20C%2015%2010.1%2015.9%2011%2017%2011%20L%2021.740234%2011%20C%2020.940234%208.64%2018.28%206.7299219%2015%206.1699219%20z%20M%2021%2018%20C%2021%2018.552%2020.552%2019%2020%2019%20L%206%2019%20L%206%2021%20L%2020%2021%20C%2021.654%2021%2023%2019.654%2023%2018%20L%2021%2018%20z'%20fill='%23000000'/%3e%3c/svg%3e",m0e="/assets/drone1-vQs42P1F.svg",Rv="/assets/drone2-x2UfxKES.svg",g0e="/assets/drone3-EPwZhuDh.svg",y0e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='47'%20height='37'%20viewBox='0%200%2047%2037'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M23.5%200L46.4497%2036.75H0.550327L23.5%200Z'%20fill='%2300FF0A'/%3e%3c/svg%3e",v0e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='10.550469mm'%20height='11.099902mm'%20viewBox='0%200%2010.550469%2011.099902'%20version='1.1'%20id='svg5'%20sodipodi:docname='PowerTower.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3csodipodi:namedview%20id='namedview29'%20pagecolor='%23ffffff'%20bordercolor='%23000000'%20borderopacity='0.25'%20inkscape:showpageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20inkscape:document-units='mm'%20showgrid='false'%20/%3e%3cdefs%20id='defs2'%20/%3e%3cg%20id='layer1'%20transform='matrix(1.2914054,0,0,1.2914054,-44.349104,-250.92541)'%20inkscape:export-filename='../8bf6bfef/g329812.svg'%20inkscape:export-xdpi='96'%20inkscape:export-ydpi='96'%3e%3cg%20id='g1611'%20transform='matrix(0.1732213,0,0,0.1732213,28.393016,160.64652)'%3e%3cpath%20style='fill:%23000000;stroke:%23999999;stroke-width:0.264583'%20d='m%2044.755491,243.21009%20c%200.0638,-0.70167%200.12758,-1.40335%200.19137,-2.10502'%20id='path245-8-0'%20/%3e%3cpath%20style='fill:%23000000;stroke-width:0.264583'%20d='m%2042.705671,243.89909%2015.24211,-49.59496%2014.9889,49.61983%20-14.94047,-4.79905%20z'%20id='path366-6-1'%20/%3e%3cpath%20style='fill:none;stroke:%23999999;stroke-width:1.5;stroke-dasharray:none;stroke-dashoffset:0'%20d='m%2065.090551,218.22825%20-14.21776,4.65545%2015.77463,5.18213%20-21.10264,6.73158'%20id='path1500-5-8'%20/%3e%3cpath%20style='fill:none;stroke:%23999999;stroke-width:1.5;stroke-dasharray:none;stroke-dashoffset:0'%20d='m%2050.587581,218.15902%2014.21776,4.65545%20-15.77463,5.18213%2021.10264,6.73158'%20id='path1500-5-6-0'%20/%3e%3cpath%20style='fill:%23000000;stroke:%23b3b3b3;stroke-width:2;stroke-dasharray:none;stroke-dashoffset:0'%20d='m%2037.095893,210.4801%2041.910248,0.11388'%20id='path368-6-4'%20/%3e%3ccircle%20style='fill:%2387decd;stroke:%23000000;stroke-width:0.495712;stroke-dasharray:none;stroke-dashoffset:0'%20id='path3174'%20cx='36.455219'%20cy='210.51549'%20r='1.8656268'%20/%3e%3ccircle%20style='fill:%235fd3bc;stroke:%23000000;stroke-width:0.495712;stroke-dasharray:none;stroke-dashoffset:0'%20id='path3174-8'%20cx='79.391953'%20cy='210.65347'%20r='1.8656268'%20/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",x0e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='40'%20height='40'%20viewBox='0%200%2040%2040'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='4'%20y='4'%20width='32'%20height='32'%20fill='%235144E6'%20stroke='%23FF0A0A'%20stroke-width='8'/%3e%3c/svg%3e",mc="/assets/drone-svgrepo-R6kWQAqP.svg",IH={0:"#F34C28",1:"#F39A28",2:"#1EC910",3:"#1012C9",4:"#C310C9",5:"#1FDBF1",6:"#F6FD04",7:"#808080"},SM={helicopter:p0e,plane:kT,drone:m0e,dji_M210_noetic:Rv,dji_M210_melodic:Rv,dji_M210_noetic_rtk:Rv,dji_M210_melodic_rtk:Rv,dji_M300:Rv,dji_M300_rtk:Rv,dji_M600:mc,px4:kT,catec:g0e,fuvex:kT,default:kT},_0e={helicopter:mc,plane:mc,drone:mc,dji_M210_noetic:mc,dji_M210_melodic:mc,dji_M210_noetic_rtk:mc,dji_M210_melodic_rtk:mc,dji_M300:mc,dji_M300_rtk:Rv,dji_M600:mc,px4:mc,catec:mc,fuvex:mc,default:mc},AP=t=>SM.hasOwnProperty(t)?t:"default",mp={},b0e=async()=>{const t=await fv(d0e),e=await fv(h0e);mp.background=await Jm(t),mp.item=await Jm(await fv(y0e)),mp.powerTower=await Jm(await fv(v0e)),mp.base=await Jm(await fv(x0e)),mp.direction=await Jm(await fv(f0e)),Object.keys(iy.colors_devices).forEach(async n=>{mp[`background-${n}`]=await Jm(t,null,IH[n]),mp[`mission-${n}`]=await Jm(e,null,IH[n])}),await Promise.all(Object.keys(SM).map(async n=>{const r=[];["primary","positive","negative","neutral"].forEach(i=>{r.push(fv(SM[n]).then(o=>{mp[`${n}-${i}`]=Jm(t,o,iy.colors[i])}))}),await Promise.all(r)}))};function P0(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}const w0e=Object.freeze(Object.defineProperty({__proto__:null,default:P0},Symbol.toStringTag,{value:"Module"})),k0="$$material";function bte(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var S0e=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,M0e=bte(function(t){return S0e.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91});function E0e(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function T0e(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var C0e=function(){function t(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(T0e(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=E0e(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},t}(),ll="-ms-",PP="-moz-",Ii="-webkit-",wte="comm",g$="rule",y$="decl",A0e="@import",Ste="@keyframes",P0e="@layer",k0e=Math.abs,qI=String.fromCharCode,I0e=Object.assign;function R0e(t,e){return La(t,0)^45?(((e<<2^La(t,0))<<2^La(t,1))<<2^La(t,2))<<2^La(t,3):0}function Mte(t){return t.trim()}function O0e(t,e){return(t=e.exec(t))?t[0]:t}function Ri(t,e,n){return t.replace(e,n)}function oF(t,e){return t.indexOf(e)}function La(t,e){return t.charCodeAt(e)|0}function MM(t,e,n){return t.slice(e,n)}function oh(t){return t.length}function v$(t){return t.length}function IT(t,e){return e.push(t),t}function L0e(t,e){return t.map(e).join("")}var YI=1,pb=1,Ete=0,Cc=0,ks=0,a1="";function XI(t,e,n,r,i,o,a){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:YI,column:pb,length:a,return:""}}function Ew(t,e){return I0e(XI("",null,null,"",null,null,0),t,{length:-t.length},e)}function D0e(){return ks}function N0e(){return ks=Cc>0?La(a1,--Cc):0,pb--,ks===10&&(pb=1,YI--),ks}function uu(){return ks=Cc<Ete?La(a1,Cc++):0,pb++,ks===10&&(pb=1,YI++),ks}function vh(){return La(a1,Cc)}function wA(){return Cc}function K2(t,e){return MM(a1,t,e)}function EM(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Tte(t){return YI=pb=1,Ete=oh(a1=t),Cc=0,[]}function Cte(t){return a1="",t}function SA(t){return Mte(K2(Cc-1,sF(t===91?t+2:t===40?t+1:t)))}function z0e(t){for(;(ks=vh())&&ks<33;)uu();return EM(t)>2||EM(ks)>3?"":" "}function F0e(t,e){for(;--e&&uu()&&!(ks<48||ks>102||ks>57&&ks<65||ks>70&&ks<97););return K2(t,wA()+(e<6&&vh()==32&&uu()==32))}function sF(t){for(;uu();)switch(ks){case t:return Cc;case 34:case 39:t!==34&&t!==39&&sF(ks);break;case 40:t===41&&sF(t);break;case 92:uu();break}return Cc}function B0e(t,e){for(;uu()&&t+ks!==57;)if(t+ks===84&&vh()===47)break;return"/*"+K2(e,Cc-1)+"*"+qI(t===47?t:uu())}function $0e(t){for(;!EM(vh());)uu();return K2(t,Cc)}function j0e(t){return Cte(MA("",null,null,null,[""],t=Tte(t),0,[0],t))}function MA(t,e,n,r,i,o,a,s,l){for(var c=0,h=0,p=a,g=0,v=0,x=0,b=1,M=1,w=1,T=0,C="",I=i,R=o,O=r,B=C;M;)switch(x=T,T=uu()){case 40:if(x!=108&&La(B,p-1)==58){oF(B+=Ri(SA(T),"&","&\f"),"&\f")!=-1&&(w=-1);break}case 34:case 39:case 91:B+=SA(T);break;case 9:case 10:case 13:case 32:B+=z0e(x);break;case 92:B+=F0e(wA()-1,7);continue;case 47:switch(vh()){case 42:case 47:IT(U0e(B0e(uu(),wA()),e,n),l);break;default:B+="/"}break;case 123*b:s[c++]=oh(B)*w;case 125*b:case 59:case 0:switch(T){case 0:case 125:M=0;case 59+h:w==-1&&(B=Ri(B,/\f/g,"")),v>0&&oh(B)-p&&IT(v>32?OH(B+";",r,n,p-1):OH(Ri(B," ","")+";",r,n,p-2),l);break;case 59:B+=";";default:if(IT(O=RH(B,e,n,c,h,i,s,C,I=[],R=[],p),o),T===123)if(h===0)MA(B,e,O,O,I,o,p,s,R);else switch(g===99&&La(B,3)===110?100:g){case 100:case 108:case 109:case 115:MA(t,O,O,r&&IT(RH(t,O,O,0,0,i,s,C,i,I=[],p),R),i,R,p,s,r?I:R);break;default:MA(B,O,O,O,[""],R,0,s,R)}}c=h=v=0,b=w=1,C=B="",p=a;break;case 58:p=1+oh(B),v=x;default:if(b<1){if(T==123)--b;else if(T==125&&b++==0&&N0e()==125)continue}switch(B+=qI(T),T*b){case 38:w=h>0?1:(B+="\f",-1);break;case 44:s[c++]=(oh(B)-1)*w,w=1;break;case 64:vh()===45&&(B+=SA(uu())),g=vh(),h=p=oh(C=B+=$0e(wA())),T++;break;case 45:x===45&&oh(B)==2&&(b=0)}}return o}function RH(t,e,n,r,i,o,a,s,l,c,h){for(var p=i-1,g=i===0?o:[""],v=v$(g),x=0,b=0,M=0;x<r;++x)for(var w=0,T=MM(t,p+1,p=k0e(b=a[x])),C=t;w<v;++w)(C=Mte(b>0?g[w]+" "+T:Ri(T,/&\f/g,g[w])))&&(l[M++]=C);return XI(t,e,n,i===0?g$:s,l,c,h)}function U0e(t,e,n){return XI(t,e,n,wte,qI(D0e()),MM(t,2,-2),0)}function OH(t,e,n,r){return XI(t,e,n,y$,MM(t,0,r),MM(t,r+1,-1),r)}function q_(t,e){for(var n="",r=v$(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function V0e(t,e,n,r){switch(t.type){case P0e:if(t.children.length)break;case A0e:case y$:return t.return=t.return||t.value;case wte:return"";case Ste:return t.return=t.value+"{"+q_(t.children,r)+"}";case g$:t.value=t.props.join(",")}return oh(n=q_(t.children,r))?t.return=t.value+"{"+n+"}":""}function W0e(t){var e=v$(t);return function(n,r,i,o){for(var a="",s=0;s<e;s++)a+=t[s](n,r,i,o)||"";return a}}function H0e(t){return function(e){e.root||(e=e.return)&&t(e)}}var G0e=function(e,n,r){for(var i=0,o=0;i=o,o=vh(),i===38&&o===12&&(n[r]=1),!EM(o);)uu();return K2(e,Cc)},q0e=function(e,n){var r=-1,i=44;do switch(EM(i)){case 0:i===38&&vh()===12&&(n[r]=1),e[r]+=G0e(Cc-1,n,r);break;case 2:e[r]+=SA(i);break;case 4:if(i===44){e[++r]=vh()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=qI(i)}while(i=uu());return e},Y0e=function(e,n){return Cte(q0e(Tte(e),n))},LH=new WeakMap,X0e=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!LH.get(r))&&!i){LH.set(e,!0);for(var o=[],a=Y0e(n,o),s=r.props,l=0,c=0;l<a.length;l++)for(var h=0;h<s.length;h++,c++)e.props[c]=o[l]?a[l].replace(/&\f/g,s[h]):s[h]+" "+a[l]}}},K0e=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function Ate(t,e){switch(R0e(t,e)){case 5103:return Ii+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ii+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Ii+t+PP+t+ll+t+t;case 6828:case 4268:return Ii+t+ll+t+t;case 6165:return Ii+t+ll+"flex-"+t+t;case 5187:return Ii+t+Ri(t,/(\w+).+(:[^]+)/,Ii+"box-$1$2"+ll+"flex-$1$2")+t;case 5443:return Ii+t+ll+"flex-item-"+Ri(t,/flex-|-self/,"")+t;case 4675:return Ii+t+ll+"flex-line-pack"+Ri(t,/align-content|flex-|-self/,"")+t;case 5548:return Ii+t+ll+Ri(t,"shrink","negative")+t;case 5292:return Ii+t+ll+Ri(t,"basis","preferred-size")+t;case 6060:return Ii+"box-"+Ri(t,"-grow","")+Ii+t+ll+Ri(t,"grow","positive")+t;case 4554:return Ii+Ri(t,/([^-])(transform)/g,"$1"+Ii+"$2")+t;case 6187:return Ri(Ri(Ri(t,/(zoom-|grab)/,Ii+"$1"),/(image-set)/,Ii+"$1"),t,"")+t;case 5495:case 3959:return Ri(t,/(image-set\([^]*)/,Ii+"$1$`$1");case 4968:return Ri(Ri(t,/(.+:)(flex-)?(.*)/,Ii+"box-pack:$3"+ll+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ii+t+t;case 4095:case 3583:case 4068:case 2532:return Ri(t,/(.+)-inline(.+)/,Ii+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(oh(t)-1-e>6)switch(La(t,e+1)){case 109:if(La(t,e+4)!==45)break;case 102:return Ri(t,/(.+:)(.+)-([^]+)/,"$1"+Ii+"$2-$3$1"+PP+(La(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~oF(t,"stretch")?Ate(Ri(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(La(t,e+1)!==115)break;case 6444:switch(La(t,oh(t)-3-(~oF(t,"!important")&&10))){case 107:return Ri(t,":",":"+Ii)+t;case 101:return Ri(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ii+(La(t,14)===45?"inline-":"")+"box$3$1"+Ii+"$2$3$1"+ll+"$2box$3")+t}break;case 5936:switch(La(t,e+11)){case 114:return Ii+t+ll+Ri(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Ii+t+ll+Ri(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Ii+t+ll+Ri(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Ii+t+ll+t+t}return t}var Z0e=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case y$:e.return=Ate(e.value,e.length);break;case Ste:return q_([Ew(e,{value:Ri(e.value,"@","@"+Ii)})],i);case g$:if(e.length)return L0e(e.props,function(o){switch(O0e(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return q_([Ew(e,{props:[Ri(o,/:(read-\w+)/,":"+PP+"$1")]})],i);case"::placeholder":return q_([Ew(e,{props:[Ri(o,/:(plac\w+)/,":"+Ii+"input-$1")]}),Ew(e,{props:[Ri(o,/:(plac\w+)/,":"+PP+"$1")]}),Ew(e,{props:[Ri(o,/:(plac\w+)/,ll+"input-$1")]})],i)}return""})}},J0e=[Z0e],Pte=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(b){var M=b.getAttribute("data-emotion");M.indexOf(" ")!==-1&&(document.head.appendChild(b),b.setAttribute("data-s",""))})}var i=e.stylisPlugins||J0e,o={},a,s=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(b){for(var M=b.getAttribute("data-emotion").split(" "),w=1;w<M.length;w++)o[M[w]]=!0;s.push(b)});var l,c=[X0e,K0e];{var h,p=[V0e,H0e(function(b){h.insert(b)})],g=W0e(c.concat(i,p)),v=function(M){return q_(j0e(M),g)};l=function(M,w,T,C){h=T,v(M?M+"{"+w.styles+"}":w.styles),C&&(x.inserted[w.name]=!0)}}var x={key:n,sheet:new C0e({key:n,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:l};return x.sheet.hydrate(s),x},Q0e=!0;function exe(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):r+=i+" "}),r}var kte=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||Q0e===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},Ite=function(e,n,r){kte(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var o=n;do e.insert(n===o?"."+i:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function txe(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var nxe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},rxe=/[A-Z]|^ms/g,ixe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Rte=function(e){return e.charCodeAt(1)===45},DH=function(e){return e!=null&&typeof e!="boolean"},ED=bte(function(t){return Rte(t)?t:t.replace(rxe,"-$&").toLowerCase()}),NH=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(ixe,function(r,i,o){return sh={name:i,styles:o,next:sh},i})}return nxe[e]!==1&&!Rte(e)&&typeof n=="number"&&n!==0?n+"px":n};function TM(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return sh={name:n.name,styles:n.styles,next:sh},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)sh={name:r.name,styles:r.styles,next:sh},r=r.next;var i=n.styles+";";return i}return oxe(t,e,n)}case"function":{if(t!==void 0){var o=sh,a=n(t);return sh=o,TM(t,e,a)}break}}if(e==null)return n;var s=e[n];return s!==void 0?s:n}function oxe(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=TM(t,e,n[i])+";";else for(var o in n){var a=n[o];if(typeof a!="object")e!=null&&e[a]!==void 0?r+=o+"{"+e[a]+"}":DH(a)&&(r+=ED(o)+":"+NH(o,a)+";");else if(Array.isArray(a)&&typeof a[0]=="string"&&(e==null||e[a[0]]===void 0))for(var s=0;s<a.length;s++)DH(a[s])&&(r+=ED(o)+":"+NH(o,a[s])+";");else{var l=TM(t,e,a);switch(o){case"animation":case"animationName":{r+=ED(o)+":"+l+";";break}default:r+=o+"{"+l+"}"}}}return r}var zH=/label:\s*([^\s;\n{]+)\s*(;|$)/g,sh,x$=function(e,n,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,o="";sh=void 0;var a=e[0];a==null||a.raw===void 0?(i=!1,o+=TM(r,n,a)):o+=a[0];for(var s=1;s<e.length;s++)o+=TM(r,n,e[s]),i&&(o+=a[s]);zH.lastIndex=0;for(var l="",c;(c=zH.exec(o))!==null;)l+="-"+c[1];var h=txe(o)+l;return{name:h,styles:o,next:sh}},sxe=function(e){return e()},Ote=KA.useInsertionEffect?KA.useInsertionEffect:!1,axe=Ote||sxe,FH=Ote||W.useLayoutEffect,Lte=W.createContext(typeof HTMLElement<"u"?Pte({key:"css"}):null),lxe=Lte.Provider,Dte=function(e){return W.forwardRef(function(n,r){var i=W.useContext(Lte);return e(n,i,r)})},Z2=W.createContext({}),TD={exports:{}},BH;function Nte(){return BH||(BH=1,function(t){function e(){return t.exports=e=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(this,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(TD)),TD.exports}Nte();var cxe=Dte(function(t,e){var n=t.styles,r=x$([n],void 0,W.useContext(Z2)),i=W.useRef();return FH(function(){var o=e.key+"-global",a=new e.sheet.constructor({key:o,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),s=!1,l=document.querySelector('style[data-emotion="'+o+" "+r.name+'"]');return e.sheet.tags.length&&(a.before=e.sheet.tags[0]),l!==null&&(s=!0,l.setAttribute("data-emotion",o),a.hydrate([l])),i.current=[a,s],function(){a.flush()}},[e]),FH(function(){var o=i.current,a=o[0],s=o[1];if(s){o[1]=!1;return}if(r.next!==void 0&&Ite(e,r.next,!0),a.tags.length){var l=a.tags[a.tags.length-1].nextElementSibling;a.before=l,a.flush()}e.insert("",r,a,!1)},[e,r.name]),null});function J2(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return x$(e)}var j0=function(){var e=J2.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},uxe=M0e,dxe=function(e){return e!=="theme"},$H=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?uxe:dxe},jH=function(e,n,r){var i;if(n){var o=n.shouldForwardProp;i=e.__emotion_forwardProp&&o?function(a){return e.__emotion_forwardProp(a)&&o(a)}:o}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},fxe=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return kte(n,r,i),axe(function(){return Ite(n,r,i)}),null},hxe=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,o,a;n!==void 0&&(o=n.label,a=n.target);var s=jH(e,n,r),l=s||$H(i),c=!l("as");return function(){var h=arguments,p=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&p.push("label:"+o+";"),h[0]==null||h[0].raw===void 0)p.push.apply(p,h);else{p.push(h[0][0]);for(var g=h.length,v=1;v<g;v++)p.push(h[v],h[0][v])}var x=Dte(function(b,M,w){var T=c&&b.as||i,C="",I=[],R=b;if(b.theme==null){R={};for(var O in b)R[O]=b[O];R.theme=W.useContext(Z2)}typeof b.className=="string"?C=exe(M.registered,I,b.className):b.className!=null&&(C=b.className+" ");var B=x$(p.concat(I),M.registered,R);C+=M.key+"-"+B.name,a!==void 0&&(C+=" "+a);var U=c&&s===void 0?$H(T):l,Z={};for(var j in b)c&&j==="as"||U(j)&&(Z[j]=b[j]);return Z.className=C,Z.ref=w,W.createElement(W.Fragment,null,W.createElement(fxe,{cache:M,serialized:B,isStringTag:typeof T=="string"}),W.createElement(T,Z))});return x.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",x.defaultProps=e.defaultProps,x.__emotion_real=x,x.__emotion_base=i,x.__emotion_styles=p,x.__emotion_forwardProp=s,Object.defineProperty(x,"toString",{value:function(){return"."+a}}),x.withComponent=function(b,M){return t(b,de({},n,M,{shouldForwardProp:jH(x,M,!0)})).apply(void 0,p)},x}},pxe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],aF=hxe.bind();pxe.forEach(function(t){aF[t]=aF(t)});var zte={exports:{}},mxe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",gxe=mxe,yxe=gxe;function Fte(){}function Bte(){}Bte.resetWarningCache=Fte;var vxe=function(){function t(r,i,o,a,s,l){if(l!==yxe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Bte,resetWarningCache:Fte};return n.PropTypes=n,n};zte.exports=vxe();var _$=zte.exports;const Fr=_i(_$);let lF;typeof document=="object"&&(lF=Pte({key:"css",prepend:!0}));function $te(t){const{injectFirst:e,children:n}=t;return e&&lF?F.jsx(lxe,{value:lF,children:n}):n}function xxe(t){return t==null||Object.keys(t).length===0}function jte(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(xxe(i)?n:i):e;return F.jsx(cxe,{styles:r})}function b$(t,e){return aF(t,e)}const Ute=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))},_xe=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:jte,StyledEngineProvider:$te,ThemeContext:Z2,css:J2,default:b$,internal_processStyles:Ute,keyframes:j0},Symbol.toStringTag,{value:"Module"}));function _p(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function Vte(t){if(!_p(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=Vte(t[n])}),e}function Fa(t,e,n={clone:!0}){const r=n.clone?de({},t):t;return _p(t)&&_p(e)&&Object.keys(e).forEach(i=>{i!=="__proto__"&&(_p(e[i])&&i in t&&_p(t[i])?r[i]=Fa(t[i],e[i],n):n.clone?r[i]=_p(e[i])?Vte(e[i]):e[i]:r[i]=e[i])}),r}const bxe=Object.freeze(Object.defineProperty({__proto__:null,default:Fa,isPlainObject:_p},Symbol.toStringTag,{value:"Module"})),wxe=["values","unit","step"],Sxe=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>de({},n,{[r.key]:r.val}),{})};function Wte(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=t,i=on(t,wxe),o=Sxe(e),a=Object.keys(o);function s(g){return`@media (min-width:${typeof e[g]=="number"?e[g]:g}${n})`}function l(g){return`@media (max-width:${(typeof e[g]=="number"?e[g]:g)-r/100}${n})`}function c(g,v){const x=a.indexOf(v);return`@media (min-width:${typeof e[g]=="number"?e[g]:g}${n}) and (max-width:${(x!==-1&&typeof e[a[x]]=="number"?e[a[x]]:v)-r/100}${n})`}function h(g){return a.indexOf(g)+1<a.length?c(g,a[a.indexOf(g)+1]):s(g)}function p(g){const v=a.indexOf(g);return v===0?s(a[1]):v===a.length-1?l(a[v]):c(g,a[a.indexOf(g)+1]).replace("@media","@media not all and")}return de({keys:a,values:o,up:s,down:l,between:c,only:h,not:p,unit:n},i)}const Mxe={borderRadius:4},Exe=Mxe;function OS(t,e){return e?Fa(t,e,{clone:!1}):t}const w$={xs:0,sm:600,md:900,lg:1200,xl:1536},UH={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${w$[t]}px)`};function Ac(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const o=r.breakpoints||UH;return e.reduce((a,s,l)=>(a[o.up(o.keys[l])]=n(e[l]),a),{})}if(typeof e=="object"){const o=r.breakpoints||UH;return Object.keys(e).reduce((a,s)=>{if(Object.keys(o.values||w$).indexOf(s)!==-1){const l=o.up(s);a[l]=n(e[s],s)}else{const l=s;a[l]=e[l]}return a},{})}return n(e)}function Hte(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((r,i)=>{const o=t.up(i);return r[o]={},r},{}))||{}}function Gte(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function Txe(t,...e){const n=Hte(t),r=[n,...e].reduce((i,o)=>Fa(i,o),{});return Gte(Object.keys(n),r)}function Cxe(t,e){if(typeof t!="object")return{};const n={},r=Object.keys(e);return Array.isArray(t)?r.forEach((i,o)=>{o<t.length&&(n[i]=!0)}):r.forEach(i=>{t[i]!=null&&(n[i]=!0)}),n}function u0({values:t,breakpoints:e,base:n}){const r=n||Cxe(t,e),i=Object.keys(r);if(i.length===0)return t;let o;return i.reduce((a,s,l)=>(Array.isArray(t)?(a[s]=t[l]!=null?t[l]:t[o],o=l):typeof t=="object"?(a[s]=t[s]!=null?t[s]:t[o],o=s):a[s]=t,a),{})}function en(t){if(typeof t!="string")throw new Error(P0(7));return t.charAt(0).toUpperCase()+t.slice(1)}const Axe=Object.freeze(Object.defineProperty({__proto__:null,default:en},Symbol.toStringTag,{value:"Module"}));function mb(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function kP(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=mb(t,n)||r,e&&(i=e(i,r,t)),i}function Ms(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,o=a=>{if(a[e]==null)return null;const s=a[e],l=a.theme,c=mb(l,r)||{};return Ac(a,s,p=>{let g=kP(c,i,p);return p===g&&typeof p=="string"&&(g=kP(c,i,`${e}${p==="default"?"":en(p)}`,p)),n===!1?g:{[n]:g}})};return o.propTypes={},o.filterProps=[e],o}function Pxe(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const kxe={m:"margin",p:"padding"},Ixe={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},VH={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Rxe=Pxe(t=>{if(t.length>2)if(VH[t])t=VH[t];else return[t];const[e,n]=t.split(""),r=kxe[e],i=Ixe[n]||"";return Array.isArray(i)?i.map(o=>r+o):[r+i]}),S$=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],M$=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...S$,...M$];function Q2(t,e,n,r){var i;const o=(i=mb(t,e,!1))!=null?i:n;return typeof o=="number"?a=>typeof a=="string"?a:o*a:Array.isArray(o)?a=>typeof a=="string"?a:o[a]:typeof o=="function"?o:()=>{}}function E$(t){return Q2(t,"spacing",8)}function I0(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),r=t(n);return e>=0?r:typeof r=="number"?-r:`-${r}`}function Oxe(t,e){return n=>t.reduce((r,i)=>(r[i]=I0(e,n),r),{})}function Lxe(t,e,n,r){if(e.indexOf(n)===-1)return null;const i=Rxe(n),o=Oxe(i,r),a=t[n];return Ac(t,a,o)}function qte(t,e){const n=E$(t.theme);return Object.keys(t).map(r=>Lxe(t,e,r,n)).reduce(OS,{})}function es(t){return qte(t,S$)}es.propTypes={};es.filterProps=S$;function ts(t){return qte(t,M$)}ts.propTypes={};ts.filterProps=M$;function Dxe(t=8){if(t.mui)return t;const e=E$({spacing:t}),n=(...r)=>(r.length===0?[1]:r).map(o=>{const a=e(o);return typeof a=="number"?`${a}px`:a}).join(" ");return n.mui=!0,n}function KI(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(o=>{r[o]=i}),r),{}),n=r=>Object.keys(r).reduce((i,o)=>e[o]?OS(i,e[o](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function Zu(t){return typeof t!="number"?t:`${t}px solid`}function vd(t,e){return Ms({prop:t,themeKey:"borders",transform:e})}const Nxe=vd("border",Zu),zxe=vd("borderTop",Zu),Fxe=vd("borderRight",Zu),Bxe=vd("borderBottom",Zu),$xe=vd("borderLeft",Zu),jxe=vd("borderColor"),Uxe=vd("borderTopColor"),Vxe=vd("borderRightColor"),Wxe=vd("borderBottomColor"),Hxe=vd("borderLeftColor"),Gxe=vd("outline",Zu),qxe=vd("outlineColor"),ZI=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=Q2(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:I0(e,r)});return Ac(t,t.borderRadius,n)}return null};ZI.propTypes={};ZI.filterProps=["borderRadius"];KI(Nxe,zxe,Fxe,Bxe,$xe,jxe,Uxe,Vxe,Wxe,Hxe,ZI,Gxe,qxe);const JI=t=>{if(t.gap!==void 0&&t.gap!==null){const e=Q2(t.theme,"spacing",8),n=r=>({gap:I0(e,r)});return Ac(t,t.gap,n)}return null};JI.propTypes={};JI.filterProps=["gap"];const QI=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=Q2(t.theme,"spacing",8),n=r=>({columnGap:I0(e,r)});return Ac(t,t.columnGap,n)}return null};QI.propTypes={};QI.filterProps=["columnGap"];const eR=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=Q2(t.theme,"spacing",8),n=r=>({rowGap:I0(e,r)});return Ac(t,t.rowGap,n)}return null};eR.propTypes={};eR.filterProps=["rowGap"];const Yxe=Ms({prop:"gridColumn"}),Xxe=Ms({prop:"gridRow"}),Kxe=Ms({prop:"gridAutoFlow"}),Zxe=Ms({prop:"gridAutoColumns"}),Jxe=Ms({prop:"gridAutoRows"}),Qxe=Ms({prop:"gridTemplateColumns"}),e_e=Ms({prop:"gridTemplateRows"}),t_e=Ms({prop:"gridTemplateAreas"}),n_e=Ms({prop:"gridArea"});KI(JI,QI,eR,Yxe,Xxe,Kxe,Zxe,Jxe,Qxe,e_e,t_e,n_e);function Y_(t,e){return e==="grey"?e:t}const r_e=Ms({prop:"color",themeKey:"palette",transform:Y_}),i_e=Ms({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Y_}),o_e=Ms({prop:"backgroundColor",themeKey:"palette",transform:Y_});KI(r_e,i_e,o_e);function nu(t){return t<=1&&t!==0?`${t*100}%`:t}const s_e=Ms({prop:"width",transform:nu}),T$=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,i;const o=((r=t.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||w$[n];return o?((i=t.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${o}${t.theme.breakpoints.unit}`}:{maxWidth:o}:{maxWidth:nu(n)}};return Ac(t,t.maxWidth,e)}return null};T$.filterProps=["maxWidth"];const a_e=Ms({prop:"minWidth",transform:nu}),l_e=Ms({prop:"height",transform:nu}),c_e=Ms({prop:"maxHeight",transform:nu}),u_e=Ms({prop:"minHeight",transform:nu});Ms({prop:"size",cssProperty:"width",transform:nu});Ms({prop:"size",cssProperty:"height",transform:nu});const d_e=Ms({prop:"boxSizing"});KI(s_e,T$,a_e,l_e,c_e,u_e,d_e);const f_e={border:{themeKey:"borders",transform:Zu},borderTop:{themeKey:"borders",transform:Zu},borderRight:{themeKey:"borders",transform:Zu},borderBottom:{themeKey:"borders",transform:Zu},borderLeft:{themeKey:"borders",transform:Zu},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Zu},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:ZI},color:{themeKey:"palette",transform:Y_},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Y_},backgroundColor:{themeKey:"palette",transform:Y_},p:{style:ts},pt:{style:ts},pr:{style:ts},pb:{style:ts},pl:{style:ts},px:{style:ts},py:{style:ts},padding:{style:ts},paddingTop:{style:ts},paddingRight:{style:ts},paddingBottom:{style:ts},paddingLeft:{style:ts},paddingX:{style:ts},paddingY:{style:ts},paddingInline:{style:ts},paddingInlineStart:{style:ts},paddingInlineEnd:{style:ts},paddingBlock:{style:ts},paddingBlockStart:{style:ts},paddingBlockEnd:{style:ts},m:{style:es},mt:{style:es},mr:{style:es},mb:{style:es},ml:{style:es},mx:{style:es},my:{style:es},margin:{style:es},marginTop:{style:es},marginRight:{style:es},marginBottom:{style:es},marginLeft:{style:es},marginX:{style:es},marginY:{style:es},marginInline:{style:es},marginInlineStart:{style:es},marginInlineEnd:{style:es},marginBlock:{style:es},marginBlockStart:{style:es},marginBlockEnd:{style:es},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:JI},rowGap:{style:eR},columnGap:{style:QI},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:nu},maxWidth:{style:T$},minWidth:{transform:nu},height:{transform:nu},maxHeight:{transform:nu},minHeight:{transform:nu},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},eE=f_e;function h_e(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function p_e(t,e){return typeof t=="function"?t(e):t}function Yte(){function t(n,r,i,o){const a={[n]:r,theme:i},s=o[n];if(!s)return{[n]:r};const{cssProperty:l=n,themeKey:c,transform:h,style:p}=s;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[n]:r};const g=mb(i,c)||{};return p?p(a):Ac(a,r,x=>{let b=kP(g,h,x);return x===b&&typeof x=="string"&&(b=kP(g,h,`${n}${x==="default"?"":en(x)}`,x)),l===!1?b:{[l]:b}})}function e(n){var r;const{sx:i,theme:o={}}=n||{};if(!i)return null;const a=(r=o.unstable_sxConfig)!=null?r:eE;function s(l){let c=l;if(typeof l=="function")c=l(o);else if(typeof l!="object")return l;if(!c)return null;const h=Hte(o.breakpoints),p=Object.keys(h);let g=h;return Object.keys(c).forEach(v=>{const x=p_e(c[v],o);if(x!=null)if(typeof x=="object")if(a[v])g=OS(g,t(v,x,o,a));else{const b=Ac({theme:o},x,M=>({[v]:M}));h_e(b,x)?g[v]=e({sx:x,theme:o}):g=OS(g,b)}else g=OS(g,t(v,x,o,a))}),Gte(p,g)}return Array.isArray(i)?i.map(s):s(i)}return e}const Xte=Yte();Xte.filterProps=["sx"];const tE=Xte;function Kte(t,e){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(t).replace(/(\[[^\]]+\])/,"*:where($1)")]:e}:n.palette.mode===t?e:{}}const m_e=["breakpoints","palette","spacing","shape"];function l1(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:o={}}=t,a=on(t,m_e),s=Wte(n),l=Dxe(i);let c=Fa({breakpoints:s,direction:"ltr",components:{},palette:de({mode:"light"},r),spacing:l,shape:de({},Exe,o)},a);return c.applyStyles=Kte,c=e.reduce((h,p)=>Fa(h,p),c),c.unstable_sxConfig=de({},eE,a==null?void 0:a.unstable_sxConfig),c.unstable_sx=function(p){return tE({sx:p,theme:this})},c}const g_e=Object.freeze(Object.defineProperty({__proto__:null,default:l1,private_createBreakpoints:Wte,unstable_applyStyles:Kte},Symbol.toStringTag,{value:"Module"}));function y_e(t){return Object.keys(t).length===0}function Zte(t=null){const e=W.useContext(Z2);return!e||y_e(e)?t:e}const v_e=l1();function tR(t=v_e){return Zte(t)}function x_e({styles:t,themeId:e,defaultTheme:n={}}){const r=tR(n),i=typeof t=="function"?t(e&&r[e]||r):t;return F.jsx(jte,{styles:i})}const __e=["sx"],b_e=t=>{var e,n;const r={systemProps:{},otherProps:{}},i=(e=t==null||(n=t.theme)==null?void 0:n.unstable_sxConfig)!=null?e:eE;return Object.keys(t).forEach(o=>{i[o]?r.systemProps[o]=t[o]:r.otherProps[o]=t[o]}),r};function nE(t){const{sx:e}=t,n=on(t,__e),{systemProps:r,otherProps:i}=b_e(n);let o;return Array.isArray(e)?o=[r,...e]:typeof e=="function"?o=(...a)=>{const s=e(...a);return _p(s)?de({},r,s):r}:o=de({},r,e),de({},i,{sx:o})}const w_e=Object.freeze(Object.defineProperty({__proto__:null,default:tE,extendSxProp:nE,unstable_createStyleFunctionSx:Yte,unstable_defaultSxConfig:eE},Symbol.toStringTag,{value:"Module"})),WH=t=>t,S_e=()=>{let t=WH;return{configure(e){t=e},generate(e){return t(e)},reset(){t=WH}}},M_e=S_e(),C$=M_e;function Jte(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Jte(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Kt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Jte(t))&&(r&&(r+=" "),r+=e);return r}const E_e=["className","component"];function T_e(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,o=b$("div",{shouldForwardProp:s=>s!=="theme"&&s!=="sx"&&s!=="as"})(tE);return W.forwardRef(function(l,c){const h=tR(n),p=nE(l),{className:g,component:v="div"}=p,x=on(p,E_e);return F.jsx(o,de({as:v,ref:c,className:Kt(g,i?i(r):r),theme:e&&h[e]||h},x))})}const Qte={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Vn(t,e,n="Mui"){const r=Qte[e];return r?`${n}-${r}`:`${C$.generate(t)}-${e}`}function Wn(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=Vn(t,i,n)}),r}const C_e=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function ene(t){const e=`${t}`.match(C_e);return e&&e[1]||""}function tne(t,e=""){return t.displayName||t.name||ene(t)||e}function HH(t,e,n){const r=tne(e);return t.displayName||(r!==""?`${n}(${r})`:n)}function A_e(t){if(t!=null){if(typeof t=="string")return t;if(typeof t=="function")return tne(t,"Component");if(typeof t=="object")switch(t.$$typeof){case Jz.ForwardRef:return HH(t,t.render,"ForwardRef");case Jz.Memo:return HH(t,t.type,"memo");default:return}}}const P_e=Object.freeze(Object.defineProperty({__proto__:null,default:A_e,getFunctionName:ene},Symbol.toStringTag,{value:"Module"})),k_e=["ownerState"],I_e=["variants"],R_e=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function O_e(t){return Object.keys(t).length===0}function L_e(t){return typeof t=="string"&&t.charCodeAt(0)>96}function CD(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const D_e=l1(),N_e=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function RT({defaultTheme:t,theme:e,themeId:n}){return O_e(e)?t:e[n]||e}function z_e(t){return t?(e,n)=>n[t]:null}function EA(t,e){let{ownerState:n}=e,r=on(e,k_e);const i=typeof t=="function"?t(de({ownerState:n},r)):t;if(Array.isArray(i))return i.flatMap(o=>EA(o,de({ownerState:n},r)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:o=[]}=i;let s=on(i,I_e);return o.forEach(l=>{let c=!0;typeof l.props=="function"?c=l.props(de({ownerState:n},r,n)):Object.keys(l.props).forEach(h=>{(n==null?void 0:n[h])!==l.props[h]&&r[h]!==l.props[h]&&(c=!1)}),c&&(Array.isArray(s)||(s=[s]),s.push(typeof l.style=="function"?l.style(de({ownerState:n},r,n)):l.style))}),s}return i}function F_e(t={}){const{themeId:e,defaultTheme:n=D_e,rootShouldForwardProp:r=CD,slotShouldForwardProp:i=CD}=t,o=a=>tE(de({},a,{theme:RT(de({},a,{defaultTheme:n,themeId:e}))}));return o.__mui_systemSx=!0,(a,s={})=>{Ute(a,R=>R.filter(O=>!(O!=null&&O.__mui_systemSx)));const{name:l,slot:c,skipVariantsResolver:h,skipSx:p,overridesResolver:g=z_e(N_e(c))}=s,v=on(s,R_e),x=h!==void 0?h:c&&c!=="Root"&&c!=="root"||!1,b=p||!1;let M,w=CD;c==="Root"||c==="root"?w=r:c?w=i:L_e(a)&&(w=void 0);const T=b$(a,de({shouldForwardProp:w,label:M},v)),C=R=>typeof R=="function"&&R.__emotion_real!==R||_p(R)?O=>EA(R,de({},O,{theme:RT({theme:O.theme,defaultTheme:n,themeId:e})})):R,I=(R,...O)=>{let B=C(R);const U=O?O.map(C):[];l&&g&&U.push(X=>{const le=RT(de({},X,{defaultTheme:n,themeId:e}));if(!le.components||!le.components[l]||!le.components[l].styleOverrides)return null;const me=le.components[l].styleOverrides,ie={};return Object.entries(me).forEach(([ce,fe])=>{ie[ce]=EA(fe,de({},X,{theme:le}))}),g(X,ie)}),l&&!x&&U.push(X=>{var le;const me=RT(de({},X,{defaultTheme:n,themeId:e})),ie=me==null||(le=me.components)==null||(le=le[l])==null?void 0:le.variants;return EA({variants:ie},de({},X,{theme:me}))}),b||U.push(o);const Z=U.length-O.length;if(Array.isArray(R)&&Z>0){const X=new Array(Z).fill("");B=[...R,...X],B.raw=[...R.raw,...X]}const j=T(B,...U);return a.muiName&&(j.muiName=a.muiName),j};return T.withConfig&&(I.withConfig=T.withConfig),I}}const B_e=F_e(),nne=B_e;function A$(t,e){const n=de({},e);return Object.keys(t).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=de({},t[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=t[r]||{},o=e[r];n[r]={},!o||!Object.keys(o)?n[r]=i:!i||!Object.keys(i)?n[r]=o:(n[r]=de({},o),Object.keys(i).forEach(a=>{n[r][a]=A$(i[a],o[a])}))}else n[r]===void 0&&(n[r]=t[r])}),n}function $_e(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:A$(e.components[n].defaultProps,r)}function P$({props:t,name:e,defaultTheme:n,themeId:r}){let i=tR(n);return r&&(i=i[r]||i),$_e({theme:i,name:e,props:t})}const j_e=typeof window<"u"?W.useLayoutEffect:W.useEffect,mu=j_e;function U_e(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}const V_e=Object.freeze(Object.defineProperty({__proto__:null,default:U_e},Symbol.toStringTag,{value:"Module"}));function cF(...t){return t.reduce((e,n)=>n==null?e:function(...i){e.apply(this,i),n.apply(this,i)},()=>{})}function rE(t,e=166){let n;function r(...i){const o=()=>{t.apply(this,i)};clearTimeout(n),n=setTimeout(o,e)}return r.clear=()=>{clearTimeout(n)},r}function W_e(t,e){return()=>null}function TA(t,e){var n,r;return W.isValidElement(t)&&e.indexOf((n=t.type.muiName)!=null?n:(r=t.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function Os(t){return t&&t.ownerDocument||document}function Th(t){return Os(t).defaultView||window}function H_e(t,e){return()=>null}function IP(t,e){typeof t=="function"?t(e):t&&(t.current=e)}let GH=0;function G_e(t){const[e,n]=W.useState(t),r=t||e;return W.useEffect(()=>{e==null&&(GH+=1,n(`mui-${GH}`))},[e]),r}const qH=KA.useId;function nR(t){if(qH!==void 0){const e=qH();return t??e}return G_e(t)}function q_e(t,e,n,r,i){return null}function gb({controlled:t,default:e,name:n,state:r="value"}){const{current:i}=W.useRef(t!==void 0),[o,a]=W.useState(e),s=i?t:o,l=W.useCallback(c=>{i||a(c)},[]);return[s,l]}function Wl(t){const e=W.useRef(t);return mu(()=>{e.current=t}),W.useRef((...n)=>(0,e.current)(...n)).current}function Lo(...t){return W.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{IP(n,e)})},t)}const YH={};function Y_e(t,e){const n=W.useRef(YH);return n.current===YH&&(n.current=t(e)),n}const X_e=[];function K_e(t){W.useEffect(t,X_e)}class iE{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new iE}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}}function Pg(){const t=Y_e(iE.create).current;return K_e(t.disposeEffect),t}let rR=!0,uF=!1;const Z_e=new iE,J_e={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Q_e(t){const{type:e,tagName:n}=t;return!!(n==="INPUT"&&J_e[e]&&!t.readOnly||n==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function ebe(t){t.metaKey||t.altKey||t.ctrlKey||(rR=!0)}function AD(){rR=!1}function tbe(){this.visibilityState==="hidden"&&uF&&(rR=!0)}function nbe(t){t.addEventListener("keydown",ebe,!0),t.addEventListener("mousedown",AD,!0),t.addEventListener("pointerdown",AD,!0),t.addEventListener("touchstart",AD,!0),t.addEventListener("visibilitychange",tbe,!0)}function rbe(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch{}return rR||Q_e(e)}function iR(){const t=W.useCallback(i=>{i!=null&&nbe(i.ownerDocument)},[]),e=W.useRef(!1);function n(){return e.current?(uF=!0,Z_e.start(100,()=>{uF=!1}),e.current=!1,!0):!1}function r(i){return rbe(i)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:r,onBlur:n,ref:t}}function rne(t){const e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}let _x;function ine(){if(_x)return _x;const t=document.createElement("div"),e=document.createElement("div");return e.style.width="10px",e.style.height="1px",t.appendChild(e),t.dir="rtl",t.style.fontSize="14px",t.style.width="4px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.overflow="scroll",document.body.appendChild(t),_x="reverse",t.scrollLeft>0?_x="default":(t.scrollLeft=1,t.scrollLeft===0&&(_x="negative")),document.body.removeChild(t),_x}function ibe(t,e){const n=t.scrollLeft;if(e!=="rtl")return n;switch(ine()){case"negative":return t.scrollWidth-t.clientWidth+n;case"reverse":return t.scrollWidth-t.clientWidth-n;default:return n}}const obe=t=>{const e=W.useRef({});return W.useEffect(()=>{e.current=t}),e.current},one=obe;function sbe(t){return W.Children.toArray(t).filter(e=>W.isValidElement(e))}function Hn(t,e,n=void 0){const r={};return Object.keys(t).forEach(i=>{r[i]=t[i].reduce((o,a)=>{if(a){const s=e(a);s!==""&&o.push(s),n&&n[a]&&o.push(n[a])}return o},[]).join(" ")}),r}const abe=W.createContext(null),sne=abe;function k$(){return W.useContext(sne)}const lbe=typeof Symbol=="function"&&Symbol.for,ane=lbe?Symbol.for("mui.nested"):"__THEME_NESTED__";function cbe(t,e){return typeof e=="function"?e(t):de({},t,e)}function ube(t){const{children:e,theme:n}=t,r=k$(),i=W.useMemo(()=>{const o=r===null?n:cbe(r,n);return o!=null&&(o[ane]=r!==null),o},[n,r]);return F.jsx(sne.Provider,{value:i,children:e})}const XH={};function KH(t,e,n,r=!1){return W.useMemo(()=>{const i=t&&e[t]||e;if(typeof n=="function"){const o=n(i),a=t?de({},e,{[t]:o}):o;return r?()=>a:a}return t?de({},e,{[t]:n}):de({},e,n)},[t,e,n,r])}function dbe(t){const{children:e,theme:n,themeId:r}=t,i=Zte(XH),o=k$()||XH,a=KH(r,i,n),s=KH(r,o,n,!0);return F.jsx(ube,{theme:s,children:F.jsx(Z2.Provider,{value:a,children:e})})}const fbe=["className","component","disableGutters","fixed","maxWidth","classes"],hbe=l1(),pbe=nne("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${en(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),mbe=t=>P$({props:t,name:"MuiContainer",defaultTheme:hbe}),gbe=(t,e)=>{const n=l=>Vn(e,l),{classes:r,fixed:i,disableGutters:o,maxWidth:a}=t,s={root:["root",a&&`maxWidth${en(String(a))}`,i&&"fixed",o&&"disableGutters"]};return Hn(s,n,r)};function ybe(t={}){const{createStyledComponent:e=pbe,useThemeProps:n=mbe,componentName:r="MuiContainer"}=t,i=e(({theme:a,ownerState:s})=>de({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!s.disableGutters&&{paddingLeft:a.spacing(2),paddingRight:a.spacing(2),[a.breakpoints.up("sm")]:{paddingLeft:a.spacing(3),paddingRight:a.spacing(3)}}),({theme:a,ownerState:s})=>s.fixed&&Object.keys(a.breakpoints.values).reduce((l,c)=>{const h=c,p=a.breakpoints.values[h];return p!==0&&(l[a.breakpoints.up(h)]={maxWidth:`${p}${a.breakpoints.unit}`}),l},{}),({theme:a,ownerState:s})=>de({},s.maxWidth==="xs"&&{[a.breakpoints.up("xs")]:{maxWidth:Math.max(a.breakpoints.values.xs,444)}},s.maxWidth&&s.maxWidth!=="xs"&&{[a.breakpoints.up(s.maxWidth)]:{maxWidth:`${a.breakpoints.values[s.maxWidth]}${a.breakpoints.unit}`}}));return W.forwardRef(function(s,l){const c=n(s),{className:h,component:p="div",disableGutters:g=!1,fixed:v=!1,maxWidth:x="lg"}=c,b=on(c,fbe),M=de({},c,{component:p,disableGutters:g,fixed:v,maxWidth:x}),w=gbe(M,r);return F.jsx(i,de({as:p,ownerState:M,className:Kt(w.root,h),ref:l},b))})}const vbe=["component","direction","spacing","divider","children","className","useFlexGap"],xbe=l1(),_be=nne("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root});function bbe(t){return P$({props:t,name:"MuiStack",defaultTheme:xbe})}function wbe(t,e){const n=W.Children.toArray(t).filter(Boolean);return n.reduce((r,i,o)=>(r.push(i),o<n.length-1&&r.push(W.cloneElement(e,{key:`separator-${o}`})),r),[])}const Sbe=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],Mbe=({ownerState:t,theme:e})=>{let n=de({display:"flex",flexDirection:"column"},Ac({theme:e},u0({values:t.direction,breakpoints:e.breakpoints.values}),r=>({flexDirection:r})));if(t.spacing){const r=E$(e),i=Object.keys(e.breakpoints.values).reduce((l,c)=>((typeof t.spacing=="object"&&t.spacing[c]!=null||typeof t.direction=="object"&&t.direction[c]!=null)&&(l[c]=!0),l),{}),o=u0({values:t.direction,base:i}),a=u0({values:t.spacing,base:i});typeof o=="object"&&Object.keys(o).forEach((l,c,h)=>{if(!o[l]){const g=c>0?o[h[c-1]]:"column";o[l]=g}}),n=Fa(n,Ac({theme:e},a,(l,c)=>t.useFlexGap?{gap:I0(r,l)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${Sbe(c?o[c]:t.direction)}`]:I0(r,l)}}))}return n=Txe(e.breakpoints,n),n};function Ebe(t={}){const{createStyledComponent:e=_be,useThemeProps:n=bbe,componentName:r="MuiStack"}=t,i=()=>Hn({root:["root"]},l=>Vn(r,l),{}),o=e(Mbe);return W.forwardRef(function(l,c){const h=n(l),p=nE(h),{component:g="div",direction:v="column",spacing:x=0,divider:b,children:M,className:w,useFlexGap:T=!1}=p,C=on(p,vbe),I={direction:v,spacing:x,useFlexGap:T},R=i();return F.jsx(o,de({as:g,ownerState:I,ref:c,className:Kt(R.root,w)},C,{children:b?wbe(M,b):M}))})}function Tbe(t,e){return de({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}var Es={},lne={exports:{}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(lne);var si=lne.exports;const Cbe=Ih(w0e),Abe=Ih(V_e);var cne=si;Object.defineProperty(Es,"__esModule",{value:!0});var Ji=Es.alpha=hne;Es.blend=$be;Es.colorChannel=void 0;var yb=Es.darken=R$;Es.decomposeColor=fd;var Pbe=Es.emphasize=Bbe,kbe=Es.getContrastRatio=Dbe;Es.getLuminance=RP;Es.hexToRgb=une;Es.hslToRgb=fne;var vb=Es.lighten=O$;Es.private_safeAlpha=Nbe;Es.private_safeColorChannel=void 0;Es.private_safeDarken=zbe;Es.private_safeEmphasize=pne;Es.private_safeLighten=Fbe;Es.recomposeColor=c1;Es.rgbToHex=Lbe;var ZH=cne(Cbe),Ibe=cne(Abe);function I$(t,e=0,n=1){return(0,Ibe.default)(t,e,n)}function une(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Rbe(t){const e=t.toString(16);return e.length===1?`0${e}`:e}function fd(t){if(t.type)return t;if(t.charAt(0)==="#")return fd(une(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error((0,ZH.default)(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error((0,ZH.default)(10,i))}else r=r.split(",");return r=r.map(o=>parseFloat(o)),{type:n,values:r,colorSpace:i}}const dne=t=>{const e=fd(t);return e.values.slice(0,3).map((n,r)=>e.type.indexOf("hsl")!==-1&&r!==0?`${n}%`:n).join(" ")};Es.colorChannel=dne;const Obe=(t,e)=>{try{return dne(t)}catch{return t}};Es.private_safeColorChannel=Obe;function c1(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.indexOf("rgb")!==-1?r=r.map((i,o)=>o<3?parseInt(i,10):i):e.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function Lbe(t){if(t.indexOf("#")===0)return t;const{values:e}=fd(t);return`#${e.map((n,r)=>Rbe(r===3?Math.round(255*n):n)).join("")}`}function fne(t){t=fd(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,o=r*Math.min(i,1-i),a=(c,h=(c+n/30)%12)=>i-o*Math.max(Math.min(h-3,9-h,1),-1);let s="rgb";const l=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return t.type==="hsla"&&(s+="a",l.push(e[3])),c1({type:s,values:l})}function RP(t){t=fd(t);let e=t.type==="hsl"||t.type==="hsla"?fd(fne(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function Dbe(t,e){const n=RP(t),r=RP(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function hne(t,e){return t=fd(t),e=I$(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,c1(t)}function Nbe(t,e,n){try{return hne(t,e)}catch{return t}}function R$(t,e){if(t=fd(t),e=I$(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return c1(t)}function zbe(t,e,n){try{return R$(t,e)}catch{return t}}function O$(t,e){if(t=fd(t),e=I$(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return c1(t)}function Fbe(t,e,n){try{return O$(t,e)}catch{return t}}function Bbe(t,e=.15){return RP(t)>.5?R$(t,e):O$(t,e)}function pne(t,e,n){try{return pne(t,e)}catch{return t}}function $be(t,e,n,r=1){const i=(l,c)=>Math.round((l**(1/r)*(1-n)+c**(1/r)*n)**r),o=fd(t),a=fd(e),s=[i(o.values[0],a.values[0]),i(o.values[1],a.values[1]),i(o.values[2],a.values[2])];return c1({type:"rgb",values:s})}const jbe=["mode","contrastThreshold","tonalOffset"],JH={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:A0.white,default:A0.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},PD={text:{primary:A0.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:A0.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function QH(t,e,n,r){const i=r.light||r,o=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=vb(t.main,i):e==="dark"&&(t.dark=yb(t.main,o)))}function Ube(t="light"){return t==="dark"?{main:vx[200],light:vx[50],dark:vx[400]}:{main:vx[700],light:vx[400],dark:vx[800]}}function Vbe(t="light"){return t==="dark"?{main:yx[200],light:yx[50],dark:yx[400]}:{main:yx[500],light:yx[300],dark:yx[700]}}function Wbe(t="light"){return t==="dark"?{main:xp[500],light:xp[300],dark:xp[700]}:{main:xp[700],light:xp[400],dark:xp[800]}}function Hbe(t="light"){return t==="dark"?{main:xx[400],light:xx[300],dark:xx[700]}:{main:xx[700],light:xx[500],dark:xx[900]}}function Gbe(t="light"){return t==="dark"?{main:tf[400],light:tf[300],dark:tf[700]}:{main:tf[800],light:tf[500],dark:tf[900]}}function qbe(t="light"){return t==="dark"?{main:Sw[400],light:Sw[300],dark:Sw[700]}:{main:"#ed6c02",light:Sw[500],dark:Sw[900]}}function Ybe(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2}=t,i=on(t,jbe),o=t.primary||Ube(e),a=t.secondary||Vbe(e),s=t.error||Wbe(e),l=t.info||Hbe(e),c=t.success||Gbe(e),h=t.warning||qbe(e);function p(b){return kbe(b,PD.text.primary)>=n?PD.text.primary:JH.text.primary}const g=({color:b,name:M,mainShade:w=500,lightShade:T=300,darkShade:C=700})=>{if(b=de({},b),!b.main&&b[w]&&(b.main=b[w]),!b.hasOwnProperty("main"))throw new Error(P0(11,M?` (${M})`:"",w));if(typeof b.main!="string")throw new Error(P0(12,M?` (${M})`:"",JSON.stringify(b.main)));return QH(b,"light",T,r),QH(b,"dark",C,r),b.contrastText||(b.contrastText=p(b.main)),b},v={dark:PD,light:JH};return Fa(de({common:de({},A0),mode:e,primary:g({color:o,name:"primary"}),secondary:g({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:g({color:s,name:"error"}),warning:g({color:h,name:"warning"}),info:g({color:l,name:"info"}),success:g({color:c,name:"success"}),grey:yh,contrastThreshold:n,getContrastText:p,augmentColor:g,tonalOffset:r},v[e]),i)}const Xbe=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function Kbe(t){return Math.round(t*1e5)/1e5}const e9={textTransform:"uppercase"},t9='"Roboto", "Helvetica", "Arial", sans-serif';function Zbe(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:r=t9,fontSize:i=14,fontWeightLight:o=300,fontWeightRegular:a=400,fontWeightMedium:s=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:h,pxToRem:p}=n,g=on(n,Xbe),v=i/14,x=p||(w=>`${w/c*v}rem`),b=(w,T,C,I,R)=>de({fontFamily:r,fontWeight:w,fontSize:x(T),lineHeight:C},r===t9?{letterSpacing:`${Kbe(I/T)}em`}:{},R,h),M={h1:b(o,96,1.167,-1.5),h2:b(o,60,1.2,-.5),h3:b(a,48,1.167,0),h4:b(a,34,1.235,.25),h5:b(a,24,1.334,0),h6:b(s,20,1.6,.15),subtitle1:b(a,16,1.75,.15),subtitle2:b(s,14,1.57,.1),body1:b(a,16,1.5,.15),body2:b(a,14,1.43,.15),button:b(s,14,1.75,.4,e9),caption:b(a,12,1.66,.4),overline:b(a,12,2.66,1,e9),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Fa(de({htmlFontSize:c,pxToRem:x,fontFamily:r,fontSize:i,fontWeightLight:o,fontWeightRegular:a,fontWeightMedium:s,fontWeightBold:l},M),g,{clone:!1})}const Jbe=.2,Qbe=.14,e1e=.12;function Ao(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${Jbe})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${Qbe})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${e1e})`].join(",")}const t1e=["none",Ao(0,2,1,-1,0,1,1,0,0,1,3,0),Ao(0,3,1,-2,0,2,2,0,0,1,5,0),Ao(0,3,3,-2,0,3,4,0,0,1,8,0),Ao(0,2,4,-1,0,4,5,0,0,1,10,0),Ao(0,3,5,-1,0,5,8,0,0,1,14,0),Ao(0,3,5,-1,0,6,10,0,0,1,18,0),Ao(0,4,5,-2,0,7,10,1,0,2,16,1),Ao(0,5,5,-3,0,8,10,1,0,3,14,2),Ao(0,5,6,-3,0,9,12,1,0,3,16,2),Ao(0,6,6,-3,0,10,14,1,0,4,18,3),Ao(0,6,7,-4,0,11,15,1,0,4,20,3),Ao(0,7,8,-4,0,12,17,2,0,5,22,4),Ao(0,7,8,-4,0,13,19,2,0,5,24,4),Ao(0,7,9,-4,0,14,21,2,0,5,26,4),Ao(0,8,9,-5,0,15,22,2,0,6,28,5),Ao(0,8,10,-5,0,16,24,2,0,6,30,5),Ao(0,8,11,-5,0,17,26,2,0,6,32,5),Ao(0,9,11,-5,0,18,28,2,0,7,34,6),Ao(0,9,12,-6,0,19,29,2,0,7,36,6),Ao(0,10,13,-6,0,20,31,3,0,8,38,7),Ao(0,10,13,-6,0,21,33,3,0,8,40,7),Ao(0,10,14,-6,0,22,35,3,0,8,42,7),Ao(0,11,14,-7,0,23,36,3,0,9,44,8),Ao(0,11,15,-7,0,24,38,3,0,9,46,8)],n1e=t1e,r1e=["duration","easing","delay"],i1e={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},mne={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function n9(t){return`${Math.round(t)}ms`}function o1e(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function s1e(t){const e=de({},i1e,t.easing),n=de({},mne,t.duration);return de({getAutoHeightDuration:o1e,create:(i=["all"],o={})=>{const{duration:a=n.standard,easing:s=e.easeInOut,delay:l=0}=o;return on(o,r1e),(Array.isArray(i)?i:[i]).map(c=>`${c} ${typeof a=="string"?a:n9(a)} ${s} ${typeof l=="string"?l:n9(l)}`).join(",")}},t,{easing:e,duration:n})}const a1e={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},l1e=a1e,c1e=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function L$(t={},...e){const{mixins:n={},palette:r={},transitions:i={},typography:o={}}=t,a=on(t,c1e);if(t.vars)throw new Error(P0(18));const s=Ybe(r),l=l1(t);let c=Fa(l,{mixins:Tbe(l.breakpoints,n),palette:s,shadows:n1e.slice(),typography:Zbe(s,o),transitions:s1e(i),zIndex:de({},l1e)});return c=Fa(c,a),c=e.reduce((h,p)=>Fa(h,p),c),c.unstable_sxConfig=de({},eE,a==null?void 0:a.unstable_sxConfig),c.unstable_sx=function(p){return tE({sx:p,theme:this})},c}const u1e=L$(),oR=u1e;function xd(){const t=tR(oR);return t[k0]||t}function Jn({props:t,name:e}){return P$({props:t,name:e,defaultTheme:oR,themeId:k0})}var oE={},kD={exports:{}},r9;function d1e(){return r9||(r9=1,function(t){function e(n,r){if(n==null)return{};var i={},o=Object.keys(n),a,s;for(s=0;s<o.length;s++)a=o[s],!(r.indexOf(a)>=0)&&(i[a]=n[a]);return i}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(kD)),kD.exports}const gne=Ih(_xe),f1e=Ih(bxe),h1e=Ih(Axe),p1e=Ih(P_e),m1e=Ih(g_e),g1e=Ih(w_e);var u1=si;Object.defineProperty(oE,"__esModule",{value:!0});var y1e=oE.default=k1e,yne=oE.shouldForwardProp=CA;oE.systemDefaultTheme=void 0;var Gu=u1(Nte()),dF=u1(d1e()),i9=M1e(gne),v1e=f1e;u1(h1e);u1(p1e);var x1e=u1(m1e),_1e=u1(g1e);const b1e=["ownerState"],w1e=["variants"],S1e=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function vne(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(vne=function(r){return r?n:e})(t)}function M1e(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=vne(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}function E1e(t){return Object.keys(t).length===0}function T1e(t){return typeof t=="string"&&t.charCodeAt(0)>96}function CA(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const C1e=oE.systemDefaultTheme=(0,x1e.default)(),A1e=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function OT({defaultTheme:t,theme:e,themeId:n}){return E1e(e)?t:e[n]||e}function P1e(t){return t?(e,n)=>n[t]:null}function AA(t,e){let{ownerState:n}=e,r=(0,dF.default)(e,b1e);const i=typeof t=="function"?t((0,Gu.default)({ownerState:n},r)):t;if(Array.isArray(i))return i.flatMap(o=>AA(o,(0,Gu.default)({ownerState:n},r)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:o=[]}=i;let s=(0,dF.default)(i,w1e);return o.forEach(l=>{let c=!0;typeof l.props=="function"?c=l.props((0,Gu.default)({ownerState:n},r,n)):Object.keys(l.props).forEach(h=>{(n==null?void 0:n[h])!==l.props[h]&&r[h]!==l.props[h]&&(c=!1)}),c&&(Array.isArray(s)||(s=[s]),s.push(typeof l.style=="function"?l.style((0,Gu.default)({ownerState:n},r,n)):l.style))}),s}return i}function k1e(t={}){const{themeId:e,defaultTheme:n=C1e,rootShouldForwardProp:r=CA,slotShouldForwardProp:i=CA}=t,o=a=>(0,_1e.default)((0,Gu.default)({},a,{theme:OT((0,Gu.default)({},a,{defaultTheme:n,themeId:e}))}));return o.__mui_systemSx=!0,(a,s={})=>{(0,i9.internal_processStyles)(a,R=>R.filter(O=>!(O!=null&&O.__mui_systemSx)));const{name:l,slot:c,skipVariantsResolver:h,skipSx:p,overridesResolver:g=P1e(A1e(c))}=s,v=(0,dF.default)(s,S1e),x=h!==void 0?h:c&&c!=="Root"&&c!=="root"||!1,b=p||!1;let M,w=CA;c==="Root"||c==="root"?w=r:c?w=i:T1e(a)&&(w=void 0);const T=(0,i9.default)(a,(0,Gu.default)({shouldForwardProp:w,label:M},v)),C=R=>typeof R=="function"&&R.__emotion_real!==R||(0,v1e.isPlainObject)(R)?O=>AA(R,(0,Gu.default)({},O,{theme:OT({theme:O.theme,defaultTheme:n,themeId:e})})):R,I=(R,...O)=>{let B=C(R);const U=O?O.map(C):[];l&&g&&U.push(X=>{const le=OT((0,Gu.default)({},X,{defaultTheme:n,themeId:e}));if(!le.components||!le.components[l]||!le.components[l].styleOverrides)return null;const me=le.components[l].styleOverrides,ie={};return Object.entries(me).forEach(([ce,fe])=>{ie[ce]=AA(fe,(0,Gu.default)({},X,{theme:le}))}),g(X,ie)}),l&&!x&&U.push(X=>{var le;const me=OT((0,Gu.default)({},X,{defaultTheme:n,themeId:e})),ie=me==null||(le=me.components)==null||(le=le[l])==null?void 0:le.variants;return AA({variants:ie},(0,Gu.default)({},X,{theme:me}))}),b||U.push(o);const Z=U.length-O.length;if(Array.isArray(R)&&Z>0){const X=new Array(Z).fill("");B=[...R,...X],B.raw=[...R.raw,...X]}const j=T(B,...U);return a.muiName&&(j.muiName=a.muiName),j};return T.withConfig&&(I.withConfig=T.withConfig),I}}const Jl=t=>yne(t)&&t!=="classes",I1e=yne,R1e=y1e({themeId:k0,defaultTheme:oR,rootShouldForwardProp:Jl}),tn=R1e,O1e=["theme"];function L1e(t){let{theme:e}=t,n=on(t,O1e);const r=e[k0];return F.jsx(dbe,de({},n,{themeId:r?k0:void 0,theme:r||e}))}const D1e=t=>{let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,(e/100).toFixed(2)},o9=D1e;function N1e(t){return Vn("MuiSvgIcon",t)}Wn("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const z1e=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],F1e=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${en(e)}`,`fontSize${en(n)}`]};return Hn(i,N1e,r)},B1e=tn("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${en(n.color)}`],e[`fontSize${en(n.fontSize)}`]]}})(({theme:t,ownerState:e})=>{var n,r,i,o,a,s,l,c,h,p,g,v,x;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:e.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=t.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(i=t.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((o=t.typography)==null||(a=o.pxToRem)==null?void 0:a.call(o,20))||"1.25rem",medium:((s=t.typography)==null||(l=s.pxToRem)==null?void 0:l.call(s,24))||"1.5rem",large:((c=t.typography)==null||(h=c.pxToRem)==null?void 0:h.call(c,35))||"2.1875rem"}[e.fontSize],color:(p=(g=(t.vars||t).palette)==null||(g=g[e.color])==null?void 0:g.main)!=null?p:{action:(v=(t.vars||t).palette)==null||(v=v.action)==null?void 0:v.active,disabled:(x=(t.vars||t).palette)==null||(x=x.action)==null?void 0:x.disabled,inherit:void 0}[e.color]}}),xne=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiSvgIcon"}),{children:i,className:o,color:a="inherit",component:s="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:h=!1,titleAccess:p,viewBox:g="0 0 24 24"}=r,v=on(r,z1e),x=W.isValidElement(i)&&i.type==="svg",b=de({},r,{color:a,component:s,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:h,viewBox:g,hasSvgAsChild:x}),M={};h||(M.viewBox=g);const w=F1e(b);return F.jsxs(B1e,de({as:s,className:Kt(w.root,o),focusable:"false",color:c,"aria-hidden":p?void 0:!0,role:p?"img":void 0,ref:n},M,v,x&&i.props,{ownerState:b,children:[x?i.props.children:i,p?F.jsx("title",{children:p}):null]}))});xne.muiName="SvgIcon";const s9=xne;function $a(t,e){function n(r,i){return F.jsx(s9,de({"data-testid":`${e}Icon`,ref:i},r,{children:t}))}return n.muiName=s9.muiName,W.memo(W.forwardRef(n))}const $1e={configure:t=>{C$.configure(t)}},j1e=Object.freeze(Object.defineProperty({__proto__:null,capitalize:en,createChainedFunction:cF,createSvgIcon:$a,debounce:rE,deprecatedPropType:W_e,isMuiElement:TA,ownerDocument:Os,ownerWindow:Th,requirePropFactory:H_e,setRef:IP,unstable_ClassNameGenerator:$1e,unstable_useEnhancedEffect:mu,unstable_useId:nR,unsupportedProp:q_e,useControlled:gb,useEventCallback:Wl,useForkRef:Lo,useIsFocusVisible:iR},Symbol.toStringTag,{value:"Module"}));function fF(t,e){return fF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},fF(t,e)}function sE(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,fF(t,e)}const a9={disabled:!1},OP=Ze.createContext(null);var U1e=function(e){return e.scrollTop},gS="unmounted",Ov="exited",Lv="entering",r_="entered",hF="exiting",im=function(t){sE(e,t);function e(r,i){var o;o=t.call(this,r,i)||this;var a=i,s=a&&!a.isMounting?r.enter:r.appear,l;return o.appearStatus=null,r.in?s?(l=Ov,o.appearStatus=Lv):l=r_:r.unmountOnExit||r.mountOnEnter?l=gS:l=Ov,o.state={status:l},o.nextCallback=null,o}e.getDerivedStateFromProps=function(i,o){var a=i.in;return a&&o.status===gS?{status:Ov}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var o=null;if(i!==this.props){var a=this.state.status;this.props.in?a!==Lv&&a!==r_&&(o=Lv):(a===Lv||a===r_)&&(o=hF)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,o,a,s;return o=a=s=i,i!=null&&typeof i!="number"&&(o=i.exit,a=i.enter,s=i.appear!==void 0?i.appear:a),{exit:o,enter:a,appear:s}},n.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null)if(this.cancelNextCallback(),o===Lv){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:PT.findDOMNode(this);a&&U1e(a)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ov&&this.setState({status:gS})},n.performEnter=function(i){var o=this,a=this.props.enter,s=this.context?this.context.isMounting:i,l=this.props.nodeRef?[s]:[PT.findDOMNode(this),s],c=l[0],h=l[1],p=this.getTimeouts(),g=s?p.appear:p.enter;if(!i&&!a||a9.disabled){this.safeSetState({status:r_},function(){o.props.onEntered(c)});return}this.props.onEnter(c,h),this.safeSetState({status:Lv},function(){o.props.onEntering(c,h),o.onTransitionEnd(g,function(){o.safeSetState({status:r_},function(){o.props.onEntered(c,h)})})})},n.performExit=function(){var i=this,o=this.props.exit,a=this.getTimeouts(),s=this.props.nodeRef?void 0:PT.findDOMNode(this);if(!o||a9.disabled){this.safeSetState({status:Ov},function(){i.props.onExited(s)});return}this.props.onExit(s),this.safeSetState({status:hF},function(){i.props.onExiting(s),i.onTransitionEnd(a.exit,function(){i.safeSetState({status:Ov},function(){i.props.onExited(s)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},n.setNextCallback=function(i){var o=this,a=!0;return this.nextCallback=function(s){a&&(a=!1,o.nextCallback=null,i(s))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(i,o){this.setNextCallback(o);var a=this.props.nodeRef?this.props.nodeRef.current:PT.findDOMNode(this),s=i==null&&!this.props.addEndListener;if(!a||s){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],c=l[0],h=l[1];this.props.addEndListener(c,h)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===gS)return null;var o=this.props,a=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var s=on(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ze.createElement(OP.Provider,{value:null},typeof a=="function"?a(i,s):Ze.cloneElement(Ze.Children.only(a),s))},e}(Ze.Component);im.contextType=OP;im.propTypes={};function bx(){}im.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:bx,onEntering:bx,onEntered:bx,onExit:bx,onExiting:bx,onExited:bx};im.UNMOUNTED=gS;im.EXITED=Ov;im.ENTERING=Lv;im.ENTERED=r_;im.EXITING=hF;const D$=im;function CM(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function N$(t,e){var n=function(o){return e&&W.isValidElement(o)?e(o):o},r=Object.create(null);return t&&W.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function V1e(t,e){t=t||{},e=e||{};function n(h){return h in e?e[h]:t[h]}var r=Object.create(null),i=[];for(var o in t)o in e?i.length&&(r[o]=i,i=[]):i.push(o);var a,s={};for(var l in e){if(r[l])for(a=0;a<r[l].length;a++){var c=r[l][a];s[r[l][a]]=n(c)}s[l]=n(l)}for(a=0;a<i.length;a++)s[i[a]]=n(i[a]);return s}function Yv(t,e,n){return n[e]!=null?n[e]:t.props[e]}function W1e(t,e){return N$(t.children,function(n){return W.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:Yv(n,"appear",t),enter:Yv(n,"enter",t),exit:Yv(n,"exit",t)})})}function H1e(t,e,n){var r=N$(t.children),i=V1e(e,r);return Object.keys(i).forEach(function(o){var a=i[o];if(W.isValidElement(a)){var s=o in e,l=o in r,c=e[o],h=W.isValidElement(c)&&!c.props.in;l&&(!s||h)?i[o]=W.cloneElement(a,{onExited:n.bind(null,a),in:!0,exit:Yv(a,"exit",t),enter:Yv(a,"enter",t)}):!l&&s&&!h?i[o]=W.cloneElement(a,{in:!1}):l&&s&&W.isValidElement(c)&&(i[o]=W.cloneElement(a,{onExited:n.bind(null,a),in:c.props.in,exit:Yv(a,"exit",t),enter:Yv(a,"enter",t)}))}}),i}var G1e=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},q1e={component:"div",childFactory:function(e){return e}},z$=function(t){sE(e,t);function e(r,i){var o;o=t.call(this,r,i)||this;var a=o.handleExited.bind(CM(o));return o.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},o}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,o){var a=o.children,s=o.handleExited,l=o.firstRender;return{children:l?W1e(i,s):H1e(i,a,s),firstRender:!1}},n.handleExited=function(i,o){var a=N$(this.props.children);i.key in a||(i.props.onExited&&i.props.onExited(o),this.mounted&&this.setState(function(s){var l=de({},s.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,o=i.component,a=i.childFactory,s=on(i,["component","childFactory"]),l=this.state.contextValue,c=G1e(this.state.children).map(a);return delete s.appear,delete s.enter,delete s.exit,o===null?Ze.createElement(OP.Provider,{value:l},c):Ze.createElement(OP.Provider,{value:l},Ze.createElement(o,s,c))},e}(Ze.Component);z$.propTypes={};z$.defaultProps=q1e;const Y1e=z$,_ne=t=>t.scrollTop;function xb(t,e){var n,r;const{timeout:i,easing:o,style:a={}}=t;return{duration:(n=a.transitionDuration)!=null?n:typeof i=="number"?i:i[e.mode]||0,easing:(r=a.transitionTimingFunction)!=null?r:typeof o=="object"?o[e.mode]:o,delay:a.transitionDelay}}function X1e(t){return Vn("MuiCollapse",t)}Wn("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const K1e=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Z1e=t=>{const{orientation:e,classes:n}=t,r={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return Hn(r,X1e,n)},J1e=tn("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],n.state==="entered"&&e.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&e.hidden]}})(({theme:t,ownerState:e})=>de({height:0,overflow:"hidden",transition:t.transitions.create("height")},e.orientation==="horizontal"&&{height:"auto",width:0,transition:t.transitions.create("width")},e.state==="entered"&&de({height:"auto",overflow:"visible"},e.orientation==="horizontal"&&{width:"auto"}),e.state==="exited"&&!e.in&&e.collapsedSize==="0px"&&{visibility:"hidden"})),Q1e=tn("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,e)=>e.wrapper})(({ownerState:t})=>de({display:"flex",width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),ewe=tn("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,e)=>e.wrapperInner})(({ownerState:t})=>de({width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),bne=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiCollapse"}),{addEndListener:i,children:o,className:a,collapsedSize:s="0px",component:l,easing:c,in:h,onEnter:p,onEntered:g,onEntering:v,onExit:x,onExited:b,onExiting:M,orientation:w="vertical",style:T,timeout:C=mne.standard,TransitionComponent:I=D$}=r,R=on(r,K1e),O=de({},r,{orientation:w,collapsedSize:s}),B=Z1e(O),U=xd(),Z=Pg(),j=W.useRef(null),X=W.useRef(),le=typeof s=="number"?`${s}px`:s,me=w==="horizontal",ie=me?"width":"height",ce=W.useRef(null),fe=Lo(n,ce),xe=ct=>Dt=>{if(ct){const zt=ce.current;Dt===void 0?ct(zt):ct(zt,Dt)}},te=()=>j.current?j.current[me?"clientWidth":"clientHeight"]:0,he=xe((ct,Dt)=>{j.current&&me&&(j.current.style.position="absolute"),ct.style[ie]=le,p&&p(ct,Dt)}),ve=xe((ct,Dt)=>{const zt=te();j.current&&me&&(j.current.style.position="");const{duration:Fe,easing:lt}=xb({style:T,timeout:C,easing:c},{mode:"enter"});if(C==="auto"){const Qe=U.transitions.getAutoHeightDuration(zt);ct.style.transitionDuration=`${Qe}ms`,X.current=Qe}else ct.style.transitionDuration=typeof Fe=="string"?Fe:`${Fe}ms`;ct.style[ie]=`${zt}px`,ct.style.transitionTimingFunction=lt,v&&v(ct,Dt)}),ze=xe((ct,Dt)=>{ct.style[ie]="auto",g&&g(ct,Dt)}),Ue=xe(ct=>{ct.style[ie]=`${te()}px`,x&&x(ct)}),rt=xe(b),Be=xe(ct=>{const Dt=te(),{duration:zt,easing:Fe}=xb({style:T,timeout:C,easing:c},{mode:"exit"});if(C==="auto"){const lt=U.transitions.getAutoHeightDuration(Dt);ct.style.transitionDuration=`${lt}ms`,X.current=lt}else ct.style.transitionDuration=typeof zt=="string"?zt:`${zt}ms`;ct.style[ie]=le,ct.style.transitionTimingFunction=Fe,M&&M(ct)}),st=ct=>{C==="auto"&&Z.start(X.current||0,ct),i&&i(ce.current,ct)};return F.jsx(I,de({in:h,onEnter:he,onEntered:ze,onEntering:ve,onExit:Ue,onExited:rt,onExiting:Be,addEndListener:st,nodeRef:ce,timeout:C==="auto"?null:C},R,{children:(ct,Dt)=>F.jsx(J1e,de({as:l,className:Kt(B.root,a,{entered:B.entered,exited:!h&&le==="0px"&&B.hidden}[ct]),style:de({[me?"minWidth":"minHeight"]:le},T),ref:fe},Dt,{ownerState:de({},O,{state:ct}),children:F.jsx(Q1e,{ownerState:de({},O,{state:ct}),className:B.wrapper,ref:j,children:F.jsx(ewe,{ownerState:de({},O,{state:ct}),className:B.wrapperInner,children:o})})}))}))});bne.muiSupportAuto=!0;const twe=bne;function nwe(t){return Vn("MuiPaper",t)}Wn("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const rwe=["className","component","elevation","square","variant"],iwe=t=>{const{square:e,elevation:n,variant:r,classes:i}=t,o={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return Hn(o,nwe,i)},owe=tn("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(({theme:t,ownerState:e})=>{var n;return de({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!e.square&&{borderRadius:t.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.divider}`},e.variant==="elevation"&&de({boxShadow:(t.vars||t).shadows[e.elevation]},!t.vars&&t.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${Ji("#fff",o9(e.elevation))}, ${Ji("#fff",o9(e.elevation))})`},t.vars&&{backgroundImage:(n=t.vars.overlays)==null?void 0:n[e.elevation]}))}),swe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiPaper"}),{className:i,component:o="div",elevation:a=1,square:s=!1,variant:l="elevation"}=r,c=on(r,rwe),h=de({},r,{component:o,elevation:a,square:s,variant:l}),p=iwe(h);return F.jsx(owe,de({as:o,ownerState:h,className:Kt(p.root,i),ref:n},c))}),Ls=swe,awe=W.createContext({}),wne=awe;function LP(t){return typeof t=="string"}function __(t,e,n){return t===void 0||LP(t)?e:de({},e,{ownerState:de({},e.ownerState,n)})}const lwe={disableDefaultClasses:!1},cwe=W.createContext(lwe);function uwe(t){const{disableDefaultClasses:e}=W.useContext(cwe);return n=>e?"":t(n)}function DP(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function Sne(t,e,n){return typeof t=="function"?t(e,n):t}function l9(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function Mne(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=t;if(!e){const v=Kt(n==null?void 0:n.className,o,i==null?void 0:i.className,r==null?void 0:r.className),x=de({},n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),b=de({},n,i,r);return v.length>0&&(b.className=v),Object.keys(x).length>0&&(b.style=x),{props:b,internalRef:void 0}}const a=DP(de({},i,r)),s=l9(r),l=l9(i),c=e(a),h=Kt(c==null?void 0:c.className,n==null?void 0:n.className,o,i==null?void 0:i.className,r==null?void 0:r.className),p=de({},c==null?void 0:c.style,n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),g=de({},c,n,l,s);return h.length>0&&(g.className=h),Object.keys(p).length>0&&(g.style=p),{props:g,internalRef:c.ref}}const dwe=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function Pc(t){var e;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:o=!1}=t,a=on(t,dwe),s=o?{}:Sne(r,i),{props:l,internalRef:c}=Mne(de({},a,{externalSlotProps:s})),h=Lo(c,s==null?void 0:s.ref,(e=t.additionalProps)==null?void 0:e.ref);return __(n,de({},l,{ref:h}),i)}const fwe=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],hwe=["component","slots","slotProps"],pwe=["component"];function NP(t,e){const{className:n,elementType:r,ownerState:i,externalForwardedProps:o,getSlotOwnerState:a,internalForwardedProps:s}=e,l=on(e,fwe),{component:c,slots:h={[t]:void 0},slotProps:p={[t]:void 0}}=o,g=on(o,hwe),v=h[t]||r,x=Sne(p[t],i),b=Mne(de({className:n},l,{externalForwardedProps:t==="root"?g:void 0,externalSlotProps:x})),{props:{component:M},internalRef:w}=b,T=on(b.props,pwe),C=Lo(w,x==null?void 0:x.ref,e.ref),I=a?a(T):{},R=de({},i,I),O=t==="root"?M||c:M,B=__(v,de({},t==="root"&&!c&&!h[t]&&s,t!=="root"&&!h[t]&&s,T,O&&{as:O},{ref:C}),R);return Object.keys(I).forEach(U=>{delete B[U]}),[v,B]}function mwe(t){return Vn("MuiAccordion",t)}const gwe=Wn("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),LT=gwe,ywe=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],vwe=t=>{const{classes:e,square:n,expanded:r,disabled:i,disableGutters:o}=t;return Hn({root:["root",!n&&"rounded",r&&"expanded",i&&"disabled",!o&&"gutters"],region:["region"]},mwe,e)},xwe=tn(Ls,{name:"MuiAccordion",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${LT.region}`]:e.region},e.root,!n.square&&e.rounded,!n.disableGutters&&e.gutters]}})(({theme:t})=>{const e={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],e),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],e)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${LT.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${LT.disabled}`]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}},({theme:t,ownerState:e})=>de({},!e.square&&{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},!e.disableGutters&&{[`&.${LT.expanded}`]:{margin:"16px 0"}})),_we=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiAccordion"}),{children:i,className:o,defaultExpanded:a=!1,disabled:s=!1,disableGutters:l=!1,expanded:c,onChange:h,square:p=!1,slots:g={},slotProps:v={},TransitionComponent:x,TransitionProps:b}=r,M=on(r,ywe),[w,T]=gb({controlled:c,default:a,name:"Accordion",state:"expanded"}),C=W.useCallback(me=>{T(!w),h&&h(me,!w)},[w,h,T]),[I,...R]=W.Children.toArray(i),O=W.useMemo(()=>({expanded:w,disabled:s,disableGutters:l,toggle:C}),[w,s,l,C]),B=de({},r,{square:p,disabled:s,disableGutters:l,expanded:w}),U=vwe(B),Z=de({transition:x},g),j=de({transition:b},v),[X,le]=NP("transition",{elementType:twe,externalForwardedProps:{slots:Z,slotProps:j},ownerState:B});return F.jsxs(xwe,de({className:Kt(U.root,o),ref:n,ownerState:B,square:p},M,{children:[F.jsx(wne.Provider,{value:O,children:I}),F.jsx(X,de({in:w,timeout:"auto"},le,{children:F.jsx("div",{"aria-labelledby":I.props.id,id:I.props["aria-controls"],role:"region",className:U.region,children:R})}))]}))}),pl=_we;function bwe(t){return Vn("MuiAccordionDetails",t)}Wn("MuiAccordionDetails",["root"]);const wwe=["className"],Swe=t=>{const{classes:e}=t;return Hn({root:["root"]},bwe,e)},Mwe=tn("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({padding:t.spacing(1,2,2)})),Ewe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiAccordionDetails"}),{className:i}=r,o=on(r,wwe),a=r,s=Swe(a);return F.jsx(Mwe,de({className:Kt(s.root,i),ref:n,ownerState:a},o))}),ml=Ewe;function Twe(t){const{className:e,classes:n,pulsate:r=!1,rippleX:i,rippleY:o,rippleSize:a,in:s,onExited:l,timeout:c}=t,[h,p]=W.useState(!1),g=Kt(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),v={width:a,height:a,top:-(a/2)+o,left:-(a/2)+i},x=Kt(n.child,h&&n.childLeaving,r&&n.childPulsate);return!s&&!h&&p(!0),W.useEffect(()=>{if(!s&&l!=null){const b=setTimeout(l,c);return()=>{clearTimeout(b)}}},[l,s,c]),F.jsx("span",{className:g,style:v,children:F.jsx("span",{className:x})})}const Cwe=Wn("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),qu=Cwe,Awe=["center","classes","className"];let sR=t=>t,c9,u9,d9,f9;const pF=550,Pwe=80,kwe=j0(c9||(c9=sR`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),Iwe=j0(u9||(u9=sR`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),Rwe=j0(d9||(d9=sR`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),Owe=tn("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Lwe=tn(Twe,{name:"MuiTouchRipple",slot:"Ripple"})(f9||(f9=sR`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),qu.rippleVisible,kwe,pF,({theme:t})=>t.transitions.easing.easeInOut,qu.ripplePulsate,({theme:t})=>t.transitions.duration.shorter,qu.child,qu.childLeaving,Iwe,pF,({theme:t})=>t.transitions.easing.easeInOut,qu.childPulsate,Rwe,({theme:t})=>t.transitions.easing.easeInOut),Dwe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:a}=r,s=on(r,Awe),[l,c]=W.useState([]),h=W.useRef(0),p=W.useRef(null);W.useEffect(()=>{p.current&&(p.current(),p.current=null)},[l]);const g=W.useRef(!1),v=Pg(),x=W.useRef(null),b=W.useRef(null),M=W.useCallback(I=>{const{pulsate:R,rippleX:O,rippleY:B,rippleSize:U,cb:Z}=I;c(j=>[...j,F.jsx(Lwe,{classes:{ripple:Kt(o.ripple,qu.ripple),rippleVisible:Kt(o.rippleVisible,qu.rippleVisible),ripplePulsate:Kt(o.ripplePulsate,qu.ripplePulsate),child:Kt(o.child,qu.child),childLeaving:Kt(o.childLeaving,qu.childLeaving),childPulsate:Kt(o.childPulsate,qu.childPulsate)},timeout:pF,pulsate:R,rippleX:O,rippleY:B,rippleSize:U},h.current)]),h.current+=1,p.current=Z},[o]),w=W.useCallback((I={},R={},O=()=>{})=>{const{pulsate:B=!1,center:U=i||R.pulsate,fakeElement:Z=!1}=R;if((I==null?void 0:I.type)==="mousedown"&&g.current){g.current=!1;return}(I==null?void 0:I.type)==="touchstart"&&(g.current=!0);const j=Z?null:b.current,X=j?j.getBoundingClientRect():{width:0,height:0,left:0,top:0};let le,me,ie;if(U||I===void 0||I.clientX===0&&I.clientY===0||!I.clientX&&!I.touches)le=Math.round(X.width/2),me=Math.round(X.height/2);else{const{clientX:ce,clientY:fe}=I.touches&&I.touches.length>0?I.touches[0]:I;le=Math.round(ce-X.left),me=Math.round(fe-X.top)}if(U)ie=Math.sqrt((2*X.width**2+X.height**2)/3),ie%2===0&&(ie+=1);else{const ce=Math.max(Math.abs((j?j.clientWidth:0)-le),le)*2+2,fe=Math.max(Math.abs((j?j.clientHeight:0)-me),me)*2+2;ie=Math.sqrt(ce**2+fe**2)}I!=null&&I.touches?x.current===null&&(x.current=()=>{M({pulsate:B,rippleX:le,rippleY:me,rippleSize:ie,cb:O})},v.start(Pwe,()=>{x.current&&(x.current(),x.current=null)})):M({pulsate:B,rippleX:le,rippleY:me,rippleSize:ie,cb:O})},[i,M,v]),T=W.useCallback(()=>{w({},{pulsate:!0})},[w]),C=W.useCallback((I,R)=>{if(v.clear(),(I==null?void 0:I.type)==="touchend"&&x.current){x.current(),x.current=null,v.start(0,()=>{C(I,R)});return}x.current=null,c(O=>O.length>0?O.slice(1):O),p.current=R},[v]);return W.useImperativeHandle(n,()=>({pulsate:T,start:w,stop:C}),[T,w,C]),F.jsx(Owe,de({className:Kt(qu.root,o.root,a),ref:b},s,{children:F.jsx(Y1e,{component:null,exit:!0,children:l})}))}),Nwe=Dwe;function zwe(t){return Vn("MuiButtonBase",t)}const Fwe=Wn("MuiButtonBase",["root","disabled","focusVisible"]),Bwe=Fwe,$we=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],jwe=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,a=Hn({root:["root",e&&"disabled",n&&"focusVisible"]},zwe,i);return n&&r&&(a.root+=` ${r}`),a},Uwe=tn("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Bwe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Vwe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:a,className:s,component:l="button",disabled:c=!1,disableRipple:h=!1,disableTouchRipple:p=!1,focusRipple:g=!1,LinkComponent:v="a",onBlur:x,onClick:b,onContextMenu:M,onDragLeave:w,onFocus:T,onFocusVisible:C,onKeyDown:I,onKeyUp:R,onMouseDown:O,onMouseLeave:B,onMouseUp:U,onTouchEnd:Z,onTouchMove:j,onTouchStart:X,tabIndex:le=0,TouchRippleProps:me,touchRippleRef:ie,type:ce}=r,fe=on(r,$we),xe=W.useRef(null),te=W.useRef(null),he=Lo(te,ie),{isFocusVisibleRef:ve,onFocus:ze,onBlur:Ue,ref:rt}=iR(),[Be,st]=W.useState(!1);c&&Be&&st(!1),W.useImperativeHandle(i,()=>({focusVisible:()=>{st(!0),xe.current.focus()}}),[]);const[ct,Dt]=W.useState(!1);W.useEffect(()=>{Dt(!0)},[]);const zt=ct&&!h&&!c;W.useEffect(()=>{Be&&g&&!h&&ct&&te.current.pulsate()},[h,g,Be,ct]);function Fe(Rt,nn,An=p){return Wl(mt=>(nn&&nn(mt),!An&&te.current&&te.current[Rt](mt),!0))}const lt=Fe("start",O),Qe=Fe("stop",M),ge=Fe("stop",w),et=Fe("stop",U),ot=Fe("stop",Rt=>{Be&&Rt.preventDefault(),B&&B(Rt)}),Tt=Fe("start",X),Ct=Fe("stop",Z),Bt=Fe("stop",j),Gt=Fe("stop",Rt=>{Ue(Rt),ve.current===!1&&st(!1),x&&x(Rt)},!1),sn=Wl(Rt=>{xe.current||(xe.current=Rt.currentTarget),ze(Rt),ve.current===!0&&(st(!0),C&&C(Rt)),T&&T(Rt)}),Je=()=>{const Rt=xe.current;return l&&l!=="button"&&!(Rt.tagName==="A"&&Rt.href)},Ce=W.useRef(!1),_e=Wl(Rt=>{g&&!Ce.current&&Be&&te.current&&Rt.key===" "&&(Ce.current=!0,te.current.stop(Rt,()=>{te.current.start(Rt)})),Rt.target===Rt.currentTarget&&Je()&&Rt.key===" "&&Rt.preventDefault(),I&&I(Rt),Rt.target===Rt.currentTarget&&Je()&&Rt.key==="Enter"&&!c&&(Rt.preventDefault(),b&&b(Rt))}),ht=Wl(Rt=>{g&&Rt.key===" "&&te.current&&Be&&!Rt.defaultPrevented&&(Ce.current=!1,te.current.stop(Rt,()=>{te.current.pulsate(Rt)})),R&&R(Rt),b&&Rt.target===Rt.currentTarget&&Je()&&Rt.key===" "&&!Rt.defaultPrevented&&b(Rt)});let dt=l;dt==="button"&&(fe.href||fe.to)&&(dt=v);const Wt={};dt==="button"?(Wt.type=ce===void 0?"button":ce,Wt.disabled=c):(!fe.href&&!fe.to&&(Wt.role="button"),c&&(Wt["aria-disabled"]=c));const jt=Lo(n,rt,xe),Sn=de({},r,{centerRipple:o,component:l,disabled:c,disableRipple:h,disableTouchRipple:p,focusRipple:g,tabIndex:le,focusVisible:Be}),cn=jwe(Sn);return F.jsxs(Uwe,de({as:dt,className:Kt(cn.root,s),ownerState:Sn,onBlur:Gt,onClick:b,onContextMenu:Qe,onFocus:sn,onKeyDown:_e,onKeyUp:ht,onMouseDown:lt,onMouseLeave:ot,onMouseUp:et,onDragLeave:ge,onTouchEnd:Ct,onTouchMove:Bt,onTouchStart:Tt,ref:jt,tabIndex:c?-1:le,type:ce},Wt,fe,{children:[a,zt?F.jsx(Nwe,de({ref:he,center:o},me)):null]}))}),om=Vwe;function Wwe(t){return Vn("MuiAccordionSummary",t)}const Hwe=Wn("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),b_=Hwe,Gwe=["children","className","expandIcon","focusVisibleClassName","onClick"],qwe=t=>{const{classes:e,expanded:n,disabled:r,disableGutters:i}=t;return Hn({root:["root",n&&"expanded",r&&"disabled",!i&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!i&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]},Wwe,e)},Ywe=tn(om,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t,ownerState:e})=>{const n={duration:t.transitions.duration.shortest};return de({display:"flex",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],n),[`&.${b_.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${b_.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`&:hover:not(.${b_.disabled})`]:{cursor:"pointer"}},!e.disableGutters&&{[`&.${b_.expanded}`]:{minHeight:64}})}),Xwe=tn("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(t,e)=>e.content})(({theme:t,ownerState:e})=>de({display:"flex",flexGrow:1,margin:"12px 0"},!e.disableGutters&&{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),[`&.${b_.expanded}`]:{margin:"20px 0"}})),Kwe=tn("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(t,e)=>e.expandIconWrapper})(({theme:t})=>({display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),[`&.${b_.expanded}`]:{transform:"rotate(180deg)"}})),Zwe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiAccordionSummary"}),{children:i,className:o,expandIcon:a,focusVisibleClassName:s,onClick:l}=r,c=on(r,Gwe),{disabled:h=!1,disableGutters:p,expanded:g,toggle:v}=W.useContext(wne),x=w=>{v&&v(w),l&&l(w)},b=de({},r,{expanded:g,disabled:h,disableGutters:p}),M=qwe(b);return F.jsxs(Ywe,de({focusRipple:!1,disableRipple:!0,disabled:h,component:"div","aria-expanded":g,className:Kt(M.root,o),focusVisibleClassName:Kt(M.focusVisible,s),onClick:x,ref:n,ownerState:b},c,{children:[F.jsx(Xwe,{className:M.content,ownerState:b,children:i}),a&&F.jsx(Kwe,{className:M.expandIconWrapper,ownerState:b,children:a})]}))}),gl=Zwe;function F$(t){return Jn}function Jwe(t){return Vn("MuiAlert",t)}const Qwe=Wn("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),h9=Qwe;function eSe(t){return Vn("MuiIconButton",t)}const tSe=Wn("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),nSe=tSe,rSe=["edge","children","className","color","disabled","disableFocusRipple","size"],iSe=t=>{const{classes:e,disabled:n,color:r,edge:i,size:o}=t,a={root:["root",n&&"disabled",r!=="default"&&`color${en(r)}`,i&&`edge${en(i)}`,`size${en(o)}`]};return Hn(a,eSe,e)},oSe=tn(om,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="default"&&e[`color${en(n.color)}`],n.edge&&e[`edge${en(n.edge)}`],e[`size${en(n.size)}`]]}})(({theme:t,ownerState:e})=>de({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Ji(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:t,ownerState:e})=>{var n;const r=(n=(t.vars||t).palette)==null?void 0:n[e.color];return de({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&de({color:r==null?void 0:r.main},!e.disableRipple&&{"&:hover":de({},r&&{backgroundColor:t.vars?`rgba(${r.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Ji(r.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),e.size==="small"&&{padding:5,fontSize:t.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${nSe.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})}),sSe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiIconButton"}),{edge:i=!1,children:o,className:a,color:s="default",disabled:l=!1,disableFocusRipple:c=!1,size:h="medium"}=r,p=on(r,rSe),g=de({},r,{edge:i,color:s,disabled:l,disableFocusRipple:c,size:h}),v=iSe(g);return F.jsx(oSe,de({className:Kt(v.root,a),centerRipple:!0,focusRipple:!c,disabled:l,ref:n},p,{ownerState:g,children:o}))}),wr=sSe,aSe=$a(F.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),lSe=$a(F.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),cSe=$a(F.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),uSe=$a(F.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),dSe=$a(F.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),fSe=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],hSe=F$(),pSe=t=>{const{variant:e,color:n,severity:r,classes:i}=t,o={root:["root",`color${en(n||r)}`,`${e}${en(n||r)}`,`${e}`],icon:["icon"],message:["message"],action:["action"]};return Hn(o,Jwe,i)},mSe=tn(Ls,{name:"MuiAlert",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${en(n.color||n.severity)}`]]}})(({theme:t})=>{const e=t.palette.mode==="light"?yb:vb,n=t.palette.mode==="light"?vb:yb;return de({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(([,r])=>r.main&&r.light).map(([r])=>({props:{colorSeverity:r,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert[`${r}Color`]:e(t.palette[r].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${r}StandardBg`]:n(t.palette[r].light,.9),[`& .${h9.icon}`]:t.vars?{color:t.vars.palette.Alert[`${r}IconColor`]}:{color:t.palette[r].main}}})),...Object.entries(t.palette).filter(([,r])=>r.main&&r.light).map(([r])=>({props:{colorSeverity:r,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert[`${r}Color`]:e(t.palette[r].light,.6),border:`1px solid ${(t.vars||t).palette[r].light}`,[`& .${h9.icon}`]:t.vars?{color:t.vars.palette.Alert[`${r}IconColor`]}:{color:t.palette[r].main}}})),...Object.entries(t.palette).filter(([,r])=>r.main&&r.dark).map(([r])=>({props:{colorSeverity:r,variant:"filled"},style:de({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert[`${r}FilledColor`],backgroundColor:t.vars.palette.Alert[`${r}FilledBg`]}:{backgroundColor:t.palette.mode==="dark"?t.palette[r].dark:t.palette[r].main,color:t.palette.getContrastText(t.palette[r].main)})}))]})}),gSe=tn("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(t,e)=>e.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),ySe=tn("div",{name:"MuiAlert",slot:"Message",overridesResolver:(t,e)=>e.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),p9=tn("div",{name:"MuiAlert",slot:"Action",overridesResolver:(t,e)=>e.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),m9={success:F.jsx(aSe,{fontSize:"inherit"}),warning:F.jsx(lSe,{fontSize:"inherit"}),error:F.jsx(cSe,{fontSize:"inherit"}),info:F.jsx(uSe,{fontSize:"inherit"})},vSe=W.forwardRef(function(e,n){const r=hSe({props:e,name:"MuiAlert"}),{action:i,children:o,className:a,closeText:s="Close",color:l,components:c={},componentsProps:h={},icon:p,iconMapping:g=m9,onClose:v,role:x="alert",severity:b="success",slotProps:M={},slots:w={},variant:T="standard"}=r,C=on(r,fSe),I=de({},r,{color:l,severity:b,variant:T,colorSeverity:l||b}),R=pSe(I),O={slots:de({closeButton:c.CloseButton,closeIcon:c.CloseIcon},w),slotProps:de({},h,M)},[B,U]=NP("closeButton",{elementType:wr,externalForwardedProps:O,ownerState:I}),[Z,j]=NP("closeIcon",{elementType:dSe,externalForwardedProps:O,ownerState:I});return F.jsxs(mSe,de({role:x,elevation:0,ownerState:I,className:Kt(R.root,a),ref:n},C,{children:[p!==!1?F.jsx(gSe,{ownerState:I,className:R.icon,children:p||g[b]||m9[b]}):null,F.jsx(ySe,{ownerState:I,className:R.message,children:o}),i!=null?F.jsx(p9,{ownerState:I,className:R.action,children:i}):null,i==null&&v?F.jsx(p9,{ownerState:I,className:R.action,children:F.jsx(B,de({size:"small","aria-label":s,title:s,color:"inherit",onClick:v},U,{children:F.jsx(Z,de({fontSize:"small"},j))}))}):null]}))}),xSe=vSe;function _Se(t){return Vn("MuiTypography",t)}Wn("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const bSe=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],wSe=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:a}=t,s={root:["root",o,t.align!=="inherit"&&`align${en(e)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return Hn(s,_Se,a)},SSe=tn("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${en(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(({theme:t,ownerState:e})=>de({margin:0},e.variant==="inherit"&&{font:"inherit"},e.variant!=="inherit"&&t.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),g9={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},MSe={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},ESe=t=>MSe[t]||t,TSe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiTypography"}),i=ESe(r.color),o=nE(de({},r,{color:i})),{align:a="inherit",className:s,component:l,gutterBottom:c=!1,noWrap:h=!1,paragraph:p=!1,variant:g="body1",variantMapping:v=g9}=o,x=on(o,bSe),b=de({},o,{align:a,color:i,className:s,component:l,gutterBottom:c,noWrap:h,paragraph:p,variant:g,variantMapping:v}),M=l||(p?"p":v[g]||g9[g])||"span",w=wSe(b);return F.jsx(SSe,de({as:M,ref:n,ownerState:b,className:Kt(w.root,s)},x))}),Bn=TSe;function CSe(t){return Vn("MuiAppBar",t)}Wn("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const ASe=["className","color","enableColorOnDark","position"],PSe=t=>{const{color:e,position:n,classes:r}=t,i={root:["root",`color${en(e)}`,`position${en(n)}`]};return Hn(i,CSe,r)},DT=(t,e)=>t?`${t==null?void 0:t.replace(")","")}, ${e})`:e,kSe=tn(Ls,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${en(n.position)}`],e[`color${en(n.color)}`]]}})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[900];return de({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},e.position==="fixed"&&{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},e.position==="absolute"&&{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},e.position==="sticky"&&{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},e.position==="static"&&{position:"static"},e.position==="relative"&&{position:"relative"},!t.vars&&de({},e.color==="default"&&{backgroundColor:n,color:t.palette.getContrastText(n)},e.color&&e.color!=="default"&&e.color!=="inherit"&&e.color!=="transparent"&&{backgroundColor:t.palette[e.color].main,color:t.palette[e.color].contrastText},e.color==="inherit"&&{color:"inherit"},t.palette.mode==="dark"&&!e.enableColorOnDark&&{backgroundColor:null,color:null},e.color==="transparent"&&de({backgroundColor:"transparent",color:"inherit"},t.palette.mode==="dark"&&{backgroundImage:"none"})),t.vars&&de({},e.color==="default"&&{"--AppBar-background":e.enableColorOnDark?t.vars.palette.AppBar.defaultBg:DT(t.vars.palette.AppBar.darkBg,t.vars.palette.AppBar.defaultBg),"--AppBar-color":e.enableColorOnDark?t.vars.palette.text.primary:DT(t.vars.palette.AppBar.darkColor,t.vars.palette.text.primary)},e.color&&!e.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":e.enableColorOnDark?t.vars.palette[e.color].main:DT(t.vars.palette.AppBar.darkBg,t.vars.palette[e.color].main),"--AppBar-color":e.enableColorOnDark?t.vars.palette[e.color].contrastText:DT(t.vars.palette.AppBar.darkColor,t.vars.palette[e.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:e.color==="inherit"?"inherit":"var(--AppBar-color)"},e.color==="transparent"&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),ISe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiAppBar"}),{className:i,color:o="primary",enableColorOnDark:a=!1,position:s="fixed"}=r,l=on(r,ASe),c=de({},r,{color:o,position:s,enableColorOnDark:a}),h=PSe(c);return F.jsx(kSe,de({square:!0,component:"header",ownerState:c,elevation:4,className:Kt(h.root,i,s==="fixed"&&"mui-fixed"),ref:n},l))}),aE=ISe;function RSe(t){const{badgeContent:e,invisible:n=!1,max:r=99,showZero:i=!1}=t,o=one({badgeContent:e,max:r});let a=n;n===!1&&e===0&&!i&&(a=!0);const{badgeContent:s,max:l=r}=a?o:t,c=s&&Number(s)>l?`${l}+`:s;return{badgeContent:s,invisible:a,max:l,displayValue:c}}const Ene="base";function OSe(t){return`${Ene}--${t}`}function LSe(t,e){return`${Ene}-${t}-${e}`}function Tne(t,e){const n=Qte[e];return n?OSe(n):LSe(t,e)}function DSe(t,e){const n={};return e.forEach(r=>{n[r]=Tne(t,r)}),n}function y9(t){return t.substring(2).toLowerCase()}function NSe(t,e){return e.documentElement.clientWidth<t.clientX||e.documentElement.clientHeight<t.clientY}function zSe(t){const{children:e,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:i,touchEvent:o="onTouchEnd"}=t,a=W.useRef(!1),s=W.useRef(null),l=W.useRef(!1),c=W.useRef(!1);W.useEffect(()=>(setTimeout(()=>{l.current=!0},0),()=>{l.current=!1}),[]);const h=Lo(e.ref,s),p=Wl(x=>{const b=c.current;c.current=!1;const M=Os(s.current);if(!l.current||!s.current||"clientX"in x&&NSe(x,M))return;if(a.current){a.current=!1;return}let w;x.composedPath?w=x.composedPath().indexOf(s.current)>-1:w=!M.documentElement.contains(x.target)||s.current.contains(x.target),!w&&(n||!b)&&i(x)}),g=x=>b=>{c.current=!0;const M=e.props[x];M&&M(b)},v={ref:h};return o!==!1&&(v[o]=g(o)),W.useEffect(()=>{if(o!==!1){const x=y9(o),b=Os(s.current),M=()=>{a.current=!0};return b.addEventListener(x,p),b.addEventListener("touchmove",M),()=>{b.removeEventListener(x,p),b.removeEventListener("touchmove",M)}}},[p,o]),r!==!1&&(v[r]=g(r)),W.useEffect(()=>{if(r!==!1){const x=y9(r),b=Os(s.current);return b.addEventListener(x,p),()=>{b.removeEventListener(x,p)}}},[p,r]),F.jsx(W.Fragment,{children:W.cloneElement(e,v)})}const FSe=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function BSe(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function $Se(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=r=>t.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=e(`[name="${t.name}"]:checked`);return n||(n=e(`[name="${t.name}"]`)),n!==t}function jSe(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||$Se(t))}function USe(t){const e=[],n=[];return Array.from(t.querySelectorAll(FSe)).forEach((r,i)=>{const o=BSe(r);o===-1||!jSe(r)||(o===0?e.push(r):n.push({documentOrder:i,tabIndex:o,node:r}))}),n.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(e)}function VSe(){return!0}function WSe(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:o=USe,isEnabled:a=VSe,open:s}=t,l=W.useRef(!1),c=W.useRef(null),h=W.useRef(null),p=W.useRef(null),g=W.useRef(null),v=W.useRef(!1),x=W.useRef(null),b=Lo(e.ref,x),M=W.useRef(null);W.useEffect(()=>{!s||!x.current||(v.current=!n)},[n,s]),W.useEffect(()=>{if(!s||!x.current)return;const C=Os(x.current);return x.current.contains(C.activeElement)||(x.current.hasAttribute("tabIndex")||x.current.setAttribute("tabIndex","-1"),v.current&&x.current.focus()),()=>{i||(p.current&&p.current.focus&&(l.current=!0,p.current.focus()),p.current=null)}},[s]),W.useEffect(()=>{if(!s||!x.current)return;const C=Os(x.current),I=B=>{M.current=B,!(r||!a()||B.key!=="Tab")&&C.activeElement===x.current&&B.shiftKey&&(l.current=!0,h.current&&h.current.focus())},R=()=>{const B=x.current;if(B===null)return;if(!C.hasFocus()||!a()||l.current){l.current=!1;return}if(B.contains(C.activeElement)||r&&C.activeElement!==c.current&&C.activeElement!==h.current)return;if(C.activeElement!==g.current)g.current=null;else if(g.current!==null)return;if(!v.current)return;let U=[];if((C.activeElement===c.current||C.activeElement===h.current)&&(U=o(x.current)),U.length>0){var Z,j;const X=!!((Z=M.current)!=null&&Z.shiftKey&&((j=M.current)==null?void 0:j.key)==="Tab"),le=U[0],me=U[U.length-1];typeof le!="string"&&typeof me!="string"&&(X?me.focus():le.focus())}else B.focus()};C.addEventListener("focusin",R),C.addEventListener("keydown",I,!0);const O=setInterval(()=>{C.activeElement&&C.activeElement.tagName==="BODY"&&R()},50);return()=>{clearInterval(O),C.removeEventListener("focusin",R),C.removeEventListener("keydown",I,!0)}},[n,r,i,a,s,o]);const w=C=>{p.current===null&&(p.current=C.relatedTarget),v.current=!0,g.current=C.target;const I=e.props.onFocus;I&&I(C)},T=C=>{p.current===null&&(p.current=C.relatedTarget),v.current=!0};return F.jsxs(W.Fragment,{children:[F.jsx("div",{tabIndex:s?0:-1,onFocus:T,ref:c,"data-testid":"sentinelStart"}),W.cloneElement(e,{ref:b,onFocus:w}),F.jsx("div",{tabIndex:s?0:-1,onFocus:T,ref:h,"data-testid":"sentinelEnd"})]})}function HSe(t){return typeof t=="function"?t():t}const Cne=W.forwardRef(function(e,n){const{children:r,container:i,disablePortal:o=!1}=e,[a,s]=W.useState(null),l=Lo(W.isValidElement(r)?r.ref:null,n);if(mu(()=>{o||s(HSe(i)||document.body)},[i,o]),mu(()=>{if(a&&!o)return IP(n,a),()=>{IP(n,null)}},[n,a,o]),o){if(W.isValidElement(r)){const c={ref:l};return W.cloneElement(r,c)}return F.jsx(W.Fragment,{children:r})}return F.jsx(W.Fragment,{children:a&&py.createPortal(r,a)})});function GSe(t){const e=Os(t);return e.body===t?Th(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function LS(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function v9(t){return parseInt(Th(t).getComputedStyle(t).paddingRight,10)||0}function qSe(t){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(t.tagName)!==-1,r=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return n||r}function x9(t,e,n,r,i){const o=[e,n,...r];[].forEach.call(t.children,a=>{const s=o.indexOf(a)===-1,l=!qSe(a);s&&l&&LS(a,i)})}function ID(t,e){let n=-1;return t.some((r,i)=>e(r)?(n=i,!0):!1),n}function YSe(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(GSe(r)){const a=rne(Os(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${v9(r)+a}px`;const s=Os(r).querySelectorAll(".mui-fixed");[].forEach.call(s,l=>{n.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${v9(l)+a}px`})}let o;if(r.parentNode instanceof DocumentFragment)o=Os(r).body;else{const a=r.parentElement,s=Th(r);o=(a==null?void 0:a.nodeName)==="HTML"&&s.getComputedStyle(a).overflowY==="scroll"?a:r}n.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{n.forEach(({value:o,el:a,property:s})=>{o?a.style.setProperty(s,o):a.style.removeProperty(s)})}}function XSe(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class KSe{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,n){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&LS(e.modalRef,!1);const i=XSe(n);x9(n,e.mount,e.modalRef,i,!0);const o=ID(this.containers,a=>a.container===n);return o!==-1?(this.containers[o].modals.push(e),r):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:i}),r)}mount(e,n){const r=ID(this.containers,o=>o.modals.indexOf(e)!==-1),i=this.containers[r];i.restore||(i.restore=YSe(i,n))}remove(e,n=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const i=ID(this.containers,a=>a.modals.indexOf(e)!==-1),o=this.containers[i];if(o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(r,1),o.modals.length===0)o.restore&&o.restore(),e.modalRef&&LS(e.modalRef,n),x9(o.container,e.mount,e.modalRef,o.hiddenSiblings,!1),this.containers.splice(i,1);else{const a=o.modals[o.modals.length-1];a.modalRef&&LS(a.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}function ZSe(t){return typeof t=="function"?t():t}function JSe(t){return t?t.props.hasOwnProperty("in"):!1}const QSe=new KSe;function eMe(t){const{container:e,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,manager:i=QSe,closeAfterTransition:o=!1,onTransitionEnter:a,onTransitionExited:s,children:l,onClose:c,open:h,rootRef:p}=t,g=W.useRef({}),v=W.useRef(null),x=W.useRef(null),b=Lo(x,p),[M,w]=W.useState(!h),T=JSe(l);let C=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(C=!1);const I=()=>Os(v.current),R=()=>(g.current.modalRef=x.current,g.current.mount=v.current,g.current),O=()=>{i.mount(R(),{disableScrollLock:r}),x.current&&(x.current.scrollTop=0)},B=Wl(()=>{const fe=ZSe(e)||I().body;i.add(R(),fe),x.current&&O()}),U=W.useCallback(()=>i.isTopModal(R()),[i]),Z=Wl(fe=>{v.current=fe,fe&&(h&&U()?O():x.current&&LS(x.current,C))}),j=W.useCallback(()=>{i.remove(R(),C)},[C,i]);W.useEffect(()=>()=>{j()},[j]),W.useEffect(()=>{h?B():(!T||!o)&&j()},[h,j,T,o,B]);const X=fe=>xe=>{var te;(te=fe.onKeyDown)==null||te.call(fe,xe),!(xe.key!=="Escape"||xe.which===229||!U())&&(n||(xe.stopPropagation(),c&&c(xe,"escapeKeyDown")))},le=fe=>xe=>{var te;(te=fe.onClick)==null||te.call(fe,xe),xe.target===xe.currentTarget&&c&&c(xe,"backdropClick")};return{getRootProps:(fe={})=>{const xe=DP(t);delete xe.onTransitionEnter,delete xe.onTransitionExited;const te=de({},xe,fe);return de({role:"presentation"},te,{onKeyDown:X(te),ref:b})},getBackdropProps:(fe={})=>{const xe=fe;return de({"aria-hidden":!0},xe,{onClick:le(xe),open:h})},getTransitionProps:()=>{const fe=()=>{w(!1),a&&a()},xe=()=>{w(!0),s&&s(),o&&j()};return{onEnter:cF(fe,l==null?void 0:l.props.onEnter),onExited:cF(xe,l==null?void 0:l.props.onExited)}},rootRef:b,portalRef:Z,isTopModal:U,exited:M,hasTransition:T}}var Ec="top",hd="bottom",pd="right",Tc="left",B$="auto",lE=[Ec,hd,pd,Tc],_b="start",AM="end",tMe="clippingParents",Ane="viewport",Tw="popper",nMe="reference",_9=lE.reduce(function(t,e){return t.concat([e+"-"+_b,e+"-"+AM])},[]),Pne=[].concat(lE,[B$]).reduce(function(t,e){return t.concat([e,e+"-"+_b,e+"-"+AM])},[]),rMe="beforeRead",iMe="read",oMe="afterRead",sMe="beforeMain",aMe="main",lMe="afterMain",cMe="beforeWrite",uMe="write",dMe="afterWrite",fMe=[rMe,iMe,oMe,sMe,aMe,lMe,cMe,uMe,dMe];function Ch(t){return t?(t.nodeName||"").toLowerCase():null}function gu(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function R0(t){var e=gu(t).Element;return t instanceof e||t instanceof Element}function od(t){var e=gu(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function $$(t){if(typeof ShadowRoot>"u")return!1;var e=gu(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function hMe(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},o=e.elements[n];!od(o)||!Ch(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(a){var s=i[a];s===!1?o.removeAttribute(a):o.setAttribute(a,s===!0?"":s)}))})}function pMe(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),s=a.reduce(function(l,c){return l[c]="",l},{});!od(i)||!Ch(i)||(Object.assign(i.style,s),Object.keys(o).forEach(function(l){i.removeAttribute(l)}))})}}const mMe={name:"applyStyles",enabled:!0,phase:"write",fn:hMe,effect:pMe,requires:["computeStyles"]};function xh(t){return t.split("-")[0]}var d0=Math.max,zP=Math.min,bb=Math.round;function mF(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function kne(){return!/^((?!chrome|android).)*safari/i.test(mF())}function wb(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,o=1;e&&od(t)&&(i=t.offsetWidth>0&&bb(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&bb(r.height)/t.offsetHeight||1);var a=R0(t)?gu(t):window,s=a.visualViewport,l=!kne()&&n,c=(r.left+(l&&s?s.offsetLeft:0))/i,h=(r.top+(l&&s?s.offsetTop:0))/o,p=r.width/i,g=r.height/o;return{width:p,height:g,top:h,right:c+p,bottom:h+g,left:c,x:c,y:h}}function j$(t){var e=wb(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function Ine(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&$$(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Gp(t){return gu(t).getComputedStyle(t)}function gMe(t){return["table","td","th"].indexOf(Ch(t))>=0}function gy(t){return((R0(t)?t.ownerDocument:t.document)||window.document).documentElement}function aR(t){return Ch(t)==="html"?t:t.assignedSlot||t.parentNode||($$(t)?t.host:null)||gy(t)}function b9(t){return!od(t)||Gp(t).position==="fixed"?null:t.offsetParent}function yMe(t){var e=/firefox/i.test(mF()),n=/Trident/i.test(mF());if(n&&od(t)){var r=Gp(t);if(r.position==="fixed")return null}var i=aR(t);for($$(i)&&(i=i.host);od(i)&&["html","body"].indexOf(Ch(i))<0;){var o=Gp(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function cE(t){for(var e=gu(t),n=b9(t);n&&gMe(n)&&Gp(n).position==="static";)n=b9(n);return n&&(Ch(n)==="html"||Ch(n)==="body"&&Gp(n).position==="static")?e:n||yMe(t)||e}function U$(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function DS(t,e,n){return d0(t,zP(e,n))}function vMe(t,e,n){var r=DS(t,e,n);return r>n?n:r}function Rne(){return{top:0,right:0,bottom:0,left:0}}function One(t){return Object.assign({},Rne(),t)}function Lne(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var xMe=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,One(typeof e!="number"?e:Lne(e,lE))};function _Me(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=xh(n.placement),l=U$(s),c=[Tc,pd].indexOf(s)>=0,h=c?"height":"width";if(!(!o||!a)){var p=xMe(i.padding,n),g=j$(o),v=l==="y"?Ec:Tc,x=l==="y"?hd:pd,b=n.rects.reference[h]+n.rects.reference[l]-a[l]-n.rects.popper[h],M=a[l]-n.rects.reference[l],w=cE(o),T=w?l==="y"?w.clientHeight||0:w.clientWidth||0:0,C=b/2-M/2,I=p[v],R=T-g[h]-p[x],O=T/2-g[h]/2+C,B=DS(I,O,R),U=l;n.modifiersData[r]=(e={},e[U]=B,e.centerOffset=B-O,e)}}function bMe(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||Ine(e.elements.popper,i)&&(e.elements.arrow=i))}const wMe={name:"arrow",enabled:!0,phase:"main",fn:_Me,effect:bMe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Sb(t){return t.split("-")[1]}var SMe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function MMe(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:bb(n*i)/i||0,y:bb(r*i)/i||0}}function w9(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,a=t.offsets,s=t.position,l=t.gpuAcceleration,c=t.adaptive,h=t.roundOffsets,p=t.isFixed,g=a.x,v=g===void 0?0:g,x=a.y,b=x===void 0?0:x,M=typeof h=="function"?h({x:v,y:b}):{x:v,y:b};v=M.x,b=M.y;var w=a.hasOwnProperty("x"),T=a.hasOwnProperty("y"),C=Tc,I=Ec,R=window;if(c){var O=cE(n),B="clientHeight",U="clientWidth";if(O===gu(n)&&(O=gy(n),Gp(O).position!=="static"&&s==="absolute"&&(B="scrollHeight",U="scrollWidth")),O=O,i===Ec||(i===Tc||i===pd)&&o===AM){I=hd;var Z=p&&O===R&&R.visualViewport?R.visualViewport.height:O[B];b-=Z-r.height,b*=l?1:-1}if(i===Tc||(i===Ec||i===hd)&&o===AM){C=pd;var j=p&&O===R&&R.visualViewport?R.visualViewport.width:O[U];v-=j-r.width,v*=l?1:-1}}var X=Object.assign({position:s},c&&SMe),le=h===!0?MMe({x:v,y:b},gu(n)):{x:v,y:b};if(v=le.x,b=le.y,l){var me;return Object.assign({},X,(me={},me[I]=T?"0":"",me[C]=w?"0":"",me.transform=(R.devicePixelRatio||1)<=1?"translate("+v+"px, "+b+"px)":"translate3d("+v+"px, "+b+"px, 0)",me))}return Object.assign({},X,(e={},e[I]=T?b+"px":"",e[C]=w?v+"px":"",e.transform="",e))}function EMe(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,a=o===void 0?!0:o,s=n.roundOffsets,l=s===void 0?!0:s,c={placement:xh(e.placement),variation:Sb(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,w9(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,w9(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const TMe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:EMe,data:{}};var NT={passive:!0};function CMe(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=i===void 0?!0:i,a=r.resize,s=a===void 0?!0:a,l=gu(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach(function(h){h.addEventListener("scroll",n.update,NT)}),s&&l.addEventListener("resize",n.update,NT),function(){o&&c.forEach(function(h){h.removeEventListener("scroll",n.update,NT)}),s&&l.removeEventListener("resize",n.update,NT)}}const AMe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:CMe,data:{}};var PMe={left:"right",right:"left",bottom:"top",top:"bottom"};function PA(t){return t.replace(/left|right|bottom|top/g,function(e){return PMe[e]})}var kMe={start:"end",end:"start"};function S9(t){return t.replace(/start|end/g,function(e){return kMe[e]})}function V$(t){var e=gu(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function W$(t){return wb(gy(t)).left+V$(t).scrollLeft}function IMe(t,e){var n=gu(t),r=gy(t),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;var c=kne();(c||!c&&e==="fixed")&&(s=i.offsetLeft,l=i.offsetTop)}return{width:o,height:a,x:s+W$(t),y:l}}function RMe(t){var e,n=gy(t),r=V$(t),i=(e=t.ownerDocument)==null?void 0:e.body,o=d0(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=d0(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+W$(t),l=-r.scrollTop;return Gp(i||n).direction==="rtl"&&(s+=d0(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}function H$(t){var e=Gp(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Dne(t){return["html","body","#document"].indexOf(Ch(t))>=0?t.ownerDocument.body:od(t)&&H$(t)?t:Dne(aR(t))}function NS(t,e){var n;e===void 0&&(e=[]);var r=Dne(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),o=gu(r),a=i?[o].concat(o.visualViewport||[],H$(r)?r:[]):r,s=e.concat(a);return i?s:s.concat(NS(aR(a)))}function gF(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function OMe(t,e){var n=wb(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function M9(t,e,n){return e===Ane?gF(IMe(t,n)):R0(e)?OMe(e,n):gF(RMe(gy(t)))}function LMe(t){var e=NS(aR(t)),n=["absolute","fixed"].indexOf(Gp(t).position)>=0,r=n&&od(t)?cE(t):t;return R0(r)?e.filter(function(i){return R0(i)&&Ine(i,r)&&Ch(i)!=="body"}):[]}function DMe(t,e,n,r){var i=e==="clippingParents"?LMe(t):[].concat(e),o=[].concat(i,[n]),a=o[0],s=o.reduce(function(l,c){var h=M9(t,c,r);return l.top=d0(h.top,l.top),l.right=zP(h.right,l.right),l.bottom=zP(h.bottom,l.bottom),l.left=d0(h.left,l.left),l},M9(t,a,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Nne(t){var e=t.reference,n=t.element,r=t.placement,i=r?xh(r):null,o=r?Sb(r):null,a=e.x+e.width/2-n.width/2,s=e.y+e.height/2-n.height/2,l;switch(i){case Ec:l={x:a,y:e.y-n.height};break;case hd:l={x:a,y:e.y+e.height};break;case pd:l={x:e.x+e.width,y:s};break;case Tc:l={x:e.x-n.width,y:s};break;default:l={x:e.x,y:e.y}}var c=i?U$(i):null;if(c!=null){var h=c==="y"?"height":"width";switch(o){case _b:l[c]=l[c]-(e[h]/2-n[h]/2);break;case AM:l[c]=l[c]+(e[h]/2-n[h]/2);break}}return l}function PM(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,o=n.strategy,a=o===void 0?t.strategy:o,s=n.boundary,l=s===void 0?tMe:s,c=n.rootBoundary,h=c===void 0?Ane:c,p=n.elementContext,g=p===void 0?Tw:p,v=n.altBoundary,x=v===void 0?!1:v,b=n.padding,M=b===void 0?0:b,w=One(typeof M!="number"?M:Lne(M,lE)),T=g===Tw?nMe:Tw,C=t.rects.popper,I=t.elements[x?T:g],R=DMe(R0(I)?I:I.contextElement||gy(t.elements.popper),l,h,a),O=wb(t.elements.reference),B=Nne({reference:O,element:C,strategy:"absolute",placement:i}),U=gF(Object.assign({},C,B)),Z=g===Tw?U:O,j={top:R.top-Z.top+w.top,bottom:Z.bottom-R.bottom+w.bottom,left:R.left-Z.left+w.left,right:Z.right-R.right+w.right},X=t.modifiersData.offset;if(g===Tw&&X){var le=X[i];Object.keys(j).forEach(function(me){var ie=[pd,hd].indexOf(me)>=0?1:-1,ce=[Ec,hd].indexOf(me)>=0?"y":"x";j[me]+=le[ce]*ie})}return j}function NMe(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?Pne:l,h=Sb(r),p=h?s?_9:_9.filter(function(x){return Sb(x)===h}):lE,g=p.filter(function(x){return c.indexOf(x)>=0});g.length===0&&(g=p);var v=g.reduce(function(x,b){return x[b]=PM(t,{placement:b,boundary:i,rootBoundary:o,padding:a})[xh(b)],x},{});return Object.keys(v).sort(function(x,b){return v[x]-v[b]})}function zMe(t){if(xh(t)===B$)return[];var e=PA(t);return[S9(t),e,S9(e)]}function FMe(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,a=n.altAxis,s=a===void 0?!0:a,l=n.fallbackPlacements,c=n.padding,h=n.boundary,p=n.rootBoundary,g=n.altBoundary,v=n.flipVariations,x=v===void 0?!0:v,b=n.allowedAutoPlacements,M=e.options.placement,w=xh(M),T=w===M,C=l||(T||!x?[PA(M)]:zMe(M)),I=[M].concat(C).reduce(function(Be,st){return Be.concat(xh(st)===B$?NMe(e,{placement:st,boundary:h,rootBoundary:p,padding:c,flipVariations:x,allowedAutoPlacements:b}):st)},[]),R=e.rects.reference,O=e.rects.popper,B=new Map,U=!0,Z=I[0],j=0;j<I.length;j++){var X=I[j],le=xh(X),me=Sb(X)===_b,ie=[Ec,hd].indexOf(le)>=0,ce=ie?"width":"height",fe=PM(e,{placement:X,boundary:h,rootBoundary:p,altBoundary:g,padding:c}),xe=ie?me?pd:Tc:me?hd:Ec;R[ce]>O[ce]&&(xe=PA(xe));var te=PA(xe),he=[];if(o&&he.push(fe[le]<=0),s&&he.push(fe[xe]<=0,fe[te]<=0),he.every(function(Be){return Be})){Z=X,U=!1;break}B.set(X,he)}if(U)for(var ve=x?3:1,ze=function(st){var ct=I.find(function(Dt){var zt=B.get(Dt);if(zt)return zt.slice(0,st).every(function(Fe){return Fe})});if(ct)return Z=ct,"break"},Ue=ve;Ue>0;Ue--){var rt=ze(Ue);if(rt==="break")break}e.placement!==Z&&(e.modifiersData[r]._skip=!0,e.placement=Z,e.reset=!0)}}const BMe={name:"flip",enabled:!0,phase:"main",fn:FMe,requiresIfExists:["offset"],data:{_skip:!1}};function E9(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function T9(t){return[Ec,pd,hd,Tc].some(function(e){return t[e]>=0})}function $Me(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,a=PM(e,{elementContext:"reference"}),s=PM(e,{altBoundary:!0}),l=E9(a,r),c=E9(s,i,o),h=T9(l),p=T9(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":p})}const jMe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:$Me};function UMe(t,e,n){var r=xh(t),i=[Tc,Ec].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[Tc,pd].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}function VMe(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=i===void 0?[0,0]:i,a=Pne.reduce(function(h,p){return h[p]=UMe(p,e.rects,o),h},{}),s=a[e.placement],l=s.x,c=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=a}const WMe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:VMe};function HMe(t){var e=t.state,n=t.name;e.modifiersData[n]=Nne({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const GMe={name:"popperOffsets",enabled:!0,phase:"read",fn:HMe,data:{}};function qMe(t){return t==="x"?"y":"x"}function YMe(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=i===void 0?!0:i,a=n.altAxis,s=a===void 0?!1:a,l=n.boundary,c=n.rootBoundary,h=n.altBoundary,p=n.padding,g=n.tether,v=g===void 0?!0:g,x=n.tetherOffset,b=x===void 0?0:x,M=PM(e,{boundary:l,rootBoundary:c,padding:p,altBoundary:h}),w=xh(e.placement),T=Sb(e.placement),C=!T,I=U$(w),R=qMe(I),O=e.modifiersData.popperOffsets,B=e.rects.reference,U=e.rects.popper,Z=typeof b=="function"?b(Object.assign({},e.rects,{placement:e.placement})):b,j=typeof Z=="number"?{mainAxis:Z,altAxis:Z}:Object.assign({mainAxis:0,altAxis:0},Z),X=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,le={x:0,y:0};if(O){if(o){var me,ie=I==="y"?Ec:Tc,ce=I==="y"?hd:pd,fe=I==="y"?"height":"width",xe=O[I],te=xe+M[ie],he=xe-M[ce],ve=v?-U[fe]/2:0,ze=T===_b?B[fe]:U[fe],Ue=T===_b?-U[fe]:-B[fe],rt=e.elements.arrow,Be=v&&rt?j$(rt):{width:0,height:0},st=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Rne(),ct=st[ie],Dt=st[ce],zt=DS(0,B[fe],Be[fe]),Fe=C?B[fe]/2-ve-zt-ct-j.mainAxis:ze-zt-ct-j.mainAxis,lt=C?-B[fe]/2+ve+zt+Dt+j.mainAxis:Ue+zt+Dt+j.mainAxis,Qe=e.elements.arrow&&cE(e.elements.arrow),ge=Qe?I==="y"?Qe.clientTop||0:Qe.clientLeft||0:0,et=(me=X==null?void 0:X[I])!=null?me:0,ot=xe+Fe-et-ge,Tt=xe+lt-et,Ct=DS(v?zP(te,ot):te,xe,v?d0(he,Tt):he);O[I]=Ct,le[I]=Ct-xe}if(s){var Bt,Gt=I==="x"?Ec:Tc,sn=I==="x"?hd:pd,Je=O[R],Ce=R==="y"?"height":"width",_e=Je+M[Gt],ht=Je-M[sn],dt=[Ec,Tc].indexOf(w)!==-1,Wt=(Bt=X==null?void 0:X[R])!=null?Bt:0,jt=dt?_e:Je-B[Ce]-U[Ce]-Wt+j.altAxis,Sn=dt?Je+B[Ce]+U[Ce]-Wt-j.altAxis:ht,cn=v&&dt?vMe(jt,Je,Sn):DS(v?jt:_e,Je,v?Sn:ht);O[R]=cn,le[R]=cn-Je}e.modifiersData[r]=le}}const XMe={name:"preventOverflow",enabled:!0,phase:"main",fn:YMe,requiresIfExists:["offset"]};function KMe(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function ZMe(t){return t===gu(t)||!od(t)?V$(t):KMe(t)}function JMe(t){var e=t.getBoundingClientRect(),n=bb(e.width)/t.offsetWidth||1,r=bb(e.height)/t.offsetHeight||1;return n!==1||r!==1}function QMe(t,e,n){n===void 0&&(n=!1);var r=od(e),i=od(e)&&JMe(e),o=gy(e),a=wb(t,i,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Ch(e)!=="body"||H$(o))&&(s=ZMe(e)),od(e)?(l=wb(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=W$(o))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function e2e(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function i(o){n.add(o.name);var a=[].concat(o.requires||[],o.requiresIfExists||[]);a.forEach(function(s){if(!n.has(s)){var l=e.get(s);l&&i(l)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||i(o)}),r}function t2e(t){var e=e2e(t);return fMe.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function n2e(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function r2e(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var C9={placement:"bottom",modifiers:[],strategy:"absolute"};function A9(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function i2e(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,o=i===void 0?C9:i;return function(s,l,c){c===void 0&&(c=o);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},C9,o),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},p=[],g=!1,v={state:h,setOptions:function(w){var T=typeof w=="function"?w(h.options):w;b(),h.options=Object.assign({},o,h.options,T),h.scrollParents={reference:R0(s)?NS(s):s.contextElement?NS(s.contextElement):[],popper:NS(l)};var C=t2e(r2e([].concat(r,h.options.modifiers)));return h.orderedModifiers=C.filter(function(I){return I.enabled}),x(),v.update()},forceUpdate:function(){if(!g){var w=h.elements,T=w.reference,C=w.popper;if(A9(T,C)){h.rects={reference:QMe(T,cE(C),h.options.strategy==="fixed"),popper:j$(C)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(j){return h.modifiersData[j.name]=Object.assign({},j.data)});for(var I=0;I<h.orderedModifiers.length;I++){if(h.reset===!0){h.reset=!1,I=-1;continue}var R=h.orderedModifiers[I],O=R.fn,B=R.options,U=B===void 0?{}:B,Z=R.name;typeof O=="function"&&(h=O({state:h,options:U,name:Z,instance:v})||h)}}}},update:n2e(function(){return new Promise(function(M){v.forceUpdate(),M(h)})}),destroy:function(){b(),g=!0}};if(!A9(s,l))return v;v.setOptions(c).then(function(M){!g&&c.onFirstUpdate&&c.onFirstUpdate(M)});function x(){h.orderedModifiers.forEach(function(M){var w=M.name,T=M.options,C=T===void 0?{}:T,I=M.effect;if(typeof I=="function"){var R=I({state:h,name:w,instance:v,options:C}),O=function(){};p.push(R||O)}})}function b(){p.forEach(function(M){return M()}),p=[]}return v}}var o2e=[AMe,GMe,TMe,mMe,WMe,BMe,XMe,wMe,jMe],s2e=i2e({defaultModifiers:o2e});const zne="Popper";function a2e(t){return Tne(zne,t)}DSe(zne,["root"]);const l2e=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],c2e=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function u2e(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function yF(t){return typeof t=="function"?t():t}function d2e(t){return t.nodeType!==void 0}const f2e=()=>Hn({root:["root"]},uwe(a2e)),h2e={},p2e=W.forwardRef(function(e,n){var r;const{anchorEl:i,children:o,direction:a,disablePortal:s,modifiers:l,open:c,placement:h,popperOptions:p,popperRef:g,slotProps:v={},slots:x={},TransitionProps:b}=e,M=on(e,l2e),w=W.useRef(null),T=Lo(w,n),C=W.useRef(null),I=Lo(C,g),R=W.useRef(I);mu(()=>{R.current=I},[I]),W.useImperativeHandle(g,()=>C.current,[]);const O=u2e(h,a),[B,U]=W.useState(O),[Z,j]=W.useState(yF(i));W.useEffect(()=>{C.current&&C.current.forceUpdate()}),W.useEffect(()=>{i&&j(yF(i))},[i]),mu(()=>{if(!Z||!c)return;const ce=te=>{U(te.placement)};let fe=[{name:"preventOverflow",options:{altBoundary:s}},{name:"flip",options:{altBoundary:s}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:te})=>{ce(te)}}];l!=null&&(fe=fe.concat(l)),p&&p.modifiers!=null&&(fe=fe.concat(p.modifiers));const xe=s2e(Z,w.current,de({placement:O},p,{modifiers:fe}));return R.current(xe),()=>{xe.destroy(),R.current(null)}},[Z,s,l,c,p,O]);const X={placement:B};b!==null&&(X.TransitionProps=b);const le=f2e(),me=(r=x.root)!=null?r:"div",ie=Pc({elementType:me,externalSlotProps:v.root,externalForwardedProps:M,additionalProps:{role:"tooltip",ref:T},ownerState:e,className:le.root});return F.jsx(me,de({},ie,{children:typeof o=="function"?o(X):o}))}),m2e=W.forwardRef(function(e,n){const{anchorEl:r,children:i,container:o,direction:a="ltr",disablePortal:s=!1,keepMounted:l=!1,modifiers:c,open:h,placement:p="bottom",popperOptions:g=h2e,popperRef:v,style:x,transition:b=!1,slotProps:M={},slots:w={}}=e,T=on(e,c2e),[C,I]=W.useState(!0),R=()=>{I(!1)},O=()=>{I(!0)};if(!l&&!h&&(!b||C))return null;let B;if(o)B=o;else if(r){const j=yF(r);B=j&&d2e(j)?Os(j).body:Os(null).body}const U=!h&&l&&(!b||C)?"none":void 0,Z=b?{in:h,onEnter:R,onExited:O}:void 0;return F.jsx(Cne,{disablePortal:s,container:B,children:F.jsx(p2e,de({anchorEl:r,direction:a,disablePortal:s,modifiers:c,ref:n,open:b?!C:h,placement:p,popperOptions:g,popperRef:v,slotProps:M,slots:w},T,{style:de({position:"fixed",top:0,left:0,display:U},x),TransitionProps:Z,children:i}))})});function g2e(t={}){const{autoHideDuration:e=null,disableWindowBlurListener:n=!1,onClose:r,open:i,resumeHideDuration:o}=t,a=Pg();W.useEffect(()=>{if(!i)return;function w(T){T.defaultPrevented||(T.key==="Escape"||T.key==="Esc")&&(r==null||r(T,"escapeKeyDown"))}return document.addEventListener("keydown",w),()=>{document.removeEventListener("keydown",w)}},[i,r]);const s=Wl((w,T)=>{r==null||r(w,T)}),l=Wl(w=>{!r||w==null||a.start(w,()=>{s(null,"timeout")})});W.useEffect(()=>(i&&l(e),a.clear),[i,e,l,a]);const c=w=>{r==null||r(w,"clickaway")},h=a.clear,p=W.useCallback(()=>{e!=null&&l(o??e*.5)},[e,o,l]),g=w=>T=>{const C=w.onBlur;C==null||C(T),p()},v=w=>T=>{const C=w.onFocus;C==null||C(T),h()},x=w=>T=>{const C=w.onMouseEnter;C==null||C(T),h()},b=w=>T=>{const C=w.onMouseLeave;C==null||C(T),p()};return W.useEffect(()=>{if(!n&&i)return window.addEventListener("focus",p),window.addEventListener("blur",h),()=>{window.removeEventListener("focus",p),window.removeEventListener("blur",h)}},[n,i,p,h]),{getRootProps:(w={})=>{const T=de({},DP(t),DP(w));return de({role:"presentation"},w,T,{onBlur:g(T),onFocus:v(T),onMouseEnter:x(T),onMouseLeave:b(T)})},onClickAway:c}}const y2e=["onChange","maxRows","minRows","style","value"];function zT(t){return parseInt(t,10)||0}const v2e={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function x2e(t){return t==null||Object.keys(t).length===0||t.outerHeightStyle===0&&!t.overflowing}const _2e=W.forwardRef(function(e,n){const{onChange:r,maxRows:i,minRows:o=1,style:a,value:s}=e,l=on(e,y2e),{current:c}=W.useRef(s!=null),h=W.useRef(null),p=Lo(n,h),g=W.useRef(null),v=W.useCallback(()=>{const M=h.current,T=Th(M).getComputedStyle(M);if(T.width==="0px")return{outerHeightStyle:0,overflowing:!1};const C=g.current;C.style.width=T.width,C.value=M.value||e.placeholder||"x",C.value.slice(-1)===`
`&&(C.value+=" ");const I=T.boxSizing,R=zT(T.paddingBottom)+zT(T.paddingTop),O=zT(T.borderBottomWidth)+zT(T.borderTopWidth),B=C.scrollHeight;C.value="x";const U=C.scrollHeight;let Z=B;o&&(Z=Math.max(Number(o)*U,Z)),i&&(Z=Math.min(Number(i)*U,Z)),Z=Math.max(Z,U);const j=Z+(I==="border-box"?R+O:0),X=Math.abs(Z-B)<=1;return{outerHeightStyle:j,overflowing:X}},[i,o,e.placeholder]),x=W.useCallback(()=>{const M=v();if(x2e(M))return;const w=h.current;w.style.height=`${M.outerHeightStyle}px`,w.style.overflow=M.overflowing?"hidden":""},[v]);mu(()=>{const M=()=>{x()};let w;const T=rE(M),C=h.current,I=Th(C);I.addEventListener("resize",T);let R;return typeof ResizeObserver<"u"&&(R=new ResizeObserver(M),R.observe(C)),()=>{T.clear(),cancelAnimationFrame(w),I.removeEventListener("resize",T),R&&R.disconnect()}},[v,x]),mu(()=>{x()});const b=M=>{c||x(),r&&r(M)};return F.jsxs(W.Fragment,{children:[F.jsx("textarea",de({value:s,onChange:b,ref:p,rows:o},l)),F.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:g,tabIndex:-1,style:de({},v2e.shadow,a,{paddingTop:0,paddingBottom:0})})]})});var G$={};Object.defineProperty(G$,"__esModule",{value:!0});var Fne=G$.default=void 0,b2e=S2e(W),w2e=gne;function Bne(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(Bne=function(r){return r?n:e})(t)}function S2e(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=Bne(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}function M2e(t){return Object.keys(t).length===0}function E2e(t=null){const e=b2e.useContext(w2e.ThemeContext);return!e||M2e(e)?t:e}Fne=G$.default=E2e;const T2e=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],C2e=tn(m2e,{name:"MuiPopper",slot:"Root",overridesResolver:(t,e)=>e.root})({}),A2e=W.forwardRef(function(e,n){var r;const i=Fne(),o=Jn({props:e,name:"MuiPopper"}),{anchorEl:a,component:s,components:l,componentsProps:c,container:h,disablePortal:p,keepMounted:g,modifiers:v,open:x,placement:b,popperOptions:M,popperRef:w,transition:T,slots:C,slotProps:I}=o,R=on(o,T2e),O=(r=C==null?void 0:C.root)!=null?r:l==null?void 0:l.Root,B=de({anchorEl:a,container:h,disablePortal:p,keepMounted:g,modifiers:v,open:x,placement:b,popperOptions:M,popperRef:w,transition:T},R);return F.jsx(C2e,de({as:s,direction:i==null?void 0:i.direction,slots:{root:O},slotProps:I??c},B,{ref:n}))}),$ne=A2e;function yy({props:t,states:e,muiFormControl:n}){return e.reduce((r,i)=>(r[i]=t[i],n&&typeof t[i]>"u"&&(r[i]=n[i]),r),{})}const P2e=W.createContext(void 0),lR=P2e;function Rh(){return W.useContext(lR)}function jne(t){return F.jsx(x_e,de({},t,{defaultTheme:oR,themeId:k0}))}function P9(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function FP(t,e=!1){return t&&(P9(t.value)&&t.value!==""||e&&P9(t.defaultValue)&&t.defaultValue!=="")}function k2e(t){return t.startAdornment}function I2e(t){return Vn("MuiInputBase",t)}const R2e=Wn("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Mb=R2e,O2e=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],cR=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,n.size==="small"&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e[`color${en(n.color)}`],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},uR=(t,e)=>{const{ownerState:n}=t;return[e.input,n.size==="small"&&e.inputSizeSmall,n.multiline&&e.inputMultiline,n.type==="search"&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},L2e=t=>{const{classes:e,color:n,disabled:r,error:i,endAdornment:o,focused:a,formControl:s,fullWidth:l,hiddenLabel:c,multiline:h,readOnly:p,size:g,startAdornment:v,type:x}=t,b={root:["root",`color${en(n)}`,r&&"disabled",i&&"error",l&&"fullWidth",a&&"focused",s&&"formControl",g&&g!=="medium"&&`size${en(g)}`,h&&"multiline",v&&"adornedStart",o&&"adornedEnd",c&&"hiddenLabel",p&&"readOnly"],input:["input",r&&"disabled",x==="search"&&"inputTypeSearch",h&&"inputMultiline",g==="small"&&"inputSizeSmall",c&&"inputHiddenLabel",v&&"inputAdornedStart",o&&"inputAdornedEnd",p&&"readOnly"]};return Hn(b,I2e,e)},dR=tn("div",{name:"MuiInputBase",slot:"Root",overridesResolver:cR})(({theme:t,ownerState:e})=>de({},t.typography.body1,{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Mb.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"}},e.multiline&&de({padding:"4px 0 5px"},e.size==="small"&&{paddingTop:1}),e.fullWidth&&{width:"100%"})),fR=tn("input",{name:"MuiInputBase",slot:"Input",overridesResolver:uR})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light",r=de({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),i={opacity:"0 !important"},o=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return de({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Mb.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus:-ms-input-placeholder":o,"&:focus::-ms-input-placeholder":o},[`&.${Mb.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},e.size==="small"&&{paddingTop:1},e.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},e.type==="search"&&{MozAppearance:"textfield"})}),D2e=F.jsx(jne,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),N2e=W.forwardRef(function(e,n){var r;const i=Jn({props:e,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:a,autoFocus:s,className:l,components:c={},componentsProps:h={},defaultValue:p,disabled:g,disableInjectingGlobalStyles:v,endAdornment:x,fullWidth:b=!1,id:M,inputComponent:w="input",inputProps:T={},inputRef:C,maxRows:I,minRows:R,multiline:O=!1,name:B,onBlur:U,onChange:Z,onClick:j,onFocus:X,onKeyDown:le,onKeyUp:me,placeholder:ie,readOnly:ce,renderSuffix:fe,rows:xe,slotProps:te={},slots:he={},startAdornment:ve,type:ze="text",value:Ue}=i,rt=on(i,O2e),Be=T.value!=null?T.value:Ue,{current:st}=W.useRef(Be!=null),ct=W.useRef(),Dt=W.useCallback(cn=>{},[]),zt=Lo(ct,C,T.ref,Dt),[Fe,lt]=W.useState(!1),Qe=Rh(),ge=yy({props:i,muiFormControl:Qe,states:["color","disabled","error","hiddenLabel","size","required","filled"]});ge.focused=Qe?Qe.focused:Fe,W.useEffect(()=>{!Qe&&g&&Fe&&(lt(!1),U&&U())},[Qe,g,Fe,U]);const et=Qe&&Qe.onFilled,ot=Qe&&Qe.onEmpty,Tt=W.useCallback(cn=>{FP(cn)?et&&et():ot&&ot()},[et,ot]);mu(()=>{st&&Tt({value:Be})},[Be,Tt,st]);const Ct=cn=>{if(ge.disabled){cn.stopPropagation();return}X&&X(cn),T.onFocus&&T.onFocus(cn),Qe&&Qe.onFocus?Qe.onFocus(cn):lt(!0)},Bt=cn=>{U&&U(cn),T.onBlur&&T.onBlur(cn),Qe&&Qe.onBlur?Qe.onBlur(cn):lt(!1)},Gt=(cn,...Rt)=>{if(!st){const nn=cn.target||ct.current;if(nn==null)throw new Error(P0(1));Tt({value:nn.value})}T.onChange&&T.onChange(cn,...Rt),Z&&Z(cn,...Rt)};W.useEffect(()=>{Tt(ct.current)},[]);const sn=cn=>{ct.current&&cn.currentTarget===cn.target&&ct.current.focus(),j&&j(cn)};let Je=w,Ce=T;O&&Je==="input"&&(xe?Ce=de({type:void 0,minRows:xe,maxRows:xe},Ce):Ce=de({type:void 0,maxRows:I,minRows:R},Ce),Je=_2e);const _e=cn=>{Tt(cn.animationName==="mui-auto-fill-cancel"?ct.current:{value:"x"})};W.useEffect(()=>{Qe&&Qe.setAdornedStart(!!ve)},[Qe,ve]);const ht=de({},i,{color:ge.color||"primary",disabled:ge.disabled,endAdornment:x,error:ge.error,focused:ge.focused,formControl:Qe,fullWidth:b,hiddenLabel:ge.hiddenLabel,multiline:O,size:ge.size,startAdornment:ve,type:ze}),dt=L2e(ht),Wt=he.root||c.Root||dR,jt=te.root||h.root||{},Sn=he.input||c.Input||fR;return Ce=de({},Ce,(r=te.input)!=null?r:h.input),F.jsxs(W.Fragment,{children:[!v&&D2e,F.jsxs(Wt,de({},jt,!LP(Wt)&&{ownerState:de({},ht,jt.ownerState)},{ref:n,onClick:sn},rt,{className:Kt(dt.root,jt.className,l,ce&&"MuiInputBase-readOnly"),children:[ve,F.jsx(lR.Provider,{value:null,children:F.jsx(Sn,de({ownerState:ht,"aria-invalid":ge.error,"aria-describedby":o,autoComplete:a,autoFocus:s,defaultValue:p,disabled:ge.disabled,id:M,onAnimationStart:_e,name:B,placeholder:ie,readOnly:ce,required:ge.required,rows:xe,value:Be,onKeyDown:le,onKeyUp:me,type:ze},Ce,!LP(Sn)&&{as:Je,ownerState:de({},ht,Ce.ownerState)},{ref:zt,className:Kt(dt.input,Ce.className,ce&&"MuiInputBase-readOnly"),onBlur:Bt,onChange:Gt,onFocus:Ct}))}),x,fe?fe(de({},ge,{startAdornment:ve})):null]}))]})}),q$=N2e;function z2e(t){return Vn("MuiInput",t)}const F2e=de({},Mb,Wn("MuiInput",["root","underline","input"])),Cw=F2e;function B2e(t){return Vn("MuiOutlinedInput",t)}const $2e=de({},Mb,Wn("MuiOutlinedInput",["root","notchedOutline","input"])),Qm=$2e;function j2e(t){return Vn("MuiFilledInput",t)}const U2e=de({},Mb,Wn("MuiFilledInput",["root","underline","input"])),hv=U2e,V2e=$a(F.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),W2e=$a(F.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function H2e(t){return Vn("MuiAvatar",t)}Wn("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const G2e=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],q2e=F$(),Y2e=t=>{const{classes:e,variant:n,colorDefault:r}=t;return Hn({root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]},H2e,e)},X2e=tn("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],n.colorDefault&&e.colorDefault]}})(({theme:t})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:de({color:(t.vars||t).palette.background.default},t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:de({backgroundColor:t.palette.grey[400]},t.applyStyles("dark",{backgroundColor:t.palette.grey[600]})))}]})),K2e=tn("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(t,e)=>e.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Z2e=tn(W2e,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(t,e)=>e.fallback})({width:"75%",height:"75%"});function J2e({crossOrigin:t,referrerPolicy:e,src:n,srcSet:r}){const[i,o]=W.useState(!1);return W.useEffect(()=>{if(!n&&!r)return;o(!1);let a=!0;const s=new Image;return s.onload=()=>{a&&o("loaded")},s.onerror=()=>{a&&o("error")},s.crossOrigin=t,s.referrerPolicy=e,s.src=n,r&&(s.srcset=r),()=>{a=!1}},[t,e,n,r]),i}const Q2e=W.forwardRef(function(e,n){const r=q2e({props:e,name:"MuiAvatar"}),{alt:i,children:o,className:a,component:s="div",slots:l={},slotProps:c={},imgProps:h,sizes:p,src:g,srcSet:v,variant:x="circular"}=r,b=on(r,G2e);let M=null;const w=J2e(de({},h,{src:g,srcSet:v})),T=g||v,C=T&&w!=="error",I=de({},r,{colorDefault:!C,component:s,variant:x}),R=Y2e(I),[O,B]=NP("img",{className:R.img,elementType:K2e,externalForwardedProps:{slots:l,slotProps:{img:de({},h,c.img)}},additionalProps:{alt:i,src:g,srcSet:v,sizes:p},ownerState:I});return C?M=F.jsx(O,de({},B)):o||o===0?M=o:T&&i?M=i[0]:M=F.jsx(Z2e,{ownerState:I,className:R.fallback}),F.jsx(X2e,de({as:s,ownerState:I,className:Kt(R.root,a),ref:n},b,{children:M}))}),eEe=Q2e,tEe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],nEe={entering:{opacity:1},entered:{opacity:1}},rEe=W.forwardRef(function(e,n){const r=xd(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:a=!0,children:s,easing:l,in:c,onEnter:h,onEntered:p,onEntering:g,onExit:v,onExited:x,onExiting:b,style:M,timeout:w=i,TransitionComponent:T=D$}=e,C=on(e,tEe),I=W.useRef(null),R=Lo(I,s.ref,n),O=ie=>ce=>{if(ie){const fe=I.current;ce===void 0?ie(fe):ie(fe,ce)}},B=O(g),U=O((ie,ce)=>{_ne(ie);const fe=xb({style:M,timeout:w,easing:l},{mode:"enter"});ie.style.webkitTransition=r.transitions.create("opacity",fe),ie.style.transition=r.transitions.create("opacity",fe),h&&h(ie,ce)}),Z=O(p),j=O(b),X=O(ie=>{const ce=xb({style:M,timeout:w,easing:l},{mode:"exit"});ie.style.webkitTransition=r.transitions.create("opacity",ce),ie.style.transition=r.transitions.create("opacity",ce),v&&v(ie)}),le=O(x),me=ie=>{o&&o(I.current,ie)};return F.jsx(T,de({appear:a,in:c,nodeRef:I,onEnter:U,onEntered:Z,onEntering:B,onExit:X,onExited:le,onExiting:j,addEndListener:me,timeout:w},C,{children:(ie,ce)=>W.cloneElement(s,de({style:de({opacity:0,visibility:ie==="exited"&&!c?"hidden":void 0},nEe[ie],M,s.props.style),ref:R},ce))}))}),Une=rEe;function iEe(t){return Vn("MuiBackdrop",t)}Wn("MuiBackdrop",["root","invisible"]);const oEe=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],sEe=t=>{const{classes:e,invisible:n}=t;return Hn({root:["root",n&&"invisible"]},iEe,e)},aEe=tn("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})(({ownerState:t})=>de({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})),lEe=W.forwardRef(function(e,n){var r,i,o;const a=Jn({props:e,name:"MuiBackdrop"}),{children:s,className:l,component:c="div",components:h={},componentsProps:p={},invisible:g=!1,open:v,slotProps:x={},slots:b={},TransitionComponent:M=Une,transitionDuration:w}=a,T=on(a,oEe),C=de({},a,{component:c,invisible:g}),I=sEe(C),R=(r=x.root)!=null?r:p.root;return F.jsx(M,de({in:v,timeout:w},T,{children:F.jsx(aEe,de({"aria-hidden":!0},R,{as:(i=(o=b.root)!=null?o:h.Root)!=null?i:c,className:Kt(I.root,l,R==null?void 0:R.className),ownerState:de({},C,R==null?void 0:R.ownerState),classes:I,ref:n,children:s}))}))}),cEe=lEe;function uEe(t){return Vn("MuiBadge",t)}const dEe=Wn("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),eg=dEe,fEe=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],RD=10,OD=4,hEe=F$(),pEe=t=>{const{color:e,anchorOrigin:n,invisible:r,overlap:i,variant:o,classes:a={}}=t,s={root:["root"],badge:["badge",o,r&&"invisible",`anchorOrigin${en(n.vertical)}${en(n.horizontal)}`,`anchorOrigin${en(n.vertical)}${en(n.horizontal)}${en(i)}`,`overlap${en(i)}`,e!=="default"&&`color${en(e)}`]};return Hn(s,uEe,a)},mEe=tn("span",{name:"MuiBadge",slot:"Root",overridesResolver:(t,e)=>e.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),gEe=tn("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.badge,e[n.variant],e[`anchorOrigin${en(n.anchorOrigin.vertical)}${en(n.anchorOrigin.horizontal)}${en(n.overlap)}`],n.color!=="default"&&e[`color${en(n.color)}`],n.invisible&&e.invisible]}})(({theme:t})=>{var e;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:RD*2,lineHeight:1,padding:"0 6px",height:RD*2,borderRadius:RD,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen}),variants:[...Object.keys(((e=t.vars)!=null?e:t).palette).filter(n=>{var r,i;return((r=t.vars)!=null?r:t).palette[n].main&&((i=t.vars)!=null?i:t).palette[n].contrastText}).map(n=>({props:{color:n},style:{backgroundColor:(t.vars||t).palette[n].main,color:(t.vars||t).palette[n].contrastText}})),{props:{variant:"dot"},style:{borderRadius:OD,height:OD*2,minWidth:OD*2,padding:0}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${eg.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${eg.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${eg.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${eg.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${eg.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${eg.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${eg.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${eg.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})}}]}}),yEe=W.forwardRef(function(e,n){var r,i,o,a,s,l;const c=hEe({props:e,name:"MuiBadge"}),{anchorOrigin:h={vertical:"top",horizontal:"right"},className:p,component:g,components:v={},componentsProps:x={},children:b,overlap:M="rectangular",color:w="default",invisible:T=!1,max:C=99,badgeContent:I,slots:R,slotProps:O,showZero:B=!1,variant:U="standard"}=c,Z=on(c,fEe),{badgeContent:j,invisible:X,max:le,displayValue:me}=RSe({max:C,invisible:T,badgeContent:I,showZero:B}),ie=one({anchorOrigin:h,color:w,overlap:M,variant:U,badgeContent:I}),ce=X||j==null&&U!=="dot",{color:fe=w,overlap:xe=M,anchorOrigin:te=h,variant:he=U}=ce?ie:c,ve=he!=="dot"?me:void 0,ze=de({},c,{badgeContent:j,invisible:ce,max:le,displayValue:ve,showZero:B,anchorOrigin:te,color:fe,overlap:xe,variant:he}),Ue=pEe(ze),rt=(r=(i=R==null?void 0:R.root)!=null?i:v.Root)!=null?r:mEe,Be=(o=(a=R==null?void 0:R.badge)!=null?a:v.Badge)!=null?o:gEe,st=(s=O==null?void 0:O.root)!=null?s:x.root,ct=(l=O==null?void 0:O.badge)!=null?l:x.badge,Dt=Pc({elementType:rt,externalSlotProps:st,externalForwardedProps:Z,additionalProps:{ref:n,as:g},ownerState:ze,className:Kt(st==null?void 0:st.className,Ue.root,p)}),zt=Pc({elementType:Be,externalSlotProps:ct,ownerState:ze,className:Kt(Ue.badge,ct==null?void 0:ct.className)});return F.jsxs(rt,de({},Dt,{children:[b,F.jsx(Be,de({},zt,{children:ve}))]}))}),vEe=yEe;function xEe(t){return Vn("MuiBottomNavigation",t)}Wn("MuiBottomNavigation",["root"]);const _Ee=["children","className","component","onChange","showLabels","value"],bEe=t=>{const{classes:e}=t;return Hn({root:["root"]},xEe,e)},wEe=tn("div",{name:"MuiBottomNavigation",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({display:"flex",justifyContent:"center",height:56,backgroundColor:(t.vars||t).palette.background.paper})),SEe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiBottomNavigation"}),{children:i,className:o,component:a="div",onChange:s,showLabels:l=!1,value:c}=r,h=on(r,_Ee),p=de({},r,{component:a,showLabels:l}),g=bEe(p);return F.jsx(wEe,de({as:a,className:Kt(g.root,o),ref:n,ownerState:p},h,{children:W.Children.map(i,(v,x)=>{if(!W.isValidElement(v))return null;const b=v.props.value===void 0?x:v.props.value;return W.cloneElement(v,{selected:b===c,showLabel:v.props.showLabel!==void 0?v.props.showLabel:l,value:b,onChange:s})})}))}),MEe=SEe;function EEe(t){return Vn("MuiBottomNavigationAction",t)}const TEe=Wn("MuiBottomNavigationAction",["root","iconOnly","selected","label"]),Vne=TEe,CEe=["className","icon","label","onChange","onClick","selected","showLabel","value"],AEe=t=>{const{classes:e,showLabel:n,selected:r}=t;return Hn({root:["root",!n&&!r&&"iconOnly",r&&"selected"],label:["label",!n&&!r&&"iconOnly",r&&"selected"]},EEe,e)},PEe=tn(om,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.showLabel&&!n.selected&&e.iconOnly]}})(({theme:t,ownerState:e})=>de({transition:t.transitions.create(["color","padding-top"],{duration:t.transitions.duration.short}),padding:"0px 12px",minWidth:80,maxWidth:168,color:(t.vars||t).palette.text.secondary,flexDirection:"column",flex:"1"},!e.showLabel&&!e.selected&&{paddingTop:14},!e.showLabel&&!e.selected&&!e.label&&{paddingTop:0},{[`&.${Vne.selected}`]:{color:(t.vars||t).palette.primary.main}})),kEe=tn("span",{name:"MuiBottomNavigationAction",slot:"Label",overridesResolver:(t,e)=>e.label})(({theme:t,ownerState:e})=>de({fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s"},!e.showLabel&&!e.selected&&{opacity:0,transitionDelay:"0s"},{[`&.${Vne.selected}`]:{fontSize:t.typography.pxToRem(14)}})),IEe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiBottomNavigationAction"}),{className:i,icon:o,label:a,onChange:s,onClick:l,value:c}=r,h=on(r,CEe),p=r,g=AEe(p),v=x=>{s&&s(x,c),l&&l(x)};return F.jsxs(PEe,de({ref:n,className:Kt(g.root,i),focusRipple:!0,onClick:v,ownerState:p},h,{children:[o,F.jsx(kEe,{className:g.label,ownerState:p,children:a})]}))}),FT=IEe,REe=Wn("MuiBox",["root"]),OEe=REe,LEe=L$(),DEe=T_e({themeId:k0,defaultTheme:LEe,defaultClassName:OEe.root,generateClassName:C$.generate}),ws=DEe;function NEe(t){return Vn("MuiButton",t)}const zEe=Wn("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),BT=zEe,FEe=W.createContext({}),Wne=FEe,BEe=W.createContext(void 0),Hne=BEe,$Ee=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],jEe=t=>{const{color:e,disableElevation:n,fullWidth:r,size:i,variant:o,classes:a}=t,s={root:["root",o,`${o}${en(e)}`,`size${en(i)}`,`${o}Size${en(i)}`,`color${en(e)}`,n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${en(i)}`],endIcon:["icon","endIcon",`iconSize${en(i)}`]},l=Hn(s,NEe,a);return de({},a,l)},Gne=t=>de({},t.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},t.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},t.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),UEe=tn(om,{shouldForwardProp:t=>Jl(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${en(n.color)}`],e[`size${en(n.size)}`],e[`${n.variant}Size${en(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})(({theme:t,ownerState:e})=>{var n,r;const i=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],o=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return de({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":de({textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:Ji(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Ji(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${(t.vars||t).palette[e.color].main}`,backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Ji(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:o,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}}),"&:active":de({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[8]}),[`&.${BT.focusVisible}`]:de({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[6]}),[`&.${BT.disabled}`]:de({color:(t.vars||t).palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},e.variant==="contained"&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main,border:t.vars?`1px solid rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${Ji(t.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:t.vars?t.vars.palette.text.primary:(n=(r=t.palette).getContrastText)==null?void 0:n.call(r,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:i,boxShadow:(t.vars||t).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:t})=>t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${BT.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${BT.disabled}`]:{boxShadow:"none"}}),VEe=tn("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,e[`iconSize${en(n.size)}`]]}})(({ownerState:t})=>de({display:"inherit",marginRight:8,marginLeft:-4},t.size==="small"&&{marginLeft:-2},Gne(t))),WEe=tn("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,e[`iconSize${en(n.size)}`]]}})(({ownerState:t})=>de({display:"inherit",marginRight:-4,marginLeft:8},t.size==="small"&&{marginRight:-2},Gne(t))),HEe=W.forwardRef(function(e,n){const r=W.useContext(Wne),i=W.useContext(Hne),o=A$(r,e),a=Jn({props:o,name:"MuiButton"}),{children:s,color:l="primary",component:c="button",className:h,disabled:p=!1,disableElevation:g=!1,disableFocusRipple:v=!1,endIcon:x,focusVisibleClassName:b,fullWidth:M=!1,size:w="medium",startIcon:T,type:C,variant:I="text"}=a,R=on(a,$Ee),O=de({},a,{color:l,component:c,disabled:p,disableElevation:g,disableFocusRipple:v,fullWidth:M,size:w,type:C,variant:I}),B=jEe(O),U=T&&F.jsx(VEe,{className:B.startIcon,ownerState:O,children:T}),Z=x&&F.jsx(WEe,{className:B.endIcon,ownerState:O,children:x}),j=i||"";return F.jsxs(UEe,de({ownerState:O,className:Kt(r.className,B.root,h,j),component:c,disabled:p,focusRipple:!v,focusVisibleClassName:Kt(B.focusVisible,b),ref:n,type:C},R,{classes:B,children:[U,s,Z]}))}),Gr=HEe;function GEe(t){return Vn("MuiButtonGroup",t)}const qEe=Wn("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),Oa=qEe,YEe=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],XEe=(t,e)=>{const{ownerState:n}=t;return[{[`& .${Oa.grouped}`]:e.grouped},{[`& .${Oa.grouped}`]:e[`grouped${en(n.orientation)}`]},{[`& .${Oa.grouped}`]:e[`grouped${en(n.variant)}`]},{[`& .${Oa.grouped}`]:e[`grouped${en(n.variant)}${en(n.orientation)}`]},{[`& .${Oa.grouped}`]:e[`grouped${en(n.variant)}${en(n.color)}`]},{[`& .${Oa.firstButton}`]:e.firstButton},{[`& .${Oa.lastButton}`]:e.lastButton},{[`& .${Oa.middleButton}`]:e.middleButton},e.root,e[n.variant],n.disableElevation===!0&&e.disableElevation,n.fullWidth&&e.fullWidth,n.orientation==="vertical"&&e.vertical]},KEe=t=>{const{classes:e,color:n,disabled:r,disableElevation:i,fullWidth:o,orientation:a,variant:s}=t,l={root:["root",s,a==="vertical"&&"vertical",o&&"fullWidth",i&&"disableElevation"],grouped:["grouped",`grouped${en(a)}`,`grouped${en(s)}`,`grouped${en(s)}${en(a)}`,`grouped${en(s)}${en(n)}`,r&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return Hn(l,GEe,e)},ZEe=tn("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:XEe})(({theme:t,ownerState:e})=>de({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[2]},e.disableElevation&&{boxShadow:"none"},e.fullWidth&&{width:"100%"},e.orientation==="vertical"&&{flexDirection:"column"},{[`& .${Oa.grouped}`]:de({minWidth:40,"&:hover":de({},e.variant==="contained"&&{boxShadow:"none"})},e.variant==="contained"&&{boxShadow:"none"}),[`& .${Oa.firstButton},& .${Oa.middleButton}`]:de({},e.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},e.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},e.variant==="text"&&e.orientation==="horizontal"&&{borderRight:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Oa.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="text"&&e.orientation==="vertical"&&{borderBottom:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Oa.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="text"&&e.color!=="inherit"&&{borderColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:Ji(t.palette[e.color].main,.5)},e.variant==="outlined"&&e.orientation==="horizontal"&&{borderRightColor:"transparent"},e.variant==="outlined"&&e.orientation==="vertical"&&{borderBottomColor:"transparent"},e.variant==="contained"&&e.orientation==="horizontal"&&{borderRight:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${Oa.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="contained"&&e.orientation==="vertical"&&{borderBottom:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${Oa.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="contained"&&e.color!=="inherit"&&{borderColor:(t.vars||t).palette[e.color].dark},{"&:hover":de({},e.variant==="outlined"&&e.orientation==="horizontal"&&{borderRightColor:"currentColor"},e.variant==="outlined"&&e.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${Oa.lastButton},& .${Oa.middleButton}`]:de({},e.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},e.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},e.variant==="outlined"&&e.orientation==="horizontal"&&{marginLeft:-1},e.variant==="outlined"&&e.orientation==="vertical"&&{marginTop:-1})})),JEe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiButtonGroup"}),{children:i,className:o,color:a="primary",component:s="div",disabled:l=!1,disableElevation:c=!1,disableFocusRipple:h=!1,disableRipple:p=!1,fullWidth:g=!1,orientation:v="horizontal",size:x="medium",variant:b="outlined"}=r,M=on(r,YEe),w=de({},r,{color:a,component:s,disabled:l,disableElevation:c,disableFocusRipple:h,disableRipple:p,fullWidth:g,orientation:v,size:x,variant:b}),T=KEe(w),C=W.useMemo(()=>({className:T.grouped,color:a,disabled:l,disableElevation:c,disableFocusRipple:h,disableRipple:p,fullWidth:g,size:x,variant:b}),[a,l,c,h,p,g,x,b,T.grouped]),I=sbe(i),R=I.length,O=B=>{const U=B===0,Z=B===R-1;return U&&Z?"":U?T.firstButton:Z?T.lastButton:T.middleButton};return F.jsx(ZEe,de({as:s,role:"group",className:Kt(T.root,o),ref:n,ownerState:w},M,{children:F.jsx(Wne.Provider,{value:C,children:I.map((B,U)=>F.jsx(Hne.Provider,{value:O(U),children:B},U))})}))}),QEe=JEe;function eTe(t){return Vn("MuiCard",t)}Wn("MuiCard",["root"]);const tTe=["className","raised"],nTe=t=>{const{classes:e}=t;return Hn({root:["root"]},eTe,e)},rTe=tn(Ls,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({overflow:"hidden"})),iTe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiCard"}),{className:i,raised:o=!1}=r,a=on(r,tTe),s=de({},r,{raised:o}),l=nTe(s);return F.jsx(rTe,de({className:Kt(l.root,i),elevation:o?8:void 0,ref:n,ownerState:s},a))}),Oh=iTe;function oTe(t){return Vn("MuiCardActions",t)}Wn("MuiCardActions",["root","spacing"]);const sTe=["disableSpacing","className"],aTe=t=>{const{classes:e,disableSpacing:n}=t;return Hn({root:["root",!n&&"spacing"]},oTe,e)},lTe=tn("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})(({ownerState:t})=>de({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),cTe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiCardActions"}),{disableSpacing:i=!1,className:o}=r,a=on(r,sTe),s=de({},r,{disableSpacing:i}),l=aTe(s);return F.jsx(lTe,de({className:Kt(l.root,o),ownerState:s,ref:n},a))}),qne=cTe;function uTe(t){return Vn("MuiCardContent",t)}Wn("MuiCardContent",["root"]);const dTe=["className","component"],fTe=t=>{const{classes:e}=t;return Hn({root:["root"]},uTe,e)},hTe=tn("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),pTe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiCardContent"}),{className:i,component:o="div"}=r,a=on(r,dTe),s=de({},r,{component:o}),l=fTe(s);return F.jsx(hTe,de({as:o,className:Kt(l.root,i),ownerState:s,ref:n},a))}),Y$=pTe;function mTe(t){return Vn("MuiCardMedia",t)}Wn("MuiCardMedia",["root","media","img"]);const gTe=["children","className","component","image","src","style"],yTe=t=>{const{classes:e,isMediaComponent:n,isImageComponent:r}=t;return Hn({root:["root",n&&"media",r&&"img"]},mTe,e)},vTe=tn("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{isMediaComponent:r,isImageComponent:i}=n;return[e.root,r&&e.media,i&&e.img]}})(({ownerState:t})=>de({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},t.isMediaComponent&&{width:"100%"},t.isImageComponent&&{objectFit:"cover"})),xTe=["video","audio","picture","iframe","img"],_Te=["picture","img"],bTe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiCardMedia"}),{children:i,className:o,component:a="div",image:s,src:l,style:c}=r,h=on(r,gTe),p=xTe.indexOf(a)!==-1,g=!p&&s?de({backgroundImage:`url("${s}")`},c):c,v=de({},r,{component:a,isMediaComponent:p,isImageComponent:_Te.indexOf(a)!==-1}),x=yTe(v);return F.jsx(vTe,de({className:Kt(x.root,o),as:a,role:!p&&s?"img":void 0,ref:n,style:g,ownerState:v,src:p?s||l:void 0},h,{children:i}))}),wTe=bTe;function STe(t){return Vn("PrivateSwitchBase",t)}Wn("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const MTe=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],ETe=t=>{const{classes:e,checked:n,disabled:r,edge:i}=t,o={root:["root",n&&"checked",r&&"disabled",i&&`edge${en(i)}`],input:["input"]};return Hn(o,STe,e)},TTe=tn(om)(({ownerState:t})=>de({padding:9,borderRadius:"50%"},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12})),CTe=tn("input",{shouldForwardProp:Jl})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),ATe=W.forwardRef(function(e,n){const{autoFocus:r,checked:i,checkedIcon:o,className:a,defaultChecked:s,disabled:l,disableFocusRipple:c=!1,edge:h=!1,icon:p,id:g,inputProps:v,inputRef:x,name:b,onBlur:M,onChange:w,onFocus:T,readOnly:C,required:I=!1,tabIndex:R,type:O,value:B}=e,U=on(e,MTe),[Z,j]=gb({controlled:i,default:!!s,name:"SwitchBase",state:"checked"}),X=Rh(),le=he=>{T&&T(he),X&&X.onFocus&&X.onFocus(he)},me=he=>{M&&M(he),X&&X.onBlur&&X.onBlur(he)},ie=he=>{if(he.nativeEvent.defaultPrevented)return;const ve=he.target.checked;j(ve),w&&w(he,ve)};let ce=l;X&&typeof ce>"u"&&(ce=X.disabled);const fe=O==="checkbox"||O==="radio",xe=de({},e,{checked:Z,disabled:ce,disableFocusRipple:c,edge:h}),te=ETe(xe);return F.jsxs(TTe,de({component:"span",className:Kt(te.root,a),centerRipple:!0,focusRipple:!c,disabled:ce,tabIndex:null,role:void 0,onFocus:le,onBlur:me,ownerState:xe,ref:n},U,{children:[F.jsx(CTe,de({autoFocus:r,checked:i,defaultChecked:s,className:te.input,disabled:ce,id:fe?g:void 0,name:b,onChange:ie,readOnly:C,ref:x,required:I,ownerState:xe,tabIndex:R,type:O},O==="checkbox"&&B===void 0?{}:{value:B},v)),Z?o:p]}))}),Yne=ATe,PTe=$a(F.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),kTe=$a(F.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),ITe=$a(F.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function RTe(t){return Vn("MuiCheckbox",t)}const OTe=Wn("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),LD=OTe,LTe=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],DTe=t=>{const{classes:e,indeterminate:n,color:r,size:i}=t,o={root:["root",n&&"indeterminate",`color${en(r)}`,`size${en(i)}`]},a=Hn(o,RTe,e);return de({},e,a)},NTe=tn(Yne,{shouldForwardProp:t=>Jl(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.indeterminate&&e.indeterminate,e[`size${en(n.size)}`],n.color!=="default"&&e[`color${en(n.color)}`]]}})(({theme:t,ownerState:e})=>de({color:(t.vars||t).palette.text.secondary},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${e.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Ji(e.color==="default"?t.palette.action.active:t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${LD.checked}, &.${LD.indeterminate}`]:{color:(t.vars||t).palette[e.color].main},[`&.${LD.disabled}`]:{color:(t.vars||t).palette.action.disabled}})),zTe=F.jsx(kTe,{}),FTe=F.jsx(PTe,{}),BTe=F.jsx(ITe,{}),$Te=W.forwardRef(function(e,n){var r,i;const o=Jn({props:e,name:"MuiCheckbox"}),{checkedIcon:a=zTe,color:s="primary",icon:l=FTe,indeterminate:c=!1,indeterminateIcon:h=BTe,inputProps:p,size:g="medium",className:v}=o,x=on(o,LTe),b=c?h:l,M=c?h:a,w=de({},o,{color:s,indeterminate:c,size:g}),T=DTe(w);return F.jsx(NTe,de({type:"checkbox",inputProps:de({"data-indeterminate":c},p),icon:W.cloneElement(b,{fontSize:(r=b.props.fontSize)!=null?r:g}),checkedIcon:W.cloneElement(M,{fontSize:(i=M.props.fontSize)!=null?i:g}),ownerState:w,ref:n,className:Kt(T.root,v)},x,{classes:T}))}),k9=$Te,jTe=ybe({createStyledComponent:tn("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${en(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),useThemeProps:t=>Jn({props:t,name:"MuiContainer"})}),d1=jTe,UTe=(t,e)=>de({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},e&&!t.vars&&{colorScheme:t.palette.mode}),VTe=t=>de({color:(t.vars||t).palette.text.primary},t.typography.body1,{backgroundColor:(t.vars||t).palette.background.default,"@media print":{backgroundColor:(t.vars||t).palette.common.white}}),WTe=(t,e=!1)=>{var n;const r={};e&&t.colorSchemes&&Object.entries(t.colorSchemes).forEach(([a,s])=>{var l;r[t.getColorSchemeSelector(a).replace(/\s*&/,"")]={colorScheme:(l=s.palette)==null?void 0:l.mode}});let i=de({html:UTe(t,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:t.typography.fontWeightBold},body:de({margin:0},VTe(t),{"&::backdrop":{backgroundColor:(t.vars||t).palette.background.default}})},r);const o=(n=t.components)==null||(n=n.MuiCssBaseline)==null?void 0:n.styleOverrides;return o&&(i=[i,o]),i};function HTe(t){const e=Jn({props:t,name:"MuiCssBaseline"}),{children:n,enableColorScheme:r=!1}=e;return F.jsxs(W.Fragment,{children:[F.jsx(jne,{styles:i=>WTe(i,r)}),n]})}function GTe(t){return Vn("MuiModal",t)}Wn("MuiModal",["root","hidden","backdrop"]);const qTe=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],YTe=t=>{const{open:e,exited:n,classes:r}=t;return Hn({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},GTe,r)},XTe=tn("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(({theme:t,ownerState:e})=>de({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),KTe=tn(cEe,{name:"MuiModal",slot:"Backdrop",overridesResolver:(t,e)=>e.backdrop})({zIndex:-1}),ZTe=W.forwardRef(function(e,n){var r,i,o,a,s,l;const c=Jn({name:"MuiModal",props:e}),{BackdropComponent:h=KTe,BackdropProps:p,className:g,closeAfterTransition:v=!1,children:x,container:b,component:M,components:w={},componentsProps:T={},disableAutoFocus:C=!1,disableEnforceFocus:I=!1,disableEscapeKeyDown:R=!1,disablePortal:O=!1,disableRestoreFocus:B=!1,disableScrollLock:U=!1,hideBackdrop:Z=!1,keepMounted:j=!1,onBackdropClick:X,open:le,slotProps:me,slots:ie}=c,ce=on(c,qTe),fe=de({},c,{closeAfterTransition:v,disableAutoFocus:C,disableEnforceFocus:I,disableEscapeKeyDown:R,disablePortal:O,disableRestoreFocus:B,disableScrollLock:U,hideBackdrop:Z,keepMounted:j}),{getRootProps:xe,getBackdropProps:te,getTransitionProps:he,portalRef:ve,isTopModal:ze,exited:Ue,hasTransition:rt}=eMe(de({},fe,{rootRef:n})),Be=de({},fe,{exited:Ue}),st=YTe(Be),ct={};if(x.props.tabIndex===void 0&&(ct.tabIndex="-1"),rt){const{onEnter:et,onExited:ot}=he();ct.onEnter=et,ct.onExited=ot}const Dt=(r=(i=ie==null?void 0:ie.root)!=null?i:w.Root)!=null?r:XTe,zt=(o=(a=ie==null?void 0:ie.backdrop)!=null?a:w.Backdrop)!=null?o:h,Fe=(s=me==null?void 0:me.root)!=null?s:T.root,lt=(l=me==null?void 0:me.backdrop)!=null?l:T.backdrop,Qe=Pc({elementType:Dt,externalSlotProps:Fe,externalForwardedProps:ce,getSlotProps:xe,additionalProps:{ref:n,as:M},ownerState:Be,className:Kt(g,Fe==null?void 0:Fe.className,st==null?void 0:st.root,!Be.open&&Be.exited&&(st==null?void 0:st.hidden))}),ge=Pc({elementType:zt,externalSlotProps:lt,additionalProps:p,getSlotProps:et=>te(de({},et,{onClick:ot=>{X&&X(ot),et!=null&&et.onClick&&et.onClick(ot)}})),className:Kt(lt==null?void 0:lt.className,p==null?void 0:p.className,st==null?void 0:st.backdrop),ownerState:Be});return!j&&!le&&(!rt||Ue)?null:F.jsx(Cne,{ref:ve,container:b,disablePortal:O,children:F.jsxs(Dt,de({},Qe,{children:[!Z&&h?F.jsx(zt,de({},ge)):null,F.jsx(WSe,{disableEnforceFocus:I,disableAutoFocus:C,disableRestoreFocus:B,isEnabled:ze,open:le,children:W.cloneElement(x,ct)})]}))})}),JTe=ZTe;function QTe(t){return Vn("MuiDivider",t)}const eCe=Wn("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),I9=eCe,tCe=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],nCe=t=>{const{absolute:e,children:n,classes:r,flexItem:i,light:o,orientation:a,textAlign:s,variant:l}=t;return Hn({root:["root",e&&"absolute",l,o&&"light",a==="vertical"&&"vertical",i&&"flexItem",n&&"withChildren",n&&a==="vertical"&&"withChildrenVertical",s==="right"&&a!=="vertical"&&"textAlignRight",s==="left"&&a!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",a==="vertical"&&"wrapperVertical"]},QTe,r)},rCe=tn("div",{name:"MuiDivider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.absolute&&e.absolute,e[n.variant],n.light&&e.light,n.orientation==="vertical"&&e.vertical,n.flexItem&&e.flexItem,n.children&&e.withChildren,n.children&&n.orientation==="vertical"&&e.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&e.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&e.textAlignLeft]}})(({theme:t,ownerState:e})=>de({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin"},e.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},e.light&&{borderColor:t.vars?`rgba(${t.vars.palette.dividerChannel} / 0.08)`:Ji(t.palette.divider,.08)},e.variant==="inset"&&{marginLeft:72},e.variant==="middle"&&e.orientation==="horizontal"&&{marginLeft:t.spacing(2),marginRight:t.spacing(2)},e.variant==="middle"&&e.orientation==="vertical"&&{marginTop:t.spacing(1),marginBottom:t.spacing(1)},e.orientation==="vertical"&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},e.flexItem&&{alignSelf:"stretch",height:"auto"}),({ownerState:t})=>de({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}}),({theme:t,ownerState:e})=>de({},e.children&&e.orientation!=="vertical"&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(t.vars||t).palette.divider}`}}),({theme:t,ownerState:e})=>de({},e.children&&e.orientation==="vertical"&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(t.vars||t).palette.divider}`}}),({ownerState:t})=>de({},t.textAlign==="right"&&t.orientation!=="vertical"&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},t.textAlign==="left"&&t.orientation!=="vertical"&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),iCe=tn("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.wrapper,n.orientation==="vertical"&&e.wrapperVertical]}})(({theme:t,ownerState:e})=>de({display:"inline-block",paddingLeft:`calc(${t.spacing(1)} * 1.2)`,paddingRight:`calc(${t.spacing(1)} * 1.2)`},e.orientation==="vertical"&&{paddingTop:`calc(${t.spacing(1)} * 1.2)`,paddingBottom:`calc(${t.spacing(1)} * 1.2)`})),Xne=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiDivider"}),{absolute:i=!1,children:o,className:a,component:s=o?"div":"hr",flexItem:l=!1,light:c=!1,orientation:h="horizontal",role:p=s!=="hr"?"separator":void 0,textAlign:g="center",variant:v="fullWidth"}=r,x=on(r,tCe),b=de({},r,{absolute:i,component:s,flexItem:l,light:c,orientation:h,role:p,textAlign:g,variant:v}),M=nCe(b);return F.jsx(rCe,de({as:s,className:Kt(M.root,a),role:p,ref:n,ownerState:b},x,{children:o?F.jsx(iCe,{className:M.wrapper,ownerState:b,children:o}):null}))});Xne.muiSkipListHighlight=!0;const Eb=Xne,oCe=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],sCe=t=>{const{classes:e,disableUnderline:n}=t,i=Hn({root:["root",!n&&"underline"],input:["input"]},j2e,e);return de({},e,i)},aCe=tn(dR,{shouldForwardProp:t=>Jl(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...cR(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{var n;const r=t.palette.mode==="light",i=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",o=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",a=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",s=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return de({position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:o,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:a,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:o}},[`&.${hv.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:o},[`&.${hv.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:s}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n=(t.vars||t).palette[e.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${hv.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${hv.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${hv.disabled}, .${hv.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${hv.disabled}:before`]:{borderBottomStyle:"dotted"}},e.startAdornment&&{paddingLeft:12},e.endAdornment&&{paddingRight:12},e.multiline&&de({padding:"25px 12px 8px"},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9}))}),lCe=tn(fR,{name:"MuiFilledInput",slot:"Input",overridesResolver:uR})(({theme:t,ownerState:e})=>de({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9},e.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),Kne=W.forwardRef(function(e,n){var r,i,o,a;const s=Jn({props:e,name:"MuiFilledInput"}),{components:l={},componentsProps:c,fullWidth:h=!1,inputComponent:p="input",multiline:g=!1,slotProps:v,slots:x={},type:b="text"}=s,M=on(s,oCe),w=de({},s,{fullWidth:h,inputComponent:p,multiline:g,type:b}),T=sCe(s),C={root:{ownerState:w},input:{ownerState:w}},I=v??c?Fa(C,v??c):C,R=(r=(i=x.root)!=null?i:l.Root)!=null?r:aCe,O=(o=(a=x.input)!=null?a:l.Input)!=null?o:lCe;return F.jsx(q$,de({slots:{root:R,input:O},componentsProps:I,fullWidth:h,inputComponent:p,multiline:g,ref:n,type:b},M,{classes:T}))});Kne.muiName="Input";const Zne=Kne;function cCe(t){return Vn("MuiFormControl",t)}Wn("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const uCe=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],dCe=t=>{const{classes:e,margin:n,fullWidth:r}=t,i={root:["root",n!=="none"&&`margin${en(n)}`,r&&"fullWidth"]};return Hn(i,cCe,e)},fCe=tn("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:t},e)=>de({},e.root,e[`margin${en(t.margin)}`],t.fullWidth&&e.fullWidth)})(({ownerState:t})=>de({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},t.margin==="normal"&&{marginTop:16,marginBottom:8},t.margin==="dense"&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})),hCe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiFormControl"}),{children:i,className:o,color:a="primary",component:s="div",disabled:l=!1,error:c=!1,focused:h,fullWidth:p=!1,hiddenLabel:g=!1,margin:v="none",required:x=!1,size:b="medium",variant:M="outlined"}=r,w=on(r,uCe),T=de({},r,{color:a,component:s,disabled:l,error:c,fullWidth:p,hiddenLabel:g,margin:v,required:x,size:b,variant:M}),C=dCe(T),[I,R]=W.useState(()=>{let me=!1;return i&&W.Children.forEach(i,ie=>{if(!TA(ie,["Input","Select"]))return;const ce=TA(ie,["Select"])?ie.props.input:ie;ce&&k2e(ce.props)&&(me=!0)}),me}),[O,B]=W.useState(()=>{let me=!1;return i&&W.Children.forEach(i,ie=>{TA(ie,["Input","Select"])&&(FP(ie.props,!0)||FP(ie.props.inputProps,!0))&&(me=!0)}),me}),[U,Z]=W.useState(!1);l&&U&&Z(!1);const j=h!==void 0&&!l?h:U;let X;const le=W.useMemo(()=>({adornedStart:I,setAdornedStart:R,color:a,disabled:l,error:c,filled:O,focused:j,fullWidth:p,hiddenLabel:g,size:b,onBlur:()=>{Z(!1)},onEmpty:()=>{B(!1)},onFilled:()=>{B(!0)},onFocus:()=>{Z(!0)},registerEffect:X,required:x,variant:M}),[I,a,l,c,O,j,p,g,X,x,b,M]);return F.jsx(lR.Provider,{value:le,children:F.jsx(fCe,de({as:s,ownerState:T,className:Kt(C.root,o),ref:n},w,{children:i}))})}),uE=hCe,pCe=Ebe({createStyledComponent:tn("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root}),useThemeProps:t=>Jn({props:t,name:"MuiStack"})}),mCe=pCe;function gCe(t){return Vn("MuiFormControlLabel",t)}const yCe=Wn("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),yS=yCe,vCe=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],xCe=t=>{const{classes:e,disabled:n,labelPlacement:r,error:i,required:o}=t,a={root:["root",n&&"disabled",`labelPlacement${en(r)}`,i&&"error",o&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]};return Hn(a,gCe,e)},_Ce=tn("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${yS.label}`]:e.label},e.root,e[`labelPlacement${en(n.labelPlacement)}`]]}})(({theme:t,ownerState:e})=>de({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${yS.disabled}`]:{cursor:"default"}},e.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},e.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},e.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${yS.label}`]:{[`&.${yS.disabled}`]:{color:(t.vars||t).palette.text.disabled}}})),bCe=tn("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})(({theme:t})=>({[`&.${yS.error}`]:{color:(t.vars||t).palette.error.main}})),wCe=W.forwardRef(function(e,n){var r,i;const o=Jn({props:e,name:"MuiFormControlLabel"}),{className:a,componentsProps:s={},control:l,disabled:c,disableTypography:h,label:p,labelPlacement:g="end",required:v,slotProps:x={}}=o,b=on(o,vCe),M=Rh(),w=(r=c??l.props.disabled)!=null?r:M==null?void 0:M.disabled,T=v??l.props.required,C={disabled:w,required:T};["checked","name","onChange","value","inputRef"].forEach(Z=>{typeof l.props[Z]>"u"&&typeof o[Z]<"u"&&(C[Z]=o[Z])});const I=yy({props:o,muiFormControl:M,states:["error"]}),R=de({},o,{disabled:w,labelPlacement:g,required:T,error:I.error}),O=xCe(R),B=(i=x.typography)!=null?i:s.typography;let U=p;return U!=null&&U.type!==Bn&&!h&&(U=F.jsx(Bn,de({component:"span"},B,{className:Kt(O.label,B==null?void 0:B.className),children:U}))),F.jsxs(_Ce,de({className:Kt(O.root,a),ownerState:R,ref:n},b,{children:[W.cloneElement(l,C),T?F.jsxs(mCe,{display:"block",children:[U,F.jsxs(bCe,{ownerState:R,"aria-hidden":!0,className:O.asterisk,children:[" ","*"]})]}):U]}))}),R9=wCe;function SCe(t){return Vn("MuiFormGroup",t)}Wn("MuiFormGroup",["root","row","error"]);const MCe=["className","row"],ECe=t=>{const{classes:e,row:n,error:r}=t;return Hn({root:["root",n&&"row",r&&"error"]},SCe,e)},TCe=tn("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.row&&e.row]}})(({ownerState:t})=>de({display:"flex",flexDirection:"column",flexWrap:"wrap"},t.row&&{flexDirection:"row"})),CCe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiFormGroup"}),{className:i,row:o=!1}=r,a=on(r,MCe),s=Rh(),l=yy({props:r,muiFormControl:s,states:["error"]}),c=de({},r,{row:o,error:l.error}),h=ECe(c);return F.jsx(TCe,de({className:Kt(h.root,i),ownerState:c,ref:n},a))}),ACe=CCe;function PCe(t){return Vn("MuiFormHelperText",t)}const kCe=Wn("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),O9=kCe;var L9;const ICe=["children","className","component","disabled","error","filled","focused","margin","required","variant"],RCe=t=>{const{classes:e,contained:n,size:r,disabled:i,error:o,filled:a,focused:s,required:l}=t,c={root:["root",i&&"disabled",o&&"error",r&&`size${en(r)}`,n&&"contained",s&&"focused",a&&"filled",l&&"required"]};return Hn(c,PCe,e)},OCe=tn("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e[`size${en(n.size)}`],n.contained&&e.contained,n.filled&&e.filled]}})(({theme:t,ownerState:e})=>de({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${O9.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${O9.error}`]:{color:(t.vars||t).palette.error.main}},e.size==="small"&&{marginTop:4},e.contained&&{marginLeft:14,marginRight:14})),LCe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiFormHelperText"}),{children:i,className:o,component:a="p"}=r,s=on(r,ICe),l=Rh(),c=yy({props:r,muiFormControl:l,states:["variant","size","disabled","error","filled","focused","required"]}),h=de({},r,{component:a,contained:c.variant==="filled"||c.variant==="outlined",variant:c.variant,size:c.size,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),p=RCe(h);return F.jsx(OCe,de({as:a,ownerState:h,className:Kt(p.root,o),ref:n},s,{children:i===" "?L9||(L9=F.jsx("span",{className:"notranslate",children:"​"})):i}))}),DCe=LCe;function NCe(t){return Vn("MuiFormLabel",t)}const zCe=Wn("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),zS=zCe,FCe=["children","className","color","component","disabled","error","filled","focused","required"],BCe=t=>{const{classes:e,color:n,focused:r,disabled:i,error:o,filled:a,required:s}=t,l={root:["root",`color${en(n)}`,i&&"disabled",o&&"error",a&&"filled",r&&"focused",s&&"required"],asterisk:["asterisk",o&&"error"]};return Hn(l,NCe,e)},$Ce=tn("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:t},e)=>de({},e.root,t.color==="secondary"&&e.colorSecondary,t.filled&&e.filled)})(({theme:t,ownerState:e})=>de({color:(t.vars||t).palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${zS.focused}`]:{color:(t.vars||t).palette[e.color].main},[`&.${zS.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${zS.error}`]:{color:(t.vars||t).palette.error.main}})),jCe=tn("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})(({theme:t})=>({[`&.${zS.error}`]:{color:(t.vars||t).palette.error.main}})),UCe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiFormLabel"}),{children:i,className:o,component:a="label"}=r,s=on(r,FCe),l=Rh(),c=yy({props:r,muiFormControl:l,states:["color","required","focused","disabled","error","filled"]}),h=de({},r,{color:c.color||"primary",component:a,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),p=BCe(h);return F.jsxs($Ce,de({as:a,ownerState:h,className:Kt(p.root,o),ref:n},s,{children:[i,c.required&&F.jsxs(jCe,{ownerState:h,"aria-hidden":!0,className:p.asterisk,children:[" ","*"]})]}))}),VCe=UCe,WCe=W.createContext(),D9=WCe;function HCe(t){return Vn("MuiGrid",t)}const GCe=[0,1,2,3,4,5,6,7,8,9,10],qCe=["column-reverse","column","row-reverse","row"],YCe=["nowrap","wrap-reverse","wrap"],Aw=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],kM=Wn("MuiGrid",["root","container","item","zeroMinWidth",...GCe.map(t=>`spacing-xs-${t}`),...qCe.map(t=>`direction-xs-${t}`),...YCe.map(t=>`wrap-xs-${t}`),...Aw.map(t=>`grid-xs-${t}`),...Aw.map(t=>`grid-sm-${t}`),...Aw.map(t=>`grid-md-${t}`),...Aw.map(t=>`grid-lg-${t}`),...Aw.map(t=>`grid-xl-${t}`)]),XCe=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function X_(t){const e=parseFloat(t);return`${e}${String(t).replace(String(e),"")||"px"}`}function KCe({theme:t,ownerState:e}){let n;return t.breakpoints.keys.reduce((r,i)=>{let o={};if(e[i]&&(n=e[i]),!n)return r;if(n===!0)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(n==="auto")o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const a=u0({values:e.columns,breakpoints:t.breakpoints.values}),s=typeof a=="object"?a[i]:a;if(s==null)return r;const l=`${Math.round(n/s*1e8)/1e6}%`;let c={};if(e.container&&e.item&&e.columnSpacing!==0){const h=t.spacing(e.columnSpacing);if(h!=="0px"){const p=`calc(${l} + ${X_(h)})`;c={flexBasis:p,maxWidth:p}}}o=de({flexBasis:l,flexGrow:0,maxWidth:l},c)}return t.breakpoints.values[i]===0?Object.assign(r,o):r[t.breakpoints.up(i)]=o,r},{})}function ZCe({theme:t,ownerState:e}){const n=u0({values:e.direction,breakpoints:t.breakpoints.values});return Ac({theme:t},n,r=>{const i={flexDirection:r};return r.indexOf("column")===0&&(i[`& > .${kM.item}`]={maxWidth:"none"}),i})}function Jne({breakpoints:t,values:e}){let n="";Object.keys(e).forEach(i=>{n===""&&e[i]!==0&&(n=i)});const r=Object.keys(t).sort((i,o)=>t[i]-t[o]);return r.slice(0,r.indexOf(n))}function JCe({theme:t,ownerState:e}){const{container:n,rowSpacing:r}=e;let i={};if(n&&r!==0){const o=u0({values:r,breakpoints:t.breakpoints.values});let a;typeof o=="object"&&(a=Jne({breakpoints:t.breakpoints.values,values:o})),i=Ac({theme:t},o,(s,l)=>{var c;const h=t.spacing(s);return h!=="0px"?{marginTop:`-${X_(h)}`,[`& > .${kM.item}`]:{paddingTop:X_(h)}}:(c=a)!=null&&c.includes(l)?{}:{marginTop:0,[`& > .${kM.item}`]:{paddingTop:0}}})}return i}function QCe({theme:t,ownerState:e}){const{container:n,columnSpacing:r}=e;let i={};if(n&&r!==0){const o=u0({values:r,breakpoints:t.breakpoints.values});let a;typeof o=="object"&&(a=Jne({breakpoints:t.breakpoints.values,values:o})),i=Ac({theme:t},o,(s,l)=>{var c;const h=t.spacing(s);return h!=="0px"?{width:`calc(100% + ${X_(h)})`,marginLeft:`-${X_(h)}`,[`& > .${kM.item}`]:{paddingLeft:X_(h)}}:(c=a)!=null&&c.includes(l)?{}:{width:"100%",marginLeft:0,[`& > .${kM.item}`]:{paddingLeft:0}}})}return i}function eAe(t,e,n={}){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[n[`spacing-xs-${String(t)}`]];const r=[];return e.forEach(i=>{const o=t[i];Number(o)>0&&r.push(n[`spacing-${i}-${String(o)}`])}),r}const tAe=tn("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{container:r,direction:i,item:o,spacing:a,wrap:s,zeroMinWidth:l,breakpoints:c}=n;let h=[];r&&(h=eAe(a,c,e));const p=[];return c.forEach(g=>{const v=n[g];v&&p.push(e[`grid-${g}-${String(v)}`])}),[e.root,r&&e.container,o&&e.item,l&&e.zeroMinWidth,...h,i!=="row"&&e[`direction-xs-${String(i)}`],s!=="wrap"&&e[`wrap-xs-${String(s)}`],...p]}})(({ownerState:t})=>de({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},t.wrap!=="wrap"&&{flexWrap:t.wrap}),ZCe,JCe,QCe,KCe);function nAe(t,e){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[`spacing-xs-${String(t)}`];const n=[];return e.forEach(r=>{const i=t[r];if(Number(i)>0){const o=`spacing-${r}-${String(i)}`;n.push(o)}}),n}const rAe=t=>{const{classes:e,container:n,direction:r,item:i,spacing:o,wrap:a,zeroMinWidth:s,breakpoints:l}=t;let c=[];n&&(c=nAe(o,l));const h=[];l.forEach(g=>{const v=t[g];v&&h.push(`grid-${g}-${String(v)}`)});const p={root:["root",n&&"container",i&&"item",s&&"zeroMinWidth",...c,r!=="row"&&`direction-xs-${String(r)}`,a!=="wrap"&&`wrap-xs-${String(a)}`,...h]};return Hn(p,HCe,e)},iAe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiGrid"}),{breakpoints:i}=xd(),o=nE(r),{className:a,columns:s,columnSpacing:l,component:c="div",container:h=!1,direction:p="row",item:g=!1,rowSpacing:v,spacing:x=0,wrap:b="wrap",zeroMinWidth:M=!1}=o,w=on(o,XCe),T=v||x,C=l||x,I=W.useContext(D9),R=h?s||12:I,O={},B=de({},w);i.keys.forEach(j=>{w[j]!=null&&(O[j]=w[j],delete B[j])});const U=de({},o,{columns:R,container:h,direction:p,item:g,rowSpacing:T,columnSpacing:C,wrap:b,zeroMinWidth:M,spacing:x},O,{breakpoints:i.keys}),Z=rAe(U);return F.jsx(D9.Provider,{value:R,children:F.jsx(tAe,de({ownerState:U,className:Kt(Z.root,a),as:c,ref:n},B))})}),N9=iAe,oAe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function vF(t){return`scale(${t}, ${t**2})`}const sAe={entering:{opacity:1,transform:vF(1)},entered:{opacity:1,transform:"none"}},DD=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Qne=W.forwardRef(function(e,n){const{addEndListener:r,appear:i=!0,children:o,easing:a,in:s,onEnter:l,onEntered:c,onEntering:h,onExit:p,onExited:g,onExiting:v,style:x,timeout:b="auto",TransitionComponent:M=D$}=e,w=on(e,oAe),T=Pg(),C=W.useRef(),I=xd(),R=W.useRef(null),O=Lo(R,o.ref,n),B=ce=>fe=>{if(ce){const xe=R.current;fe===void 0?ce(xe):ce(xe,fe)}},U=B(h),Z=B((ce,fe)=>{_ne(ce);const{duration:xe,delay:te,easing:he}=xb({style:x,timeout:b,easing:a},{mode:"enter"});let ve;b==="auto"?(ve=I.transitions.getAutoHeightDuration(ce.clientHeight),C.current=ve):ve=xe,ce.style.transition=[I.transitions.create("opacity",{duration:ve,delay:te}),I.transitions.create("transform",{duration:DD?ve:ve*.666,delay:te,easing:he})].join(","),l&&l(ce,fe)}),j=B(c),X=B(v),le=B(ce=>{const{duration:fe,delay:xe,easing:te}=xb({style:x,timeout:b,easing:a},{mode:"exit"});let he;b==="auto"?(he=I.transitions.getAutoHeightDuration(ce.clientHeight),C.current=he):he=fe,ce.style.transition=[I.transitions.create("opacity",{duration:he,delay:xe}),I.transitions.create("transform",{duration:DD?he:he*.666,delay:DD?xe:xe||he*.333,easing:te})].join(","),ce.style.opacity=0,ce.style.transform=vF(.75),p&&p(ce)}),me=B(g),ie=ce=>{b==="auto"&&T.start(C.current||0,ce),r&&r(R.current,ce)};return F.jsx(M,de({appear:i,in:s,nodeRef:R,onEnter:Z,onEntered:j,onEntering:U,onExit:le,onExited:me,onExiting:X,addEndListener:ie,timeout:b==="auto"?null:b},w,{children:(ce,fe)=>W.cloneElement(o,de({style:de({opacity:0,transform:vF(.75),visibility:ce==="exited"&&!s?"hidden":void 0},sAe[ce],x,o.props.style),ref:O},fe))}))});Qne.muiSupportAuto=!0;const BP=Qne,aAe=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],lAe=t=>{const{classes:e,disableUnderline:n}=t,i=Hn({root:["root",!n&&"underline"],input:["input"]},z2e,e);return de({},e,i)},cAe=tn(dR,{shouldForwardProp:t=>Jl(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...cR(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{let r=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(r=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),de({position:"relative"},e.formControl&&{"label + &":{marginTop:16}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[e.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Cw.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Cw.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Cw.disabled}, .${Cw.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${Cw.disabled}:before`]:{borderBottomStyle:"dotted"}})}),uAe=tn(fR,{name:"MuiInput",slot:"Input",overridesResolver:uR})({}),ere=W.forwardRef(function(e,n){var r,i,o,a;const s=Jn({props:e,name:"MuiInput"}),{disableUnderline:l,components:c={},componentsProps:h,fullWidth:p=!1,inputComponent:g="input",multiline:v=!1,slotProps:x,slots:b={},type:M="text"}=s,w=on(s,aAe),T=lAe(s),I={root:{ownerState:{disableUnderline:l}}},R=x??h?Fa(x??h,I):I,O=(r=(i=b.root)!=null?i:c.Root)!=null?r:cAe,B=(o=(a=b.input)!=null?a:c.Input)!=null?o:uAe;return F.jsx(q$,de({slots:{root:O,input:B},slotProps:R,fullWidth:p,inputComponent:g,multiline:v,ref:n,type:M},w,{classes:T}))});ere.muiName="Input";const tre=ere;function dAe(t){return Vn("MuiInputAdornment",t)}const fAe=Wn("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),z9=fAe;var F9;const hAe=["children","className","component","disablePointerEvents","disableTypography","position","variant"],pAe=(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${en(n.position)}`],n.disablePointerEvents===!0&&e.disablePointerEvents,e[n.variant]]},mAe=t=>{const{classes:e,disablePointerEvents:n,hiddenLabel:r,position:i,size:o,variant:a}=t,s={root:["root",n&&"disablePointerEvents",i&&`position${en(i)}`,a,r&&"hiddenLabel",o&&`size${en(o)}`]};return Hn(s,dAe,e)},gAe=tn("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:pAe})(({theme:t,ownerState:e})=>de({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},e.variant==="filled"&&{[`&.${z9.positionStart}&:not(.${z9.hiddenLabel})`]:{marginTop:16}},e.position==="start"&&{marginRight:8},e.position==="end"&&{marginLeft:8},e.disablePointerEvents===!0&&{pointerEvents:"none"})),yAe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiInputAdornment"}),{children:i,className:o,component:a="div",disablePointerEvents:s=!1,disableTypography:l=!1,position:c,variant:h}=r,p=on(r,hAe),g=Rh()||{};let v=h;h&&g.variant,g&&!v&&(v=g.variant);const x=de({},r,{hiddenLabel:g.hiddenLabel,size:g.size,disablePointerEvents:s,position:c,variant:v}),b=mAe(x);return F.jsx(lR.Provider,{value:null,children:F.jsx(gAe,de({as:a,ownerState:x,className:Kt(b.root,o),ref:n},p,{children:typeof i=="string"&&!l?F.jsx(Bn,{color:"text.secondary",children:i}):F.jsxs(W.Fragment,{children:[c==="start"?F9||(F9=F.jsx("span",{className:"notranslate",children:"​"})):null,i]})}))})}),vAe=yAe;function xAe(t){return Vn("MuiInputLabel",t)}Wn("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const _Ae=["disableAnimation","margin","shrink","variant","className"],bAe=t=>{const{classes:e,formControl:n,size:r,shrink:i,disableAnimation:o,variant:a,required:s}=t,l={root:["root",n&&"formControl",!o&&"animated",i&&"shrink",r&&r!=="normal"&&`size${en(r)}`,a],asterisk:[s&&"asterisk"]},c=Hn(l,xAe,e);return de({},e,c)},wAe=tn(VCe,{shouldForwardProp:t=>Jl(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${zS.asterisk}`]:e.asterisk},e.root,n.formControl&&e.formControl,n.size==="small"&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})(({theme:t,ownerState:e})=>de({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},e.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},e.size==="small"&&{transform:"translate(0, 17px) scale(1)"},e.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!e.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},e.variant==="filled"&&de({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},e.shrink&&de({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},e.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),e.variant==="outlined"&&de({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},e.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),SAe=W.forwardRef(function(e,n){const r=Jn({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,shrink:o,className:a}=r,s=on(r,_Ae),l=Rh();let c=o;typeof c>"u"&&l&&(c=l.filled||l.focused||l.adornedStart);const h=yy({props:r,muiFormControl:l,states:["size","variant","required","focused"]}),p=de({},r,{disableAnimation:i,formControl:l,shrink:c,size:h.size,variant:h.variant,required:h.required,focused:h.focused}),g=bAe(p);return F.jsx(wAe,de({"data-shrink":c,ownerState:p,ref:n,className:Kt(g.root,a)},s,{classes:g}))}),dE=SAe;function MAe(t){return Vn("MuiLinearProgress",t)}Wn("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const EAe=["className","color","value","valueBuffer","variant"];let f1=t=>t,B9,$9,j9,U9,V9,W9;const xF=4,TAe=j0(B9||(B9=f1`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),CAe=j0($9||($9=f1`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),AAe=j0(j9||(j9=f1`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),PAe=t=>{const{classes:e,variant:n,color:r}=t,i={root:["root",`color${en(r)}`,n],dashed:["dashed",`dashedColor${en(r)}`],bar1:["bar",`barColor${en(r)}`,(n==="indeterminate"||n==="query")&&"bar1Indeterminate",n==="determinate"&&"bar1Determinate",n==="buffer"&&"bar1Buffer"],bar2:["bar",n!=="buffer"&&`barColor${en(r)}`,n==="buffer"&&`color${en(r)}`,(n==="indeterminate"||n==="query")&&"bar2Indeterminate",n==="buffer"&&"bar2Buffer"]};return Hn(i,MAe,e)},X$=(t,e)=>e==="inherit"?"currentColor":t.vars?t.vars.palette.LinearProgress[`${e}Bg`]:t.palette.mode==="light"?vb(t.palette[e].main,.62):yb(t.palette[e].main,.5),kAe=tn("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${en(n.color)}`],e[n.variant]]}})(({ownerState:t,theme:e})=>de({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:X$(e,t.color)},t.color==="inherit"&&t.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},t.variant==="buffer"&&{backgroundColor:"transparent"},t.variant==="query"&&{transform:"rotate(180deg)"})),IAe=tn("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.dashed,e[`dashedColor${en(n.color)}`]]}})(({ownerState:t,theme:e})=>{const n=X$(e,t.color);return de({position:"absolute",marginTop:0,height:"100%",width:"100%"},t.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},J2(U9||(U9=f1`
    animation: ${0} 3s infinite linear;
  `),AAe)),RAe=tn("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e[`barColor${en(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar1Indeterminate,n.variant==="determinate"&&e.bar1Determinate,n.variant==="buffer"&&e.bar1Buffer]}})(({ownerState:t,theme:e})=>de({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:t.color==="inherit"?"currentColor":(e.vars||e).palette[t.color].main},t.variant==="determinate"&&{transition:`transform .${xF}s linear`},t.variant==="buffer"&&{zIndex:1,transition:`transform .${xF}s linear`}),({ownerState:t})=>(t.variant==="indeterminate"||t.variant==="query")&&J2(V9||(V9=f1`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),TAe)),OAe=tn("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e[`barColor${en(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar2Indeterminate,n.variant==="buffer"&&e.bar2Buffer]}})(({ownerState:t,theme:e})=>de({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},t.variant!=="buffer"&&{backgroundColor:t.color==="inherit"?"currentColor":(e.vars||e).palette[t.color].main},t.color==="inherit"&&{opacity:.3},t.variant==="buffer"&&{backgroundColor:X$(e,t.color),transition:`transform .${xF}s linear`}),({ownerState:t})=>(t.variant==="indeterminate"||t.variant==="query")&&J2(W9||(W9=f1`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),CAe)),LAe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiLinearProgress"}),{className:i,color:o="primary",value:a,valueBuffer:s,variant:l="indeterminate"}=r,c=on(r,EAe),h=de({},r,{color:o,variant:l}),p=PAe(h),g=xd(),v={},x={bar1:{},bar2:{}};if((l==="determinate"||l==="buffer")&&a!==void 0){v["aria-valuenow"]=Math.round(a),v["aria-valuemin"]=0,v["aria-valuemax"]=100;let b=a-100;g.direction==="rtl"&&(b=-b),x.bar1.transform=`translateX(${b}%)`}if(l==="buffer"&&s!==void 0){let b=(s||0)-100;g.direction==="rtl"&&(b=-b),x.bar2.transform=`translateX(${b}%)`}return F.jsxs(kAe,de({className:Kt(p.root,i),ownerState:h,role:"progressbar"},v,{ref:n},c,{children:[l==="buffer"?F.jsx(IAe,{className:p.dashed,ownerState:h}):null,F.jsx(RAe,{className:p.bar1,ownerState:h,style:x.bar1}),l==="determinate"?null:F.jsx(OAe,{className:p.bar2,ownerState:h,style:x.bar2})]}))}),DAe=LAe;function NAe(t){return Vn("MuiLink",t)}const zAe=Wn("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),FAe=zAe,nre={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},BAe=t=>nre[t]||t,$Ae=({theme:t,ownerState:e})=>{const n=BAe(e.color),r=mb(t,`palette.${n}`,!1)||e.color,i=mb(t,`palette.${n}Channel`);return"vars"in t&&i?`rgba(${i} / 0.4)`:Ji(r,.4)},jAe=$Ae,UAe=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],VAe=t=>{const{classes:e,component:n,focusVisible:r,underline:i}=t,o={root:["root",`underline${en(i)}`,n==="button"&&"button",r&&"focusVisible"]};return Hn(o,NAe,e)},WAe=tn(Bn,{name:"MuiLink",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`underline${en(n.underline)}`],n.component==="button"&&e.button]}})(({theme:t,ownerState:e})=>de({},e.underline==="none"&&{textDecoration:"none"},e.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},e.underline==="always"&&de({textDecoration:"underline"},e.color!=="inherit"&&{textDecorationColor:jAe({theme:t,ownerState:e})},{"&:hover":{textDecorationColor:"inherit"}}),e.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${FAe.focusVisible}`]:{outline:"auto"}})),HAe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiLink"}),{className:i,color:o="primary",component:a="a",onBlur:s,onFocus:l,TypographyClasses:c,underline:h="always",variant:p="inherit",sx:g}=r,v=on(r,UAe),{isFocusVisibleRef:x,onBlur:b,onFocus:M,ref:w}=iR(),[T,C]=W.useState(!1),I=Lo(n,w),R=Z=>{b(Z),x.current===!1&&C(!1),s&&s(Z)},O=Z=>{M(Z),x.current===!0&&C(!0),l&&l(Z)},B=de({},r,{color:o,component:a,focusVisible:T,underline:h,variant:p}),U=VAe(B);return F.jsx(WAe,de({color:o,className:Kt(U.root,i),classes:c,component:a,onBlur:R,onFocus:O,ref:I,ownerState:B,variant:p,sx:[...Object.keys(nre).includes(o)?[]:[{color:o}],...Array.isArray(g)?g:[g]]},v))}),GAe=HAe,qAe=W.createContext({}),O0=qAe;function YAe(t){return Vn("MuiList",t)}Wn("MuiList",["root","padding","dense","subheader"]);const XAe=["children","className","component","dense","disablePadding","subheader"],KAe=t=>{const{classes:e,disablePadding:n,dense:r,subheader:i}=t;return Hn({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},YAe,e)},ZAe=tn("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})(({ownerState:t})=>de({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})),JAe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiList"}),{children:i,className:o,component:a="ul",dense:s=!1,disablePadding:l=!1,subheader:c}=r,h=on(r,XAe),p=W.useMemo(()=>({dense:s}),[s]),g=de({},r,{component:a,dense:s,disablePadding:l}),v=KAe(g);return F.jsx(O0.Provider,{value:p,children:F.jsxs(ZAe,de({as:a,className:Kt(v.root,o),ref:n,ownerState:g},h,{children:[c,i]}))})}),QAe=JAe;function ePe(t){return Vn("MuiListItemButton",t)}const tPe=Wn("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),Pw=tPe,nPe=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],rPe=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters]},iPe=t=>{const{alignItems:e,classes:n,dense:r,disabled:i,disableGutters:o,divider:a,selected:s}=t,c=Hn({root:["root",r&&"dense",!o&&"gutters",a&&"divider",i&&"disabled",e==="flex-start"&&"alignItemsFlexStart",s&&"selected"]},ePe,n);return de({},n,c)},oPe=tn(om,{shouldForwardProp:t=>Jl(t)||t==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:rPe})(({theme:t,ownerState:e})=>de({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Pw.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Ji(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${Pw.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Ji(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${Pw.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Ji(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Ji(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${Pw.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${Pw.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},e.alignItems==="flex-start"&&{alignItems:"flex-start"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.dense&&{paddingTop:4,paddingBottom:4})),sPe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiListItemButton"}),{alignItems:i="center",autoFocus:o=!1,component:a="div",children:s,dense:l=!1,disableGutters:c=!1,divider:h=!1,focusVisibleClassName:p,selected:g=!1,className:v}=r,x=on(r,nPe),b=W.useContext(O0),M=W.useMemo(()=>({dense:l||b.dense||!1,alignItems:i,disableGutters:c}),[i,b.dense,l,c]),w=W.useRef(null);mu(()=>{o&&w.current&&w.current.focus()},[o]);const T=de({},r,{alignItems:i,dense:M.dense,disableGutters:c,divider:h,selected:g}),C=iPe(T),I=Lo(w,n);return F.jsx(O0.Provider,{value:M,children:F.jsx(oPe,de({ref:I,href:x.href||x.to,component:(x.href||x.to)&&a==="div"?"button":a,focusVisibleClassName:Kt(C.focusVisible,p),ownerState:T,className:Kt(C.root,v)},x,{classes:C,children:s}))})}),aPe=sPe;function lPe(t){return Vn("MuiListItemAvatar",t)}Wn("MuiListItemAvatar",["root","alignItemsFlexStart"]);const cPe=["className"],uPe=t=>{const{alignItems:e,classes:n}=t;return Hn({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},lPe,n)},dPe=tn("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(({ownerState:t})=>de({minWidth:56,flexShrink:0},t.alignItems==="flex-start"&&{marginTop:8})),fPe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiListItemAvatar"}),{className:i}=r,o=on(r,cPe),a=W.useContext(O0),s=de({},r,{alignItems:a.alignItems}),l=uPe(s);return F.jsx(dPe,de({className:Kt(l.root,i),ownerState:s,ref:n},o))}),hPe=fPe,pPe=Wn("MuiListItemIcon",["root","alignItemsFlexStart"]),H9=pPe;function mPe(t){return Vn("MuiListItemText",t)}const gPe=Wn("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),$P=gPe,yPe=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],vPe=t=>{const{classes:e,inset:n,primary:r,secondary:i,dense:o}=t;return Hn({root:["root",n&&"inset",o&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},mPe,e)},xPe=tn("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${$P.primary}`]:e.primary},{[`& .${$P.secondary}`]:e.secondary},e.root,n.inset&&e.inset,n.primary&&n.secondary&&e.multiline,n.dense&&e.dense]}})(({ownerState:t})=>de({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},t.primary&&t.secondary&&{marginTop:6,marginBottom:6},t.inset&&{paddingLeft:56})),_Pe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiListItemText"}),{children:i,className:o,disableTypography:a=!1,inset:s=!1,primary:l,primaryTypographyProps:c,secondary:h,secondaryTypographyProps:p}=r,g=on(r,yPe),{dense:v}=W.useContext(O0);let x=l??i,b=h;const M=de({},r,{disableTypography:a,inset:s,primary:!!x,secondary:!!b,dense:v}),w=vPe(M);return x!=null&&x.type!==Bn&&!a&&(x=F.jsx(Bn,de({variant:v?"body2":"body1",className:w.primary,component:c!=null&&c.variant?void 0:"span",display:"block"},c,{children:x}))),b!=null&&b.type!==Bn&&!a&&(b=F.jsx(Bn,de({variant:"body2",className:w.secondary,color:"text.secondary",display:"block"},p,{children:b}))),F.jsxs(xPe,de({className:Kt(w.root,o),ownerState:M,ref:n},g,{children:[x,b]}))}),bPe=_Pe,wPe=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function ND(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function G9(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function rre(t,e){if(e===void 0)return!0;let n=t.innerText;return n===void 0&&(n=t.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.indexOf(e.keys.join(""))===0}function kw(t,e,n,r,i,o){let a=!1,s=i(t,e,e?n:!1);for(;s;){if(s===t.firstChild){if(a)return!1;a=!0}const l=r?!1:s.disabled||s.getAttribute("aria-disabled")==="true";if(!s.hasAttribute("tabindex")||!rre(s,o)||l)s=i(t,s,n);else return s.focus(),!0}return!1}const SPe=W.forwardRef(function(e,n){const{actions:r,autoFocus:i=!1,autoFocusItem:o=!1,children:a,className:s,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:h,variant:p="selectedMenu"}=e,g=on(e,wPe),v=W.useRef(null),x=W.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});mu(()=>{i&&v.current.focus()},[i]),W.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(C,I)=>{const R=!v.current.style.width;if(C.clientHeight<v.current.clientHeight&&R){const O=`${rne(Os(C))}px`;v.current.style[I.direction==="rtl"?"paddingLeft":"paddingRight"]=O,v.current.style.width=`calc(100% + ${O})`}return v.current}}),[]);const b=C=>{const I=v.current,R=C.key,O=Os(I).activeElement;if(R==="ArrowDown")C.preventDefault(),kw(I,O,c,l,ND);else if(R==="ArrowUp")C.preventDefault(),kw(I,O,c,l,G9);else if(R==="Home")C.preventDefault(),kw(I,null,c,l,ND);else if(R==="End")C.preventDefault(),kw(I,null,c,l,G9);else if(R.length===1){const B=x.current,U=R.toLowerCase(),Z=performance.now();B.keys.length>0&&(Z-B.lastTime>500?(B.keys=[],B.repeating=!0,B.previousKeyMatched=!0):B.repeating&&U!==B.keys[0]&&(B.repeating=!1)),B.lastTime=Z,B.keys.push(U);const j=O&&!B.repeating&&rre(O,B);B.previousKeyMatched&&(j||kw(I,O,!1,l,ND,B))?C.preventDefault():B.previousKeyMatched=!1}h&&h(C)},M=Lo(v,n);let w=-1;W.Children.forEach(a,(C,I)=>{if(!W.isValidElement(C)){w===I&&(w+=1,w>=a.length&&(w=-1));return}C.props.disabled||(p==="selectedMenu"&&C.props.selected||w===-1)&&(w=I),w===I&&(C.props.disabled||C.props.muiSkipListHighlight||C.type.muiSkipListHighlight)&&(w+=1,w>=a.length&&(w=-1))});const T=W.Children.map(a,(C,I)=>{if(I===w){const R={};return o&&(R.autoFocus=!0),C.props.tabIndex===void 0&&p==="selectedMenu"&&(R.tabIndex=0),W.cloneElement(C,R)}return C});return F.jsx(QAe,de({role:"menu",ref:M,className:s,onKeyDown:b,tabIndex:i?0:-1},g,{children:T}))}),MPe=SPe;function EPe(t){return Vn("MuiPopover",t)}Wn("MuiPopover",["root","paper"]);const TPe=["onEntering"],CPe=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],APe=["slotProps"];function q9(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.height/2:e==="bottom"&&(n=t.height),n}function Y9(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.width/2:e==="right"&&(n=t.width),n}function X9(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function zD(t){return typeof t=="function"?t():t}const PPe=t=>{const{classes:e}=t;return Hn({root:["root"],paper:["paper"]},EPe,e)},kPe=tn(JTe,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),ire=tn(Ls,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),IPe=W.forwardRef(function(e,n){var r,i,o;const a=Jn({props:e,name:"MuiPopover"}),{action:s,anchorEl:l,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:h,anchorReference:p="anchorEl",children:g,className:v,container:x,elevation:b=8,marginThreshold:M=16,open:w,PaperProps:T={},slots:C,slotProps:I,transformOrigin:R={vertical:"top",horizontal:"left"},TransitionComponent:O=BP,transitionDuration:B="auto",TransitionProps:{onEntering:U}={},disableScrollLock:Z=!1}=a,j=on(a.TransitionProps,TPe),X=on(a,CPe),le=(r=I==null?void 0:I.paper)!=null?r:T,me=W.useRef(),ie=Lo(me,le.ref),ce=de({},a,{anchorOrigin:c,anchorReference:p,elevation:b,marginThreshold:M,externalPaperSlotProps:le,transformOrigin:R,TransitionComponent:O,transitionDuration:B,TransitionProps:j}),fe=PPe(ce),xe=W.useCallback(()=>{if(p==="anchorPosition")return h;const et=zD(l),Tt=(et&&et.nodeType===1?et:Os(me.current).body).getBoundingClientRect();return{top:Tt.top+q9(Tt,c.vertical),left:Tt.left+Y9(Tt,c.horizontal)}},[l,c.horizontal,c.vertical,h,p]),te=W.useCallback(et=>({vertical:q9(et,R.vertical),horizontal:Y9(et,R.horizontal)}),[R.horizontal,R.vertical]),he=W.useCallback(et=>{const ot={width:et.offsetWidth,height:et.offsetHeight},Tt=te(ot);if(p==="none")return{top:null,left:null,transformOrigin:X9(Tt)};const Ct=xe();let Bt=Ct.top-Tt.vertical,Gt=Ct.left-Tt.horizontal;const sn=Bt+ot.height,Je=Gt+ot.width,Ce=Th(zD(l)),_e=Ce.innerHeight-M,ht=Ce.innerWidth-M;if(M!==null&&Bt<M){const dt=Bt-M;Bt-=dt,Tt.vertical+=dt}else if(M!==null&&sn>_e){const dt=sn-_e;Bt-=dt,Tt.vertical+=dt}if(M!==null&&Gt<M){const dt=Gt-M;Gt-=dt,Tt.horizontal+=dt}else if(Je>ht){const dt=Je-ht;Gt-=dt,Tt.horizontal+=dt}return{top:`${Math.round(Bt)}px`,left:`${Math.round(Gt)}px`,transformOrigin:X9(Tt)}},[l,p,xe,te,M]),[ve,ze]=W.useState(w),Ue=W.useCallback(()=>{const et=me.current;if(!et)return;const ot=he(et);ot.top!==null&&(et.style.top=ot.top),ot.left!==null&&(et.style.left=ot.left),et.style.transformOrigin=ot.transformOrigin,ze(!0)},[he]);W.useEffect(()=>(Z&&window.addEventListener("scroll",Ue),()=>window.removeEventListener("scroll",Ue)),[l,Z,Ue]);const rt=(et,ot)=>{U&&U(et,ot),Ue()},Be=()=>{ze(!1)};W.useEffect(()=>{w&&Ue()}),W.useImperativeHandle(s,()=>w?{updatePosition:()=>{Ue()}}:null,[w,Ue]),W.useEffect(()=>{if(!w)return;const et=rE(()=>{Ue()}),ot=Th(l);return ot.addEventListener("resize",et),()=>{et.clear(),ot.removeEventListener("resize",et)}},[l,w,Ue]);let st=B;B==="auto"&&!O.muiSupportAuto&&(st=void 0);const ct=x||(l?Os(zD(l)).body:void 0),Dt=(i=C==null?void 0:C.root)!=null?i:kPe,zt=(o=C==null?void 0:C.paper)!=null?o:ire,Fe=Pc({elementType:zt,externalSlotProps:de({},le,{style:ve?le.style:de({},le.style,{opacity:0})}),additionalProps:{elevation:b,ref:ie},ownerState:ce,className:Kt(fe.paper,le==null?void 0:le.className)}),lt=Pc({elementType:Dt,externalSlotProps:(I==null?void 0:I.root)||{},externalForwardedProps:X,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:ct,open:w},ownerState:ce,className:Kt(fe.root,v)}),{slotProps:Qe}=lt,ge=on(lt,APe);return F.jsx(Dt,de({},ge,!LP(Dt)&&{slotProps:Qe,disableScrollLock:Z},{children:F.jsx(O,de({appear:!0,in:w,onEntering:rt,onExited:Be,timeout:st},j,{children:F.jsx(zt,de({},Fe,{children:g}))}))}))}),RPe=IPe;function OPe(t){return Vn("MuiMenu",t)}Wn("MuiMenu",["root","paper","list"]);const LPe=["onEntering"],DPe=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],NPe={vertical:"top",horizontal:"right"},zPe={vertical:"top",horizontal:"left"},FPe=t=>{const{classes:e}=t;return Hn({root:["root"],paper:["paper"],list:["list"]},OPe,e)},BPe=tn(RPe,{shouldForwardProp:t=>Jl(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),$Pe=tn(ire,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),jPe=tn(MPe,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),UPe=W.forwardRef(function(e,n){var r,i;const o=Jn({props:e,name:"MuiMenu"}),{autoFocus:a=!0,children:s,className:l,disableAutoFocusItem:c=!1,MenuListProps:h={},onClose:p,open:g,PaperProps:v={},PopoverClasses:x,transitionDuration:b="auto",TransitionProps:{onEntering:M}={},variant:w="selectedMenu",slots:T={},slotProps:C={}}=o,I=on(o.TransitionProps,LPe),R=on(o,DPe),O=xd(),B=O.direction==="rtl",U=de({},o,{autoFocus:a,disableAutoFocusItem:c,MenuListProps:h,onEntering:M,PaperProps:v,transitionDuration:b,TransitionProps:I,variant:w}),Z=FPe(U),j=a&&!c&&g,X=W.useRef(null),le=(he,ve)=>{X.current&&X.current.adjustStyleForScrollbar(he,O),M&&M(he,ve)},me=he=>{he.key==="Tab"&&(he.preventDefault(),p&&p(he,"tabKeyDown"))};let ie=-1;W.Children.map(s,(he,ve)=>{W.isValidElement(he)&&(he.props.disabled||(w==="selectedMenu"&&he.props.selected||ie===-1)&&(ie=ve))});const ce=(r=T.paper)!=null?r:$Pe,fe=(i=C.paper)!=null?i:v,xe=Pc({elementType:T.root,externalSlotProps:C.root,ownerState:U,className:[Z.root,l]}),te=Pc({elementType:ce,externalSlotProps:fe,ownerState:U,className:Z.paper});return F.jsx(BPe,de({onClose:p,anchorOrigin:{vertical:"bottom",horizontal:B?"right":"left"},transformOrigin:B?NPe:zPe,slots:{paper:ce,root:T.root},slotProps:{root:xe,paper:te},open:g,ref:n,transitionDuration:b,TransitionProps:de({onEntering:le},I),ownerState:U},R,{classes:x,children:F.jsx(jPe,de({onKeyDown:me,actions:X,autoFocus:a&&(ie===-1||c),autoFocusItem:j,variant:w},h,{className:Kt(Z.list,h.className),children:s}))}))}),K$=UPe;function VPe(t){return Vn("MuiMenuItem",t)}const WPe=Wn("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),Iw=WPe,HPe=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],GPe=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.divider&&e.divider,!n.disableGutters&&e.gutters]},qPe=t=>{const{disabled:e,dense:n,divider:r,disableGutters:i,selected:o,classes:a}=t,l=Hn({root:["root",n&&"dense",e&&"disabled",!i&&"gutters",r&&"divider",o&&"selected"]},VPe,a);return de({},a,l)},YPe=tn(om,{shouldForwardProp:t=>Jl(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:GPe})(({theme:t,ownerState:e})=>de({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Iw.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Ji(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${Iw.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Ji(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${Iw.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Ji(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Ji(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${Iw.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${Iw.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${I9.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${I9.inset}`]:{marginLeft:52},[`& .${$P.root}`]:{marginTop:0,marginBottom:0},[`& .${$P.inset}`]:{paddingLeft:36},[`& .${H9.root}`]:{minWidth:36}},!e.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},e.dense&&de({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{[`& .${H9.root} svg`]:{fontSize:"1.25rem"}}))),XPe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:o="li",dense:a=!1,divider:s=!1,disableGutters:l=!1,focusVisibleClassName:c,role:h="menuitem",tabIndex:p,className:g}=r,v=on(r,HPe),x=W.useContext(O0),b=W.useMemo(()=>({dense:a||x.dense||!1,disableGutters:l}),[x.dense,a,l]),M=W.useRef(null);mu(()=>{i&&M.current&&M.current.focus()},[i]);const w=de({},r,{dense:b.dense,divider:s,disableGutters:l}),T=qPe(r),C=Lo(M,n);let I;return r.disabled||(I=p!==void 0?p:-1),F.jsx(O0.Provider,{value:b,children:F.jsx(YPe,de({ref:C,role:h,tabIndex:I,component:o,focusVisibleClassName:Kt(T.focusVisible,c),className:Kt(T.root,g)},v,{ownerState:w,classes:T}))})}),lu=XPe;function KPe(t){return Vn("MuiNativeSelect",t)}const ZPe=Wn("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Z$=ZPe,JPe=["className","disabled","error","IconComponent","inputRef","variant"],QPe=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:o,error:a}=t,s={select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${en(n)}`,o&&"iconOpen",r&&"disabled"]};return Hn(s,KPe,e)},ore=({ownerState:t,theme:e})=>de({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":de({},e.vars?{backgroundColor:`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:e.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${Z$.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},t.variant==="filled"&&{"&&&":{paddingRight:32}},t.variant==="outlined"&&{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}),eke=tn("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Jl,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{[`&.${Z$.multiple}`]:e.multiple}]}})(ore),sre=({ownerState:t,theme:e})=>de({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${Z$.disabled}`]:{color:(e.vars||e).palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},t.variant==="filled"&&{right:7},t.variant==="outlined"&&{right:7}),tke=tn("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${en(n.variant)}`],n.open&&e.iconOpen]}})(sre),nke=W.forwardRef(function(e,n){const{className:r,disabled:i,error:o,IconComponent:a,inputRef:s,variant:l="standard"}=e,c=on(e,JPe),h=de({},e,{disabled:i,variant:l,error:o}),p=QPe(h);return F.jsxs(W.Fragment,{children:[F.jsx(eke,de({ownerState:h,className:Kt(p.select,r),disabled:i,ref:s||n},c)),e.multiple?null:F.jsx(tke,{as:a,ownerState:h,className:p.icon})]})}),rke=nke;var K9;const ike=["children","classes","className","label","notched"],oke=tn("fieldset",{shouldForwardProp:Jl})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),ske=tn("legend",{shouldForwardProp:Jl})(({ownerState:t,theme:e})=>de({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},t.withLabel&&de({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})})));function ake(t){const{className:e,label:n,notched:r}=t,i=on(t,ike),o=n!=null&&n!=="",a=de({},t,{notched:r,withLabel:o});return F.jsx(oke,de({"aria-hidden":!0,className:e,ownerState:a},i,{children:F.jsx(ske,{ownerState:a,children:o?F.jsx("span",{children:n}):K9||(K9=F.jsx("span",{className:"notranslate",children:"​"}))})}))}const lke=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],cke=t=>{const{classes:e}=t,r=Hn({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},B2e,e);return de({},e,r)},uke=tn(dR,{shouldForwardProp:t=>Jl(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:cR})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return de({position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${Qm.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${Qm.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${Qm.focused} .${Qm.notchedOutline}`]:{borderColor:(t.vars||t).palette[e.color].main,borderWidth:2},[`&.${Qm.error} .${Qm.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${Qm.disabled} .${Qm.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}},e.startAdornment&&{paddingLeft:14},e.endAdornment&&{paddingRight:14},e.multiline&&de({padding:"16.5px 14px"},e.size==="small"&&{padding:"8.5px 14px"}))}),dke=tn(ake,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(t,e)=>e.notchedOutline})(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),fke=tn(fR,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:uR})(({theme:t,ownerState:e})=>de({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{padding:"8.5px 14px"},e.multiline&&{padding:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0})),are=W.forwardRef(function(e,n){var r,i,o,a,s;const l=Jn({props:e,name:"MuiOutlinedInput"}),{components:c={},fullWidth:h=!1,inputComponent:p="input",label:g,multiline:v=!1,notched:x,slots:b={},type:M="text"}=l,w=on(l,lke),T=cke(l),C=Rh(),I=yy({props:l,muiFormControl:C,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),R=de({},l,{color:I.color||"primary",disabled:I.disabled,error:I.error,focused:I.focused,formControl:C,fullWidth:h,hiddenLabel:I.hiddenLabel,multiline:v,size:I.size,type:M}),O=(r=(i=b.root)!=null?i:c.Root)!=null?r:uke,B=(o=(a=b.input)!=null?a:c.Input)!=null?o:fke;return F.jsx(q$,de({slots:{root:O,input:B},renderSuffix:U=>F.jsx(dke,{ownerState:R,className:T.notchedOutline,label:g!=null&&g!==""&&I.required?s||(s=F.jsxs(W.Fragment,{children:[g," ","*"]})):g,notched:typeof x<"u"?x:!!(U.startAdornment||U.filled||U.focused)}),fullWidth:h,inputComponent:p,multiline:v,ref:n,type:M},w,{classes:de({},T,{notchedOutline:null})}))});are.muiName="Input";const J$=are;function hke(t){return Vn("MuiSelect",t)}const pke=Wn("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Rw=pke;var Z9;const mke=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],gke=tn("div",{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`&.${Rw.select}`]:e.select},{[`&.${Rw.select}`]:e[n.variant]},{[`&.${Rw.error}`]:e.error},{[`&.${Rw.multiple}`]:e.multiple}]}})(ore,{[`&.${Rw.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),yke=tn("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${en(n.variant)}`],n.open&&e.iconOpen]}})(sre),vke=tn("input",{shouldForwardProp:t=>I1e(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(t,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function J9(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}function xke(t){return t==null||typeof t=="string"&&!t.trim()}const _ke=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:o,error:a}=t,s={select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${en(n)}`,o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return Hn(s,hke,e)},bke=W.forwardRef(function(e,n){var r;const{"aria-describedby":i,"aria-label":o,autoFocus:a,autoWidth:s,children:l,className:c,defaultOpen:h,defaultValue:p,disabled:g,displayEmpty:v,error:x=!1,IconComponent:b,inputRef:M,labelId:w,MenuProps:T={},multiple:C,name:I,onBlur:R,onChange:O,onClose:B,onFocus:U,onOpen:Z,open:j,readOnly:X,renderValue:le,SelectDisplayProps:me={},tabIndex:ie,value:ce,variant:fe="standard"}=e,xe=on(e,mke),[te,he]=gb({controlled:ce,default:p,name:"Select"}),[ve,ze]=gb({controlled:j,default:h,name:"Select"}),Ue=W.useRef(null),rt=W.useRef(null),[Be,st]=W.useState(null),{current:ct}=W.useRef(j!=null),[Dt,zt]=W.useState(),Fe=Lo(n,M),lt=W.useCallback(un=>{rt.current=un,un&&st(un)},[]),Qe=Be==null?void 0:Be.parentNode;W.useImperativeHandle(Fe,()=>({focus:()=>{rt.current.focus()},node:Ue.current,value:te}),[te]),W.useEffect(()=>{h&&ve&&Be&&!ct&&(zt(s?null:Qe.clientWidth),rt.current.focus())},[Be,s]),W.useEffect(()=>{a&&rt.current.focus()},[a]),W.useEffect(()=>{if(!w)return;const un=Os(rt.current).getElementById(w);if(un){const an=()=>{getSelection().isCollapsed&&rt.current.focus()};return un.addEventListener("click",an),()=>{un.removeEventListener("click",an)}}},[w]);const ge=(un,an)=>{un?Z&&Z(an):B&&B(an),ct||(zt(s?null:Qe.clientWidth),ze(un))},et=un=>{un.button===0&&(un.preventDefault(),rt.current.focus(),ge(!0,un))},ot=un=>{ge(!1,un)},Tt=W.Children.toArray(l),Ct=un=>{const an=Tt.find(Ot=>Ot.props.value===un.target.value);an!==void 0&&(he(an.props.value),O&&O(un,an))},Bt=un=>an=>{let Ot;if(an.currentTarget.hasAttribute("tabindex")){if(C){Ot=Array.isArray(te)?te.slice():[];const Ie=te.indexOf(un.props.value);Ie===-1?Ot.push(un.props.value):Ot.splice(Ie,1)}else Ot=un.props.value;if(un.props.onClick&&un.props.onClick(an),te!==Ot&&(he(Ot),O)){const Ie=an.nativeEvent||an,Ve=new Ie.constructor(Ie.type,Ie);Object.defineProperty(Ve,"target",{writable:!0,value:{value:Ot,name:I}}),O(Ve,un)}C||ge(!1,an)}},Gt=un=>{X||[" ","ArrowUp","ArrowDown","Enter"].indexOf(un.key)!==-1&&(un.preventDefault(),ge(!0,un))},sn=Be!==null&&ve,Je=un=>{!sn&&R&&(Object.defineProperty(un,"target",{writable:!0,value:{value:te,name:I}}),R(un))};delete xe["aria-invalid"];let Ce,_e;const ht=[];let dt=!1;(FP({value:te})||v)&&(le?Ce=le(te):dt=!0);const Wt=Tt.map(un=>{if(!W.isValidElement(un))return null;let an;if(C){if(!Array.isArray(te))throw new Error(P0(2));an=te.some(Ot=>J9(Ot,un.props.value)),an&&dt&&ht.push(un.props.children)}else an=J9(te,un.props.value),an&&dt&&(_e=un.props.children);return W.cloneElement(un,{"aria-selected":an?"true":"false",onClick:Bt(un),onKeyUp:Ot=>{Ot.key===" "&&Ot.preventDefault(),un.props.onKeyUp&&un.props.onKeyUp(Ot)},role:"option",selected:an,value:void 0,"data-value":un.props.value})});dt&&(C?ht.length===0?Ce=null:Ce=ht.reduce((un,an,Ot)=>(un.push(an),Ot<ht.length-1&&un.push(", "),un),[]):Ce=_e);let jt=Dt;!s&&ct&&Be&&(jt=Qe.clientWidth);let Sn;typeof ie<"u"?Sn=ie:Sn=g?null:0;const cn=me.id||(I?`mui-component-select-${I}`:void 0),Rt=de({},e,{variant:fe,value:te,open:sn,error:x}),nn=_ke(Rt),An=de({},T.PaperProps,(r=T.slotProps)==null?void 0:r.paper),mt=nR();return F.jsxs(W.Fragment,{children:[F.jsx(gke,de({ref:lt,tabIndex:Sn,role:"combobox","aria-controls":mt,"aria-disabled":g?"true":void 0,"aria-expanded":sn?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[w,cn].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:Gt,onMouseDown:g||X?null:et,onBlur:Je,onFocus:U},me,{ownerState:Rt,className:Kt(me.className,nn.select,c),id:cn,children:xke(Ce)?Z9||(Z9=F.jsx("span",{className:"notranslate",children:"​"})):Ce})),F.jsx(vke,de({"aria-invalid":x,value:Array.isArray(te)?te.join(","):te,name:I,ref:Ue,"aria-hidden":!0,onChange:Ct,tabIndex:-1,disabled:g,className:nn.nativeInput,autoFocus:a,ownerState:Rt},xe)),F.jsx(yke,{as:b,className:nn.icon,ownerState:Rt}),F.jsx(K$,de({id:`menu-${I||""}`,anchorEl:Qe,open:sn,onClose:ot,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},T,{MenuListProps:de({"aria-labelledby":w,role:"listbox","aria-multiselectable":C?"true":void 0,disableListWrap:!0,id:mt},T.MenuListProps),slotProps:de({},T.slotProps,{paper:de({},An,{style:de({minWidth:jt},An!=null?An.style:null)})}),children:Wt}))]})}),wke=bke,Ske=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Mke=["root"],Eke=t=>{const{classes:e}=t;return e},Q$={name:"MuiSelect",overridesResolver:(t,e)=>e.root,shouldForwardProp:t=>Jl(t)&&t!=="variant",slot:"Root"},Tke=tn(tre,Q$)(""),Cke=tn(J$,Q$)(""),Ake=tn(Zne,Q$)(""),lre=W.forwardRef(function(e,n){const r=Jn({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:o,classes:a={},className:s,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:h=V2e,id:p,input:g,inputProps:v,label:x,labelId:b,MenuProps:M,multiple:w=!1,native:T=!1,onClose:C,onOpen:I,open:R,renderValue:O,SelectDisplayProps:B,variant:U="outlined"}=r,Z=on(r,Ske),j=T?rke:wke,X=Rh(),le=yy({props:r,muiFormControl:X,states:["variant","error"]}),me=le.variant||U,ie=de({},r,{variant:me,classes:a}),ce=Eke(ie),fe=on(ce,Mke),xe=g||{standard:F.jsx(Tke,{ownerState:ie}),outlined:F.jsx(Cke,{label:x,ownerState:ie}),filled:F.jsx(Ake,{ownerState:ie})}[me],te=Lo(n,xe.ref);return F.jsx(W.Fragment,{children:W.cloneElement(xe,de({inputComponent:j,inputProps:de({children:o,error:le.error,IconComponent:h,variant:me,type:void 0,multiple:w},T?{id:p}:{autoWidth:i,defaultOpen:l,displayEmpty:c,labelId:b,MenuProps:M,onClose:C,onOpen:I,open:R,renderValue:O,SelectDisplayProps:de({id:p},B)},v,{classes:v?Fa(fe,v.classes):fe},g?g.props.inputProps:{})},(w&&T||c)&&me==="outlined"?{notched:!0}:{},{ref:te,className:Kt(xe.props.className,s,ce.root)},!g&&{variant:me},Z))})});lre.muiName="Select";const fE=lre;function Pke(t){return Vn("MuiSnackbarContent",t)}Wn("MuiSnackbarContent",["root","message","action"]);const kke=["action","className","message","role"],Ike=t=>{const{classes:e}=t;return Hn({root:["root"],action:["action"],message:["message"]},Pke,e)},Rke=tn(Ls,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>{const e=t.palette.mode==="light"?.8:.98,n=Pbe(t.palette.background.default,e);return de({},t.typography.body2,{color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(n),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),Oke=tn("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(t,e)=>e.message})({padding:"8px 0"}),Lke=tn("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(t,e)=>e.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),Dke=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiSnackbarContent"}),{action:i,className:o,message:a,role:s="alert"}=r,l=on(r,kke),c=r,h=Ike(c);return F.jsxs(Rke,de({role:s,square:!0,elevation:6,className:Kt(h.root,o),ownerState:c,ref:n},l,{children:[F.jsx(Oke,{className:h.message,ownerState:c,children:a}),i?F.jsx(Lke,{className:h.action,ownerState:c,children:i}):null]}))}),Nke=Dke;function zke(t){return Vn("MuiSnackbar",t)}Wn("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const Fke=["onEnter","onExited"],Bke=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],$ke=t=>{const{classes:e,anchorOrigin:n}=t,r={root:["root",`anchorOrigin${en(n.vertical)}${en(n.horizontal)}`]};return Hn(r,zke,e)},Q9=tn("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`anchorOrigin${en(n.anchorOrigin.vertical)}${en(n.anchorOrigin.horizontal)}`]]}})(({theme:t,ownerState:e})=>{const n={left:"50%",right:"auto",transform:"translateX(-50%)"};return de({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},e.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},e.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},e.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[t.breakpoints.up("sm")]:de({},e.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},e.anchorOrigin.horizontal==="center"&&n,e.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},e.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),jke=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiSnackbar"}),i=xd(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{action:a,anchorOrigin:{vertical:s,horizontal:l}={vertical:"bottom",horizontal:"left"},autoHideDuration:c=null,children:h,className:p,ClickAwayListenerProps:g,ContentProps:v,disableWindowBlurListener:x=!1,message:b,open:M,TransitionComponent:w=BP,transitionDuration:T=o,TransitionProps:{onEnter:C,onExited:I}={}}=r,R=on(r.TransitionProps,Fke),O=on(r,Bke),B=de({},r,{anchorOrigin:{vertical:s,horizontal:l},autoHideDuration:c,disableWindowBlurListener:x,TransitionComponent:w,transitionDuration:T}),U=$ke(B),{getRootProps:Z,onClickAway:j}=g2e(de({},B)),[X,le]=W.useState(!0),me=Pc({elementType:Q9,getSlotProps:Z,externalForwardedProps:O,ownerState:B,additionalProps:{ref:n},className:[U.root,p]}),ie=fe=>{le(!0),I&&I(fe)},ce=(fe,xe)=>{le(!1),C&&C(fe,xe)};return!M&&X?null:F.jsx(zSe,de({onClickAway:j},g,{children:F.jsx(Q9,de({},me,{children:F.jsx(w,de({appear:!0,in:M,timeout:T,direction:s==="top"?"down":"up",onEnter:ce,onExited:ie},R,{children:h||F.jsx(Nke,de({message:b,action:a},v))}))}))}))}),Uke=jke;function Vke(t){return Vn("MuiTooltip",t)}const Wke=Wn("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),kg=Wke,Hke=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function Gke(t){return Math.round(t*1e5)/1e5}const qke=t=>{const{classes:e,disableInteractive:n,arrow:r,touch:i,placement:o}=t,a={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch",`tooltipPlacement${en(o.split("-")[0])}`],arrow:["arrow"]};return Hn(a,Vke,e)},Yke=tn($ne,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.popper,!n.disableInteractive&&e.popperInteractive,n.arrow&&e.popperArrow,!n.open&&e.popperClose]}})(({theme:t,ownerState:e,open:n})=>de({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none"},!e.disableInteractive&&{pointerEvents:"auto"},!n&&{pointerEvents:"none"},e.arrow&&{[`&[data-popper-placement*="bottom"] .${kg.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${kg.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${kg.arrow}`]:de({},e.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${kg.arrow}`]:de({},e.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),Xke=tn("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.tooltip,n.touch&&e.touch,n.arrow&&e.tooltipArrow,e[`tooltipPlacement${en(n.placement.split("-")[0])}`]]}})(({theme:t,ownerState:e})=>de({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:Ji(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium},e.arrow&&{position:"relative",margin:0},e.touch&&{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${Gke(16/14)}em`,fontWeight:t.typography.fontWeightRegular},{[`.${kg.popper}[data-popper-placement*="left"] &`]:de({transformOrigin:"right center"},e.isRtl?de({marginLeft:"14px"},e.touch&&{marginLeft:"24px"}):de({marginRight:"14px"},e.touch&&{marginRight:"24px"})),[`.${kg.popper}[data-popper-placement*="right"] &`]:de({transformOrigin:"left center"},e.isRtl?de({marginRight:"14px"},e.touch&&{marginRight:"24px"}):de({marginLeft:"14px"},e.touch&&{marginLeft:"24px"})),[`.${kg.popper}[data-popper-placement*="top"] &`]:de({transformOrigin:"center bottom",marginBottom:"14px"},e.touch&&{marginBottom:"24px"}),[`.${kg.popper}[data-popper-placement*="bottom"] &`]:de({transformOrigin:"center top",marginTop:"14px"},e.touch&&{marginTop:"24px"})})),Kke=tn("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(t,e)=>e.arrow})(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:Ji(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let $T=!1;const eG=new iE;let Ow={x:0,y:0};function jT(t,e){return n=>{e&&e(n),t(n)}}const Zke=W.forwardRef(function(e,n){var r,i,o,a,s,l,c,h,p,g,v,x,b,M,w,T,C,I,R;const O=Jn({props:e,name:"MuiTooltip"}),{arrow:B=!1,children:U,components:Z={},componentsProps:j={},describeChild:X=!1,disableFocusListener:le=!1,disableHoverListener:me=!1,disableInteractive:ie=!1,disableTouchListener:ce=!1,enterDelay:fe=100,enterNextDelay:xe=0,enterTouchDelay:te=700,followCursor:he=!1,id:ve,leaveDelay:ze=0,leaveTouchDelay:Ue=1500,onClose:rt,onOpen:Be,open:st,placement:ct="bottom",PopperComponent:Dt,PopperProps:zt={},slotProps:Fe={},slots:lt={},title:Qe,TransitionComponent:ge=BP,TransitionProps:et}=O,ot=on(O,Hke),Tt=W.isValidElement(U)?U:F.jsx("span",{children:U}),Ct=xd(),Bt=Ct.direction==="rtl",[Gt,sn]=W.useState(),[Je,Ce]=W.useState(null),_e=W.useRef(!1),ht=ie||he,dt=Pg(),Wt=Pg(),jt=Pg(),Sn=Pg(),[cn,Rt]=gb({controlled:st,default:!1,name:"Tooltip",state:"open"});let nn=cn;const An=nR(ve),mt=W.useRef(),un=Wl(()=>{mt.current!==void 0&&(document.body.style.WebkitUserSelect=mt.current,mt.current=void 0),Sn.clear()});W.useEffect(()=>un,[un]);const an=yt=>{eG.clear(),$T=!0,Rt(!0),Be&&!nn&&Be(yt)},Ot=Wl(yt=>{eG.start(800+ze,()=>{$T=!1}),Rt(!1),rt&&nn&&rt(yt),dt.start(Ct.transitions.duration.shortest,()=>{_e.current=!1})}),Ie=yt=>{_e.current&&yt.type!=="touchstart"||(Gt&&Gt.removeAttribute("title"),Wt.clear(),jt.clear(),fe||$T&&xe?Wt.start($T?xe:fe,()=>{an(yt)}):an(yt))},Ve=yt=>{Wt.clear(),jt.start(ze,()=>{Ot(yt)})},{isFocusVisibleRef:Me,onBlur:it,onFocus:Qt,ref:Xe}=iR(),[,It]=W.useState(!1),Et=yt=>{it(yt),Me.current===!1&&(It(!1),Ve(yt))},we=yt=>{Gt||sn(yt.currentTarget),Qt(yt),Me.current===!0&&(It(!0),Ie(yt))},oe=yt=>{_e.current=!0;const vt=Tt.props;vt.onTouchStart&&vt.onTouchStart(yt)},pe=yt=>{oe(yt),jt.clear(),dt.clear(),un(),mt.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Sn.start(te,()=>{document.body.style.WebkitUserSelect=mt.current,Ie(yt)})},Te=yt=>{Tt.props.onTouchEnd&&Tt.props.onTouchEnd(yt),un(),jt.start(Ue,()=>{Ot(yt)})};W.useEffect(()=>{if(!nn)return;function yt(vt){(vt.key==="Escape"||vt.key==="Esc")&&Ot(vt)}return document.addEventListener("keydown",yt),()=>{document.removeEventListener("keydown",yt)}},[Ot,nn]);const Pe=Lo(Tt.ref,Xe,sn,n);!Qe&&Qe!==0&&(nn=!1);const Ne=W.useRef(),Ke=yt=>{const vt=Tt.props;vt.onMouseMove&&vt.onMouseMove(yt),Ow={x:yt.clientX,y:yt.clientY},Ne.current&&Ne.current.update()},qe={},je=typeof Qe=="string";X?(qe.title=!nn&&je&&!me?Qe:null,qe["aria-describedby"]=nn?An:null):(qe["aria-label"]=je?Qe:null,qe["aria-labelledby"]=nn&&!je?An:null);const tt=de({},qe,ot,Tt.props,{className:Kt(ot.className,Tt.props.className),onTouchStart:oe,ref:Pe},he?{onMouseMove:Ke}:{}),Nt={};ce||(tt.onTouchStart=pe,tt.onTouchEnd=Te),me||(tt.onMouseOver=jT(Ie,tt.onMouseOver),tt.onMouseLeave=jT(Ve,tt.onMouseLeave),ht||(Nt.onMouseOver=Ie,Nt.onMouseLeave=Ve)),le||(tt.onFocus=jT(we,tt.onFocus),tt.onBlur=jT(Et,tt.onBlur),ht||(Nt.onFocus=we,Nt.onBlur=Et));const Ut=W.useMemo(()=>{var yt;let vt=[{name:"arrow",enabled:!!Je,options:{element:Je,padding:4}}];return(yt=zt.popperOptions)!=null&&yt.modifiers&&(vt=vt.concat(zt.popperOptions.modifiers)),de({},zt.popperOptions,{modifiers:vt})},[Je,zt]),$t=de({},O,{isRtl:Bt,arrow:B,disableInteractive:ht,placement:ct,PopperComponentProp:Dt,touch:_e.current}),kn=qke($t),er=(r=(i=lt.popper)!=null?i:Z.Popper)!=null?r:Yke,En=(o=(a=(s=lt.transition)!=null?s:Z.Transition)!=null?a:ge)!=null?o:BP,$n=(l=(c=lt.tooltip)!=null?c:Z.Tooltip)!=null?l:Xke,sr=(h=(p=lt.arrow)!=null?p:Z.Arrow)!=null?h:Kke,$r=__(er,de({},zt,(g=Fe.popper)!=null?g:j.popper,{className:Kt(kn.popper,zt==null?void 0:zt.className,(v=(x=Fe.popper)!=null?x:j.popper)==null?void 0:v.className)}),$t),Ae=__(En,de({},et,(b=Fe.transition)!=null?b:j.transition),$t),ut=__($n,de({},(M=Fe.tooltip)!=null?M:j.tooltip,{className:Kt(kn.tooltip,(w=(T=Fe.tooltip)!=null?T:j.tooltip)==null?void 0:w.className)}),$t),bt=__(sr,de({},(C=Fe.arrow)!=null?C:j.arrow,{className:Kt(kn.arrow,(I=(R=Fe.arrow)!=null?R:j.arrow)==null?void 0:I.className)}),$t);return F.jsxs(W.Fragment,{children:[W.cloneElement(Tt,tt),F.jsx(er,de({as:Dt??$ne,placement:ct,anchorEl:he?{getBoundingClientRect:()=>({top:Ow.y,left:Ow.x,right:Ow.x,bottom:Ow.y,width:0,height:0})}:Gt,popperRef:Ne,open:Gt?nn:!1,id:An,transition:!0},Nt,$r,{popperOptions:Ut,children:({TransitionProps:yt})=>F.jsx(En,de({timeout:Ct.transitions.duration.shorter},yt,Ae,{children:F.jsxs($n,de({},ut,{children:[Qe,B?F.jsx(sr,de({},bt,{ref:Ce})):null]}))}))}))]})}),Mg=Zke;function Jke(t){return Vn("MuiSwitch",t)}const Qke=Wn("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Fl=Qke,eIe=["className","color","edge","size","sx"],tIe=t=>{const{classes:e,edge:n,size:r,color:i,checked:o,disabled:a}=t,s={root:["root",n&&`edge${en(n)}`,`size${en(r)}`],switchBase:["switchBase",`color${en(i)}`,o&&"checked",a&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=Hn(s,Jke,e);return de({},e,l)},nIe=tn("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.edge&&e[`edge${en(n.edge)}`],e[`size${en(n.size)}`]]}})(({ownerState:t})=>de({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},t.edge==="start"&&{marginLeft:-8},t.edge==="end"&&{marginRight:-8},t.size==="small"&&{width:40,height:24,padding:7,[`& .${Fl.thumb}`]:{width:16,height:16},[`& .${Fl.switchBase}`]:{padding:4,[`&.${Fl.checked}`]:{transform:"translateX(16px)"}}})),rIe=tn(Yne,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.switchBase,{[`& .${Fl.input}`]:e.input},n.color!=="default"&&e[`color${en(n.color)}`]]}})(({theme:t})=>({position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:`${t.palette.mode==="light"?t.palette.common.white:t.palette.grey[300]}`,transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),[`&.${Fl.checked}`]:{transform:"translateX(20px)"},[`&.${Fl.disabled}`]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:`${t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[600]}`},[`&.${Fl.checked} + .${Fl.track}`]:{opacity:.5},[`&.${Fl.disabled} + .${Fl.track}`]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:`${t.palette.mode==="light"?.12:.2}`},[`& .${Fl.input}`]:{left:"-100%",width:"300%"}}),({theme:t,ownerState:e})=>de({"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Ji(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${Fl.checked}`]:{color:(t.vars||t).palette[e.color].main,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Ji(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Fl.disabled}`]:{color:t.vars?t.vars.palette.Switch[`${e.color}DisabledColor`]:`${t.palette.mode==="light"?vb(t.palette[e.color].main,.62):yb(t.palette[e.color].main,.55)}`}},[`&.${Fl.checked} + .${Fl.track}`]:{backgroundColor:(t.vars||t).palette[e.color].main}})),iIe=tn("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(t,e)=>e.track})(({theme:t})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:`${t.palette.mode==="light"?t.palette.common.black:t.palette.common.white}`,opacity:t.vars?t.vars.opacity.switchTrack:`${t.palette.mode==="light"?.38:.3}`})),oIe=tn("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(t,e)=>e.thumb})(({theme:t})=>({boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),sIe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiSwitch"}),{className:i,color:o="primary",edge:a=!1,size:s="medium",sx:l}=r,c=on(r,eIe),h=de({},r,{color:o,edge:a,size:s}),p=tIe(h),g=F.jsx(oIe,{className:p.thumb,ownerState:h});return F.jsxs(nIe,{className:Kt(p.root,i),sx:l,ownerState:h,children:[F.jsx(rIe,de({type:"checkbox",icon:g,checkedIcon:g,ref:n,ownerState:h},c,{classes:de({},p,{root:p.switchBase})})),F.jsx(iIe,{className:p.track,ownerState:h})]})}),cre=sIe;function aIe(t){return Vn("MuiTab",t)}const lIe=Wn("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),pv=lIe,cIe=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],uIe=t=>{const{classes:e,textColor:n,fullWidth:r,wrapped:i,icon:o,label:a,selected:s,disabled:l}=t,c={root:["root",o&&a&&"labelIcon",`textColor${en(n)}`,r&&"fullWidth",i&&"wrapped",s&&"selected",l&&"disabled"],iconWrapper:["iconWrapper"]};return Hn(c,aIe,e)},dIe=tn(om,{name:"MuiTab",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.label&&n.icon&&e.labelIcon,e[`textColor${en(n.textColor)}`],n.fullWidth&&e.fullWidth,n.wrapped&&e.wrapped]}})(({theme:t,ownerState:e})=>de({},t.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},e.label&&{flexDirection:e.iconPosition==="top"||e.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},e.icon&&e.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${pv.iconWrapper}`]:de({},e.iconPosition==="top"&&{marginBottom:6},e.iconPosition==="bottom"&&{marginTop:6},e.iconPosition==="start"&&{marginRight:t.spacing(1)},e.iconPosition==="end"&&{marginLeft:t.spacing(1)})},e.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${pv.selected}`]:{opacity:1},[`&.${pv.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.textColor==="primary"&&{color:(t.vars||t).palette.text.secondary,[`&.${pv.selected}`]:{color:(t.vars||t).palette.primary.main},[`&.${pv.disabled}`]:{color:(t.vars||t).palette.text.disabled}},e.textColor==="secondary"&&{color:(t.vars||t).palette.text.secondary,[`&.${pv.selected}`]:{color:(t.vars||t).palette.secondary.main},[`&.${pv.disabled}`]:{color:(t.vars||t).palette.text.disabled}},e.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},e.wrapped&&{fontSize:t.typography.pxToRem(12)})),fIe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiTab"}),{className:i,disabled:o=!1,disableFocusRipple:a=!1,fullWidth:s,icon:l,iconPosition:c="top",indicator:h,label:p,onChange:g,onClick:v,onFocus:x,selected:b,selectionFollowsFocus:M,textColor:w="inherit",value:T,wrapped:C=!1}=r,I=on(r,cIe),R=de({},r,{disabled:o,disableFocusRipple:a,selected:b,icon:!!l,iconPosition:c,label:!!p,fullWidth:s,textColor:w,wrapped:C}),O=uIe(R),B=l&&p&&W.isValidElement(l)?W.cloneElement(l,{className:Kt(O.iconWrapper,l.props.className)}):l,U=j=>{!b&&g&&g(j,T),v&&v(j)},Z=j=>{M&&!b&&g&&g(j,T),x&&x(j)};return F.jsxs(dIe,de({focusRipple:!a,className:Kt(O.root,i),ref:n,role:"tab","aria-selected":b,disabled:o,onClick:U,onFocus:Z,ownerState:R,tabIndex:b?0:-1},I,{children:[c==="top"||c==="start"?F.jsxs(W.Fragment,{children:[B,p]}):F.jsxs(W.Fragment,{children:[p,B]}),h]}))}),Xv=fIe,hIe=W.createContext(),ure=hIe;function pIe(t){return Vn("MuiTable",t)}Wn("MuiTable",["root","stickyHeader"]);const mIe=["className","component","padding","size","stickyHeader"],gIe=t=>{const{classes:e,stickyHeader:n}=t;return Hn({root:["root",n&&"stickyHeader"]},pIe,e)},yIe=tn("table",{name:"MuiTable",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.stickyHeader&&e.stickyHeader]}})(({theme:t,ownerState:e})=>de({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":de({},t.typography.body2,{padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},e.stickyHeader&&{borderCollapse:"separate"})),tG="table",vIe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiTable"}),{className:i,component:o=tG,padding:a="normal",size:s="medium",stickyHeader:l=!1}=r,c=on(r,mIe),h=de({},r,{component:o,padding:a,size:s,stickyHeader:l}),p=gIe(h),g=W.useMemo(()=>({padding:a,size:s,stickyHeader:l}),[a,s,l]);return F.jsx(ure.Provider,{value:g,children:F.jsx(yIe,de({as:o,role:o===tG?null:"table",ref:n,className:Kt(p.root,i),ownerState:h},c))})}),hR=vIe,xIe=W.createContext(),pR=xIe;function _Ie(t){return Vn("MuiTableBody",t)}Wn("MuiTableBody",["root"]);const bIe=["className","component"],wIe=t=>{const{classes:e}=t;return Hn({root:["root"]},_Ie,e)},SIe=tn("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"table-row-group"}),MIe={variant:"body"},nG="tbody",EIe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiTableBody"}),{className:i,component:o=nG}=r,a=on(r,bIe),s=de({},r,{component:o}),l=wIe(s);return F.jsx(pR.Provider,{value:MIe,children:F.jsx(SIe,de({className:Kt(l.root,i),as:o,ref:n,role:o===nG?null:"rowgroup",ownerState:s},a))})}),mR=EIe;function TIe(t){return Vn("MuiTableCell",t)}const CIe=Wn("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),AIe=CIe,PIe=["align","className","component","padding","scope","size","sortDirection","variant"],kIe=t=>{const{classes:e,variant:n,align:r,padding:i,size:o,stickyHeader:a}=t,s={root:["root",n,a&&"stickyHeader",r!=="inherit"&&`align${en(r)}`,i!=="normal"&&`padding${en(i)}`,`size${en(o)}`]};return Hn(s,TIe,e)},IIe=tn("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`size${en(n.size)}`],n.padding!=="normal"&&e[`padding${en(n.padding)}`],n.align!=="inherit"&&e[`align${en(n.align)}`],n.stickyHeader&&e.stickyHeader]}})(({theme:t,ownerState:e})=>de({},t.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?`1px solid ${t.vars.palette.TableCell.border}`:`1px solid
    ${t.palette.mode==="light"?vb(Ji(t.palette.divider,1),.88):yb(Ji(t.palette.divider,1),.68)}`,textAlign:"left",padding:16},e.variant==="head"&&{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium},e.variant==="body"&&{color:(t.vars||t).palette.text.primary},e.variant==="footer"&&{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)},e.size==="small"&&{padding:"6px 16px",[`&.${AIe.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},e.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},e.padding==="none"&&{padding:0},e.align==="left"&&{textAlign:"left"},e.align==="center"&&{textAlign:"center"},e.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},e.align==="justify"&&{textAlign:"justify"},e.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default})),RIe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiTableCell"}),{align:i="inherit",className:o,component:a,padding:s,scope:l,size:c,sortDirection:h,variant:p}=r,g=on(r,PIe),v=W.useContext(ure),x=W.useContext(pR),b=x&&x.variant==="head";let M;a?M=a:M=b?"th":"td";let w=l;M==="td"?w=void 0:!w&&b&&(w="col");const T=p||x&&x.variant,C=de({},r,{align:i,component:M,padding:s||(v&&v.padding?v.padding:"normal"),size:c||(v&&v.size?v.size:"medium"),sortDirection:h,stickyHeader:T==="head"&&v&&v.stickyHeader,variant:T}),I=kIe(C);let R=null;return h&&(R=h==="asc"?"ascending":"descending"),F.jsx(IIe,de({as:M,ref:n,className:Kt(I.root,o),"aria-sort":R,scope:w,ownerState:C},g))}),rs=RIe;function OIe(t){return Vn("MuiTableHead",t)}Wn("MuiTableHead",["root"]);const LIe=["className","component"],DIe=t=>{const{classes:e}=t;return Hn({root:["root"]},OIe,e)},NIe=tn("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"table-header-group"}),zIe={variant:"head"},rG="thead",FIe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiTableHead"}),{className:i,component:o=rG}=r,a=on(r,LIe),s=de({},r,{component:o}),l=DIe(s);return F.jsx(pR.Provider,{value:zIe,children:F.jsx(NIe,de({as:o,className:Kt(l.root,i),ref:n,role:o===rG?null:"rowgroup",ownerState:s},a))})}),ej=FIe;function BIe(t){return Vn("MuiToolbar",t)}Wn("MuiToolbar",["root","gutters","regular","dense"]);const $Ie=["className","component","disableGutters","variant"],jIe=t=>{const{classes:e,disableGutters:n,variant:r}=t;return Hn({root:["root",!n&&"gutters",r]},BIe,e)},UIe=tn("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableGutters&&e.gutters,e[n.variant]]}})(({theme:t,ownerState:e})=>de({position:"relative",display:"flex",alignItems:"center"},!e.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},e.variant==="dense"&&{minHeight:48}),({theme:t,ownerState:e})=>e.variant==="regular"&&t.mixins.toolbar),VIe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiToolbar"}),{className:i,component:o="div",disableGutters:a=!1,variant:s="regular"}=r,l=on(r,$Ie),c=de({},r,{component:o,disableGutters:a,variant:s}),h=jIe(c);return F.jsx(UIe,de({as:o,className:Kt(h.root,i),ref:n,ownerState:c},l))}),vy=VIe,WIe=$a(F.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),HIe=$a(F.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function GIe(t){return Vn("MuiTableRow",t)}const qIe=Wn("MuiTableRow",["root","selected","hover","head","footer"]),iG=qIe,YIe=["className","component","hover","selected"],XIe=t=>{const{classes:e,selected:n,hover:r,head:i,footer:o}=t;return Hn({root:["root",n&&"selected",r&&"hover",i&&"head",o&&"footer"]},GIe,e)},KIe=tn("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.head&&e.head,n.footer&&e.footer]}})(({theme:t})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${iG.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${iG.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Ji(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Ji(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}})),oG="tr",ZIe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiTableRow"}),{className:i,component:o=oG,hover:a=!1,selected:s=!1}=r,l=on(r,YIe),c=W.useContext(pR),h=de({},r,{component:o,hover:a,selected:s,head:c&&c.variant==="head",footer:c&&c.variant==="footer"}),p=XIe(h);return F.jsx(KIe,de({as:o,ref:n,className:Kt(p.root,i),role:o===oG?null:"row",ownerState:h},l))}),Gg=ZIe;function JIe(t){return(1+Math.sin(Math.PI*t-Math.PI/2))/2}function QIe(t,e,n,r={},i=()=>{}){const{ease:o=JIe,duration:a=300}=r;let s=null;const l=e[t];let c=!1;const h=()=>{c=!0},p=g=>{if(c){i(new Error("Animation cancelled"));return}s===null&&(s=g);const v=Math.min(1,(g-s)/a);if(e[t]=o(v)*(n-l)+l,v>=1){requestAnimationFrame(()=>{i(null)});return}requestAnimationFrame(p)};return l===n?(i(new Error("Element already at target position")),h):(requestAnimationFrame(p),h)}const eRe=["onChange"],tRe={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function nRe(t){const{onChange:e}=t,n=on(t,eRe),r=W.useRef(),i=W.useRef(null),o=()=>{r.current=i.current.offsetHeight-i.current.clientHeight};return mu(()=>{const a=rE(()=>{const l=r.current;o(),l!==r.current&&e(r.current)}),s=Th(i.current);return s.addEventListener("resize",a),()=>{a.clear(),s.removeEventListener("resize",a)}},[e]),W.useEffect(()=>{o(),e(r.current)},[e]),F.jsx("div",de({style:tRe,ref:i},n))}function rRe(t){return Vn("MuiTabScrollButton",t)}const iRe=Wn("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),oRe=iRe,sRe=["className","slots","slotProps","direction","orientation","disabled"],aRe=t=>{const{classes:e,orientation:n,disabled:r}=t;return Hn({root:["root",n,r&&"disabled"]},rRe,e)},lRe=tn(om,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.orientation&&e[n.orientation]]}})(({ownerState:t})=>de({width:40,flexShrink:0,opacity:.8,[`&.${oRe.disabled}`]:{opacity:0}},t.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${t.isRtl?-90:90}deg)`}})),cRe=W.forwardRef(function(e,n){var r,i;const o=Jn({props:e,name:"MuiTabScrollButton"}),{className:a,slots:s={},slotProps:l={},direction:c}=o,h=on(o,sRe),g=xd().direction==="rtl",v=de({isRtl:g},o),x=aRe(v),b=(r=s.StartScrollButtonIcon)!=null?r:WIe,M=(i=s.EndScrollButtonIcon)!=null?i:HIe,w=Pc({elementType:b,externalSlotProps:l.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:v}),T=Pc({elementType:M,externalSlotProps:l.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:v});return F.jsx(lRe,de({component:"div",className:Kt(x.root,a),ref:n,role:null,ownerState:v,tabIndex:null},h,{children:c==="left"?F.jsx(b,de({},w)):F.jsx(M,de({},T))}))}),uRe=cRe;function dRe(t){return Vn("MuiTabs",t)}const fRe=Wn("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),FD=fRe,hRe=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],sG=(t,e)=>t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t.firstChild,aG=(t,e)=>t===e?t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t.lastChild,UT=(t,e,n)=>{let r=!1,i=n(t,e);for(;i;){if(i===t.firstChild){if(r)return;r=!0}const o=i.disabled||i.getAttribute("aria-disabled")==="true";if(!i.hasAttribute("tabindex")||o)i=n(t,i);else{i.focus();return}}},pRe=t=>{const{vertical:e,fixed:n,hideScrollbar:r,scrollableX:i,scrollableY:o,centered:a,scrollButtonsHideMobile:s,classes:l}=t;return Hn({root:["root",e&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",i&&"scrollableX",o&&"scrollableY"],flexContainer:["flexContainer",e&&"flexContainerVertical",a&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",s&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]},dRe,l)},mRe=tn("div",{name:"MuiTabs",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${FD.scrollButtons}`]:e.scrollButtons},{[`& .${FD.scrollButtons}`]:n.scrollButtonsHideMobile&&e.scrollButtonsHideMobile},e.root,n.vertical&&e.vertical]}})(({ownerState:t,theme:e})=>de({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},t.vertical&&{flexDirection:"column"},t.scrollButtonsHideMobile&&{[`& .${FD.scrollButtons}`]:{[e.breakpoints.down("sm")]:{display:"none"}}})),gRe=tn("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.scroller,n.fixed&&e.fixed,n.hideScrollbar&&e.hideScrollbar,n.scrollableX&&e.scrollableX,n.scrollableY&&e.scrollableY]}})(({ownerState:t})=>de({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},t.fixed&&{overflowX:"hidden",width:"100%"},t.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},t.scrollableX&&{overflowX:"auto",overflowY:"hidden"},t.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),yRe=tn("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.flexContainer,n.vertical&&e.flexContainerVertical,n.centered&&e.centered]}})(({ownerState:t})=>de({display:"flex"},t.vertical&&{flexDirection:"column"},t.centered&&{justifyContent:"center"})),vRe=tn("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(t,e)=>e.indicator})(({ownerState:t,theme:e})=>de({position:"absolute",height:2,bottom:0,width:"100%",transition:e.transitions.create()},t.indicatorColor==="primary"&&{backgroundColor:(e.vars||e).palette.primary.main},t.indicatorColor==="secondary"&&{backgroundColor:(e.vars||e).palette.secondary.main},t.vertical&&{height:"100%",width:2,right:0})),xRe=tn(nRe)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),lG={},_Re=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiTabs"}),i=xd(),o=i.direction==="rtl",{"aria-label":a,"aria-labelledby":s,action:l,centered:c=!1,children:h,className:p,component:g="div",allowScrollButtonsMobile:v=!1,indicatorColor:x="primary",onChange:b,orientation:M="horizontal",ScrollButtonComponent:w=uRe,scrollButtons:T="auto",selectionFollowsFocus:C,slots:I={},slotProps:R={},TabIndicatorProps:O={},TabScrollButtonProps:B={},textColor:U="primary",value:Z,variant:j="standard",visibleScrollbar:X=!1}=r,le=on(r,hRe),me=j==="scrollable",ie=M==="vertical",ce=ie?"scrollTop":"scrollLeft",fe=ie?"top":"left",xe=ie?"bottom":"right",te=ie?"clientHeight":"clientWidth",he=ie?"height":"width",ve=de({},r,{component:g,allowScrollButtonsMobile:v,indicatorColor:x,orientation:M,vertical:ie,scrollButtons:T,textColor:U,variant:j,visibleScrollbar:X,fixed:!me,hideScrollbar:me&&!X,scrollableX:me&&!ie,scrollableY:me&&ie,centered:c&&!me,scrollButtonsHideMobile:!v}),ze=pRe(ve),Ue=Pc({elementType:I.StartScrollButtonIcon,externalSlotProps:R.startScrollButtonIcon,ownerState:ve}),rt=Pc({elementType:I.EndScrollButtonIcon,externalSlotProps:R.endScrollButtonIcon,ownerState:ve}),[Be,st]=W.useState(!1),[ct,Dt]=W.useState(lG),[zt,Fe]=W.useState(!1),[lt,Qe]=W.useState(!1),[ge,et]=W.useState(!1),[ot,Tt]=W.useState({overflow:"hidden",scrollbarWidth:0}),Ct=new Map,Bt=W.useRef(null),Gt=W.useRef(null),sn=()=>{const Ot=Bt.current;let Ie;if(Ot){const Me=Ot.getBoundingClientRect();Ie={clientWidth:Ot.clientWidth,scrollLeft:Ot.scrollLeft,scrollTop:Ot.scrollTop,scrollLeftNormalized:ibe(Ot,i.direction),scrollWidth:Ot.scrollWidth,top:Me.top,bottom:Me.bottom,left:Me.left,right:Me.right}}let Ve;if(Ot&&Z!==!1){const Me=Gt.current.children;if(Me.length>0){const it=Me[Ct.get(Z)];Ve=it?it.getBoundingClientRect():null}}return{tabsMeta:Ie,tabMeta:Ve}},Je=Wl(()=>{const{tabsMeta:Ot,tabMeta:Ie}=sn();let Ve=0,Me;if(ie)Me="top",Ie&&Ot&&(Ve=Ie.top-Ot.top+Ot.scrollTop);else if(Me=o?"right":"left",Ie&&Ot){const Qt=o?Ot.scrollLeftNormalized+Ot.clientWidth-Ot.scrollWidth:Ot.scrollLeft;Ve=(o?-1:1)*(Ie[Me]-Ot[Me]+Qt)}const it={[Me]:Ve,[he]:Ie?Ie[he]:0};if(isNaN(ct[Me])||isNaN(ct[he]))Dt(it);else{const Qt=Math.abs(ct[Me]-it[Me]),Xe=Math.abs(ct[he]-it[he]);(Qt>=1||Xe>=1)&&Dt(it)}}),Ce=(Ot,{animation:Ie=!0}={})=>{Ie?QIe(ce,Bt.current,Ot,{duration:i.transitions.duration.standard}):Bt.current[ce]=Ot},_e=Ot=>{let Ie=Bt.current[ce];ie?Ie+=Ot:(Ie+=Ot*(o?-1:1),Ie*=o&&ine()==="reverse"?-1:1),Ce(Ie)},ht=()=>{const Ot=Bt.current[te];let Ie=0;const Ve=Array.from(Gt.current.children);for(let Me=0;Me<Ve.length;Me+=1){const it=Ve[Me];if(Ie+it[te]>Ot){Me===0&&(Ie=Ot);break}Ie+=it[te]}return Ie},dt=()=>{_e(-1*ht())},Wt=()=>{_e(ht())},jt=W.useCallback(Ot=>{Tt({overflow:null,scrollbarWidth:Ot})},[]),Sn=()=>{const Ot={};Ot.scrollbarSizeListener=me?F.jsx(xRe,{onChange:jt,className:Kt(ze.scrollableX,ze.hideScrollbar)}):null;const Ve=me&&(T==="auto"&&(zt||lt)||T===!0);return Ot.scrollButtonStart=Ve?F.jsx(w,de({slots:{StartScrollButtonIcon:I.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:Ue},orientation:M,direction:o?"right":"left",onClick:dt,disabled:!zt},B,{className:Kt(ze.scrollButtons,B.className)})):null,Ot.scrollButtonEnd=Ve?F.jsx(w,de({slots:{EndScrollButtonIcon:I.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:rt},orientation:M,direction:o?"left":"right",onClick:Wt,disabled:!lt},B,{className:Kt(ze.scrollButtons,B.className)})):null,Ot},cn=Wl(Ot=>{const{tabsMeta:Ie,tabMeta:Ve}=sn();if(!(!Ve||!Ie)){if(Ve[fe]<Ie[fe]){const Me=Ie[ce]+(Ve[fe]-Ie[fe]);Ce(Me,{animation:Ot})}else if(Ve[xe]>Ie[xe]){const Me=Ie[ce]+(Ve[xe]-Ie[xe]);Ce(Me,{animation:Ot})}}}),Rt=Wl(()=>{me&&T!==!1&&et(!ge)});W.useEffect(()=>{const Ot=rE(()=>{Bt.current&&Je()});let Ie;const Ve=Qt=>{Qt.forEach(Xe=>{Xe.removedNodes.forEach(It=>{var Et;(Et=Ie)==null||Et.unobserve(It)}),Xe.addedNodes.forEach(It=>{var Et;(Et=Ie)==null||Et.observe(It)})}),Ot(),Rt()},Me=Th(Bt.current);Me.addEventListener("resize",Ot);let it;return typeof ResizeObserver<"u"&&(Ie=new ResizeObserver(Ot),Array.from(Gt.current.children).forEach(Qt=>{Ie.observe(Qt)})),typeof MutationObserver<"u"&&(it=new MutationObserver(Ve),it.observe(Gt.current,{childList:!0})),()=>{var Qt,Xe;Ot.clear(),Me.removeEventListener("resize",Ot),(Qt=it)==null||Qt.disconnect(),(Xe=Ie)==null||Xe.disconnect()}},[Je,Rt]),W.useEffect(()=>{const Ot=Array.from(Gt.current.children),Ie=Ot.length;if(typeof IntersectionObserver<"u"&&Ie>0&&me&&T!==!1){const Ve=Ot[0],Me=Ot[Ie-1],it={root:Bt.current,threshold:.99},Qt=we=>{Fe(!we[0].isIntersecting)},Xe=new IntersectionObserver(Qt,it);Xe.observe(Ve);const It=we=>{Qe(!we[0].isIntersecting)},Et=new IntersectionObserver(It,it);return Et.observe(Me),()=>{Xe.disconnect(),Et.disconnect()}}},[me,T,ge,h==null?void 0:h.length]),W.useEffect(()=>{st(!0)},[]),W.useEffect(()=>{Je()}),W.useEffect(()=>{cn(lG!==ct)},[cn,ct]),W.useImperativeHandle(l,()=>({updateIndicator:Je,updateScrollButtons:Rt}),[Je,Rt]);const nn=F.jsx(vRe,de({},O,{className:Kt(ze.indicator,O.className),ownerState:ve,style:de({},ct,O.style)}));let An=0;const mt=W.Children.map(h,Ot=>{if(!W.isValidElement(Ot))return null;const Ie=Ot.props.value===void 0?An:Ot.props.value;Ct.set(Ie,An);const Ve=Ie===Z;return An+=1,W.cloneElement(Ot,de({fullWidth:j==="fullWidth",indicator:Ve&&!Be&&nn,selected:Ve,selectionFollowsFocus:C,onChange:b,textColor:U,value:Ie},An===1&&Z===!1&&!Ot.props.tabIndex?{tabIndex:0}:{}))}),un=Ot=>{const Ie=Gt.current,Ve=Os(Ie).activeElement;if(Ve.getAttribute("role")!=="tab")return;let it=M==="horizontal"?"ArrowLeft":"ArrowUp",Qt=M==="horizontal"?"ArrowRight":"ArrowDown";switch(M==="horizontal"&&o&&(it="ArrowRight",Qt="ArrowLeft"),Ot.key){case it:Ot.preventDefault(),UT(Ie,Ve,aG);break;case Qt:Ot.preventDefault(),UT(Ie,Ve,sG);break;case"Home":Ot.preventDefault(),UT(Ie,null,sG);break;case"End":Ot.preventDefault(),UT(Ie,null,aG);break}},an=Sn();return F.jsxs(mRe,de({className:Kt(ze.root,p),ownerState:ve,ref:n,as:g},le,{children:[an.scrollButtonStart,an.scrollbarSizeListener,F.jsxs(gRe,{className:ze.scroller,ownerState:ve,style:{overflow:ot.overflow,[ie?`margin${o?"Left":"Right"}`:"marginBottom"]:X?void 0:-ot.scrollbarWidth},ref:Bt,children:[F.jsx(yRe,{"aria-label":a,"aria-labelledby":s,"aria-orientation":M==="vertical"?"vertical":null,className:ze.flexContainer,ownerState:ve,onKeyDown:un,ref:Gt,role:"tablist",children:mt}),Be&&nn]}),an.scrollButtonEnd]}))}),dre=_Re;function bRe(t){return Vn("MuiTextField",t)}Wn("MuiTextField",["root"]);const wRe=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],SRe={standard:tre,filled:Zne,outlined:J$},MRe=t=>{const{classes:e}=t;return Hn({root:["root"]},bRe,e)},ERe=tn(uE,{name:"MuiTextField",slot:"Root",overridesResolver:(t,e)=>e.root})({}),TRe=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:o=!1,children:a,className:s,color:l="primary",defaultValue:c,disabled:h=!1,error:p=!1,FormHelperTextProps:g,fullWidth:v=!1,helperText:x,id:b,InputLabelProps:M,inputProps:w,InputProps:T,inputRef:C,label:I,maxRows:R,minRows:O,multiline:B=!1,name:U,onBlur:Z,onChange:j,onFocus:X,placeholder:le,required:me=!1,rows:ie,select:ce=!1,SelectProps:fe,type:xe,value:te,variant:he="outlined"}=r,ve=on(r,wRe),ze=de({},r,{autoFocus:o,color:l,disabled:h,error:p,fullWidth:v,multiline:B,required:me,select:ce,variant:he}),Ue=MRe(ze),rt={};he==="outlined"&&(M&&typeof M.shrink<"u"&&(rt.notched=M.shrink),rt.label=I),ce&&((!fe||!fe.native)&&(rt.id=void 0),rt["aria-describedby"]=void 0);const Be=nR(b),st=x&&Be?`${Be}-helper-text`:void 0,ct=I&&Be?`${Be}-label`:void 0,Dt=SRe[he],zt=F.jsx(Dt,de({"aria-describedby":st,autoComplete:i,autoFocus:o,defaultValue:c,fullWidth:v,multiline:B,name:U,rows:ie,maxRows:R,minRows:O,type:xe,value:te,id:Be,inputRef:C,onBlur:Z,onChange:j,onFocus:X,placeholder:le,inputProps:w},rt,T));return F.jsxs(ERe,de({className:Kt(Ue.root,s),disabled:h,error:p,fullWidth:v,ref:n,required:me,color:l,variant:he,ownerState:ze},ve,{children:[I!=null&&I!==""&&F.jsx(dE,de({htmlFor:Be,id:ct},M,{children:I})),ce?F.jsx(fE,de({"aria-describedby":st,id:Be,labelId:ct,value:te,input:zt},fe,{children:a})):zt,x&&F.jsx(DCe,de({id:st},g,{children:x}))]}))}),gi=TRe,h1=(t,e)=>{const n=Zl(),r=W.useRef();W.useEffect(()=>(t().then(i=>r.current=i).catch(i=>n(yte.push(i.message))),()=>{const i=r.current;i&&i()}),[...e,n])},fre=t=>{const e=Zl();return(...n)=>{t(...n).catch(r=>e(yte.push(r.message)))}};var cG=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hE=(typeof window>"u"?"undefined":cG(window))==="object"&&(typeof document>"u"?"undefined":cG(document))==="object"&&document.nodeType===9;function uG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ute(r.key),r)}}function hre(t,e,n){return e&&uG(t.prototype,e),n&&uG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var CRe={}.constructor;function _F(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(_F);if(t.constructor!==CRe)return t;var e={};for(var n in t)e[n]=_F(t[n]);return e}function tj(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,i=_F(e),o=r.plugins.onCreateRule(t,i,n);return o||(t[0],null)}var dG=function(e,n){for(var r="",i=0;i<e.length&&e[i]!=="!important";i++)r&&(r+=n),r+=e[i];return r},f0=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=dG(e[r]," ");else n=dG(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function p1(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function Lw(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function IM(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var i=n,o=i.indent,a=o===void 0?0:o,s=e.fallbacks;n.format===!1&&(a=-1/0);var l=p1(n),c=l.linebreak,h=l.space;if(t&&a++,s)if(Array.isArray(s))for(var p=0;p<s.length;p++){var g=s[p];for(var v in g){var x=g[v];x!=null&&(r&&(r+=c),r+=Lw(v+":"+h+f0(x)+";",a))}}else for(var b in s){var M=s[b];M!=null&&(r&&(r+=c),r+=Lw(b+":"+h+f0(M)+";",a))}for(var w in e){var T=e[w];T!=null&&w!=="fallbacks"&&(r&&(r+=c),r+=Lw(w+":"+h+f0(T)+";",a))}return!r&&!n.allowEmpty||!t?r:(a--,r&&(r=""+c+r+c),Lw(""+t+h+"{"+r,a)+Lw("}",a))}var ARe=/([[\].#*$><+~=|^:(),"'`\s])/g,fG=typeof CSS<"u"&&CSS.escape,nj=function(t){return fG?fG(t):t.replace(ARe,"\\$1")},pre=function(){function t(n,r,i){this.type="style",this.isProcessed=!1;var o=i.sheet,a=i.Renderer;this.key=n,this.options=i,this.style=r,o?this.renderer=o.renderer:a&&(this.renderer=new a)}var e=t.prototype;return e.prop=function(r,i,o){if(i===void 0)return this.style[r];var a=o?o.force:!1;if(!a&&this.style[r]===i)return this;var s=i;(!o||o.process!==!1)&&(s=this.options.jss.plugins.onChangeValue(i,r,this));var l=s==null||s===!1,c=r in this.style;if(l&&!c&&!a)return this;var h=l&&c;if(h?delete this.style[r]:this.style[r]=s,this.renderable&&this.renderer)return h?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,s),this;var p=this.options.sheet;return p&&p.attached,this},t}(),bF=function(t){sE(e,t);function e(r,i,o){var a;a=t.call(this,r,i,o)||this;var s=o.selector,l=o.scoped,c=o.sheet,h=o.generateId;return s?a.selectorText=s:l!==!1&&(a.id=h(CM(CM(a)),c),a.selectorText="."+nj(a.id)),a}var n=e.prototype;return n.applyTo=function(i){var o=this.renderer;if(o){var a=this.toJSON();for(var s in a)o.setProperty(i,s,a[s])}return this},n.toJSON=function(){var i={};for(var o in this.style){var a=this.style[o];typeof a!="object"?i[o]=a:Array.isArray(a)&&(i[o]=f0(a))}return i},n.toString=function(i){var o=this.options.sheet,a=o?o.options.link:!1,s=a?de({},i,{allowEmpty:!0}):i;return IM(this.selectorText,this.style,s)},hre(e,[{key:"selector",set:function(i){if(i!==this.selectorText){this.selectorText=i;var o=this.renderer,a=this.renderable;if(!(!a||!o)){var s=o.setSelector(a,i);s||o.replaceRule(a,this)}}},get:function(){return this.selectorText}}]),e}(pre),PRe={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new bF(e,n,r)}},BD={indent:1,children:!0},kRe=/@([\w-]+)/,IRe=function(){function t(n,r,i){this.type="conditional",this.isProcessed=!1,this.key=n;var o=n.match(kRe);this.at=o?o[1]:"unknown",this.query=i.name||"@"+this.at,this.options=i,this.rules=new gR(de({},i,{parent:this}));for(var a in r)this.rules.add(a,r[a]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,i,o){var a=this.rules.add(r,i,o);return a?(this.options.jss.plugins.onProcessRule(a),a):null},e.replaceRule=function(r,i,o){var a=this.rules.replace(r,i,o);return a&&this.options.jss.plugins.onProcessRule(a),a},e.toString=function(r){r===void 0&&(r=BD);var i=p1(r),o=i.linebreak;if(r.indent==null&&(r.indent=BD.indent),r.children==null&&(r.children=BD.children),r.children===!1)return this.query+" {}";var a=this.rules.toString(r);return a?this.query+" {"+o+a+o+"}":""},t}(),RRe=/@container|@media|@supports\s+/,ORe={onCreateRule:function(e,n,r){return RRe.test(e)?new IRe(e,n,r):null}},$D={indent:1,children:!0},LRe=/@keyframes\s+([\w-]+)/,wF=function(){function t(n,r,i){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var o=n.match(LRe);o&&o[1]?this.name=o[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=i;var a=i.scoped,s=i.sheet,l=i.generateId;this.id=a===!1?this.name:nj(l(this,s)),this.rules=new gR(de({},i,{parent:this}));for(var c in r)this.rules.add(c,r[c],de({},i,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=$D);var i=p1(r),o=i.linebreak;if(r.indent==null&&(r.indent=$D.indent),r.children==null&&(r.children=$D.children),r.children===!1)return this.at+" "+this.id+" {}";var a=this.rules.toString(r);return a&&(a=""+o+a+o),this.at+" "+this.id+" {"+a+"}"},t}(),DRe=/@keyframes\s+/,NRe=/\$([\w-]+)/g,SF=function(e,n){return typeof e=="string"?e.replace(NRe,function(r,i){return i in n?n[i]:r}):e},hG=function(e,n,r){var i=e[n],o=SF(i,r);o!==i&&(e[n]=o)},zRe={onCreateRule:function(e,n,r){return typeof e=="string"&&DRe.test(e)?new wF(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&hG(e,"animation-name",r.keyframes),"animation"in e&&hG(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var i=r.options.sheet;if(!i)return e;switch(n){case"animation":return SF(e,i.keyframes);case"animation-name":return SF(e,i.keyframes);default:return e}}},FRe=function(t){sE(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(i){var o=this.options.sheet,a=o?o.options.link:!1,s=a?de({},i,{allowEmpty:!0}):i;return IM(this.key,this.style,s)},e}(pre),BRe={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new FRe(e,n,r):null}},$Re=function(){function t(n,r,i){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=i}var e=t.prototype;return e.toString=function(r){var i=p1(r),o=i.linebreak;if(Array.isArray(this.style)){for(var a="",s=0;s<this.style.length;s++)a+=IM(this.at,this.style[s]),this.style[s+1]&&(a+=o);return a}return IM(this.at,this.style,r)},t}(),jRe=/@font-face/,URe={onCreateRule:function(e,n,r){return jRe.test(e)?new $Re(e,n,r):null}},VRe=function(){function t(n,r,i){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=i}var e=t.prototype;return e.toString=function(r){return IM(this.key,this.style,r)},t}(),WRe={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new VRe(e,n,r):null}},HRe=function(){function t(n,r,i){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=i}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var i="",o=0;o<this.value.length;o++)i+=this.key+" "+this.value[o]+";",this.value[o+1]&&(i+=`
`);return i}return this.key+" "+this.value+";"},t}(),GRe={"@charset":!0,"@import":!0,"@namespace":!0},qRe={onCreateRule:function(e,n,r){return e in GRe?new HRe(e,n,r):null}},pG=[PRe,ORe,zRe,BRe,URe,WRe,qRe],YRe={process:!0},mG={force:!0,process:!0},gR=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,i,o){var a=this.options,s=a.parent,l=a.sheet,c=a.jss,h=a.Renderer,p=a.generateId,g=a.scoped,v=de({classes:this.classes,parent:s,sheet:l,jss:c,Renderer:h,generateId:p,scoped:g,name:r,keyframes:this.keyframes,selector:void 0},o),x=r;r in this.raw&&(x=r+"-d"+this.counter++),this.raw[x]=i,x in this.classes&&(v.selector="."+nj(this.classes[x]));var b=tj(x,i,v);if(!b)return null;this.register(b);var M=v.index===void 0?this.index.length:v.index;return this.index.splice(M,0,b),b},e.replace=function(r,i,o){var a=this.get(r),s=this.index.indexOf(a);a&&this.remove(a);var l=o;return s!==-1&&(l=de({},o,{index:s})),this.add(r,i,l)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof bF?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof wF&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof bF?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof wF&&delete this.keyframes[r.name]},e.update=function(){var r,i,o;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],o=arguments.length<=2?void 0:arguments[2]):(i=arguments.length<=0?void 0:arguments[0],o=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),i,o);else for(var a=0;a<this.index.length;a++)this.updateOne(this.index[a],i,o)},e.updateOne=function(r,i,o){o===void 0&&(o=YRe);var a=this.options,s=a.jss.plugins,l=a.sheet;if(r.rules instanceof t){r.rules.update(i,o);return}var c=r.style;if(s.onUpdate(i,r,l,o),o.process&&c&&c!==r.style){s.onProcessStyle(r.style,r,l);for(var h in r.style){var p=r.style[h],g=c[h];p!==g&&r.prop(h,p,mG)}for(var v in c){var x=r.style[v],b=c[v];x==null&&x!==b&&r.prop(v,null,mG)}}},e.toString=function(r){for(var i="",o=this.options.sheet,a=o?o.options.link:!1,s=p1(r),l=s.linebreak,c=0;c<this.index.length;c++){var h=this.index[c],p=h.toString(r);!p&&!a||(i&&(i+=l),i+=p)}return i},t}(),mre=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=de({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new gR(this.options);for(var i in n)this.rules.add(i,n[i]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,i,o){var a=this.queue;this.attached&&!a&&(this.queue=[]);var s=this.rules.add(r,i,o);return s?(this.options.jss.plugins.onProcessRule(s),this.attached?(this.deployed&&(a?a.push(s):(this.insertRule(s),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),s):(this.deployed=!1,s)):null},e.replaceRule=function(r,i,o){var a=this.rules.get(r);if(!a)return this.addRule(r,i,o);var s=this.rules.replace(r,i,o);return s&&this.options.jss.plugins.onProcessRule(s),this.attached?(this.deployed&&this.renderer&&(s?a.renderable&&this.renderer.replaceRule(a.renderable,s):this.renderer.deleteRule(a)),s):(this.deployed=!1,s)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,i){var o=[];for(var a in r){var s=this.addRule(a,r[a],i);s&&o.push(s)}return o},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var i=typeof r=="object"?r:this.rules.get(r);return!i||this.attached&&!i.renderable?!1:(this.rules.remove(i),this.attached&&i.renderable&&this.renderer?this.renderer.deleteRule(i.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,i,o){return this.rules.updateOne(r,i,o),this},e.toString=function(r){return this.rules.toString(r)},t}(),XRe=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,i,o){for(var a=0;a<this.registry.onCreateRule.length;a++){var s=this.registry.onCreateRule[a](r,i,o);if(s)return s}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var i=r.options.sheet,o=0;o<this.registry.onProcessRule.length;o++)this.registry.onProcessRule[o](r,i);r.style&&this.onProcessStyle(r.style,r,i),r.isProcessed=!0}},e.onProcessStyle=function(r,i,o){for(var a=0;a<this.registry.onProcessStyle.length;a++)i.style=this.registry.onProcessStyle[a](i.style,i,o)},e.onProcessSheet=function(r){for(var i=0;i<this.registry.onProcessSheet.length;i++)this.registry.onProcessSheet[i](r)},e.onUpdate=function(r,i,o,a){for(var s=0;s<this.registry.onUpdate.length;s++)this.registry.onUpdate[s](r,i,o,a)},e.onChangeValue=function(r,i,o){for(var a=r,s=0;s<this.registry.onChangeValue.length;s++)a=this.registry.onChangeValue[s](a,i,o);return a},e.use=function(r,i){i===void 0&&(i={queue:"external"});var o=this.plugins[i.queue];o.indexOf(r)===-1&&(o.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(a,s){for(var l in s)l in a&&a[l].push(s[l]);return a},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),KRe=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var i=this.registry,o=r.options.index;if(i.indexOf(r)===-1){if(i.length===0||o>=this.index){i.push(r);return}for(var a=0;a<i.length;a++)if(i[a].options.index>o){i.splice(a,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var i=this.registry.indexOf(r);this.registry.splice(i,1)},e.toString=function(r){for(var i=r===void 0?{}:r,o=i.attached,a=on(i,["attached"]),s=p1(a),l=s.linebreak,c="",h=0;h<this.registry.length;h++){var p=this.registry[h];o!=null&&p.attached!==o||(c&&(c+=l),c+=p.toString(a))}return c},hre(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),FS=new KRe,MF=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),EF="2f1acc6c3a606b082e5eef5e54414ffb";MF[EF]==null&&(MF[EF]=0);var gG=MF[EF]++,yG=function(e){e===void 0&&(e={});var n=0,r=function(o,a){n+=1;var s="",l="";return a&&(a.options.classNamePrefix&&(l=a.options.classNamePrefix),a.options.jss.id!=null&&(s=String(a.options.jss.id))),e.minify?""+(l||"c")+gG+s+n:l+o.key+"-"+gG+(s?"-"+s:"")+"-"+n};return r},gre=function(e){var n;return function(){return n||(n=e()),n}},ZRe=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},JRe=function(e,n,r){try{var i=r;if(Array.isArray(r)&&(i=f0(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,i);else{var o=i?i.indexOf("!important"):-1,a=o>-1?i.substr(0,o-1):i;e.style.setProperty(n,a,o>-1?"important":"")}}catch{return!1}return!0},QRe=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},eOe=function(e,n){return e.selectorText=n,e.selectorText===n},yre=gre(function(){return document.querySelector("head")});function tOe(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function nOe(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function rOe(t){for(var e=yre(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function iOe(t){var e=FS.registry;if(e.length>0){var n=tOe(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=nOe(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var i=rOe(r);if(i)return{parent:i.parentNode,node:i.nextSibling}}return!1}function oOe(t,e){var n=e.insertionPoint,r=iOe(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var i=n,o=i.parentNode;o&&o.insertBefore(t,i.nextSibling);return}yre().appendChild(t)}var sOe=gre(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),vG=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},xG=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},aOe=function(){var e=document.createElement("style");return e.textContent=`
`,e},lOe=function(){function t(n){this.getPropertyValue=ZRe,this.setProperty=JRe,this.removeProperty=QRe,this.setSelector=eOe,this.hasInsertedRules=!1,this.cssRules=[],n&&FS.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},i=r.media,o=r.meta,a=r.element;this.element=a||aOe(),this.element.setAttribute("data-jss",""),i&&this.element.setAttribute("media",i),o&&this.element.setAttribute("data-meta",o);var s=sOe();s&&this.element.setAttribute("nonce",s)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){oOe(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,i){for(var o=0;o<r.index.length;o++)this.insertRule(r.index[o],o,i)},e.insertRule=function(r,i,o){if(o===void 0&&(o=this.element.sheet),r.rules){var a=r,s=o;if(r.type==="conditional"||r.type==="keyframes"){var l=xG(o,i);if(s=vG(o,a.toString({children:!1}),l),s===!1)return!1;this.refCssRule(r,l,s)}return this.insertRules(a.rules,s),s}var c=r.toString();if(!c)return!1;var h=xG(o,i),p=vG(o,c,h);return p===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,h,p),p)},e.refCssRule=function(r,i,o){r.renderable=o,r.options.parent instanceof mre&&this.cssRules.splice(i,0,o)},e.deleteRule=function(r){var i=this.element.sheet,o=this.indexOf(r);return o===-1?!1:(i.deleteRule(o),this.cssRules.splice(o,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,i){var o=this.indexOf(r);return o===-1?!1:(this.element.sheet.deleteRule(o),this.cssRules.splice(o,1),this.insertRule(i,o))},e.getRules=function(){return this.element.sheet.cssRules},t}(),cOe=0,uOe=function(){function t(n){this.id=cOe++,this.version="10.10.0",this.plugins=new XRe,this.options={id:{minify:!1},createGenerateId:yG,Renderer:hE?lOe:null,plugins:[]},this.generateId=yG({minify:!1});for(var r=0;r<pG.length;r++)this.plugins.use(pG[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=de({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,i){i===void 0&&(i={});var o=i,a=o.index;typeof a!="number"&&(a=FS.index===0?0:FS.index+1);var s=new mre(r,de({},i,{jss:this,generateId:i.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:a}));return this.plugins.onProcessSheet(s),s},e.removeStyleSheet=function(r){return r.detach(),FS.remove(r),this},e.createRule=function(r,i,o){if(i===void 0&&(i={}),o===void 0&&(o={}),typeof r=="object")return this.createRule(void 0,r,i);var a=de({},o,{name:r,jss:this,Renderer:this.options.Renderer});a.generateId||(a.generateId=this.generateId),a.classes||(a.classes={}),a.keyframes||(a.keyframes={});var s=tj(r,i,a);return s&&this.plugins.onProcessRule(s),s},e.use=function(){for(var r=this,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return o.forEach(function(s){r.plugins.use(s)}),this},t}(),vre=function(e){return new uOe(e)},rj=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function xre(t){var e=null;for(var n in t){var r=t[n],i=typeof r;if(i==="function")e||(e={}),e[n]=r;else if(i==="object"&&r!==null&&!Array.isArray(r)){var o=xre(r);o&&(e||(e={}),e[n]=o)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */vre();function _re(t={}){const{baseClasses:e,newClasses:n,Component:r}=t;if(!n)return e;const i=de({},e);return Object.keys(n).forEach(o=>{n[o]&&(i[o]=`${e[o]} ${n[o]}`)}),i}const dOe={set:(t,e,n,r)=>{let i=t.get(e);i||(i=new Map,t.set(e,i)),i.set(n,r)},get:(t,e,n)=>{const r=t.get(e);return r?r.get(n):void 0},delete:(t,e,n)=>{t.get(e).delete(n)}},w_=dOe;function bre(){var t;const e=k$();return(t=e==null?void 0:e.$$material)!=null?t:e}const fOe=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];function hOe(t={}){const{disableGlobal:e=!1,productionPrefix:n="jss",seed:r=""}=t,i=r===""?"":`${r}-`;let o=0;const a=()=>(o+=1,o);return(s,l)=>{const c=l.options.name;if(c&&c.indexOf("Mui")===0&&!l.options.link&&!e){if(fOe.indexOf(s.key)!==-1)return`Mui-${s.key}`;const h=`${i}${c}-${s.key}`;return!l.options.theme[ane]||r!==""?h:`${h}-${a()}`}return`${i}${n}${a()}`}}var wre=Date.now(),jD="fnValues"+wre,UD="fnStyle"+ ++wre,pOe=function(){return{onCreateRule:function(n,r,i){if(typeof r!="function")return null;var o=tj(n,{},i);return o[UD]=r,o},onProcessStyle:function(n,r){if(jD in r||UD in r)return n;var i={};for(var o in n){var a=n[o];typeof a=="function"&&(delete n[o],i[o]=a)}return r[jD]=i,n},onUpdate:function(n,r,i,o){var a=r,s=a[UD];s&&(a.style=s(n)||{});var l=a[jD];if(l)for(var c in l)a.prop(c,l[c](n),o)}}};const mOe=pOe;var qg="@global",TF="@global ",gOe=function(){function t(n,r,i){this.type="global",this.at=qg,this.isProcessed=!1,this.key=n,this.options=i,this.rules=new gR(de({},i,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,i,o){var a=this.rules.add(r,i,o);return a&&this.options.jss.plugins.onProcessRule(a),a},e.replaceRule=function(r,i,o){var a=this.rules.replace(r,i,o);return a&&this.options.jss.plugins.onProcessRule(a),a},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),yOe=function(){function t(n,r,i){this.type="global",this.at=qg,this.isProcessed=!1,this.key=n,this.options=i;var o=n.substr(TF.length);this.rule=i.jss.createRule(o,r,de({},i,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),vOe=/\s*,\s*/g;function Sre(t,e){for(var n=t.split(vOe),r="",i=0;i<n.length;i++)r+=e+" "+n[i].trim(),n[i+1]&&(r+=", ");return r}function xOe(t,e){var n=t.options,r=t.style,i=r?r[qg]:null;if(i){for(var o in i)e.addRule(o,i[o],de({},n,{selector:Sre(o,t.selector)}));delete r[qg]}}function _Oe(t,e){var n=t.options,r=t.style;for(var i in r)if(!(i[0]!=="@"||i.substr(0,qg.length)!==qg)){var o=Sre(i.substr(qg.length),t.selector);e.addRule(o,r[i],de({},n,{selector:o})),delete r[i]}}function bOe(){function t(n,r,i){if(!n)return null;if(n===qg)return new gOe(n,r,i);if(n[0]==="@"&&n.substr(0,TF.length)===TF)return new yOe(n,r,i);var o=i.parent;return o&&(o.type==="global"||o.options.parent&&o.options.parent.type==="global")&&(i.scoped=!1),!i.selector&&i.scoped===!1&&(i.selector=n),null}function e(n,r){n.type!=="style"||!r||(xOe(n,r),_Oe(n,r))}return{onCreateRule:t,onProcessRule:e}}var _G=/\s*,\s*/g,wOe=/&/g,SOe=/\$([\w-]+)/g;function MOe(){function t(i,o){return function(a,s){var l=i.getRule(s)||o&&o.getRule(s);return l?l.selector:s}}function e(i,o){for(var a=o.split(_G),s=i.split(_G),l="",c=0;c<a.length;c++)for(var h=a[c],p=0;p<s.length;p++){var g=s[p];l&&(l+=", "),l+=g.indexOf("&")!==-1?g.replace(wOe,h):h+" "+g}return l}function n(i,o,a){if(a)return de({},a,{index:a.index+1});var s=i.options.nestingLevel;s=s===void 0?1:s+1;var l=de({},i.options,{nestingLevel:s,index:o.indexOf(i)+1});return delete l.name,l}function r(i,o,a){if(o.type!=="style")return i;var s=o,l=s.options.parent,c,h;for(var p in i){var g=p.indexOf("&")!==-1,v=p[0]==="@";if(!(!g&&!v)){if(c=n(s,l,c),g){var x=e(p,s.selector);h||(h=t(l,a)),x=x.replace(SOe,h);var b=s.key+"-"+p;"replaceRule"in l?l.replaceRule(b,i[p],de({},c,{selector:x})):l.addRule(b,i[p],de({},c,{selector:x}))}else v&&l.addRule(p,{},c).addRule(s.key,i[p],{selector:s.selector});delete i[p]}}return i}return{onProcessStyle:r}}var EOe=/[A-Z]/g,TOe=/^ms-/,VD={};function COe(t){return"-"+t.toLowerCase()}function Mre(t){if(VD.hasOwnProperty(t))return VD[t];var e=t.replace(EOe,COe);return VD[t]=TOe.test(e)?"-"+e:e}function jP(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:Mre(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(jP):e.fallbacks=jP(t.fallbacks)),e}function AOe(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=jP(n[r]);return n}return jP(n)}function e(n,r,i){if(r.indexOf("--")===0)return n;var o=Mre(r);return r===o?n:(i.prop(o,n),null)}return{onProcessStyle:t,onChangeValue:e}}var Zt=rj&&CSS?CSS.px:"px",VT=rj&&CSS?CSS.ms:"ms",wx=rj&&CSS?CSS.percent:"%",POe={"animation-delay":VT,"animation-duration":VT,"background-position":Zt,"background-position-x":Zt,"background-position-y":Zt,"background-size":Zt,border:Zt,"border-bottom":Zt,"border-bottom-left-radius":Zt,"border-bottom-right-radius":Zt,"border-bottom-width":Zt,"border-left":Zt,"border-left-width":Zt,"border-radius":Zt,"border-right":Zt,"border-right-width":Zt,"border-top":Zt,"border-top-left-radius":Zt,"border-top-right-radius":Zt,"border-top-width":Zt,"border-width":Zt,"border-block":Zt,"border-block-end":Zt,"border-block-end-width":Zt,"border-block-start":Zt,"border-block-start-width":Zt,"border-block-width":Zt,"border-inline":Zt,"border-inline-end":Zt,"border-inline-end-width":Zt,"border-inline-start":Zt,"border-inline-start-width":Zt,"border-inline-width":Zt,"border-start-start-radius":Zt,"border-start-end-radius":Zt,"border-end-start-radius":Zt,"border-end-end-radius":Zt,margin:Zt,"margin-bottom":Zt,"margin-left":Zt,"margin-right":Zt,"margin-top":Zt,"margin-block":Zt,"margin-block-end":Zt,"margin-block-start":Zt,"margin-inline":Zt,"margin-inline-end":Zt,"margin-inline-start":Zt,padding:Zt,"padding-bottom":Zt,"padding-left":Zt,"padding-right":Zt,"padding-top":Zt,"padding-block":Zt,"padding-block-end":Zt,"padding-block-start":Zt,"padding-inline":Zt,"padding-inline-end":Zt,"padding-inline-start":Zt,"mask-position-x":Zt,"mask-position-y":Zt,"mask-size":Zt,height:Zt,width:Zt,"min-height":Zt,"max-height":Zt,"min-width":Zt,"max-width":Zt,bottom:Zt,left:Zt,top:Zt,right:Zt,inset:Zt,"inset-block":Zt,"inset-block-end":Zt,"inset-block-start":Zt,"inset-inline":Zt,"inset-inline-end":Zt,"inset-inline-start":Zt,"box-shadow":Zt,"text-shadow":Zt,"column-gap":Zt,"column-rule":Zt,"column-rule-width":Zt,"column-width":Zt,"font-size":Zt,"font-size-delta":Zt,"letter-spacing":Zt,"text-decoration-thickness":Zt,"text-indent":Zt,"text-stroke":Zt,"text-stroke-width":Zt,"word-spacing":Zt,motion:Zt,"motion-offset":Zt,outline:Zt,"outline-offset":Zt,"outline-width":Zt,perspective:Zt,"perspective-origin-x":wx,"perspective-origin-y":wx,"transform-origin":wx,"transform-origin-x":wx,"transform-origin-y":wx,"transform-origin-z":wx,"transition-delay":VT,"transition-duration":VT,"vertical-align":Zt,"flex-basis":Zt,"shape-margin":Zt,size:Zt,gap:Zt,grid:Zt,"grid-gap":Zt,"row-gap":Zt,"grid-row-gap":Zt,"grid-column-gap":Zt,"grid-template-rows":Zt,"grid-template-columns":Zt,"grid-auto-rows":Zt,"grid-auto-columns":Zt,"box-shadow-x":Zt,"box-shadow-y":Zt,"box-shadow-blur":Zt,"box-shadow-spread":Zt,"font-line-height":Zt,"text-shadow-x":Zt,"text-shadow-y":Zt,"text-shadow-blur":Zt};function Ere(t){var e=/(-[a-z])/g,n=function(a){return a[1].toUpperCase()},r={};for(var i in t)r[i]=t[i],r[i.replace(e,n)]=t[i];return r}var kOe=Ere(POe);function BS(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=BS(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var i in e)e[i]=BS(i,e[i],n);else for(var o in e)e[o]=BS(t+"-"+o,e[o],n);else if(typeof e=="number"&&isNaN(e)===!1){var a=n[t]||kOe[t];return a&&!(e===0&&a===Zt)?typeof a=="function"?a(e).toString():""+e+a:e.toString()}return e}function IOe(t){t===void 0&&(t={});var e=Ere(t);function n(i,o){if(o.type!=="style")return i;for(var a in i)i[a]=BS(a,i[a],e);return i}function r(i,o){return BS(o,i,e)}return{onProcessStyle:n,onChangeValue:r}}function CF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ROe(t){if(Array.isArray(t))return CF(t)}function OOe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function LOe(t,e){if(t){if(typeof t=="string")return CF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CF(t,e)}}function DOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NOe(t){return ROe(t)||OOe(t)||LOe(t)||DOe()}var vS="",AF="",Tre="",Cre="",zOe=hE&&"ontouchstart"in document.documentElement;if(hE){var WD={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},FOe=document.createElement("p"),HD=FOe.style,BOe="Transform";for(var GD in WD)if(GD+BOe in HD){vS=GD,AF=WD[GD];break}vS==="Webkit"&&"msHyphens"in HD&&(vS="ms",AF=WD.ms,Cre="edge"),vS==="Webkit"&&"-apple-trailing-word"in HD&&(Tre="apple")}var Lr={js:vS,css:AF,vendor:Tre,browser:Cre,isTouch:zOe};function $Oe(t){return t[1]==="-"||Lr.js==="ms"?t:"@"+Lr.css+"keyframes"+t.substr(10)}var jOe={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:Lr.js==="ms"?"-webkit-"+e:Lr.css+e}},UOe={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:Lr.js==="Webkit"?Lr.css+"print-"+e:e}},VOe=/[-\s]+(.)?/g;function WOe(t,e){return e?e.toUpperCase():""}function ij(t){return t.replace(VOe,WOe)}function oy(t){return ij("-"+t)}var HOe={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(Lr.js==="Webkit"){var r="mask-image";if(ij(r)in n)return e;if(Lr.js+oy(r)in n)return Lr.css+e}return e}},GOe={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:Lr.vendor==="apple"&&!Lr.isTouch?Lr.css+e:e}},qOe={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:Lr.css+e}},YOe={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:Lr.css+e}},XOe={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:Lr.js==="Webkit"||Lr.js==="ms"&&Lr.browser!=="edge"?Lr.css+e:e}},KOe={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:Lr.js==="Moz"||Lr.js==="ms"||Lr.vendor==="apple"?Lr.css+e:e}},ZOe={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(Lr.js==="Webkit"){var r="WebkitColumn"+oy(e);return r in n?Lr.css+"column-"+e:!1}if(Lr.js==="Moz"){var i="page"+oy(e);return i in n?"page-"+e:!1}return!1}},JOe={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(Lr.js==="Moz")return e;var r=e.replace("-inline","");return Lr.js+oy(r)in n?Lr.css+r:!1}},QOe={supportedProperty:function(e,n){return ij(e)in n?e:!1}},eLe={supportedProperty:function(e,n){var r=oy(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:Lr.js+r in n?Lr.css+e:Lr.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},tLe={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:Lr.js==="ms"?""+Lr.css+e:e}},nLe={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:Lr.js==="ms"?Lr.css+"scroll-chaining":e}},rLe={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},iLe={supportedProperty:function(e,n){var r=rLe[e];return r&&Lr.js+oy(r)in n?Lr.css+r:!1}},Are={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},oLe=Object.keys(Are),sLe=function(e){return Lr.css+e},aLe={supportedProperty:function(e,n,r){var i=r.multiple;if(oLe.indexOf(e)>-1){var o=Are[e];if(!Array.isArray(o))return Lr.js+oy(o)in n?Lr.css+o:!1;if(!i)return!1;for(var a=0;a<o.length;a++)if(!(Lr.js+oy(o[0])in n))return!1;return o.map(sLe)}return!1}},Pre=[jOe,UOe,HOe,GOe,qOe,YOe,XOe,KOe,ZOe,JOe,QOe,eLe,tLe,nLe,iLe,aLe],bG=Pre.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),lLe=Pre.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,NOe(e.noPrefill)),t},[]),xS,jv={};if(hE){xS=document.createElement("p");var qD=window.getComputedStyle(document.documentElement,"");for(var YD in qD)isNaN(YD)||(jv[qD[YD]]=qD[YD]);lLe.forEach(function(t){return delete jv[t]})}function PF(t,e){if(e===void 0&&(e={}),!xS)return t;if(jv[t]!=null)return jv[t];(t==="transition"||t==="transform")&&(e[t]=t in xS.style);for(var n=0;n<bG.length&&(jv[t]=bG[n](t,xS.style,e),!jv[t]);n++);try{xS.style[t]=""}catch{return!1}return jv[t]}var Sx={},cLe={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},uLe=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,pg;function dLe(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?PF(e):", "+PF(n);return r||e||n}hE&&(pg=document.createElement("p"));function wG(t,e){var n=e;if(!pg||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(Sx[r]!=null)return Sx[r];try{pg.style[t]=n}catch{return Sx[r]=!1,!1}if(cLe[t])n=n.replace(uLe,dLe);else if(pg.style[t]===""&&(n=Lr.css+n,n==="-ms-flex"&&(pg.style[t]="-ms-flexbox"),pg.style[t]=n,pg.style[t]===""))return Sx[r]=!1,!1;return pg.style[t]="",Sx[r]=n,Sx[r]}function fLe(){function t(i){if(i.type==="keyframes"){var o=i;o.at=$Oe(o.at)}}function e(i){for(var o in i){var a=i[o];if(o==="fallbacks"&&Array.isArray(a)){i[o]=a.map(e);continue}var s=!1,l=PF(o);l&&l!==o&&(s=!0);var c=!1,h=wG(l,f0(a));h&&h!==a&&(c=!0),(s||c)&&(s&&delete i[o],i[l||o]=h||a)}return i}function n(i,o){return o.type!=="style"?i:e(i)}function r(i,o){return wG(o,f0(i))||i}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function hLe(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var i={},o=Object.keys(n).sort(t),a=0;a<o.length;a++)i[o[a]]=n[o[a]];return i}}}function pLe(){return{plugins:[mOe(),bOe(),MOe(),AOe(),IOe(),typeof window>"u"?null:fLe(),hLe()]}}const mLe=vre(pLe()),gLe=hOe(),yLe=new Map,vLe={disableGeneration:!1,generateClassName:gLe,jss:mLe,sheetsCache:null,sheetsManager:yLe,sheetsRegistry:null},xLe=W.createContext(vLe);let SG=-1e9;function _Le(){return SG+=1,SG}const bLe=["variant"];function MG(t){return t.length===0}function wLe(t){const{variant:e}=t,n=on(t,bLe);let r=e||"";return Object.keys(n).sort().forEach(i=>{i==="color"?r+=MG(r)?t[i]:en(t[i]):r+=`${MG(r)?i:en(i)}${en(t[i].toString())}`}),r}const SLe={},MLe=SLe;function ELe(t){const e=typeof t=="function";return{create:(n,r)=>{let i;try{i=e?t(n):t}catch(l){throw l}if(!r||!n.components||!n.components[r]||!n.components[r].styleOverrides&&!n.components[r].variants)return i;const o=n.components[r].styleOverrides||{},a=n.components[r].variants||[],s=de({},i);return Object.keys(o).forEach(l=>{s[l]=Fa(s[l]||{},o[l])}),a.forEach(l=>{const c=wLe(l.props);s[c]=Fa(s[c]||{},l.style)}),s},options:{}}}const TLe=["name","classNamePrefix","Component","defaultTheme"];function CLe({state:t,stylesOptions:e},n,r){if(e.disableGeneration)return n||{};t.cacheClasses||(t.cacheClasses={value:null,lastProp:null,lastJSS:{}});let i=!1;return t.classes!==t.cacheClasses.lastJSS&&(t.cacheClasses.lastJSS=t.classes,i=!0),n!==t.cacheClasses.lastProp&&(t.cacheClasses.lastProp=n,i=!0),i&&(t.cacheClasses.value=_re({baseClasses:t.cacheClasses.lastJSS,newClasses:n,Component:r})),t.cacheClasses.value}function ALe({state:t,theme:e,stylesOptions:n,stylesCreator:r,name:i},o){if(n.disableGeneration)return;let a=w_.get(n.sheetsManager,r,e);a||(a={refs:0,staticSheet:null,dynamicStyles:null},w_.set(n.sheetsManager,r,e,a));const s=de({},r.options,n,{theme:e,flip:typeof n.flip=="boolean"?n.flip:e.direction==="rtl"});s.generateId=s.serverGenerateClassName||s.generateClassName;const l=n.sheetsRegistry;if(a.refs===0){let c;n.sheetsCache&&(c=w_.get(n.sheetsCache,r,e));const h=r.create(e,i);c||(c=n.jss.createStyleSheet(h,de({link:!1},s)),c.attach(),n.sheetsCache&&w_.set(n.sheetsCache,r,e,c)),l&&l.add(c),a.staticSheet=c,a.dynamicStyles=xre(h)}if(a.dynamicStyles){const c=n.jss.createStyleSheet(a.dynamicStyles,de({link:!0},s));c.update(o),c.attach(),t.dynamicSheet=c,t.classes=_re({baseClasses:a.staticSheet.classes,newClasses:c.classes}),l&&l.add(c)}else t.classes=a.staticSheet.classes;a.refs+=1}function PLe({state:t},e){t.dynamicSheet&&t.dynamicSheet.update(e)}function kLe({state:t,theme:e,stylesOptions:n,stylesCreator:r}){if(n.disableGeneration)return;const i=w_.get(n.sheetsManager,r,e);i.refs-=1;const o=n.sheetsRegistry;i.refs===0&&(w_.delete(n.sheetsManager,r,e),n.jss.removeStyleSheet(i.staticSheet),o&&o.remove(i.staticSheet)),t.dynamicSheet&&(n.jss.removeStyleSheet(t.dynamicSheet),o&&o.remove(t.dynamicSheet))}function ILe(t,e){const n=W.useRef([]);let r;const i=W.useMemo(()=>({}),e);n.current!==i&&(n.current=i,r=t()),W.useEffect(()=>()=>{r&&r()},[i])}function ri(t,e={}){const{name:n,classNamePrefix:r,Component:i,defaultTheme:o=MLe}=e,a=on(e,TLe),s=ELe(t),l=n||r||"makeStyles";return s.options={index:_Le(),name:n,meta:l,classNamePrefix:l},(h={})=>{const p=bre()||o,g=de({},W.useContext(xLe),a),v=W.useRef(),x=W.useRef();return ILe(()=>{const M={name:n,state:{},stylesCreator:s,stylesOptions:g,theme:p};return ALe(M,h),x.current=!1,v.current=M,()=>{kLe(M)}},[p,s]),W.useEffect(()=>{x.current&&PLe(v.current,h),x.current=!0}),CLe(v.current,h.classes,i)}}const RLe="/assets/alarm-zNGFGtq_.mp3";function kre(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=kre(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function U0(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=kre(t))&&(r&&(r+=" "),r+=e);return r}let OLe={data:""},LLe=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||OLe,DLe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,NLe=/\/\*[^]*?\*\/|  +/g,EG=/\n+/g,Uv=(t,e)=>{let n="",r="",i="";for(let o in t){let a=t[o];o[0]=="@"?o[1]=="i"?n=o+" "+a+";":r+=o[1]=="f"?Uv(a,o):o+"{"+Uv(a,o[1]=="k"?"":e)+"}":typeof a=="object"?r+=Uv(a,e?e.replace(/([^,])+/g,s=>o.replace(/(^:.*)|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,s):s?s+" "+l:l)):o):a!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Uv.p?Uv.p(o,a):o+":"+a+";")}return n+(e&&i?e+"{"+i+"}":i)+r},sp={},Ire=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+Ire(t[n]);return e}return t},zLe=(t,e,n,r,i)=>{let o=Ire(t),a=sp[o]||(sp[o]=(l=>{let c=0,h=11;for(;c<l.length;)h=101*h+l.charCodeAt(c++)>>>0;return"go"+h})(o));if(!sp[a]){let l=o!==t?t:(c=>{let h,p,g=[{}];for(;h=DLe.exec(c.replace(NLe,""));)h[4]?g.shift():h[3]?(p=h[3].replace(EG," ").trim(),g.unshift(g[0][p]=g[0][p]||{})):g[0][h[1]]=h[2].replace(EG," ").trim();return g[0]})(t);sp[a]=Uv(i?{["@keyframes "+a]:l}:l,n?"":"."+a)}let s=n&&sp.g?sp.g:null;return n&&(sp.g=sp[a]),((l,c,h,p)=>{p?c.data=c.data.replace(p,l):c.data.indexOf(l)===-1&&(c.data=h?l+c.data:c.data+l)})(sp[a],e,r,s),a},FLe=(t,e,n)=>t.reduce((r,i,o)=>{let a=e[o];if(a&&a.call){let s=a(n),l=s&&s.props&&s.props.className||/^go/.test(s)&&s;a=l?"."+l:s&&typeof s=="object"?s.props?"":Uv(s,""):s===!1?"":s}return r+i+(a??"")},"");function oj(t){let e=this||{},n=t.call?t(e.p):t;return zLe(n.unshift?n.raw?FLe(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,LLe(e.target),e.g,e.o,e.k)}oj.bind({g:1});oj.bind({k:1});function TG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rre(t,e,n){return e&&TG(t.prototype,e),n&&TG(t,n),t}function Ki(){return Ki=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ki.apply(this,arguments)}function Ore(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function pE(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function CG(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var AG=function(){return""},BLe=Ze.createContext({enqueueSnackbar:AG,closeSnackbar:AG}),Dv={downXs:"@media (max-width:599.95px)",upSm:"@media (min-width:600px)"},PG=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},sj=function(e){return""+PG(e.vertical)+PG(e.horizontal)},WT=function(e){return!!e||e===0},HT="unmounted",Mx="exited",Ex="entering",Dw="entered",kG="exiting",aj=function(t){Ore(e,t);function e(r){var i;i=t.call(this,r)||this;var o=r.appear,a;return i.appearStatus=null,r.in?o?(a=Mx,i.appearStatus=Ex):a=Dw:r.unmountOnExit||r.mountOnEnter?a=HT:a=Mx,i.state={status:a},i.nextCallback=null,i}e.getDerivedStateFromProps=function(i,o){var a=i.in;return a&&o.status===HT?{status:Mx}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var o=null;if(i!==this.props){var a=this.state.status;this.props.in?a!==Ex&&a!==Dw&&(o=Ex):(a===Ex||a===Dw)&&(o=kG)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,o=i,a=i;return i!=null&&typeof i!="number"&&typeof i!="string"&&(a=i.exit,o=i.enter),{exit:a,enter:o}},n.updateStatus=function(i,o){i===void 0&&(i=!1),o!==null?(this.cancelNextCallback(),o===Ex?this.performEnter(i):this.performExit()):this.props.unmountOnExit&&this.state.status===Mx&&this.setState({status:HT})},n.performEnter=function(i){var o=this,a=this.props.enter,s=i,l=this.getTimeouts();if(!i&&!a){this.safeSetState({status:Dw},function(){o.props.onEntered&&o.props.onEntered(o.node,s)});return}this.props.onEnter&&this.props.onEnter(this.node,s),this.safeSetState({status:Ex},function(){o.props.onEntering&&o.props.onEntering(o.node,s),o.onTransitionEnd(l.enter,function(){o.safeSetState({status:Dw},function(){o.props.onEntered&&o.props.onEntered(o.node,s)})})})},n.performExit=function(){var i=this,o=this.props.exit,a=this.getTimeouts();if(!o){this.safeSetState({status:Mx},function(){i.props.onExited&&i.props.onExited(i.node)});return}this.props.onExit&&this.props.onExit(this.node),this.safeSetState({status:kG},function(){i.props.onExiting&&i.props.onExiting(i.node),i.onTransitionEnd(a.exit,function(){i.safeSetState({status:Mx},function(){i.props.onExited&&i.props.onExited(i.node)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&this.nextCallback.cancel&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},n.setNextCallback=function(i){var o=this,a=!0;return this.nextCallback=function(){a&&(a=!1,o.nextCallback=null,i())},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(i,o){this.setNextCallback(o);var a=i==null&&!this.props.addEndListener;if(!this.node||a){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(this.node,this.nextCallback),i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===HT)return null;var o=this.props,a=o.children,s=pE(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return a(i,s)},Rre(e,[{key:"node",get:function(){var i,o=(i=this.props.nodeRef)===null||i===void 0?void 0:i.current;if(!o)throw new Error("notistack - Custom snackbar is not refForwarding");return o}}]),e}(Ze.Component);function Tx(){}aj.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Tx,onEntering:Tx,onEntered:Tx,onExit:Tx,onExiting:Tx,onExited:Tx};function IG(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function kF(t,e){return W.useMemo(function(){return t==null&&e==null?null:function(n){IG(t,n),IG(e,n)}},[t,e])}function UP(t){var e=t.timeout,n=t.style,r=n===void 0?{}:n,i=t.mode;return{duration:typeof e=="object"?e[i]||0:e,easing:r.transitionTimingFunction,delay:r.transitionDelay}}var IF={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Lre=function(e){e.scrollTop=e.scrollTop},RG=function(e){return Math.round(e)+"ms"};function S_(t,e){t===void 0&&(t=["all"]);var n=e||{},r=n.duration,i=r===void 0?300:r,o=n.easing,a=o===void 0?IF.easeInOut:o,s=n.delay,l=s===void 0?0:s,c=Array.isArray(t)?t:[t];return c.map(function(h){var p=typeof i=="string"?i:RG(i),g=typeof l=="string"?l:RG(l);return h+" "+p+" "+a+" "+g}).join(",")}function $Le(t){return t&&t.ownerDocument||document}function Dre(t){var e=$Le(t);return e.defaultView||window}function jLe(t,e){e===void 0&&(e=166);var n;function r(){for(var i=this,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];var l=function(){t.apply(i,a)};clearTimeout(n),n=setTimeout(l,e)}return r.clear=function(){clearTimeout(n)},r}function ULe(t,e){var n=e.getBoundingClientRect(),r=Dre(e),i;if(e.fakeTransform)i=e.fakeTransform;else{var o=r.getComputedStyle(e);i=o.getPropertyValue("-webkit-transform")||o.getPropertyValue("transform")}var a=0,s=0;if(i&&i!=="none"&&typeof i=="string"){var l=i.split("(")[1].split(")")[0].split(",");a=parseInt(l[4],10),s=parseInt(l[5],10)}switch(t){case"left":return"translateX("+(r.innerWidth+a-n.left)+"px)";case"right":return"translateX(-"+(n.left+n.width-a)+"px)";case"up":return"translateY("+(r.innerHeight+s-n.top)+"px)";default:return"translateY(-"+(n.top+n.height-s)+"px)"}}function GT(t,e){if(e){var n=ULe(t,e);n&&(e.style.webkitTransform=n,e.style.transform=n)}}var Nre=W.forwardRef(function(t,e){var n=t.children,r=t.direction,i=r===void 0?"down":r,o=t.in,a=t.style,s=t.timeout,l=s===void 0?0:s,c=t.onEnter,h=t.onEntered,p=t.onExit,g=t.onExited,v=pE(t,["children","direction","in","style","timeout","onEnter","onEntered","onExit","onExited"]),x=W.useRef(null),b=kF(n.ref,x),M=kF(b,e),w=function(B,U){GT(i,B),Lre(B),c&&c(B,U)},T=function(B){var U=(a==null?void 0:a.transitionTimingFunction)||IF.easeOut,Z=UP({timeout:l,mode:"enter",style:Ki({},a,{transitionTimingFunction:U})});B.style.webkitTransition=S_("-webkit-transform",Z),B.style.transition=S_("transform",Z),B.style.webkitTransform="none",B.style.transform="none"},C=function(B){var U=(a==null?void 0:a.transitionTimingFunction)||IF.sharp,Z=UP({timeout:l,mode:"exit",style:Ki({},a,{transitionTimingFunction:U})});B.style.webkitTransition=S_("-webkit-transform",Z),B.style.transition=S_("transform",Z),GT(i,B),p&&p(B)},I=function(B){B.style.webkitTransition="",B.style.transition="",g&&g(B)},R=W.useCallback(function(){x.current&&GT(i,x.current)},[i]);return W.useEffect(function(){if(!(o||i==="down"||i==="right")){var O=jLe(function(){x.current&&GT(i,x.current)}),B=Dre(x.current);return B.addEventListener("resize",O),function(){O.clear(),B.removeEventListener("resize",O)}}},[i,o]),W.useEffect(function(){o||R()},[o,R]),W.createElement(aj,Object.assign({appear:!0,nodeRef:x,onEnter:w,onEntered:h,onEntering:T,onExit:C,onExited:I,in:o,timeout:l},v),function(O,B){return W.cloneElement(n,Ki({ref:M,style:Ki({visibility:O==="exited"&&!o?"hidden":void 0},a,{},n.props.style)},B))})});Nre.displayName="Slide";var yR=function(e){return Ze.createElement("svg",Object.assign({viewBox:"0 0 24 24",focusable:"false",style:{fontSize:20,marginInlineEnd:8,userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0}},e))},VLe=function(){return Ze.createElement(yR,null,Ze.createElement("path",{d:`M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41
        10.59L10 14.17L17.59 6.58L19 8L10 17Z`}))},WLe=function(){return Ze.createElement(yR,null,Ze.createElement("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"}))},HLe=function(){return Ze.createElement(yR,null,Ze.createElement("path",{d:`M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,
        6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,
        13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z`}))},GLe=function(){return Ze.createElement(yR,null,Ze.createElement("path",{d:`M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,
        0 22,12A10,10 0 0,0 12,2Z`}))},qLe={default:void 0,success:Ze.createElement(VLe,null),warning:Ze.createElement(WLe,null),error:Ze.createElement(HLe,null),info:Ze.createElement(GLe,null)},h0={maxSnack:3,persist:!1,hideIconVariant:!1,disableWindowBlurListener:!1,variant:"default",autoHideDuration:5e3,iconVariant:qLe,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:Nre,transitionDuration:{enter:225,exit:195}},YLe=function(e,n){var r=function(o){return typeof o=="number"||o===null};return r(e)?e:r(n)?n:h0.autoHideDuration},XLe=function(e,n){var r=function(o,a){return a.some(function(s){return typeof o===s})};return r(e,["string","number"])?e:r(e,["object"])?Ki({},h0.transitionDuration,{},r(n,["object"])&&n,{},e):r(n,["string","number"])?n:r(n,["object"])?Ki({},h0.transitionDuration,{},n):h0.transitionDuration},KLe=function(e,n){return function(r,i){return i===void 0&&(i=!1),i?Ki({},h0[r],{},n[r],{},e[r]):r==="autoHideDuration"?YLe(e.autoHideDuration,n.autoHideDuration):r==="transitionDuration"?XLe(e.transitionDuration,n.transitionDuration):e[r]||n[r]||h0[r]}};function mE(t){return Object.entries(t).reduce(function(e,n){var r,i=n[0],o=n[1];return Ki({},e,(r={},r[i]=oj(o),r))},{})}var Tb={SnackbarContainer:"notistack-SnackbarContainer",Snackbar:"notistack-Snackbar",CollapseWrapper:"notistack-CollapseWrapper",MuiContent:"notistack-MuiContent",MuiContentVariant:function(e){return"notistack-MuiContent-"+e}},OG=mE({root:{height:0},entered:{height:"auto"}}),XD="0px",KD=175,zre=W.forwardRef(function(t,e){var n=t.children,r=t.in,i=t.onExited,o=W.useRef(null),a=W.useRef(null),s=kF(e,a),l=function(){return o.current?o.current.clientHeight:0},c=function(b){b.style.height=XD},h=function(b){var M=l(),w=UP({timeout:KD,mode:"enter"}),T=w.duration,C=w.easing;b.style.transitionDuration=typeof T=="string"?T:T+"ms",b.style.height=M+"px",b.style.transitionTimingFunction=C||""},p=function(b){b.style.height="auto"},g=function(b){b.style.height=l()+"px"},v=function(b){Lre(b);var M=UP({timeout:KD,mode:"exit"}),w=M.duration,T=M.easing;b.style.transitionDuration=typeof w=="string"?w:w+"ms",b.style.height=XD,b.style.transitionTimingFunction=T||""};return W.createElement(aj,{in:r,unmountOnExit:!0,onEnter:c,onEntered:p,onEntering:h,onExit:g,onExited:i,onExiting:v,nodeRef:a,timeout:KD},function(x,b){return W.createElement("div",Object.assign({ref:s,className:U0(OG.root,x==="entered"&&OG.entered),style:Ki({pointerEvents:"all",overflow:"hidden",minHeight:XD,transition:S_("height")},x==="entered"&&{overflow:"visible"},{},x==="exited"&&!r&&{visibility:"hidden"})},b),W.createElement("div",{ref:o,className:Tb.CollapseWrapper,style:{display:"flex",width:"100%"}},n))})});zre.displayName="Collapse";var LG={right:"left",left:"right",bottom:"up",top:"down"},ZLe=function(e){return e.horizontal!=="center"?LG[e.horizontal]:LG[e.vertical]},JLe=function(e){return"anchorOrigin"+sj(e)},QLe=function(e){e===void 0&&(e={});var n={containerRoot:!0,containerAnchorOriginTopCenter:!0,containerAnchorOriginBottomCenter:!0,containerAnchorOriginTopRight:!0,containerAnchorOriginBottomRight:!0,containerAnchorOriginTopLeft:!0,containerAnchorOriginBottomLeft:!0};return Object.keys(e).filter(function(r){return!n[r]}).reduce(function(r,i){var o;return Ki({},r,(o={},o[i]=e[i],o))},{})},eDe=function(){};function $S(t,e){return t.reduce(function(n,r){return r==null?n:function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];var l=[].concat(a);e&&l.indexOf(e)===-1&&l.push(e),n.apply(this,l),r.apply(this,l)}},eDe)}var tDe=typeof window<"u"?W.useLayoutEffect:W.useEffect;function DG(t){var e=W.useRef(t);return tDe(function(){e.current=t}),W.useCallback(function(){return e.current.apply(void 0,arguments)},[])}var Fre=W.forwardRef(function(t,e){var n=t.children,r=t.className,i=t.autoHideDuration,o=t.disableWindowBlurListener,a=o===void 0?!1:o,s=t.onClose,l=t.id,c=t.open,h=t.SnackbarProps,p=h===void 0?{}:h,g=W.useRef(),v=DG(function(){s&&s.apply(void 0,arguments)}),x=DG(function(C){!s||C==null||(g.current&&clearTimeout(g.current),g.current=setTimeout(function(){v(null,"timeout",l)},C))});W.useEffect(function(){return c&&x(i),function(){g.current&&clearTimeout(g.current)}},[c,i,x]);var b=function(){g.current&&clearTimeout(g.current)},M=W.useCallback(function(){i!=null&&x(i*.5)},[i,x]),w=function(I){p.onMouseEnter&&p.onMouseEnter(I),b()},T=function(I){p.onMouseLeave&&p.onMouseLeave(I),M()};return W.useEffect(function(){if(!a&&c)return window.addEventListener("focus",M),window.addEventListener("blur",b),function(){window.removeEventListener("focus",M),window.removeEventListener("blur",b)}},[a,M,c]),W.createElement("div",Object.assign({ref:e},p,{className:U0(Tb.Snackbar,r),onMouseEnter:w,onMouseLeave:T}),n)});Fre.displayName="Snackbar";var ZD,nDe=mE({root:(ZD={display:"flex",flexWrap:"wrap",flexGrow:1},ZD[Dv.upSm]={flexGrow:"initial",minWidth:"288px"},ZD)}),Bre=W.forwardRef(function(t,e){var n=t.className,r=pE(t,["className"]);return Ze.createElement("div",Object.assign({ref:e,className:U0(nDe.root,n)},r))});Bre.displayName="SnackbarContent";var Nw=mE({root:{backgroundColor:"#313131",fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em",color:"#fff",alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"},lessPadding:{paddingLeft:8*2.5+"px"},default:{backgroundColor:"#313131"},success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},warning:{backgroundColor:"#ff9800"},info:{backgroundColor:"#2196f3"},message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:"16px",marginRight:"-8px"}}),NG="notistack-snackbar",$re=W.forwardRef(function(t,e){var n=t.id,r=t.message,i=t.action,o=t.iconVariant,a=t.variant,s=t.hideIconVariant,l=t.style,c=t.className,h=o[a],p=i;return typeof p=="function"&&(p=p(n)),Ze.createElement(Bre,{ref:e,role:"alert","aria-describedby":NG,style:l,className:U0(Tb.MuiContent,Tb.MuiContentVariant(a),Nw.root,Nw[a],c,!s&&h&&Nw.lessPadding)},Ze.createElement("div",{id:NG,className:Nw.message},s?null:h,r),p&&Ze.createElement("div",{className:Nw.action},p))});$re.displayName="MaterialDesignContent";var rDe=W.memo($re),iDe=mE({wrappedRoot:{width:"100%",position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0,minWidth:"288px"}}),oDe=function(e){var n=W.useRef(),r=W.useState(!0),i=r[0],o=r[1],a=$S([e.snack.onClose,e.onClose]),s=function(){e.snack.requestClose&&a(null,"instructed",e.snack.id)},l=W.useCallback(function(){n.current=setTimeout(function(){o(function(Z){return!Z})},125)},[]);W.useEffect(function(){return function(){n.current&&clearTimeout(n.current)}},[]);var c=e.snack,h=e.classes,p=e.Component,g=p===void 0?rDe:p,v=W.useMemo(function(){return QLe(h)},[h]),x=c.open,b=c.SnackbarProps,M=c.TransitionComponent,w=c.TransitionProps,T=c.transitionDuration,C=c.disableWindowBlurListener,I=c.content,R=pE(c,["open","SnackbarProps","TransitionComponent","TransitionProps","transitionDuration","disableWindowBlurListener","content","entered","requestClose","onEnter","onEntered","onExit","onExited"]),O=Ki({direction:ZLe(R.anchorOrigin),timeout:T},w),B=I;typeof B=="function"&&(B=B(R.id,R.message));var U=["onEnter","onEntered","onExit","onExited"].reduce(function(Z,j){var X;return Ki({},Z,(X={},X[j]=$S([e.snack[j],e[j]],R.id),X))},{});return Ze.createElement(zre,{in:i,onExited:U.onExited},Ze.createElement(Fre,{open:x,id:R.id,disableWindowBlurListener:C,autoHideDuration:R.autoHideDuration,className:U0(iDe.wrappedRoot,v.root,v[JLe(R.anchorOrigin)]),SnackbarProps:b,onClose:a},Ze.createElement(M,Object.assign({},O,{appear:!0,in:x,onExit:U.onExit,onExited:l,onEnter:U.onEnter,onEntered:$S([U.onEntered,s],R.id)}),B||Ze.createElement(g,Object.assign({},R)))))},zw,JD,qT,YT,QD,ap={view:{default:20,dense:4},snackbar:{default:6,dense:2}},zG="."+Tb.CollapseWrapper,e3=16,XT=mE({root:(zw={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:1400,height:"auto",width:"auto",transition:S_(["top","right","bottom","left","max-width"],{duration:300,easing:"ease"}),pointerEvents:"none"},zw[zG]={padding:ap.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},zw.maxWidth="calc(100% - "+ap.view.default*2+"px)",zw[Dv.downXs]={width:"100%",maxWidth:"calc(100% - "+e3*2+"px)"},zw),rootDense:(JD={},JD[zG]={padding:ap.snackbar.dense+"px 0px"},JD),top:{top:ap.view.default-ap.snackbar.default+"px",flexDirection:"column"},bottom:{bottom:ap.view.default-ap.snackbar.default+"px",flexDirection:"column-reverse"},left:(qT={left:ap.view.default+"px"},qT[Dv.upSm]={alignItems:"flex-start"},qT[Dv.downXs]={left:e3+"px"},qT),right:(YT={right:ap.view.default+"px"},YT[Dv.upSm]={alignItems:"flex-end"},YT[Dv.downXs]={right:e3+"px"},YT),center:(QD={left:"50%",transform:"translateX(-50%)"},QD[Dv.upSm]={alignItems:"center"},QD)}),sDe=function(e){var n=e.classes,r=n===void 0?{}:n,i=e.anchorOrigin,o=e.dense,a=e.children,s=U0(Tb.SnackbarContainer,XT[i.vertical],XT[i.horizontal],XT.root,r.containerRoot,r["containerAnchorOrigin"+sj(i)],o&&XT.rootDense);return Ze.createElement("div",{className:s},a)},aDe=W.memo(sDe),FG=function(e){var n=typeof e=="string"||W.isValidElement(e);return!n},jre,lDe=function(t){Ore(e,t);function e(r){var i;return i=t.call(this,r)||this,i.enqueueSnackbar=function(o,a){if(a===void 0&&(a={}),o==null)throw new Error("enqueueSnackbar called with invalid argument");var s=FG(o)?o:a,l=FG(o)?o.message:o,c=s.key,h=s.preventDuplicate,p=pE(s,["key","preventDuplicate"]),g=WT(c),v=g?c:new Date().getTime()+Math.random(),x=KLe(p,i.props),b=Ki({id:v},p,{message:l,open:!0,entered:!1,requestClose:!1,persist:x("persist"),action:x("action"),content:x("content"),variant:x("variant"),anchorOrigin:x("anchorOrigin"),disableWindowBlurListener:x("disableWindowBlurListener"),autoHideDuration:x("autoHideDuration"),hideIconVariant:x("hideIconVariant"),TransitionComponent:x("TransitionComponent"),transitionDuration:x("transitionDuration"),TransitionProps:x("TransitionProps",!0),iconVariant:x("iconVariant",!0),style:x("style",!0),SnackbarProps:x("SnackbarProps",!0),className:U0(i.props.className,p.className)});return b.persist&&(b.autoHideDuration=void 0),i.setState(function(M){if(h===void 0&&i.props.preventDuplicate||h){var w=function(R){return g?R.id===v:R.message===l},T=M.queue.findIndex(w)>-1,C=M.snacks.findIndex(w)>-1;if(T||C)return M}return i.handleDisplaySnack(Ki({},M,{queue:[].concat(M.queue,[b])}))}),v},i.handleDisplaySnack=function(o){var a=o.snacks;return a.length>=i.maxSnack?i.handleDismissOldest(o):i.processQueue(o)},i.processQueue=function(o){var a=o.queue,s=o.snacks;return a.length>0?Ki({},o,{snacks:[].concat(s,[a[0]]),queue:a.slice(1,a.length)}):o},i.handleDismissOldest=function(o){if(o.snacks.some(function(h){return!h.open||h.requestClose}))return o;var a=!1,s=!1,l=o.snacks.reduce(function(h,p){return h+(p.open&&p.persist?1:0)},0);l===i.maxSnack&&(s=!0);var c=o.snacks.map(function(h){return!a&&(!h.persist||s)?(a=!0,h.entered?(h.onClose&&h.onClose(null,"maxsnack",h.id),i.props.onClose&&i.props.onClose(null,"maxsnack",h.id),Ki({},h,{open:!1})):Ki({},h,{requestClose:!0})):Ki({},h)});return Ki({},o,{snacks:c})},i.handleEnteredSnack=function(o,a,s){if(!WT(s))throw new Error("handleEnteredSnack Cannot be called with undefined key");i.setState(function(l){var c=l.snacks;return{snacks:c.map(function(h){return h.id===s?Ki({},h,{entered:!0}):Ki({},h)})}})},i.handleCloseSnack=function(o,a,s){i.props.onClose&&i.props.onClose(o,a,s);var l=s===void 0;i.setState(function(c){var h=c.snacks,p=c.queue;return{snacks:h.map(function(g){return!l&&g.id!==s?Ki({},g):g.entered?Ki({},g,{open:!1}):Ki({},g,{requestClose:!0})}),queue:p.filter(function(g){return g.id!==s})}})},i.closeSnackbar=function(o){var a=i.state.snacks.find(function(s){return s.id===o});WT(o)&&a&&a.onClose&&a.onClose(null,"instructed",o),i.handleCloseSnack(null,"instructed",o)},i.handleExitedSnack=function(o,a){if(!WT(a))throw new Error("handleExitedSnack Cannot be called with undefined key");i.setState(function(s){var l=i.processQueue(Ki({},s,{snacks:s.snacks.filter(function(c){return c.id!==a})}));return l.queue.length===0?l:i.handleDismissOldest(l)})},jre=i.enqueueSnackbar,i.closeSnackbar,i.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:i.enqueueSnackbar.bind(CG(i)),closeSnackbar:i.closeSnackbar.bind(CG(i))}},i}var n=e.prototype;return n.render=function(){var i=this,o=this.state.contextValue,a=this.props,s=a.domRoot,l=a.children,c=a.dense,h=c===void 0?!1:c,p=a.Components,g=p===void 0?{}:p,v=a.classes,x=this.state.snacks.reduce(function(M,w){var T,C=sj(w.anchorOrigin),I=M[C]||[];return Ki({},M,(T={},T[C]=[].concat(I,[w]),T))},{}),b=Object.keys(x).map(function(M){var w=x[M],T=w[0];return Ze.createElement(aDe,{key:M,dense:h,anchorOrigin:T.anchorOrigin,classes:v},w.map(function(C){return Ze.createElement(oDe,{key:C.id,snack:C,classes:v,Component:g[C.variant],onClose:i.handleCloseSnack,onEnter:i.props.onEnter,onExit:i.props.onExit,onExited:$S([i.handleExitedSnack,i.props.onExited],C.id),onEntered:$S([i.handleEnteredSnack,i.props.onEntered],C.id)})}))});return Ze.createElement(BLe.Provider,{value:o},l,s?py.createPortal(b,s):b)},Rre(e,[{key:"maxSnack",get:function(){return this.props.maxSnack||h0.maxSnack}}]),e}(W.Component);const BG=4e3,cDe=()=>{const t=Zl();mr(c=>c.devices.items);const e=W.useRef(),[n,r]=W.useState(!0),[i,o]=W.useState([]),[a,s]=W.useState([]),l=()=>{const c=window.location.protocol==="https:"?"wss:":"ws:",h=new WebSocket(`${c}//${window.location.host}/api/socket`);console.log(`${c}//${window.location.host}/api/socket`),e.current=h,console.log("funcion web socket"),h.onopen=()=>{t(ef.updateSocket(!0)),console.log("funcion web socket open")},h.onclose=async p=>{if(console.log("funcion web socket close"),t(ef.updateSocket(!1)),p.code!==BG){try{const g=await fetch("/api/devices");g.ok&&t(tu.update(await g.json()));const v=await fetch("/api/positions");v.ok&&t(SD.updatePositions(await v.json())),g.status===401||v.status}catch{}setTimeout(()=>l(),6e4)}},h.onmessage=p=>{const g=JSON.parse(p.data);g.devices&&(g.devices.length>0?t(tu.update(g.devices)):t(tu.clear())),g.positions&&t(SD.updatePositions(g.positions)),g.camera&&t(SD.updateCamera(g.camera)),g.server&&(g.server.rosState==="connect"?t(ef.updateServerROS(!0)):t(ef.updateServerROS(!1))),g.mission&&(console.log("data mission"),console.log(g.mission),t(uh.updateMission(g.mission))),g.events&&(console.log("add data events -------"),t(Xve.add(g.events)),o(g.events),console.log(g.events)),g.markers&&(console.log("add markers"),t(ef.updateMarker(g.markers))),g.planning&&(console.log("add planning "),t(ef.updatePlanning(g.planning)))}};return h1(async()=>{if(n){r(!1);const c=await fetch("/api/devices",{method:"GET"});if(c.ok)t(tu.refresh(await c.json()));else throw Error(await c.text());return console.log("primera conexion --s"),l(),()=>{const h=e.current;h&&h.close(BG)}}else return null},[]),W.useEffect(()=>{console.log("set notifications"),console.log(i);let c=[];i.map(h=>{let p=!0;a.map(g=>{g.id==h.id&&(p=!1)}),p&&c.push({id:h.id,type:h.type,message:h.attributes.message,show:!0})}),console.log("aux console log"),console.log(c),c.length>0&&s(c),c.forEach(h=>{h.type==="error"&&new Audio(RLe).play()})},[i]),W.useEffect(()=>{console.log("notifications"),a.map(c=>{jre(c.message,{variant:c.type,autoHideDuration:3e3,persist:!1,onClose:()=>o(i.filter(h=>h.id!==c.id))})})},[a]),F.jsx(F.Fragment,{children:F.jsx(lDe,{preventDuplicate:!0,maxSnack:6,autoHideDuration:5e3,anchorOrigin:{vertical:"bottom",horizontal:"right"}})})},uDe=Zye()(cDe),dDe=ri(()=>({page:{flexGrow:1,overflow:"auto"},menu:{zIndex:4}})),fDe=()=>{const t=dDe();return xd(),F.jsxs(F.Fragment,{children:[F.jsx(uDe,{}),F.jsx("div",{className:t.page,children:F.jsx(jge,{})})]})},hDe=()=>{const{search:t}=EI();return W.useMemo(()=>new URLSearchParams(t),[t])};var Ure={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(a_,function(){var n,r,i;function o(s,l){if(!n)n=l;else if(!r)r=l;else{var c="var sharedChunk = {}; ("+n+")(sharedChunk); ("+r+")(sharedChunk);",h={};n(h),i=l(h),typeof window<"u"&&(i.workerUrl=window.URL.createObjectURL(new Blob([c],{type:"text/javascript"})))}}o(["exports"],function(s){function l(f,u,m,_){return new(m||(m=Promise))(function(P,N){function z(J){try{Y(_.next(J))}catch(ne){N(ne)}}function V(J){try{Y(_.throw(J))}catch(ne){N(ne)}}function Y(J){var ne;J.done?P(J.value):(ne=J.value,ne instanceof m?ne:new m(function(ae){ae(ne)})).then(z,V)}Y((_=_.apply(f,u||[])).next())})}function c(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}typeof SuppressedError=="function"&&SuppressedError;var h=p;function p(f,u){this.x=f,this.y=u}p.prototype={clone:function(){return new p(this.x,this.y)},add:function(f){return this.clone()._add(f)},sub:function(f){return this.clone()._sub(f)},multByPoint:function(f){return this.clone()._multByPoint(f)},divByPoint:function(f){return this.clone()._divByPoint(f)},mult:function(f){return this.clone()._mult(f)},div:function(f){return this.clone()._div(f)},rotate:function(f){return this.clone()._rotate(f)},rotateAround:function(f,u){return this.clone()._rotateAround(f,u)},matMult:function(f){return this.clone()._matMult(f)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(f){return this.x===f.x&&this.y===f.y},dist:function(f){return Math.sqrt(this.distSqr(f))},distSqr:function(f){var u=f.x-this.x,m=f.y-this.y;return u*u+m*m},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(f){return Math.atan2(this.y-f.y,this.x-f.x)},angleWith:function(f){return this.angleWithSep(f.x,f.y)},angleWithSep:function(f,u){return Math.atan2(this.x*u-this.y*f,this.x*f+this.y*u)},_matMult:function(f){var u=f[2]*this.x+f[3]*this.y;return this.x=f[0]*this.x+f[1]*this.y,this.y=u,this},_add:function(f){return this.x+=f.x,this.y+=f.y,this},_sub:function(f){return this.x-=f.x,this.y-=f.y,this},_mult:function(f){return this.x*=f,this.y*=f,this},_div:function(f){return this.x/=f,this.y/=f,this},_multByPoint:function(f){return this.x*=f.x,this.y*=f.y,this},_divByPoint:function(f){return this.x/=f.x,this.y/=f.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var f=this.y;return this.y=this.x,this.x=-f,this},_rotate:function(f){var u=Math.cos(f),m=Math.sin(f),_=m*this.x+u*this.y;return this.x=u*this.x-m*this.y,this.y=_,this},_rotateAround:function(f,u){var m=Math.cos(f),_=Math.sin(f),P=u.y+_*(this.x-u.x)+m*(this.y-u.y);return this.x=u.x+m*(this.x-u.x)-_*(this.y-u.y),this.y=P,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},p.convert=function(f){return f instanceof p?f:Array.isArray(f)?new p(f[0],f[1]):f};var g=c(h),v=x;function x(f,u,m,_){this.cx=3*f,this.bx=3*(m-f)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(_-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=f,this.p1y=u,this.p2x=m,this.p2y=_}x.prototype={sampleCurveX:function(f){return((this.ax*f+this.bx)*f+this.cx)*f},sampleCurveY:function(f){return((this.ay*f+this.by)*f+this.cy)*f},sampleCurveDerivativeX:function(f){return(3*this.ax*f+2*this.bx)*f+this.cx},solveCurveX:function(f,u){if(u===void 0&&(u=1e-6),f<0)return 0;if(f>1)return 1;for(var m=f,_=0;_<8;_++){var P=this.sampleCurveX(m)-f;if(Math.abs(P)<u)return m;var N=this.sampleCurveDerivativeX(m);if(Math.abs(N)<1e-6)break;m-=P/N}var z=0,V=1;for(m=f,_=0;_<20&&(P=this.sampleCurveX(m),!(Math.abs(P-f)<u));_++)f>P?z=m:V=m,m=.5*(V-z)+z;return m},solve:function(f,u){return this.sampleCurveY(this.solveCurveX(f,u))}};var b=c(v);let M,w;function T(){return M==null&&(M=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),M}function C(){if(w==null&&(w=!1,T())){const u=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(u){for(let _=0;_<5*5;_++){const P=4*_;u.fillStyle=`rgb(${P},${P+1},${P+2})`,u.fillRect(_%5,Math.floor(_/5),1,1)}const m=u.getImageData(0,0,5,5).data;for(let _=0;_<5*5*4;_++)if(_%4!=3&&m[_]!==_){w=!0;break}}}return w||!1}function I(f,u,m,_){const P=new b(f,u,m,_);return function(N){return P.solve(N)}}const R=I(.25,.1,.25,1);function O(f,u,m){return Math.min(m,Math.max(u,f))}function B(f,u,m){const _=m-u,P=((f-u)%_+_)%_+u;return P===u?m:P}function U(f,...u){for(const m of u)for(const _ in m)f[_]=m[_];return f}let Z=1;function j(f,u,m){const _={};for(const P in f)_[P]=u.call(m||this,f[P],P,f);return _}function X(f,u,m){const _={};for(const P in f)u.call(m||this,f[P],P,f)&&(_[P]=f[P]);return _}function le(f){return Array.isArray(f)?f.map(le):typeof f=="object"&&f?j(f,le):f}const me={};function ie(f){me[f]||(typeof console<"u"&&console.warn(f),me[f]=!0)}function ce(f,u,m){return(m.y-f.y)*(u.x-f.x)>(u.y-f.y)*(m.x-f.x)}function fe(f){let u=0;for(let m,_,P=0,N=f.length,z=N-1;P<N;z=P++)m=f[P],_=f[z],u+=(_.x-m.x)*(m.y+_.y);return u}function xe(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let te=null;function he(f){return typeof ImageBitmap<"u"&&f instanceof ImageBitmap}const ve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ze(f,u,m,_,P){return l(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const N=new VideoFrame(f,{timestamp:0});try{const z=N==null?void 0:N.format;if(!z||!z.startsWith("BGR")&&!z.startsWith("RGB"))throw new Error(`Unrecognized format ${z}`);const V=z.startsWith("BGR"),Y=new Uint8ClampedArray(_*P*4);if(yield N.copyTo(Y,function(J,ne,ae,ye,Se){const Ee=4*Math.max(-ne,0),De=(Math.max(0,ae)-ae)*ye*4+Ee,He=4*ye,Ye=Math.max(0,ne),pt=Math.max(0,ae);return{rect:{x:Ye,y:pt,width:Math.min(J.width,ne+ye)-Ye,height:Math.min(J.height,ae+Se)-pt},layout:[{offset:De,stride:He}]}}(f,u,m,_,P)),V)for(let J=0;J<Y.length;J+=4){const ne=Y[J];Y[J]=Y[J+2],Y[J+2]=ne}return Y}finally{N.close()}})}let Ue,rt,Be,st;const ct={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(f){const u=requestAnimationFrame(f);return{cancel:()=>cancelAnimationFrame(u)}},getImageData(f,u=0){return this.getImageCanvasContext(f).getImageData(-u,-u,f.width+2*u,f.height+2*u)},getImageCanvasContext(f){const u=window.document.createElement("canvas"),m=u.getContext("2d",{willReadFrequently:!0});if(!m)throw new Error("failed to create canvas 2d context");return u.width=f.width,u.height=f.height,m.drawImage(f,0,0,f.width,f.height),m},resolveURL:f=>(Be||(Be=document.createElement("a")),Be.href=f,Be.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(st==null&&(st=matchMedia("(prefers-reduced-motion: reduce)")),st.matches)}},Dt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class zt extends Error{constructor(u,m,_,P){super(`AJAXError: ${m} (${u}): ${_}`),this.status=u,this.statusText=m,this.url=_,this.body=P}}const Fe=xe()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,lt=f=>Dt.REGISTERED_PROTOCOLS[f.substring(0,f.indexOf("://"))];function Qe(f,u){const m=new AbortController,_=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,cache:f.cache,referrer:Fe(),signal:m.signal});let P=!1,N=!1;return f.type==="json"&&_.headers.set("Accept","application/json"),N||fetch(_).then(z=>z.ok?(V=>{(f.type==="arrayBuffer"||f.type==="image"?V.arrayBuffer():f.type==="json"?V.json():V.text()).then(Y=>{N||(P=!0,u(null,Y,V.headers.get("Cache-Control"),V.headers.get("Expires")))}).catch(Y=>{N||u(new Error(Y.message))})})(z):z.blob().then(V=>u(new zt(z.status,z.statusText,f.url,V)))).catch(z=>{z.code!==20&&u(new Error(z.message))}),{cancel:()=>{N=!0,P||m.abort()}}}const ge=function(f,u){if(/:\/\//.test(f.url)&&!/^https?:|^file:/.test(f.url)){if(xe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",f,u);if(!xe())return(lt(f.url)||Qe)(f,u)}if(!(/^file:/.test(m=f.url)||/^file:/.test(Fe())&&!/^\w+:/.test(m))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Qe(f,u);if(xe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",f,u,void 0,!0)}var m;return function(_,P){const N=new XMLHttpRequest;N.open(_.method||"GET",_.url,!0),_.type!=="arrayBuffer"&&_.type!=="image"||(N.responseType="arraybuffer");for(const z in _.headers)N.setRequestHeader(z,_.headers[z]);return _.type==="json"&&(N.responseType="text",N.setRequestHeader("Accept","application/json")),N.withCredentials=_.credentials==="include",N.onerror=()=>{P(new Error(N.statusText))},N.onload=()=>{if((N.status>=200&&N.status<300||N.status===0)&&N.response!==null){let z=N.response;if(_.type==="json")try{z=JSON.parse(N.response)}catch(V){return P(V)}P(null,z,N.getResponseHeader("Cache-Control"),N.getResponseHeader("Expires"))}else{const z=new Blob([N.response],{type:N.getResponseHeader("Content-Type")});P(new zt(N.status,N.statusText,_.url,z))}},N.send(_.body),{cancel:()=>N.abort()}}(f,u)},et=function(f,u){return ge(U(f,{type:"arrayBuffer"}),u)};function ot(f){if(!f||f.indexOf("://")<=0||f.indexOf("data:image/")===0||f.indexOf("blob:")===0)return!0;const u=new URL(f),m=window.location;return u.protocol===m.protocol&&u.host===m.host}function Tt(f,u,m){m[f]&&m[f].indexOf(u)!==-1||(m[f]=m[f]||[],m[f].push(u))}function Ct(f,u,m){if(m&&m[f]){const _=m[f].indexOf(u);_!==-1&&m[f].splice(_,1)}}class Bt{constructor(u,m={}){U(this,m),this.type=u}}class Gt extends Bt{constructor(u,m={}){super("error",U({error:u},m))}}class sn{on(u,m){return this._listeners=this._listeners||{},Tt(u,m,this._listeners),this}off(u,m){return Ct(u,m,this._listeners),Ct(u,m,this._oneTimeListeners),this}once(u,m){return m?(this._oneTimeListeners=this._oneTimeListeners||{},Tt(u,m,this._oneTimeListeners),this):new Promise(_=>this.once(u,_))}fire(u,m){typeof u=="string"&&(u=new Bt(u,m||{}));const _=u.type;if(this.listens(_)){u.target=this;const P=this._listeners&&this._listeners[_]?this._listeners[_].slice():[];for(const V of P)V.call(this,u);const N=this._oneTimeListeners&&this._oneTimeListeners[_]?this._oneTimeListeners[_].slice():[];for(const V of N)Ct(_,V,this._oneTimeListeners),V.call(this,u);const z=this._eventedParent;z&&(U(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),z.fire(u))}else u instanceof Gt&&console.error(u.error);return this}listens(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)}setEventedParent(u,m){return this._eventedParent=u,this._eventedParentData=m,this}}var Je={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Ce=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function _e(f,u){const m={};for(const _ in f)_!=="ref"&&(m[_]=f[_]);return Ce.forEach(_=>{_ in u&&(m[_]=u[_])}),m}function ht(f,u){if(Array.isArray(f)){if(!Array.isArray(u)||f.length!==u.length)return!1;for(let m=0;m<f.length;m++)if(!ht(f[m],u[m]))return!1;return!0}if(typeof f=="object"&&f!==null&&u!==null){if(typeof u!="object"||Object.keys(f).length!==Object.keys(u).length)return!1;for(const m in f)if(!ht(f[m],u[m]))return!1;return!0}return f===u}const dt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Wt(f,u,m){m.push({command:dt.addSource,args:[f,u[f]]})}function jt(f,u,m){u.push({command:dt.removeSource,args:[f]}),m[f]=!0}function Sn(f,u,m,_){jt(f,m,_),Wt(f,u,m)}function cn(f,u,m){let _;for(_ in f[m])if(Object.prototype.hasOwnProperty.call(f[m],_)&&_!=="data"&&!ht(f[m][_],u[m][_]))return!1;for(_ in u[m])if(Object.prototype.hasOwnProperty.call(u[m],_)&&_!=="data"&&!ht(f[m][_],u[m][_]))return!1;return!0}function Rt(f,u,m,_,P,N){let z;for(z in u=u||{},f=f||{})Object.prototype.hasOwnProperty.call(f,z)&&(ht(f[z],u[z])||m.push({command:N,args:[_,z,u[z],P]}));for(z in u)Object.prototype.hasOwnProperty.call(u,z)&&!Object.prototype.hasOwnProperty.call(f,z)&&(ht(f[z],u[z])||m.push({command:N,args:[_,z,u[z],P]}))}function nn(f){return f.id}function An(f,u){return f[u.id]=u,f}class mt{constructor(u,m,_,P){this.message=(u?`${u}: `:"")+_,P&&(this.identifier=P),m!=null&&m.__line__&&(this.line=m.__line__)}}function un(f,...u){for(const m of u)for(const _ in m)f[_]=m[_];return f}class an extends Error{constructor(u,m){super(m),this.message=m,this.key=u}}class Ot{constructor(u,m=[]){this.parent=u,this.bindings={};for(const[_,P]of m)this.bindings[_]=P}concat(u){return new Ot(this,u)}get(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(`${u} not found in scope.`)}has(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)}}const Ie={kind:"null"},Ve={kind:"number"},Me={kind:"string"},it={kind:"boolean"},Qt={kind:"color"},Xe={kind:"object"},It={kind:"value"},Et={kind:"collator"},we={kind:"formatted"},oe={kind:"padding"},pe={kind:"resolvedImage"},Te={kind:"variableAnchorOffsetCollection"};function Pe(f,u){return{kind:"array",itemType:f,N:u}}function Ne(f){if(f.kind==="array"){const u=Ne(f.itemType);return typeof f.N=="number"?`array<${u}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${u}>`}return f.kind}const Ke=[Ie,Ve,Me,it,Qt,we,Xe,Pe(It),oe,pe,Te];function qe(f,u){if(u.kind==="error")return null;if(f.kind==="array"){if(u.kind==="array"&&(u.N===0&&u.itemType.kind==="value"||!qe(f.itemType,u.itemType))&&(typeof f.N!="number"||f.N===u.N))return null}else{if(f.kind===u.kind)return null;if(f.kind==="value"){for(const m of Ke)if(!qe(m,u))return null}}return`Expected ${Ne(f)} but found ${Ne(u)} instead.`}function je(f,u){return u.some(m=>m.kind===f.kind)}function tt(f,u){return u.some(m=>m==="null"?f===null:m==="array"?Array.isArray(f):m==="object"?f&&!Array.isArray(f)&&typeof f=="object":m===typeof f)}function Nt(f,u){return f.kind==="array"&&u.kind==="array"?f.itemType.kind===u.itemType.kind&&typeof f.N=="number":f.kind===u.kind}const Ut=.96422,$t=.82521,kn=4/29,er=6/29,En=3*er*er,$n=er*er*er,sr=Math.PI/180,$r=180/Math.PI;function Ae(f){return(f%=360)<0&&(f+=360),f}function ut([f,u,m,_]){let P,N;const z=yt((.2225045*(f=bt(f))+.7168786*(u=bt(u))+.0606169*(m=bt(m)))/1);f===u&&u===m?P=N=z:(P=yt((.4360747*f+.3850649*u+.1430804*m)/Ut),N=yt((.0139322*f+.0971045*u+.7141733*m)/$t));const V=116*z-16;return[V<0?0:V,500*(P-z),200*(z-N),_]}function bt(f){return f<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function yt(f){return f>$n?Math.pow(f,1/3):f/En+kn}function vt([f,u,m,_]){let P=(f+16)/116,N=isNaN(u)?P:P+u/500,z=isNaN(m)?P:P-m/200;return P=1*Cn(P),N=Ut*Cn(N),z=$t*Cn(z),[pn(3.1338561*N-1.6168667*P-.4906146*z),pn(-.9787684*N+1.9161415*P+.033454*z),pn(.0719453*N-.2289914*P+1.4052427*z),_]}function pn(f){return(f=f<=.00304?12.92*f:1.055*Math.pow(f,1/2.4)-.055)<0?0:f>1?1:f}function Cn(f){return f>er?f*f*f:En*(f-kn)}function Xn(f){return parseInt(f.padEnd(2,f),16)/255}function dr(f,u){return fr(u?f/100:f,0,1)}function fr(f,u,m){return Math.min(Math.max(u,f),m)}function cr(f){return!f.some(Number.isNaN)}const _r={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class ar{constructor(u,m,_,P=1,N=!0){this.r=u,this.g=m,this.b=_,this.a=P,N||(this.r*=P,this.g*=P,this.b*=P,P||this.overwriteGetter("rgb",[u,m,_,P]))}static parse(u){if(u instanceof ar)return u;if(typeof u!="string")return;const m=function(_){if((_=_.toLowerCase().trim())==="transparent")return[0,0,0,0];const P=_r[_];if(P){const[z,V,Y]=P;return[z/255,V/255,Y/255,1]}if(_.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(_)){const z=_.length<6?1:2;let V=1;return[Xn(_.slice(V,V+=z)),Xn(_.slice(V,V+=z)),Xn(_.slice(V,V+=z)),Xn(_.slice(V,V+z)||"ff")]}if(_.startsWith("rgb")){const z=_.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(z){const[V,Y,J,ne,ae,ye,Se,Ee,De,He,Ye,pt]=z,nt=[ne||" ",Se||" ",He].join("");if(nt==="  "||nt==="  /"||nt===",,"||nt===",,,"){const xt=[J,ye,De].join(""),kt=xt==="%%%"?100:xt===""?255:0;if(kt){const Yt=[fr(+Y/kt,0,1),fr(+ae/kt,0,1),fr(+Ee/kt,0,1),Ye?dr(+Ye,pt):1];if(cr(Yt))return Yt}}return}}const N=_.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(N){const[z,V,Y,J,ne,ae,ye,Se,Ee]=N,De=[Y||" ",ne||" ",ye].join("");if(De==="  "||De==="  /"||De===",,"||De===",,,"){const He=[+V,fr(+J,0,100),fr(+ae,0,100),Se?dr(+Se,Ee):1];if(cr(He))return function([Ye,pt,nt,xt]){function kt(Yt){const bn=(Yt+Ye/30)%12,zn=pt*Math.min(nt,1-nt);return nt-zn*Math.max(-1,Math.min(bn-3,9-bn,1))}return Ye=Ae(Ye),pt/=100,nt/=100,[kt(0),kt(8),kt(4),xt]}(He)}}}(u);return m?new ar(...m,!1):void 0}get rgb(){const{r:u,g:m,b:_,a:P}=this,N=P||1/0;return this.overwriteGetter("rgb",[u/N,m/N,_/N,P])}get hcl(){return this.overwriteGetter("hcl",function(u){const[m,_,P,N]=ut(u),z=Math.sqrt(_*_+P*P);return[Math.round(1e4*z)?Ae(Math.atan2(P,_)*$r):NaN,z,m,N]}(this.rgb))}get lab(){return this.overwriteGetter("lab",ut(this.rgb))}overwriteGetter(u,m){return Object.defineProperty(this,u,{value:m}),m}toString(){const[u,m,_,P]=this.rgb;return`rgba(${[u,m,_].map(N=>Math.round(255*N)).join(",")},${P})`}}ar.black=new ar(0,0,0,1),ar.white=new ar(1,1,1,1),ar.transparent=new ar(0,0,0,0),ar.red=new ar(1,0,0,1);class No{constructor(u,m,_){this.sensitivity=u?m?"variant":"case":m?"accent":"base",this.locale=_,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(u,m){return this.collator.compare(u,m)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class fi{constructor(u,m,_,P,N){this.text=u,this.image=m,this.scale=_,this.fontStack=P,this.textColor=N}}class Yr{constructor(u){this.sections=u}static fromString(u){return new Yr([new fi(u,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(u=>u.text.length!==0||u.image&&u.image.name.length!==0)}static factory(u){return u instanceof Yr?u:Yr.fromString(u)}toString(){return this.sections.length===0?"":this.sections.map(u=>u.text).join("")}}class Kn{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Kn)return u;if(typeof u=="number")return new Kn([u,u,u,u]);if(Array.isArray(u)&&!(u.length<1||u.length>4)){for(const m of u)if(typeof m!="number")return;switch(u.length){case 1:u=[u[0],u[0],u[0],u[0]];break;case 2:u=[u[0],u[1],u[0],u[1]];break;case 3:u=[u[0],u[1],u[2],u[1]]}return new Kn(u)}}toString(){return JSON.stringify(this.values)}}const Dn=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class to{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof to)return u;if(Array.isArray(u)&&!(u.length<1)&&u.length%2==0){for(let m=0;m<u.length;m+=2){const _=u[m],P=u[m+1];if(typeof _!="string"||!Dn.has(_)||!Array.isArray(P)||P.length!==2||typeof P[0]!="number"||typeof P[1]!="number")return}return new to(u)}}toString(){return JSON.stringify(this.values)}}class tr{constructor(u){this.name=u.name,this.available=u.available}toString(){return this.name}static fromString(u){return u?new tr({name:u,available:!1}):null}}function Li(f,u,m,_){return typeof f=="number"&&f>=0&&f<=255&&typeof u=="number"&&u>=0&&u<=255&&typeof m=="number"&&m>=0&&m<=255?_===void 0||typeof _=="number"&&_>=0&&_<=1?null:`Invalid rgba value [${[f,u,m,_].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof _=="number"?[f,u,m,_]:[f,u,m]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ns(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof ar||f instanceof No||f instanceof Yr||f instanceof Kn||f instanceof to||f instanceof tr)return!0;if(Array.isArray(f)){for(const u of f)if(!Ns(u))return!1;return!0}if(typeof f=="object"){for(const u in f)if(!Ns(f[u]))return!1;return!0}return!1}function Ur(f){if(f===null)return Ie;if(typeof f=="string")return Me;if(typeof f=="boolean")return it;if(typeof f=="number")return Ve;if(f instanceof ar)return Qt;if(f instanceof No)return Et;if(f instanceof Yr)return we;if(f instanceof Kn)return oe;if(f instanceof to)return Te;if(f instanceof tr)return pe;if(Array.isArray(f)){const u=f.length;let m;for(const _ of f){const P=Ur(_);if(m){if(m===P)continue;m=It;break}m=P}return Pe(m||It,u)}return Xe}function hr(f){const u=typeof f;return f===null?"":u==="string"||u==="number"||u==="boolean"?String(f):f instanceof ar||f instanceof Yr||f instanceof Kn||f instanceof to||f instanceof tr?f.toString():JSON.stringify(f)}class Si{constructor(u,m){this.type=u,this.value=m}static parse(u,m){if(u.length!==2)return m.error(`'literal' expression requires exactly one argument, but found ${u.length-1} instead.`);if(!Ns(u[1]))return m.error("invalid value");const _=u[1];let P=Ur(_);const N=m.expectedType;return P.kind!=="array"||P.N!==0||!N||N.kind!=="array"||typeof N.N=="number"&&N.N!==0||(P=N),new Si(P,_)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Zr{constructor(u){this.name="ExpressionEvaluationError",this.message=u}toJSON(){return this.message}}const Rc={string:Me,number:Ve,boolean:it,object:Xe};class hi{constructor(u,m){this.type=u,this.args=m}static parse(u,m){if(u.length<2)return m.error("Expected at least one argument.");let _,P=1;const N=u[0];if(N==="array"){let V,Y;if(u.length>2){const J=u[1];if(typeof J!="string"||!(J in Rc)||J==="object")return m.error('The item type argument of "array" must be one of string, number, boolean',1);V=Rc[J],P++}else V=It;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return m.error('The length argument to "array" must be a positive integer literal',2);Y=u[2],P++}_=Pe(V,Y)}else{if(!Rc[N])throw new Error(`Types doesn't contain name = ${N}`);_=Rc[N]}const z=[];for(;P<u.length;P++){const V=m.parse(u[P],P,It);if(!V)return null;z.push(V)}return new hi(_,z)}evaluate(u){for(let m=0;m<this.args.length;m++){const _=this.args[m].evaluate(u);if(!qe(this.type,Ur(_)))return _;if(m===this.args.length-1)throw new Zr(`Expected value to be of type ${Ne(this.type)}, but found ${Ne(Ur(_))} instead.`)}throw new Error}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const Eu={"to-boolean":it,"to-color":Qt,"to-number":Ve,"to-string":Me};class To{constructor(u,m){this.type=u,this.args=m}static parse(u,m){if(u.length<2)return m.error("Expected at least one argument.");const _=u[0];if(!Eu[_])throw new Error(`Can't parse ${_} as it is not part of the known types`);if((_==="to-boolean"||_==="to-string")&&u.length!==2)return m.error("Expected one argument.");const P=Eu[_],N=[];for(let z=1;z<u.length;z++){const V=m.parse(u[z],z,It);if(!V)return null;N.push(V)}return new To(P,N)}evaluate(u){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(u);case"color":{let m,_;for(const P of this.args){if(m=P.evaluate(u),_=null,m instanceof ar)return m;if(typeof m=="string"){const N=u.parseColor(m);if(N)return N}else if(Array.isArray(m)&&(_=m.length<3||m.length>4?`Invalid rbga value ${JSON.stringify(m)}: expected an array containing either three or four numeric values.`:Li(m[0],m[1],m[2],m[3]),!_))return new ar(m[0]/255,m[1]/255,m[2]/255,m[3])}throw new Zr(_||`Could not parse color from value '${typeof m=="string"?m:JSON.stringify(m)}'`)}case"padding":{let m;for(const _ of this.args){m=_.evaluate(u);const P=Kn.parse(m);if(P)return P}throw new Zr(`Could not parse padding from value '${typeof m=="string"?m:JSON.stringify(m)}'`)}case"variableAnchorOffsetCollection":{let m;for(const _ of this.args){m=_.evaluate(u);const P=to.parse(m);if(P)return P}throw new Zr(`Could not parse variableAnchorOffsetCollection from value '${typeof m=="string"?m:JSON.stringify(m)}'`)}case"number":{let m=null;for(const _ of this.args){if(m=_.evaluate(u),m===null)return 0;const P=Number(m);if(!isNaN(P))return P}throw new Zr(`Could not convert ${JSON.stringify(m)} to number.`)}case"formatted":return Yr.fromString(hr(this.args[0].evaluate(u)));case"resolvedImage":return tr.fromString(hr(this.args[0].evaluate(u)));default:return hr(this.args[0].evaluate(u))}}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const $h=["Unknown","Point","LineString","Polygon"];class ky{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?$h[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(u){let m=this._parseColorCache[u];return m||(m=this._parseColorCache[u]=ar.parse(u)),m}}class fm{constructor(u,m,_=[],P,N=new Ot,z=[]){this.registry=u,this.path=_,this.key=_.map(V=>`[${V}]`).join(""),this.scope=N,this.errors=z,this.expectedType=P,this._isConstant=m}parse(u,m,_,P,N={}){return m?this.concat(m,_,P)._parse(u,N):this._parse(u,N)}_parse(u,m){function _(P,N,z){return z==="assert"?new hi(N,[P]):z==="coerce"?new To(N,[P]):P}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const P=u[0];if(typeof P!="string")return this.error(`Expression name must be a string, but found ${typeof P} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const N=this.registry[P];if(N){let z=N.parse(u,this);if(!z)return null;if(this.expectedType){const V=this.expectedType,Y=z.type;if(V.kind!=="string"&&V.kind!=="number"&&V.kind!=="boolean"&&V.kind!=="object"&&V.kind!=="array"||Y.kind!=="value")if(V.kind!=="color"&&V.kind!=="formatted"&&V.kind!=="resolvedImage"||Y.kind!=="value"&&Y.kind!=="string")if(V.kind!=="padding"||Y.kind!=="value"&&Y.kind!=="number"&&Y.kind!=="array")if(V.kind!=="variableAnchorOffsetCollection"||Y.kind!=="value"&&Y.kind!=="array"){if(this.checkSubtype(V,Y))return null}else z=_(z,V,m.typeAnnotation||"coerce");else z=_(z,V,m.typeAnnotation||"coerce");else z=_(z,V,m.typeAnnotation||"coerce");else z=_(z,V,m.typeAnnotation||"assert")}if(!(z instanceof Si)&&z.type.kind!=="resolvedImage"&&this._isConstant(z)){const V=new ky;try{z=new Si(z.type,z.evaluate(V))}catch(Y){return this.error(Y.message),null}}return z}return this.error(`Unknown expression "${P}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof u} instead.`)}concat(u,m,_){const P=typeof u=="number"?this.path.concat(u):this.path,N=_?this.scope.concat(_):this.scope;return new fm(this.registry,this._isConstant,P,m||null,N,this.errors)}error(u,...m){const _=`${this.key}${m.map(P=>`[${P}]`).join("")}`;this.errors.push(new an(_,u))}checkSubtype(u,m){const _=qe(u,m);return _&&this.error(_),_}}class Sd{constructor(u,m,_){this.type=Et,this.locale=_,this.caseSensitive=u,this.diacriticSensitive=m}static parse(u,m){if(u.length!==2)return m.error("Expected one argument.");const _=u[1];if(typeof _!="object"||Array.isArray(_))return m.error("Collator options argument must be an object.");const P=m.parse(_["case-sensitive"]!==void 0&&_["case-sensitive"],1,it);if(!P)return null;const N=m.parse(_["diacritic-sensitive"]!==void 0&&_["diacritic-sensitive"],1,it);if(!N)return null;let z=null;return _.locale&&(z=m.parse(_.locale,1,Me),!z)?null:new Sd(P,N,z)}evaluate(u){return new No(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)}eachChild(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)}outputDefined(){return!1}}const Sl=8192;function Md(f,u){f[0]=Math.min(f[0],u[0]),f[1]=Math.min(f[1],u[1]),f[2]=Math.max(f[2],u[0]),f[3]=Math.max(f[3],u[1])}function Tu(f,u){return!(f[0]<=u[0]||f[2]>=u[2]||f[1]<=u[1]||f[3]>=u[3])}function J0(f,u){const m=(180+f[0])/360,_=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,P=Math.pow(2,u.z);return[Math.round(m*P*Sl),Math.round(_*P*Sl)]}function W1(f,u,m){const _=f[0]-u[0],P=f[1]-u[1],N=f[0]-m[0],z=f[1]-m[1];return _*z-N*P==0&&_*N<=0&&P*z<=0}function jh(f,u){let m=!1;for(let z=0,V=u.length;z<V;z++){const Y=u[z];for(let J=0,ne=Y.length;J<ne-1;J++){if(W1(f,Y[J],Y[J+1]))return!1;(P=Y[J])[1]>(_=f)[1]!=(N=Y[J+1])[1]>_[1]&&_[0]<(N[0]-P[0])*(_[1]-P[1])/(N[1]-P[1])+P[0]&&(m=!m)}}var _,P,N;return m}function Uh(f,u){for(let m=0;m<u.length;m++)if(jh(f,u[m]))return!0;return!1}function Mf(f,u,m,_){const P=_[0]-m[0],N=_[1]-m[1],z=(f[0]-m[0])*N-P*(f[1]-m[1]),V=(u[0]-m[0])*N-P*(u[1]-m[1]);return z>0&&V<0||z<0&&V>0}function H1(f,u,m){for(const J of m)for(let ne=0;ne<J.length-1;++ne)if((V=[(z=J[ne+1])[0]-(N=J[ne])[0],z[1]-N[1]])[0]*(Y=[(P=u)[0]-(_=f)[0],P[1]-_[1]])[1]-V[1]*Y[0]!=0&&Mf(_,P,N,z)&&Mf(N,z,_,P))return!0;var _,P,N,z,V,Y;return!1}function hm(f,u){for(let m=0;m<f.length;++m)if(!jh(f[m],u))return!1;for(let m=0;m<f.length-1;++m)if(H1(f[m],f[m+1],u))return!1;return!0}function Xr(f,u){for(let m=0;m<u.length;m++)if(hm(f,u[m]))return!0;return!1}function Vh(f,u,m){const _=[];for(let P=0;P<f.length;P++){const N=[];for(let z=0;z<f[P].length;z++){const V=J0(f[P][z],m);Md(u,V),N.push(V)}_.push(N)}return _}function pm(f,u,m){const _=[];for(let P=0;P<f.length;P++){const N=Vh(f[P],u,m);_.push(N)}return _}function Iy(f,u,m,_){if(f[0]<m[0]||f[0]>m[2]){const P=.5*_;let N=f[0]-m[0]>P?-_:m[0]-f[0]>P?_:0;N===0&&(N=f[0]-m[2]>P?-_:m[2]-f[0]>P?_:0),f[0]+=N}Md(u,f)}function Ry(f,u,m,_){const P=Math.pow(2,_.z)*Sl,N=[_.x*Sl,_.y*Sl],z=[];for(const V of f)for(const Y of V){const J=[Y.x+N[0],Y.y+N[1]];Iy(J,u,m,P),z.push(J)}return z}function Oy(f,u,m,_){const P=Math.pow(2,_.z)*Sl,N=[_.x*Sl,_.y*Sl],z=[];for(const Y of f){const J=[];for(const ne of Y){const ae=[ne.x+N[0],ne.y+N[1]];Md(u,ae),J.push(ae)}z.push(J)}if(u[2]-u[0]<=P/2){(V=u)[0]=V[1]=1/0,V[2]=V[3]=-1/0;for(const Y of z)for(const J of Y)Iy(J,u,m,P)}var V;return z}class Ui{constructor(u,m){this.type=it,this.geojson=u,this.geometries=m}static parse(u,m){if(u.length!==2)return m.error(`'within' expression requires exactly one argument, but found ${u.length-1} instead.`);if(Ns(u[1])){const _=u[1];if(_.type==="FeatureCollection")for(let P=0;P<_.features.length;++P){const N=_.features[P].geometry.type;if(N==="Polygon"||N==="MultiPolygon")return new Ui(_,_.features[P].geometry)}else if(_.type==="Feature"){const P=_.geometry.type;if(P==="Polygon"||P==="MultiPolygon")return new Ui(_,_.geometry)}else if(_.type==="Polygon"||_.type==="MultiPolygon")return new Ui(_,_)}return m.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(m,_){const P=[1/0,1/0,-1/0,-1/0],N=[1/0,1/0,-1/0,-1/0],z=m.canonicalID();if(_.type==="Polygon"){const V=Vh(_.coordinates,N,z),Y=Ry(m.geometry(),P,N,z);if(!Tu(P,N))return!1;for(const J of Y)if(!jh(J,V))return!1}if(_.type==="MultiPolygon"){const V=pm(_.coordinates,N,z),Y=Ry(m.geometry(),P,N,z);if(!Tu(P,N))return!1;for(const J of Y)if(!Uh(J,V))return!1}return!0}(u,this.geometries);if(u.geometryType()==="LineString")return function(m,_){const P=[1/0,1/0,-1/0,-1/0],N=[1/0,1/0,-1/0,-1/0],z=m.canonicalID();if(_.type==="Polygon"){const V=Vh(_.coordinates,N,z),Y=Oy(m.geometry(),P,N,z);if(!Tu(P,N))return!1;for(const J of Y)if(!hm(J,V))return!1}if(_.type==="MultiPolygon"){const V=pm(_.coordinates,N,z),Y=Oy(m.geometry(),P,N,z);if(!Tu(P,N))return!1;for(const J of Y)if(!Xr(J,V))return!1}return!0}(u,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Ef{constructor(u,m){this.type=m.type,this.name=u,this.boundExpression=m}static parse(u,m){if(u.length!==2||typeof u[1]!="string")return m.error("'var' expression requires exactly one string literal argument.");const _=u[1];return m.scope.has(_)?new Ef(_,m.scope.get(_)):m.error(`Unknown variable "${_}". Make sure "${_}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(u){return this.boundExpression.evaluate(u)}eachChild(){}outputDefined(){return!1}}class Ua{constructor(u,m,_,P){this.name=u,this.type=m,this._evaluate=_,this.args=P}evaluate(u){return this._evaluate(u,this.args)}eachChild(u){this.args.forEach(u)}outputDefined(){return!1}static parse(u,m){const _=u[0],P=Ua.definitions[_];if(!P)return m.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0);const N=Array.isArray(P)?P[0]:P.type,z=Array.isArray(P)?[[P[1],P[2]]]:P.overloads,V=z.filter(([J])=>!Array.isArray(J)||J.length===u.length-1);let Y=null;for(const[J,ne]of V){Y=new fm(m.registry,Tf,m.path,null,m.scope);const ae=[];let ye=!1;for(let Se=1;Se<u.length;Se++){const Ee=u[Se],De=Array.isArray(J)?J[Se-1]:J.type,He=Y.parse(Ee,1+ae.length,De);if(!He){ye=!0;break}ae.push(He)}if(!ye)if(Array.isArray(J)&&J.length!==ae.length)Y.error(`Expected ${J.length} arguments, but found ${ae.length} instead.`);else{for(let Se=0;Se<ae.length;Se++){const Ee=Array.isArray(J)?J[Se]:J.type,De=ae[Se];Y.concat(Se+1).checkSubtype(Ee,De.type)}if(Y.errors.length===0)return new Ua(_,N,ne,ae)}}if(V.length===1)m.errors.push(...Y.errors);else{const J=(V.length?V:z).map(([ae])=>{return ye=ae,Array.isArray(ye)?`(${ye.map(Ne).join(", ")})`:`(${Ne(ye.type)}...)`;var ye}).join(" | "),ne=[];for(let ae=1;ae<u.length;ae++){const ye=m.parse(u[ae],1+ne.length);if(!ye)return null;ne.push(Ne(ye.type))}m.error(`Expected arguments of type ${J}, but found (${ne.join(", ")}) instead.`)}return null}static register(u,m){Ua.definitions=m;for(const _ in m)u[_]=Ua}}function Tf(f){if(f instanceof Ef)return Tf(f.boundExpression);if(f instanceof Ua&&f.name==="error"||f instanceof Sd||f instanceof Ui)return!1;const u=f instanceof To||f instanceof hi;let m=!0;return f.eachChild(_=>{m=u?m&&Tf(_):m&&_ instanceof Si}),!!m&&mm(f)&&va(f,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function mm(f){if(f instanceof Ua&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof Ui)return!1;let u=!0;return f.eachChild(m=>{u&&!mm(m)&&(u=!1)}),u}function Cu(f){if(f instanceof Ua&&f.name==="feature-state")return!1;let u=!0;return f.eachChild(m=>{u&&!Cu(m)&&(u=!1)}),u}function va(f,u){if(f instanceof Ua&&u.indexOf(f.name)>=0)return!1;let m=!0;return f.eachChild(_=>{m&&!va(_,u)&&(m=!1)}),m}function Cf(f,u){const m=f.length-1;let _,P,N=0,z=m,V=0;for(;N<=z;)if(V=Math.floor((N+z)/2),_=f[V],P=f[V+1],_<=u){if(V===m||u<P)return V;N=V+1}else{if(!(_>u))throw new Zr("Input is not a number.");z=V-1}return 0}class Au{constructor(u,m,_){this.type=u,this.input=m,this.labels=[],this.outputs=[];for(const[P,N]of _)this.labels.push(P),this.outputs.push(N)}static parse(u,m){if(u.length-1<4)return m.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return m.error("Expected an even number of arguments.");const _=m.parse(u[1],1,Ve);if(!_)return null;const P=[];let N=null;m.expectedType&&m.expectedType.kind!=="value"&&(N=m.expectedType);for(let z=1;z<u.length;z+=2){const V=z===1?-1/0:u[z],Y=u[z+1],J=z,ne=z+1;if(typeof V!="number")return m.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',J);if(P.length&&P[P.length-1][0]>=V)return m.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',J);const ae=m.parse(Y,ne,N);if(!ae)return null;N=N||ae.type,P.push([V,ae])}return new Au(N,_,P)}evaluate(u){const m=this.labels,_=this.outputs;if(m.length===1)return _[0].evaluate(u);const P=this.input.evaluate(u);if(P<=m[0])return _[0].evaluate(u);const N=m.length;return P>=m[N-1]?_[N-1].evaluate(u):_[Cf(m,P)].evaluate(u)}eachChild(u){u(this.input);for(const m of this.outputs)u(m)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function yr(f,u,m){return f+m*(u-f)}function Va(f,u,m){return f.map((_,P)=>yr(_,u[P],m))}const Ts={number:yr,color:function(f,u,m,_="rgb"){switch(_){case"rgb":{const[P,N,z,V]=Va(f.rgb,u.rgb,m);return new ar(P,N,z,V,!1)}case"hcl":{const[P,N,z,V]=f.hcl,[Y,J,ne,ae]=u.hcl;let ye,Se;if(isNaN(P)||isNaN(Y))isNaN(P)?isNaN(Y)?ye=NaN:(ye=Y,z!==1&&z!==0||(Se=J)):(ye=P,ne!==1&&ne!==0||(Se=N));else{let pt=Y-P;Y>P&&pt>180?pt-=360:Y<P&&P-Y>180&&(pt+=360),ye=P+m*pt}const[Ee,De,He,Ye]=function([pt,nt,xt,kt]){return pt=isNaN(pt)?0:pt*sr,vt([xt,Math.cos(pt)*nt,Math.sin(pt)*nt,kt])}([ye,Se??yr(N,J,m),yr(z,ne,m),yr(V,ae,m)]);return new ar(Ee,De,He,Ye,!1)}case"lab":{const[P,N,z,V]=vt(Va(f.lab,u.lab,m));return new ar(P,N,z,V,!1)}}},array:Va,padding:function(f,u,m){return new Kn(Va(f.values,u.values,m))},variableAnchorOffsetCollection:function(f,u,m){const _=f.values,P=u.values;if(_.length!==P.length)throw new Zr(`Cannot interpolate values of different length. from: ${f.toString()}, to: ${u.toString()}`);const N=[];for(let z=0;z<_.length;z+=2){if(_[z]!==P[z])throw new Zr(`Cannot interpolate values containing mismatched anchors. from[${z}]: ${_[z]}, to[${z}]: ${P[z]}`);N.push(_[z]);const[V,Y]=_[z+1],[J,ne]=P[z+1];N.push([yr(V,J,m),yr(Y,ne,m)])}return new to(N)}};class zs{constructor(u,m,_,P,N){this.type=u,this.operator=m,this.interpolation=_,this.input=P,this.labels=[],this.outputs=[];for(const[z,V]of N)this.labels.push(z),this.outputs.push(V)}static interpolationFactor(u,m,_,P){let N=0;if(u.name==="exponential")N=gm(m,u.base,_,P);else if(u.name==="linear")N=gm(m,1,_,P);else if(u.name==="cubic-bezier"){const z=u.controlPoints;N=new b(z[0],z[1],z[2],z[3]).solve(gm(m,1,_,P))}return N}static parse(u,m){let[_,P,N,...z]=u;if(!Array.isArray(P)||P.length===0)return m.error("Expected an interpolation type expression.",1);if(P[0]==="linear")P={name:"linear"};else if(P[0]==="exponential"){const J=P[1];if(typeof J!="number")return m.error("Exponential interpolation requires a numeric base.",1,1);P={name:"exponential",base:J}}else{if(P[0]!=="cubic-bezier")return m.error(`Unknown interpolation type ${String(P[0])}`,1,0);{const J=P.slice(1);if(J.length!==4||J.some(ne=>typeof ne!="number"||ne<0||ne>1))return m.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);P={name:"cubic-bezier",controlPoints:J}}}if(u.length-1<4)return m.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return m.error("Expected an even number of arguments.");if(N=m.parse(N,2,Ve),!N)return null;const V=[];let Y=null;_==="interpolate-hcl"||_==="interpolate-lab"?Y=Qt:m.expectedType&&m.expectedType.kind!=="value"&&(Y=m.expectedType);for(let J=0;J<z.length;J+=2){const ne=z[J],ae=z[J+1],ye=J+3,Se=J+4;if(typeof ne!="number")return m.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ye);if(V.length&&V[V.length-1][0]>=ne)return m.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ye);const Ee=m.parse(ae,Se,Y);if(!Ee)return null;Y=Y||Ee.type,V.push([ne,Ee])}return Nt(Y,Ve)||Nt(Y,Qt)||Nt(Y,oe)||Nt(Y,Te)||Nt(Y,Pe(Ve))?new zs(Y,_,P,N,V):m.error(`Type ${Ne(Y)} is not interpolatable.`)}evaluate(u){const m=this.labels,_=this.outputs;if(m.length===1)return _[0].evaluate(u);const P=this.input.evaluate(u);if(P<=m[0])return _[0].evaluate(u);const N=m.length;if(P>=m[N-1])return _[N-1].evaluate(u);const z=Cf(m,P),V=zs.interpolationFactor(this.interpolation,P,m[z],m[z+1]),Y=_[z].evaluate(u),J=_[z+1].evaluate(u);switch(this.operator){case"interpolate":return Ts[this.type.kind](Y,J,V);case"interpolate-hcl":return Ts.color(Y,J,V,"hcl");case"interpolate-lab":return Ts.color(Y,J,V,"lab")}}eachChild(u){u(this.input);for(const m of this.outputs)u(m)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function gm(f,u,m,_){const P=_-m,N=f-m;return P===0?0:u===1?N/P:(Math.pow(u,N)-1)/(Math.pow(u,P)-1)}class ym{constructor(u,m){this.type=u,this.args=m}static parse(u,m){if(u.length<2)return m.error("Expectected at least one argument.");let _=null;const P=m.expectedType;P&&P.kind!=="value"&&(_=P);const N=[];for(const V of u.slice(1)){const Y=m.parse(V,1+N.length,_,void 0,{typeAnnotation:"omit"});if(!Y)return null;_=_||Y.type,N.push(Y)}if(!_)throw new Error("No output type");const z=P&&N.some(V=>qe(P,V.type));return new ym(z?It:_,N)}evaluate(u){let m,_=null,P=0;for(const N of this.args)if(P++,_=N.evaluate(u),_&&_ instanceof tr&&!_.available&&(m||(m=_.name),_=null,P===this.args.length&&(_=m)),_!==null)break;return _}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}class xa{constructor(u,m){this.type=m.type,this.bindings=[].concat(u),this.result=m}evaluate(u){return this.result.evaluate(u)}eachChild(u){for(const m of this.bindings)u(m[1]);u(this.result)}static parse(u,m){if(u.length<4)return m.error(`Expected at least 3 arguments, but found ${u.length-1} instead.`);const _=[];for(let N=1;N<u.length-1;N+=2){const z=u[N];if(typeof z!="string")return m.error(`Expected string, but found ${typeof z} instead.`,N);if(/[^a-zA-Z0-9_]/.test(z))return m.error("Variable names must contain only alphanumeric characters or '_'.",N);const V=m.parse(u[N+1],N+1);if(!V)return null;_.push([z,V])}const P=m.parse(u[u.length-1],u.length-1,m.expectedType,_);return P?new xa(_,P):null}outputDefined(){return this.result.outputDefined()}}class Ly{constructor(u,m,_){this.type=u,this.index=m,this.input=_}static parse(u,m){if(u.length!==3)return m.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const _=m.parse(u[1],1,Ve),P=m.parse(u[2],2,Pe(m.expectedType||It));return _&&P?new Ly(P.type.itemType,_,P):null}evaluate(u){const m=this.index.evaluate(u),_=this.input.evaluate(u);if(m<0)throw new Zr(`Array index out of bounds: ${m} < 0.`);if(m>=_.length)throw new Zr(`Array index out of bounds: ${m} > ${_.length-1}.`);if(m!==Math.floor(m))throw new Zr(`Array index must be an integer, but found ${m} instead.`);return _[m]}eachChild(u){u(this.index),u(this.input)}outputDefined(){return!1}}class Af{constructor(u,m){this.type=it,this.needle=u,this.haystack=m}static parse(u,m){if(u.length!==3)return m.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const _=m.parse(u[1],1,It),P=m.parse(u[2],2,It);return _&&P?je(_.type,[it,Me,Ve,Ie,It])?new Af(_,P):m.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ne(_.type)} instead`):null}evaluate(u){const m=this.needle.evaluate(u),_=this.haystack.evaluate(u);if(!_)return!1;if(!tt(m,["boolean","string","number","null"]))throw new Zr(`Expected first argument to be of type boolean, string, number or null, but found ${Ne(Ur(m))} instead.`);if(!tt(_,["string","array"]))throw new Zr(`Expected second argument to be of type array or string, but found ${Ne(Ur(_))} instead.`);return _.indexOf(m)>=0}eachChild(u){u(this.needle),u(this.haystack)}outputDefined(){return!0}}class vm{constructor(u,m,_){this.type=Ve,this.needle=u,this.haystack=m,this.fromIndex=_}static parse(u,m){if(u.length<=2||u.length>=5)return m.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const _=m.parse(u[1],1,It),P=m.parse(u[2],2,It);if(!_||!P)return null;if(!je(_.type,[it,Me,Ve,Ie,It]))return m.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ne(_.type)} instead`);if(u.length===4){const N=m.parse(u[3],3,Ve);return N?new vm(_,P,N):null}return new vm(_,P)}evaluate(u){const m=this.needle.evaluate(u),_=this.haystack.evaluate(u);if(!tt(m,["boolean","string","number","null"]))throw new Zr(`Expected first argument to be of type boolean, string, number or null, but found ${Ne(Ur(m))} instead.`);if(!tt(_,["string","array"]))throw new Zr(`Expected second argument to be of type array or string, but found ${Ne(Ur(_))} instead.`);if(this.fromIndex){const P=this.fromIndex.evaluate(u);return _.indexOf(m,P)}return _.indexOf(m)}eachChild(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)}outputDefined(){return!1}}class _a{constructor(u,m,_,P,N,z){this.inputType=u,this.type=m,this.input=_,this.cases=P,this.outputs=N,this.otherwise=z}static parse(u,m){if(u.length<5)return m.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if(u.length%2!=1)return m.error("Expected an even number of arguments.");let _,P;m.expectedType&&m.expectedType.kind!=="value"&&(P=m.expectedType);const N={},z=[];for(let J=2;J<u.length-1;J+=2){let ne=u[J];const ae=u[J+1];Array.isArray(ne)||(ne=[ne]);const ye=m.concat(J);if(ne.length===0)return ye.error("Expected at least one branch label.");for(const Ee of ne){if(typeof Ee!="number"&&typeof Ee!="string")return ye.error("Branch labels must be numbers or strings.");if(typeof Ee=="number"&&Math.abs(Ee)>Number.MAX_SAFE_INTEGER)return ye.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ee=="number"&&Math.floor(Ee)!==Ee)return ye.error("Numeric branch labels must be integer values.");if(_){if(ye.checkSubtype(_,Ur(Ee)))return null}else _=Ur(Ee);if(N[String(Ee)]!==void 0)return ye.error("Branch labels must be unique.");N[String(Ee)]=z.length}const Se=m.parse(ae,J,P);if(!Se)return null;P=P||Se.type,z.push(Se)}const V=m.parse(u[1],1,It);if(!V)return null;const Y=m.parse(u[u.length-1],u.length-1,P);return Y?V.type.kind!=="value"&&m.concat(1).checkSubtype(_,V.type)?null:new _a(_,P,V,N,z,Y):null}evaluate(u){const m=this.input.evaluate(u);return(Ur(m)===this.inputType&&this.outputs[this.cases[m]]||this.otherwise).evaluate(u)}eachChild(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)}outputDefined(){return this.outputs.every(u=>u.outputDefined())&&this.otherwise.outputDefined()}}class Pf{constructor(u,m,_){this.type=u,this.branches=m,this.otherwise=_}static parse(u,m){if(u.length<4)return m.error(`Expected at least 3 arguments, but found only ${u.length-1}.`);if(u.length%2!=0)return m.error("Expected an odd number of arguments.");let _;m.expectedType&&m.expectedType.kind!=="value"&&(_=m.expectedType);const P=[];for(let z=1;z<u.length-1;z+=2){const V=m.parse(u[z],z,it);if(!V)return null;const Y=m.parse(u[z+1],z+1,_);if(!Y)return null;P.push([V,Y]),_=_||Y.type}const N=m.parse(u[u.length-1],u.length-1,_);if(!N)return null;if(!_)throw new Error("Can't infer output type");return new Pf(_,P,N)}evaluate(u){for(const[m,_]of this.branches)if(m.evaluate(u))return _.evaluate(u);return this.otherwise.evaluate(u)}eachChild(u){for(const[m,_]of this.branches)u(m),u(_);u(this.otherwise)}outputDefined(){return this.branches.every(([u,m])=>m.outputDefined())&&this.otherwise.outputDefined()}}class Ed{constructor(u,m,_,P){this.type=u,this.input=m,this.beginIndex=_,this.endIndex=P}static parse(u,m){if(u.length<=2||u.length>=5)return m.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const _=m.parse(u[1],1,It),P=m.parse(u[2],2,Ve);if(!_||!P)return null;if(!je(_.type,[Pe(It),Me,It]))return m.error(`Expected first argument to be of type array or string, but found ${Ne(_.type)} instead`);if(u.length===4){const N=m.parse(u[3],3,Ve);return N?new Ed(_.type,_,P,N):null}return new Ed(_.type,_,P)}evaluate(u){const m=this.input.evaluate(u),_=this.beginIndex.evaluate(u);if(!tt(m,["string","array"]))throw new Zr(`Expected first argument to be of type array or string, but found ${Ne(Ur(m))} instead.`);if(this.endIndex){const P=this.endIndex.evaluate(u);return m.slice(_,P)}return m.slice(_)}eachChild(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)}outputDefined(){return!1}}function Td(f,u){return f==="=="||f==="!="?u.kind==="boolean"||u.kind==="string"||u.kind==="number"||u.kind==="null"||u.kind==="value":u.kind==="string"||u.kind==="number"||u.kind==="value"}function xm(f,u,m,_){return _.compare(u,m)===0}function Pu(f,u,m){const _=f!=="=="&&f!=="!=";return class Vre{constructor(N,z,V){this.type=it,this.lhs=N,this.rhs=z,this.collator=V,this.hasUntypedArgument=N.type.kind==="value"||z.type.kind==="value"}static parse(N,z){if(N.length!==3&&N.length!==4)return z.error("Expected two or three arguments.");const V=N[0];let Y=z.parse(N[1],1,It);if(!Y)return null;if(!Td(V,Y.type))return z.concat(1).error(`"${V}" comparisons are not supported for type '${Ne(Y.type)}'.`);let J=z.parse(N[2],2,It);if(!J)return null;if(!Td(V,J.type))return z.concat(2).error(`"${V}" comparisons are not supported for type '${Ne(J.type)}'.`);if(Y.type.kind!==J.type.kind&&Y.type.kind!=="value"&&J.type.kind!=="value")return z.error(`Cannot compare types '${Ne(Y.type)}' and '${Ne(J.type)}'.`);_&&(Y.type.kind==="value"&&J.type.kind!=="value"?Y=new hi(J.type,[Y]):Y.type.kind!=="value"&&J.type.kind==="value"&&(J=new hi(Y.type,[J])));let ne=null;if(N.length===4){if(Y.type.kind!=="string"&&J.type.kind!=="string"&&Y.type.kind!=="value"&&J.type.kind!=="value")return z.error("Cannot use collator to compare non-string types.");if(ne=z.parse(N[3],3,Et),!ne)return null}return new Vre(Y,J,ne)}evaluate(N){const z=this.lhs.evaluate(N),V=this.rhs.evaluate(N);if(_&&this.hasUntypedArgument){const Y=Ur(z),J=Ur(V);if(Y.kind!==J.kind||Y.kind!=="string"&&Y.kind!=="number")throw new Zr(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${Y.kind}, ${J.kind}) instead.`)}if(this.collator&&!_&&this.hasUntypedArgument){const Y=Ur(z),J=Ur(V);if(Y.kind!=="string"||J.kind!=="string")return u(N,z,V)}return this.collator?m(N,z,V,this.collator.evaluate(N)):u(N,z,V)}eachChild(N){N(this.lhs),N(this.rhs),this.collator&&N(this.collator)}outputDefined(){return!0}}}const Q0=Pu("==",function(f,u,m){return u===m},xm),Dy=Pu("!=",function(f,u,m){return u!==m},function(f,u,m,_){return!xm(0,u,m,_)}),Ny=Pu("<",function(f,u,m){return u<m},function(f,u,m,_){return _.compare(u,m)<0}),kf=Pu(">",function(f,u,m){return u>m},function(f,u,m,_){return _.compare(u,m)>0}),Wa=Pu("<=",function(f,u,m){return u<=m},function(f,u,m,_){return _.compare(u,m)<=0}),ec=Pu(">=",function(f,u,m){return u>=m},function(f,u,m,_){return _.compare(u,m)>=0});class tc{constructor(u,m,_,P,N){this.type=Me,this.number=u,this.locale=m,this.currency=_,this.minFractionDigits=P,this.maxFractionDigits=N}static parse(u,m){if(u.length!==3)return m.error("Expected two arguments.");const _=m.parse(u[1],1,Ve);if(!_)return null;const P=u[2];if(typeof P!="object"||Array.isArray(P))return m.error("NumberFormat options argument must be an object.");let N=null;if(P.locale&&(N=m.parse(P.locale,1,Me),!N))return null;let z=null;if(P.currency&&(z=m.parse(P.currency,1,Me),!z))return null;let V=null;if(P["min-fraction-digits"]&&(V=m.parse(P["min-fraction-digits"],1,Ve),!V))return null;let Y=null;return P["max-fraction-digits"]&&(Y=m.parse(P["max-fraction-digits"],1,Ve),!Y)?null:new tc(_,N,z,V,Y)}evaluate(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))}eachChild(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)}outputDefined(){return!1}}class If{constructor(u){this.type=we,this.sections=u}static parse(u,m){if(u.length<2)return m.error("Expected at least one argument.");const _=u[1];if(!Array.isArray(_)&&typeof _=="object")return m.error("First argument must be an image or text section.");const P=[];let N=!1;for(let z=1;z<=u.length-1;++z){const V=u[z];if(N&&typeof V=="object"&&!Array.isArray(V)){N=!1;let Y=null;if(V["font-scale"]&&(Y=m.parse(V["font-scale"],1,Ve),!Y))return null;let J=null;if(V["text-font"]&&(J=m.parse(V["text-font"],1,Pe(Me)),!J))return null;let ne=null;if(V["text-color"]&&(ne=m.parse(V["text-color"],1,Qt),!ne))return null;const ae=P[P.length-1];ae.scale=Y,ae.font=J,ae.textColor=ne}else{const Y=m.parse(u[z],1,It);if(!Y)return null;const J=Y.type.kind;if(J!=="string"&&J!=="value"&&J!=="null"&&J!=="resolvedImage")return m.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");N=!0,P.push({content:Y,scale:null,font:null,textColor:null})}}return new If(P)}evaluate(u){return new Yr(this.sections.map(m=>{const _=m.content.evaluate(u);return Ur(_)===pe?new fi("",_,null,null,null):new fi(hr(_),null,m.scale?m.scale.evaluate(u):null,m.font?m.font.evaluate(u).join(","):null,m.textColor?m.textColor.evaluate(u):null)}))}eachChild(u){for(const m of this.sections)u(m.content),m.scale&&u(m.scale),m.font&&u(m.font),m.textColor&&u(m.textColor)}outputDefined(){return!1}}class _m{constructor(u){this.type=pe,this.input=u}static parse(u,m){if(u.length!==2)return m.error("Expected two arguments.");const _=m.parse(u[1],1,Me);return _?new _m(_):m.error("No image name provided.")}evaluate(u){const m=this.input.evaluate(u),_=tr.fromString(m);return _&&u.availableImages&&(_.available=u.availableImages.indexOf(m)>-1),_}eachChild(u){u(this.input)}outputDefined(){return!1}}class Ml{constructor(u){this.type=Ve,this.input=u}static parse(u,m){if(u.length!==2)return m.error(`Expected 1 argument, but found ${u.length-1} instead.`);const _=m.parse(u[1],1);return _?_.type.kind!=="array"&&_.type.kind!=="string"&&_.type.kind!=="value"?m.error(`Expected argument of type string or array, but found ${Ne(_.type)} instead.`):new Ml(_):null}evaluate(u){const m=this.input.evaluate(u);if(typeof m=="string"||Array.isArray(m))return m.length;throw new Zr(`Expected value to be of type string or array, but found ${Ne(Ur(m))} instead.`)}eachChild(u){u(this.input)}outputDefined(){return!1}}const ba={"==":Q0,"!=":Dy,">":kf,"<":Ny,">=":ec,"<=":Wa,array:hi,at:Ly,boolean:hi,case:Pf,coalesce:ym,collator:Sd,format:If,image:_m,in:Af,"index-of":vm,interpolate:zs,"interpolate-hcl":zs,"interpolate-lab":zs,length:Ml,let:xa,literal:Si,match:_a,number:hi,"number-format":tc,object:hi,slice:Ed,step:Au,string:hi,"to-boolean":To,"to-color":To,"to-number":To,"to-string":To,var:Ef,within:Ui};function Wh(f,[u,m,_,P]){u=u.evaluate(f),m=m.evaluate(f),_=_.evaluate(f);const N=P?P.evaluate(f):1,z=Li(u,m,_,N);if(z)throw new Zr(z);return new ar(u/255,m/255,_/255,N,!1)}function zy(f,u){return f in u}function Rf(f,u){const m=u[f];return m===void 0?null:m}function ku(f){return{type:f}}function Fy(f){return{result:"success",value:f}}function nc(f){return{result:"error",value:f}}function Oc(f){return f["property-type"]==="data-driven"||f["property-type"]==="cross-faded-data-driven"}function By(f){return!!f.expression&&f.expression.parameters.indexOf("zoom")>-1}function bm(f){return!!f.expression&&f.expression.interpolated}function Wr(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}function Oi(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)}function Of(f){return f}function Sr(f,u){const m=u.type==="color",_=f.stops&&typeof f.stops[0][0]=="object",P=_||!(_||f.property!==void 0),N=f.type||(bm(u)?"exponential":"interval");if(m||u.type==="padding"){const ne=m?ar.parse:Kn.parse;(f=un({},f)).stops&&(f.stops=f.stops.map(ae=>[ae[0],ne(ae[1])])),f.default=ne(f.default?f.default:u.default)}if(f.colorSpace&&(z=f.colorSpace)!=="rgb"&&z!=="hcl"&&z!=="lab")throw new Error(`Unknown color space: "${f.colorSpace}"`);var z;let V,Y,J;if(N==="exponential")V=Cs;else if(N==="interval")V=jr;else if(N==="categorical"){V=Mi,Y=Object.create(null);for(const ne of f.stops)Y[ne[0]]=ne[1];J=typeof f.stops[0][0]}else{if(N!=="identity")throw new Error(`Unknown function type "${N}"`);V=Iu}if(_){const ne={},ae=[];for(let Ee=0;Ee<f.stops.length;Ee++){const De=f.stops[Ee],He=De[0].zoom;ne[He]===void 0&&(ne[He]={zoom:He,type:f.type,property:f.property,default:f.default,stops:[]},ae.push(He)),ne[He].stops.push([De[0].value,De[1]])}const ye=[];for(const Ee of ae)ye.push([ne[Ee].zoom,Sr(ne[Ee],u)]);const Se={name:"linear"};return{kind:"composite",interpolationType:Se,interpolationFactor:zs.interpolationFactor.bind(void 0,Se),zoomStops:ye.map(Ee=>Ee[0]),evaluate:({zoom:Ee},De)=>Cs({stops:ye,base:f.base},u,Ee).evaluate(Ee,De)}}if(P){const ne=N==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:ne,interpolationFactor:zs.interpolationFactor.bind(void 0,ne),zoomStops:f.stops.map(ae=>ae[0]),evaluate:({zoom:ae})=>V(f,u,ae,Y,J)}}return{kind:"source",evaluate(ne,ae){const ye=ae&&ae.properties?ae.properties[f.property]:void 0;return ye===void 0?rc(f.default,u.default):V(f,u,ye,Y,J)}}}function rc(f,u,m){return f!==void 0?f:u!==void 0?u:m!==void 0?m:void 0}function Mi(f,u,m,_,P){return rc(typeof m===P?_[m]:void 0,f.default,u.default)}function jr(f,u,m){if(Wr(m)!=="number")return rc(f.default,u.default);const _=f.stops.length;if(_===1||m<=f.stops[0][0])return f.stops[0][1];if(m>=f.stops[_-1][0])return f.stops[_-1][1];const P=Cf(f.stops.map(N=>N[0]),m);return f.stops[P][1]}function Cs(f,u,m){const _=f.base!==void 0?f.base:1;if(Wr(m)!=="number")return rc(f.default,u.default);const P=f.stops.length;if(P===1||m<=f.stops[0][0])return f.stops[0][1];if(m>=f.stops[P-1][0])return f.stops[P-1][1];const N=Cf(f.stops.map(ne=>ne[0]),m),z=function(ne,ae,ye,Se){const Ee=Se-ye,De=ne-ye;return Ee===0?0:ae===1?De/Ee:(Math.pow(ae,De)-1)/(Math.pow(ae,Ee)-1)}(m,_,f.stops[N][0],f.stops[N+1][0]),V=f.stops[N][1],Y=f.stops[N+1][1],J=Ts[u.type]||Of;return typeof V.evaluate=="function"?{evaluate(...ne){const ae=V.evaluate.apply(void 0,ne),ye=Y.evaluate.apply(void 0,ne);if(ae!==void 0&&ye!==void 0)return J(ae,ye,z,f.colorSpace)}}:J(V,Y,z,f.colorSpace)}function Iu(f,u,m){switch(u.type){case"color":m=ar.parse(m);break;case"formatted":m=Yr.fromString(m.toString());break;case"resolvedImage":m=tr.fromString(m.toString());break;case"padding":m=Kn.parse(m);break;default:Wr(m)===u.type||u.type==="enum"&&u.values[m]||(m=void 0)}return rc(m,f.default,u.default)}Ua.register(ba,{error:[{kind:"error"},[Me],(f,[u])=>{throw new Zr(u.evaluate(f))}],typeof:[Me,[It],(f,[u])=>Ne(Ur(u.evaluate(f)))],"to-rgba":[Pe(Ve,4),[Qt],(f,[u])=>{const[m,_,P,N]=u.evaluate(f).rgb;return[255*m,255*_,255*P,N]}],rgb:[Qt,[Ve,Ve,Ve],Wh],rgba:[Qt,[Ve,Ve,Ve,Ve],Wh],has:{type:it,overloads:[[[Me],(f,[u])=>zy(u.evaluate(f),f.properties())],[[Me,Xe],(f,[u,m])=>zy(u.evaluate(f),m.evaluate(f))]]},get:{type:It,overloads:[[[Me],(f,[u])=>Rf(u.evaluate(f),f.properties())],[[Me,Xe],(f,[u,m])=>Rf(u.evaluate(f),m.evaluate(f))]]},"feature-state":[It,[Me],(f,[u])=>Rf(u.evaluate(f),f.featureState||{})],properties:[Xe,[],f=>f.properties()],"geometry-type":[Me,[],f=>f.geometryType()],id:[It,[],f=>f.id()],zoom:[Ve,[],f=>f.globals.zoom],"heatmap-density":[Ve,[],f=>f.globals.heatmapDensity||0],"line-progress":[Ve,[],f=>f.globals.lineProgress||0],accumulated:[It,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[Ve,ku(Ve),(f,u)=>{let m=0;for(const _ of u)m+=_.evaluate(f);return m}],"*":[Ve,ku(Ve),(f,u)=>{let m=1;for(const _ of u)m*=_.evaluate(f);return m}],"-":{type:Ve,overloads:[[[Ve,Ve],(f,[u,m])=>u.evaluate(f)-m.evaluate(f)],[[Ve],(f,[u])=>-u.evaluate(f)]]},"/":[Ve,[Ve,Ve],(f,[u,m])=>u.evaluate(f)/m.evaluate(f)],"%":[Ve,[Ve,Ve],(f,[u,m])=>u.evaluate(f)%m.evaluate(f)],ln2:[Ve,[],()=>Math.LN2],pi:[Ve,[],()=>Math.PI],e:[Ve,[],()=>Math.E],"^":[Ve,[Ve,Ve],(f,[u,m])=>Math.pow(u.evaluate(f),m.evaluate(f))],sqrt:[Ve,[Ve],(f,[u])=>Math.sqrt(u.evaluate(f))],log10:[Ve,[Ve],(f,[u])=>Math.log(u.evaluate(f))/Math.LN10],ln:[Ve,[Ve],(f,[u])=>Math.log(u.evaluate(f))],log2:[Ve,[Ve],(f,[u])=>Math.log(u.evaluate(f))/Math.LN2],sin:[Ve,[Ve],(f,[u])=>Math.sin(u.evaluate(f))],cos:[Ve,[Ve],(f,[u])=>Math.cos(u.evaluate(f))],tan:[Ve,[Ve],(f,[u])=>Math.tan(u.evaluate(f))],asin:[Ve,[Ve],(f,[u])=>Math.asin(u.evaluate(f))],acos:[Ve,[Ve],(f,[u])=>Math.acos(u.evaluate(f))],atan:[Ve,[Ve],(f,[u])=>Math.atan(u.evaluate(f))],min:[Ve,ku(Ve),(f,u)=>Math.min(...u.map(m=>m.evaluate(f)))],max:[Ve,ku(Ve),(f,u)=>Math.max(...u.map(m=>m.evaluate(f)))],abs:[Ve,[Ve],(f,[u])=>Math.abs(u.evaluate(f))],round:[Ve,[Ve],(f,[u])=>{const m=u.evaluate(f);return m<0?-Math.round(-m):Math.round(m)}],floor:[Ve,[Ve],(f,[u])=>Math.floor(u.evaluate(f))],ceil:[Ve,[Ve],(f,[u])=>Math.ceil(u.evaluate(f))],"filter-==":[it,[Me,It],(f,[u,m])=>f.properties()[u.value]===m.value],"filter-id-==":[it,[It],(f,[u])=>f.id()===u.value],"filter-type-==":[it,[Me],(f,[u])=>f.geometryType()===u.value],"filter-<":[it,[Me,It],(f,[u,m])=>{const _=f.properties()[u.value],P=m.value;return typeof _==typeof P&&_<P}],"filter-id-<":[it,[It],(f,[u])=>{const m=f.id(),_=u.value;return typeof m==typeof _&&m<_}],"filter->":[it,[Me,It],(f,[u,m])=>{const _=f.properties()[u.value],P=m.value;return typeof _==typeof P&&_>P}],"filter-id->":[it,[It],(f,[u])=>{const m=f.id(),_=u.value;return typeof m==typeof _&&m>_}],"filter-<=":[it,[Me,It],(f,[u,m])=>{const _=f.properties()[u.value],P=m.value;return typeof _==typeof P&&_<=P}],"filter-id-<=":[it,[It],(f,[u])=>{const m=f.id(),_=u.value;return typeof m==typeof _&&m<=_}],"filter->=":[it,[Me,It],(f,[u,m])=>{const _=f.properties()[u.value],P=m.value;return typeof _==typeof P&&_>=P}],"filter-id->=":[it,[It],(f,[u])=>{const m=f.id(),_=u.value;return typeof m==typeof _&&m>=_}],"filter-has":[it,[It],(f,[u])=>u.value in f.properties()],"filter-has-id":[it,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[it,[Pe(Me)],(f,[u])=>u.value.indexOf(f.geometryType())>=0],"filter-id-in":[it,[Pe(It)],(f,[u])=>u.value.indexOf(f.id())>=0],"filter-in-small":[it,[Me,Pe(It)],(f,[u,m])=>m.value.indexOf(f.properties()[u.value])>=0],"filter-in-large":[it,[Me,Pe(It)],(f,[u,m])=>function(_,P,N,z){for(;N<=z;){const V=N+z>>1;if(P[V]===_)return!0;P[V]>_?z=V-1:N=V+1}return!1}(f.properties()[u.value],m.value,0,m.value.length-1)],all:{type:it,overloads:[[[it,it],(f,[u,m])=>u.evaluate(f)&&m.evaluate(f)],[ku(it),(f,u)=>{for(const m of u)if(!m.evaluate(f))return!1;return!0}]]},any:{type:it,overloads:[[[it,it],(f,[u,m])=>u.evaluate(f)||m.evaluate(f)],[ku(it),(f,u)=>{for(const m of u)if(m.evaluate(f))return!0;return!1}]]},"!":[it,[it],(f,[u])=>!u.evaluate(f)],"is-supported-script":[it,[Me],(f,[u])=>{const m=f.globals&&f.globals.isSupportedScript;return!m||m(u.evaluate(f))}],upcase:[Me,[Me],(f,[u])=>u.evaluate(f).toUpperCase()],downcase:[Me,[Me],(f,[u])=>u.evaluate(f).toLowerCase()],concat:[Me,ku(It),(f,u)=>u.map(m=>hr(m.evaluate(f))).join("")],"resolved-locale":[Me,[Et],(f,[u])=>u.evaluate(f).resolvedLocale()]});class El{constructor(u,m){var _;this.expression=u,this._warningHistory={},this._evaluator=new ky,this._defaultValue=m?(_=m).type==="color"&&Oi(_.default)?new ar(0,0,0,0):_.type==="color"?ar.parse(_.default)||null:_.type==="padding"?Kn.parse(_.default)||null:_.type==="variableAnchorOffsetCollection"?to.parse(_.default)||null:_.default===void 0?null:_.default:null,this._enumValues=m&&m.type==="enum"?m.values:null}evaluateWithoutErrorHandling(u,m,_,P,N,z){return this._evaluator.globals=u,this._evaluator.feature=m,this._evaluator.featureState=_,this._evaluator.canonical=P,this._evaluator.availableImages=N||null,this._evaluator.formattedSection=z,this.expression.evaluate(this._evaluator)}evaluate(u,m,_,P,N,z){this._evaluator.globals=u,this._evaluator.feature=m||null,this._evaluator.featureState=_||null,this._evaluator.canonical=P,this._evaluator.availableImages=N||null,this._evaluator.formattedSection=z||null;try{const V=this.expression.evaluate(this._evaluator);if(V==null||typeof V=="number"&&V!=V)return this._defaultValue;if(this._enumValues&&!(V in this._enumValues))throw new Zr(`Expected value to be one of ${Object.keys(this._enumValues).map(Y=>JSON.stringify(Y)).join(", ")}, but found ${JSON.stringify(V)} instead.`);return V}catch(V){return this._warningHistory[V.message]||(this._warningHistory[V.message]=!0,typeof console<"u"&&console.warn(V.message)),this._defaultValue}}}function Ha(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in ba}function ic(f,u){const m=new fm(ba,Tf,[],u?function(P){const N={color:Qt,string:Me,number:Ve,enum:Me,boolean:it,formatted:we,padding:oe,resolvedImage:pe,variableAnchorOffsetCollection:Te};return P.type==="array"?Pe(N[P.value]||It,P.length):N[P.type]}(u):void 0),_=m.parse(f,void 0,void 0,void 0,u&&u.type==="string"?{typeAnnotation:"coerce"}:void 0);return _?Fy(new El(_,u)):nc(m.errors)}class wm{constructor(u,m){this.kind=u,this._styleExpression=m,this.isStateDependent=u!=="constant"&&!Cu(m.expression)}evaluateWithoutErrorHandling(u,m,_,P,N,z){return this._styleExpression.evaluateWithoutErrorHandling(u,m,_,P,N,z)}evaluate(u,m,_,P,N,z){return this._styleExpression.evaluate(u,m,_,P,N,z)}}class Lf{constructor(u,m,_,P){this.kind=u,this.zoomStops=_,this._styleExpression=m,this.isStateDependent=u!=="camera"&&!Cu(m.expression),this.interpolationType=P}evaluateWithoutErrorHandling(u,m,_,P,N,z){return this._styleExpression.evaluateWithoutErrorHandling(u,m,_,P,N,z)}evaluate(u,m,_,P,N,z){return this._styleExpression.evaluate(u,m,_,P,N,z)}interpolationFactor(u,m,_){return this.interpolationType?zs.interpolationFactor(this.interpolationType,u,m,_):0}}function Hh(f,u){const m=ic(f,u);if(m.result==="error")return m;const _=m.value.expression,P=mm(_);if(!P&&!Oc(u))return nc([new an("","data expressions not supported")]);const N=va(_,["zoom"]);if(!N&&!By(u))return nc([new an("","zoom expressions not supported")]);const z=ls(_);return z||N?z instanceof an?nc([z]):z instanceof zs&&!bm(u)?nc([new an("",'"interpolate" expressions cannot be used with this property')]):Fy(z?new Lf(P?"camera":"composite",m.value,z.labels,z instanceof zs?z.interpolation:void 0):new wm(P?"constant":"source",m.value)):nc([new an("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class as{constructor(u,m){this._parameters=u,this._specification=m,un(this,Sr(this._parameters,this._specification))}static deserialize(u){return new as(u._parameters,u._specification)}static serialize(u){return{_parameters:u._parameters,_specification:u._specification}}}function ls(f){let u=null;if(f instanceof xa)u=ls(f.result);else if(f instanceof ym){for(const m of f.args)if(u=ls(m),u)break}else(f instanceof Au||f instanceof zs)&&f.input instanceof Ua&&f.input.name==="zoom"&&(u=f);return u instanceof an||f.eachChild(m=>{const _=ls(m);_ instanceof an?u=_:!u&&_?u=new an("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):u&&_&&u!==_&&(u=new an("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),u}function pi(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(const u of f.slice(1))if(!pi(u)&&typeof u!="boolean")return!1;return!0;default:return!0}}const Gh={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function wa(f){if(f==null)return{filter:()=>!0,needGeometry:!1};pi(f)||(f=Df(f));const u=ic(f,Gh);if(u.result==="error")throw new Error(u.value.map(m=>`${m.key}: ${m.message}`).join(", "));return{filter:(m,_,P)=>u.value.evaluate(m,_,{},P),needGeometry:$y(f)}}function ex(f,u){return f<u?-1:f>u?1:0}function $y(f){if(!Array.isArray(f))return!1;if(f[0]==="within")return!0;for(let u=1;u<f.length;u++)if($y(f[u]))return!0;return!1}function Df(f){if(!f)return!0;const u=f[0];return f.length<=1?u!=="any":u==="=="?qh(f[1],f[2],"=="):u==="!="?oc(qh(f[1],f[2],"==")):u==="<"||u===">"||u==="<="||u===">="?qh(f[1],f[2],u):u==="any"?(m=f.slice(1),["any"].concat(m.map(Df))):u==="all"?["all"].concat(f.slice(1).map(Df)):u==="none"?["all"].concat(f.slice(1).map(Df).map(oc)):u==="in"?jy(f[1],f.slice(2)):u==="!in"?oc(jy(f[1],f.slice(2))):u==="has"?Nf(f[1]):u==="!has"?oc(Nf(f[1])):u!=="within"||f;var m}function qh(f,u,m){switch(f){case"$type":return[`filter-type-${m}`,u];case"$id":return[`filter-id-${m}`,u];default:return[`filter-${m}`,f,u]}}function jy(f,u){if(u.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",u]];case"$id":return["filter-id-in",["literal",u]];default:return u.length>200&&!u.some(m=>typeof m!=typeof u[0])?["filter-in-large",f,["literal",u.sort(ex)]]:["filter-in-small",f,["literal",u]]}}function Nf(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function oc(f){return["!",f]}function zf(f){const u=typeof f;if(u==="number"||u==="boolean"||u==="string"||f==null)return JSON.stringify(f);if(Array.isArray(f)){let P="[";for(const N of f)P+=`${zf(N)},`;return`${P}]`}const m=Object.keys(f).sort();let _="{";for(let P=0;P<m.length;P++)_+=`${JSON.stringify(m[P])}:${zf(f[m[P]])},`;return`${_}}`}function Ru(f){let u="";for(const m of Ce)u+=`/${zf(f[m])}`;return u}function Yh(f){const u=f.value;return u?[new mt(f.key,u,"constants have been deprecated as of v8")]:[]}function Vi(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function Ou(f){if(Array.isArray(f))return f.map(Ou);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){const u={};for(const m in f)u[m]=Ou(f[m]);return u}return Vi(f)}function zo(f){const u=f.key,m=f.value,_=f.valueSpec||{},P=f.objectElementValidators||{},N=f.style,z=f.styleSpec,V=f.validateSpec;let Y=[];const J=Wr(m);if(J!=="object")return[new mt(u,m,`object expected, ${J} found`)];for(const ne in m){const ae=ne.split(".")[0],ye=_[ae]||_["*"];let Se;if(P[ae])Se=P[ae];else if(_[ae])Se=V;else if(P["*"])Se=P["*"];else{if(!_["*"]){Y.push(new mt(u,m[ne],`unknown property "${ne}"`));continue}Se=V}Y=Y.concat(Se({key:(u&&`${u}.`)+ne,value:m[ne],valueSpec:ye,style:N,styleSpec:z,object:m,objectKey:ne,validateSpec:V},m))}for(const ne in _)P[ne]||_[ne].required&&_[ne].default===void 0&&m[ne]===void 0&&Y.push(new mt(u,m,`missing required property "${ne}"`));return Y}function Cd(f){const u=f.value,m=f.valueSpec,_=f.style,P=f.styleSpec,N=f.key,z=f.arrayElementValidator||f.validateSpec;if(Wr(u)!=="array")return[new mt(N,u,`array expected, ${Wr(u)} found`)];if(m.length&&u.length!==m.length)return[new mt(N,u,`array length ${m.length} expected, length ${u.length} found`)];if(m["min-length"]&&u.length<m["min-length"])return[new mt(N,u,`array length at least ${m["min-length"]} expected, length ${u.length} found`)];let V={type:m.value,values:m.values};P.$version<7&&(V.function=m.function),Wr(m.value)==="object"&&(V=m.value);let Y=[];for(let J=0;J<u.length;J++)Y=Y.concat(z({array:u,arrayIndex:J,value:u[J],valueSpec:V,validateSpec:f.validateSpec,style:_,styleSpec:P,key:`${N}[${J}]`}));return Y}function Lc(f){const u=f.key,m=f.value,_=f.valueSpec;let P=Wr(m);return P==="number"&&m!=m&&(P="NaN"),P!=="number"?[new mt(u,m,`number expected, ${P} found`)]:"minimum"in _&&m<_.minimum?[new mt(u,m,`${m} is less than the minimum value ${_.minimum}`)]:"maximum"in _&&m>_.maximum?[new mt(u,m,`${m} is greater than the maximum value ${_.maximum}`)]:[]}function Fs(f){const u=f.valueSpec,m=Vi(f.value.type);let _,P,N,z={};const V=m!=="categorical"&&f.value.property===void 0,Y=!V,J=Wr(f.value.stops)==="array"&&Wr(f.value.stops[0])==="array"&&Wr(f.value.stops[0][0])==="object",ne=zo({key:f.key,value:f.value,valueSpec:f.styleSpec.function,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(Se){if(m==="identity")return[new mt(Se.key,Se.value,'identity function may not have a "stops" property')];let Ee=[];const De=Se.value;return Ee=Ee.concat(Cd({key:Se.key,value:De,valueSpec:Se.valueSpec,validateSpec:Se.validateSpec,style:Se.style,styleSpec:Se.styleSpec,arrayElementValidator:ae})),Wr(De)==="array"&&De.length===0&&Ee.push(new mt(Se.key,De,"array must have at least one stop")),Ee},default:function(Se){return Se.validateSpec({key:Se.key,value:Se.value,valueSpec:u,validateSpec:Se.validateSpec,style:Se.style,styleSpec:Se.styleSpec})}}});return m==="identity"&&V&&ne.push(new mt(f.key,f.value,'missing required property "property"')),m==="identity"||f.value.stops||ne.push(new mt(f.key,f.value,'missing required property "stops"')),m==="exponential"&&f.valueSpec.expression&&!bm(f.valueSpec)&&ne.push(new mt(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(Y&&!Oc(f.valueSpec)?ne.push(new mt(f.key,f.value,"property functions not supported")):V&&!By(f.valueSpec)&&ne.push(new mt(f.key,f.value,"zoom functions not supported"))),m!=="categorical"&&!J||f.value.property!==void 0||ne.push(new mt(f.key,f.value,'"property" property is required')),ne;function ae(Se){let Ee=[];const De=Se.value,He=Se.key;if(Wr(De)!=="array")return[new mt(He,De,`array expected, ${Wr(De)} found`)];if(De.length!==2)return[new mt(He,De,`array length 2 expected, length ${De.length} found`)];if(J){if(Wr(De[0])!=="object")return[new mt(He,De,`object expected, ${Wr(De[0])} found`)];if(De[0].zoom===void 0)return[new mt(He,De,"object stop key must have zoom")];if(De[0].value===void 0)return[new mt(He,De,"object stop key must have value")];if(N&&N>Vi(De[0].zoom))return[new mt(He,De[0].zoom,"stop zoom values must appear in ascending order")];Vi(De[0].zoom)!==N&&(N=Vi(De[0].zoom),P=void 0,z={}),Ee=Ee.concat(zo({key:`${He}[0]`,value:De[0],valueSpec:{zoom:{}},validateSpec:Se.validateSpec,style:Se.style,styleSpec:Se.styleSpec,objectElementValidators:{zoom:Lc,value:ye}}))}else Ee=Ee.concat(ye({key:`${He}[0]`,value:De[0],valueSpec:{},validateSpec:Se.validateSpec,style:Se.style,styleSpec:Se.styleSpec},De));return Ha(Ou(De[1]))?Ee.concat([new mt(`${He}[1]`,De[1],"expressions are not allowed in function stops.")]):Ee.concat(Se.validateSpec({key:`${He}[1]`,value:De[1],valueSpec:u,validateSpec:Se.validateSpec,style:Se.style,styleSpec:Se.styleSpec}))}function ye(Se,Ee){const De=Wr(Se.value),He=Vi(Se.value),Ye=Se.value!==null?Se.value:Ee;if(_){if(De!==_)return[new mt(Se.key,Ye,`${De} stop domain type must match previous stop domain type ${_}`)]}else _=De;if(De!=="number"&&De!=="string"&&De!=="boolean")return[new mt(Se.key,Ye,"stop domain value must be a number, string, or boolean")];if(De!=="number"&&m!=="categorical"){let pt=`number expected, ${De} found`;return Oc(u)&&m===void 0&&(pt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new mt(Se.key,Ye,pt)]}return m!=="categorical"||De!=="number"||isFinite(He)&&Math.floor(He)===He?m!=="categorical"&&De==="number"&&P!==void 0&&He<P?[new mt(Se.key,Ye,"stop domain values must appear in ascending order")]:(P=He,m==="categorical"&&He in z?[new mt(Se.key,Ye,"stop domain values must be unique")]:(z[He]=!0,[])):[new mt(Se.key,Ye,`integer expected, found ${He}`)]}}function Tl(f){const u=(f.expressionContext==="property"?Hh:ic)(Ou(f.value),f.valueSpec);if(u.result==="error")return u.value.map(_=>new mt(`${f.key}${_.key}`,f.value,_.message));const m=u.value.expression||u.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!m.outputDefined())return[new mt(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!Cu(m))return[new mt(f.key,f.value,'"feature-state" data expressions are not supported with layout properties.')];if(f.expressionContext==="filter"&&!Cu(m))return[new mt(f.key,f.value,'"feature-state" data expressions are not supported with filters.')];if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!va(m,["zoom","feature-state"]))return[new mt(f.key,f.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(f.expressionContext==="cluster-initial"&&!mm(m))return[new mt(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function sc(f){const u=f.key,m=f.value,_=f.valueSpec,P=[];return Array.isArray(_.values)?_.values.indexOf(Vi(m))===-1&&P.push(new mt(u,m,`expected one of [${_.values.join(", ")}], ${JSON.stringify(m)} found`)):Object.keys(_.values).indexOf(Vi(m))===-1&&P.push(new mt(u,m,`expected one of [${Object.keys(_.values).join(", ")}], ${JSON.stringify(m)} found`)),P}function Bs(f){return pi(Ou(f.value))?Tl(un({},f,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Sm(f)}function Sm(f){const u=f.value,m=f.key;if(Wr(u)!=="array")return[new mt(m,u,`array expected, ${Wr(u)} found`)];const _=f.styleSpec;let P,N=[];if(u.length<1)return[new mt(m,u,"filter array must have at least 1 element")];switch(N=N.concat(sc({key:`${m}[0]`,value:u[0],valueSpec:_.filter_operator,style:f.style,styleSpec:f.styleSpec})),Vi(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&Vi(u[1])==="$type"&&N.push(new mt(m,u,`"$type" cannot be use with operator "${u[0]}"`));case"==":case"!=":u.length!==3&&N.push(new mt(m,u,`filter array for operator "${u[0]}" must have 3 elements`));case"in":case"!in":u.length>=2&&(P=Wr(u[1]),P!=="string"&&N.push(new mt(`${m}[1]`,u[1],`string expected, ${P} found`)));for(let z=2;z<u.length;z++)P=Wr(u[z]),Vi(u[1])==="$type"?N=N.concat(sc({key:`${m}[${z}]`,value:u[z],valueSpec:_.geometry_type,style:f.style,styleSpec:f.styleSpec})):P!=="string"&&P!=="number"&&P!=="boolean"&&N.push(new mt(`${m}[${z}]`,u[z],`string, number, or boolean expected, ${P} found`));break;case"any":case"all":case"none":for(let z=1;z<u.length;z++)N=N.concat(Sm({key:`${m}[${z}]`,value:u[z],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":P=Wr(u[1]),u.length!==2?N.push(new mt(m,u,`filter array for "${u[0]}" operator must have 2 elements`)):P!=="string"&&N.push(new mt(`${m}[1]`,u[1],`string expected, ${P} found`));break;case"within":P=Wr(u[1]),u.length!==2?N.push(new mt(m,u,`filter array for "${u[0]}" operator must have 2 elements`)):P!=="object"&&N.push(new mt(`${m}[1]`,u[1],`object expected, ${P} found`))}return N}function Ad(f,u){const m=f.key,_=f.validateSpec,P=f.style,N=f.styleSpec,z=f.value,V=f.objectKey,Y=N[`${u}_${f.layerType}`];if(!Y)return[];const J=V.match(/^(.*)-transition$/);if(u==="paint"&&J&&Y[J[1]]&&Y[J[1]].transition)return _({key:m,value:z,valueSpec:N.transition,style:P,styleSpec:N});const ne=f.valueSpec||Y[V];if(!ne)return[new mt(m,z,`unknown property "${V}"`)];let ae;if(Wr(z)==="string"&&Oc(ne)&&!ne.tokens&&(ae=/^{([^}]+)}$/.exec(z)))return[new mt(m,z,`"${V}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ae[1])} }\`.`)];const ye=[];return f.layerType==="symbol"&&(V==="text-field"&&P&&!P.glyphs&&ye.push(new mt(m,z,'use of "text-field" requires a style "glyphs" property')),V==="text-font"&&Oi(Ou(z))&&Vi(z.type)==="identity"&&ye.push(new mt(m,z,'"text-font" does not support identity functions'))),ye.concat(_({key:f.key,value:z,valueSpec:ne,style:P,styleSpec:N,expressionContext:"property",propertyType:u,propertyKey:V}))}function Uy(f){return Ad(f,"paint")}function Mm(f){return Ad(f,"layout")}function Wi(f){let u=[];const m=f.value,_=f.key,P=f.style,N=f.styleSpec;m.type||m.ref||u.push(new mt(_,m,'either "type" or "ref" is required'));let z=Vi(m.type);const V=Vi(m.ref);if(m.id){const Y=Vi(m.id);for(let J=0;J<f.arrayIndex;J++){const ne=P.layers[J];Vi(ne.id)===Y&&u.push(new mt(_,m.id,`duplicate layer id "${m.id}", previously used at line ${ne.id.__line__}`))}}if("ref"in m){let Y;["type","source","source-layer","filter","layout"].forEach(J=>{J in m&&u.push(new mt(_,m[J],`"${J}" is prohibited for ref layers`))}),P.layers.forEach(J=>{Vi(J.id)===V&&(Y=J)}),Y?Y.ref?u.push(new mt(_,m.ref,"ref cannot reference another ref layer")):z=Vi(Y.type):u.push(new mt(_,m.ref,`ref layer "${V}" not found`))}else if(z!=="background")if(m.source){const Y=P.sources&&P.sources[m.source],J=Y&&Vi(Y.type);Y?J==="vector"&&z==="raster"?u.push(new mt(_,m.source,`layer "${m.id}" requires a raster source`)):J!=="raster-dem"&&z==="hillshade"?u.push(new mt(_,m.source,`layer "${m.id}" requires a raster-dem source`)):J==="raster"&&z!=="raster"?u.push(new mt(_,m.source,`layer "${m.id}" requires a vector source`)):J!=="vector"||m["source-layer"]?J==="raster-dem"&&z!=="hillshade"?u.push(new mt(_,m.source,"raster-dem source can only be used with layer type 'hillshade'.")):z!=="line"||!m.paint||!m.paint["line-gradient"]||J==="geojson"&&Y.lineMetrics||u.push(new mt(_,m,`layer "${m.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):u.push(new mt(_,m,`layer "${m.id}" must specify a "source-layer"`)):u.push(new mt(_,m.source,`source "${m.source}" not found`))}else u.push(new mt(_,m,'missing required property "source"'));return u=u.concat(zo({key:_,value:m,valueSpec:N.layer,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*":()=>[],type:()=>f.validateSpec({key:`${_}.type`,value:m.type,valueSpec:N.layer.type,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,object:m,objectKey:"type"}),filter:Bs,layout:Y=>zo({layer:m,key:Y.key,value:Y.value,style:Y.style,styleSpec:Y.styleSpec,validateSpec:Y.validateSpec,objectElementValidators:{"*":J=>Mm(un({layerType:z},J))}}),paint:Y=>zo({layer:m,key:Y.key,value:Y.value,style:Y.style,styleSpec:Y.styleSpec,validateSpec:Y.validateSpec,objectElementValidators:{"*":J=>Uy(un({layerType:z},J))}})}})),u}function Sa(f){const u=f.value,m=f.key,_=Wr(u);return _!=="string"?[new mt(m,u,`string expected, ${_} found`)]:[]}const Pd={promoteId:function({key:f,value:u}){if(Wr(u)==="string")return Sa({key:f,value:u});{const m=[];for(const _ in u)m.push(...Sa({key:`${f}.${_}`,value:u[_]}));return m}}};function $s(f){const u=f.value,m=f.key,_=f.styleSpec,P=f.style,N=f.validateSpec;if(!u.type)return[new mt(m,u,'"type" is required')];const z=Vi(u.type);let V;switch(z){case"vector":case"raster":return V=zo({key:m,value:u,valueSpec:_[`source_${z.replace("-","_")}`],style:f.style,styleSpec:_,objectElementValidators:Pd,validateSpec:N}),V;case"raster-dem":return V=function(Y){var J;const ne=(J=Y.sourceName)!==null&&J!==void 0?J:"",ae=Y.value,ye=Y.styleSpec,Se=ye.source_raster_dem,Ee=Y.style;let De=[];const He=Wr(ae);if(ae===void 0)return De;if(He!=="object")return De.push(new mt("source_raster_dem",ae,`object expected, ${He} found`)),De;const Ye=Vi(ae.encoding)==="custom",pt=["redFactor","greenFactor","blueFactor","baseShift"],nt=Y.value.encoding?`"${Y.value.encoding}"`:"Default";for(const xt in ae)!Ye&&pt.includes(xt)?De.push(new mt(xt,ae[xt],`In "${ne}": "${xt}" is only valid when "encoding" is set to "custom". ${nt} encoding found`)):Se[xt]?De=De.concat(Y.validateSpec({key:xt,value:ae[xt],valueSpec:Se[xt],validateSpec:Y.validateSpec,style:Ee,styleSpec:ye})):De.push(new mt(xt,ae[xt],`unknown property "${xt}"`));return De}({sourceName:m,value:u,style:f.style,styleSpec:_,validateSpec:N}),V;case"geojson":if(V=zo({key:m,value:u,valueSpec:_.source_geojson,style:P,styleSpec:_,validateSpec:N,objectElementValidators:Pd}),u.cluster)for(const Y in u.clusterProperties){const[J,ne]=u.clusterProperties[Y],ae=typeof J=="string"?[J,["accumulated"],["get",Y]]:J;V.push(...Tl({key:`${m}.${Y}.map`,value:ne,validateSpec:N,expressionContext:"cluster-map"})),V.push(...Tl({key:`${m}.${Y}.reduce`,value:ae,validateSpec:N,expressionContext:"cluster-reduce"}))}return V;case"video":return zo({key:m,value:u,valueSpec:_.source_video,style:P,validateSpec:N,styleSpec:_});case"image":return zo({key:m,value:u,valueSpec:_.source_image,style:P,validateSpec:N,styleSpec:_});case"canvas":return[new mt(m,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return sc({key:`${m}.type`,value:u.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:P,validateSpec:N,styleSpec:_})}}function Lu(f){const u=f.value,m=f.styleSpec,_=m.light,P=f.style;let N=[];const z=Wr(u);if(u===void 0)return N;if(z!=="object")return N=N.concat([new mt("light",u,`object expected, ${z} found`)]),N;for(const V in u){const Y=V.match(/^(.*)-transition$/);N=N.concat(Y&&_[Y[1]]&&_[Y[1]].transition?f.validateSpec({key:V,value:u[V],valueSpec:m.transition,validateSpec:f.validateSpec,style:P,styleSpec:m}):_[V]?f.validateSpec({key:V,value:u[V],valueSpec:_[V],validateSpec:f.validateSpec,style:P,styleSpec:m}):[new mt(V,u[V],`unknown property "${V}"`)])}return N}function Ma(f){const u=f.value,m=f.styleSpec,_=m.terrain,P=f.style;let N=[];const z=Wr(u);if(u===void 0)return N;if(z!=="object")return N=N.concat([new mt("terrain",u,`object expected, ${z} found`)]),N;for(const V in u)N=N.concat(_[V]?f.validateSpec({key:V,value:u[V],valueSpec:_[V],validateSpec:f.validateSpec,style:P,styleSpec:m}):[new mt(V,u[V],`unknown property "${V}"`)]);return N}function kd(f){let u=[];const m=f.value,_=f.key;if(Array.isArray(m)){const P=[],N=[];for(const z in m)m[z].id&&P.includes(m[z].id)&&u.push(new mt(_,m,`all the sprites' ids must be unique, but ${m[z].id} is duplicated`)),P.push(m[z].id),m[z].url&&N.includes(m[z].url)&&u.push(new mt(_,m,`all the sprites' URLs must be unique, but ${m[z].url} is duplicated`)),N.push(m[z].url),u=u.concat(zo({key:`${_}[${z}]`,value:m[z],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:f.validateSpec}));return u}return Sa({key:_,value:m})}const no={"*":()=>[],array:Cd,boolean:function(f){const u=f.value,m=f.key,_=Wr(u);return _!=="boolean"?[new mt(m,u,`boolean expected, ${_} found`)]:[]},number:Lc,color:function(f){const u=f.key,m=f.value,_=Wr(m);return _!=="string"?[new mt(u,m,`color expected, ${_} found`)]:ar.parse(String(m))?[]:[new mt(u,m,`color expected, "${m}" found`)]},constants:Yh,enum:sc,filter:Bs,function:Fs,layer:Wi,object:zo,source:$s,light:Lu,terrain:Ma,string:Sa,formatted:function(f){return Sa(f).length===0?[]:Tl(f)},resolvedImage:function(f){return Sa(f).length===0?[]:Tl(f)},padding:function(f){const u=f.key,m=f.value;if(Wr(m)==="array"){if(m.length<1||m.length>4)return[new mt(u,m,`padding requires 1 to 4 values; ${m.length} values found`)];const _={type:"number"};let P=[];for(let N=0;N<m.length;N++)P=P.concat(f.validateSpec({key:`${u}[${N}]`,value:m[N],validateSpec:f.validateSpec,valueSpec:_}));return P}return Lc({key:u,value:m,valueSpec:{}})},variableAnchorOffsetCollection:function(f){const u=f.key,m=f.value,_=Wr(m),P=f.styleSpec;if(_!=="array"||m.length<1||m.length%2!=0)return[new mt(u,m,"variableAnchorOffsetCollection requires a non-empty array of even length")];let N=[];for(let z=0;z<m.length;z+=2)N=N.concat(sc({key:`${u}[${z}]`,value:m[z],valueSpec:P.layout_symbol["text-anchor"]})),N=N.concat(Cd({key:`${u}[${z+1}]`,value:m[z+1],valueSpec:{length:2,value:"number"},validateSpec:f.validateSpec,style:f.style,styleSpec:P}));return N},sprite:kd};function Hi(f){const u=f.value,m=f.valueSpec,_=f.styleSpec;return f.validateSpec=Hi,m.expression&&Oi(Vi(u))?Fs(f):m.expression&&Ha(Ou(u))?Tl(f):m.type&&no[m.type]?no[m.type](f):zo(un({},f,{valueSpec:m.type?_[m.type]:m}))}function Fo(f){const u=f.value,m=f.key,_=Sa(f);return _.length||(u.indexOf("{fontstack}")===-1&&_.push(new mt(m,u,'"glyphs" url must include a "{fontstack}" token')),u.indexOf("{range}")===-1&&_.push(new mt(m,u,'"glyphs" url must include a "{range}" token'))),_}function js(f,u=Je){let m=[];return m=m.concat(Hi({key:"",value:f,valueSpec:u.$root,styleSpec:u,style:f,validateSpec:Hi,objectElementValidators:{glyphs:Fo,"*":()=>[]}})),f.constants&&(m=m.concat(Yh({key:"constants",value:f.constants,style:f,styleSpec:u,validateSpec:Hi}))),Du(m)}function Ea(f){return function(u){return f({...u,validateSpec:Hi})}}function Du(f){return[].concat(f).sort((u,m)=>u.line-m.line)}function Dc(f){return function(...u){return Du(f.apply(this,u))}}js.source=Dc(Ea($s)),js.sprite=Dc(Ea(kd)),js.glyphs=Dc(Ea(Fo)),js.light=Dc(Ea(Lu)),js.terrain=Dc(Ea(Ma)),js.layer=Dc(Ea(Wi)),js.filter=Dc(Ea(Bs)),js.paintProperty=Dc(Ea(Uy)),js.layoutProperty=Dc(Ea(Mm));const Gi=js,Vy=Gi.light,Xh=Gi.paintProperty,Em=Gi.layoutProperty;function Ga(f,u){let m=!1;if(u&&u.length)for(const _ of u)f.fire(new Gt(new Error(_.message))),m=!0;return m}class Us{constructor(u,m,_){const P=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;const z=new Int32Array(this.arrayBuffer);u=z[0],this.d=(m=z[1])+2*(_=z[2]);for(let Y=0;Y<this.d*this.d;Y++){const J=z[3+Y],ne=z[3+Y+1];P.push(J===ne?null:z.subarray(J,ne))}const V=z[3+P.length+1];this.keys=z.subarray(z[3+P.length],V),this.bboxes=z.subarray(V),this.insert=this._insertReadonly}else{this.d=m+2*_;for(let z=0;z<this.d*this.d;z++)P.push([]);this.keys=[],this.bboxes=[]}this.n=m,this.extent=u,this.padding=_,this.scale=m/u,this.uid=0;const N=_/m*u;this.min=-N,this.max=u+N}insert(u,m,_,P,N){this._forEachCell(m,_,P,N,this._insertCell,this.uid++,void 0,void 0),this.keys.push(u),this.bboxes.push(m),this.bboxes.push(_),this.bboxes.push(P),this.bboxes.push(N)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(u,m,_,P,N,z){this.cells[N].push(z)}query(u,m,_,P,N){const z=this.min,V=this.max;if(u<=z&&m<=z&&V<=_&&V<=P&&!N)return Array.prototype.slice.call(this.keys);{const Y=[];return this._forEachCell(u,m,_,P,this._queryCell,Y,{},N),Y}}_queryCell(u,m,_,P,N,z,V,Y){const J=this.cells[N];if(J!==null){const ne=this.keys,ae=this.bboxes;for(let ye=0;ye<J.length;ye++){const Se=J[ye];if(V[Se]===void 0){const Ee=4*Se;(Y?Y(ae[Ee+0],ae[Ee+1],ae[Ee+2],ae[Ee+3]):u<=ae[Ee+2]&&m<=ae[Ee+3]&&_>=ae[Ee+0]&&P>=ae[Ee+1])?(V[Se]=!0,z.push(ne[Se])):V[Se]=!1}}}}_forEachCell(u,m,_,P,N,z,V,Y){const J=this._convertToCellCoord(u),ne=this._convertToCellCoord(m),ae=this._convertToCellCoord(_),ye=this._convertToCellCoord(P);for(let Se=J;Se<=ae;Se++)for(let Ee=ne;Ee<=ye;Ee++){const De=this.d*Ee+Se;if((!Y||Y(this._convertFromCellCoord(Se),this._convertFromCellCoord(Ee),this._convertFromCellCoord(Se+1),this._convertFromCellCoord(Ee+1)))&&N.call(this,u,m,_,P,De,z,V,Y))return}}_convertFromCellCoord(u){return(u-this.padding)/this.scale}_convertToCellCoord(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const u=this.cells,m=3+this.cells.length+1+1;let _=0;for(let z=0;z<this.cells.length;z++)_+=this.cells[z].length;const P=new Int32Array(m+_+this.keys.length+this.bboxes.length);P[0]=this.extent,P[1]=this.n,P[2]=this.padding;let N=m;for(let z=0;z<u.length;z++){const V=u[z];P[3+z]=N,P.set(V,N),N+=V.length}return P[3+u.length]=N,P.set(this.keys,N),N+=this.keys.length,P[3+u.length+1]=N,P.set(this.bboxes,N),N+=this.bboxes.length,P.buffer}static serialize(u,m){const _=u.toArrayBuffer();return m&&m.push(_),{buffer:_}}static deserialize(u){return new Us(u.buffer)}}const Vs={};function wn(f,u,m={}){if(Vs[f])throw new Error(`${f} is already registered.`);Object.defineProperty(u,"_classRegistryKey",{value:f,writeable:!1}),Vs[f]={klass:u,omit:m.omit||[],shallow:m.shallow||[]}}wn("Object",Object),wn("TransferableGridIndex",Us),wn("Color",ar),wn("Error",Error),wn("AJAXError",zt),wn("ResolvedImage",tr),wn("StylePropertyFunction",as),wn("StyleExpression",El,{omit:["_evaluator"]}),wn("ZoomDependentExpression",Lf),wn("ZoomConstantExpression",wm),wn("CompoundExpression",Ua,{omit:["_evaluate"]});for(const f in ba)ba[f]._classRegistryKey||wn(`Expression_${f}`,ba[f]);function Id(f){return f&&typeof ArrayBuffer<"u"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function Nc(f,u){if(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob)return f;if(Id(f)||he(f))return u&&u.push(f),f;if(ArrayBuffer.isView(f)){const m=f;return u&&u.push(m.buffer),m}if(f instanceof ImageData)return u&&u.push(f.data.buffer),f;if(Array.isArray(f)){const m=[];for(const _ of f)m.push(Nc(_,u));return m}if(typeof f=="object"){const m=f.constructor,_=m._classRegistryKey;if(!_)throw new Error("can't serialize object of unregistered class");if(!Vs[_])throw new Error(`${_} is not registered.`);const P=m.serialize?m.serialize(f,u):{};if(m.serialize){if(u&&P===u[u.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const N in f){if(!f.hasOwnProperty(N)||Vs[_].omit.indexOf(N)>=0)continue;const z=f[N];P[N]=Vs[_].shallow.indexOf(N)>=0?z:Nc(z,u)}f instanceof Error&&(P.message=f.message)}if(P.$name)throw new Error("$name property is reserved for worker serialization logic.");return _!=="Object"&&(P.$name=_),P}throw new Error("can't serialize object of type "+typeof f)}function Rd(f){if(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||Id(f)||he(f)||ArrayBuffer.isView(f)||f instanceof ImageData)return f;if(Array.isArray(f))return f.map(Rd);if(typeof f=="object"){const u=f.$name||"Object";if(!Vs[u])throw new Error(`can't deserialize unregistered class ${u}`);const{klass:m}=Vs[u];if(!m)throw new Error(`can't deserialize unregistered class ${u}`);if(m.deserialize)return m.deserialize(f);const _=Object.create(m.prototype);for(const P of Object.keys(f)){if(P==="$name")continue;const N=f[P];_[P]=Vs[u].shallow.indexOf(P)>=0?N:Rd(N)}return _}throw new Error("can't deserialize object of type "+typeof f)}class Wy{constructor(){this.first=!0}update(u,m){const _=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=_,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=_,!0):(this.lastFloorZoom>_?(this.lastIntegerZoom=_+1,this.lastIntegerZoomTime=m):this.lastFloorZoom<_&&(this.lastIntegerZoom=_,this.lastIntegerZoomTime=m),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=_,!0))}}const xn={"Latin-1 Supplement":f=>f>=128&&f<=255,Arabic:f=>f>=1536&&f<=1791,"Arabic Supplement":f=>f>=1872&&f<=1919,"Arabic Extended-A":f=>f>=2208&&f<=2303,"Hangul Jamo":f=>f>=4352&&f<=4607,"Unified Canadian Aboriginal Syllabics":f=>f>=5120&&f<=5759,Khmer:f=>f>=6016&&f<=6143,"Unified Canadian Aboriginal Syllabics Extended":f=>f>=6320&&f<=6399,"General Punctuation":f=>f>=8192&&f<=8303,"Letterlike Symbols":f=>f>=8448&&f<=8527,"Number Forms":f=>f>=8528&&f<=8591,"Miscellaneous Technical":f=>f>=8960&&f<=9215,"Control Pictures":f=>f>=9216&&f<=9279,"Optical Character Recognition":f=>f>=9280&&f<=9311,"Enclosed Alphanumerics":f=>f>=9312&&f<=9471,"Geometric Shapes":f=>f>=9632&&f<=9727,"Miscellaneous Symbols":f=>f>=9728&&f<=9983,"Miscellaneous Symbols and Arrows":f=>f>=11008&&f<=11263,"CJK Radicals Supplement":f=>f>=11904&&f<=12031,"Kangxi Radicals":f=>f>=12032&&f<=12255,"Ideographic Description Characters":f=>f>=12272&&f<=12287,"CJK Symbols and Punctuation":f=>f>=12288&&f<=12351,Hiragana:f=>f>=12352&&f<=12447,Katakana:f=>f>=12448&&f<=12543,Bopomofo:f=>f>=12544&&f<=12591,"Hangul Compatibility Jamo":f=>f>=12592&&f<=12687,Kanbun:f=>f>=12688&&f<=12703,"Bopomofo Extended":f=>f>=12704&&f<=12735,"CJK Strokes":f=>f>=12736&&f<=12783,"Katakana Phonetic Extensions":f=>f>=12784&&f<=12799,"Enclosed CJK Letters and Months":f=>f>=12800&&f<=13055,"CJK Compatibility":f=>f>=13056&&f<=13311,"CJK Unified Ideographs Extension A":f=>f>=13312&&f<=19903,"Yijing Hexagram Symbols":f=>f>=19904&&f<=19967,"CJK Unified Ideographs":f=>f>=19968&&f<=40959,"Yi Syllables":f=>f>=40960&&f<=42127,"Yi Radicals":f=>f>=42128&&f<=42191,"Hangul Jamo Extended-A":f=>f>=43360&&f<=43391,"Hangul Syllables":f=>f>=44032&&f<=55215,"Hangul Jamo Extended-B":f=>f>=55216&&f<=55295,"Private Use Area":f=>f>=57344&&f<=63743,"CJK Compatibility Ideographs":f=>f>=63744&&f<=64255,"Arabic Presentation Forms-A":f=>f>=64336&&f<=65023,"Vertical Forms":f=>f>=65040&&f<=65055,"CJK Compatibility Forms":f=>f>=65072&&f<=65103,"Small Form Variants":f=>f>=65104&&f<=65135,"Arabic Presentation Forms-B":f=>f>=65136&&f<=65279,"Halfwidth and Fullwidth Forms":f=>f>=65280&&f<=65519};function Tm(f){for(const u of f)if(Od(u.charCodeAt(0)))return!0;return!1}function Cm(f){for(const u of f)if(!Hy(u.charCodeAt(0)))return!1;return!0}function Hy(f){return!(xn.Arabic(f)||xn["Arabic Supplement"](f)||xn["Arabic Extended-A"](f)||xn["Arabic Presentation Forms-A"](f)||xn["Arabic Presentation Forms-B"](f))}function Od(f){return!(f!==746&&f!==747&&(f<4352||!(xn["Bopomofo Extended"](f)||xn.Bopomofo(f)||xn["CJK Compatibility Forms"](f)&&!(f>=65097&&f<=65103)||xn["CJK Compatibility Ideographs"](f)||xn["CJK Compatibility"](f)||xn["CJK Radicals Supplement"](f)||xn["CJK Strokes"](f)||!(!xn["CJK Symbols and Punctuation"](f)||f>=12296&&f<=12305||f>=12308&&f<=12319||f===12336)||xn["CJK Unified Ideographs Extension A"](f)||xn["CJK Unified Ideographs"](f)||xn["Enclosed CJK Letters and Months"](f)||xn["Hangul Compatibility Jamo"](f)||xn["Hangul Jamo Extended-A"](f)||xn["Hangul Jamo Extended-B"](f)||xn["Hangul Jamo"](f)||xn["Hangul Syllables"](f)||xn.Hiragana(f)||xn["Ideographic Description Characters"](f)||xn.Kanbun(f)||xn["Kangxi Radicals"](f)||xn["Katakana Phonetic Extensions"](f)||xn.Katakana(f)&&f!==12540||!(!xn["Halfwidth and Fullwidth Forms"](f)||f===65288||f===65289||f===65293||f>=65306&&f<=65310||f===65339||f===65341||f===65343||f>=65371&&f<=65503||f===65507||f>=65512&&f<=65519)||!(!xn["Small Form Variants"](f)||f>=65112&&f<=65118||f>=65123&&f<=65126)||xn["Unified Canadian Aboriginal Syllabics"](f)||xn["Unified Canadian Aboriginal Syllabics Extended"](f)||xn["Vertical Forms"](f)||xn["Yijing Hexagram Symbols"](f)||xn["Yi Syllables"](f)||xn["Yi Radicals"](f))))}function Gy(f){return!(Od(f)||function(u){return!!(xn["Latin-1 Supplement"](u)&&(u===167||u===169||u===174||u===177||u===188||u===189||u===190||u===215||u===247)||xn["General Punctuation"](u)&&(u===8214||u===8224||u===8225||u===8240||u===8241||u===8251||u===8252||u===8258||u===8263||u===8264||u===8265||u===8273)||xn["Letterlike Symbols"](u)||xn["Number Forms"](u)||xn["Miscellaneous Technical"](u)&&(u>=8960&&u<=8967||u>=8972&&u<=8991||u>=8996&&u<=9e3||u===9003||u>=9085&&u<=9114||u>=9150&&u<=9165||u===9167||u>=9169&&u<=9179||u>=9186&&u<=9215)||xn["Control Pictures"](u)&&u!==9251||xn["Optical Character Recognition"](u)||xn["Enclosed Alphanumerics"](u)||xn["Geometric Shapes"](u)||xn["Miscellaneous Symbols"](u)&&!(u>=9754&&u<=9759)||xn["Miscellaneous Symbols and Arrows"](u)&&(u>=11026&&u<=11055||u>=11088&&u<=11097||u>=11192&&u<=11243)||xn["CJK Symbols and Punctuation"](u)||xn.Katakana(u)||xn["Private Use Area"](u)||xn["CJK Compatibility Forms"](u)||xn["Small Form Variants"](u)||xn["Halfwidth and Fullwidth Forms"](u)||u===8734||u===8756||u===8757||u>=9984&&u<=10087||u>=10102&&u<=10131||u===65532||u===65533)}(f))}function Kh(f){return f>=1424&&f<=2303||xn["Arabic Presentation Forms-A"](f)||xn["Arabic Presentation Forms-B"](f)}function Zh(f,u){return!(!u&&Kh(f)||f>=2304&&f<=3583||f>=3840&&f<=4255||xn.Khmer(f))}function qy(f){for(const u of f)if(Kh(u.charCodeAt(0)))return!0;return!1}const Ld="deferred",Am="loading",Pm="loaded";let km=null,Ws="unavailable",ac=null;const Ff=function(f){f&&typeof f=="string"&&f.indexOf("NetworkError")>-1&&(Ws="error"),km&&km(f)};function Im(){Jh.fire(new Bt("pluginStateChange",{pluginStatus:Ws,pluginURL:ac}))}const Jh=new sn,Rm=function(){return Ws},tx=function(){if(Ws!==Ld||!ac)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ws=Am,Im(),ac&&et({url:ac},f=>{f?Ff(f):(Ws=Pm,Im())})},Ta={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Ws===Pm||Ta.applyArabicShaping!=null,isLoading:()=>Ws===Am,setState(f){if(!xe())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Ws=f.pluginStatus,ac=f.pluginURL},isParsed(){if(!xe())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Ta.applyArabicShaping!=null&&Ta.processBidirectionalText!=null&&Ta.processStyledBidirectionalText!=null},getPluginURL(){if(!xe())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return ac}};class Ei{constructor(u,m){this.zoom=u,m?(this.now=m.now,this.fadeDuration=m.fadeDuration,this.zoomHistory=m.zoomHistory,this.transition=m.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Wy,this.transition={})}isSupportedScript(u){return function(m,_){for(const P of m)if(!Zh(P.charCodeAt(0),_))return!1;return!0}(u,Ta.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const u=this.zoom,m=u-Math.floor(u),_=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:m+(1-m)*_}:{fromScale:.5,toScale:1,t:1-(1-_)*m}}}class Qh{constructor(u,m){this.property=u,this.value=m,this.expression=function(_,P){if(Oi(_))return new as(_,P);if(Ha(_)){const N=Hh(_,P);if(N.result==="error")throw new Error(N.value.map(z=>`${z.key}: ${z.message}`).join(", "));return N.value}{let N=_;return P.type==="color"&&typeof _=="string"?N=ar.parse(_):P.type!=="padding"||typeof _!="number"&&!Array.isArray(_)?P.type==="variableAnchorOffsetCollection"&&Array.isArray(_)&&(N=to.parse(_)):N=Kn.parse(_),{kind:"constant",evaluate:()=>N}}}(m===void 0?u.specification.default:m,u.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(u,m,_){return this.property.possiblyEvaluate(this,u,m,_)}}class Om{constructor(u){this.property=u,this.value=new Qh(u,void 0)}transitioned(u,m){return new ep(this.property,this.value,m,U({},u.transition,this.transition),u.now)}untransitioned(){return new ep(this.property,this.value,null,{},0)}}class Yy{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues)}getValue(u){return le(this._values[u].value.value)}setValue(u,m){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new Om(this._values[u].property)),this._values[u].value=new Qh(this._values[u].property,m===null?void 0:le(m))}getTransition(u){return le(this._values[u].transition)}setTransition(u,m){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new Om(this._values[u].property)),this._values[u].transition=le(m)||void 0}serialize(){const u={};for(const m of Object.keys(this._values)){const _=this.getValue(m);_!==void 0&&(u[m]=_);const P=this.getTransition(m);P!==void 0&&(u[`${m}-transition`]=P)}return u}transitioned(u,m){const _=new nx(this._properties);for(const P of Object.keys(this._values))_._values[P]=this._values[P].transitioned(u,m._values[P]);return _}untransitioned(){const u=new nx(this._properties);for(const m of Object.keys(this._values))u._values[m]=this._values[m].untransitioned();return u}}class ep{constructor(u,m,_,P,N){this.property=u,this.value=m,this.begin=N+P.delay||0,this.end=this.begin+P.duration||0,u.specification.transition&&(P.delay||P.duration)&&(this.prior=_)}possiblyEvaluate(u,m,_){const P=u.now||0,N=this.value.possiblyEvaluate(u,m,_),z=this.prior;if(z){if(P>this.end)return this.prior=null,N;if(this.value.isDataDriven())return this.prior=null,N;if(P<this.begin)return z.possiblyEvaluate(u,m,_);{const V=(P-this.begin)/(this.end-this.begin);return this.property.interpolate(z.possiblyEvaluate(u,m,_),N,function(Y){if(Y<=0)return 0;if(Y>=1)return 1;const J=Y*Y,ne=J*Y;return 4*(Y<.5?ne:3*(Y-J)+ne-.75)}(V))}}return N}}class nx{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)}possiblyEvaluate(u,m,_){const P=new Bf(this._properties);for(const N of Object.keys(this._values))P._values[N]=this._values[N].possiblyEvaluate(u,m,_);return P}hasTransition(){for(const u of Object.keys(this._values))if(this._values[u].prior)return!0;return!1}}class G1{constructor(u){this._properties=u,this._values=Object.create(u.defaultPropertyValues)}hasValue(u){return this._values[u].value!==void 0}getValue(u){return le(this._values[u].value)}setValue(u,m){this._values[u]=new Qh(this._values[u].property,m===null?void 0:le(m))}serialize(){const u={};for(const m of Object.keys(this._values)){const _=this.getValue(m);_!==void 0&&(u[m]=_)}return u}possiblyEvaluate(u,m,_){const P=new Bf(this._properties);for(const N of Object.keys(this._values))P._values[N]=this._values[N].possiblyEvaluate(u,m,_);return P}}class Hs{constructor(u,m,_){this.property=u,this.value=m,this.parameters=_}isConstant(){return this.value.kind==="constant"}constantOr(u){return this.value.kind==="constant"?this.value.value:u}evaluate(u,m,_,P){return this.property.evaluate(this.value,this.parameters,u,m,_,P)}}class Bf{constructor(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)}get(u){return this._values[u]}}class Nn{constructor(u){this.specification=u}possiblyEvaluate(u,m){if(u.isDataDriven())throw new Error("Value should not be data driven");return u.expression.evaluate(m)}interpolate(u,m,_){const P=Ts[this.specification.type];return P?P(u,m,_):u}}class nr{constructor(u,m){this.specification=u,this.overrides=m}possiblyEvaluate(u,m,_,P){return new Hs(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(m,null,{},_,P)}:u.expression,m)}interpolate(u,m,_){if(u.value.kind!=="constant"||m.value.kind!=="constant")return u;if(u.value.value===void 0||m.value.value===void 0)return new Hs(this,{kind:"constant",value:void 0},u.parameters);const P=Ts[this.specification.type];if(P){const N=P(u.value.value,m.value.value,_);return new Hs(this,{kind:"constant",value:N},u.parameters)}return u}evaluate(u,m,_,P,N,z){return u.kind==="constant"?u.value:u.evaluate(m,_,P,N,z)}}class $f extends nr{possiblyEvaluate(u,m,_,P){if(u.value===void 0)return new Hs(this,{kind:"constant",value:void 0},m);if(u.expression.kind==="constant"){const N=u.expression.evaluate(m,null,{},_,P),z=u.property.specification.type==="resolvedImage"&&typeof N!="string"?N.name:N,V=this._calculate(z,z,z,m);return new Hs(this,{kind:"constant",value:V},m)}if(u.expression.kind==="camera"){const N=this._calculate(u.expression.evaluate({zoom:m.zoom-1}),u.expression.evaluate({zoom:m.zoom}),u.expression.evaluate({zoom:m.zoom+1}),m);return new Hs(this,{kind:"constant",value:N},m)}return new Hs(this,u.expression,m)}evaluate(u,m,_,P,N,z){if(u.kind==="source"){const V=u.evaluate(m,_,P,N,z);return this._calculate(V,V,V,m)}return u.kind==="composite"?this._calculate(u.evaluate({zoom:Math.floor(m.zoom)-1},_,P),u.evaluate({zoom:Math.floor(m.zoom)},_,P),u.evaluate({zoom:Math.floor(m.zoom)+1},_,P),m):u.value}_calculate(u,m,_,P){return P.zoom>P.zoomHistory.lastIntegerZoom?{from:u,to:m}:{from:_,to:m}}interpolate(u){return u}}class Lm{constructor(u){this.specification=u}possiblyEvaluate(u,m,_,P){if(u.value!==void 0){if(u.expression.kind==="constant"){const N=u.expression.evaluate(m,null,{},_,P);return this._calculate(N,N,N,m)}return this._calculate(u.expression.evaluate(new Ei(Math.floor(m.zoom-1),m)),u.expression.evaluate(new Ei(Math.floor(m.zoom),m)),u.expression.evaluate(new Ei(Math.floor(m.zoom+1),m)),m)}}_calculate(u,m,_,P){return P.zoom>P.zoomHistory.lastIntegerZoom?{from:u,to:m}:{from:_,to:m}}interpolate(u){return u}}class Dm{constructor(u){this.specification=u}possiblyEvaluate(u,m,_,P){return!!u.expression.evaluate(m,null,{},_,P)}interpolate(){return!1}}class so{constructor(u){this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const m in u){const _=u[m];_.specification.overridable&&this.overridableProperties.push(m);const P=this.defaultPropertyValues[m]=new Qh(_,void 0),N=this.defaultTransitionablePropertyValues[m]=new Om(_);this.defaultTransitioningPropertyValues[m]=N.untransitioned(),this.defaultPossiblyEvaluatedValues[m]=P.possiblyEvaluate({})}}}wn("DataDrivenProperty",nr),wn("DataConstantProperty",Nn),wn("CrossFadedDataDrivenProperty",$f),wn("CrossFadedProperty",Lm),wn("ColorRampProperty",Dm);const Nm="-transition";class go extends sn{constructor(u,m){if(super(),this.id=u.id,this.type=u.type,this._featureFilter={filter:()=>!0,needGeometry:!1},u.type!=="custom"&&(this.metadata=u.metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,u.type!=="background"&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter),m.layout&&(this._unevaluatedLayout=new G1(m.layout)),m.paint)){this._transitionablePaint=new Yy(m.paint);for(const _ in u.paint)this.setPaintProperty(_,u.paint[_],{validate:!1});for(const _ in u.layout)this.setLayoutProperty(_,u.layout[_],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Bf(m.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(u){return u==="visibility"?this.visibility:this._unevaluatedLayout.getValue(u)}setLayoutProperty(u,m,_={}){m!=null&&this._validate(Em,`layers.${this.id}.layout.${u}`,u,m,_)||(u!=="visibility"?this._unevaluatedLayout.setValue(u,m):this.visibility=m)}getPaintProperty(u){return u.endsWith(Nm)?this._transitionablePaint.getTransition(u.slice(0,-11)):this._transitionablePaint.getValue(u)}setPaintProperty(u,m,_={}){if(m!=null&&this._validate(Xh,`layers.${this.id}.paint.${u}`,u,m,_))return!1;if(u.endsWith(Nm))return this._transitionablePaint.setTransition(u.slice(0,-11),m||void 0),!1;{const P=this._transitionablePaint._values[u],N=P.property.specification["property-type"]==="cross-faded-data-driven",z=P.value.isDataDriven(),V=P.value;this._transitionablePaint.setValue(u,m),this._handleSpecialPaintPropertyUpdate(u);const Y=this._transitionablePaint._values[u].value;return Y.isDataDriven()||z||N||this._handleOverridablePaintPropertyUpdate(u,V,Y)}}_handleSpecialPaintPropertyUpdate(u){}_handleOverridablePaintPropertyUpdate(u,m,_){return!1}isHidden(u){return!!(this.minzoom&&u<this.minzoom)||!!(this.maxzoom&&u>=this.maxzoom)||this.visibility==="none"}updateTransitions(u){this._transitioningPaint=this._transitionablePaint.transitioned(u,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(u,m){u.getCrossfadeParameters&&(this._crossfadeParameters=u.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(u,void 0,m)),this.paint=this._transitioningPaint.possiblyEvaluate(u,void 0,m)}serialize(){const u={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(u.layout=u.layout||{},u.layout.visibility=this.visibility),X(u,(m,_)=>!(m===void 0||_==="layout"&&!Object.keys(m).length||_==="paint"&&!Object.keys(m).length))}_validate(u,m,_,P,N={}){return(!N||N.validate!==!1)&&Ga(this,u.call(Gi,{key:m,layerType:this.type,objectKey:_,value:P,styleSpec:Je,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const u in this.paint._values){const m=this.paint.get(u);if(m instanceof Hs&&Oc(m.property.specification)&&(m.value.kind==="source"||m.value.kind==="composite")&&m.value.isStateDependent)return!0}return!1}}const Xy={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Cl{constructor(u,m){this._structArray=u,this._pos1=m*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ti{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(u,m){return u._trim(),m&&(u.isTransferred=!0,m.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}}static deserialize(u){const m=Object.create(this.prototype);return m.arrayBuffer=u.arrayBuffer,m.length=u.length,m.capacity=u.arrayBuffer.byteLength/m.bytesPerElement,m._refreshViews(),m}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(u){this.reserve(u),this.length=u}reserve(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const m=this.uint8;this._refreshViews(),m&&this.uint8.set(m)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ci(f,u=1){let m=0,_=0;return{members:f.map(P=>{const N=Xy[P.type].BYTES_PER_ELEMENT,z=m=zc(m,Math.max(u,N)),V=P.components||1;return _=Math.max(_,N),m+=N*V,{name:P.name,type:P.type,components:V,offset:z}}),size:zc(m,Math.max(_,u)),alignment:u}}function zc(f,u){return Math.ceil(f/u)*u}class jf extends Ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,m){const _=this.length;return this.resize(_+1),this.emplace(_,u,m)}emplace(u,m,_){const P=2*u;return this.int16[P+0]=m,this.int16[P+1]=_,u}}jf.prototype.bytesPerElement=4,wn("StructArrayLayout2i4",jf);class Fc extends Ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,m,_){const P=this.length;return this.resize(P+1),this.emplace(P,u,m,_)}emplace(u,m,_,P){const N=3*u;return this.int16[N+0]=m,this.int16[N+1]=_,this.int16[N+2]=P,u}}Fc.prototype.bytesPerElement=6,wn("StructArrayLayout3i6",Fc);class ao extends Ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,m,_,P){const N=this.length;return this.resize(N+1),this.emplace(N,u,m,_,P)}emplace(u,m,_,P,N){const z=4*u;return this.int16[z+0]=m,this.int16[z+1]=_,this.int16[z+2]=P,this.int16[z+3]=N,u}}ao.prototype.bytesPerElement=8,wn("StructArrayLayout4i8",ao);class Ky extends Ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,m,_,P,N,z){const V=this.length;return this.resize(V+1),this.emplace(V,u,m,_,P,N,z)}emplace(u,m,_,P,N,z,V){const Y=6*u;return this.int16[Y+0]=m,this.int16[Y+1]=_,this.int16[Y+2]=P,this.int16[Y+3]=N,this.int16[Y+4]=z,this.int16[Y+5]=V,u}}Ky.prototype.bytesPerElement=12,wn("StructArrayLayout2i4i12",Ky);class Zy extends Ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,m,_,P,N,z){const V=this.length;return this.resize(V+1),this.emplace(V,u,m,_,P,N,z)}emplace(u,m,_,P,N,z,V){const Y=4*u,J=8*u;return this.int16[Y+0]=m,this.int16[Y+1]=_,this.uint8[J+4]=P,this.uint8[J+5]=N,this.uint8[J+6]=z,this.uint8[J+7]=V,u}}Zy.prototype.bytesPerElement=8,wn("StructArrayLayout2i4ub8",Zy);class Yo extends Ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,m){const _=this.length;return this.resize(_+1),this.emplace(_,u,m)}emplace(u,m,_){const P=2*u;return this.float32[P+0]=m,this.float32[P+1]=_,u}}Yo.prototype.bytesPerElement=8,wn("StructArrayLayout2f8",Yo);class cs extends Ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,m,_,P,N,z,V,Y,J,ne){const ae=this.length;return this.resize(ae+1),this.emplace(ae,u,m,_,P,N,z,V,Y,J,ne)}emplace(u,m,_,P,N,z,V,Y,J,ne,ae){const ye=10*u;return this.uint16[ye+0]=m,this.uint16[ye+1]=_,this.uint16[ye+2]=P,this.uint16[ye+3]=N,this.uint16[ye+4]=z,this.uint16[ye+5]=V,this.uint16[ye+6]=Y,this.uint16[ye+7]=J,this.uint16[ye+8]=ne,this.uint16[ye+9]=ae,u}}cs.prototype.bytesPerElement=20,wn("StructArrayLayout10ui20",cs);class zm extends Ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,m,_,P,N,z,V,Y,J,ne,ae,ye){const Se=this.length;return this.resize(Se+1),this.emplace(Se,u,m,_,P,N,z,V,Y,J,ne,ae,ye)}emplace(u,m,_,P,N,z,V,Y,J,ne,ae,ye,Se){const Ee=12*u;return this.int16[Ee+0]=m,this.int16[Ee+1]=_,this.int16[Ee+2]=P,this.int16[Ee+3]=N,this.uint16[Ee+4]=z,this.uint16[Ee+5]=V,this.uint16[Ee+6]=Y,this.uint16[Ee+7]=J,this.int16[Ee+8]=ne,this.int16[Ee+9]=ae,this.int16[Ee+10]=ye,this.int16[Ee+11]=Se,u}}zm.prototype.bytesPerElement=24,wn("StructArrayLayout4i4ui4i24",zm);class Hr extends Ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,m,_){const P=this.length;return this.resize(P+1),this.emplace(P,u,m,_)}emplace(u,m,_,P){const N=3*u;return this.float32[N+0]=m,this.float32[N+1]=_,this.float32[N+2]=P,u}}Hr.prototype.bytesPerElement=12,wn("StructArrayLayout3f12",Hr);class L extends Ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(u){const m=this.length;return this.resize(m+1),this.emplace(m,u)}emplace(u,m){return this.uint32[1*u+0]=m,u}}L.prototype.bytesPerElement=4,wn("StructArrayLayout1ul4",L);class d extends Ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,m,_,P,N,z,V,Y,J){const ne=this.length;return this.resize(ne+1),this.emplace(ne,u,m,_,P,N,z,V,Y,J)}emplace(u,m,_,P,N,z,V,Y,J,ne){const ae=10*u,ye=5*u;return this.int16[ae+0]=m,this.int16[ae+1]=_,this.int16[ae+2]=P,this.int16[ae+3]=N,this.int16[ae+4]=z,this.int16[ae+5]=V,this.uint32[ye+3]=Y,this.uint16[ae+8]=J,this.uint16[ae+9]=ne,u}}d.prototype.bytesPerElement=20,wn("StructArrayLayout6i1ul2ui20",d);class y extends Ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,m,_,P,N,z){const V=this.length;return this.resize(V+1),this.emplace(V,u,m,_,P,N,z)}emplace(u,m,_,P,N,z,V){const Y=6*u;return this.int16[Y+0]=m,this.int16[Y+1]=_,this.int16[Y+2]=P,this.int16[Y+3]=N,this.int16[Y+4]=z,this.int16[Y+5]=V,u}}y.prototype.bytesPerElement=12,wn("StructArrayLayout2i2i2i12",y);class A extends Ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,m,_,P,N){const z=this.length;return this.resize(z+1),this.emplace(z,u,m,_,P,N)}emplace(u,m,_,P,N,z){const V=4*u,Y=8*u;return this.float32[V+0]=m,this.float32[V+1]=_,this.float32[V+2]=P,this.int16[Y+6]=N,this.int16[Y+7]=z,u}}A.prototype.bytesPerElement=16,wn("StructArrayLayout2f1f2i16",A);class k extends Ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,m,_,P){const N=this.length;return this.resize(N+1),this.emplace(N,u,m,_,P)}emplace(u,m,_,P,N){const z=12*u,V=3*u;return this.uint8[z+0]=m,this.uint8[z+1]=_,this.float32[V+1]=P,this.float32[V+2]=N,u}}k.prototype.bytesPerElement=12,wn("StructArrayLayout2ub2f12",k);class D extends Ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,m,_){const P=this.length;return this.resize(P+1),this.emplace(P,u,m,_)}emplace(u,m,_,P){const N=3*u;return this.uint16[N+0]=m,this.uint16[N+1]=_,this.uint16[N+2]=P,u}}D.prototype.bytesPerElement=6,wn("StructArrayLayout3ui6",D);class H extends Ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,m,_,P,N,z,V,Y,J,ne,ae,ye,Se,Ee,De,He,Ye){const pt=this.length;return this.resize(pt+1),this.emplace(pt,u,m,_,P,N,z,V,Y,J,ne,ae,ye,Se,Ee,De,He,Ye)}emplace(u,m,_,P,N,z,V,Y,J,ne,ae,ye,Se,Ee,De,He,Ye,pt){const nt=24*u,xt=12*u,kt=48*u;return this.int16[nt+0]=m,this.int16[nt+1]=_,this.uint16[nt+2]=P,this.uint16[nt+3]=N,this.uint32[xt+2]=z,this.uint32[xt+3]=V,this.uint32[xt+4]=Y,this.uint16[nt+10]=J,this.uint16[nt+11]=ne,this.uint16[nt+12]=ae,this.float32[xt+7]=ye,this.float32[xt+8]=Se,this.uint8[kt+36]=Ee,this.uint8[kt+37]=De,this.uint8[kt+38]=He,this.uint32[xt+10]=Ye,this.int16[nt+22]=pt,u}}H.prototype.bytesPerElement=48,wn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",H);class G extends Ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,m,_,P,N,z,V,Y,J,ne,ae,ye,Se,Ee,De,He,Ye,pt,nt,xt,kt,Yt,bn,zn,_n,vn,fn,Pn){const mn=this.length;return this.resize(mn+1),this.emplace(mn,u,m,_,P,N,z,V,Y,J,ne,ae,ye,Se,Ee,De,He,Ye,pt,nt,xt,kt,Yt,bn,zn,_n,vn,fn,Pn)}emplace(u,m,_,P,N,z,V,Y,J,ne,ae,ye,Se,Ee,De,He,Ye,pt,nt,xt,kt,Yt,bn,zn,_n,vn,fn,Pn,mn){const rn=32*u,Qn=16*u;return this.int16[rn+0]=m,this.int16[rn+1]=_,this.int16[rn+2]=P,this.int16[rn+3]=N,this.int16[rn+4]=z,this.int16[rn+5]=V,this.int16[rn+6]=Y,this.int16[rn+7]=J,this.uint16[rn+8]=ne,this.uint16[rn+9]=ae,this.uint16[rn+10]=ye,this.uint16[rn+11]=Se,this.uint16[rn+12]=Ee,this.uint16[rn+13]=De,this.uint16[rn+14]=He,this.uint16[rn+15]=Ye,this.uint16[rn+16]=pt,this.uint16[rn+17]=nt,this.uint16[rn+18]=xt,this.uint16[rn+19]=kt,this.uint16[rn+20]=Yt,this.uint16[rn+21]=bn,this.uint16[rn+22]=zn,this.uint32[Qn+12]=_n,this.float32[Qn+13]=vn,this.float32[Qn+14]=fn,this.uint16[rn+30]=Pn,this.uint16[rn+31]=mn,u}}G.prototype.bytesPerElement=64,wn("StructArrayLayout8i15ui1ul2f2ui64",G);class K extends Ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u){const m=this.length;return this.resize(m+1),this.emplace(m,u)}emplace(u,m){return this.float32[1*u+0]=m,u}}K.prototype.bytesPerElement=4,wn("StructArrayLayout1f4",K);class ee extends Ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,m,_){const P=this.length;return this.resize(P+1),this.emplace(P,u,m,_)}emplace(u,m,_,P){const N=3*u;return this.uint16[6*u+0]=m,this.float32[N+1]=_,this.float32[N+2]=P,u}}ee.prototype.bytesPerElement=12,wn("StructArrayLayout1ui2f12",ee);class re extends Ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,m,_){const P=this.length;return this.resize(P+1),this.emplace(P,u,m,_)}emplace(u,m,_,P){const N=4*u;return this.uint32[2*u+0]=m,this.uint16[N+2]=_,this.uint16[N+3]=P,u}}re.prototype.bytesPerElement=8,wn("StructArrayLayout1ul2ui8",re);class se extends Ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,m){const _=this.length;return this.resize(_+1),this.emplace(_,u,m)}emplace(u,m,_){const P=2*u;return this.uint16[P+0]=m,this.uint16[P+1]=_,u}}se.prototype.bytesPerElement=4,wn("StructArrayLayout2ui4",se);class be extends Ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u){const m=this.length;return this.resize(m+1),this.emplace(m,u)}emplace(u,m){return this.uint16[1*u+0]=m,u}}be.prototype.bytesPerElement=2,wn("StructArrayLayout1ui2",be);class Le extends Ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,m,_,P){const N=this.length;return this.resize(N+1),this.emplace(N,u,m,_,P)}emplace(u,m,_,P,N){const z=4*u;return this.float32[z+0]=m,this.float32[z+1]=_,this.float32[z+2]=P,this.float32[z+3]=N,u}}Le.prototype.bytesPerElement=16,wn("StructArrayLayout4f16",Le);class Re extends Cl{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new g(this.anchorPointX,this.anchorPointY)}}Re.prototype.size=20;class $e extends d{get(u){return new Re(this,u)}}wn("CollisionBoxArray",$e);class ke extends Cl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(u){this._structArray.uint8[this._pos1+37]=u}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(u){this._structArray.uint8[this._pos1+38]=u}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(u){this._structArray.uint32[this._pos4+10]=u}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ke.prototype.size=48;class at extends H{get(u){return new ke(this,u)}}wn("PlacedSymbolArray",at);class Mt extends Cl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(u){this._structArray.uint32[this._pos4+12]=u}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Mt.prototype.size=64;class Ge extends G{get(u){return new Mt(this,u)}}wn("SymbolInstanceArray",Ge);class ft extends K{getoffsetX(u){return this.float32[1*u+0]}}wn("GlyphOffsetArray",ft);class At extends Fc{getx(u){return this.int16[3*u+0]}gety(u){return this.int16[3*u+1]}gettileUnitDistanceFromAnchor(u){return this.int16[3*u+2]}}wn("SymbolLineVertexArray",At);class Pt extends Cl{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Pt.prototype.size=12;class qt extends ee{get(u){return new Pt(this,u)}}wn("TextAnchorOffsetArray",qt);class wt extends Cl{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}wt.prototype.size=8;class Xt extends re{get(u){return new wt(this,u)}}wn("FeatureIndexArray",Xt);class ln extends jf{}class In extends jf{}class Pr extends jf{}class dn extends Ky{}class Zn extends Zy{}class Rn extends Yo{}class Qr extends cs{}class Er extends zm{}class vr extends Hr{}class Tr extends L{}class ro extends y{}class mi extends k{}class Bo extends D{}class yo extends se{}const lo=Ci([{name:"a_pos",components:2,type:"Int16"}],4),{members:Gs}=lo;class li{constructor(u=[]){this.segments=u}prepareSegment(u,m,_,P){let N=this.segments[this.segments.length-1];return u>li.MAX_VERTEX_ARRAY_LENGTH&&ie(`Max vertices per segment is ${li.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${u}`),(!N||N.vertexLength+u>li.MAX_VERTEX_ARRAY_LENGTH||N.sortKey!==P)&&(N={vertexOffset:m.length,primitiveOffset:_.length,vertexLength:0,primitiveLength:0},P!==void 0&&(N.sortKey=P),this.segments.push(N)),N}get(){return this.segments}destroy(){for(const u of this.segments)for(const m in u.vaos)u.vaos[m].destroy()}static simpleSegment(u,m,_,P){return new li([{vertexOffset:u,primitiveOffset:m,vertexLength:_,primitiveLength:P,vaos:{},sortKey:0}])}}function lc(f,u){return 256*(f=O(Math.floor(f),0,255))+O(Math.floor(u),0,255)}li.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,wn("SegmentVector",li);const cc=Ci([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Bc={exports:{}},Nu={exports:{}};Nu.exports=function(f,u){var m,_,P,N,z,V,Y,J;for(_=f.length-(m=3&f.length),P=u,z=3432918353,V=461845907,J=0;J<_;)Y=255&f.charCodeAt(J)|(255&f.charCodeAt(++J))<<8|(255&f.charCodeAt(++J))<<16|(255&f.charCodeAt(++J))<<24,++J,P=27492+(65535&(N=5*(65535&(P=(P^=Y=(65535&(Y=(Y=(65535&Y)*z+(((Y>>>16)*z&65535)<<16)&4294967295)<<15|Y>>>17))*V+(((Y>>>16)*V&65535)<<16)&4294967295)<<13|P>>>19))+((5*(P>>>16)&65535)<<16)&4294967295))+((58964+(N>>>16)&65535)<<16);switch(Y=0,m){case 3:Y^=(255&f.charCodeAt(J+2))<<16;case 2:Y^=(255&f.charCodeAt(J+1))<<8;case 1:P^=Y=(65535&(Y=(Y=(65535&(Y^=255&f.charCodeAt(J)))*z+(((Y>>>16)*z&65535)<<16)&4294967295)<<15|Y>>>17))*V+(((Y>>>16)*V&65535)<<16)&4294967295}return P^=f.length,P=2246822507*(65535&(P^=P>>>16))+((2246822507*(P>>>16)&65535)<<16)&4294967295,P=3266489909*(65535&(P^=P>>>13))+((3266489909*(P>>>16)&65535)<<16)&4294967295,(P^=P>>>16)>>>0};var Dd=Nu.exports,us={exports:{}};us.exports=function(f,u){for(var m,_=f.length,P=u^_,N=0;_>=4;)m=1540483477*(65535&(m=255&f.charCodeAt(N)|(255&f.charCodeAt(++N))<<8|(255&f.charCodeAt(++N))<<16|(255&f.charCodeAt(++N))<<24))+((1540483477*(m>>>16)&65535)<<16),P=1540483477*(65535&P)+((1540483477*(P>>>16)&65535)<<16)^(m=1540483477*(65535&(m^=m>>>24))+((1540483477*(m>>>16)&65535)<<16)),_-=4,++N;switch(_){case 3:P^=(255&f.charCodeAt(N+2))<<16;case 2:P^=(255&f.charCodeAt(N+1))<<8;case 1:P=1540483477*(65535&(P^=255&f.charCodeAt(N)))+((1540483477*(P>>>16)&65535)<<16)}return P=1540483477*(65535&(P^=P>>>13))+((1540483477*(P>>>16)&65535)<<16),(P^=P>>>15)>>>0};var Co=Dd,Xo=us.exports;Bc.exports=Co,Bc.exports.murmur3=Co,Bc.exports.murmur2=Xo;var uc=c(Bc.exports);class Di{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(u,m,_,P){this.ids.push(co(u)),this.positions.push(m,_,P)}getPositions(u){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const m=co(u);let _=0,P=this.ids.length-1;for(;_<P;){const z=_+P>>1;this.ids[z]>=m?P=z:_=z+1}const N=[];for(;this.ids[_]===m;)N.push({index:this.positions[3*_],start:this.positions[3*_+1],end:this.positions[3*_+2]}),_++;return N}static serialize(u,m){const _=new Float64Array(u.ids),P=new Uint32Array(u.positions);return Ko(_,P,0,_.length-1),m&&m.push(_.buffer,P.buffer),{ids:_,positions:P}}static deserialize(u){const m=new Di;return m.ids=u.ids,m.positions=u.positions,m.indexed=!0,m}}function co(f){const u=+f;return!isNaN(u)&&u<=Number.MAX_SAFE_INTEGER?u:uc(String(f))}function Ko(f,u,m,_){for(;m<_;){const P=f[m+_>>1];let N=m-1,z=_+1;for(;;){do N++;while(f[N]<P);do z--;while(f[z]>P);if(N>=z)break;qi(f,N,z),qi(u,3*N,3*z),qi(u,3*N+1,3*z+1),qi(u,3*N+2,3*z+2)}z-m<_-z?(Ko(f,u,m,z),m=z+1):(Ko(f,u,z+1,_),_=z)}}function qi(f,u,m){const _=f[u];f[u]=f[m],f[m]=_}wn("FeaturePositionMap",Di);class $c{constructor(u,m){this.gl=u.gl,this.location=m}}class Uf extends $c{constructor(u,m){super(u,m),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class Jy extends $c{constructor(u,m){super(u,m),this.current=[0,0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3]))}}class Fm extends $c{constructor(u,m){super(u,m),this.current=ar.transparent}set(u){u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a))}}const q1=new Float32Array(16);function Vf(f){return[lc(255*f.r,255*f.g),lc(255*f.b,255*f.a)]}class qa{constructor(u,m,_){this.value=u,this.uniformNames=m.map(P=>`u_${P}`),this.type=_}setUniform(u,m,_){u.set(_.constantOr(this.value))}getBinding(u,m,_){return this.type==="color"?new Fm(u,m):new Uf(u,m)}}class Ai{constructor(u,m){this.uniformNames=m.map(_=>`u_${_}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(u,m){this.pixelRatioFrom=m.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=m.tlbr,this.patternTo=u.tlbr}setUniform(u,m,_,P){const N=P==="u_pattern_to"?this.patternTo:P==="u_pattern_from"?this.patternFrom:P==="u_pixel_ratio_to"?this.pixelRatioTo:P==="u_pixel_ratio_from"?this.pixelRatioFrom:null;N&&u.set(N)}getBinding(u,m,_){return _.substr(0,9)==="u_pattern"?new Jy(u,m):new Uf(u,m)}}class gr{constructor(u,m,_,P){this.expression=u,this.type=_,this.maxValue=0,this.paintVertexAttributes=m.map(N=>({name:`a_${N}`,type:"Float32",components:_==="color"?2:1,offset:0})),this.paintVertexArray=new P}populatePaintArray(u,m,_,P,N){const z=this.paintVertexArray.length,V=this.expression.evaluate(new Ei(0),m,{},P,[],N);this.paintVertexArray.resize(u),this._setPaintValue(z,u,V)}updatePaintArray(u,m,_,P){const N=this.expression.evaluate({zoom:0},_,P);this._setPaintValue(u,m,N)}_setPaintValue(u,m,_){if(this.type==="color"){const P=Vf(_);for(let N=u;N<m;N++)this.paintVertexArray.emplace(N,P[0],P[1])}else{for(let P=u;P<m;P++)this.paintVertexArray.emplace(P,_);this.maxValue=Math.max(this.maxValue,Math.abs(_))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ei{constructor(u,m,_,P,N,z){this.expression=u,this.uniformNames=m.map(V=>`u_${V}_t`),this.type=_,this.useIntegerZoom=P,this.zoom=N,this.maxValue=0,this.paintVertexAttributes=m.map(V=>({name:`a_${V}`,type:"Float32",components:_==="color"?4:2,offset:0})),this.paintVertexArray=new z}populatePaintArray(u,m,_,P,N){const z=this.expression.evaluate(new Ei(this.zoom),m,{},P,[],N),V=this.expression.evaluate(new Ei(this.zoom+1),m,{},P,[],N),Y=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(Y,u,z,V)}updatePaintArray(u,m,_,P){const N=this.expression.evaluate({zoom:this.zoom},_,P),z=this.expression.evaluate({zoom:this.zoom+1},_,P);this._setPaintValue(u,m,N,z)}_setPaintValue(u,m,_,P){if(this.type==="color"){const N=Vf(_),z=Vf(P);for(let V=u;V<m;V++)this.paintVertexArray.emplace(V,N[0],N[1],z[0],z[1])}else{for(let N=u;N<m;N++)this.paintVertexArray.emplace(N,_,P);this.maxValue=Math.max(this.maxValue,Math.abs(_),Math.abs(P))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(u,m){const _=this.useIntegerZoom?Math.floor(m.zoom):m.zoom,P=O(this.expression.interpolationFactor(_,this.zoom,this.zoom+1),0,1);u.set(P)}getBinding(u,m,_){return new Uf(u,m)}}class ci{constructor(u,m,_,P,N,z){this.expression=u,this.type=m,this.useIntegerZoom=_,this.zoom=P,this.layerId=z,this.zoomInPaintVertexArray=new N,this.zoomOutPaintVertexArray=new N}populatePaintArray(u,m,_){const P=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(P,u,m.patterns&&m.patterns[this.layerId],_)}updatePaintArray(u,m,_,P,N){this._setPaintValues(u,m,_.patterns&&_.patterns[this.layerId],N)}_setPaintValues(u,m,_,P){if(!P||!_)return;const{min:N,mid:z,max:V}=_,Y=P[N],J=P[z],ne=P[V];if(Y&&J&&ne)for(let ae=u;ae<m;ae++)this.zoomInPaintVertexArray.emplace(ae,J.tl[0],J.tl[1],J.br[0],J.br[1],Y.tl[0],Y.tl[1],Y.br[0],Y.br[1],J.pixelRatio,Y.pixelRatio),this.zoomOutPaintVertexArray.emplace(ae,J.tl[0],J.tl[1],J.br[0],J.br[1],ne.tl[0],ne.tl[1],ne.br[0],ne.br[1],J.pixelRatio,ne.pixelRatio)}upload(u){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,cc.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,cc.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class $o{constructor(u,m,_){this.binders={},this._buffers=[];const P=[];for(const N in u.paint._values){if(!_(N))continue;const z=u.paint.get(N);if(!(z instanceof Hs&&Oc(z.property.specification)))continue;const V=Bm(N,u.type),Y=z.value,J=z.property.specification.type,ne=z.property.useIntegerZoom,ae=z.property.specification["property-type"],ye=ae==="cross-faded"||ae==="cross-faded-data-driven";if(Y.kind==="constant")this.binders[N]=ye?new Ai(Y.value,V):new qa(Y.value,V,J),P.push(`/u_${N}`);else if(Y.kind==="source"||ye){const Se=Zo(N,J,"source");this.binders[N]=ye?new ci(Y,J,ne,m,Se,u.id):new gr(Y,V,J,Se),P.push(`/a_${N}`)}else{const Se=Zo(N,J,"composite");this.binders[N]=new ei(Y,V,J,ne,m,Se),P.push(`/z_${N}`)}}this.cacheKey=P.sort().join("")}getMaxValue(u){const m=this.binders[u];return m instanceof gr||m instanceof ei?m.maxValue:0}populatePaintArrays(u,m,_,P,N){for(const z in this.binders){const V=this.binders[z];(V instanceof gr||V instanceof ei||V instanceof ci)&&V.populatePaintArray(u,m,_,P,N)}}setConstantPatternPositions(u,m){for(const _ in this.binders){const P=this.binders[_];P instanceof Ai&&P.setConstantPatternPositions(u,m)}}updatePaintArrays(u,m,_,P,N){let z=!1;for(const V in u){const Y=m.getPositions(V);for(const J of Y){const ne=_.feature(J.index);for(const ae in this.binders){const ye=this.binders[ae];if((ye instanceof gr||ye instanceof ei||ye instanceof ci)&&ye.expression.isStateDependent===!0){const Se=P.paint.get(ae);ye.expression=Se.value,ye.updatePaintArray(J.start,J.end,ne,u[V],N),z=!0}}}}return z}defines(){const u=[];for(const m in this.binders){const _=this.binders[m];(_ instanceof qa||_ instanceof Ai)&&u.push(..._.uniformNames.map(P=>`#define HAS_UNIFORM_${P}`))}return u}getBinderAttributes(){const u=[];for(const m in this.binders){const _=this.binders[m];if(_ instanceof gr||_ instanceof ei)for(let P=0;P<_.paintVertexAttributes.length;P++)u.push(_.paintVertexAttributes[P].name);else if(_ instanceof ci)for(let P=0;P<cc.members.length;P++)u.push(cc.members[P].name)}return u}getBinderUniforms(){const u=[];for(const m in this.binders){const _=this.binders[m];if(_ instanceof qa||_ instanceof Ai||_ instanceof ei)for(const P of _.uniformNames)u.push(P)}return u}getPaintVertexBuffers(){return this._buffers}getUniforms(u,m){const _=[];for(const P in this.binders){const N=this.binders[P];if(N instanceof qa||N instanceof Ai||N instanceof ei){for(const z of N.uniformNames)if(m[z]){const V=N.getBinding(u,m[z],z);_.push({name:z,property:P,binding:V})}}}return _}setUniforms(u,m,_,P){for(const{name:N,property:z,binding:V}of m)this.binders[z].setUniform(V,P,_.get(z),N)}updatePaintBuffers(u){this._buffers=[];for(const m in this.binders){const _=this.binders[m];if(u&&_ instanceof ci){const P=u.fromScale===2?_.zoomInPaintVertexBuffer:_.zoomOutPaintVertexBuffer;P&&this._buffers.push(P)}else(_ instanceof gr||_ instanceof ei)&&_.paintVertexBuffer&&this._buffers.push(_.paintVertexBuffer)}}upload(u){for(const m in this.binders){const _=this.binders[m];(_ instanceof gr||_ instanceof ei||_ instanceof ci)&&_.upload(u)}this.updatePaintBuffers()}destroy(){for(const u in this.binders){const m=this.binders[u];(m instanceof gr||m instanceof ei||m instanceof ci)&&m.destroy()}}}class vo{constructor(u,m,_=()=>!0){this.programConfigurations={};for(const P of u)this.programConfigurations[P.id]=new $o(P,m,_);this.needsUpload=!1,this._featureMap=new Di,this._bufferOffset=0}populatePaintArrays(u,m,_,P,N,z){for(const V in this.programConfigurations)this.programConfigurations[V].populatePaintArrays(u,m,P,N,z);m.id!==void 0&&this._featureMap.add(m.id,_,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0}updatePaintArrays(u,m,_,P){for(const N of _)this.needsUpload=this.programConfigurations[N.id].updatePaintArrays(u,this._featureMap,m,N,P)||this.needsUpload}get(u){return this.programConfigurations[u]}upload(u){if(this.needsUpload){for(const m in this.programConfigurations)this.programConfigurations[m].upload(u);this.needsUpload=!1}}destroy(){for(const u in this.programConfigurations)this.programConfigurations[u].destroy()}}function Bm(f,u){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[f]||[f.replace(`${u}-`,"").replace(/-/g,"_")]}function Zo(f,u,m){const _={color:{source:Yo,composite:Le},number:{source:K,composite:Yo}},P=function(N){return{"line-pattern":{source:Qr,composite:Qr},"fill-pattern":{source:Qr,composite:Qr},"fill-extrusion-pattern":{source:Qr,composite:Qr}}[N]}(f);return P&&P[m]||_[u][m]}wn("ConstantBinder",qa),wn("CrossFadedConstantBinder",Ai),wn("SourceExpressionBinder",gr),wn("CrossFadedCompositeBinder",ci),wn("CompositeExpressionBinder",ei),wn("ProgramConfiguration",$o,{omit:["_buffers"]}),wn("ProgramConfigurationSet",vo);const Yi=8192,Wf=Math.pow(2,14)-1,Qy=-Wf-1;function Nd(f){const u=Yi/f.extent,m=f.loadGeometry();for(let _=0;_<m.length;_++){const P=m[_];for(let N=0;N<P.length;N++){const z=P[N],V=Math.round(z.x*u),Y=Math.round(z.y*u);z.x=O(V,Qy,Wf),z.y=O(Y,Qy,Wf),(V<z.x||V>z.x+1||Y<z.y||Y>z.y+1)&&ie("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return m}function jc(f,u){return{type:f.type,id:f.id,properties:f.properties,geometry:u?Nd(f):[]}}function qs(f,u,m,_,P){f.emplaceBack(2*u+(_+1)/2,2*m+(P+1)/2)}class ev{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(m=>m.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new In,this.indexArray=new Bo,this.segments=new li,this.programConfigurations=new vo(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id)}populate(u,m,_){const P=this.layers[0],N=[];let z=null,V=!1;P.type==="circle"&&(z=P.layout.get("circle-sort-key"),V=!z.isConstant());for(const{feature:Y,id:J,index:ne,sourceLayerIndex:ae}of u){const ye=this.layers[0]._featureFilter.needGeometry,Se=jc(Y,ye);if(!this.layers[0]._featureFilter.filter(new Ei(this.zoom),Se,_))continue;const Ee=V?z.evaluate(Se,{},_):void 0,De={id:J,properties:Y.properties,type:Y.type,sourceLayerIndex:ae,index:ne,geometry:ye?Se.geometry:Nd(Y),patterns:{},sortKey:Ee};N.push(De)}V&&N.sort((Y,J)=>Y.sortKey-J.sortKey);for(const Y of N){const{geometry:J,index:ne,sourceLayerIndex:ae}=Y,ye=u[ne].feature;this.addFeature(Y,J,ne,_),m.featureIndex.insert(ye,J,ne,ae,this.index)}}update(u,m,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,m,this.stateDependentLayers,_)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Gs),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(u,m,_,P){for(const N of m)for(const z of N){const V=z.x,Y=z.y;if(V<0||V>=Yi||Y<0||Y>=Yi)continue;const J=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,u.sortKey),ne=J.vertexLength;qs(this.layoutVertexArray,V,Y,-1,-1),qs(this.layoutVertexArray,V,Y,1,-1),qs(this.layoutVertexArray,V,Y,1,1),qs(this.layoutVertexArray,V,Y,-1,1),this.indexArray.emplaceBack(ne,ne+1,ne+2),this.indexArray.emplaceBack(ne,ne+3,ne+2),J.vertexLength+=4,J.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,_,{},P)}}function rx(f,u){for(let m=0;m<f.length;m++)if(Hf(u,f[m]))return!0;for(let m=0;m<u.length;m++)if(Hf(f,u[m]))return!0;return!!zu(f,u)}function $m(f,u,m){return!!Hf(f,u)||!!Fu(u,f,m)}function tv(f,u){if(f.length===1)return jm(u,f[0]);for(let m=0;m<u.length;m++){const _=u[m];for(let P=0;P<_.length;P++)if(Hf(f,_[P]))return!0}for(let m=0;m<f.length;m++)if(jm(u,f[m]))return!0;for(let m=0;m<u.length;m++)if(zu(f,u[m]))return!0;return!1}function Y1(f,u,m){if(f.length>1){if(zu(f,u))return!0;for(let _=0;_<u.length;_++)if(Fu(u[_],f,m))return!0}for(let _=0;_<f.length;_++)if(Fu(f[_],u,m))return!0;return!1}function zu(f,u){if(f.length===0||u.length===0)return!1;for(let m=0;m<f.length-1;m++){const _=f[m],P=f[m+1];for(let N=0;N<u.length-1;N++)if(ix(_,P,u[N],u[N+1]))return!0}return!1}function ix(f,u,m,_){return ce(f,m,_)!==ce(u,m,_)&&ce(f,u,m)!==ce(f,u,_)}function Fu(f,u,m){const _=m*m;if(u.length===1)return f.distSqr(u[0])<_;for(let P=1;P<u.length;P++)if(nv(f,u[P-1],u[P])<_)return!0;return!1}function nv(f,u,m){const _=u.distSqr(m);if(_===0)return f.distSqr(u);const P=((f.x-u.x)*(m.x-u.x)+(f.y-u.y)*(m.y-u.y))/_;return f.distSqr(P<0?u:P>1?m:m.sub(u)._mult(P)._add(u))}function jm(f,u){let m,_,P,N=!1;for(let z=0;z<f.length;z++){m=f[z];for(let V=0,Y=m.length-1;V<m.length;Y=V++)_=m[V],P=m[Y],_.y>u.y!=P.y>u.y&&u.x<(P.x-_.x)*(u.y-_.y)/(P.y-_.y)+_.x&&(N=!N)}return N}function Hf(f,u){let m=!1;for(let _=0,P=f.length-1;_<f.length;P=_++){const N=f[_],z=f[P];N.y>u.y!=z.y>u.y&&u.x<(z.x-N.x)*(u.y-N.y)/(z.y-N.y)+N.x&&(m=!m)}return m}function ox(f,u,m){const _=m[0],P=m[2];if(f.x<_.x&&u.x<_.x||f.x>P.x&&u.x>P.x||f.y<_.y&&u.y<_.y||f.y>P.y&&u.y>P.y)return!1;const N=ce(f,u,m[0]);return N!==ce(f,u,m[1])||N!==ce(f,u,m[2])||N!==ce(f,u,m[3])}function Gf(f,u,m){const _=u.paint.get(f).value;return _.kind==="constant"?_.value:m.programConfigurations.get(u.id).getMaxValue(f)}function As(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function Uc(f,u,m,_,P){if(!u[0]&&!u[1])return f;const N=g.convert(u)._mult(P);m==="viewport"&&N._rotate(-_);const z=[];for(let V=0;V<f.length;V++)z.push(f[V].sub(N));return z}let Al,rv;wn("CircleBucket",ev,{omit:["layers"]});var Ya={get paint(){return rv=rv||new so({"circle-radius":new nr(Je.paint_circle["circle-radius"]),"circle-color":new nr(Je.paint_circle["circle-color"]),"circle-blur":new nr(Je.paint_circle["circle-blur"]),"circle-opacity":new nr(Je.paint_circle["circle-opacity"]),"circle-translate":new Nn(Je.paint_circle["circle-translate"]),"circle-translate-anchor":new Nn(Je.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Nn(Je.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Nn(Je.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new nr(Je.paint_circle["circle-stroke-width"]),"circle-stroke-color":new nr(Je.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new nr(Je.paint_circle["circle-stroke-opacity"])})},get layout(){return Al=Al||new so({"circle-sort-key":new nr(Je.layout_circle["circle-sort-key"])})}},Ys=1e-6,qf=typeof Float32Array<"u"?Float32Array:Array;function iv(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function qE(f,u,m){var _=u[0],P=u[1],N=u[2],z=u[3],V=u[4],Y=u[5],J=u[6],ne=u[7],ae=u[8],ye=u[9],Se=u[10],Ee=u[11],De=u[12],He=u[13],Ye=u[14],pt=u[15],nt=m[0],xt=m[1],kt=m[2],Yt=m[3];return f[0]=nt*_+xt*V+kt*ae+Yt*De,f[1]=nt*P+xt*Y+kt*ye+Yt*He,f[2]=nt*N+xt*J+kt*Se+Yt*Ye,f[3]=nt*z+xt*ne+kt*Ee+Yt*pt,f[4]=(nt=m[4])*_+(xt=m[5])*V+(kt=m[6])*ae+(Yt=m[7])*De,f[5]=nt*P+xt*Y+kt*ye+Yt*He,f[6]=nt*N+xt*J+kt*Se+Yt*Ye,f[7]=nt*z+xt*ne+kt*Ee+Yt*pt,f[8]=(nt=m[8])*_+(xt=m[9])*V+(kt=m[10])*ae+(Yt=m[11])*De,f[9]=nt*P+xt*Y+kt*ye+Yt*He,f[10]=nt*N+xt*J+kt*Se+Yt*Ye,f[11]=nt*z+xt*ne+kt*Ee+Yt*pt,f[12]=(nt=m[12])*_+(xt=m[13])*V+(kt=m[14])*ae+(Yt=m[15])*De,f[13]=nt*P+xt*Y+kt*ye+Yt*He,f[14]=nt*N+xt*J+kt*Se+Yt*Ye,f[15]=nt*z+xt*ne+kt*Ee+Yt*pt,f}Math.hypot||(Math.hypot=function(){for(var f=0,u=arguments.length;u--;)f+=arguments[u]*arguments[u];return Math.sqrt(f)});var dc,YE=qE;function ov(f,u,m){var _=u[0],P=u[1],N=u[2],z=u[3];return f[0]=m[0]*_+m[4]*P+m[8]*N+m[12]*z,f[1]=m[1]*_+m[5]*P+m[9]*N+m[13]*z,f[2]=m[2]*_+m[6]*P+m[10]*N+m[14]*z,f[3]=m[3]*_+m[7]*P+m[11]*N+m[15]*z,f}dc=new qf(4),qf!=Float32Array&&(dc[0]=0,dc[1]=0,dc[2]=0,dc[3]=0);class X1 extends go{constructor(u){super(u,Ya)}createBucket(u){return new ev(u)}queryRadius(u){const m=u;return Gf("circle-radius",this,m)+Gf("circle-stroke-width",this,m)+As(this.paint.get("circle-translate"))}queryIntersectsFeature(u,m,_,P,N,z,V,Y){const J=Uc(u,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),z.angle,V),ne=this.paint.get("circle-radius").evaluate(m,_)+this.paint.get("circle-stroke-width").evaluate(m,_),ae=this.paint.get("circle-pitch-alignment")==="map",ye=ae?J:function(Ee,De){return Ee.map(He=>Yf(He,De))}(J,Y),Se=ae?ne*V:ne;for(const Ee of P)for(const De of Ee){const He=ae?De:Yf(De,Y);let Ye=Se;const pt=ov([],[De.x,De.y,0,1],Y);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ye*=pt[3]/z.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ye*=z.cameraToCenterDistance/pt[3]),$m(ye,He,Ye))return!0}return!1}}function Yf(f,u){const m=ov([],[f.x,f.y,0,1],u);return new g(m[0]/m[3],m[1]/m[3])}class K1 extends ev{}let Z1;wn("HeatmapBucket",K1,{omit:["layers"]});var J1={get paint(){return Z1=Z1||new so({"heatmap-radius":new nr(Je.paint_heatmap["heatmap-radius"]),"heatmap-weight":new nr(Je.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Nn(Je.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Dm(Je.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Nn(Je.paint_heatmap["heatmap-opacity"])})}};function Um(f,{width:u,height:m},_,P){if(P){if(P instanceof Uint8ClampedArray)P=new Uint8Array(P.buffer);else if(P.length!==u*m*_)throw new RangeError(`mismatched image size. expected: ${P.length} but got: ${u*m*_}`)}else P=new Uint8Array(u*m*_);return f.width=u,f.height=m,f.data=P,f}function XE(f,{width:u,height:m},_){if(u===f.width&&m===f.height)return;const P=Um({},{width:u,height:m},_);Q1(f,P,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,u),height:Math.min(f.height,m)},_),f.width=u,f.height=m,f.data=P.data}function Q1(f,u,m,_,P,N){if(P.width===0||P.height===0)return u;if(P.width>f.width||P.height>f.height||m.x>f.width-P.width||m.y>f.height-P.height)throw new RangeError("out of range source coordinates for image copy");if(P.width>u.width||P.height>u.height||_.x>u.width-P.width||_.y>u.height-P.height)throw new RangeError("out of range destination coordinates for image copy");const z=f.data,V=u.data;if(z===V)throw new Error("srcData equals dstData, so image is already copied");for(let Y=0;Y<P.height;Y++){const J=((m.y+Y)*f.width+m.x)*N,ne=((_.y+Y)*u.width+_.x)*N;for(let ae=0;ae<P.width*N;ae++)V[ne+ae]=z[J+ae]}return u}class Vm{constructor(u,m){Um(this,u,1,m)}resize(u){XE(this,u,1)}clone(){return new Vm({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,m,_,P,N){Q1(u,m,_,P,N,1)}}class Xa{constructor(u,m){Um(this,u,4,m)}resize(u){XE(this,u,4)}replace(u,m){m?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u}clone(){return new Xa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,m,_,P,N){Q1(u,m,_,P,N,4)}}function Xf(f){const u={},m=f.resolution||256,_=f.clips?f.clips.length:1,P=f.image||new Xa({width:m,height:_});if(Math.log(m)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${m}`);const N=(z,V,Y)=>{u[f.evaluationKey]=Y;const J=f.expression.evaluate(u);P.data[z+V+0]=Math.floor(255*J.r/J.a),P.data[z+V+1]=Math.floor(255*J.g/J.a),P.data[z+V+2]=Math.floor(255*J.b/J.a),P.data[z+V+3]=Math.floor(255*J.a)};if(f.clips)for(let z=0,V=0;z<_;++z,V+=4*m)for(let Y=0,J=0;Y<m;Y++,J+=4){const ne=Y/(m-1),{start:ae,end:ye}=f.clips[z];N(V,J,ae*(1-ne)+ye*ne)}else for(let z=0,V=0;z<m;z++,V+=4)N(0,V,z/(m-1));return P}wn("AlphaImage",Vm),wn("RGBAImage",Xa);class cL extends go{createBucket(u){return new K1(u)}constructor(u){super(u,J1),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Xf({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Kf;var KE={get paint(){return Kf=Kf||new so({"hillshade-illumination-direction":new Nn(Je.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Nn(Je.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Nn(Je.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Nn(Je.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Nn(Je.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Nn(Je.paint_hillshade["hillshade-accent-color"])})}};class Ka extends go{constructor(u){super(u,KE)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const uL=Ci([{name:"a_pos",components:2,type:"Int16"}],4),{members:ZE}=uL;var ew={exports:{}};function sx(f,u,m){m=m||2;var _,P,N,z,V,Y,J,ne=u&&u.length,ae=ne?u[0]*m:f.length,ye=tw(f,0,ae,m,!0),Se=[];if(!ye||ye.next===ye.prev)return Se;if(ne&&(ye=function(De,He,Ye,pt){var nt,xt,kt,Yt=[];for(nt=0,xt=He.length;nt<xt;nt++)(kt=tw(De,He[nt]*pt,nt<xt-1?He[nt+1]*pt:De.length,pt,!1))===kt.next&&(kt.steiner=!0),Yt.push(rw(kt));for(Yt.sort(ax),nt=0;nt<Yt.length;nt++)Ye=tp(Yt[nt],Ye);return Ye}(f,u,ye,m)),f.length>80*m){_=N=f[0],P=z=f[1];for(var Ee=m;Ee<ae;Ee+=m)(V=f[Ee])<_&&(_=V),(Y=f[Ee+1])<P&&(P=Y),V>N&&(N=V),Y>z&&(z=Y);J=(J=Math.max(N-_,z-P))!==0?32767/J:0}return sv(ye,Se,m,_,P,J,0),Se}function tw(f,u,m,_,P){var N,z;if(P===Q(f,u,m,_)>0)for(N=u;N<m;N+=_)z=E(N,f[N],f[N+1],z);else for(N=m-_;N>=u;N-=_)z=E(N,f[N],f[N+1],z);return z&&lv(z,z.next)&&($(z),z=z.next),z}function Zf(f,u){if(!f)return f;u||(u=f);var m,_=f;do if(m=!1,_.steiner||!lv(_,_.next)&&uo(_.prev,_,_.next)!==0)_=_.next;else{if($(_),(_=u=_.prev)===_.next)break;m=!0}while(m||_!==u);return u}function sv(f,u,m,_,P,N,z){if(f){!z&&N&&function(ne,ae,ye,Se){var Ee=ne;do Ee.z===0&&(Ee.z=av(Ee.x,Ee.y,ae,ye,Se)),Ee.prevZ=Ee.prev,Ee.nextZ=Ee.next,Ee=Ee.next;while(Ee!==ne);Ee.prevZ.nextZ=null,Ee.prevZ=null,function(De){var He,Ye,pt,nt,xt,kt,Yt,bn,zn=1;do{for(Ye=De,De=null,xt=null,kt=0;Ye;){for(kt++,pt=Ye,Yt=0,He=0;He<zn&&(Yt++,pt=pt.nextZ);He++);for(bn=zn;Yt>0||bn>0&&pt;)Yt!==0&&(bn===0||!pt||Ye.z<=pt.z)?(nt=Ye,Ye=Ye.nextZ,Yt--):(nt=pt,pt=pt.nextZ,bn--),xt?xt.nextZ=nt:De=nt,nt.prevZ=xt,xt=nt;Ye=pt}xt.nextZ=null,zn*=2}while(kt>1)}(Ee)}(f,_,P,N);for(var V,Y,J=f;f.prev!==f.next;)if(V=f.prev,Y=f.next,N?nw(f,_,P,N):fc(f))u.push(V.i/m|0),u.push(f.i/m|0),u.push(Y.i/m|0),$(f),f=Y.next,J=Y.next;else if((f=Y)===J){z?z===1?sv(f=dL(Zf(f),u,m),u,m,_,P,N,2):z===2&&Jf(f,u,m,_,P,N):sv(Zf(f),u,m,_,P,N,1);break}}}function fc(f){var u=f.prev,m=f,_=f.next;if(uo(u,m,_)>=0)return!1;for(var P=u.x,N=m.x,z=_.x,V=u.y,Y=m.y,J=_.y,ne=P<N?P<z?P:z:N<z?N:z,ae=V<Y?V<J?V:J:Y<J?Y:J,ye=P>N?P>z?P:z:N>z?N:z,Se=V>Y?V>J?V:J:Y>J?Y:J,Ee=_.next;Ee!==u;){if(Ee.x>=ne&&Ee.x<=ye&&Ee.y>=ae&&Ee.y<=Se&&Wm(P,V,N,Y,z,J,Ee.x,Ee.y)&&uo(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.next}return!0}function nw(f,u,m,_){var P=f.prev,N=f,z=f.next;if(uo(P,N,z)>=0)return!1;for(var V=P.x,Y=N.x,J=z.x,ne=P.y,ae=N.y,ye=z.y,Se=V<Y?V<J?V:J:Y<J?Y:J,Ee=ne<ae?ne<ye?ne:ye:ae<ye?ae:ye,De=V>Y?V>J?V:J:Y>J?Y:J,He=ne>ae?ne>ye?ne:ye:ae>ye?ae:ye,Ye=av(Se,Ee,u,m,_),pt=av(De,He,u,m,_),nt=f.prevZ,xt=f.nextZ;nt&&nt.z>=Ye&&xt&&xt.z<=pt;){if(nt.x>=Se&&nt.x<=De&&nt.y>=Ee&&nt.y<=He&&nt!==P&&nt!==z&&Wm(V,ne,Y,ae,J,ye,nt.x,nt.y)&&uo(nt.prev,nt,nt.next)>=0||(nt=nt.prevZ,xt.x>=Se&&xt.x<=De&&xt.y>=Ee&&xt.y<=He&&xt!==P&&xt!==z&&Wm(V,ne,Y,ae,J,ye,xt.x,xt.y)&&uo(xt.prev,xt,xt.next)>=0))return!1;xt=xt.nextZ}for(;nt&&nt.z>=Ye;){if(nt.x>=Se&&nt.x<=De&&nt.y>=Ee&&nt.y<=He&&nt!==P&&nt!==z&&Wm(V,ne,Y,ae,J,ye,nt.x,nt.y)&&uo(nt.prev,nt,nt.next)>=0)return!1;nt=nt.prevZ}for(;xt&&xt.z<=pt;){if(xt.x>=Se&&xt.x<=De&&xt.y>=Ee&&xt.y<=He&&xt!==P&&xt!==z&&Wm(V,ne,Y,ae,J,ye,xt.x,xt.y)&&uo(xt.prev,xt,xt.next)>=0)return!1;xt=xt.nextZ}return!0}function dL(f,u,m){var _=f;do{var P=_.prev,N=_.next.next;!lv(P,N)&&iw(P,_,_.next,N)&&cv(P,N)&&cv(N,P)&&(u.push(P.i/m|0),u.push(_.i/m|0),u.push(N.i/m|0),$(_),$(_.next),_=f=N),_=_.next}while(_!==f);return Zf(_)}function Jf(f,u,m,_,P,N){var z=f;do{for(var V=z.next.next;V!==z.prev;){if(z.i!==V.i&&JE(z,V)){var Y=S(z,V);return z=Zf(z,z.next),Y=Zf(Y,Y.next),sv(z,u,m,_,P,N,0),void sv(Y,u,m,_,P,N,0)}V=V.next}z=z.next}while(z!==f)}function ax(f,u){return f.x-u.x}function tp(f,u){var m=function(P,N){var z,V=N,Y=P.x,J=P.y,ne=-1/0;do{if(J<=V.y&&J>=V.next.y&&V.next.y!==V.y){var ae=V.x+(J-V.y)*(V.next.x-V.x)/(V.next.y-V.y);if(ae<=Y&&ae>ne&&(ne=ae,z=V.x<V.next.x?V:V.next,ae===Y))return z}V=V.next}while(V!==N);if(!z)return null;var ye,Se=z,Ee=z.x,De=z.y,He=1/0;V=z;do Y>=V.x&&V.x>=Ee&&Y!==V.x&&Wm(J<De?Y:ne,J,Ee,De,J<De?ne:Y,J,V.x,V.y)&&(ye=Math.abs(J-V.y)/(Y-V.x),cv(V,P)&&(ye<He||ye===He&&(V.x>z.x||V.x===z.x&&lx(z,V)))&&(z=V,He=ye)),V=V.next;while(V!==Se);return z}(f,u);if(!m)return u;var _=S(m,f);return Zf(_,_.next),Zf(m,m.next)}function lx(f,u){return uo(f.prev,f,u.prev)<0&&uo(u.next,f,f.next)<0}function av(f,u,m,_,P){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-m)*P|0)|f<<8))|f<<4))|f<<2))|f<<1))|(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-_)*P|0)|u<<8))|u<<4))|u<<2))|u<<1))<<1}function rw(f){var u=f,m=f;do(u.x<m.x||u.x===m.x&&u.y<m.y)&&(m=u),u=u.next;while(u!==f);return m}function Wm(f,u,m,_,P,N,z,V){return(P-z)*(u-V)>=(f-z)*(N-V)&&(f-z)*(_-V)>=(m-z)*(u-V)&&(m-z)*(N-V)>=(P-z)*(_-V)}function JE(f,u){return f.next.i!==u.i&&f.prev.i!==u.i&&!function(m,_){var P=m;do{if(P.i!==m.i&&P.next.i!==m.i&&P.i!==_.i&&P.next.i!==_.i&&iw(P,P.next,m,_))return!0;P=P.next}while(P!==m);return!1}(f,u)&&(cv(f,u)&&cv(u,f)&&function(m,_){var P=m,N=!1,z=(m.x+_.x)/2,V=(m.y+_.y)/2;do P.y>V!=P.next.y>V&&P.next.y!==P.y&&z<(P.next.x-P.x)*(V-P.y)/(P.next.y-P.y)+P.x&&(N=!N),P=P.next;while(P!==m);return N}(f,u)&&(uo(f.prev,f,u.prev)||uo(f,u.prev,u))||lv(f,u)&&uo(f.prev,f,f.next)>0&&uo(u.prev,u,u.next)>0)}function uo(f,u,m){return(u.y-f.y)*(m.x-u.x)-(u.x-f.x)*(m.y-u.y)}function lv(f,u){return f.x===u.x&&f.y===u.y}function iw(f,u,m,_){var P=cx(uo(f,u,m)),N=cx(uo(f,u,_)),z=cx(uo(m,_,f)),V=cx(uo(m,_,u));return P!==N&&z!==V||!(P!==0||!Hm(f,m,u))||!(N!==0||!Hm(f,_,u))||!(z!==0||!Hm(m,f,_))||!(V!==0||!Hm(m,u,_))}function Hm(f,u,m){return u.x<=Math.max(f.x,m.x)&&u.x>=Math.min(f.x,m.x)&&u.y<=Math.max(f.y,m.y)&&u.y>=Math.min(f.y,m.y)}function cx(f){return f>0?1:f<0?-1:0}function cv(f,u){return uo(f.prev,f,f.next)<0?uo(f,u,f.next)>=0&&uo(f,f.prev,u)>=0:uo(f,u,f.prev)<0||uo(f,f.next,u)<0}function S(f,u){var m=new q(f.i,f.x,f.y),_=new q(u.i,u.x,u.y),P=f.next,N=u.prev;return f.next=u,u.prev=f,m.next=P,P.prev=m,_.next=m,m.prev=_,N.next=_,_.prev=N,_}function E(f,u,m,_){var P=new q(f,u,m);return _?(P.next=_.next,P.prev=_,_.next.prev=P,_.next=P):(P.prev=P,P.next=P),P}function $(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function q(f,u,m){this.i=f,this.x=u,this.y=m,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Q(f,u,m,_){for(var P=0,N=u,z=m-_;N<m;N+=_)P+=(f[z]-f[N])*(f[N+1]+f[z+1]),z=N;return P}ew.exports=sx,ew.exports.default=sx,sx.deviation=function(f,u,m,_){var P=u&&u.length,N=Math.abs(Q(f,0,P?u[0]*m:f.length,m));if(P)for(var z=0,V=u.length;z<V;z++)N-=Math.abs(Q(f,u[z]*m,z<V-1?u[z+1]*m:f.length,m));var Y=0;for(z=0;z<_.length;z+=3){var J=_[z]*m,ne=_[z+1]*m,ae=_[z+2]*m;Y+=Math.abs((f[J]-f[ae])*(f[ne+1]-f[J+1])-(f[J]-f[ne])*(f[ae+1]-f[J+1]))}return N===0&&Y===0?0:Math.abs((Y-N)/N)},sx.flatten=function(f){for(var u=f[0][0].length,m={vertices:[],holes:[],dimensions:u},_=0,P=0;P<f.length;P++){for(var N=0;N<f[P].length;N++)for(var z=0;z<u;z++)m.vertices.push(f[P][N][z]);P>0&&m.holes.push(_+=f[P-1].length)}return m};var ue=c(ew.exports);function We(f,u,m,_,P){_t(f,u,m||0,_||f.length-1,P||yn)}function _t(f,u,m,_,P){for(;_>m;){if(_-m>600){var N=_-m+1,z=u-m+1,V=Math.log(N),Y=.5*Math.exp(2*V/3),J=.5*Math.sqrt(V*Y*(N-Y)/N)*(z-N/2<0?-1:1);_t(f,u,Math.max(m,Math.floor(u-z*Y/N+J)),Math.min(_,Math.floor(u+(N-z)*Y/N+J)),P)}var ne=f[u],ae=m,ye=_;for(Vt(f,m,u),P(f[_],ne)>0&&Vt(f,m,_);ae<ye;){for(Vt(f,ae,ye),ae++,ye--;P(f[ae],ne)<0;)ae++;for(;P(f[ye],ne)>0;)ye--}P(f[m],ne)===0?Vt(f,m,ye):Vt(f,++ye,_),ye<=u&&(m=ye+1),u<=ye&&(_=ye-1)}}function Vt(f,u,m){var _=f[u];f[u]=f[m],f[m]=_}function yn(f,u){return f<u?-1:f>u?1:0}function jn(f,u){const m=f.length;if(m<=1)return[f];const _=[];let P,N;for(let z=0;z<m;z++){const V=fe(f[z]);V!==0&&(f[z].area=Math.abs(V),N===void 0&&(N=V<0),N===V<0?(P&&_.push(P),P=[f[z]]):P.push(f[z]))}if(P&&_.push(P),u>1)for(let z=0;z<_.length;z++)_[z].length<=u||(We(_[z],u,1,_[z].length-1,Cr),_[z]=_[z].slice(0,u));return _}function Cr(f,u){return u.area-f.area}function lr(f,u,m){const _=m.patternDependencies;let P=!1;for(const N of u){const z=N.paint.get(`${f}-pattern`);z.isConstant()||(P=!0);const V=z.constantOr(null);V&&(P=!0,_[V.to]=!0,_[V.from]=!0)}return P}function Pi(f,u,m,_,P){const N=P.patternDependencies;for(const z of u){const V=z.paint.get(`${f}-pattern`).value;if(V.kind!=="constant"){let Y=V.evaluate({zoom:_-1},m,{},P.availableImages),J=V.evaluate({zoom:_},m,{},P.availableImages),ne=V.evaluate({zoom:_+1},m,{},P.availableImages);Y=Y&&Y.name?Y.name:Y,J=J&&J.name?J.name:J,ne=ne&&ne.name?ne.name:ne,N[Y]=!0,N[J]=!0,N[ne]=!0,m.patterns[z.id]={min:Y,mid:J,max:ne}}}return m}class rr{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(m=>m.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Pr,this.indexArray=new Bo,this.indexArray2=new yo,this.programConfigurations=new vo(u.layers,u.zoom),this.segments=new li,this.segments2=new li,this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id)}populate(u,m,_){this.hasPattern=lr("fill",this.layers,m);const P=this.layers[0].layout.get("fill-sort-key"),N=!P.isConstant(),z=[];for(const{feature:V,id:Y,index:J,sourceLayerIndex:ne}of u){const ae=this.layers[0]._featureFilter.needGeometry,ye=jc(V,ae);if(!this.layers[0]._featureFilter.filter(new Ei(this.zoom),ye,_))continue;const Se=N?P.evaluate(ye,{},_,m.availableImages):void 0,Ee={id:Y,properties:V.properties,type:V.type,sourceLayerIndex:ne,index:J,geometry:ae?ye.geometry:Nd(V),patterns:{},sortKey:Se};z.push(Ee)}N&&z.sort((V,Y)=>V.sortKey-Y.sortKey);for(const V of z){const{geometry:Y,index:J,sourceLayerIndex:ne}=V;if(this.hasPattern){const ae=Pi("fill",this.layers,V,this.zoom,m);this.patternFeatures.push(ae)}else this.addFeature(V,Y,J,_,{});m.featureIndex.insert(u[J].feature,Y,J,ne,this.index)}}update(u,m,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,m,this.stateDependentLayers,_)}addFeatures(u,m,_){for(const P of this.patternFeatures)this.addFeature(P,P.geometry,P.index,m,_)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,ZE),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(u,m,_,P,N){for(const z of jn(m,500)){let V=0;for(const Se of z)V+=Se.length;const Y=this.segments.prepareSegment(V,this.layoutVertexArray,this.indexArray),J=Y.vertexLength,ne=[],ae=[];for(const Se of z){if(Se.length===0)continue;Se!==z[0]&&ae.push(ne.length/2);const Ee=this.segments2.prepareSegment(Se.length,this.layoutVertexArray,this.indexArray2),De=Ee.vertexLength;this.layoutVertexArray.emplaceBack(Se[0].x,Se[0].y),this.indexArray2.emplaceBack(De+Se.length-1,De),ne.push(Se[0].x),ne.push(Se[0].y);for(let He=1;He<Se.length;He++)this.layoutVertexArray.emplaceBack(Se[He].x,Se[He].y),this.indexArray2.emplaceBack(De+He-1,De+He),ne.push(Se[He].x),ne.push(Se[He].y);Ee.vertexLength+=Se.length,Ee.primitiveLength+=Se.length}const ye=ue(ne,ae);for(let Se=0;Se<ye.length;Se+=3)this.indexArray.emplaceBack(J+ye[Se],J+ye[Se+1],J+ye[Se+2]);Y.vertexLength+=V,Y.primitiveLength+=ye.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,_,N,P)}}let Xs,Pl;wn("FillBucket",rr,{omit:["layers","patternFeatures"]});var Lt={get paint(){return Pl=Pl||new so({"fill-antialias":new Nn(Je.paint_fill["fill-antialias"]),"fill-opacity":new nr(Je.paint_fill["fill-opacity"]),"fill-color":new nr(Je.paint_fill["fill-color"]),"fill-outline-color":new nr(Je.paint_fill["fill-outline-color"]),"fill-translate":new Nn(Je.paint_fill["fill-translate"]),"fill-translate-anchor":new Nn(Je.paint_fill["fill-translate-anchor"]),"fill-pattern":new $f(Je.paint_fill["fill-pattern"])})},get layout(){return Xs=Xs||new so({"fill-sort-key":new nr(Je.layout_fill["fill-sort-key"])})}};class St extends go{constructor(u){super(u,Lt)}recalculate(u,m){super.recalculate(u,m);const _=this.paint._values["fill-outline-color"];_.value.kind==="constant"&&_.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new rr(u)}queryRadius(){return As(this.paint.get("fill-translate"))}queryIntersectsFeature(u,m,_,P,N,z,V){return tv(Uc(u,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),z.angle,V),P)}isTileClipped(){return!0}}const Ft=Ci([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),On=Ci([{name:"a_centroid",components:2,type:"Int16"}],4),{members:or}=Ft;var br={},Ar=h,ti=xo;function xo(f,u,m,_,P){this.properties={},this.extent=m,this.type=0,this._pbf=f,this._geometry=-1,this._keys=_,this._values=P,f.readFields(ii,this,u)}function ii(f,u,m){f==1?u.id=m.readVarint():f==2?function(_,P){for(var N=_.readVarint()+_.pos;_.pos<N;){var z=P._keys[_.readVarint()],V=P._values[_.readVarint()];P.properties[z]=V}}(m,u):f==3?u.type=m.readVarint():f==4&&(u._geometry=m.pos)}function Qf(f){for(var u,m,_=0,P=0,N=f.length,z=N-1;P<N;z=P++)_+=((m=f[z]).x-(u=f[P]).x)*(u.y+m.y);return _}xo.types=["Unknown","Point","LineString","Polygon"],xo.prototype.loadGeometry=function(){var f=this._pbf;f.pos=this._geometry;for(var u,m=f.readVarint()+f.pos,_=1,P=0,N=0,z=0,V=[];f.pos<m;){if(P<=0){var Y=f.readVarint();_=7&Y,P=Y>>3}if(P--,_===1||_===2)N+=f.readSVarint(),z+=f.readSVarint(),_===1&&(u&&V.push(u),u=[]),u.push(new Ar(N,z));else{if(_!==7)throw new Error("unknown command "+_);u&&u.push(u[0].clone())}}return u&&V.push(u),V},xo.prototype.bbox=function(){var f=this._pbf;f.pos=this._geometry;for(var u=f.readVarint()+f.pos,m=1,_=0,P=0,N=0,z=1/0,V=-1/0,Y=1/0,J=-1/0;f.pos<u;){if(_<=0){var ne=f.readVarint();m=7&ne,_=ne>>3}if(_--,m===1||m===2)(P+=f.readSVarint())<z&&(z=P),P>V&&(V=P),(N+=f.readSVarint())<Y&&(Y=N),N>J&&(J=N);else if(m!==7)throw new Error("unknown command "+m)}return[z,Y,V,J]},xo.prototype.toGeoJSON=function(f,u,m){var _,P,N=this.extent*Math.pow(2,m),z=this.extent*f,V=this.extent*u,Y=this.loadGeometry(),J=xo.types[this.type];function ne(Se){for(var Ee=0;Ee<Se.length;Ee++){var De=Se[Ee];Se[Ee]=[360*(De.x+z)/N-180,360/Math.PI*Math.atan(Math.exp((180-360*(De.y+V)/N)*Math.PI/180))-90]}}switch(this.type){case 1:var ae=[];for(_=0;_<Y.length;_++)ae[_]=Y[_][0];ne(Y=ae);break;case 2:for(_=0;_<Y.length;_++)ne(Y[_]);break;case 3:for(Y=function(Se){var Ee=Se.length;if(Ee<=1)return[Se];for(var De,He,Ye=[],pt=0;pt<Ee;pt++){var nt=Qf(Se[pt]);nt!==0&&(He===void 0&&(He=nt<0),He===nt<0?(De&&Ye.push(De),De=[Se[pt]]):De.push(Se[pt]))}return De&&Ye.push(De),Ye}(Y),_=0;_<Y.length;_++)for(P=0;P<Y[_].length;P++)ne(Y[_][P])}Y.length===1?Y=Y[0]:J="Multi"+J;var ye={type:"Feature",geometry:{type:J,coordinates:Y},properties:this.properties};return"id"in this&&(ye.id=this.id),ye};var fL=ti,I8=R8;function R8(f,u){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=f,this._keys=[],this._values=[],this._features=[],f.readFields(ufe,this,u),this.length=this._features.length}function ufe(f,u,m){f===15?u.version=m.readVarint():f===1?u.name=m.readString():f===5?u.extent=m.readVarint():f===2?u._features.push(m.pos):f===3?u._keys.push(m.readString()):f===4&&u._values.push(function(_){for(var P=null,N=_.readVarint()+_.pos;_.pos<N;){var z=_.readVarint()>>3;P=z===1?_.readString():z===2?_.readFloat():z===3?_.readDouble():z===4?_.readVarint64():z===5?_.readVarint():z===6?_.readSVarint():z===7?_.readBoolean():null}return P}(m))}R8.prototype.feature=function(f){if(f<0||f>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[f];var u=this._pbf.readVarint()+this._pbf.pos;return new fL(this._pbf,u,this.extent,this._keys,this._values)};var dfe=I8;function ffe(f,u,m){if(f===3){var _=new dfe(m,m.readVarint()+m.pos);_.length&&(u[_.name]=_)}}br.VectorTile=function(f,u){this.layers=f.readFields(ffe,{},u)},br.VectorTileFeature=ti,br.VectorTileLayer=I8;const hfe=br.VectorTileFeature.types,hL=Math.pow(2,13);function ow(f,u,m,_,P,N,z,V){f.emplaceBack(u,m,2*Math.floor(_*hL)+z,P*hL*2,N*hL*2,Math.round(V))}class pL{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(m=>m.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new dn,this.centroidVertexArray=new ln,this.indexArray=new Bo,this.programConfigurations=new vo(u.layers,u.zoom),this.segments=new li,this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id)}populate(u,m,_){this.features=[],this.hasPattern=lr("fill-extrusion",this.layers,m);for(const{feature:P,id:N,index:z,sourceLayerIndex:V}of u){const Y=this.layers[0]._featureFilter.needGeometry,J=jc(P,Y);if(!this.layers[0]._featureFilter.filter(new Ei(this.zoom),J,_))continue;const ne={id:N,sourceLayerIndex:V,index:z,geometry:Y?J.geometry:Nd(P),properties:P.properties,type:P.type,patterns:{}};this.hasPattern?this.features.push(Pi("fill-extrusion",this.layers,ne,this.zoom,m)):this.addFeature(ne,ne.geometry,z,_,{}),m.featureIndex.insert(P,ne.geometry,z,V,this.index,!0)}}addFeatures(u,m,_){for(const P of this.features){const{geometry:N}=P;this.addFeature(P,N,P.index,m,_)}}update(u,m,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,m,this.stateDependentLayers,_)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,or),this.centroidVertexBuffer=u.createVertexBuffer(this.centroidVertexArray,On.members,!0),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(u,m,_,P,N){const z={x:0,y:0,vertexCount:0};for(const V of jn(m,500)){let Y=0;for(const Ee of V)Y+=Ee.length;let J=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Ee of V){if(Ee.length===0||mfe(Ee))continue;let De=0;for(let He=0;He<Ee.length;He++){const Ye=Ee[He];if(He>=1){const pt=Ee[He-1];if(!pfe(Ye,pt)){J.vertexLength+4>li.MAX_VERTEX_ARRAY_LENGTH&&(J=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const nt=Ye.sub(pt)._perp()._unit(),xt=pt.dist(Ye);De+xt>32768&&(De=0),ow(this.layoutVertexArray,Ye.x,Ye.y,nt.x,nt.y,0,0,De),ow(this.layoutVertexArray,Ye.x,Ye.y,nt.x,nt.y,0,1,De),z.x+=2*Ye.x,z.y+=2*Ye.y,z.vertexCount+=2,De+=xt,ow(this.layoutVertexArray,pt.x,pt.y,nt.x,nt.y,0,0,De),ow(this.layoutVertexArray,pt.x,pt.y,nt.x,nt.y,0,1,De),z.x+=2*pt.x,z.y+=2*pt.y,z.vertexCount+=2;const kt=J.vertexLength;this.indexArray.emplaceBack(kt,kt+2,kt+1),this.indexArray.emplaceBack(kt+1,kt+2,kt+3),J.vertexLength+=4,J.primitiveLength+=2}}}}if(J.vertexLength+Y>li.MAX_VERTEX_ARRAY_LENGTH&&(J=this.segments.prepareSegment(Y,this.layoutVertexArray,this.indexArray)),hfe[u.type]!=="Polygon")continue;const ne=[],ae=[],ye=J.vertexLength;for(const Ee of V)if(Ee.length!==0){Ee!==V[0]&&ae.push(ne.length/2);for(let De=0;De<Ee.length;De++){const He=Ee[De];ow(this.layoutVertexArray,He.x,He.y,0,0,1,1,0),z.x+=He.x,z.y+=He.y,z.vertexCount+=1,ne.push(He.x),ne.push(He.y)}}const Se=ue(ne,ae);for(let Ee=0;Ee<Se.length;Ee+=3)this.indexArray.emplaceBack(ye+Se[Ee],ye+Se[Ee+2],ye+Se[Ee+1]);J.primitiveLength+=Se.length/3,J.vertexLength+=Y}for(let V=0;V<z.vertexCount;V++)this.centroidVertexArray.emplaceBack(Math.floor(z.x/z.vertexCount),Math.floor(z.y/z.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,_,N,P)}}function pfe(f,u){return f.x===u.x&&(f.x<0||f.x>Yi)||f.y===u.y&&(f.y<0||f.y>Yi)}function mfe(f){return f.every(u=>u.x<0)||f.every(u=>u.x>Yi)||f.every(u=>u.y<0)||f.every(u=>u.y>Yi)}let O8;wn("FillExtrusionBucket",pL,{omit:["layers","features"]});var gfe={get paint(){return O8=O8||new so({"fill-extrusion-opacity":new Nn(Je["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new nr(Je["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Nn(Je["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Nn(Je["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new $f(Je["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new nr(Je["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new nr(Je["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Nn(Je["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class yfe extends go{constructor(u){super(u,gfe)}createBucket(u){return new pL(u)}queryRadius(){return As(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(u,m,_,P,N,z,V,Y){const J=Uc(u,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),z.angle,V),ne=this.paint.get("fill-extrusion-height").evaluate(m,_),ae=this.paint.get("fill-extrusion-base").evaluate(m,_),ye=function(Ee,De,He,Ye){const pt=[];for(const nt of Ee){const xt=[nt.x,nt.y,0,1];ov(xt,xt,De),pt.push(new g(xt[0]/xt[3],xt[1]/xt[3]))}return pt}(J,Y),Se=function(Ee,De,He,Ye){const pt=[],nt=[],xt=Ye[8]*De,kt=Ye[9]*De,Yt=Ye[10]*De,bn=Ye[11]*De,zn=Ye[8]*He,_n=Ye[9]*He,vn=Ye[10]*He,fn=Ye[11]*He;for(const Pn of Ee){const mn=[],rn=[];for(const Qn of Pn){const Un=Qn.x,kr=Qn.y,Xi=Ye[0]*Un+Ye[4]*kr+Ye[12],io=Ye[1]*Un+Ye[5]*kr+Ye[13],fs=Ye[2]*Un+Ye[6]*kr+Ye[14],hc=Ye[3]*Un+Ye[7]*kr+Ye[15],Za=fs+Yt,Jo=hc+bn,Ks=Xi+zn,aa=io+_n,Ja=fs+vn,Qa=hc+fn,hs=new g((Xi+xt)/Jo,(io+kt)/Jo);hs.z=Za/Jo,mn.push(hs);const ps=new g(Ks/Qa,aa/Qa);ps.z=Ja/Qa,rn.push(ps)}pt.push(mn),nt.push(rn)}return[pt,nt]}(P,ae,ne,Y);return function(Ee,De,He){let Ye=1/0;tv(He,De)&&(Ye=L8(He,De[0]));for(let pt=0;pt<De.length;pt++){const nt=De[pt],xt=Ee[pt];for(let kt=0;kt<nt.length-1;kt++){const Yt=nt[kt],bn=[Yt,nt[kt+1],xt[kt+1],xt[kt],Yt];rx(He,bn)&&(Ye=Math.min(Ye,L8(He,bn)))}}return Ye!==1/0&&Ye}(Se[0],Se[1],ye)}}function sw(f,u){return f.x*u.x+f.y*u.y}function L8(f,u){if(f.length===1){let m=0;const _=u[m++];let P;for(;!P||_.equals(P);)if(P=u[m++],!P)return 1/0;for(;m<u.length;m++){const N=u[m],z=f[0],V=P.sub(_),Y=N.sub(_),J=z.sub(_),ne=sw(V,V),ae=sw(V,Y),ye=sw(Y,Y),Se=sw(J,V),Ee=sw(J,Y),De=ne*ye-ae*ae,He=(ye*Se-ae*Ee)/De,Ye=(ne*Ee-ae*Se)/De,pt=_.z*(1-He-Ye)+P.z*He+N.z*Ye;if(isFinite(pt))return pt}return 1/0}{let m=1/0;for(const _ of u)m=Math.min(m,_.z);return m}}const vfe=Ci([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:xfe}=vfe,_fe=Ci([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:bfe}=_fe,wfe=br.VectorTileFeature.types,Sfe=Math.cos(Math.PI/180*37.5),D8=Math.pow(2,14)/.5;class mL{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(m=>m.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(m=>{this.gradients[m.id]={}}),this.layoutVertexArray=new Zn,this.layoutVertexArray2=new Rn,this.indexArray=new Bo,this.programConfigurations=new vo(u.layers,u.zoom),this.segments=new li,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id)}populate(u,m,_){this.hasPattern=lr("line",this.layers,m);const P=this.layers[0].layout.get("line-sort-key"),N=!P.isConstant(),z=[];for(const{feature:V,id:Y,index:J,sourceLayerIndex:ne}of u){const ae=this.layers[0]._featureFilter.needGeometry,ye=jc(V,ae);if(!this.layers[0]._featureFilter.filter(new Ei(this.zoom),ye,_))continue;const Se=N?P.evaluate(ye,{},_):void 0,Ee={id:Y,properties:V.properties,type:V.type,sourceLayerIndex:ne,index:J,geometry:ae?ye.geometry:Nd(V),patterns:{},sortKey:Se};z.push(Ee)}N&&z.sort((V,Y)=>V.sortKey-Y.sortKey);for(const V of z){const{geometry:Y,index:J,sourceLayerIndex:ne}=V;if(this.hasPattern){const ae=Pi("line",this.layers,V,this.zoom,m);this.patternFeatures.push(ae)}else this.addFeature(V,Y,J,_,{});m.featureIndex.insert(u[J].feature,Y,J,ne,this.index)}}update(u,m,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,m,this.stateDependentLayers,_)}addFeatures(u,m,_){for(const P of this.patternFeatures)this.addFeature(P,P.geometry,P.index,m,_)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,bfe)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,xfe),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(u){if(u.properties&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}}addFeature(u,m,_,P,N){const z=this.layers[0].layout,V=z.get("line-join").evaluate(u,{}),Y=z.get("line-cap"),J=z.get("line-miter-limit"),ne=z.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(const ae of m)this.addLine(ae,u,V,Y,J,ne);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,_,N,P)}addLine(u,m,_,P,N,z){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ye=0;Ye<u.length-1;Ye++)this.totalDistance+=u[Ye].dist(u[Ye+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const V=wfe[m.type]==="Polygon";let Y=u.length;for(;Y>=2&&u[Y-1].equals(u[Y-2]);)Y--;let J=0;for(;J<Y-1&&u[J].equals(u[J+1]);)J++;if(Y<(V?3:2))return;_==="bevel"&&(N=1.05);const ne=this.overscaling<=16?15*Yi/(512*this.overscaling):0,ae=this.segments.prepareSegment(10*Y,this.layoutVertexArray,this.indexArray);let ye,Se,Ee,De,He;this.e1=this.e2=-1,V&&(ye=u[Y-2],He=u[J].sub(ye)._unit()._perp());for(let Ye=J;Ye<Y;Ye++){if(Ee=Ye===Y-1?V?u[J+1]:void 0:u[Ye+1],Ee&&u[Ye].equals(Ee))continue;He&&(De=He),ye&&(Se=ye),ye=u[Ye],He=Ee?Ee.sub(ye)._unit()._perp():De,De=De||He;let pt=De.add(He);pt.x===0&&pt.y===0||pt._unit();const nt=De.x*He.x+De.y*He.y,xt=pt.x*He.x+pt.y*He.y,kt=xt!==0?1/xt:1/0,Yt=2*Math.sqrt(2-2*xt),bn=xt<Sfe&&Se&&Ee,zn=De.x*He.y-De.y*He.x>0;if(bn&&Ye>J){const fn=ye.dist(Se);if(fn>2*ne){const Pn=ye.sub(ye.sub(Se)._mult(ne/fn)._round());this.updateDistance(Se,Pn),this.addCurrentVertex(Pn,De,0,0,ae),Se=Pn}}const _n=Se&&Ee;let vn=_n?_:V?"butt":P;if(_n&&vn==="round"&&(kt<z?vn="miter":kt<=2&&(vn="fakeround")),vn==="miter"&&kt>N&&(vn="bevel"),vn==="bevel"&&(kt>2&&(vn="flipbevel"),kt<N&&(vn="miter")),Se&&this.updateDistance(Se,ye),vn==="miter")pt._mult(kt),this.addCurrentVertex(ye,pt,0,0,ae);else if(vn==="flipbevel"){if(kt>100)pt=He.mult(-1);else{const fn=kt*De.add(He).mag()/De.sub(He).mag();pt._perp()._mult(fn*(zn?-1:1))}this.addCurrentVertex(ye,pt,0,0,ae),this.addCurrentVertex(ye,pt.mult(-1),0,0,ae)}else if(vn==="bevel"||vn==="fakeround"){const fn=-Math.sqrt(kt*kt-1),Pn=zn?fn:0,mn=zn?0:fn;if(Se&&this.addCurrentVertex(ye,De,Pn,mn,ae),vn==="fakeround"){const rn=Math.round(180*Yt/Math.PI/20);for(let Qn=1;Qn<rn;Qn++){let Un=Qn/rn;if(Un!==.5){const Xi=Un-.5;Un+=Un*Xi*(Un-1)*((1.0904+nt*(nt*(3.55645-1.43519*nt)-3.2452))*Xi*Xi+(.848013+nt*(.215638*nt-1.06021)))}const kr=He.sub(De)._mult(Un)._add(De)._unit()._mult(zn?-1:1);this.addHalfVertex(ye,kr.x,kr.y,!1,zn,0,ae)}}Ee&&this.addCurrentVertex(ye,He,-Pn,-mn,ae)}else if(vn==="butt")this.addCurrentVertex(ye,pt,0,0,ae);else if(vn==="square"){const fn=Se?1:-1;this.addCurrentVertex(ye,pt,fn,fn,ae)}else vn==="round"&&(Se&&(this.addCurrentVertex(ye,De,0,0,ae),this.addCurrentVertex(ye,De,1,1,ae,!0)),Ee&&(this.addCurrentVertex(ye,He,-1,-1,ae,!0),this.addCurrentVertex(ye,He,0,0,ae)));if(bn&&Ye<Y-1){const fn=ye.dist(Ee);if(fn>2*ne){const Pn=ye.add(Ee.sub(ye)._mult(ne/fn)._round());this.updateDistance(ye,Pn),this.addCurrentVertex(Pn,He,0,0,ae),ye=Pn}}}}addCurrentVertex(u,m,_,P,N,z=!1){const V=m.y*P-m.x,Y=-m.y-m.x*P;this.addHalfVertex(u,m.x+m.y*_,m.y-m.x*_,z,!1,_,N),this.addHalfVertex(u,V,Y,z,!0,-P,N),this.distance>D8/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(u,m,_,P,N,z))}addHalfVertex({x:u,y:m},_,P,N,z,V,Y){const J=.5*(this.lineClips?this.scaledDistance*(D8-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u<<1)+(N?1:0),(m<<1)+(z?1:0),Math.round(63*_)+128,Math.round(63*P)+128,1+(V===0?0:V<0?-1:1)|(63&J)<<2,J>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ne=Y.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ne),Y.primitiveLength++),z?this.e2=ne:this.e1=ne}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(u,m){this.distance+=u.dist(m),this.updateScaledDistance()}}let N8,z8;wn("LineBucket",mL,{omit:["layers","patternFeatures"]});var F8={get paint(){return z8=z8||new so({"line-opacity":new nr(Je.paint_line["line-opacity"]),"line-color":new nr(Je.paint_line["line-color"]),"line-translate":new Nn(Je.paint_line["line-translate"]),"line-translate-anchor":new Nn(Je.paint_line["line-translate-anchor"]),"line-width":new nr(Je.paint_line["line-width"]),"line-gap-width":new nr(Je.paint_line["line-gap-width"]),"line-offset":new nr(Je.paint_line["line-offset"]),"line-blur":new nr(Je.paint_line["line-blur"]),"line-dasharray":new Lm(Je.paint_line["line-dasharray"]),"line-pattern":new $f(Je.paint_line["line-pattern"]),"line-gradient":new Dm(Je.paint_line["line-gradient"])})},get layout(){return N8=N8||new so({"line-cap":new Nn(Je.layout_line["line-cap"]),"line-join":new nr(Je.layout_line["line-join"]),"line-miter-limit":new Nn(Je.layout_line["line-miter-limit"]),"line-round-limit":new Nn(Je.layout_line["line-round-limit"]),"line-sort-key":new nr(Je.layout_line["line-sort-key"])})}};class Mfe extends nr{possiblyEvaluate(u,m){return m=new Ei(Math.floor(m.zoom),{now:m.now,fadeDuration:m.fadeDuration,zoomHistory:m.zoomHistory,transition:m.transition}),super.possiblyEvaluate(u,m)}evaluate(u,m,_,P){return m=U({},m,{zoom:Math.floor(m.zoom)}),super.evaluate(u,m,_,P)}}let QE;class Efe extends go{constructor(u){super(u,F8),this.gradientVersion=0,QE||(QE=new Mfe(F8.paint.properties["line-width"].specification),QE.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(u){if(u==="line-gradient"){const m=this.gradientExpression();this.stepInterpolant=!!function(_){return _._styleExpression!==void 0}(m)&&m._styleExpression.expression instanceof Au,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(u,m){super.recalculate(u,m),this.paint._values["line-floorwidth"]=QE.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new mL(u)}queryRadius(u){const m=u,_=B8(Gf("line-width",this,m),Gf("line-gap-width",this,m)),P=Gf("line-offset",this,m);return _/2+Math.abs(P)+As(this.paint.get("line-translate"))}queryIntersectsFeature(u,m,_,P,N,z,V){const Y=Uc(u,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),z.angle,V),J=V/2*B8(this.paint.get("line-width").evaluate(m,_),this.paint.get("line-gap-width").evaluate(m,_)),ne=this.paint.get("line-offset").evaluate(m,_);return ne&&(P=function(ae,ye){const Se=[];for(let Ee=0;Ee<ae.length;Ee++){const De=ae[Ee],He=[];for(let Ye=0;Ye<De.length;Ye++){const pt=De[Ye-1],nt=De[Ye],xt=De[Ye+1],kt=Ye===0?new g(0,0):nt.sub(pt)._unit()._perp(),Yt=Ye===De.length-1?new g(0,0):xt.sub(nt)._unit()._perp(),bn=kt._add(Yt)._unit(),zn=bn.x*Yt.x+bn.y*Yt.y;zn!==0&&bn._mult(1/zn),He.push(bn._mult(ye)._add(nt))}Se.push(He)}return Se}(P,ne*V)),function(ae,ye,Se){for(let Ee=0;Ee<ye.length;Ee++){const De=ye[Ee];if(ae.length>=3){for(let He=0;He<De.length;He++)if(Hf(ae,De[He]))return!0}if(Y1(ae,De,Se))return!0}return!1}(Y,P,J)}isTileClipped(){return!0}}function B8(f,u){return u>0?u+2*f:f}const Tfe=Ci([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Cfe=Ci([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ci([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Afe=Ci([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Ci([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const $8=Ci([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Pfe=Ci([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function kfe(f,u,m){return f.sections.forEach(_=>{_.text=function(P,N,z){const V=N.layout.get("text-transform").evaluate(z,{});return V==="uppercase"?P=P.toLocaleUpperCase():V==="lowercase"&&(P=P.toLocaleLowerCase()),Ta.applyArabicShaping&&(P=Ta.applyArabicShaping(P)),P}(_.text,u,m)}),f}Ci([{name:"triangle",components:3,type:"Uint16"}]),Ci([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ci([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ci([{type:"Float32",name:"offsetX"}]),Ci([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ci([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const aw={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var ds=24,j8=ki,U8=function(f,u,m,_,P){var N,z,V=8*P-_-1,Y=(1<<V)-1,J=Y>>1,ne=-7,ae=m?P-1:0,ye=m?-1:1,Se=f[u+ae];for(ae+=ye,N=Se&(1<<-ne)-1,Se>>=-ne,ne+=V;ne>0;N=256*N+f[u+ae],ae+=ye,ne-=8);for(z=N&(1<<-ne)-1,N>>=-ne,ne+=_;ne>0;z=256*z+f[u+ae],ae+=ye,ne-=8);if(N===0)N=1-J;else{if(N===Y)return z?NaN:1/0*(Se?-1:1);z+=Math.pow(2,_),N-=J}return(Se?-1:1)*z*Math.pow(2,N-_)},V8=function(f,u,m,_,P,N){var z,V,Y,J=8*N-P-1,ne=(1<<J)-1,ae=ne>>1,ye=P===23?Math.pow(2,-24)-Math.pow(2,-77):0,Se=_?0:N-1,Ee=_?1:-1,De=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(V=isNaN(u)?1:0,z=ne):(z=Math.floor(Math.log(u)/Math.LN2),u*(Y=Math.pow(2,-z))<1&&(z--,Y*=2),(u+=z+ae>=1?ye/Y:ye*Math.pow(2,1-ae))*Y>=2&&(z++,Y/=2),z+ae>=ne?(V=0,z=ne):z+ae>=1?(V=(u*Y-1)*Math.pow(2,P),z+=ae):(V=u*Math.pow(2,ae-1)*Math.pow(2,P),z=0));P>=8;f[m+Se]=255&V,Se+=Ee,V/=256,P-=8);for(z=z<<P|V,J+=P;J>0;f[m+Se]=255&z,Se+=Ee,z/=256,J-=8);f[m+Se-Ee]|=128*De};function ki(f){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(f)?f:new Uint8Array(f||0),this.pos=0,this.type=0,this.length=this.buf.length}ki.Varint=0,ki.Fixed64=1,ki.Bytes=2,ki.Fixed32=5;var gL=4294967296,W8=1/gL,H8=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function np(f){return f.type===ki.Bytes?f.readVarint()+f.pos:f.pos+1}function ux(f,u,m){return m?4294967296*u+(f>>>0):4294967296*(u>>>0)+(f>>>0)}function G8(f,u,m){var _=u<=16383?1:u<=2097151?2:u<=268435455?3:Math.floor(Math.log(u)/(7*Math.LN2));m.realloc(_);for(var P=m.pos-1;P>=f;P--)m.buf[P+_]=m.buf[P]}function Ife(f,u){for(var m=0;m<f.length;m++)u.writeVarint(f[m])}function Rfe(f,u){for(var m=0;m<f.length;m++)u.writeSVarint(f[m])}function Ofe(f,u){for(var m=0;m<f.length;m++)u.writeFloat(f[m])}function Lfe(f,u){for(var m=0;m<f.length;m++)u.writeDouble(f[m])}function Dfe(f,u){for(var m=0;m<f.length;m++)u.writeBoolean(f[m])}function Nfe(f,u){for(var m=0;m<f.length;m++)u.writeFixed32(f[m])}function zfe(f,u){for(var m=0;m<f.length;m++)u.writeSFixed32(f[m])}function Ffe(f,u){for(var m=0;m<f.length;m++)u.writeFixed64(f[m])}function Bfe(f,u){for(var m=0;m<f.length;m++)u.writeSFixed64(f[m])}function eT(f,u){return(f[u]|f[u+1]<<8|f[u+2]<<16)+16777216*f[u+3]}function dx(f,u,m){f[m]=u,f[m+1]=u>>>8,f[m+2]=u>>>16,f[m+3]=u>>>24}function q8(f,u){return(f[u]|f[u+1]<<8|f[u+2]<<16)+(f[u+3]<<24)}ki.prototype={destroy:function(){this.buf=null},readFields:function(f,u,m){for(m=m||this.length;this.pos<m;){var _=this.readVarint(),P=_>>3,N=this.pos;this.type=7&_,f(P,u,this),this.pos===N&&this.skip(_)}return u},readMessage:function(f,u){return this.readFields(f,u,this.readVarint()+this.pos)},readFixed32:function(){var f=eT(this.buf,this.pos);return this.pos+=4,f},readSFixed32:function(){var f=q8(this.buf,this.pos);return this.pos+=4,f},readFixed64:function(){var f=eT(this.buf,this.pos)+eT(this.buf,this.pos+4)*gL;return this.pos+=8,f},readSFixed64:function(){var f=eT(this.buf,this.pos)+q8(this.buf,this.pos+4)*gL;return this.pos+=8,f},readFloat:function(){var f=U8(this.buf,this.pos,!0,23,4);return this.pos+=4,f},readDouble:function(){var f=U8(this.buf,this.pos,!0,52,8);return this.pos+=8,f},readVarint:function(f){var u,m,_=this.buf;return u=127&(m=_[this.pos++]),m<128?u:(u|=(127&(m=_[this.pos++]))<<7,m<128?u:(u|=(127&(m=_[this.pos++]))<<14,m<128?u:(u|=(127&(m=_[this.pos++]))<<21,m<128?u:function(P,N,z){var V,Y,J=z.buf;if(V=(112&(Y=J[z.pos++]))>>4,Y<128||(V|=(127&(Y=J[z.pos++]))<<3,Y<128)||(V|=(127&(Y=J[z.pos++]))<<10,Y<128)||(V|=(127&(Y=J[z.pos++]))<<17,Y<128)||(V|=(127&(Y=J[z.pos++]))<<24,Y<128)||(V|=(1&(Y=J[z.pos++]))<<31,Y<128))return ux(P,V,N);throw new Error("Expected varint not more than 10 bytes")}(u|=(15&(m=_[this.pos]))<<28,f,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var f=this.readVarint();return f%2==1?(f+1)/-2:f/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var f=this.readVarint()+this.pos,u=this.pos;return this.pos=f,f-u>=12&&H8?function(m,_,P){return H8.decode(m.subarray(_,P))}(this.buf,u,f):function(m,_,P){for(var N="",z=_;z<P;){var V,Y,J,ne=m[z],ae=null,ye=ne>239?4:ne>223?3:ne>191?2:1;if(z+ye>P)break;ye===1?ne<128&&(ae=ne):ye===2?(192&(V=m[z+1]))==128&&(ae=(31&ne)<<6|63&V)<=127&&(ae=null):ye===3?(Y=m[z+2],(192&(V=m[z+1]))==128&&(192&Y)==128&&((ae=(15&ne)<<12|(63&V)<<6|63&Y)<=2047||ae>=55296&&ae<=57343)&&(ae=null)):ye===4&&(Y=m[z+2],J=m[z+3],(192&(V=m[z+1]))==128&&(192&Y)==128&&(192&J)==128&&((ae=(15&ne)<<18|(63&V)<<12|(63&Y)<<6|63&J)<=65535||ae>=1114112)&&(ae=null)),ae===null?(ae=65533,ye=1):ae>65535&&(ae-=65536,N+=String.fromCharCode(ae>>>10&1023|55296),ae=56320|1023&ae),N+=String.fromCharCode(ae),z+=ye}return N}(this.buf,u,f)},readBytes:function(){var f=this.readVarint()+this.pos,u=this.buf.subarray(this.pos,f);return this.pos=f,u},readPackedVarint:function(f,u){if(this.type!==ki.Bytes)return f.push(this.readVarint(u));var m=np(this);for(f=f||[];this.pos<m;)f.push(this.readVarint(u));return f},readPackedSVarint:function(f){if(this.type!==ki.Bytes)return f.push(this.readSVarint());var u=np(this);for(f=f||[];this.pos<u;)f.push(this.readSVarint());return f},readPackedBoolean:function(f){if(this.type!==ki.Bytes)return f.push(this.readBoolean());var u=np(this);for(f=f||[];this.pos<u;)f.push(this.readBoolean());return f},readPackedFloat:function(f){if(this.type!==ki.Bytes)return f.push(this.readFloat());var u=np(this);for(f=f||[];this.pos<u;)f.push(this.readFloat());return f},readPackedDouble:function(f){if(this.type!==ki.Bytes)return f.push(this.readDouble());var u=np(this);for(f=f||[];this.pos<u;)f.push(this.readDouble());return f},readPackedFixed32:function(f){if(this.type!==ki.Bytes)return f.push(this.readFixed32());var u=np(this);for(f=f||[];this.pos<u;)f.push(this.readFixed32());return f},readPackedSFixed32:function(f){if(this.type!==ki.Bytes)return f.push(this.readSFixed32());var u=np(this);for(f=f||[];this.pos<u;)f.push(this.readSFixed32());return f},readPackedFixed64:function(f){if(this.type!==ki.Bytes)return f.push(this.readFixed64());var u=np(this);for(f=f||[];this.pos<u;)f.push(this.readFixed64());return f},readPackedSFixed64:function(f){if(this.type!==ki.Bytes)return f.push(this.readSFixed64());var u=np(this);for(f=f||[];this.pos<u;)f.push(this.readSFixed64());return f},skip:function(f){var u=7&f;if(u===ki.Varint)for(;this.buf[this.pos++]>127;);else if(u===ki.Bytes)this.pos=this.readVarint()+this.pos;else if(u===ki.Fixed32)this.pos+=4;else{if(u!==ki.Fixed64)throw new Error("Unimplemented type: "+u);this.pos+=8}},writeTag:function(f,u){this.writeVarint(f<<3|u)},realloc:function(f){for(var u=this.length||16;u<this.pos+f;)u*=2;if(u!==this.length){var m=new Uint8Array(u);m.set(this.buf),this.buf=m,this.length=u}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(f){this.realloc(4),dx(this.buf,f,this.pos),this.pos+=4},writeSFixed32:function(f){this.realloc(4),dx(this.buf,f,this.pos),this.pos+=4},writeFixed64:function(f){this.realloc(8),dx(this.buf,-1&f,this.pos),dx(this.buf,Math.floor(f*W8),this.pos+4),this.pos+=8},writeSFixed64:function(f){this.realloc(8),dx(this.buf,-1&f,this.pos),dx(this.buf,Math.floor(f*W8),this.pos+4),this.pos+=8},writeVarint:function(f){(f=+f||0)>268435455||f<0?function(u,m){var _,P;if(u>=0?(_=u%4294967296|0,P=u/4294967296|0):(P=~(-u/4294967296),4294967295^(_=~(-u%4294967296))?_=_+1|0:(_=0,P=P+1|0)),u>=18446744073709552e3||u<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");m.realloc(10),function(N,z,V){V.buf[V.pos++]=127&N|128,N>>>=7,V.buf[V.pos++]=127&N|128,N>>>=7,V.buf[V.pos++]=127&N|128,N>>>=7,V.buf[V.pos++]=127&N|128,V.buf[V.pos]=127&(N>>>=7)}(_,0,m),function(N,z){var V=(7&N)<<4;z.buf[z.pos++]|=V|((N>>>=3)?128:0),N&&(z.buf[z.pos++]=127&N|((N>>>=7)?128:0),N&&(z.buf[z.pos++]=127&N|((N>>>=7)?128:0),N&&(z.buf[z.pos++]=127&N|((N>>>=7)?128:0),N&&(z.buf[z.pos++]=127&N|((N>>>=7)?128:0),N&&(z.buf[z.pos++]=127&N)))))}(P,m)}(f,this):(this.realloc(4),this.buf[this.pos++]=127&f|(f>127?128:0),f<=127||(this.buf[this.pos++]=127&(f>>>=7)|(f>127?128:0),f<=127||(this.buf[this.pos++]=127&(f>>>=7)|(f>127?128:0),f<=127||(this.buf[this.pos++]=f>>>7&127))))},writeSVarint:function(f){this.writeVarint(f<0?2*-f-1:2*f)},writeBoolean:function(f){this.writeVarint(!!f)},writeString:function(f){f=String(f),this.realloc(4*f.length),this.pos++;var u=this.pos;this.pos=function(_,P,N){for(var z,V,Y=0;Y<P.length;Y++){if((z=P.charCodeAt(Y))>55295&&z<57344){if(!V){z>56319||Y+1===P.length?(_[N++]=239,_[N++]=191,_[N++]=189):V=z;continue}if(z<56320){_[N++]=239,_[N++]=191,_[N++]=189,V=z;continue}z=V-55296<<10|z-56320|65536,V=null}else V&&(_[N++]=239,_[N++]=191,_[N++]=189,V=null);z<128?_[N++]=z:(z<2048?_[N++]=z>>6|192:(z<65536?_[N++]=z>>12|224:(_[N++]=z>>18|240,_[N++]=z>>12&63|128),_[N++]=z>>6&63|128),_[N++]=63&z|128)}return N}(this.buf,f,this.pos);var m=this.pos-u;m>=128&&G8(u,m,this),this.pos=u-1,this.writeVarint(m),this.pos+=m},writeFloat:function(f){this.realloc(4),V8(this.buf,f,this.pos,!0,23,4),this.pos+=4},writeDouble:function(f){this.realloc(8),V8(this.buf,f,this.pos,!0,52,8),this.pos+=8},writeBytes:function(f){var u=f.length;this.writeVarint(u),this.realloc(u);for(var m=0;m<u;m++)this.buf[this.pos++]=f[m]},writeRawMessage:function(f,u){this.pos++;var m=this.pos;f(u,this);var _=this.pos-m;_>=128&&G8(m,_,this),this.pos=m-1,this.writeVarint(_),this.pos+=_},writeMessage:function(f,u,m){this.writeTag(f,ki.Bytes),this.writeRawMessage(u,m)},writePackedVarint:function(f,u){u.length&&this.writeMessage(f,Ife,u)},writePackedSVarint:function(f,u){u.length&&this.writeMessage(f,Rfe,u)},writePackedBoolean:function(f,u){u.length&&this.writeMessage(f,Dfe,u)},writePackedFloat:function(f,u){u.length&&this.writeMessage(f,Ofe,u)},writePackedDouble:function(f,u){u.length&&this.writeMessage(f,Lfe,u)},writePackedFixed32:function(f,u){u.length&&this.writeMessage(f,Nfe,u)},writePackedSFixed32:function(f,u){u.length&&this.writeMessage(f,zfe,u)},writePackedFixed64:function(f,u){u.length&&this.writeMessage(f,Ffe,u)},writePackedSFixed64:function(f,u){u.length&&this.writeMessage(f,Bfe,u)},writeBytesField:function(f,u){this.writeTag(f,ki.Bytes),this.writeBytes(u)},writeFixed32Field:function(f,u){this.writeTag(f,ki.Fixed32),this.writeFixed32(u)},writeSFixed32Field:function(f,u){this.writeTag(f,ki.Fixed32),this.writeSFixed32(u)},writeFixed64Field:function(f,u){this.writeTag(f,ki.Fixed64),this.writeFixed64(u)},writeSFixed64Field:function(f,u){this.writeTag(f,ki.Fixed64),this.writeSFixed64(u)},writeVarintField:function(f,u){this.writeTag(f,ki.Varint),this.writeVarint(u)},writeSVarintField:function(f,u){this.writeTag(f,ki.Varint),this.writeSVarint(u)},writeStringField:function(f,u){this.writeTag(f,ki.Bytes),this.writeString(u)},writeFloatField:function(f,u){this.writeTag(f,ki.Fixed32),this.writeFloat(u)},writeDoubleField:function(f,u){this.writeTag(f,ki.Fixed64),this.writeDouble(u)},writeBooleanField:function(f,u){this.writeVarintField(f,!!u)}};var yL=c(j8);const vL=3;function $fe(f,u,m){f===1&&m.readMessage(jfe,u)}function jfe(f,u,m){if(f===3){const{id:_,bitmap:P,width:N,height:z,left:V,top:Y,advance:J}=m.readMessage(Ufe,{});u.push({id:_,bitmap:new Vm({width:N+2*vL,height:z+2*vL},P),metrics:{width:N,height:z,left:V,top:Y,advance:J}})}}function Ufe(f,u,m){f===1?u.id=m.readVarint():f===2?u.bitmap=m.readBytes():f===3?u.width=m.readVarint():f===4?u.height=m.readVarint():f===5?u.left=m.readSVarint():f===6?u.top=m.readSVarint():f===7&&(u.advance=m.readVarint())}const Y8=vL;function X8(f){let u=0,m=0;for(const z of f)u+=z.w*z.h,m=Math.max(m,z.w);f.sort((z,V)=>V.h-z.h);const _=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(u/.95)),m),h:1/0}];let P=0,N=0;for(const z of f)for(let V=_.length-1;V>=0;V--){const Y=_[V];if(!(z.w>Y.w||z.h>Y.h)){if(z.x=Y.x,z.y=Y.y,N=Math.max(N,z.y+z.h),P=Math.max(P,z.x+z.w),z.w===Y.w&&z.h===Y.h){const J=_.pop();V<_.length&&(_[V]=J)}else z.h===Y.h?(Y.x+=z.w,Y.w-=z.w):z.w===Y.w?(Y.y+=z.h,Y.h-=z.h):(_.push({x:Y.x+z.w,y:Y.y,w:Y.w-z.w,h:z.h}),Y.y+=z.h,Y.h-=z.h);break}}return{w:P,h:N,fill:u/(P*N)||0}}const kl=1;class xL{constructor(u,{pixelRatio:m,version:_,stretchX:P,stretchY:N,content:z}){this.paddedRect=u,this.pixelRatio=m,this.stretchX=P,this.stretchY=N,this.content=z,this.version=_}get tl(){return[this.paddedRect.x+kl,this.paddedRect.y+kl]}get br(){return[this.paddedRect.x+this.paddedRect.w-kl,this.paddedRect.y+this.paddedRect.h-kl]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*kl)/this.pixelRatio,(this.paddedRect.h-2*kl)/this.pixelRatio]}}class K8{constructor(u,m){const _={},P={};this.haveRenderCallbacks=[];const N=[];this.addImages(u,_,N),this.addImages(m,P,N);const{w:z,h:V}=X8(N),Y=new Xa({width:z||1,height:V||1});for(const J in u){const ne=u[J],ae=_[J].paddedRect;Xa.copy(ne.data,Y,{x:0,y:0},{x:ae.x+kl,y:ae.y+kl},ne.data)}for(const J in m){const ne=m[J],ae=P[J].paddedRect,ye=ae.x+kl,Se=ae.y+kl,Ee=ne.data.width,De=ne.data.height;Xa.copy(ne.data,Y,{x:0,y:0},{x:ye,y:Se},ne.data),Xa.copy(ne.data,Y,{x:0,y:De-1},{x:ye,y:Se-1},{width:Ee,height:1}),Xa.copy(ne.data,Y,{x:0,y:0},{x:ye,y:Se+De},{width:Ee,height:1}),Xa.copy(ne.data,Y,{x:Ee-1,y:0},{x:ye-1,y:Se},{width:1,height:De}),Xa.copy(ne.data,Y,{x:0,y:0},{x:ye+Ee,y:Se},{width:1,height:De})}this.image=Y,this.iconPositions=_,this.patternPositions=P}addImages(u,m,_){for(const P in u){const N=u[P],z={x:0,y:0,w:N.data.width+2*kl,h:N.data.height+2*kl};_.push(z),m[P]=new xL(z,N),N.hasRenderCallback&&this.haveRenderCallbacks.push(P)}}patchUpdatedImages(u,m){u.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const _ in u.updatedImages)this.patchUpdatedImage(this.iconPositions[_],u.getImage(_),m),this.patchUpdatedImage(this.patternPositions[_],u.getImage(_),m)}patchUpdatedImage(u,m,_){if(!u||!m||u.version===m.version)return;u.version=m.version;const[P,N]=u.tl;_.update(m.data,void 0,{x:P,y:N})}}var Gm;wn("ImagePosition",xL),wn("ImageAtlas",K8),s.ai=void 0,(Gm=s.ai||(s.ai={}))[Gm.none=0]="none",Gm[Gm.horizontal=1]="horizontal",Gm[Gm.vertical=2]="vertical",Gm[Gm.horizontalOnly=3]="horizontalOnly";const lw=-17;class cw{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(u,m){const _=new cw;return _.scale=u||1,_.fontStack=m,_}static forImage(u){const m=new cw;return m.imageName=u,m}}class fx{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(u,m){const _=new fx;for(let P=0;P<u.sections.length;P++){const N=u.sections[P];N.image?_.addImageSection(N):_.addTextSection(N,m)}return _}length(){return this.text.length}getSection(u){return this.sections[this.sectionIndex[u]]}getSectionIndex(u){return this.sectionIndex[u]}getCharCode(u){return this.text.charCodeAt(u)}verticalizePunctuation(){this.text=function(u){let m="";for(let _=0;_<u.length;_++){const P=u.charCodeAt(_+1)||null,N=u.charCodeAt(_-1)||null;m+=P&&Gy(P)&&!aw[u[_+1]]||N&&Gy(N)&&!aw[u[_-1]]||!aw[u[_]]?u[_]:aw[u[_]]}return m}(this.text)}trim(){let u=0;for(let _=0;_<this.text.length&&nT[this.text.charCodeAt(_)];_++)u++;let m=this.text.length;for(let _=this.text.length-1;_>=0&&_>=u&&nT[this.text.charCodeAt(_)];_--)m--;this.text=this.text.substring(u,m),this.sectionIndex=this.sectionIndex.slice(u,m)}substring(u,m){const _=new fx;return _.text=this.text.substring(u,m),_.sectionIndex=this.sectionIndex.slice(u,m),_.sections=this.sections,_}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((u,m)=>Math.max(u,this.sections[m].scale),0)}addTextSection(u,m){this.text+=u.text,this.sections.push(cw.forText(u.scale,u.fontStack||m));const _=this.sections.length-1;for(let P=0;P<u.text.length;++P)this.sectionIndex.push(_)}addImageSection(u){const m=u.image?u.image.name:"";if(m.length===0)return void ie("Can't add FormattedSection with an empty image.");const _=this.getNextImageSectionCharCode();_?(this.text+=String.fromCharCode(_),this.sections.push(cw.forImage(m)),this.sectionIndex.push(this.sections.length-1)):ie("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function tT(f,u,m,_,P,N,z,V,Y,J,ne,ae,ye,Se,Ee,De){const He=fx.fromFeature(f,P);let Ye;ae===s.ai.vertical&&He.verticalizePunctuation();const{processBidirectionalText:pt,processStyledBidirectionalText:nt}=Ta;if(pt&&He.sections.length===1){Ye=[];const Yt=pt(He.toString(),_L(He,J,N,u,_,Se,Ee));for(const bn of Yt){const zn=new fx;zn.text=bn,zn.sections=He.sections;for(let _n=0;_n<bn.length;_n++)zn.sectionIndex.push(0);Ye.push(zn)}}else if(nt){Ye=[];const Yt=nt(He.text,He.sectionIndex,_L(He,J,N,u,_,Se,Ee));for(const bn of Yt){const zn=new fx;zn.text=bn[0],zn.sectionIndex=bn[1],zn.sections=He.sections,Ye.push(zn)}}else Ye=function(Yt,bn){const zn=[],_n=Yt.text;let vn=0;for(const fn of bn)zn.push(Yt.substring(vn,fn)),vn=fn;return vn<_n.length&&zn.push(Yt.substring(vn,_n.length)),zn}(He,_L(He,J,N,u,_,Se,Ee));const xt=[],kt={positionedLines:xt,text:He.toString(),top:ne[1],bottom:ne[1],left:ne[0],right:ne[0],writingMode:ae,iconsInText:!1,verticalizable:!1};return function(Yt,bn,zn,_n,vn,fn,Pn,mn,rn,Qn,Un,kr){let Xi=0,io=lw,fs=0,hc=0;const Za=mn==="right"?1:mn==="left"?0:.5;let Jo=0;for(const hs of vn){hs.trim();const ps=hs.getMaxScale(),Ca=(ps-1)*ds,el={positionedGlyphs:[],lineOffset:0};Yt.positionedLines[Jo]=el;const Aa=el.positionedGlyphs;let Il=0;if(!hs.length()){io+=fn,++Jo;continue}for(let ms=0;ms<hs.length();ms++){const Nr=hs.getSection(ms),Pa=hs.getSectionIndex(ms),la=hs.getCharCode(ms);let gs=0,Bu=null,zd=null,Fd=null,rp=ds;const $u=!(rn===s.ai.horizontal||!Un&&!Od(la)||Un&&(nT[la]||(Ks=la,xn.Arabic(Ks)||xn["Arabic Supplement"](Ks)||xn["Arabic Extended-A"](Ks)||xn["Arabic Presentation Forms-A"](Ks)||xn["Arabic Presentation Forms-B"](Ks))));if(Nr.imageName){const Wc=_n[Nr.imageName];if(!Wc)continue;Fd=Nr.imageName,Yt.iconsInText=Yt.iconsInText||!0,zd=Wc.paddedRect;const Ol=Wc.displaySize;Nr.scale=Nr.scale*ds/kr,Bu={width:Ol[0],height:Ol[1],left:kl,top:-Y8,advance:$u?Ol[1]:Ol[0]},gs=Ca+(ds-Ol[1]*Nr.scale),rp=Bu.advance;const ip=$u?Ol[0]*Nr.scale-ds*ps:Ol[1]*Nr.scale-ds*ps;ip>0&&ip>Il&&(Il=ip)}else{const Wc=zn[Nr.fontStack],Ol=Wc&&Wc[la];if(Ol&&Ol.rect)zd=Ol.rect,Bu=Ol.metrics;else{const ip=bn[Nr.fontStack],pw=ip&&ip[la];if(!pw)continue;Bu=pw.metrics}gs=(ps-Nr.scale)*ds}$u?(Yt.verticalizable=!0,Aa.push({glyph:la,imageName:Fd,x:Xi,y:io+gs,vertical:$u,scale:Nr.scale,fontStack:Nr.fontStack,sectionIndex:Pa,metrics:Bu,rect:zd}),Xi+=rp*Nr.scale+Qn):(Aa.push({glyph:la,imageName:Fd,x:Xi,y:io+gs,vertical:$u,scale:Nr.scale,fontStack:Nr.fontStack,sectionIndex:Pa,metrics:Bu,rect:zd}),Xi+=Bu.advance*Nr.scale+Qn)}Aa.length!==0&&(fs=Math.max(Xi-Qn,fs),Hfe(Aa,0,Aa.length-1,Za,Il)),Xi=0;const Rl=fn*ps+Il;el.lineOffset=Math.max(Il,Ca),io+=Rl,hc=Math.max(Rl,hc),++Jo}var Ks;const aa=io-lw,{horizontalAlign:Ja,verticalAlign:Qa}=bL(Pn);(function(hs,ps,Ca,el,Aa,Il,Rl,ms,Nr){const Pa=(ps-Ca)*Aa;let la=0;la=Il!==Rl?-ms*el-lw:(-el*Nr+.5)*Rl;for(const gs of hs)for(const Bu of gs.positionedGlyphs)Bu.x+=Pa,Bu.y+=la})(Yt.positionedLines,Za,Ja,Qa,fs,hc,fn,aa,vn.length),Yt.top+=-Qa*aa,Yt.bottom=Yt.top+aa,Yt.left+=-Ja*fs,Yt.right=Yt.left+fs}(kt,u,m,_,Ye,z,V,Y,ae,J,ye,De),!function(Yt){for(const bn of Yt)if(bn.positionedGlyphs.length!==0)return!1;return!0}(xt)&&kt}const nT={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Vfe={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Z8(f,u,m,_,P,N){if(u.imageName){const z=_[u.imageName];return z?z.displaySize[0]*u.scale*ds/N+P:0}{const z=m[u.fontStack],V=z&&z[f];return V?V.metrics.advance*u.scale+P:0}}function J8(f,u,m,_){const P=Math.pow(f-u,2);return _?f<u?P/2:2*P:P+Math.abs(m)*m}function Wfe(f,u,m){let _=0;return f===10&&(_-=1e4),m&&(_+=150),f!==40&&f!==65288||(_+=50),u!==41&&u!==65289||(_+=50),_}function Q8(f,u,m,_,P,N){let z=null,V=J8(u,m,P,N);for(const Y of _){const J=J8(u-Y.x,m,P,N)+Y.badness;J<=V&&(z=Y,V=J)}return{index:f,x:u,priorBreak:z,badness:V}}function eV(f){return f?eV(f.priorBreak).concat(f.index):[]}function _L(f,u,m,_,P,N,z){if(N!=="point")return[];if(!f)return[];const V=[],Y=function(ye,Se,Ee,De,He,Ye){let pt=0;for(let nt=0;nt<ye.length();nt++){const xt=ye.getSection(nt);pt+=Z8(ye.getCharCode(nt),xt,De,He,Se,Ye)}return pt/Math.max(1,Math.ceil(pt/Ee))}(f,u,m,_,P,z),J=f.text.indexOf("​")>=0;let ne=0;for(let ye=0;ye<f.length();ye++){const Se=f.getSection(ye),Ee=f.getCharCode(ye);if(nT[Ee]||(ne+=Z8(Ee,Se,_,P,u,z)),ye<f.length()-1){const De=!((ae=Ee)<11904||!(xn["Bopomofo Extended"](ae)||xn.Bopomofo(ae)||xn["CJK Compatibility Forms"](ae)||xn["CJK Compatibility Ideographs"](ae)||xn["CJK Compatibility"](ae)||xn["CJK Radicals Supplement"](ae)||xn["CJK Strokes"](ae)||xn["CJK Symbols and Punctuation"](ae)||xn["CJK Unified Ideographs Extension A"](ae)||xn["CJK Unified Ideographs"](ae)||xn["Enclosed CJK Letters and Months"](ae)||xn["Halfwidth and Fullwidth Forms"](ae)||xn.Hiragana(ae)||xn["Ideographic Description Characters"](ae)||xn["Kangxi Radicals"](ae)||xn["Katakana Phonetic Extensions"](ae)||xn.Katakana(ae)||xn["Vertical Forms"](ae)||xn["Yi Radicals"](ae)||xn["Yi Syllables"](ae)));(Vfe[Ee]||De||Se.imageName)&&V.push(Q8(ye+1,ne,Y,V,Wfe(Ee,f.getCharCode(ye+1),De&&J),!1))}}var ae;return eV(Q8(f.length(),ne,Y,V,0,!0))}function bL(f){let u=.5,m=.5;switch(f){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":m=1;break;case"top":case"top-right":case"top-left":m=0}return{horizontalAlign:u,verticalAlign:m}}function Hfe(f,u,m,_,P){if(!_&&!P)return;const N=f[m],z=(f[m].x+N.metrics.advance*N.scale)*_;for(let V=u;V<=m;V++)f[V].x-=z,f[V].y+=P}function Gfe(f,u,m){const{horizontalAlign:_,verticalAlign:P}=bL(m),N=u[0]-f.displaySize[0]*_,z=u[1]-f.displaySize[1]*P;return{image:f,top:z,bottom:z+f.displaySize[1],left:N,right:N+f.displaySize[0]}}function tV(f,u,m,_,P,N){const z=f.image;let V;if(z.content){const He=z.content,Ye=z.pixelRatio||1;V=[He[0]/Ye,He[1]/Ye,z.displaySize[0]-He[2]/Ye,z.displaySize[1]-He[3]/Ye]}const Y=u.left*N,J=u.right*N;let ne,ae,ye,Se;m==="width"||m==="both"?(Se=P[0]+Y-_[3],ae=P[0]+J+_[1]):(Se=P[0]+(Y+J-z.displaySize[0])/2,ae=Se+z.displaySize[0]);const Ee=u.top*N,De=u.bottom*N;return m==="height"||m==="both"?(ne=P[1]+Ee-_[0],ye=P[1]+De+_[2]):(ne=P[1]+(Ee+De-z.displaySize[1])/2,ye=ne+z.displaySize[1]),{image:z,top:ne,right:ae,bottom:ye,left:Se,collisionPadding:V}}const uw=255,eh=128,qm=uw*eh;function nV(f,u){const{expression:m}=u;if(m.kind==="constant")return{kind:"constant",layoutSize:m.evaluate(new Ei(f+1))};if(m.kind==="source")return{kind:"source"};{const{zoomStops:_,interpolationType:P}=m;let N=0;for(;N<_.length&&_[N]<=f;)N++;N=Math.max(0,N-1);let z=N;for(;z<_.length&&_[z]<f+1;)z++;z=Math.min(_.length-1,z);const V=_[N],Y=_[z];return m.kind==="composite"?{kind:"composite",minZoom:V,maxZoom:Y,interpolationType:P}:{kind:"camera",minZoom:V,maxZoom:Y,minSize:m.evaluate(new Ei(V)),maxSize:m.evaluate(new Ei(Y)),interpolationType:P}}}function wL(f,u,m){let _="never";const P=f.get(u);return P?_=P:f.get(m)&&(_="always"),_}const qfe=br.VectorTileFeature.types,Yfe=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function rT(f,u,m,_,P,N,z,V,Y,J,ne,ae,ye){const Se=V?Math.min(qm,Math.round(V[0])):0,Ee=V?Math.min(qm,Math.round(V[1])):0;f.emplaceBack(u,m,Math.round(32*_),Math.round(32*P),N,z,(Se<<1)+(Y?1:0),Ee,16*J,16*ne,256*ae,256*ye)}function SL(f,u,m){f.emplaceBack(u.x,u.y,m),f.emplaceBack(u.x,u.y,m),f.emplaceBack(u.x,u.y,m),f.emplaceBack(u.x,u.y,m)}function Xfe(f){for(const u of f.sections)if(qy(u.text))return!0;return!1}class ML{constructor(u){this.layoutVertexArray=new Er,this.indexArray=new Bo,this.programConfigurations=u,this.segments=new li,this.dynamicLayoutVertexArray=new vr,this.opacityVertexArray=new Tr,this.hasVisibleVertices=!1,this.placedSymbolArray=new at}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(u,m,_,P){this.isEmpty()||(_&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Tfe.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,m),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,Cfe.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,Yfe,!0),this.opacityVertexBuffer.itemSize=1),(_||P)&&this.programConfigurations.upload(u))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}wn("SymbolBuffers",ML);class EL{constructor(u,m,_){this.layoutVertexArray=new u,this.layoutAttributes=m,this.indexArray=new _,this.segments=new li,this.collisionVertexArray=new mi}upload(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,Afe.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}wn("CollisionBuffers",EL);class hx{constructor(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(z=>z.id),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=iv([]),this.placementViewportMatrix=iv([]);const m=this.layers[0]._unevaluatedLayout._values;this.textSizeData=nV(this.zoom,m["text-size"]),this.iconSizeData=nV(this.zoom,m["icon-size"]);const _=this.layers[0].layout,P=_.get("symbol-sort-key"),N=_.get("symbol-z-order");this.canOverlap=wL(_,"text-overlap","text-allow-overlap")!=="never"||wL(_,"icon-overlap","icon-allow-overlap")!=="never"||_.get("text-ignore-placement")||_.get("icon-ignore-placement"),this.sortFeaturesByKey=N!=="viewport-y"&&!P.isConstant(),this.sortFeaturesByY=(N==="viewport-y"||N==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,_.get("symbol-placement")==="point"&&(this.writingModes=_.get("text-writing-mode").map(z=>s.ai[z])),this.stateDependentLayerIds=this.layers.filter(z=>z.isStateDependent()).map(z=>z.id),this.sourceID=u.sourceID}createArrays(){this.text=new ML(new vo(this.layers,this.zoom,u=>/^text/.test(u))),this.icon=new ML(new vo(this.layers,this.zoom,u=>/^icon/.test(u))),this.glyphOffsetArray=new ft,this.lineVertexArray=new At,this.symbolInstances=new Ge,this.textAnchorOffsets=new qt}calculateGlyphDependencies(u,m,_,P,N){for(let z=0;z<u.length;z++)if(m[u.charCodeAt(z)]=!0,(_||P)&&N){const V=aw[u.charAt(z)];V&&(m[V.charCodeAt(0)]=!0)}}populate(u,m,_){const P=this.layers[0],N=P.layout,z=N.get("text-font"),V=N.get("text-field"),Y=N.get("icon-image"),J=(V.value.kind!=="constant"||V.value.value instanceof Yr&&!V.value.value.isEmpty()||V.value.value.toString().length>0)&&(z.value.kind!=="constant"||z.value.value.length>0),ne=Y.value.kind!=="constant"||!!Y.value.value||Object.keys(Y.parameters).length>0,ae=N.get("symbol-sort-key");if(this.features=[],!J&&!ne)return;const ye=m.iconDependencies,Se=m.glyphDependencies,Ee=m.availableImages,De=new Ei(this.zoom);for(const{feature:He,id:Ye,index:pt,sourceLayerIndex:nt}of u){const xt=P._featureFilter.needGeometry,kt=jc(He,xt);if(!P._featureFilter.filter(De,kt,_))continue;let Yt,bn;if(xt||(kt.geometry=Nd(He)),J){const _n=P.getValueAndResolveTokens("text-field",kt,_,Ee),vn=Yr.factory(_n);Xfe(vn)&&(this.hasRTLText=!0),(!this.hasRTLText||Rm()==="unavailable"||this.hasRTLText&&Ta.isParsed())&&(Yt=kfe(vn,P,kt))}if(ne){const _n=P.getValueAndResolveTokens("icon-image",kt,_,Ee);bn=_n instanceof tr?_n:tr.fromString(_n)}if(!Yt&&!bn)continue;const zn=this.sortFeaturesByKey?ae.evaluate(kt,{},_):void 0;if(this.features.push({id:Ye,text:Yt,icon:bn,index:pt,sourceLayerIndex:nt,geometry:kt.geometry,properties:He.properties,type:qfe[He.type],sortKey:zn}),bn&&(ye[bn.name]=!0),Yt){const _n=z.evaluate(kt,{},_).join(","),vn=N.get("text-rotation-alignment")!=="viewport"&&N.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(s.ai.vertical)>=0;for(const fn of Yt.sections)if(fn.image)ye[fn.image.name]=!0;else{const Pn=Tm(Yt.toString()),mn=fn.fontStack||_n,rn=Se[mn]=Se[mn]||{};this.calculateGlyphDependencies(fn.text,rn,vn,this.allowVerticalPlacement,Pn)}}}N.get("symbol-placement")==="line"&&(this.features=function(He){const Ye={},pt={},nt=[];let xt=0;function kt(_n){nt.push(He[_n]),xt++}function Yt(_n,vn,fn){const Pn=pt[_n];return delete pt[_n],pt[vn]=Pn,nt[Pn].geometry[0].pop(),nt[Pn].geometry[0]=nt[Pn].geometry[0].concat(fn[0]),Pn}function bn(_n,vn,fn){const Pn=Ye[vn];return delete Ye[vn],Ye[_n]=Pn,nt[Pn].geometry[0].shift(),nt[Pn].geometry[0]=fn[0].concat(nt[Pn].geometry[0]),Pn}function zn(_n,vn,fn){const Pn=fn?vn[0][vn[0].length-1]:vn[0][0];return`${_n}:${Pn.x}:${Pn.y}`}for(let _n=0;_n<He.length;_n++){const vn=He[_n],fn=vn.geometry,Pn=vn.text?vn.text.toString():null;if(!Pn){kt(_n);continue}const mn=zn(Pn,fn),rn=zn(Pn,fn,!0);if(mn in pt&&rn in Ye&&pt[mn]!==Ye[rn]){const Qn=bn(mn,rn,fn),Un=Yt(mn,rn,nt[Qn].geometry);delete Ye[mn],delete pt[rn],pt[zn(Pn,nt[Un].geometry,!0)]=Un,nt[Qn].geometry=null}else mn in pt?Yt(mn,rn,fn):rn in Ye?bn(mn,rn,fn):(kt(_n),Ye[mn]=xt-1,pt[rn]=xt-1)}return nt.filter(_n=>_n.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((He,Ye)=>He.sortKey-Ye.sortKey)}update(u,m,_){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,m,this.layers,_),this.icon.programConfigurations.updatePaintArrays(u,m,this.layers,_))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(u,m){const _=this.lineVertexArray.length;if(u.segment!==void 0){let P=u.dist(m[u.segment+1]),N=u.dist(m[u.segment]);const z={};for(let V=u.segment+1;V<m.length;V++)z[V]={x:m[V].x,y:m[V].y,tileUnitDistanceFromAnchor:P},V<m.length-1&&(P+=m[V+1].dist(m[V]));for(let V=u.segment||0;V>=0;V--)z[V]={x:m[V].x,y:m[V].y,tileUnitDistanceFromAnchor:N},V>0&&(N+=m[V-1].dist(m[V]));for(let V=0;V<m.length;V++){const Y=z[V];this.lineVertexArray.emplaceBack(Y.x,Y.y,Y.tileUnitDistanceFromAnchor)}}return{lineStartIndex:_,lineLength:this.lineVertexArray.length-_}}addSymbols(u,m,_,P,N,z,V,Y,J,ne,ae,ye){const Se=u.indexArray,Ee=u.layoutVertexArray,De=u.segments.prepareSegment(4*m.length,Ee,Se,this.canOverlap?z.sortKey:void 0),He=this.glyphOffsetArray.length,Ye=De.vertexLength,pt=this.allowVerticalPlacement&&V===s.ai.vertical?Math.PI/2:0,nt=z.text&&z.text.sections;for(let xt=0;xt<m.length;xt++){const{tl:kt,tr:Yt,bl:bn,br:zn,tex:_n,pixelOffsetTL:vn,pixelOffsetBR:fn,minFontScaleX:Pn,minFontScaleY:mn,glyphOffset:rn,isSDF:Qn,sectionIndex:Un}=m[xt],kr=De.vertexLength,Xi=rn[1];rT(Ee,Y.x,Y.y,kt.x,Xi+kt.y,_n.x,_n.y,_,Qn,vn.x,vn.y,Pn,mn),rT(Ee,Y.x,Y.y,Yt.x,Xi+Yt.y,_n.x+_n.w,_n.y,_,Qn,fn.x,vn.y,Pn,mn),rT(Ee,Y.x,Y.y,bn.x,Xi+bn.y,_n.x,_n.y+_n.h,_,Qn,vn.x,fn.y,Pn,mn),rT(Ee,Y.x,Y.y,zn.x,Xi+zn.y,_n.x+_n.w,_n.y+_n.h,_,Qn,fn.x,fn.y,Pn,mn),SL(u.dynamicLayoutVertexArray,Y,pt),Se.emplaceBack(kr,kr+1,kr+2),Se.emplaceBack(kr+1,kr+2,kr+3),De.vertexLength+=4,De.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(rn[0]),xt!==m.length-1&&Un===m[xt+1].sectionIndex||u.programConfigurations.populatePaintArrays(Ee.length,z,z.index,{},ye,nt&&nt[Un])}u.placedSymbolArray.emplaceBack(Y.x,Y.y,He,this.glyphOffsetArray.length-He,Ye,J,ne,Y.segment,_?_[0]:0,_?_[1]:0,P[0],P[1],V,0,!1,0,ae)}_addCollisionDebugVertex(u,m,_,P,N,z){return m.emplaceBack(0,0),u.emplaceBack(_.x,_.y,P,N,Math.round(z.x),Math.round(z.y))}addCollisionDebugVertices(u,m,_,P,N,z,V){const Y=N.segments.prepareSegment(4,N.layoutVertexArray,N.indexArray),J=Y.vertexLength,ne=N.layoutVertexArray,ae=N.collisionVertexArray,ye=V.anchorX,Se=V.anchorY;this._addCollisionDebugVertex(ne,ae,z,ye,Se,new g(u,m)),this._addCollisionDebugVertex(ne,ae,z,ye,Se,new g(_,m)),this._addCollisionDebugVertex(ne,ae,z,ye,Se,new g(_,P)),this._addCollisionDebugVertex(ne,ae,z,ye,Se,new g(u,P)),Y.vertexLength+=4;const Ee=N.indexArray;Ee.emplaceBack(J,J+1),Ee.emplaceBack(J+1,J+2),Ee.emplaceBack(J+2,J+3),Ee.emplaceBack(J+3,J),Y.primitiveLength+=4}addDebugCollisionBoxes(u,m,_,P){for(let N=u;N<m;N++){const z=this.collisionBoxArray.get(N);this.addCollisionDebugVertices(z.x1,z.y1,z.x2,z.y2,P?this.textCollisionBox:this.iconCollisionBox,z.anchorPoint,_)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new EL(ro,$8.members,yo),this.iconCollisionBox=new EL(ro,$8.members,yo);for(let u=0;u<this.symbolInstances.length;u++){const m=this.symbolInstances.get(u);this.addDebugCollisionBoxes(m.textBoxStartIndex,m.textBoxEndIndex,m,!0),this.addDebugCollisionBoxes(m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m,!0),this.addDebugCollisionBoxes(m.iconBoxStartIndex,m.iconBoxEndIndex,m,!1),this.addDebugCollisionBoxes(m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex,m,!1)}}_deserializeCollisionBoxesForSymbol(u,m,_,P,N,z,V,Y,J){const ne={};for(let ae=m;ae<_;ae++){const ye=u.get(ae);ne.textBox={x1:ye.x1,y1:ye.y1,x2:ye.x2,y2:ye.y2,anchorPointX:ye.anchorPointX,anchorPointY:ye.anchorPointY},ne.textFeatureIndex=ye.featureIndex;break}for(let ae=P;ae<N;ae++){const ye=u.get(ae);ne.verticalTextBox={x1:ye.x1,y1:ye.y1,x2:ye.x2,y2:ye.y2,anchorPointX:ye.anchorPointX,anchorPointY:ye.anchorPointY},ne.verticalTextFeatureIndex=ye.featureIndex;break}for(let ae=z;ae<V;ae++){const ye=u.get(ae);ne.iconBox={x1:ye.x1,y1:ye.y1,x2:ye.x2,y2:ye.y2,anchorPointX:ye.anchorPointX,anchorPointY:ye.anchorPointY},ne.iconFeatureIndex=ye.featureIndex;break}for(let ae=Y;ae<J;ae++){const ye=u.get(ae);ne.verticalIconBox={x1:ye.x1,y1:ye.y1,x2:ye.x2,y2:ye.y2,anchorPointX:ye.anchorPointX,anchorPointY:ye.anchorPointY},ne.verticalIconFeatureIndex=ye.featureIndex;break}return ne}deserializeCollisionBoxes(u){this.collisionArrays=[];for(let m=0;m<this.symbolInstances.length;m++){const _=this.symbolInstances.get(m);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,_.textBoxStartIndex,_.textBoxEndIndex,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_.iconBoxStartIndex,_.iconBoxEndIndex,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(u,m){const _=u.placedSymbolArray.get(m),P=_.vertexStartIndex+4*_.numGlyphs;for(let N=_.vertexStartIndex;N<P;N+=4)u.indexArray.emplaceBack(N,N+1,N+2),u.indexArray.emplaceBack(N+1,N+2,N+3)}getSortedSymbolIndexes(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const m=Math.sin(u),_=Math.cos(u),P=[],N=[],z=[];for(let V=0;V<this.symbolInstances.length;++V){z.push(V);const Y=this.symbolInstances.get(V);P.push(0|Math.round(m*Y.anchorX+_*Y.anchorY)),N.push(Y.featureIndex)}return z.sort((V,Y)=>P[V]-P[Y]||N[Y]-N[V]),z}addToSortKeyRanges(u,m){const _=this.sortKeyRanges[this.sortKeyRanges.length-1];_&&_.sortKey===m?_.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:m,symbolInstanceStart:u,symbolInstanceEnd:u+1})}sortFeatures(u){if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const m of this.symbolInstanceIndexes){const _=this.symbolInstances.get(m);this.featureSortOrder.push(_.featureIndex),[_.rightJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.leftJustifiedTextSymbolIndex].forEach((P,N,z)=>{P>=0&&z.indexOf(P)===N&&this.addIndicesForPlacedSymbol(this.text,P)}),_.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,_.verticalPlacedTextSymbolIndex),_.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,_.placedIconSymbolIndex),_.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,_.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let rV,iV;wn("SymbolBucket",hx,{omit:["layers","collisionBoxArray","features","compareText"]}),hx.MAX_GLYPHS=65535,hx.addDynamicAttributes=SL;var TL={get paint(){return iV=iV||new so({"icon-opacity":new nr(Je.paint_symbol["icon-opacity"]),"icon-color":new nr(Je.paint_symbol["icon-color"]),"icon-halo-color":new nr(Je.paint_symbol["icon-halo-color"]),"icon-halo-width":new nr(Je.paint_symbol["icon-halo-width"]),"icon-halo-blur":new nr(Je.paint_symbol["icon-halo-blur"]),"icon-translate":new Nn(Je.paint_symbol["icon-translate"]),"icon-translate-anchor":new Nn(Je.paint_symbol["icon-translate-anchor"]),"text-opacity":new nr(Je.paint_symbol["text-opacity"]),"text-color":new nr(Je.paint_symbol["text-color"],{runtimeType:Qt,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new nr(Je.paint_symbol["text-halo-color"]),"text-halo-width":new nr(Je.paint_symbol["text-halo-width"]),"text-halo-blur":new nr(Je.paint_symbol["text-halo-blur"]),"text-translate":new Nn(Je.paint_symbol["text-translate"]),"text-translate-anchor":new Nn(Je.paint_symbol["text-translate-anchor"])})},get layout(){return rV=rV||new so({"symbol-placement":new Nn(Je.layout_symbol["symbol-placement"]),"symbol-spacing":new Nn(Je.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Nn(Je.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new nr(Je.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Nn(Je.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Nn(Je.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Nn(Je.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Nn(Je.layout_symbol["icon-ignore-placement"]),"icon-optional":new Nn(Je.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Nn(Je.layout_symbol["icon-rotation-alignment"]),"icon-size":new nr(Je.layout_symbol["icon-size"]),"icon-text-fit":new Nn(Je.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Nn(Je.layout_symbol["icon-text-fit-padding"]),"icon-image":new nr(Je.layout_symbol["icon-image"]),"icon-rotate":new nr(Je.layout_symbol["icon-rotate"]),"icon-padding":new nr(Je.layout_symbol["icon-padding"]),"icon-keep-upright":new Nn(Je.layout_symbol["icon-keep-upright"]),"icon-offset":new nr(Je.layout_symbol["icon-offset"]),"icon-anchor":new nr(Je.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Nn(Je.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Nn(Je.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Nn(Je.layout_symbol["text-rotation-alignment"]),"text-field":new nr(Je.layout_symbol["text-field"]),"text-font":new nr(Je.layout_symbol["text-font"]),"text-size":new nr(Je.layout_symbol["text-size"]),"text-max-width":new nr(Je.layout_symbol["text-max-width"]),"text-line-height":new Nn(Je.layout_symbol["text-line-height"]),"text-letter-spacing":new nr(Je.layout_symbol["text-letter-spacing"]),"text-justify":new nr(Je.layout_symbol["text-justify"]),"text-radial-offset":new nr(Je.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Nn(Je.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new nr(Je.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new nr(Je.layout_symbol["text-anchor"]),"text-max-angle":new Nn(Je.layout_symbol["text-max-angle"]),"text-writing-mode":new Nn(Je.layout_symbol["text-writing-mode"]),"text-rotate":new nr(Je.layout_symbol["text-rotate"]),"text-padding":new Nn(Je.layout_symbol["text-padding"]),"text-keep-upright":new Nn(Je.layout_symbol["text-keep-upright"]),"text-transform":new nr(Je.layout_symbol["text-transform"]),"text-offset":new nr(Je.layout_symbol["text-offset"]),"text-allow-overlap":new Nn(Je.layout_symbol["text-allow-overlap"]),"text-overlap":new Nn(Je.layout_symbol["text-overlap"]),"text-ignore-placement":new Nn(Je.layout_symbol["text-ignore-placement"]),"text-optional":new Nn(Je.layout_symbol["text-optional"])})}};class oV{constructor(u){if(u.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=u.property.overrides?u.property.overrides.runtimeType:Ie,this.defaultValue=u}evaluate(u){if(u.formattedSection){const m=this.defaultValue.property.overrides;if(m&&m.hasOverride(u.formattedSection))return m.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default}eachChild(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}wn("FormatSectionOverride",oV,{omit:["defaultValue"]});class iT extends go{constructor(u){super(u,TL)}recalculate(u,m){if(super.recalculate(u,m),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const _=this.layout.get("text-writing-mode");if(_){const P=[];for(const N of _)P.indexOf(N)<0&&P.push(N);this.layout._values["text-writing-mode"]=P}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(u,m,_,P){const N=this.layout.get(u).evaluate(m,{},_,P),z=this._unevaluatedLayout._values[u];return z.isDataDriven()||Ha(z.value)||!N?N:function(V,Y){return Y.replace(/{([^{}]+)}/g,(J,ne)=>V&&ne in V?String(V[ne]):"")}(m.properties,N)}createBucket(u){return new hx(u)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const u of TL.paint.overridableProperties){if(!iT.hasPaintOverride(this.layout,u))continue;const m=this.paint.get(u),_=new oV(m),P=new El(_,m.property.specification);let N=null;N=m.value.kind==="constant"||m.value.kind==="source"?new wm("source",P):new Lf("composite",P,m.value.zoomStops),this.paint._values[u]=new Hs(m.property,N,m.parameters)}}_handleOverridablePaintPropertyUpdate(u,m,_){return!(!this.layout||m.isDataDriven()||_.isDataDriven())&&iT.hasPaintOverride(this.layout,u)}static hasPaintOverride(u,m){const _=u.get("text-field"),P=TL.paint.properties[m];let N=!1;const z=V=>{for(const Y of V)if(P.overrides&&P.overrides.hasOverride(Y))return void(N=!0)};if(_.value.kind==="constant"&&_.value.value instanceof Yr)z(_.value.value.sections);else if(_.value.kind==="source"){const V=J=>{N||(J instanceof Si&&Ur(J.value)===we?z(J.value.sections):J instanceof If?z(J.sections):J.eachChild(V))},Y=_.value;Y._styleExpression&&V(Y._styleExpression.expression)}return N}}let sV;var Kfe={get paint(){return sV=sV||new so({"background-color":new Nn(Je.paint_background["background-color"]),"background-pattern":new Lm(Je.paint_background["background-pattern"]),"background-opacity":new Nn(Je.paint_background["background-opacity"])})}};class Zfe extends go{constructor(u){super(u,Kfe)}}let aV;var Jfe={get paint(){return aV=aV||new so({"raster-opacity":new Nn(Je.paint_raster["raster-opacity"]),"raster-hue-rotate":new Nn(Je.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Nn(Je.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Nn(Je.paint_raster["raster-brightness-max"]),"raster-saturation":new Nn(Je.paint_raster["raster-saturation"]),"raster-contrast":new Nn(Je.paint_raster["raster-contrast"]),"raster-resampling":new Nn(Je.paint_raster["raster-resampling"]),"raster-fade-duration":new Nn(Je.paint_raster["raster-fade-duration"])})}};class Qfe extends go{constructor(u){super(u,Jfe)}}class ehe extends go{constructor(u){super(u,{}),this.onAdd=m=>{this.implementation.onAdd&&this.implementation.onAdd(m,m.painter.context.gl)},this.onRemove=m=>{this.implementation.onRemove&&this.implementation.onRemove(m,m.painter.context.gl)},this.implementation=u}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class the{constructor(u){this._callback=u,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const CL=63710088e-1;class Ym{constructor(u,m){if(isNaN(u)||isNaN(m))throw new Error(`Invalid LngLat object: (${u}, ${m})`);if(this.lng=+u,this.lat=+m,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ym(B(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(u){const m=Math.PI/180,_=this.lat*m,P=u.lat*m,N=Math.sin(_)*Math.sin(P)+Math.cos(_)*Math.cos(P)*Math.cos((u.lng-this.lng)*m);return CL*Math.acos(Math.min(N,1))}static convert(u){if(u instanceof Ym)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new Ym(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new Ym(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const lV=2*Math.PI*CL;function cV(f){return lV*Math.cos(f*Math.PI/180)}function uV(f){return(180+f)/360}function dV(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function fV(f,u){return f/cV(u)}function hV(f){return 360*f-180}function AL(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}class oT{constructor(u,m,_=0){this.x=+u,this.y=+m,this.z=+_}static fromLngLat(u,m=0){const _=Ym.convert(u);return new oT(uV(_.lng),dV(_.lat),fV(m,_.lat))}toLngLat(){return new Ym(hV(this.x),AL(this.y))}toAltitude(){return this.z*cV(AL(this.y))}meterInMercatorCoordinateUnits(){return 1/lV*(u=AL(this.y),1/Math.cos(u*Math.PI/180));var u}}function pV(f,u,m){var _=2*Math.PI*6378137/256/Math.pow(2,m);return[f*_-2*Math.PI*6378137/2,u*_-2*Math.PI*6378137/2]}class PL{constructor(u,m,_){if(u<0||u>25||_<0||_>=Math.pow(2,u)||m<0||m>=Math.pow(2,u))throw new Error(`x=${m}, y=${_}, z=${u} outside of bounds. 0<=x<${Math.pow(2,u)}, 0<=y<${Math.pow(2,u)} 0<=z<=25 `);this.z=u,this.x=m,this.y=_,this.key=dw(0,u,u,m,_)}equals(u){return this.z===u.z&&this.x===u.x&&this.y===u.y}url(u,m,_){const P=(z=this.y,V=this.z,Y=pV(256*(N=this.x),256*(z=Math.pow(2,V)-z-1),V),J=pV(256*(N+1),256*(z+1),V),Y[0]+","+Y[1]+","+J[0]+","+J[1]);var N,z,V,Y,J;const ne=function(ae,ye,Se){let Ee,De="";for(let He=ae;He>0;He--)Ee=1<<He-1,De+=(ye&Ee?1:0)+(Se&Ee?2:0);return De}(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(_==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,m>1?"@2x":"").replace(/{quadkey}/g,ne).replace(/{bbox-epsg-3857}/g,P)}isChildOf(u){const m=this.z-u.z;return m>0&&u.x===this.x>>m&&u.y===this.y>>m}getTilePoint(u){const m=Math.pow(2,this.z);return new g((u.x*m-this.x)*Yi,(u.y*m-this.y)*Yi)}toString(){return`${this.z}/${this.x}/${this.y}`}}class mV{constructor(u,m){this.wrap=u,this.canonical=m,this.key=dw(u,m.z,m.z,m.x,m.y)}}class Vc{constructor(u,m,_,P,N){if(u<_)throw new Error(`overscaledZ should be >= z; overscaledZ = ${u}; z = ${_}`);this.overscaledZ=u,this.wrap=m,this.canonical=new PL(_,+P,+N),this.key=dw(m,u,_,P,N)}clone(){return new Vc(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)}scaledTo(u){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-u;return u>this.canonical.z?new Vc(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Vc(u,this.wrap,u,this.canonical.x>>m,this.canonical.y>>m)}calculateScaledKey(u,m){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const _=this.canonical.z-u;return u>this.canonical.z?dw(this.wrap*+m,u,this.canonical.z,this.canonical.x,this.canonical.y):dw(this.wrap*+m,u,u,this.canonical.x>>_,this.canonical.y>>_)}isChildOf(u){if(u.wrap!==this.wrap)return!1;const m=this.canonical.z-u.canonical.z;return u.overscaledZ===0||u.overscaledZ<this.overscaledZ&&u.canonical.x===this.canonical.x>>m&&u.canonical.y===this.canonical.y>>m}children(u){if(this.overscaledZ>=u)return[new Vc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const m=this.canonical.z+1,_=2*this.canonical.x,P=2*this.canonical.y;return[new Vc(m,this.wrap,m,_,P),new Vc(m,this.wrap,m,_+1,P),new Vc(m,this.wrap,m,_,P+1),new Vc(m,this.wrap,m,_+1,P+1)]}isLessThan(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))}wrapped(){return new Vc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(u){return new Vc(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new mV(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(u){return this.canonical.getTilePoint(new oT(u.x-this.wrap,u.y))}}function dw(f,u,m,_,P){(f*=2)<0&&(f=-1*f-1);const N=1<<m;return(N*N*f+N*P+_).toString(36)+m.toString(36)+u.toString(36)}wn("CanonicalTileID",PL),wn("OverscaledTileID",Vc,{omit:["posMatrix"]});class gV{constructor(u,m,_,P=1,N=1,z=1,V=0){if(this.uid=u,m.height!==m.width)throw new RangeError("DEM tiles must be square");if(_&&!["mapbox","terrarium","custom"].includes(_))return void ie(`"${_}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=m.height;const Y=this.dim=m.height-2;switch(this.data=new Uint32Array(m.data.buffer),_){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=P,this.greenFactor=N,this.blueFactor=z,this.baseShift=V;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let J=0;J<Y;J++)this.data[this._idx(-1,J)]=this.data[this._idx(0,J)],this.data[this._idx(Y,J)]=this.data[this._idx(Y-1,J)],this.data[this._idx(J,-1)]=this.data[this._idx(J,0)],this.data[this._idx(J,Y)]=this.data[this._idx(J,Y-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(Y,-1)]=this.data[this._idx(Y-1,0)],this.data[this._idx(-1,Y)]=this.data[this._idx(0,Y-1)],this.data[this._idx(Y,Y)]=this.data[this._idx(Y-1,Y-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let J=0;J<Y;J++)for(let ne=0;ne<Y;ne++){const ae=this.get(J,ne);ae>this.max&&(this.max=ae),ae<this.min&&(this.min=ae)}}get(u,m){const _=new Uint8Array(this.data.buffer),P=4*this._idx(u,m);return this.unpack(_[P],_[P+1],_[P+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(u,m){if(u<-1||u>=this.dim+1||m<-1||m>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(m+1)*this.stride+(u+1)}unpack(u,m,_){return u*this.redFactor+m*this.greenFactor+_*this.blueFactor-this.baseShift}getPixels(){return new Xa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(u,m,_){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");let P=m*this.dim,N=m*this.dim+this.dim,z=_*this.dim,V=_*this.dim+this.dim;switch(m){case-1:P=N-1;break;case 1:N=P+1}switch(_){case-1:z=V-1;break;case 1:V=z+1}const Y=-m*this.dim,J=-_*this.dim;for(let ne=z;ne<V;ne++)for(let ae=P;ae<N;ae++)this.data[this._idx(ae,ne)]=u.data[this._idx(ae+Y,ne+J)]}}wn("DEMData",gV);class yV{constructor(u){this._stringToNumber={},this._numberToString=[];for(let m=0;m<u.length;m++){const _=u[m];this._stringToNumber[_]=m,this._numberToString[m]=_}}encode(u){return this._stringToNumber[u]}decode(u){if(u>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${u} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[u]}}class vV{constructor(u,m,_,P,N){this.type="Feature",this._vectorTileFeature=u,u._z=m,u._x=_,u._y=P,this.properties=u.properties,this.id=N}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(u){this._geometry=u}toJSON(){const u={geometry:this.geometry};for(const m in this)m!=="_geometry"&&m!=="_vectorTileFeature"&&(u[m]=this[m]);return u}}class xV{constructor(u,m){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new Us(Yi,16,0),this.grid3D=new Us(Yi,16,0),this.featureIndexArray=new Xt,this.promoteId=m}insert(u,m,_,P,N,z){const V=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(_,P,N);const Y=z?this.grid3D:this.grid;for(let J=0;J<m.length;J++){const ne=m[J],ae=[1/0,1/0,-1/0,-1/0];for(let ye=0;ye<ne.length;ye++){const Se=ne[ye];ae[0]=Math.min(ae[0],Se.x),ae[1]=Math.min(ae[1],Se.y),ae[2]=Math.max(ae[2],Se.x),ae[3]=Math.max(ae[3],Se.y)}ae[0]<Yi&&ae[1]<Yi&&ae[2]>=0&&ae[3]>=0&&Y.insert(V,ae[0],ae[1],ae[2],ae[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new br.VectorTile(new yL(this.rawTileData)).layers,this.sourceLayerCoder=new yV(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(u,m,_,P){this.loadVTLayers();const N=u.params||{},z=Yi/u.tileSize/u.scale,V=wa(N.filter),Y=u.queryGeometry,J=u.queryPadding*z,ne=bV(Y),ae=this.grid.query(ne.minX-J,ne.minY-J,ne.maxX+J,ne.maxY+J),ye=bV(u.cameraQueryGeometry),Se=this.grid3D.query(ye.minX-J,ye.minY-J,ye.maxX+J,ye.maxY+J,(He,Ye,pt,nt)=>function(xt,kt,Yt,bn,zn){for(const vn of xt)if(kt<=vn.x&&Yt<=vn.y&&bn>=vn.x&&zn>=vn.y)return!0;const _n=[new g(kt,Yt),new g(kt,zn),new g(bn,zn),new g(bn,Yt)];if(xt.length>2){for(const vn of _n)if(Hf(xt,vn))return!0}for(let vn=0;vn<xt.length-1;vn++)if(ox(xt[vn],xt[vn+1],_n))return!0;return!1}(u.cameraQueryGeometry,He-J,Ye-J,pt+J,nt+J));for(const He of Se)ae.push(He);ae.sort(nhe);const Ee={};let De;for(let He=0;He<ae.length;He++){const Ye=ae[He];if(Ye===De)continue;De=Ye;const pt=this.featureIndexArray.get(Ye);let nt=null;this.loadMatchingFeature(Ee,pt.bucketIndex,pt.sourceLayerIndex,pt.featureIndex,V,N.layers,N.availableImages,m,_,P,(xt,kt,Yt)=>(nt||(nt=Nd(xt)),kt.queryIntersectsFeature(Y,xt,Yt,nt,this.z,u.transform,z,u.pixelPosMatrix)))}return Ee}loadMatchingFeature(u,m,_,P,N,z,V,Y,J,ne,ae){const ye=this.bucketLayerIDs[m];if(z&&!function(He,Ye){for(let pt=0;pt<He.length;pt++)if(Ye.indexOf(He[pt])>=0)return!0;return!1}(z,ye))return;const Se=this.sourceLayerCoder.decode(_),Ee=this.vtLayers[Se].feature(P);if(N.needGeometry){const He=jc(Ee,!0);if(!N.filter(new Ei(this.tileID.overscaledZ),He,this.tileID.canonical))return}else if(!N.filter(new Ei(this.tileID.overscaledZ),Ee))return;const De=this.getId(Ee,Se);for(let He=0;He<ye.length;He++){const Ye=ye[He];if(z&&z.indexOf(Ye)<0)continue;const pt=Y[Ye];if(!pt)continue;let nt={};De&&ne&&(nt=ne.getState(pt.sourceLayer||"_geojsonTileLayer",De));const xt=U({},J[Ye]);xt.paint=_V(xt.paint,pt.paint,Ee,nt,V),xt.layout=_V(xt.layout,pt.layout,Ee,nt,V);const kt=!ae||ae(Ee,pt,nt);if(!kt)continue;const Yt=new vV(Ee,this.z,this.x,this.y,De);Yt.layer=xt;let bn=u[Ye];bn===void 0&&(bn=u[Ye]=[]),bn.push({featureIndex:P,feature:Yt,intersectionZ:kt})}}lookupSymbolFeatures(u,m,_,P,N,z,V,Y){const J={};this.loadVTLayers();const ne=wa(N);for(const ae of u)this.loadMatchingFeature(J,_,P,ae,ne,z,V,Y,m);return J}hasLayer(u){for(const m of this.bucketLayerIDs)for(const _ of m)if(u===_)return!0;return!1}getId(u,m){let _=u.id;return this.promoteId&&(_=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[m]],typeof _=="boolean"&&(_=Number(_))),_}}function _V(f,u,m,_,P){return j(f,(N,z)=>{const V=u instanceof Bf?u.get(z):null;return V&&V.evaluate?V.evaluate(m,_,P):V})}function bV(f){let u=1/0,m=1/0,_=-1/0,P=-1/0;for(const N of f)u=Math.min(u,N.x),m=Math.min(m,N.y),_=Math.max(_,N.x),P=Math.max(P,N.y);return{minX:u,minY:m,maxX:_,maxY:P}}function nhe(f,u){return u-f}function wV(f,u,m,_,P){const N=[];for(let z=0;z<f.length;z++){const V=f[z];let Y;for(let J=0;J<V.length-1;J++){let ne=V[J],ae=V[J+1];ne.x<u&&ae.x<u||(ne.x<u?ne=new g(u,ne.y+(u-ne.x)/(ae.x-ne.x)*(ae.y-ne.y))._round():ae.x<u&&(ae=new g(u,ne.y+(u-ne.x)/(ae.x-ne.x)*(ae.y-ne.y))._round()),ne.y<m&&ae.y<m||(ne.y<m?ne=new g(ne.x+(m-ne.y)/(ae.y-ne.y)*(ae.x-ne.x),m)._round():ae.y<m&&(ae=new g(ne.x+(m-ne.y)/(ae.y-ne.y)*(ae.x-ne.x),m)._round()),ne.x>=_&&ae.x>=_||(ne.x>=_?ne=new g(_,ne.y+(_-ne.x)/(ae.x-ne.x)*(ae.y-ne.y))._round():ae.x>=_&&(ae=new g(_,ne.y+(_-ne.x)/(ae.x-ne.x)*(ae.y-ne.y))._round()),ne.y>=P&&ae.y>=P||(ne.y>=P?ne=new g(ne.x+(P-ne.y)/(ae.y-ne.y)*(ae.x-ne.x),P)._round():ae.y>=P&&(ae=new g(ne.x+(P-ne.y)/(ae.y-ne.y)*(ae.x-ne.x),P)._round()),Y&&ne.equals(Y[Y.length-1])||(Y=[ne],N.push(Y)),Y.push(ae)))))}}return N}wn("FeatureIndex",xV,{omit:["rawTileData","sourceLayerCoder"]});class Xm extends g{constructor(u,m,_,P){super(u,m),this.angle=_,P!==void 0&&(this.segment=P)}clone(){return new Xm(this.x,this.y,this.angle,this.segment)}}function SV(f,u,m,_,P){if(u.segment===void 0||m===0)return!0;let N=u,z=u.segment+1,V=0;for(;V>-m/2;){if(z--,z<0)return!1;V-=f[z].dist(N),N=f[z]}V+=f[z].dist(f[z+1]),z++;const Y=[];let J=0;for(;V<m/2;){const ne=f[z],ae=f[z+1];if(!ae)return!1;let ye=f[z-1].angleTo(ne)-ne.angleTo(ae);for(ye=Math.abs((ye+3*Math.PI)%(2*Math.PI)-Math.PI),Y.push({distance:V,angleDelta:ye}),J+=ye;V-Y[0].distance>_;)J-=Y.shift().angleDelta;if(J>P)return!1;z++,V+=ne.dist(ae)}return!0}function MV(f){let u=0;for(let m=0;m<f.length-1;m++)u+=f[m].dist(f[m+1]);return u}function EV(f,u,m){return f?.6*u*m:0}function TV(f,u){return Math.max(f?f.right-f.left:0,u?u.right-u.left:0)}function rhe(f,u,m,_,P,N){const z=EV(m,P,N),V=TV(m,_)*N;let Y=0;const J=MV(f)/2;for(let ne=0;ne<f.length-1;ne++){const ae=f[ne],ye=f[ne+1],Se=ae.dist(ye);if(Y+Se>J){const Ee=(J-Y)/Se,De=Ts.number(ae.x,ye.x,Ee),He=Ts.number(ae.y,ye.y,Ee),Ye=new Xm(De,He,ye.angleTo(ae),ne);return Ye._round(),!z||SV(f,Ye,V,z,u)?Ye:void 0}Y+=Se}}function ihe(f,u,m,_,P,N,z,V,Y){const J=EV(_,N,z),ne=TV(_,P),ae=ne*z,ye=f[0].x===0||f[0].x===Y||f[0].y===0||f[0].y===Y;return u-ae<u/4&&(u=ae+u/4),CV(f,ye?u/2*V%u:(ne/2+2*N)*z*V%u,u,J,m,ae,ye,!1,Y)}function CV(f,u,m,_,P,N,z,V,Y){const J=N/2,ne=MV(f);let ae=0,ye=u-m,Se=[];for(let Ee=0;Ee<f.length-1;Ee++){const De=f[Ee],He=f[Ee+1],Ye=De.dist(He),pt=He.angleTo(De);for(;ye+m<ae+Ye;){ye+=m;const nt=(ye-ae)/Ye,xt=Ts.number(De.x,He.x,nt),kt=Ts.number(De.y,He.y,nt);if(xt>=0&&xt<Y&&kt>=0&&kt<Y&&ye-J>=0&&ye+J<=ne){const Yt=new Xm(xt,kt,pt,Ee);Yt._round(),_&&!SV(f,Yt,N,_,P)||Se.push(Yt)}}ae+=Ye}return V||Se.length||z||(Se=CV(f,ae/2,m,_,P,N,z,!0,Y)),Se}wn("Anchor",Xm);const px=kl;function AV(f,u,m,_){const P=[],N=f.image,z=N.pixelRatio,V=N.paddedRect.w-2*px,Y=N.paddedRect.h-2*px,J=f.right-f.left,ne=f.bottom-f.top,ae=N.stretchX||[[0,V]],ye=N.stretchY||[[0,Y]],Se=(fn,Pn)=>fn+Pn[1]-Pn[0],Ee=ae.reduce(Se,0),De=ye.reduce(Se,0),He=V-Ee,Ye=Y-De;let pt=0,nt=Ee,xt=0,kt=De,Yt=0,bn=He,zn=0,_n=Ye;if(N.content&&_){const fn=N.content;pt=sT(ae,0,fn[0]),xt=sT(ye,0,fn[1]),nt=sT(ae,fn[0],fn[2]),kt=sT(ye,fn[1],fn[3]),Yt=fn[0]-pt,zn=fn[1]-xt,bn=fn[2]-fn[0]-nt,_n=fn[3]-fn[1]-kt}const vn=(fn,Pn,mn,rn)=>{const Qn=aT(fn.stretch-pt,nt,J,f.left),Un=lT(fn.fixed-Yt,bn,fn.stretch,Ee),kr=aT(Pn.stretch-xt,kt,ne,f.top),Xi=lT(Pn.fixed-zn,_n,Pn.stretch,De),io=aT(mn.stretch-pt,nt,J,f.left),fs=lT(mn.fixed-Yt,bn,mn.stretch,Ee),hc=aT(rn.stretch-xt,kt,ne,f.top),Za=lT(rn.fixed-zn,_n,rn.stretch,De),Jo=new g(Qn,kr),Ks=new g(io,kr),aa=new g(io,hc),Ja=new g(Qn,hc),Qa=new g(Un/z,Xi/z),hs=new g(fs/z,Za/z),ps=u*Math.PI/180;if(ps){const Aa=Math.sin(ps),Il=Math.cos(ps),Rl=[Il,-Aa,Aa,Il];Jo._matMult(Rl),Ks._matMult(Rl),Ja._matMult(Rl),aa._matMult(Rl)}const Ca=fn.stretch+fn.fixed,el=Pn.stretch+Pn.fixed;return{tl:Jo,tr:Ks,bl:Ja,br:aa,tex:{x:N.paddedRect.x+px+Ca,y:N.paddedRect.y+px+el,w:mn.stretch+mn.fixed-Ca,h:rn.stretch+rn.fixed-el},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Qa,pixelOffsetBR:hs,minFontScaleX:bn/z/J,minFontScaleY:_n/z/ne,isSDF:m}};if(_&&(N.stretchX||N.stretchY)){const fn=PV(ae,He,Ee),Pn=PV(ye,Ye,De);for(let mn=0;mn<fn.length-1;mn++){const rn=fn[mn],Qn=fn[mn+1];for(let Un=0;Un<Pn.length-1;Un++)P.push(vn(rn,Pn[Un],Qn,Pn[Un+1]))}}else P.push(vn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:V+1},{fixed:0,stretch:Y+1}));return P}function sT(f,u,m){let _=0;for(const P of f)_+=Math.max(u,Math.min(m,P[1]))-Math.max(u,Math.min(m,P[0]));return _}function PV(f,u,m){const _=[{fixed:-px,stretch:0}];for(const[P,N]of f){const z=_[_.length-1];_.push({fixed:P-z.stretch,stretch:z.stretch}),_.push({fixed:P-z.stretch,stretch:z.stretch+(N-P)})}return _.push({fixed:u+px,stretch:m}),_}function aT(f,u,m,_){return f/u*m+_}function lT(f,u,m,_){return f-u*m/_}class cT{constructor(u,m,_,P,N,z,V,Y,J,ne){if(this.boxStartIndex=u.length,J){let ae=z.top,ye=z.bottom;const Se=z.collisionPadding;Se&&(ae-=Se[1],ye+=Se[3]);let Ee=ye-ae;Ee>0&&(Ee=Math.max(10,Ee),this.circleDiameter=Ee)}else{let ae=z.top*V-Y[0],ye=z.bottom*V+Y[2],Se=z.left*V-Y[3],Ee=z.right*V+Y[1];const De=z.collisionPadding;if(De&&(Se-=De[0]*V,ae-=De[1]*V,Ee+=De[2]*V,ye+=De[3]*V),ne){const He=new g(Se,ae),Ye=new g(Ee,ae),pt=new g(Se,ye),nt=new g(Ee,ye),xt=ne*Math.PI/180;He._rotate(xt),Ye._rotate(xt),pt._rotate(xt),nt._rotate(xt),Se=Math.min(He.x,Ye.x,pt.x,nt.x),Ee=Math.max(He.x,Ye.x,pt.x,nt.x),ae=Math.min(He.y,Ye.y,pt.y,nt.y),ye=Math.max(He.y,Ye.y,pt.y,nt.y)}u.emplaceBack(m.x,m.y,Se,ae,Ee,ye,_,P,N)}this.boxEndIndex=u.length}}class ohe{constructor(u=[],m=she){if(this.data=u,this.length=this.data.length,this.compare=m,this.length>0)for(let _=(this.length>>1)-1;_>=0;_--)this._down(_)}push(u){this.data.push(u),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const u=this.data[0],m=this.data.pop();return this.length--,this.length>0&&(this.data[0]=m,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:m,compare:_}=this,P=m[u];for(;u>0;){const N=u-1>>1,z=m[N];if(_(P,z)>=0)break;m[u]=z,u=N}m[u]=P}_down(u){const{data:m,compare:_}=this,P=this.length>>1,N=m[u];for(;u<P;){let z=1+(u<<1),V=m[z];const Y=z+1;if(Y<this.length&&_(m[Y],V)<0&&(z=Y,V=m[Y]),_(V,N)>=0)break;m[u]=V,u=z}m[u]=N}}function she(f,u){return f<u?-1:f>u?1:0}function ahe(f,u=1,m=!1){let _=1/0,P=1/0,N=-1/0,z=-1/0;const V=f[0];for(let Se=0;Se<V.length;Se++){const Ee=V[Se];(!Se||Ee.x<_)&&(_=Ee.x),(!Se||Ee.y<P)&&(P=Ee.y),(!Se||Ee.x>N)&&(N=Ee.x),(!Se||Ee.y>z)&&(z=Ee.y)}const Y=Math.min(N-_,z-P);let J=Y/2;const ne=new ohe([],lhe);if(Y===0)return new g(_,P);for(let Se=_;Se<N;Se+=Y)for(let Ee=P;Ee<z;Ee+=Y)ne.push(new mx(Se+J,Ee+J,J,f));let ae=function(Se){let Ee=0,De=0,He=0;const Ye=Se[0];for(let pt=0,nt=Ye.length,xt=nt-1;pt<nt;xt=pt++){const kt=Ye[pt],Yt=Ye[xt],bn=kt.x*Yt.y-Yt.x*kt.y;De+=(kt.x+Yt.x)*bn,He+=(kt.y+Yt.y)*bn,Ee+=3*bn}return new mx(De/Ee,He/Ee,0,Se)}(f),ye=ne.length;for(;ne.length;){const Se=ne.pop();(Se.d>ae.d||!ae.d)&&(ae=Se,m&&console.log("found best %d after %d probes",Math.round(1e4*Se.d)/1e4,ye)),Se.max-ae.d<=u||(J=Se.h/2,ne.push(new mx(Se.p.x-J,Se.p.y-J,J,f)),ne.push(new mx(Se.p.x+J,Se.p.y-J,J,f)),ne.push(new mx(Se.p.x-J,Se.p.y+J,J,f)),ne.push(new mx(Se.p.x+J,Se.p.y+J,J,f)),ye+=4)}return m&&(console.log(`num probes: ${ye}`),console.log(`best distance: ${ae.d}`)),ae.p}function lhe(f,u){return u.max-f.max}function mx(f,u,m,_){this.p=new g(f,u),this.h=m,this.d=function(P,N){let z=!1,V=1/0;for(let Y=0;Y<N.length;Y++){const J=N[Y];for(let ne=0,ae=J.length,ye=ae-1;ne<ae;ye=ne++){const Se=J[ne],Ee=J[ye];Se.y>P.y!=Ee.y>P.y&&P.x<(Ee.x-Se.x)*(P.y-Se.y)/(Ee.y-Se.y)+Se.x&&(z=!z),V=Math.min(V,nv(P,Se,Ee))}}return(z?1:-1)*Math.sqrt(V)}(this.p,_),this.max=this.d+this.h*Math.SQRT2}var sa;s.aq=void 0,(sa=s.aq||(s.aq={}))[sa.center=1]="center",sa[sa.left=2]="left",sa[sa.right=3]="right",sa[sa.top=4]="top",sa[sa.bottom=5]="bottom",sa[sa["top-left"]=6]="top-left",sa[sa["top-right"]=7]="top-right",sa[sa["bottom-left"]=8]="bottom-left",sa[sa["bottom-right"]=9]="bottom-right";const Km=7,kL=Number.POSITIVE_INFINITY;function kV(f,u){return u[1]!==kL?function(m,_,P){let N=0,z=0;switch(_=Math.abs(_),P=Math.abs(P),m){case"top-right":case"top-left":case"top":z=P-Km;break;case"bottom-right":case"bottom-left":case"bottom":z=-P+Km}switch(m){case"top-right":case"bottom-right":case"right":N=-_;break;case"top-left":case"bottom-left":case"left":N=_}return[N,z]}(f,u[0],u[1]):function(m,_){let P=0,N=0;_<0&&(_=0);const z=_/Math.SQRT2;switch(m){case"top-right":case"top-left":N=z-Km;break;case"bottom-right":case"bottom-left":N=-z+Km;break;case"bottom":N=-_+Km;break;case"top":N=_-Km}switch(m){case"top-right":case"bottom-right":P=-z;break;case"top-left":case"bottom-left":P=z;break;case"left":P=_;break;case"right":P=-_}return[P,N]}(f,u[0])}function IV(f,u,m){var _;const P=f.layout,N=(_=P.get("text-variable-anchor-offset"))===null||_===void 0?void 0:_.evaluate(u,{},m);if(N){const V=N.values,Y=[];for(let J=0;J<V.length;J+=2){const ne=Y[J]=V[J],ae=V[J+1].map(ye=>ye*ds);ne.startsWith("top")?ae[1]-=Km:ne.startsWith("bottom")&&(ae[1]+=Km),Y[J+1]=ae}return new to(Y)}const z=P.get("text-variable-anchor");if(z){let V;V=f._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[P.get("text-radial-offset").evaluate(u,{},m)*ds,kL]:P.get("text-offset").evaluate(u,{},m).map(J=>J*ds);const Y=[];for(const J of z)Y.push(J,kV(J,V));return new to(Y)}return null}function IL(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function che(f,u,m,_,P,N,z,V,Y,J,ne){let ae=N.textMaxSize.evaluate(u,{});ae===void 0&&(ae=z);const ye=f.layers[0].layout,Se=ye.get("icon-offset").evaluate(u,{},ne),Ee=OV(m.horizontal),De=z/24,He=f.tilePixelRatio*De,Ye=f.tilePixelRatio*ae/24,pt=f.tilePixelRatio*V,nt=f.tilePixelRatio*ye.get("symbol-spacing"),xt=ye.get("text-padding")*f.tilePixelRatio,kt=function(rn,Qn,Un,kr=1){const Xi=rn.get("icon-padding").evaluate(Qn,{},Un),io=Xi&&Xi.values;return[io[0]*kr,io[1]*kr,io[2]*kr,io[3]*kr]}(ye,u,ne,f.tilePixelRatio),Yt=ye.get("text-max-angle")/180*Math.PI,bn=ye.get("text-rotation-alignment")!=="viewport"&&ye.get("symbol-placement")!=="point",zn=ye.get("icon-rotation-alignment")==="map"&&ye.get("symbol-placement")!=="point",_n=ye.get("symbol-placement"),vn=nt/2,fn=ye.get("icon-text-fit");let Pn;_&&fn!=="none"&&(f.allowVerticalPlacement&&m.vertical&&(Pn=tV(_,m.vertical,fn,ye.get("icon-text-fit-padding"),Se,De)),Ee&&(_=tV(_,Ee,fn,ye.get("icon-text-fit-padding"),Se,De)));const mn=(rn,Qn)=>{Qn.x<0||Qn.x>=Yi||Qn.y<0||Qn.y>=Yi||function(Un,kr,Xi,io,fs,hc,Za,Jo,Ks,aa,Ja,Qa,hs,ps,Ca,el,Aa,Il,Rl,ms,Nr,Pa,la,gs,Bu){const zd=Un.addToLineVertexArray(kr,Xi);let Fd,rp,$u,Wc,Ol=0,ip=0,pw=0,zV=0,BL=-1,$L=-1;const op={};let FV=uc("");if(Un.allowVerticalPlacement&&io.vertical){const ka=Jo.layout.get("text-rotate").evaluate(Nr,{},gs)+90;$u=new cT(Ks,kr,aa,Ja,Qa,io.vertical,hs,ps,Ca,ka),Za&&(Wc=new cT(Ks,kr,aa,Ja,Qa,Za,Aa,Il,Ca,ka))}if(fs){const ka=Jo.layout.get("icon-rotate").evaluate(Nr,{}),Hc=Jo.layout.get("icon-text-fit")!=="none",uv=AV(fs,ka,la,Hc),$d=Za?AV(Za,ka,la,Hc):void 0;rp=new cT(Ks,kr,aa,Ja,Qa,fs,Aa,Il,!1,ka),Ol=4*uv.length;const dv=Un.iconSizeData;let th=null;dv.kind==="source"?(th=[eh*Jo.layout.get("icon-size").evaluate(Nr,{})],th[0]>qm&&ie(`${Un.layerIds[0]}: Value for "icon-size" is >= ${uw}. Reduce your "icon-size".`)):dv.kind==="composite"&&(th=[eh*Pa.compositeIconSizes[0].evaluate(Nr,{},gs),eh*Pa.compositeIconSizes[1].evaluate(Nr,{},gs)],(th[0]>qm||th[1]>qm)&&ie(`${Un.layerIds[0]}: Value for "icon-size" is >= ${uw}. Reduce your "icon-size".`)),Un.addSymbols(Un.icon,uv,th,ms,Rl,Nr,s.ai.none,kr,zd.lineStartIndex,zd.lineLength,-1,gs),BL=Un.icon.placedSymbolArray.length-1,$d&&(ip=4*$d.length,Un.addSymbols(Un.icon,$d,th,ms,Rl,Nr,s.ai.vertical,kr,zd.lineStartIndex,zd.lineLength,-1,gs),$L=Un.icon.placedSymbolArray.length-1)}const BV=Object.keys(io.horizontal);for(const ka of BV){const Hc=io.horizontal[ka];if(!Fd){FV=uc(Hc.text);const $d=Jo.layout.get("text-rotate").evaluate(Nr,{},gs);Fd=new cT(Ks,kr,aa,Ja,Qa,Hc,hs,ps,Ca,$d)}const uv=Hc.positionedLines.length===1;if(pw+=RV(Un,kr,Hc,hc,Jo,Ca,Nr,el,zd,io.vertical?s.ai.horizontal:s.ai.horizontalOnly,uv?BV:[ka],op,BL,Pa,gs),uv)break}io.vertical&&(zV+=RV(Un,kr,io.vertical,hc,Jo,Ca,Nr,el,zd,s.ai.vertical,["vertical"],op,$L,Pa,gs));const fhe=Fd?Fd.boxStartIndex:Un.collisionBoxArray.length,hhe=Fd?Fd.boxEndIndex:Un.collisionBoxArray.length,phe=$u?$u.boxStartIndex:Un.collisionBoxArray.length,mhe=$u?$u.boxEndIndex:Un.collisionBoxArray.length,ghe=rp?rp.boxStartIndex:Un.collisionBoxArray.length,yhe=rp?rp.boxEndIndex:Un.collisionBoxArray.length,vhe=Wc?Wc.boxStartIndex:Un.collisionBoxArray.length,xhe=Wc?Wc.boxEndIndex:Un.collisionBoxArray.length;let Bd=-1;const dT=(ka,Hc)=>ka&&ka.circleDiameter?Math.max(ka.circleDiameter,Hc):Hc;Bd=dT(Fd,Bd),Bd=dT($u,Bd),Bd=dT(rp,Bd),Bd=dT(Wc,Bd);const $V=Bd>-1?1:0;$V&&(Bd*=Bu/ds),Un.glyphOffsetArray.length>=hx.MAX_GLYPHS&&ie("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Nr.sortKey!==void 0&&Un.addToSortKeyRanges(Un.symbolInstances.length,Nr.sortKey);const _he=IV(Jo,Nr,gs),[bhe,whe]=function(ka,Hc){const uv=ka.length,$d=Hc==null?void 0:Hc.values;if(($d==null?void 0:$d.length)>0)for(let dv=0;dv<$d.length;dv+=2){const th=$d[dv+1];ka.emplaceBack(s.aq[$d[dv]],th[0],th[1])}return[uv,ka.length]}(Un.textAnchorOffsets,_he);Un.symbolInstances.emplaceBack(kr.x,kr.y,op.right>=0?op.right:-1,op.center>=0?op.center:-1,op.left>=0?op.left:-1,op.vertical||-1,BL,$L,FV,fhe,hhe,phe,mhe,ghe,yhe,vhe,xhe,aa,pw,zV,Ol,ip,$V,0,hs,Bd,bhe,whe)}(f,Qn,rn,m,_,P,Pn,f.layers[0],f.collisionBoxArray,u.index,u.sourceLayerIndex,f.index,He,[xt,xt,xt,xt],bn,Y,pt,kt,zn,Se,u,N,J,ne,z)};if(_n==="line")for(const rn of wV(u.geometry,0,0,Yi,Yi)){const Qn=ihe(rn,nt,Yt,m.vertical||Ee,_,24,Ye,f.overscaling,Yi);for(const Un of Qn)Ee&&uhe(f,Ee.text,vn,Un)||mn(rn,Un)}else if(_n==="line-center"){for(const rn of u.geometry)if(rn.length>1){const Qn=rhe(rn,Yt,m.vertical||Ee,_,24,Ye);Qn&&mn(rn,Qn)}}else if(u.type==="Polygon")for(const rn of jn(u.geometry,0)){const Qn=ahe(rn,16);mn(rn[0],new Xm(Qn.x,Qn.y,0))}else if(u.type==="LineString")for(const rn of u.geometry)mn(rn,new Xm(rn[0].x,rn[0].y,0));else if(u.type==="Point")for(const rn of u.geometry)for(const Qn of rn)mn([Qn],new Xm(Qn.x,Qn.y,0))}function RV(f,u,m,_,P,N,z,V,Y,J,ne,ae,ye,Se,Ee){const De=function(pt,nt,xt,kt,Yt,bn,zn,_n){const vn=kt.layout.get("text-rotate").evaluate(bn,{})*Math.PI/180,fn=[];for(const Pn of nt.positionedLines)for(const mn of Pn.positionedGlyphs){if(!mn.rect)continue;const rn=mn.rect||{};let Qn=Y8+1,Un=!0,kr=1,Xi=0;const io=(Yt||_n)&&mn.vertical,fs=mn.metrics.advance*mn.scale/2;if(_n&&nt.verticalizable&&(Xi=Pn.lineOffset/2-(mn.imageName?-(ds-mn.metrics.width*mn.scale)/2:(mn.scale-1)*ds)),mn.imageName){const ms=zn[mn.imageName];Un=ms.sdf,kr=ms.pixelRatio,Qn=kl/kr}const hc=Yt?[mn.x+fs,mn.y]:[0,0];let Za=Yt?[0,0]:[mn.x+fs+xt[0],mn.y+xt[1]-Xi],Jo=[0,0];io&&(Jo=Za,Za=[0,0]);const Ks=mn.metrics.isDoubleResolution?2:1,aa=(mn.metrics.left-Qn)*mn.scale-fs+Za[0],Ja=(-mn.metrics.top-Qn)*mn.scale+Za[1],Qa=aa+rn.w/Ks*mn.scale/kr,hs=Ja+rn.h/Ks*mn.scale/kr,ps=new g(aa,Ja),Ca=new g(Qa,Ja),el=new g(aa,hs),Aa=new g(Qa,hs);if(io){const ms=new g(-fs,fs-lw),Nr=-Math.PI/2,Pa=ds/2-fs,la=new g(5-lw-Pa,-(mn.imageName?Pa:0)),gs=new g(...Jo);ps._rotateAround(Nr,ms)._add(la)._add(gs),Ca._rotateAround(Nr,ms)._add(la)._add(gs),el._rotateAround(Nr,ms)._add(la)._add(gs),Aa._rotateAround(Nr,ms)._add(la)._add(gs)}if(vn){const ms=Math.sin(vn),Nr=Math.cos(vn),Pa=[Nr,-ms,ms,Nr];ps._matMult(Pa),Ca._matMult(Pa),el._matMult(Pa),Aa._matMult(Pa)}const Il=new g(0,0),Rl=new g(0,0);fn.push({tl:ps,tr:Ca,bl:el,br:Aa,tex:rn,writingMode:nt.writingMode,glyphOffset:hc,sectionIndex:mn.sectionIndex,isSDF:Un,pixelOffsetTL:Il,pixelOffsetBR:Rl,minFontScaleX:0,minFontScaleY:0})}return fn}(0,m,V,P,N,z,_,f.allowVerticalPlacement),He=f.textSizeData;let Ye=null;He.kind==="source"?(Ye=[eh*P.layout.get("text-size").evaluate(z,{})],Ye[0]>qm&&ie(`${f.layerIds[0]}: Value for "text-size" is >= ${uw}. Reduce your "text-size".`)):He.kind==="composite"&&(Ye=[eh*Se.compositeTextSizes[0].evaluate(z,{},Ee),eh*Se.compositeTextSizes[1].evaluate(z,{},Ee)],(Ye[0]>qm||Ye[1]>qm)&&ie(`${f.layerIds[0]}: Value for "text-size" is >= ${uw}. Reduce your "text-size".`)),f.addSymbols(f.text,De,Ye,V,N,z,J,u,Y.lineStartIndex,Y.lineLength,ye,Ee);for(const pt of ne)ae[pt]=f.text.placedSymbolArray.length-1;return 4*De.length}function OV(f){for(const u in f)return f[u];return null}function uhe(f,u,m,_){const P=f.compareText;if(u in P){const N=P[u];for(let z=N.length-1;z>=0;z--)if(_.dist(N[z])<m)return!0}else P[u]=[];return P[u].push(_),!1}const LV=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class RL{static from(u){if(!(u instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[m,_]=new Uint8Array(u,0,2);if(m!==219)throw new Error("Data does not appear to be in a KDBush format.");const P=_>>4;if(P!==1)throw new Error(`Got v${P} data when expected v1.`);const N=LV[15&_];if(!N)throw new Error("Unrecognized array type.");const[z]=new Uint16Array(u,2,1),[V]=new Uint32Array(u,4,1);return new RL(V,z,N,u)}constructor(u,m=64,_=Float64Array,P){if(isNaN(u)||u<0)throw new Error(`Unpexpected numItems value: ${u}.`);this.numItems=+u,this.nodeSize=Math.min(Math.max(+m,2),65535),this.ArrayType=_,this.IndexArrayType=u<65536?Uint16Array:Uint32Array;const N=LV.indexOf(this.ArrayType),z=2*u*this.ArrayType.BYTES_PER_ELEMENT,V=u*this.IndexArrayType.BYTES_PER_ELEMENT,Y=(8-V%8)%8;if(N<0)throw new Error(`Unexpected typed array class: ${_}.`);P&&P instanceof ArrayBuffer?(this.data=P,this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+V+Y,2*u),this._pos=2*u,this._finished=!0):(this.data=new ArrayBuffer(8+z+V+Y),this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+V+Y,2*u),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+N]),new Uint16Array(this.data,2,1)[0]=m,new Uint32Array(this.data,4,1)[0]=u)}add(u,m){const _=this._pos>>1;return this.ids[_]=_,this.coords[this._pos++]=u,this.coords[this._pos++]=m,_}finish(){const u=this._pos>>1;if(u!==this.numItems)throw new Error(`Added ${u} items when expected ${this.numItems}.`);return OL(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(u,m,_,P){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:N,coords:z,nodeSize:V}=this,Y=[0,N.length-1,0],J=[];for(;Y.length;){const ne=Y.pop()||0,ae=Y.pop()||0,ye=Y.pop()||0;if(ae-ye<=V){for(let He=ye;He<=ae;He++){const Ye=z[2*He],pt=z[2*He+1];Ye>=u&&Ye<=_&&pt>=m&&pt<=P&&J.push(N[He])}continue}const Se=ye+ae>>1,Ee=z[2*Se],De=z[2*Se+1];Ee>=u&&Ee<=_&&De>=m&&De<=P&&J.push(N[Se]),(ne===0?u<=Ee:m<=De)&&(Y.push(ye),Y.push(Se-1),Y.push(1-ne)),(ne===0?_>=Ee:P>=De)&&(Y.push(Se+1),Y.push(ae),Y.push(1-ne))}return J}within(u,m,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:P,coords:N,nodeSize:z}=this,V=[0,P.length-1,0],Y=[],J=_*_;for(;V.length;){const ne=V.pop()||0,ae=V.pop()||0,ye=V.pop()||0;if(ae-ye<=z){for(let He=ye;He<=ae;He++)NV(N[2*He],N[2*He+1],u,m)<=J&&Y.push(P[He]);continue}const Se=ye+ae>>1,Ee=N[2*Se],De=N[2*Se+1];NV(Ee,De,u,m)<=J&&Y.push(P[Se]),(ne===0?u-_<=Ee:m-_<=De)&&(V.push(ye),V.push(Se-1),V.push(1-ne)),(ne===0?u+_>=Ee:m+_>=De)&&(V.push(Se+1),V.push(ae),V.push(1-ne))}return Y}}function OL(f,u,m,_,P,N){if(P-_<=m)return;const z=_+P>>1;DV(f,u,z,_,P,N),OL(f,u,m,_,z-1,1-N),OL(f,u,m,z+1,P,1-N)}function DV(f,u,m,_,P,N){for(;P>_;){if(P-_>600){const J=P-_+1,ne=m-_+1,ae=Math.log(J),ye=.5*Math.exp(2*ae/3),Se=.5*Math.sqrt(ae*ye*(J-ye)/J)*(ne-J/2<0?-1:1);DV(f,u,m,Math.max(_,Math.floor(m-ne*ye/J+Se)),Math.min(P,Math.floor(m+(J-ne)*ye/J+Se)),N)}const z=u[2*m+N];let V=_,Y=P;for(fw(f,u,_,m),u[2*P+N]>z&&fw(f,u,_,P);V<Y;){for(fw(f,u,V,Y),V++,Y--;u[2*V+N]<z;)V++;for(;u[2*Y+N]>z;)Y--}u[2*_+N]===z?fw(f,u,_,Y):(Y++,fw(f,u,Y,P)),Y<=m&&(_=Y+1),m<=Y&&(P=Y-1)}}function fw(f,u,m,_){LL(f,m,_),LL(u,2*m,2*_),LL(u,2*m+1,2*_+1)}function LL(f,u,m){const _=f[u];f[u]=f[m],f[m]=_}function NV(f,u,m,_){const P=f-m,N=u-_;return P*P+N*N}var DL;s.bh=void 0,(DL=s.bh||(s.bh={})).create="create",DL.load="load",DL.fullLoad="fullLoad";let uT=null,hw=[];const NL=1e3/60,zL="loadTime",FL="fullLoadTime",dhe={mark(f){performance.mark(f)},frame(f){const u=f;uT!=null&&hw.push(u-uT),uT=u},clearMetrics(){uT=null,hw=[],performance.clearMeasures(zL),performance.clearMeasures(FL);for(const f in s.bh)performance.clearMarks(s.bh[f])},getPerformanceMetrics(){performance.measure(zL,s.bh.create,s.bh.load),performance.measure(FL,s.bh.create,s.bh.fullLoad);const f=performance.getEntriesByName(zL)[0].duration,u=performance.getEntriesByName(FL)[0].duration,m=hw.length,_=1/(hw.reduce((N,z)=>N+z,0)/m/1e3),P=hw.filter(N=>N>NL).reduce((N,z)=>N+(z-NL)/NL,0);return{loadTime:f,fullLoadTime:u,fps:_,percentDroppedFrames:P/(m+P)*100,totalFrames:m}}};s.$=function(f,u,m){var _,P,N,z,V,Y,J,ne,ae,ye,Se,Ee,De=m[0],He=m[1],Ye=m[2];return u===f?(f[12]=u[0]*De+u[4]*He+u[8]*Ye+u[12],f[13]=u[1]*De+u[5]*He+u[9]*Ye+u[13],f[14]=u[2]*De+u[6]*He+u[10]*Ye+u[14],f[15]=u[3]*De+u[7]*He+u[11]*Ye+u[15]):(P=u[1],N=u[2],z=u[3],V=u[4],Y=u[5],J=u[6],ne=u[7],ae=u[8],ye=u[9],Se=u[10],Ee=u[11],f[0]=_=u[0],f[1]=P,f[2]=N,f[3]=z,f[4]=V,f[5]=Y,f[6]=J,f[7]=ne,f[8]=ae,f[9]=ye,f[10]=Se,f[11]=Ee,f[12]=_*De+V*He+ae*Ye+u[12],f[13]=P*De+Y*He+ye*Ye+u[13],f[14]=N*De+J*He+Se*Ye+u[14],f[15]=z*De+ne*He+Ee*Ye+u[15]),f},s.A=qf,s.B=Ts,s.C=class{constructor(f,u,m){this.receive=_=>{const P=_.data,N=P.id;if(N&&(!P.targetMapId||this.mapId===P.targetMapId))if(P.type==="<cancel>"){delete this.tasks[N];const z=this.cancelCallbacks[N];delete this.cancelCallbacks[N],z&&z()}else xe()||P.mustQueue?(this.tasks[N]=P,this.taskQueue.push(N),this.invoker.trigger()):this.processTask(N,P)},this.process=()=>{if(!this.taskQueue.length)return;const _=this.taskQueue.shift(),P=this.tasks[_];delete this.tasks[_],this.taskQueue.length&&this.invoker.trigger(),P&&this.processTask(_,P)},this.target=f,this.parent=u,this.mapId=m,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new the(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=xe()?f:window}send(f,u,m,_,P=!1){const N=Math.round(1e18*Math.random()).toString(36).substring(0,10);m&&(this.callbacks[N]=m);const z=[],V={id:N,type:f,hasCallback:!!m,targetMapId:_,mustQueue:P,sourceMapId:this.mapId,data:Nc(u,z)};return this.target.postMessage(V,{transfer:z}),{cancel:()=>{m&&delete this.callbacks[N],this.target.postMessage({id:N,type:"<cancel>",targetMapId:_,sourceMapId:this.mapId})}}}processTask(f,u){if(u.type==="<response>"){const m=this.callbacks[f];delete this.callbacks[f],m&&(u.error?m(Rd(u.error)):m(null,Rd(u.data)))}else{let m=!1;const _=[],P=u.hasCallback?(V,Y)=>{m=!0,delete this.cancelCallbacks[f];const J={id:f,type:"<response>",sourceMapId:this.mapId,error:V?Nc(V):null,data:Nc(Y,_)};this.target.postMessage(J,{transfer:_})}:V=>{m=!0};let N=null;const z=Rd(u.data);if(this.parent[u.type])N=this.parent[u.type](u.sourceMapId,z,P);else if("getWorkerSource"in this.parent){const V=u.type.split(".");N=this.parent.getWorkerSource(u.sourceMapId,V[0],z.source)[V[1]](z,P)}else P(new Error(`Could not find function ${u.type}`));!m&&N&&N.cancel&&(this.cancelCallbacks[f]=N.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.D=Nn,s.E=sn,s.F=function(f,u){const m={};for(let _=0;_<u.length;_++){const P=u[_];P in f&&(m[P]=f[P])}return m},s.G=uV,s.H=dV,s.I=xL,s.J=T,s.K=C,s.L=Ym,s.M=ze,s.N=Yi,s.O=Vc,s.P=g,s.Q=Ci,s.R=Xa,s.S=li,s.T=Yy,s.U=oT,s.V=class extends ao{},s.W=PL,s.X=function(f,u){const m=window.document.createElement("video");m.muted=!0,m.onloadstart=function(){u(null,m)};for(let _=0;_<f.length;_++){const P=window.document.createElement("source");ot(f[_])||(m.crossOrigin="Anonymous"),P.src=f[_],m.appendChild(P)}return{cancel:()=>{}}},s.Y=mt,s.Z=function(){var f=new qf(16);return qf!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},s._=l,s.a=he,s.a$=class extends be{},s.a0=function(f,u,m){var _=m[0],P=m[1],N=m[2];return f[0]=u[0]*_,f[1]=u[1]*_,f[2]=u[2]*_,f[3]=u[3]*_,f[4]=u[4]*P,f[5]=u[5]*P,f[6]=u[6]*P,f[7]=u[7]*P,f[8]=u[8]*N,f[9]=u[9]*N,f[10]=u[10]*N,f[11]=u[11]*N,f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},s.a1=qE,s.a2=function(){return Z++},s.a3=$e,s.a4=hx,s.a5=function(){Ta.isLoading()||Ta.isLoaded()||Rm()!=="deferred"||tx()},s.a6=wa,s.a7=jc,s.a8=Ei,s.a9=vV,s.aA=Ff,s.aB=function(f){f=f.slice();const u=Object.create(null);for(let m=0;m<f.length;m++)u[f[m].id]=f[m];for(let m=0;m<f.length;m++)"ref"in f[m]&&(f[m]=_e(f[m],u[f[m].ref]));return f},s.aC=function(f){if(f.type==="custom")return new ehe(f);switch(f.type){case"background":return new Zfe(f);case"circle":return new X1(f);case"fill":return new St(f);case"fill-extrusion":return new yfe(f);case"heatmap":return new cL(f);case"hillshade":return new Ka(f);case"line":return new Efe(f);case"raster":return new Qfe(f);case"symbol":return new iT(f)}},s.aD=le,s.aE=function(f,u){if(!f)return[{command:dt.setStyle,args:[u]}];let m=[];try{if(!ht(f.version,u.version))return[{command:dt.setStyle,args:[u]}];ht(f.center,u.center)||m.push({command:dt.setCenter,args:[u.center]}),ht(f.zoom,u.zoom)||m.push({command:dt.setZoom,args:[u.zoom]}),ht(f.bearing,u.bearing)||m.push({command:dt.setBearing,args:[u.bearing]}),ht(f.pitch,u.pitch)||m.push({command:dt.setPitch,args:[u.pitch]}),ht(f.sprite,u.sprite)||m.push({command:dt.setSprite,args:[u.sprite]}),ht(f.glyphs,u.glyphs)||m.push({command:dt.setGlyphs,args:[u.glyphs]}),ht(f.transition,u.transition)||m.push({command:dt.setTransition,args:[u.transition]}),ht(f.light,u.light)||m.push({command:dt.setLight,args:[u.light]});const _={},P=[];(function(z,V,Y,J){let ne;for(ne in V=V||{},z=z||{})Object.prototype.hasOwnProperty.call(z,ne)&&(Object.prototype.hasOwnProperty.call(V,ne)||jt(ne,Y,J));for(ne in V)Object.prototype.hasOwnProperty.call(V,ne)&&(Object.prototype.hasOwnProperty.call(z,ne)?ht(z[ne],V[ne])||(z[ne].type==="geojson"&&V[ne].type==="geojson"&&cn(z,V,ne)?Y.push({command:dt.setGeoJSONSourceData,args:[ne,V[ne].data]}):Sn(ne,V,Y,J)):Wt(ne,V,Y))})(f.sources,u.sources,P,_);const N=[];f.layers&&f.layers.forEach(z=>{_[z.source]?m.push({command:dt.removeLayer,args:[z.id]}):N.push(z)}),m=m.concat(P),function(z,V,Y){V=V||[];const J=(z=z||[]).map(nn),ne=V.map(nn),ae=z.reduce(An,{}),ye=V.reduce(An,{}),Se=J.slice(),Ee=Object.create(null);let De,He,Ye,pt,nt,xt,kt;for(De=0,He=0;De<J.length;De++)Ye=J[De],Object.prototype.hasOwnProperty.call(ye,Ye)?He++:(Y.push({command:dt.removeLayer,args:[Ye]}),Se.splice(Se.indexOf(Ye,He),1));for(De=0,He=0;De<ne.length;De++)Ye=ne[ne.length-1-De],Se[Se.length-1-De]!==Ye&&(Object.prototype.hasOwnProperty.call(ae,Ye)?(Y.push({command:dt.removeLayer,args:[Ye]}),Se.splice(Se.lastIndexOf(Ye,Se.length-He),1)):He++,xt=Se[Se.length-De],Y.push({command:dt.addLayer,args:[ye[Ye],xt]}),Se.splice(Se.length-De,0,Ye),Ee[Ye]=!0);for(De=0;De<ne.length;De++)if(Ye=ne[De],pt=ae[Ye],nt=ye[Ye],!Ee[Ye]&&!ht(pt,nt))if(ht(pt.source,nt.source)&&ht(pt["source-layer"],nt["source-layer"])&&ht(pt.type,nt.type)){for(kt in Rt(pt.layout,nt.layout,Y,Ye,null,dt.setLayoutProperty),Rt(pt.paint,nt.paint,Y,Ye,null,dt.setPaintProperty),ht(pt.filter,nt.filter)||Y.push({command:dt.setFilter,args:[Ye,nt.filter]}),ht(pt.minzoom,nt.minzoom)&&ht(pt.maxzoom,nt.maxzoom)||Y.push({command:dt.setLayerZoomRange,args:[Ye,nt.minzoom,nt.maxzoom]}),pt)Object.prototype.hasOwnProperty.call(pt,kt)&&kt!=="layout"&&kt!=="paint"&&kt!=="filter"&&kt!=="metadata"&&kt!=="minzoom"&&kt!=="maxzoom"&&(kt.indexOf("paint.")===0?Rt(pt[kt],nt[kt],Y,Ye,kt.slice(6),dt.setPaintProperty):ht(pt[kt],nt[kt])||Y.push({command:dt.setLayerProperty,args:[Ye,kt,nt[kt]]}));for(kt in nt)Object.prototype.hasOwnProperty.call(nt,kt)&&!Object.prototype.hasOwnProperty.call(pt,kt)&&kt!=="layout"&&kt!=="paint"&&kt!=="filter"&&kt!=="metadata"&&kt!=="minzoom"&&kt!=="maxzoom"&&(kt.indexOf("paint.")===0?Rt(pt[kt],nt[kt],Y,Ye,kt.slice(6),dt.setPaintProperty):ht(pt[kt],nt[kt])||Y.push({command:dt.setLayerProperty,args:[Ye,kt,nt[kt]]}))}else Y.push({command:dt.removeLayer,args:[Ye]}),xt=Se[Se.lastIndexOf(Ye)+1],Y.push({command:dt.addLayer,args:[nt,xt]})}(N,u.layers,m)}catch(_){console.warn("Unable to compute style diff:",_),m=[{command:dt.setStyle,args:[u]}]}return m},s.aF=function(f){const u=[],m=f.id;return m===void 0&&u.push({message:`layers.${m}: missing required property "id"`}),f.render===void 0&&u.push({message:`layers.${m}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&u.push({message:`layers.${m}: property "renderingMode" must be either "2d" or "3d"`}),u},s.aG=function f(u,m){if(Array.isArray(u)){if(!Array.isArray(m)||u.length!==m.length)return!1;for(let _=0;_<u.length;_++)if(!f(u[_],m[_]))return!1;return!0}if(typeof u=="object"&&u!==null&&m!==null){if(typeof m!="object"||Object.keys(u).length!==Object.keys(m).length)return!1;for(const _ in u)if(!f(u[_],m[_]))return!1;return!0}return u===m},s.aH=j,s.aI=X,s.aJ=Jh,s.aK=function(f){return f({pluginStatus:Ws,pluginURL:ac}),Jh.on("pluginStateChange",f),f},s.aL=class extends $c{constructor(f,u){super(f,u),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}},s.aM=Uf,s.aN=class extends $c{constructor(f,u){super(f,u),this.current=q1}set(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let u=1;u<16;u++)if(f[u]!==this.current[u]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}},s.aO=Jy,s.aP=class extends $c{constructor(f,u){super(f,u),this.current=[0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))}},s.aQ=class extends $c{constructor(f,u){super(f,u),this.current=[0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))}},s.aR=Fm,s.aS=function(f,u,m,_,P,N,z){var V=1/(u-m),Y=1/(_-P),J=1/(N-z);return f[0]=-2*V,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*Y,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*J,f[11]=0,f[12]=(u+m)*V,f[13]=(P+_)*Y,f[14]=(z+N)*J,f[15]=1,f},s.aT=ar,s.aU=YE,s.aV=class extends A{},s.aW=Pfe,s.aX=class extends D{},s.aY=function(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))},s.aZ=Xf,s.a_=ln,s.aa=function(f){const u={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(m,_,P,N)=>{const z=P||N;return u[_]=!z||z.toLowerCase(),""}),u["max-age"]){const m=parseInt(u["max-age"],10);isNaN(m)?delete u["max-age"]:u["max-age"]=m}return u},s.ab=function(f,u){const m=[];for(const _ in f)_ in u||m.push(_);return m},s.ac=function(f){if(te==null){const u=f.navigator?f.navigator.userAgent:null;te=!!f.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return te},s.ad=O,s.ae=function(f,u,m){var _=Math.sin(m),P=Math.cos(m),N=u[0],z=u[1],V=u[2],Y=u[3],J=u[4],ne=u[5],ae=u[6],ye=u[7];return u!==f&&(f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[0]=N*P+J*_,f[1]=z*P+ne*_,f[2]=V*P+ae*_,f[3]=Y*P+ye*_,f[4]=J*P-N*_,f[5]=ne*P-z*_,f[6]=ae*P-V*_,f[7]=ye*P-Y*_,f},s.af=function(f){var u=new qf(16);return u[0]=f[0],u[1]=f[1],u[2]=f[2],u[3]=f[3],u[4]=f[4],u[5]=f[5],u[6]=f[6],u[7]=f[7],u[8]=f[8],u[9]=f[9],u[10]=f[10],u[11]=f[11],u[12]=f[12],u[13]=f[13],u[14]=f[14],u[15]=f[15],u},s.ag=ov,s.ah=function(f,u){let m=0,_=0;if(f.kind==="constant")_=f.layoutSize;else if(f.kind!=="source"){const{interpolationType:P,minZoom:N,maxZoom:z}=f,V=P?O(zs.interpolationFactor(P,u,N,z),0,1):0;f.kind==="camera"?_=Ts.number(f.minSize,f.maxSize,V):m=V}return{uSizeT:m,uSize:_}},s.aj=function(f,{uSize:u,uSizeT:m},{lowerSize:_,upperSize:P}){return f.kind==="source"?_/eh:f.kind==="composite"?Ts.number(_/eh,P/eh,m):u},s.ak=SL,s.al=function(f,u,m,_){const P=u.y-f.y,N=u.x-f.x,z=_.y-m.y,V=_.x-m.x,Y=z*N-V*P;if(Y===0)return null;const J=(V*(f.y-m.y)-z*(f.x-m.x))/Y;return new g(f.x+J*N,f.y+J*P)},s.am=wV,s.an=rx,s.ao=iv,s.ap=ds,s.ar=wL,s.as=function(f,u){var m=u[0],_=u[1],P=u[2],N=u[3],z=u[4],V=u[5],Y=u[6],J=u[7],ne=u[8],ae=u[9],ye=u[10],Se=u[11],Ee=u[12],De=u[13],He=u[14],Ye=u[15],pt=m*V-_*z,nt=m*Y-P*z,xt=m*J-N*z,kt=_*Y-P*V,Yt=_*J-N*V,bn=P*J-N*Y,zn=ne*De-ae*Ee,_n=ne*He-ye*Ee,vn=ne*Ye-Se*Ee,fn=ae*He-ye*De,Pn=ae*Ye-Se*De,mn=ye*Ye-Se*He,rn=pt*mn-nt*Pn+xt*fn+kt*vn-Yt*_n+bn*zn;return rn?(f[0]=(V*mn-Y*Pn+J*fn)*(rn=1/rn),f[1]=(P*Pn-_*mn-N*fn)*rn,f[2]=(De*bn-He*Yt+Ye*kt)*rn,f[3]=(ye*Yt-ae*bn-Se*kt)*rn,f[4]=(Y*vn-z*mn-J*_n)*rn,f[5]=(m*mn-P*vn+N*_n)*rn,f[6]=(He*xt-Ee*bn-Ye*nt)*rn,f[7]=(ne*bn-ye*xt+Se*nt)*rn,f[8]=(z*Pn-V*vn+J*zn)*rn,f[9]=(_*vn-m*Pn-N*zn)*rn,f[10]=(Ee*Yt-De*xt+Ye*pt)*rn,f[11]=(ae*xt-ne*Yt-Se*pt)*rn,f[12]=(V*_n-z*fn-Y*zn)*rn,f[13]=(m*fn-_*_n+P*zn)*rn,f[14]=(De*nt-Ee*kt-He*pt)*rn,f[15]=(ne*kt-ae*nt+ye*pt)*rn,f):null},s.at=IL,s.au=bL,s.av=RL,s.aw=function(){const f={},u=Je.$version;for(const m in Je.$root){const _=Je.$root[m];if(_.required){let P=null;P=m==="version"?u:_.type==="array"?[]:{},P!=null&&(f[m]=P)}}return f},s.ax=dt,s.ay=Wy,s.az=Fe,s.b=function(f,u){const m=new Blob([new Uint8Array(f)],{type:"image/png"});createImageBitmap(m).then(_=>{u(null,_)}).catch(_=>{u(new Error(`Could not load image because of ${_.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},s.b0=Bo,s.b1=function(f,u){var m=f[0],_=f[1],P=f[2],N=f[3],z=f[4],V=f[5],Y=f[6],J=f[7],ne=f[8],ae=f[9],ye=f[10],Se=f[11],Ee=f[12],De=f[13],He=f[14],Ye=f[15],pt=u[0],nt=u[1],xt=u[2],kt=u[3],Yt=u[4],bn=u[5],zn=u[6],_n=u[7],vn=u[8],fn=u[9],Pn=u[10],mn=u[11],rn=u[12],Qn=u[13],Un=u[14],kr=u[15];return Math.abs(m-pt)<=Ys*Math.max(1,Math.abs(m),Math.abs(pt))&&Math.abs(_-nt)<=Ys*Math.max(1,Math.abs(_),Math.abs(nt))&&Math.abs(P-xt)<=Ys*Math.max(1,Math.abs(P),Math.abs(xt))&&Math.abs(N-kt)<=Ys*Math.max(1,Math.abs(N),Math.abs(kt))&&Math.abs(z-Yt)<=Ys*Math.max(1,Math.abs(z),Math.abs(Yt))&&Math.abs(V-bn)<=Ys*Math.max(1,Math.abs(V),Math.abs(bn))&&Math.abs(Y-zn)<=Ys*Math.max(1,Math.abs(Y),Math.abs(zn))&&Math.abs(J-_n)<=Ys*Math.max(1,Math.abs(J),Math.abs(_n))&&Math.abs(ne-vn)<=Ys*Math.max(1,Math.abs(ne),Math.abs(vn))&&Math.abs(ae-fn)<=Ys*Math.max(1,Math.abs(ae),Math.abs(fn))&&Math.abs(ye-Pn)<=Ys*Math.max(1,Math.abs(ye),Math.abs(Pn))&&Math.abs(Se-mn)<=Ys*Math.max(1,Math.abs(Se),Math.abs(mn))&&Math.abs(Ee-rn)<=Ys*Math.max(1,Math.abs(Ee),Math.abs(rn))&&Math.abs(De-Qn)<=Ys*Math.max(1,Math.abs(De),Math.abs(Qn))&&Math.abs(He-Un)<=Ys*Math.max(1,Math.abs(He),Math.abs(Un))&&Math.abs(Ye-kr)<=Ys*Math.max(1,Math.abs(Ye),Math.abs(kr))},s.b2=function(f,u){return f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[4]=u[4],f[5]=u[5],f[6]=u[6],f[7]=u[7],f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},s.b3=function(f,u,m){return f[0]=u[0]*m[0],f[1]=u[1]*m[1],f[2]=u[2]*m[2],f[3]=u[3]*m[3],f},s.b4=function(f,u){return f[0]*u[0]+f[1]*u[1]+f[2]*u[2]+f[3]*u[3]},s.b5=B,s.b6=mV,s.b7=fV,s.b8=function(f,u,m,_,P){var N,z=1/Math.tan(u/2);return f[0]=z/m,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=z,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,P!=null&&P!==1/0?(f[10]=(P+_)*(N=1/(_-P)),f[14]=2*P*_*N):(f[10]=-1,f[14]=-2*_),f},s.b9=function(f,u,m){var _=Math.sin(m),P=Math.cos(m),N=u[4],z=u[5],V=u[6],Y=u[7],J=u[8],ne=u[9],ae=u[10],ye=u[11];return u!==f&&(f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[4]=N*P+J*_,f[5]=z*P+ne*_,f[6]=V*P+ae*_,f[7]=Y*P+ye*_,f[8]=J*P-N*_,f[9]=ne*P-z*_,f[10]=ae*P-V*_,f[11]=ye*P-Y*_,f},s.bA=h,s.bB=j8,s.bC=ic,s.bD=Ta,s.ba=I,s.bb=R,s.bc=function(f,u){return f[0]=u[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=u[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=u[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},s.bd=class extends Fc{},s.be=CL,s.bf=hV,s.bg=dhe,s.bi=zt,s.bj=function(f,u,m=!1){if(Ws===Ld||Ws===Am||Ws===Pm)throw new Error("setRTLTextPlugin cannot be called multiple times.");ac=ct.resolveURL(f),Ws=Ld,km=u,Im(),m||tx()},s.bk=Rm,s.bl=function(f,u){const m={};for(let P=0;P<f.length;P++){const N=u&&u[f[P].id]||Ru(f[P]);u&&(u[f[P].id]=N);let z=m[N];z||(z=m[N]=[]),z.push(f[P])}const _=[];for(const P in m)_.push(m[P]);return _},s.bm=wn,s.bn=yV,s.bo=xV,s.bp=K8,s.bq=function(f){f.bucket.createArrays(),f.bucket.tilePixelRatio=Yi/(512*f.bucket.overscaling),f.bucket.compareText={},f.bucket.iconsNeedLinear=!1;const u=f.bucket.layers[0],m=u.layout,_=u._unevaluatedLayout._values,P={layoutIconSize:_["icon-size"].possiblyEvaluate(new Ei(f.bucket.zoom+1),f.canonical),layoutTextSize:_["text-size"].possiblyEvaluate(new Ei(f.bucket.zoom+1),f.canonical),textMaxSize:_["text-size"].possiblyEvaluate(new Ei(18))};if(f.bucket.textSizeData.kind==="composite"){const{minZoom:J,maxZoom:ne}=f.bucket.textSizeData;P.compositeTextSizes=[_["text-size"].possiblyEvaluate(new Ei(J),f.canonical),_["text-size"].possiblyEvaluate(new Ei(ne),f.canonical)]}if(f.bucket.iconSizeData.kind==="composite"){const{minZoom:J,maxZoom:ne}=f.bucket.iconSizeData;P.compositeIconSizes=[_["icon-size"].possiblyEvaluate(new Ei(J),f.canonical),_["icon-size"].possiblyEvaluate(new Ei(ne),f.canonical)]}const N=m.get("text-line-height")*ds,z=m.get("text-rotation-alignment")!=="viewport"&&m.get("symbol-placement")!=="point",V=m.get("text-keep-upright"),Y=m.get("text-size");for(const J of f.bucket.features){const ne=m.get("text-font").evaluate(J,{},f.canonical).join(","),ae=Y.evaluate(J,{},f.canonical),ye=P.layoutTextSize.evaluate(J,{},f.canonical),Se=P.layoutIconSize.evaluate(J,{},f.canonical),Ee={horizontal:{},vertical:void 0},De=J.text;let He,Ye=[0,0];if(De){const xt=De.toString(),kt=m.get("text-letter-spacing").evaluate(J,{},f.canonical)*ds,Yt=Cm(xt)?kt:0,bn=m.get("text-anchor").evaluate(J,{},f.canonical),zn=IV(u,J,f.canonical);if(!zn){const mn=m.get("text-radial-offset").evaluate(J,{},f.canonical);Ye=mn?kV(bn,[mn*ds,kL]):m.get("text-offset").evaluate(J,{},f.canonical).map(rn=>rn*ds)}let _n=z?"center":m.get("text-justify").evaluate(J,{},f.canonical);const vn=m.get("symbol-placement"),fn=vn==="point"?m.get("text-max-width").evaluate(J,{},f.canonical)*ds:0,Pn=()=>{f.bucket.allowVerticalPlacement&&Tm(xt)&&(Ee.vertical=tT(De,f.glyphMap,f.glyphPositions,f.imagePositions,ne,fn,N,bn,"left",Yt,Ye,s.ai.vertical,!0,vn,ye,ae))};if(!z&&zn){const mn=new Set;if(_n==="auto")for(let Qn=0;Qn<zn.values.length;Qn+=2)mn.add(IL(zn.values[Qn]));else mn.add(_n);let rn=!1;for(const Qn of mn)if(!Ee.horizontal[Qn])if(rn)Ee.horizontal[Qn]=Ee.horizontal[0];else{const Un=tT(De,f.glyphMap,f.glyphPositions,f.imagePositions,ne,fn,N,"center",Qn,Yt,Ye,s.ai.horizontal,!1,vn,ye,ae);Un&&(Ee.horizontal[Qn]=Un,rn=Un.positionedLines.length===1)}Pn()}else{_n==="auto"&&(_n=IL(bn));const mn=tT(De,f.glyphMap,f.glyphPositions,f.imagePositions,ne,fn,N,bn,_n,Yt,Ye,s.ai.horizontal,!1,vn,ye,ae);mn&&(Ee.horizontal[_n]=mn),Pn(),Tm(xt)&&z&&V&&(Ee.vertical=tT(De,f.glyphMap,f.glyphPositions,f.imagePositions,ne,fn,N,bn,_n,Yt,Ye,s.ai.vertical,!1,vn,ye,ae))}}let pt=!1;if(J.icon&&J.icon.name){const xt=f.imageMap[J.icon.name];xt&&(He=Gfe(f.imagePositions[J.icon.name],m.get("icon-offset").evaluate(J,{},f.canonical),m.get("icon-anchor").evaluate(J,{},f.canonical)),pt=!!xt.sdf,f.bucket.sdfIcons===void 0?f.bucket.sdfIcons=pt:f.bucket.sdfIcons!==pt&&ie("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(xt.pixelRatio!==f.bucket.pixelRatio||m.get("icon-rotate").constantOr(1)!==0)&&(f.bucket.iconsNeedLinear=!0))}const nt=OV(Ee.horizontal)||Ee.vertical;f.bucket.iconsInText=!!nt&&nt.iconsInText,(nt||He)&&che(f.bucket,J,Ee,He,f.imageMap,P,ye,Se,Ye,pt,f.canonical)}f.showCollisionBoxes&&f.bucket.generateCollisionDebugBuffers()},s.br=mL,s.bs=rr,s.bt=pL,s.bu=class{constructor(f){this._marks={start:[f.url,"start"].join("#"),end:[f.url,"end"].join("#"),measure:f.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let f=performance.getEntriesByName(this._marks.measure);return f.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),f=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),f}},s.bv=yL,s.bw=br,s.bx=function(f,u,m,_,P){return l(this,void 0,void 0,function*(){if(C())try{return yield ze(f,u,m,_,P)}catch{}return function(N,z,V,Y,J){const ne=N.width,ae=N.height;Ue&&rt||(Ue=new OffscreenCanvas(ne,ae),rt=Ue.getContext("2d",{willReadFrequently:!0})),Ue.width=ne,Ue.height=ae,rt.drawImage(N,0,0,ne,ae);const ye=rt.getImageData(z,V,Y,J);return rt.clearRect(0,0,ne,ae),ye.data}(f,u,m,_,P)})},s.by=gV,s.bz=c,s.c=Dt,s.d=function(f,u){const m=new Image;m.onload=()=>{u(null,m),URL.revokeObjectURL(m.src),m.onload=null,window.requestAnimationFrame(()=>{m.src=ve})},m.onerror=()=>u(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const _=new Blob([new Uint8Array(f)],{type:"image/png"});m.src=f.byteLength?URL.createObjectURL(_):ve},s.e=U,s.f=function(f,u){return ge(U(f,{type:"json"}),u)},s.g=lt,s.h=ct,s.i=xe,s.j=Gt,s.k=Bt,s.l=et,s.m=ge,s.n=function(f){return new yL(f).readFields($fe,[])},s.o=function(f,u,m){if(!f.length)return m(null,[]);let _=f.length;const P=new Array(f.length);let N=null;f.forEach((z,V)=>{u(z,(Y,J)=>{Y&&(N=Y),P[V]=J,--_==0&&m(N,P)})})},s.p=X8,s.q=Vm,s.r=so,s.s=ot,s.t=Vy,s.u=xn,s.v=Je,s.w=ie,s.x=Ga,s.y=Gi,s.z=function([f,u,m]){return u+=90,u*=Math.PI/180,m*=Math.PI/180,{x:f*Math.cos(u)*Math.sin(m),y:f*Math.sin(u)*Math.sin(m),z:f*Math.cos(m)}}}),o(["./shared"],function(s){class l{constructor(oe){this.keyCache={},oe&&this.replace(oe)}replace(oe){this._layerConfigs={},this._layers={},this.update(oe,[])}update(oe,pe){for(const Pe of oe){this._layerConfigs[Pe.id]=Pe;const Ne=this._layers[Pe.id]=s.aC(Pe);Ne._featureFilter=s.a6(Ne.filter),this.keyCache[Pe.id]&&delete this.keyCache[Pe.id]}for(const Pe of pe)delete this.keyCache[Pe],delete this._layerConfigs[Pe],delete this._layers[Pe];this.familiesBySource={};const Te=s.bl(Object.values(this._layerConfigs),this.keyCache);for(const Pe of Te){const Ne=Pe.map(Ut=>this._layers[Ut.id]),Ke=Ne[0];if(Ke.visibility==="none")continue;const qe=Ke.source||"";let je=this.familiesBySource[qe];je||(je=this.familiesBySource[qe]={});const tt=Ke.sourceLayer||"_geojsonTileLayer";let Nt=je[tt];Nt||(Nt=je[tt]=[]),Nt.push(Ne)}}}class c{constructor(oe){const pe={},Te=[];for(const qe in oe){const je=oe[qe],tt=pe[qe]={};for(const Nt in je){const Ut=je[+Nt];if(!Ut||Ut.bitmap.width===0||Ut.bitmap.height===0)continue;const $t={x:0,y:0,w:Ut.bitmap.width+2,h:Ut.bitmap.height+2};Te.push($t),tt[Nt]={rect:$t,metrics:Ut.metrics}}}const{w:Pe,h:Ne}=s.p(Te),Ke=new s.q({width:Pe||1,height:Ne||1});for(const qe in oe){const je=oe[qe];for(const tt in je){const Nt=je[+tt];if(!Nt||Nt.bitmap.width===0||Nt.bitmap.height===0)continue;const Ut=pe[qe][tt].rect;s.q.copy(Nt.bitmap,Ke,{x:0,y:0},{x:Ut.x+1,y:Ut.y+1},Nt.bitmap)}}this.image=Ke,this.positions=pe}}s.bm("GlyphAtlas",c);class h{constructor(oe){this.tileID=new s.O(oe.tileID.overscaledZ,oe.tileID.wrap,oe.tileID.canonical.z,oe.tileID.canonical.x,oe.tileID.canonical.y),this.uid=oe.uid,this.zoom=oe.zoom,this.pixelRatio=oe.pixelRatio,this.tileSize=oe.tileSize,this.source=oe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=oe.showCollisionBoxes,this.collectResourceTiming=!!oe.collectResourceTiming,this.returnDependencies=!!oe.returnDependencies,this.promoteId=oe.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(oe,pe,Te,Pe,Ne){this.status="parsing",this.data=oe,this.collisionBoxArray=new s.a3;const Ke=new s.bn(Object.keys(oe.layers).sort()),qe=new s.bo(this.tileID,this.promoteId);qe.bucketLayerIDs=[];const je={},tt={featureIndex:qe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Te},Nt=pe.familiesBySource[this.source];for(const ut in Nt){const bt=oe.layers[ut];if(!bt)continue;bt.version===1&&s.w(`Vector tile source "${this.source}" layer "${ut}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const yt=Ke.encode(ut),vt=[];for(let pn=0;pn<bt.length;pn++){const Cn=bt.feature(pn),Xn=qe.getId(Cn,ut);vt.push({feature:Cn,id:Xn,index:pn,sourceLayerIndex:yt})}for(const pn of Nt[ut]){const Cn=pn[0];Cn.source!==this.source&&s.w(`layer.source = ${Cn.source} does not equal this.source = ${this.source}`),Cn.minzoom&&this.zoom<Math.floor(Cn.minzoom)||Cn.maxzoom&&this.zoom>=Cn.maxzoom||Cn.visibility!=="none"&&(p(pn,this.zoom,Te),(je[Cn.id]=Cn.createBucket({index:qe.bucketLayerIDs.length,layers:pn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:yt,sourceID:this.source})).populate(vt,tt,this.tileID.canonical),qe.bucketLayerIDs.push(pn.map(Xn=>Xn.id)))}}let Ut,$t,kn,er;const En=s.aH(tt.glyphDependencies,ut=>Object.keys(ut).map(Number));this.inFlightDependencies.forEach(ut=>ut==null?void 0:ut.cancel()),this.inFlightDependencies=[];const $n=++this.dependencySentinel;Object.keys(En).length?this.inFlightDependencies.push(Pe.send("getGlyphs",{uid:this.uid,stacks:En,source:this.source,tileID:this.tileID,type:"glyphs"},(ut,bt)=>{$n===this.dependencySentinel&&(Ut||(Ut=ut,$t=bt,Ae.call(this)))})):$t={};const sr=Object.keys(tt.iconDependencies);sr.length?this.inFlightDependencies.push(Pe.send("getImages",{icons:sr,source:this.source,tileID:this.tileID,type:"icons"},(ut,bt)=>{$n===this.dependencySentinel&&(Ut||(Ut=ut,kn=bt,Ae.call(this)))})):kn={};const $r=Object.keys(tt.patternDependencies);function Ae(){if(Ut)return Ne(Ut);if($t&&kn&&er){const ut=new c($t),bt=new s.bp(kn,er);for(const yt in je){const vt=je[yt];vt instanceof s.a4?(p(vt.layers,this.zoom,Te),s.bq({bucket:vt,glyphMap:$t,glyphPositions:ut.positions,imageMap:kn,imagePositions:bt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):vt.hasPattern&&(vt instanceof s.br||vt instanceof s.bs||vt instanceof s.bt)&&(p(vt.layers,this.zoom,Te),vt.addFeatures(tt,this.tileID.canonical,bt.patternPositions))}this.status="done",Ne(null,{buckets:Object.values(je).filter(yt=>!yt.isEmpty()),featureIndex:qe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ut.image,imageAtlas:bt,glyphMap:this.returnDependencies?$t:null,iconMap:this.returnDependencies?kn:null,glyphPositions:this.returnDependencies?ut.positions:null})}}$r.length?this.inFlightDependencies.push(Pe.send("getImages",{icons:$r,source:this.source,tileID:this.tileID,type:"patterns"},(ut,bt)=>{$n===this.dependencySentinel&&(Ut||(Ut=ut,er=bt,Ae.call(this)))})):er={},Ae.call(this)}}function p(we,oe,pe){const Te=new s.a8(oe);for(const Pe of we)Pe.recalculate(Te,pe)}function g(we,oe){const pe=s.l(we.request,(Te,Pe,Ne,Ke)=>{if(Te)oe(Te);else if(Pe)try{const qe=new s.bw.VectorTile(new s.bv(Pe));oe(null,{vectorTile:qe,rawData:Pe,cacheControl:Ne,expires:Ke})}catch(qe){const je=new Uint8Array(Pe);let tt=`Unable to parse the tile at ${we.request.url}, `;tt+=je[0]===31&&je[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${qe.messge}`,oe(new Error(tt))}});return()=>{pe.cancel(),oe()}}class v{constructor(oe,pe,Te,Pe){this.actor=oe,this.layerIndex=pe,this.availableImages=Te,this.loadVectorData=Pe||g,this.fetching={},this.loading={},this.loaded={}}loadTile(oe,pe){const Te=oe.uid;this.loading||(this.loading={});const Pe=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new s.bu(oe.request),Ne=this.loading[Te]=new h(oe);Ne.abort=this.loadVectorData(oe,(Ke,qe)=>{if(delete this.loading[Te],Ke||!qe)return Ne.status="done",this.loaded[Te]=Ne,pe(Ke);const je=qe.rawData,tt={};qe.expires&&(tt.expires=qe.expires),qe.cacheControl&&(tt.cacheControl=qe.cacheControl);const Nt={};if(Pe){const Ut=Pe.finish();Ut&&(Nt.resourceTiming=JSON.parse(JSON.stringify(Ut)))}Ne.vectorTile=qe.vectorTile,Ne.parse(qe.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ut,$t)=>{if(delete this.fetching[Te],Ut||!$t)return pe(Ut);pe(null,s.e({rawTileData:je.slice(0)},$t,tt,Nt))}),this.loaded=this.loaded||{},this.loaded[Te]=Ne,this.fetching[Te]={rawTileData:je,cacheControl:tt,resourceTiming:Nt}})}reloadTile(oe,pe){const Te=this.loaded,Pe=oe.uid;if(Te&&Te[Pe]){const Ne=Te[Pe];Ne.showCollisionBoxes=oe.showCollisionBoxes,Ne.status==="parsing"?Ne.parse(Ne.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ke,qe)=>{if(Ke||!qe)return pe(Ke,qe);let je;if(this.fetching[Pe]){const{rawTileData:tt,cacheControl:Nt,resourceTiming:Ut}=this.fetching[Pe];delete this.fetching[Pe],je=s.e({rawTileData:tt.slice(0)},qe,Nt,Ut)}else je=qe;pe(null,je)}):Ne.status==="done"&&(Ne.vectorTile?Ne.parse(Ne.vectorTile,this.layerIndex,this.availableImages,this.actor,pe):pe())}}abortTile(oe,pe){const Te=this.loading,Pe=oe.uid;Te&&Te[Pe]&&Te[Pe].abort&&(Te[Pe].abort(),delete Te[Pe]),pe()}removeTile(oe,pe){const Te=this.loaded,Pe=oe.uid;Te&&Te[Pe]&&delete Te[Pe],pe()}}class x{constructor(){this.loaded={}}loadTile(oe,pe){return s._(this,void 0,void 0,function*(){const{uid:Te,encoding:Pe,rawImageData:Ne,redFactor:Ke,greenFactor:qe,blueFactor:je,baseShift:tt}=oe,Nt=Ne.width+2,Ut=Ne.height+2,$t=s.a(Ne)?new s.R({width:Nt,height:Ut},yield s.bx(Ne,-1,-1,Nt,Ut)):Ne,kn=new s.by(Te,$t,Pe,Ke,qe,je,tt);this.loaded=this.loaded||{},this.loaded[Te]=kn,pe(null,kn)})}removeTile(oe){const pe=this.loaded,Te=oe.uid;pe&&pe[Te]&&delete pe[Te]}}function b(we,oe){if(we.length!==0){M(we[0],oe);for(var pe=1;pe<we.length;pe++)M(we[pe],!oe)}}function M(we,oe){for(var pe=0,Te=0,Pe=0,Ne=we.length,Ke=Ne-1;Pe<Ne;Ke=Pe++){var qe=(we[Pe][0]-we[Ke][0])*(we[Ke][1]+we[Pe][1]),je=pe+qe;Te+=Math.abs(pe)>=Math.abs(qe)?pe-je+qe:qe-je+pe,pe=je}pe+Te>=0!=!!oe&&we.reverse()}var w=s.bz(function we(oe,pe){var Te,Pe=oe&&oe.type;if(Pe==="FeatureCollection")for(Te=0;Te<oe.features.length;Te++)we(oe.features[Te],pe);else if(Pe==="GeometryCollection")for(Te=0;Te<oe.geometries.length;Te++)we(oe.geometries[Te],pe);else if(Pe==="Feature")we(oe.geometry,pe);else if(Pe==="Polygon")b(oe.coordinates,pe);else if(Pe==="MultiPolygon")for(Te=0;Te<oe.coordinates.length;Te++)b(oe.coordinates[Te],pe);return oe});const T=s.bw.VectorTileFeature.prototype.toGeoJSON;var C={exports:{}},I=s.bA,R=s.bw.VectorTileFeature,O=B;function B(we,oe){this.options=oe||{},this.features=we,this.length=we.length}function U(we,oe){this.id=typeof we.id=="number"?we.id:void 0,this.type=we.type,this.rawGeometry=we.type===1?[we.geometry]:we.geometry,this.properties=we.tags,this.extent=oe||4096}B.prototype.feature=function(we){return new U(this.features[we],this.options.extent)},U.prototype.loadGeometry=function(){var we=this.rawGeometry;this.geometry=[];for(var oe=0;oe<we.length;oe++){for(var pe=we[oe],Te=[],Pe=0;Pe<pe.length;Pe++)Te.push(new I(pe[Pe][0],pe[Pe][1]));this.geometry.push(Te)}return this.geometry},U.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var we=this.geometry,oe=1/0,pe=-1/0,Te=1/0,Pe=-1/0,Ne=0;Ne<we.length;Ne++)for(var Ke=we[Ne],qe=0;qe<Ke.length;qe++){var je=Ke[qe];oe=Math.min(oe,je.x),pe=Math.max(pe,je.x),Te=Math.min(Te,je.y),Pe=Math.max(Pe,je.y)}return[oe,Te,pe,Pe]},U.prototype.toGeoJSON=R.prototype.toGeoJSON;var Z=s.bB,j=O;function X(we){var oe=new Z;return function(pe,Te){for(var Pe in pe.layers)Te.writeMessage(3,le,pe.layers[Pe])}(we,oe),oe.finish()}function le(we,oe){var pe;oe.writeVarintField(15,we.version||1),oe.writeStringField(1,we.name||""),oe.writeVarintField(5,we.extent||4096);var Te={keys:[],values:[],keycache:{},valuecache:{}};for(pe=0;pe<we.length;pe++)Te.feature=we.feature(pe),oe.writeMessage(2,me,Te);var Pe=Te.keys;for(pe=0;pe<Pe.length;pe++)oe.writeStringField(3,Pe[pe]);var Ne=Te.values;for(pe=0;pe<Ne.length;pe++)oe.writeMessage(4,te,Ne[pe])}function me(we,oe){var pe=we.feature;pe.id!==void 0&&oe.writeVarintField(1,pe.id),oe.writeMessage(2,ie,we),oe.writeVarintField(3,pe.type),oe.writeMessage(4,xe,pe)}function ie(we,oe){var pe=we.feature,Te=we.keys,Pe=we.values,Ne=we.keycache,Ke=we.valuecache;for(var qe in pe.properties){var je=pe.properties[qe],tt=Ne[qe];if(je!==null){tt===void 0&&(Te.push(qe),Ne[qe]=tt=Te.length-1),oe.writeVarint(tt);var Nt=typeof je;Nt!=="string"&&Nt!=="boolean"&&Nt!=="number"&&(je=JSON.stringify(je));var Ut=Nt+":"+je,$t=Ke[Ut];$t===void 0&&(Pe.push(je),Ke[Ut]=$t=Pe.length-1),oe.writeVarint($t)}}}function ce(we,oe){return(oe<<3)+(7&we)}function fe(we){return we<<1^we>>31}function xe(we,oe){for(var pe=we.loadGeometry(),Te=we.type,Pe=0,Ne=0,Ke=pe.length,qe=0;qe<Ke;qe++){var je=pe[qe],tt=1;Te===1&&(tt=je.length),oe.writeVarint(ce(1,tt));for(var Nt=Te===3?je.length-1:je.length,Ut=0;Ut<Nt;Ut++){Ut===1&&Te!==1&&oe.writeVarint(ce(2,Nt-1));var $t=je[Ut].x-Pe,kn=je[Ut].y-Ne;oe.writeVarint(fe($t)),oe.writeVarint(fe(kn)),Pe+=$t,Ne+=kn}Te===3&&oe.writeVarint(ce(7,1))}}function te(we,oe){var pe=typeof we;pe==="string"?oe.writeStringField(1,we):pe==="boolean"?oe.writeBooleanField(7,we):pe==="number"&&(we%1!=0?oe.writeDoubleField(3,we):we<0?oe.writeSVarintField(6,we):oe.writeVarintField(5,we))}C.exports=X,C.exports.fromVectorTileJs=X,C.exports.fromGeojsonVt=function(we,oe){oe=oe||{};var pe={};for(var Te in we)pe[Te]=new j(we[Te].features,oe),pe[Te].name=Te,pe[Te].version=oe.version,pe[Te].extent=oe.extent;return X({layers:pe})},C.exports.GeoJSONWrapper=j;var he=s.bz(C.exports);const ve={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:we=>we},ze=Math.fround||(Ue=new Float32Array(1),we=>(Ue[0]=+we,Ue[0]));var Ue;const rt=3,Be=5,st=6;class ct{constructor(oe){this.options=Object.assign(Object.create(ve),oe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(oe){const{log:pe,minZoom:Te,maxZoom:Pe}=this.options;pe&&console.time("total time");const Ne=`prepare ${oe.length} points`;pe&&console.time(Ne),this.points=oe;const Ke=[];for(let je=0;je<oe.length;je++){const tt=oe[je];if(!tt.geometry)continue;const[Nt,Ut]=tt.geometry.coordinates,$t=ze(Fe(Nt)),kn=ze(lt(Ut));Ke.push($t,kn,1/0,je,-1,1),this.options.reduce&&Ke.push(0)}let qe=this.trees[Pe+1]=this._createTree(Ke);pe&&console.timeEnd(Ne);for(let je=Pe;je>=Te;je--){const tt=+Date.now();qe=this.trees[je]=this._createTree(this._cluster(qe,je)),pe&&console.log("z%d: %d clusters in %dms",je,qe.numItems,+Date.now()-tt)}return pe&&console.timeEnd("total time"),this}getClusters(oe,pe){let Te=((oe[0]+180)%360+360)%360-180;const Pe=Math.max(-90,Math.min(90,oe[1]));let Ne=oe[2]===180?180:((oe[2]+180)%360+360)%360-180;const Ke=Math.max(-90,Math.min(90,oe[3]));if(oe[2]-oe[0]>=360)Te=-180,Ne=180;else if(Te>Ne){const Ut=this.getClusters([Te,Pe,180,Ke],pe),$t=this.getClusters([-180,Pe,Ne,Ke],pe);return Ut.concat($t)}const qe=this.trees[this._limitZoom(pe)],je=qe.range(Fe(Te),lt(Ke),Fe(Ne),lt(Pe)),tt=qe.data,Nt=[];for(const Ut of je){const $t=this.stride*Ut;Nt.push(tt[$t+Be]>1?Dt(tt,$t,this.clusterProps):this.points[tt[$t+rt]])}return Nt}getChildren(oe){const pe=this._getOriginId(oe),Te=this._getOriginZoom(oe),Pe="No cluster with the specified id.",Ne=this.trees[Te];if(!Ne)throw new Error(Pe);const Ke=Ne.data;if(pe*this.stride>=Ke.length)throw new Error(Pe);const qe=this.options.radius/(this.options.extent*Math.pow(2,Te-1)),je=Ne.within(Ke[pe*this.stride],Ke[pe*this.stride+1],qe),tt=[];for(const Nt of je){const Ut=Nt*this.stride;Ke[Ut+4]===oe&&tt.push(Ke[Ut+Be]>1?Dt(Ke,Ut,this.clusterProps):this.points[Ke[Ut+rt]])}if(tt.length===0)throw new Error(Pe);return tt}getLeaves(oe,pe,Te){const Pe=[];return this._appendLeaves(Pe,oe,pe=pe||10,Te=Te||0,0),Pe}getTile(oe,pe,Te){const Pe=this.trees[this._limitZoom(oe)],Ne=Math.pow(2,oe),{extent:Ke,radius:qe}=this.options,je=qe/Ke,tt=(Te-je)/Ne,Nt=(Te+1+je)/Ne,Ut={features:[]};return this._addTileFeatures(Pe.range((pe-je)/Ne,tt,(pe+1+je)/Ne,Nt),Pe.data,pe,Te,Ne,Ut),pe===0&&this._addTileFeatures(Pe.range(1-je/Ne,tt,1,Nt),Pe.data,Ne,Te,Ne,Ut),pe===Ne-1&&this._addTileFeatures(Pe.range(0,tt,je/Ne,Nt),Pe.data,-1,Te,Ne,Ut),Ut.features.length?Ut:null}getClusterExpansionZoom(oe){let pe=this._getOriginZoom(oe)-1;for(;pe<=this.options.maxZoom;){const Te=this.getChildren(oe);if(pe++,Te.length!==1)break;oe=Te[0].properties.cluster_id}return pe}_appendLeaves(oe,pe,Te,Pe,Ne){const Ke=this.getChildren(pe);for(const qe of Ke){const je=qe.properties;if(je&&je.cluster?Ne+je.point_count<=Pe?Ne+=je.point_count:Ne=this._appendLeaves(oe,je.cluster_id,Te,Pe,Ne):Ne<Pe?Ne++:oe.push(qe),oe.length===Te)break}return Ne}_createTree(oe){const pe=new s.av(oe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Te=0;Te<oe.length;Te+=this.stride)pe.add(oe[Te],oe[Te+1]);return pe.finish(),pe.data=oe,pe}_addTileFeatures(oe,pe,Te,Pe,Ne,Ke){for(const qe of oe){const je=qe*this.stride,tt=pe[je+Be]>1;let Nt,Ut,$t;if(tt)Nt=zt(pe,je,this.clusterProps),Ut=pe[je],$t=pe[je+1];else{const En=this.points[pe[je+rt]];Nt=En.properties;const[$n,sr]=En.geometry.coordinates;Ut=Fe($n),$t=lt(sr)}const kn={type:1,geometry:[[Math.round(this.options.extent*(Ut*Ne-Te)),Math.round(this.options.extent*($t*Ne-Pe))]],tags:Nt};let er;er=tt||this.options.generateId?pe[je+rt]:this.points[pe[je+rt]].id,er!==void 0&&(kn.id=er),Ke.features.push(kn)}}_limitZoom(oe){return Math.max(this.options.minZoom,Math.min(Math.floor(+oe),this.options.maxZoom+1))}_cluster(oe,pe){const{radius:Te,extent:Pe,reduce:Ne,minPoints:Ke}=this.options,qe=Te/(Pe*Math.pow(2,pe)),je=oe.data,tt=[],Nt=this.stride;for(let Ut=0;Ut<je.length;Ut+=Nt){if(je[Ut+2]<=pe)continue;je[Ut+2]=pe;const $t=je[Ut],kn=je[Ut+1],er=oe.within(je[Ut],je[Ut+1],qe),En=je[Ut+Be];let $n=En;for(const sr of er){const $r=sr*Nt;je[$r+2]>pe&&($n+=je[$r+Be])}if($n>En&&$n>=Ke){let sr,$r=$t*En,Ae=kn*En,ut=-1;const bt=((Ut/Nt|0)<<5)+(pe+1)+this.points.length;for(const yt of er){const vt=yt*Nt;if(je[vt+2]<=pe)continue;je[vt+2]=pe;const pn=je[vt+Be];$r+=je[vt]*pn,Ae+=je[vt+1]*pn,je[vt+4]=bt,Ne&&(sr||(sr=this._map(je,Ut,!0),ut=this.clusterProps.length,this.clusterProps.push(sr)),Ne(sr,this._map(je,vt)))}je[Ut+4]=bt,tt.push($r/$n,Ae/$n,1/0,bt,-1,$n),Ne&&tt.push(ut)}else{for(let sr=0;sr<Nt;sr++)tt.push(je[Ut+sr]);if($n>1)for(const sr of er){const $r=sr*Nt;if(!(je[$r+2]<=pe)){je[$r+2]=pe;for(let Ae=0;Ae<Nt;Ae++)tt.push(je[$r+Ae])}}}}return tt}_getOriginId(oe){return oe-this.points.length>>5}_getOriginZoom(oe){return(oe-this.points.length)%32}_map(oe,pe,Te){if(oe[pe+Be]>1){const Ke=this.clusterProps[oe[pe+st]];return Te?Object.assign({},Ke):Ke}const Pe=this.points[oe[pe+rt]].properties,Ne=this.options.map(Pe);return Te&&Ne===Pe?Object.assign({},Ne):Ne}}function Dt(we,oe,pe){return{type:"Feature",id:we[oe+rt],properties:zt(we,oe,pe),geometry:{type:"Point",coordinates:[(Te=we[oe],360*(Te-.5)),Qe(we[oe+1])]}};var Te}function zt(we,oe,pe){const Te=we[oe+Be],Pe=Te>=1e4?`${Math.round(Te/1e3)}k`:Te>=1e3?Math.round(Te/100)/10+"k":Te,Ne=we[oe+st],Ke=Ne===-1?{}:Object.assign({},pe[Ne]);return Object.assign(Ke,{cluster:!0,cluster_id:we[oe+rt],point_count:Te,point_count_abbreviated:Pe})}function Fe(we){return we/360+.5}function lt(we){const oe=Math.sin(we*Math.PI/180),pe=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return pe<0?0:pe>1?1:pe}function Qe(we){const oe=(180-360*we)*Math.PI/180;return 360*Math.atan(Math.exp(oe))/Math.PI-90}function ge(we,oe,pe,Te){for(var Pe,Ne=Te,Ke=pe-oe>>1,qe=pe-oe,je=we[oe],tt=we[oe+1],Nt=we[pe],Ut=we[pe+1],$t=oe+3;$t<pe;$t+=3){var kn=et(we[$t],we[$t+1],je,tt,Nt,Ut);if(kn>Ne)Pe=$t,Ne=kn;else if(kn===Ne){var er=Math.abs($t-Ke);er<qe&&(Pe=$t,qe=er)}}Ne>Te&&(Pe-oe>3&&ge(we,oe,Pe,Te),we[Pe+2]=Ne,pe-Pe>3&&ge(we,Pe,pe,Te))}function et(we,oe,pe,Te,Pe,Ne){var Ke=Pe-pe,qe=Ne-Te;if(Ke!==0||qe!==0){var je=((we-pe)*Ke+(oe-Te)*qe)/(Ke*Ke+qe*qe);je>1?(pe=Pe,Te=Ne):je>0&&(pe+=Ke*je,Te+=qe*je)}return(Ke=we-pe)*Ke+(qe=oe-Te)*qe}function ot(we,oe,pe,Te){var Pe={id:we===void 0?null:we,type:oe,geometry:pe,tags:Te,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ne){var Ke=Ne.geometry,qe=Ne.type;if(qe==="Point"||qe==="MultiPoint"||qe==="LineString")Tt(Ne,Ke);else if(qe==="Polygon"||qe==="MultiLineString")for(var je=0;je<Ke.length;je++)Tt(Ne,Ke[je]);else if(qe==="MultiPolygon")for(je=0;je<Ke.length;je++)for(var tt=0;tt<Ke[je].length;tt++)Tt(Ne,Ke[je][tt])}(Pe),Pe}function Tt(we,oe){for(var pe=0;pe<oe.length;pe+=3)we.minX=Math.min(we.minX,oe[pe]),we.minY=Math.min(we.minY,oe[pe+1]),we.maxX=Math.max(we.maxX,oe[pe]),we.maxY=Math.max(we.maxY,oe[pe+1])}function Ct(we,oe,pe,Te){if(oe.geometry){var Pe=oe.geometry.coordinates,Ne=oe.geometry.type,Ke=Math.pow(pe.tolerance/((1<<pe.maxZoom)*pe.extent),2),qe=[],je=oe.id;if(pe.promoteId?je=oe.properties[pe.promoteId]:pe.generateId&&(je=Te||0),Ne==="Point")Bt(Pe,qe);else if(Ne==="MultiPoint")for(var tt=0;tt<Pe.length;tt++)Bt(Pe[tt],qe);else if(Ne==="LineString")Gt(Pe,qe,Ke,!1);else if(Ne==="MultiLineString"){if(pe.lineMetrics){for(tt=0;tt<Pe.length;tt++)Gt(Pe[tt],qe=[],Ke,!1),we.push(ot(je,"LineString",qe,oe.properties));return}sn(Pe,qe,Ke,!1)}else if(Ne==="Polygon")sn(Pe,qe,Ke,!0);else{if(Ne!=="MultiPolygon"){if(Ne==="GeometryCollection"){for(tt=0;tt<oe.geometry.geometries.length;tt++)Ct(we,{id:je,geometry:oe.geometry.geometries[tt],properties:oe.properties},pe,Te);return}throw new Error("Input data is not a valid GeoJSON object.")}for(tt=0;tt<Pe.length;tt++){var Nt=[];sn(Pe[tt],Nt,Ke,!0),qe.push(Nt)}}we.push(ot(je,Ne,qe,oe.properties))}}function Bt(we,oe){oe.push(Je(we[0])),oe.push(Ce(we[1])),oe.push(0)}function Gt(we,oe,pe,Te){for(var Pe,Ne,Ke=0,qe=0;qe<we.length;qe++){var je=Je(we[qe][0]),tt=Ce(we[qe][1]);oe.push(je),oe.push(tt),oe.push(0),qe>0&&(Ke+=Te?(Pe*tt-je*Ne)/2:Math.sqrt(Math.pow(je-Pe,2)+Math.pow(tt-Ne,2))),Pe=je,Ne=tt}var Nt=oe.length-3;oe[2]=1,ge(oe,0,Nt,pe),oe[Nt+2]=1,oe.size=Math.abs(Ke),oe.start=0,oe.end=oe.size}function sn(we,oe,pe,Te){for(var Pe=0;Pe<we.length;Pe++){var Ne=[];Gt(we[Pe],Ne,pe,Te),oe.push(Ne)}}function Je(we){return we/360+.5}function Ce(we){var oe=Math.sin(we*Math.PI/180),pe=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return pe<0?0:pe>1?1:pe}function _e(we,oe,pe,Te,Pe,Ne,Ke,qe){if(Te/=oe,Ne>=(pe/=oe)&&Ke<Te)return we;if(Ke<pe||Ne>=Te)return null;for(var je=[],tt=0;tt<we.length;tt++){var Nt=we[tt],Ut=Nt.geometry,$t=Nt.type,kn=Pe===0?Nt.minX:Nt.minY,er=Pe===0?Nt.maxX:Nt.maxY;if(kn>=pe&&er<Te)je.push(Nt);else if(!(er<pe||kn>=Te)){var En=[];if($t==="Point"||$t==="MultiPoint")ht(Ut,En,pe,Te,Pe);else if($t==="LineString")dt(Ut,En,pe,Te,Pe,!1,qe.lineMetrics);else if($t==="MultiLineString")jt(Ut,En,pe,Te,Pe,!1);else if($t==="Polygon")jt(Ut,En,pe,Te,Pe,!0);else if($t==="MultiPolygon")for(var $n=0;$n<Ut.length;$n++){var sr=[];jt(Ut[$n],sr,pe,Te,Pe,!0),sr.length&&En.push(sr)}if(En.length){if(qe.lineMetrics&&$t==="LineString"){for($n=0;$n<En.length;$n++)je.push(ot(Nt.id,$t,En[$n],Nt.tags));continue}$t!=="LineString"&&$t!=="MultiLineString"||(En.length===1?($t="LineString",En=En[0]):$t="MultiLineString"),$t!=="Point"&&$t!=="MultiPoint"||($t=En.length===3?"Point":"MultiPoint"),je.push(ot(Nt.id,$t,En,Nt.tags))}}}return je.length?je:null}function ht(we,oe,pe,Te,Pe){for(var Ne=0;Ne<we.length;Ne+=3){var Ke=we[Ne+Pe];Ke>=pe&&Ke<=Te&&(oe.push(we[Ne]),oe.push(we[Ne+1]),oe.push(we[Ne+2]))}}function dt(we,oe,pe,Te,Pe,Ne,Ke){for(var qe,je,tt=Wt(we),Nt=Pe===0?cn:Rt,Ut=we.start,$t=0;$t<we.length-3;$t+=3){var kn=we[$t],er=we[$t+1],En=we[$t+2],$n=we[$t+3],sr=we[$t+4],$r=Pe===0?kn:er,Ae=Pe===0?$n:sr,ut=!1;Ke&&(qe=Math.sqrt(Math.pow(kn-$n,2)+Math.pow(er-sr,2))),$r<pe?Ae>pe&&(je=Nt(tt,kn,er,$n,sr,pe),Ke&&(tt.start=Ut+qe*je)):$r>Te?Ae<Te&&(je=Nt(tt,kn,er,$n,sr,Te),Ke&&(tt.start=Ut+qe*je)):Sn(tt,kn,er,En),Ae<pe&&$r>=pe&&(je=Nt(tt,kn,er,$n,sr,pe),ut=!0),Ae>Te&&$r<=Te&&(je=Nt(tt,kn,er,$n,sr,Te),ut=!0),!Ne&&ut&&(Ke&&(tt.end=Ut+qe*je),oe.push(tt),tt=Wt(we)),Ke&&(Ut+=qe)}var bt=we.length-3;kn=we[bt],er=we[bt+1],En=we[bt+2],($r=Pe===0?kn:er)>=pe&&$r<=Te&&Sn(tt,kn,er,En),bt=tt.length-3,Ne&&bt>=3&&(tt[bt]!==tt[0]||tt[bt+1]!==tt[1])&&Sn(tt,tt[0],tt[1],tt[2]),tt.length&&oe.push(tt)}function Wt(we){var oe=[];return oe.size=we.size,oe.start=we.start,oe.end=we.end,oe}function jt(we,oe,pe,Te,Pe,Ne){for(var Ke=0;Ke<we.length;Ke++)dt(we[Ke],oe,pe,Te,Pe,Ne,!1)}function Sn(we,oe,pe,Te){we.push(oe),we.push(pe),we.push(Te)}function cn(we,oe,pe,Te,Pe,Ne){var Ke=(Ne-oe)/(Te-oe);return we.push(Ne),we.push(pe+(Pe-pe)*Ke),we.push(1),Ke}function Rt(we,oe,pe,Te,Pe,Ne){var Ke=(Ne-pe)/(Pe-pe);return we.push(oe+(Te-oe)*Ke),we.push(Ne),we.push(1),Ke}function nn(we,oe){for(var pe=[],Te=0;Te<we.length;Te++){var Pe,Ne=we[Te],Ke=Ne.type;if(Ke==="Point"||Ke==="MultiPoint"||Ke==="LineString")Pe=An(Ne.geometry,oe);else if(Ke==="MultiLineString"||Ke==="Polygon"){Pe=[];for(var qe=0;qe<Ne.geometry.length;qe++)Pe.push(An(Ne.geometry[qe],oe))}else if(Ke==="MultiPolygon")for(Pe=[],qe=0;qe<Ne.geometry.length;qe++){for(var je=[],tt=0;tt<Ne.geometry[qe].length;tt++)je.push(An(Ne.geometry[qe][tt],oe));Pe.push(je)}pe.push(ot(Ne.id,Ke,Pe,Ne.tags))}return pe}function An(we,oe){var pe=[];pe.size=we.size,we.start!==void 0&&(pe.start=we.start,pe.end=we.end);for(var Te=0;Te<we.length;Te+=3)pe.push(we[Te]+oe,we[Te+1],we[Te+2]);return pe}function mt(we,oe){if(we.transformed)return we;var pe,Te,Pe,Ne=1<<we.z,Ke=we.x,qe=we.y;for(pe=0;pe<we.features.length;pe++){var je=we.features[pe],tt=je.geometry,Nt=je.type;if(je.geometry=[],Nt===1)for(Te=0;Te<tt.length;Te+=2)je.geometry.push(un(tt[Te],tt[Te+1],oe,Ne,Ke,qe));else for(Te=0;Te<tt.length;Te++){var Ut=[];for(Pe=0;Pe<tt[Te].length;Pe+=2)Ut.push(un(tt[Te][Pe],tt[Te][Pe+1],oe,Ne,Ke,qe));je.geometry.push(Ut)}}return we.transformed=!0,we}function un(we,oe,pe,Te,Pe,Ne){return[Math.round(pe*(we*Te-Pe)),Math.round(pe*(oe*Te-Ne))]}function an(we,oe,pe,Te,Pe){for(var Ne=oe===Pe.maxZoom?0:Pe.tolerance/((1<<oe)*Pe.extent),Ke={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:pe,y:Te,z:oe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},qe=0;qe<we.length;qe++){Ke.numFeatures++,Ot(Ke,we[qe],Ne,Pe);var je=we[qe].minX,tt=we[qe].minY,Nt=we[qe].maxX,Ut=we[qe].maxY;je<Ke.minX&&(Ke.minX=je),tt<Ke.minY&&(Ke.minY=tt),Nt>Ke.maxX&&(Ke.maxX=Nt),Ut>Ke.maxY&&(Ke.maxY=Ut)}return Ke}function Ot(we,oe,pe,Te){var Pe=oe.geometry,Ne=oe.type,Ke=[];if(Ne==="Point"||Ne==="MultiPoint")for(var qe=0;qe<Pe.length;qe+=3)Ke.push(Pe[qe]),Ke.push(Pe[qe+1]),we.numPoints++,we.numSimplified++;else if(Ne==="LineString")Ie(Ke,Pe,we,pe,!1,!1);else if(Ne==="MultiLineString"||Ne==="Polygon")for(qe=0;qe<Pe.length;qe++)Ie(Ke,Pe[qe],we,pe,Ne==="Polygon",qe===0);else if(Ne==="MultiPolygon")for(var je=0;je<Pe.length;je++){var tt=Pe[je];for(qe=0;qe<tt.length;qe++)Ie(Ke,tt[qe],we,pe,!0,qe===0)}if(Ke.length){var Nt=oe.tags||null;if(Ne==="LineString"&&Te.lineMetrics){for(var Ut in Nt={},oe.tags)Nt[Ut]=oe.tags[Ut];Nt.mapbox_clip_start=Pe.start/Pe.size,Nt.mapbox_clip_end=Pe.end/Pe.size}var $t={geometry:Ke,type:Ne==="Polygon"||Ne==="MultiPolygon"?3:Ne==="LineString"||Ne==="MultiLineString"?2:1,tags:Nt};oe.id!==null&&($t.id=oe.id),we.features.push($t)}}function Ie(we,oe,pe,Te,Pe,Ne){var Ke=Te*Te;if(Te>0&&oe.size<(Pe?Ke:Te))pe.numPoints+=oe.length/3;else{for(var qe=[],je=0;je<oe.length;je+=3)(Te===0||oe[je+2]>Ke)&&(pe.numSimplified++,qe.push(oe[je]),qe.push(oe[je+1])),pe.numPoints++;Pe&&function(tt,Nt){for(var Ut=0,$t=0,kn=tt.length,er=kn-2;$t<kn;er=$t,$t+=2)Ut+=(tt[$t]-tt[er])*(tt[$t+1]+tt[er+1]);if(Ut>0===Nt)for($t=0,kn=tt.length;$t<kn/2;$t+=2){var En=tt[$t],$n=tt[$t+1];tt[$t]=tt[kn-2-$t],tt[$t+1]=tt[kn-1-$t],tt[kn-2-$t]=En,tt[kn-1-$t]=$n}}(qe,Ne),we.push(qe)}}function Ve(we,oe){var pe=(oe=this.options=function(Pe,Ne){for(var Ke in Ne)Pe[Ke]=Ne[Ke];return Pe}(Object.create(this.options),oe)).debug;if(pe&&console.time("preprocess data"),oe.maxZoom<0||oe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(oe.promoteId&&oe.generateId)throw new Error("promoteId and generateId cannot be used together.");var Te=function(Pe,Ne){var Ke=[];if(Pe.type==="FeatureCollection")for(var qe=0;qe<Pe.features.length;qe++)Ct(Ke,Pe.features[qe],Ne,qe);else Ct(Ke,Pe.type==="Feature"?Pe:{geometry:Pe},Ne);return Ke}(we,oe);this.tiles={},this.tileCoords=[],pe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",oe.indexMaxZoom,oe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Te=function(Pe,Ne){var Ke=Ne.buffer/Ne.extent,qe=Pe,je=_e(Pe,1,-1-Ke,Ke,0,-1,2,Ne),tt=_e(Pe,1,1-Ke,2+Ke,0,-1,2,Ne);return(je||tt)&&(qe=_e(Pe,1,-Ke,1+Ke,0,-1,2,Ne)||[],je&&(qe=nn(je,1).concat(qe)),tt&&(qe=qe.concat(nn(tt,-1)))),qe}(Te,oe),Te.length&&this.splitTile(Te,0,0,0),pe&&(Te.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Me(we,oe,pe){return 32*((1<<we)*pe+oe)+we}function it(we,oe){return oe?we.properties[oe]:we.id}function Qt(we,oe){if(we==null)return!0;if(we.type==="Feature")return it(we,oe)!=null;if(we.type==="FeatureCollection"){const pe=new Set;for(const Te of we.features){const Pe=it(Te,oe);if(Pe==null||pe.has(Pe))return!1;pe.add(Pe)}return!0}return!1}function Xe(we,oe){const pe=new Map;if(we!=null)if(we.type==="Feature")pe.set(it(we,oe),we);else for(const Te of we.features)pe.set(it(Te,oe),Te);return pe}Ve.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ve.prototype.splitTile=function(we,oe,pe,Te,Pe,Ne,Ke){for(var qe=[we,oe,pe,Te],je=this.options,tt=je.debug;qe.length;){Te=qe.pop(),pe=qe.pop(),oe=qe.pop(),we=qe.pop();var Nt=1<<oe,Ut=Me(oe,pe,Te),$t=this.tiles[Ut];if(!$t&&(tt>1&&console.time("creation"),$t=this.tiles[Ut]=an(we,oe,pe,Te,je),this.tileCoords.push({z:oe,x:pe,y:Te}),tt)){tt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",oe,pe,Te,$t.numFeatures,$t.numPoints,$t.numSimplified),console.timeEnd("creation"));var kn="z"+oe;this.stats[kn]=(this.stats[kn]||0)+1,this.total++}if($t.source=we,Pe){if(oe===je.maxZoom||oe===Pe)continue;var er=1<<Pe-oe;if(pe!==Math.floor(Ne/er)||Te!==Math.floor(Ke/er))continue}else if(oe===je.indexMaxZoom||$t.numPoints<=je.indexMaxPoints)continue;if($t.source=null,we.length!==0){tt>1&&console.time("clipping");var En,$n,sr,$r,Ae,ut,bt=.5*je.buffer/je.extent,yt=.5-bt,vt=.5+bt,pn=1+bt;En=$n=sr=$r=null,Ae=_e(we,Nt,pe-bt,pe+vt,0,$t.minX,$t.maxX,je),ut=_e(we,Nt,pe+yt,pe+pn,0,$t.minX,$t.maxX,je),we=null,Ae&&(En=_e(Ae,Nt,Te-bt,Te+vt,1,$t.minY,$t.maxY,je),$n=_e(Ae,Nt,Te+yt,Te+pn,1,$t.minY,$t.maxY,je),Ae=null),ut&&(sr=_e(ut,Nt,Te-bt,Te+vt,1,$t.minY,$t.maxY,je),$r=_e(ut,Nt,Te+yt,Te+pn,1,$t.minY,$t.maxY,je),ut=null),tt>1&&console.timeEnd("clipping"),qe.push(En||[],oe+1,2*pe,2*Te),qe.push($n||[],oe+1,2*pe,2*Te+1),qe.push(sr||[],oe+1,2*pe+1,2*Te),qe.push($r||[],oe+1,2*pe+1,2*Te+1)}}},Ve.prototype.getTile=function(we,oe,pe){var Te=this.options,Pe=Te.extent,Ne=Te.debug;if(we<0||we>24)return null;var Ke=1<<we,qe=Me(we,oe=(oe%Ke+Ke)%Ke,pe);if(this.tiles[qe])return mt(this.tiles[qe],Pe);Ne>1&&console.log("drilling down to z%d-%d-%d",we,oe,pe);for(var je,tt=we,Nt=oe,Ut=pe;!je&&tt>0;)tt--,Nt=Math.floor(Nt/2),Ut=Math.floor(Ut/2),je=this.tiles[Me(tt,Nt,Ut)];return je&&je.source?(Ne>1&&console.log("found parent tile z%d-%d-%d",tt,Nt,Ut),Ne>1&&console.time("drilling down"),this.splitTile(je.source,tt,Nt,Ut,we,oe,pe),Ne>1&&console.timeEnd("drilling down"),this.tiles[qe]?mt(this.tiles[qe],Pe):null):null};class It extends v{constructor(oe,pe,Te,Pe){super(oe,pe,Te),this._dataUpdateable=new Map,this.loadGeoJSON=(Ne,Ke)=>{const{promoteId:qe}=Ne;if(Ne.request)return s.f(Ne.request,(je,tt,Nt,Ut)=>{this._dataUpdateable=Qt(tt,qe)?Xe(tt,qe):void 0,Ke(je,tt,Nt,Ut)});if(typeof Ne.data=="string")try{const je=JSON.parse(Ne.data);this._dataUpdateable=Qt(je,qe)?Xe(je,qe):void 0,Ke(null,je)}catch{Ke(new Error(`Input data given to '${Ne.source}' is not a valid GeoJSON object.`))}else Ne.dataDiff?this._dataUpdateable?(function(je,tt,Nt){var Ut,$t,kn,er;if(tt.removeAll&&je.clear(),tt.remove)for(const En of tt.remove)je.delete(En);if(tt.add)for(const En of tt.add){const $n=it(En,Nt);$n!=null&&je.set($n,En)}if(tt.update)for(const En of tt.update){let $n=je.get(En.id);if($n==null)continue;const sr=!En.removeAllProperties&&(((Ut=En.removeProperties)===null||Ut===void 0?void 0:Ut.length)>0||(($t=En.addOrUpdateProperties)===null||$t===void 0?void 0:$t.length)>0);if((En.newGeometry||En.removeAllProperties||sr)&&($n=Object.assign({},$n),je.set(En.id,$n),sr&&($n.properties=Object.assign({},$n.properties))),En.newGeometry&&($n.geometry=En.newGeometry),En.removeAllProperties)$n.properties={};else if(((kn=En.removeProperties)===null||kn===void 0?void 0:kn.length)>0)for(const $r of En.removeProperties)Object.prototype.hasOwnProperty.call($n.properties,$r)&&delete $n.properties[$r];if(((er=En.addOrUpdateProperties)===null||er===void 0?void 0:er.length)>0)for(const{key:$r,value:Ae}of En.addOrUpdateProperties)$n.properties[$r]=Ae}}(this._dataUpdateable,Ne.dataDiff,qe),Ke(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):Ke(new Error(`Cannot update existing geojson data in ${Ne.source}`)):Ke(new Error(`Input data given to '${Ne.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,Pe&&(this.loadGeoJSON=Pe)}loadGeoJSONTile(oe,pe){const Te=oe.tileID.canonical;if(!this._geoJSONIndex)return pe(null,null);const Pe=this._geoJSONIndex.getTile(Te.z,Te.x,Te.y);if(!Pe)return pe(null,null);const Ne=new class{constructor(qe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.N,this.length=qe.length,this._features=qe}feature(qe){return new class{constructor(je){this._feature=je,this.extent=s.N,this.type=je.type,this.properties=je.tags,"id"in je&&!isNaN(je.id)&&(this.id=parseInt(je.id,10))}loadGeometry(){if(this._feature.type===1){const je=[];for(const tt of this._feature.geometry)je.push([new s.P(tt[0],tt[1])]);return je}{const je=[];for(const tt of this._feature.geometry){const Nt=[];for(const Ut of tt)Nt.push(new s.P(Ut[0],Ut[1]));je.push(Nt)}return je}}toGeoJSON(je,tt,Nt){return T.call(this,je,tt,Nt)}}(this._features[qe])}}(Pe.features);let Ke=he(Ne);Ke.byteOffset===0&&Ke.byteLength===Ke.buffer.byteLength||(Ke=new Uint8Array(Ke)),pe(null,{vectorTile:Ne,rawData:Ke.buffer})}loadData(oe,pe){var Te;(Te=this._pendingRequest)===null||Te===void 0||Te.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Pe=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new s.bu(oe.request);this._pendingCallback=pe,this._pendingRequest=this.loadGeoJSON(oe,(Ne,Ke)=>{if(delete this._pendingCallback,delete this._pendingRequest,Ne||!Ke)return pe(Ne);if(typeof Ke!="object")return pe(new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`));{w(Ke,!0);try{if(oe.filter){const je=s.bC(oe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(je.result==="error")throw new Error(je.value.map(Nt=>`${Nt.key}: ${Nt.message}`).join(", "));Ke={type:"FeatureCollection",features:Ke.features.filter(Nt=>je.value.evaluate({zoom:0},Nt))}}this._geoJSONIndex=oe.cluster?new ct(function({superclusterOptions:je,clusterProperties:tt}){if(!tt||!je)return je;const Nt={},Ut={},$t={accumulated:null,zoom:0},kn={properties:null},er=Object.keys(tt);for(const En of er){const[$n,sr]=tt[En],$r=s.bC(sr),Ae=s.bC(typeof $n=="string"?[$n,["accumulated"],["get",En]]:$n);Nt[En]=$r.value,Ut[En]=Ae.value}return je.map=En=>{kn.properties=En;const $n={};for(const sr of er)$n[sr]=Nt[sr].evaluate($t,kn);return $n},je.reduce=(En,$n)=>{kn.properties=$n;for(const sr of er)$t.accumulated=En[sr],En[sr]=Ut[sr].evaluate($t,kn)},je}(oe)).load(Ke.features):function(je,tt){return new Ve(je,tt)}(Ke,oe.geojsonVtOptions)}catch(je){return pe(je)}this.loaded={};const qe={};if(Pe){const je=Pe.finish();je&&(qe.resourceTiming={},qe.resourceTiming[oe.source]=JSON.parse(JSON.stringify(je)))}pe(null,qe)}})}reloadTile(oe,pe){const Te=this.loaded;return Te&&Te[oe.uid]?super.reloadTile(oe,pe):this.loadTile(oe,pe)}removeSource(oe,pe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),pe()}getClusterExpansionZoom(oe,pe){try{pe(null,this._geoJSONIndex.getClusterExpansionZoom(oe.clusterId))}catch(Te){pe(Te)}}getClusterChildren(oe,pe){try{pe(null,this._geoJSONIndex.getChildren(oe.clusterId))}catch(Te){pe(Te)}}getClusterLeaves(oe,pe){try{pe(null,this._geoJSONIndex.getLeaves(oe.clusterId,oe.limit,oe.offset))}catch(Te){pe(Te)}}}class Et{constructor(oe){this.self=oe,this.actor=new s.C(oe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:v,geojson:It},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(pe,Te)=>{if(this.workerSourceTypes[pe])throw new Error(`Worker source with name "${pe}" already registered.`);this.workerSourceTypes[pe]=Te},this.self.registerRTLTextPlugin=pe=>{if(s.bD.isParsed())throw new Error("RTL text plugin already registered.");s.bD.applyArabicShaping=pe.applyArabicShaping,s.bD.processBidirectionalText=pe.processBidirectionalText,s.bD.processStyledBidirectionalText=pe.processStyledBidirectionalText}}setReferrer(oe,pe){this.referrer=pe}setImages(oe,pe,Te){this.availableImages[oe]=pe;for(const Pe in this.workerSources[oe]){const Ne=this.workerSources[oe][Pe];for(const Ke in Ne)Ne[Ke].availableImages=pe}Te()}setLayers(oe,pe,Te){this.getLayerIndex(oe).replace(pe),Te()}updateLayers(oe,pe,Te){this.getLayerIndex(oe).update(pe.layers,pe.removedIds),Te()}loadTile(oe,pe,Te){this.getWorkerSource(oe,pe.type,pe.source).loadTile(pe,Te)}loadDEMTile(oe,pe,Te){this.getDEMWorkerSource(oe,pe.source).loadTile(pe,Te)}reloadTile(oe,pe,Te){this.getWorkerSource(oe,pe.type,pe.source).reloadTile(pe,Te)}abortTile(oe,pe,Te){this.getWorkerSource(oe,pe.type,pe.source).abortTile(pe,Te)}removeTile(oe,pe,Te){this.getWorkerSource(oe,pe.type,pe.source).removeTile(pe,Te)}removeDEMTile(oe,pe){this.getDEMWorkerSource(oe,pe.source).removeTile(pe)}removeSource(oe,pe,Te){if(!this.workerSources[oe]||!this.workerSources[oe][pe.type]||!this.workerSources[oe][pe.type][pe.source])return;const Pe=this.workerSources[oe][pe.type][pe.source];delete this.workerSources[oe][pe.type][pe.source],Pe.removeSource!==void 0?Pe.removeSource(pe,Te):Te()}loadWorkerSource(oe,pe,Te){try{this.self.importScripts(pe.url),Te()}catch(Pe){Te(Pe.toString())}}syncRTLPluginState(oe,pe,Te){try{s.bD.setState(pe);const Pe=s.bD.getPluginURL();if(s.bD.isLoaded()&&!s.bD.isParsed()&&Pe!=null){this.self.importScripts(Pe);const Ne=s.bD.isParsed();Te(Ne?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Pe}`),Ne)}}catch(Pe){Te(Pe.toString())}}getAvailableImages(oe){let pe=this.availableImages[oe];return pe||(pe=[]),pe}getLayerIndex(oe){let pe=this.layerIndexes[oe];return pe||(pe=this.layerIndexes[oe]=new l),pe}getWorkerSource(oe,pe,Te){return this.workerSources[oe]||(this.workerSources[oe]={}),this.workerSources[oe][pe]||(this.workerSources[oe][pe]={}),this.workerSources[oe][pe][Te]||(this.workerSources[oe][pe][Te]=new this.workerSourceTypes[pe]({send:(Pe,Ne,Ke)=>{this.actor.send(Pe,Ne,Ke,oe)}},this.getLayerIndex(oe),this.getAvailableImages(oe))),this.workerSources[oe][pe][Te]}getDEMWorkerSource(oe,pe){return this.demWorkerSources[oe]||(this.demWorkerSources[oe]={}),this.demWorkerSources[oe][pe]||(this.demWorkerSources[oe][pe]=new x),this.demWorkerSources[oe][pe]}}return s.i()&&(self.worker=new Et(self)),Et}),o(["./shared"],function(s){var l="3.6.2";class c{static testProp(d){if(!c.docStyle)return d[0];for(let y=0;y<d.length;y++)if(d[y]in c.docStyle)return d[y];return d[0]}static create(d,y,A){const k=window.document.createElement(d);return y!==void 0&&(k.className=y),A&&A.appendChild(k),k}static createNS(d,y){return window.document.createElementNS(d,y)}static disableDrag(){c.docStyle&&c.selectProp&&(c.userSelect=c.docStyle[c.selectProp],c.docStyle[c.selectProp]="none")}static enableDrag(){c.docStyle&&c.selectProp&&(c.docStyle[c.selectProp]=c.userSelect)}static setTransform(d,y){d.style[c.transformProp]=y}static addEventListener(d,y,A,k={}){d.addEventListener(y,A,"passive"in k?k:k.capture)}static removeEventListener(d,y,A,k={}){d.removeEventListener(y,A,"passive"in k?k:k.capture)}static suppressClickInternal(d){d.preventDefault(),d.stopPropagation(),window.removeEventListener("click",c.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",c.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",c.suppressClickInternal,!0)},0)}static mousePos(d,y){const A=d.getBoundingClientRect();return new s.P(y.clientX-A.left-d.clientLeft,y.clientY-A.top-d.clientTop)}static touchPos(d,y){const A=d.getBoundingClientRect(),k=[];for(let D=0;D<y.length;D++)k.push(new s.P(y[D].clientX-A.left-d.clientLeft,y[D].clientY-A.top-d.clientTop));return k}static mouseButton(d){return d.button}static remove(d){d.parentNode&&d.parentNode.removeChild(d)}}c.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,c.selectProp=c.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),c.transformProp=c.testProp(["transform","WebkitTransform"]);const h={supported:!1,testSupport:function(L){!v&&g&&(x?b(L):p=L)}};let p,g,v=!1,x=!1;function b(L){const d=L.createTexture();L.bindTexture(L.TEXTURE_2D,d);try{if(L.texImage2D(L.TEXTURE_2D,0,L.RGBA,L.RGBA,L.UNSIGNED_BYTE,g),L.isContextLost())return;h.supported=!0}catch{}L.deleteTexture(d),v=!0}var M,w;typeof document<"u"&&(g=document.createElement("img"),g.onload=function(){p&&b(p),p=null,x=!0},g.onerror=function(){v=!0,p=null},g.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(L){let d,y,A,k;L.resetRequestQueue=()=>{d=[],y=0,A=0,k={}},L.addThrottleControl=ee=>{const re=A++;return k[re]=ee,re},L.removeThrottleControl=ee=>{delete k[ee],G()},L.getImage=(ee,re,se=!0)=>{h.supported&&(ee.headers||(ee.headers={}),ee.headers.accept="image/webp,*/*");const be={requestParameters:ee,supportImageRefresh:se,callback:re,cancelled:!1,completed:!1,cancel:()=>{be.completed||be.cancelled||(be.cancelled=!0,be.innerRequest&&(be.innerRequest.cancel(),y--),G())}};return d.push(be),G(),be};const D=ee=>{const{requestParameters:re,supportImageRefresh:se,callback:be}=ee;return s.e(re,{type:"image"}),(se!==!1||s.i()||s.g(re.url)||re.headers&&!Object.keys(re.headers).reduce((Le,Re)=>Le&&Re==="accept",!0)?s.m:K)(re,(Le,Re,$e,ke)=>{H(ee,be,Le,Re,$e,ke)})},H=(ee,re,se,be,Le,Re)=>{se?re(se):be instanceof HTMLImageElement||s.a(be)?re(null,be):be&&(($e,ke)=>{typeof createImageBitmap=="function"?s.b($e,ke):s.d($e,ke)})(be,($e,ke)=>{$e!=null?re($e):ke!=null&&re(null,ke,{cacheControl:Le,expires:Re})}),ee.cancelled||(ee.completed=!0,y--,G())},G=()=>{const ee=(()=>{const re=Object.keys(k);let se=!1;if(re.length>0){for(const be of re)if(se=k[be](),se)break}return se})()?s.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let re=y;re<ee&&d.length>0;re++){const se=d.shift();if(se.cancelled){re--;continue}const be=D(se);y++,se.innerRequest=be}},K=(ee,re)=>{const se=new Image,be=ee.url;let Le=!1;const Re=ee.credentials;return Re&&Re==="include"?se.crossOrigin="use-credentials":(Re&&Re==="same-origin"||!s.s(be))&&(se.crossOrigin="anonymous"),se.fetchPriority="high",se.onload=()=>{re(null,se),se.onerror=se.onload=null},se.onerror=()=>{Le||re(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),se.onerror=se.onload=null},se.src=be,{cancel:()=>{Le=!0,se.src=""}}}}(M||(M={})),M.resetRequestQueue(),function(L){L.Glyphs="Glyphs",L.Image="Image",L.Source="Source",L.SpriteImage="SpriteImage",L.SpriteJSON="SpriteJSON",L.Style="Style",L.Tile="Tile",L.Unknown="Unknown"}(w||(w={}));class T{constructor(d){this._transformRequestFn=d}transformRequest(d,y){return this._transformRequestFn&&this._transformRequestFn(d,y)||{url:d}}normalizeSpriteURL(d,y,A){const k=function(D){const H=D.match(C);if(!H)throw new Error(`Unable to parse URL "${D}"`);return{protocol:H[1],authority:H[2],path:H[3]||"/",params:H[4]?H[4].split("&"):[]}}(d);return k.path+=`${y}${A}`,function(D){const H=D.params.length?`?${D.params.join("&")}`:"";return`${D.protocol}://${D.authority}${D.path}${H}`}(k)}setTransformRequest(d){this._transformRequestFn=d}}const C=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function I(L){var d=new s.A(3);return d[0]=L[0],d[1]=L[1],d[2]=L[2],d}var R,O=function(L,d,y){return L[0]=d[0]-y[0],L[1]=d[1]-y[1],L[2]=d[2]-y[2],L};R=new s.A(3),s.A!=Float32Array&&(R[0]=0,R[1]=0,R[2]=0);var B=function(L){var d=L[0],y=L[1];return d*d+y*y};function U(L){const d=[];if(typeof L=="string")d.push({id:"default",url:L});else if(L&&L.length>0){const y=[];for(const{id:A,url:k}of L){const D=`${A}${k}`;y.indexOf(D)===-1&&(y.push(D),d.push({id:A,url:k}))}}return d}function Z(L,d,y,A,k){if(A)return void L(A);if(k!==Object.values(d).length||k!==Object.values(y).length)return;const D={};for(const H in d){D[H]={};const G=s.h.getImageCanvasContext(y[H]),K=d[H];for(const ee in K){const{width:re,height:se,x:be,y:Le,sdf:Re,pixelRatio:$e,stretchX:ke,stretchY:at,content:Mt}=K[ee];D[H][ee]={data:null,pixelRatio:$e,sdf:Re,stretchX:ke,stretchY:at,content:Mt,spriteData:{width:re,height:se,x:be,y:Le,context:G}}}}L(null,D)}(function(){var L=new s.A(2);s.A!=Float32Array&&(L[0]=0,L[1]=0)})();class j{constructor(d,y,A,k){this.context=d,this.format=A,this.texture=d.gl.createTexture(),this.update(y,k)}update(d,y,A){const{width:k,height:D}=d,H=!(this.size&&this.size[0]===k&&this.size[1]===D||A),{context:G}=this,{gl:K}=G;if(this.useMipmap=!!(y&&y.useMipmap),K.bindTexture(K.TEXTURE_2D,this.texture),G.pixelStoreUnpackFlipY.set(!1),G.pixelStoreUnpack.set(1),G.pixelStoreUnpackPremultiplyAlpha.set(this.format===K.RGBA&&(!y||y.premultiply!==!1)),H)this.size=[k,D],d instanceof HTMLImageElement||d instanceof HTMLCanvasElement||d instanceof HTMLVideoElement||d instanceof ImageData||s.a(d)?K.texImage2D(K.TEXTURE_2D,0,this.format,this.format,K.UNSIGNED_BYTE,d):K.texImage2D(K.TEXTURE_2D,0,this.format,k,D,0,this.format,K.UNSIGNED_BYTE,d.data);else{const{x:ee,y:re}=A||{x:0,y:0};d instanceof HTMLImageElement||d instanceof HTMLCanvasElement||d instanceof HTMLVideoElement||d instanceof ImageData||s.a(d)?K.texSubImage2D(K.TEXTURE_2D,0,ee,re,K.RGBA,K.UNSIGNED_BYTE,d):K.texSubImage2D(K.TEXTURE_2D,0,ee,re,k,D,K.RGBA,K.UNSIGNED_BYTE,d.data)}this.useMipmap&&this.isSizePowerOfTwo()&&K.generateMipmap(K.TEXTURE_2D)}bind(d,y,A){const{context:k}=this,{gl:D}=k;D.bindTexture(D.TEXTURE_2D,this.texture),A!==D.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(A=D.LINEAR),d!==this.filter&&(D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MAG_FILTER,d),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MIN_FILTER,A||d),this.filter=d),y!==this.wrap&&(D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_S,y),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_T,y),this.wrap=y)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:d}=this.context;d.deleteTexture(this.texture),this.texture=null}}function X(L){const{userImage:d}=L;return!!(d&&d.render&&d.render())&&(L.data.replace(new Uint8Array(d.data.buffer)),!0)}class le extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(d){if(this.loaded!==d&&(this.loaded=d,d)){for(const{ids:y,callback:A}of this.requestors)this._notify(y,A);this.requestors=[]}}getImage(d){const y=this.images[d];if(y&&!y.data&&y.spriteData){const A=y.spriteData;y.data=new s.R({width:A.width,height:A.height},A.context.getImageData(A.x,A.y,A.width,A.height).data),y.spriteData=null}return y}addImage(d,y){if(this.images[d])throw new Error(`Image id ${d} already exist, use updateImage instead`);this._validate(d,y)&&(this.images[d]=y)}_validate(d,y){let A=!0;const k=y.data||y.spriteData;return this._validateStretch(y.stretchX,k&&k.width)||(this.fire(new s.j(new Error(`Image "${d}" has invalid "stretchX" value`))),A=!1),this._validateStretch(y.stretchY,k&&k.height)||(this.fire(new s.j(new Error(`Image "${d}" has invalid "stretchY" value`))),A=!1),this._validateContent(y.content,y)||(this.fire(new s.j(new Error(`Image "${d}" has invalid "content" value`))),A=!1),A}_validateStretch(d,y){if(!d)return!0;let A=0;for(const k of d){if(k[0]<A||k[1]<k[0]||y<k[1])return!1;A=k[1]}return!0}_validateContent(d,y){if(!d)return!0;if(d.length!==4)return!1;const A=y.spriteData,k=A&&A.width||y.data.width,D=A&&A.height||y.data.height;return!(d[0]<0||k<d[0]||d[1]<0||D<d[1]||d[2]<0||k<d[2]||d[3]<0||D<d[3]||d[2]<d[0]||d[3]<d[1])}updateImage(d,y,A=!0){const k=this.getImage(d);if(A&&(k.data.width!==y.data.width||k.data.height!==y.data.height))throw new Error(`size mismatch between old image (${k.data.width}x${k.data.height}) and new image (${y.data.width}x${y.data.height}).`);y.version=k.version+1,this.images[d]=y,this.updatedImages[d]=!0}removeImage(d){const y=this.images[d];delete this.images[d],delete this.patterns[d],y.userImage&&y.userImage.onRemove&&y.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(d,y){let A=!0;if(!this.isLoaded())for(const k of d)this.images[k]||(A=!1);this.isLoaded()||A?this._notify(d,y):this.requestors.push({ids:d,callback:y})}_notify(d,y){const A={};for(const k of d){let D=this.getImage(k);D||(this.fire(new s.k("styleimagemissing",{id:k})),D=this.getImage(k)),D?A[k]={data:D.data.clone(),pixelRatio:D.pixelRatio,sdf:D.sdf,version:D.version,stretchX:D.stretchX,stretchY:D.stretchY,content:D.content,hasRenderCallback:!!(D.userImage&&D.userImage.render)}:s.w(`Image "${k}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}y(null,A)}getPixelSize(){const{width:d,height:y}=this.atlasImage;return{width:d,height:y}}getPattern(d){const y=this.patterns[d],A=this.getImage(d);if(!A)return null;if(y&&y.position.version===A.version)return y.position;if(y)y.position.version=A.version;else{const k={w:A.data.width+2,h:A.data.height+2,x:0,y:0},D=new s.I(k,A);this.patterns[d]={bin:k,position:D}}return this._updatePatternAtlas(),this.patterns[d].position}bind(d){const y=d.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new j(d,this.atlasImage,y.RGBA),this.atlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE)}_updatePatternAtlas(){const d=[];for(const D in this.patterns)d.push(this.patterns[D].bin);const{w:y,h:A}=s.p(d),k=this.atlasImage;k.resize({width:y||1,height:A||1});for(const D in this.patterns){const{bin:H}=this.patterns[D],G=H.x+1,K=H.y+1,ee=this.getImage(D).data,re=ee.width,se=ee.height;s.R.copy(ee,k,{x:0,y:0},{x:G,y:K},{width:re,height:se}),s.R.copy(ee,k,{x:0,y:se-1},{x:G,y:K-1},{width:re,height:1}),s.R.copy(ee,k,{x:0,y:0},{x:G,y:K+se},{width:re,height:1}),s.R.copy(ee,k,{x:re-1,y:0},{x:G-1,y:K},{width:1,height:se}),s.R.copy(ee,k,{x:0,y:0},{x:G+re,y:K},{width:1,height:se})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(d){for(const y of d){if(this.callbackDispatchedThisFrame[y])continue;this.callbackDispatchedThisFrame[y]=!0;const A=this.getImage(y);A||s.w(`Image with ID: "${y}" was not found`),X(A)&&this.updateImage(y,A)}}}const me=1e20;function ie(L,d,y,A,k,D,H,G,K){for(let ee=d;ee<d+A;ee++)ce(L,y*D+ee,D,k,H,G,K);for(let ee=y;ee<y+k;ee++)ce(L,ee*D+d,1,A,H,G,K)}function ce(L,d,y,A,k,D,H){D[0]=0,H[0]=-me,H[1]=me,k[0]=L[d];for(let G=1,K=0,ee=0;G<A;G++){k[G]=L[d+G*y];const re=G*G;do{const se=D[K];ee=(k[G]-k[se]+re-se*se)/(G-se)/2}while(ee<=H[K]&&--K>-1);K++,D[K]=G,H[K]=ee,H[K+1]=me}for(let G=0,K=0;G<A;G++){for(;H[K+1]<G;)K++;const ee=D[K],re=G-ee;L[d+G*y]=k[ee]+re*re}}class fe{constructor(d,y){this.requestManager=d,this.localIdeographFontFamily=y,this.entries={}}setURL(d){this.url=d}getGlyphs(d,y){const A=[];for(const k in d)for(const D of d[k])A.push({stack:k,id:D});s.o(A,({stack:k,id:D},H)=>{let G=this.entries[k];G||(G=this.entries[k]={glyphs:{},requests:{},ranges:{}});let K=G.glyphs[D];if(K!==void 0)return void H(null,{stack:k,id:D,glyph:K});if(K=this._tinySDF(G,k,D),K)return G.glyphs[D]=K,void H(null,{stack:k,id:D,glyph:K});const ee=Math.floor(D/256);if(256*ee>65535)return void H(new Error("glyphs > 65535 not supported"));if(G.ranges[ee])return void H(null,{stack:k,id:D,glyph:K});if(!this.url)return void H(new Error("glyphsUrl is not set"));let re=G.requests[ee];re||(re=G.requests[ee]=[],fe.loadGlyphRange(k,ee,this.url,this.requestManager,(se,be)=>{if(be){for(const Le in be)this._doesCharSupportLocalGlyph(+Le)||(G.glyphs[+Le]=be[+Le]);G.ranges[ee]=!0}for(const Le of re)Le(se,be);delete G.requests[ee]})),re.push((se,be)=>{se?H(se):be&&H(null,{stack:k,id:D,glyph:be[D]||null})})},(k,D)=>{if(k)y(k);else if(D){const H={};for(const{stack:G,id:K,glyph:ee}of D)(H[G]||(H[G]={}))[K]=ee&&{id:ee.id,bitmap:ee.bitmap.clone(),metrics:ee.metrics};y(null,H)}})}_doesCharSupportLocalGlyph(d){return!!this.localIdeographFontFamily&&(s.u["CJK Unified Ideographs"](d)||s.u["Hangul Syllables"](d)||s.u.Hiragana(d)||s.u.Katakana(d))}_tinySDF(d,y,A){const k=this.localIdeographFontFamily;if(!k||!this._doesCharSupportLocalGlyph(A))return;let D=d.tinySDF;if(!D){let G="400";/bold/i.test(y)?G="900":/medium/i.test(y)?G="500":/light/i.test(y)&&(G="200"),D=d.tinySDF=new fe.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:k,fontWeight:G})}const H=D.draw(String.fromCharCode(A));return{id:A,bitmap:new s.q({width:H.width||60,height:H.height||60},H.data),metrics:{width:H.glyphWidth/2||24,height:H.glyphHeight/2||24,left:H.glyphLeft/2+.5||0,top:H.glyphTop/2-27.5||-8,advance:H.glyphAdvance/2||24,isDoubleResolution:!0}}}}fe.loadGlyphRange=function(L,d,y,A,k){const D=256*d,H=D+255,G=A.transformRequest(y.replace("{fontstack}",L).replace("{range}",`${D}-${H}`),w.Glyphs);s.l(G,(K,ee)=>{if(K)k(K);else if(ee){const re={};for(const se of s.n(ee))re[se.id]=se;k(null,re)}})},fe.TinySDF=class{constructor({fontSize:L=24,buffer:d=3,radius:y=8,cutoff:A=.25,fontFamily:k="sans-serif",fontWeight:D="normal",fontStyle:H="normal"}={}){this.buffer=d,this.cutoff=A,this.radius=y;const G=this.size=L+4*d,K=this._createCanvas(G),ee=this.ctx=K.getContext("2d",{willReadFrequently:!0});ee.font=`${H} ${D} ${L}px ${k}`,ee.textBaseline="alphabetic",ee.textAlign="left",ee.fillStyle="black",this.gridOuter=new Float64Array(G*G),this.gridInner=new Float64Array(G*G),this.f=new Float64Array(G),this.z=new Float64Array(G+1),this.v=new Uint16Array(G)}_createCanvas(L){const d=document.createElement("canvas");return d.width=d.height=L,d}draw(L){const{width:d,actualBoundingBoxAscent:y,actualBoundingBoxDescent:A,actualBoundingBoxLeft:k,actualBoundingBoxRight:D}=this.ctx.measureText(L),H=Math.ceil(y),G=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(D-k))),K=Math.min(this.size-this.buffer,H+Math.ceil(A)),ee=G+2*this.buffer,re=K+2*this.buffer,se=Math.max(ee*re,0),be=new Uint8ClampedArray(se),Le={data:be,width:ee,height:re,glyphWidth:G,glyphHeight:K,glyphTop:H,glyphLeft:0,glyphAdvance:d};if(G===0||K===0)return Le;const{ctx:Re,buffer:$e,gridInner:ke,gridOuter:at}=this;Re.clearRect($e,$e,G,K),Re.fillText(L,$e,$e+H);const Mt=Re.getImageData($e,$e,G,K);at.fill(me,0,se),ke.fill(0,0,se);for(let Ge=0;Ge<K;Ge++)for(let ft=0;ft<G;ft++){const At=Mt.data[4*(Ge*G+ft)+3]/255;if(At===0)continue;const Pt=(Ge+$e)*ee+ft+$e;if(At===1)at[Pt]=0,ke[Pt]=me;else{const qt=.5-At;at[Pt]=qt>0?qt*qt:0,ke[Pt]=qt<0?qt*qt:0}}ie(at,0,0,ee,re,ee,this.f,this.v,this.z),ie(ke,$e,$e,G,K,ee,this.f,this.v,this.z);for(let Ge=0;Ge<se;Ge++){const ft=Math.sqrt(at[Ge])-Math.sqrt(ke[Ge]);be[Ge]=Math.round(255-255*(ft/this.radius+this.cutoff))}return Le}};class xe{constructor(){this.specification=s.v.light.position}possiblyEvaluate(d,y){return s.z(d.expression.evaluate(y))}interpolate(d,y,A){return{x:s.B.number(d.x,y.x,A),y:s.B.number(d.y,y.y,A),z:s.B.number(d.z,y.z,A)}}}let te;class he extends s.E{constructor(d){super(),te=te||new s.r({anchor:new s.D(s.v.light.anchor),position:new xe,color:new s.D(s.v.light.color),intensity:new s.D(s.v.light.intensity)}),this._transitionable=new s.T(te),this.setLight(d),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(d,y={}){if(!this._validate(s.t,d,y))for(const A in d){const k=d[A];A.endsWith("-transition")?this._transitionable.setTransition(A.slice(0,-11),k):this._transitionable.setValue(A,k)}}updateTransitions(d){this._transitioning=this._transitionable.transitioned(d,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(d){this.properties=this._transitioning.possiblyEvaluate(d)}_validate(d,y,A){return(!A||A.validate!==!1)&&s.x(this,d.call(s.y,s.e({value:y,style:{glyphs:!0,sprite:!0},styleSpec:s.v})))}}class ve{constructor(d,y){this.width=d,this.height=y,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(d,y){const A=d.join(",")+String(y);return this.dashEntry[A]||(this.dashEntry[A]=this.addDash(d,y)),this.dashEntry[A]}getDashRanges(d,y,A){const k=[];let D=d.length%2==1?-d[d.length-1]*A:0,H=d[0]*A,G=!0;k.push({left:D,right:H,isDash:G,zeroLength:d[0]===0});let K=d[0];for(let ee=1;ee<d.length;ee++){G=!G;const re=d[ee];D=K*A,K+=re,H=K*A,k.push({left:D,right:H,isDash:G,zeroLength:re===0})}return k}addRoundDash(d,y,A){const k=y/2;for(let D=-A;D<=A;D++){const H=this.width*(this.nextRow+A+D);let G=0,K=d[G];for(let ee=0;ee<this.width;ee++){ee/K.right>1&&(K=d[++G]);const re=Math.abs(ee-K.left),se=Math.abs(ee-K.right),be=Math.min(re,se);let Le;const Re=D/A*(k+1);if(K.isDash){const $e=k-Math.abs(Re);Le=Math.sqrt(be*be+$e*$e)}else Le=k-Math.sqrt(be*be+Re*Re);this.data[H+ee]=Math.max(0,Math.min(255,Le+128))}}}addRegularDash(d){for(let G=d.length-1;G>=0;--G){const K=d[G],ee=d[G+1];K.zeroLength?d.splice(G,1):ee&&ee.isDash===K.isDash&&(ee.left=K.left,d.splice(G,1))}const y=d[0],A=d[d.length-1];y.isDash===A.isDash&&(y.left=A.left-this.width,A.right=y.right+this.width);const k=this.width*this.nextRow;let D=0,H=d[D];for(let G=0;G<this.width;G++){G/H.right>1&&(H=d[++D]);const K=Math.abs(G-H.left),ee=Math.abs(G-H.right),re=Math.min(K,ee);this.data[k+G]=Math.max(0,Math.min(255,(H.isDash?re:-re)+128))}}addDash(d,y){const A=y?7:0,k=2*A+1;if(this.nextRow+k>this.height)return s.w("LineAtlas out of space"),null;let D=0;for(let G=0;G<d.length;G++)D+=d[G];if(D!==0){const G=this.width/D,K=this.getDashRanges(d,this.width,G);y?this.addRoundDash(K,G,A):this.addRegularDash(K)}const H={y:(this.nextRow+A+.5)/this.height,height:2*A/this.height,width:D};return this.nextRow+=k,this.dirty=!0,H}bind(d){const y=d.gl;this.texture?(y.bindTexture(y.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,y.texSubImage2D(y.TEXTURE_2D,0,0,0,this.width,this.height,y.ALPHA,y.UNSIGNED_BYTE,this.data))):(this.texture=y.createTexture(),y.bindTexture(y.TEXTURE_2D,this.texture),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.REPEAT),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.REPEAT),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR),y.texImage2D(y.TEXTURE_2D,0,y.ALPHA,this.width,this.height,0,y.ALPHA,y.UNSIGNED_BYTE,this.data))}}class ze{constructor(d,y,A){this.workerPool=d,this.actors=[],this.currentActor=0,this.id=A;const k=this.workerPool.acquire(A);for(let D=0;D<k.length;D++){const H=new s.C(k[D],y,A);H.name=`Worker ${D}`,this.actors.push(H)}if(!this.actors.length)throw new Error("No actors found")}broadcast(d,y,A){s.o(this.actors,(k,D)=>{k.send(d,y,D)},A=A||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(d=!0){this.actors.forEach(y=>{y.remove()}),this.actors=[],d&&this.workerPool.release(this.id)}}function Ue(L,d,y){const A=function(k,D){if(k)return y(k);if(D){const H=s.F(s.e(D,L),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);D.vector_layers&&(H.vectorLayers=D.vector_layers,H.vectorLayerIds=H.vectorLayers.map(G=>G.id)),y(null,H)}};return L.url?s.f(d.transformRequest(L.url,w.Source),A):s.h.frame(()=>A(null,L))}class rt{constructor(d,y){d&&(y?this.setSouthWest(d).setNorthEast(y):Array.isArray(d)&&(d.length===4?this.setSouthWest([d[0],d[1]]).setNorthEast([d[2],d[3]]):this.setSouthWest(d[0]).setNorthEast(d[1])))}setNorthEast(d){return this._ne=d instanceof s.L?new s.L(d.lng,d.lat):s.L.convert(d),this}setSouthWest(d){return this._sw=d instanceof s.L?new s.L(d.lng,d.lat):s.L.convert(d),this}extend(d){const y=this._sw,A=this._ne;let k,D;if(d instanceof s.L)k=d,D=d;else{if(!(d instanceof rt))return Array.isArray(d)?d.length===4||d.every(Array.isArray)?this.extend(rt.convert(d)):this.extend(s.L.convert(d)):d&&("lng"in d||"lon"in d)&&"lat"in d?this.extend(s.L.convert(d)):this;if(k=d._sw,D=d._ne,!k||!D)return this}return y||A?(y.lng=Math.min(k.lng,y.lng),y.lat=Math.min(k.lat,y.lat),A.lng=Math.max(D.lng,A.lng),A.lat=Math.max(D.lat,A.lat)):(this._sw=new s.L(k.lng,k.lat),this._ne=new s.L(D.lng,D.lat)),this}getCenter(){return new s.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.L(this.getWest(),this.getNorth())}getSouthEast(){return new s.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(d){const{lng:y,lat:A}=s.L.convert(d);let k=this._sw.lng<=y&&y<=this._ne.lng;return this._sw.lng>this._ne.lng&&(k=this._sw.lng>=y&&y>=this._ne.lng),this._sw.lat<=A&&A<=this._ne.lat&&k}static convert(d){return d instanceof rt?d:d&&new rt(d)}static fromLngLat(d,y=0){const A=360*y/40075017,k=A/Math.cos(Math.PI/180*d.lat);return new rt(new s.L(d.lng-k,d.lat-A),new s.L(d.lng+k,d.lat+A))}}class Be{constructor(d,y,A){this.bounds=rt.convert(this.validateBounds(d)),this.minzoom=y||0,this.maxzoom=A||24}validateBounds(d){return Array.isArray(d)&&d.length===4?[Math.max(-180,d[0]),Math.max(-90,d[1]),Math.min(180,d[2]),Math.min(90,d[3])]:[-180,-90,180,90]}contains(d){const y=Math.pow(2,d.z),A=Math.floor(s.G(this.bounds.getWest())*y),k=Math.floor(s.H(this.bounds.getNorth())*y),D=Math.ceil(s.G(this.bounds.getEast())*y),H=Math.ceil(s.H(this.bounds.getSouth())*y);return d.x>=A&&d.x<D&&d.y>=k&&d.y<H}}class st extends s.E{constructor(d,y,A,k){if(super(),this.load=()=>{this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this._tileJSONRequest=Ue(this._options,this.map._requestManager,(D,H)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),D?this.fire(new s.j(D)):H&&(s.e(this,H),H.bounds&&(this.tileBounds=new Be(H.bounds,this.minzoom,this.maxzoom)),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>s.e({},this._options),this.id=d,this.dispatcher=A,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.F(y,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},y),this._collectResourceTiming=y.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(k)}loaded(){return this._loaded}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}onAdd(d){this.map=d,this.load()}setSourceProperty(d){this._tileJSONRequest&&this._tileJSONRequest.cancel(),d(),this.load()}setTiles(d){return this.setSourceProperty(()=>{this._options.tiles=d}),this}setUrl(d){return this.setSourceProperty(()=>{this.url=d,this._options.url=d}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(d,y){const A=d.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),k={request:this.map._requestManager.transformRequest(A,w.Tile),uid:d.uid,tileID:d.tileID,zoom:d.tileID.overscaledZ,tileSize:this.tileSize*d.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function D(H,G){return delete d.request,d.aborted?y(null):H&&H.status!==404?y(H):(G&&G.resourceTiming&&(d.resourceTiming=G.resourceTiming),this.map._refreshExpiredTiles&&G&&d.setExpiryData(G),d.loadVectorData(G,this.map.painter),y(null),void(d.reloadCallback&&(this.loadTile(d,d.reloadCallback),d.reloadCallback=null)))}k.request.collectResourceTiming=this._collectResourceTiming,d.actor&&d.state!=="expired"?d.state==="loading"?d.reloadCallback=y:d.request=d.actor.send("reloadTile",k,D.bind(this)):(d.actor=this.dispatcher.getActor(),d.request=d.actor.send("loadTile",k,D.bind(this)))}abortTile(d){d.request&&(d.request.cancel(),delete d.request),d.actor&&d.actor.send("abortTile",{uid:d.uid,type:this.type,source:this.id},void 0)}unloadTile(d){d.unloadVectorData(),d.actor&&d.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class ct extends s.E{constructor(d,y,A,k){super(),this.id=d,this.dispatcher=A,this.setEventedParent(k),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},y),s.e(this,s.F(y,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this._tileJSONRequest=Ue(this._options,this.map._requestManager,(d,y)=>{this._tileJSONRequest=null,this._loaded=!0,d?this.fire(new s.j(d)):y&&(s.e(this,y),y.bounds&&(this.tileBounds=new Be(y.bounds,this.minzoom,this.maxzoom)),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(d){this.map=d,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(d){this._tileJSONRequest&&this._tileJSONRequest.cancel(),d(),this.load()}setTiles(d){return this.setSourceProperty(()=>{this._options.tiles=d}),this}serialize(){return s.e({},this._options)}hasTile(d){return!this.tileBounds||this.tileBounds.contains(d.canonical)}loadTile(d,y){const A=d.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);d.request=M.getImage(this.map._requestManager.transformRequest(A,w.Tile),(k,D,H)=>{if(delete d.request,d.aborted)d.state="unloaded",y(null);else if(k)d.state="errored",y(k);else if(D){this.map._refreshExpiredTiles&&H&&d.setExpiryData(H);const G=this.map.painter.context,K=G.gl;d.texture=this.map.painter.getTileTexture(D.width),d.texture?d.texture.update(D,{useMipmap:!0}):(d.texture=new j(G,D,K.RGBA,{useMipmap:!0}),d.texture.bind(K.LINEAR,K.CLAMP_TO_EDGE,K.LINEAR_MIPMAP_NEAREST),G.extTextureFilterAnisotropic&&K.texParameterf(K.TEXTURE_2D,G.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,G.extTextureFilterAnisotropicMax)),d.state="loaded",y(null)}},this.map._refreshExpiredTiles)}abortTile(d,y){d.request&&(d.request.cancel(),delete d.request),y()}unloadTile(d,y){d.texture&&this.map.painter.saveTileTexture(d.texture),y()}hasTransition(){return!1}}class Dt extends ct{constructor(d,y,A,k){super(d,y,A,k),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},y),this.encoding=y.encoding||"mapbox",this.redFactor=y.redFactor,this.greenFactor=y.greenFactor,this.blueFactor=y.blueFactor,this.baseShift=y.baseShift}loadTile(d,y){const A=d.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),k=this.map._requestManager.transformRequest(A,w.Tile);function D(H,G){H&&(d.state="errored",y(H)),G&&(d.dem=G,d.needsHillshadePrepare=!0,d.needsTerrainPrepare=!0,d.state="loaded",y(null))}d.neighboringTiles=this._getNeighboringTiles(d.tileID),d.request=M.getImage(k,(H,G,K)=>s._(this,void 0,void 0,function*(){if(delete d.request,d.aborted)d.state="unloaded",y(null);else if(H)d.state="errored",y(H);else if(G){this.map._refreshExpiredTiles&&d.setExpiryData(K);const ee=s.a(G)&&s.J()?G:yield function(se){return s._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&s.K()){const be=se.width+2,Le=se.height+2;try{return new s.R({width:be,height:Le},yield s.M(se,-1,-1,be,Le))}catch{}}return s.h.getImageData(se,1)})}(G),re={uid:d.uid,coord:d.tileID,source:this.id,rawImageData:ee,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};d.actor&&d.state!=="expired"||(d.actor=this.dispatcher.getActor(),d.actor.send("loadDEMTile",re,D))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(d){const y=d.canonical,A=Math.pow(2,y.z),k=(y.x-1+A)%A,D=y.x===0?d.wrap-1:d.wrap,H=(y.x+1+A)%A,G=y.x+1===A?d.wrap+1:d.wrap,K={};return K[new s.O(d.overscaledZ,D,y.z,k,y.y).key]={backfilled:!1},K[new s.O(d.overscaledZ,G,y.z,H,y.y).key]={backfilled:!1},y.y>0&&(K[new s.O(d.overscaledZ,D,y.z,k,y.y-1).key]={backfilled:!1},K[new s.O(d.overscaledZ,d.wrap,y.z,y.x,y.y-1).key]={backfilled:!1},K[new s.O(d.overscaledZ,G,y.z,H,y.y-1).key]={backfilled:!1}),y.y+1<A&&(K[new s.O(d.overscaledZ,D,y.z,k,y.y+1).key]={backfilled:!1},K[new s.O(d.overscaledZ,d.wrap,y.z,y.x,y.y+1).key]={backfilled:!1},K[new s.O(d.overscaledZ,G,y.z,H,y.y+1).key]={backfilled:!1}),K}unloadTile(d){d.demTexture&&this.map.painter.saveTileTexture(d.demTexture),d.fbo&&(d.fbo.destroy(),delete d.fbo),d.dem&&delete d.dem,delete d.neighboringTiles,d.state="unloaded",d.actor&&d.actor.send("removeDEMTile",{uid:d.uid,source:this.id})}}class zt extends s.E{constructor(d,y,A,k){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>s.e({},this._options,{type:this.type,data:this._data}),this.id=d,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=A.getActor(),this.setEventedParent(k),this._data=y.data,this._options=s.e({},y),this._collectResourceTiming=y.collectResourceTiming,y.maxzoom!==void 0&&(this.maxzoom=y.maxzoom),y.type&&(this.type=y.type),y.attribution&&(this.attribution=y.attribution),this.promoteId=y.promoteId;const D=s.N/this.tileSize;this.workerOptions=s.e({source:this.id,cluster:y.cluster||!1,geojsonVtOptions:{buffer:(y.buffer!==void 0?y.buffer:128)*D,tolerance:(y.tolerance!==void 0?y.tolerance:.375)*D,extent:s.N,maxZoom:this.maxzoom,lineMetrics:y.lineMetrics||!1,generateId:y.generateId||!1},superclusterOptions:{maxZoom:y.clusterMaxZoom!==void 0?y.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,y.clusterMinPoints||2),extent:s.N,radius:(y.clusterRadius||50)*D,log:!1,generateId:y.generateId||!1},clusterProperties:y.clusterProperties,filter:y.filter},y.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(d){this.map=d,this.load()}setData(d){return this._data=d,this._updateWorkerData(),this}updateData(d){return this._updateWorkerData(d),this}setClusterOptions(d){return this.workerOptions.cluster=d.cluster,d&&(d.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=d.clusterRadius),d.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=d.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(d,y){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:d,source:this.id},y),this}getClusterChildren(d,y){return this.actor.send("geojson.getClusterChildren",{clusterId:d,source:this.id},y),this}getClusterLeaves(d,y,A,k){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:d,limit:y,offset:A},k),this}_updateWorkerData(d){const y=s.e({},this.workerOptions);d?y.dataDiff=d:typeof this._data=="string"?(y.request=this.map._requestManager.transformRequest(s.h.resolveURL(this._data),w.Source),y.request.collectResourceTiming=this._collectResourceTiming):y.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new s.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,y,(A,k)=>{if(this._pendingLoads--,this._removed||k&&k.abandoned)return void this.fire(new s.k("dataabort",{dataType:"source"}));let D=null;if(k&&k.resourceTiming&&k.resourceTiming[this.id]&&(D=k.resourceTiming[this.id].slice(0)),A)return void this.fire(new s.j(A));const H={dataType:"source"};this._collectResourceTiming&&D&&D.length>0&&s.e(H,{resourceTiming:D}),this.fire(new s.k("data",Object.assign(Object.assign({},H),{sourceDataType:"metadata"}))),this.fire(new s.k("data",Object.assign(Object.assign({},H),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(d,y){const A=d.actor?"reloadTile":"loadTile";d.actor=this.actor;const k={type:this.type,uid:d.uid,tileID:d.tileID,zoom:d.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};d.request=this.actor.send(A,k,(D,H)=>(delete d.request,d.unloadVectorData(),d.aborted?y(null):D?y(D):(d.loadVectorData(H,this.map.painter,A==="reloadTile"),y(null))))}abortTile(d){d.request&&(d.request.cancel(),delete d.request),d.aborted=!0}unloadTile(d){d.unloadVectorData(),this.actor.send("removeTile",{uid:d.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var Fe=s.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class lt extends s.E{constructor(d,y,A,k){super(),this.load=(D,H)=>{this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=M.getImage(this.map._requestManager.transformRequest(this.url,w.Image),(G,K)=>{this._request=null,this._loaded=!0,G?this.fire(new s.j(G)):K&&(this.image=K,D&&(this.coordinates=D),H&&H(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const D=this.map.painter.context,H=D.gl;this.boundsBuffer||(this.boundsBuffer=D.createVertexBuffer(this._boundsArray,Fe.members)),this.boundsSegments||(this.boundsSegments=s.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new j(D,this.image,H.RGBA),this.texture.bind(H.LINEAR,H.CLAMP_TO_EDGE));let G=!1;for(const K in this.tiles){const ee=this.tiles[K];ee.state!=="loaded"&&(ee.state="loaded",ee.texture=this.texture,G=!0)}G&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=d,this.dispatcher=A,this.coordinates=y.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(k),this.options=y}loaded(){return this._loaded}updateImage(d){return d.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=d.url,this.load(d.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(d){this.map=d,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(d){this.coordinates=d;const y=d.map(s.U.fromLngLat);this.tileID=function(k){let D=1/0,H=1/0,G=-1/0,K=-1/0;for(const be of k)D=Math.min(D,be.x),H=Math.min(H,be.y),G=Math.max(G,be.x),K=Math.max(K,be.y);const ee=Math.max(G-D,K-H),re=Math.max(0,Math.floor(-Math.log(ee)/Math.LN2)),se=Math.pow(2,re);return new s.W(re,Math.floor((D+G)/2*se),Math.floor((H+K)/2*se))}(y),this.minzoom=this.maxzoom=this.tileID.z;const A=y.map(k=>this.tileID.getTilePoint(k)._round());return this._boundsArray=new s.V,this._boundsArray.emplaceBack(A[0].x,A[0].y,0,0),this._boundsArray.emplaceBack(A[1].x,A[1].y,s.N,0),this._boundsArray.emplaceBack(A[3].x,A[3].y,0,s.N),this._boundsArray.emplaceBack(A[2].x,A[2].y,s.N,s.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(d,y){this.tileID&&this.tileID.equals(d.tileID.canonical)?(this.tiles[String(d.tileID.wrap)]=d,d.buckets={},y(null)):(d.state="errored",y(null))}hasTransition(){return!1}}class Qe extends lt{constructor(d,y,A,k){super(d,y,A,k),this.load=()=>{this._loaded=!1;const D=this.options;this.urls=[];for(const H of D.urls)this.urls.push(this.map._requestManager.transformRequest(H,w.Source).url);s.X(this.urls,(H,G)=>{this._loaded=!0,H?this.fire(new s.j(H)):G&&(this.video=G,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const D=this.map.painter.context,H=D.gl;this.boundsBuffer||(this.boundsBuffer=D.createVertexBuffer(this._boundsArray,Fe.members)),this.boundsSegments||(this.boundsSegments=s.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(H.LINEAR,H.CLAMP_TO_EDGE),H.texSubImage2D(H.TEXTURE_2D,0,0,0,H.RGBA,H.UNSIGNED_BYTE,this.video)):(this.texture=new j(D,this.video,H.RGBA),this.texture.bind(H.LINEAR,H.CLAMP_TO_EDGE));let G=!1;for(const K in this.tiles){const ee=this.tiles[K];ee.state!=="loaded"&&(ee.state="loaded",ee.texture=this.texture,G=!0)}G&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=y}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(d){if(this.video){const y=this.video.seekable;d<y.start(0)||d>y.end(0)?this.fire(new s.j(new s.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${y.start(0)} and ${y.end(0)}-second mark.`))):this.video.currentTime=d}}getVideo(){return this.video}onAdd(d){this.map||(this.map=d,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class ge extends lt{constructor(d,y,A,k){super(d,y,A,k),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let D=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,D=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,D=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const H=this.map.painter.context,G=H.gl;this.boundsBuffer||(this.boundsBuffer=H.createVertexBuffer(this._boundsArray,Fe.members)),this.boundsSegments||(this.boundsSegments=s.S.simpleSegment(0,0,4,2)),this.texture?(D||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new j(H,this.canvas,G.RGBA,{premultiply:!0});let K=!1;for(const ee in this.tiles){const re=this.tiles[ee];re.state!=="loaded"&&(re.state="loaded",re.texture=this.texture,K=!0)}K&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),y.coordinates?Array.isArray(y.coordinates)&&y.coordinates.length===4&&!y.coordinates.some(D=>!Array.isArray(D)||D.length!==2||D.some(H=>typeof H!="number"))||this.fire(new s.j(new s.Y(`sources.${d}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.j(new s.Y(`sources.${d}`,null,'missing required property "coordinates"'))),y.animate&&typeof y.animate!="boolean"&&this.fire(new s.j(new s.Y(`sources.${d}`,null,'optional "animate" property must be a boolean value'))),y.canvas?typeof y.canvas=="string"||y.canvas instanceof HTMLCanvasElement||this.fire(new s.j(new s.Y(`sources.${d}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.j(new s.Y(`sources.${d}`,null,'missing required property "canvas"'))),this.options=y,this.animate=y.animate===void 0||y.animate}getCanvas(){return this.canvas}onAdd(d){this.map=d,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const d of[this.canvas.width,this.canvas.height])if(isNaN(d)||d<=0)return!0;return!1}}const et={},ot=L=>{switch(L){case"geojson":return zt;case"image":return lt;case"raster":return ct;case"raster-dem":return Dt;case"vector":return st;case"video":return Qe;case"canvas":return ge}return et[L]};function Tt(L,d){const y=s.Z();return s.$(y,y,[1,1,0]),s.a0(y,y,[.5*L.width,.5*L.height,1]),s.a1(y,y,L.calculatePosMatrix(d.toUnwrapped()))}function Ct(L,d,y,A,k,D){const H=function(se,be,Le){if(se)for(const Re of se){const $e=be[Re];if($e&&$e.source===Le&&$e.type==="fill-extrusion")return!0}else for(const Re in be){const $e=be[Re];if($e.source===Le&&$e.type==="fill-extrusion")return!0}return!1}(k&&k.layers,d,L.id),G=D.maxPitchScaleFactor(),K=L.tilesIn(A,G,H);K.sort(Bt);const ee=[];for(const se of K)ee.push({wrappedTileID:se.tileID.wrapped().key,queryResults:se.tile.queryRenderedFeatures(d,y,L._state,se.queryGeometry,se.cameraQueryGeometry,se.scale,k,D,G,Tt(L.transform,se.tileID))});const re=function(se){const be={},Le={};for(const Re of se){const $e=Re.queryResults,ke=Re.wrappedTileID,at=Le[ke]=Le[ke]||{};for(const Mt in $e){const Ge=$e[Mt],ft=at[Mt]=at[Mt]||{},At=be[Mt]=be[Mt]||[];for(const Pt of Ge)ft[Pt.featureIndex]||(ft[Pt.featureIndex]=!0,At.push(Pt))}}return be}(ee);for(const se in re)re[se].forEach(be=>{const Le=be.feature,Re=L.getFeatureState(Le.layer["source-layer"],Le.id);Le.source=Le.layer.source,Le.layer["source-layer"]&&(Le.sourceLayer=Le.layer["source-layer"]),Le.state=Re});return re}function Bt(L,d){const y=L.tileID,A=d.tileID;return y.overscaledZ-A.overscaledZ||y.canonical.y-A.canonical.y||y.wrap-A.wrap||y.canonical.x-A.canonical.x}class Gt{constructor(d,y){this.timeAdded=0,this.fadeEndTime=0,this.tileID=d,this.uid=s.a2(),this.uses=0,this.tileSize=y,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(d){const y=d+this.timeAdded;y<this.fadeEndTime||(this.fadeEndTime=y)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(d){this.demTexture&&d.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(d,y,A){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",d){d.featureIndex&&(this.latestFeatureIndex=d.featureIndex,d.rawTileData?(this.latestRawTileData=d.rawTileData,this.latestFeatureIndex.rawTileData=d.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=d.collisionBoxArray,this.buckets=function(k,D){const H={};if(!D)return H;for(const G of k){const K=G.layerIds.map(ee=>D.getLayer(ee)).filter(Boolean);if(K.length!==0){G.layers=K,G.stateDependentLayerIds&&(G.stateDependentLayers=G.stateDependentLayerIds.map(ee=>K.filter(re=>re.id===ee)[0]));for(const ee of K)H[ee.id]=G}}return H}(d.buckets,y.style),this.hasSymbolBuckets=!1;for(const k in this.buckets){const D=this.buckets[k];if(D instanceof s.a4){if(this.hasSymbolBuckets=!0,!A)break;D.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const k in this.buckets){const D=this.buckets[k];if(D instanceof s.a4&&D.hasRTLText){this.hasRTLText=!0,s.a5();break}}this.queryPadding=0;for(const k in this.buckets){const D=this.buckets[k];this.queryPadding=Math.max(this.queryPadding,y.style.getLayer(k).queryRadius(D))}d.imageAtlas&&(this.imageAtlas=d.imageAtlas),d.glyphAtlasImage&&(this.glyphAtlasImage=d.glyphAtlasImage)}else this.collisionBoxArray=new s.a3}unloadVectorData(){for(const d in this.buckets)this.buckets[d].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(d){return this.buckets[d.id]}upload(d){for(const A in this.buckets){const k=this.buckets[A];k.uploadPending()&&k.upload(d)}const y=d.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new j(d,this.imageAtlas.image,y.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new j(d,this.glyphAtlasImage,y.ALPHA),this.glyphAtlasImage=null)}prepare(d){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(d,this.imageAtlasTexture)}queryRenderedFeatures(d,y,A,k,D,H,G,K,ee,re){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:k,cameraQueryGeometry:D,scale:H,tileSize:this.tileSize,pixelPosMatrix:re,transform:K,params:G,queryPadding:this.queryPadding*ee},d,y,A):{}}querySourceFeatures(d,y){const A=this.latestFeatureIndex;if(!A||!A.rawTileData)return;const k=A.loadVTLayers(),D=y&&y.sourceLayer?y.sourceLayer:"",H=k._geojsonTileLayer||k[D];if(!H)return;const G=s.a6(y&&y.filter),{z:K,x:ee,y:re}=this.tileID.canonical,se={z:K,x:ee,y:re};for(let be=0;be<H.length;be++){const Le=H.feature(be);if(G.needGeometry){const ke=s.a7(Le,!0);if(!G.filter(new s.a8(this.tileID.overscaledZ),ke,this.tileID.canonical))continue}else if(!G.filter(new s.a8(this.tileID.overscaledZ),Le))continue;const Re=A.getId(Le,D),$e=new s.a9(Le,K,ee,re,Re);$e.tile=se,d.push($e)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(d){const y=this.expirationTime;if(d.cacheControl){const A=s.aa(d.cacheControl);A["max-age"]&&(this.expirationTime=Date.now()+1e3*A["max-age"])}else d.expires&&(this.expirationTime=new Date(d.expires).getTime());if(this.expirationTime){const A=Date.now();let k=!1;if(this.expirationTime>A)k=!1;else if(y)if(this.expirationTime<y)k=!0;else{const D=this.expirationTime-y;D?this.expirationTime=A+Math.max(D,3e4):k=!0}else k=!0;k?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(d,y){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(d).length===0)return;const A=this.latestFeatureIndex.loadVTLayers();for(const k in this.buckets){if(!y.style.hasLayer(k))continue;const D=this.buckets[k],H=D.layers[0].sourceLayer||"_geojsonTileLayer",G=A[H],K=d[H];if(!G||!K||Object.keys(K).length===0)continue;D.update(K,G,this.imageAtlas&&this.imageAtlas.patternPositions||{});const ee=y&&y.style&&y.style.getLayer(k);ee&&(this.queryPadding=Math.max(this.queryPadding,ee.queryRadius(D)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<s.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(d){this.symbolFadeHoldUntil=s.h.now()+d}setDependencies(d,y){const A={};for(const k of y)A[k]=!0;this.dependencies[d]=A}hasDependency(d,y){for(const A of d){const k=this.dependencies[A];if(k){for(const D of y)if(k[D])return!0}}return!1}}class sn{constructor(d,y){this.max=d,this.onRemove=y,this.reset()}reset(){for(const d in this.data)for(const y of this.data[d])y.timeout&&clearTimeout(y.timeout),this.onRemove(y.value);return this.data={},this.order=[],this}add(d,y,A){const k=d.wrapped().key;this.data[k]===void 0&&(this.data[k]=[]);const D={value:y,timeout:void 0};if(A!==void 0&&(D.timeout=setTimeout(()=>{this.remove(d,D)},A)),this.data[k].push(D),this.order.push(k),this.order.length>this.max){const H=this._getAndRemoveByKey(this.order[0]);H&&this.onRemove(H)}return this}has(d){return d.wrapped().key in this.data}getAndRemove(d){return this.has(d)?this._getAndRemoveByKey(d.wrapped().key):null}_getAndRemoveByKey(d){const y=this.data[d].shift();return y.timeout&&clearTimeout(y.timeout),this.data[d].length===0&&delete this.data[d],this.order.splice(this.order.indexOf(d),1),y.value}getByKey(d){const y=this.data[d];return y?y[0].value:null}get(d){return this.has(d)?this.data[d.wrapped().key][0].value:null}remove(d,y){if(!this.has(d))return this;const A=d.wrapped().key,k=y===void 0?0:this.data[A].indexOf(y),D=this.data[A][k];return this.data[A].splice(k,1),D.timeout&&clearTimeout(D.timeout),this.data[A].length===0&&delete this.data[A],this.onRemove(D.value),this.order.splice(this.order.indexOf(A),1),this}setMaxSize(d){for(this.max=d;this.order.length>this.max;){const y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this}filter(d){const y=[];for(const A in this.data)for(const k of this.data[A])d(k.value)||y.push(k);for(const A of y)this.remove(A.value.tileID,A)}}class Je{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(d,y,A){const k=String(y);if(this.stateChanges[d]=this.stateChanges[d]||{},this.stateChanges[d][k]=this.stateChanges[d][k]||{},s.e(this.stateChanges[d][k],A),this.deletedStates[d]===null){this.deletedStates[d]={};for(const D in this.state[d])D!==k&&(this.deletedStates[d][D]=null)}else if(this.deletedStates[d]&&this.deletedStates[d][k]===null){this.deletedStates[d][k]={};for(const D in this.state[d][k])A[D]||(this.deletedStates[d][k][D]=null)}else for(const D in A)this.deletedStates[d]&&this.deletedStates[d][k]&&this.deletedStates[d][k][D]===null&&delete this.deletedStates[d][k][D]}removeFeatureState(d,y,A){if(this.deletedStates[d]===null)return;const k=String(y);if(this.deletedStates[d]=this.deletedStates[d]||{},A&&y!==void 0)this.deletedStates[d][k]!==null&&(this.deletedStates[d][k]=this.deletedStates[d][k]||{},this.deletedStates[d][k][A]=null);else if(y!==void 0)if(this.stateChanges[d]&&this.stateChanges[d][k])for(A in this.deletedStates[d][k]={},this.stateChanges[d][k])this.deletedStates[d][k][A]=null;else this.deletedStates[d][k]=null;else this.deletedStates[d]=null}getState(d,y){const A=String(y),k=s.e({},(this.state[d]||{})[A],(this.stateChanges[d]||{})[A]);if(this.deletedStates[d]===null)return{};if(this.deletedStates[d]){const D=this.deletedStates[d][y];if(D===null)return{};for(const H in D)delete k[H]}return k}initializeTileState(d,y){d.setFeatureState(this.state,y)}coalesceChanges(d,y){const A={};for(const k in this.stateChanges){this.state[k]=this.state[k]||{};const D={};for(const H in this.stateChanges[k])this.state[k][H]||(this.state[k][H]={}),s.e(this.state[k][H],this.stateChanges[k][H]),D[H]=this.state[k][H];A[k]=D}for(const k in this.deletedStates){this.state[k]=this.state[k]||{};const D={};if(this.deletedStates[k]===null)for(const H in this.state[k])D[H]={},this.state[k][H]={};else for(const H in this.deletedStates[k]){if(this.deletedStates[k][H]===null)this.state[k][H]={};else for(const G of Object.keys(this.deletedStates[k][H]))delete this.state[k][H][G];D[H]=this.state[k][H]}A[k]=A[k]||{},s.e(A[k],D)}if(this.stateChanges={},this.deletedStates={},Object.keys(A).length!==0)for(const k in d)d[k].setFeatureState(A,y)}}class Ce extends s.E{constructor(d,y,A){super(),this.id=d,this.dispatcher=A,this.on("data",k=>{k.dataType==="source"&&k.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&k.dataType==="source"&&k.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((k,D,H,G)=>{const K=new(ot(D.type))(k,D,H,G);if(K.id!==k)throw new Error(`Expected Source id to be ${k} instead of ${K.id}`);return K})(d,y,A,this),this._tiles={},this._cache=new sn(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Je,this._didEmitContent=!1,this._updated=!1}onAdd(d){this.map=d,this._maxTileCacheSize=d?d._maxTileCacheSize:null,this._maxTileCacheZoomLevels=d?d._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(d)}onRemove(d){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(d)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const d in this._tiles){const y=this._tiles[d];if(y.state!=="loaded"&&y.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const d=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,d&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(d,y){return this._source.loadTile(d,y)}_unloadTile(d){if(this._source.unloadTile)return this._source.unloadTile(d,()=>{})}_abortTile(d){this._source.abortTile&&this._source.abortTile(d,()=>{}),this._source.fire(new s.k("dataabort",{tile:d,coord:d.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(d){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const y in this._tiles){const A=this._tiles[y];A.upload(d),A.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(d=>d.tileID).sort(_e).map(d=>d.key)}getRenderableIds(d){const y=[];for(const A in this._tiles)this._isIdRenderable(A,d)&&y.push(this._tiles[A]);return d?y.sort((A,k)=>{const D=A.tileID,H=k.tileID,G=new s.P(D.canonical.x,D.canonical.y)._rotate(this.transform.angle),K=new s.P(H.canonical.x,H.canonical.y)._rotate(this.transform.angle);return D.overscaledZ-H.overscaledZ||K.y-G.y||K.x-G.x}).map(A=>A.tileID.key):y.map(A=>A.tileID).sort(_e).map(A=>A.key)}hasRenderableParent(d){const y=this.findLoadedParent(d,0);return!!y&&this._isIdRenderable(y.tileID.key)}_isIdRenderable(d,y){return this._tiles[d]&&this._tiles[d].hasData()&&!this._coveredTiles[d]&&(y||!this._tiles[d].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const d in this._tiles)this._tiles[d].state!=="errored"&&this._reloadTile(d,"reloading")}}_reloadTile(d,y){const A=this._tiles[d];A&&(A.state!=="loading"&&(A.state=y),this._loadTile(A,this._tileLoaded.bind(this,A,d,y)))}_tileLoaded(d,y,A,k){if(k)return d.state="errored",void(k.status!==404?this._source.fire(new s.j(k,{tile:d})):this.update(this.transform,this.terrain));d.timeAdded=s.h.now(),A==="expired"&&(d.refreshedUponExpiration=!0),this._setTileReloadTimer(y,d),this.getSource().type==="raster-dem"&&d.dem&&this._backfillDEM(d),this._state.initializeTileState(d,this.map?this.map.painter:null),d.aborted||this._source.fire(new s.k("data",{dataType:"source",tile:d,coord:d.tileID}))}_backfillDEM(d){const y=this.getRenderableIds();for(let k=0;k<y.length;k++){const D=y[k];if(d.neighboringTiles&&d.neighboringTiles[D]){const H=this.getTileByID(D);A(d,H),A(H,d)}}function A(k,D){k.needsHillshadePrepare=!0,k.needsTerrainPrepare=!0;let H=D.tileID.canonical.x-k.tileID.canonical.x;const G=D.tileID.canonical.y-k.tileID.canonical.y,K=Math.pow(2,k.tileID.canonical.z),ee=D.tileID.key;H===0&&G===0||Math.abs(G)>1||(Math.abs(H)>1&&(Math.abs(H+K)===1?H+=K:Math.abs(H-K)===1&&(H-=K)),D.dem&&k.dem&&(k.dem.backfillBorder(D.dem,H,G),k.neighboringTiles&&k.neighboringTiles[ee]&&(k.neighboringTiles[ee].backfilled=!0)))}}getTile(d){return this.getTileByID(d.key)}getTileByID(d){return this._tiles[d]}_retainLoadedChildren(d,y,A,k){for(const D in this._tiles){let H=this._tiles[D];if(k[D]||!H.hasData()||H.tileID.overscaledZ<=y||H.tileID.overscaledZ>A)continue;let G=H.tileID;for(;H&&H.tileID.overscaledZ>y+1;){const ee=H.tileID.scaledTo(H.tileID.overscaledZ-1);H=this._tiles[ee.key],H&&H.hasData()&&(G=ee)}let K=G;for(;K.overscaledZ>y;)if(K=K.scaledTo(K.overscaledZ-1),d[K.key]){k[G.key]=G;break}}}findLoadedParent(d,y){if(d.key in this._loadedParentTiles){const A=this._loadedParentTiles[d.key];return A&&A.tileID.overscaledZ>=y?A:null}for(let A=d.overscaledZ-1;A>=y;A--){const k=d.scaledTo(A),D=this._getLoadedTile(k);if(D)return D}}_getLoadedTile(d){const y=this._tiles[d.key];return y&&y.hasData()?y:this._cache.getByKey(d.wrapped().key)}updateCacheSize(d){const y=Math.ceil(d.width/this._source.tileSize)+1,A=Math.ceil(d.height/this._source.tileSize)+1,k=Math.floor(y*A*(this._maxTileCacheZoomLevels===null?s.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),D=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,k):k;this._cache.setMaxSize(D)}handleWrapJump(d){const y=Math.round((d-(this._prevLng===void 0?d:this._prevLng))/360);if(this._prevLng=d,y){const A={};for(const k in this._tiles){const D=this._tiles[k];D.tileID=D.tileID.unwrapTo(D.tileID.wrap+y),A[D.tileID.key]=D}this._tiles=A;for(const k in this._timers)clearTimeout(this._timers[k]),delete this._timers[k];for(const k in this._tiles)this._setTileReloadTimer(k,this._tiles[k])}}update(d,y){if(this.transform=d,this.terrain=y,!this._sourceLoaded||this._paused)return;let A;this.updateCacheSize(d),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?A=d.getVisibleUnwrappedCoordinates(this._source.tileID).map(re=>new s.O(re.canonical.z,re.wrap,re.canonical.z,re.canonical.x,re.canonical.y)):(A=d.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:y}),this._source.hasTile&&(A=A.filter(re=>this._source.hasTile(re)))):A=[];const k=d.coveringZoomLevel(this._source),D=Math.max(k-Ce.maxOverzooming,this._source.minzoom),H=Math.max(k+Ce.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const re={};for(const se of A)if(se.canonical.z>this._source.minzoom){const be=se.scaledTo(se.canonical.z-1);re[be.key]=be;const Le=se.scaledTo(Math.max(this._source.minzoom,Math.min(se.canonical.z,5)));re[Le.key]=Le}A=A.concat(Object.values(re))}const G=A.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,G&&this.fire(new s.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const K=this._updateRetainedTiles(A,k);if(ht(this._source.type)){const re={},se={},be=Object.keys(K),Le=s.h.now();for(const Re of be){const $e=K[Re],ke=this._tiles[Re];if(!ke||ke.fadeEndTime!==0&&ke.fadeEndTime<=Le)continue;const at=this.findLoadedParent($e,D);at&&(this._addTile(at.tileID),re[at.tileID.key]=at.tileID),se[Re]=$e}this._retainLoadedChildren(se,k,H,K);for(const Re in re)K[Re]||(this._coveredTiles[Re]=!0,K[Re]=re[Re]);if(y){const Re={},$e={};for(const ke of A)this._tiles[ke.key].hasData()?Re[ke.key]=ke:$e[ke.key]=ke;for(const ke in $e){const at=$e[ke].children(this._source.maxzoom);this._tiles[at[0].key]&&this._tiles[at[1].key]&&this._tiles[at[2].key]&&this._tiles[at[3].key]&&(Re[at[0].key]=K[at[0].key]=at[0],Re[at[1].key]=K[at[1].key]=at[1],Re[at[2].key]=K[at[2].key]=at[2],Re[at[3].key]=K[at[3].key]=at[3],delete $e[ke])}for(const ke in $e){const at=this.findLoadedParent($e[ke],this._source.minzoom);if(at){Re[at.tileID.key]=K[at.tileID.key]=at.tileID;for(const Mt in Re)Re[Mt].isChildOf(at.tileID)&&delete Re[Mt]}}for(const ke in this._tiles)Re[ke]||(this._coveredTiles[ke]=!0)}}for(const re in K)this._tiles[re].clearFadeHold();const ee=s.ab(this._tiles,K);for(const re of ee){const se=this._tiles[re];se.hasSymbolBuckets&&!se.holdingForFade()?se.setHoldDuration(this.map._fadeDuration):se.hasSymbolBuckets&&!se.symbolFadeFinished()||this._removeTile(re)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const d in this._tiles)this._tiles[d].holdingForFade()&&this._removeTile(d)}_updateRetainedTiles(d,y){const A={},k={},D=Math.max(y-Ce.maxOverzooming,this._source.minzoom),H=Math.max(y+Ce.maxUnderzooming,this._source.minzoom),G={};for(const K of d){const ee=this._addTile(K);A[K.key]=K,ee.hasData()||y<this._source.maxzoom&&(G[K.key]=K)}this._retainLoadedChildren(G,y,H,A);for(const K of d){let ee=this._tiles[K.key];if(ee.hasData())continue;if(y+1>this._source.maxzoom){const se=K.children(this._source.maxzoom)[0],be=this.getTile(se);if(be&&be.hasData()){A[se.key]=se;continue}}else{const se=K.children(this._source.maxzoom);if(A[se[0].key]&&A[se[1].key]&&A[se[2].key]&&A[se[3].key])continue}let re=ee.wasRequested();for(let se=K.overscaledZ-1;se>=D;--se){const be=K.scaledTo(se);if(k[be.key])break;if(k[be.key]=!0,ee=this.getTile(be),!ee&&re&&(ee=this._addTile(be)),ee){const Le=ee.hasData();if((re||Le)&&(A[be.key]=be),re=ee.wasRequested(),Le)break}}}return A}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const d in this._tiles){const y=[];let A,k=this._tiles[d].tileID;for(;k.overscaledZ>0;){if(k.key in this._loadedParentTiles){A=this._loadedParentTiles[k.key];break}y.push(k.key);const D=k.scaledTo(k.overscaledZ-1);if(A=this._getLoadedTile(D),A)break;k=D}for(const D of y)this._loadedParentTiles[D]=A}}_addTile(d){let y=this._tiles[d.key];if(y)return y;y=this._cache.getAndRemove(d),y&&(this._setTileReloadTimer(d.key,y),y.tileID=d,this._state.initializeTileState(y,this.map?this.map.painter:null),this._cacheTimers[d.key]&&(clearTimeout(this._cacheTimers[d.key]),delete this._cacheTimers[d.key],this._setTileReloadTimer(d.key,y)));const A=y;return y||(y=new Gt(d,this._source.tileSize*d.overscaleFactor()),this._loadTile(y,this._tileLoaded.bind(this,y,d.key,y.state))),y.uses++,this._tiles[d.key]=y,A||this._source.fire(new s.k("dataloading",{tile:y,coord:y.tileID,dataType:"source"})),y}_setTileReloadTimer(d,y){d in this._timers&&(clearTimeout(this._timers[d]),delete this._timers[d]);const A=y.getExpiryTimeout();A&&(this._timers[d]=setTimeout(()=>{this._reloadTile(d,"expired"),delete this._timers[d]},A))}_removeTile(d){const y=this._tiles[d];y&&(y.uses--,delete this._tiles[d],this._timers[d]&&(clearTimeout(this._timers[d]),delete this._timers[d]),y.uses>0||(y.hasData()&&y.state!=="reloading"?this._cache.add(y.tileID,y,y.getExpiryTimeout()):(y.aborted=!0,this._abortTile(y),this._unloadTile(y))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const d in this._tiles)this._removeTile(d);this._cache.reset()}tilesIn(d,y,A){const k=[],D=this.transform;if(!D)return k;const H=A?D.getCameraQueryGeometry(d):d,G=d.map(Re=>D.pointCoordinate(Re,this.terrain)),K=H.map(Re=>D.pointCoordinate(Re,this.terrain)),ee=this.getIds();let re=1/0,se=1/0,be=-1/0,Le=-1/0;for(const Re of K)re=Math.min(re,Re.x),se=Math.min(se,Re.y),be=Math.max(be,Re.x),Le=Math.max(Le,Re.y);for(let Re=0;Re<ee.length;Re++){const $e=this._tiles[ee[Re]];if($e.holdingForFade())continue;const ke=$e.tileID,at=Math.pow(2,D.zoom-$e.tileID.overscaledZ),Mt=y*$e.queryPadding*s.N/$e.tileSize/at,Ge=[ke.getTilePoint(new s.U(re,se)),ke.getTilePoint(new s.U(be,Le))];if(Ge[0].x-Mt<s.N&&Ge[0].y-Mt<s.N&&Ge[1].x+Mt>=0&&Ge[1].y+Mt>=0){const ft=G.map(Pt=>ke.getTilePoint(Pt)),At=K.map(Pt=>ke.getTilePoint(Pt));k.push({tile:$e,tileID:ke,queryGeometry:ft,cameraQueryGeometry:At,scale:at})}}return k}getVisibleCoordinates(d){const y=this.getRenderableIds(d).map(A=>this._tiles[A].tileID);for(const A of y)A.posMatrix=this.transform.calculatePosMatrix(A.toUnwrapped());return y}hasTransition(){if(this._source.hasTransition())return!0;if(ht(this._source.type)){const d=s.h.now();for(const y in this._tiles)if(this._tiles[y].fadeEndTime>=d)return!0}return!1}setFeatureState(d,y,A){this._state.updateState(d=d||"_geojsonTileLayer",y,A)}removeFeatureState(d,y,A){this._state.removeFeatureState(d=d||"_geojsonTileLayer",y,A)}getFeatureState(d,y){return this._state.getState(d=d||"_geojsonTileLayer",y)}setDependencies(d,y,A){const k=this._tiles[d];k&&k.setDependencies(y,A)}reloadTilesForDependencies(d,y){for(const A in this._tiles)this._tiles[A].hasDependency(d,y)&&this._reloadTile(A,"reloading");this._cache.filter(A=>!A.hasDependency(d,y))}}function _e(L,d){const y=Math.abs(2*L.wrap)-+(L.wrap<0),A=Math.abs(2*d.wrap)-+(d.wrap<0);return L.overscaledZ-d.overscaledZ||A-y||d.canonical.y-L.canonical.y||d.canonical.x-L.canonical.x}function ht(L){return L==="raster"||L==="image"||L==="video"}Ce.maxOverzooming=10,Ce.maxUnderzooming=3;const dt="mapboxgl_preloaded_worker_pool";class Wt{constructor(){this.active={}}acquire(d){if(!this.workers)for(this.workers=[];this.workers.length<Wt.workerCount;)this.workers.push(new Worker(s.c.WORKER_URL));return this.active[d]=!0,this.workers.slice()}release(d){delete this.active[d],this.numActive()===0&&(this.workers.forEach(y=>{y.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[dt]}numActive(){return Object.keys(this.active).length}}const jt=Math.floor(s.h.hardwareConcurrency/2);let Sn;function cn(){return Sn||(Sn=new Wt),Sn}Wt.workerCount=s.ac(globalThis)?Math.max(Math.min(jt,3),1):1;class Rt{constructor(d,y){this.reset(d,y)}reset(d,y){this.points=d||[],this._distances=[0];for(let A=1;A<this.points.length;A++)this._distances[A]=this._distances[A-1]+this.points[A].dist(this.points[A-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(y||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(d){if(this.points.length===1)return this.points[0];d=s.ad(d,0,1);let y=1,A=this._distances[y];const k=d*this.paddedLength+this.padding;for(;A<k&&y<this._distances.length;)A=this._distances[++y];const D=y-1,H=this._distances[D],G=A-H,K=G>0?(k-H)/G:0;return this.points[D].mult(1-K).add(this.points[y].mult(K))}}function nn(L,d){let y=!0;return L==="always"||L!=="never"&&d!=="never"||(y=!1),y}class An{constructor(d,y,A){const k=this.boxCells=[],D=this.circleCells=[];this.xCellCount=Math.ceil(d/A),this.yCellCount=Math.ceil(y/A);for(let H=0;H<this.xCellCount*this.yCellCount;H++)k.push([]),D.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=d,this.height=y,this.xScale=this.xCellCount/d,this.yScale=this.yCellCount/y,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(d,y,A,k,D){this._forEachCell(y,A,k,D,this._insertBoxCell,this.boxUid++),this.boxKeys.push(d),this.bboxes.push(y),this.bboxes.push(A),this.bboxes.push(k),this.bboxes.push(D)}insertCircle(d,y,A,k){this._forEachCell(y-k,A-k,y+k,A+k,this._insertCircleCell,this.circleUid++),this.circleKeys.push(d),this.circles.push(y),this.circles.push(A),this.circles.push(k)}_insertBoxCell(d,y,A,k,D,H){this.boxCells[D].push(H)}_insertCircleCell(d,y,A,k,D,H){this.circleCells[D].push(H)}_query(d,y,A,k,D,H,G){if(A<0||d>this.width||k<0||y>this.height)return[];const K=[];if(d<=0&&y<=0&&this.width<=A&&this.height<=k){if(D)return[{key:null,x1:d,y1:y,x2:A,y2:k}];for(let ee=0;ee<this.boxKeys.length;ee++)K.push({key:this.boxKeys[ee],x1:this.bboxes[4*ee],y1:this.bboxes[4*ee+1],x2:this.bboxes[4*ee+2],y2:this.bboxes[4*ee+3]});for(let ee=0;ee<this.circleKeys.length;ee++){const re=this.circles[3*ee],se=this.circles[3*ee+1],be=this.circles[3*ee+2];K.push({key:this.circleKeys[ee],x1:re-be,y1:se-be,x2:re+be,y2:se+be})}}else this._forEachCell(d,y,A,k,this._queryCell,K,{hitTest:D,overlapMode:H,seenUids:{box:{},circle:{}}},G);return K}query(d,y,A,k){return this._query(d,y,A,k,!1,null)}hitTest(d,y,A,k,D,H){return this._query(d,y,A,k,!0,D,H).length>0}hitTestCircle(d,y,A,k,D){const H=d-A,G=d+A,K=y-A,ee=y+A;if(G<0||H>this.width||ee<0||K>this.height)return!1;const re=[];return this._forEachCell(H,K,G,ee,this._queryCellCircle,re,{hitTest:!0,overlapMode:k,circle:{x:d,y,radius:A},seenUids:{box:{},circle:{}}},D),re.length>0}_queryCell(d,y,A,k,D,H,G,K){const{seenUids:ee,hitTest:re,overlapMode:se}=G,be=this.boxCells[D];if(be!==null){const Re=this.bboxes;for(const $e of be)if(!ee.box[$e]){ee.box[$e]=!0;const ke=4*$e,at=this.boxKeys[$e];if(d<=Re[ke+2]&&y<=Re[ke+3]&&A>=Re[ke+0]&&k>=Re[ke+1]&&(!K||K(at))&&(!re||!nn(se,at.overlapMode))&&(H.push({key:at,x1:Re[ke],y1:Re[ke+1],x2:Re[ke+2],y2:Re[ke+3]}),re))return!0}}const Le=this.circleCells[D];if(Le!==null){const Re=this.circles;for(const $e of Le)if(!ee.circle[$e]){ee.circle[$e]=!0;const ke=3*$e,at=this.circleKeys[$e];if(this._circleAndRectCollide(Re[ke],Re[ke+1],Re[ke+2],d,y,A,k)&&(!K||K(at))&&(!re||!nn(se,at.overlapMode))){const Mt=Re[ke],Ge=Re[ke+1],ft=Re[ke+2];if(H.push({key:at,x1:Mt-ft,y1:Ge-ft,x2:Mt+ft,y2:Ge+ft}),re)return!0}}}return!1}_queryCellCircle(d,y,A,k,D,H,G,K){const{circle:ee,seenUids:re,overlapMode:se}=G,be=this.boxCells[D];if(be!==null){const Re=this.bboxes;for(const $e of be)if(!re.box[$e]){re.box[$e]=!0;const ke=4*$e,at=this.boxKeys[$e];if(this._circleAndRectCollide(ee.x,ee.y,ee.radius,Re[ke+0],Re[ke+1],Re[ke+2],Re[ke+3])&&(!K||K(at))&&!nn(se,at.overlapMode))return H.push(!0),!0}}const Le=this.circleCells[D];if(Le!==null){const Re=this.circles;for(const $e of Le)if(!re.circle[$e]){re.circle[$e]=!0;const ke=3*$e,at=this.circleKeys[$e];if(this._circlesCollide(Re[ke],Re[ke+1],Re[ke+2],ee.x,ee.y,ee.radius)&&(!K||K(at))&&!nn(se,at.overlapMode))return H.push(!0),!0}}}_forEachCell(d,y,A,k,D,H,G,K){const ee=this._convertToXCellCoord(d),re=this._convertToYCellCoord(y),se=this._convertToXCellCoord(A),be=this._convertToYCellCoord(k);for(let Le=ee;Le<=se;Le++)for(let Re=re;Re<=be;Re++)if(D.call(this,d,y,A,k,this.xCellCount*Re+Le,H,G,K))return}_convertToXCellCoord(d){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(d*this.xScale)))}_convertToYCellCoord(d){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(d*this.yScale)))}_circlesCollide(d,y,A,k,D,H){const G=k-d,K=D-y,ee=A+H;return ee*ee>G*G+K*K}_circleAndRectCollide(d,y,A,k,D,H,G){const K=(H-k)/2,ee=Math.abs(d-(k+K));if(ee>K+A)return!1;const re=(G-D)/2,se=Math.abs(y-(D+re));if(se>re+A)return!1;if(ee<=K||se<=re)return!0;const be=ee-K,Le=se-re;return be*be+Le*Le<=A*A}}function mt(L,d,y,A,k){const D=s.Z();return d?(s.a0(D,D,[1/k,1/k,1]),y||s.ae(D,D,A.angle)):s.a1(D,A.labelPlaneMatrix,L),D}function un(L,d,y,A,k){if(d){const D=s.af(L);return s.a0(D,D,[k,k,1]),y||s.ae(D,D,-A.angle),D}return A.glCoordMatrix}function an(L,d,y){let A;y?(A=[L.x,L.y,y(L.x,L.y),1],s.ag(A,A,d)):(A=[L.x,L.y,0,1],Pe(A,A,d));const k=A[3];return{point:new s.P(A[0]/k,A[1]/k),signedDistanceFromCamera:k}}function Ot(L,d){return .5+L/d*.5}function Ie(L,d){const y=L[0]/L[3],A=L[1]/L[3];return y>=-d[0]&&y<=d[0]&&A>=-d[1]&&A<=d[1]}function Ve(L,d,y,A,k,D,H,G,K,ee){const re=A?L.textSizeData:L.iconSizeData,se=s.ah(re,y.transform.zoom),be=[256/y.width*2+1,256/y.height*2+1],Le=A?L.text.dynamicLayoutVertexArray:L.icon.dynamicLayoutVertexArray;Le.clear();const Re=L.lineVertexArray,$e=A?L.text.placedSymbolArray:L.icon.placedSymbolArray,ke=y.transform.width/y.transform.height;let at=!1;for(let Mt=0;Mt<$e.length;Mt++){const Ge=$e.get(Mt);if(Ge.hidden||Ge.writingMode===s.ai.vertical&&!at){Te(Ge.numGlyphs,Le);continue}let ft;if(at=!1,ee?(ft=[Ge.anchorX,Ge.anchorY,ee(Ge.anchorX,Ge.anchorY),1],s.ag(ft,ft,d)):(ft=[Ge.anchorX,Ge.anchorY,0,1],Pe(ft,ft,d)),!Ie(ft,be)){Te(Ge.numGlyphs,Le);continue}const At=Ot(y.transform.cameraToCenterDistance,ft[3]),Pt=s.aj(re,se,Ge),qt=H?Pt/At:Pt*At,wt=new s.P(Ge.anchorX,Ge.anchorY),Xt=an(wt,k,ee).point,ln={projections:{},offsets:{}},In=Qt(Ge,qt,!1,G,d,k,D,L.glyphOffsetArray,Re,Le,Xt,wt,ln,ke,K,ee);at=In.useVertical,(In.notEnoughRoom||at||In.needsFlipping&&Qt(Ge,qt,!0,G,d,k,D,L.glyphOffsetArray,Re,Le,Xt,wt,ln,ke,K,ee).notEnoughRoom)&&Te(Ge.numGlyphs,Le)}A?L.text.dynamicLayoutVertexBuffer.updateData(Le):L.icon.dynamicLayoutVertexBuffer.updateData(Le)}function Me(L,d,y,A,k,D,H,G,K,ee,re,se,be){const Le=G.glyphStartIndex+G.numGlyphs,Re=G.lineStartIndex,$e=G.lineStartIndex+G.lineLength,ke=d.getoffsetX(G.glyphStartIndex),at=d.getoffsetX(Le-1),Mt=oe(L*ke,y,A,k,D,H,G.segment,Re,$e,K,ee,re,se,be);if(!Mt)return null;const Ge=oe(L*at,y,A,k,D,H,G.segment,Re,$e,K,ee,re,se,be);return Ge?{first:Mt,last:Ge}:null}function it(L,d,y,A){return L===s.ai.horizontal&&Math.abs(y.y-d.y)>Math.abs(y.x-d.x)*A?{useVertical:!0}:(L===s.ai.vertical?d.y<y.y:d.x>y.x)?{needsFlipping:!0}:null}function Qt(L,d,y,A,k,D,H,G,K,ee,re,se,be,Le,Re,$e){const ke=d/24,at=L.lineOffsetX*ke,Mt=L.lineOffsetY*ke;let Ge;if(L.numGlyphs>1){const ft=L.glyphStartIndex+L.numGlyphs,At=L.lineStartIndex,Pt=L.lineStartIndex+L.lineLength,qt=Me(ke,G,at,Mt,y,re,se,L,K,D,be,Re,$e);if(!qt)return{notEnoughRoom:!0};const wt=an(qt.first.point,H,$e).point,Xt=an(qt.last.point,H,$e).point;if(A&&!y){const ln=it(L.writingMode,wt,Xt,Le);if(ln)return ln}Ge=[qt.first];for(let ln=L.glyphStartIndex+1;ln<ft-1;ln++)Ge.push(oe(ke*G.getoffsetX(ln),at,Mt,y,re,se,L.segment,At,Pt,K,D,be,Re,$e));Ge.push(qt.last)}else{if(A&&!y){const At=an(se,k,$e).point,Pt=L.lineStartIndex+L.segment+1,qt=new s.P(K.getx(Pt),K.gety(Pt)),wt=an(qt,k,$e),Xt=wt.signedDistanceFromCamera>0?wt.point:Xe(se,qt,At,1,k,$e),ln=it(L.writingMode,At,Xt,Le);if(ln)return ln}const ft=oe(ke*G.getoffsetX(L.glyphStartIndex),at,Mt,y,re,se,L.segment,L.lineStartIndex,L.lineStartIndex+L.lineLength,K,D,be,Re,$e);if(!ft)return{notEnoughRoom:!0};Ge=[ft]}for(const ft of Ge)s.ak(ee,ft.point,ft.angle);return{}}function Xe(L,d,y,A,k,D){const H=an(L.add(L.sub(d)._unit()),k,D).point,G=y.sub(H);return y.add(G._mult(A/G.mag()))}function It(L,d){const{projectionCache:y,lineVertexArray:A,labelPlaneMatrix:k,tileAnchorPoint:D,distanceFromAnchor:H,getElevation:G,previousVertex:K,direction:ee,absOffsetX:re}=d;if(y.projections[L])return y.projections[L];const se=new s.P(A.getx(L),A.gety(L)),be=an(se,k,G);if(be.signedDistanceFromCamera>0)return y.projections[L]=be.point,be.point;const Le=L-ee;return Xe(H===0?D:new s.P(A.getx(Le),A.gety(Le)),se,K,re-H+1,k,G)}function Et(L,d,y){return L._unit()._perp()._mult(d*y)}function we(L,d,y,A,k,D,H,G){const{projectionCache:K,direction:ee}=G;if(K.offsets[L])return K.offsets[L];const re=y.add(d);if(L+ee<A||L+ee>=k)return K.offsets[L]=re,re;const se=It(L+ee,G),be=Et(se.sub(y),H,ee),Le=y.add(be),Re=se.add(be);return K.offsets[L]=s.al(D,re,Le,Re)||re,K.offsets[L]}function oe(L,d,y,A,k,D,H,G,K,ee,re,se,be,Le){const Re=A?L-d:L+d;let $e=Re>0?1:-1,ke=0;A&&($e*=-1,ke=Math.PI),$e<0&&(ke+=Math.PI);let at,Mt,Ge=$e>0?G+H:G+H+1,ft=k,At=k,Pt=0,qt=0;const wt=Math.abs(Re),Xt=[];let ln;for(;Pt+qt<=wt;){if(Ge+=$e,Ge<G||Ge>=K)return null;Pt+=qt,At=ft,Mt=at;const dn={projectionCache:se,lineVertexArray:ee,labelPlaneMatrix:re,tileAnchorPoint:D,distanceFromAnchor:Pt,getElevation:Le,previousVertex:At,direction:$e,absOffsetX:wt};if(ft=It(Ge,dn),y===0)Xt.push(At),ln=ft.sub(At);else{let Zn;const Rn=ft.sub(At);Zn=Rn.mag()===0?Et(It(Ge+$e,dn).sub(ft),y,$e):Et(Rn,y,$e),Mt||(Mt=At.add(Zn)),at=we(Ge,Zn,ft,G,K,Mt,y,dn),Xt.push(Mt),ln=at.sub(Mt)}qt=ln.mag()}const In=ln._mult((wt-Pt)/qt)._add(Mt||At),Pr=ke+Math.atan2(ft.y-At.y,ft.x-At.x);return Xt.push(In),{point:In,angle:be?Pr:0,path:Xt}}const pe=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Te(L,d){for(let y=0;y<L;y++){const A=d.length;d.resize(A+4),d.float32.set(pe,3*A)}}function Pe(L,d,y){const A=d[0],k=d[1];return L[0]=y[0]*A+y[4]*k+y[12],L[1]=y[1]*A+y[5]*k+y[13],L[3]=y[3]*A+y[7]*k+y[15],L}const Ne=100;class Ke{constructor(d,y=new An(d.width+200,d.height+200,25),A=new An(d.width+200,d.height+200,25)){this.transform=d,this.grid=y,this.ignoredGrid=A,this.pitchfactor=Math.cos(d._pitch)*d.cameraToCenterDistance,this.screenRightBoundary=d.width+Ne,this.screenBottomBoundary=d.height+Ne,this.gridRightBoundary=d.width+200,this.gridBottomBoundary=d.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(d,y,A,k,D,H){const G=this.projectAndGetPerspectiveRatio(k,d.anchorPointX,d.anchorPointY,H),K=A*G.perspectiveRatio,ee=d.x1*K+G.point.x,re=d.y1*K+G.point.y,se=d.x2*K+G.point.x,be=d.y2*K+G.point.y;return!this.isInsideGrid(ee,re,se,be)||y!=="always"&&this.grid.hitTest(ee,re,se,be,y,D)||G.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[ee,re,se,be],offscreen:this.isOffscreen(ee,re,se,be)}}placeCollisionCircles(d,y,A,k,D,H,G,K,ee,re,se,be,Le,Re){const $e=[],ke=new s.P(y.anchorX,y.anchorY),at=an(ke,H,Re),Mt=Ot(this.transform.cameraToCenterDistance,at.signedDistanceFromCamera),Ge=(re?D/Mt:D*Mt)/s.ap,ft=an(ke,G,Re).point,At=Me(Ge,k,y.lineOffsetX*Ge,y.lineOffsetY*Ge,!1,ft,ke,y,A,G,{projections:{},offsets:{}},!1,Re);let Pt=!1,qt=!1,wt=!0;if(At){const Xt=.5*be*Mt+Le,ln=new s.P(-100,-100),In=new s.P(this.screenRightBoundary,this.screenBottomBoundary),Pr=new Rt,dn=At.first,Zn=At.last;let Rn=[];for(let vr=dn.path.length-1;vr>=1;vr--)Rn.push(dn.path[vr]);for(let vr=1;vr<Zn.path.length;vr++)Rn.push(Zn.path[vr]);const Qr=2.5*Xt;if(K){const vr=Rn.map(Tr=>an(Tr,K,Re));Rn=vr.some(Tr=>Tr.signedDistanceFromCamera<=0)?[]:vr.map(Tr=>Tr.point)}let Er=[];if(Rn.length>0){const vr=Rn[0].clone(),Tr=Rn[0].clone();for(let ro=1;ro<Rn.length;ro++)vr.x=Math.min(vr.x,Rn[ro].x),vr.y=Math.min(vr.y,Rn[ro].y),Tr.x=Math.max(Tr.x,Rn[ro].x),Tr.y=Math.max(Tr.y,Rn[ro].y);Er=vr.x>=ln.x&&Tr.x<=In.x&&vr.y>=ln.y&&Tr.y<=In.y?[Rn]:Tr.x<ln.x||vr.x>In.x||Tr.y<ln.y||vr.y>In.y?[]:s.am([Rn],ln.x,ln.y,In.x,In.y)}for(const vr of Er){Pr.reset(vr,.25*Xt);let Tr=0;Tr=Pr.length<=.5*Xt?1:Math.ceil(Pr.paddedLength/Qr)+1;for(let ro=0;ro<Tr;ro++){const mi=ro/Math.max(Tr-1,1),Bo=Pr.lerp(mi),yo=Bo.x+Ne,lo=Bo.y+Ne;$e.push(yo,lo,Xt,0);const Gs=yo-Xt,li=lo-Xt,lc=yo+Xt,cc=lo+Xt;if(wt=wt&&this.isOffscreen(Gs,li,lc,cc),qt=qt||this.isInsideGrid(Gs,li,lc,cc),d!=="always"&&this.grid.hitTestCircle(yo,lo,Xt,d,se)&&(Pt=!0,!ee))return{circles:[],offscreen:!1,collisionDetected:Pt}}}}return{circles:!ee&&Pt||!qt||Mt<this.perspectiveRatioCutoff?[]:$e,offscreen:wt,collisionDetected:Pt}}queryRenderedSymbols(d){if(d.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const y=[];let A=1/0,k=1/0,D=-1/0,H=-1/0;for(const re of d){const se=new s.P(re.x+Ne,re.y+Ne);A=Math.min(A,se.x),k=Math.min(k,se.y),D=Math.max(D,se.x),H=Math.max(H,se.y),y.push(se)}const G=this.grid.query(A,k,D,H).concat(this.ignoredGrid.query(A,k,D,H)),K={},ee={};for(const re of G){const se=re.key;if(K[se.bucketInstanceId]===void 0&&(K[se.bucketInstanceId]={}),K[se.bucketInstanceId][se.featureIndex])continue;const be=[new s.P(re.x1,re.y1),new s.P(re.x2,re.y1),new s.P(re.x2,re.y2),new s.P(re.x1,re.y2)];s.an(y,be)&&(K[se.bucketInstanceId][se.featureIndex]=!0,ee[se.bucketInstanceId]===void 0&&(ee[se.bucketInstanceId]=[]),ee[se.bucketInstanceId].push(se.featureIndex))}return ee}insertCollisionBox(d,y,A,k,D,H){(A?this.ignoredGrid:this.grid).insert({bucketInstanceId:k,featureIndex:D,collisionGroupID:H,overlapMode:y},d[0],d[1],d[2],d[3])}insertCollisionCircles(d,y,A,k,D,H){const G=A?this.ignoredGrid:this.grid,K={bucketInstanceId:k,featureIndex:D,collisionGroupID:H,overlapMode:y};for(let ee=0;ee<d.length;ee+=4)G.insertCircle(K,d[ee],d[ee+1],d[ee+2])}projectAndGetPerspectiveRatio(d,y,A,k){let D;return k?(D=[y,A,k(y,A),1],s.ag(D,D,d)):(D=[y,A,0,1],Pe(D,D,d)),{point:new s.P((D[0]/D[3]+1)/2*this.transform.width+Ne,(-D[1]/D[3]+1)/2*this.transform.height+Ne),perspectiveRatio:.5+this.transform.cameraToCenterDistance/D[3]*.5}}isOffscreen(d,y,A,k){return A<Ne||d>=this.screenRightBoundary||k<Ne||y>this.screenBottomBoundary}isInsideGrid(d,y,A,k){return A>=0&&d<this.gridRightBoundary&&k>=0&&y<this.gridBottomBoundary}getViewportMatrix(){const d=s.ao([]);return s.$(d,d,[-100,-100,0]),d}}function qe(L,d,y){return d*(s.N/(L.tileSize*Math.pow(2,y-L.tileID.overscaledZ)))}class je{constructor(d,y,A,k){this.opacity=d?Math.max(0,Math.min(1,d.opacity+(d.placed?y:-y))):k&&A?1:0,this.placed=A}isHidden(){return this.opacity===0&&!this.placed}}class tt{constructor(d,y,A,k,D){this.text=new je(d?d.text:null,y,A,D),this.icon=new je(d?d.icon:null,y,k,D)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Nt{constructor(d,y,A){this.text=d,this.icon=y,this.skipFade=A}}class Ut{constructor(){this.invProjMatrix=s.Z(),this.viewportMatrix=s.Z(),this.circles=[]}}class $t{constructor(d,y,A,k,D){this.bucketInstanceId=d,this.featureIndex=y,this.sourceLayerIndex=A,this.bucketIndex=k,this.tileID=D}}class kn{constructor(d){this.crossSourceCollisions=d,this.maxGroupID=0,this.collisionGroups={}}get(d){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[d]){const y=++this.maxGroupID;this.collisionGroups[d]={ID:y,predicate:A=>A.collisionGroupID===y}}return this.collisionGroups[d]}}function er(L,d,y,A,k){const{horizontalAlign:D,verticalAlign:H}=s.au(L);return new s.P(-(D-.5)*d+A[0]*k,-(H-.5)*y+A[1]*k)}function En(L,d,y,A,k,D){const{x1:H,x2:G,y1:K,y2:ee,anchorPointX:re,anchorPointY:se}=L,be=new s.P(d,y);return A&&be._rotate(k?D:-D),{x1:H+be.x,y1:K+be.y,x2:G+be.x,y2:ee+be.y,anchorPointX:re,anchorPointY:se}}class $n{constructor(d,y,A,k,D){this.transform=d.clone(),this.terrain=y,this.collisionIndex=new Ke(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=A,this.retainedQueryData={},this.collisionGroups=new kn(k),this.collisionCircleArrays={},this.prevPlacement=D,D&&(D.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(d,y,A,k){const D=A.getBucket(y),H=A.latestFeatureIndex;if(!D||!H||y.id!==D.layerIds[0])return;const G=A.collisionBoxArray,K=D.layers[0].layout,ee=Math.pow(2,this.transform.zoom-A.tileID.overscaledZ),re=A.tileSize/s.N,se=this.transform.calculatePosMatrix(A.tileID.toUnwrapped()),be=K.get("text-pitch-alignment")==="map",Le=K.get("text-rotation-alignment")==="map",Re=qe(A,1,this.transform.zoom),$e=mt(se,be,Le,this.transform,Re);let ke=null;if(be){const Mt=un(se,be,Le,this.transform,Re);ke=s.a1([],this.transform.labelPlaneMatrix,Mt)}this.retainedQueryData[D.bucketInstanceId]=new $t(D.bucketInstanceId,H,D.sourceLayerIndex,D.index,A.tileID);const at={bucket:D,layout:K,posMatrix:se,textLabelPlaneMatrix:$e,labelToScreenMatrix:ke,scale:ee,textPixelRatio:re,holdingForFade:A.holdingForFade(),collisionBoxArray:G,partiallyEvaluatedTextSize:s.ah(D.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(D.sourceID)};if(k)for(const Mt of D.sortKeyRanges){const{sortKey:Ge,symbolInstanceStart:ft,symbolInstanceEnd:At}=Mt;d.push({sortKey:Ge,symbolInstanceStart:ft,symbolInstanceEnd:At,parameters:at})}else d.push({symbolInstanceStart:0,symbolInstanceEnd:D.symbolInstances.length,parameters:at})}attemptAnchorPlacement(d,y,A,k,D,H,G,K,ee,re,se,be,Le,Re,$e,ke){const at=s.aq[d.textAnchor],Mt=[d.textOffset0,d.textOffset1],Ge=er(at,A,k,Mt,D),ft=this.collisionIndex.placeCollisionBox(En(y,Ge.x,Ge.y,H,G,this.transform.angle),se,K,ee,re.predicate,ke);if((!$e||this.collisionIndex.placeCollisionBox(En($e,Ge.x,Ge.y,H,G,this.transform.angle),se,K,ee,re.predicate,ke).box.length!==0)&&ft.box.length>0){let At;if(this.prevPlacement&&this.prevPlacement.variableOffsets[be.crossTileID]&&this.prevPlacement.placements[be.crossTileID]&&this.prevPlacement.placements[be.crossTileID].text&&(At=this.prevPlacement.variableOffsets[be.crossTileID].anchor),be.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[be.crossTileID]={textOffset:Mt,width:A,height:k,anchor:at,textBoxScale:D,prevAnchor:At},this.markUsedJustification(Le,at,be,Re),Le.allowVerticalPlacement&&(this.markUsedOrientation(Le,Re,be),this.placedOrientations[be.crossTileID]=Re),{shift:Ge,placedGlyphBoxes:ft}}}placeLayerBucketPart(d,y,A){const{bucket:k,layout:D,posMatrix:H,textLabelPlaneMatrix:G,labelToScreenMatrix:K,textPixelRatio:ee,holdingForFade:re,collisionBoxArray:se,partiallyEvaluatedTextSize:be,collisionGroup:Le}=d.parameters,Re=D.get("text-optional"),$e=D.get("icon-optional"),ke=s.ar(D,"text-overlap","text-allow-overlap"),at=ke==="always",Mt=s.ar(D,"icon-overlap","icon-allow-overlap"),Ge=Mt==="always",ft=D.get("text-rotation-alignment")==="map",At=D.get("text-pitch-alignment")==="map",Pt=D.get("icon-text-fit")!=="none",qt=D.get("symbol-z-order")==="viewport-y",wt=at&&(Ge||!k.hasIconData()||$e),Xt=Ge&&(at||!k.hasTextData()||Re);!k.collisionArrays&&se&&k.deserializeCollisionBoxes(se);const ln=this.retainedQueryData[k.bucketInstanceId].tileID,In=this.terrain?(dn,Zn)=>this.terrain.getElevation(ln,dn,Zn):null,Pr=(dn,Zn)=>{var Rn,Qr;if(y[dn.crossTileID])return;if(re)return void(this.placements[dn.crossTileID]=new Nt(!1,!1,!1));let Er=!1,vr=!1,Tr=!0,ro=null,mi={box:null,offscreen:null},Bo={box:null,offscreen:null},yo=null,lo=null,Gs=null,li=0,lc=0,cc=0;Zn.textFeatureIndex?li=Zn.textFeatureIndex:dn.useRuntimeCollisionCircles&&(li=dn.featureIndex),Zn.verticalTextFeatureIndex&&(lc=Zn.verticalTextFeatureIndex);const Bc=Zn.textBox;if(Bc){const us=Di=>{let co=s.ai.horizontal;if(k.allowVerticalPlacement&&!Di&&this.prevPlacement){const Ko=this.prevPlacement.placedOrientations[dn.crossTileID];Ko&&(this.placedOrientations[dn.crossTileID]=Ko,co=Ko,this.markUsedOrientation(k,co,dn))}return co},Co=(Di,co)=>{if(k.allowVerticalPlacement&&dn.numVerticalGlyphVertices>0&&Zn.verticalTextBox){for(const Ko of k.writingModes)if(Ko===s.ai.vertical?(mi=co(),Bo=mi):mi=Di(),mi&&mi.box&&mi.box.length)break}else mi=Di()},Xo=dn.textAnchorOffsetStartIndex,uc=dn.textAnchorOffsetEndIndex;if(uc===Xo){const Di=(co,Ko)=>{const qi=this.collisionIndex.placeCollisionBox(co,ke,ee,H,Le.predicate,In);return qi&&qi.box&&qi.box.length&&(this.markUsedOrientation(k,Ko,dn),this.placedOrientations[dn.crossTileID]=Ko),qi};Co(()=>Di(Bc,s.ai.horizontal),()=>{const co=Zn.verticalTextBox;return k.allowVerticalPlacement&&dn.numVerticalGlyphVertices>0&&co?Di(co,s.ai.vertical):{box:null,offscreen:null}}),us(mi&&mi.box&&mi.box.length)}else{let Di=s.aq[(Qr=(Rn=this.prevPlacement)===null||Rn===void 0?void 0:Rn.variableOffsets[dn.crossTileID])===null||Qr===void 0?void 0:Qr.anchor];const co=(qi,$c,Uf)=>{const Jy=qi.x2-qi.x1,Fm=qi.y2-qi.y1,q1=dn.textBoxScale,Vf=Pt&&Mt==="never"?$c:null;let qa={box:[],offscreen:!1},Ai=ke==="never"?1:2,gr="never";Di&&Ai++;for(let ei=0;ei<Ai;ei++){for(let ci=Xo;ci<uc;ci++){const $o=k.textAnchorOffsets.get(ci);if(Di&&$o.textAnchor!==Di)continue;const vo=this.attemptAnchorPlacement($o,qi,Jy,Fm,q1,ft,At,ee,H,Le,gr,dn,k,Uf,Vf,In);if(vo&&(qa=vo.placedGlyphBoxes,qa&&qa.box&&qa.box.length))return Er=!0,ro=vo.shift,qa}Di?Di=null:gr=ke}return qa};Co(()=>co(Bc,Zn.iconBox,s.ai.horizontal),()=>{const qi=Zn.verticalTextBox;return k.allowVerticalPlacement&&!(mi&&mi.box&&mi.box.length)&&dn.numVerticalGlyphVertices>0&&qi?co(qi,Zn.verticalIconBox,s.ai.vertical):{box:null,offscreen:null}}),mi&&(Er=mi.box,Tr=mi.offscreen);const Ko=us(mi&&mi.box);if(!Er&&this.prevPlacement){const qi=this.prevPlacement.variableOffsets[dn.crossTileID];qi&&(this.variableOffsets[dn.crossTileID]=qi,this.markUsedJustification(k,qi.anchor,dn,Ko))}}}if(yo=mi,Er=yo&&yo.box&&yo.box.length>0,Tr=yo&&yo.offscreen,dn.useRuntimeCollisionCircles){const us=k.text.placedSymbolArray.get(dn.centerJustifiedTextSymbolIndex),Co=s.aj(k.textSizeData,be,us),Xo=D.get("text-padding");lo=this.collisionIndex.placeCollisionCircles(ke,us,k.lineVertexArray,k.glyphOffsetArray,Co,H,G,K,A,At,Le.predicate,dn.collisionCircleDiameter,Xo,In),lo.circles.length&&lo.collisionDetected&&!A&&s.w("Collisions detected, but collision boxes are not shown"),Er=at||lo.circles.length>0&&!lo.collisionDetected,Tr=Tr&&lo.offscreen}if(Zn.iconFeatureIndex&&(cc=Zn.iconFeatureIndex),Zn.iconBox){const us=Co=>{const Xo=Pt&&ro?En(Co,ro.x,ro.y,ft,At,this.transform.angle):Co;return this.collisionIndex.placeCollisionBox(Xo,Mt,ee,H,Le.predicate,In)};Bo&&Bo.box&&Bo.box.length&&Zn.verticalIconBox?(Gs=us(Zn.verticalIconBox),vr=Gs.box.length>0):(Gs=us(Zn.iconBox),vr=Gs.box.length>0),Tr=Tr&&Gs.offscreen}const Nu=Re||dn.numHorizontalGlyphVertices===0&&dn.numVerticalGlyphVertices===0,Dd=$e||dn.numIconVertices===0;if(Nu||Dd?Dd?Nu||(vr=vr&&Er):Er=vr&&Er:vr=Er=vr&&Er,Er&&yo&&yo.box&&this.collisionIndex.insertCollisionBox(yo.box,ke,D.get("text-ignore-placement"),k.bucketInstanceId,Bo&&Bo.box&&lc?lc:li,Le.ID),vr&&Gs&&this.collisionIndex.insertCollisionBox(Gs.box,Mt,D.get("icon-ignore-placement"),k.bucketInstanceId,cc,Le.ID),lo&&(Er&&this.collisionIndex.insertCollisionCircles(lo.circles,ke,D.get("text-ignore-placement"),k.bucketInstanceId,li,Le.ID),A)){const us=k.bucketInstanceId;let Co=this.collisionCircleArrays[us];Co===void 0&&(Co=this.collisionCircleArrays[us]=new Ut);for(let Xo=0;Xo<lo.circles.length;Xo+=4)Co.circles.push(lo.circles[Xo+0]),Co.circles.push(lo.circles[Xo+1]),Co.circles.push(lo.circles[Xo+2]),Co.circles.push(lo.collisionDetected?1:0)}if(dn.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(k.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[dn.crossTileID]=new Nt(Er||wt,vr||Xt,Tr||k.justReloaded),y[dn.crossTileID]=!0};if(qt){if(d.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const dn=k.getSortedSymbolIndexes(this.transform.angle);for(let Zn=dn.length-1;Zn>=0;--Zn){const Rn=dn[Zn];Pr(k.symbolInstances.get(Rn),k.collisionArrays[Rn])}}else for(let dn=d.symbolInstanceStart;dn<d.symbolInstanceEnd;dn++)Pr(k.symbolInstances.get(dn),k.collisionArrays[dn]);if(A&&k.bucketInstanceId in this.collisionCircleArrays){const dn=this.collisionCircleArrays[k.bucketInstanceId];s.as(dn.invProjMatrix,H),dn.viewportMatrix=this.collisionIndex.getViewportMatrix()}k.justReloaded=!1}markUsedJustification(d,y,A,k){let D;D=k===s.ai.vertical?A.verticalPlacedTextSymbolIndex:{left:A.leftJustifiedTextSymbolIndex,center:A.centerJustifiedTextSymbolIndex,right:A.rightJustifiedTextSymbolIndex}[s.at(y)];const H=[A.leftJustifiedTextSymbolIndex,A.centerJustifiedTextSymbolIndex,A.rightJustifiedTextSymbolIndex,A.verticalPlacedTextSymbolIndex];for(const G of H)G>=0&&(d.text.placedSymbolArray.get(G).crossTileID=D>=0&&G!==D?0:A.crossTileID)}markUsedOrientation(d,y,A){const k=y===s.ai.horizontal||y===s.ai.horizontalOnly?y:0,D=y===s.ai.vertical?y:0,H=[A.leftJustifiedTextSymbolIndex,A.centerJustifiedTextSymbolIndex,A.rightJustifiedTextSymbolIndex];for(const G of H)d.text.placedSymbolArray.get(G).placedOrientation=k;A.verticalPlacedTextSymbolIndex&&(d.text.placedSymbolArray.get(A.verticalPlacedTextSymbolIndex).placedOrientation=D)}commit(d){this.commitTime=d,this.zoomAtLastRecencyCheck=this.transform.zoom;const y=this.prevPlacement;let A=!1;this.prevZoomAdjustment=y?y.zoomAdjustment(this.transform.zoom):0;const k=y?y.symbolFadeChange(d):1,D=y?y.opacities:{},H=y?y.variableOffsets:{},G=y?y.placedOrientations:{};for(const K in this.placements){const ee=this.placements[K],re=D[K];re?(this.opacities[K]=new tt(re,k,ee.text,ee.icon),A=A||ee.text!==re.text.placed||ee.icon!==re.icon.placed):(this.opacities[K]=new tt(null,k,ee.text,ee.icon,ee.skipFade),A=A||ee.text||ee.icon)}for(const K in D){const ee=D[K];if(!this.opacities[K]){const re=new tt(ee,k,!1,!1);re.isHidden()||(this.opacities[K]=re,A=A||ee.text.placed||ee.icon.placed)}}for(const K in H)this.variableOffsets[K]||!this.opacities[K]||this.opacities[K].isHidden()||(this.variableOffsets[K]=H[K]);for(const K in G)this.placedOrientations[K]||!this.opacities[K]||this.opacities[K].isHidden()||(this.placedOrientations[K]=G[K]);if(y&&y.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");A?this.lastPlacementChangeTime=d:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=y?y.lastPlacementChangeTime:d)}updateLayerOpacities(d,y){const A={};for(const k of y){const D=k.getBucket(d);D&&k.latestFeatureIndex&&d.id===D.layerIds[0]&&this.updateBucketOpacities(D,A,k.collisionBoxArray)}}updateBucketOpacities(d,y,A){d.hasTextData()&&(d.text.opacityVertexArray.clear(),d.text.hasVisibleVertices=!1),d.hasIconData()&&(d.icon.opacityVertexArray.clear(),d.icon.hasVisibleVertices=!1),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexArray.clear(),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexArray.clear();const k=d.layers[0],D=k.layout,H=new tt(null,0,!1,!1,!0),G=D.get("text-allow-overlap"),K=D.get("icon-allow-overlap"),ee=k._unevaluatedLayout.hasValue("text-variable-anchor")||k._unevaluatedLayout.hasValue("text-variable-anchor-offset"),re=D.get("text-rotation-alignment")==="map",se=D.get("text-pitch-alignment")==="map",be=D.get("icon-text-fit")!=="none",Le=new tt(null,0,G&&(K||!d.hasIconData()||D.get("icon-optional")),K&&(G||!d.hasTextData()||D.get("text-optional")),!0);!d.collisionArrays&&A&&(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData())&&d.deserializeCollisionBoxes(A);const Re=($e,ke,at)=>{for(let Mt=0;Mt<ke/4;Mt++)$e.opacityVertexArray.emplaceBack(at);$e.hasVisibleVertices=$e.hasVisibleVertices||at!==Xn};for(let $e=0;$e<d.symbolInstances.length;$e++){const ke=d.symbolInstances.get($e),{numHorizontalGlyphVertices:at,numVerticalGlyphVertices:Mt,crossTileID:Ge}=ke;let ft=this.opacities[Ge];y[Ge]?ft=H:ft||(ft=Le,this.opacities[Ge]=ft),y[Ge]=!0;const At=ke.numIconVertices>0,Pt=this.placedOrientations[ke.crossTileID],qt=Pt===s.ai.vertical,wt=Pt===s.ai.horizontal||Pt===s.ai.horizontalOnly;if(at>0||Mt>0){const Xt=Cn(ft.text);Re(d.text,at,qt?Xn:Xt),Re(d.text,Mt,wt?Xn:Xt);const ln=ft.text.isHidden();[ke.rightJustifiedTextSymbolIndex,ke.centerJustifiedTextSymbolIndex,ke.leftJustifiedTextSymbolIndex].forEach(dn=>{dn>=0&&(d.text.placedSymbolArray.get(dn).hidden=ln||qt?1:0)}),ke.verticalPlacedTextSymbolIndex>=0&&(d.text.placedSymbolArray.get(ke.verticalPlacedTextSymbolIndex).hidden=ln||wt?1:0);const In=this.variableOffsets[ke.crossTileID];In&&this.markUsedJustification(d,In.anchor,ke,Pt);const Pr=this.placedOrientations[ke.crossTileID];Pr&&(this.markUsedJustification(d,"left",ke,Pr),this.markUsedOrientation(d,Pr,ke))}if(At){const Xt=Cn(ft.icon),ln=!(be&&ke.verticalPlacedIconSymbolIndex&&qt);ke.placedIconSymbolIndex>=0&&(Re(d.icon,ke.numIconVertices,ln?Xt:Xn),d.icon.placedSymbolArray.get(ke.placedIconSymbolIndex).hidden=ft.icon.isHidden()),ke.verticalPlacedIconSymbolIndex>=0&&(Re(d.icon,ke.numVerticalIconVertices,ln?Xn:Xt),d.icon.placedSymbolArray.get(ke.verticalPlacedIconSymbolIndex).hidden=ft.icon.isHidden())}if(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData()){const Xt=d.collisionArrays[$e];if(Xt){let ln=new s.P(0,0);if(Xt.textBox||Xt.verticalTextBox){let Pr=!0;if(ee){const dn=this.variableOffsets[Ge];dn?(ln=er(dn.anchor,dn.width,dn.height,dn.textOffset,dn.textBoxScale),re&&ln._rotate(se?this.transform.angle:-this.transform.angle)):Pr=!1}Xt.textBox&&sr(d.textCollisionBox.collisionVertexArray,ft.text.placed,!Pr||qt,ln.x,ln.y),Xt.verticalTextBox&&sr(d.textCollisionBox.collisionVertexArray,ft.text.placed,!Pr||wt,ln.x,ln.y)}const In=!!(!wt&&Xt.verticalIconBox);Xt.iconBox&&sr(d.iconCollisionBox.collisionVertexArray,ft.icon.placed,In,be?ln.x:0,be?ln.y:0),Xt.verticalIconBox&&sr(d.iconCollisionBox.collisionVertexArray,ft.icon.placed,!In,be?ln.x:0,be?ln.y:0)}}}if(d.sortFeatures(this.transform.angle),this.retainedQueryData[d.bucketInstanceId]&&(this.retainedQueryData[d.bucketInstanceId].featureSortOrder=d.featureSortOrder),d.hasTextData()&&d.text.opacityVertexBuffer&&d.text.opacityVertexBuffer.updateData(d.text.opacityVertexArray),d.hasIconData()&&d.icon.opacityVertexBuffer&&d.icon.opacityVertexBuffer.updateData(d.icon.opacityVertexArray),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexBuffer&&d.iconCollisionBox.collisionVertexBuffer.updateData(d.iconCollisionBox.collisionVertexArray),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexBuffer&&d.textCollisionBox.collisionVertexBuffer.updateData(d.textCollisionBox.collisionVertexArray),d.text.opacityVertexArray.length!==d.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${d.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${d.text.layoutVertexArray.length}) / 4`);if(d.icon.opacityVertexArray.length!==d.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${d.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${d.icon.layoutVertexArray.length}) / 4`);if(d.bucketInstanceId in this.collisionCircleArrays){const $e=this.collisionCircleArrays[d.bucketInstanceId];d.placementInvProjMatrix=$e.invProjMatrix,d.placementViewportMatrix=$e.viewportMatrix,d.collisionCircleArray=$e.circles,delete this.collisionCircleArrays[d.bucketInstanceId]}}symbolFadeChange(d){return this.fadeDuration===0?1:(d-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(d){return Math.max(0,(this.transform.zoom-d)/1.5)}hasTransitions(d){return this.stale||d-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(d,y){const A=this.zoomAtLastRecencyCheck===y?1-this.zoomAdjustment(y):1;return this.zoomAtLastRecencyCheck=y,this.commitTime+this.fadeDuration*A>d}setStale(){this.stale=!0}}function sr(L,d,y,A,k){L.emplaceBack(d?1:0,y?1:0,A||0,k||0),L.emplaceBack(d?1:0,y?1:0,A||0,k||0),L.emplaceBack(d?1:0,y?1:0,A||0,k||0),L.emplaceBack(d?1:0,y?1:0,A||0,k||0)}const $r=Math.pow(2,25),Ae=Math.pow(2,24),ut=Math.pow(2,17),bt=Math.pow(2,16),yt=Math.pow(2,9),vt=Math.pow(2,8),pn=Math.pow(2,1);function Cn(L){if(L.opacity===0&&!L.placed)return 0;if(L.opacity===1&&L.placed)return 4294967295;const d=L.placed?1:0,y=Math.floor(127*L.opacity);return y*$r+d*Ae+y*ut+d*bt+y*yt+d*vt+y*pn+d}const Xn=0;class dr{constructor(d){this._sortAcrossTiles=d.layout.get("symbol-z-order")!=="viewport-y"&&!d.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(d,y,A,k,D){const H=this._bucketParts;for(;this._currentTileIndex<d.length;)if(y.getBucketParts(H,k,d[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,D())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,H.sort((G,K)=>G.sortKey-K.sortKey));this._currentPartIndex<H.length;)if(y.placeLayerBucketPart(H[this._currentPartIndex],this._seenCrossTileIDs,A),this._currentPartIndex++,D())return!0;return!1}}class fr{constructor(d,y,A,k,D,H,G,K){this.placement=new $n(d,y,H,G,K),this._currentPlacementIndex=A.length-1,this._forceFullPlacement=k,this._showCollisionBoxes=D,this._done=!1}isDone(){return this._done}continuePlacement(d,y,A){const k=s.h.now(),D=()=>!this._forceFullPlacement&&s.h.now()-k>2;for(;this._currentPlacementIndex>=0;){const H=y[d[this._currentPlacementIndex]],G=this.placement.collisionIndex.transform.zoom;if(H.type==="symbol"&&(!H.minzoom||H.minzoom<=G)&&(!H.maxzoom||H.maxzoom>G)){if(this._inProgressLayer||(this._inProgressLayer=new dr(H)),this._inProgressLayer.continuePlacement(A[H.source],this.placement,this._showCollisionBoxes,H,D))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(d){return this.placement.commit(d),this.placement}}const cr=512/s.N/2;class _r{constructor(d,y,A){this.tileID=d,this.bucketInstanceId=A,this._symbolsByKey={};const k=new Map;for(let D=0;D<y.length;D++){const H=y.get(D),G=H.key,K=k.get(G);K?K.push(H):k.set(G,[H])}for(const[D,H]of k){const G={positions:H.map(K=>({x:Math.floor(K.anchorX*cr),y:Math.floor(K.anchorY*cr)})),crossTileIDs:H.map(K=>K.crossTileID)};if(G.positions.length>128){const K=new s.av(G.positions.length,16,Uint16Array);for(const{x:ee,y:re}of G.positions)K.add(ee,re);K.finish(),delete G.positions,G.index=K}this._symbolsByKey[D]=G}}getScaledCoordinates(d,y){const{x:A,y:k,z:D}=this.tileID.canonical,{x:H,y:G,z:K}=y.canonical,ee=cr/Math.pow(2,K-D),re=(G*s.N+d.anchorY)*ee,se=k*s.N*cr;return{x:Math.floor((H*s.N+d.anchorX)*ee-A*s.N*cr),y:Math.floor(re-se)}}findMatches(d,y,A){const k=this.tileID.canonical.z<y.canonical.z?1:Math.pow(2,this.tileID.canonical.z-y.canonical.z);for(let D=0;D<d.length;D++){const H=d.get(D);if(H.crossTileID)continue;const G=this._symbolsByKey[H.key];if(!G)continue;const K=this.getScaledCoordinates(H,y);if(G.index){const ee=G.index.range(K.x-k,K.y-k,K.x+k,K.y+k).sort();for(const re of ee){const se=G.crossTileIDs[re];if(!A[se]){A[se]=!0,H.crossTileID=se;break}}}else if(G.positions)for(let ee=0;ee<G.positions.length;ee++){const re=G.positions[ee],se=G.crossTileIDs[ee];if(Math.abs(re.x-K.x)<=k&&Math.abs(re.y-K.y)<=k&&!A[se]){A[se]=!0,H.crossTileID=se;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:d})=>d)}}class ar{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class No{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(d){const y=Math.round((d-this.lng)/360);if(y!==0)for(const A in this.indexes){const k=this.indexes[A],D={};for(const H in k){const G=k[H];G.tileID=G.tileID.unwrapTo(G.tileID.wrap+y),D[G.tileID.key]=G}this.indexes[A]=D}this.lng=d}addBucket(d,y,A){if(this.indexes[d.overscaledZ]&&this.indexes[d.overscaledZ][d.key]){if(this.indexes[d.overscaledZ][d.key].bucketInstanceId===y.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(d.overscaledZ,this.indexes[d.overscaledZ][d.key])}for(let D=0;D<y.symbolInstances.length;D++)y.symbolInstances.get(D).crossTileID=0;this.usedCrossTileIDs[d.overscaledZ]||(this.usedCrossTileIDs[d.overscaledZ]={});const k=this.usedCrossTileIDs[d.overscaledZ];for(const D in this.indexes){const H=this.indexes[D];if(Number(D)>d.overscaledZ)for(const G in H){const K=H[G];K.tileID.isChildOf(d)&&K.findMatches(y.symbolInstances,d,k)}else{const G=H[d.scaledTo(Number(D)).key];G&&G.findMatches(y.symbolInstances,d,k)}}for(let D=0;D<y.symbolInstances.length;D++){const H=y.symbolInstances.get(D);H.crossTileID||(H.crossTileID=A.generate(),k[H.crossTileID]=!0)}return this.indexes[d.overscaledZ]===void 0&&(this.indexes[d.overscaledZ]={}),this.indexes[d.overscaledZ][d.key]=new _r(d,y.symbolInstances,y.bucketInstanceId),!0}removeBucketCrossTileIDs(d,y){for(const A of y.getCrossTileIDsLists())for(const k of A)delete this.usedCrossTileIDs[d][k]}removeStaleBuckets(d){let y=!1;for(const A in this.indexes){const k=this.indexes[A];for(const D in k)d[k[D].bucketInstanceId]||(this.removeBucketCrossTileIDs(A,k[D]),delete k[D],y=!0)}return y}}class fi{constructor(){this.layerIndexes={},this.crossTileIDs=new ar,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(d,y,A){let k=this.layerIndexes[d.id];k===void 0&&(k=this.layerIndexes[d.id]=new No);let D=!1;const H={};k.handleWrapJump(A);for(const G of y){const K=G.getBucket(d);K&&d.id===K.layerIds[0]&&(K.bucketInstanceId||(K.bucketInstanceId=++this.maxBucketInstanceId),k.addBucket(G.tileID,K,this.crossTileIDs)&&(D=!0),H[K.bucketInstanceId]=!0)}return k.removeStaleBuckets(H)&&(D=!0),D}pruneUnusedLayers(d){const y={};d.forEach(A=>{y[A]=!0});for(const A in this.layerIndexes)y[A]||delete this.layerIndexes[A]}}const Yr=(L,d)=>s.x(L,d&&d.filter(y=>y.identifier!=="source.canvas")),Kn=s.F(s.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),Dn=s.F(s.ax,["setCenter","setZoom","setBearing","setPitch"]),to=s.aw();class tr extends s.E{constructor(d,y={}){super(),this.map=d,this.dispatcher=new ze(cn(),this,d._getMapId()),this.imageManager=new le,this.imageManager.setEventedParent(this),this.glyphManager=new fe(d._requestManager,y.localIdeographFontFamily),this.lineAtlas=new ve(256,512),this.crossTileSymbolIndex=new fi,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.az());const A=this;this._rtlTextPluginCallback=tr.registerForPluginStateChange(k=>{A.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:k.pluginStatus,pluginURL:k.pluginURL},(D,H)=>{if(s.aA(D),H&&H.every(G=>G))for(const G in A.sourceCaches){const K=A.sourceCaches[G].getSource().type;K!=="vector"&&K!=="geojson"||A.sourceCaches[G].reload()}})}),this.on("data",k=>{if(k.dataType!=="source"||k.sourceDataType!=="metadata")return;const D=this.sourceCaches[k.sourceId];if(!D)return;const H=D.getSource();if(H&&H.vectorLayerIds)for(const G in this._layers){const K=this._layers[G];K.source===H.id&&this._validateLayer(K)}})}loadURL(d,y={},A){this.fire(new s.k("dataloading",{dataType:"style"})),y.validate=typeof y.validate!="boolean"||y.validate;const k=this.map._requestManager.transformRequest(d,w.Style);this._request=s.f(k,(D,H)=>{this._request=null,D?this.fire(new s.j(D)):H&&this._load(H,y,A)})}loadJSON(d,y={},A){this.fire(new s.k("dataloading",{dataType:"style"})),this._request=s.h.frame(()=>{this._request=null,y.validate=y.validate!==!1,this._load(d,y,A)})}loadEmpty(){this.fire(new s.k("dataloading",{dataType:"style"})),this._load(to,{validate:!1})}_load(d,y,A){var k;const D=y.transformStyle?y.transformStyle(A,d):d;if(!y.validate||!Yr(this,s.y(D))){this._loaded=!0,this.stylesheet=D;for(const H in D.sources)this.addSource(H,D.sources[H],{validate:!1});D.sprite?this._loadSprite(D.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(D.glyphs),this._createLayers(),this.light=new he(this.stylesheet.light),this.map.setTerrain((k=this.stylesheet.terrain)!==null&&k!==void 0?k:null),this.fire(new s.k("data",{dataType:"style"})),this.fire(new s.k("style.load"))}}_createLayers(){const d=s.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",d),this._order=d.map(y=>y.id),this._layers={},this._serializedLayers=null;for(const y of d){const A=s.aC(y);A.setEventedParent(this,{layer:{id:y.id}}),this._layers[y.id]=A}}_loadSprite(d,y=!1,A=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(k,D,H,G){const K=U(k),ee=K.length,re=H>1?"@2x":"",se={},be={},Le={};for(const{id:Re,url:$e}of K){const ke=D.transformRequest(D.normalizeSpriteURL($e,re,".json"),w.SpriteJSON),at=`${Re}_${ke.url}`;se[at]=s.f(ke,(ft,At)=>{delete se[at],be[Re]=At,Z(G,be,Le,ft,ee)});const Mt=D.transformRequest(D.normalizeSpriteURL($e,re,".png"),w.SpriteImage),Ge=`${Re}_${Mt.url}`;se[Ge]=M.getImage(Mt,(ft,At)=>{delete se[Ge],Le[Re]=At,Z(G,be,Le,ft,ee)})}return{cancel(){for(const Re of Object.values(se))Re.cancel()}}}(d,this.map._requestManager,this.map.getPixelRatio(),(k,D)=>{if(this._spriteRequest=null,k)this.fire(new s.j(k));else if(D)for(const H in D){this._spritesImagesIds[H]=[];const G=this._spritesImagesIds[H]?this._spritesImagesIds[H].filter(K=>!(K in D)):[];for(const K of G)this.imageManager.removeImage(K),this._changedImages[K]=!0;for(const K in D[H]){const ee=H==="default"?K:`${H}:${K}`;this._spritesImagesIds[H].push(ee),ee in this.imageManager.images?this.imageManager.updateImage(ee,D[H][K],!1):this.imageManager.addImage(ee,D[H][K]),y&&(this._changedImages[ee]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),y&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.k("data",{dataType:"style"})),A&&A(k)})}_unloadSprite(){for(const d of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(d),this._changedImages[d]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}_validateLayer(d){const y=this.sourceCaches[d.source];if(!y)return;const A=d.sourceLayer;if(!A)return;const k=y.getSource();(k.type==="geojson"||k.vectorLayerIds&&k.vectorLayerIds.indexOf(A)===-1)&&this.fire(new s.j(new Error(`Source layer "${A}" does not exist on source "${k.id}" as specified by style layer "${d.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const d in this.sourceCaches)if(!this.sourceCaches[d].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(d){const y=this._serializedAllLayers();if(!d||d.length===0)return Object.values(y);const A=[];for(const k of d)y[k]&&A.push(y[k]);return A}_serializedAllLayers(){let d=this._serializedLayers;if(d)return d;d=this._serializedLayers={};const y=Object.keys(this._layers);for(const A of y){const k=this._layers[A];k.type!=="custom"&&(d[A]=k.serialize())}return d}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const d in this.sourceCaches)if(this.sourceCaches[d].hasTransition())return!0;for(const d in this._layers)if(this._layers[d].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(d){if(!this._loaded)return;const y=this._changed;if(this._changed){const k=Object.keys(this._updatedLayers),D=Object.keys(this._removedLayers);(k.length||D.length)&&this._updateWorkerLayers(k,D);for(const H in this._updatedSources){const G=this._updatedSources[H];if(G==="reload")this._reloadSource(H);else{if(G!=="clear")throw new Error(`Invalid action ${G}`);this._clearSource(H)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const H in this._updatedPaintProps)this._layers[H].updateTransitions(d);this.light.updateTransitions(d),this._resetUpdates()}const A={};for(const k in this.sourceCaches){const D=this.sourceCaches[k];A[k]=D.used,D.used=!1}for(const k of this._order){const D=this._layers[k];D.recalculate(d,this._availableImages),!D.isHidden(d.zoom)&&D.source&&(this.sourceCaches[D.source].used=!0)}for(const k in A){const D=this.sourceCaches[k];A[k]!==D.used&&D.fire(new s.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:k}))}this.light.recalculate(d),this.z=d.zoom,y&&this.fire(new s.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const d=Object.keys(this._changedImages);if(d.length){for(const y in this.sourceCaches)this.sourceCaches[y].reloadTilesForDependencies(["icons","patterns"],d);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(d,y){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(d),removedIds:y})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(d,y={}){this._checkLoaded();const A=this.serialize();if(d=y.transformStyle?y.transformStyle(A,d):d,Yr(this,s.y(d)))return!1;(d=s.aD(d)).layers=s.aB(d.layers);const k=s.aE(A,d).filter(H=>!(H.command in Dn));if(k.length===0)return!1;const D=k.filter(H=>!(H.command in Kn));if(D.length>0)throw new Error(`Unimplemented: ${D.map(H=>H.command).join(", ")}.`);for(const H of k)H.command!=="setTransition"&&this[H.command].apply(this,H.args);return this.stylesheet=d,this._serializedLayers=null,!0}addImage(d,y){if(this.getImage(d))return this.fire(new s.j(new Error(`An image named "${d}" already exists.`)));this.imageManager.addImage(d,y),this._afterImageUpdated(d)}updateImage(d,y){this.imageManager.updateImage(d,y)}getImage(d){return this.imageManager.getImage(d)}removeImage(d){if(!this.getImage(d))return this.fire(new s.j(new Error(`An image named "${d}" does not exist.`)));this.imageManager.removeImage(d),this._afterImageUpdated(d)}_afterImageUpdated(d){this._availableImages=this.imageManager.listImages(),this._changedImages[d]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(d,y,A={}){if(this._checkLoaded(),this.sourceCaches[d]!==void 0)throw new Error(`Source "${d}" already exists.`);if(!y.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(y).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(y.type)>=0&&this._validate(s.y.source,`sources.${d}`,y,null,A))return;this.map&&this.map._collectResourceTiming&&(y.collectResourceTiming=!0);const k=this.sourceCaches[d]=new Ce(d,y,this.dispatcher);k.style=this,k.setEventedParent(this,()=>({isSourceLoaded:k.loaded(),source:k.serialize(),sourceId:d})),k.onAdd(this.map),this._changed=!0}removeSource(d){if(this._checkLoaded(),this.sourceCaches[d]===void 0)throw new Error("There is no source with this ID");for(const A in this._layers)if(this._layers[A].source===d)return this.fire(new s.j(new Error(`Source "${d}" cannot be removed while layer "${A}" is using it.`)));const y=this.sourceCaches[d];delete this.sourceCaches[d],delete this._updatedSources[d],y.fire(new s.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:d})),y.setEventedParent(null),y.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(d,y){if(this._checkLoaded(),this.sourceCaches[d]===void 0)throw new Error(`There is no source with this ID=${d}`);const A=this.sourceCaches[d].getSource();if(A.type!=="geojson")throw new Error(`geojsonSource.type is ${A.type}, which is !== 'geojson`);A.setData(y),this._changed=!0}getSource(d){return this.sourceCaches[d]&&this.sourceCaches[d].getSource()}addLayer(d,y,A={}){this._checkLoaded();const k=d.id;if(this.getLayer(k))return void this.fire(new s.j(new Error(`Layer "${k}" already exists on this map.`)));let D;if(d.type==="custom"){if(Yr(this,s.aF(d)))return;D=s.aC(d)}else{if("source"in d&&typeof d.source=="object"&&(this.addSource(k,d.source),d=s.aD(d),d=s.e(d,{source:k})),this._validate(s.y.layer,`layers.${k}`,d,{arrayIndex:-1},A))return;D=s.aC(d),this._validateLayer(D),D.setEventedParent(this,{layer:{id:k}})}const H=y?this._order.indexOf(y):this._order.length;if(y&&H===-1)this.fire(new s.j(new Error(`Cannot add layer "${k}" before non-existing layer "${y}".`)));else{if(this._order.splice(H,0,k),this._layerOrderChanged=!0,this._layers[k]=D,this._removedLayers[k]&&D.source&&D.type!=="custom"){const G=this._removedLayers[k];delete this._removedLayers[k],G.type!==D.type?this._updatedSources[D.source]="clear":(this._updatedSources[D.source]="reload",this.sourceCaches[D.source].pause())}this._updateLayer(D),D.onAdd&&D.onAdd(this.map)}}moveLayer(d,y){if(this._checkLoaded(),this._changed=!0,!this._layers[d])return void this.fire(new s.j(new Error(`The layer '${d}' does not exist in the map's style and cannot be moved.`)));if(d===y)return;const A=this._order.indexOf(d);this._order.splice(A,1);const k=y?this._order.indexOf(y):this._order.length;y&&k===-1?this.fire(new s.j(new Error(`Cannot move layer "${d}" before non-existing layer "${y}".`))):(this._order.splice(k,0,d),this._layerOrderChanged=!0)}removeLayer(d){this._checkLoaded();const y=this._layers[d];if(!y)return void this.fire(new s.j(new Error(`Cannot remove non-existing layer "${d}".`)));y.setEventedParent(null);const A=this._order.indexOf(d);this._order.splice(A,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[d]=y,delete this._layers[d],this._serializedLayers&&delete this._serializedLayers[d],delete this._updatedLayers[d],delete this._updatedPaintProps[d],y.onRemove&&y.onRemove(this.map)}getLayer(d){return this._layers[d]}getLayersOrder(){return[...this._order]}hasLayer(d){return d in this._layers}setLayerZoomRange(d,y,A){this._checkLoaded();const k=this.getLayer(d);k?k.minzoom===y&&k.maxzoom===A||(y!=null&&(k.minzoom=y),A!=null&&(k.maxzoom=A),this._updateLayer(k)):this.fire(new s.j(new Error(`Cannot set the zoom range of non-existing layer "${d}".`)))}setFilter(d,y,A={}){this._checkLoaded();const k=this.getLayer(d);if(k){if(!s.aG(k.filter,y))return y==null?(k.filter=void 0,void this._updateLayer(k)):void(this._validate(s.y.filter,`layers.${k.id}.filter`,y,null,A)||(k.filter=s.aD(y),this._updateLayer(k)))}else this.fire(new s.j(new Error(`Cannot filter non-existing layer "${d}".`)))}getFilter(d){return s.aD(this.getLayer(d).filter)}setLayoutProperty(d,y,A,k={}){this._checkLoaded();const D=this.getLayer(d);D?s.aG(D.getLayoutProperty(y),A)||(D.setLayoutProperty(y,A,k),this._updateLayer(D)):this.fire(new s.j(new Error(`Cannot style non-existing layer "${d}".`)))}getLayoutProperty(d,y){const A=this.getLayer(d);if(A)return A.getLayoutProperty(y);this.fire(new s.j(new Error(`Cannot get style of non-existing layer "${d}".`)))}setPaintProperty(d,y,A,k={}){this._checkLoaded();const D=this.getLayer(d);D?s.aG(D.getPaintProperty(y),A)||(D.setPaintProperty(y,A,k)&&this._updateLayer(D),this._changed=!0,this._updatedPaintProps[d]=!0):this.fire(new s.j(new Error(`Cannot style non-existing layer "${d}".`)))}getPaintProperty(d,y){return this.getLayer(d).getPaintProperty(y)}setFeatureState(d,y){this._checkLoaded();const A=d.source,k=d.sourceLayer,D=this.sourceCaches[A];if(D===void 0)return void this.fire(new s.j(new Error(`The source '${A}' does not exist in the map's style.`)));const H=D.getSource().type;H==="geojson"&&k?this.fire(new s.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):H!=="vector"||k?(d.id===void 0&&this.fire(new s.j(new Error("The feature id parameter must be provided."))),D.setFeatureState(k,d.id,y)):this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(d,y){this._checkLoaded();const A=d.source,k=this.sourceCaches[A];if(k===void 0)return void this.fire(new s.j(new Error(`The source '${A}' does not exist in the map's style.`)));const D=k.getSource().type,H=D==="vector"?d.sourceLayer:void 0;D!=="vector"||H?y&&typeof d.id!="string"&&typeof d.id!="number"?this.fire(new s.j(new Error("A feature id is required to remove its specific state property."))):k.removeFeatureState(H,d.id,y):this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(d){this._checkLoaded();const y=d.source,A=d.sourceLayer,k=this.sourceCaches[y];if(k!==void 0)return k.getSource().type!=="vector"||A?(d.id===void 0&&this.fire(new s.j(new Error("The feature id parameter must be provided."))),k.getFeatureState(A,d.id)):void this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.j(new Error(`The source '${y}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const d=s.aH(this.sourceCaches,D=>D.serialize()),y=this._serializeByIds(this._order),A=this.map.getTerrain()||void 0,k=this.stylesheet;return s.aI({version:k.version,name:k.name,metadata:k.metadata,light:k.light,center:k.center,zoom:k.zoom,bearing:k.bearing,pitch:k.pitch,sprite:k.sprite,glyphs:k.glyphs,transition:k.transition,sources:d,layers:y,terrain:A},D=>D!==void 0)}_updateLayer(d){this._updatedLayers[d.id]=!0,d.source&&!this._updatedSources[d.source]&&this.sourceCaches[d.source].getSource().type!=="raster"&&(this._updatedSources[d.source]="reload",this.sourceCaches[d.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(d){const y=H=>this._layers[H].type==="fill-extrusion",A={},k=[];for(let H=this._order.length-1;H>=0;H--){const G=this._order[H];if(y(G)){A[G]=H;for(const K of d){const ee=K[G];if(ee)for(const re of ee)k.push(re)}}}k.sort((H,G)=>G.intersectionZ-H.intersectionZ);const D=[];for(let H=this._order.length-1;H>=0;H--){const G=this._order[H];if(y(G))for(let K=k.length-1;K>=0;K--){const ee=k[K].feature;if(A[ee.layer.id]<H)break;D.push(ee),k.pop()}else for(const K of d){const ee=K[G];if(ee)for(const re of ee)D.push(re.feature)}}return D}queryRenderedFeatures(d,y,A){y&&y.filter&&this._validate(s.y.filter,"queryRenderedFeatures.filter",y.filter,null,y);const k={};if(y&&y.layers){if(!Array.isArray(y.layers))return this.fire(new s.j(new Error("parameters.layers must be an Array."))),[];for(const G of y.layers){const K=this._layers[G];if(!K)return this.fire(new s.j(new Error(`The layer '${G}' does not exist in the map's style and cannot be queried for features.`))),[];k[K.source]=!0}}const D=[];y.availableImages=this._availableImages;const H=this._serializedAllLayers();for(const G in this.sourceCaches)y.layers&&!k[G]||D.push(Ct(this.sourceCaches[G],this._layers,H,d,y,A));return this.placement&&D.push(function(G,K,ee,re,se,be,Le){const Re={},$e=be.queryRenderedSymbols(re),ke=[];for(const at of Object.keys($e).map(Number))ke.push(Le[at]);ke.sort(Bt);for(const at of ke){const Mt=at.featureIndex.lookupSymbolFeatures($e[at.bucketInstanceId],K,at.bucketIndex,at.sourceLayerIndex,se.filter,se.layers,se.availableImages,G);for(const Ge in Mt){const ft=Re[Ge]=Re[Ge]||[],At=Mt[Ge];At.sort((Pt,qt)=>{const wt=at.featureSortOrder;if(wt){const Xt=wt.indexOf(Pt.featureIndex);return wt.indexOf(qt.featureIndex)-Xt}return qt.featureIndex-Pt.featureIndex});for(const Pt of At)ft.push(Pt)}}for(const at in Re)Re[at].forEach(Mt=>{const Ge=Mt.feature,ft=ee[G[at].source].getFeatureState(Ge.layer["source-layer"],Ge.id);Ge.source=Ge.layer.source,Ge.layer["source-layer"]&&(Ge.sourceLayer=Ge.layer["source-layer"]),Ge.state=ft});return Re}(this._layers,H,this.sourceCaches,d,y,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(D)}querySourceFeatures(d,y){y&&y.filter&&this._validate(s.y.filter,"querySourceFeatures.filter",y.filter,null,y);const A=this.sourceCaches[d];return A?function(k,D){const H=k.getRenderableIds().map(ee=>k.getTileByID(ee)),G=[],K={};for(let ee=0;ee<H.length;ee++){const re=H[ee],se=re.tileID.canonical.key;K[se]||(K[se]=!0,re.querySourceFeatures(G,D))}return G}(A,y):[]}addSourceType(d,y,A){return ot(d)?A(new Error(`A source type called "${d}" already exists.`)):(((k,D)=>{et[k]=D})(d,y),y.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:d,url:y.workerSourceURL},A):A(null,null))}getLight(){return this.light.getLight()}setLight(d,y={}){this._checkLoaded();const A=this.light.getLight();let k=!1;for(const H in d)if(!s.aG(d[H],A[H])){k=!0;break}if(!k)return;const D={now:s.h.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(d,y),this.light.updateTransitions(D)}_validate(d,y,A,k,D={}){return(!D||D.validate!==!1)&&Yr(this,d.call(s.y,s.e({key:y,style:this.serialize(),value:A,styleSpec:s.v},k)))}_remove(d=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const y in this._layers)this._layers[y].setEventedParent(null);for(const y in this.sourceCaches){const A=this.sourceCaches[y];A.setEventedParent(null),A.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(d)}_clearSource(d){this.sourceCaches[d].clearTiles()}_reloadSource(d){this.sourceCaches[d].resume(),this.sourceCaches[d].reload()}_updateSources(d){for(const y in this.sourceCaches)this.sourceCaches[y].update(d,this.map.terrain)}_generateCollisionBoxes(){for(const d in this.sourceCaches)this._reloadSource(d)}_updatePlacement(d,y,A,k,D=!1){let H=!1,G=!1;const K={};for(const ee of this._order){const re=this._layers[ee];if(re.type!=="symbol")continue;if(!K[re.source]){const be=this.sourceCaches[re.source];K[re.source]=be.getRenderableIds(!0).map(Le=>be.getTileByID(Le)).sort((Le,Re)=>Re.tileID.overscaledZ-Le.tileID.overscaledZ||(Le.tileID.isLessThan(Re.tileID)?-1:1))}const se=this.crossTileSymbolIndex.addLayer(re,K[re.source],d.center.lng);H=H||se}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((D=D||this._layerOrderChanged||A===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.h.now(),d.zoom))&&(this.pauseablePlacement=new fr(d,this.map.terrain,this._order,D,y,A,k,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,K),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.h.now()),G=!0),H&&this.pauseablePlacement.placement.setStale()),G||H)for(const ee of this._order){const re=this._layers[ee];re.type==="symbol"&&this.placement.updateLayerOpacities(re,K[re.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.h.now())}_releaseSymbolFadeTiles(){for(const d in this.sourceCaches)this.sourceCaches[d].releaseSymbolFadeTiles()}getImages(d,y,A){this.imageManager.getImages(y.icons,A),this._updateTilesForChangedImages();const k=this.sourceCaches[y.source];k&&k.setDependencies(y.tileID.key,y.type,y.icons)}getGlyphs(d,y,A){this.glyphManager.getGlyphs(y.stacks,A);const k=this.sourceCaches[y.source];k&&k.setDependencies(y.tileID.key,y.type,[""])}getResource(d,y,A){return s.m(y,A)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(d,y={}){this._checkLoaded(),d&&this._validate(s.y.glyphs,"glyphs",d,null,y)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=d,this.glyphManager.entries={},this.glyphManager.setURL(d))}addSprite(d,y,A={},k){this._checkLoaded();const D=[{id:d,url:y}],H=[...U(this.stylesheet.sprite),...D];this._validate(s.y.sprite,"sprite",H,null,A)||(this.stylesheet.sprite=H,this._loadSprite(D,!0,k))}removeSprite(d){this._checkLoaded();const y=U(this.stylesheet.sprite);if(y.find(A=>A.id===d)){if(this._spritesImagesIds[d])for(const A of this._spritesImagesIds[d])this.imageManager.removeImage(A),this._changedImages[A]=!0;y.splice(y.findIndex(A=>A.id===d),1),this.stylesheet.sprite=y.length>0?y:void 0,delete this._spritesImagesIds[d],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}else this.fire(new s.j(new Error(`Sprite "${d}" doesn't exists on this map.`)))}getSprite(){return U(this.stylesheet.sprite)}setSprite(d,y={},A){this._checkLoaded(),d&&this._validate(s.y.sprite,"sprite",d,null,y)||(this.stylesheet.sprite=d,d?this._loadSprite(d,!0,A):(this._unloadSprite(),A&&A(null)))}}tr.registerForPluginStateChange=s.aK;var Li=s.Q([{name:"a_pos",type:"Int16",components:2}]),Ns="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Ur={prelude:hr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:hr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:hr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:hr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:hr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:hr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:hr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:hr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:hr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:hr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:hr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:hr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:hr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:hr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:hr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:hr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:hr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:hr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:hr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:hr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:hr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:hr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:hr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:hr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:hr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:hr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:hr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Ns),terrainDepth:hr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Ns),terrainCoords:hr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Ns)};function hr(L,d){const y=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,A=d.match(/attribute ([\w]+) ([\w]+)/g),k=L.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),D=d.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),H=D?D.concat(k):k,G={};return{fragmentSource:L=L.replace(y,(K,ee,re,se,be)=>(G[be]=!0,ee==="define"?`
#ifndef HAS_UNIFORM_u_${be}
varying ${re} ${se} ${be};
#else
uniform ${re} ${se} u_${be};
#endif
`:`
#ifdef HAS_UNIFORM_u_${be}
    ${re} ${se} ${be} = u_${be};
#endif
`)),vertexSource:d=d.replace(y,(K,ee,re,se,be)=>{const Le=se==="float"?"vec2":"vec4",Re=be.match(/color/)?"color":Le;return G[be]?ee==="define"?`
#ifndef HAS_UNIFORM_u_${be}
uniform lowp float u_${be}_t;
attribute ${re} ${Le} a_${be};
varying ${re} ${se} ${be};
#else
uniform ${re} ${se} u_${be};
#endif
`:Re==="vec4"?`
#ifndef HAS_UNIFORM_u_${be}
    ${be} = a_${be};
#else
    ${re} ${se} ${be} = u_${be};
#endif
`:`
#ifndef HAS_UNIFORM_u_${be}
    ${be} = unpack_mix_${Re}(a_${be}, u_${be}_t);
#else
    ${re} ${se} ${be} = u_${be};
#endif
`:ee==="define"?`
#ifndef HAS_UNIFORM_u_${be}
uniform lowp float u_${be}_t;
attribute ${re} ${Le} a_${be};
#else
uniform ${re} ${se} u_${be};
#endif
`:Re==="vec4"?`
#ifndef HAS_UNIFORM_u_${be}
    ${re} ${se} ${be} = a_${be};
#else
    ${re} ${se} ${be} = u_${be};
#endif
`:`
#ifndef HAS_UNIFORM_u_${be}
    ${re} ${se} ${be} = unpack_mix_${Re}(a_${be}, u_${be}_t);
#else
    ${re} ${se} ${be} = u_${be};
#endif
`}),staticAttributes:A,staticUniforms:H}}class Si{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(d,y,A,k,D,H,G,K,ee){this.context=d;let re=this.boundPaintVertexBuffers.length!==k.length;for(let se=0;!re&&se<k.length;se++)this.boundPaintVertexBuffers[se]!==k[se]&&(re=!0);!this.vao||this.boundProgram!==y||this.boundLayoutVertexBuffer!==A||re||this.boundIndexBuffer!==D||this.boundVertexOffset!==H||this.boundDynamicVertexBuffer!==G||this.boundDynamicVertexBuffer2!==K||this.boundDynamicVertexBuffer3!==ee?this.freshBind(y,A,k,D,H,G,K,ee):(d.bindVertexArray.set(this.vao),G&&G.bind(),D&&D.dynamicDraw&&D.bind(),K&&K.bind(),ee&&ee.bind())}freshBind(d,y,A,k,D,H,G,K){const ee=d.numAttributes,re=this.context,se=re.gl;this.vao&&this.destroy(),this.vao=re.createVertexArray(),re.bindVertexArray.set(this.vao),this.boundProgram=d,this.boundLayoutVertexBuffer=y,this.boundPaintVertexBuffers=A,this.boundIndexBuffer=k,this.boundVertexOffset=D,this.boundDynamicVertexBuffer=H,this.boundDynamicVertexBuffer2=G,this.boundDynamicVertexBuffer3=K,y.enableAttributes(se,d);for(const be of A)be.enableAttributes(se,d);H&&H.enableAttributes(se,d),G&&G.enableAttributes(se,d),K&&K.enableAttributes(se,d),y.bind(),y.setVertexAttribPointers(se,d,D);for(const be of A)be.bind(),be.setVertexAttribPointers(se,d,D);H&&(H.bind(),H.setVertexAttribPointers(se,d,D)),k&&k.bind(),G&&(G.bind(),G.setVertexAttribPointers(se,d,D)),K&&(K.bind(),K.setVertexAttribPointers(se,d,D)),re.currentNumAttributes=ee}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Zr(L){const d=[];for(let y=0;y<L.length;y++){if(L[y]===null)continue;const A=L[y].split(" ");d.push(A.pop())}return d}class Rc{constructor(d,y,A,k,D,H){const G=d.gl;this.program=G.createProgram();const K=Zr(y.staticAttributes),ee=A?A.getBinderAttributes():[],re=K.concat(ee),se=Ur.prelude.staticUniforms?Zr(Ur.prelude.staticUniforms):[],be=y.staticUniforms?Zr(y.staticUniforms):[],Le=A?A.getBinderUniforms():[],Re=se.concat(be).concat(Le),$e=[];for(const Pt of Re)$e.indexOf(Pt)<0&&$e.push(Pt);const ke=A?A.defines():[];D&&ke.push("#define OVERDRAW_INSPECTOR;"),H&&ke.push("#define TERRAIN3D;");const at=ke.concat(Ur.prelude.fragmentSource,y.fragmentSource).join(`
`),Mt=ke.concat(Ur.prelude.vertexSource,y.vertexSource).join(`
`),Ge=G.createShader(G.FRAGMENT_SHADER);if(G.isContextLost())return void(this.failedToCreate=!0);if(G.shaderSource(Ge,at),G.compileShader(Ge),!G.getShaderParameter(Ge,G.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${G.getShaderInfoLog(Ge)}`);G.attachShader(this.program,Ge);const ft=G.createShader(G.VERTEX_SHADER);if(G.isContextLost())return void(this.failedToCreate=!0);if(G.shaderSource(ft,Mt),G.compileShader(ft),!G.getShaderParameter(ft,G.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${G.getShaderInfoLog(ft)}`);G.attachShader(this.program,ft),this.attributes={};const At={};this.numAttributes=re.length;for(let Pt=0;Pt<this.numAttributes;Pt++)re[Pt]&&(G.bindAttribLocation(this.program,Pt,re[Pt]),this.attributes[re[Pt]]=Pt);if(G.linkProgram(this.program),!G.getProgramParameter(this.program,G.LINK_STATUS))throw new Error(`Program failed to link: ${G.getProgramInfoLog(this.program)}`);G.deleteShader(ft),G.deleteShader(Ge);for(let Pt=0;Pt<$e.length;Pt++){const qt=$e[Pt];if(qt&&!At[qt]){const wt=G.getUniformLocation(this.program,qt);wt&&(At[qt]=wt)}}this.fixedUniforms=k(d,At),this.terrainUniforms=((Pt,qt)=>({u_depth:new s.aL(Pt,qt.u_depth),u_terrain:new s.aL(Pt,qt.u_terrain),u_terrain_dim:new s.aM(Pt,qt.u_terrain_dim),u_terrain_matrix:new s.aN(Pt,qt.u_terrain_matrix),u_terrain_unpack:new s.aO(Pt,qt.u_terrain_unpack),u_terrain_exaggeration:new s.aM(Pt,qt.u_terrain_exaggeration)}))(d,At),this.binderUniforms=A?A.getUniforms(d,At):[]}draw(d,y,A,k,D,H,G,K,ee,re,se,be,Le,Re,$e,ke,at,Mt){const Ge=d.gl;if(this.failedToCreate)return;if(d.program.set(this.program),d.setDepthMode(A),d.setStencilMode(k),d.setColorMode(D),d.setCullFace(H),K){d.activeTexture.set(Ge.TEXTURE2),Ge.bindTexture(Ge.TEXTURE_2D,K.depthTexture),d.activeTexture.set(Ge.TEXTURE3),Ge.bindTexture(Ge.TEXTURE_2D,K.texture);for(const At in this.terrainUniforms)this.terrainUniforms[At].set(K[At])}for(const At in this.fixedUniforms)this.fixedUniforms[At].set(G[At]);$e&&$e.setUniforms(d,this.binderUniforms,Le,{zoom:Re});let ft=0;switch(y){case Ge.LINES:ft=2;break;case Ge.TRIANGLES:ft=3;break;case Ge.LINE_STRIP:ft=1}for(const At of be.get()){const Pt=At.vaos||(At.vaos={});(Pt[ee]||(Pt[ee]=new Si)).bind(d,this,re,$e?$e.getPaintVertexBuffers():[],se,At.vertexOffset,ke,at,Mt),Ge.drawElements(y,At.primitiveLength*ft,Ge.UNSIGNED_SHORT,At.primitiveOffset*ft*2)}}}function hi(L,d,y){const A=1/qe(y,1,d.transform.tileZoom),k=Math.pow(2,y.tileID.overscaledZ),D=y.tileSize*Math.pow(2,d.transform.tileZoom)/k,H=D*(y.tileID.canonical.x+y.tileID.wrap*k),G=D*y.tileID.canonical.y;return{u_image:0,u_texsize:y.imageAtlasTexture.size,u_scale:[A,L.fromScale,L.toScale],u_fade:L.t,u_pixel_coord_upper:[H>>16,G>>16],u_pixel_coord_lower:[65535&H,65535&G]}}const Eu=(L,d,y,A)=>{const k=d.style.light,D=k.properties.get("position"),H=[D.x,D.y,D.z],G=function(){var ee=new s.A(9);return s.A!=Float32Array&&(ee[1]=0,ee[2]=0,ee[3]=0,ee[5]=0,ee[6]=0,ee[7]=0),ee[0]=1,ee[4]=1,ee[8]=1,ee}();k.properties.get("anchor")==="viewport"&&function(ee,re){var se=Math.sin(re),be=Math.cos(re);ee[0]=be,ee[1]=se,ee[2]=0,ee[3]=-se,ee[4]=be,ee[5]=0,ee[6]=0,ee[7]=0,ee[8]=1}(G,-d.transform.angle),function(ee,re,se){var be=re[0],Le=re[1],Re=re[2];ee[0]=be*se[0]+Le*se[3]+Re*se[6],ee[1]=be*se[1]+Le*se[4]+Re*se[7],ee[2]=be*se[2]+Le*se[5]+Re*se[8]}(H,H,G);const K=k.properties.get("color");return{u_matrix:L,u_lightpos:H,u_lightintensity:k.properties.get("intensity"),u_lightcolor:[K.r,K.g,K.b],u_vertical_gradient:+y,u_opacity:A}},To=(L,d,y,A,k,D,H)=>s.e(Eu(L,d,y,A),hi(D,d,H),{u_height_factor:-Math.pow(2,k.overscaledZ)/H.tileSize/8}),$h=L=>({u_matrix:L}),ky=(L,d,y,A)=>s.e($h(L),hi(y,d,A)),fm=(L,d)=>({u_matrix:L,u_world:d}),Sd=(L,d,y,A,k)=>s.e(ky(L,d,y,A),{u_world:k}),Sl=(L,d,y,A)=>{const k=L.transform;let D,H;if(A.paint.get("circle-pitch-alignment")==="map"){const G=qe(y,1,k.zoom);D=!0,H=[G,G]}else D=!1,H=k.pixelsToGLUnits;return{u_camera_to_center_distance:k.cameraToCenterDistance,u_scale_with_map:+(A.paint.get("circle-pitch-scale")==="map"),u_matrix:L.translatePosMatrix(d.posMatrix,y,A.paint.get("circle-translate"),A.paint.get("circle-translate-anchor")),u_pitch_with_map:+D,u_device_pixel_ratio:L.pixelRatio,u_extrude_scale:H}},Md=(L,d,y)=>{const A=qe(y,1,d.zoom),k=Math.pow(2,d.zoom-y.tileID.overscaledZ),D=y.tileID.overscaleFactor();return{u_matrix:L,u_camera_to_center_distance:d.cameraToCenterDistance,u_pixels_to_tile_units:A,u_extrude_scale:[d.pixelsToGLUnits[0]/(A*k),d.pixelsToGLUnits[1]/(A*k)],u_overscale_factor:D}},Tu=(L,d,y=1)=>({u_matrix:L,u_color:d,u_overlay:0,u_overlay_scale:y}),J0=L=>({u_matrix:L}),W1=(L,d,y,A)=>({u_matrix:L,u_extrude_scale:qe(d,1,y),u_intensity:A});function jh(L,d){const y=Math.pow(2,d.canonical.z),A=d.canonical.y;return[new s.U(0,A/y).toLngLat().lat,new s.U(0,(A+1)/y).toLngLat().lat]}const Uh=(L,d,y,A)=>{const k=L.transform;return{u_matrix:Vh(L,d,y,A),u_ratio:1/qe(d,1,k.zoom),u_device_pixel_ratio:L.pixelRatio,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]]}},Mf=(L,d,y,A,k)=>s.e(Uh(L,d,y,k),{u_image:0,u_image_height:A}),H1=(L,d,y,A,k)=>{const D=L.transform,H=Xr(d,D);return{u_matrix:Vh(L,d,y,k),u_texsize:d.imageAtlasTexture.size,u_ratio:1/qe(d,1,D.zoom),u_device_pixel_ratio:L.pixelRatio,u_image:0,u_scale:[H,A.fromScale,A.toScale],u_fade:A.t,u_units_to_pixels:[1/D.pixelsToGLUnits[0],1/D.pixelsToGLUnits[1]]}},hm=(L,d,y,A,k,D)=>{const H=L.lineAtlas,G=Xr(d,L.transform),K=y.layout.get("line-cap")==="round",ee=H.getDash(A.from,K),re=H.getDash(A.to,K),se=ee.width*k.fromScale,be=re.width*k.toScale;return s.e(Uh(L,d,y,D),{u_patternscale_a:[G/se,-ee.height/2],u_patternscale_b:[G/be,-re.height/2],u_sdfgamma:H.width/(256*Math.min(se,be)*L.pixelRatio)/2,u_image:0,u_tex_y_a:ee.y,u_tex_y_b:re.y,u_mix:k.t})};function Xr(L,d){return 1/qe(L,1,d.tileZoom)}function Vh(L,d,y,A){return L.translatePosMatrix(A?A.posMatrix:d.tileID.posMatrix,d,y.paint.get("line-translate"),y.paint.get("line-translate-anchor"))}const pm=(L,d,y,A,k)=>{return{u_matrix:L,u_tl_parent:d,u_scale_parent:y,u_buffer_scale:1,u_fade_t:A.mix,u_opacity:A.opacity*k.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:k.paint.get("raster-brightness-min"),u_brightness_high:k.paint.get("raster-brightness-max"),u_saturation_factor:(H=k.paint.get("raster-saturation"),H>0?1-1/(1.001-H):-H),u_contrast_factor:(D=k.paint.get("raster-contrast"),D>0?1/(1-D):1+D),u_spin_weights:Iy(k.paint.get("raster-hue-rotate"))};var D,H};function Iy(L){L*=Math.PI/180;const d=Math.sin(L),y=Math.cos(L);return[(2*y+1)/3,(-Math.sqrt(3)*d-y+1)/3,(Math.sqrt(3)*d-y+1)/3]}const Ry=(L,d,y,A,k,D,H,G,K,ee)=>{const re=k.transform;return{u_is_size_zoom_constant:+(L==="constant"||L==="source"),u_is_size_feature_constant:+(L==="constant"||L==="camera"),u_size_t:d?d.uSizeT:0,u_size:d?d.uSize:0,u_camera_to_center_distance:re.cameraToCenterDistance,u_pitch:re.pitch/360*2*Math.PI,u_rotate_symbol:+y,u_aspect_ratio:re.width/re.height,u_fade_change:k.options.fadeDuration?k.symbolFadeChange:1,u_matrix:D,u_label_plane_matrix:H,u_coord_matrix:G,u_is_text:+K,u_pitch_with_map:+A,u_texsize:ee,u_texture:0}},Oy=(L,d,y,A,k,D,H,G,K,ee,re)=>{const se=k.transform;return s.e(Ry(L,d,y,A,k,D,H,G,K,ee),{u_gamma_scale:A?Math.cos(se._pitch)*se.cameraToCenterDistance:1,u_device_pixel_ratio:k.pixelRatio,u_is_halo:+re})},Ui=(L,d,y,A,k,D,H,G,K,ee)=>s.e(Oy(L,d,y,A,k,D,H,G,!0,K,!0),{u_texsize_icon:ee,u_texture_icon:1}),Ef=(L,d,y)=>({u_matrix:L,u_opacity:d,u_color:y}),Ua=(L,d,y,A,k,D)=>s.e(function(H,G,K,ee){const re=K.imageManager.getPattern(H.from.toString()),se=K.imageManager.getPattern(H.to.toString()),{width:be,height:Le}=K.imageManager.getPixelSize(),Re=Math.pow(2,ee.tileID.overscaledZ),$e=ee.tileSize*Math.pow(2,K.transform.tileZoom)/Re,ke=$e*(ee.tileID.canonical.x+ee.tileID.wrap*Re),at=$e*ee.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:re.tl,u_pattern_br_a:re.br,u_pattern_tl_b:se.tl,u_pattern_br_b:se.br,u_texsize:[be,Le],u_mix:G.t,u_pattern_size_a:re.displaySize,u_pattern_size_b:se.displaySize,u_scale_a:G.fromScale,u_scale_b:G.toScale,u_tile_units_to_pixels:1/qe(ee,1,K.transform.tileZoom),u_pixel_coord_upper:[ke>>16,at>>16],u_pixel_coord_lower:[65535&ke,65535&at]}}(A,D,y,k),{u_matrix:L,u_opacity:d}),Tf={fillExtrusion:(L,d)=>({u_matrix:new s.aN(L,d.u_matrix),u_lightpos:new s.aP(L,d.u_lightpos),u_lightintensity:new s.aM(L,d.u_lightintensity),u_lightcolor:new s.aP(L,d.u_lightcolor),u_vertical_gradient:new s.aM(L,d.u_vertical_gradient),u_opacity:new s.aM(L,d.u_opacity)}),fillExtrusionPattern:(L,d)=>({u_matrix:new s.aN(L,d.u_matrix),u_lightpos:new s.aP(L,d.u_lightpos),u_lightintensity:new s.aM(L,d.u_lightintensity),u_lightcolor:new s.aP(L,d.u_lightcolor),u_vertical_gradient:new s.aM(L,d.u_vertical_gradient),u_height_factor:new s.aM(L,d.u_height_factor),u_image:new s.aL(L,d.u_image),u_texsize:new s.aQ(L,d.u_texsize),u_pixel_coord_upper:new s.aQ(L,d.u_pixel_coord_upper),u_pixel_coord_lower:new s.aQ(L,d.u_pixel_coord_lower),u_scale:new s.aP(L,d.u_scale),u_fade:new s.aM(L,d.u_fade),u_opacity:new s.aM(L,d.u_opacity)}),fill:(L,d)=>({u_matrix:new s.aN(L,d.u_matrix)}),fillPattern:(L,d)=>({u_matrix:new s.aN(L,d.u_matrix),u_image:new s.aL(L,d.u_image),u_texsize:new s.aQ(L,d.u_texsize),u_pixel_coord_upper:new s.aQ(L,d.u_pixel_coord_upper),u_pixel_coord_lower:new s.aQ(L,d.u_pixel_coord_lower),u_scale:new s.aP(L,d.u_scale),u_fade:new s.aM(L,d.u_fade)}),fillOutline:(L,d)=>({u_matrix:new s.aN(L,d.u_matrix),u_world:new s.aQ(L,d.u_world)}),fillOutlinePattern:(L,d)=>({u_matrix:new s.aN(L,d.u_matrix),u_world:new s.aQ(L,d.u_world),u_image:new s.aL(L,d.u_image),u_texsize:new s.aQ(L,d.u_texsize),u_pixel_coord_upper:new s.aQ(L,d.u_pixel_coord_upper),u_pixel_coord_lower:new s.aQ(L,d.u_pixel_coord_lower),u_scale:new s.aP(L,d.u_scale),u_fade:new s.aM(L,d.u_fade)}),circle:(L,d)=>({u_camera_to_center_distance:new s.aM(L,d.u_camera_to_center_distance),u_scale_with_map:new s.aL(L,d.u_scale_with_map),u_pitch_with_map:new s.aL(L,d.u_pitch_with_map),u_extrude_scale:new s.aQ(L,d.u_extrude_scale),u_device_pixel_ratio:new s.aM(L,d.u_device_pixel_ratio),u_matrix:new s.aN(L,d.u_matrix)}),collisionBox:(L,d)=>({u_matrix:new s.aN(L,d.u_matrix),u_camera_to_center_distance:new s.aM(L,d.u_camera_to_center_distance),u_pixels_to_tile_units:new s.aM(L,d.u_pixels_to_tile_units),u_extrude_scale:new s.aQ(L,d.u_extrude_scale),u_overscale_factor:new s.aM(L,d.u_overscale_factor)}),collisionCircle:(L,d)=>({u_matrix:new s.aN(L,d.u_matrix),u_inv_matrix:new s.aN(L,d.u_inv_matrix),u_camera_to_center_distance:new s.aM(L,d.u_camera_to_center_distance),u_viewport_size:new s.aQ(L,d.u_viewport_size)}),debug:(L,d)=>({u_color:new s.aR(L,d.u_color),u_matrix:new s.aN(L,d.u_matrix),u_overlay:new s.aL(L,d.u_overlay),u_overlay_scale:new s.aM(L,d.u_overlay_scale)}),clippingMask:(L,d)=>({u_matrix:new s.aN(L,d.u_matrix)}),heatmap:(L,d)=>({u_extrude_scale:new s.aM(L,d.u_extrude_scale),u_intensity:new s.aM(L,d.u_intensity),u_matrix:new s.aN(L,d.u_matrix)}),heatmapTexture:(L,d)=>({u_matrix:new s.aN(L,d.u_matrix),u_world:new s.aQ(L,d.u_world),u_image:new s.aL(L,d.u_image),u_color_ramp:new s.aL(L,d.u_color_ramp),u_opacity:new s.aM(L,d.u_opacity)}),hillshade:(L,d)=>({u_matrix:new s.aN(L,d.u_matrix),u_image:new s.aL(L,d.u_image),u_latrange:new s.aQ(L,d.u_latrange),u_light:new s.aQ(L,d.u_light),u_shadow:new s.aR(L,d.u_shadow),u_highlight:new s.aR(L,d.u_highlight),u_accent:new s.aR(L,d.u_accent)}),hillshadePrepare:(L,d)=>({u_matrix:new s.aN(L,d.u_matrix),u_image:new s.aL(L,d.u_image),u_dimension:new s.aQ(L,d.u_dimension),u_zoom:new s.aM(L,d.u_zoom),u_unpack:new s.aO(L,d.u_unpack)}),line:(L,d)=>({u_matrix:new s.aN(L,d.u_matrix),u_ratio:new s.aM(L,d.u_ratio),u_device_pixel_ratio:new s.aM(L,d.u_device_pixel_ratio),u_units_to_pixels:new s.aQ(L,d.u_units_to_pixels)}),lineGradient:(L,d)=>({u_matrix:new s.aN(L,d.u_matrix),u_ratio:new s.aM(L,d.u_ratio),u_device_pixel_ratio:new s.aM(L,d.u_device_pixel_ratio),u_units_to_pixels:new s.aQ(L,d.u_units_to_pixels),u_image:new s.aL(L,d.u_image),u_image_height:new s.aM(L,d.u_image_height)}),linePattern:(L,d)=>({u_matrix:new s.aN(L,d.u_matrix),u_texsize:new s.aQ(L,d.u_texsize),u_ratio:new s.aM(L,d.u_ratio),u_device_pixel_ratio:new s.aM(L,d.u_device_pixel_ratio),u_image:new s.aL(L,d.u_image),u_units_to_pixels:new s.aQ(L,d.u_units_to_pixels),u_scale:new s.aP(L,d.u_scale),u_fade:new s.aM(L,d.u_fade)}),lineSDF:(L,d)=>({u_matrix:new s.aN(L,d.u_matrix),u_ratio:new s.aM(L,d.u_ratio),u_device_pixel_ratio:new s.aM(L,d.u_device_pixel_ratio),u_units_to_pixels:new s.aQ(L,d.u_units_to_pixels),u_patternscale_a:new s.aQ(L,d.u_patternscale_a),u_patternscale_b:new s.aQ(L,d.u_patternscale_b),u_sdfgamma:new s.aM(L,d.u_sdfgamma),u_image:new s.aL(L,d.u_image),u_tex_y_a:new s.aM(L,d.u_tex_y_a),u_tex_y_b:new s.aM(L,d.u_tex_y_b),u_mix:new s.aM(L,d.u_mix)}),raster:(L,d)=>({u_matrix:new s.aN(L,d.u_matrix),u_tl_parent:new s.aQ(L,d.u_tl_parent),u_scale_parent:new s.aM(L,d.u_scale_parent),u_buffer_scale:new s.aM(L,d.u_buffer_scale),u_fade_t:new s.aM(L,d.u_fade_t),u_opacity:new s.aM(L,d.u_opacity),u_image0:new s.aL(L,d.u_image0),u_image1:new s.aL(L,d.u_image1),u_brightness_low:new s.aM(L,d.u_brightness_low),u_brightness_high:new s.aM(L,d.u_brightness_high),u_saturation_factor:new s.aM(L,d.u_saturation_factor),u_contrast_factor:new s.aM(L,d.u_contrast_factor),u_spin_weights:new s.aP(L,d.u_spin_weights)}),symbolIcon:(L,d)=>({u_is_size_zoom_constant:new s.aL(L,d.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aL(L,d.u_is_size_feature_constant),u_size_t:new s.aM(L,d.u_size_t),u_size:new s.aM(L,d.u_size),u_camera_to_center_distance:new s.aM(L,d.u_camera_to_center_distance),u_pitch:new s.aM(L,d.u_pitch),u_rotate_symbol:new s.aL(L,d.u_rotate_symbol),u_aspect_ratio:new s.aM(L,d.u_aspect_ratio),u_fade_change:new s.aM(L,d.u_fade_change),u_matrix:new s.aN(L,d.u_matrix),u_label_plane_matrix:new s.aN(L,d.u_label_plane_matrix),u_coord_matrix:new s.aN(L,d.u_coord_matrix),u_is_text:new s.aL(L,d.u_is_text),u_pitch_with_map:new s.aL(L,d.u_pitch_with_map),u_texsize:new s.aQ(L,d.u_texsize),u_texture:new s.aL(L,d.u_texture)}),symbolSDF:(L,d)=>({u_is_size_zoom_constant:new s.aL(L,d.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aL(L,d.u_is_size_feature_constant),u_size_t:new s.aM(L,d.u_size_t),u_size:new s.aM(L,d.u_size),u_camera_to_center_distance:new s.aM(L,d.u_camera_to_center_distance),u_pitch:new s.aM(L,d.u_pitch),u_rotate_symbol:new s.aL(L,d.u_rotate_symbol),u_aspect_ratio:new s.aM(L,d.u_aspect_ratio),u_fade_change:new s.aM(L,d.u_fade_change),u_matrix:new s.aN(L,d.u_matrix),u_label_plane_matrix:new s.aN(L,d.u_label_plane_matrix),u_coord_matrix:new s.aN(L,d.u_coord_matrix),u_is_text:new s.aL(L,d.u_is_text),u_pitch_with_map:new s.aL(L,d.u_pitch_with_map),u_texsize:new s.aQ(L,d.u_texsize),u_texture:new s.aL(L,d.u_texture),u_gamma_scale:new s.aM(L,d.u_gamma_scale),u_device_pixel_ratio:new s.aM(L,d.u_device_pixel_ratio),u_is_halo:new s.aL(L,d.u_is_halo)}),symbolTextAndIcon:(L,d)=>({u_is_size_zoom_constant:new s.aL(L,d.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aL(L,d.u_is_size_feature_constant),u_size_t:new s.aM(L,d.u_size_t),u_size:new s.aM(L,d.u_size),u_camera_to_center_distance:new s.aM(L,d.u_camera_to_center_distance),u_pitch:new s.aM(L,d.u_pitch),u_rotate_symbol:new s.aL(L,d.u_rotate_symbol),u_aspect_ratio:new s.aM(L,d.u_aspect_ratio),u_fade_change:new s.aM(L,d.u_fade_change),u_matrix:new s.aN(L,d.u_matrix),u_label_plane_matrix:new s.aN(L,d.u_label_plane_matrix),u_coord_matrix:new s.aN(L,d.u_coord_matrix),u_is_text:new s.aL(L,d.u_is_text),u_pitch_with_map:new s.aL(L,d.u_pitch_with_map),u_texsize:new s.aQ(L,d.u_texsize),u_texsize_icon:new s.aQ(L,d.u_texsize_icon),u_texture:new s.aL(L,d.u_texture),u_texture_icon:new s.aL(L,d.u_texture_icon),u_gamma_scale:new s.aM(L,d.u_gamma_scale),u_device_pixel_ratio:new s.aM(L,d.u_device_pixel_ratio),u_is_halo:new s.aL(L,d.u_is_halo)}),background:(L,d)=>({u_matrix:new s.aN(L,d.u_matrix),u_opacity:new s.aM(L,d.u_opacity),u_color:new s.aR(L,d.u_color)}),backgroundPattern:(L,d)=>({u_matrix:new s.aN(L,d.u_matrix),u_opacity:new s.aM(L,d.u_opacity),u_image:new s.aL(L,d.u_image),u_pattern_tl_a:new s.aQ(L,d.u_pattern_tl_a),u_pattern_br_a:new s.aQ(L,d.u_pattern_br_a),u_pattern_tl_b:new s.aQ(L,d.u_pattern_tl_b),u_pattern_br_b:new s.aQ(L,d.u_pattern_br_b),u_texsize:new s.aQ(L,d.u_texsize),u_mix:new s.aM(L,d.u_mix),u_pattern_size_a:new s.aQ(L,d.u_pattern_size_a),u_pattern_size_b:new s.aQ(L,d.u_pattern_size_b),u_scale_a:new s.aM(L,d.u_scale_a),u_scale_b:new s.aM(L,d.u_scale_b),u_pixel_coord_upper:new s.aQ(L,d.u_pixel_coord_upper),u_pixel_coord_lower:new s.aQ(L,d.u_pixel_coord_lower),u_tile_units_to_pixels:new s.aM(L,d.u_tile_units_to_pixels)}),terrain:(L,d)=>({u_matrix:new s.aN(L,d.u_matrix),u_texture:new s.aL(L,d.u_texture),u_ele_delta:new s.aM(L,d.u_ele_delta)}),terrainDepth:(L,d)=>({u_matrix:new s.aN(L,d.u_matrix),u_ele_delta:new s.aM(L,d.u_ele_delta)}),terrainCoords:(L,d)=>({u_matrix:new s.aN(L,d.u_matrix),u_texture:new s.aL(L,d.u_texture),u_terrain_coords_id:new s.aM(L,d.u_terrain_coords_id),u_ele_delta:new s.aM(L,d.u_ele_delta)})};class mm{constructor(d,y,A){this.context=d;const k=d.gl;this.buffer=k.createBuffer(),this.dynamicDraw=!!A,this.context.unbindVAO(),d.bindElementBuffer.set(this.buffer),k.bufferData(k.ELEMENT_ARRAY_BUFFER,y.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||delete y.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(d){const y=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),y.bufferSubData(y.ELEMENT_ARRAY_BUFFER,0,d.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Cu={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class va{constructor(d,y,A,k){this.length=y.length,this.attributes=A,this.itemSize=y.bytesPerElement,this.dynamicDraw=k,this.context=d;const D=d.gl;this.buffer=D.createBuffer(),d.bindVertexBuffer.set(this.buffer),D.bufferData(D.ARRAY_BUFFER,y.arrayBuffer,this.dynamicDraw?D.DYNAMIC_DRAW:D.STATIC_DRAW),this.dynamicDraw||delete y.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(d){if(d.length!==this.length)throw new Error(`Length of new data is ${d.length}, which doesn't match current length of ${this.length}`);const y=this.context.gl;this.bind(),y.bufferSubData(y.ARRAY_BUFFER,0,d.arrayBuffer)}enableAttributes(d,y){for(let A=0;A<this.attributes.length;A++){const k=y.attributes[this.attributes[A].name];k!==void 0&&d.enableVertexAttribArray(k)}}setVertexAttribPointers(d,y,A){for(let k=0;k<this.attributes.length;k++){const D=this.attributes[k],H=y.attributes[D.name];H!==void 0&&d.vertexAttribPointer(H,D.components,d[Cu[D.type]],!1,this.itemSize,D.offset+this.itemSize*(A||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Cf=new WeakMap;function Au(L){var d;if(Cf.has(L))return Cf.get(L);{const y=(d=L.getParameter(L.VERSION))===null||d===void 0?void 0:d.startsWith("WebGL 2.0");return Cf.set(L,y),y}}class yr{constructor(d){this.gl=d.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(d){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Va extends yr{getDefault(){return s.aT.transparent}set(d){const y=this.current;(d.r!==y.r||d.g!==y.g||d.b!==y.b||d.a!==y.a||this.dirty)&&(this.gl.clearColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)}}class Ts extends yr{getDefault(){return 1}set(d){(d!==this.current||this.dirty)&&(this.gl.clearDepth(d),this.current=d,this.dirty=!1)}}class zs extends yr{getDefault(){return 0}set(d){(d!==this.current||this.dirty)&&(this.gl.clearStencil(d),this.current=d,this.dirty=!1)}}class gm extends yr{getDefault(){return[!0,!0,!0,!0]}set(d){const y=this.current;(d[0]!==y[0]||d[1]!==y[1]||d[2]!==y[2]||d[3]!==y[3]||this.dirty)&&(this.gl.colorMask(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)}}class ym extends yr{getDefault(){return!0}set(d){(d!==this.current||this.dirty)&&(this.gl.depthMask(d),this.current=d,this.dirty=!1)}}class xa extends yr{getDefault(){return 255}set(d){(d!==this.current||this.dirty)&&(this.gl.stencilMask(d),this.current=d,this.dirty=!1)}}class Ly extends yr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(d){const y=this.current;(d.func!==y.func||d.ref!==y.ref||d.mask!==y.mask||this.dirty)&&(this.gl.stencilFunc(d.func,d.ref,d.mask),this.current=d,this.dirty=!1)}}class Af extends yr{getDefault(){const d=this.gl;return[d.KEEP,d.KEEP,d.KEEP]}set(d){const y=this.current;(d[0]!==y[0]||d[1]!==y[1]||d[2]!==y[2]||this.dirty)&&(this.gl.stencilOp(d[0],d[1],d[2]),this.current=d,this.dirty=!1)}}class vm extends yr{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const y=this.gl;d?y.enable(y.STENCIL_TEST):y.disable(y.STENCIL_TEST),this.current=d,this.dirty=!1}}class _a extends yr{getDefault(){return[0,1]}set(d){const y=this.current;(d[0]!==y[0]||d[1]!==y[1]||this.dirty)&&(this.gl.depthRange(d[0],d[1]),this.current=d,this.dirty=!1)}}class Pf extends yr{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const y=this.gl;d?y.enable(y.DEPTH_TEST):y.disable(y.DEPTH_TEST),this.current=d,this.dirty=!1}}class Ed extends yr{getDefault(){return this.gl.LESS}set(d){(d!==this.current||this.dirty)&&(this.gl.depthFunc(d),this.current=d,this.dirty=!1)}}class Td extends yr{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const y=this.gl;d?y.enable(y.BLEND):y.disable(y.BLEND),this.current=d,this.dirty=!1}}class xm extends yr{getDefault(){const d=this.gl;return[d.ONE,d.ZERO]}set(d){const y=this.current;(d[0]!==y[0]||d[1]!==y[1]||this.dirty)&&(this.gl.blendFunc(d[0],d[1]),this.current=d,this.dirty=!1)}}class Pu extends yr{getDefault(){return s.aT.transparent}set(d){const y=this.current;(d.r!==y.r||d.g!==y.g||d.b!==y.b||d.a!==y.a||this.dirty)&&(this.gl.blendColor(d.r,d.g,d.b,d.a),this.current=d,this.dirty=!1)}}class Q0 extends yr{getDefault(){return this.gl.FUNC_ADD}set(d){(d!==this.current||this.dirty)&&(this.gl.blendEquation(d),this.current=d,this.dirty=!1)}}class Dy extends yr{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const y=this.gl;d?y.enable(y.CULL_FACE):y.disable(y.CULL_FACE),this.current=d,this.dirty=!1}}class Ny extends yr{getDefault(){return this.gl.BACK}set(d){(d!==this.current||this.dirty)&&(this.gl.cullFace(d),this.current=d,this.dirty=!1)}}class kf extends yr{getDefault(){return this.gl.CCW}set(d){(d!==this.current||this.dirty)&&(this.gl.frontFace(d),this.current=d,this.dirty=!1)}}class Wa extends yr{getDefault(){return null}set(d){(d!==this.current||this.dirty)&&(this.gl.useProgram(d),this.current=d,this.dirty=!1)}}class ec extends yr{getDefault(){return this.gl.TEXTURE0}set(d){(d!==this.current||this.dirty)&&(this.gl.activeTexture(d),this.current=d,this.dirty=!1)}}class tc extends yr{getDefault(){const d=this.gl;return[0,0,d.drawingBufferWidth,d.drawingBufferHeight]}set(d){const y=this.current;(d[0]!==y[0]||d[1]!==y[1]||d[2]!==y[2]||d[3]!==y[3]||this.dirty)&&(this.gl.viewport(d[0],d[1],d[2],d[3]),this.current=d,this.dirty=!1)}}class If extends yr{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const y=this.gl;y.bindFramebuffer(y.FRAMEBUFFER,d),this.current=d,this.dirty=!1}}class _m extends yr{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const y=this.gl;y.bindRenderbuffer(y.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class Ml extends yr{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const y=this.gl;y.bindTexture(y.TEXTURE_2D,d),this.current=d,this.dirty=!1}}class ba extends yr{getDefault(){return null}set(d){if(d===this.current&&!this.dirty)return;const y=this.gl;y.bindBuffer(y.ARRAY_BUFFER,d),this.current=d,this.dirty=!1}}class Wh extends yr{getDefault(){return null}set(d){const y=this.gl;y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,d),this.current=d,this.dirty=!1}}class zy extends yr{getDefault(){return null}set(d){var y;if(d===this.current&&!this.dirty)return;const A=this.gl;Au(A)?A.bindVertexArray(d):(y=A.getExtension("OES_vertex_array_object"))===null||y===void 0||y.bindVertexArrayOES(d),this.current=d,this.dirty=!1}}class Rf extends yr{getDefault(){return 4}set(d){if(d===this.current&&!this.dirty)return;const y=this.gl;y.pixelStorei(y.UNPACK_ALIGNMENT,d),this.current=d,this.dirty=!1}}class ku extends yr{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const y=this.gl;y.pixelStorei(y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d),this.current=d,this.dirty=!1}}class Fy extends yr{getDefault(){return!1}set(d){if(d===this.current&&!this.dirty)return;const y=this.gl;y.pixelStorei(y.UNPACK_FLIP_Y_WEBGL,d),this.current=d,this.dirty=!1}}class nc extends yr{constructor(d,y){super(d),this.context=d,this.parent=y}getDefault(){return null}}class Oc extends nc{setDirty(){this.dirty=!0}set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const y=this.gl;y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,d,0),this.current=d,this.dirty=!1}}class By extends nc{set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const y=this.gl;y.framebufferRenderbuffer(y.FRAMEBUFFER,y.DEPTH_ATTACHMENT,y.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class bm extends nc{set(d){if(d===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const y=this.gl;y.framebufferRenderbuffer(y.FRAMEBUFFER,y.DEPTH_STENCIL_ATTACHMENT,y.RENDERBUFFER,d),this.current=d,this.dirty=!1}}class Wr{constructor(d,y,A,k,D){this.context=d,this.width=y,this.height=A;const H=d.gl,G=this.framebuffer=H.createFramebuffer();if(this.colorAttachment=new Oc(d,G),k)this.depthAttachment=D?new bm(d,G):new By(d,G);else if(D)throw new Error("Stencil cannot be setted without depth");if(H.checkFramebufferStatus(H.FRAMEBUFFER)!==H.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const d=this.context.gl,y=this.colorAttachment.get();if(y&&d.deleteTexture(y),this.depthAttachment){const A=this.depthAttachment.get();A&&d.deleteRenderbuffer(A)}d.deleteFramebuffer(this.framebuffer)}}class Oi{constructor(d,y,A){this.blendFunction=d,this.blendColor=y,this.mask=A}}Oi.Replace=[1,0],Oi.disabled=new Oi(Oi.Replace,s.aT.transparent,[!1,!1,!1,!1]),Oi.unblended=new Oi(Oi.Replace,s.aT.transparent,[!0,!0,!0,!0]),Oi.alphaBlended=new Oi([1,771],s.aT.transparent,[!0,!0,!0,!0]);class Of{constructor(d){var y,A;if(this.gl=d,this.clearColor=new Va(this),this.clearDepth=new Ts(this),this.clearStencil=new zs(this),this.colorMask=new gm(this),this.depthMask=new ym(this),this.stencilMask=new xa(this),this.stencilFunc=new Ly(this),this.stencilOp=new Af(this),this.stencilTest=new vm(this),this.depthRange=new _a(this),this.depthTest=new Pf(this),this.depthFunc=new Ed(this),this.blend=new Td(this),this.blendFunc=new xm(this),this.blendColor=new Pu(this),this.blendEquation=new Q0(this),this.cullFace=new Dy(this),this.cullFaceSide=new Ny(this),this.frontFace=new kf(this),this.program=new Wa(this),this.activeTexture=new ec(this),this.viewport=new tc(this),this.bindFramebuffer=new If(this),this.bindRenderbuffer=new _m(this),this.bindTexture=new Ml(this),this.bindVertexBuffer=new ba(this),this.bindElementBuffer=new Wh(this),this.bindVertexArray=new zy(this),this.pixelStoreUnpack=new Rf(this),this.pixelStoreUnpackPremultiplyAlpha=new ku(this),this.pixelStoreUnpackFlipY=new Fy(this),this.extTextureFilterAnisotropic=d.getExtension("EXT_texture_filter_anisotropic")||d.getExtension("MOZ_EXT_texture_filter_anisotropic")||d.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=d.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=d.getParameter(d.MAX_TEXTURE_SIZE),Au(d)){this.HALF_FLOAT=d.HALF_FLOAT;const k=d.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(y=d.RGBA16F)!==null&&y!==void 0?y:k==null?void 0:k.RGBA16F_EXT,this.RGB16F=(A=d.RGB16F)!==null&&A!==void 0?A:k==null?void 0:k.RGB16F_EXT,d.getExtension("EXT_color_buffer_float")}else{d.getExtension("EXT_color_buffer_half_float"),d.getExtension("OES_texture_half_float_linear");const k=d.getExtension("OES_texture_half_float");this.HALF_FLOAT=k==null?void 0:k.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(d,y){return new mm(this,d,y)}createVertexBuffer(d,y,A){return new va(this,d,y,A)}createRenderbuffer(d,y,A){const k=this.gl,D=k.createRenderbuffer();return this.bindRenderbuffer.set(D),k.renderbufferStorage(k.RENDERBUFFER,d,y,A),this.bindRenderbuffer.set(null),D}createFramebuffer(d,y,A,k){return new Wr(this,d,y,A,k)}clear({color:d,depth:y,stencil:A}){const k=this.gl;let D=0;d&&(D|=k.COLOR_BUFFER_BIT,this.clearColor.set(d),this.colorMask.set([!0,!0,!0,!0])),y!==void 0&&(D|=k.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(y),this.depthMask.set(!0)),A!==void 0&&(D|=k.STENCIL_BUFFER_BIT,this.clearStencil.set(A),this.stencilMask.set(255)),k.clear(D)}setCullFace(d){d.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(d.mode),this.frontFace.set(d.frontFace))}setDepthMode(d){d.func!==this.gl.ALWAYS||d.mask?(this.depthTest.set(!0),this.depthFunc.set(d.func),this.depthMask.set(d.mask),this.depthRange.set(d.range)):this.depthTest.set(!1)}setStencilMode(d){d.test.func!==this.gl.ALWAYS||d.mask?(this.stencilTest.set(!0),this.stencilMask.set(d.mask),this.stencilOp.set([d.fail,d.depthFail,d.pass]),this.stencilFunc.set({func:d.test.func,ref:d.ref,mask:d.test.mask})):this.stencilTest.set(!1)}setColorMode(d){s.aG(d.blendFunction,Oi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(d.blendFunction),this.blendColor.set(d.blendColor)),this.colorMask.set(d.mask)}createVertexArray(){var d;return Au(this.gl)?this.gl.createVertexArray():(d=this.gl.getExtension("OES_vertex_array_object"))===null||d===void 0?void 0:d.createVertexArrayOES()}deleteVertexArray(d){var y;return Au(this.gl)?this.gl.deleteVertexArray(d):(y=this.gl.getExtension("OES_vertex_array_object"))===null||y===void 0?void 0:y.deleteVertexArrayOES(d)}unbindVAO(){this.bindVertexArray.set(null)}}class Sr{constructor(d,y,A){this.func=d,this.mask=y,this.range=A}}Sr.ReadOnly=!1,Sr.ReadWrite=!0,Sr.disabled=new Sr(519,Sr.ReadOnly,[0,1]);const rc=7680;class Mi{constructor(d,y,A,k,D,H){this.test=d,this.ref=y,this.mask=A,this.fail=k,this.depthFail=D,this.pass=H}}Mi.disabled=new Mi({func:519,mask:0},0,0,rc,rc,rc);class jr{constructor(d,y,A){this.enable=d,this.mode=y,this.frontFace=A}}let Cs;function Iu(L,d,y,A,k,D,H){const G=L.context,K=G.gl,ee=L.useProgram("collisionBox"),re=[];let se=0,be=0;for(let Ge=0;Ge<A.length;Ge++){const ft=A[Ge],At=d.getTile(ft),Pt=At.getBucket(y);if(!Pt)continue;let qt=ft.posMatrix;k[0]===0&&k[1]===0||(qt=L.translatePosMatrix(ft.posMatrix,At,k,D));const wt=H?Pt.textCollisionBox:Pt.iconCollisionBox,Xt=Pt.collisionCircleArray;if(Xt.length>0){const ln=s.Z(),In=qt;s.aU(ln,Pt.placementInvProjMatrix,L.transform.glCoordMatrix),s.aU(ln,ln,Pt.placementViewportMatrix),re.push({circleArray:Xt,circleOffset:be,transform:In,invTransform:ln,coord:ft}),se+=Xt.length/4,be=se}wt&&ee.draw(G,K.LINES,Sr.disabled,Mi.disabled,L.colorModeForRenderPass(),jr.disabled,Md(qt,L.transform,At),L.style.map.terrain&&L.style.map.terrain.getTerrainData(ft),y.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,null,L.transform.zoom,null,null,wt.collisionVertexBuffer)}if(!H||!re.length)return;const Le=L.useProgram("collisionCircle"),Re=new s.aV;Re.resize(4*se),Re._trim();let $e=0;for(const Ge of re)for(let ft=0;ft<Ge.circleArray.length/4;ft++){const At=4*ft,Pt=Ge.circleArray[At+0],qt=Ge.circleArray[At+1],wt=Ge.circleArray[At+2],Xt=Ge.circleArray[At+3];Re.emplace($e++,Pt,qt,wt,Xt,0),Re.emplace($e++,Pt,qt,wt,Xt,1),Re.emplace($e++,Pt,qt,wt,Xt,2),Re.emplace($e++,Pt,qt,wt,Xt,3)}(!Cs||Cs.length<2*se)&&(Cs=function(Ge){const ft=2*Ge,At=new s.aX;At.resize(ft),At._trim();for(let Pt=0;Pt<ft;Pt++){const qt=6*Pt;At.uint16[qt+0]=4*Pt+0,At.uint16[qt+1]=4*Pt+1,At.uint16[qt+2]=4*Pt+2,At.uint16[qt+3]=4*Pt+2,At.uint16[qt+4]=4*Pt+3,At.uint16[qt+5]=4*Pt+0}return At}(se));const ke=G.createIndexBuffer(Cs,!0),at=G.createVertexBuffer(Re,s.aW.members,!0);for(const Ge of re){const ft={u_matrix:Ge.transform,u_inv_matrix:Ge.invTransform,u_camera_to_center_distance:(Mt=L.transform).cameraToCenterDistance,u_viewport_size:[Mt.width,Mt.height]};Le.draw(G,K.TRIANGLES,Sr.disabled,Mi.disabled,L.colorModeForRenderPass(),jr.disabled,ft,L.style.map.terrain&&L.style.map.terrain.getTerrainData(Ge.coord),y.id,at,ke,s.S.simpleSegment(0,2*Ge.circleOffset,Ge.circleArray.length,Ge.circleArray.length/2),null,L.transform.zoom,null,null,null)}var Mt;at.destroy(),ke.destroy()}jr.disabled=new jr(!1,1029,2305),jr.backCCW=new jr(!0,1029,2305);const El=s.ao(new Float32Array(16));function Ha(L,d,y,A,k,D){const{horizontalAlign:H,verticalAlign:G}=s.au(L);return new s.P((-(H-.5)*d/k+A[0])*D,(-(G-.5)*y/k+A[1])*D)}function ic(L,d,y,A,k,D,H,G,K,ee,re){const se=L.text.placedSymbolArray,be=L.text.dynamicLayoutVertexArray,Le=L.icon.dynamicLayoutVertexArray,Re={};be.clear();for(let $e=0;$e<se.length;$e++){const ke=se.get($e),at=ke.hidden||!ke.crossTileID||L.allowVerticalPlacement&&!ke.placedOrientation?null:A[ke.crossTileID];if(at){const Mt=new s.P(ke.anchorX,ke.anchorY),Ge=an(Mt,y?H:D,re),ft=Ot(k.cameraToCenterDistance,Ge.signedDistanceFromCamera);let At=s.aj(L.textSizeData,K,ke)*ft/s.ap;y&&(At*=L.tilePixelRatio/G);const{width:Pt,height:qt,anchor:wt,textOffset:Xt,textBoxScale:ln}=at,In=Ha(wt,Pt,qt,Xt,ln,At),Pr=y?an(Mt.add(In),D,re).point:Ge.point.add(d?In.rotate(-k.angle):In),dn=L.allowVerticalPlacement&&ke.placedOrientation===s.ai.vertical?Math.PI/2:0;for(let Zn=0;Zn<ke.numGlyphs;Zn++)s.ak(be,Pr,dn);ee&&ke.associatedIconIndex>=0&&(Re[ke.associatedIconIndex]={shiftedAnchor:Pr,angle:dn})}else Te(ke.numGlyphs,be)}if(ee){Le.clear();const $e=L.icon.placedSymbolArray;for(let ke=0;ke<$e.length;ke++){const at=$e.get(ke);if(at.hidden)Te(at.numGlyphs,Le);else{const Mt=Re[ke];if(Mt)for(let Ge=0;Ge<at.numGlyphs;Ge++)s.ak(Le,Mt.shiftedAnchor,Mt.angle);else Te(at.numGlyphs,Le)}}L.icon.dynamicLayoutVertexBuffer.updateData(Le)}L.text.dynamicLayoutVertexBuffer.updateData(be)}function wm(L,d,y){return y.iconsInText&&d?"symbolTextAndIcon":L?"symbolSDF":"symbolIcon"}function Lf(L,d,y,A,k,D,H,G,K,ee,re,se){const be=L.context,Le=be.gl,Re=L.transform,$e=G==="map",ke=K==="map",at=G!=="viewport"&&y.layout.get("symbol-placement")!=="point",Mt=$e&&!ke&&!at,Ge=!y.layout.get("symbol-sort-key").isConstant();let ft=!1;const At=L.depthModeForSublayer(0,Sr.ReadOnly),Pt=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),qt=[];for(const wt of A){const Xt=d.getTile(wt),ln=Xt.getBucket(y);if(!ln)continue;const In=k?ln.text:ln.icon;if(!In||!In.segments.get().length||!In.hasVisibleVertices)continue;const Pr=In.programConfigurations.get(y.id),dn=k||ln.sdfIcons,Zn=k?ln.textSizeData:ln.iconSizeData,Rn=ke||Re.pitch!==0,Qr=L.useProgram(wm(dn,k,ln),Pr),Er=s.ah(Zn,Re.zoom),vr=L.style.map.terrain&&L.style.map.terrain.getTerrainData(wt);let Tr,ro,mi,Bo,yo=[0,0],lo=null;if(k)ro=Xt.glyphAtlasTexture,mi=Le.LINEAR,Tr=Xt.glyphAtlasTexture.size,ln.iconsInText&&(yo=Xt.imageAtlasTexture.size,lo=Xt.imageAtlasTexture,Bo=Rn||L.options.rotating||L.options.zooming||Zn.kind==="composite"||Zn.kind==="camera"?Le.LINEAR:Le.NEAREST);else{const Di=y.layout.get("icon-size").constantOr(0)!==1||ln.iconsNeedLinear;ro=Xt.imageAtlasTexture,mi=dn||L.options.rotating||L.options.zooming||Di||Rn?Le.LINEAR:Le.NEAREST,Tr=Xt.imageAtlasTexture.size}const Gs=qe(Xt,1,L.transform.zoom),li=mt(wt.posMatrix,ke,$e,L.transform,Gs),lc=un(wt.posMatrix,ke,$e,L.transform,Gs),cc=Pt&&ln.hasTextData(),Bc=y.layout.get("icon-text-fit")!=="none"&&cc&&ln.hasIconData();if(at){const Di=L.style.map.terrain?(Ko,qi)=>L.style.map.terrain.getElevation(wt,Ko,qi):null,co=y.layout.get("text-rotation-alignment")==="map";Ve(ln,wt.posMatrix,L,k,li,lc,ke,ee,co,Di)}const Nu=L.translatePosMatrix(wt.posMatrix,Xt,D,H),Dd=at||k&&Pt||Bc?El:li,us=L.translatePosMatrix(lc,Xt,D,H,!0),Co=dn&&y.paint.get(k?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Xo;Xo=dn?ln.iconsInText?Ui(Zn.kind,Er,Mt,ke,L,Nu,Dd,us,Tr,yo):Oy(Zn.kind,Er,Mt,ke,L,Nu,Dd,us,k,Tr,!0):Ry(Zn.kind,Er,Mt,ke,L,Nu,Dd,us,k,Tr);const uc={program:Qr,buffers:In,uniformValues:Xo,atlasTexture:ro,atlasTextureIcon:lo,atlasInterpolation:mi,atlasInterpolationIcon:Bo,isSDF:dn,hasHalo:Co};if(Ge&&ln.canOverlap){ft=!0;const Di=In.segments.get();for(const co of Di)qt.push({segments:new s.S([co]),sortKey:co.sortKey,state:uc,terrainData:vr})}else qt.push({segments:In.segments,sortKey:0,state:uc,terrainData:vr})}ft&&qt.sort((wt,Xt)=>wt.sortKey-Xt.sortKey);for(const wt of qt){const Xt=wt.state;if(be.activeTexture.set(Le.TEXTURE0),Xt.atlasTexture.bind(Xt.atlasInterpolation,Le.CLAMP_TO_EDGE),Xt.atlasTextureIcon&&(be.activeTexture.set(Le.TEXTURE1),Xt.atlasTextureIcon&&Xt.atlasTextureIcon.bind(Xt.atlasInterpolationIcon,Le.CLAMP_TO_EDGE)),Xt.isSDF){const ln=Xt.uniformValues;Xt.hasHalo&&(ln.u_is_halo=1,Hh(Xt.buffers,wt.segments,y,L,Xt.program,At,re,se,ln,wt.terrainData)),ln.u_is_halo=0}Hh(Xt.buffers,wt.segments,y,L,Xt.program,At,re,se,Xt.uniformValues,wt.terrainData)}}function Hh(L,d,y,A,k,D,H,G,K,ee){const re=A.context;k.draw(re,re.gl.TRIANGLES,D,H,G,jr.disabled,K,ee,y.id,L.layoutVertexBuffer,L.indexBuffer,d,y.paint,A.transform.zoom,L.programConfigurations.get(y.id),L.dynamicLayoutVertexBuffer,L.opacityVertexBuffer)}function as(L,d,y,A,k){if(!y||!A||!A.imageAtlas)return;const D=A.imageAtlas.patternPositions;let H=D[y.to.toString()],G=D[y.from.toString()];if(!H&&G&&(H=G),!G&&H&&(G=H),!H||!G){const K=k.getPaintProperty(d);H=D[K],G=D[K]}H&&G&&L.setConstantPatternPositions(H,G)}function ls(L,d,y,A,k,D,H){const G=L.context.gl,K="fill-pattern",ee=y.paint.get(K),re=ee&&ee.constantOr(1),se=y.getCrossfadeParameters();let be,Le,Re,$e,ke;H?(Le=re&&!y.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",be=G.LINES):(Le=re?"fillPattern":"fill",be=G.TRIANGLES);const at=ee.constantOr(null);for(const Mt of A){const Ge=d.getTile(Mt);if(re&&!Ge.patternsLoaded())continue;const ft=Ge.getBucket(y);if(!ft)continue;const At=ft.programConfigurations.get(y.id),Pt=L.useProgram(Le,At),qt=L.style.map.terrain&&L.style.map.terrain.getTerrainData(Mt);re&&(L.context.activeTexture.set(G.TEXTURE0),Ge.imageAtlasTexture.bind(G.LINEAR,G.CLAMP_TO_EDGE),At.updatePaintBuffers(se)),as(At,K,at,Ge,y);const wt=qt?Mt:null,Xt=L.translatePosMatrix(wt?wt.posMatrix:Mt.posMatrix,Ge,y.paint.get("fill-translate"),y.paint.get("fill-translate-anchor"));if(H){$e=ft.indexBuffer2,ke=ft.segments2;const ln=[G.drawingBufferWidth,G.drawingBufferHeight];Re=Le==="fillOutlinePattern"&&re?Sd(Xt,L,se,Ge,ln):fm(Xt,ln)}else $e=ft.indexBuffer,ke=ft.segments,Re=re?ky(Xt,L,se,Ge):$h(Xt);Pt.draw(L.context,be,k,L.stencilModeForClipping(Mt),D,jr.disabled,Re,qt,y.id,ft.layoutVertexBuffer,$e,ke,y.paint,L.transform.zoom,At)}}function pi(L,d,y,A,k,D,H){const G=L.context,K=G.gl,ee="fill-extrusion-pattern",re=y.paint.get(ee),se=re.constantOr(1),be=y.getCrossfadeParameters(),Le=y.paint.get("fill-extrusion-opacity"),Re=re.constantOr(null);for(const $e of A){const ke=d.getTile($e),at=ke.getBucket(y);if(!at)continue;const Mt=L.style.map.terrain&&L.style.map.terrain.getTerrainData($e),Ge=at.programConfigurations.get(y.id),ft=L.useProgram(se?"fillExtrusionPattern":"fillExtrusion",Ge);se&&(L.context.activeTexture.set(K.TEXTURE0),ke.imageAtlasTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE),Ge.updatePaintBuffers(be)),as(Ge,ee,Re,ke,y);const At=L.translatePosMatrix($e.posMatrix,ke,y.paint.get("fill-extrusion-translate"),y.paint.get("fill-extrusion-translate-anchor")),Pt=y.paint.get("fill-extrusion-vertical-gradient"),qt=se?To(At,L,Pt,Le,$e,be,ke):Eu(At,L,Pt,Le);ft.draw(G,G.gl.TRIANGLES,k,D,H,jr.backCCW,qt,Mt,y.id,at.layoutVertexBuffer,at.indexBuffer,at.segments,y.paint,L.transform.zoom,Ge,L.style.map.terrain&&at.centroidVertexBuffer)}}function Gh(L,d,y,A,k,D,H){const G=L.context,K=G.gl,ee=y.fbo;if(!ee)return;const re=L.useProgram("hillshade"),se=L.style.map.terrain&&L.style.map.terrain.getTerrainData(d);G.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,ee.colorAttachment.get()),re.draw(G,K.TRIANGLES,k,D,H,jr.disabled,((be,Le,Re,$e)=>{const ke=Re.paint.get("hillshade-shadow-color"),at=Re.paint.get("hillshade-highlight-color"),Mt=Re.paint.get("hillshade-accent-color");let Ge=Re.paint.get("hillshade-illumination-direction")*(Math.PI/180);Re.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ge-=be.transform.angle);const ft=!be.options.moving;return{u_matrix:$e?$e.posMatrix:be.transform.calculatePosMatrix(Le.tileID.toUnwrapped(),ft),u_image:0,u_latrange:jh(0,Le.tileID),u_light:[Re.paint.get("hillshade-exaggeration"),Ge],u_shadow:ke,u_highlight:at,u_accent:Mt}})(L,y,A,se?d:null),se,A.id,L.rasterBoundsBuffer,L.quadTriangleIndexBuffer,L.rasterBoundsSegments)}function wa(L,d,y,A,k,D){const H=L.context,G=H.gl,K=d.dem;if(K&&K.data){const ee=K.dim,re=K.stride,se=K.getPixels();if(H.activeTexture.set(G.TEXTURE1),H.pixelStoreUnpackPremultiplyAlpha.set(!1),d.demTexture=d.demTexture||L.getTileTexture(re),d.demTexture){const Le=d.demTexture;Le.update(se,{premultiply:!1}),Le.bind(G.NEAREST,G.CLAMP_TO_EDGE)}else d.demTexture=new j(H,se,G.RGBA,{premultiply:!1}),d.demTexture.bind(G.NEAREST,G.CLAMP_TO_EDGE);H.activeTexture.set(G.TEXTURE0);let be=d.fbo;if(!be){const Le=new j(H,{width:ee,height:ee,data:null},G.RGBA);Le.bind(G.LINEAR,G.CLAMP_TO_EDGE),be=d.fbo=H.createFramebuffer(ee,ee,!0,!1),be.colorAttachment.set(Le.texture)}H.bindFramebuffer.set(be.framebuffer),H.viewport.set([0,0,ee,ee]),L.useProgram("hillshadePrepare").draw(H,G.TRIANGLES,A,k,D,jr.disabled,((Le,Re)=>{const $e=Re.stride,ke=s.Z();return s.aS(ke,0,s.N,-s.N,0,0,1),s.$(ke,ke,[0,-s.N,0]),{u_matrix:ke,u_image:1,u_dimension:[$e,$e],u_zoom:Le.overscaledZ,u_unpack:Re.getUnpackVector()}})(d.tileID,K),null,y.id,L.rasterBoundsBuffer,L.quadTriangleIndexBuffer,L.rasterBoundsSegments),d.needsHillshadePrepare=!1}}function ex(L,d,y,A,k,D){const H=A.paint.get("raster-fade-duration");if(!D&&H>0){const G=s.h.now(),K=(G-L.timeAdded)/H,ee=d?(G-d.timeAdded)/H:-1,re=y.getSource(),se=k.coveringZoomLevel({tileSize:re.tileSize,roundZoom:re.roundZoom}),be=!d||Math.abs(d.tileID.overscaledZ-se)>Math.abs(L.tileID.overscaledZ-se),Le=be&&L.refreshedUponExpiration?1:s.ad(be?K:1-ee,0,1);return L.refreshedUponExpiration&&K>=1&&(L.refreshedUponExpiration=!1),d?{opacity:1,mix:1-Le}:{opacity:Le,mix:0}}return{opacity:1,mix:0}}const $y=new s.aT(1,0,0,1),Df=new s.aT(0,1,0,1),qh=new s.aT(0,0,1,1),jy=new s.aT(1,0,1,1),Nf=new s.aT(0,1,1,1);function oc(L,d,y,A){Ru(L,0,d+y/2,L.transform.width,y,A)}function zf(L,d,y,A){Ru(L,d-y/2,0,y,L.transform.height,A)}function Ru(L,d,y,A,k,D){const H=L.context,G=H.gl;G.enable(G.SCISSOR_TEST),G.scissor(d*L.pixelRatio,y*L.pixelRatio,A*L.pixelRatio,k*L.pixelRatio),H.clear({color:D}),G.disable(G.SCISSOR_TEST)}function Yh(L,d,y){const A=L.context,k=A.gl,D=y.posMatrix,H=L.useProgram("debug"),G=Sr.disabled,K=Mi.disabled,ee=L.colorModeForRenderPass(),re="$debug",se=L.style.map.terrain&&L.style.map.terrain.getTerrainData(y);A.activeTexture.set(k.TEXTURE0);const be=d.getTileByID(y.key).latestRawTileData,Le=Math.floor((be&&be.byteLength||0)/1024),Re=d.getTile(y).tileSize,$e=512/Math.min(Re,512)*(y.overscaledZ/L.transform.zoom)*.5;let ke=y.canonical.toString();y.overscaledZ!==y.canonical.z&&(ke+=` => ${y.overscaledZ}`),function(at,Mt){at.initDebugOverlayCanvas();const Ge=at.debugOverlayCanvas,ft=at.context.gl,At=at.debugOverlayCanvas.getContext("2d");At.clearRect(0,0,Ge.width,Ge.height),At.shadowColor="white",At.shadowBlur=2,At.lineWidth=1.5,At.strokeStyle="white",At.textBaseline="top",At.font="bold 36px Open Sans, sans-serif",At.fillText(Mt,5,5),At.strokeText(Mt,5,5),at.debugOverlayTexture.update(Ge),at.debugOverlayTexture.bind(ft.LINEAR,ft.CLAMP_TO_EDGE)}(L,`${ke} ${Le}kB`),H.draw(A,k.TRIANGLES,G,K,Oi.alphaBlended,jr.disabled,Tu(D,s.aT.transparent,$e),null,re,L.debugBuffer,L.quadTriangleIndexBuffer,L.debugSegments),H.draw(A,k.LINE_STRIP,G,K,ee,jr.disabled,Tu(D,s.aT.red),se,re,L.debugBuffer,L.tileBorderIndexBuffer,L.debugSegments)}function Vi(L,d,y){const A=L.context,k=A.gl,D=L.colorModeForRenderPass(),H=new Sr(k.LEQUAL,Sr.ReadWrite,L.depthRangeFor3D),G=L.useProgram("terrain"),K=d.getTerrainMesh();A.bindFramebuffer.set(null),A.viewport.set([0,0,L.width,L.height]);for(const ee of y){const re=L.renderToTexture.getTexture(ee),se=d.getTerrainData(ee.tileID);A.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,re.texture);const be={u_matrix:L.transform.calculatePosMatrix(ee.tileID.toUnwrapped()),u_texture:0,u_ele_delta:d.getMeshFrameDelta(L.transform.zoom)};G.draw(A,k.TRIANGLES,H,Mi.disabled,D,jr.backCCW,be,se,"terrain",K.vertexBuffer,K.indexBuffer,K.segments)}}class Ou{constructor(d,y){this.context=new Of(d),this.transform=y,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.Z(),renderTime:0},this.setup(),this.numSublayers=Ce.maxUnderzooming+Ce.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new fi}resize(d,y,A){if(this.width=Math.floor(d*A),this.height=Math.floor(y*A),this.pixelRatio=A,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const k of this.style._order)this.style._layers[k].resize()}setup(){const d=this.context,y=new s.a_;y.emplaceBack(0,0),y.emplaceBack(s.N,0),y.emplaceBack(0,s.N),y.emplaceBack(s.N,s.N),this.tileExtentBuffer=d.createVertexBuffer(y,Li.members),this.tileExtentSegments=s.S.simpleSegment(0,0,4,2);const A=new s.a_;A.emplaceBack(0,0),A.emplaceBack(s.N,0),A.emplaceBack(0,s.N),A.emplaceBack(s.N,s.N),this.debugBuffer=d.createVertexBuffer(A,Li.members),this.debugSegments=s.S.simpleSegment(0,0,4,5);const k=new s.V;k.emplaceBack(0,0,0,0),k.emplaceBack(s.N,0,s.N,0),k.emplaceBack(0,s.N,0,s.N),k.emplaceBack(s.N,s.N,s.N,s.N),this.rasterBoundsBuffer=d.createVertexBuffer(k,Fe.members),this.rasterBoundsSegments=s.S.simpleSegment(0,0,4,2);const D=new s.a_;D.emplaceBack(0,0),D.emplaceBack(1,0),D.emplaceBack(0,1),D.emplaceBack(1,1),this.viewportBuffer=d.createVertexBuffer(D,Li.members),this.viewportSegments=s.S.simpleSegment(0,0,4,2);const H=new s.a$;H.emplaceBack(0),H.emplaceBack(1),H.emplaceBack(3),H.emplaceBack(2),H.emplaceBack(0),this.tileBorderIndexBuffer=d.createIndexBuffer(H);const G=new s.b0;G.emplaceBack(0,1,2),G.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=d.createIndexBuffer(G);const K=this.context.gl;this.stencilClearMode=new Mi({func:K.ALWAYS,mask:0},0,255,K.ZERO,K.ZERO,K.ZERO)}clearStencil(){const d=this.context,y=d.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const A=s.Z();s.aS(A,0,this.width,this.height,0,0,1),s.a0(A,A,[y.drawingBufferWidth,y.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(d,y.TRIANGLES,Sr.disabled,this.stencilClearMode,Oi.disabled,jr.disabled,J0(A),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(d,y){if(this.currentStencilSource===d.source||!d.isTileClipped()||!y||!y.length)return;this.currentStencilSource=d.source;const A=this.context,k=A.gl;this.nextStencilID+y.length>256&&this.clearStencil(),A.setColorMode(Oi.disabled),A.setDepthMode(Sr.disabled);const D=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const H of y){const G=this._tileClippingMaskIDs[H.key]=this.nextStencilID++,K=this.style.map.terrain&&this.style.map.terrain.getTerrainData(H);D.draw(A,k.TRIANGLES,Sr.disabled,new Mi({func:k.ALWAYS,mask:0},G,255,k.KEEP,k.KEEP,k.REPLACE),Oi.disabled,jr.disabled,J0(H.posMatrix),K,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const d=this.nextStencilID++,y=this.context.gl;return new Mi({func:y.NOTEQUAL,mask:255},d,255,y.KEEP,y.KEEP,y.REPLACE)}stencilModeForClipping(d){const y=this.context.gl;return new Mi({func:y.EQUAL,mask:255},this._tileClippingMaskIDs[d.key],0,y.KEEP,y.KEEP,y.REPLACE)}stencilConfigForOverlap(d){const y=this.context.gl,A=d.sort((H,G)=>G.overscaledZ-H.overscaledZ),k=A[A.length-1].overscaledZ,D=A[0].overscaledZ-k+1;if(D>1){this.currentStencilSource=void 0,this.nextStencilID+D>256&&this.clearStencil();const H={};for(let G=0;G<D;G++)H[G+k]=new Mi({func:y.GEQUAL,mask:255},G+this.nextStencilID,255,y.KEEP,y.KEEP,y.REPLACE);return this.nextStencilID+=D,[H,A]}return[{[k]:Mi.disabled},A]}colorModeForRenderPass(){const d=this.context.gl;return this._showOverdrawInspector?new Oi([d.CONSTANT_COLOR,d.ONE],new s.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Oi.unblended:Oi.alphaBlended}depthModeForSublayer(d,y,A){if(!this.opaquePassEnabledForLayer())return Sr.disabled;const k=1-((1+this.currentLayer)*this.numSublayers+d)*this.depthEpsilon;return new Sr(A||this.context.gl.LEQUAL,y,[k,k])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(d,y){this.style=d,this.options=y,this.lineAtlas=d.lineAtlas,this.imageManager=d.imageManager,this.glyphManager=d.glyphManager,this.symbolFadeChange=d.placement.symbolFadeChange(s.h.now()),this.imageManager.beginFrame();const A=this.style._order,k=this.style.sourceCaches,D={},H={},G={};for(const K in k){const ee=k[K];ee.used&&ee.prepare(this.context),D[K]=ee.getVisibleCoordinates(),H[K]=D[K].slice().reverse(),G[K]=ee.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let K=0;K<A.length;K++)if(this.style._layers[A[K]].is3D()){this.opaquePassCutoff=K;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const K=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!s.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||K.length)&&(s.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(ee,re){const se=ee.context,be=se.gl,Le=Oi.unblended,Re=new Sr(be.LEQUAL,Sr.ReadWrite,[0,1]),$e=re.getTerrainMesh(),ke=re.sourceCache.getRenderableTiles(),at=ee.useProgram("terrainDepth");se.bindFramebuffer.set(re.getFramebuffer("depth").framebuffer),se.viewport.set([0,0,ee.width/devicePixelRatio,ee.height/devicePixelRatio]),se.clear({color:s.aT.transparent,depth:1});for(const Mt of ke){const Ge=re.getTerrainData(Mt.tileID),ft={u_matrix:ee.transform.calculatePosMatrix(Mt.tileID.toUnwrapped()),u_ele_delta:re.getMeshFrameDelta(ee.transform.zoom)};at.draw(se,be.TRIANGLES,Re,Mi.disabled,Le,jr.backCCW,ft,Ge,"terrain",$e.vertexBuffer,$e.indexBuffer,$e.segments)}se.bindFramebuffer.set(null),se.viewport.set([0,0,ee.width,ee.height])}(this,this.style.map.terrain),function(ee,re){const se=ee.context,be=se.gl,Le=Oi.unblended,Re=new Sr(be.LEQUAL,Sr.ReadWrite,[0,1]),$e=re.getTerrainMesh(),ke=re.getCoordsTexture(),at=re.sourceCache.getRenderableTiles(),Mt=ee.useProgram("terrainCoords");se.bindFramebuffer.set(re.getFramebuffer("coords").framebuffer),se.viewport.set([0,0,ee.width/devicePixelRatio,ee.height/devicePixelRatio]),se.clear({color:s.aT.transparent,depth:1}),re.coordsIndex=[];for(const Ge of at){const ft=re.getTerrainData(Ge.tileID);se.activeTexture.set(be.TEXTURE0),be.bindTexture(be.TEXTURE_2D,ke.texture);const At={u_matrix:ee.transform.calculatePosMatrix(Ge.tileID.toUnwrapped()),u_terrain_coords_id:(255-re.coordsIndex.length)/255,u_texture:0,u_ele_delta:re.getMeshFrameDelta(ee.transform.zoom)};Mt.draw(se,be.TRIANGLES,Re,Mi.disabled,Le,jr.backCCW,At,ft,"terrain",$e.vertexBuffer,$e.indexBuffer,$e.segments),re.coordsIndex.push(Ge.tileID.key)}se.bindFramebuffer.set(null),se.viewport.set([0,0,ee.width,ee.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const K of A){const ee=this.style._layers[K];if(!ee.hasOffscreenPass()||ee.isHidden(this.transform.zoom))continue;const re=H[ee.source];(ee.type==="custom"||re.length)&&this.renderLayer(this,k[ee.source],ee,re)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:y.showOverdrawInspector?s.aT.black:s.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=y.showOverdrawInspector,this.depthRangeFor3D=[0,1-(d._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=A.length-1;this.currentLayer>=0;this.currentLayer--){const K=this.style._layers[A[this.currentLayer]],ee=k[K.source],re=D[K.source];this._renderTileClippingMasks(K,re),this.renderLayer(this,ee,K,re)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<A.length;this.currentLayer++){const K=this.style._layers[A[this.currentLayer]],ee=k[K.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(K))continue;const re=(K.type==="symbol"?G:H)[K.source];this._renderTileClippingMasks(K,D[K.source]),this.renderLayer(this,ee,K,re)}if(this.options.showTileBoundaries){const K=function(ee,re){let se=null;const be=Object.values(ee._layers).flatMap(ke=>ke.source&&!ke.isHidden(re)?[ee.sourceCaches[ke.source]]:[]),Le=be.filter(ke=>ke.getSource().type==="vector"),Re=be.filter(ke=>ke.getSource().type!=="vector"),$e=ke=>{(!se||se.getSource().maxzoom<ke.getSource().maxzoom)&&(se=ke)};return Le.forEach(ke=>$e(ke)),se||Re.forEach(ke=>$e(ke)),se}(this.style,this.transform.zoom);K&&function(ee,re,se){for(let be=0;be<se.length;be++)Yh(ee,re,se[be])}(this,K,K.getVisibleCoordinates())}this.options.showPadding&&function(K){const ee=K.transform.padding;oc(K,K.transform.height-(ee.top||0),3,$y),oc(K,ee.bottom||0,3,Df),zf(K,ee.left||0,3,qh),zf(K,K.transform.width-(ee.right||0),3,jy);const re=K.transform.centerPoint;(function(se,be,Le,Re){Ru(se,be-1,Le-10,2,20,Re),Ru(se,be-10,Le-1,20,2,Re)})(K,re.x,K.transform.height-re.y,Nf)}(this),this.context.setDefault()}renderLayer(d,y,A,k){if(!A.isHidden(this.transform.zoom)&&(A.type==="background"||A.type==="custom"||(k||[]).length))switch(this.id=A.id,A.type){case"symbol":(function(D,H,G,K,ee){if(D.renderPass!=="translucent")return;const re=Mi.disabled,se=D.colorModeForRenderPass();(G._unevaluatedLayout.hasValue("text-variable-anchor")||G._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(be,Le,Re,$e,ke,at,Mt){const Ge=Le.transform,ft=ke==="map",At=at==="map";for(const Pt of be){const qt=$e.getTile(Pt),wt=qt.getBucket(Re);if(!wt||!wt.text||!wt.text.segments.get().length)continue;const Xt=s.ah(wt.textSizeData,Ge.zoom),ln=qe(qt,1,Le.transform.zoom),In=mt(Pt.posMatrix,At,ft,Le.transform,ln),Pr=Re.layout.get("icon-text-fit")!=="none"&&wt.hasIconData();if(Xt){const dn=Math.pow(2,Ge.zoom-qt.tileID.overscaledZ);ic(wt,ft,At,Mt,Ge,In,Pt.posMatrix,dn,Xt,Pr,Le.style.map.terrain?(Zn,Rn)=>Le.style.map.terrain.getElevation(Pt,Zn,Rn):null)}}}(K,D,G,H,G.layout.get("text-rotation-alignment"),G.layout.get("text-pitch-alignment"),ee),G.paint.get("icon-opacity").constantOr(1)!==0&&Lf(D,H,G,K,!1,G.paint.get("icon-translate"),G.paint.get("icon-translate-anchor"),G.layout.get("icon-rotation-alignment"),G.layout.get("icon-pitch-alignment"),G.layout.get("icon-keep-upright"),re,se),G.paint.get("text-opacity").constantOr(1)!==0&&Lf(D,H,G,K,!0,G.paint.get("text-translate"),G.paint.get("text-translate-anchor"),G.layout.get("text-rotation-alignment"),G.layout.get("text-pitch-alignment"),G.layout.get("text-keep-upright"),re,se),H.map.showCollisionBoxes&&(Iu(D,H,G,K,G.paint.get("text-translate"),G.paint.get("text-translate-anchor"),!0),Iu(D,H,G,K,G.paint.get("icon-translate"),G.paint.get("icon-translate-anchor"),!1))})(d,y,A,k,this.style.placement.variableOffsets);break;case"circle":(function(D,H,G,K){if(D.renderPass!=="translucent")return;const ee=G.paint.get("circle-opacity"),re=G.paint.get("circle-stroke-width"),se=G.paint.get("circle-stroke-opacity"),be=!G.layout.get("circle-sort-key").isConstant();if(ee.constantOr(1)===0&&(re.constantOr(1)===0||se.constantOr(1)===0))return;const Le=D.context,Re=Le.gl,$e=D.depthModeForSublayer(0,Sr.ReadOnly),ke=Mi.disabled,at=D.colorModeForRenderPass(),Mt=[];for(let Ge=0;Ge<K.length;Ge++){const ft=K[Ge],At=H.getTile(ft),Pt=At.getBucket(G);if(!Pt)continue;const qt=Pt.programConfigurations.get(G.id),wt=D.useProgram("circle",qt),Xt=Pt.layoutVertexBuffer,ln=Pt.indexBuffer,In=D.style.map.terrain&&D.style.map.terrain.getTerrainData(ft),Pr={programConfiguration:qt,program:wt,layoutVertexBuffer:Xt,indexBuffer:ln,uniformValues:Sl(D,ft,At,G),terrainData:In};if(be){const dn=Pt.segments.get();for(const Zn of dn)Mt.push({segments:new s.S([Zn]),sortKey:Zn.sortKey,state:Pr})}else Mt.push({segments:Pt.segments,sortKey:0,state:Pr})}be&&Mt.sort((Ge,ft)=>Ge.sortKey-ft.sortKey);for(const Ge of Mt){const{programConfiguration:ft,program:At,layoutVertexBuffer:Pt,indexBuffer:qt,uniformValues:wt,terrainData:Xt}=Ge.state;At.draw(Le,Re.TRIANGLES,$e,ke,at,jr.disabled,wt,Xt,G.id,Pt,qt,Ge.segments,G.paint,D.transform.zoom,ft)}})(d,y,A,k);break;case"heatmap":(function(D,H,G,K){if(G.paint.get("heatmap-opacity")!==0)if(D.renderPass==="offscreen"){const ee=D.context,re=ee.gl,se=Mi.disabled,be=new Oi([re.ONE,re.ONE],s.aT.transparent,[!0,!0,!0,!0]);(function(Le,Re,$e){const ke=Le.gl;Le.activeTexture.set(ke.TEXTURE1),Le.viewport.set([0,0,Re.width/4,Re.height/4]);let at=$e.heatmapFbo;if(at)ke.bindTexture(ke.TEXTURE_2D,at.colorAttachment.get()),Le.bindFramebuffer.set(at.framebuffer);else{const Mt=ke.createTexture();ke.bindTexture(ke.TEXTURE_2D,Mt),ke.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_WRAP_S,ke.CLAMP_TO_EDGE),ke.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_WRAP_T,ke.CLAMP_TO_EDGE),ke.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_MIN_FILTER,ke.LINEAR),ke.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_MAG_FILTER,ke.LINEAR),at=$e.heatmapFbo=Le.createFramebuffer(Re.width/4,Re.height/4,!1,!1),function(Ge,ft,At,Pt){var qt,wt;const Xt=Ge.gl,ln=(qt=Ge.HALF_FLOAT)!==null&&qt!==void 0?qt:Xt.UNSIGNED_BYTE,In=(wt=Ge.RGBA16F)!==null&&wt!==void 0?wt:Xt.RGBA;Xt.texImage2D(Xt.TEXTURE_2D,0,In,ft.width/4,ft.height/4,0,Xt.RGBA,ln,null),Pt.colorAttachment.set(At)}(Le,Re,Mt,at)}})(ee,D,G),ee.clear({color:s.aT.transparent});for(let Le=0;Le<K.length;Le++){const Re=K[Le];if(H.hasRenderableParent(Re))continue;const $e=H.getTile(Re),ke=$e.getBucket(G);if(!ke)continue;const at=ke.programConfigurations.get(G.id),Mt=D.useProgram("heatmap",at),{zoom:Ge}=D.transform;Mt.draw(ee,re.TRIANGLES,Sr.disabled,se,be,jr.disabled,W1(Re.posMatrix,$e,Ge,G.paint.get("heatmap-intensity")),null,G.id,ke.layoutVertexBuffer,ke.indexBuffer,ke.segments,G.paint,D.transform.zoom,at)}ee.viewport.set([0,0,D.width,D.height])}else D.renderPass==="translucent"&&(D.context.setColorMode(D.colorModeForRenderPass()),function(ee,re){const se=ee.context,be=se.gl,Le=re.heatmapFbo;if(!Le)return;se.activeTexture.set(be.TEXTURE0),be.bindTexture(be.TEXTURE_2D,Le.colorAttachment.get()),se.activeTexture.set(be.TEXTURE1);let Re=re.colorRampTexture;Re||(Re=re.colorRampTexture=new j(se,re.colorRamp,be.RGBA)),Re.bind(be.LINEAR,be.CLAMP_TO_EDGE),ee.useProgram("heatmapTexture").draw(se,be.TRIANGLES,Sr.disabled,Mi.disabled,ee.colorModeForRenderPass(),jr.disabled,(($e,ke,at,Mt)=>{const Ge=s.Z();s.aS(Ge,0,$e.width,$e.height,0,0,1);const ft=$e.context.gl;return{u_matrix:Ge,u_world:[ft.drawingBufferWidth,ft.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ke.paint.get("heatmap-opacity")}})(ee,re),null,re.id,ee.viewportBuffer,ee.quadTriangleIndexBuffer,ee.viewportSegments,re.paint,ee.transform.zoom)}(D,G))})(d,y,A,k);break;case"line":(function(D,H,G,K){if(D.renderPass!=="translucent")return;const ee=G.paint.get("line-opacity"),re=G.paint.get("line-width");if(ee.constantOr(1)===0||re.constantOr(1)===0)return;const se=D.depthModeForSublayer(0,Sr.ReadOnly),be=D.colorModeForRenderPass(),Le=G.paint.get("line-dasharray"),Re=G.paint.get("line-pattern"),$e=Re.constantOr(1),ke=G.paint.get("line-gradient"),at=G.getCrossfadeParameters(),Mt=$e?"linePattern":Le?"lineSDF":ke?"lineGradient":"line",Ge=D.context,ft=Ge.gl;let At=!0;for(const Pt of K){const qt=H.getTile(Pt);if($e&&!qt.patternsLoaded())continue;const wt=qt.getBucket(G);if(!wt)continue;const Xt=wt.programConfigurations.get(G.id),ln=D.context.program.get(),In=D.useProgram(Mt,Xt),Pr=At||In.program!==ln,dn=D.style.map.terrain&&D.style.map.terrain.getTerrainData(Pt),Zn=Re.constantOr(null);if(Zn&&qt.imageAtlas){const Er=qt.imageAtlas,vr=Er.patternPositions[Zn.to.toString()],Tr=Er.patternPositions[Zn.from.toString()];vr&&Tr&&Xt.setConstantPatternPositions(vr,Tr)}const Rn=dn?Pt:null,Qr=$e?H1(D,qt,G,at,Rn):Le?hm(D,qt,G,Le,at,Rn):ke?Mf(D,qt,G,wt.lineClipsArray.length,Rn):Uh(D,qt,G,Rn);if($e)Ge.activeTexture.set(ft.TEXTURE0),qt.imageAtlasTexture.bind(ft.LINEAR,ft.CLAMP_TO_EDGE),Xt.updatePaintBuffers(at);else if(Le&&(Pr||D.lineAtlas.dirty))Ge.activeTexture.set(ft.TEXTURE0),D.lineAtlas.bind(Ge);else if(ke){const Er=wt.gradients[G.id];let vr=Er.texture;if(G.gradientVersion!==Er.version){let Tr=256;if(G.stepInterpolant){const ro=H.getSource().maxzoom,mi=Pt.canonical.z===ro?Math.ceil(1<<D.transform.maxZoom-Pt.canonical.z):1;Tr=s.ad(s.aY(wt.maxLineLength/s.N*1024*mi),256,Ge.maxTextureSize)}Er.gradient=s.aZ({expression:G.gradientExpression(),evaluationKey:"lineProgress",resolution:Tr,image:Er.gradient||void 0,clips:wt.lineClipsArray}),Er.texture?Er.texture.update(Er.gradient):Er.texture=new j(Ge,Er.gradient,ft.RGBA),Er.version=G.gradientVersion,vr=Er.texture}Ge.activeTexture.set(ft.TEXTURE0),vr.bind(G.stepInterpolant?ft.NEAREST:ft.LINEAR,ft.CLAMP_TO_EDGE)}In.draw(Ge,ft.TRIANGLES,se,D.stencilModeForClipping(Pt),be,jr.disabled,Qr,dn,G.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,G.paint,D.transform.zoom,Xt,wt.layoutVertexBuffer2),At=!1}})(d,y,A,k);break;case"fill":(function(D,H,G,K){const ee=G.paint.get("fill-color"),re=G.paint.get("fill-opacity");if(re.constantOr(1)===0)return;const se=D.colorModeForRenderPass(),be=G.paint.get("fill-pattern"),Le=D.opaquePassEnabledForLayer()&&!be.constantOr(1)&&ee.constantOr(s.aT.transparent).a===1&&re.constantOr(0)===1?"opaque":"translucent";if(D.renderPass===Le){const Re=D.depthModeForSublayer(1,D.renderPass==="opaque"?Sr.ReadWrite:Sr.ReadOnly);ls(D,H,G,K,Re,se,!1)}if(D.renderPass==="translucent"&&G.paint.get("fill-antialias")){const Re=D.depthModeForSublayer(G.getPaintProperty("fill-outline-color")?2:0,Sr.ReadOnly);ls(D,H,G,K,Re,se,!0)}})(d,y,A,k);break;case"fill-extrusion":(function(D,H,G,K){const ee=G.paint.get("fill-extrusion-opacity");if(ee!==0&&D.renderPass==="translucent"){const re=new Sr(D.context.gl.LEQUAL,Sr.ReadWrite,D.depthRangeFor3D);if(ee!==1||G.paint.get("fill-extrusion-pattern").constantOr(1))pi(D,H,G,K,re,Mi.disabled,Oi.disabled),pi(D,H,G,K,re,D.stencilModeFor3D(),D.colorModeForRenderPass());else{const se=D.colorModeForRenderPass();pi(D,H,G,K,re,Mi.disabled,se)}}})(d,y,A,k);break;case"hillshade":(function(D,H,G,K){if(D.renderPass!=="offscreen"&&D.renderPass!=="translucent")return;const ee=D.context,re=D.depthModeForSublayer(0,Sr.ReadOnly),se=D.colorModeForRenderPass(),[be,Le]=D.renderPass==="translucent"?D.stencilConfigForOverlap(K):[{},K];for(const Re of Le){const $e=H.getTile(Re);$e.needsHillshadePrepare!==void 0&&$e.needsHillshadePrepare&&D.renderPass==="offscreen"?wa(D,$e,G,re,Mi.disabled,se):D.renderPass==="translucent"&&Gh(D,Re,$e,G,re,be[Re.overscaledZ],se)}ee.viewport.set([0,0,D.width,D.height])})(d,y,A,k);break;case"raster":(function(D,H,G,K){if(D.renderPass!=="translucent"||G.paint.get("raster-opacity")===0||!K.length)return;const ee=D.context,re=ee.gl,se=H.getSource(),be=D.useProgram("raster"),Le=D.colorModeForRenderPass(),[Re,$e]=se instanceof lt?[{},K]:D.stencilConfigForOverlap(K),ke=$e[$e.length-1].overscaledZ,at=!D.options.moving;for(const Mt of $e){const Ge=D.depthModeForSublayer(Mt.overscaledZ-ke,G.paint.get("raster-opacity")===1?Sr.ReadWrite:Sr.ReadOnly,re.LESS),ft=H.getTile(Mt);ft.registerFadeDuration(G.paint.get("raster-fade-duration"));const At=H.findLoadedParent(Mt,0),Pt=ex(ft,At,H,G,D.transform,D.style.map.terrain);let qt,wt;const Xt=G.paint.get("raster-resampling")==="nearest"?re.NEAREST:re.LINEAR;ee.activeTexture.set(re.TEXTURE0),ft.texture.bind(Xt,re.CLAMP_TO_EDGE,re.LINEAR_MIPMAP_NEAREST),ee.activeTexture.set(re.TEXTURE1),At?(At.texture.bind(Xt,re.CLAMP_TO_EDGE,re.LINEAR_MIPMAP_NEAREST),qt=Math.pow(2,At.tileID.overscaledZ-ft.tileID.overscaledZ),wt=[ft.tileID.canonical.x*qt%1,ft.tileID.canonical.y*qt%1]):ft.texture.bind(Xt,re.CLAMP_TO_EDGE,re.LINEAR_MIPMAP_NEAREST);const ln=D.style.map.terrain&&D.style.map.terrain.getTerrainData(Mt),In=ln?Mt:null,Pr=In?In.posMatrix:D.transform.calculatePosMatrix(Mt.toUnwrapped(),at),dn=pm(Pr,wt||[0,0],qt||1,Pt,G);se instanceof lt?be.draw(ee,re.TRIANGLES,Ge,Mi.disabled,Le,jr.disabled,dn,ln,G.id,se.boundsBuffer,D.quadTriangleIndexBuffer,se.boundsSegments):be.draw(ee,re.TRIANGLES,Ge,Re[Mt.overscaledZ],Le,jr.disabled,dn,ln,G.id,D.rasterBoundsBuffer,D.quadTriangleIndexBuffer,D.rasterBoundsSegments)}})(d,y,A,k);break;case"background":(function(D,H,G,K){const ee=G.paint.get("background-color"),re=G.paint.get("background-opacity");if(re===0)return;const se=D.context,be=se.gl,Le=D.transform,Re=Le.tileSize,$e=G.paint.get("background-pattern");if(D.isPatternMissing($e))return;const ke=!$e&&ee.a===1&&re===1&&D.opaquePassEnabledForLayer()?"opaque":"translucent";if(D.renderPass!==ke)return;const at=Mi.disabled,Mt=D.depthModeForSublayer(0,ke==="opaque"?Sr.ReadWrite:Sr.ReadOnly),Ge=D.colorModeForRenderPass(),ft=D.useProgram($e?"backgroundPattern":"background"),At=K||Le.coveringTiles({tileSize:Re,terrain:D.style.map.terrain});$e&&(se.activeTexture.set(be.TEXTURE0),D.imageManager.bind(D.context));const Pt=G.getCrossfadeParameters();for(const qt of At){const wt=K?qt.posMatrix:D.transform.calculatePosMatrix(qt.toUnwrapped()),Xt=$e?Ua(wt,re,D,$e,{tileID:qt,tileSize:Re},Pt):Ef(wt,re,ee),ln=D.style.map.terrain&&D.style.map.terrain.getTerrainData(qt);ft.draw(se,be.TRIANGLES,Mt,at,Ge,jr.disabled,Xt,ln,G.id,D.tileExtentBuffer,D.quadTriangleIndexBuffer,D.tileExtentSegments)}})(d,0,A,k);break;case"custom":(function(D,H,G){const K=D.context,ee=G.implementation;if(D.renderPass==="offscreen"){const re=ee.prerender;re&&(D.setCustomLayerDefaults(),K.setColorMode(D.colorModeForRenderPass()),re.call(ee,K.gl,D.transform.customLayerMatrix()),K.setDirty(),D.setBaseState())}else if(D.renderPass==="translucent"){D.setCustomLayerDefaults(),K.setColorMode(D.colorModeForRenderPass()),K.setStencilMode(Mi.disabled);const re=ee.renderingMode==="3d"?new Sr(D.context.gl.LEQUAL,Sr.ReadWrite,D.depthRangeFor3D):D.depthModeForSublayer(0,Sr.ReadOnly);K.setDepthMode(re),ee.render(K.gl,D.transform.customLayerMatrix()),K.setDirty(),D.setBaseState(),K.bindFramebuffer.set(null)}})(d,0,A)}}translatePosMatrix(d,y,A,k,D){if(!A[0]&&!A[1])return d;const H=D?k==="map"?this.transform.angle:0:k==="viewport"?-this.transform.angle:0;if(H){const ee=Math.sin(H),re=Math.cos(H);A=[A[0]*re-A[1]*ee,A[0]*ee+A[1]*re]}const G=[D?A[0]:qe(y,A[0],this.transform.zoom),D?A[1]:qe(y,A[1],this.transform.zoom),0],K=new Float32Array(16);return s.$(K,d,G),K}saveTileTexture(d){const y=this._tileTextures[d.size[0]];y?y.push(d):this._tileTextures[d.size[0]]=[d]}getTileTexture(d){const y=this._tileTextures[d];return y&&y.length>0?y.pop():null}isPatternMissing(d){if(!d)return!1;if(!d.from||!d.to)return!0;const y=this.imageManager.getPattern(d.from.toString()),A=this.imageManager.getPattern(d.to.toString());return!y||!A}useProgram(d,y){this.cache=this.cache||{};const A=d+(y?y.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[A]||(this.cache[A]=new Rc(this.context,Ur[d],y,Tf[d],this._showOverdrawInspector,this.style.map.terrain)),this.cache[A]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const d=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(d.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new j(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:d,drawingBufferHeight:y}=this.context.gl;return this.width!==d||this.height!==y}}class zo{constructor(d,y){this.points=d,this.planes=y}static fromInvProjectionMatrix(d,y,A){const k=Math.pow(2,A),D=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(G=>{const K=1/(G=s.ag([],G,d))[3]/y*k;return s.b3(G,G,[K,K,1/G[3],K])}),H=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(G=>{const K=function(be,Le){var Re=Le[0],$e=Le[1],ke=Le[2],at=Re*Re+$e*$e+ke*ke;return at>0&&(at=1/Math.sqrt(at)),be[0]=Le[0]*at,be[1]=Le[1]*at,be[2]=Le[2]*at,be}([],function(be,Le,Re){var $e=Le[0],ke=Le[1],at=Le[2],Mt=Re[0],Ge=Re[1],ft=Re[2];return be[0]=ke*ft-at*Ge,be[1]=at*Mt-$e*ft,be[2]=$e*Ge-ke*Mt,be}([],O([],D[G[0]],D[G[1]]),O([],D[G[2]],D[G[1]]))),ee=-((re=K)[0]*(se=D[G[1]])[0]+re[1]*se[1]+re[2]*se[2]);var re,se;return K.concat(ee)});return new zo(D,H)}}class Cd{constructor(d,y){this.min=d,this.max=y,this.center=function(A,k,D){return A[0]=.5*k[0],A[1]=.5*k[1],A[2]=.5*k[2],A}([],function(A,k,D){return A[0]=k[0]+D[0],A[1]=k[1]+D[1],A[2]=k[2]+D[2],A}([],this.min,this.max))}quadrant(d){const y=[d%2==0,d<2],A=I(this.min),k=I(this.max);for(let D=0;D<y.length;D++)A[D]=y[D]?this.min[D]:this.center[D],k[D]=y[D]?this.center[D]:this.max[D];return k[2]=this.max[2],new Cd(A,k)}distanceX(d){return Math.max(Math.min(this.max[0],d[0]),this.min[0])-d[0]}distanceY(d){return Math.max(Math.min(this.max[1],d[1]),this.min[1])-d[1]}intersects(d){const y=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let A=!0;for(let k=0;k<d.planes.length;k++){const D=d.planes[k];let H=0;for(let G=0;G<y.length;G++)s.b4(D,y[G])>=0&&H++;if(H===0)return 0;H!==y.length&&(A=!1)}if(A)return 2;for(let k=0;k<3;k++){let D=Number.MAX_VALUE,H=-Number.MAX_VALUE;for(let G=0;G<d.points.length;G++){const K=d.points[G][k]-this.min[k];D=Math.min(D,K),H=Math.max(H,K)}if(H<0||D>this.max[k]-this.min[k])return 0}return 1}}class Lc{constructor(d=0,y=0,A=0,k=0){if(isNaN(d)||d<0||isNaN(y)||y<0||isNaN(A)||A<0||isNaN(k)||k<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=d,this.bottom=y,this.left=A,this.right=k}interpolate(d,y,A){return y.top!=null&&d.top!=null&&(this.top=s.B.number(d.top,y.top,A)),y.bottom!=null&&d.bottom!=null&&(this.bottom=s.B.number(d.bottom,y.bottom,A)),y.left!=null&&d.left!=null&&(this.left=s.B.number(d.left,y.left,A)),y.right!=null&&d.right!=null&&(this.right=s.B.number(d.right,y.right,A)),this}getCenter(d,y){const A=s.ad((this.left+d-this.right)/2,0,d),k=s.ad((this.top+y-this.bottom)/2,0,y);return new s.P(A,k)}equals(d){return this.top===d.top&&this.bottom===d.bottom&&this.left===d.left&&this.right===d.right}clone(){return new Lc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Fs{constructor(d,y,A,k,D){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=D===void 0||!!D,this._minZoom=d||0,this._maxZoom=y||22,this._minPitch=A??0,this._maxPitch=k??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new s.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Lc,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const d=new Fs(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return d.apply(this),d}apply(d){this.tileSize=d.tileSize,this.latRange=d.latRange,this.width=d.width,this.height=d.height,this._center=d._center,this._elevation=d._elevation,this._minEleveationForCurrentTile=d._minEleveationForCurrentTile,this.zoom=d.zoom,this.angle=d.angle,this._fov=d._fov,this._pitch=d._pitch,this._unmodified=d._unmodified,this._edgeInsets=d._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(d){this._minZoom!==d&&(this._minZoom=d,this.zoom=Math.max(this.zoom,d))}get maxZoom(){return this._maxZoom}set maxZoom(d){this._maxZoom!==d&&(this._maxZoom=d,this.zoom=Math.min(this.zoom,d))}get minPitch(){return this._minPitch}set minPitch(d){this._minPitch!==d&&(this._minPitch=d,this.pitch=Math.max(this.pitch,d))}get maxPitch(){return this._maxPitch}set maxPitch(d){this._maxPitch!==d&&(this._maxPitch=d,this.pitch=Math.min(this.pitch,d))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(d){d===void 0?d=!0:d===null&&(d=!1),this._renderWorldCopies=d}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(d){const y=-s.b5(d,-180,180)*Math.PI/180;this.angle!==y&&(this._unmodified=!1,this.angle=y,this._calcMatrices(),this.rotationMatrix=function(){var A=new s.A(4);return s.A!=Float32Array&&(A[1]=0,A[2]=0),A[0]=1,A[3]=1,A}(),function(A,k,D){var H=k[0],G=k[1],K=k[2],ee=k[3],re=Math.sin(D),se=Math.cos(D);A[0]=H*se+K*re,A[1]=G*se+ee*re,A[2]=H*-re+K*se,A[3]=G*-re+ee*se}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(d){const y=s.ad(d,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==y&&(this._unmodified=!1,this._pitch=y,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(d){d=Math.max(.01,Math.min(60,d)),this._fov!==d&&(this._unmodified=!1,this._fov=d/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(d){const y=Math.min(Math.max(d,this.minZoom),this.maxZoom);this._zoom!==y&&(this._unmodified=!1,this._zoom=y,this.tileZoom=Math.max(0,Math.floor(y)),this.scale=this.zoomScale(y),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(d){d.lat===this._center.lat&&d.lng===this._center.lng||(this._unmodified=!1,this._center=d,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(d){d!==this._elevation&&(this._elevation=d,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(d){this._edgeInsets.equals(d)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,d,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(d){return this._edgeInsets.equals(d)}interpolatePadding(d,y,A){this._unmodified=!1,this._edgeInsets.interpolate(d,y,A),this._constrain(),this._calcMatrices()}coveringZoomLevel(d){const y=(d.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/d.tileSize));return Math.max(0,y)}getVisibleUnwrappedCoordinates(d){const y=[new s.b6(0,d)];if(this._renderWorldCopies){const A=this.pointCoordinate(new s.P(0,0)),k=this.pointCoordinate(new s.P(this.width,0)),D=this.pointCoordinate(new s.P(this.width,this.height)),H=this.pointCoordinate(new s.P(0,this.height)),G=Math.floor(Math.min(A.x,k.x,D.x,H.x)),K=Math.floor(Math.max(A.x,k.x,D.x,H.x)),ee=1;for(let re=G-ee;re<=K+ee;re++)re!==0&&y.push(new s.b6(re,d))}return y}coveringTiles(d){var y,A;let k=this.coveringZoomLevel(d);const D=k;if(d.minzoom!==void 0&&k<d.minzoom)return[];d.maxzoom!==void 0&&k>d.maxzoom&&(k=d.maxzoom);const H=this.pointCoordinate(this.getCameraPoint()),G=s.U.fromLngLat(this.center),K=Math.pow(2,k),ee=[K*H.x,K*H.y,0],re=[K*G.x,K*G.y,0],se=zo.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,k);let be=d.minzoom||0;!d.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(be=k);const Le=d.terrain?2/Math.min(this.tileSize,d.tileSize)*this.tileSize:3,Re=Ge=>({aabb:new Cd([Ge*K,0,0],[(Ge+1)*K,K,0]),zoom:0,x:0,y:0,wrap:Ge,fullyVisible:!1}),$e=[],ke=[],at=k,Mt=d.reparseOverscaled?D:k;if(this._renderWorldCopies)for(let Ge=1;Ge<=3;Ge++)$e.push(Re(-Ge)),$e.push(Re(Ge));for($e.push(Re(0));$e.length>0;){const Ge=$e.pop(),ft=Ge.x,At=Ge.y;let Pt=Ge.fullyVisible;if(!Pt){const In=Ge.aabb.intersects(se);if(In===0)continue;Pt=In===2}const qt=d.terrain?ee:re,wt=Ge.aabb.distanceX(qt),Xt=Ge.aabb.distanceY(qt),ln=Math.max(Math.abs(wt),Math.abs(Xt));if(Ge.zoom===at||ln>Le+(1<<at-Ge.zoom)-2&&Ge.zoom>=be){const In=at-Ge.zoom,Pr=ee[0]-.5-(ft<<In),dn=ee[1]-.5-(At<<In);ke.push({tileID:new s.O(Ge.zoom===at?Mt:Ge.zoom,Ge.wrap,Ge.zoom,ft,At),distanceSq:B([re[0]-.5-ft,re[1]-.5-At]),tileDistanceToCamera:Math.sqrt(Pr*Pr+dn*dn)})}else for(let In=0;In<4;In++){const Pr=(ft<<1)+In%2,dn=(At<<1)+(In>>1),Zn=Ge.zoom+1;let Rn=Ge.aabb.quadrant(In);if(d.terrain){const Qr=new s.O(Zn,Ge.wrap,Zn,Pr,dn),Er=d.terrain.getMinMaxElevation(Qr),vr=(y=Er.minElevation)!==null&&y!==void 0?y:this.elevation,Tr=(A=Er.maxElevation)!==null&&A!==void 0?A:this.elevation;Rn=new Cd([Rn.min[0],Rn.min[1],vr],[Rn.max[0],Rn.max[1],Tr])}$e.push({aabb:Rn,zoom:Zn,x:Pr,y:dn,wrap:Ge.wrap,fullyVisible:Pt})}}return ke.sort((Ge,ft)=>Ge.distanceSq-ft.distanceSq).map(Ge=>Ge.tileID)}resize(d,y){this.width=d,this.height=y,this.pixelsToGLUnits=[2/d,-2/y],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(d){return Math.pow(2,d)}scaleZoom(d){return Math.log(d)/Math.LN2}project(d){const y=s.ad(d.lat,-this.maxValidLatitude,this.maxValidLatitude);return new s.P(s.G(d.lng)*this.worldSize,s.H(y)*this.worldSize)}unproject(d){return new s.U(d.x/this.worldSize,d.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(d){const y=this.pointLocation(this.centerPoint,d),A=d.getElevationForLngLatZoom(y,this.tileZoom);if(!(this.elevation-A))return;const k=this.getCameraPosition(),D=s.U.fromLngLat(k.lngLat,k.altitude),H=s.U.fromLngLat(y,A),G=D.x-H.x,K=D.y-H.y,ee=D.z-H.z,re=Math.sqrt(G*G+K*K+ee*ee),se=this.scaleZoom(this.cameraToCenterDistance/re/this.tileSize);this._elevation=A,this._center=y,this.zoom=se}setLocationAtPoint(d,y){const A=this.pointCoordinate(y),k=this.pointCoordinate(this.centerPoint),D=this.locationCoordinate(d),H=new s.U(D.x-(A.x-k.x),D.y-(A.y-k.y));this.center=this.coordinateLocation(H),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(d,y){return y?this.coordinatePoint(this.locationCoordinate(d),y.getElevationForLngLatZoom(d,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(d))}pointLocation(d,y){return this.coordinateLocation(this.pointCoordinate(d,y))}locationCoordinate(d){return s.U.fromLngLat(d)}coordinateLocation(d){return d&&d.toLngLat()}pointCoordinate(d,y){if(y){const be=y.pointCoordinate(d);if(be!=null)return be}const A=[d.x,d.y,0,1],k=[d.x,d.y,1,1];s.ag(A,A,this.pixelMatrixInverse),s.ag(k,k,this.pixelMatrixInverse);const D=A[3],H=k[3],G=A[1]/D,K=k[1]/H,ee=A[2]/D,re=k[2]/H,se=ee===re?0:(0-ee)/(re-ee);return new s.U(s.B.number(A[0]/D,k[0]/H,se)/this.worldSize,s.B.number(G,K,se)/this.worldSize)}coordinatePoint(d,y=0,A=this.pixelMatrix){const k=[d.x*this.worldSize,d.y*this.worldSize,y,1];return s.ag(k,k,A),new s.P(k[0]/k[3],k[1]/k[3])}getBounds(){const d=Math.max(0,this.height/2-this.getHorizon());return new rt().extend(this.pointLocation(new s.P(0,d))).extend(this.pointLocation(new s.P(this.width,d))).extend(this.pointLocation(new s.P(this.width,this.height))).extend(this.pointLocation(new s.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new rt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(d){d?(this.lngRange=[d.getWest(),d.getEast()],this.latRange=[d.getSouth(),d.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(d,y=!1){const A=d.key,k=y?this._alignedPosMatrixCache:this._posMatrixCache;if(k[A])return k[A];const D=d.canonical,H=this.worldSize/this.zoomScale(D.z),G=D.x+Math.pow(2,D.z)*d.wrap,K=s.ao(new Float64Array(16));return s.$(K,K,[G*H,D.y*H,0]),s.a0(K,K,[H/s.N,H/s.N,1]),s.a1(K,y?this.alignedProjMatrix:this.projMatrix,K),k[A]=new Float32Array(K),k[A]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let d,y,A,k,D=-90,H=90,G=-180,K=180;const ee=this.size,re=this._unmodified;if(this.latRange){const Le=this.latRange;D=s.H(Le[1])*this.worldSize,H=s.H(Le[0])*this.worldSize,d=H-D<ee.y?ee.y/(H-D):0}if(this.lngRange){const Le=this.lngRange;G=s.b5(s.G(Le[0])*this.worldSize,0,this.worldSize),K=s.b5(s.G(Le[1])*this.worldSize,0,this.worldSize),K<G&&(K+=this.worldSize),y=K-G<ee.x?ee.x/(K-G):0}const se=this.point,be=Math.max(y||0,d||0);if(be)return this.center=this.unproject(new s.P(y?(K+G)/2:se.x,d?(H+D)/2:se.y)),this.zoom+=this.scaleZoom(be),this._unmodified=re,void(this._constraining=!1);if(this.latRange){const Le=se.y,Re=ee.y/2;Le-Re<D&&(k=D+Re),Le+Re>H&&(k=H-Re)}if(this.lngRange){const Le=(G+K)/2,Re=s.b5(se.x,Le-this.worldSize/2,Le+this.worldSize/2),$e=ee.x/2;Re-$e<G&&(A=G+$e),Re+$e>K&&(A=K-$e)}A===void 0&&k===void 0||(this.center=this.unproject(new s.P(A!==void 0?A:se.x,k!==void 0?k:se.y)).wrap()),this._unmodified=re,this._constraining=!1}_calcMatrices(){if(!this.height)return;const d=this.centerOffset,y=this.point.x,A=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=s.b7(1,this.center.lat)*this.worldSize;let k=s.ao(new Float64Array(16));s.a0(k,k,[this.width/2,-this.height/2,1]),s.$(k,k,[1,-1,0]),this.labelPlaneMatrix=k,k=s.ao(new Float64Array(16)),s.a0(k,k,[1,-1,1]),s.$(k,k,[-1,-1,0]),s.a0(k,k,[2/this.width,2/this.height,1]),this.glCoordMatrix=k;const D=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),H=Math.min(this.elevation,this._minEleveationForCurrentTile),G=D-H*this._pixelPerMeter/Math.cos(this._pitch),K=H<0?G:D,ee=Math.PI/2+this._pitch,re=this._fov*(.5+d.y/this.height),se=Math.sin(re)*K/Math.sin(s.ad(Math.PI-ee-re,.01,Math.PI-.01)),be=this.getHorizon(),Le=2*Math.atan(be/this.cameraToCenterDistance)*(.5+d.y/(2*be)),Re=Math.sin(Le)*K/Math.sin(s.ad(Math.PI-ee-Le,.01,Math.PI-.01)),$e=Math.min(se,Re),ke=1.01*(Math.cos(Math.PI/2-this._pitch)*$e+K),at=this.height/50;k=new Float64Array(16),s.b8(k,this._fov,this.width/this.height,at,ke),k[8]=2*-d.x/this.width,k[9]=2*d.y/this.height,s.a0(k,k,[1,-1,1]),s.$(k,k,[0,0,-this.cameraToCenterDistance]),s.b9(k,k,this._pitch),s.ae(k,k,this.angle),s.$(k,k,[-y,-A,0]),this.mercatorMatrix=s.a0([],k,[this.worldSize,this.worldSize,this.worldSize]),s.a0(k,k,[1,1,this._pixelPerMeter]),this.pixelMatrix=s.a1(new Float64Array(16),this.labelPlaneMatrix,k),s.$(k,k,[0,0,-this.elevation]),this.projMatrix=k,this.invProjMatrix=s.as([],k),this.pixelMatrix3D=s.a1(new Float64Array(16),this.labelPlaneMatrix,k);const Mt=this.width%2/2,Ge=this.height%2/2,ft=Math.cos(this.angle),At=Math.sin(this.angle),Pt=y-Math.round(y)+ft*Mt+At*Ge,qt=A-Math.round(A)+ft*Ge+At*Mt,wt=new Float64Array(k);if(s.$(wt,wt,[Pt>.5?Pt-1:Pt,qt>.5?qt-1:qt,0]),this.alignedProjMatrix=wt,k=s.as(new Float64Array(16),this.pixelMatrix),!k)throw new Error("failed to invert matrix");this.pixelMatrixInverse=k,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const d=this.pointCoordinate(new s.P(0,0)),y=[d.x*this.worldSize,d.y*this.worldSize,0,1];return s.ag(y,y,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const d=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(0,d))}getCameraQueryGeometry(d){const y=this.getCameraPoint();if(d.length===1)return[d[0],y];{let A=y.x,k=y.y,D=y.x,H=y.y;for(const G of d)A=Math.min(A,G.x),k=Math.min(k,G.y),D=Math.max(D,G.x),H=Math.max(H,G.y);return[new s.P(A,k),new s.P(D,k),new s.P(D,H),new s.P(A,H),new s.P(A,k)]}}}function Tl(L,d){let y,A=!1,k=null,D=null;const H=()=>{k=null,A&&(L.apply(D,y),k=setTimeout(H,d),A=!1)};return(...G)=>(A=!0,D=this,y=G,k||H(),k)}class sc{constructor(d){this._getCurrentHash=()=>{const y=window.location.hash.replace("#","");if(this._hashName){let A;return y.split("&").map(k=>k.split("=")).forEach(k=>{k[0]===this._hashName&&(A=k)}),(A&&A[1]||"").split("/")}return y.split("/")},this._onHashChange=()=>{const y=this._getCurrentHash();if(y.length>=3&&!y.some(A=>isNaN(A))){const A=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(y[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+y[2],+y[1]],zoom:+y[0],bearing:A,pitch:+(y[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const y=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,y)}catch{}},this._updateHash=Tl(this._updateHashUnthrottled,300),this._hashName=d&&encodeURIComponent(d)}addTo(d){return this._map=d,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(d){const y=this._map.getCenter(),A=Math.round(100*this._map.getZoom())/100,k=Math.ceil((A*Math.LN2+Math.log(512/360/.5))/Math.LN10),D=Math.pow(10,k),H=Math.round(y.lng*D)/D,G=Math.round(y.lat*D)/D,K=this._map.getBearing(),ee=this._map.getPitch();let re="";if(re+=d?`/${H}/${G}/${A}`:`${A}/${G}/${H}`,(K||ee)&&(re+="/"+Math.round(10*K)/10),ee&&(re+=`/${Math.round(ee)}`),this._hashName){const se=this._hashName;let be=!1;const Le=window.location.hash.slice(1).split("&").map(Re=>{const $e=Re.split("=")[0];return $e===se?(be=!0,`${$e}=${re}`):Re}).filter(Re=>Re);return be||Le.push(`${se}=${re}`),`#${Le.join("&")}`}return`#${re}`}}const Bs={linearity:.3,easing:s.ba(0,0,.3,1)},Sm=s.e({deceleration:2500,maxSpeed:1400},Bs),Ad=s.e({deceleration:20,maxSpeed:1400},Bs),Uy=s.e({deceleration:1e3,maxSpeed:360},Bs),Mm=s.e({deceleration:1e3,maxSpeed:90},Bs);class Wi{constructor(d){this._map=d,this.clear()}clear(){this._inertiaBuffer=[]}record(d){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.h.now(),settings:d})}_drainInertiaBuffer(){const d=this._inertiaBuffer,y=s.h.now();for(;d.length>0&&y-d[0].time>160;)d.shift()}_onMoveEnd(d){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const y={zoom:0,bearing:0,pitch:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:D}of this._inertiaBuffer)y.zoom+=D.zoomDelta||0,y.bearing+=D.bearingDelta||0,y.pitch+=D.pitchDelta||0,D.panDelta&&y.pan._add(D.panDelta),D.around&&(y.around=D.around),D.pinchAround&&(y.pinchAround=D.pinchAround);const A=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,k={};if(y.pan.mag()){const D=Pd(y.pan.mag(),A,s.e({},Sm,d||{}));k.offset=y.pan.mult(D.amount/y.pan.mag()),k.center=this._map.transform.center,Sa(k,D)}if(y.zoom){const D=Pd(y.zoom,A,Ad);k.zoom=this._map.transform.zoom+D.amount,Sa(k,D)}if(y.bearing){const D=Pd(y.bearing,A,Uy);k.bearing=this._map.transform.bearing+s.ad(D.amount,-179,179),Sa(k,D)}if(y.pitch){const D=Pd(y.pitch,A,Mm);k.pitch=this._map.transform.pitch+D.amount,Sa(k,D)}if(k.zoom||k.bearing){const D=y.pinchAround===void 0?y.around:y.pinchAround;k.around=D?this._map.unproject(D):this._map.getCenter()}return this.clear(),s.e(k,{noMoveStart:!0})}}function Sa(L,d){(!L.duration||L.duration<d.duration)&&(L.duration=d.duration,L.easing=d.easing)}function Pd(L,d,y){const{maxSpeed:A,linearity:k,deceleration:D}=y,H=s.ad(L*k/(d/1e3),-A,A),G=Math.abs(H)/(D*k);return{easing:y.easing,duration:1e3*G,amount:H*(G/2)}}class $s extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(d,y,A,k={}){const D=c.mousePos(y.getCanvasContainer(),A),H=y.unproject(D);super(d,s.e({point:D,lngLat:H,originalEvent:A},k)),this._defaultPrevented=!1,this.target=y}}class Lu extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(d,y,A){const k=d==="touchend"?A.changedTouches:A.touches,D=c.touchPos(y.getCanvasContainer(),k),H=D.map(K=>y.unproject(K)),G=D.reduce((K,ee,re,se)=>K.add(ee.div(se.length)),new s.P(0,0));super(d,{points:D,point:G,lngLats:H,lngLat:y.unproject(G),originalEvent:A}),this._defaultPrevented=!1}}class Ma extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(d,y,A){super(d,{originalEvent:A}),this._defaultPrevented=!1}}class kd{constructor(d,y){this._map=d,this._clickTolerance=y.clickTolerance}reset(){delete this._mousedownPos}wheel(d){return this._firePreventable(new Ma(d.type,this._map,d))}mousedown(d,y){return this._mousedownPos=y,this._firePreventable(new $s(d.type,this._map,d))}mouseup(d){this._map.fire(new $s(d.type,this._map,d))}click(d,y){this._mousedownPos&&this._mousedownPos.dist(y)>=this._clickTolerance||this._map.fire(new $s(d.type,this._map,d))}dblclick(d){return this._firePreventable(new $s(d.type,this._map,d))}mouseover(d){this._map.fire(new $s(d.type,this._map,d))}mouseout(d){this._map.fire(new $s(d.type,this._map,d))}touchstart(d){return this._firePreventable(new Lu(d.type,this._map,d))}touchmove(d){this._map.fire(new Lu(d.type,this._map,d))}touchend(d){this._map.fire(new Lu(d.type,this._map,d))}touchcancel(d){this._map.fire(new Lu(d.type,this._map,d))}_firePreventable(d){if(this._map.fire(d),d.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class no{constructor(d){this._map=d}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(d){this._map.fire(new $s(d.type,this._map,d))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new $s("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(d){this._delayContextMenu?this._contextMenuEvent=d:this._ignoreContextMenu||this._map.fire(new $s(d.type,this._map,d)),this._map.listens("contextmenu")&&d.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Hi{constructor(d){this._map=d}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(d){return this.transform.pointLocation(s.P.convert(d),this._map.terrain)}}class Fo{constructor(d,y){this._map=d,this._tr=new Hi(d),this._el=d.getCanvasContainer(),this._container=d.getContainer(),this._clickTolerance=y.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(d,y){this.isEnabled()&&d.shiftKey&&d.button===0&&(c.disableDrag(),this._startPos=this._lastPos=y,this._active=!0)}mousemoveWindow(d,y){if(!this._active)return;const A=y;if(this._lastPos.equals(A)||!this._box&&A.dist(this._startPos)<this._clickTolerance)return;const k=this._startPos;this._lastPos=A,this._box||(this._box=c.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",d));const D=Math.min(k.x,A.x),H=Math.max(k.x,A.x),G=Math.min(k.y,A.y),K=Math.max(k.y,A.y);c.setTransform(this._box,`translate(${D}px,${G}px)`),this._box.style.width=H-D+"px",this._box.style.height=K-G+"px"}mouseupWindow(d,y){if(!this._active||d.button!==0)return;const A=this._startPos,k=y;if(this.reset(),c.suppressClick(),A.x!==k.x||A.y!==k.y)return this._map.fire(new s.k("boxzoomend",{originalEvent:d})),{cameraAnimation:D=>D.fitScreenCoordinates(A,k,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",d)}keydown(d){this._active&&d.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",d))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(c.remove(this._box),this._box=null),c.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(d,y){return this._map.fire(new s.k(d,{originalEvent:y}))}}function js(L,d){if(L.length!==d.length)throw new Error(`The number of touches and points are not equal - touches ${L.length}, points ${d.length}`);const y={};for(let A=0;A<L.length;A++)y[L[A].identifier]=d[A];return y}class Ea{constructor(d){this.reset(),this.numTouches=d.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(d,y,A){(this.centroid||A.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=d.timeStamp),A.length===this.numTouches&&(this.centroid=function(k){const D=new s.P(0,0);for(const H of k)D._add(H);return D.div(k.length)}(y),this.touches=js(A,y)))}touchmove(d,y,A){if(this.aborted||!this.centroid)return;const k=js(A,y);for(const D in this.touches){const H=k[D];(!H||H.dist(this.touches[D])>30)&&(this.aborted=!0)}}touchend(d,y,A){if((!this.centroid||d.timeStamp-this.startTime>500)&&(this.aborted=!0),A.length===0){const k=!this.aborted&&this.centroid;if(this.reset(),k)return k}}}class Du{constructor(d){this.singleTap=new Ea(d),this.numTaps=d.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(d,y,A){this.singleTap.touchstart(d,y,A)}touchmove(d,y,A){this.singleTap.touchmove(d,y,A)}touchend(d,y,A){const k=this.singleTap.touchend(d,y,A);if(k){const D=d.timeStamp-this.lastTime<500,H=!this.lastTap||this.lastTap.dist(k)<30;if(D&&H||this.reset(),this.count++,this.lastTime=d.timeStamp,this.lastTap=k,this.count===this.numTaps)return this.reset(),k}}}class Dc{constructor(d){this._tr=new Hi(d),this._zoomIn=new Du({numTouches:1,numTaps:2}),this._zoomOut=new Du({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(d,y,A){this._zoomIn.touchstart(d,y,A),this._zoomOut.touchstart(d,y,A)}touchmove(d,y,A){this._zoomIn.touchmove(d,y,A),this._zoomOut.touchmove(d,y,A)}touchend(d,y,A){const k=this._zoomIn.touchend(d,y,A),D=this._zoomOut.touchend(d,y,A),H=this._tr;return k?(this._active=!0,d.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:G=>G.easeTo({duration:300,zoom:H.zoom+1,around:H.unproject(k)},{originalEvent:d})}):D?(this._active=!0,d.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:G=>G.easeTo({duration:300,zoom:H.zoom-1,around:H.unproject(D)},{originalEvent:d})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gi{constructor(d){this._enabled=!!d.enable,this._moveStateManager=d.moveStateManager,this._clickTolerance=d.clickTolerance||1,this._moveFunction=d.move,this._activateOnStart=!!d.activateOnStart,d.assignEvents(this),this.reset()}reset(d){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(d)}_move(...d){const y=this._moveFunction(...d);if(y.bearingDelta||y.pitchDelta||y.around||y.panDelta)return this._active=!0,y}dragStart(d,y){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(d)&&(this._moveStateManager.startMove(d),this._lastPoint=y.length?y[0]:y,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(d,y){if(!this.isEnabled())return;const A=this._lastPoint;if(!A)return;if(d.preventDefault(),!this._moveStateManager.isValidMoveEvent(d))return void this.reset(d);const k=y.length?y[0]:y;return!this._moved&&k.dist(A)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=k,this._move(A,k))}dragEnd(d){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(d)&&(this._moved&&c.suppressClick(),this.reset(d))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Vy={0:1,2:2};class Xh{constructor(d){this._correctEvent=d.checkCorrectEvent}startMove(d){const y=c.mouseButton(d);this._eventButton=y}endMove(d){delete this._eventButton}isValidStartEvent(d){return this._correctEvent(d)}isValidMoveEvent(d){return!function(y,A){const k=Vy[A];return y.buttons===void 0||(y.buttons&k)!==k}(d,this._eventButton)}isValidEndEvent(d){return c.mouseButton(d)===this._eventButton}}class Em{constructor(){this._firstTouch=void 0}_isOneFingerTouch(d){return d.targetTouches.length===1}_isSameTouchEvent(d){return d.targetTouches[0].identifier===this._firstTouch}startMove(d){this._firstTouch=d.targetTouches[0].identifier}endMove(d){delete this._firstTouch}isValidStartEvent(d){return this._isOneFingerTouch(d)}isValidMoveEvent(d){return this._isOneFingerTouch(d)&&this._isSameTouchEvent(d)}isValidEndEvent(d){return this._isOneFingerTouch(d)&&this._isSameTouchEvent(d)}}const Ga=L=>{L.mousedown=L.dragStart,L.mousemoveWindow=L.dragMove,L.mouseup=L.dragEnd,L.contextmenu=function(d){d.preventDefault()}},Us=({enable:L,clickTolerance:d,bearingDegreesPerPixelMoved:y=.8})=>{const A=new Xh({checkCorrectEvent:k=>c.mouseButton(k)===0&&k.ctrlKey||c.mouseButton(k)===2});return new Gi({clickTolerance:d,move:(k,D)=>({bearingDelta:(D.x-k.x)*y}),moveStateManager:A,enable:L,assignEvents:Ga})},Vs=({enable:L,clickTolerance:d,pitchDegreesPerPixelMoved:y=-.5})=>{const A=new Xh({checkCorrectEvent:k=>c.mouseButton(k)===0&&k.ctrlKey||c.mouseButton(k)===2});return new Gi({clickTolerance:d,move:(k,D)=>({pitchDelta:(D.y-k.y)*y}),moveStateManager:A,enable:L,assignEvents:Ga})};class wn{constructor(d,y){this._minTouches=d.cooperativeGestures?2:1,this._clickTolerance=d.clickTolerance||1,this._map=y,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(d,y,A){return this._calculateTransform(d,y,A)}touchmove(d,y,A){if(this._map._cooperativeGestures&&(this._minTouches===2&&A.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(d,!1,A.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(A.length<this._minTouches))return d.preventDefault(),this._calculateTransform(d,y,A)}touchend(d,y,A){this._calculateTransform(d,y,A),this._active&&A.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(d,y,A){A.length>0&&(this._active=!0);const k=js(A,y),D=new s.P(0,0),H=new s.P(0,0);let G=0;for(const ee in k){const re=k[ee],se=this._touches[ee];se&&(D._add(re),H._add(re.sub(se)),G++,k[ee]=re)}if(this._touches=k,G<this._minTouches||!H.mag())return;const K=H.div(G);return this._sum._add(K),this._sum.mag()<this._clickTolerance?void 0:{around:D.div(G),panDelta:K}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Id{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(d,y,A){this._firstTwoTouches||A.length<2||(this._firstTwoTouches=[A[0].identifier,A[1].identifier],this._start([y[0],y[1]]))}touchmove(d,y,A){if(!this._firstTwoTouches)return;d.preventDefault();const[k,D]=this._firstTwoTouches,H=Nc(A,y,k),G=Nc(A,y,D);if(!H||!G)return;const K=this._aroundCenter?null:H.add(G).div(2);return this._move([H,G],K,d)}touchend(d,y,A){if(!this._firstTwoTouches)return;const[k,D]=this._firstTwoTouches,H=Nc(A,y,k),G=Nc(A,y,D);H&&G||(this._active&&c.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(d){this._enabled=!0,this._aroundCenter=!!d&&d.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Nc(L,d,y){for(let A=0;A<L.length;A++)if(L[A].identifier===y)return d[A]}function Rd(L,d){return Math.log(L/d)/Math.LN2}class Wy extends Id{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(d){this._startDistance=this._distance=d[0].dist(d[1])}_move(d,y){const A=this._distance;if(this._distance=d[0].dist(d[1]),this._active||!(Math.abs(Rd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Rd(this._distance,A),pinchAround:y}}}function xn(L,d){return 180*L.angleWith(d)/Math.PI}class Tm extends Id{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(d){this._startVector=this._vector=d[0].sub(d[1]),this._minDiameter=d[0].dist(d[1])}_move(d,y){const A=this._vector;if(this._vector=d[0].sub(d[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:xn(this._vector,A),pinchAround:y}}_isBelowThreshold(d){this._minDiameter=Math.min(this._minDiameter,d.mag());const y=25/(Math.PI*this._minDiameter)*360,A=xn(d,this._startVector);return Math.abs(A)<y}}function Cm(L){return Math.abs(L.y)>Math.abs(L.x)}class Hy extends Id{constructor(d){super(),this._map=d}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(d,y,A){super.touchstart(d,y,A),this._currentTouchCount=A.length}_start(d){this._lastPoints=d,Cm(d[0].sub(d[1]))&&(this._valid=!1)}_move(d,y,A){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const k=d[0].sub(this._lastPoints[0]),D=d[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(k,D,A.timeStamp),this._valid?(this._lastPoints=d,this._active=!0,{pitchDelta:(k.y+D.y)/2*-.5}):void 0}gestureBeginsVertically(d,y,A){if(this._valid!==void 0)return this._valid;const k=d.mag()>=2,D=y.mag()>=2;if(!k&&!D)return;if(!k||!D)return this._firstMove===void 0&&(this._firstMove=A),A-this._firstMove<100&&void 0;const H=d.y>0==y.y>0;return Cm(d)&&Cm(y)&&H}}const Od={panStep:100,bearingStep:15,pitchStep:10};class Gy{constructor(d){this._tr=new Hi(d);const y=Od;this._panStep=y.panStep,this._bearingStep=y.bearingStep,this._pitchStep=y.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(d){if(d.altKey||d.ctrlKey||d.metaKey)return;let y=0,A=0,k=0,D=0,H=0;switch(d.keyCode){case 61:case 107:case 171:case 187:y=1;break;case 189:case 109:case 173:y=-1;break;case 37:d.shiftKey?A=-1:(d.preventDefault(),D=-1);break;case 39:d.shiftKey?A=1:(d.preventDefault(),D=1);break;case 38:d.shiftKey?k=1:(d.preventDefault(),H=-1);break;case 40:d.shiftKey?k=-1:(d.preventDefault(),H=1);break;default:return}return this._rotationDisabled&&(A=0,k=0),{cameraAnimation:G=>{const K=this._tr;G.easeTo({duration:300,easeId:"keyboardHandler",easing:Kh,zoom:y?Math.round(K.zoom)+y*(d.shiftKey?2:1):K.zoom,bearing:K.bearing+A*this._bearingStep,pitch:K.pitch+k*this._pitchStep,offset:[-D*this._panStep,-H*this._panStep],center:K.center},{originalEvent:d})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Kh(L){return L*(2-L)}const Zh=4.000244140625;class qy{constructor(d,y){this._onTimeout=A=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(A)},this._map=d,this._tr=new Hi(d),this._el=d.getCanvasContainer(),this._triggerRenderFrame=y,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(d){this._defaultZoomRate=d}setWheelZoomRate(d){this._wheelZoomRate=d}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(d){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!d&&d.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(d){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!d[this._map._metaKey])return;d.preventDefault()}let y=d.deltaMode===WheelEvent.DOM_DELTA_LINE?40*d.deltaY:d.deltaY;const A=s.h.now(),k=A-(this._lastWheelEventTime||0);this._lastWheelEventTime=A,y!==0&&y%Zh==0?this._type="wheel":y!==0&&Math.abs(y)<4?this._type="trackpad":k>400?(this._type=null,this._lastValue=y,this._timeout=setTimeout(this._onTimeout,40,d)):this._type||(this._type=Math.abs(k*y)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,y+=this._lastValue)),d.shiftKey&&y&&(y/=4),this._type&&(this._lastWheelEvent=d,this._delta-=y,this._active||this._start(d)),d.preventDefault()}_start(d){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const y=c.mousePos(this._el,d),A=this._tr;this._around=s.L.convert(this._aroundCenter?A.center:A.unproject(y)),this._aroundPoint=A.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const d=this._tr.transform;if(this._delta!==0){const G=this._type==="wheel"&&Math.abs(this._delta)>Zh?this._wheelZoomRate:this._defaultZoomRate;let K=2/(1+Math.exp(-Math.abs(this._delta*G)));this._delta<0&&K!==0&&(K=1/K);const ee=typeof this._targetZoom=="number"?d.zoomScale(this._targetZoom):d.scale;this._targetZoom=Math.min(d.maxZoom,Math.max(d.minZoom,d.scaleZoom(ee*K))),this._type==="wheel"&&(this._startZoom=d.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const y=typeof this._targetZoom=="number"?this._targetZoom:d.zoom,A=this._startZoom,k=this._easing;let D,H=!1;if(this._type==="wheel"&&A&&k){const G=Math.min((s.h.now()-this._lastWheelEventTime)/200,1),K=k(G);D=s.B.number(A,y,K),G<1?this._frameId||(this._frameId=!0):H=!0}else D=y,H=!0;return this._active=!0,H&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!H,zoomDelta:D-d.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(d){let y=s.bb;if(this._prevEase){const A=this._prevEase,k=(s.h.now()-A.start)/A.duration,D=A.easing(k+.01)-A.easing(k),H=.27/Math.sqrt(D*D+1e-4)*.01,G=Math.sqrt(.0729-H*H);y=s.ba(H,G,.25,1)}return this._prevEase={start:s.h.now(),duration:d,easing:y},y}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ld{constructor(d,y){this._clickZoom=d,this._tapZoom=y}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Am{constructor(d){this._tr=new Hi(d),this.reset()}reset(){this._active=!1}dblclick(d,y){return d.preventDefault(),{cameraAnimation:A=>{A.easeTo({duration:300,zoom:this._tr.zoom+(d.shiftKey?-1:1),around:this._tr.unproject(y)},{originalEvent:d})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Pm{constructor(){this._tap=new Du({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(d,y,A){if(!this._swipePoint)if(this._tapTime){const k=y[0],D=d.timeStamp-this._tapTime<500,H=this._tapPoint.dist(k)<30;D&&H?A.length>0&&(this._swipePoint=k,this._swipeTouch=A[0].identifier):this.reset()}else this._tap.touchstart(d,y,A)}touchmove(d,y,A){if(this._tapTime){if(this._swipePoint){if(A[0].identifier!==this._swipeTouch)return;const k=y[0],D=k.y-this._swipePoint.y;return this._swipePoint=k,d.preventDefault(),this._active=!0,{zoomDelta:D/128}}}else this._tap.touchmove(d,y,A)}touchend(d,y,A){if(this._tapTime)this._swipePoint&&A.length===0&&this.reset();else{const k=this._tap.touchend(d,y,A);k&&(this._tapTime=d.timeStamp,this._tapPoint=k)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class km{constructor(d,y,A){this._el=d,this._mousePan=y,this._touchPan=A}enable(d){this._inertiaOptions=d||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ws{constructor(d,y,A){this._pitchWithRotate=d.pitchWithRotate,this._mouseRotate=y,this._mousePitch=A}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ac{constructor(d,y,A,k){this._el=d,this._touchZoom=y,this._touchRotate=A,this._tapDragZoom=k,this._rotationDisabled=!1,this._enabled=!0}enable(d){this._touchZoom.enable(d),this._rotationDisabled||this._touchRotate.enable(d),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ff=L=>L.zoom||L.drag||L.pitch||L.rotate;class Im extends s.k{}function Jh(L){return L.panDelta&&L.panDelta.mag()||L.zoomDelta||L.bearingDelta||L.pitchDelta}class Rm{constructor(d,y){this.handleWindowEvent=k=>{this.handleEvent(k,`${k.type}Window`)},this.handleEvent=(k,D)=>{if(k.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const H=k.type==="renderFrame"?void 0:k,G={needsRenderFrame:!1},K={},ee={},re=k.touches,se=re?this._getMapTouches(re):void 0,be=se?c.touchPos(this._el,se):c.mousePos(this._el,k);for(const{handlerName:$e,handler:ke,allowed:at}of this._handlers){if(!ke.isEnabled())continue;let Mt;this._blockedByActive(ee,at,$e)?ke.reset():ke[D||k.type]&&(Mt=ke[D||k.type](k,be,se),this.mergeHandlerResult(G,K,Mt,$e,H),Mt&&Mt.needsRenderFrame&&this._triggerRenderFrame()),(Mt||ke.isActive())&&(ee[$e]=ke)}const Le={};for(const $e in this._previousActiveHandlers)ee[$e]||(Le[$e]=H);this._previousActiveHandlers=ee,(Object.keys(Le).length||Jh(G))&&(this._changes.push([G,K,Le]),this._triggerRenderFrame()),(Object.keys(ee).length||Jh(G))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Re}=G;Re&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Re(this._map))},this._map=d,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Wi(d),this._bearingSnap=y.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(y);const A=this._el;this._listeners=[[A,"touchstart",{passive:!0}],[A,"touchmove",{passive:!1}],[A,"touchend",void 0],[A,"touchcancel",void 0],[A,"mousedown",void 0],[A,"mousemove",void 0],[A,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[A,"mouseover",void 0],[A,"mouseout",void 0],[A,"dblclick",void 0],[A,"click",void 0],[A,"keydown",{capture:!1}],[A,"keyup",void 0],[A,"wheel",{passive:!1}],[A,"contextmenu",void 0],[window,"blur",void 0]];for(const[k,D,H]of this._listeners)c.addEventListener(k,D,k===document?this.handleWindowEvent:this.handleEvent,H)}destroy(){for(const[d,y,A]of this._listeners)c.removeEventListener(d,y,d===document?this.handleWindowEvent:this.handleEvent,A)}_addDefaultHandlers(d){const y=this._map,A=y.getCanvasContainer();this._add("mapEvent",new kd(y,d));const k=y.boxZoom=new Fo(y,d);this._add("boxZoom",k),d.interactive&&d.boxZoom&&k.enable();const D=new Dc(y),H=new Am(y);y.doubleClickZoom=new Ld(H,D),this._add("tapZoom",D),this._add("clickZoom",H),d.interactive&&d.doubleClickZoom&&y.doubleClickZoom.enable();const G=new Pm;this._add("tapDragZoom",G);const K=y.touchPitch=new Hy(y);this._add("touchPitch",K),d.interactive&&d.touchPitch&&y.touchPitch.enable(d.touchPitch);const ee=Us(d),re=Vs(d);y.dragRotate=new Ws(d,ee,re),this._add("mouseRotate",ee,["mousePitch"]),this._add("mousePitch",re,["mouseRotate"]),d.interactive&&d.dragRotate&&y.dragRotate.enable();const se=(({enable:at,clickTolerance:Mt})=>{const Ge=new Xh({checkCorrectEvent:ft=>c.mouseButton(ft)===0&&!ft.ctrlKey});return new Gi({clickTolerance:Mt,move:(ft,At)=>({around:At,panDelta:At.sub(ft)}),activateOnStart:!0,moveStateManager:Ge,enable:at,assignEvents:Ga})})(d),be=new wn(d,y);y.dragPan=new km(A,se,be),this._add("mousePan",se),this._add("touchPan",be,["touchZoom","touchRotate"]),d.interactive&&d.dragPan&&y.dragPan.enable(d.dragPan);const Le=new Tm,Re=new Wy;y.touchZoomRotate=new ac(A,Re,Le,G),this._add("touchRotate",Le,["touchPan","touchZoom"]),this._add("touchZoom",Re,["touchPan","touchRotate"]),d.interactive&&d.touchZoomRotate&&y.touchZoomRotate.enable(d.touchZoomRotate);const $e=y.scrollZoom=new qy(y,()=>this._triggerRenderFrame());this._add("scrollZoom",$e,["mousePan"]),d.interactive&&d.scrollZoom&&y.scrollZoom.enable(d.scrollZoom);const ke=y.keyboard=new Gy(y);this._add("keyboard",ke),d.interactive&&d.keyboard&&y.keyboard.enable(),this._add("blockableMapEvent",new no(y))}_add(d,y,A){this._handlers.push({handlerName:d,handler:y,allowed:A}),this._handlersById[d]=y}stop(d){if(!this._updatingCamera){for(const{handler:y}of this._handlers)y.reset();this._inertia.clear(),this._fireEvents({},{},d),this._changes=[]}}isActive(){for(const{handler:d}of this._handlers)if(d.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ff(this._eventsInProgress)||this.isZooming()}_blockedByActive(d,y,A){for(const k in d)if(k!==A&&(!y||y.indexOf(k)<0))return!0;return!1}_getMapTouches(d){const y=[];for(const A of d)this._el.contains(A.target)&&y.push(A);return y}mergeHandlerResult(d,y,A,k,D){if(!A)return;s.e(d,A);const H={handlerName:k,originalEvent:A.originalEvent||D};A.zoomDelta!==void 0&&(y.zoom=H),A.panDelta!==void 0&&(y.drag=H),A.pitchDelta!==void 0&&(y.pitch=H),A.bearingDelta!==void 0&&(y.rotate=H)}_applyChanges(){const d={},y={},A={};for(const[k,D,H]of this._changes)k.panDelta&&(d.panDelta=(d.panDelta||new s.P(0,0))._add(k.panDelta)),k.zoomDelta&&(d.zoomDelta=(d.zoomDelta||0)+k.zoomDelta),k.bearingDelta&&(d.bearingDelta=(d.bearingDelta||0)+k.bearingDelta),k.pitchDelta&&(d.pitchDelta=(d.pitchDelta||0)+k.pitchDelta),k.around!==void 0&&(d.around=k.around),k.pinchAround!==void 0&&(d.pinchAround=k.pinchAround),k.noInertia&&(d.noInertia=k.noInertia),s.e(y,D),s.e(A,H);this._updateMapTransform(d,y,A),this._changes=[]}_updateMapTransform(d,y,A){const k=this._map,D=k._getTransformForUpdate(),H=k.terrain;if(!(Jh(d)||H&&this._terrainMovement))return this._fireEvents(y,A,!0);let{panDelta:G,zoomDelta:K,bearingDelta:ee,pitchDelta:re,around:se,pinchAround:be}=d;be!==void 0&&(se=be),k._stop(!0),se=se||k.transform.centerPoint;const Le=D.pointLocation(G?se.sub(G):se);ee&&(D.bearing+=ee),re&&(D.pitch+=re),K&&(D.zoom+=K),H?this._terrainMovement||!y.drag&&!y.zoom?y.drag&&this._terrainMovement?D.center=D.pointLocation(D.centerPoint.sub(G)):D.setLocationAtPoint(Le,se):(this._terrainMovement=!0,this._map._elevationFreeze=!0,D.setLocationAtPoint(Le,se),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,D.recalculateZoom(k.terrain)})):D.setLocationAtPoint(Le,se),k._applyUpdatedTransform(D),this._map._update(),d.noInertia||this._inertia.record(d),this._fireEvents(y,A,!0)}_fireEvents(d,y,A){const k=Ff(this._eventsInProgress),D=Ff(d),H={};for(const re in d){const{originalEvent:se}=d[re];this._eventsInProgress[re]||(H[`${re}start`]=se),this._eventsInProgress[re]=d[re]}!k&&D&&this._fireEvent("movestart",D.originalEvent);for(const re in H)this._fireEvent(re,H[re]);D&&this._fireEvent("move",D.originalEvent);for(const re in d){const{originalEvent:se}=d[re];this._fireEvent(re,se)}const G={};let K;for(const re in this._eventsInProgress){const{handlerName:se,originalEvent:be}=this._eventsInProgress[re];this._handlersById[se].isActive()||(delete this._eventsInProgress[re],K=y[se]||be,G[`${re}end`]=K)}for(const re in G)this._fireEvent(re,G[re]);const ee=Ff(this._eventsInProgress);if(A&&(k||D)&&!ee){this._updatingCamera=!0;const re=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),se=be=>be!==0&&-this._bearingSnap<be&&be<this._bearingSnap;!re||!re.essential&&s.h.prefersReducedMotion?(this._map.fire(new s.k("moveend",{originalEvent:K})),se(this._map.getBearing())&&this._map.resetNorth()):(se(re.bearing||this._map.getBearing())&&(re.bearing=0),re.freezeElevation=!0,this._map.easeTo(re,{originalEvent:K})),this._updatingCamera=!1}}_fireEvent(d,y){this._map.fire(new s.k(d,y?{originalEvent:y}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(d=>{delete this._frameId,this.handleEvent(new Im("renderFrame",{timeStamp:d})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class tx extends s.E{constructor(d,y){super(),this._renderFrameCallback=()=>{const A=Math.min((s.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(A)),A<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=d,this._bearingSnap=y.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new s.L(this.transform.center.lng,this.transform.center.lat)}setCenter(d,y){return this.jumpTo({center:d},y)}panBy(d,y,A){return d=s.P.convert(d).mult(-1),this.panTo(this.transform.center,s.e({offset:d},y),A)}panTo(d,y,A){return this.easeTo(s.e({center:d},y),A)}getZoom(){return this.transform.zoom}setZoom(d,y){return this.jumpTo({zoom:d},y),this}zoomTo(d,y,A){return this.easeTo(s.e({zoom:d},y),A)}zoomIn(d,y){return this.zoomTo(this.getZoom()+1,d,y),this}zoomOut(d,y){return this.zoomTo(this.getZoom()-1,d,y),this}getBearing(){return this.transform.bearing}setBearing(d,y){return this.jumpTo({bearing:d},y),this}getPadding(){return this.transform.padding}setPadding(d,y){return this.jumpTo({padding:d},y),this}rotateTo(d,y,A){return this.easeTo(s.e({bearing:d},y),A)}resetNorth(d,y){return this.rotateTo(0,s.e({duration:1e3},d),y),this}resetNorthPitch(d,y){return this.easeTo(s.e({bearing:0,pitch:0,duration:1e3},d),y),this}snapToNorth(d,y){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(d,y):this}getPitch(){return this.transform.pitch}setPitch(d,y){return this.jumpTo({pitch:d},y),this}cameraForBounds(d,y){d=rt.convert(d);const A=y&&y.bearing||0;return this._cameraForBoxAndBearing(d.getNorthWest(),d.getSouthEast(),A,y)}_cameraForBoxAndBearing(d,y,A,k){const D={top:0,bottom:0,right:0,left:0};if(typeof(k=s.e({padding:D,offset:[0,0],maxZoom:this.transform.maxZoom},k)).padding=="number"){const At=k.padding;k.padding={top:At,bottom:At,right:At,left:At}}k.padding=s.e(D,k.padding);const H=this.transform,G=H.padding,K=H.project(s.L.convert(d)),ee=H.project(s.L.convert(y)),re=K.rotate(-A*Math.PI/180),se=ee.rotate(-A*Math.PI/180),be=new s.P(Math.max(re.x,se.x),Math.max(re.y,se.y)),Le=new s.P(Math.min(re.x,se.x),Math.min(re.y,se.y)),Re=be.sub(Le),$e=(H.width-(G.left+G.right+k.padding.left+k.padding.right))/Re.x,ke=(H.height-(G.top+G.bottom+k.padding.top+k.padding.bottom))/Re.y;if(ke<0||$e<0)return void s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const at=Math.min(H.scaleZoom(H.scale*Math.min($e,ke)),k.maxZoom),Mt=s.P.convert(k.offset),Ge=new s.P((k.padding.left-k.padding.right)/2,(k.padding.top-k.padding.bottom)/2).rotate(A*Math.PI/180),ft=Mt.add(Ge).mult(H.scale/H.zoomScale(at));return{center:H.unproject(K.add(ee).div(2).sub(ft)),zoom:at,bearing:A}}fitBounds(d,y,A){return this._fitInternal(this.cameraForBounds(d,y),y,A)}fitScreenCoordinates(d,y,A,k,D){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(s.P.convert(d)),this.transform.pointLocation(s.P.convert(y)),A,k),k,D)}_fitInternal(d,y,A){return d?(delete(y=s.e(d,y)).padding,y.linear?this.easeTo(y,A):this.flyTo(y,A)):this}jumpTo(d,y){this.stop();const A=this._getTransformForUpdate();let k=!1,D=!1,H=!1;return"zoom"in d&&A.zoom!==+d.zoom&&(k=!0,A.zoom=+d.zoom),d.center!==void 0&&(A.center=s.L.convert(d.center)),"bearing"in d&&A.bearing!==+d.bearing&&(D=!0,A.bearing=+d.bearing),"pitch"in d&&A.pitch!==+d.pitch&&(H=!0,A.pitch=+d.pitch),d.padding==null||A.isPaddingEqual(d.padding)||(A.padding=d.padding),this._applyUpdatedTransform(A),this.fire(new s.k("movestart",y)).fire(new s.k("move",y)),k&&this.fire(new s.k("zoomstart",y)).fire(new s.k("zoom",y)).fire(new s.k("zoomend",y)),D&&this.fire(new s.k("rotatestart",y)).fire(new s.k("rotate",y)).fire(new s.k("rotateend",y)),H&&this.fire(new s.k("pitchstart",y)).fire(new s.k("pitch",y)).fire(new s.k("pitchend",y)),this.fire(new s.k("moveend",y))}calculateCameraOptionsFromTo(d,y,A,k=0){const D=s.U.fromLngLat(d,y),H=s.U.fromLngLat(A,k),G=H.x-D.x,K=H.y-D.y,ee=H.z-D.z,re=Math.hypot(G,K,ee);if(re===0)throw new Error("Can't calculate camera options with same From and To");const se=Math.hypot(G,K),be=this.transform.scaleZoom(this.transform.cameraToCenterDistance/re/this.transform.tileSize),Le=180*Math.atan2(G,-K)/Math.PI;let Re=180*Math.acos(se/re)/Math.PI;return Re=ee<0?90-Re:90+Re,{center:H.toLngLat(),zoom:be,pitch:Re,bearing:Le}}easeTo(d,y){this._stop(!1,d.easeId),((d=s.e({offset:[0,0],duration:500,easing:s.bb},d)).animate===!1||!d.essential&&s.h.prefersReducedMotion)&&(d.duration=0);const A=this._getTransformForUpdate(),k=this.getZoom(),D=this.getBearing(),H=this.getPitch(),G=this.getPadding(),K="zoom"in d?+d.zoom:k,ee="bearing"in d?this._normalizeBearing(d.bearing,D):D,re="pitch"in d?+d.pitch:H,se="padding"in d?d.padding:A.padding,be=s.P.convert(d.offset);let Le=A.centerPoint.add(be);const Re=A.pointLocation(Le),$e=s.L.convert(d.center||Re);this._normalizeCenter($e);const ke=A.project(Re),at=A.project($e).sub(ke),Mt=A.zoomScale(K-k);let Ge,ft;d.around&&(Ge=s.L.convert(d.around),ft=A.locationPoint(Ge));const At={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||K!==k,this._rotating=this._rotating||D!==ee,this._pitching=this._pitching||re!==H,this._padding=!A.isPaddingEqual(se),this._easeId=d.easeId,this._prepareEase(y,d.noMoveStart,At),this.terrain&&this._prepareElevation($e),this._ease(Pt=>{if(this._zooming&&(A.zoom=s.B.number(k,K,Pt)),this._rotating&&(A.bearing=s.B.number(D,ee,Pt)),this._pitching&&(A.pitch=s.B.number(H,re,Pt)),this._padding&&(A.interpolatePadding(G,se,Pt),Le=A.centerPoint.add(be)),this.terrain&&!d.freezeElevation&&this._updateElevation(Pt),Ge)A.setLocationAtPoint(Ge,ft);else{const qt=A.zoomScale(A.zoom-k),wt=K>k?Math.min(2,Mt):Math.max(.5,Mt),Xt=Math.pow(wt,1-Pt),ln=A.unproject(ke.add(at.mult(Pt*Xt)).mult(qt));A.setLocationAtPoint(A.renderWorldCopies?ln.wrap():ln,Le)}this._applyUpdatedTransform(A),this._fireMoveEvents(y)},Pt=>{this.terrain&&this._finalizeElevation(),this._afterEase(y,Pt)},d),this}_prepareEase(d,y,A={}){this._moving=!0,y||A.moving||this.fire(new s.k("movestart",d)),this._zooming&&!A.zooming&&this.fire(new s.k("zoomstart",d)),this._rotating&&!A.rotating&&this.fire(new s.k("rotatestart",d)),this._pitching&&!A.pitching&&this.fire(new s.k("pitchstart",d))}_prepareElevation(d){this._elevationCenter=d,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(d){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const y=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(d<1&&y!==this._elevationTarget){const A=this._elevationTarget-this._elevationStart;this._elevationStart+=d*(A-(y-(A*d+this._elevationStart))/(1-d)),this._elevationTarget=y}this.transform.elevation=s.B.number(this._elevationStart,this._elevationTarget,d)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(d){if(!this.transformCameraUpdate)return;const y=d.clone(),{center:A,zoom:k,pitch:D,bearing:H,elevation:G}=this.transformCameraUpdate(y);A&&(y.center=A),k!==void 0&&(y.zoom=k),D!==void 0&&(y.pitch=D),H!==void 0&&(y.bearing=H),G!==void 0&&(y.elevation=G),this.transform.apply(y)}_fireMoveEvents(d){this.fire(new s.k("move",d)),this._zooming&&this.fire(new s.k("zoom",d)),this._rotating&&this.fire(new s.k("rotate",d)),this._pitching&&this.fire(new s.k("pitch",d))}_afterEase(d,y){if(this._easeId&&y&&this._easeId===y)return;delete this._easeId;const A=this._zooming,k=this._rotating,D=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,A&&this.fire(new s.k("zoomend",d)),k&&this.fire(new s.k("rotateend",d)),D&&this.fire(new s.k("pitchend",d)),this.fire(new s.k("moveend",d))}flyTo(d,y){if(!d.essential&&s.h.prefersReducedMotion){const Rn=s.F(d,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Rn,y)}this.stop(),d=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.bb},d);const A=this._getTransformForUpdate(),k=this.getZoom(),D=this.getBearing(),H=this.getPitch(),G=this.getPadding(),K="zoom"in d?s.ad(+d.zoom,A.minZoom,A.maxZoom):k,ee="bearing"in d?this._normalizeBearing(d.bearing,D):D,re="pitch"in d?+d.pitch:H,se="padding"in d?d.padding:A.padding,be=A.zoomScale(K-k),Le=s.P.convert(d.offset);let Re=A.centerPoint.add(Le);const $e=A.pointLocation(Re),ke=s.L.convert(d.center||$e);this._normalizeCenter(ke);const at=A.project($e),Mt=A.project(ke).sub(at);let Ge=d.curve;const ft=Math.max(A.width,A.height),At=ft/be,Pt=Mt.mag();if("minZoom"in d){const Rn=s.ad(Math.min(d.minZoom,k,K),A.minZoom,A.maxZoom),Qr=ft/A.zoomScale(Rn-k);Ge=Math.sqrt(Qr/Pt*2)}const qt=Ge*Ge;function wt(Rn){const Qr=(At*At-ft*ft+(Rn?-1:1)*qt*qt*Pt*Pt)/(2*(Rn?At:ft)*qt*Pt);return Math.log(Math.sqrt(Qr*Qr+1)-Qr)}function Xt(Rn){return(Math.exp(Rn)-Math.exp(-Rn))/2}function ln(Rn){return(Math.exp(Rn)+Math.exp(-Rn))/2}const In=wt(!1);let Pr=function(Rn){return ln(In)/ln(In+Ge*Rn)},dn=function(Rn){return ft*((ln(In)*(Xt(Qr=In+Ge*Rn)/ln(Qr))-Xt(In))/qt)/Pt;var Qr},Zn=(wt(!0)-In)/Ge;if(Math.abs(Pt)<1e-6||!isFinite(Zn)){if(Math.abs(ft-At)<1e-6)return this.easeTo(d,y);const Rn=At<ft?-1:1;Zn=Math.abs(Math.log(At/ft))/Ge,dn=function(){return 0},Pr=function(Qr){return Math.exp(Rn*Ge*Qr)}}return d.duration="duration"in d?+d.duration:1e3*Zn/("screenSpeed"in d?+d.screenSpeed/Ge:+d.speed),d.maxDuration&&d.duration>d.maxDuration&&(d.duration=0),this._zooming=!0,this._rotating=D!==ee,this._pitching=re!==H,this._padding=!A.isPaddingEqual(se),this._prepareEase(y,!1),this.terrain&&this._prepareElevation(ke),this._ease(Rn=>{const Qr=Rn*Zn,Er=1/Pr(Qr);A.zoom=Rn===1?K:k+A.scaleZoom(Er),this._rotating&&(A.bearing=s.B.number(D,ee,Rn)),this._pitching&&(A.pitch=s.B.number(H,re,Rn)),this._padding&&(A.interpolatePadding(G,se,Rn),Re=A.centerPoint.add(Le)),this.terrain&&!d.freezeElevation&&this._updateElevation(Rn);const vr=Rn===1?ke:A.unproject(at.add(Mt.mult(dn(Qr))).mult(Er));A.setLocationAtPoint(A.renderWorldCopies?vr.wrap():vr,Re),this._applyUpdatedTransform(A),this._fireMoveEvents(y)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(y)},d),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(d,y){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const A=this._onEaseEnd;delete this._onEaseEnd,A.call(this,y)}if(!d){const A=this.handlers;A&&A.stop(!1)}return this}_ease(d,y,A){A.animate===!1||A.duration===0?(d(1),y()):(this._easeStart=s.h.now(),this._easeOptions=A,this._onEaseFrame=d,this._onEaseEnd=y,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(d,y){d=s.b5(d,-180,180);const A=Math.abs(d-y);return Math.abs(d-360-y)<A&&(d-=360),Math.abs(d+360-y)<A&&(d+=360),d}_normalizeCenter(d){const y=this.transform;if(!y.renderWorldCopies||y.lngRange)return;const A=d.lng-y.center.lng;d.lng+=A>180?-360:A<-180?360:0}queryTerrainElevation(d){return this.terrain?this.terrain.getElevationForLngLatZoom(s.L.convert(d),this.transform.tileZoom)-this.transform.elevation:null}}class Ta{constructor(d={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=y=>{!y||y.sourceDataType!=="metadata"&&y.sourceDataType!=="visibility"&&y.dataType!=="style"&&y.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=d}getDefaultPosition(){return"bottom-right"}onAdd(d){return this._map=d,this._compact=this.options&&this.options.compact,this._container=c.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=c.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=c.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){c.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(d,y){const A=this._map._getUIString(`AttributionControl.${y}`);d.title=A,d.setAttribute("aria-label",A)}_updateAttributions(){if(!this._map.style)return;let d=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?d=d.concat(this.options.customAttribution.map(k=>typeof k!="string"?"":k)):typeof this.options.customAttribution=="string"&&d.push(this.options.customAttribution)),this._map.style.stylesheet){const k=this._map.style.stylesheet;this.styleOwner=k.owner,this.styleId=k.id}const y=this._map.style.sourceCaches;for(const k in y){const D=y[k];if(D.used||D.usedForTerrain){const H=D.getSource();H.attribution&&d.indexOf(H.attribution)<0&&d.push(H.attribution)}}d=d.filter(k=>String(k).trim()),d.sort((k,D)=>k.length-D.length),d=d.filter((k,D)=>{for(let H=D+1;H<d.length;H++)if(d[H].indexOf(k)>=0)return!1;return!0});const A=d.join(" | ");A!==this._attribHTML&&(this._attribHTML=A,d.length?(this._innerContainer.innerHTML=A,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Ei{constructor(d={}){this._updateCompact=()=>{const y=this._container.children;if(y.length){const A=y[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&A.classList.add("maplibregl-compact"):A.classList.remove("maplibregl-compact")}},this.options=d}getDefaultPosition(){return"bottom-left"}onAdd(d){this._map=d,this._compact=this.options&&this.options.compact,this._container=c.create("div","maplibregl-ctrl");const y=c.create("a","maplibregl-ctrl-logo");return y.target="_blank",y.rel="noopener nofollow",y.href="https://maplibre.org/",y.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),y.setAttribute("rel","noopener nofollow"),this._container.appendChild(y),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){c.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Qh{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(d){const y=++this._id;return this._queue.push({callback:d,id:y,cancelled:!1}),y}remove(d){const y=this._currentlyRunning,A=y?this._queue.concat(y):this._queue;for(const k of A)if(k.id===d)return void(k.cancelled=!0)}run(d=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const y=this._currentlyRunning=this._queue;this._queue=[];for(const A of y)if(!A.cancelled&&(A.callback(d),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Om={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Yy=s.Q([{name:"a_pos3d",type:"Int16",components:3}]);class ep extends s.E{constructor(d){super(),this.sourceCache=d,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,d.usedForTerrain=!0,d.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(d,y){this.sourceCache.update(d,y),this._renderableTilesKeys=[];const A={};for(const k of d.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:y}))A[k.key]=!0,this._renderableTilesKeys.push(k.key),this._tiles[k.key]||(k.posMatrix=new Float64Array(16),s.aS(k.posMatrix,0,s.N,0,s.N,0,1),this._tiles[k.key]=new Gt(k,this.tileSize));for(const k in this._tiles)A[k]||delete this._tiles[k]}freeRtt(d){for(const y in this._tiles){const A=this._tiles[y];(!d||A.tileID.equals(d)||A.tileID.isChildOf(d)||d.isChildOf(A.tileID))&&(A.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(d=>this.getTileByID(d))}getTileByID(d){return this._tiles[d]}getTerrainCoords(d){const y={};for(const A of this._renderableTilesKeys){const k=this._tiles[A].tileID;if(k.canonical.equals(d.canonical)){const D=d.clone();D.posMatrix=new Float64Array(16),s.aS(D.posMatrix,0,s.N,0,s.N,0,1),y[A]=D}else if(k.canonical.isChildOf(d.canonical)){const D=d.clone();D.posMatrix=new Float64Array(16);const H=k.canonical.z-d.canonical.z,G=k.canonical.x-(k.canonical.x>>H<<H),K=k.canonical.y-(k.canonical.y>>H<<H),ee=s.N>>H;s.aS(D.posMatrix,0,ee,0,ee,0,1),s.$(D.posMatrix,D.posMatrix,[-G*ee,-K*ee,0]),y[A]=D}else if(d.canonical.isChildOf(k.canonical)){const D=d.clone();D.posMatrix=new Float64Array(16);const H=d.canonical.z-k.canonical.z,G=d.canonical.x-(d.canonical.x>>H<<H),K=d.canonical.y-(d.canonical.y>>H<<H),ee=s.N>>H;s.aS(D.posMatrix,0,s.N,0,s.N,0,1),s.$(D.posMatrix,D.posMatrix,[G*ee,K*ee,0]),s.a0(D.posMatrix,D.posMatrix,[1/2**H,1/2**H,0]),y[A]=D}}return y}getSourceTile(d,y){const A=this.sourceCache._source;let k=d.overscaledZ-this.deltaZoom;if(k>A.maxzoom&&(k=A.maxzoom),k<A.minzoom)return null;this._sourceTileCache[d.key]||(this._sourceTileCache[d.key]=d.scaledTo(k).key);let D=this.sourceCache.getTileByID(this._sourceTileCache[d.key]);if((!D||!D.dem)&&y)for(;k>=A.minzoom&&(!D||!D.dem);)D=this.sourceCache.getTileByID(d.scaledTo(k--).key);return D}tilesAfterTime(d=Date.now()){return Object.values(this._tiles).filter(y=>y.timeAdded>=d)}}class nx{constructor(d,y,A){this.painter=d,this.sourceCache=new ep(y),this.options=A,this.exaggeration=typeof A.exaggeration=="number"?A.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(d,y,A,k=s.N){var D;if(!(y>=0&&y<k&&A>=0&&A<k))return 0;const H=this.getTerrainData(d),G=(D=H.tile)===null||D===void 0?void 0:D.dem;if(!G)return 0;const K=function(Re,$e,ke){var at=$e[0],Mt=$e[1];return Re[0]=ke[0]*at+ke[4]*Mt+ke[12],Re[1]=ke[1]*at+ke[5]*Mt+ke[13],Re}([],[y/k*s.N,A/k*s.N],H.u_terrain_matrix),ee=[K[0]*G.dim,K[1]*G.dim],re=Math.floor(ee[0]),se=Math.floor(ee[1]),be=ee[0]-re,Le=ee[1]-se;return G.get(re,se)*(1-be)*(1-Le)+G.get(re+1,se)*be*(1-Le)+G.get(re,se+1)*(1-be)*Le+G.get(re+1,se+1)*be*Le}getElevationForLngLatZoom(d,y){const{tileID:A,mercatorX:k,mercatorY:D}=this._getOverscaledTileIDFromLngLatZoom(d,y);return this.getElevation(A,k%s.N,D%s.N,s.N)}getElevation(d,y,A,k=s.N){return this.getDEMElevation(d,y,A,k)*this.exaggeration}getTerrainData(d){if(!this._emptyDemTexture){const k=this.painter.context,D=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new j(k,D,k.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new j(k,new s.R({width:1,height:1}),k.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(k.gl.NEAREST,k.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.ao([])}const y=this.sourceCache.getSourceTile(d,!0);if(y&&y.dem&&(!y.demTexture||y.needsTerrainPrepare)){const k=this.painter.context;y.demTexture=this.painter.getTileTexture(y.dem.stride),y.demTexture?y.demTexture.update(y.dem.getPixels(),{premultiply:!1}):y.demTexture=new j(k,y.dem.getPixels(),k.gl.RGBA,{premultiply:!1}),y.demTexture.bind(k.gl.NEAREST,k.gl.CLAMP_TO_EDGE),y.needsTerrainPrepare=!1}const A=y&&y+y.tileID.key+d.key;if(A&&!this._demMatrixCache[A]){const k=this.sourceCache.sourceCache._source.maxzoom;let D=d.canonical.z-y.tileID.canonical.z;d.overscaledZ>d.canonical.z&&(d.canonical.z>=k?D=d.canonical.z-k:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const H=d.canonical.x-(d.canonical.x>>D<<D),G=d.canonical.y-(d.canonical.y>>D<<D),K=s.bc(new Float64Array(16),[1/(s.N<<D),1/(s.N<<D),0]);s.$(K,K,[H*s.N,G*s.N,0]),this._demMatrixCache[d.key]={matrix:K,coord:d}}return{u_depth:2,u_terrain:3,u_terrain_dim:y&&y.dem&&y.dem.dim||1,u_terrain_matrix:A?this._demMatrixCache[d.key].matrix:this._emptyDemMatrix,u_terrain_unpack:y&&y.dem&&y.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(y&&y.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:y}}getFramebuffer(d){const y=this.painter,A=y.width/devicePixelRatio,k=y.height/devicePixelRatio;return!this._fbo||this._fbo.width===A&&this._fbo.height===k||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new j(y.context,{width:A,height:k,data:null},y.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(y.context.gl.NEAREST,y.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new j(y.context,{width:A,height:k,data:null},y.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(y.context.gl.NEAREST,y.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=y.context.createFramebuffer(A,k,!0,!1),this._fbo.depthAttachment.set(y.context.createRenderbuffer(y.context.gl.DEPTH_COMPONENT16,A,k))),this._fbo.colorAttachment.set(d==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const d=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const y=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let D=0,H=0;D<this._coordsTextureSize;D++)for(let G=0;G<this._coordsTextureSize;G++,H+=4)y[H+0]=255&G,y[H+1]=255&D,y[H+2]=G>>8<<4|D>>8,y[H+3]=0;const A=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(y.buffer)),k=new j(d,A,d.gl.RGBA,{premultiply:!1});return k.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),this._coordsTexture=k,k}pointCoordinate(d){const y=new Uint8Array(4),A=this.painter.context,k=A.gl;A.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),k.readPixels(d.x,this.painter.height/devicePixelRatio-d.y-1,1,1,k.RGBA,k.UNSIGNED_BYTE,y),A.bindFramebuffer.set(null);const D=y[0]+(y[2]>>4<<8),H=y[1]+((15&y[2])<<8),G=this.coordsIndex[255-y[3]],K=G&&this.sourceCache.getTileByID(G);if(!K)return null;const ee=this._coordsTextureSize,re=(1<<K.tileID.canonical.z)*ee;return new s.U(this._allowMercatorOverflow(d,(K.tileID.canonical.x*ee+D)/re),(K.tileID.canonical.y*ee+H)/re,this.getElevation(K.tileID,D,H,ee))}getTerrainMesh(){if(this._mesh)return this._mesh;const d=this.painter.context,y=new s.bd,A=new s.b0,k=this.meshSize,D=s.N/k,H=k*k;for(let se=0;se<=k;se++)for(let be=0;be<=k;be++)y.emplaceBack(be*D,se*D,0);for(let se=0;se<H;se+=k+1)for(let be=0;be<k;be++)A.emplaceBack(be+se,k+be+se+1,k+be+se+2),A.emplaceBack(be+se,k+be+se+2,be+se+1);const G=y.length,K=G+2*(k+1);for(const se of[0,1])for(let be=0;be<=k;be++)for(const Le of[0,1])y.emplaceBack(be*D,se*s.N,Le);for(let se=0;se<2*k;se+=2)A.emplaceBack(K+se,K+se+1,K+se+3),A.emplaceBack(K+se,K+se+3,K+se+2),A.emplaceBack(G+se,G+se+3,G+se+1),A.emplaceBack(G+se,G+se+2,G+se+3);const ee=y.length,re=ee+2*(k+1);for(const se of[0,1])for(let be=0;be<=k;be++)for(const Le of[0,1])y.emplaceBack(se*s.N,be*D,Le);for(let se=0;se<2*k;se+=2)A.emplaceBack(ee+se,ee+se+1,ee+se+3),A.emplaceBack(ee+se,ee+se+3,ee+se+2),A.emplaceBack(re+se,re+se+3,re+se+1),A.emplaceBack(re+se,re+se+2,re+se+3);return this._mesh={indexBuffer:d.createIndexBuffer(A),vertexBuffer:d.createVertexBuffer(y,Yy.members),segments:s.S.simpleSegment(0,0,y.length,A.length)},this._mesh}getMeshFrameDelta(d){return 2*Math.PI*s.be/Math.pow(2,d)/5}getMinTileElevationForLngLatZoom(d,y){var A;const{tileID:k}=this._getOverscaledTileIDFromLngLatZoom(d,y);return(A=this.getMinMaxElevation(k).minElevation)!==null&&A!==void 0?A:0}getMinMaxElevation(d){const y=this.getTerrainData(d).tile,A={minElevation:null,maxElevation:null};return y&&y.dem&&(A.minElevation=y.dem.min*this.exaggeration,A.maxElevation=y.dem.max*this.exaggeration),A}_getOverscaledTileIDFromLngLatZoom(d,y){const A=s.U.fromLngLat(d.wrap()),k=(1<<y)*s.N,D=A.x*k,H=A.y*k,G=Math.floor(D/s.N),K=Math.floor(H/s.N);return{tileID:new s.O(y,0,y,G,K),mercatorX:D,mercatorY:H}}_allowMercatorOverflow(d,y){const A=d.x<this.painter.width/2;let k=s.bf(y);const D=this.painter.transform.center.lng;return A&&Math.sign(k)>0&&Math.sign(D)<0||!A&&Math.sign(k)<0&&Math.sign(D)>0?(k=360*Math.sign(D)+k,s.G(k)):y}}class G1{constructor(d,y,A){this._context=d,this._size=y,this._tileSize=A,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const d of this._objects)d.texture.destroy(),d.fbo.destroy()}_createObject(d){const y=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),A=new j(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return A.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),y.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),y.colorAttachment.set(A.texture),{id:d,fbo:y,texture:A,stamp:-1,inUse:!1}}getObjectForId(d){return this._objects[d]}useObject(d){d.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(y=>d.id!==y),this._recentlyUsed.push(d.id)}stampObject(d){d.stamp=++this._stamp}getOrCreateFreeObject(){for(const y of this._recentlyUsed)if(!this._objects[y].inUse)return this._objects[y];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const d=this._createObject(this._objects.length);return this._objects.push(d),d}freeObject(d){d.inUse=!1}freeAllObjects(){for(const d of this._objects)this.freeObject(d)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(d=>!d.inUse)===!1}}const Hs={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Bf{constructor(d,y){this.painter=d,this.terrain=y,this.pool=new G1(d.context,30,y.sourceCache.tileSize*y.qualityFactor)}destruct(){this.pool.destruct()}getTexture(d){return this.pool.getObjectForId(d.rtt[this._stacks.length-1].id).texture}prepareForRender(d,y){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=d._order.filter(A=>!d._layers[A].isHidden(y)),this._coordsDescendingInv={};for(const A in d.sourceCaches){this._coordsDescendingInv[A]={};const k=d.sourceCaches[A].getVisibleCoordinates();for(const D of k){const H=this.terrain.sourceCache.getTerrainCoords(D);for(const G in H)this._coordsDescendingInv[A][G]||(this._coordsDescendingInv[A][G]=[]),this._coordsDescendingInv[A][G].push(H[G])}}this._coordsDescendingInvStr={};for(const A of d._order){const k=d._layers[A],D=k.source;if(Hs[k.type]&&!this._coordsDescendingInvStr[D]){this._coordsDescendingInvStr[D]={};for(const H in this._coordsDescendingInv[D])this._coordsDescendingInvStr[D][H]=this._coordsDescendingInv[D][H].map(G=>G.key).sort().join()}}for(const A of this._renderableTiles)for(const k in this._coordsDescendingInvStr){const D=this._coordsDescendingInvStr[k][A.tileID.key];D&&D!==A.rttCoords[k]&&(A.rtt=[])}}renderLayer(d){if(d.isHidden(this.painter.transform.zoom))return!1;const y=d.type,A=this.painter,k=this._renderableLayerIds[this._renderableLayerIds.length-1]===d.id;if(Hs[y]&&(this._prevType&&Hs[this._prevType]||this._stacks.push([]),this._prevType=y,this._stacks[this._stacks.length-1].push(d.id),!k))return!0;if(Hs[this._prevType]||Hs[y]&&k){this._prevType=y;const D=this._stacks.length-1,H=this._stacks[D]||[];for(const G of this._renderableTiles){if(this.pool.isFull()&&(Vi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(G),G.rtt[D]){const ee=this.pool.getObjectForId(G.rtt[D].id);if(ee.stamp===G.rtt[D].stamp){this.pool.useObject(ee);continue}}const K=this.pool.getOrCreateFreeObject();this.pool.useObject(K),this.pool.stampObject(K),G.rtt[D]={id:K.id,stamp:K.stamp},A.context.bindFramebuffer.set(K.fbo.framebuffer),A.context.clear({color:s.aT.transparent,stencil:0}),A.currentStencilSource=void 0;for(let ee=0;ee<H.length;ee++){const re=A.style._layers[H[ee]],se=re.source?this._coordsDescendingInv[re.source][G.tileID.key]:[G.tileID];A.context.viewport.set([0,0,K.fbo.width,K.fbo.height]),A._renderTileClippingMasks(re,se),A.renderLayer(A,A.style.sourceCaches[re.source],re,se),re.source&&(G.rttCoords[re.source]=this._coordsDescendingInvStr[re.source][G.tileID.key])}}return Vi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Hs[y]}return!1}}const Nn=l,nr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},$f=L=>{L.touchstart=L.dragStart,L.touchmoveWindow=L.dragMove,L.touchend=L.dragEnd},Lm={showCompass:!0,showZoom:!0,visualizePitch:!1};class Dm{constructor(d,y,A=!1){this.mousedown=H=>{this.startMouse(s.e({},H,{ctrlKey:!0,preventDefault:()=>H.preventDefault()}),c.mousePos(this.element,H)),c.addEventListener(window,"mousemove",this.mousemove),c.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=H=>{this.moveMouse(H,c.mousePos(this.element,H))},this.mouseup=H=>{this.mouseRotate.dragEnd(H),this.mousePitch&&this.mousePitch.dragEnd(H),this.offTemp()},this.touchstart=H=>{H.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=c.touchPos(this.element,H.targetTouches)[0],this.startTouch(H,this._startPos),c.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),c.addEventListener(window,"touchend",this.touchend))},this.touchmove=H=>{H.targetTouches.length!==1?this.reset():(this._lastPos=c.touchPos(this.element,H.targetTouches)[0],this.moveTouch(H,this._lastPos))},this.touchend=H=>{H.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const k=d.dragRotate._mouseRotate.getClickTolerance(),D=d.dragRotate._mousePitch.getClickTolerance();this.element=y,this.mouseRotate=Us({clickTolerance:k,enable:!0}),this.touchRotate=(({enable:H,clickTolerance:G,bearingDegreesPerPixelMoved:K=.8})=>{const ee=new Em;return new Gi({clickTolerance:G,move:(re,se)=>({bearingDelta:(se.x-re.x)*K}),moveStateManager:ee,enable:H,assignEvents:$f})})({clickTolerance:k,enable:!0}),this.map=d,A&&(this.mousePitch=Vs({clickTolerance:D,enable:!0}),this.touchPitch=(({enable:H,clickTolerance:G,pitchDegreesPerPixelMoved:K=-.5})=>{const ee=new Em;return new Gi({clickTolerance:G,move:(re,se)=>({pitchDelta:(se.y-re.y)*K}),moveStateManager:ee,enable:H,assignEvents:$f})})({clickTolerance:D,enable:!0})),c.addEventListener(y,"mousedown",this.mousedown),c.addEventListener(y,"touchstart",this.touchstart,{passive:!1}),c.addEventListener(y,"touchcancel",this.reset)}startMouse(d,y){this.mouseRotate.dragStart(d,y),this.mousePitch&&this.mousePitch.dragStart(d,y),c.disableDrag()}startTouch(d,y){this.touchRotate.dragStart(d,y),this.touchPitch&&this.touchPitch.dragStart(d,y),c.disableDrag()}moveMouse(d,y){const A=this.map,{bearingDelta:k}=this.mouseRotate.dragMove(d,y)||{};if(k&&A.setBearing(A.getBearing()+k),this.mousePitch){const{pitchDelta:D}=this.mousePitch.dragMove(d,y)||{};D&&A.setPitch(A.getPitch()+D)}}moveTouch(d,y){const A=this.map,{bearingDelta:k}=this.touchRotate.dragMove(d,y)||{};if(k&&A.setBearing(A.getBearing()+k),this.touchPitch){const{pitchDelta:D}=this.touchPitch.dragMove(d,y)||{};D&&A.setPitch(A.getPitch()+D)}}off(){const d=this.element;c.removeEventListener(d,"mousedown",this.mousedown),c.removeEventListener(d,"touchstart",this.touchstart,{passive:!1}),c.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),c.removeEventListener(window,"touchend",this.touchend),c.removeEventListener(d,"touchcancel",this.reset),this.offTemp()}offTemp(){c.enableDrag(),c.removeEventListener(window,"mousemove",this.mousemove),c.removeEventListener(window,"mouseup",this.mouseup),c.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),c.removeEventListener(window,"touchend",this.touchend)}}let so;function Nm(L,d,y){if(L=new s.L(L.lng,L.lat),d){const A=new s.L(L.lng-360,L.lat),k=new s.L(L.lng+360,L.lat),D=y.locationPoint(L).distSqr(d);y.locationPoint(A).distSqr(d)<D?L=A:y.locationPoint(k).distSqr(d)<D&&(L=k)}for(;Math.abs(L.lng-y.center.lng)>180;){const A=y.locationPoint(L);if(A.x>=0&&A.y>=0&&A.x<=y.width&&A.y<=y.height)break;L.lng>y.center.lng?L.lng-=360:L.lng+=360}return L}const go={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Xy(L,d,y){const A=L.classList;for(const k in go)A.remove(`maplibregl-${y}-anchor-${k}`);A.add(`maplibregl-${y}-anchor-${d}`)}class Cl extends s.E{constructor(d){if(super(),this._onKeyPress=y=>{const A=y.code,k=y.charCode||y.keyCode;A!=="Space"&&A!=="Enter"&&k!==32&&k!==13||this.togglePopup()},this._onMapClick=y=>{const A=y.originalEvent.target,k=this._element;this._popup&&(A===k||k.contains(A))&&this.togglePopup()},this._update=y=>{if(!this._map)return;const A=this._map.loaded()&&!this._map.isMoving();((y==null?void 0:y.type)==="terrain"||(y==null?void 0:y.type)==="render"&&!A)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=Nm(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let k="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?k=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(k=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let D="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?D="rotateX(0deg)":this._pitchAlignment==="map"&&(D=`rotateX(${this._map.getPitch()}deg)`),y&&y.type!=="moveend"||(this._pos=this._pos.round()),c.setTransform(this._element,`${go[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${D} ${k}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const H=this._map.unproject(this._pos),G=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=H.distanceTo(this._lngLat)>20*G?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=y=>{if(!this._isDragging){const A=this._clickTolerance||this._map._clickTolerance;this._isDragging=y.point.dist(this._pointerdownPos)>=A}this._isDragging&&(this._pos=y.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.k("dragstart"))),this.fire(new s.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.k("dragend")),this._state="inactive"},this._addDragHandler=y=>{this._element.contains(y.originalEvent.target)&&(y.preventDefault(),this._positionDelta=y.point.sub(this._pos).add(this._offset),this._pointerdownPos=y.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=d&&d.anchor||"center",this._color=d&&d.color||"#3FB1CE",this._scale=d&&d.scale||1,this._draggable=d&&d.draggable||!1,this._clickTolerance=d&&d.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=d&&d.rotation||0,this._rotationAlignment=d&&d.rotationAlignment||"auto",this._pitchAlignment=d&&d.pitchAlignment&&d.pitchAlignment!=="auto"?d.pitchAlignment:this._rotationAlignment,d&&d.element)this._element=d.element,this._offset=s.P.convert(d&&d.offset||[0,0]);else{this._defaultMarker=!0,this._element=c.create("div"),this._element.setAttribute("aria-label","Map marker");const y=c.createNS("http://www.w3.org/2000/svg","svg"),A=41,k=27;y.setAttributeNS(null,"display","block"),y.setAttributeNS(null,"height",`${A}px`),y.setAttributeNS(null,"width",`${k}px`),y.setAttributeNS(null,"viewBox",`0 0 ${k} ${A}`);const D=c.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"stroke","none"),D.setAttributeNS(null,"stroke-width","1"),D.setAttributeNS(null,"fill","none"),D.setAttributeNS(null,"fill-rule","evenodd");const H=c.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"fill-rule","nonzero");const G=c.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"transform","translate(3.0, 29.0)"),G.setAttributeNS(null,"fill","#000000");const K=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const at of K){const Mt=c.createNS("http://www.w3.org/2000/svg","ellipse");Mt.setAttributeNS(null,"opacity","0.04"),Mt.setAttributeNS(null,"cx","10.5"),Mt.setAttributeNS(null,"cy","5.80029008"),Mt.setAttributeNS(null,"rx",at.rx),Mt.setAttributeNS(null,"ry",at.ry),G.appendChild(Mt)}const ee=c.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"fill",this._color);const re=c.createNS("http://www.w3.org/2000/svg","path");re.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ee.appendChild(re);const se=c.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"opacity","0.25"),se.setAttributeNS(null,"fill","#000000");const be=c.createNS("http://www.w3.org/2000/svg","path");be.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),se.appendChild(be);const Le=c.createNS("http://www.w3.org/2000/svg","g");Le.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Le.setAttributeNS(null,"fill","#FFFFFF");const Re=c.createNS("http://www.w3.org/2000/svg","g");Re.setAttributeNS(null,"transform","translate(8.0, 8.0)");const $e=c.createNS("http://www.w3.org/2000/svg","circle");$e.setAttributeNS(null,"fill","#000000"),$e.setAttributeNS(null,"opacity","0.25"),$e.setAttributeNS(null,"cx","5.5"),$e.setAttributeNS(null,"cy","5.5"),$e.setAttributeNS(null,"r","5.4999962");const ke=c.createNS("http://www.w3.org/2000/svg","circle");ke.setAttributeNS(null,"fill","#FFFFFF"),ke.setAttributeNS(null,"cx","5.5"),ke.setAttributeNS(null,"cy","5.5"),ke.setAttributeNS(null,"r","5.4999962"),Re.appendChild($e),Re.appendChild(ke),H.appendChild(G),H.appendChild(ee),H.appendChild(se),H.appendChild(Le),H.appendChild(Re),y.appendChild(H),y.setAttributeNS(null,"height",A*this._scale+"px"),y.setAttributeNS(null,"width",k*this._scale+"px"),this._element.appendChild(y),this._offset=s.P.convert(d&&d.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",y=>{y.preventDefault()}),this._element.addEventListener("mousedown",y=>{y.preventDefault()}),Xy(this._element,this._anchor,"marker"),d&&d.className)for(const y of d.className.split(" "))this._element.classList.add(y);this._popup=null}addTo(d){return this.remove(),this._map=d,d.getCanvasContainer().appendChild(this._element),d.on("move",this._update),d.on("moveend",this._update),d.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),c.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(d){return this._lngLat=s.L.convert(d),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(d){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),d){if(!("offset"in d.options)){const k=Math.abs(13.5)/Math.SQRT2;d.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[k,-1*(38.1-13.5+k)],"bottom-right":[-k,-1*(38.1-13.5+k)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=d,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const d=this._popup;return d?(d.isOpen()?d.remove():d.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(d){return this._offset=s.P.convert(d),this._update(),this}addClassName(d){this._element.classList.add(d)}removeClassName(d){this._element.classList.remove(d)}toggleClassName(d){return this._element.classList.toggle(d)}setDraggable(d){return this._draggable=!!d,this._map&&(d?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(d){return this._rotation=d||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(d){return this._rotationAlignment=d||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(d){return this._pitchAlignment=d&&d!=="auto"?d:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Ti={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ci=0,zc=!1;const jf={maxWidth:100,unit:"metric"};function Fc(L,d,y){const A=y&&y.maxWidth||100,k=L._container.clientHeight/2,D=L.unproject([0,k]),H=L.unproject([A,k]),G=D.distanceTo(H);if(y&&y.unit==="imperial"){const K=3.2808*G;K>5280?ao(d,A,K/5280,L._getUIString("ScaleControl.Miles")):ao(d,A,K,L._getUIString("ScaleControl.Feet"))}else y&&y.unit==="nautical"?ao(d,A,G/1852,L._getUIString("ScaleControl.NauticalMiles")):G>=1e3?ao(d,A,G/1e3,L._getUIString("ScaleControl.Kilometers")):ao(d,A,G,L._getUIString("ScaleControl.Meters"))}function ao(L,d,y,A){const k=function(D){const H=Math.pow(10,`${Math.floor(D)}`.length-1);let G=D/H;return G=G>=10?10:G>=5?5:G>=3?3:G>=2?2:G>=1?1:function(K){const ee=Math.pow(10,Math.ceil(-Math.log(K)/Math.LN10));return Math.round(K*ee)/ee}(G),H*G}(y);L.style.width=d*(k/y)+"px",L.innerHTML=`${k}&nbsp;${A}`}const Ky={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Zy=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Yo(L){if(L){if(typeof L=="number"){const d=Math.round(Math.abs(L)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,L),"top-left":new s.P(d,d),"top-right":new s.P(-d,d),bottom:new s.P(0,-L),"bottom-left":new s.P(d,-d),"bottom-right":new s.P(-d,-d),left:new s.P(L,0),right:new s.P(-L,0)}}if(L instanceof s.P||Array.isArray(L)){const d=s.P.convert(L);return{center:d,top:d,"top-left":d,"top-right":d,bottom:d,"bottom-left":d,"bottom-right":d,left:d,right:d}}return{center:s.P.convert(L.center||[0,0]),top:s.P.convert(L.top||[0,0]),"top-left":s.P.convert(L["top-left"]||[0,0]),"top-right":s.P.convert(L["top-right"]||[0,0]),bottom:s.P.convert(L.bottom||[0,0]),"bottom-left":s.P.convert(L["bottom-left"]||[0,0]),"bottom-right":s.P.convert(L["bottom-right"]||[0,0]),left:s.P.convert(L.left||[0,0]),right:s.P.convert(L.right||[0,0])}}return Yo(new s.P(0,0))}const cs={extend:(L,...d)=>s.e(L,...d),run(L){L()},logToElement(L,d=!1,y="log"){const A=window.document.getElementById(y);A&&(d&&(A.innerHTML=""),A.innerHTML+=`<br>${L}`)}},zm=l;class Hr{static get version(){return zm}static get workerCount(){return Wt.workerCount}static set workerCount(d){Wt.workerCount=d}static get maxParallelImageRequests(){return s.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(d){s.c.MAX_PARALLEL_IMAGE_REQUESTS=d}static get workerUrl(){return s.c.WORKER_URL}static set workerUrl(d){s.c.WORKER_URL=d}static addProtocol(d,y){s.c.REGISTERED_PROTOCOLS[d]=y}static removeProtocol(d){delete s.c.REGISTERED_PROTOCOLS[d]}}return Hr.Map=class extends tx{constructor(L){if(s.bg.mark(s.bh.create),(L=s.e({},nr,L)).minZoom!=null&&L.maxZoom!=null&&L.minZoom>L.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(L.minPitch!=null&&L.maxPitch!=null&&L.minPitch>L.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(L.minPitch!=null&&L.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(L.maxPitch!=null&&L.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Fs(L.minZoom,L.maxZoom,L.minPitch,L.maxPitch,L.renderWorldCopies),{bearingSnap:L.bearingSnap}),this._cooperativeGesturesOnWheel=d=>{this._onCooperativeGesture(d,d[this._metaKey],1)},this._contextLost=d=>{d.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.k("webglcontextlost",{originalEvent:d}))},this._contextRestored=d=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.k("webglcontextrestored",{originalEvent:d}))},this._onMapScroll=d=>{if(d.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=L.interactive,this._cooperativeGestures=L.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=L.maxTileCacheSize,this._maxTileCacheZoomLevels=L.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=L.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=L.preserveDrawingBuffer,this._antialias=L.antialias,this._trackResize=L.trackResize,this._bearingSnap=L.bearingSnap,this._refreshExpiredTiles=L.refreshExpiredTiles,this._fadeDuration=L.fadeDuration,this._crossSourceCollisions=L.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=L.collectResourceTiming,this._renderTaskQueue=new Qh,this._controls=[],this._mapId=s.a2(),this._locale=s.e({},Om,L.locale),this._clickTolerance=L.clickTolerance,this._overridePixelRatio=L.pixelRatio,this._maxCanvasSize=L.maxCanvasSize,this.transformCameraUpdate=L.transformCameraUpdate,this._imageQueueHandle=M.addThrottleControl(()=>this.isMoving()),this._requestManager=new T(L.transformRequest),typeof L.container=="string"){if(this._container=document.getElementById(L.container),!this._container)throw new Error(`Container '${L.container}' not found.`)}else{if(!(L.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=L.container}if(L.maxBounds&&this.setMaxBounds(L.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let d=!1;const y=Tl(A=>{this._trackResize&&!this._removed&&this.resize(A)._update()},50);this._resizeObserver=new ResizeObserver(A=>{d?y(A):d=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Rm(this,L),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=L.hash&&new sc(typeof L.hash=="string"&&L.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:L.center,zoom:L.zoom,bearing:L.bearing,pitch:L.pitch}),L.bounds&&(this.resize(),this.fitBounds(L.bounds,s.e({},L.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=L.localIdeographFontFamily,this._validateStyle=L.validateStyle,L.style&&this.setStyle(L.style,{localIdeographFontFamily:L.localIdeographFontFamily}),L.attributionControl&&this.addControl(new Ta({customAttribution:L.customAttribution})),L.maplibreLogo&&this.addControl(new Ei,L.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",d=>{this._update(d.dataType==="style"),this.fire(new s.k(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new s.k(`${d.dataType}dataloading`,d))}),this.on("dataabort",d=>{this.fire(new s.k("sourcedataabort",d))})}_getMapId(){return this._mapId}addControl(L,d){if(d===void 0&&(d=L.getDefaultPosition?L.getDefaultPosition():"top-right"),!L||!L.onAdd)return this.fire(new s.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const y=L.onAdd(this);this._controls.push(L);const A=this._controlPositions[d];return d.indexOf("bottom")!==-1?A.insertBefore(y,A.firstChild):A.appendChild(y),this}removeControl(L){if(!L||!L.onRemove)return this.fire(new s.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const d=this._controls.indexOf(L);return d>-1&&this._controls.splice(d,1),L.onRemove(this),this}hasControl(L){return this._controls.indexOf(L)>-1}calculateCameraOptionsFromTo(L,d,y,A){return A==null&&this.terrain&&(A=this.terrain.getElevationForLngLatZoom(y,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(L,d,y,A)}resize(L){var d;const y=this._containerDimensions(),A=y[0],k=y[1],D=this._getClampedPixelRatio(A,k);if(this._resizeCanvas(A,k,D),this.painter.resize(A,k,D),this.painter.overLimit()){const G=this.painter.context.gl;this._maxCanvasSize=[G.drawingBufferWidth,G.drawingBufferHeight];const K=this._getClampedPixelRatio(A,k);this._resizeCanvas(A,k,K),this.painter.resize(A,k,K)}this.transform.resize(A,k),(d=this._requestedCameraState)===null||d===void 0||d.resize(A,k);const H=!this._moving;return H&&(this.stop(),this.fire(new s.k("movestart",L)).fire(new s.k("move",L))),this.fire(new s.k("resize",L)),H&&this.fire(new s.k("moveend",L)),this}_getClampedPixelRatio(L,d){const{0:y,1:A}=this._maxCanvasSize,k=this.getPixelRatio(),D=L*k,H=d*k;return Math.min(D>y?y/D:1,H>A?A/H:1)*k}getPixelRatio(){var L;return(L=this._overridePixelRatio)!==null&&L!==void 0?L:devicePixelRatio}setPixelRatio(L){this._overridePixelRatio=L,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(L){return this.transform.setMaxBounds(rt.convert(L)),this._update()}setMinZoom(L){if((L=L??-2)>=-2&&L<=this.transform.maxZoom)return this.transform.minZoom=L,this._update(),this.getZoom()<L&&this.setZoom(L),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(L){if((L=L??22)>=this.transform.minZoom)return this.transform.maxZoom=L,this._update(),this.getZoom()>L&&this.setZoom(L),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(L){if((L=L??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(L>=0&&L<=this.transform.maxPitch)return this.transform.minPitch=L,this._update(),this.getPitch()<L&&this.setPitch(L),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(L){if((L=L??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(L>=this.transform.minPitch)return this.transform.maxPitch=L,this._update(),this.getPitch()>L&&this.setPitch(L),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(L){return this.transform.renderWorldCopies=L,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(L){return this._cooperativeGestures=L,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(L){return this.transform.locationPoint(s.L.convert(L),this.style&&this.terrain)}unproject(L){return this.transform.pointLocation(s.P.convert(L),this.terrain)}isMoving(){var L;return this._moving||((L=this.handlers)===null||L===void 0?void 0:L.isMoving())}isZooming(){var L;return this._zooming||((L=this.handlers)===null||L===void 0?void 0:L.isZooming())}isRotating(){var L;return this._rotating||((L=this.handlers)===null||L===void 0?void 0:L.isRotating())}_createDelegatedListener(L,d,y){if(L==="mouseenter"||L==="mouseover"){let A=!1;return{layer:d,listener:y,delegates:{mousemove:D=>{const H=this.getLayer(d)?this.queryRenderedFeatures(D.point,{layers:[d]}):[];H.length?A||(A=!0,y.call(this,new $s(L,this,D.originalEvent,{features:H}))):A=!1},mouseout:()=>{A=!1}}}}if(L==="mouseleave"||L==="mouseout"){let A=!1;return{layer:d,listener:y,delegates:{mousemove:H=>{(this.getLayer(d)?this.queryRenderedFeatures(H.point,{layers:[d]}):[]).length?A=!0:A&&(A=!1,y.call(this,new $s(L,this,H.originalEvent)))},mouseout:H=>{A&&(A=!1,y.call(this,new $s(L,this,H.originalEvent)))}}}}{const A=k=>{const D=this.getLayer(d)?this.queryRenderedFeatures(k.point,{layers:[d]}):[];D.length&&(k.features=D,y.call(this,k),delete k.features)};return{layer:d,listener:y,delegates:{[L]:A}}}}on(L,d,y){if(y===void 0)return super.on(L,d);const A=this._createDelegatedListener(L,d,y);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[L]=this._delegatedListeners[L]||[],this._delegatedListeners[L].push(A);for(const k in A.delegates)this.on(k,A.delegates[k]);return this}once(L,d,y){if(y===void 0)return super.once(L,d);const A=this._createDelegatedListener(L,d,y);for(const k in A.delegates)this.once(k,A.delegates[k]);return this}off(L,d,y){return y===void 0?super.off(L,d):(this._delegatedListeners&&this._delegatedListeners[L]&&(A=>{const k=this._delegatedListeners[L];for(let D=0;D<k.length;D++){const H=k[D];if(H.layer===d&&H.listener===y){for(const G in H.delegates)this.off(G,H.delegates[G]);return k.splice(D,1),this}}})(),this)}queryRenderedFeatures(L,d){if(!this.style)return[];let y;const A=L instanceof s.P||Array.isArray(L),k=A?L:[[0,0],[this.transform.width,this.transform.height]];if(d=d||(A?{}:L)||{},k instanceof s.P||typeof k[0]=="number")y=[s.P.convert(k)];else{const D=s.P.convert(k[0]),H=s.P.convert(k[1]);y=[D,new s.P(H.x,D.y),H,new s.P(D.x,H.y),D]}return this.style.queryRenderedFeatures(y,d,this.transform)}querySourceFeatures(L,d){return this.style.querySourceFeatures(L,d)}setStyle(L,d){return(d=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},d)).diff!==!1&&d.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&L?(this._diffStyle(L,d),this):(this._localIdeographFontFamily=d.localIdeographFontFamily,this._updateStyle(L,d))}setTransformRequest(L){return this._requestManager.setTransformRequest(L),this}_getUIString(L){const d=this._locale[L];if(d==null)throw new Error(`Missing UI string '${L}'`);return d}_updateStyle(L,d){if(d.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(L,d));const y=this.style&&d.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!L)),L?(this.style=new tr(this,d||{}),this.style.setEventedParent(this,{style:this.style}),typeof L=="string"?this.style.loadURL(L,d,y):this.style.loadJSON(L,d,y),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new tr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(L,d){if(typeof L=="string"){const y=this._requestManager.transformRequest(L,w.Style);s.f(y,(A,k)=>{A?this.fire(new s.j(A)):k&&this._updateDiff(k,d)})}else typeof L=="object"&&this._updateDiff(L,d)}_updateDiff(L,d){try{this.style.setState(L,d)&&this._update(!0)}catch(y){s.w(`Unable to perform style diff: ${y.message||y.error||y}.  Rebuilding the style from scratch.`),this._updateStyle(L,d)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(L,d){return this._lazyInitEmptyStyle(),this.style.addSource(L,d),this._update(!0)}isSourceLoaded(L){const d=this.style&&this.style.sourceCaches[L];if(d!==void 0)return d.loaded();this.fire(new s.j(new Error(`There is no source with ID '${L}'`)))}setTerrain(L){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),L){const d=this.style.sourceCaches[L.source];if(!d)throw new Error(`cannot load terrain, because there exists no source with ID: ${L.source}`);for(const y in this.style._layers){const A=this.style._layers[y];A.type==="hillshade"&&A.source===L.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new nx(this.painter,d,L),this.painter.renderToTexture=new Bf(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=y=>{y.dataType==="style"?this.terrain.sourceCache.freeRtt():y.dataType==="source"&&y.tile&&(y.sourceId!==L.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(y.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new s.k("terrain",{terrain:L})),this}getTerrain(){var L,d;return(d=(L=this.terrain)===null||L===void 0?void 0:L.options)!==null&&d!==void 0?d:null}areTilesLoaded(){const L=this.style&&this.style.sourceCaches;for(const d in L){const y=L[d]._tiles;for(const A in y){const k=y[A];if(k.state!=="loaded"&&k.state!=="errored")return!1}}return!0}addSourceType(L,d,y){return this._lazyInitEmptyStyle(),this.style.addSourceType(L,d,y)}removeSource(L){return this.style.removeSource(L),this._update(!0)}getSource(L){return this.style.getSource(L)}addImage(L,d,y={}){const{pixelRatio:A=1,sdf:k=!1,stretchX:D,stretchY:H,content:G}=y;if(this._lazyInitEmptyStyle(),!(d instanceof HTMLImageElement||s.a(d))){if(d.width===void 0||d.height===void 0)return this.fire(new s.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:K,height:ee,data:re}=d,se=d;return this.style.addImage(L,{data:new s.R({width:K,height:ee},new Uint8Array(re)),pixelRatio:A,stretchX:D,stretchY:H,content:G,sdf:k,version:0,userImage:se}),se.onAdd&&se.onAdd(this,L),this}}{const{width:K,height:ee,data:re}=s.h.getImageData(d);this.style.addImage(L,{data:new s.R({width:K,height:ee},re),pixelRatio:A,stretchX:D,stretchY:H,content:G,sdf:k,version:0})}}updateImage(L,d){const y=this.style.getImage(L);if(!y)return this.fire(new s.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const A=d instanceof HTMLImageElement||s.a(d)?s.h.getImageData(d):d,{width:k,height:D,data:H}=A;if(k===void 0||D===void 0)return this.fire(new s.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(k!==y.data.width||D!==y.data.height)return this.fire(new s.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const G=!(d instanceof HTMLImageElement||s.a(d));return y.data.replace(H,G),this.style.updateImage(L,y),this}getImage(L){return this.style.getImage(L)}hasImage(L){return L?!!this.style.getImage(L):(this.fire(new s.j(new Error("Missing required image id"))),!1)}removeImage(L){this.style.removeImage(L)}loadImage(L,d){M.getImage(this._requestManager.transformRequest(L,w.Image),d)}listImages(){return this.style.listImages()}addLayer(L,d){return this._lazyInitEmptyStyle(),this.style.addLayer(L,d),this._update(!0)}moveLayer(L,d){return this.style.moveLayer(L,d),this._update(!0)}removeLayer(L){return this.style.removeLayer(L),this._update(!0)}getLayer(L){return this.style.getLayer(L)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(L,d,y){return this.style.setLayerZoomRange(L,d,y),this._update(!0)}setFilter(L,d,y={}){return this.style.setFilter(L,d,y),this._update(!0)}getFilter(L){return this.style.getFilter(L)}setPaintProperty(L,d,y,A={}){return this.style.setPaintProperty(L,d,y,A),this._update(!0)}getPaintProperty(L,d){return this.style.getPaintProperty(L,d)}setLayoutProperty(L,d,y,A={}){return this.style.setLayoutProperty(L,d,y,A),this._update(!0)}getLayoutProperty(L,d){return this.style.getLayoutProperty(L,d)}setGlyphs(L,d={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(L,d),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(L,d,y={}){return this._lazyInitEmptyStyle(),this.style.addSprite(L,d,y,A=>{A||this._update(!0)}),this}removeSprite(L){return this._lazyInitEmptyStyle(),this.style.removeSprite(L),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(L,d={}){return this._lazyInitEmptyStyle(),this.style.setSprite(L,d,y=>{y||this._update(!0)}),this}setLight(L,d={}){return this._lazyInitEmptyStyle(),this.style.setLight(L,d),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(L,d){return this.style.setFeatureState(L,d),this._update()}removeFeatureState(L,d){return this.style.removeFeatureState(L,d),this._update()}getFeatureState(L){return this.style.getFeatureState(L)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let L=0,d=0;return this._container&&(L=this._container.clientWidth||400,d=this._container.clientHeight||300),[L,d]}_setupContainer(){const L=this._container;L.classList.add("maplibregl-map");const d=this._canvasContainer=c.create("div","maplibregl-canvas-container",L);this._interactive&&d.classList.add("maplibregl-interactive"),this._canvas=c.create("canvas","maplibregl-canvas",d),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const y=this._containerDimensions(),A=this._getClampedPixelRatio(y[0],y[1]);this._resizeCanvas(y[0],y[1],A);const k=this._controlContainer=c.create("div","maplibregl-control-container",L),D=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(H=>{D[H]=c.create("div",`maplibregl-ctrl-${H} `,k)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=c.create("div","maplibregl-cooperative-gesture-screen",this._container);let L=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(L=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${L}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){c.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(L,d,y){this._canvas.width=Math.floor(y*L),this._canvas.height=Math.floor(y*d),this._canvas.style.width=`${L}px`,this._canvas.style.height=`${d}px`}_setupPainter(){const L={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let d=null;this._canvas.addEventListener("webglcontextcreationerror",A=>{d={requestedAttributes:L},A&&(d.statusMessage=A.statusMessage,d.type=A.type)},{once:!0});const y=this._canvas.getContext("webgl2",L)||this._canvas.getContext("webgl",L);if(!y){const A="Failed to initialize WebGL";throw d?(d.message=A,new Error(JSON.stringify(d))):new Error(A)}this.painter=new Ou(y,this.transform),h.testSupport(y)}_onCooperativeGesture(L,d,y){return!d&&y<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(L){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||L,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(L){return this._update(),this._renderTaskQueue.add(L)}_cancelRenderFrame(L){this._renderTaskQueue.remove(L)}_render(L){const d=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(L),this._removed)return;let y=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const k=this.transform.zoom,D=s.h.now();this.style.zoomHistory.update(k,D);const H=new s.a8(k,{now:D,fadeDuration:d,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),G=H.crossFadingFactor();G===1&&G===this._crossFadingFactor||(y=!0,this._crossFadingFactor=G),this.style.update(H)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,d,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:d,showPadding:this.showPadding}),this.fire(new s.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.bg.mark(s.bh.load),this.fire(new s.k("load"))),this.style&&(this.style.hasTransitions()||y)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const A=this._sourcesDirty||this._styleDirty||this._placementDirty;return A||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.k("idle")),!this._loaded||this._fullyLoaded||A||(this._fullyLoaded=!0,s.bg.mark(s.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var L;this._hash&&this._hash.remove();for(const y of this._controls)y.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),M.removeThrottleControl(this._imageQueueHandle),(L=this._resizeObserver)===null||L===void 0||L.disconnect();const d=this.painter.context.gl.getExtension("WEBGL_lose_context");d&&d.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),c.remove(this._canvasContainer),c.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),s.bg.clearMetrics(),this._removed=!0,this.fire(new s.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=s.h.frame(L=>{s.bg.frame(L),this._frame=null,this._render(L)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(L){this._showTileBoundaries!==L&&(this._showTileBoundaries=L,this._update())}get showPadding(){return!!this._showPadding}set showPadding(L){this._showPadding!==L&&(this._showPadding=L,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(L){this._showCollisionBoxes!==L&&(this._showCollisionBoxes=L,L?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(L){this._showOverdrawInspector!==L&&(this._showOverdrawInspector=L,this._update())}get repaint(){return!!this._repaint}set repaint(L){this._repaint!==L&&(this._repaint=L,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(L){this._vertices=L,this._update()}get version(){return Nn}getCameraTargetElevation(){return this.transform.elevation}},Hr.NavigationControl=class{constructor(L){this._updateZoomButtons=()=>{const d=this._map.getZoom(),y=d===this._map.getMaxZoom(),A=d===this._map.getMinZoom();this._zoomInButton.disabled=y,this._zoomOutButton.disabled=A,this._zoomInButton.setAttribute("aria-disabled",y.toString()),this._zoomOutButton.setAttribute("aria-disabled",A.toString())},this._rotateCompassArrow=()=>{const d=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=d},this._setButtonTitle=(d,y)=>{const A=this._map._getUIString(`NavigationControl.${y}`);d.title=A,d.setAttribute("aria-label",A)},this.options=s.e({},Lm,L),this._container=c.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",d=>d.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",d=>this._map.zoomIn({},{originalEvent:d})),c.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",d=>this._map.zoomOut({},{originalEvent:d})),c.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",d=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:d}):this._map.resetNorth({},{originalEvent:d})}),this._compassIcon=c.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(L){return this._map=L,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Dm(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){c.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(L,d){const y=c.create("button",L,this._container);return y.type="button",y.addEventListener("click",d),y}},Hr.GeolocateControl=class extends s.E{constructor(L){super(),this._onSuccess=d=>{if(this._map){if(this._isOutOfMapMaxBounds(d))return this._setErrorState(),this.fire(new s.k("outofmaxbounds",d)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=d,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(d),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(d),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.k("geolocate",d)),this._finish()}},this._updateCamera=d=>{const y=new s.L(d.coords.longitude,d.coords.latitude),A=d.coords.accuracy,k=this._map.getBearing(),D=s.e({bearing:k},this.options.fitBoundsOptions),H=rt.fromLngLat(y,A);this._map.fitBounds(H,D,{geolocateSource:!0})},this._updateMarker=d=>{if(d){const y=new s.L(d.coords.longitude,d.coords.latitude);this._accuracyCircleMarker.setLngLat(y).addTo(this._map),this._userLocationDotMarker.setLngLat(y).addTo(this._map),this._accuracy=d.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=d=>{if(this._map){if(this.options.trackUserLocation)if(d.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const y=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=y,this._geolocateButton.setAttribute("aria-label",y),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(d.code===3&&zc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.k("error",d)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=d=>{if(this._map){if(this._container.addEventListener("contextmenu",y=>y.preventDefault()),this._geolocateButton=c.create("button","maplibregl-ctrl-geolocate",this._container),c.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",d===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const y=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=y,this._geolocateButton.setAttribute("aria-label",y)}else{const y=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=y,this._geolocateButton.setAttribute("aria-label",y)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=c.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Cl({element:this._dotElement}),this._circleElement=c.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Cl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",y=>{y.geolocateSource||this._watchState!=="ACTIVE_LOCK"||y.originalEvent&&y.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.k("trackuserlocationend")))})}},this.options=s.e({},Ti,L)}onAdd(L){return this._map=L,this._container=c.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(d,y=!1){so===void 0||y?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(A=>{so=A.state!=="denied",d(so)}).catch(()=>{so=!!window.navigator.geolocation,d(so)}):(so=!!window.navigator.geolocation,d(so)):d(so)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),c.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ci=0,zc=!1}_isOutOfMapMaxBounds(L){const d=this._map.getMaxBounds(),y=L.coords;return d&&(y.longitude<d.getWest()||y.longitude>d.getEast()||y.latitude<d.getSouth()||y.latitude>d.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const L=this._map.getBounds(),d=L.getSouthEast(),y=L.getNorthEast(),A=d.distanceTo(y),k=Math.ceil(this._accuracy/(A/this._map._container.clientHeight)*2);this._circleElement.style.width=`${k}px`,this._circleElement.style.height=`${k}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ci--,zc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let L;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ci++,Ci>1?(L={maximumAge:6e5,timeout:0},zc=!0):(L=this.options.positionOptions,zc=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,L)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Hr.AttributionControl=Ta,Hr.LogoControl=Ei,Hr.ScaleControl=class{constructor(L){this._onMove=()=>{Fc(this._map,this._container,this.options)},this.setUnit=d=>{this.options.unit=d,Fc(this._map,this._container,this.options)},this.options=s.e({},jf,L)}getDefaultPosition(){return"bottom-left"}onAdd(L){return this._map=L,this._container=c.create("div","maplibregl-ctrl maplibregl-ctrl-scale",L.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){c.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Hr.FullscreenControl=class extends s.E{constructor(L={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,L&&L.container&&(L.container instanceof HTMLElement?this._container=L.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(L){return this._map=L,this._container||(this._container=this._map.getContainer()),this._controlContainer=c.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){c.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const L=this._fullscreenButton=c.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);c.create("span","maplibregl-ctrl-icon",L).setAttribute("aria-hidden","true"),L.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const L=this._getTitle();this._fullscreenButton.setAttribute("aria-label",L),this._fullscreenButton.title=L}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new s.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Hr.TerrainControl=class{constructor(L){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=L}onAdd(L){return this._map=L,this._container=c.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=c.create("button","maplibregl-ctrl-terrain",this._container),c.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){c.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Hr.Popup=class extends s.E{constructor(L){super(),this.remove=()=>(this._content&&c.remove(this._content),this._container&&(c.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new s.k("close")),this),this._onMouseUp=d=>{this._update(d.point)},this._onMouseMove=d=>{this._update(d.point)},this._onDrag=d=>{this._update(d.point)},this._update=d=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=c.create("div","maplibregl-popup",this._map.getContainer()),this._tip=c.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const H of this.options.className.split(" "))this._container.classList.add(H);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Nm(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!d)return;const y=this._pos=this._trackPointer&&d?d:this._map.project(this._lngLat);let A=this.options.anchor;const k=Yo(this.options.offset);if(!A){const H=this._container.offsetWidth,G=this._container.offsetHeight;let K;K=y.y+k.bottom.y<G?["top"]:y.y>this._map.transform.height-G?["bottom"]:[],y.x<H/2?K.push("left"):y.x>this._map.transform.width-H/2&&K.push("right"),A=K.length===0?"bottom":K.join("-")}const D=y.add(k[A]).round();c.setTransform(this._container,`${go[A]} translate(${D.x}px,${D.y}px)`),Xy(this._container,A,"popup")},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(Ky),L)}addTo(L){return this._map&&this.remove(),this._map=L,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(L){return this._lngLat=s.L.convert(L),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(L){return this.setDOMContent(document.createTextNode(L))}setHTML(L){const d=document.createDocumentFragment(),y=document.createElement("body");let A;for(y.innerHTML=L;A=y.firstChild,A;)d.appendChild(A);return this.setDOMContent(d)}getMaxWidth(){var L;return(L=this._container)===null||L===void 0?void 0:L.style.maxWidth}setMaxWidth(L){return this.options.maxWidth=L,this._update(),this}setDOMContent(L){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=c.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(L),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(L){this._container&&this._container.classList.add(L)}removeClassName(L){this._container&&this._container.classList.remove(L)}setOffset(L){return this.options.offset=L,this._update(),this}toggleClassName(L){if(this._container)return this._container.classList.toggle(L)}_createCloseButton(){this.options.closeButton&&(this._closeButton=c.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const L=this._container.querySelector(Zy);L&&L.focus()}},Hr.Marker=Cl,Hr.Style=tr,Hr.LngLat=s.L,Hr.LngLatBounds=rt,Hr.Point=s.P,Hr.MercatorCoordinate=s.U,Hr.Evented=s.E,Hr.AJAXError=s.bi,Hr.config=s.c,Hr.CanvasSource=ge,Hr.GeoJSONSource=zt,Hr.ImageSource=lt,Hr.RasterDEMTileSource=Dt,Hr.RasterTileSource=ct,Hr.VectorTileSource=st,Hr.VideoSource=Qe,Hr.setRTLTextPlugin=s.bj,Hr.getRTLTextPluginStatus=s.bk,Hr.prewarm=function(){cn().acquire(dt)},Hr.clearPrewarmedResources=function(){const L=Sn;L&&(L.isPreloaded()&&L.numActive()===1?(L.release(dt),Sn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},cs.extend(Hr,{isSafari:s.ac,getPerformanceMetrics:s.bg.getPerformanceMetrics}),Hr});var a=i;return a})})(Ure);var pDe=Ure.exports;const m1=_i(pDe);class mDe{constructor(e,n,r){this.onBeforeSwitch=e,this.onSwitch=n,this.onAfterSwitch=r,this.onDocumentClick=this.onDocumentClick.bind(this),this.styles=[],this.currentStyle=null}getDefaultPosition(){return"top-right"}updateStyles(e,n){this.styles=e;let r=null;for(const o of this.styles)if(o.id===(this.currentStyle||n)){r=o.id;break}for(r||(r=this.styles[0].id);this.mapStyleContainer.firstChild;)this.mapStyleContainer.removeChild(this.mapStyleContainer.firstChild);let i;for(const o of this.styles){const a=document.createElement("button");a.type="button",a.innerText=o.title,a.dataset.id=o.id,a.dataset.style=JSON.stringify(o.style),a.addEventListener("click",s=>{const{target:l}=s;l.classList.contains("active")||this.onSelectStyle(l)}),o.id===r&&(i=a,a.classList.add("active")),this.mapStyleContainer.appendChild(a)}this.currentStyle!==r&&(this.onSelectStyle(i),this.currentStyle=r)}onSelectStyle(e){this.onBeforeSwitch();const n=this.styles.find(i=>i.id===e.dataset.id);this.map.setStyle(n.style,{diff:!1}),this.map.setTransformRequest(n.transformRequest),this.onSwitch(e.dataset.id),this.mapStyleContainer.style.display="none",this.styleButton.style.display="block";const r=this.mapStyleContainer.getElementsByClassName("active");for(;r[0];)r[0].classList.remove("active");e.classList.add("active"),this.currentStyle=e.dataset.id,this.onAfterSwitch()}onAdd(e){return this.map=e,this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("maplibregl-ctrl"),this.controlContainer.classList.add("maplibregl-ctrl-group"),this.mapStyleContainer=document.createElement("div"),this.styleButton=document.createElement("button"),this.styleButton.type="button",this.mapStyleContainer.classList.add("maplibregl-style-list"),this.styleButton.classList.add("maplibregl-ctrl-icon"),this.styleButton.classList.add("maplibregl-style-switcher"),this.styleButton.addEventListener("click",()=>{this.styleButton.style.display="none",this.mapStyleContainer.style.display="block"}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.styleButton),this.controlContainer.appendChild(this.mapStyleContainer),this.controlContainer}onRemove(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.styleButton||(this.styleButton.removeEventListener("click",this.onDocumentClick),this.controlContainer.parentNode.removeChild(this.controlContainer),document.removeEventListener("click",this.onDocumentClick),this.map=void 0)}onDocumentClick(e){this.controlContainer&&!this.controlContainer.contains(e.target)&&this.mapStyleContainer&&this.styleButton&&(this.mapStyleContainer.style.display="none",this.styleButton.style.display="block")}}const Ig=(t,e)=>t.hasOwnProperty(e)&&t[e]!==null,kA=(t,e)=>mr(n=>n.session.server.forceSettings?Ig(n.session.server,t)?n.session.server[t]:Ig(n.session.user,t)?n.session.user[t]:e:Ig(n.session.user,t)?n.session.user[t]:Ig(n.session.server,t)?n.session.server[t]:e),gDe=(t,e)=>mr(n=>n.session.server.forceSettings?Ig(n.session.server.attributes,t)?n.session.server.attributes[t]:Ig(n.session.user.attributes,t)?n.session.user.attributes[t]:e:Ig(n.session.user.attributes,t)?n.session.user.attributes[t]:Ig(n.session.server.attributes,t)?n.session.server.attributes[t]:e),Wre=(t,e)=>{window.localStorage.setItem(t,JSON.stringify(e))},IA=(t,e)=>{const[n,r]=W.useState(()=>{const i=window.localStorage.getItem(t);return i?JSON.parse(i):e});return W.useEffect(()=>{n!==e?Wre(t,n):window.localStorage.removeItem(t)},[t,n]),[n,r]},rl=({tiles:t,minZoom:e,maxZoom:n,attribution:r,glyphs:i})=>{const o={type:"raster",tiles:t,attribution:r,tileSize:256,minzoom:e,maxzoom:n};return Object.keys(o).forEach(a=>o[a]===void 0&&delete o[a]),{version:8,sources:{custom:o},glyphs:i,layers:[{id:"custom",type:"raster",source:"custom"}]}},yDe=()=>{const t="mykey",e="pk.0f147952a41c555a5b70614039fd148b",n="mykey",r="mykey",i="mykey",o="mykey";let a=window.location.origin.slice(0,-5),s=8484,l=gDe("glyphs",!1)?`${a}:${s}/map/fonts/{fontstack}/{range}.pbf`:"https://cdn.traccar.com/map/fonts/{fontstack}/{range}.pbf";return[{id:"osm",title:"mapOsm",style:rl({tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],maxZoom:19,attribution:'© <a target="_top" rel="noopener" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',glyphs:l}),available:!0},{id:"locationIqStreets",title:"mapLocationIqStreets",style:`https://tiles.locationiq.com/v3/streets/vector.json?key=${e}`,available:!0},{id:"locationIqDark",title:"mapLocationIqDark",style:`https://tiles.locationiq.com/v3/dark/vector.json?key=${e}`,available:!0},{id:"openTopoMap",title:"mapOpenTopoMap",style:rl({tiles:["a","b","c"].map(c=>`https://${c}.tile.opentopomap.org/{z}/{x}/{y}.png`),maxZoom:17,glyphs:l}),available:!0},{id:"carto",title:"mapCarto",style:rl({tiles:["a","b","c","d"].map(c=>`https://${c}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}@2x.png`),maxZoom:22,attribution:'© <a target="_top" rel="noopener" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, © <a target="_top" rel="noopener" href="https://carto.com/attribution">CARTO</a>',glyphs:l}),available:!0},{id:"googleRoad",title:"mapGoogleRoad",style:rl({tiles:[0,1,2,3].map(c=>`https://mt${c}.google.com/vt/lyrs=m&hl=en&x={x}&y={y}&z={z}&s=Ga`),maxZoom:20,attribution:"© Google",glyphs:l}),available:!0},{id:"googleSatellite",title:"mapGoogleSatellite",style:rl({tiles:[0,1,2,3].map(c=>`https://mt${c}.google.com/vt/lyrs=s&hl=en&x={x}&y={y}&z={z}&s=Ga`),maxZoom:20,attribution:"© Google",glyphs:l}),available:!0},{id:"googleHybrid",title:"mapGoogleHybrid",style:rl({tiles:[0,1,2,3].map(c=>`https://mt${c}.google.com/vt/lyrs=y&hl=en&x={x}&y={y}&z={z}&s=Ga`),maxZoom:20,attribution:"© Google",glyphs:l}),available:!0},{id:"mapTilerBasic",title:"mapMapTilerBasic",style:`https://api.maptiler.com/maps/basic/style.json?key=${t}`,available:!!t,attribute:"mapTilerKey"},{id:"mapTilerHybrid",title:"mapMapTilerHybrid",style:`https://api.maptiler.com/maps/hybrid/style.json?key=${t}`,available:!!t,attribute:"mapTilerKey"},{id:"bingRoad",title:"mapBingRoad",style:rl({tiles:[0,1,2,3].map(c=>`https://t${c}.ssl.ak.dynamic.tiles.virtualearth.net/comp/ch/{quadkey}?mkt=en-US&it=G,L&shading=hill&og=1885&n=z`),maxZoom:21,glyphs:l}),available:!!n,attribute:"bingMapsKey"},{id:"bingAerial",title:"mapBingAerial",style:rl({tiles:[0,1,2,3].map(c=>`https://ecn.t${c}.tiles.virtualearth.net/tiles/a{quadkey}.jpeg?g=12327`),maxZoom:19,glyphs:l}),available:!!n,attribute:"bingMapsKey"},{id:"bingHybrid",title:"mapBingHybrid",style:rl({tiles:[0,1,2,3].map(c=>`https://t${c}.ssl.ak.dynamic.tiles.virtualearth.net/comp/ch/{quadkey}?mkt=en-US&it=A,G,L&og=1885&n=z`),maxZoom:19,glyphs:l}),available:!!n,attribute:"bingMapsKey"},{id:"tomTomBasic",title:"mapTomTomBasic",style:`https://api.tomtom.com/map/1/style/20.0.0-8/basic_main.json?key=${r}`,available:!!r,attribute:"tomTomKey"},{id:"hereBasic",title:"mapHereBasic",style:`https://assets.vector.hereapi.com/styles/berlin/base/mapbox/tilezen?apikey=${i}`,available:!!i,attribute:"hereKey"},{id:"hereHybrid",title:"mapHereHybrid",style:rl({tiles:[1,2,3,4].map(c=>`https://${c}.aerial.maps.ls.hereapi.com/maptile/2.1/maptile/newest/hybrid.day/{z}/{x}/{y}/256/png8?apiKey=${i}`),maxZoom:20,glyphs:l}),available:!!i,attribute:"hereKey"},{id:"hereSatellite",title:"mapHereSatellite",style:rl({tiles:[1,2,3,4].map(c=>`https://${c}.aerial.maps.ls.hereapi.com/maptile/2.1/maptile/newest/satellite.day/{z}/{x}/{y}/256/png8?apiKey=${i}`),maxZoom:19,glyphs:l}),available:!!i,attribute:"hereKey"},{id:"autoNavi",title:"mapAutoNavi",style:rl({tiles:[1,2,3,4].map(c=>`https://webrd0${c}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}`),minZoom:3,maxZoom:18,glyphs:l}),available:!0},{id:"ordnanceSurvey",title:"mapOrdnanceSurvey",style:"https://api.os.uk/maps/vector/v1/vts/resources/styles?key=EAZ8p83u72FTGiLjLC2MsTAl1ko6XQHC",transformRequest:c=>({url:`${c}&srs=3857`}),available:!0},{id:"mapboxStreets",title:"mapMapboxStreets",style:rl({tiles:[`https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/{z}/{x}/{y}?access_token=${o}`],maxZoom:22,glyphs:l}),available:!!o,attribute:"mapboxAccessToken"},{id:"mapboxOutdoors",title:"mapMapboxOutdoors",style:rl({tiles:[`https://api.mapbox.com/styles/v1/mapbox/outdoors-v11/tiles/{z}/{x}/{y}?access_token=${o}`],maxZoom:22,glyphs:l}),available:!!o,attribute:"mapboxAccessToken"},{id:"mapboxSatelliteStreet",title:"mapMapboxSatellite",style:rl({tiles:[`https://api.mapbox.com/styles/v1/mapbox/satellite-streets-v11/tiles/{z}/{x}/{y}?access_token=${o}`],maxZoom:22,glyphs:l}),available:!!o,attribute:"mapboxAccessToken"},{id:"custom",title:"mapCustom",style:rl({tiles:["http://localhost:8080/tile/{z}/{x}/{y}.png"],maxZoom:19,glyphs:l}),available:!0}]},Cb=document.createElement("div");Cb.style.width="100%";Cb.style.height="100%";Cb.style.boxSizing="initial";const gt=new m1.Map({container:Cb,attributionControl:!1,zoom:14});let lj=!1;const cj=new Set,vDe=t=>{cj.add(t),t(lj)},xDe=t=>{cj.delete(t)},Hre=t=>{lj=t,cj.forEach(e=>e(t))},_De=async()=>{lj||(gt.hasImage("background")||Object.entries(mp).forEach(([t,e])=>{gt.addImage(t,e,{pixelRatio:window.devicePixelRatio})}),Hre(!0))};gt.addControl(new m1.NavigationControl);const Gre=new mDe(()=>Hre(!1),t=>Wre("selectedMapStyle",t),()=>{gt.once("styledata",()=>{const t=()=>{gt.loaded()?_De():setTimeout(t,33)};t()})});gt.addControl(Gre);const uj=({children:t})=>{const e=W.useRef(null),[n,r]=W.useState(!1),i=yDe(),o="osm,locationIqStreets,carto,custom",[a]=IA("selectedMapStyle",kA("map","osm")),s="my tocken",l=21;return W.useEffect(()=>{gt.setMaxZoom(l)},[l]),W.useEffect(()=>{m1.accessToken=s},[s]),W.useEffect(()=>{const c=i.filter(p=>p.available&&o.includes(p.id)),h=c.length?c:i.filter(p=>p.id==="osm");Gre.updateStyles(h,a)},[i,a]),W.useEffect(()=>{const c=h=>r(h);return vDe(c),()=>{xDe(c)}},[]),W.useLayoutEffect(()=>{const c=e.current;return c.appendChild(Cb),gt.resize(),()=>{c.removeChild(Cb)}},[e]),F.jsx("div",{style:{position:"relative",width:"100%",height:"100%"},ref:e,children:n&&t})},dj=Symbol.for("yaml.alias"),RF=Symbol.for("yaml.document"),Yg=Symbol.for("yaml.map"),qre=Symbol.for("yaml.pair"),qp=Symbol.for("yaml.scalar"),g1=Symbol.for("yaml.seq"),md=Symbol.for("yaml.node.type"),V0=t=>!!t&&typeof t=="object"&&t[md]===dj,y1=t=>!!t&&typeof t=="object"&&t[md]===RF,v1=t=>!!t&&typeof t=="object"&&t[md]===Yg,Do=t=>!!t&&typeof t=="object"&&t[md]===qre,mo=t=>!!t&&typeof t=="object"&&t[md]===qp,x1=t=>!!t&&typeof t=="object"&&t[md]===g1;function Vo(t){if(t&&typeof t=="object")switch(t[md]){case Yg:case g1:return!0}return!1}function Ss(t){if(t&&typeof t=="object")switch(t[md]){case dj:case Yg:case qp:case g1:return!0}return!1}const bDe=t=>(mo(t)||Vo(t))&&!!t.anchor,xc=Symbol("break visit"),Yre=Symbol("skip children"),_h=Symbol("remove node");function sy(t,e){const n=Xre(e);y1(t)?M_(null,t.contents,n,Object.freeze([t]))===_h&&(t.contents=null):M_(null,t,n,Object.freeze([]))}sy.BREAK=xc;sy.SKIP=Yre;sy.REMOVE=_h;function M_(t,e,n,r){const i=Kre(t,e,n,r);if(Ss(i)||Do(i))return Zre(t,r,i),M_(t,i,n,r);if(typeof i!="symbol"){if(Vo(e)){r=Object.freeze(r.concat(e));for(let o=0;o<e.items.length;++o){const a=M_(o,e.items[o],n,r);if(typeof a=="number")o=a-1;else{if(a===xc)return xc;a===_h&&(e.items.splice(o,1),o-=1)}}}else if(Do(e)){r=Object.freeze(r.concat(e));const o=M_("key",e.key,n,r);if(o===xc)return xc;o===_h&&(e.key=null);const a=M_("value",e.value,n,r);if(a===xc)return xc;a===_h&&(e.value=null)}}return i}async function vR(t,e){const n=Xre(e);y1(t)?await E_(null,t.contents,n,Object.freeze([t]))===_h&&(t.contents=null):await E_(null,t,n,Object.freeze([]))}vR.BREAK=xc;vR.SKIP=Yre;vR.REMOVE=_h;async function E_(t,e,n,r){const i=await Kre(t,e,n,r);if(Ss(i)||Do(i))return Zre(t,r,i),E_(t,i,n,r);if(typeof i!="symbol"){if(Vo(e)){r=Object.freeze(r.concat(e));for(let o=0;o<e.items.length;++o){const a=await E_(o,e.items[o],n,r);if(typeof a=="number")o=a-1;else{if(a===xc)return xc;a===_h&&(e.items.splice(o,1),o-=1)}}}else if(Do(e)){r=Object.freeze(r.concat(e));const o=await E_("key",e.key,n,r);if(o===xc)return xc;o===_h&&(e.key=null);const a=await E_("value",e.value,n,r);if(a===xc)return xc;a===_h&&(e.value=null)}}return i}function Xre(t){return typeof t=="object"&&(t.Collection||t.Node||t.Value)?Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t):t}function Kre(t,e,n,r){var i,o,a,s,l;if(typeof n=="function")return n(t,e,r);if(v1(e))return(i=n.Map)==null?void 0:i.call(n,t,e,r);if(x1(e))return(o=n.Seq)==null?void 0:o.call(n,t,e,r);if(Do(e))return(a=n.Pair)==null?void 0:a.call(n,t,e,r);if(mo(e))return(s=n.Scalar)==null?void 0:s.call(n,t,e,r);if(V0(e))return(l=n.Alias)==null?void 0:l.call(n,t,e,r)}function Zre(t,e,n){const r=e[e.length-1];if(Vo(r))r.items[t]=n;else if(Do(r))t==="key"?r.key=n:r.value=n;else if(y1(r))r.contents=n;else{const i=V0(r)?"alias":"scalar";throw new Error(`Cannot replace node with ${i} parent`)}}const wDe={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},SDe=t=>t.replace(/[!,[\]{}]/g,e=>wDe[e]);class jl{constructor(e,n){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},jl.defaultYaml,e),this.tags=Object.assign({},jl.defaultTags,n)}clone(){const e=new jl(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new jl(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:jl.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},jl.defaultTags);break}return e}add(e,n){this.atNextDocument&&(this.yaml={explicit:jl.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},jl.defaultTags),this.atNextDocument=!1);const r=e.trim().split(/[ \t]+/),i=r.shift();switch(i){case"%TAG":{if(r.length!==2&&(n(0,"%TAG directive should contain exactly two parts"),r.length<2))return!1;const[o,a]=r;return this.tags[o]=a,!0}case"%YAML":{if(this.yaml.explicit=!0,r.length!==1)return n(0,"%YAML directive should contain exactly one part"),!1;const[o]=r;if(o==="1.1"||o==="1.2")return this.yaml.version=o,!0;{const a=/^\d+\.\d+$/.test(o);return n(6,`Unsupported YAML version ${o}`,a),!1}}default:return n(0,`Unknown directive ${i}`,!0),!1}}tagName(e,n){if(e==="!")return"!";if(e[0]!=="!")return n(`Not a valid tag: ${e}`),null;if(e[1]==="<"){const a=e.slice(2,-1);return a==="!"||a==="!!"?(n(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&n("Verbatim tags must end with a >"),a)}const[,r,i]=e.match(/^(.*!)([^!]*)$/s);i||n(`The ${e} tag has no suffix`);const o=this.tags[r];if(o)try{return o+decodeURIComponent(i)}catch(a){return n(String(a)),null}return r==="!"?e:(n(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[n,r]of Object.entries(this.tags))if(e.startsWith(r))return n+SDe(e.substring(r.length));return e[0]==="!"?e:`!<${e}>`}toString(e){const n=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],r=Object.entries(this.tags);let i;if(e&&r.length>0&&Ss(e.contents)){const o={};sy(e.contents,(a,s)=>{Ss(s)&&s.tag&&(o[s.tag]=!0)}),i=Object.keys(o)}else i=[];for(const[o,a]of r)o==="!!"&&a==="tag:yaml.org,2002:"||(!e||i.some(s=>s.startsWith(a)))&&n.push(`%TAG ${o} ${a}`);return n.join(`
`)}}jl.defaultYaml={explicit:!1,version:"1.2"};jl.defaultTags={"!!":"tag:yaml.org,2002:"};function Jre(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){const n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(n)}return!0}function Qre(t){const e=new Set;return sy(t,{Value(n,r){r.anchor&&e.add(r.anchor)}}),e}function eie(t,e){for(let n=1;;++n){const r=`${t}${n}`;if(!e.has(r))return r}}function MDe(t,e){const n=[],r=new Map;let i=null;return{onAnchor:o=>{n.push(o),i||(i=Qre(t));const a=eie(e,i);return i.add(a),a},setAnchors:()=>{for(const o of n){const a=r.get(o);if(typeof a=="object"&&a.anchor&&(mo(a.node)||Vo(a.node)))a.node.anchor=a.anchor;else{const s=new Error("Failed to resolve repeated object (this should not happen)");throw s.source=o,s}}},sourceObjects:r}}function T_(t,e,n,r){if(r&&typeof r=="object")if(Array.isArray(r))for(let i=0,o=r.length;i<o;++i){const a=r[i],s=T_(t,r,String(i),a);s===void 0?delete r[i]:s!==a&&(r[i]=s)}else if(r instanceof Map)for(const i of Array.from(r.keys())){const o=r.get(i),a=T_(t,r,i,o);a===void 0?r.delete(i):a!==o&&r.set(i,a)}else if(r instanceof Set)for(const i of Array.from(r)){const o=T_(t,r,i,i);o===void 0?r.delete(i):o!==i&&(r.delete(i),r.add(o))}else for(const[i,o]of Object.entries(r)){const a=T_(t,r,i,o);a===void 0?delete r[i]:a!==o&&(r[i]=a)}return t.call(e,n,r)}function sd(t,e,n){if(Array.isArray(t))return t.map((r,i)=>sd(r,String(i),n));if(t&&typeof t.toJSON=="function"){if(!n||!bDe(t))return t.toJSON(e,n);const r={aliasCount:0,count:1,res:void 0};n.anchors.set(t,r),n.onCreate=o=>{r.res=o,delete n.onCreate};const i=t.toJSON(e,n);return n.onCreate&&n.onCreate(i),i}return typeof t=="bigint"&&!(n!=null&&n.keep)?Number(t):t}class fj{constructor(e){Object.defineProperty(this,md,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:n,maxAliasCount:r,onAnchor:i,reviver:o}={}){if(!y1(e))throw new TypeError("A document argument is required");const a={anchors:new Map,doc:e,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},s=sd(this,"",a);if(typeof i=="function")for(const{count:l,res:c}of a.anchors.values())i(c,l);return typeof o=="function"?T_(o,{"":s},"",s):s}}class xR extends fj{constructor(e){super(dj),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let n;return sy(e,{Node:(r,i)=>{if(i===this)return sy.BREAK;i.anchor===this.source&&(n=i)}}),n}toJSON(e,n){if(!n)return{source:this.source};const{anchors:r,doc:i,maxAliasCount:o}=n,a=this.resolve(i);if(!a){const l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(l)}let s=r.get(a);if(s||(sd(a,null,n),s=r.get(a)),!s||s.res===void 0){const l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(o>=0&&(s.count+=1,s.aliasCount===0&&(s.aliasCount=RA(i,a,r)),s.count*s.aliasCount>o)){const l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return s.res}toString(e,n,r){const i=`*${this.source}`;if(e){if(Jre(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const o=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(o)}if(e.implicitKey)return`${i} `}return i}}function RA(t,e,n){if(V0(e)){const r=e.resolve(t),i=n&&r&&n.get(r);return i?i.count*i.aliasCount:0}else if(Vo(e)){let r=0;for(const i of e.items){const o=RA(t,i,n);o>r&&(r=o)}return r}else if(Do(e)){const r=RA(t,e.key,n),i=RA(t,e.value,n);return Math.max(r,i)}return 1}const tie=t=>!t||typeof t!="function"&&typeof t!="object";class Or extends fj{constructor(e){super(qp),this.value=e}toJSON(e,n){return n!=null&&n.keep?this.value:sd(this.value,e,n)}toString(){return String(this.value)}}Or.BLOCK_FOLDED="BLOCK_FOLDED";Or.BLOCK_LITERAL="BLOCK_LITERAL";Or.PLAIN="PLAIN";Or.QUOTE_DOUBLE="QUOTE_DOUBLE";Or.QUOTE_SINGLE="QUOTE_SINGLE";const EDe="tag:yaml.org,2002:";function TDe(t,e,n){if(e){const r=n.filter(o=>o.tag===e),i=r.find(o=>!o.format)??r[0];if(!i)throw new Error(`Tag ${e} not found`);return i}return n.find(r=>{var i;return((i=r.identify)==null?void 0:i.call(r,t))&&!r.format})}function RM(t,e,n){var p,g,v;if(y1(t)&&(t=t.contents),Ss(t))return t;if(Do(t)){const x=(g=(p=n.schema[Yg]).createNode)==null?void 0:g.call(p,n.schema,null,n);return x.items.push(t),x}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt<"u"&&t instanceof BigInt)&&(t=t.valueOf());const{aliasDuplicateObjects:r,onAnchor:i,onTagObj:o,schema:a,sourceObjects:s}=n;let l;if(r&&t&&typeof t=="object"){if(l=s.get(t),l)return l.anchor||(l.anchor=i(t)),new xR(l.anchor);l={anchor:null,node:null},s.set(t,l)}e!=null&&e.startsWith("!!")&&(e=EDe+e.slice(2));let c=TDe(t,e,a.tags);if(!c){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){const x=new Or(t);return l&&(l.node=x),x}c=t instanceof Map?a[Yg]:Symbol.iterator in Object(t)?a[g1]:a[Yg]}o&&(o(c),delete n.onTagObj);const h=c!=null&&c.createNode?c.createNode(n.schema,t,n):typeof((v=c==null?void 0:c.nodeClass)==null?void 0:v.from)=="function"?c.nodeClass.from(n.schema,t,n):new Or(t);return e?h.tag=e:c.default||(h.tag=c.tag),l&&(l.node=h),h}function VP(t,e,n){let r=n;for(let i=e.length-1;i>=0;--i){const o=e[i];if(typeof o=="number"&&Number.isInteger(o)&&o>=0){const a=[];a[o]=r,r=a}else r=new Map([[o,r]])}return RM(r,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}const _S=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done;class _R extends fj{constructor(e,n){super(e),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(e){const n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(n.schema=e),n.items=n.items.map(r=>Ss(r)||Do(r)?r.clone(e):r),this.range&&(n.range=this.range.slice()),n}addIn(e,n){if(_S(e))this.add(n);else{const[r,...i]=e,o=this.get(r,!0);if(Vo(o))o.addIn(i,n);else if(o===void 0&&this.schema)this.set(r,VP(this.schema,i,n));else throw new Error(`Expected YAML collection at ${r}. Remaining path: ${i}`)}}deleteIn(e){const[n,...r]=e;if(r.length===0)return this.delete(n);const i=this.get(n,!0);if(Vo(i))return i.deleteIn(r);throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`)}getIn(e,n){const[r,...i]=e,o=this.get(r,!0);return i.length===0?!n&&mo(o)?o.value:o:Vo(o)?o.getIn(i,n):void 0}hasAllNullValues(e){return this.items.every(n=>{if(!Do(n))return!1;const r=n.value;return r==null||e&&mo(r)&&r.value==null&&!r.commentBefore&&!r.comment&&!r.tag})}hasIn(e){const[n,...r]=e;if(r.length===0)return this.has(n);const i=this.get(n,!0);return Vo(i)?i.hasIn(r):!1}setIn(e,n){const[r,...i]=e;if(i.length===0)this.set(r,n);else{const o=this.get(r,!0);if(Vo(o))o.setIn(i,n);else if(o===void 0&&this.schema)this.set(r,VP(this.schema,i,n));else throw new Error(`Expected YAML collection at ${r}. Remaining path: ${i}`)}}}_R.maxFlowStringSingleLineLength=60;const CDe=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function Ep(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}const Rg=(t,e,n)=>t.endsWith(`
`)?Ep(n,e):n.includes(`
`)?`
`+Ep(n,e):(t.endsWith(" ")?"":" ")+n,nie="flow",OF="block",OA="quoted";function bR(t,e,n="flow",{indentAtStart:r,lineWidth:i=80,minContentWidth:o=20,onFold:a,onOverflow:s}={}){if(!i||i<0)return t;const l=Math.max(1+o,1+i-e.length);if(t.length<=l)return t;const c=[],h={};let p=i-e.length;typeof r=="number"&&(r>i-Math.max(2,o)?c.push(0):p=i-r);let g,v,x=!1,b=-1,M=-1,w=-1;n===OF&&(b=$G(t,b),b!==-1&&(p=b+l));for(let C;C=t[b+=1];){if(n===OA&&C==="\\"){switch(M=b,t[b+1]){case"x":b+=3;break;case"u":b+=5;break;case"U":b+=9;break;default:b+=1}w=b}if(C===`
`)n===OF&&(b=$G(t,b)),p=b+l,g=void 0;else{if(C===" "&&v&&v!==" "&&v!==`
`&&v!=="	"){const I=t[b+1];I&&I!==" "&&I!==`
`&&I!=="	"&&(g=b)}if(b>=p)if(g)c.push(g),p=g+l,g=void 0;else if(n===OA){for(;v===" "||v==="	";)v=C,C=t[b+=1],x=!0;const I=b>w+1?b-2:M-1;if(h[I])return t;c.push(I),h[I]=!0,p=I+l,g=void 0}else x=!0}v=C}if(x&&s&&s(),c.length===0)return t;a&&a();let T=t.slice(0,c[0]);for(let C=0;C<c.length;++C){const I=c[C],R=c[C+1]||t.length;I===0?T=`
${e}${t.slice(0,R)}`:(n===OA&&h[I]&&(T+=`${t[I]}\\`),T+=`
${e}${t.slice(I+1,R)}`)}return T}function $G(t,e){let n=t[e+1];for(;n===" "||n==="	";){do n=t[e+=1];while(n&&n!==`
`);n=t[e+1]}return e}const wR=(t,e)=>({indentAtStart:e?t.indent.length:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),SR=t=>/^(%|---|\.\.\.)/m.test(t);function ADe(t,e,n){if(!e||e<0)return!1;const r=e-n,i=t.length;if(i<=r)return!1;for(let o=0,a=0;o<i;++o)if(t[o]===`
`){if(o-a>r)return!0;if(a=o+1,i-a<=r)return!1}return!0}function jS(t,e){const n=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return n;const{implicitKey:r}=e,i=e.options.doubleQuotedMinMultiLineLength,o=e.indent||(SR(t)?"  ":"");let a="",s=0;for(let l=0,c=n[l];c;c=n[++l])if(c===" "&&n[l+1]==="\\"&&n[l+2]==="n"&&(a+=n.slice(s,l)+"\\ ",l+=1,s=l,c="\\"),c==="\\")switch(n[l+1]){case"u":{a+=n.slice(s,l);const h=n.substr(l+2,4);switch(h){case"0000":a+="\\0";break;case"0007":a+="\\a";break;case"000b":a+="\\v";break;case"001b":a+="\\e";break;case"0085":a+="\\N";break;case"00a0":a+="\\_";break;case"2028":a+="\\L";break;case"2029":a+="\\P";break;default:h.substr(0,2)==="00"?a+="\\x"+h.substr(2):a+=n.substr(l,6)}l+=5,s=l+1}break;case"n":if(r||n[l+2]==='"'||n.length<i)l+=1;else{for(a+=n.slice(s,l)+`

`;n[l+2]==="\\"&&n[l+3]==="n"&&n[l+4]!=='"';)a+=`
`,l+=2;a+=o,n[l+2]===" "&&(a+="\\"),l+=1,s=l+1}break;default:l+=1}return a=s?a+n.slice(s):n,r?a:bR(a,o,OA,wR(e,!1))}function LF(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return jS(t,e);const n=e.indent||(SR(t)?"  ":""),r="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return e.implicitKey?r:bR(r,n,nie,wR(e,!1))}function C_(t,e){const{singleQuote:n}=e.options;let r;if(n===!1)r=jS;else{const i=t.includes('"'),o=t.includes("'");i&&!o?r=LF:o&&!i?r=jS:r=n?LF:jS}return r(t,e)}let DF;try{DF=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{DF=/\n+(?!\n|$)/g}function LA({comment:t,type:e,value:n},r,i,o){const{blockQuote:a,commentString:s,lineWidth:l}=r.options;if(!a||/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return C_(n,r);const c=r.indent||(r.forceBlockIndent||SR(n)?"  ":""),h=a==="literal"?!0:a==="folded"||e===Or.BLOCK_FOLDED?!1:e===Or.BLOCK_LITERAL?!0:!ADe(n,l,c.length);if(!n)return h?`|
`:`>
`;let p,g;for(g=n.length;g>0;--g){const O=n[g-1];if(O!==`
`&&O!=="	"&&O!==" ")break}let v=n.substring(g);const x=v.indexOf(`
`);x===-1?p="-":n===v||x!==v.length-1?(p="+",o&&o()):p="",v&&(n=n.slice(0,-v.length),v[v.length-1]===`
`&&(v=v.slice(0,-1)),v=v.replace(DF,`$&${c}`));let b=!1,M,w=-1;for(M=0;M<n.length;++M){const O=n[M];if(O===" ")b=!0;else if(O===`
`)w=M;else break}let T=n.substring(0,w<M?w+1:M);T&&(n=n.substring(T.length),T=T.replace(/\n+/g,`$&${c}`));let I=(h?"|":">")+(b?c?"2":"1":"")+p;if(t&&(I+=" "+s(t.replace(/ ?[\r\n]+/g," ")),i&&i()),h)return n=n.replace(/\n+/g,`$&${c}`),`${I}
${c}${T}${n}${v}`;n=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${c}`);const R=bR(`${T}${n}${v}`,c,OF,wR(r,!0));return`${I}
${c}${R}`}function PDe(t,e,n,r){const{type:i,value:o}=t,{actualString:a,implicitKey:s,indent:l,indentStep:c,inFlow:h}=e;if(s&&o.includes(`
`)||h&&/[[\]{},]/.test(o))return C_(o,e);if(!o||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(o))return s||h||!o.includes(`
`)?C_(o,e):LA(t,e,n,r);if(!s&&!h&&i!==Or.PLAIN&&o.includes(`
`))return LA(t,e,n,r);if(SR(o)){if(l==="")return e.forceBlockIndent=!0,LA(t,e,n,r);if(s&&l===c)return C_(o,e)}const p=o.replace(/\n+/g,`$&
${l}`);if(a){const g=b=>{var M;return b.default&&b.tag!=="tag:yaml.org,2002:str"&&((M=b.test)==null?void 0:M.test(p))},{compat:v,tags:x}=e.doc.schema;if(x.some(g)||v!=null&&v.some(g))return C_(o,e)}return s?p:bR(p,l,nie,wR(e,!1))}function gE(t,e,n,r){const{implicitKey:i,inFlow:o}=e,a=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)});let{type:s}=t;s!==Or.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(a.value)&&(s=Or.QUOTE_DOUBLE);const l=h=>{switch(h){case Or.BLOCK_FOLDED:case Or.BLOCK_LITERAL:return i||o?C_(a.value,e):LA(a,e,n,r);case Or.QUOTE_DOUBLE:return jS(a.value,e);case Or.QUOTE_SINGLE:return LF(a.value,e);case Or.PLAIN:return PDe(a,e,n,r);default:return null}};let c=l(s);if(c===null){const{defaultKeyType:h,defaultStringType:p}=e.options,g=i&&h||p;if(c=l(g),c===null)throw new Error(`Unsupported default string type ${g}`)}return c}function rie(t,e){const n=Object.assign({blockQuote:!0,commentString:CDe,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e);let r;switch(n.collectionStyle){case"block":r=!1;break;case"flow":r=!0;break;default:r=null}return{anchors:new Set,doc:t,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:r,options:n}}function kDe(t,e){var i;if(e.tag){const o=t.filter(a=>a.tag===e.tag);if(o.length>0)return o.find(a=>a.format===e.format)??o[0]}let n,r;if(mo(e)){r=e.value;const o=t.filter(a=>{var s;return(s=a.identify)==null?void 0:s.call(a,r)});n=o.find(a=>a.format===e.format)??o.find(a=>!a.format)}else r=e,n=t.find(o=>o.nodeClass&&r instanceof o.nodeClass);if(!n){const o=((i=r==null?void 0:r.constructor)==null?void 0:i.name)??typeof r;throw new Error(`Tag not resolved for ${o} value`)}return n}function IDe(t,e,{anchors:n,doc:r}){if(!r.directives)return"";const i=[],o=(mo(t)||Vo(t))&&t.anchor;o&&Jre(o)&&(n.add(o),i.push(`&${o}`));const a=t.tag?t.tag:e.default?null:e.tag;return a&&i.push(r.directives.tagString(a)),i.join(" ")}function Ab(t,e,n,r){var l;if(Do(t))return t.toString(e,n,r);if(V0(t)){if(e.doc.directives)return t.toString(e);if((l=e.resolvedAliases)!=null&&l.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let i;const o=Ss(t)?t:e.doc.createNode(t,{onTagObj:c=>i=c});i||(i=kDe(e.doc.schema.tags,o));const a=IDe(o,i,e);a.length>0&&(e.indentAtStart=(e.indentAtStart??0)+a.length+1);const s=typeof i.stringify=="function"?i.stringify(o,e,n,r):mo(o)?gE(o,e,n,r):o.toString(e,n,r);return a?mo(o)||s[0]==="{"||s[0]==="["?`${a} ${s}`:`${a}
${e.indent}${s}`:s}function RDe({key:t,value:e},n,r,i){const{allNullValues:o,doc:a,indent:s,indentStep:l,options:{commentString:c,indentSeq:h,simpleKeys:p}}=n;let g=Ss(t)&&t.comment||null;if(p){if(g)throw new Error("With simple keys, key nodes cannot have comments");if(Vo(t)){const B="With simple keys, collection cannot be used as a key value";throw new Error(B)}}let v=!p&&(!t||g&&e==null&&!n.inFlow||Vo(t)||(mo(t)?t.type===Or.BLOCK_FOLDED||t.type===Or.BLOCK_LITERAL:typeof t=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!v&&(p||!o),indent:s+l});let x=!1,b=!1,M=Ab(t,n,()=>x=!0,()=>b=!0);if(!v&&!n.inFlow&&M.length>1024){if(p)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");v=!0}if(n.inFlow){if(o||e==null)return x&&r&&r(),M===""?"?":v?`? ${M}`:M}else if(o&&!p||e==null&&v)return M=`? ${M}`,g&&!x?M+=Rg(M,n.indent,c(g)):b&&i&&i(),M;x&&(g=null),v?(g&&(M+=Rg(M,n.indent,c(g))),M=`? ${M}
${s}:`):(M=`${M}:`,g&&(M+=Rg(M,n.indent,c(g))));let w,T,C;Ss(e)?(w=!!e.spaceBefore,T=e.commentBefore,C=e.comment):(w=!1,T=null,C=null,e&&typeof e=="object"&&(e=a.createNode(e))),n.implicitKey=!1,!v&&!g&&mo(e)&&(n.indentAtStart=M.length+1),b=!1,!h&&l.length>=2&&!n.inFlow&&!v&&x1(e)&&!e.flow&&!e.tag&&!e.anchor&&(n.indent=n.indent.substring(2));let I=!1;const R=Ab(e,n,()=>I=!0,()=>b=!0);let O=" ";if(g||w||T){if(O=w?`
`:"",T){const B=c(T);O+=`
${Ep(B,n.indent)}`}R===""&&!n.inFlow?O===`
`&&(O=`

`):O+=`
${n.indent}`}else if(!v&&Vo(e)){const B=R[0],U=R.indexOf(`
`),Z=U!==-1,j=n.inFlow??e.flow??e.items.length===0;if(Z||!j){let X=!1;if(Z&&(B==="&"||B==="!")){let le=R.indexOf(" ");B==="&"&&le!==-1&&le<U&&R[le+1]==="!"&&(le=R.indexOf(" ",le+1)),(le===-1||U<le)&&(X=!0)}X||(O=`
${n.indent}`)}}else(R===""||R[0]===`
`)&&(O="");return M+=O+R,n.inFlow?I&&r&&r():C&&!I?M+=Rg(M,n.indent,c(C)):b&&i&&i(),M}function iie(t,e){(t==="debug"||t==="warn")&&(typeof process<"u"&&process.emitWarning?process.emitWarning(e):console.warn(e))}const jG="<<";function oie(t,e,{key:n,value:r}){if(t!=null&&t.doc.schema.merge&&ODe(n))if(r=V0(r)?r.resolve(t.doc):r,x1(r))for(const i of r.items)t3(t,e,i);else if(Array.isArray(r))for(const i of r)t3(t,e,i);else t3(t,e,r);else{const i=sd(n,"",t);if(e instanceof Map)e.set(i,sd(r,i,t));else if(e instanceof Set)e.add(i);else{const o=LDe(n,i,t),a=sd(r,o,t);o in e?Object.defineProperty(e,o,{value:a,writable:!0,enumerable:!0,configurable:!0}):e[o]=a}}return e}const ODe=t=>t===jG||mo(t)&&t.value===jG&&(!t.type||t.type===Or.PLAIN);function t3(t,e,n){const r=t&&V0(n)?n.resolve(t.doc):n;if(!v1(r))throw new Error("Merge sources must be maps or map aliases");const i=r.toJSON(null,t,Map);for(const[o,a]of i)e instanceof Map?e.has(o)||e.set(o,a):e instanceof Set?e.add(o):Object.prototype.hasOwnProperty.call(e,o)||Object.defineProperty(e,o,{value:a,writable:!0,enumerable:!0,configurable:!0});return e}function LDe(t,e,n){if(e===null)return"";if(typeof e!="object")return String(e);if(Ss(t)&&(n!=null&&n.doc)){const r=rie(n.doc,{});r.anchors=new Set;for(const o of n.anchors.keys())r.anchors.add(o.anchor);r.inFlow=!0,r.inStringifyKey=!0;const i=t.toString(r);if(!n.mapKeyWarned){let o=JSON.stringify(i);o.length>40&&(o=o.substring(0,36)+'..."'),iie(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${o}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return i}return JSON.stringify(e)}function hj(t,e,n){const r=RM(t,void 0,n),i=RM(e,void 0,n);return new yl(r,i)}class yl{constructor(e,n=null){Object.defineProperty(this,md,{value:qre}),this.key=e,this.value=n}clone(e){let{key:n,value:r}=this;return Ss(n)&&(n=n.clone(e)),Ss(r)&&(r=r.clone(e)),new yl(n,r)}toJSON(e,n){const r=n!=null&&n.mapAsMap?new Map:{};return oie(n,r,this)}toString(e,n,r){return e!=null&&e.doc?RDe(this,e,n,r):JSON.stringify(this)}}function sie(t,e,n){return(e.inFlow??t.flow?NDe:DDe)(t,e,n)}function DDe({comment:t,items:e},n,{blockItemPrefix:r,flowChars:i,itemIndent:o,onChompKeep:a,onComment:s}){const{indent:l,options:{commentString:c}}=n,h=Object.assign({},n,{indent:o,type:null});let p=!1;const g=[];for(let x=0;x<e.length;++x){const b=e[x];let M=null;if(Ss(b))!p&&b.spaceBefore&&g.push(""),WP(n,g,b.commentBefore,p),b.comment&&(M=b.comment);else if(Do(b)){const T=Ss(b.key)?b.key:null;T&&(!p&&T.spaceBefore&&g.push(""),WP(n,g,T.commentBefore,p))}p=!1;let w=Ab(b,h,()=>M=null,()=>p=!0);M&&(w+=Rg(w,o,c(M))),p&&M&&(p=!1),g.push(r+w)}let v;if(g.length===0)v=i.start+i.end;else{v=g[0];for(let x=1;x<g.length;++x){const b=g[x];v+=b?`
${l}${b}`:`
`}}return t?(v+=`
`+Ep(c(t),l),s&&s()):p&&a&&a(),v}function NDe({comment:t,items:e},n,{flowChars:r,itemIndent:i,onComment:o}){const{indent:a,indentStep:s,flowCollectionPadding:l,options:{commentString:c}}=n;i+=s;const h=Object.assign({},n,{indent:i,inFlow:!0,type:null});let p=!1,g=0;const v=[];for(let w=0;w<e.length;++w){const T=e[w];let C=null;if(Ss(T))T.spaceBefore&&v.push(""),WP(n,v,T.commentBefore,!1),T.comment&&(C=T.comment);else if(Do(T)){const R=Ss(T.key)?T.key:null;R&&(R.spaceBefore&&v.push(""),WP(n,v,R.commentBefore,!1),R.comment&&(p=!0));const O=Ss(T.value)?T.value:null;O?(O.comment&&(C=O.comment),O.commentBefore&&(p=!0)):T.value==null&&(R!=null&&R.comment)&&(C=R.comment)}C&&(p=!0);let I=Ab(T,h,()=>C=null);w<e.length-1&&(I+=","),C&&(I+=Rg(I,i,c(C))),!p&&(v.length>g||I.includes(`
`))&&(p=!0),v.push(I),g=v.length}let x;const{start:b,end:M}=r;if(v.length===0)x=b+M;else if(p||(p=v.reduce((T,C)=>T+C.length+2,2)>_R.maxFlowStringSingleLineLength),p){x=b;for(const w of v)x+=w?`
${s}${a}${w}`:`
`;x+=`
${a}${M}`}else x=`${b}${l}${v.join(" ")}${l}${M}`;return t&&(x+=Rg(x,a,c(t)),o&&o()),x}function WP({indent:t,options:{commentString:e}},n,r,i){if(r&&i&&(r=r.replace(/^\n+/,"")),r){const o=Ep(e(r),t);n.push(o.trimStart())}}function Kv(t,e){const n=mo(e)?e.value:e;for(const r of t)if(Do(r)&&(r.key===e||r.key===n||mo(r.key)&&r.key.value===n))return r}class ru extends _R{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(Yg,e),this.items=[]}static from(e,n,r){const{keepUndefined:i,replacer:o}=r,a=new this(e),s=(l,c)=>{if(typeof o=="function")c=o.call(n,l,c);else if(Array.isArray(o)&&!o.includes(l))return;(c!==void 0||i)&&a.items.push(hj(l,c,r))};if(n instanceof Map)for(const[l,c]of n)s(l,c);else if(n&&typeof n=="object")for(const l of Object.keys(n))s(l,n[l]);return typeof e.sortMapEntries=="function"&&a.items.sort(e.sortMapEntries),a}add(e,n){var a;let r;Do(e)?r=e:!e||typeof e!="object"||!("key"in e)?r=new yl(e,e==null?void 0:e.value):r=new yl(e.key,e.value);const i=Kv(this.items,r.key),o=(a=this.schema)==null?void 0:a.sortMapEntries;if(i){if(!n)throw new Error(`Key ${r.key} already set`);mo(i.value)&&tie(r.value)?i.value.value=r.value:i.value=r.value}else if(o){const s=this.items.findIndex(l=>o(r,l)<0);s===-1?this.items.push(r):this.items.splice(s,0,r)}else this.items.push(r)}delete(e){const n=Kv(this.items,e);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(e,n){const r=Kv(this.items,e),i=r==null?void 0:r.value;return(!n&&mo(i)?i.value:i)??void 0}has(e){return!!Kv(this.items,e)}set(e,n){this.add(new yl(e,n),!0)}toJSON(e,n,r){const i=r?new r:n!=null&&n.mapAsMap?new Map:{};n!=null&&n.onCreate&&n.onCreate(i);for(const o of this.items)oie(n,i,o);return i}toString(e,n,r){if(!e)return JSON.stringify(this);for(const i of this.items)if(!Do(i))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),sie(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:r,onComment:n})}}const _1={collection:"map",default:!0,nodeClass:ru,tag:"tag:yaml.org,2002:map",resolve(t,e){return v1(t)||e("Expected a mapping for this tag"),t},createNode:(t,e,n)=>ru.from(t,e,n)};class ay extends _R{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(g1,e),this.items=[]}add(e){this.items.push(e)}delete(e){const n=KT(e);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(e,n){const r=KT(e);if(typeof r!="number")return;const i=this.items[r];return!n&&mo(i)?i.value:i}has(e){const n=KT(e);return typeof n=="number"&&n<this.items.length}set(e,n){const r=KT(e);if(typeof r!="number")throw new Error(`Expected a valid index, not ${e}.`);const i=this.items[r];mo(i)&&tie(n)?i.value=n:this.items[r]=n}toJSON(e,n){const r=[];n!=null&&n.onCreate&&n.onCreate(r);let i=0;for(const o of this.items)r.push(sd(o,String(i++),n));return r}toString(e,n,r){return e?sie(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:r,onComment:n}):JSON.stringify(this)}static from(e,n,r){const{replacer:i}=r,o=new this(e);if(n&&Symbol.iterator in Object(n)){let a=0;for(let s of n){if(typeof i=="function"){const l=n instanceof Set?s:String(a++);s=i.call(n,l,s)}o.items.push(RM(s,void 0,r))}}return o}}function KT(t){let e=mo(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}const b1={collection:"seq",default:!0,nodeClass:ay,tag:"tag:yaml.org,2002:seq",resolve(t,e){return x1(t)||e("Expected a sequence for this tag"),t},createNode:(t,e,n)=>ay.from(t,e,n)},MR={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,n,r){return e=Object.assign({actualString:!0},e),gE(t,e,n,r)}},ER={identify:t=>t==null,createNode:()=>new Or(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new Or(null),stringify:({source:t},e)=>typeof t=="string"&&ER.test.test(t)?t:e.options.nullStr},pj={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new Or(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},n){if(t&&pj.test.test(t)){const r=t[0]==="t"||t[0]==="T";if(e===r)return t}return e?n.options.trueStr:n.options.falseStr}};function vf({format:t,minFractionDigits:e,tag:n,value:r}){if(typeof r=="bigint")return String(r);const i=typeof r=="number"?r:Number(r);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let o=JSON.stringify(r);if(!t&&e&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(o)){let a=o.indexOf(".");a<0&&(a=o.length,o+=".");let s=e-(o.length-a-1);for(;s-- >0;)o+="0"}return o}const aie={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:vf},lie={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():vf(t)}},cie={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){const e=new Or(parseFloat(t)),n=t.indexOf(".");return n!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-n-1),e},stringify:vf},TR=t=>typeof t=="bigint"||Number.isInteger(t),mj=(t,e,n,{intAsBigInt:r})=>r?BigInt(t):parseInt(t.substring(e),n);function uie(t,e,n){const{value:r}=t;return TR(r)&&r>=0?n+r.toString(e):vf(t)}const die={identify:t=>TR(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,n)=>mj(t,2,8,n),stringify:t=>uie(t,8,"0o")},fie={identify:TR,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,n)=>mj(t,0,10,n),stringify:vf},hie={identify:t=>TR(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,n)=>mj(t,2,16,n),stringify:t=>uie(t,16,"0x")},zDe=[_1,b1,MR,ER,pj,die,fie,hie,aie,lie,cie];function UG(t){return typeof t=="bigint"||Number.isInteger(t)}const ZT=({value:t})=>JSON.stringify(t),FDe=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:ZT},{identify:t=>t==null,createNode:()=>new Or(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:ZT},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:t=>t==="true",stringify:ZT},{identify:UG,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:n})=>n?BigInt(t):parseInt(t,10),stringify:({value:t})=>UG(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:ZT}],BDe={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},$De=[_1,b1].concat(FDe,BDe),gj={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof Buffer=="function")return Buffer.from(t,"base64");if(typeof atob=="function"){const n=atob(t.replace(/[\n\r]/g,"")),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:n},r,i,o){const a=n;let s;if(typeof Buffer=="function")s=a instanceof Buffer?a.toString("base64"):Buffer.from(a.buffer).toString("base64");else if(typeof btoa=="function"){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);s=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e||(e=Or.BLOCK_LITERAL),e!==Or.QUOTE_DOUBLE){const l=Math.max(r.options.lineWidth-r.indent.length,r.options.minContentWidth),c=Math.ceil(s.length/l),h=new Array(c);for(let p=0,g=0;p<c;++p,g+=l)h[p]=s.substr(g,l);s=h.join(e===Or.BLOCK_LITERAL?`
`:" ")}return gE({comment:t,type:e,value:s},r,i,o)}};function pie(t,e){if(x1(t))for(let n=0;n<t.items.length;++n){let r=t.items[n];if(!Do(r)){if(v1(r)){r.items.length>1&&e("Each pair must have its own sequence indicator");const i=r.items[0]||new yl(new Or(null));if(r.commentBefore&&(i.key.commentBefore=i.key.commentBefore?`${r.commentBefore}
${i.key.commentBefore}`:r.commentBefore),r.comment){const o=i.value??i.key;o.comment=o.comment?`${r.comment}
${o.comment}`:r.comment}r=i}t.items[n]=Do(r)?r:new yl(r)}}else e("Expected a sequence for this tag");return t}function mie(t,e,n){const{replacer:r}=n,i=new ay(t);i.tag="tag:yaml.org,2002:pairs";let o=0;if(e&&Symbol.iterator in Object(e))for(let a of e){typeof r=="function"&&(a=r.call(e,String(o++),a));let s,l;if(Array.isArray(a))if(a.length===2)s=a[0],l=a[1];else throw new TypeError(`Expected [key, value] tuple: ${a}`);else if(a&&a instanceof Object){const c=Object.keys(a);if(c.length===1)s=c[0],l=a[s];else throw new TypeError(`Expected tuple with one key, not ${c.length} keys`)}else s=a;i.items.push(hj(s,l,n))}return i}const yj={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:pie,createNode:mie};class K_ extends ay{constructor(){super(),this.add=ru.prototype.add.bind(this),this.delete=ru.prototype.delete.bind(this),this.get=ru.prototype.get.bind(this),this.has=ru.prototype.has.bind(this),this.set=ru.prototype.set.bind(this),this.tag=K_.tag}toJSON(e,n){if(!n)return super.toJSON(e);const r=new Map;n!=null&&n.onCreate&&n.onCreate(r);for(const i of this.items){let o,a;if(Do(i)?(o=sd(i.key,"",n),a=sd(i.value,o,n)):o=sd(i,"",n),r.has(o))throw new Error("Ordered maps must not include duplicate keys");r.set(o,a)}return r}static from(e,n,r){const i=mie(e,n,r),o=new this;return o.items=i.items,o}}K_.tag="tag:yaml.org,2002:omap";const vj={collection:"seq",identify:t=>t instanceof Map,nodeClass:K_,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){const n=pie(t,e),r=[];for(const{key:i}of n.items)mo(i)&&(r.includes(i.value)?e(`Ordered maps must not include duplicate keys: ${i.value}`):r.push(i.value));return Object.assign(new K_,n)},createNode:(t,e,n)=>K_.from(t,e,n)};function gie({value:t,source:e},n){return e&&(t?yie:vie).test.test(e)?e:t?n.options.trueStr:n.options.falseStr}const yie={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new Or(!0),stringify:gie},vie={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new Or(!1),stringify:gie},jDe={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:vf},UDe={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():vf(t)}},VDe={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){const e=new Or(parseFloat(t.replace(/_/g,""))),n=t.indexOf(".");if(n!==-1){const r=t.substring(n+1).replace(/_/g,"");r[r.length-1]==="0"&&(e.minFractionDigits=r.length)}return e},stringify:vf},yE=t=>typeof t=="bigint"||Number.isInteger(t);function CR(t,e,n,{intAsBigInt:r}){const i=t[0];if((i==="-"||i==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),r){switch(n){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}const a=BigInt(t);return i==="-"?BigInt(-1)*a:a}const o=parseInt(t,n);return i==="-"?-1*o:o}function xj(t,e,n){const{value:r}=t;if(yE(r)){const i=r.toString(e);return r<0?"-"+n+i.substr(1):n+i}return vf(t)}const WDe={identify:yE,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,n)=>CR(t,2,2,n),stringify:t=>xj(t,2,"0b")},HDe={identify:yE,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,n)=>CR(t,1,8,n),stringify:t=>xj(t,8,"0")},GDe={identify:yE,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,n)=>CR(t,0,10,n),stringify:vf},qDe={identify:yE,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,n)=>CR(t,2,16,n),stringify:t=>xj(t,16,"0x")};class Z_ extends ru{constructor(e){super(e),this.tag=Z_.tag}add(e){let n;Do(e)?n=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?n=new yl(e.key,null):n=new yl(e,null),Kv(this.items,n.key)||this.items.push(n)}get(e,n){const r=Kv(this.items,e);return!n&&Do(r)?mo(r.key)?r.key.value:r.key:r}set(e,n){if(typeof n!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);const r=Kv(this.items,e);r&&!n?this.items.splice(this.items.indexOf(r),1):!r&&n&&this.items.push(new yl(e))}toJSON(e,n){return super.toJSON(e,n,Set)}toString(e,n,r){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),n,r);throw new Error("Set items must all have null values")}static from(e,n,r){const{replacer:i}=r,o=new this(e);if(n&&Symbol.iterator in Object(n))for(let a of n)typeof i=="function"&&(a=i.call(n,a,a)),o.items.push(hj(a,null,r));return o}}Z_.tag="tag:yaml.org,2002:set";const _j={collection:"map",identify:t=>t instanceof Set,nodeClass:Z_,default:!1,tag:"tag:yaml.org,2002:set",createNode:(t,e,n)=>Z_.from(t,e,n),resolve(t,e){if(v1(t)){if(t.hasAllNullValues(!0))return Object.assign(new Z_,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t}};function bj(t,e){const n=t[0],r=n==="-"||n==="+"?t.substring(1):t,i=a=>e?BigInt(a):Number(a),o=r.replace(/_/g,"").split(":").reduce((a,s)=>a*i(60)+i(s),i(0));return n==="-"?i(-1)*o:o}function xie(t){let{value:e}=t,n=a=>a;if(typeof e=="bigint")n=a=>BigInt(a);else if(isNaN(e)||!isFinite(e))return vf(t);let r="";e<0&&(r="-",e*=n(-1));const i=n(60),o=[e%i];return e<60?o.unshift(0):(e=(e-o[0])/i,o.unshift(e%i),e>=60&&(e=(e-o[0])/i,o.unshift(e))),r+o.map(a=>String(a).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const _ie={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:n})=>bj(t,n),stringify:xie},bie={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>bj(t,!1),stringify:xie},AR={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){const e=t.match(AR.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,r,i,o,a,s]=e.map(Number),l=e[7]?Number((e[7]+"00").substr(1,3)):0;let c=Date.UTC(n,r-1,i,o||0,a||0,s||0,l);const h=e[8];if(h&&h!=="Z"){let p=bj(h,!1);Math.abs(p)<30&&(p*=60),c-=6e4*p}return new Date(c)},stringify:({value:t})=>t.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")},VG=[_1,b1,MR,ER,yie,vie,WDe,HDe,GDe,qDe,jDe,UDe,VDe,gj,vj,yj,_j,_ie,bie,AR],WG=new Map([["core",zDe],["failsafe",[_1,b1,MR]],["json",$De],["yaml11",VG],["yaml-1.1",VG]]),HG={binary:gj,bool:pj,float:cie,floatExp:lie,floatNaN:aie,floatTime:bie,int:fie,intHex:hie,intOct:die,intTime:_ie,map:_1,null:ER,omap:vj,pairs:yj,seq:b1,set:_j,timestamp:AR},YDe={"tag:yaml.org,2002:binary":gj,"tag:yaml.org,2002:omap":vj,"tag:yaml.org,2002:pairs":yj,"tag:yaml.org,2002:set":_j,"tag:yaml.org,2002:timestamp":AR};function n3(t,e){let n=WG.get(e);if(!n)if(Array.isArray(t))n=[];else{const r=Array.from(WG.keys()).filter(i=>i!=="yaml11").map(i=>JSON.stringify(i)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${r} or define customTags array`)}if(Array.isArray(t))for(const r of t)n=n.concat(r);else typeof t=="function"&&(n=t(n.slice()));return n.map(r=>{if(typeof r!="string")return r;const i=HG[r];if(i)return i;const o=Object.keys(HG).map(a=>JSON.stringify(a)).join(", ");throw new Error(`Unknown custom tag "${r}"; use one of ${o}`)})}const XDe=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0;class PR{constructor({compat:e,customTags:n,merge:r,resolveKnownTags:i,schema:o,sortMapEntries:a,toStringDefaults:s}){this.compat=Array.isArray(e)?n3(e,"compat"):e?n3(null,e):null,this.merge=!!r,this.name=typeof o=="string"&&o||"core",this.knownTags=i?YDe:{},this.tags=n3(n,this.name),this.toStringOptions=s??null,Object.defineProperty(this,Yg,{value:_1}),Object.defineProperty(this,qp,{value:MR}),Object.defineProperty(this,g1,{value:b1}),this.sortMapEntries=typeof a=="function"?a:a===!0?XDe:null}clone(){const e=Object.create(PR.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}function KDe(t,e){var l;const n=[];let r=e.directives===!0;if(e.directives!==!1&&t.directives){const c=t.directives.toString(t);c?(n.push(c),r=!0):t.directives.docStart&&(r=!0)}r&&n.push("---");const i=rie(t,e),{commentString:o}=i.options;if(t.commentBefore){n.length!==1&&n.unshift("");const c=o(t.commentBefore);n.unshift(Ep(c,""))}let a=!1,s=null;if(t.contents){if(Ss(t.contents)){if(t.contents.spaceBefore&&r&&n.push(""),t.contents.commentBefore){const p=o(t.contents.commentBefore);n.push(Ep(p,""))}i.forceBlockIndent=!!t.comment,s=t.contents.comment}const c=s?void 0:()=>a=!0;let h=Ab(t.contents,i,()=>s=null,c);s&&(h+=Rg(h,"",o(s))),(h[0]==="|"||h[0]===">")&&n[n.length-1]==="---"?n[n.length-1]=`--- ${h}`:n.push(h)}else n.push(Ab(t.contents,i));if((l=t.directives)!=null&&l.docEnd)if(t.comment){const c=o(t.comment);c.includes(`
`)?(n.push("..."),n.push(Ep(c,""))):n.push(`... ${c}`)}else n.push("...");else{let c=t.comment;c&&a&&(c=c.replace(/^\n+/,"")),c&&((!a||s)&&n[n.length-1]!==""&&n.push(""),n.push(Ep(o(c),"")))}return n.join(`
`)+`
`}class w1{constructor(e,n,r){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,md,{value:RF});let i=null;typeof n=="function"||Array.isArray(n)?i=n:r===void 0&&n&&(r=n,n=void 0);const o=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"},r);this.options=o;let{version:a}=o;r!=null&&r._directives?(this.directives=r._directives.atDocument(),this.directives.yaml.explicit&&(a=this.directives.yaml.version)):this.directives=new jl({version:a}),this.setSchema(a,r),this.contents=e===void 0?null:this.createNode(e,i,r)}clone(){const e=Object.create(w1.prototype,{[md]:{value:RF}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=Ss(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){Cx(this.contents)&&this.contents.add(e)}addIn(e,n){Cx(this.contents)&&this.contents.addIn(e,n)}createAlias(e,n){if(!e.anchor){const r=Qre(this);e.anchor=!n||r.has(n)?eie(n||"a",r):n}return new xR(e.anchor)}createNode(e,n,r){let i;if(typeof n=="function")e=n.call({"":e},"",e),i=n;else if(Array.isArray(n)){const M=T=>typeof T=="number"||T instanceof String||T instanceof Number,w=n.filter(M).map(String);w.length>0&&(n=n.concat(w)),i=n}else r===void 0&&n&&(r=n,n=void 0);const{aliasDuplicateObjects:o,anchorPrefix:a,flow:s,keepUndefined:l,onTagObj:c,tag:h}=r??{},{onAnchor:p,setAnchors:g,sourceObjects:v}=MDe(this,a||"a"),x={aliasDuplicateObjects:o??!0,keepUndefined:l??!1,onAnchor:p,onTagObj:c,replacer:i,schema:this.schema,sourceObjects:v},b=RM(e,h,x);return s&&Vo(b)&&(b.flow=!0),g(),b}createPair(e,n,r={}){const i=this.createNode(e,null,r),o=this.createNode(n,null,r);return new yl(i,o)}delete(e){return Cx(this.contents)?this.contents.delete(e):!1}deleteIn(e){return _S(e)?this.contents==null?!1:(this.contents=null,!0):Cx(this.contents)?this.contents.deleteIn(e):!1}get(e,n){return Vo(this.contents)?this.contents.get(e,n):void 0}getIn(e,n){return _S(e)?!n&&mo(this.contents)?this.contents.value:this.contents:Vo(this.contents)?this.contents.getIn(e,n):void 0}has(e){return Vo(this.contents)?this.contents.has(e):!1}hasIn(e){return _S(e)?this.contents!==void 0:Vo(this.contents)?this.contents.hasIn(e):!1}set(e,n){this.contents==null?this.contents=VP(this.schema,[e],n):Cx(this.contents)&&this.contents.set(e,n)}setIn(e,n){_S(e)?this.contents=n:this.contents==null?this.contents=VP(this.schema,Array.from(e),n):Cx(this.contents)&&this.contents.setIn(e,n)}setSchema(e,n={}){typeof e=="number"&&(e=String(e));let r;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new jl({version:"1.1"}),r={merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new jl({version:e}),r={merge:!1,resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,r=null;break;default:{const i=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${i}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(r)this.schema=new PR(Object.assign(r,n));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:n,mapAsMap:r,maxAliasCount:i,onAnchor:o,reviver:a}={}){const s={anchors:new Map,doc:this,keep:!e,mapAsMap:r===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100},l=sd(this.contents,n??"",s);if(typeof o=="function")for(const{count:c,res:h}of s.anchors.values())o(h,c);return typeof a=="function"?T_(a,{"":l},"",l):l}toJSON(e,n){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:n})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const n=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${n}`)}return KDe(this,e)}}function Cx(t){if(Vo(t))return!0;throw new Error("Expected a YAML collection as document contents")}class wj extends Error{constructor(e,n,r,i){super(),this.name=e,this.code=r,this.message=i,this.pos=n}}class Zv extends wj{constructor(e,n,r){super("YAMLParseError",e,n,r)}}class wie extends wj{constructor(e,n,r){super("YAMLWarning",e,n,r)}}const HP=(t,e)=>n=>{if(n.pos[0]===-1)return;n.linePos=n.pos.map(s=>e.linePos(s));const{line:r,col:i}=n.linePos[0];n.message+=` at line ${r}, column ${i}`;let o=i-1,a=t.substring(e.lineStarts[r-1],e.lineStarts[r]).replace(/[\n\r]+$/,"");if(o>=60&&a.length>80){const s=Math.min(o-39,a.length-79);a="…"+a.substring(s),o-=s-1}if(a.length>80&&(a=a.substring(0,79)+"…"),r>1&&/^ *$/.test(a.substring(0,o))){let s=t.substring(e.lineStarts[r-2],e.lineStarts[r-1]);s.length>80&&(s=s.substring(0,79)+`…
`),a=s+a}if(/[^ ]/.test(a)){let s=1;const l=n.linePos[1];l&&l.line===r&&l.col>i&&(s=Math.max(1,Math.min(l.col-i,80-o)));const c=" ".repeat(o)+"^".repeat(s);n.message+=`:

${a}
${c}
`}};function Pb(t,{flow:e,indicator:n,next:r,offset:i,onError:o,startOnNewline:a}){let s=!1,l=a,c=a,h="",p="",g=!1,v=!1,x=!1,b=null,M=null,w=null,T=null,C=null;for(const O of t)switch(x&&(O.type!=="space"&&O.type!=="newline"&&O.type!=="comma"&&o(O.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),x=!1),O.type){case"space":!e&&l&&n!=="doc-start"&&O.source[0]==="	"&&o(O,"TAB_AS_INDENT","Tabs are not allowed as indentation"),c=!0;break;case"comment":{c||o(O,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const B=O.source.substring(1)||" ";h?h+=p+B:h=B,p="",l=!1;break}case"newline":l?h?h+=O.source:s=!0:p+=O.source,l=!0,g=!0,(b||M)&&(v=!0),c=!0;break;case"anchor":b&&o(O,"MULTIPLE_ANCHORS","A node can have at most one anchor"),O.source.endsWith(":")&&o(O.offset+O.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),b=O,C===null&&(C=O.offset),l=!1,c=!1,x=!0;break;case"tag":{M&&o(O,"MULTIPLE_TAGS","A node can have at most one tag"),M=O,C===null&&(C=O.offset),l=!1,c=!1,x=!0;break}case n:(b||M)&&o(O,"BAD_PROP_ORDER",`Anchors and tags must be after the ${O.source} indicator`),T&&o(O,"UNEXPECTED_TOKEN",`Unexpected ${O.source} in ${e??"collection"}`),T=O,l=!1,c=!1;break;case"comma":if(e){w&&o(O,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),w=O,l=!1,c=!1;break}default:o(O,"UNEXPECTED_TOKEN",`Unexpected ${O.type} token`),l=!1,c=!1}const I=t[t.length-1],R=I?I.offset+I.source.length:i;return x&&r&&r.type!=="space"&&r.type!=="newline"&&r.type!=="comma"&&(r.type!=="scalar"||r.source!=="")&&o(r.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:w,found:T,spaceBefore:s,comment:h,hasNewline:g,hasNewlineAfterProp:v,anchor:b,tag:M,end:R,start:C??R}}function OM(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes(`
`))return!0;if(t.end){for(const e of t.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(const e of t.items){for(const n of e.start)if(n.type==="newline")return!0;if(e.sep){for(const n of e.sep)if(n.type==="newline")return!0}if(OM(e.key)||OM(e.value))return!0}return!1;default:return!0}}function NF(t,e,n){if((e==null?void 0:e.type)==="flow-collection"){const r=e.end[0];r.indent===t&&(r.source==="]"||r.source==="}")&&OM(e)&&n(r,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function Sie(t,e,n){const{uniqueKeys:r}=t.options;if(r===!1)return!1;const i=typeof r=="function"?r:(o,a)=>o===a||mo(o)&&mo(a)&&o.value===a.value&&!(o.value==="<<"&&t.schema.merge);return e.some(o=>i(o.key,n))}const GG="All mapping items must start at the same column";function ZDe({composeNode:t,composeEmptyNode:e},n,r,i,o){var h;const a=(o==null?void 0:o.nodeClass)??ru,s=new a(n.schema);n.atRoot&&(n.atRoot=!1);let l=r.offset,c=null;for(const p of r.items){const{start:g,key:v,sep:x,value:b}=p,M=Pb(g,{indicator:"explicit-key-ind",next:v??(x==null?void 0:x[0]),offset:l,onError:i,startOnNewline:!0}),w=!M.found;if(w){if(v&&(v.type==="block-seq"?i(l,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in v&&v.indent!==r.indent&&i(l,"BAD_INDENT",GG)),!M.anchor&&!M.tag&&!x){c=M.end,M.comment&&(s.comment?s.comment+=`
`+M.comment:s.comment=M.comment);continue}(M.hasNewlineAfterProp||OM(v))&&i(v??g[g.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else((h=M.found)==null?void 0:h.indent)!==r.indent&&i(l,"BAD_INDENT",GG);const T=M.end,C=v?t(n,v,M,i):e(n,T,g,null,M,i);n.schema.compat&&NF(r.indent,v,i),Sie(n,s.items,C)&&i(T,"DUPLICATE_KEY","Map keys must be unique");const I=Pb(x??[],{indicator:"map-value-ind",next:b,offset:C.range[2],onError:i,startOnNewline:!v||v.type==="block-scalar"});if(l=I.end,I.found){w&&((b==null?void 0:b.type)==="block-map"&&!I.hasNewline&&i(l,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&M.start<I.found.offset-1024&&i(C.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const R=b?t(n,b,I,i):e(n,l,x,null,I,i);n.schema.compat&&NF(r.indent,b,i),l=R.range[2];const O=new yl(C,R);n.options.keepSourceTokens&&(O.srcToken=p),s.items.push(O)}else{w&&i(C.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),I.comment&&(C.comment?C.comment+=`
`+I.comment:C.comment=I.comment);const R=new yl(C);n.options.keepSourceTokens&&(R.srcToken=p),s.items.push(R)}}return c&&c<l&&i(c,"IMPOSSIBLE","Map comment with trailing content"),s.range=[r.offset,l,c??l],s}function JDe({composeNode:t,composeEmptyNode:e},n,r,i,o){const a=(o==null?void 0:o.nodeClass)??ay,s=new a(n.schema);n.atRoot&&(n.atRoot=!1);let l=r.offset,c=null;for(const{start:h,value:p}of r.items){const g=Pb(h,{indicator:"seq-item-ind",next:p,offset:l,onError:i,startOnNewline:!0});if(!g.found)if(g.anchor||g.tag||p)p&&p.type==="block-seq"?i(g.end,"BAD_INDENT","All sequence items must start at the same column"):i(l,"MISSING_CHAR","Sequence item without - indicator");else{c=g.end,g.comment&&(s.comment=g.comment);continue}const v=p?t(n,p,g,i):e(n,g.end,h,null,g,i);n.schema.compat&&NF(r.indent,p,i),l=v.range[2],s.items.push(v)}return s.range=[r.offset,l,c??l],s}function vE(t,e,n,r){let i="";if(t){let o=!1,a="";for(const s of t){const{source:l,type:c}=s;switch(c){case"space":o=!0;break;case"comment":{n&&!o&&r(s,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const h=l.substring(1)||" ";i?i+=a+h:i=h,a="";break}case"newline":i&&(a+=l),o=!0;break;default:r(s,"UNEXPECTED_TOKEN",`Unexpected ${c} at node end`)}e+=l.length}}return{comment:i,offset:e}}const r3="Block collections are not allowed within flow collections",i3=t=>t&&(t.type==="block-map"||t.type==="block-seq");function QDe({composeNode:t,composeEmptyNode:e},n,r,i,o){const a=r.start.source==="{",s=a?"flow map":"flow sequence",l=(o==null?void 0:o.nodeClass)??(a?ru:ay),c=new l(n.schema);c.flow=!0;const h=n.atRoot;h&&(n.atRoot=!1);let p=r.offset+r.start.source.length;for(let M=0;M<r.items.length;++M){const w=r.items[M],{start:T,key:C,sep:I,value:R}=w,O=Pb(T,{flow:s,indicator:"explicit-key-ind",next:C??(I==null?void 0:I[0]),offset:p,onError:i,startOnNewline:!1});if(!O.found){if(!O.anchor&&!O.tag&&!I&&!R){M===0&&O.comma?i(O.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`):M<r.items.length-1&&i(O.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${s}`),O.comment&&(c.comment?c.comment+=`
`+O.comment:c.comment=O.comment),p=O.end;continue}!a&&n.options.strict&&OM(C)&&i(C,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(M===0)O.comma&&i(O.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`);else if(O.comma||i(O.start,"MISSING_CHAR",`Missing , between ${s} items`),O.comment){let B="";e:for(const U of T)switch(U.type){case"comma":case"space":break;case"comment":B=U.source.substring(1);break e;default:break e}if(B){let U=c.items[c.items.length-1];Do(U)&&(U=U.value??U.key),U.comment?U.comment+=`
`+B:U.comment=B,O.comment=O.comment.substring(B.length+1)}}if(!a&&!I&&!O.found){const B=R?t(n,R,O,i):e(n,O.end,I,null,O,i);c.items.push(B),p=B.range[2],i3(R)&&i(B.range,"BLOCK_IN_FLOW",r3)}else{const B=O.end,U=C?t(n,C,O,i):e(n,B,T,null,O,i);i3(C)&&i(U.range,"BLOCK_IN_FLOW",r3);const Z=Pb(I??[],{flow:s,indicator:"map-value-ind",next:R,offset:U.range[2],onError:i,startOnNewline:!1});if(Z.found){if(!a&&!O.found&&n.options.strict){if(I)for(const le of I){if(le===Z.found)break;if(le.type==="newline"){i(le,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}O.start<Z.found.offset-1024&&i(Z.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else R&&("source"in R&&R.source&&R.source[0]===":"?i(R,"MISSING_CHAR",`Missing space after : in ${s}`):i(Z.start,"MISSING_CHAR",`Missing , or : between ${s} items`));const j=R?t(n,R,Z,i):Z.found?e(n,Z.end,I,null,Z,i):null;j?i3(R)&&i(j.range,"BLOCK_IN_FLOW",r3):Z.comment&&(U.comment?U.comment+=`
`+Z.comment:U.comment=Z.comment);const X=new yl(U,j);if(n.options.keepSourceTokens&&(X.srcToken=w),a){const le=c;Sie(n,le.items,U)&&i(B,"DUPLICATE_KEY","Map keys must be unique"),le.items.push(X)}else{const le=new ru(n.schema);le.flow=!0,le.items.push(X),c.items.push(le)}p=j?j.range[2]:Z.end}}const g=a?"}":"]",[v,...x]=r.end;let b=p;if(v&&v.source===g)b=v.offset+v.source.length;else{const M=s[0].toUpperCase()+s.substring(1),w=h?`${M} must end with a ${g}`:`${M} in block collection must be sufficiently indented and end with a ${g}`;i(p,h?"MISSING_CHAR":"BAD_INDENT",w),v&&v.source.length!==1&&x.unshift(v)}if(x.length>0){const M=vE(x,b,n.options.strict,i);M.comment&&(c.comment?c.comment+=`
`+M.comment:c.comment=M.comment),c.range=[r.offset,b,M.offset]}else c.range=[r.offset,b,b];return c}function o3(t,e,n,r,i,o){const a=n.type==="block-map"?ZDe(t,e,n,r,o):n.type==="block-seq"?JDe(t,e,n,r,o):QDe(t,e,n,r,o),s=a.constructor;return i==="!"||i===s.tagName?(a.tag=s.tagName,a):(i&&(a.tag=i),a)}function e3e(t,e,n,r,i){var p;const o=r?e.directives.tagName(r.source,g=>i(r,"TAG_RESOLVE_FAILED",g)):null,a=n.type==="block-map"?"map":n.type==="block-seq"?"seq":n.start.source==="{"?"map":"seq";if(!r||!o||o==="!"||o===ru.tagName&&a==="map"||o===ay.tagName&&a==="seq"||!a)return o3(t,e,n,i,o);let s=e.schema.tags.find(g=>g.tag===o&&g.collection===a);if(!s){const g=e.schema.knownTags[o];if(g&&g.collection===a)e.schema.tags.push(Object.assign({},g,{default:!1})),s=g;else return g!=null&&g.collection?i(r,"BAD_COLLECTION_TYPE",`${g.tag} used for ${a} collection, but expects ${g.collection}`,!0):i(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),o3(t,e,n,i,o)}const l=o3(t,e,n,i,o,s),c=((p=s.resolve)==null?void 0:p.call(s,l,g=>i(r,"TAG_RESOLVE_FAILED",g),e.options))??l,h=Ss(c)?c:new Or(c);return h.range=l.range,h.tag=o,s!=null&&s.format&&(h.format=s.format),h}function Mie(t,e,n){const r=t.offset,i=t3e(t,e,n);if(!i)return{value:"",type:null,comment:"",range:[r,r,r]};const o=i.mode===">"?Or.BLOCK_FOLDED:Or.BLOCK_LITERAL,a=t.source?n3e(t.source):[];let s=a.length;for(let b=a.length-1;b>=0;--b){const M=a[b][1];if(M===""||M==="\r")s=b;else break}if(s===0){const b=i.chomp==="+"&&a.length>0?`
`.repeat(Math.max(1,a.length-1)):"";let M=r+i.length;return t.source&&(M+=t.source.length),{value:b,type:o,comment:i.comment,range:[r,M,M]}}let l=t.indent+i.indent,c=t.offset+i.length,h=0;for(let b=0;b<s;++b){const[M,w]=a[b];if(w===""||w==="\r")i.indent===0&&M.length>l&&(l=M.length);else{if(M.length<l){const T="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";n(c+M.length,"MISSING_CHAR",T)}i.indent===0&&(l=M.length),h=b;break}c+=M.length+w.length+1}for(let b=a.length-1;b>=s;--b)a[b][0].length>l&&(s=b+1);let p="",g="",v=!1;for(let b=0;b<h;++b)p+=a[b][0].slice(l)+`
`;for(let b=h;b<s;++b){let[M,w]=a[b];c+=M.length+w.length+1;const T=w[w.length-1]==="\r";if(T&&(w=w.slice(0,-1)),w&&M.length<l){const I=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;n(c-w.length-(T?2:1),"BAD_INDENT",I),M=""}o===Or.BLOCK_LITERAL?(p+=g+M.slice(l)+w,g=`
`):M.length>l||w[0]==="	"?(g===" "?g=`
`:!v&&g===`
`&&(g=`

`),p+=g+M.slice(l)+w,g=`
`,v=!0):w===""?g===`
`?p+=`
`:g=`
`:(p+=g+w,g=" ",v=!1)}switch(i.chomp){case"-":break;case"+":for(let b=s;b<a.length;++b)p+=`
`+a[b][0].slice(l);p[p.length-1]!==`
`&&(p+=`
`);break;default:p+=`
`}const x=r+i.length+t.source.length;return{value:p,type:o,comment:i.comment,range:[r,x,x]}}function t3e({offset:t,props:e},n,r){if(e[0].type!=="block-scalar-header")return r(e[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:i}=e[0],o=i[0];let a=0,s="",l=-1;for(let g=1;g<i.length;++g){const v=i[g];if(!s&&(v==="-"||v==="+"))s=v;else{const x=Number(v);!a&&x?a=x:l===-1&&(l=t+g)}}l!==-1&&r(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let c=!1,h="",p=i.length;for(let g=1;g<e.length;++g){const v=e[g];switch(v.type){case"space":c=!0;case"newline":p+=v.source.length;break;case"comment":n&&!c&&r(v,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),p+=v.source.length,h=v.source.substring(1);break;case"error":r(v,"UNEXPECTED_TOKEN",v.message),p+=v.source.length;break;default:{const x=`Unexpected token in block scalar header: ${v.type}`;r(v,"UNEXPECTED_TOKEN",x);const b=v.source;b&&typeof b=="string"&&(p+=b.length)}}}return{mode:o,indent:a,chomp:s,comment:h,length:p}}function n3e(t){const e=t.split(/\n( *)/),n=e[0],r=n.match(/^( *)/),o=[r!=null&&r[1]?[r[1],n.slice(r[1].length)]:["",n]];for(let a=1;a<e.length;a+=2)o.push([e[a],e[a+1]]);return o}function Eie(t,e,n){const{offset:r,type:i,source:o,end:a}=t;let s,l;const c=(g,v,x)=>n(r+g,v,x);switch(i){case"scalar":s=Or.PLAIN,l=r3e(o,c);break;case"single-quoted-scalar":s=Or.QUOTE_SINGLE,l=i3e(o,c);break;case"double-quoted-scalar":s=Or.QUOTE_DOUBLE,l=o3e(o,c);break;default:return n(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[r,r+o.length,r+o.length]}}const h=r+o.length,p=vE(a,h,e,n);return{value:l,type:s,comment:p.comment,range:[r,h,p.offset]}}function r3e(t,e){let n="";switch(t[0]){case"	":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":{n=`block scalar indicator ${t[0]}`;break}case"@":case"`":{n=`reserved character ${t[0]}`;break}}return n&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),Tie(t)}function i3e(t,e){return(t[t.length-1]!=="'"||t.length===1)&&e(t.length,"MISSING_CHAR","Missing closing 'quote"),Tie(t.slice(1,-1)).replace(/''/g,"'")}function Tie(t){let e,n;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),n=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let r=e.exec(t);if(!r)return t;let i=r[1],o=" ",a=e.lastIndex;for(n.lastIndex=a;r=n.exec(t);)r[1]===""?o===`
`?i+=o:o=`
`:(i+=o+r[1],o=" "),a=n.lastIndex;const s=/[ \t]*(.*)/sy;return s.lastIndex=a,r=s.exec(t),i+o+((r==null?void 0:r[1])??"")}function o3e(t,e){let n="";for(let r=1;r<t.length-1;++r){const i=t[r];if(!(i==="\r"&&t[r+1]===`
`))if(i===`
`){const{fold:o,offset:a}=s3e(t,r);n+=o,r=a}else if(i==="\\"){let o=t[++r];const a=a3e[o];if(a)n+=a;else if(o===`
`)for(o=t[r+1];o===" "||o==="	";)o=t[++r+1];else if(o==="\r"&&t[r+1]===`
`)for(o=t[++r+1];o===" "||o==="	";)o=t[++r+1];else if(o==="x"||o==="u"||o==="U"){const s={x:2,u:4,U:8}[o];n+=l3e(t,r+1,s,e),r+=s}else{const s=t.substr(r-1,2);e(r-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${s}`),n+=s}}else if(i===" "||i==="	"){const o=r;let a=t[r+1];for(;a===" "||a==="	";)a=t[++r+1];a!==`
`&&!(a==="\r"&&t[r+2]===`
`)&&(n+=r>o?t.slice(o,r+1):i)}else n+=i}return(t[t.length-1]!=='"'||t.length===1)&&e(t.length,"MISSING_CHAR",'Missing closing "quote'),n}function s3e(t,e){let n="",r=t[e+1];for(;(r===" "||r==="	"||r===`
`||r==="\r")&&!(r==="\r"&&t[e+2]!==`
`);)r===`
`&&(n+=`
`),e+=1,r=t[e+1];return n||(n=" "),{fold:n,offset:e}}const a3e={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"",_:" ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function l3e(t,e,n,r){const i=t.substr(e,n),a=i.length===n&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(a)){const s=t.substr(e-2,n+2);return r(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${s}`),s}return String.fromCodePoint(a)}function Cie(t,e,n,r){const{value:i,type:o,comment:a,range:s}=e.type==="block-scalar"?Mie(e,t.options.strict,r):Eie(e,t.options.strict,r),l=n?t.directives.tagName(n.source,p=>r(n,"TAG_RESOLVE_FAILED",p)):null,c=n&&l?c3e(t.schema,i,l,n,r):e.type==="scalar"?u3e(t,i,e,r):t.schema[qp];let h;try{const p=c.resolve(i,g=>r(n??e,"TAG_RESOLVE_FAILED",g),t.options);h=mo(p)?p:new Or(p)}catch(p){const g=p instanceof Error?p.message:String(p);r(n??e,"TAG_RESOLVE_FAILED",g),h=new Or(i)}return h.range=s,h.source=i,o&&(h.type=o),l&&(h.tag=l),c.format&&(h.format=c.format),a&&(h.comment=a),h}function c3e(t,e,n,r,i){var s;if(n==="!")return t[qp];const o=[];for(const l of t.tags)if(!l.collection&&l.tag===n)if(l.default&&l.test)o.push(l);else return l;for(const l of o)if((s=l.test)!=null&&s.test(e))return l;const a=t.knownTags[n];return a&&!a.collection?(t.tags.push(Object.assign({},a,{default:!1,test:void 0})),a):(i(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,n!=="tag:yaml.org,2002:str"),t[qp])}function u3e({directives:t,schema:e},n,r,i){const o=e.tags.find(a=>{var s;return a.default&&((s=a.test)==null?void 0:s.test(n))})||e[qp];if(e.compat){const a=e.compat.find(s=>{var l;return s.default&&((l=s.test)==null?void 0:l.test(n))})??e[qp];if(o.tag!==a.tag){const s=t.tagString(o.tag),l=t.tagString(a.tag),c=`Value may be parsed as either ${s} or ${l}`;i(r,"TAG_RESOLVE_FAILED",c,!0)}}return o}function d3e(t,e,n){if(e){n===null&&(n=e.length);for(let r=n-1;r>=0;--r){let i=e[r];switch(i.type){case"space":case"comment":case"newline":t-=i.source.length;continue}for(i=e[++r];(i==null?void 0:i.type)==="space";)t+=i.source.length,i=e[++r];break}}return t}const f3e={composeNode:Aie,composeEmptyNode:Sj};function Aie(t,e,n,r){const{spaceBefore:i,comment:o,anchor:a,tag:s}=n;let l,c=!0;switch(e.type){case"alias":l=h3e(t,e,r),(a||s)&&r(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":l=Cie(t,e,s,r),a&&(l.anchor=a.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":l=e3e(f3e,t,e,s,r),a&&(l.anchor=a.source.substring(1));break;default:{const h=e.type==="error"?e.message:`Unsupported token (type: ${e.type})`;r(e,"UNEXPECTED_TOKEN",h),l=Sj(t,e.offset,void 0,null,n,r),c=!1}}return a&&l.anchor===""&&r(a,"BAD_ALIAS","Anchor cannot be an empty string"),i&&(l.spaceBefore=!0),o&&(e.type==="scalar"&&e.source===""?l.comment=o:l.commentBefore=o),t.options.keepSourceTokens&&c&&(l.srcToken=e),l}function Sj(t,e,n,r,{spaceBefore:i,comment:o,anchor:a,tag:s,end:l},c){const h={type:"scalar",offset:d3e(e,n,r),indent:-1,source:""},p=Cie(t,h,s,c);return a&&(p.anchor=a.source.substring(1),p.anchor===""&&c(a,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(p.spaceBefore=!0),o&&(p.comment=o,p.range[2]=l),p}function h3e({options:t},{offset:e,source:n,end:r},i){const o=new xR(n.substring(1));o.source===""&&i(e,"BAD_ALIAS","Alias cannot be an empty string"),o.source.endsWith(":")&&i(e+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const a=e+n.length,s=vE(r,a,t.strict,i);return o.range=[e,a,s.offset],s.comment&&(o.comment=s.comment),o}function p3e(t,e,{offset:n,start:r,value:i,end:o},a){const s=Object.assign({_directives:e},t),l=new w1(void 0,s),c={atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},h=Pb(r,{indicator:"doc-start",next:i??(o==null?void 0:o[0]),offset:n,onError:a,startOnNewline:!0});h.found&&(l.directives.docStart=!0,i&&(i.type==="block-map"||i.type==="block-seq")&&!h.hasNewline&&a(h.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=i?Aie(c,i,h,a):Sj(c,h.end,r,null,h,a);const p=l.contents.range[2],g=vE(o,p,!1,a);return g.comment&&(l.comment=g.comment),l.range=[n,p,g.offset],l}function Fw(t){if(typeof t=="number")return[t,t+1];if(Array.isArray(t))return t.length===2?t:[t[0],t[1]];const{offset:e,source:n}=t;return[e,e+(typeof n=="string"?n.length:1)]}function qG(t){var i;let e="",n=!1,r=!1;for(let o=0;o<t.length;++o){const a=t[o];switch(a[0]){case"#":e+=(e===""?"":r?`

`:`
`)+(a.substring(1)||" "),n=!0,r=!1;break;case"%":((i=t[o+1])==null?void 0:i[0])!=="#"&&(o+=1),n=!1;break;default:n||(r=!0),n=!1}}return{comment:e,afterEmptyLine:r}}class Mj{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(n,r,i,o)=>{const a=Fw(n);o?this.warnings.push(new wie(a,r,i)):this.errors.push(new Zv(a,r,i))},this.directives=new jl({version:e.version||"1.2"}),this.options=e}decorate(e,n){const{comment:r,afterEmptyLine:i}=qG(this.prelude);if(r){const o=e.contents;if(n)e.comment=e.comment?`${e.comment}
${r}`:r;else if(i||e.directives.docStart||!o)e.commentBefore=r;else if(Vo(o)&&!o.flow&&o.items.length>0){let a=o.items[0];Do(a)&&(a=a.key);const s=a.commentBefore;a.commentBefore=s?`${r}
${s}`:r}else{const a=o.commentBefore;o.commentBefore=a?`${r}
${a}`:r}}n?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:qG(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,n=!1,r=-1){for(const i of e)yield*this.next(i);yield*this.end(n,r)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(n,r,i)=>{const o=Fw(e);o[0]+=n,this.onError(o,"BAD_DIRECTIVE",r,i)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const n=p3e(this.options,this.directives,e,this.onError);this.atDirectives&&!n.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(n,!1),this.doc&&(yield this.doc),this.doc=n,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const n=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,r=new Zv(Fw(e),"UNEXPECTED_TOKEN",n);this.atDirectives||!this.doc?this.errors.push(r):this.doc.errors.push(r);break}case"doc-end":{if(!this.doc){const r="Unexpected doc-end without preceding document";this.errors.push(new Zv(Fw(e),"UNEXPECTED_TOKEN",r));break}this.doc.directives.docEnd=!0;const n=vE(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),n.comment){const r=this.doc.comment;this.doc.comment=r?`${r}
${n.comment}`:n.comment}this.doc.range[2]=n.offset;break}default:this.errors.push(new Zv(Fw(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,n=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const r=Object.assign({_directives:this.directives},this.options),i=new w1(void 0,r);this.atDirectives&&this.onError(n,"MISSING_CHAR","Missing directives-end indicator line"),i.range=[0,n,n],this.decorate(i,!1),yield i}}}function m3e(t,e=!0,n){if(t){const r=(i,o,a)=>{const s=typeof i=="number"?i:Array.isArray(i)?i[0]:i.offset;if(n)n(s,o,a);else throw new Zv([s,s+1],o,a)};switch(t.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return Eie(t,e,r);case"block-scalar":return Mie(t,e,r)}}return null}function g3e(t,e){const{implicitKey:n=!1,indent:r,inFlow:i=!1,offset:o=-1,type:a="PLAIN"}=e,s=gE({type:a,value:t},{implicitKey:n,indent:r>0?" ".repeat(r):"",inFlow:i,options:{blockQuote:!0,lineWidth:-1}}),l=e.end??[{type:"newline",offset:-1,indent:r,source:`
`}];switch(s[0]){case"|":case">":{const c=s.indexOf(`
`),h=s.substring(0,c),p=s.substring(c+1)+`
`,g=[{type:"block-scalar-header",offset:o,indent:r,source:h}];return Pie(g,l)||g.push({type:"newline",offset:-1,indent:r,source:`
`}),{type:"block-scalar",offset:o,indent:r,props:g,source:p}}case'"':return{type:"double-quoted-scalar",offset:o,indent:r,source:s,end:l};case"'":return{type:"single-quoted-scalar",offset:o,indent:r,source:s,end:l};default:return{type:"scalar",offset:o,indent:r,source:s,end:l}}}function y3e(t,e,n={}){let{afterKey:r=!1,implicitKey:i=!1,inFlow:o=!1,type:a}=n,s="indent"in t?t.indent:null;if(r&&typeof s=="number"&&(s+=2),!a)switch(t.type){case"single-quoted-scalar":a="QUOTE_SINGLE";break;case"double-quoted-scalar":a="QUOTE_DOUBLE";break;case"block-scalar":{const c=t.props[0];if(c.type!=="block-scalar-header")throw new Error("Invalid block scalar header");a=c.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:a="PLAIN"}const l=gE({type:a,value:e},{implicitKey:i||s===null,indent:s!==null&&s>0?" ".repeat(s):"",inFlow:o,options:{blockQuote:!0,lineWidth:-1}});switch(l[0]){case"|":case">":v3e(t,l);break;case'"':s3(t,l,"double-quoted-scalar");break;case"'":s3(t,l,"single-quoted-scalar");break;default:s3(t,l,"scalar")}}function v3e(t,e){const n=e.indexOf(`
`),r=e.substring(0,n),i=e.substring(n+1)+`
`;if(t.type==="block-scalar"){const o=t.props[0];if(o.type!=="block-scalar-header")throw new Error("Invalid block scalar header");o.source=r,t.source=i}else{const{offset:o}=t,a="indent"in t?t.indent:-1,s=[{type:"block-scalar-header",offset:o,indent:a,source:r}];Pie(s,"end"in t?t.end:void 0)||s.push({type:"newline",offset:-1,indent:a,source:`
`});for(const l of Object.keys(t))l!=="type"&&l!=="offset"&&delete t[l];Object.assign(t,{type:"block-scalar",indent:a,props:s,source:i})}}function Pie(t,e){if(e)for(const n of e)switch(n.type){case"space":case"comment":t.push(n);break;case"newline":return t.push(n),!0}return!1}function s3(t,e,n){switch(t.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":t.type=n,t.source=e;break;case"block-scalar":{const r=t.props.slice(1);let i=e.length;t.props[0].type==="block-scalar-header"&&(i-=t.props[0].source.length);for(const o of r)o.offset+=i;delete t.props,Object.assign(t,{type:n,source:e,end:r});break}case"block-map":case"block-seq":{const i={type:"newline",offset:t.offset+e.length,indent:t.indent,source:`
`};delete t.items,Object.assign(t,{type:n,source:e,end:[i]});break}default:{const r="indent"in t?t.indent:-1,i="end"in t&&Array.isArray(t.end)?t.end.filter(o=>o.type==="space"||o.type==="comment"||o.type==="newline"):[];for(const o of Object.keys(t))o!=="type"&&o!=="offset"&&delete t[o];Object.assign(t,{type:n,indent:r,source:e,end:i})}}}const x3e=t=>"type"in t?GP(t):DA(t);function GP(t){switch(t.type){case"block-scalar":{let e="";for(const n of t.props)e+=GP(n);return e+t.source}case"block-map":case"block-seq":{let e="";for(const n of t.items)e+=DA(n);return e}case"flow-collection":{let e=t.start.source;for(const n of t.items)e+=DA(n);for(const n of t.end)e+=n.source;return e}case"document":{let e=DA(t);if(t.end)for(const n of t.end)e+=n.source;return e}default:{let e=t.source;if("end"in t&&t.end)for(const n of t.end)e+=n.source;return e}}}function DA({start:t,key:e,sep:n,value:r}){let i="";for(const o of t)i+=o.source;if(e&&(i+=GP(e)),n)for(const o of n)i+=o.source;return r&&(i+=GP(r)),i}const zF=Symbol("break visit"),_3e=Symbol("skip children"),kie=Symbol("remove item");function L0(t,e){"type"in t&&t.type==="document"&&(t={start:t.start,value:t.value}),Iie(Object.freeze([]),t,e)}L0.BREAK=zF;L0.SKIP=_3e;L0.REMOVE=kie;L0.itemAtPath=(t,e)=>{let n=t;for(const[r,i]of e){const o=n==null?void 0:n[r];if(o&&"items"in o)n=o.items[i];else return}return n};L0.parentCollection=(t,e)=>{const n=L0.itemAtPath(t,e.slice(0,-1)),r=e[e.length-1][0],i=n==null?void 0:n[r];if(i&&"items"in i)return i;throw new Error("Parent collection not found")};function Iie(t,e,n){let r=n(e,t);if(typeof r=="symbol")return r;for(const i of["key","value"]){const o=e[i];if(o&&"items"in o){for(let a=0;a<o.items.length;++a){const s=Iie(Object.freeze(t.concat([[i,a]])),o.items[a],n);if(typeof s=="number")a=s-1;else{if(s===zF)return zF;s===kie&&(o.items.splice(a,1),a-=1)}}typeof r=="function"&&i==="key"&&(r=r(e,t))}}return typeof r=="function"?r(e,t):r}const kR="\uFEFF",IR="",RR="",LM="",b3e=t=>!!t&&"items"in t,w3e=t=>!!t&&(t.type==="scalar"||t.type==="single-quoted-scalar"||t.type==="double-quoted-scalar"||t.type==="block-scalar");function S3e(t){switch(t){case kR:return"<BOM>";case IR:return"<DOC>";case RR:return"<FLOW_END>";case LM:return"<SCALAR>";default:return JSON.stringify(t)}}function Rie(t){switch(t){case kR:return"byte-order-mark";case IR:return"doc-mode";case RR:return"flow-error-end";case LM:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}const M3e=Object.freeze(Object.defineProperty({__proto__:null,BOM:kR,DOCUMENT:IR,FLOW_END:RR,SCALAR:LM,createScalarToken:g3e,isCollection:b3e,isScalar:w3e,prettyToken:S3e,resolveAsScalar:m3e,setScalarValue:y3e,stringify:x3e,tokenType:Rie,visit:L0},Symbol.toStringTag,{value:"Module"}));function ju(t){switch(t){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const YG="0123456789ABCDEFabcdef".split(""),E3e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split(""),a3=",[]{}".split(""),T3e=` ,[]{}
\r	`.split(""),l3=t=>!t||T3e.includes(t);class Oie{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,n=!1){e&&(this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null),this.atEnd=!n;let r=this.next??"stream";for(;r&&(n||this.hasChars(1));)r=yield*this.parseNext(r)}atLineEnd(){let e=this.pos,n=this.buffer[e];for(;n===" "||n==="	";)n=this.buffer[++e];return!n||n==="#"||n===`
`?!0:n==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let n=this.buffer[e];if(this.indentNext>0){let r=0;for(;n===" ";)n=this.buffer[++r+e];if(n==="\r"){const i=this.buffer[r+e+1];if(i===`
`||!i&&!this.atEnd)return e+r+1}return n===`
`||r>=this.indentNext||!n&&!this.atEnd?e+r:-1}if(n==="-"||n==="."){const r=this.buffer.substr(e,3);if((r==="---"||r==="...")&&ju(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===kR&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let n=e.length;const r=e.indexOf("#");if(r!==-1){const o=e[r-1];(o===" "||o==="	")&&(n=r-1)}for(;;){const o=e[n-1];if(o===" "||o==="	")n-=1;else break}const i=(yield*this.pushCount(n))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-i),this.pushNewline(),"stream"}if(this.atLineEnd()){const n=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-n),yield*this.pushNewline(),"stream"}return yield IR,yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const n=this.peek(3);if(n==="---"&&ju(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if(n==="..."&&ju(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!ju(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,n]=this.peek(2);if(!n&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&ju(n)){const r=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=r,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(e===null)return this.setNext("doc");let n=yield*this.pushIndicators();switch(e[n]){case"#":yield*this.pushCount(e.length-n);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(l3),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return n+=yield*this.parseBlockScalarHeader(),n+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-n),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,n,r=-1;do e=yield*this.pushNewline(),e>0?(n=yield*this.pushSpaces(!1),this.indentValue=r=n):n=0,n+=yield*this.pushSpaces(!0);while(e+n>0);const i=this.getLine();if(i===null)return this.setNext("flow");if((r!==-1&&r<this.indentNext&&i[0]!=="#"||r===0&&(i.startsWith("---")||i.startsWith("..."))&&ju(i[3]))&&!(r===this.indentNext-1&&this.flowLevel===1&&(i[0]==="]"||i[0]==="}")))return this.flowLevel=0,yield RR,yield*this.parseLineStart();let o=0;for(;i[o]===",";)o+=yield*this.pushCount(1),o+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(o+=yield*this.pushIndicators(),i[o]){case void 0:return"flow";case"#":return yield*this.pushCount(i.length-o),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(l3),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const a=this.charAt(1);if(this.flowKey||ju(a)||a===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let n=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;n!==-1&&this.buffer[n+1]==="'";)n=this.buffer.indexOf("'",n+2);else for(;n!==-1;){let o=0;for(;this.buffer[n-1-o]==="\\";)o+=1;if(o%2===0)break;n=this.buffer.indexOf('"',n+1)}const r=this.buffer.substring(0,n);let i=r.indexOf(`
`,this.pos);if(i!==-1){for(;i!==-1;){const o=this.continueScalar(i+1);if(o===-1)break;i=r.indexOf(`
`,o)}i!==-1&&(n=i-(r[i-1]==="\r"?2:1))}if(n===-1){if(!this.atEnd)return this.setNext("quoted-scalar");n=this.buffer.length}return yield*this.pushToIndex(n+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const n=this.buffer[++e];if(n==="+")this.blockScalarKeep=!0;else if(n>"0"&&n<="9")this.blockScalarIndent=Number(n)-1;else if(n!=="-")break}return yield*this.pushUntil(n=>ju(n)||n==="#")}*parseBlockScalar(){let e=this.pos-1,n=0,r;e:for(let i=this.pos;r=this.buffer[i];++i)switch(r){case" ":n+=1;break;case`
`:e=i,n=0;break;case"\r":{const o=this.buffer[i+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!r&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=n:this.indentNext+=this.blockScalarIndent;do{const i=this.continueScalar(e+1);if(i===-1)break;e=this.buffer.indexOf(`
`,i)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}if(!this.blockScalarKeep)do{let i=e-1,o=this.buffer[i];o==="\r"&&(o=this.buffer[--i]);const a=i;for(;o===" "||o==="	";)o=this.buffer[--i];if(o===`
`&&i>=this.pos&&i+1+n>a)e=i;else break}while(!0);return yield LM,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let n=this.pos-1,r=this.pos-1,i;for(;i=this.buffer[++r];)if(i===":"){const o=this.buffer[r+1];if(ju(o)||e&&o===",")break;n=r}else if(ju(i)){let o=this.buffer[r+1];if(i==="\r"&&(o===`
`?(r+=1,i=`
`,o=this.buffer[r+1]):n=r),o==="#"||e&&a3.includes(o))break;if(i===`
`){const a=this.continueScalar(r+1);if(a===-1)break;r=Math.max(r,a-2)}}else{if(e&&a3.includes(i))break;n=r}return!i&&!this.atEnd?this.setNext("plain-scalar"):(yield LM,yield*this.pushToIndex(n+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,n){const r=this.buffer.slice(this.pos,e);return r?(yield r,this.pos+=r.length,r.length):(n&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(l3))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0,n=this.charAt(1);if(ju(n)||e&&a3.includes(n))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,n=this.buffer[e];for(;!ju(n)&&n!==">";)n=this.buffer[++e];return yield*this.pushToIndex(n===">"?e+1:e,!1)}else{let e=this.pos+1,n=this.buffer[e];for(;n;)if(E3e.includes(n))n=this.buffer[++e];else if(n==="%"&&YG.includes(this.buffer[e+1])&&YG.includes(this.buffer[e+2]))n=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let n=this.pos-1,r;do r=this.buffer[++n];while(r===" "||e&&r==="	");const i=n-this.pos;return i>0&&(yield this.buffer.substr(this.pos,i),this.pos=n),i}*pushUntil(e){let n=this.pos,r=this.buffer[n];for(;!e(r);)r=this.buffer[++n];return yield*this.pushToIndex(n,!1)}}class Lie{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let n=0,r=this.lineStarts.length;for(;n<r;){const o=n+r>>1;this.lineStarts[o]<e?n=o+1:r=o}if(this.lineStarts[n]===e)return{line:n+1,col:1};if(n===0)return{line:0,col:e};const i=this.lineStarts[n-1];return{line:n,col:e-i+1}}}}function qd(t,e){for(let n=0;n<t.length;++n)if(t[n].type===e)return!0;return!1}function XG(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function Die(t){switch(t==null?void 0:t.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function JT(t){switch(t.type){case"document":return t.start;case"block-map":{const e=t.items[t.items.length-1];return e.sep??e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function Ax(t){var n;if(t.length===0)return[];let e=t.length;e:for(;--e>=0;)switch(t[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;((n=t[++e])==null?void 0:n.type)==="space";);return t.splice(e,t.length)}function KG(t){if(t.start.type==="flow-seq-start")for(const e of t.items)e.sep&&!e.value&&!qd(e.start,"explicit-key-ind")&&!qd(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,Die(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}class Ej{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Oie,this.onNewLine=e}*parse(e,n=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const r of this.lexer.lex(e,n))yield*this.next(r);n||(yield*this.end())}*next(e){if(this.source=e,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}const n=Rie(e);if(n)if(n==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=n,yield*this.step(),n){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{const r=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:r,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if(this.type==="doc-end"&&(!e||e.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){const n=e??this.stack.pop();if(n)if(this.stack.length===0)yield n;else{const r=this.peek(1);switch(n.type==="block-scalar"?n.indent="indent"in r?r.indent:0:n.type==="flow-collection"&&r.type==="document"&&(n.indent=0),n.type==="flow-collection"&&KG(n),r.type){case"document":r.value=n;break;case"block-scalar":r.props.push(n);break;case"block-map":{const i=r.items[r.items.length-1];if(i.value){r.items.push({start:[],key:n,sep:[]}),this.onKeyLine=!0;return}else if(i.sep)i.value=n;else{Object.assign(i,{key:n,sep:[]}),this.onKeyLine=!qd(i.start,"explicit-key-ind");return}break}case"block-seq":{const i=r.items[r.items.length-1];i.value?r.items.push({start:[],value:n}):i.value=n;break}case"flow-collection":{const i=r.items[r.items.length-1];!i||i.value?r.items.push({start:[],key:n,sep:[]}):i.sep?i.value=n:Object.assign(i,{key:n,sep:[]});return}default:yield*this.pop(),yield*this.pop(n)}if((r.type==="document"||r.type==="block-map"||r.type==="block-seq")&&(n.type==="block-map"||n.type==="block-seq")){const i=n.items[n.items.length-1];i&&!i.sep&&!i.value&&i.start.length>0&&XG(i.start)===-1&&(n.indent===0||i.start.every(o=>o.type!=="comment"||o.indent<n.indent))&&(r.type==="document"?r.end=i.start:r.items.push({start:i.start}),n.items.splice(-1,1))}}else{const r="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:r}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{XG(e.start)!==-1?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}const n=this.startBlockValue(e);n?this.stack.push(n):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){const n=JT(this.peek(2)),r=Ax(n);let i;e.end?(i=e.end,i.push(this.sourceToken),delete e.end):i=[this.sourceToken];const o={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:r,key:e,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=o}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){var r;const n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){const i="end"in n.value?n.value.end:void 0,o=Array.isArray(i)?i[i.length-1]:void 0;(o==null?void 0:o.type)==="comment"?i==null||i.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,e.indent)){const i=e.items[e.items.length-2],o=(r=i==null?void 0:i.value)==null?void 0:r.end;if(Array.isArray(o)){Array.prototype.push.apply(o,n.start),o.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const i=!this.onKeyLine&&this.indent===e.indent&&n.sep;let o=[];if(i&&n.sep&&!n.value){const a=[];for(let s=0;s<n.sep.length;++s){const l=n.sep[s];switch(l.type){case"newline":a.push(s);break;case"space":break;case"comment":l.indent>e.indent&&(a.length=0);break;default:a.length=0}}a.length>=2&&(o=n.sep.splice(a[1]))}switch(this.type){case"anchor":case"tag":i||n.value?(o.push(this.sourceToken),e.items.push({start:o}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!qd(n.start,"explicit-key-ind")?n.start.push(this.sourceToken):i||n.value?(o.push(this.sourceToken),e.items.push({start:o})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}),this.onKeyLine=!0;return;case"map-value-ind":if(qd(n.start,"explicit-key-ind"))if(n.sep)if(n.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(qd(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]});else if(Die(n.key)&&!qd(n.sep,"newline")){const a=Ax(n.start),s=n.key,l=n.sep;l.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a,key:s,sep:l}]})}else o.length>0?n.sep=n.sep.concat(o,this.sourceToken):n.sep.push(this.sourceToken);else if(qd(n.start,"newline"))Object.assign(n,{key:null,sep:[this.sourceToken]});else{const a=Ax(n.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a,key:null,sep:[this.sourceToken]}]})}else n.sep?n.value||i?e.items.push({start:o,key:null,sep:[this.sourceToken]}):qd(n.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const a=this.flowScalar(this.type);i||n.value?(e.items.push({start:o,key:a,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(a):(Object.assign(n,{key:a,sep:[]}),this.onKeyLine=!0);return}default:{const a=this.startBlockValue(e);if(a){i&&a.type!=="block-seq"&&qd(n.start,"explicit-key-ind")&&e.items.push({start:o}),this.stack.push(a);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){var r;const n=e.items[e.items.length-1];switch(this.type){case"newline":if(n.value){const i="end"in n.value?n.value.end:void 0,o=Array.isArray(i)?i[i.length-1]:void 0;(o==null?void 0:o.type)==="comment"?i==null||i.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,e.indent)){const i=e.items[e.items.length-2],o=(r=i==null?void 0:i.value)==null?void 0:r.end;if(Array.isArray(o)){Array.prototype.push.apply(o,n.start),o.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;n.value||qd(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>e.indent){const i=this.startBlockValue(e);if(i){this.stack.push(i);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){const n=e.items[e.items.length-1];if(this.type==="flow-error-end"){let r;do yield*this.pop(),r=this.peek(1);while(r&&r.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!n||n.sep?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return;case"map-value-ind":!n||n.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!n||n.value?e.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const i=this.flowScalar(this.type);!n||n.value?e.items.push({start:[],key:i,sep:[]}):n.sep?this.stack.push(i):Object.assign(n,{key:i,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}const r=this.startBlockValue(e);r?this.stack.push(r):(yield*this.pop(),yield*this.step())}else{const r=this.peek(2);if(r.type==="block-map"&&(this.type==="map-value-ind"&&r.indent===e.indent||this.type==="newline"&&!r.items[r.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&r.type!=="flow-collection"){const i=JT(r),o=Ax(i);KG(e);const a=e.end.splice(1,e.end.length);a.push(this.sourceToken);const s={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:o,key:e,sep:a}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=s}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const n=JT(e),r=Ax(n);return r.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r}]}}case"map-value-ind":{this.onKeyLine=!0;const n=JT(e),r=Ax(n);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,n){return this.type!=="comment"||this.indent<=n?!1:e.every(r=>r.type==="newline"||r.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function Nie(t){const e=t.prettyErrors!==!1;return{lineCounter:t.lineCounter||e&&new Lie||null,prettyErrors:e}}function C3e(t,e={}){const{lineCounter:n,prettyErrors:r}=Nie(e),i=new Ej(n==null?void 0:n.addNewLine),o=new Mj(e),a=Array.from(o.compose(i.parse(t)));if(r&&n)for(const s of a)s.errors.forEach(HP(t,n)),s.warnings.forEach(HP(t,n));return a.length>0?a:Object.assign([],{empty:!0},o.streamInfo())}function zie(t,e={}){const{lineCounter:n,prettyErrors:r}=Nie(e),i=new Ej(n==null?void 0:n.addNewLine),o=new Mj(e);let a=null;for(const s of o.compose(i.parse(t),!0,t.length))if(!a)a=s;else if(a.options.logLevel!=="silent"){a.errors.push(new Zv(s.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return r&&n&&(a.errors.forEach(HP(t,n)),a.warnings.forEach(HP(t,n))),a}function A3e(t,e,n){let r;typeof e=="function"?r=e:n===void 0&&e&&typeof e=="object"&&(n=e);const i=zie(t,n);if(!i)return null;if(i.warnings.forEach(o=>iie(i.options.logLevel,o)),i.errors.length>0){if(i.options.logLevel!=="silent")throw i.errors[0];i.errors=[]}return i.toJS(Object.assign({reviver:r},n))}function P3e(t,e,n){let r=null;if(typeof e=="function"||Array.isArray(e)?r=e:n===void 0&&e&&(n=e),typeof n=="string"&&(n=n.length),typeof n=="number"){const i=Math.round(n);n=i<1?void 0:i>8?{indent:8}:{indent:i}}if(t===void 0){const{keepUndefined:i}=n??e??{};if(!i)return}return new w1(t,r,n).toString(n)}const qP=Object.freeze(Object.defineProperty({__proto__:null,Alias:xR,CST:M3e,Composer:Mj,Document:w1,Lexer:Oie,LineCounter:Lie,Pair:yl,Parser:Ej,Scalar:Or,Schema:PR,YAMLError:wj,YAMLMap:ru,YAMLParseError:Zv,YAMLSeq:ay,YAMLWarning:wie,isAlias:V0,isCollection:Vo,isDocument:y1,isMap:v1,isNode:Ss,isPair:Do,isScalar:mo,isSeq:x1,parse:A3e,parseAllDocuments:C3e,parseDocument:zie,stringify:P3e,visit:sy,visitAsync:vR},Symbol.toStringTag,{value:"Module"})),ly=Ze.createContext();var ZG="";const xE=({children:t,notification:e})=>{mr(T=>T.devices.items);const n=mr(T=>T.mission),r=mr(T=>T.session.server.rosState),i=Zl(),[o,a]=W.useState(!1),[s,l]=W.useState(!1);W.useState(""),W.useEffect(()=>{a(r)},[r]);const c=async T=>{try{const C=await fetch("/api/rosConnect",{method:"POST",body:new URLSearchParams(`rosState=${encodeURIComponent(o)}`)});if(C.ok){let I=await C.json();I.state==="connect"&&(e("success",I.msg),a(!0)),I.state==="error"&&(a(!1),e("danger",I.msg)),I.state==="disconnect"&&(e("danger",I.msg),a(!1)),console.log(I)}else throw Error(await C.text())}catch{a(!1)}},h=async T=>{console.log(T.name+"-"+T.category);try{const C=await fetch("/api/devices",{method:"POST",body:JSON.stringify(T),headers:{"Content-Type":"application/json"}});if(C.ok){let I=await C.json();I.state==="connect"&&e("success",I.msg),I.state==="error"&&e("danger",I.msg),console.log(I)}else throw Error(await C.text())}catch{}},p=async()=>{try{const T=await fetch("/api/commands/send",{method:"POST",body:JSON.stringify({deviceId:-1,type:"loadMission",attributes:n.route}),headers:{"Content-Type":"application/json"}});if(T.ok){let C=await T.json();C.state==="connect"&&e("success",C.msg),C.state==="error"&&e("danger",C.msg),console.log(C)}else throw Error(await T.text())}catch{}},g=async()=>{let T=n.route.map(C=>C.uav);console.log(T),console.log("command mission ");try{const C=await fetch("/api/commands/send",{method:"POST",body:JSON.stringify({deviceId:-1,type:"commandMission"}),headers:{"Content-Type":"application/json"}});if(C.ok){let I=await C.json();I.state==="connect"&&e("success",I.msg),I.state==="error"&&e("danger",I.msg),console.log(I)}else throw Error(await C.text())}catch{}},v=(T,C)=>{if(T.endsWith(".yaml"))ZG=qP.parse(C),i(uh.updateMission({...ZG,name:T.slice(0,-5)}));else if(T.endsWith(".waypoints")){let R=C.split(`
`).map(U=>U.split("	")),O={uav_n:1,uav_1:{}},B=0;R.forEach(U=>{U[3]=="16"&&(O.uav_1["wp_"+B]=[U[8],U[9],U[10]],B=B+1)}),O.uav_1.wp_n=B,i(uh.updateMission({...O,name:T.slice(0,-10)}))}else if(T.endsWith(".kml")){let R=new DOMParser().parseFromString(C,"text/xml").getElementsByTagName("coordinates"),O=Object.values(R).map(Z=>Z.textContent.replace("	1","").replace(/(\r\n|\n|\r|\t)/gm,"").split(" ").map(X=>X.split(","))),B={uav_n:O.length},U=1;O.forEach(Z=>{console.log(Z);let j=0;B["uav_"+U]={},Z.forEach(X=>{X.length==3&&(B["uav_"+U]["wp_"+j]=[X[1],X[0],X[2]],j=j+1)}),B["uav_"+U].wp_n=j,U=U+1}),console.log(B),i(uh.updateMission({...B,name:T.slice(0,-4)}))}else if(T.endsWith(".plan")){let I=JSON.parse(C),R={uav_n:1,uav_1:{}},O=0;I.mission.items.forEach(B=>{R.uav_1["wp_"+O]=[B.params[4],B.params[5],B.Altitude],O=O+1}),R.uav_1.wp_n=O,i(uh.updateMission({...R,name:T.slice(0,-5)}))}else e("danger","Formato de mission no compatible")},x=()=>{c()};async function b(T){o?h(T):alert(`
Ros no está conectado.

 Por favor conéctelo primero.`)}function M(){p()}function w(){g()}return F.jsx("div",{style:{width:"100%",height:"100%"},children:F.jsx(ly.Provider,{value:{rosConnect:x,rosState:o,openMision:v,connectAddUav:b,commandMission:w,loadMission:M,confirmMission:s,setconfirmMission:l},children:t})})};var Tj={},c3={};const k3e=Ih(j1e);var JG;function bi(){return JG||(JG=1,function(t){"use client";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=k3e}(c3)),c3}var I3e=si;Object.defineProperty(Tj,"__esModule",{value:!0});var Cj=Tj.default=void 0,R3e=I3e(bi()),O3e=F;Cj=Tj.default=(0,R3e.default)((0,O3e.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm4 18H6V4h7v5h5zM8 15.01l1.41 1.41L11 14.84V19h2v-4.16l1.59 1.59L16 15.01 12.01 11z"}),"UploadFile");const L3e=ri(t=>({input:{display:"none"},parent:{alignItems:"center",justifyContent:"center",padding:"6px 16px"}})),Fie=({title:t,readFile:e,typefiles:n=".yaml, .plan, .waypoint, .kml"})=>{const r=L3e();return F.jsx("div",{className:r.parent,children:F.jsxs("label",{htmlFor:"upload-gpx",children:[F.jsx("input",{accept:n,id:"upload-gpx",type:"file",className:r.input,onChange:e}),t?F.jsx(Bn,{children:t}):F.jsx(wr,{edge:"end",component:"span",onClick:()=>{},children:F.jsx(Cj,{})})]})})},Bie=({items:t,depthLevel:e})=>{const[n,r]=W.useState(null),i=!!n,o=s=>{r(s.currentTarget)},a=()=>{r(null)};return F.jsxs("div",{children:[F.jsx(Gr,{id:"fade-button","aria-controls":i?"fade-menu":void 0,"aria-haspopup":"true","aria-expanded":i?"true":void 0,onClick:o,sx:{color:"#FFFFFF",fontSize:16},style:{textTransform:"none"},children:t.title}),t.submenu&&F.jsx(K$,{id:"fade-menu",MenuListProps:{"aria-labelledby":"fade-button"},anchorEl:n,open:i,onClose:a,TransitionComponent:Une,children:t.submenu.map((s,l)=>s.input?F.jsx(Fie,{title:s.title,readFile:c=>{s.input(c)},typefiles:s.type},"men"+l):F.jsx(lu,{onClick:()=>{a(),s.action&&s.action()},children:s.title},"men"+l))})]})},OR=({SetAddUAVOpen:t})=>{const e=Zl(),n=rm(),r=W.useContext(ly),i=[{title:"ROS",submenu:[{title:"Connect ROS",action:()=>r.rosConnect()},{title:"Show Topics",action:()=>n("/topics")},{title:"Show Services"}]},{title:"Devices",submenu:[{title:"Connect Devices",action:()=>c()},{title:"Load Mission all",action:()=>r.loadMission()},{title:"Command Mission All",action:()=>r.setconfirmMission(!0)}]},{title:"Mission",submenu:[{title:" Open Mission",input:h=>a(h)},{title:"Clear mission",action:()=>o()},{title:"Edit mission",action:()=>n("/mission")},{title:"Planning",action:()=>n("/planning")}]},{title:"View",submenu:[{title:"Enviroment Features"},{title:"add elements",input:h=>s(h),type:".kml"},{title:"Camera view",action:()=>n("/camera")},{title:"3D view",action:()=>n("/3Dmission")}]},{title:"Report",submenu:[{title:"Missions",action:()=>n("reports/mission")},{title:"events",action:()=>n("reports/events")}]}],o=()=>{e(uh.clearMission({}))},a=h=>{const p=h.target.files[0];if(!p)return;const g=new FileReader;g.readAsText(p),g.onload=()=>{r.openMision(p.name,g.result)},g.onerror=()=>{console.log("error"),console.log(g.error)}},s=h=>{const p=h.target.files[0];if(!p)return;const g=new FileReader;g.readAsText(p),g.onload=()=>{console.log(g.result);let v=new DOMParser().parseFromString(g.result,"text/xml");console.log(v);let x=v.getElementsByTagName("Point");console.log(x);let b=Object.values(x).map(I=>I.textContent.replace("	1","").replace(/(\r\n|\n|\r|\t)/gm,"").split(","));console.log(b);let M=v.getElementsByTagName("coordinates");console.log(M);const w=Object.values(M).map(I=>I.textContent.replace("	1","").replace(/(\r\n|\n|\r|\t)/gm,"").split(" ")),T=w.map(I=>I.map(R=>R.split(",")));console.log(w),console.log(T);let C=[];if(b.length)return console.log("add markers"),C=b.map((I,R,O)=>({latitude:Number(I[1]),longitude:Number(I[0]),image:"base"})),console.log(C),e(ef.addMarkerBase(C)),null;T.length&&(console.log("add towers markers"),T.map(I=>{console.log(I);const R=[];I.map(O=>(console.log(O),O.length>1&&R.push({latitude:Number(O[1]),longitude:Number(O[0])}),null)),C.push({type:"powerTower",items:R})}),console.log(C),e(ef.addMarkerElement(C)))},g.onerror=()=>{console.log("error"),console.log(g.error)}};function l(){gt.easeTo({center:[-6.0025,37.412],zoom:Math.max(gt.getZoom(),5),offset:[0,-1/2]})}function c(){t(!0)}return F.jsx(aE,{position:"static",style:{backgroundColor:"#333",height:"52px"},children:F.jsx(d1,{maxWidth:"x",children:F.jsxs(vy,{disableGutters:!0,children:[F.jsx(Gr,{onClick:()=>{l(),n("/")},children:F.jsx(Bn,{variant:"h6",noWrap:!0,component:"a",sx:{mr:2,display:{xs:"none",md:"flex"},fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"#FFFFFF",textDecoration:"none"},children:"Management Tool"})}),Ze.Children.toArray(i.map((h,p)=>F.jsx(W.Fragment,{children:F.jsx(Bie,{items:h,depthLevel:0})},"s-"+p)))]})})})},D3e=$a(F.jsx("path",{d:"m3.55 18.54 1.41 1.41 1.79-1.8-1.41-1.41zM11 22.45h2V19.5h-2zM4 10.5H1v2h3zm11-4.19V1.5H9v4.81C7.21 7.35 6 9.28 6 11.5c0 3.31 2.69 6 6 6s6-2.69 6-6c0-2.22-1.21-4.15-3-5.19m5 4.19v2h3v-2zm-2.76 7.66 1.79 1.8 1.41-1.41-1.8-1.79z"}),"WbIncandescent"),N3e=$a(F.jsx("path",{d:"m3.55 19.09 1.41 1.41 1.79-1.8-1.41-1.41zM11 20h2v3h-2zM1 11h3v2H1zm12-6.95v3.96l1 .58c1.24.72 2 2.04 2 3.46 0 2.21-1.79 4-4 4s-4-1.79-4-4c0-1.42.77-2.74 2-3.46l1-.58V4.05zm2-2H9v4.81C7.21 7.9 6 9.83 6 12.05c0 3.31 2.69 6 6 6s6-2.69 6-6c0-2.22-1.21-4.15-3-5.19zM20 11h3v2h-3zm-2.76 7.71 1.79 1.8 1.41-1.41-1.8-1.79z"}),"WbIncandescentOutlined"),z3e=$a(F.jsx("path",{d:"m1 9 2 2c4.97-4.97 13.03-4.97 18 0l2-2C16.93 2.93 7.08 2.93 1 9m8 8 3 3 3-3c-1.65-1.66-4.34-1.66-6 0m-4-4 2 2c2.76-2.76 7.24-2.76 10 0l2-2C15.14 9.14 8.87 9.14 5 13"}),"Wifi"),F3e=$a(F.jsx("path",{d:"M22.99 9C19.15 5.16 13.8 3.76 8.84 4.78l2.52 2.52c3.47-.17 6.99 1.05 9.63 3.7zm-4 4c-1.29-1.29-2.84-2.13-4.49-2.56l3.53 3.53zM2 3.05 5.07 6.1C3.6 6.82 2.22 7.78 1 9l1.99 2c1.24-1.24 2.67-2.16 4.2-2.77l2.24 2.24C7.81 10.89 6.27 11.73 5 13v.01L6.99 15c1.36-1.36 3.14-2.04 4.92-2.06L18.98 20l1.27-1.26L3.29 1.79zM9 17l3 3 3-3c-1.65-1.66-4.34-1.66-6 0"}),"WifiOff");var Aj={},B3e=si;Object.defineProperty(Aj,"__esModule",{value:!0});var $ie=Aj.default=void 0,$3e=B3e(bi()),j3e=F;$ie=Aj.default=(0,$3e.default)((0,j3e.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home");var Pj={},U3e=si;Object.defineProperty(Pj,"__esModule",{value:!0});var jie=Pj.default=void 0,V3e=U3e(bi()),W3e=F;jie=Pj.default=(0,V3e.default)((0,W3e.jsx)("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8z"}),"Folder");var kj={},H3e=si;Object.defineProperty(kj,"__esModule",{value:!0});var Uie=kj.default=void 0,G3e=H3e(bi()),q3e=F;Uie=kj.default=(0,G3e.default)((0,q3e.jsx)("path",{d:"M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5z"}),"Flight");var Ij={},Y3e=si;Object.defineProperty(Ij,"__esModule",{value:!0});var Vie=Ij.default=void 0,X3e=Y3e(bi()),K3e=F;Vie=Ij.default=(0,X3e.default)((0,K3e.jsx)("path",{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"}),"FileUpload");var Rj={},Z3e=si;Object.defineProperty(Rj,"__esModule",{value:!0});var Wie=Rj.default=void 0,J3e=Z3e(bi()),Q3e=F;Wie=Rj.default=(0,J3e.default)((0,Q3e.jsx)("path",{d:"M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H3V5h10v4h8z"}),"Tab");var Oj={},eNe=si;Object.defineProperty(Oj,"__esModule",{value:!0});var Hie=Oj.default=void 0,tNe=eNe(bi()),nNe=F;Hie=Oj.default=(0,tNe.default)((0,nNe.jsx)("path",{d:"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11"}),"Reply");var Lj={},rNe=si;Object.defineProperty(Lj,"__esModule",{value:!0});var Gie=Lj.default=void 0,iNe=rNe(bi()),oNe=F;Gie=Lj.default=(0,iNe.default)((0,oNe.jsx)("path",{d:"M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5z"}),"CallMade");var Dj={},sNe=si;Object.defineProperty(Dj,"__esModule",{value:!0});var qie=Dj.default=void 0,aNe=sNe(bi()),lNe=F;qie=Dj.default=(0,aNe.default)((0,lNe.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"ModeEdit");var Nj={},cNe=si;Object.defineProperty(Nj,"__esModule",{value:!0});var Yie=Nj.default=void 0,uNe=cNe(bi()),dNe=F;Yie=Nj.default=(0,uNe.default)((0,dNe.jsx)("path",{d:"m19 8-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4z"}),"Cached");const fNe=ri(t=>({toolbar:{height:"36px",background:"linear-gradient(#E7E5E7, #D3D1D3)",borderTop:"1px solid rgba(255, 255, 255, .6)"},mediaButton:{width:"auto",color:yh[700],backgroundColor:"#F9F9F9",boxShadow:"inset 0px -4px 4px 0 rgba(0, 0, 0, 0.1)",maxHeight:"22px",top:"2px",border:"1px solid #C2C0C2",margin:"5px 10px",fontSize:"12px","&:hover":{backgroundColor:yh[300]}},mediaicon:{color:yh[700],width:"15px"}})),_E=({SetAddUAVOpen:t})=>{const e=fNe(),n=W.useContext(ly),[r,i]=W.useState("no load mission"),o=mr(x=>x.mission.name),a=mr(x=>x.mission.home),[s,l]=W.useState(!0),c=x=>{const b=x.target.files[0];if(!b)return;const M=new FileReader;M.readAsText(b),M.onload=()=>{console.log(M.result),console.log(b.name),n.openMision(b.name,M.result)},M.onerror=()=>{console.log(M.error)}};function h(){gt.easeTo({center:[-6.0025,37.412],zoom:Math.max(gt.getZoom(),5),offset:[0,-1/2]})}function p(){gt.easeTo({center:[a[1],a[0]],zoom:Math.max(gt.getZoom(),15),offset:[0,-1/2]})}function g(){t(!0)}const v=()=>{l(!s)};return W.useEffect(()=>{i(o)},[o]),W.useEffect(()=>{p()},[a]),F.jsx("header",{className:e.toolbar,children:F.jsxs("div",{children:[F.jsxs(QEe,{style:{height:"26px",display:"inline",justifyContent:"flex-end"},children:[F.jsx(Gr,{onClick:h,className:e.mediaButton,style:{margin:"0px 0px"},children:F.jsx($ie,{fontSize:"small",className:e.mediaicon})}),F.jsxs(Gr,{id:"openMission",className:e.mediaButton,style:{margin:"0px 0px"},children:[F.jsx("label",{htmlFor:"openMissionNavbar",style:{padding:0},children:F.jsx(jie,{fontSize:"small",className:e.mediaicon,style:{position:"relative",top:"3px"}})}),F.jsx("input",{type:"file",multiple:!1,style:{display:"none"},id:"openMissionNavbar",onChange:c})]}),F.jsx(Gr,{id:"openAddUav",onClick:g,className:e.mediaButton,style:{margin:"0px 0px"},children:F.jsx(Uie,{fontSize:"small",className:e.mediaicon,style:{transform:"rotate(90deg)"}})})]}),F.jsx(ly.Consumer,{children:({rosState:x})=>F.jsxs(Gr,{id:"rosConnect",onClick:n.rosConnect,className:e.mediaButton,children:[x&&"conectado"," ",!x&&"desconectado"," "]})}),F.jsx(Gr,{id:"loadMission",size:"small",onClick:g,className:e.mediaButton,children:F.jsx(Vie,{fontSize:"small",className:e.mediaicon})}),F.jsx(Gr,{id:"commandMission",onClick:g,className:e.mediaButton,children:"Fly!"}),F.jsxs(Gr,{id:"openedmission",onClick:p,className:e.mediaButton,style:{margin:"0px 100px",width:"500px"},children:[" ",r]}),F.jsx(Gr,{variant:"filledTonal",onClick:x=>v(),className:e.mediaButton,children:"Status"}),F.jsx(Gr,{id:"openTerminal",style:{visibility:!0},className:e.mediaButton,children:F.jsx(Wie,{fontSize:"small",className:e.mediaicon})}),F.jsx(Gr,{id:"UndoMission",style:{visibility:!0},className:e.mediaButton,children:F.jsx(Hie,{fontSize:"small",className:e.mediaicon})}),F.jsx(Gr,{id:"reset",className:e.mediaButton,children:F.jsx(Gie,{fontSize:"small",className:e.mediaicon})}),F.jsx(Gr,{id:"showManualMode",className:e.mediaButton,children:F.jsx(qie,{fontSize:"small",className:e.mediaicon})}),F.jsx(Gr,{id:"commandManualMission",style:{visibility:!0},className:e.mediaButton,children:F.jsx(Yie,{fontSize:"small",className:e.mediaicon})})]})})};var zj={},hNe=si;Object.defineProperty(zj,"__esModule",{value:!0});var Ah=zj.default=void 0,pNe=hNe(bi()),mNe=F;Ah=zj.default=(0,pNe.default)((0,mNe.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");const gNe=ri(t=>({title:{fontWeight:700,fontSize:"16px",textAlign:"left",marginTop:0,marginBottom:"6px",width:"300px",height:"18px"},mediaButton:{color:"#fff",mixBlendMode:"difference",right:0,top:0},description:{margin:0,textAlign:"left",fontSize:"12px",paddingLeft:"1rem"},toast:{height:"60px",width:"365px",color:"#fff",marginBottom:"1rem"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(.5,1,0,2)},card:{pointerEvents:"auto",height:"60px",width:"365px",color:"#fff",marginBottom:"1rem"},root:{pointerEvents:"none",position:"fixed",zIndex:5,bottom:"1rem",right:"1rem"}})),yNe=({toastlist:t,position:e,setList:n})=>{const r=gNe(),i=W.useCallback(o=>{const a=t.filter(s=>s.id!==o);n(a)},[t,n]);return W.useEffect(()=>{const o=setInterval(()=>{t.length&&i(t[0].id)},3e3);return()=>{clearInterval(o)}},[t,i]),F.jsx("div",{className:r.root,children:t.map((o,a)=>F.jsxs(Oh,{elevation:3,className:r.card,style:{backgroundColor:o.backgroundColor},children:[F.jsxs("div",{className:r.header,children:[F.jsx(Bn,{variant:"body2",children:o.title}),F.jsx(wr,{size:"small",onClick:()=>i(o.id),onTouchStart:()=>i(o.id),children:F.jsx(Ah,{fontSize:"small",className:r.mediaButton})})]}),F.jsx("div",{children:F.jsx("p",{className:r.description,children:o.description})})]}))})};var Fj={},vNe=si;Object.defineProperty(Fj,"__esModule",{value:!0});var Da=Fj.default=void 0,xNe=vNe(bi()),_Ne=F;Da=Fj.default=(0,xNe.default)((0,_Ne.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");const Ju=({label:t,fullWidth:e,multiple:n,value:r,emptyValue:i=0,emptyTitle:o=" ",onChange:a,endpoint:s,data:l,keyGetter:c=g=>g.id,titleGetter:h=g=>g.name,getItems:p=g=>g})=>{const[g,v]=W.useState(l);return h1(async()=>{if(s){const x=await fetch(s);if(x.ok)v(await x.json());else throw Error(await x.text())}},[]),W.useEffect(()=>{typeof g<"u"&&p(g[r])},[g]),g?F.jsxs(uE,{fullWidth:e,children:[F.jsx(dE,{children:t}),F.jsxs(fE,{label:t,multiple:n,value:r,onChange:x=>a(x,g),children:[!n&&i!==null&&F.jsx(lu,{value:i,children:o}),g.map(x=>F.jsx(lu,{value:c(x),children:h(x)},c(x)))]})]}):null};var Bj={},bNe=si;Object.defineProperty(Bj,"__esModule",{value:!0});var yu=Bj.default=void 0,wNe=bNe(bi()),SNe=F;yu=Bj.default=(0,wNe.default)((0,SNe.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");const MNe=ri(t=>({root:{pointerEvents:"none",position:"fixed",zIndex:6,left:"50%",top:"20%",transform:"translateX(-50%)"},card:{pointerEvents:"auto",display:"block",width:"400px",height:"70vh",transitionDuration:"0.3s",overflowY:"auto"},mediaButton:{color:t.palette.colors.white,mixBlendMode:"difference"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(1,1,0,2)},button:{width:"80%",paddingBottom:"10pt",paddingTop:"10pt"},formControl:{margin:t.spacing(1),gap:t.spacing(2),paddingBottom:"20pt"},inputtext:{paddingBottom:"20px"},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)},title:{display:"block",width:"calc( 100% - 60pt )",paddingLeft:"15pt",paddingTop:"10pt",paddingBottom:"20pt",textAlign:"left"},closeBtn:{display:"flex",right:"5px",height:"35px",position:"absolute"},attributeName:{display:"inline-block",width:"40%",textAlign:"left",verticalAlign:"middle"},attributeValue:{display:"inline-block",width:"58%"},actionValue:{display:"inline-block",width:"40%"}})),ENe=({SetAddUAVOpen:t})=>{const e=MNe(),n=W.useContext(ly),[r,i]=W.useState({name:"uav_",category:"dji_M210_noetic",ip:"10.42.0.42",camera:[]});function o(){t(!1)}function a(){console.log("add uav-"+r.name+"-"+r.category),console.log(r),n.connectAddUav(r),t(!1)}const s=c=>{let h=JSON.parse(JSON.stringify(r.camera));h.splice(c,1),i({...r,camera:h})};function l(){let c=JSON.parse(JSON.stringify(r.camera));c.push({type:"WebRTC",source:""}),i({...r,camera:c})}return F.jsx("div",{className:e.root,children:F.jsxs(Oh,{elevation:3,className:e.card,children:[F.jsx("div",{className:e.closeBtn,children:F.jsx(wr,{size:"small",onClick:o,onTouchStart:o,children:F.jsx(Ah,{fontSize:"small",className:e.mediaButton})})}),F.jsx("b",{children:F.jsx("div",{className:e.title,children:"Add device "})}),F.jsxs(pl,{defaultExpanded:!0,children:[F.jsx(gl,{expandIcon:F.jsx(Da,{}),children:F.jsx(Bn,{variant:"subtitle1",children:"Datos UAV"})}),F.jsx(ml,{className:e.details,children:F.jsxs(ACe,{style:{margin:"20px"},children:[F.jsx(gi,{required:!0,label:"UAV ID",name:"uavid",value:r.name,onChange:c=>i({...r,name:c.target.value}),className:e.inputtext}),F.jsx(Ju,{emptyValue:null,value:r.category?r.category:"",onChange:c=>i({...r,category:c.target.value}),endpoint:"/api/category",keyGetter:c=>c,titleGetter:c=>c,label:"Type UAV "}),F.jsx(gi,{style:{marginTop:"20px"},label:"ip",value:r.ip,onChange:c=>i({...r,ip:c.target.value})})]})})]}),r&&F.jsxs(pl,{children:[F.jsx(gl,{expandIcon:F.jsx(Da,{}),children:F.jsx(Bn,{variant:"subtitle1",children:"Camera"})}),F.jsxs(ml,{className:e.details,children:[r.camera&&r.camera.map((c,h,p)=>F.jsxs(W.Fragment,{children:[F.jsx(Bn,{variant:"subtitle1",className:e.attributeName,children:"Camera "+h}),F.jsxs("div",{children:[F.jsxs(uE,{variant:"outlined",children:[F.jsx(dE,{id:"demo-simple-select-outlined-label",children:"CameraType"}),F.jsxs(fE,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:c.type,label:"type",onChange:g=>i({...r,camera:r.camera.map((v,x)=>{let b=JSON.parse(JSON.stringify(v));return h==x&&(b.type=g.target.value),b})}),children:[F.jsx(lu,{value:"WebRTC",children:"WebRTC"}),F.jsx(lu,{value:"WebRTC_env",children:"WebRTCenv"}),F.jsx(lu,{value:"Websocket",children:"Websocket"})]})]}),F.jsx("div",{className:e.actionValue,children:F.jsx(gi,{required:!0,fullWidth:!0,value:c.source,onChange:g=>i({...r,camera:r.camera.map((v,x)=>{let b=JSON.parse(JSON.stringify(v));return h==x&&(b.source=g.target.value),b})})})}),F.jsx(wr,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>s(h),className:e.negative,children:F.jsx(yu,{})})]}),F.jsx(Eb,{})]},"fragment-action-"+h)),F.jsx(Gr,{variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:l,children:"Add camera source"})]})]}),F.jsx("div",{style:{paddingBottom:"20pt",paddingTop:"20pt",display:"flex",justifyContent:"center"},children:F.jsx(Gr,{className:e.button,variant:"contained",onClick:a,children:"ADD"})})]})})},YP="/assets/placeholder-IqVYhB-0.jpg";var $j={},TNe=si;Object.defineProperty($j,"__esModule",{value:!0});var jj=$j.default=void 0,CNe=TNe(bi()),ANe=F;jj=$j.default=(0,CNe.default)((0,ANe.jsx)("path",{d:"m15 3 2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm6 12-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6zm12-6-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6z"}),"ZoomOutMap");const PNe=ri(t=>({card:{pointerEvents:"auto",width:t.dimensions.popupMaxWidth},card_max:{pointerEvents:"auto",width:"100%"},media:{width:"100%",display:"flex",justifyContent:"flex-end",alignItems:"flex-start"},mediaButton:{color:t.palette.colors.white,mixBlendMode:"difference"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(1,1,0,2)},root:{pointerEvents:"none",position:"fixed",zIndex:6,left:"360px",top:t.spacing(15),transform:"translateX(1%)"},root_max:{pointerEvents:"none",position:"fixed",zIndex:6,left:"51%",top:"5%",transform:"translateX(-50%)",width:"55%"}})),kNe=({deviceId:t,datacamera:e,onClose:n})=>{const r=PNe(),[i,o]=W.useState(YP),a=mr(g=>g.devices.items[t]),[s,l]=W.useState(!1);let c=s?r.card_max:r.card,h=s?r.root_max:r.root;function p(){l(!s)}return W.useEffect(()=>{t!=null&&(e!=null?o("data:image/bgr8;base64,"+e.camera):o(YP))},[e]),F.jsx("div",{className:h,children:a&&F.jsxs(Oh,{elevation:3,className:c,children:[F.jsxs("div",{style:{display:"flex",right:"5px",height:"35px",position:"absolute"},children:[F.jsx(wr,{size:"small",onClick:p,onTouchStart:p,children:F.jsx(jj,{fontSize:"small",className:r.mediaButton})}),F.jsx(wr,{size:"small",onClick:()=>{n(),l(!1)},onTouchStart:n,children:F.jsx(Ah,{fontSize:"small",className:r.mediaButton})})]}),F.jsxs("div",{style:{display:"block",width:"calc( 100% - 60pt )",paddingLeft:"15pt",paddingTop:"10pt",paddingBottom:"10pt",textAlign:"left"},children:["Image "+a.name," "]}),F.jsx("img",{src:i,className:r.media})]})})};var QG=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function INe(t,e){return!!(t===e||QG(t)&&QG(e))}function RNe(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!INe(t[n],e[n]))return!1;return!0}function u3(t,e){e===void 0&&(e=RNe);var n,r=[],i,o=!1;function a(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return o&&n===this&&e(s,r)||(i=t.apply(this,s),o=!0,n=this,r=s),i}return a}var ONe=typeof performance=="object"&&typeof performance.now=="function",e7=ONe?function(){return performance.now()}:function(){return Date.now()};function t7(t){cancelAnimationFrame(t.id)}function LNe(t,e){var n=e7();function r(){e7()-n>=e?t.call(null):i.id=requestAnimationFrame(r)}var i={id:requestAnimationFrame(r)};return i}var d3=-1;function n7(t){if(t===void 0&&(t=!1),d3===-1||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(e),d3=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return d3}var Px=null;function r7(t){if(t===void 0&&(t=!1),Px===null||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var r=document.createElement("div"),i=r.style;return i.width="100px",i.height="100px",e.appendChild(r),document.body.appendChild(e),e.scrollLeft>0?Px="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?Px="negative":Px="positive-ascending"),document.body.removeChild(e),Px}return Px}var DNe=150,NNe=function(e,n){return e};function zNe(t){var e,n=t.getItemOffset,r=t.getEstimatedTotalSize,i=t.getItemSize,o=t.getOffsetForIndexAndAlignment,a=t.getStartIndexForOffset,s=t.getStopIndexForStartIndex,l=t.initInstanceProps,c=t.shouldResetStyleCacheOnItemSizeChange,h=t.validateProps;return e=function(p){sE(g,p);function g(x){var b;return b=p.call(this,x)||this,b._instanceProps=l(b.props,CM(b)),b._outerRef=void 0,b._resetIsScrollingTimeoutId=null,b.state={instance:CM(b),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof b.props.initialScrollOffset=="number"?b.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},b._callOnItemsRendered=void 0,b._callOnItemsRendered=u3(function(M,w,T,C){return b.props.onItemsRendered({overscanStartIndex:M,overscanStopIndex:w,visibleStartIndex:T,visibleStopIndex:C})}),b._callOnScroll=void 0,b._callOnScroll=u3(function(M,w,T){return b.props.onScroll({scrollDirection:M,scrollOffset:w,scrollUpdateWasRequested:T})}),b._getItemStyle=void 0,b._getItemStyle=function(M){var w=b.props,T=w.direction,C=w.itemSize,I=w.layout,R=b._getItemStyleCache(c&&C,c&&I,c&&T),O;if(R.hasOwnProperty(M))O=R[M];else{var B=n(b.props,M,b._instanceProps),U=i(b.props,M,b._instanceProps),Z=T==="horizontal"||I==="horizontal",j=T==="rtl",X=Z?B:0;R[M]=O={position:"absolute",left:j?void 0:X,right:j?X:void 0,top:Z?0:B,height:Z?"100%":U,width:Z?U:"100%"}}return O},b._getItemStyleCache=void 0,b._getItemStyleCache=u3(function(M,w,T){return{}}),b._onScrollHorizontal=function(M){var w=M.currentTarget,T=w.clientWidth,C=w.scrollLeft,I=w.scrollWidth;b.setState(function(R){if(R.scrollOffset===C)return null;var O=b.props.direction,B=C;if(O==="rtl")switch(r7()){case"negative":B=-C;break;case"positive-descending":B=I-T-C;break}return B=Math.max(0,Math.min(B,I-T)),{isScrolling:!0,scrollDirection:R.scrollOffset<B?"forward":"backward",scrollOffset:B,scrollUpdateWasRequested:!1}},b._resetIsScrollingDebounced)},b._onScrollVertical=function(M){var w=M.currentTarget,T=w.clientHeight,C=w.scrollHeight,I=w.scrollTop;b.setState(function(R){if(R.scrollOffset===I)return null;var O=Math.max(0,Math.min(I,C-T));return{isScrolling:!0,scrollDirection:R.scrollOffset<O?"forward":"backward",scrollOffset:O,scrollUpdateWasRequested:!1}},b._resetIsScrollingDebounced)},b._outerRefSetter=function(M){var w=b.props.outerRef;b._outerRef=M,typeof w=="function"?w(M):w!=null&&typeof w=="object"&&w.hasOwnProperty("current")&&(w.current=M)},b._resetIsScrollingDebounced=function(){b._resetIsScrollingTimeoutId!==null&&t7(b._resetIsScrollingTimeoutId),b._resetIsScrollingTimeoutId=LNe(b._resetIsScrolling,DNe)},b._resetIsScrolling=function(){b._resetIsScrollingTimeoutId=null,b.setState({isScrolling:!1},function(){b._getItemStyleCache(-1,null)})},b}g.getDerivedStateFromProps=function(b,M){return FNe(b,M),h(b),null};var v=g.prototype;return v.scrollTo=function(b){b=Math.max(0,b),this.setState(function(M){return M.scrollOffset===b?null:{scrollDirection:M.scrollOffset<b?"forward":"backward",scrollOffset:b,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},v.scrollToItem=function(b,M){M===void 0&&(M="auto");var w=this.props,T=w.itemCount,C=w.layout,I=this.state.scrollOffset;b=Math.max(0,Math.min(b,T-1));var R=0;if(this._outerRef){var O=this._outerRef;C==="vertical"?R=O.scrollWidth>O.clientWidth?n7():0:R=O.scrollHeight>O.clientHeight?n7():0}this.scrollTo(o(this.props,b,M,I,this._instanceProps,R))},v.componentDidMount=function(){var b=this.props,M=b.direction,w=b.initialScrollOffset,T=b.layout;if(typeof w=="number"&&this._outerRef!=null){var C=this._outerRef;M==="horizontal"||T==="horizontal"?C.scrollLeft=w:C.scrollTop=w}this._callPropsCallbacks()},v.componentDidUpdate=function(){var b=this.props,M=b.direction,w=b.layout,T=this.state,C=T.scrollOffset,I=T.scrollUpdateWasRequested;if(I&&this._outerRef!=null){var R=this._outerRef;if(M==="horizontal"||w==="horizontal")if(M==="rtl")switch(r7()){case"negative":R.scrollLeft=-C;break;case"positive-ascending":R.scrollLeft=C;break;default:var O=R.clientWidth,B=R.scrollWidth;R.scrollLeft=B-O-C;break}else R.scrollLeft=C;else R.scrollTop=C}this._callPropsCallbacks()},v.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&t7(this._resetIsScrollingTimeoutId)},v.render=function(){var b=this.props,M=b.children,w=b.className,T=b.direction,C=b.height,I=b.innerRef,R=b.innerElementType,O=b.innerTagName,B=b.itemCount,U=b.itemData,Z=b.itemKey,j=Z===void 0?NNe:Z,X=b.layout,le=b.outerElementType,me=b.outerTagName,ie=b.style,ce=b.useIsScrolling,fe=b.width,xe=this.state.isScrolling,te=T==="horizontal"||X==="horizontal",he=te?this._onScrollHorizontal:this._onScrollVertical,ve=this._getRangeToRender(),ze=ve[0],Ue=ve[1],rt=[];if(B>0)for(var Be=ze;Be<=Ue;Be++)rt.push(W.createElement(M,{data:U,key:j(Be,U),index:Be,isScrolling:ce?xe:void 0,style:this._getItemStyle(Be)}));var st=r(this.props,this._instanceProps);return W.createElement(le||me||"div",{className:w,onScroll:he,ref:this._outerRefSetter,style:de({position:"relative",height:C,width:fe,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:T},ie)},W.createElement(R||O||"div",{children:rt,ref:I,style:{height:te?"100%":st,pointerEvents:xe?"none":void 0,width:te?st:"100%"}}))},v._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var b=this.props.itemCount;if(b>0){var M=this._getRangeToRender(),w=M[0],T=M[1],C=M[2],I=M[3];this._callOnItemsRendered(w,T,C,I)}}if(typeof this.props.onScroll=="function"){var R=this.state,O=R.scrollDirection,B=R.scrollOffset,U=R.scrollUpdateWasRequested;this._callOnScroll(O,B,U)}},v._getRangeToRender=function(){var b=this.props,M=b.itemCount,w=b.overscanCount,T=this.state,C=T.isScrolling,I=T.scrollDirection,R=T.scrollOffset;if(M===0)return[0,0,0,0];var O=a(this.props,R,this._instanceProps),B=s(this.props,O,R,this._instanceProps),U=!C||I==="backward"?Math.max(1,w):1,Z=!C||I==="forward"?Math.max(1,w):1;return[Math.max(0,O-U),Math.max(0,Math.min(M-1,B+Z)),O,B]},g}(W.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}var FNe=function(e,n){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,n.instance},BNe=zNe({getItemOffset:function(e,n){var r=e.itemSize;return n*r},getItemSize:function(e,n){var r=e.itemSize;return r},getEstimatedTotalSize:function(e){var n=e.itemCount,r=e.itemSize;return r*n},getOffsetForIndexAndAlignment:function(e,n,r,i,o,a){var s=e.direction,l=e.height,c=e.itemCount,h=e.itemSize,p=e.layout,g=e.width,v=s==="horizontal"||p==="horizontal",x=v?g:l,b=Math.max(0,c*h-x),M=Math.min(b,n*h),w=Math.max(0,n*h-x+h+a);switch(r==="smart"&&(i>=w-x&&i<=M+x?r="auto":r="center"),r){case"start":return M;case"end":return w;case"center":{var T=Math.round(w+(M-w)/2);return T<Math.ceil(x/2)?0:T>b+Math.floor(x/2)?b:T}case"auto":default:return i>=w&&i<=M?i:i<w?w:M}},getStartIndexForOffset:function(e,n){var r=e.itemCount,i=e.itemSize;return Math.max(0,Math.min(r-1,Math.floor(n/i)))},getStopIndexForStartIndex:function(e,n,r){var i=e.direction,o=e.height,a=e.itemCount,s=e.itemSize,l=e.layout,c=e.width,h=i==="horizontal"||l==="horizontal",p=n*s,g=h?c:o,v=Math.ceil((g+r-p)/s);return Math.max(0,Math.min(a-1,n+v-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});let ad;typeof window<"u"?ad=window:typeof self<"u"?ad=self:ad=global;let FF=null,BF=null;const i7=20,f3=ad.clearTimeout,o7=ad.setTimeout,h3=ad.cancelAnimationFrame||ad.mozCancelAnimationFrame||ad.webkitCancelAnimationFrame,s7=ad.requestAnimationFrame||ad.mozRequestAnimationFrame||ad.webkitRequestAnimationFrame;h3==null||s7==null?(FF=f3,BF=function(e){return o7(e,i7)}):(FF=function([e,n]){h3(e),f3(n)},BF=function(e){const n=s7(function(){f3(r),e()}),r=o7(function(){h3(n),e()},i7);return[n,r]});function $Ne(t){let e,n,r,i,o,a,s;const l=typeof document<"u"&&document.attachEvent;if(!l){a=function(w){const T=w.__resizeTriggers__,C=T.firstElementChild,I=T.lastElementChild,R=C.firstElementChild;I.scrollLeft=I.scrollWidth,I.scrollTop=I.scrollHeight,R.style.width=C.offsetWidth+1+"px",R.style.height=C.offsetHeight+1+"px",C.scrollLeft=C.scrollWidth,C.scrollTop=C.scrollHeight},o=function(w){return w.offsetWidth!==w.__resizeLast__.width||w.offsetHeight!==w.__resizeLast__.height},s=function(w){if(w.target.className&&typeof w.target.className.indexOf=="function"&&w.target.className.indexOf("contract-trigger")<0&&w.target.className.indexOf("expand-trigger")<0)return;const T=this;a(this),this.__resizeRAF__&&FF(this.__resizeRAF__),this.__resizeRAF__=BF(function(){o(T)&&(T.__resizeLast__.width=T.offsetWidth,T.__resizeLast__.height=T.offsetHeight,T.__resizeListeners__.forEach(function(R){R.call(T,w)}))})};let g=!1,v="";r="animationstart";const x="Webkit Moz O ms".split(" ");let b="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),M="";{const w=document.createElement("fakeelement");if(w.style.animationName!==void 0&&(g=!0),g===!1){for(let T=0;T<x.length;T++)if(w.style[x[T]+"AnimationName"]!==void 0){M=x[T],v="-"+M.toLowerCase()+"-",r=b[T],g=!0;break}}}n="resizeanim",e="@"+v+"keyframes "+n+" { from { opacity: 0; } to { opacity: 0; } } ",i=v+"animation: 1ms "+n+"; "}const c=function(g){if(!g.getElementById("detectElementResize")){const v=(e||"")+".resize-triggers { "+(i||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',x=g.head||g.getElementsByTagName("head")[0],b=g.createElement("style");b.id="detectElementResize",b.type="text/css",t!=null&&b.setAttribute("nonce",t),b.styleSheet?b.styleSheet.cssText=v:b.appendChild(g.createTextNode(v)),x.appendChild(b)}};return{addResizeListener:function(g,v){if(l)g.attachEvent("onresize",v);else{if(!g.__resizeTriggers__){const x=g.ownerDocument,b=ad.getComputedStyle(g);b&&b.position==="static"&&(g.style.position="relative"),c(x),g.__resizeLast__={},g.__resizeListeners__=[],(g.__resizeTriggers__=x.createElement("div")).className="resize-triggers";const M=x.createElement("div");M.className="expand-trigger",M.appendChild(x.createElement("div"));const w=x.createElement("div");w.className="contract-trigger",g.__resizeTriggers__.appendChild(M),g.__resizeTriggers__.appendChild(w),g.appendChild(g.__resizeTriggers__),a(g),g.addEventListener("scroll",s,!0),r&&(g.__resizeTriggers__.__animationListener__=function(C){C.animationName===n&&a(g)},g.__resizeTriggers__.addEventListener(r,g.__resizeTriggers__.__animationListener__))}g.__resizeListeners__.push(v)}},removeResizeListener:function(g,v){if(l)g.detachEvent("onresize",v);else if(g.__resizeListeners__.splice(g.__resizeListeners__.indexOf(v),1),!g.__resizeListeners__.length){g.removeEventListener("scroll",s,!0),g.__resizeTriggers__.__animationListener__&&(g.__resizeTriggers__.removeEventListener(r,g.__resizeTriggers__.__animationListener__),g.__resizeTriggers__.__animationListener__=null);try{g.__resizeTriggers__=!g.removeChild(g.__resizeTriggers__)}catch{}}}}}class jNe extends W.Component{constructor(...e){super(...e),this.state={height:this.props.defaultHeight||0,scaledHeight:this.props.defaultHeight||0,scaledWidth:this.props.defaultWidth||0,width:this.props.defaultWidth||0},this._autoSizer=null,this._detectElementResize=null,this._parentNode=null,this._resizeObserver=null,this._timeoutId=null,this._onResize=()=>{this._timeoutId=null;const{disableHeight:n,disableWidth:r,onResize:i}=this.props;if(this._parentNode){var o,a,s,l;const c=window.getComputedStyle(this._parentNode)||{},h=parseFloat((o=c.paddingLeft)!==null&&o!==void 0?o:"0"),p=parseFloat((a=c.paddingRight)!==null&&a!==void 0?a:"0"),g=parseFloat((s=c.paddingTop)!==null&&s!==void 0?s:"0"),v=parseFloat((l=c.paddingBottom)!==null&&l!==void 0?l:"0"),x=this._parentNode.getBoundingClientRect(),b=x.height-g-v,M=x.width-h-p,w=this._parentNode.offsetHeight-g-v,T=this._parentNode.offsetWidth-h-p;(!n&&(this.state.height!==w||this.state.scaledHeight!==b)||!r&&(this.state.width!==T||this.state.scaledWidth!==M))&&(this.setState({height:w,width:T,scaledHeight:b,scaledWidth:M}),typeof i=="function"&&i({height:w,scaledHeight:b,scaledWidth:M,width:T}))}},this._setRef=n=>{this._autoSizer=n}}componentDidMount(){const{nonce:e}=this.props;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._parentNode!=null&&(typeof ResizeObserver<"u"?(this._resizeObserver=new ResizeObserver(()=>{this._timeoutId=setTimeout(this._onResize,0)}),this._resizeObserver.observe(this._parentNode)):(this._detectElementResize=$Ne(e),this._detectElementResize.addResizeListener(this._parentNode,this._onResize)),this._onResize()))}componentWillUnmount(){this._parentNode&&(this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize),this._timeoutId!==null&&clearTimeout(this._timeoutId),this._resizeObserver&&(this._resizeObserver.observe(this._parentNode),this._resizeObserver.disconnect()))}render(){const{children:e,defaultHeight:n,defaultWidth:r,disableHeight:i=!1,disableWidth:o=!1,nonce:a,onResize:s,style:l={},tagName:c="div",...h}=this.props,{height:p,scaledHeight:g,scaledWidth:v,width:x}=this.state,b={overflow:"visible"},M={};let w=!1;return i||(p===0&&(w=!0),b.height=0,M.height=p,M.scaledHeight=g),o||(x===0&&(w=!0),b.width=0,M.width=x,M.scaledWidth=v),W.createElement(c,{ref:this._setRef,style:{...b,...l},...h},!w&&e(M))}}var Uj={},UNe=si;Object.defineProperty(Uj,"__esModule",{value:!0});var Xie=Uj.default=void 0,VNe=UNe(bi()),WNe=F;Xie=Uj.default=(0,VNe.default)((0,WNe.jsx)("path",{d:"M15.67 4H14V2h-4v2H8.33C7.6 4 7 4.6 7 5.33v15.33C7 21.4 7.6 22 8.33 22h7.33c.74 0 1.34-.6 1.34-1.33V5.33C17 4.6 16.4 4 15.67 4"}),"BatteryFull");var Vj={},HNe=si;Object.defineProperty(Vj,"__esModule",{value:!0});var Kie=Vj.default=void 0,GNe=HNe(bi()),qNe=F;Kie=Vj.default=(0,GNe.default)((0,qNe.jsx)("path",{d:"M15.67 4H14V2h-4v2H8.33C7.6 4 7 4.6 7 5.33v15.33C7 21.4 7.6 22 8.33 22h7.33c.74 0 1.34-.6 1.34-1.33V5.33C17 4.6 16.4 4 15.67 4M11 20v-5.5H9L13 7v5.5h2z"}),"BatteryChargingFull");var Wj={},YNe=si;Object.defineProperty(Wj,"__esModule",{value:!0});var Zie=Wj.default=void 0,XNe=ZNe(W),KNe=YNe(bi()),p3=F;function Jie(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(Jie=function(r){return r?n:e})(t)}function ZNe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=Jie(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}Zie=Wj.default=(0,KNe.default)((0,p3.jsxs)(XNe.Fragment,{children:[(0,p3.jsx)("path",{fillOpacity:".3",d:"M17 5.33C17 4.6 16.4 4 15.67 4H14V2h-4v2H8.33C7.6 4 7 4.6 7 5.33V11h10V5.33z"}),(0,p3.jsx)("path",{d:"M7 11v9.67C7 21.4 7.6 22 8.33 22h7.33c.74 0 1.34-.6 1.34-1.33V11H7z"})]}),"Battery60");var Hj={},JNe=si;Object.defineProperty(Hj,"__esModule",{value:!0});var Qie=Hj.default=void 0,QNe=tze(W),eze=JNe(bi()),m3=F;function eoe(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(eoe=function(r){return r?n:e})(t)}function tze(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=eoe(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}Qie=Hj.default=(0,eze.default)((0,m3.jsxs)(QNe.Fragment,{children:[(0,m3.jsx)("path",{fillOpacity:".3",d:"M15.67 4H14V2h-4v2H8.33C7.6 4 7 4.6 7 5.33V11h3.87L13 7v4h4V5.33C17 4.6 16.4 4 15.67 4z"}),(0,m3.jsx)("path",{d:"M13 12.5h2L11 20v-5.5H9l1.87-3.5H7v9.67C7 21.4 7.6 22 8.33 22h7.33c.74 0 1.34-.6 1.34-1.33V11h-4v1.5z"})]}),"BatteryCharging60");var Gj={},nze=si;Object.defineProperty(Gj,"__esModule",{value:!0});var toe=Gj.default=void 0,rze=oze(W),ize=nze(bi()),g3=F;function noe(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(noe=function(r){return r?n:e})(t)}function oze(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=noe(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}toe=Gj.default=(0,ize.default)((0,g3.jsxs)(rze.Fragment,{children:[(0,g3.jsx)("path",{d:"M7 17v3.67C7 21.4 7.6 22 8.33 22h7.33c.74 0 1.34-.6 1.34-1.33V17H7z"}),(0,g3.jsx)("path",{fillOpacity:".3",d:"M17 5.33C17 4.6 16.4 4 15.67 4H14V2h-4v2H8.33C7.6 4 7 4.6 7 5.33V17h10V5.33z"})]}),"Battery20");var qj={},sze=si;Object.defineProperty(qj,"__esModule",{value:!0});var roe=qj.default=void 0,aze=cze(W),lze=sze(bi()),y3=F;function ioe(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(ioe=function(r){return r?n:e})(t)}function cze(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=ioe(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}roe=qj.default=(0,lze.default)((0,y3.jsxs)(aze.Fragment,{children:[(0,y3.jsx)("path",{d:"M11 20v-3H7v3.67C7 21.4 7.6 22 8.33 22h7.33c.74 0 1.34-.6 1.34-1.33V17h-4.4L11 20z"}),(0,y3.jsx)("path",{fillOpacity:".3",d:"M15.67 4H14V2h-4v2H8.33C7.6 4 7 4.6 7 5.33V17h4v-2.5H9L13 7v5.5h2L12.6 17H17V5.33C17 4.6 16.4 4 15.67 4z"})]}),"BatteryCharging20");var Yj={},uze=si;Object.defineProperty(Yj,"__esModule",{value:!0});var ooe=Yj.default=void 0,dze=uze(bi()),fze=F;ooe=Yj.default=(0,dze.default)((0,fze.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error");//! moment.js
//! version : 2.29.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var soe;function Ln(){return soe.apply(null,arguments)}function hze(t){soe=t}function pf(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function p0(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function yi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Xj(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(yi(t,e))return!1;return!0}function yc(t){return t===void 0}function Yp(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function bE(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function aoe(t,e){var n=[],r,i=t.length;for(r=0;r<i;++r)n.push(e(t[r],r));return n}function Og(t,e){for(var n in e)yi(e,n)&&(t[n]=e[n]);return yi(e,"toString")&&(t.toString=e.toString),yi(e,"valueOf")&&(t.valueOf=e.valueOf),t}function Lh(t,e,n,r){return Ioe(t,e,n,r,!0).utc()}function pze(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Br(t){return t._pf==null&&(t._pf=pze()),t._pf}var $F;Array.prototype.some?$F=Array.prototype.some:$F=function(t){var e=Object(this),n=e.length>>>0,r;for(r=0;r<n;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};function Kj(t){if(t._isValid==null){var e=Br(t),n=$F.call(e.parsedDateParts,function(i){return i!=null}),r=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict&&(r=r&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=r;else return r}return t._isValid}function LR(t){var e=Lh(NaN);return t!=null?Og(Br(e),t):Br(e).userInvalidated=!0,e}var a7=Ln.momentProperties=[],v3=!1;function Zj(t,e){var n,r,i,o=a7.length;if(yc(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),yc(e._i)||(t._i=e._i),yc(e._f)||(t._f=e._f),yc(e._l)||(t._l=e._l),yc(e._strict)||(t._strict=e._strict),yc(e._tzm)||(t._tzm=e._tzm),yc(e._isUTC)||(t._isUTC=e._isUTC),yc(e._offset)||(t._offset=e._offset),yc(e._pf)||(t._pf=Br(e)),yc(e._locale)||(t._locale=e._locale),o>0)for(n=0;n<o;n++)r=a7[n],i=e[r],yc(i)||(t[r]=i);return t}function wE(t){Zj(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),v3===!1&&(v3=!0,Ln.updateOffset(this),v3=!1)}function mf(t){return t instanceof wE||t!=null&&t._isAMomentObject!=null}function loe(t){Ln.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function _d(t,e){var n=!0;return Og(function(){if(Ln.deprecationHandler!=null&&Ln.deprecationHandler(null,t),n){var r=[],i,o,a,s=arguments.length;for(o=0;o<s;o++){if(i="",typeof arguments[o]=="object"){i+=`
[`+o+"] ";for(a in arguments[0])yi(arguments[0],a)&&(i+=a+": "+arguments[0][a]+", ");i=i.slice(0,-2)}else i=arguments[o];r.push(i)}loe(t+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),n=!1}return e.apply(this,arguments)},e)}var l7={};function coe(t,e){Ln.deprecationHandler!=null&&Ln.deprecationHandler(t,e),l7[t]||(loe(e),l7[t]=!0)}Ln.suppressDeprecationWarnings=!1;Ln.deprecationHandler=null;function Dh(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function mze(t){var e,n;for(n in t)yi(t,n)&&(e=t[n],Dh(e)?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function jF(t,e){var n=Og({},t),r;for(r in e)yi(e,r)&&(p0(t[r])&&p0(e[r])?(n[r]={},Og(n[r],t[r]),Og(n[r],e[r])):e[r]!=null?n[r]=e[r]:delete n[r]);for(r in t)yi(t,r)&&!yi(e,r)&&p0(t[r])&&(n[r]=Og({},n[r]));return n}function Jj(t){t!=null&&this.set(t)}var UF;Object.keys?UF=Object.keys:UF=function(t){var e,n=[];for(e in t)yi(t,e)&&n.push(e);return n};var gze={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function yze(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return Dh(r)?r.call(e,n):r}function Ph(t,e,n){var r=""+Math.abs(t),i=e-r.length,o=t>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var Qj=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,QT=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,x3={},J_={};function ur(t,e,n,r){var i=r;typeof r=="string"&&(i=function(){return this[r]()}),t&&(J_[t]=i),e&&(J_[e[0]]=function(){return Ph(i.apply(this,arguments),e[1],e[2])}),n&&(J_[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function vze(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function xze(t){var e=t.match(Qj),n,r;for(n=0,r=e.length;n<r;n++)J_[e[n]]?e[n]=J_[e[n]]:e[n]=vze(e[n]);return function(i){var o="",a;for(a=0;a<r;a++)o+=Dh(e[a])?e[a].call(i,t):e[a];return o}}function NA(t,e){return t.isValid()?(e=uoe(e,t.localeData()),x3[e]=x3[e]||xze(e),x3[e](t)):t.localeData().invalidDate()}function uoe(t,e){var n=5;function r(i){return e.longDateFormat(i)||i}for(QT.lastIndex=0;n>=0&&QT.test(t);)t=t.replace(QT,r),QT.lastIndex=0,n-=1;return t}var _ze={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function bze(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(Qj).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[t])}var wze="Invalid date";function Sze(){return this._invalidDate}var Mze="%d",Eze=/\d{1,2}/;function Tze(t){return this._ordinal.replace("%d",t)}var Cze={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Aze(t,e,n,r){var i=this._relativeTime[n];return Dh(i)?i(t,e,n,r):i.replace(/%d/i,t)}function Pze(t,e){var n=this._relativeTime[t>0?"future":"past"];return Dh(n)?n(e):n.replace(/%s/i,e)}var US={};function bl(t,e){var n=t.toLowerCase();US[n]=US[n+"s"]=US[e]=t}function bd(t){return typeof t=="string"?US[t]||US[t.toLowerCase()]:void 0}function eU(t){var e={},n,r;for(r in t)yi(t,r)&&(n=bd(r),n&&(e[n]=t[r]));return e}var doe={};function wl(t,e){doe[t]=e}function kze(t){var e=[],n;for(n in t)yi(t,n)&&e.push({unit:n,priority:doe[n]});return e.sort(function(r,i){return r.priority-i.priority}),e}function DR(t){return t%4===0&&t%100!==0||t%400===0}function Qu(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function qr(t){var e=+t,n=0;return e!==0&&isFinite(e)&&(n=Qu(e)),n}function S1(t,e){return function(n){return n!=null?(foe(this,t,n),Ln.updateOffset(this,e),this):XP(this,t)}}function XP(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function foe(t,e,n){t.isValid()&&!isNaN(n)&&(e==="FullYear"&&DR(t.year())&&t.month()===1&&t.date()===29?(n=qr(n),t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),jR(n,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](n))}function Ize(t){return t=bd(t),Dh(this[t])?this[t]():this}function Rze(t,e){if(typeof t=="object"){t=eU(t);var n=kze(t),r,i=n.length;for(r=0;r<i;r++)this[n[r].unit](t[n[r].unit])}else if(t=bd(t),Dh(this[t]))return this[t](e);return this}var hoe=/\d/,Su=/\d\d/,poe=/\d{3}/,tU=/\d{4}/,NR=/[+-]?\d{6}/,Eo=/\d\d?/,moe=/\d\d\d\d?/,goe=/\d\d\d\d\d\d?/,zR=/\d{1,3}/,nU=/\d{1,4}/,FR=/[+-]?\d{1,6}/,M1=/\d+/,BR=/[+-]?\d+/,Oze=/Z|[+-]\d\d:?\d\d/gi,$R=/Z|[+-]\d\d(?::?\d\d)?/gi,Lze=/[+-]?\d+(\.\d{1,3})?/,SE=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,KP;KP={};function Gn(t,e,n){KP[t]=Dh(e)?e:function(r,i){return r&&n?n:e}}function Dze(t,e){return yi(KP,t)?KP[t](e._strict,e._locale):new RegExp(Nze(t))}function Nze(t){return Jc(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,n,r,i,o){return n||r||i||o}))}function Jc(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var VF={};function eo(t,e){var n,r=e,i;for(typeof t=="string"&&(t=[t]),Yp(e)&&(r=function(o,a){a[e]=qr(o)}),i=t.length,n=0;n<i;n++)VF[t[n]]=r}function ME(t,e){eo(t,function(n,r,i,o){i._w=i._w||{},e(n,i._w,i,o)})}function zze(t,e,n){e!=null&&yi(VF,t)&&VF[t](e,n._a,n,t)}var vl=0,Tp=1,ch=2,ea=3,lf=4,Cp=5,Jv=6,Fze=7,Bze=8;function $ze(t,e){return(t%e+e)%e}var vs;Array.prototype.indexOf?vs=Array.prototype.indexOf:vs=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function jR(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=$ze(e,12);return t+=(e-n)/12,n===1?DR(t)?29:28:31-n%7%2}ur("M",["MM",2],"Mo",function(){return this.month()+1});ur("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});ur("MMMM",0,0,function(t){return this.localeData().months(this,t)});bl("month","M");wl("month",8);Gn("M",Eo);Gn("MM",Eo,Su);Gn("MMM",function(t,e){return e.monthsShortRegex(t)});Gn("MMMM",function(t,e){return e.monthsRegex(t)});eo(["M","MM"],function(t,e){e[Tp]=qr(t)-1});eo(["MMM","MMMM"],function(t,e,n,r){var i=n._locale.monthsParse(t,r,n._strict);i!=null?e[Tp]=i:Br(n).invalidMonth=t});var jze="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),yoe="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),voe=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Uze=SE,Vze=SE;function Wze(t,e){return t?pf(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||voe).test(e)?"format":"standalone"][t.month()]:pf(this._months)?this._months:this._months.standalone}function Hze(t,e){return t?pf(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[voe.test(e)?"format":"standalone"][t.month()]:pf(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Gze(t,e,n){var r,i,o,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=Lh([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?e==="MMM"?(i=vs.call(this._shortMonthsParse,a),i!==-1?i:null):(i=vs.call(this._longMonthsParse,a),i!==-1?i:null):e==="MMM"?(i=vs.call(this._shortMonthsParse,a),i!==-1?i:(i=vs.call(this._longMonthsParse,a),i!==-1?i:null)):(i=vs.call(this._longMonthsParse,a),i!==-1?i:(i=vs.call(this._shortMonthsParse,a),i!==-1?i:null))}function qze(t,e,n){var r,i,o;if(this._monthsParseExact)return Gze.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=Lh([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&e==="MMMM"&&this._longMonthsParse[r].test(t))return r;if(n&&e==="MMM"&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}}function xoe(t,e){var n;if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=qr(e);else if(e=t.localeData().monthsParse(e),!Yp(e))return t}return n=Math.min(t.date(),jR(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function _oe(t){return t!=null?(xoe(this,t),Ln.updateOffset(this,!0),this):XP(this,"Month")}function Yze(){return jR(this.year(),this.month())}function Xze(t){return this._monthsParseExact?(yi(this,"_monthsRegex")||boe.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(yi(this,"_monthsShortRegex")||(this._monthsShortRegex=Uze),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function Kze(t){return this._monthsParseExact?(yi(this,"_monthsRegex")||boe.call(this),t?this._monthsStrictRegex:this._monthsRegex):(yi(this,"_monthsRegex")||(this._monthsRegex=Vze),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function boe(){function t(a,s){return s.length-a.length}var e=[],n=[],r=[],i,o;for(i=0;i<12;i++)o=Lh([2e3,i]),e.push(this.monthsShort(o,"")),n.push(this.months(o,"")),r.push(this.months(o,"")),r.push(this.monthsShort(o,""));for(e.sort(t),n.sort(t),r.sort(t),i=0;i<12;i++)e[i]=Jc(e[i]),n[i]=Jc(n[i]);for(i=0;i<24;i++)r[i]=Jc(r[i]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}ur("Y",0,0,function(){var t=this.year();return t<=9999?Ph(t,4):"+"+t});ur(0,["YY",2],0,function(){return this.year()%100});ur(0,["YYYY",4],0,"year");ur(0,["YYYYY",5],0,"year");ur(0,["YYYYYY",6,!0],0,"year");bl("year","y");wl("year",1);Gn("Y",BR);Gn("YY",Eo,Su);Gn("YYYY",nU,tU);Gn("YYYYY",FR,NR);Gn("YYYYYY",FR,NR);eo(["YYYYY","YYYYYY"],vl);eo("YYYY",function(t,e){e[vl]=t.length===2?Ln.parseTwoDigitYear(t):qr(t)});eo("YY",function(t,e){e[vl]=Ln.parseTwoDigitYear(t)});eo("Y",function(t,e){e[vl]=parseInt(t,10)});function VS(t){return DR(t)?366:365}Ln.parseTwoDigitYear=function(t){return qr(t)+(qr(t)>68?1900:2e3)};var woe=S1("FullYear",!0);function Zze(){return DR(this.year())}function Jze(t,e,n,r,i,o,a){var s;return t<100&&t>=0?(s=new Date(t+400,e,n,r,i,o,a),isFinite(s.getFullYear())&&s.setFullYear(t)):s=new Date(t,e,n,r,i,o,a),s}function DM(t){var e,n;return t<100&&t>=0?(n=Array.prototype.slice.call(arguments),n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function ZP(t,e,n){var r=7+e-n,i=(7+DM(t,0,r).getUTCDay()-e)%7;return-i+r-1}function Soe(t,e,n,r,i){var o=(7+n-r)%7,a=ZP(t,r,i),s=1+7*(e-1)+o+a,l,c;return s<=0?(l=t-1,c=VS(l)+s):s>VS(t)?(l=t+1,c=s-VS(t)):(l=t,c=s),{year:l,dayOfYear:c}}function NM(t,e,n){var r=ZP(t.year(),e,n),i=Math.floor((t.dayOfYear()-r-1)/7)+1,o,a;return i<1?(a=t.year()-1,o=i+Dp(a,e,n)):i>Dp(t.year(),e,n)?(o=i-Dp(t.year(),e,n),a=t.year()+1):(a=t.year(),o=i),{week:o,year:a}}function Dp(t,e,n){var r=ZP(t,e,n),i=ZP(t+1,e,n);return(VS(t)-r+i)/7}ur("w",["ww",2],"wo","week");ur("W",["WW",2],"Wo","isoWeek");bl("week","w");bl("isoWeek","W");wl("week",5);wl("isoWeek",5);Gn("w",Eo);Gn("ww",Eo,Su);Gn("W",Eo);Gn("WW",Eo,Su);ME(["w","ww","W","WW"],function(t,e,n,r){e[r.substr(0,1)]=qr(t)});function Qze(t){return NM(t,this._week.dow,this._week.doy).week}var eFe={dow:0,doy:6};function tFe(){return this._week.dow}function nFe(){return this._week.doy}function rFe(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function iFe(t){var e=NM(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}ur("d",0,"do","day");ur("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});ur("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});ur("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});ur("e",0,0,"weekday");ur("E",0,0,"isoWeekday");bl("day","d");bl("weekday","e");bl("isoWeekday","E");wl("day",11);wl("weekday",11);wl("isoWeekday",11);Gn("d",Eo);Gn("e",Eo);Gn("E",Eo);Gn("dd",function(t,e){return e.weekdaysMinRegex(t)});Gn("ddd",function(t,e){return e.weekdaysShortRegex(t)});Gn("dddd",function(t,e){return e.weekdaysRegex(t)});ME(["dd","ddd","dddd"],function(t,e,n,r){var i=n._locale.weekdaysParse(t,r,n._strict);i!=null?e.d=i:Br(n).invalidWeekday=t});ME(["d","e","E"],function(t,e,n,r){e[r]=qr(t)});function oFe(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function sFe(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function rU(t,e){return t.slice(e,7).concat(t.slice(0,e))}var aFe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Moe="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),lFe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),cFe=SE,uFe=SE,dFe=SE;function fFe(t,e){var n=pf(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?rU(n,this._week.dow):t?n[t.day()]:n}function hFe(t){return t===!0?rU(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function pFe(t){return t===!0?rU(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function mFe(t,e,n){var r,i,o,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=Lh([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?e==="dddd"?(i=vs.call(this._weekdaysParse,a),i!==-1?i:null):e==="ddd"?(i=vs.call(this._shortWeekdaysParse,a),i!==-1?i:null):(i=vs.call(this._minWeekdaysParse,a),i!==-1?i:null):e==="dddd"?(i=vs.call(this._weekdaysParse,a),i!==-1||(i=vs.call(this._shortWeekdaysParse,a),i!==-1)?i:(i=vs.call(this._minWeekdaysParse,a),i!==-1?i:null)):e==="ddd"?(i=vs.call(this._shortWeekdaysParse,a),i!==-1||(i=vs.call(this._weekdaysParse,a),i!==-1)?i:(i=vs.call(this._minWeekdaysParse,a),i!==-1?i:null)):(i=vs.call(this._minWeekdaysParse,a),i!==-1||(i=vs.call(this._weekdaysParse,a),i!==-1)?i:(i=vs.call(this._shortWeekdaysParse,a),i!==-1?i:null))}function gFe(t,e,n){var r,i,o;if(this._weekdaysParseExact)return mFe.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=Lh([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&e==="dddd"&&this._fullWeekdaysParse[r].test(t))return r;if(n&&e==="ddd"&&this._shortWeekdaysParse[r].test(t))return r;if(n&&e==="dd"&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}}function yFe(t){if(!this.isValid())return t!=null?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return t!=null?(t=oFe(t,this.localeData()),this.add(t-e,"d")):e}function vFe(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function xFe(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=sFe(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function _Fe(t){return this._weekdaysParseExact?(yi(this,"_weekdaysRegex")||iU.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(yi(this,"_weekdaysRegex")||(this._weekdaysRegex=cFe),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function bFe(t){return this._weekdaysParseExact?(yi(this,"_weekdaysRegex")||iU.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(yi(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=uFe),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function wFe(t){return this._weekdaysParseExact?(yi(this,"_weekdaysRegex")||iU.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(yi(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=dFe),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function iU(){function t(h,p){return p.length-h.length}var e=[],n=[],r=[],i=[],o,a,s,l,c;for(o=0;o<7;o++)a=Lh([2e3,1]).day(o),s=Jc(this.weekdaysMin(a,"")),l=Jc(this.weekdaysShort(a,"")),c=Jc(this.weekdays(a,"")),e.push(s),n.push(l),r.push(c),i.push(s),i.push(l),i.push(c);e.sort(t),n.sort(t),r.sort(t),i.sort(t),this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function oU(){return this.hours()%12||12}function SFe(){return this.hours()||24}ur("H",["HH",2],0,"hour");ur("h",["hh",2],0,oU);ur("k",["kk",2],0,SFe);ur("hmm",0,0,function(){return""+oU.apply(this)+Ph(this.minutes(),2)});ur("hmmss",0,0,function(){return""+oU.apply(this)+Ph(this.minutes(),2)+Ph(this.seconds(),2)});ur("Hmm",0,0,function(){return""+this.hours()+Ph(this.minutes(),2)});ur("Hmmss",0,0,function(){return""+this.hours()+Ph(this.minutes(),2)+Ph(this.seconds(),2)});function Eoe(t,e){ur(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}Eoe("a",!0);Eoe("A",!1);bl("hour","h");wl("hour",13);function Toe(t,e){return e._meridiemParse}Gn("a",Toe);Gn("A",Toe);Gn("H",Eo);Gn("h",Eo);Gn("k",Eo);Gn("HH",Eo,Su);Gn("hh",Eo,Su);Gn("kk",Eo,Su);Gn("hmm",moe);Gn("hmmss",goe);Gn("Hmm",moe);Gn("Hmmss",goe);eo(["H","HH"],ea);eo(["k","kk"],function(t,e,n){var r=qr(t);e[ea]=r===24?0:r});eo(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t});eo(["h","hh"],function(t,e,n){e[ea]=qr(t),Br(n).bigHour=!0});eo("hmm",function(t,e,n){var r=t.length-2;e[ea]=qr(t.substr(0,r)),e[lf]=qr(t.substr(r)),Br(n).bigHour=!0});eo("hmmss",function(t,e,n){var r=t.length-4,i=t.length-2;e[ea]=qr(t.substr(0,r)),e[lf]=qr(t.substr(r,2)),e[Cp]=qr(t.substr(i)),Br(n).bigHour=!0});eo("Hmm",function(t,e,n){var r=t.length-2;e[ea]=qr(t.substr(0,r)),e[lf]=qr(t.substr(r))});eo("Hmmss",function(t,e,n){var r=t.length-4,i=t.length-2;e[ea]=qr(t.substr(0,r)),e[lf]=qr(t.substr(r,2)),e[Cp]=qr(t.substr(i))});function MFe(t){return(t+"").toLowerCase().charAt(0)==="p"}var EFe=/[ap]\.?m?\.?/i,TFe=S1("Hours",!0);function CFe(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}var Coe={calendar:gze,longDateFormat:_ze,invalidDate:wze,ordinal:Mze,dayOfMonthOrdinalParse:Eze,relativeTime:Cze,months:jze,monthsShort:yoe,week:eFe,weekdays:aFe,weekdaysMin:lFe,weekdaysShort:Moe,meridiemParse:EFe},Po={},Bw={},zM;function AFe(t,e){var n,r=Math.min(t.length,e.length);for(n=0;n<r;n+=1)if(t[n]!==e[n])return n;return r}function c7(t){return t&&t.toLowerCase().replace("_","-")}function PFe(t){for(var e=0,n,r,i,o;e<t.length;){for(o=c7(t[e]).split("-"),n=o.length,r=c7(t[e+1]),r=r?r.split("-"):null;n>0;){if(i=UR(o.slice(0,n).join("-")),i)return i;if(r&&r.length>=n&&AFe(o,r)>=n-1)break;n--}e++}return zM}function kFe(t){return t.match("^[^/\\\\]*$")!=null}function UR(t){var e=null,n;if(Po[t]===void 0&&typeof XA<"u"&&XA&&XA.exports&&kFe(t))try{e=zM._abbr,n=require,n("./locale/"+t),Xg(e)}catch{Po[t]=null}return Po[t]}function Xg(t,e){var n;return t&&(yc(e)?n=sm(t):n=sU(t,e),n?zM=n:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),zM._abbr}function sU(t,e){if(e!==null){var n,r=Coe;if(e.abbr=t,Po[t]!=null)coe("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=Po[t]._config;else if(e.parentLocale!=null)if(Po[e.parentLocale]!=null)r=Po[e.parentLocale]._config;else if(n=UR(e.parentLocale),n!=null)r=n._config;else return Bw[e.parentLocale]||(Bw[e.parentLocale]=[]),Bw[e.parentLocale].push({name:t,config:e}),null;return Po[t]=new Jj(jF(r,e)),Bw[t]&&Bw[t].forEach(function(i){sU(i.name,i.config)}),Xg(t),Po[t]}else return delete Po[t],null}function IFe(t,e){if(e!=null){var n,r,i=Coe;Po[t]!=null&&Po[t].parentLocale!=null?Po[t].set(jF(Po[t]._config,e)):(r=UR(t),r!=null&&(i=r._config),e=jF(i,e),r==null&&(e.abbr=t),n=new Jj(e),n.parentLocale=Po[t],Po[t]=n),Xg(t)}else Po[t]!=null&&(Po[t].parentLocale!=null?(Po[t]=Po[t].parentLocale,t===Xg()&&Xg(t)):Po[t]!=null&&delete Po[t]);return Po[t]}function sm(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return zM;if(!pf(t)){if(e=UR(t),e)return e;t=[t]}return PFe(t)}function RFe(){return UF(Po)}function aU(t){var e,n=t._a;return n&&Br(t).overflow===-2&&(e=n[Tp]<0||n[Tp]>11?Tp:n[ch]<1||n[ch]>jR(n[vl],n[Tp])?ch:n[ea]<0||n[ea]>24||n[ea]===24&&(n[lf]!==0||n[Cp]!==0||n[Jv]!==0)?ea:n[lf]<0||n[lf]>59?lf:n[Cp]<0||n[Cp]>59?Cp:n[Jv]<0||n[Jv]>999?Jv:-1,Br(t)._overflowDayOfYear&&(e<vl||e>ch)&&(e=ch),Br(t)._overflowWeeks&&e===-1&&(e=Fze),Br(t)._overflowWeekday&&e===-1&&(e=Bze),Br(t).overflow=e),t}var OFe=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,LFe=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,DFe=/Z|[+-]\d\d(?::?\d\d)?/,eC=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],_3=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],NFe=/^\/?Date\((-?\d+)/i,zFe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,FFe={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Aoe(t){var e,n,r=t._i,i=OFe.exec(r)||LFe.exec(r),o,a,s,l,c=eC.length,h=_3.length;if(i){for(Br(t).iso=!0,e=0,n=c;e<n;e++)if(eC[e][1].exec(i[1])){a=eC[e][0],o=eC[e][2]!==!1;break}if(a==null){t._isValid=!1;return}if(i[3]){for(e=0,n=h;e<n;e++)if(_3[e][1].exec(i[3])){s=(i[2]||" ")+_3[e][0];break}if(s==null){t._isValid=!1;return}}if(!o&&s!=null){t._isValid=!1;return}if(i[4])if(DFe.exec(i[4]))l="Z";else{t._isValid=!1;return}t._f=a+(s||"")+(l||""),cU(t)}else t._isValid=!1}function BFe(t,e,n,r,i,o){var a=[$Fe(t),yoe.indexOf(e),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return o&&a.push(parseInt(o,10)),a}function $Fe(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function jFe(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function UFe(t,e,n){if(t){var r=Moe.indexOf(t),i=new Date(e[0],e[1],e[2]).getDay();if(r!==i)return Br(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function VFe(t,e,n){if(t)return FFe[t];if(e)return 0;var r=parseInt(n,10),i=r%100,o=(r-i)/100;return o*60+i}function Poe(t){var e=zFe.exec(jFe(t._i)),n;if(e){if(n=BFe(e[4],e[3],e[2],e[5],e[6],e[7]),!UFe(e[1],n,t))return;t._a=n,t._tzm=VFe(e[8],e[9],e[10]),t._d=DM.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),Br(t).rfc2822=!0}else t._isValid=!1}function WFe(t){var e=NFe.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(Aoe(t),t._isValid===!1)delete t._isValid;else return;if(Poe(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:Ln.createFromInputFallback(t)}Ln.createFromInputFallback=_d("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function i_(t,e,n){return t??e??n}function HFe(t){var e=new Date(Ln.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function lU(t){var e,n,r=[],i,o,a;if(!t._d){for(i=HFe(t),t._w&&t._a[ch]==null&&t._a[Tp]==null&&GFe(t),t._dayOfYear!=null&&(a=i_(t._a[vl],i[vl]),(t._dayOfYear>VS(a)||t._dayOfYear===0)&&(Br(t)._overflowDayOfYear=!0),n=DM(a,0,t._dayOfYear),t._a[Tp]=n.getUTCMonth(),t._a[ch]=n.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=r[e]=i[e];for(;e<7;e++)t._a[e]=r[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[ea]===24&&t._a[lf]===0&&t._a[Cp]===0&&t._a[Jv]===0&&(t._nextDay=!0,t._a[ea]=0),t._d=(t._useUTC?DM:Jze).apply(null,r),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[ea]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==o&&(Br(t).weekdayMismatch=!0)}}function GFe(t){var e,n,r,i,o,a,s,l,c;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(o=1,a=4,n=i_(e.GG,t._a[vl],NM(Mo(),1,4).year),r=i_(e.W,1),i=i_(e.E,1),(i<1||i>7)&&(l=!0)):(o=t._locale._week.dow,a=t._locale._week.doy,c=NM(Mo(),o,a),n=i_(e.gg,t._a[vl],c.year),r=i_(e.w,c.week),e.d!=null?(i=e.d,(i<0||i>6)&&(l=!0)):e.e!=null?(i=e.e+o,(e.e<0||e.e>6)&&(l=!0)):i=o),r<1||r>Dp(n,o,a)?Br(t)._overflowWeeks=!0:l!=null?Br(t)._overflowWeekday=!0:(s=Soe(n,r,i,o,a),t._a[vl]=s.year,t._dayOfYear=s.dayOfYear)}Ln.ISO_8601=function(){};Ln.RFC_2822=function(){};function cU(t){if(t._f===Ln.ISO_8601){Aoe(t);return}if(t._f===Ln.RFC_2822){Poe(t);return}t._a=[],Br(t).empty=!0;var e=""+t._i,n,r,i,o,a,s=e.length,l=0,c,h;for(i=uoe(t._f,t._locale).match(Qj)||[],h=i.length,n=0;n<h;n++)o=i[n],r=(e.match(Dze(o,t))||[])[0],r&&(a=e.substr(0,e.indexOf(r)),a.length>0&&Br(t).unusedInput.push(a),e=e.slice(e.indexOf(r)+r.length),l+=r.length),J_[o]?(r?Br(t).empty=!1:Br(t).unusedTokens.push(o),zze(o,r,t)):t._strict&&!r&&Br(t).unusedTokens.push(o);Br(t).charsLeftOver=s-l,e.length>0&&Br(t).unusedInput.push(e),t._a[ea]<=12&&Br(t).bigHour===!0&&t._a[ea]>0&&(Br(t).bigHour=void 0),Br(t).parsedDateParts=t._a.slice(0),Br(t).meridiem=t._meridiem,t._a[ea]=qFe(t._locale,t._a[ea],t._meridiem),c=Br(t).era,c!==null&&(t._a[vl]=t._locale.erasConvertYear(c,t._a[vl])),lU(t),aU(t)}function qFe(t,e,n){var r;return n==null?e:t.meridiemHour!=null?t.meridiemHour(e,n):(t.isPM!=null&&(r=t.isPM(n),r&&e<12&&(e+=12),!r&&e===12&&(e=0)),e)}function YFe(t){var e,n,r,i,o,a,s=!1,l=t._f.length;if(l===0){Br(t).invalidFormat=!0,t._d=new Date(NaN);return}for(i=0;i<l;i++)o=0,a=!1,e=Zj({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[i],cU(e),Kj(e)&&(a=!0),o+=Br(e).charsLeftOver,o+=Br(e).unusedTokens.length*10,Br(e).score=o,s?o<r&&(r=o,n=e):(r==null||o<r||a)&&(r=o,n=e,a&&(s=!0));Og(t,n||e)}function XFe(t){if(!t._d){var e=eU(t._i),n=e.day===void 0?e.date:e.day;t._a=aoe([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],function(r){return r&&parseInt(r,10)}),lU(t)}}function KFe(t){var e=new wE(aU(koe(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function koe(t){var e=t._i,n=t._f;return t._locale=t._locale||sm(t._l),e===null||n===void 0&&e===""?LR({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),mf(e)?new wE(aU(e)):(bE(e)?t._d=e:pf(n)?YFe(t):n?cU(t):ZFe(t),Kj(t)||(t._d=null),t))}function ZFe(t){var e=t._i;yc(e)?t._d=new Date(Ln.now()):bE(e)?t._d=new Date(e.valueOf()):typeof e=="string"?WFe(t):pf(e)?(t._a=aoe(e.slice(0),function(n){return parseInt(n,10)}),lU(t)):p0(e)?XFe(t):Yp(e)?t._d=new Date(e):Ln.createFromInputFallback(t)}function Ioe(t,e,n,r,i){var o={};return(e===!0||e===!1)&&(r=e,e=void 0),(n===!0||n===!1)&&(r=n,n=void 0),(p0(t)&&Xj(t)||pf(t)&&t.length===0)&&(t=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=i,o._l=n,o._i=t,o._f=e,o._strict=r,KFe(o)}function Mo(t,e,n,r){return Ioe(t,e,n,r,!1)}var JFe=_d("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Mo.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:LR()}),QFe=_d("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Mo.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:LR()});function Roe(t,e){var n,r;if(e.length===1&&pf(e[0])&&(e=e[0]),!e.length)return Mo();for(n=e[0],r=1;r<e.length;++r)(!e[r].isValid()||e[r][t](n))&&(n=e[r]);return n}function eBe(){var t=[].slice.call(arguments,0);return Roe("isBefore",t)}function tBe(){var t=[].slice.call(arguments,0);return Roe("isAfter",t)}var nBe=function(){return Date.now?Date.now():+new Date},$w=["year","quarter","month","week","day","hour","minute","second","millisecond"];function rBe(t){var e,n=!1,r,i=$w.length;for(e in t)if(yi(t,e)&&!(vs.call($w,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(r=0;r<i;++r)if(t[$w[r]]){if(n)return!1;parseFloat(t[$w[r]])!==qr(t[$w[r]])&&(n=!0)}return!0}function iBe(){return this._isValid}function oBe(){return xf(NaN)}function VR(t){var e=eU(t),n=e.year||0,r=e.quarter||0,i=e.month||0,o=e.week||e.isoWeek||0,a=e.day||0,s=e.hour||0,l=e.minute||0,c=e.second||0,h=e.millisecond||0;this._isValid=rBe(e),this._milliseconds=+h+c*1e3+l*6e4+s*1e3*60*60,this._days=+a+o*7,this._months=+i+r*3+n*12,this._data={},this._locale=sm(),this._bubble()}function zA(t){return t instanceof VR}function WF(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function sBe(t,e,n){var r=Math.min(t.length,e.length),i=Math.abs(t.length-e.length),o=0,a;for(a=0;a<r;a++)(n&&t[a]!==e[a]||!n&&qr(t[a])!==qr(e[a]))&&o++;return o+i}function Ooe(t,e){ur(t,0,0,function(){var n=this.utcOffset(),r="+";return n<0&&(n=-n,r="-"),r+Ph(~~(n/60),2)+e+Ph(~~n%60,2)})}Ooe("Z",":");Ooe("ZZ","");Gn("Z",$R);Gn("ZZ",$R);eo(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=uU($R,t)});var aBe=/([\+\-]|\d\d)/gi;function uU(t,e){var n=(e||"").match(t),r,i,o;return n===null?null:(r=n[n.length-1]||[],i=(r+"").match(aBe)||["-",0,0],o=+(i[1]*60)+qr(i[2]),o===0?0:i[0]==="+"?o:-o)}function dU(t,e){var n,r;return e._isUTC?(n=e.clone(),r=(mf(t)||bE(t)?t.valueOf():Mo(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),Ln.updateOffset(n,!1),n):Mo(t).local()}function HF(t){return-Math.round(t._d.getTimezoneOffset())}Ln.updateOffset=function(){};function lBe(t,e,n){var r=this._offset||0,i;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=uU($R,t),t===null)return this}else Math.abs(t)<16&&!n&&(t=t*60);return!this._isUTC&&e&&(i=HF(this)),this._offset=t,this._isUTC=!0,i!=null&&this.add(i,"m"),r!==t&&(!e||this._changeInProgress?Noe(this,xf(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Ln.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:HF(this)}function cBe(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function uBe(t){return this.utcOffset(0,t)}function dBe(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(HF(this),"m")),this}function fBe(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=uU(Oze,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function hBe(t){return this.isValid()?(t=t?Mo(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function pBe(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function mBe(){if(!yc(this._isDSTShifted))return this._isDSTShifted;var t={},e;return Zj(t,this),t=koe(t),t._a?(e=t._isUTC?Lh(t._a):Mo(t._a),this._isDSTShifted=this.isValid()&&sBe(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function gBe(){return this.isValid()?!this._isUTC:!1}function yBe(){return this.isValid()?this._isUTC:!1}function Loe(){return this.isValid()?this._isUTC&&this._offset===0:!1}var vBe=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,xBe=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function xf(t,e){var n=t,r=null,i,o,a;return zA(t)?n={ms:t._milliseconds,d:t._days,M:t._months}:Yp(t)||!isNaN(+t)?(n={},e?n[e]=+t:n.milliseconds=+t):(r=vBe.exec(t))?(i=r[1]==="-"?-1:1,n={y:0,d:qr(r[ch])*i,h:qr(r[ea])*i,m:qr(r[lf])*i,s:qr(r[Cp])*i,ms:qr(WF(r[Jv]*1e3))*i}):(r=xBe.exec(t))?(i=r[1]==="-"?-1:1,n={y:mv(r[2],i),M:mv(r[3],i),w:mv(r[4],i),d:mv(r[5],i),h:mv(r[6],i),m:mv(r[7],i),s:mv(r[8],i)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(a=_Be(Mo(n.from),Mo(n.to)),n={},n.ms=a.milliseconds,n.M=a.months),o=new VR(n),zA(t)&&yi(t,"_locale")&&(o._locale=t._locale),zA(t)&&yi(t,"_isValid")&&(o._isValid=t._isValid),o}xf.fn=VR.prototype;xf.invalid=oBe;function mv(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function u7(t,e){var n={};return n.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function _Be(t,e){var n;return t.isValid()&&e.isValid()?(e=dU(e,t),t.isBefore(e)?n=u7(t,e):(n=u7(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Doe(t,e){return function(n,r){var i,o;return r!==null&&!isNaN(+r)&&(coe(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=r,r=o),i=xf(n,r),Noe(this,i,t),this}}function Noe(t,e,n,r){var i=e._milliseconds,o=WF(e._days),a=WF(e._months);t.isValid()&&(r=r??!0,a&&xoe(t,XP(t,"Month")+a*n),o&&foe(t,"Date",XP(t,"Date")+o*n),i&&t._d.setTime(t._d.valueOf()+i*n),r&&Ln.updateOffset(t,o||a))}var bBe=Doe(1,"add"),wBe=Doe(-1,"subtract");function zoe(t){return typeof t=="string"||t instanceof String}function SBe(t){return mf(t)||bE(t)||zoe(t)||Yp(t)||EBe(t)||MBe(t)||t===null||t===void 0}function MBe(t){var e=p0(t)&&!Xj(t),n=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,o,a=r.length;for(i=0;i<a;i+=1)o=r[i],n=n||yi(t,o);return e&&n}function EBe(t){var e=pf(t),n=!1;return e&&(n=t.filter(function(r){return!Yp(r)&&zoe(t)}).length===0),e&&n}function TBe(t){var e=p0(t)&&!Xj(t),n=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,o;for(i=0;i<r.length;i+=1)o=r[i],n=n||yi(t,o);return e&&n}function CBe(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function ABe(t,e){arguments.length===1&&(arguments[0]?SBe(arguments[0])?(t=arguments[0],e=void 0):TBe(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||Mo(),r=dU(n,this).startOf("day"),i=Ln.calendarFormat(this,r)||"sameElse",o=e&&(Dh(e[i])?e[i].call(this,n):e[i]);return this.format(o||this.localeData().calendar(i,this,Mo(n)))}function PBe(){return new wE(this)}function kBe(t,e){var n=mf(t)?t:Mo(t);return this.isValid()&&n.isValid()?(e=bd(e)||"millisecond",e==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf()):!1}function IBe(t,e){var n=mf(t)?t:Mo(t);return this.isValid()&&n.isValid()?(e=bd(e)||"millisecond",e==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf()):!1}function RBe(t,e,n,r){var i=mf(t)?t:Mo(t),o=mf(e)?e:Mo(e);return this.isValid()&&i.isValid()&&o.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(i,n):!this.isBefore(i,n))&&(r[1]===")"?this.isBefore(o,n):!this.isAfter(o,n))):!1}function OBe(t,e){var n=mf(t)?t:Mo(t),r;return this.isValid()&&n.isValid()?(e=bd(e)||"millisecond",e==="millisecond"?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(e).valueOf()<=r&&r<=this.clone().endOf(e).valueOf())):!1}function LBe(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function DBe(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function NBe(t,e,n){var r,i,o;if(!this.isValid())return NaN;if(r=dU(t,this),!r.isValid())return NaN;switch(i=(r.utcOffset()-this.utcOffset())*6e4,e=bd(e),e){case"year":o=FA(this,r)/12;break;case"month":o=FA(this,r);break;case"quarter":o=FA(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:Qu(o)}function FA(t,e){if(t.date()<e.date())return-FA(e,t);var n=(e.year()-t.year())*12+(e.month()-t.month()),r=t.clone().add(n,"months"),i,o;return e-r<0?(i=t.clone().add(n-1,"months"),o=(e-r)/(r-i)):(i=t.clone().add(n+1,"months"),o=(e-r)/(i-r)),-(n+o)||0}Ln.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";Ln.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function zBe(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function FBe(t){if(!this.isValid())return null;var e=t!==!0,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?NA(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Dh(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",NA(n,"Z")):NA(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function BBe(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",n,r,i,o;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),n="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",o=e+'[")]',this.format(n+r+i+o)}function $Be(t){t||(t=this.isUtc()?Ln.defaultFormatUtc:Ln.defaultFormat);var e=NA(this,t);return this.localeData().postformat(e)}function jBe(t,e){return this.isValid()&&(mf(t)&&t.isValid()||Mo(t).isValid())?xf({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function UBe(t){return this.from(Mo(),t)}function VBe(t,e){return this.isValid()&&(mf(t)&&t.isValid()||Mo(t).isValid())?xf({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function WBe(t){return this.to(Mo(),t)}function Foe(t){var e;return t===void 0?this._locale._abbr:(e=sm(t),e!=null&&(this._locale=e),this)}var Boe=_d("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function $oe(){return this._locale}var JP=1e3,Q_=60*JP,QP=60*Q_,joe=(365*400+97)*24*QP;function eb(t,e){return(t%e+e)%e}function Uoe(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-joe:new Date(t,e,n).valueOf()}function Voe(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-joe:Date.UTC(t,e,n)}function HBe(t){var e,n;if(t=bd(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?Voe:Uoe,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=eb(e+(this._isUTC?0:this.utcOffset()*Q_),QP);break;case"minute":e=this._d.valueOf(),e-=eb(e,Q_);break;case"second":e=this._d.valueOf(),e-=eb(e,JP);break}return this._d.setTime(e),Ln.updateOffset(this,!0),this}function GBe(t){var e,n;if(t=bd(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?Voe:Uoe,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=QP-eb(e+(this._isUTC?0:this.utcOffset()*Q_),QP)-1;break;case"minute":e=this._d.valueOf(),e+=Q_-eb(e,Q_)-1;break;case"second":e=this._d.valueOf(),e+=JP-eb(e,JP)-1;break}return this._d.setTime(e),Ln.updateOffset(this,!0),this}function qBe(){return this._d.valueOf()-(this._offset||0)*6e4}function YBe(){return Math.floor(this.valueOf()/1e3)}function XBe(){return new Date(this.valueOf())}function KBe(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function ZBe(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function JBe(){return this.isValid()?this.toISOString():null}function QBe(){return Kj(this)}function e4e(){return Og({},Br(this))}function t4e(){return Br(this).overflow}function n4e(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}ur("N",0,0,"eraAbbr");ur("NN",0,0,"eraAbbr");ur("NNN",0,0,"eraAbbr");ur("NNNN",0,0,"eraName");ur("NNNNN",0,0,"eraNarrow");ur("y",["y",1],"yo","eraYear");ur("y",["yy",2],0,"eraYear");ur("y",["yyy",3],0,"eraYear");ur("y",["yyyy",4],0,"eraYear");Gn("N",fU);Gn("NN",fU);Gn("NNN",fU);Gn("NNNN",h4e);Gn("NNNNN",p4e);eo(["N","NN","NNN","NNNN","NNNNN"],function(t,e,n,r){var i=n._locale.erasParse(t,r,n._strict);i?Br(n).era=i:Br(n).invalidEra=t});Gn("y",M1);Gn("yy",M1);Gn("yyy",M1);Gn("yyyy",M1);Gn("yo",m4e);eo(["y","yy","yyy","yyyy"],vl);eo(["yo"],function(t,e,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[vl]=n._locale.eraYearOrdinalParse(t,i):e[vl]=parseInt(t,10)});function r4e(t,e){var n,r,i,o=this._eras||sm("en")._eras;for(n=0,r=o.length;n<r;++n){switch(typeof o[n].since){case"string":i=Ln(o[n].since).startOf("day"),o[n].since=i.valueOf();break}switch(typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":i=Ln(o[n].until).startOf("day").valueOf(),o[n].until=i.valueOf();break}}return o}function i4e(t,e,n){var r,i,o=this.eras(),a,s,l;for(t=t.toUpperCase(),r=0,i=o.length;r<i;++r)if(a=o[r].name.toUpperCase(),s=o[r].abbr.toUpperCase(),l=o[r].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(s===t)return o[r];break;case"NNNN":if(a===t)return o[r];break;case"NNNNN":if(l===t)return o[r];break}else if([a,s,l].indexOf(t)>=0)return o[r]}function o4e(t,e){var n=t.since<=t.until?1:-1;return e===void 0?Ln(t.since).year():Ln(t.since).year()+(e-t.offset)*n}function s4e(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].name;return""}function a4e(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].narrow;return""}function l4e(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].abbr;return""}function c4e(){var t,e,n,r,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=i[t].since<=i[t].until?1:-1,r=this.clone().startOf("day").valueOf(),i[t].since<=r&&r<=i[t].until||i[t].until<=r&&r<=i[t].since)return(this.year()-Ln(i[t].since).year())*n+i[t].offset;return this.year()}function u4e(t){return yi(this,"_erasNameRegex")||hU.call(this),t?this._erasNameRegex:this._erasRegex}function d4e(t){return yi(this,"_erasAbbrRegex")||hU.call(this),t?this._erasAbbrRegex:this._erasRegex}function f4e(t){return yi(this,"_erasNarrowRegex")||hU.call(this),t?this._erasNarrowRegex:this._erasRegex}function fU(t,e){return e.erasAbbrRegex(t)}function h4e(t,e){return e.erasNameRegex(t)}function p4e(t,e){return e.erasNarrowRegex(t)}function m4e(t,e){return e._eraYearOrdinalRegex||M1}function hU(){var t=[],e=[],n=[],r=[],i,o,a=this.eras();for(i=0,o=a.length;i<o;++i)e.push(Jc(a[i].name)),t.push(Jc(a[i].abbr)),n.push(Jc(a[i].narrow)),r.push(Jc(a[i].name)),r.push(Jc(a[i].abbr)),r.push(Jc(a[i].narrow));this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}ur(0,["gg",2],0,function(){return this.weekYear()%100});ur(0,["GG",2],0,function(){return this.isoWeekYear()%100});function WR(t,e){ur(0,[t,t.length],0,e)}WR("gggg","weekYear");WR("ggggg","weekYear");WR("GGGG","isoWeekYear");WR("GGGGG","isoWeekYear");bl("weekYear","gg");bl("isoWeekYear","GG");wl("weekYear",1);wl("isoWeekYear",1);Gn("G",BR);Gn("g",BR);Gn("GG",Eo,Su);Gn("gg",Eo,Su);Gn("GGGG",nU,tU);Gn("gggg",nU,tU);Gn("GGGGG",FR,NR);Gn("ggggg",FR,NR);ME(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,r){e[r.substr(0,2)]=qr(t)});ME(["gg","GG"],function(t,e,n,r){e[r]=Ln.parseTwoDigitYear(t)});function g4e(t){return Woe.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function y4e(t){return Woe.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function v4e(){return Dp(this.year(),1,4)}function x4e(){return Dp(this.isoWeekYear(),1,4)}function _4e(){var t=this.localeData()._week;return Dp(this.year(),t.dow,t.doy)}function b4e(){var t=this.localeData()._week;return Dp(this.weekYear(),t.dow,t.doy)}function Woe(t,e,n,r,i){var o;return t==null?NM(this,r,i).year:(o=Dp(t,r,i),e>o&&(e=o),w4e.call(this,t,e,n,r,i))}function w4e(t,e,n,r,i){var o=Soe(t,e,n,r,i),a=DM(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}ur("Q",0,"Qo","quarter");bl("quarter","Q");wl("quarter",7);Gn("Q",hoe);eo("Q",function(t,e){e[Tp]=(qr(t)-1)*3});function S4e(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}ur("D",["DD",2],"Do","date");bl("date","D");wl("date",9);Gn("D",Eo);Gn("DD",Eo,Su);Gn("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});eo(["D","DD"],ch);eo("Do",function(t,e){e[ch]=qr(t.match(Eo)[0])});var Hoe=S1("Date",!0);ur("DDD",["DDDD",3],"DDDo","dayOfYear");bl("dayOfYear","DDD");wl("dayOfYear",4);Gn("DDD",zR);Gn("DDDD",poe);eo(["DDD","DDDD"],function(t,e,n){n._dayOfYear=qr(t)});function M4e(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}ur("m",["mm",2],0,"minute");bl("minute","m");wl("minute",14);Gn("m",Eo);Gn("mm",Eo,Su);eo(["m","mm"],lf);var E4e=S1("Minutes",!1);ur("s",["ss",2],0,"second");bl("second","s");wl("second",15);Gn("s",Eo);Gn("ss",Eo,Su);eo(["s","ss"],Cp);var T4e=S1("Seconds",!1);ur("S",0,0,function(){return~~(this.millisecond()/100)});ur(0,["SS",2],0,function(){return~~(this.millisecond()/10)});ur(0,["SSS",3],0,"millisecond");ur(0,["SSSS",4],0,function(){return this.millisecond()*10});ur(0,["SSSSS",5],0,function(){return this.millisecond()*100});ur(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});ur(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});ur(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});ur(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});bl("millisecond","ms");wl("millisecond",16);Gn("S",zR,hoe);Gn("SS",zR,Su);Gn("SSS",zR,poe);var Lg,Goe;for(Lg="SSSS";Lg.length<=9;Lg+="S")Gn(Lg,M1);function C4e(t,e){e[Jv]=qr(("0."+t)*1e3)}for(Lg="S";Lg.length<=9;Lg+="S")eo(Lg,C4e);Goe=S1("Milliseconds",!1);ur("z",0,0,"zoneAbbr");ur("zz",0,0,"zoneName");function A4e(){return this._isUTC?"UTC":""}function P4e(){return this._isUTC?"Coordinated Universal Time":""}var gn=wE.prototype;gn.add=bBe;gn.calendar=ABe;gn.clone=PBe;gn.diff=NBe;gn.endOf=GBe;gn.format=$Be;gn.from=jBe;gn.fromNow=UBe;gn.to=VBe;gn.toNow=WBe;gn.get=Ize;gn.invalidAt=t4e;gn.isAfter=kBe;gn.isBefore=IBe;gn.isBetween=RBe;gn.isSame=OBe;gn.isSameOrAfter=LBe;gn.isSameOrBefore=DBe;gn.isValid=QBe;gn.lang=Boe;gn.locale=Foe;gn.localeData=$oe;gn.max=QFe;gn.min=JFe;gn.parsingFlags=e4e;gn.set=Rze;gn.startOf=HBe;gn.subtract=wBe;gn.toArray=KBe;gn.toObject=ZBe;gn.toDate=XBe;gn.toISOString=FBe;gn.inspect=BBe;typeof Symbol<"u"&&Symbol.for!=null&&(gn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});gn.toJSON=JBe;gn.toString=zBe;gn.unix=YBe;gn.valueOf=qBe;gn.creationData=n4e;gn.eraName=s4e;gn.eraNarrow=a4e;gn.eraAbbr=l4e;gn.eraYear=c4e;gn.year=woe;gn.isLeapYear=Zze;gn.weekYear=g4e;gn.isoWeekYear=y4e;gn.quarter=gn.quarters=S4e;gn.month=_oe;gn.daysInMonth=Yze;gn.week=gn.weeks=rFe;gn.isoWeek=gn.isoWeeks=iFe;gn.weeksInYear=_4e;gn.weeksInWeekYear=b4e;gn.isoWeeksInYear=v4e;gn.isoWeeksInISOWeekYear=x4e;gn.date=Hoe;gn.day=gn.days=yFe;gn.weekday=vFe;gn.isoWeekday=xFe;gn.dayOfYear=M4e;gn.hour=gn.hours=TFe;gn.minute=gn.minutes=E4e;gn.second=gn.seconds=T4e;gn.millisecond=gn.milliseconds=Goe;gn.utcOffset=lBe;gn.utc=uBe;gn.local=dBe;gn.parseZone=fBe;gn.hasAlignedHourOffset=hBe;gn.isDST=pBe;gn.isLocal=gBe;gn.isUtcOffset=yBe;gn.isUtc=Loe;gn.isUTC=Loe;gn.zoneAbbr=A4e;gn.zoneName=P4e;gn.dates=_d("dates accessor is deprecated. Use date instead.",Hoe);gn.months=_d("months accessor is deprecated. Use month instead",_oe);gn.years=_d("years accessor is deprecated. Use year instead",woe);gn.zone=_d("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",cBe);gn.isDSTShifted=_d("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",mBe);function k4e(t){return Mo(t*1e3)}function I4e(){return Mo.apply(null,arguments).parseZone()}function qoe(t){return t}var wi=Jj.prototype;wi.calendar=yze;wi.longDateFormat=bze;wi.invalidDate=Sze;wi.ordinal=Tze;wi.preparse=qoe;wi.postformat=qoe;wi.relativeTime=Aze;wi.pastFuture=Pze;wi.set=mze;wi.eras=r4e;wi.erasParse=i4e;wi.erasConvertYear=o4e;wi.erasAbbrRegex=d4e;wi.erasNameRegex=u4e;wi.erasNarrowRegex=f4e;wi.months=Wze;wi.monthsShort=Hze;wi.monthsParse=qze;wi.monthsRegex=Kze;wi.monthsShortRegex=Xze;wi.week=Qze;wi.firstDayOfYear=nFe;wi.firstDayOfWeek=tFe;wi.weekdays=fFe;wi.weekdaysMin=pFe;wi.weekdaysShort=hFe;wi.weekdaysParse=gFe;wi.weekdaysRegex=_Fe;wi.weekdaysShortRegex=bFe;wi.weekdaysMinRegex=wFe;wi.isPM=MFe;wi.meridiem=CFe;function ek(t,e,n,r){var i=sm(),o=Lh().set(r,e);return i[n](o,t)}function Yoe(t,e,n){if(Yp(t)&&(e=t,t=void 0),t=t||"",e!=null)return ek(t,e,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=ek(t,r,n,"month");return i}function pU(t,e,n,r){typeof t=="boolean"?(Yp(e)&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,Yp(e)&&(n=e,e=void 0),e=e||"");var i=sm(),o=t?i._week.dow:0,a,s=[];if(n!=null)return ek(e,(n+o)%7,r,"day");for(a=0;a<7;a++)s[a]=ek(e,(a+o)%7,r,"day");return s}function R4e(t,e){return Yoe(t,e,"months")}function O4e(t,e){return Yoe(t,e,"monthsShort")}function L4e(t,e,n){return pU(t,e,n,"weekdays")}function D4e(t,e,n){return pU(t,e,n,"weekdaysShort")}function N4e(t,e,n){return pU(t,e,n,"weekdaysMin")}Xg("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=qr(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+n}});Ln.lang=_d("moment.lang is deprecated. Use moment.locale instead.",Xg);Ln.langData=_d("moment.langData is deprecated. Use moment.localeData instead.",sm);var lp=Math.abs;function z4e(){var t=this._data;return this._milliseconds=lp(this._milliseconds),this._days=lp(this._days),this._months=lp(this._months),t.milliseconds=lp(t.milliseconds),t.seconds=lp(t.seconds),t.minutes=lp(t.minutes),t.hours=lp(t.hours),t.months=lp(t.months),t.years=lp(t.years),this}function Xoe(t,e,n,r){var i=xf(e,n);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function F4e(t,e){return Xoe(this,t,e,1)}function B4e(t,e){return Xoe(this,t,e,-1)}function d7(t){return t<0?Math.floor(t):Math.ceil(t)}function $4e(){var t=this._milliseconds,e=this._days,n=this._months,r=this._data,i,o,a,s,l;return t>=0&&e>=0&&n>=0||t<=0&&e<=0&&n<=0||(t+=d7(GF(n)+e)*864e5,e=0,n=0),r.milliseconds=t%1e3,i=Qu(t/1e3),r.seconds=i%60,o=Qu(i/60),r.minutes=o%60,a=Qu(o/60),r.hours=a%24,e+=Qu(a/24),l=Qu(Koe(e)),n+=l,e-=d7(GF(l)),s=Qu(n/12),n%=12,r.days=e,r.months=n,r.years=s,this}function Koe(t){return t*4800/146097}function GF(t){return t*146097/4800}function j4e(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if(t=bd(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+r/864e5,n=this._months+Koe(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(GF(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return e*24+r/36e5;case"minute":return e*1440+r/6e4;case"second":return e*86400+r/1e3;case"millisecond":return Math.floor(e*864e5)+r;default:throw new Error("Unknown unit "+t)}}function U4e(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+qr(this._months/12)*31536e6:NaN}function am(t){return function(){return this.as(t)}}var V4e=am("ms"),W4e=am("s"),H4e=am("m"),G4e=am("h"),q4e=am("d"),Y4e=am("w"),X4e=am("M"),K4e=am("Q"),Z4e=am("y");function J4e(){return xf(this)}function Q4e(t){return t=bd(t),this.isValid()?this[t+"s"]():NaN}function W0(t){return function(){return this.isValid()?this._data[t]:NaN}}var e5e=W0("milliseconds"),t5e=W0("seconds"),n5e=W0("minutes"),r5e=W0("hours"),i5e=W0("days"),o5e=W0("months"),s5e=W0("years");function a5e(){return Qu(this.days()/7)}var yp=Math.round,A_={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function l5e(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}function c5e(t,e,n,r){var i=xf(t).abs(),o=yp(i.as("s")),a=yp(i.as("m")),s=yp(i.as("h")),l=yp(i.as("d")),c=yp(i.as("M")),h=yp(i.as("w")),p=yp(i.as("y")),g=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||a<=1&&["m"]||a<n.m&&["mm",a]||s<=1&&["h"]||s<n.h&&["hh",s]||l<=1&&["d"]||l<n.d&&["dd",l];return n.w!=null&&(g=g||h<=1&&["w"]||h<n.w&&["ww",h]),g=g||c<=1&&["M"]||c<n.M&&["MM",c]||p<=1&&["y"]||["yy",p],g[2]=e,g[3]=+t>0,g[4]=r,l5e.apply(null,g)}function u5e(t){return t===void 0?yp:typeof t=="function"?(yp=t,!0):!1}function d5e(t,e){return A_[t]===void 0?!1:e===void 0?A_[t]:(A_[t]=e,t==="s"&&(A_.ss=e-1),!0)}function f5e(t,e){if(!this.isValid())return this.localeData().invalidDate();var n=!1,r=A_,i,o;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(n=t),typeof e=="object"&&(r=Object.assign({},A_,e),e.s!=null&&e.ss==null&&(r.ss=e.s-1)),i=this.localeData(),o=c5e(this,!n,r,i),n&&(o=i.pastFuture(+this,o)),i.postformat(o)}var b3=Math.abs;function kx(t){return(t>0)-(t<0)||+t}function HR(){if(!this.isValid())return this.localeData().invalidDate();var t=b3(this._milliseconds)/1e3,e=b3(this._days),n=b3(this._months),r,i,o,a,s=this.asSeconds(),l,c,h,p;return s?(r=Qu(t/60),i=Qu(r/60),t%=60,r%=60,o=Qu(n/12),n%=12,a=t?t.toFixed(3).replace(/\.?0+$/,""):"",l=s<0?"-":"",c=kx(this._months)!==kx(s)?"-":"",h=kx(this._days)!==kx(s)?"-":"",p=kx(this._milliseconds)!==kx(s)?"-":"",l+"P"+(o?c+o+"Y":"")+(n?c+n+"M":"")+(e?h+e+"D":"")+(i||r||t?"T":"")+(i?p+i+"H":"")+(r?p+r+"M":"")+(t?p+a+"S":"")):"P0D"}var ai=VR.prototype;ai.isValid=iBe;ai.abs=z4e;ai.add=F4e;ai.subtract=B4e;ai.as=j4e;ai.asMilliseconds=V4e;ai.asSeconds=W4e;ai.asMinutes=H4e;ai.asHours=G4e;ai.asDays=q4e;ai.asWeeks=Y4e;ai.asMonths=X4e;ai.asQuarters=K4e;ai.asYears=Z4e;ai.valueOf=U4e;ai._bubble=$4e;ai.clone=J4e;ai.get=Q4e;ai.milliseconds=e5e;ai.seconds=t5e;ai.minutes=n5e;ai.hours=r5e;ai.days=i5e;ai.weeks=a5e;ai.months=o5e;ai.years=s5e;ai.humanize=f5e;ai.toISOString=HR;ai.toString=HR;ai.toJSON=HR;ai.locale=Foe;ai.localeData=$oe;ai.toIsoString=_d("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",HR);ai.lang=Boe;ur("X",0,0,"unix");ur("x",0,0,"valueOf");Gn("x",BR);Gn("X",Lze);eo("X",function(t,e,n){n._d=new Date(parseFloat(t)*1e3)});eo("x",function(t,e,n){n._d=new Date(qr(t))});//! moment.js
Ln.version="2.29.4";hze(Mo);Ln.fn=gn;Ln.min=eBe;Ln.max=tBe;Ln.now=nBe;Ln.utc=Lh;Ln.unix=k4e;Ln.months=R4e;Ln.isDate=bE;Ln.locale=Xg;Ln.invalid=LR;Ln.duration=xf;Ln.isMoment=mf;Ln.weekdays=L4e;Ln.parseZone=I4e;Ln.localeData=sm;Ln.isDuration=zA;Ln.monthsShort=O4e;Ln.weekdaysMin=N4e;Ln.defineLocale=sU;Ln.updateLocale=IFe;Ln.locales=RFe;Ln.weekdaysShort=D4e;Ln.normalizeUnits=bd;Ln.relativeTimeRounding=u5e;Ln.relativeTimeThreshold=d5e;Ln.calendarFormat=CBe;Ln.prototype=gn;Ln.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const h5e=t=>{switch(t){case"kmh":return 1.852;case"mph":return 1.15078;case"kn":default:return 1}},p5e=t=>{switch(t){case"kmh":return"Km/h";case"mph":return"sharedMph";case"kn":default:return"Km/h"}},m5e=(t,e)=>t*h5e(e),g5e=t=>{switch(t){case"mi":return 621371e-9;case"nmi":return 539957e-9;case"km":default:return .001}},y5e=t=>{switch(t){case"mi":return"Mi";case"nmi":return"Nmi";case"km":default:return"Km"}},v5e=(t,e)=>t*g5e(e),x5e=t=>{switch(t){case"ft":return 3.28084;case"m":default:return 1}},_5e=t=>{switch(t){case"ft":return"sharedFeet";case"m":default:return"sharedMeters"}},b5e=(t,e)=>t*x5e(e),Zoe=(t,e)=>t+e.charAt(0).toUpperCase()+e.slice(1),Joe=t=>t?"sharedYes":"sharedNo",w5e=(t,e=1)=>Number(t.toFixed(e)),Qoe=t=>`${t}%`,ese=(t,e,n)=>{if(t){const r=Ln(t);switch(e){case"date":return r.format("YYYY-MM-DD");case"time":return r.format(n?"hh:mm:ss A":"HH:mm:ss");case"minutes":return r.format(n?"YYYY-MM-DD hh:mm A":"YYYY-MM-DD HH:mm");default:return r.format(n?"YYYY-MM-DD hh:mm:ss A":"YYYY-MM-DD HH:mm:ss")}}return""},tse=t=>t?Zoe("alarm_",t):"",S5e=t=>{const e=["↑","↗","→","↘","↓","↙","←","↖"];let n=(t+22.5)%360;return n<0&&(n+=360),t.toFixed()+e[Math.floor(n/45)]},M5e=(t,e,n)=>`${v5e(t,e).toFixed(2)} ${y5e(e)}`,E5e=(t,e,n)=>`${b5e(t,e).toFixed(2)} ${_5e(e)}`,T5e=(t,e,n)=>`${m5e(t,e).toFixed(2)} ${p5e(e)}`,C5e=(t,e)=>{const n=Math.floor(t/36e5),r=Math.floor(t%36e5/6e4);return`${n} ${e("sharedHourAbbreviation")} ${r} ${e("sharedMinuteAbbreviation")}`},f7=(t,e,n)=>{let r,i,o,a;switch(t==="latitude"?r=e>=0?"N":"S":r=e>=0?"E":"W",n){case"ddm":return e=Math.abs(e),i=Math.floor(e),o=(e-i)*60,`${i}° ${o.toFixed(6)}' ${r}`;case"dms":return e=Math.abs(e),i=Math.floor(e),o=Math.floor((e-i)*60),a=Math.round((e-i-o/60)*3600),`${i}° ${o}' ${a}" ${r}`;default:return`${e.toFixed(6)}°`}},nse=t=>{switch(t){case"online":return"positive";case"offline":return"negative";case"unknown":default:return"neutral"}},h7="data:image/svg+xml,%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%3e%3ctitle%3eEngine%3c/title%3e%3cpath%20fill='currentColor'%20d='M13.778%206.667v2.222h3.333v2.222h2.222v-2.222h3.333v-2.222h-8.889zM13.778%2013.333c-0.3%200-0.579%200.121-0.79%200.321l-1.888%201.901h-2.878c-0.611%200-1.111%200.5-1.111%201.111v6.667c0%200.611%200.5%201.111%201.111%201.111h1.888l3.056%202.033c0.178%200.122%200.39%200.189%200.612%200.189h5.556c0.244%200%200.477-0.077%200.666-0.221l4.444-3.333c0.278-0.211%200.445-0.545%200.445-0.89v-7.778c0-0.611-0.5-1.111-1.111-1.111h-10zM27.111%2014.444v6.667h2.222v-6.667h-2.222zM17.111%2015.556v3.333h2.222l-3.333%205.556v-3.333h-2.222l3.333-5.556zM2.667%2016.667v5.556h2.222v-5.556h-2.222z'%3e%3c/path%3e%3c/svg%3e",A5e=ri(t=>({icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},batteryText:{fontSize:"0.75rem",fontWeight:"normal",lineHeight:"0.875rem"},positive:{color:t.palette.colors.positive},medium:{color:t.palette.colors.medium},negative:{color:t.palette.colors.negative},neutral:{color:t.palette.colors.neutral}})),P5e={width:"25px",height:"25px",filter:"brightness(0) invert(1)"},w3={color:tf[500]},p7={color:p$[700]},S3={color:xp[500]},k5e={color:yh[500]},I5e=({data:t,index:e,style:n})=>{const r=A5e(),i=Zl(),o=t[e],a=mr(c=>c.data.positions[o.id]),s=o.name,l=()=>{let c;return o.status==="online"||!o.lastUpdate?c=o.status:c=Ln(o.lastUpdate).fromNow(),F.jsxs(Ze.Fragment,{children:[a&&a.attributes.hasOwnProperty("landed_state")&&F.jsx(Bn,{component:"span",sx:{display:"block",fontSize:10},children:a.attributes.landed_state}),F.jsx(Bn,{component:"span",style:{fontSize:12},className:r[nse(o.status)],children:c})]})};return F.jsx("div",{style:n,children:F.jsxs(aPe,{onClick:()=>i(tu.selectId(o.id)),disabled:o.disabled,children:[F.jsx(hPe,{children:F.jsx(eEe,{children:F.jsx("img",{style:P5e,src:SM[AP(o.category)],alt:""})})}),F.jsx(bPe,{primary:s,primaryTypographyProps:{noWrap:!0},secondary:l(),secondaryTypographyProps:{noWrap:!0}}),a&&F.jsxs(F.Fragment,{children:[a.attributes.hasOwnProperty("ignition")&&F.jsx(Mg,{title:`positionIgnition: ${Joe(a.attributes.ignition)}`,children:F.jsx(wr,{size:"small",children:a.attributes.ignition?F.jsx(h7,{width:20,height:20,style:w3}):F.jsx(h7,{width:20,height:20,style:k5e})})}),a.hasOwnProperty("speed")&&F.jsx(Mg,{title:`speed: ${a.speed}`,children:F.jsx(wr,{size:"small",children:F.jsxs("div",{style:{fontSize:"0.9rem"},children:[" V ",Math.round(a.speed),"m/s"]})})}),a.hasOwnProperty("altitude")&&F.jsx(Mg,{title:`altitude: ${Math.round(a.altitude)}`,children:F.jsx(wr,{size:"small",children:F.jsxs("div",{style:{fontSize:"0.9rem"},children:["H ",Math.round(a.altitude),"m"]})})}),a.attributes.hasOwnProperty("batteryLevel")&&F.jsx(Mg,{title:`BatteryLevel: ${Qoe(a.attributes.batteryLevel)}`,children:F.jsx(wr,{size:"small",children:a.attributes.batteryLevel>70?a.attributes.charge?F.jsx(Kie,{fontSize:"small",style:w3}):F.jsx(Xie,{fontSize:"small",style:w3}):a.attributes.batteryLevel>30?a.attributes.charge?F.jsx(Qie,{fontSize:"small",style:p7}):F.jsx(Zie,{fontSize:"small",style:p7}):a.attributes.charge?F.jsx(roe,{fontSize:"small",style:S3}):F.jsx(toe,{fontSize:"small",style:S3})})}),a.attributes.hasOwnProperty("alarm")&&a.attributes.alarm=="threat"&&F.jsx(Mg,{title:`eventAlarm: ${tse(a.attributes.alarm)}`,children:F.jsx(wr,{size:"small",children:F.jsx(ooe,{fontSize:"small",style:S3})})})]})]},o.id)})},R5e=ri(t=>({list:{maxHeight:"100%"},listInner:{position:"relative",margin:t.spacing(1.5,0)}})),rse=({devices:t})=>{const e=R5e(),n=Zl(),r=W.useRef(null);r.current&&(r.current.className=e.listInner);const[,i]=W.useState(Date.now());return W.useEffect(()=>{const o=setInterval(()=>i(Date.now()),6e4);return()=>{clearInterval(o)}},[]),h1(async()=>{const o=await fetch("/api/devices");if(o.ok)n(tu.refresh(await o.json()));else throw Error(await o.text())},[]),F.jsx(jNe,{className:e.list,children:({height:o,width:a})=>F.jsx(BNe,{width:a,height:o,itemCount:t.length,itemData:t,itemSize:72,overscanCount:10,innerRef:r,children:I5e})})};var mU={exports:{}},ise={};function ose(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=ose(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function m7(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=ose(t))&&(r&&(r+=" "),r+=e);return r}const O5e=Object.freeze(Object.defineProperty({__proto__:null,clsx:m7,default:m7},Symbol.toStringTag,{value:"Module"})),L5e=Ih(O5e);var ss={},Nh={};Object.defineProperty(Nh,"__esModule",{value:!0});Nh.dontSetMe=B5e;Nh.findInArray=D5e;Nh.int=F5e;Nh.isFunction=N5e;Nh.isNum=z5e;function D5e(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function N5e(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function z5e(t){return typeof t=="number"&&!isNaN(t)}function F5e(t){return parseInt(t,10)}function B5e(t,e,n){if(t[e])return new Error("Invalid prop ".concat(e," passed to ").concat(n," - do not set this, set it on the child."))}var H0={};Object.defineProperty(H0,"__esModule",{value:!0});H0.browserPrefixToKey=ase;H0.browserPrefixToStyle=$5e;H0.default=void 0;H0.getPrefix=sse;const M3=["Moz","Webkit","O","ms"];function sse(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const n=(t=window.document)===null||t===void 0||(t=t.documentElement)===null||t===void 0?void 0:t.style;if(!n||e in n)return"";for(let r=0;r<M3.length;r++)if(ase(e,M3[r])in n)return M3[r];return""}function ase(t,e){return e?"".concat(e).concat(j5e(t)):t}function $5e(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t}function j5e(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}H0.default=sse();Object.defineProperty(ss,"__esModule",{value:!0});ss.addClassName=use;ss.addEvent=W5e;ss.addUserSelectStyles=t$e;ss.createCSSTransform=Z5e;ss.createSVGTransform=J5e;ss.getTouch=Q5e;ss.getTouchIdentifier=e$e;ss.getTranslation=gU;ss.innerHeight=Y5e;ss.innerWidth=X5e;ss.matchesSelector=cse;ss.matchesSelectorAndParentsTo=V5e;ss.offsetXYFromParent=K5e;ss.outerHeight=G5e;ss.outerWidth=q5e;ss.removeClassName=dse;ss.removeEvent=H5e;ss.removeUserSelectStyles=n$e;var du=Nh,g7=U5e(H0);function lse(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(lse=function(r){return r?n:e})(t)}function U5e(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=lse(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}let tC="";function cse(t,e){return tC||(tC=(0,du.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,du.isFunction)(t[n])})),(0,du.isFunction)(t[tC])?t[tC](e):!1}function V5e(t,e,n){let r=t;do{if(cse(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function W5e(t,e,n,r){if(!t)return;const i={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,i):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function H5e(t,e,n,r){if(!t)return;const i={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function G5e(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,du.int)(n.borderTopWidth),e+=(0,du.int)(n.borderBottomWidth),e}function q5e(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,du.int)(n.borderLeftWidth),e+=(0,du.int)(n.borderRightWidth),e}function Y5e(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,du.int)(n.paddingTop),e-=(0,du.int)(n.paddingBottom),e}function X5e(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,du.int)(n.paddingLeft),e-=(0,du.int)(n.paddingRight),e}function K5e(t,e,n){const i=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),o=(t.clientX+e.scrollLeft-i.left)/n,a=(t.clientY+e.scrollTop-i.top)/n;return{x:o,y:a}}function Z5e(t,e){const n=gU(t,e,"px");return{[(0,g7.browserPrefixToKey)("transform",g7.default)]:n}}function J5e(t,e){return gU(t,e,"")}function gU(t,e,n){let{x:r,y:i}=t,o="translate(".concat(r).concat(n,",").concat(i).concat(n,")");if(e){const a="".concat(typeof e.x=="string"?e.x:e.x+n),s="".concat(typeof e.y=="string"?e.y:e.y+n);o="translate(".concat(a,", ").concat(s,")")+o}return o}function Q5e(t,e){return t.targetTouches&&(0,du.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,du.findInArray)(t.changedTouches,n=>e===n.identifier)}function e$e(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function t$e(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&use(t.body,"react-draggable-transparent-selection")}function n$e(t){if(t)try{if(t.body&&dse(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function use(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function dse(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var zh={};Object.defineProperty(zh,"__esModule",{value:!0});zh.canDragX=o$e;zh.canDragY=s$e;zh.createCoreData=l$e;zh.createDraggableData=c$e;zh.getBoundPosition=r$e;zh.getControlPosition=a$e;zh.snapToGrid=i$e;var Yc=Nh,P_=ss;function r$e(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:u$e(r);const i=yU(t);if(typeof r=="string"){const{ownerDocument:o}=i,a=o.defaultView;let s;if(r==="parent"?s=i.parentNode:s=o.querySelector(r),!(s instanceof a.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const l=s,c=a.getComputedStyle(i),h=a.getComputedStyle(l);r={left:-i.offsetLeft+(0,Yc.int)(h.paddingLeft)+(0,Yc.int)(c.marginLeft),top:-i.offsetTop+(0,Yc.int)(h.paddingTop)+(0,Yc.int)(c.marginTop),right:(0,P_.innerWidth)(l)-(0,P_.outerWidth)(i)-i.offsetLeft+(0,Yc.int)(h.paddingRight)-(0,Yc.int)(c.marginRight),bottom:(0,P_.innerHeight)(l)-(0,P_.outerHeight)(i)-i.offsetTop+(0,Yc.int)(h.paddingBottom)-(0,Yc.int)(c.marginBottom)}}return(0,Yc.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,Yc.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,Yc.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,Yc.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function i$e(t,e,n){const r=Math.round(e/t[0])*t[0],i=Math.round(n/t[1])*t[1];return[r,i]}function o$e(t){return t.props.axis==="both"||t.props.axis==="x"}function s$e(t){return t.props.axis==="both"||t.props.axis==="y"}function a$e(t,e,n){const r=typeof e=="number"?(0,P_.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const i=yU(n),o=n.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,P_.offsetXYFromParent)(r||t,o,n.props.scale)}function l$e(t,e,n){const r=!(0,Yc.isNum)(t.lastX),i=yU(t);return r?{node:i,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:i,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function c$e(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function u$e(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function yU(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var GR={},qR={};Object.defineProperty(qR,"__esModule",{value:!0});qR.default=d$e;function d$e(){}Object.defineProperty(GR,"__esModule",{value:!0});GR.default=void 0;var E3=h$e(W),pc=vU(_$),f$e=vU(py),il=ss,tg=zh,T3=Nh,jw=vU(qR);function vU(t){return t&&t.__esModule?t:{default:t}}function fse(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(fse=function(r){return r?n:e})(t)}function h$e(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=fse(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}function Bl(t,e,n){return e=p$e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p$e(t){var e=m$e(t,"string");return typeof e=="symbol"?e:String(e)}function m$e(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Gd={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let ng=Gd.mouse,YR=class extends E3.Component{constructor(){super(...arguments),Bl(this,"dragging",!1),Bl(this,"lastX",NaN),Bl(this,"lastY",NaN),Bl(this,"touchIdentifier",null),Bl(this,"mounted",!1),Bl(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,il.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,il.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&e.preventDefault();const i=(0,il.getTouchIdentifier)(e);this.touchIdentifier=i;const o=(0,tg.getControlPosition)(e,i,this);if(o==null)return;const{x:a,y:s}=o,l=(0,tg.createCoreData)(this,a,s);(0,jw.default)("DraggableCore: handleDragStart: %j",l),(0,jw.default)("calling",this.props.onStart),!(this.props.onStart(e,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,il.addUserSelectStyles)(r),this.dragging=!0,this.lastX=a,this.lastY=s,(0,il.addEvent)(r,ng.move,this.handleDrag),(0,il.addEvent)(r,ng.stop,this.handleDragStop))}),Bl(this,"handleDrag",e=>{const n=(0,tg.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:i}=n;if(Array.isArray(this.props.grid)){let s=r-this.lastX,l=i-this.lastY;if([s,l]=(0,tg.snapToGrid)(this.props.grid,s,l),!s&&!l)return;r=this.lastX+s,i=this.lastY+l}const o=(0,tg.createCoreData)(this,r,i);if((0,jw.default)("DraggableCore: handleDrag: %j",o),this.props.onDrag(e,o)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=r,this.lastY=i}),Bl(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,tg.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:i}=n;if(Array.isArray(this.props.grid)){let l=r-this.lastX||0,c=i-this.lastY||0;[l,c]=(0,tg.snapToGrid)(this.props.grid,l,c),r=this.lastX+l,i=this.lastY+c}const o=(0,tg.createCoreData)(this,r,i);if(this.props.onStop(e,o)===!1||this.mounted===!1)return!1;const s=this.findDOMNode();s&&this.props.enableUserSelectHack&&(0,il.removeUserSelectStyles)(s.ownerDocument),(0,jw.default)("DraggableCore: handleDragStop: %j",o),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,s&&((0,jw.default)("DraggableCore: Removing handlers"),(0,il.removeEvent)(s.ownerDocument,ng.move,this.handleDrag),(0,il.removeEvent)(s.ownerDocument,ng.stop,this.handleDragStop))}),Bl(this,"onMouseDown",e=>(ng=Gd.mouse,this.handleDragStart(e))),Bl(this,"onMouseUp",e=>(ng=Gd.mouse,this.handleDragStop(e))),Bl(this,"onTouchStart",e=>(ng=Gd.touch,this.handleDragStart(e))),Bl(this,"onTouchEnd",e=>(ng=Gd.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,il.addEvent)(e,Gd.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,il.removeEvent)(n,Gd.mouse.move,this.handleDrag),(0,il.removeEvent)(n,Gd.touch.move,this.handleDrag),(0,il.removeEvent)(n,Gd.mouse.stop,this.handleDragStop),(0,il.removeEvent)(n,Gd.touch.stop,this.handleDragStop),(0,il.removeEvent)(e,Gd.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,il.removeUserSelectStyles)(n)}}findDOMNode(){var e,n;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(n=this.props)===null||n===void 0||(n=n.nodeRef)===null||n===void 0?void 0:n.current:f$e.default.findDOMNode(this)}render(){return E3.cloneElement(E3.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};GR.default=YR;Bl(YR,"displayName","DraggableCore");Bl(YR,"propTypes",{allowAnyClick:pc.default.bool,children:pc.default.node.isRequired,disabled:pc.default.bool,enableUserSelectHack:pc.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:pc.default.arrayOf(pc.default.number),handle:pc.default.string,cancel:pc.default.string,nodeRef:pc.default.object,onStart:pc.default.func,onDrag:pc.default.func,onStop:pc.default.func,onMouseDown:pc.default.func,scale:pc.default.number,className:T3.dontSetMe,style:T3.dontSetMe,transform:T3.dontSetMe});Bl(YR,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),t.default=void 0;var e=g(W),n=h(_$),r=h(py),i=h(L5e),o=ss,a=zh,s=Nh,l=h(GR),c=h(qR);function h(T){return T&&T.__esModule?T:{default:T}}function p(T){if(typeof WeakMap!="function")return null;var C=new WeakMap,I=new WeakMap;return(p=function(R){return R?I:C})(T)}function g(T,C){if(!C&&T&&T.__esModule)return T;if(T===null||typeof T!="object"&&typeof T!="function")return{default:T};var I=p(C);if(I&&I.has(T))return I.get(T);var R={},O=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in T)if(B!=="default"&&Object.prototype.hasOwnProperty.call(T,B)){var U=O?Object.getOwnPropertyDescriptor(T,B):null;U&&(U.get||U.set)?Object.defineProperty(R,B,U):R[B]=T[B]}return R.default=T,I&&I.set(T,R),R}function v(){return v=Object.assign?Object.assign.bind():function(T){for(var C=1;C<arguments.length;C++){var I=arguments[C];for(var R in I)Object.prototype.hasOwnProperty.call(I,R)&&(T[R]=I[R])}return T},v.apply(this,arguments)}function x(T,C,I){return C=b(C),C in T?Object.defineProperty(T,C,{value:I,enumerable:!0,configurable:!0,writable:!0}):T[C]=I,T}function b(T){var C=M(T,"string");return typeof C=="symbol"?C:String(C)}function M(T,C){if(typeof T!="object"||T===null)return T;var I=T[Symbol.toPrimitive];if(I!==void 0){var R=I.call(T,C||"default");if(typeof R!="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(T)}class w extends e.Component{static getDerivedStateFromProps(C,I){let{position:R}=C,{prevPropsPosition:O}=I;return R&&(!O||R.x!==O.x||R.y!==O.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:R,prevPropsPosition:O}),{x:R.x,y:R.y,prevPropsPosition:{...R}}):null}constructor(C){super(C),x(this,"onDragStart",(I,R)=>{if((0,c.default)("Draggable: onDragStart: %j",R),this.props.onStart(I,(0,a.createDraggableData)(this,R))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),x(this,"onDrag",(I,R)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",R);const O=(0,a.createDraggableData)(this,R),B={x:O.x,y:O.y,slackX:0,slackY:0};if(this.props.bounds){const{x:Z,y:j}=B;B.x+=this.state.slackX,B.y+=this.state.slackY;const[X,le]=(0,a.getBoundPosition)(this,B.x,B.y);B.x=X,B.y=le,B.slackX=this.state.slackX+(Z-B.x),B.slackY=this.state.slackY+(j-B.y),O.x=B.x,O.y=B.y,O.deltaX=B.x-this.state.x,O.deltaY=B.y-this.state.y}if(this.props.onDrag(I,O)===!1)return!1;this.setState(B)}),x(this,"onDragStop",(I,R)=>{if(!this.state.dragging||this.props.onStop(I,(0,a.createDraggableData)(this,R))===!1)return!1;(0,c.default)("Draggable: onDragStop: %j",R);const B={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:Z,y:j}=this.props.position;B.x=Z,B.y=j}this.setState(B)}),this.state={dragging:!1,dragged:!1,x:C.position?C.position.x:C.defaultPosition.x,y:C.position?C.position.y:C.defaultPosition.y,prevPropsPosition:{...C.position},slackX:0,slackY:0,isElementSVG:!1},C.position&&!(C.onDrag||C.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var C,I;return(C=(I=this.props)===null||I===void 0||(I=I.nodeRef)===null||I===void 0?void 0:I.current)!==null&&C!==void 0?C:r.default.findDOMNode(this)}render(){const{axis:C,bounds:I,children:R,defaultPosition:O,defaultClassName:B,defaultClassNameDragging:U,defaultClassNameDragged:Z,position:j,positionOffset:X,scale:le,...me}=this.props;let ie={},ce=null;const xe=!!!j||this.state.dragging,te=j||O,he={x:(0,a.canDragX)(this)&&xe?this.state.x:te.x,y:(0,a.canDragY)(this)&&xe?this.state.y:te.y};this.state.isElementSVG?ce=(0,o.createSVGTransform)(he,X):ie=(0,o.createCSSTransform)(he,X);const ve=(0,i.default)(R.props.className||"",B,{[U]:this.state.dragging,[Z]:this.state.dragged});return e.createElement(l.default,v({},me,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(R),{className:ve,style:{...R.props.style,...ie},transform:ce}))}}t.default=w,x(w,"displayName","Draggable"),x(w,"propTypes",{...l.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:s.dontSetMe,style:s.dontSetMe,transform:s.dontSetMe}),x(w,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(ise);const{default:hse,DraggableCore:g$e}=ise;mU.exports=hse;mU.exports.default=hse;mU.exports.DraggableCore=g$e;var xU={},y$e=si;Object.defineProperty(xU,"__esModule",{value:!0});var XR=xU.default=void 0,v$e=y$e(bi()),x$e=F;XR=xU.default=(0,v$e.default)((0,x$e.jsx)("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8"}),"Replay");var _U={},_$e=si;Object.defineProperty(_U,"__esModule",{value:!0});var bU=_U.default=void 0,b$e=_$e(bi()),w$e=F;bU=_U.default=(0,b$e.default)((0,w$e.jsx)("path",{d:"M5 4v2h14V4zm0 10h4v6h6v-6h4l-7-7z"}),"Publish");var wU={},S$e=si;Object.defineProperty(wU,"__esModule",{value:!0});var SU=wU.default=void 0,M$e=S$e(bi()),E$e=F;SU=wU.default=(0,M$e.default)((0,E$e.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");var MU={},T$e=si;Object.defineProperty(MU,"__esModule",{value:!0});var pse=MU.default=void 0,C$e=T$e(bi()),A$e=F;pse=MU.default=(0,C$e.default)((0,A$e.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M7 13.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m5 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m5 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"Pending");const qF=({position:t,property:e,attribute:n})=>{const r=mr(g=>g.devices.items[t.deviceId]),i=e||n,o=e?t[e]:t.attributes[n],a="m",s="m",l="km/s",c="ddm",h=!1,p=()=>{switch(i){case"fixTime":case"deviceTime":case"serverTime":return ese(o,"seconds",h);case"latitude":return f7("latitude",o,c);case"longitude":return f7("longitude",o,c);case"speed":return T5e(o,l);case"course":return S5e(o);case"altitude":return E5e(o,s);case"batteryLevel":return Qoe(o);case"alarm":return tse(o);case"gimbal":return o.toString();case"obstacle_info":return o.toString();case"odometer":case"distance":case"totalDistance":return M5e(o,a);case"hours":return C5e(o);default:return typeof o=="number"?w5e(o):typeof o=="boolean"?Joe(o):o||""}};switch(i){case"image":case"video":case"audio":return F.jsx(GAe,{href:`/api/media/${r.uniqueId}/${o}`,target:"_blank",children:o});case"totalDistance":case"hours":case"address":case"network":return"";default:return p()}},P$e=ri(t=>({root:{[t.breakpoints.down("md")]:{bottom:`calc(${t.dimensions.bottomBarHeight}px + ${t.spacing(1)})`}},button:{height:"auto",marginTop:0,marginBottom:0,color:t.palette.colors.negative}})),k$e=({open:t,endpoint:e,itemId:n,onResult:r})=>{const i=P$e(),o=async()=>{(await fetch(`/api/${e}/${n}`,{method:"DELETE"})).ok?(console.log("elemento eliminado"),r(!0)):r(!1)};return F.jsx(Uke,{className:i.root,open:t,autoHideDuration:2750,onClose:()=>r(!1),message:"confirmar para eliminar",action:F.jsx(Gr,{size:"small",className:i.button,onClick:o,children:"Eliminar"})})},mse=ri(t=>({card:{pointerEvents:"auto",width:t.dimensions.popupMaxWidth},media:{height:t.dimensions.popupImageHeight,display:"flex",justifyContent:"flex-end",alignItems:"flex-start"},mediaButton:{color:t.palette.colors.white,mixBlendMode:"difference"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(1,1,0,2)},content:{paddingTop:t.spacing(1),paddingBottom:t.spacing(1)},negative:{color:t.palette.colors.negative},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},table:{"& .MuiTableCell-sizeSmall":{paddingLeft:0,paddingRight:0}},cell:{borderBottom:"none"},actions:{justifyContent:"space-between"},root:({desktopPadding:e})=>({pointerEvents:"none",position:"fixed",zIndex:5,left:"50%",[t.breakpoints.up("md")]:{left:`calc(50% + ${e} / 2)`,bottom:t.spacing(3)},[t.breakpoints.down("md")]:{left:"50%",bottom:`calc(${t.spacing(3)} + ${t.dimensions.bottomBarHeight}px)`},transform:"translateX(-50%)"})})),C3=({name:t,content:e})=>{const n=mse();return F.jsxs(Gg,{children:[F.jsx(rs,{className:n.card,children:F.jsx(Bn,{variant:"body2",children:t})}),F.jsx(rs,{className:n.cell,children:F.jsx(Bn,{variant:"body2",color:"textSecondary",children:e})})]})},I$e=({deviceId:t,position:e,onClose:n,disableActions:r,desktopPadding:i=0})=>{var w;const o=mse(),a=rm(),s=Zl(),l=mr(T=>T.devices.items[t]),c=(w=l==null?void 0:l.attributes)==null?void 0:w.deviceImage,h="speed,course,batteryLevel,gimbal",[p,g]=W.useState(null),[v,x]=W.useState(!1),b=async(T,C,I)=>{console.log("send command uavud: "+T+C);try{const R=await fetch("/api/commands/send",{method:"POST",body:JSON.stringify({deviceId:T,type:C,attributes:I}),headers:{"Content-Type":"application/json"}});if(R.ok){let O=await R.json();console.log(O)}else throw console.log("Error1:"+R),Error(await R.text())}catch(R){console.log("Error2:"+R)}},M=async T=>{if(T){const C=await fetch("/api/devices");if(C.ok){let I=await C.json();s(tu.refresh(Object.values(I)))}else throw Error(await C.text())}x(!1)};return F.jsxs(F.Fragment,{children:[F.jsx("div",{className:o.root,children:l&&F.jsxs(Oh,{elevation:3,className:o.card,children:[c?F.jsx(wTe,{className:o.media,image:`/api/media/${l.uniqueId}/${c}`,children:F.jsx(wr,{size:"small",onClick:n,onTouchStart:n,children:F.jsx(Ah,{fontSize:"small",className:o.mediaButton})})}):F.jsxs("div",{className:o.header,children:[F.jsx(Bn,{variant:"body2",color:"textSecondary",children:l.name}),F.jsx(wr,{size:"small",onClick:n,onTouchStart:n,children:F.jsx(Ah,{fontSize:"small"})})]}),e&&F.jsx(Y$,{className:o.content,children:F.jsx(hR,{size:"small",classes:{root:o.table},children:F.jsxs(mR,{children:[e.hasOwnProperty("latitude")&&F.jsx(C3,{name:"Position",content:F.jsx("a",{href:"https://www.google.com/maps?q="+e.latitude+","+e.longitude,target:"_blank",children:"["+e.latitude.toFixed(6)+","+e.longitude.toFixed(6)+"]"})},"latitude"),h.split(",").filter(T=>e.hasOwnProperty(T)||e.attributes.hasOwnProperty(T)).map(T=>F.jsx(C3,{name:T,content:F.jsx(qF,{position:e,property:e.hasOwnProperty(T)?T:null,attribute:e.hasOwnProperty(T)?null:T})},T)),e.attributes.hasOwnProperty("alarm")&&e.attributes.alarm=="threat"&&F.jsx(C3,{name:"Alarm "+e.attributes.alarm,content:F.jsxs("div",{style:{width:"100%"},children:[F.jsx(Gr,{variant:"contained",size:"small",color:"primary",style:{margin:"1px",display:"inline-block"},onClick:()=>b(l.id,"threat",{data:!0}),children:"Validate"}),F.jsx(Gr,{variant:"contained",size:"small",color:"secondary",style:{margin:"1px",display:"inline-block"},onClick:()=>b(l.id,"threat",{data:!1}),children:"Dismiss"})]})},"alarm1")]})})}),F.jsxs(qne,{classes:{root:o.actions},disableSpacing:!0,children:[F.jsx(wr,{color:"secondary",onClick:T=>g(T.currentTarget),disabled:!e,children:F.jsx(pse,{})}),F.jsx(wr,{onClick:()=>b(l.id,"SincroniseFiles"),children:F.jsx(XR,{})}),F.jsx(wr,{onClick:()=>b(l.id,"commandMission"),disabled:r,children:F.jsx(bU,{})}),F.jsx(wr,{onClick:()=>a(`/device/${t}`),children:F.jsx(SU,{})}),F.jsx(wr,{onClick:()=>x(!0),className:o.negative,children:F.jsx(yu,{})})]})]})}),e&&F.jsxs(K$,{anchorEl:p,open:!!p,onClose:()=>g(null),children:[F.jsx(lu,{onClick:()=>a(`/device/${t}`),children:F.jsx(Bn,{color:"secondary",children:"Detalle Dispositivo"})}),F.jsx(lu,{component:"a",target:"_blank",href:`https://www.google.com/maps/search/?api=1&query=${e.latitude}%2C${e.longitude}`,children:"linkGoogleMaps"}),F.jsx(lu,{component:"a",target:"_blank",href:`http://maps.apple.com/?ll=${e.latitude},${e.longitude}`,children:"linkAppleMaps"}),F.jsx(lu,{component:"a",target:"_blank",href:`https://www.google.com/maps/@?api=1&map_action=pano&viewpoint=${e.latitude}%2C${e.longitude}&heading=${e.course}`,children:"linkStreetView"})]}),F.jsx(k$e,{open:v,endpoint:"devices",itemId:t,onResult:T=>M(T)})]})};function R$e(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var O$e=`/* add css styles here (optional) */

.styles_ReactSwipeButton__2WML2 {
  float: left;
  width: 100%;
  height: 50px;
  position: relative;
}
.styles_ReactSwipeButton__2WML2,
.styles_ReactSwipeButton__2WML2 * {
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none;   /* Chrome/Safari/Opera */
  -khtml-user-select: none;    /* Konqueror */
  -moz-user-select: none;      /* Firefox */
  -ms-user-select: none;       /* Internet Explorer/Edge */
  user-select: none;           /* Non-prefixed version, currently
                                  not supported by any browser */
}
.styles_rsbContainer__KXpXK{
  float: left;
  width: 100%;
  height: 100%;
  background: #eee;
  border-radius: 50px;
  position: relative;
  /* box-shadow: inset 1px 1px 4px rgba(0,0,0,0.1); */
  overflow: hidden;
}
.styles_rsbContainerUnlocked__1T0vd{
  width: 50%!important;
  margin-left: 25%;
  transition: 0.5s;
  cursor: default;
}
.styles_rsbContainerUnlocked__1T0vd .styles_rsbcSlider__1yYxD{
  left: 100%!important;
  cursor: default;
  pointer-events: none;
}
.styles_rsbContainerUnlocked__1T0vd .styles_rsbcSliderArrow__2D9q4 {
  transition: 0.5s;
  margin-right: -60px;
}
.styles_rsbContainerUnlocked__1T0vd .styles_rsbcSliderCircle__3G0Zs {
  transition: 0.5s;
  margin-right: -60px;
}
.styles_rsbcSlider__1yYxD {
  float: left;
  width: 100%;
  position: absolute;
  height: 50px;
  top:0;
  left: 50px;
  margin-left:-100%;
  background: #333;
  border-radius: 25px;
  z-index: 100;
  /* box-shadow: 1px 1px 5px rgba(0,0,0,0.3); */
  cursor: pointer;
}
.styles_rsbcSliderText__3h08j{
  position: absolute;
  top:0;
  left:0;
  right:0;
  line-height: 50px;
  text-align: center;
  font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
  letter-spacing: 2px;
  color: #fff;
  font-size: 13px;

}
.styles_rsbcSliderArrow__2D9q4{
  float: left;
  position: absolute;
  transform: rotate(45deg);
  border: 2px solid #fff;
  height: 8px;
  width: 8px;
  top:50%;
  right: 22px;
  margin-top: -6px;
  border-left-color: transparent;
  border-bottom-color: transparent;
  transform-origin: center;
  z-index: 10;
}
.styles_rsbcSliderCircle__3G0Zs {
  position: absolute;
  right: 0;
  background: #444;
  top:0;
  height: 50px;
  width: 50px;
  border-radius: 100%;
}
.styles_rsbcText__16wA0 {
  float: left;
  position: absolute;
  top:0;
  left:0;
  right:0;
  height: 50px;
  line-height: 50px;
  text-align: center;
  font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
  letter-spacing: 2px;
  font-size: 13px;
  color: #aaa;
}`,rg={ReactSwipeButton:"styles_ReactSwipeButton__2WML2",rsbContainer:"styles_rsbContainer__KXpXK",rsbContainerUnlocked:"styles_rsbContainerUnlocked__1T0vd",rsbcSlider:"styles_rsbcSlider__1yYxD",rsbcSliderArrow:"styles_rsbcSliderArrow__2D9q4",rsbcSliderCircle:"styles_rsbcSliderCircle__3G0Zs",rsbcSliderText:"styles_rsbcSliderText__3h08j",rsbcText:"styles_rsbcText__16wA0"};R$e(O$e);var L$e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},D$e=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),N$e=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},y7=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t},v7=Ze.createRef(),nC=Ze.createRef(),A3="ontouchstart"in document.documentElement,z$e=function(t){N$e(e,t);function e(){var n,r,i,o;L$e(this,e);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return o=(r=(i=y7(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this].concat(s))),i),i.isDragging=!1,i.sliderLeft=0,i.state={},i.onDrag=function(c){i.unmounted||i.state.unlocked||i.isDragging&&(A3?i.sliderLeft=Math.min(Math.max(0,c.touches[0].clientX-i.startX),i.containerWidth):i.sliderLeft=Math.min(Math.max(0,c.clientX-i.startX),i.containerWidth),i.updateSliderStyle())},i.updateSliderStyle=function(){i.unmounted||i.state.unlocked||(v7.current.style.left=i.sliderLeft+50+"px")},i.stopDrag=function(){i.unmounted||i.state.unlocked||i.isDragging&&(i.isDragging=!1,i.sliderLeft>i.containerWidth*.9?(i.sliderLeft=i.containerWidth,i.onSuccess(),i.props.onSuccess&&i.props.onSuccess()):(i.sliderLeft=0,i.props.onFailure&&i.props.onFailure()),i.updateSliderStyle())},i.startDrag=function(c){i.unmounted||i.state.unlocked||(i.isDragging=!0,A3?i.startX=c.touches[0].clientX:i.startX=c.clientX)},i.onSuccess=function(){nC.current.style.width=nC.current.clientWidth+"px",i.setState({unlocked:!0})},i.getText=function(){return i.state.unlocked?i.props.text_unlocked||"UNLOCKED":i.props.text||"SLIDE"},i.reset=function(){i.unmounted||i.setState({unlocked:!1},function(){i.sliderLeft=0,i.updateSliderStyle()})},r),y7(i,o)}return D$e(e,[{key:"componentDidMount",value:function(){A3?(document.addEventListener("touchmove",this.onDrag),document.addEventListener("touchend",this.stopDrag)):(document.addEventListener("mousemove",this.onDrag),document.addEventListener("mouseup",this.stopDrag)),this.containerWidth=nC.current.clientWidth-50}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"render",value:function(){return Ze.createElement("div",{className:rg.ReactSwipeButton},Ze.createElement("div",{className:rg.rsbContainer+" "+(this.state.unlocked?rg.rsbContainerUnlocked:""),ref:nC},Ze.createElement("div",{className:rg.rsbcSlider,ref:v7,onMouseDown:this.startDrag,style:{background:this.props.color},onTouchStart:this.startDrag},Ze.createElement("span",{className:rg.rsbcSliderText},this.getText()),Ze.createElement("span",{className:rg.rsbcSliderArrow}),Ze.createElement("span",{className:rg.rsbcSliderCircle,style:{background:this.props.color}})),Ze.createElement("div",{className:rg.rsbcText},this.getText())))}}]),e}(W.Component);const F$e=ri(t=>({card:{pointerEvents:"auto",width:t.dimensions.popupMaxWidth},media:{height:t.dimensions.popupImageHeight,display:"flex",justifyContent:"flex-end",alignItems:"flex-start"},mediaButton:{color:t.palette.colors.white,mixBlendMode:"difference"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(1,1,0,2)},content:{paddingTop:"20px",paddingBottom:"20px"},negative:{color:t.palette.colors.negative},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},table:{"& .MuiTableCell-sizeSmall":{paddingLeft:0,paddingRight:0}},cell:{borderBottom:"none"},actions:{justifyContent:"space-between"},root:{pointerEvents:"none",position:"fixed",zIndex:5,left:"50%",top:"50%",transform:"translate(-50%,-50%)"}})),B$e=({enable:t,onClose:e,onSucces:n})=>{const r=F$e();return F.jsx(F.Fragment,{children:F.jsx("div",{className:r.root,children:t&&F.jsxs(Oh,{elevation:5,className:r.card,children:[F.jsxs("div",{className:r.header,children:[F.jsx(Bn,{variant:"body2",color:"textSecondary",children:"Confirm mission"}),F.jsx(wr,{size:"small",onClick:e,onTouchStart:e,children:F.jsx(Ah,{fontSize:"small"})})]}),F.jsxs(Y$,{className:r.content,children:[F.jsx(Bn,{variant:"body1",color:"textSecondary",children:"Send all devices to command the mission load"}),F.jsx("div",{style:{marginTop:"10px",height:"50px"},children:F.jsx(z$e,{text:"Slide to Command Mission",color:"#7393B3",text_unlocked:"Commanded",onSuccess:n})})]})]})})})};var EU={},$$e=si;Object.defineProperty(EU,"__esModule",{value:!0});var gse=EU.default=void 0,j$e=$$e(bi()),U$e=F;gse=EU.default=(0,j$e.default)((0,U$e.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");var TU={},V$e=si;Object.defineProperty(TU,"__esModule",{value:!0});var yse=TU.default=void 0,W$e=V$e(bi()),H$e=F;yse=TU.default=(0,W$e.default)((0,H$e.jsx)("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"}),"ViewList");var CU={},G$e=si;Object.defineProperty(CU,"__esModule",{value:!0});var vse=CU.default=void 0,q$e=G$e(bi()),Y$e=F;vse=CU.default=(0,q$e.default)((0,Y$e.jsx)("path",{d:"M3 17v2h6v-2zM3 5v2h10V5zm10 16v-2h8v-2h-8v-2h-2v6zM7 9v2H3v2h4v2h2V9zm14 4v-2H11v2zm-6-4h2V7h4V5h-4V3h-2z"}),"Tune");const X$e={display:"flex",gap:"10px 10px",height:"30px",borderBottom:"3px solid rgb(212, 212, 212)"},xse=({SetAddUAVOpen:t})=>F.jsxs(vy,{style:X$e,children:[F.jsx(wr,{edge:"start",children:F.jsx(yse,{})}),F.jsx(J$,{placeholder:"device",endAdornment:F.jsx(vAe,{position:"end",children:F.jsx(wr,{size:"small",edge:"end",children:F.jsx(vEe,{color:"info",variant:"dot",children:F.jsx(vse,{fontSize:"small"})})})}),size:"small",fullWidth:!0}),F.jsx(wr,{edge:"end",onClick:()=>{t(!0)},children:F.jsx(Mg,{children:F.jsx(gse,{})})})]}),K$e=ri(t=>({card:{pointerEvents:"auto"},media:{width:t.dimensions.popupMaxWidth,display:"flex",justifyContent:"flex-end",alignItems:"flex-start",background:"black"},media1:{width:"95vw",height:"90vh",display:"flex",justifyContent:"flex-end",alignItems:"flex-start",background:"black"},gruopBtn:{display:"flex",right:"5px",height:"40px",position:"absolute"},mediaButton:{color:t.palette.colors.white,mixBlendMode:"difference"},tittle:{display:"block",width:"calc( 100% - 60pt )",paddingLeft:"15pt",paddingTop:"10pt",paddingBottom:"10pt",textAlign:"left"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(1,1,0,2)},root:{pointerEvents:"none",position:"fixed",zIndex:6,left:"360px",top:t.spacing(15),transform:"translateX(1%)"},root_max:{pointerEvents:"none",position:"fixed",zIndex:6,left:"51%",top:"5%",transform:"translateX(-50%)"}})),x7=({deviceId:t,deviceIp:e,camera_src:n,onClose:r})=>{const i=K$e();mr(x=>x.data.camera[t]);const o=mr(x=>x.devices.items[t]),a="http://"+e+":8889/"+n,[s,l]=W.useState(!1);let c=i.card,h=s?i.root_max:i.root,p=s?i.media1:i.media;function g(){l(!s)}W.useRef();function v(){r(),l(!1)}return W.useEffect(()=>{t&&console.log("device in camera-"+o.name+"-"+e+"+"+n)},[t]),F.jsx("div",{className:h,children:o&&F.jsxs(Oh,{elevation:3,className:c,children:[F.jsxs("div",{className:i.gruopBtn,children:[F.jsx(wr,{size:"small",onClick:g,onTouchStart:g,children:F.jsx(jj,{fontSize:"small",className:i.mediaButton})}),F.jsx(wr,{size:"small",onClick:v,children:F.jsx(Ah,{fontSize:"small",className:i.mediaButton})})]}),F.jsx("div",{className:i.tittle,children:"Image "+o.name}),F.jsx("iframe",{src:a,className:p})]})})},_se=({filtereddeviceid:t=-1})=>{const e=W.useId(),n=`${e}-points`,r=`${e}-points-clusters`,i=mr(x=>x.mission.route),o=mr(x=>x.devices.items),a=!0,s=.6,l=()=>gt.getCanvas().style.cursor="pointer",c=()=>gt.getCanvas().style.cursor="",h=(x,b)=>({id:b.id,name:x[b.routeid].name,uav:x[b.routeid].uav,latitude:x[b.routeid].wp[b.id].pos[0],longitude:x[b.routeid].wp[b.id].pos[1],altitud:x[b.routeid].wp[b.id].pos[2],yaw:x[b.routeid].wp[b.id].yaw,speed:x[b.routeid].wp[b.id].speed,gimbal:x[b.routeid].wp[b.id].gimbal,actions:x[b.routeid].wp[b.id].action,attributes:x[b.routeid].attributes,category:"default",color:x[b.routeid].id}),p=x=>{console.log("target"),console.log(x);let b=`<div style="color: #FF7A59;text-align: center" ><b>UAV: ${x.features[0].properties.uav}</b>
      <span><a href="https://www.google.com/maps?q=${x.features[0].properties.latitude},${x.features[0].properties.longitude}" target="_blank">
      Point_${x.features[0].properties.id}</a></span></div>
          <div><span>Route: ${x.features[0].properties.name}</span></div>
          <div style="display:inline"><span> Height: </span><span>${x.features[0].properties.altitud.toFixed(1)}m </span></div>`;b=x.features[0].properties.hasOwnProperty("speed")?b+`<div style="display:inline"><span>Speed: </span><span>${x.features[0].properties.speed} m/s </span></div>`:b,b=x.features[0].properties.hasOwnProperty("yaw")?b+`<div style="display:inline"><span>Yaw: </span><span>${x.features[0].properties.yaw}° </span></div>`:b,b=x.features[0].properties.hasOwnProperty("gimbal")?b+`<div style="display:inline"><span>Gimbal: </span><span>${x.features[0].properties.gimbal}° </span></div>`:b;let M="<div><b> Waypoint actions: </b></div>";if(x.features[0].properties.actions){let C=JSON.parse(x.features[0].properties.actions);M=M+Object.keys(C).map(I=>{let R=I=="idle_vel"?"m/s":"";return`<div style="display:inline"><span>${I}: </span><span>${C[I]} ${R} </span></div>`}).join("")}let w="<div><b> Attributes_mission: </b></div>",T=JSON.parse(x.features[0].properties.attributes);w=w+Object.keys(T).map(C=>{let I=C=="idle_vel"||C=="max_vel"?"m/s":"";return`<div style="display:inline"><span>${C}: </span><span>${T[C]} ${I} </span></div>`}).join(""),new m1.Popup().setLngLat(x.lngLat).setHTML(b+M+w).addTo(gt)};W.useEffect(()=>(gt.addSource(n,{type:"geojson",data:{type:"FeatureCollection",features:[]},cluster:a,clusterMaxZoom:10,clusterRadius:50}),gt.addSource(e,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),gt.addLayer({source:e,id:"mission-line",type:"line",paint:{"line-color":["get","color"],"line-width":2}}),gt.addLayer({source:e,id:"mission-title",type:"symbol",layout:{"text-field":"{name}","text-font":ff(gt),"text-size":12},paint:{"text-halo-color":"white","text-halo-width":1}}),gt.addLayer({id:"mission-points",type:"symbol",source:n,filter:["!has","point_count"],layout:{"icon-image":"background-{color}","icon-size":s,"icon-allow-overlap":!0,"text-allow-overlap":!0,"text-field":"{id}","text-font":ff(gt),"text-size":14},paint:{"text-color":"white"}}),gt.addLayer({id:r,type:"symbol",source:n,filter:["has","point_count"],layout:{"icon-image":"background","icon-size":s,"text-field":"M","text-font":ff(gt),"text-size":14}}),gt.on("click","mission-points",p),gt.on("mouseenter","mission-points",l),gt.on("mouseleave","mission-points",c),()=>{gt.off("click","mission-points",p),gt.off("mouseenter","mission-points",l),gt.off("mouseleave","mission-points",c),gt.getLayer("mission-line")&&gt.removeLayer("mission-line"),gt.getLayer("mission-title")&&gt.removeLayer("mission-title"),gt.getLayer("mission-points")&&gt.removeLayer("mission-points"),gt.getLayer(r)&&gt.removeLayer(r),gt.getSource(e)&&gt.removeSource(e),gt.getSource(n)&&gt.removeSource(n)}),[]);function g(x){let b=x.wp.map(function(M){return[M.pos[1],M.pos[0]]});return{id:x.id,type:"Feature",geometry:{type:"LineString",coordinates:b},properties:{name:x.uav,color:iy.colors_devices[x.id]}}}function v(x){let b=[];return x.forEach((M,w)=>{M.wp.forEach((T,C)=>{b.push({longitude:T.pos[1],latitude:T.pos[0],id:C,routeid:w})})}),b}return W.useEffect(()=>{let x=i.filter(M=>t<0||M.uav==o[t].name);console.log("mission filtered"),console.log(x);let b=v(x);gt.getSource(n).setData({type:"FeatureCollection",features:b.map(M=>({type:"Feature",geometry:{type:"Point",coordinates:[M.longitude,M.latitude]},properties:h(x,M)}))}),gt.getSource(e).setData({type:"FeatureCollection",features:x.map(M=>g(M))})},[i]),null},Z$e=({markers:t,showTitles:e})=>{const n=W.useId();bre();const r=.4;W.useEffect(()=>(gt.addSource(n,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),e?gt.addLayer({id:n,type:"symbol",source:n,filter:["!has","point_count"],layout:{"icon-image":"{image}","icon-size":r,"icon-allow-overlap":!0,"text-field":"{title}","text-allow-overlap":!0,"text-anchor":"bottom","text-offset":[0,-2*r],"text-font":ff(gt),"text-size":12},paint:{"text-halo-color":"white","text-halo-width":1}}):gt.addLayer({id:n,type:"symbol",source:n,layout:{"icon-image":"{image}","icon-size":r,"icon-allow-overlap":!0}}),()=>{gt.getLayer(n)&&gt.removeLayer(n),gt.getSource(n)&&gt.removeSource(n)}),[e]);function i(o){const a=[];return o.elements&&o.elements.forEach((s,l)=>{s.items.forEach((c,h)=>{a.push({...c,image:s.type,title:`${l}-${h}`})})}),o.bases&&o.bases.forEach((s,l)=>{a.push({...s,image:"base",title:l})}),a}return W.useEffect(()=>{var a;let o=i(t);(a=gt.getSource(n))==null||a.setData({type:"FeatureCollection",features:o.map(({latitude:s,longitude:l,image:c,title:h})=>({type:"Feature",geometry:{type:"Point",coordinates:[l,s]},properties:{image:c||"default-neutral",title:h||""}}))})},[e,t]),null},bse=({positions:t,onClick:e,showStatus:n,selectedPosition:r,titleField:i})=>{const o=W.useId(),a=`${o}-clusters`,s=`${o}-direction`,l=`${o}-mission`,c=mr(R=>R.devices.items),h=mr(R=>R.mission.route),p=1,g=!0,v=!1,x="all",b=(R,O,B)=>{const U=R[O.deviceId];let Z;switch(x){case"none":Z=!1;break;case"all":Z=!0;break;default:Z=B===O.id;break}let j=h.find(le=>le.uav==U.name),X=j?j.id:null;return{id:O.id,deviceId:O.deviceId,name:U.name,fixTime:ese(O.fixTime,"seconds",v),category:AP(U.category),color:n?nse(U.status):"neutral",rotation:O.course,direction:Z,mission:!!j,missionColor:X}},M=()=>gt.getCanvas().style.cursor="pointer",w=()=>gt.getCanvas().style.cursor="",T=W.useCallback(R=>{!R.defaultPrevented&&e&&e()},[e]),C=W.useCallback(R=>{R.preventDefault();const O=R.features[0];e&&e(O.properties.id,O.properties.deviceId)},[e]),I=W.useCallback(R=>{R.preventDefault();const O=gt.queryRenderedFeatures(R.point,{layers:[a]}),B=O[0].properties.cluster_id;gt.getSource(o).getClusterExpansionZoom(B,(U,Z)=>{U||gt.easeTo({center:O[0].geometry.coordinates,zoom:Z})})},[a]);return W.useEffect(()=>(gt.addSource(o,{type:"geojson",data:{type:"FeatureCollection",features:[]},cluster:g,clusterMaxZoom:14,clusterRadius:50}),gt.addLayer({id:o,type:"symbol",source:o,filter:["!has","point_count"],layout:{"icon-image":"{category}-{color}","icon-size":p,"icon-allow-overlap":!0,"text-field":`{${i||"name"}}`,"text-allow-overlap":!0,"text-anchor":"bottom","text-offset":[0,-2*p],"text-font":ff(gt),"text-size":12},paint:{"text-halo-color":"white","text-halo-width":1}}),gt.addLayer({id:a,type:"symbol",source:o,filter:["has","point_count"],layout:{"icon-image":"background","icon-size":p,"text-field":"{point_count_abbreviated}","text-font":ff(gt),"text-size":14}}),gt.addLayer({id:s,type:"symbol",source:o,filter:["all",["!has","point_count"],["==","direction",!0]],layout:{"icon-image":"direction","icon-size":p,"icon-allow-overlap":!0,"icon-rotate":["get","rotation"],"icon-rotation-alignment":"map"}}),gt.addLayer({id:l,type:"symbol",source:o,filter:["all",["!has","point_count"],["==","mission",!0]],layout:{"icon-image":"mission-{missionColor}","icon-size":p}}),gt.on("mouseenter",o,M),gt.on("mouseleave",o,w),gt.on("mouseenter",a,M),gt.on("mouseleave",a,w),gt.on("click",o,C),gt.on("click",a,I),gt.on("click",T),()=>{gt.off("mouseenter",o,M),gt.off("mouseleave",o,w),gt.off("mouseenter",a,M),gt.off("mouseleave",a,w),gt.off("click",o,C),gt.off("click",a,I),gt.off("click",T),gt.getLayer(o)&&gt.removeLayer(o),gt.getLayer(a)&&gt.removeLayer(a),gt.getLayer(s)&&gt.removeLayer(s),gt.getLayer(l)&&gt.removeLayer(l),gt.getSource(o)&&gt.removeSource(o)}),[g,a,s,l,C,I]),W.useEffect(()=>{gt.getSource(o).setData({type:"FeatureCollection",features:t.filter(R=>c.hasOwnProperty(R.deviceId)).map(R=>({type:"Feature",geometry:{type:"Point",coordinates:[R.longitude,R.latitude]},properties:b(c,R,r&&r.id)}))})},[c,t,r]),null},J$e=t=>{const e=W.useRef();return W.useEffect(()=>{e.current=t}),e.current},Q$e=()=>{const t=mr(o=>o.devices.selectedId),e=J$e(t),n=10,r=!1,i=mr(o=>o.data.positions[t]);return W.useEffect(()=>{(t!==e||r)&&i&&i.hasOwnProperty("latitude")&&gt.easeTo({center:[i.longitude,i.latitude],zoom:Math.max(gt.getZoom(),n),offset:[0,-300/2]})}),null},AU=()=>{const t="km",e=W.useMemo(()=>new m1.ScaleControl,[]);return W.useEffect(()=>(gt.addControl(e,"bottom-right"),()=>gt.removeControl(e)),[e]),W.useEffect(()=>{switch(t){case"mi":e.setUnit("imperial");break;case"nmi":e.setUnit("nautical");break;case"km":default:e.setUnit("metric");break}},[e,t]),null},PU=()=>{const t=mr(s=>s.devices.selectedId),e=mr(s=>s.session.positions),n=kA("latitude"),r=kA("longitude"),i=kA("zoom",10),[o,a]=W.useState(!1);return W.useEffect(()=>{if(console.log("default"+n+"kk"+r+o),t)a(!0);else if(!o)if(n&&r)gt.jumpTo({center:[r,n],zoom:i}),a(!0);else{const s=Object.values(e).map(l=>[l.longitude,l.latitude]);if(s.length>1){const l=s.reduce((h,p)=>h.extend(p),new m1.LngLatBounds(s[0],s[1])),c=gt.getCanvas();gt.fitBounds(l,{duration:0,padding:Math.min(c.width,c.height)*.1}),a(!0)}else if(s.length){const[l]=s;gt.jumpTo({center:l,zoom:Math.max(gt.getZoom(),10)}),a(!0)}}},[t,o,n,r,i,e]),null},wse=({filteredPositions:t,markers:e=[],selectedPosition:n,filteredMissiondeviceid:r=-1,onEventsClick:i})=>{const o=Zl(),a=W.useCallback((s,l)=>{o(tu.selectId(l))},[o]);return F.jsxs(F.Fragment,{children:[F.jsxs(uj,{children:[F.jsx(Z$e,{markers:e}),F.jsx(_se,{filtereddeviceid:r}),F.jsx(bse,{positions:t,onClick:a,selectedPosition:n,showStatus:!0}),F.jsx(Q$e,{}),F.jsx(PU,{})]}),F.jsx(AU,{})]})},eje=ri(t=>({root:{height:"100%"},sidebar:{pointerEvents:"none",display:"flex",flexDirection:"column",[t.breakpoints.up("md")]:{position:"fixed",left:0,top:0,height:`calc(100% - ${t.spacing(3)})`,width:t.dimensions.drawerWidthDesktop,margin:t.spacing(1.5),zIndex:3},[t.breakpoints.down("md")]:{height:"100%",width:"100%"}},header:{pointerEvents:"auto",zIndex:6},footer:{pointerEvents:"auto",zIndex:5},middle:{flex:1,display:"grid"},contentMap:{pointerEvents:"auto",gridArea:"1 / 1"},contentList:{pointerEvents:"auto",gridArea:"1 / 1",zIndex:4},sidebarStyle:{pointerEvents:"none",display:"flex",flexDirection:"column",position:"fixed",left:0,top:"88px",height:"calc(100% - 88px)",width:"360px",margin:"0px",zIndex:3},middleStyle:{flex:1,display:"grid"}})),tje=()=>{const t=eje(),e=Zl(),n=xd(),r=mr(ce=>ce.devices.items),i=mr(ce=>ce.data.positions),o=mr(ce=>ce.data.camera),a=mr(ce=>ce.devices.selectedId),s=mr(ce=>ce.session.markers),[l,c]=W.useState([]),[h,p]=W.useState([]),[g,v]=W.useState([]),[x,b]=W.useState(),[M,w]=W.useState(),[T,C]=W.useState(),[I,R]=W.useState(),O=`${window.location.hostname}`,B=l.find(ce=>a&&ce.deviceId===a),U=g.find(ce=>a&&ce.deviceId==a);let Z=Object.values(r);W.useContext(ly);const[j,X]=W.useState(!1),[le,me]=W.useState([]),ie=(ce,fe)=>{console.log(`${ce} - ${fe}`)};return W.useCallback((ce,fe)=>{e(tu.selectId(fe))},[e]),W.useEffect(()=>{p(s)},[s]),W.useEffect(()=>{c(Object.values(i))},[i]),W.useEffect(()=>{v(Object.values(o))},[o]),W.useEffect(()=>{a?(b(r[a].ip),r[a].camera.length>0?(w(r[a].camera[0].type),C(r[a].camera[0].source)):w(null),R(r[a].name)):(b(null),w(null))},[a]),F.jsx("div",{className:t.root,children:F.jsxs(xE,{notification:ie,children:[F.jsx(OR,{SetAddUAVOpen:X}),F.jsx(_E,{SetAddUAVOpen:X}),F.jsx("div",{style:{position:"relative",float:"right",width:"calc(100% - 360px)",height:"calc(100vh - 88px)"},children:F.jsx(wse,{filteredPositions:l,markers:h,selectedPosition:B})}),F.jsxs("div",{className:t.sidebarStyle,children:[F.jsx(Ls,{square:!0,elevation:3,className:t.header,children:F.jsx(xse,{SetAddUAVOpen:X})}),F.jsx("div",{className:t.middleStyle,children:F.jsx(Ls,{square:!0,className:t.contentList,children:F.jsx(rse,{devices:Z})})})]}),j&&F.jsx(ENe,{SetAddUAVOpen:X}),F.jsx(I$e,{deviceId:a,position:B,onClose:()=>e(tu.selectId(null)),desktopPadding:n.dimensions.drawerWidthDesktop}),F.jsx(ly.Consumer,{children:({confirmMission:ce,setconfirmMission:fe,commandMission:xe})=>F.jsx(B$e,{enable:ce,onClose:()=>fe(!1),onSucces:()=>xe()})}),M==="WebRTC"&&F.jsx(x7,{deviceId:a,deviceIp:O,camera_src:I+"_"+T,onClose:()=>e(tu.selectId(null))}),M==="WebRTC_env"&&F.jsx(x7,{deviceId:a,deviceIp:x,camera_src:T,onClose:()=>e(tu.selectId(null))}),M==="Websocket"&&F.jsx(kNe,{deviceId:a,datacamera:U,onClose:()=>e(tu.selectId(null))}),F.jsx(yNe,{toastlist:le,position:"buttom-right",setList:me})]})})},kU=Ze.createContext(),IU=({children:t})=>{const[e,n]=W.useState({route_id:-1,wp_id:-1});return F.jsx("div",{style:{width:"100%",height:"100%"},children:F.jsx(kU.Provider,{value:{changeWp:e,setChangeWp:n},children:t})})};class nje{constructor(){this.routes=[],this.selecwp={id:-1}}initroute(e){this.routes=JSON.parse(JSON.stringify(e))}getroute(){return this.routes}setroute(e){this.routes=e}getSelectwp(){return this.selecwp}setSelecwp(e){this.selecwp=e}}const rje=()=>{const t=W.useId(),e=`${t}-points`,n=`${t}-points-clusters`,r=mr(I=>I.mission.route);mr(I=>I.mission.selectpoint);const i=!0,o=.6,a=Zl(),[s,l]=W.useState(new nje),c=W.useContext(kU);let h=gt.getCanvasContainer();const p=()=>gt.getCanvas().style.cursor="move",g=()=>gt.getCanvas().style.cursor="",v=I=>{let R=I.lngLat;h.style.cursor="grabbing",console.log("on move point"+R.lng+"-"+R.lat);let O=s.getroute(),B=s.getSelectwp();B.id>=0&&(O[B.route_id].wp[B.id].pos[0]=I.lngLat.lat,O[B.route_id].wp[B.id].pos[1]=I.lngLat.lng);let U=C(O);gt.getSource(e).setData({type:"FeatureCollection",features:U.map(Z=>({type:"Feature",geometry:{type:"Point",coordinates:[Z.longitude,Z.latitude]},properties:w(O,Z)}))}),gt.getSource(t).setData({type:"FeatureCollection",features:O.map(Z=>T(Z))})},x=I=>{let R=I.lngLat;h.style.cursor="";let O=s.getSelectwp();console.log(`Longitude: ${R.lng} Latitude: ${R.lat}`),c.setChangeWp({wp_id:O.id,route_id:O.route_id,lng:I.lngLat.lng,lat:I.lngLat.lat}),s.setSelecwp({id:-1}),gt.off("mousemove",v),gt.off("touchmove",v)},b=I=>{I.preventDefault(),s.setSelecwp(I.features[0].properties),a(uh.selectpoint(I.features[0].properties)),h.style.cursor="grab",gt.on("mousemove",v),gt.once("mouseup",x)},M=I=>{I.points.length===1&&(console.log("touch start"),I.preventDefault(),gt.on("touchmove",v),gt.once("touchend",x))},w=(I,R)=>({id:R.id,route_id:R.routeid,name:I[R.routeid].name,uav:I[R.routeid].uav,latitude:I[R.routeid].wp[R.id].pos[0],longitude:I[R.routeid].wp[R.id].pos[1],altitud:I[R.routeid].wp[R.id].pos[2],yaw:I[R.routeid].wp[R.id].yaw,gimbal:I[R.routeid].wp[R.id].gimbal,actions:I[R.routeid].wp[R.id].action,attributes:I[R.routeid].attributes,category:"default",color:I[R.routeid].id});W.useEffect(()=>(console.log("render"),gt.addSource(e,{type:"geojson",data:{type:"FeatureCollection",features:[]},cluster:i,clusterMaxZoom:10,clusterRadius:50}),gt.addSource(t,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),gt.addLayer({source:t,id:"mission-line",type:"line",paint:{"line-color":["get","color"],"line-width":2}}),gt.addLayer({source:t,id:"mission-title",type:"symbol",layout:{"text-field":"{name}","text-font":ff(gt),"text-size":12},paint:{"text-halo-color":"white","text-halo-width":1}}),gt.addLayer({id:"mission-points",type:"symbol",source:e,filter:["!has","point_count"],layout:{"icon-image":"background-{color}","icon-size":o,"icon-allow-overlap":!0,"text-allow-overlap":!0,"text-field":"{id}","text-font":ff(gt),"text-size":14},paint:{"text-color":"white"}}),gt.addLayer({id:n,type:"symbol",source:e,filter:["has","point_count"],layout:{"icon-image":"background","icon-size":o,"text-field":"M","text-font":ff(gt),"text-size":14}}),gt.on("mouseenter","mission-points",p),gt.on("mouseleave","mission-points",g),gt.on("mousedown","mission-points",b),gt.on("touchstart","mission-points",M),()=>{gt.off("mouseenter","mission-points",p),gt.off("mouseleave","mission-points",g),gt.off("mousedown","mission-points",b),gt.off("touchstart","mission-points",M),gt.getLayer("mission-line")&&gt.removeLayer("mission-line"),gt.getLayer("mission-title")&&gt.removeLayer("mission-title"),gt.getLayer("mission-points")&&gt.removeLayer("mission-points"),gt.getLayer(n)&&gt.removeLayer(n),gt.getSource(t)&&gt.removeSource(t),gt.getSource(e)&&gt.removeSource(e)}),[]);function T(I){let R=Object.values(I.wp).map(function(O){return[O.pos[1],O.pos[0]]});return{id:I.id,type:"Feature",geometry:{type:"LineString",coordinates:R},properties:{name:I.uav,color:iy.colors_devices[I.id]}}}function C(I){let R=[];return I.map((O,B)=>{O.wp.map((U,Z)=>{R.push({longitude:U.pos[1],latitude:U.pos[0],id:Z,routeid:B})})}),R}return W.useEffect(()=>{console.log("Mapmission upload mission"),s.initroute(r);let I=C(r);gt.getSource(e).setData({type:"FeatureCollection",features:I.map(R=>({type:"Feature",geometry:{type:"Point",coordinates:[R.longitude,R.latitude]},properties:w(r,R)}))}),gt.getSource(t).setData({type:"FeatureCollection",features:r.map(R=>T(R))})},[r]),null};var RU={},ije=si;Object.defineProperty(RU,"__esModule",{value:!0});var Sse=RU.default=void 0,oje=ije(bi()),sje=F;Sse=RU.default=(0,oje.default)((0,sje.jsx)("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7"}),"MyLocation");const aje=ri(t=>({list:{maxHeight:"100%",overflow:"auto"},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)},attributeName:{display:"inline-block",width:"40%",textAlign:"left",verticalAlign:"middle"},attributeValue:{display:"inline-block",width:"58%"},actionValue:{display:"inline-block",width:"40%"}})),lje=({mission:t,setmission:e,index:n,index_wp:r,waypoint:i,expand_wp:o,AddnewWp:a})=>{const s=aje(),[l,c]=W.useState(!1),[h,p]=W.useState(!0),[g,v]=W.useState(0),[x,b]=W.useState(!1);W.useEffect(()=>{console.log("render waypoint"+n+"-"+r)},[]),W.useEffect(()=>{b(o)},[o]);const M=O=>(B,U)=>{b(U?O:!1)};async function w(O,B){let U;const Z=await fetch("/api/category/actions/dji_M210_noetic");if(Z.ok)U=await Z.json();else throw Error(await Z.text());let j=U.find(le=>le.id==g),X=JSON.parse(JSON.stringify(t.route));X[O].wp[B].hasOwnProperty("action")||(X[O].wp[B].action={}),j.param?X[O].wp[B].action[j.name]=0:X[O].wp[B].action[j.name]=!0,e({...t,route:X}),p(!0)}const T=(O,B)=>{console.log("remove wp"+O+"-"+B);let U=[...t.route],Z=[...t.route[O].wp];Z.splice(B,1);let j={...U[O],wp:Z};U[O]=j,e({...t,route:U})},C=(O,B,U)=>{console.log("remove action"+O+"-"+B+"-"+U);let Z=JSON.parse(JSON.stringify(t.route));delete Z[O].wp[B].action[U],e({...t,route:Z})},I=O=>(B,U)=>{c(U?O:!1)},R=O=>(B,U)=>{p(!1)};return F.jsxs(pl,{expanded:x==="wp "+r,onChange:M("wp "+r),children:[F.jsxs(gl,{expandIcon:F.jsx(Da,{}),children:[F.jsx(Bn,{sx:{width:"33%",flexShrink:0},children:"WP "+r}),F.jsx(wr,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>T(n,r),children:F.jsx(yu,{})})]}),F.jsx(ml,{className:s.details,children:x==="wp "+r&&F.jsxs(W.Fragment,{children:[F.jsxs(ws,{component:"form",sx:{"& .MuiTextField-root":{m:1}},children:[F.jsx("div",{children:F.jsx(Bn,{variant:"subtitle1",style:{display:"inline"},children:"Position"})}),F.jsx(gi,{required:!0,label:"Latitud ",type:"number",sx:{width:"15ch"},variant:"standard",inputProps:{maxLength:16,step:1e-4},value:i.pos?i.pos[0]:0,onChange:O=>e({...t,route:t.route.map(B=>{let U=JSON.parse(JSON.stringify(B));return B==t.route[n]?U.wp[r].pos[0]=+O.target.value:U=B,U})})}),F.jsx(gi,{required:!0,label:"Longitud ",type:"number",variant:"standard",sx:{width:"15ch"},inputProps:{maxLength:16,step:1e-4},value:i.pos?i.pos[1]:0,onChange:O=>e({...t,route:t.route.map(B=>{let U=JSON.parse(JSON.stringify(B));return B==t.route[n]?U.wp[r].pos[1]=+O.target.value:U=B,U})})}),F.jsx(gi,{required:!0,label:"altura ",type:"number",variant:"standard",sx:{width:"7ch"},value:i.pos?i.pos[2]:0,onChange:O=>e({...t,route:t.route.map(B=>{let U=JSON.parse(JSON.stringify(B));return B==t.route[n]?U.wp[r].pos[2]=+O.target.value:U=B,U})})})]}),F.jsx(gi,{required:!0,label:"Speed ",type:"number",variant:"standard",value:i.speed?i.speed:t.route[n].attributes.idle_vel,onChange:O=>e({...t,route:t.route.map(B=>{let U=JSON.parse(JSON.stringify(B));return t.route[n]?U.wp[r].speed=+O.target.value:U=B,U})})}),F.jsx(gi,{required:!0,label:"YAW ",type:"number",variant:"standard",value:i.yaw?i.yaw:0,onChange:O=>e({...t,route:t.route.map(B=>{let U=JSON.parse(JSON.stringify(B));return B==t.route[n]?U.wp[r].yaw=+O.target.value:U=B,U})})}),F.jsx(gi,{required:!0,label:"Gimbal ",type:"number",variant:"standard",value:i.gimbal?i.gimbal:0,onChange:O=>e({...t,route:t.route.map(B=>{let U=JSON.parse(JSON.stringify(B));return B==t.route[n]?U.wp[r].gimbal=+O.target.value:U=B,U})})}),F.jsxs(pl,{expanded:l==="wp "+r,onChange:I("wp "+r),children:[F.jsx(gl,{expandIcon:F.jsx(Da,{}),children:F.jsx(Bn,{sx:{width:"33%",flexShrink:0},children:"Actions"})}),F.jsxs(ml,{className:s.details,children:[i.action&&Ze.Children.toArray(Object.keys(i.action).map((O,B,U)=>F.jsxs(W.Fragment,{children:[F.jsxs("div",{children:[F.jsx(Bn,{variant:"subtitle1",className:s.attributeName,children:O}),F.jsx("div",{className:s.actionValue,children:F.jsx(gi,{required:!0,fullWidth:!0,value:i.action[O]?i.action[O]:0,onChange:Z=>e({...t,route:t.route.map(j=>{let X=JSON.parse(JSON.stringify(j));return j==t.route[n]?X.wp[r].action[O]=Z.target.value:X=j,X})})})}),F.jsx(wr,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>C(n,r,O),className:s.negative,children:F.jsx(yu,{})})]}),F.jsx(Eb,{})]},"fragment-action-"+B))),F.jsx(ws,{textAlign:"center",children:h?F.jsx(Gr,{variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:R(),children:"Add new action"}):F.jsxs("div",{children:[F.jsx(Bn,{variant:"subtitle1",children:"Tipo de acccion a añadir"}),F.jsx(Ju,{emptyValue:null,fullWidth:!0,value:g,onChange:O=>v(O.target.value),endpoint:"/api/category/actions/dji_M210_noetic",keyGetter:O=>O.id,titleGetter:O=>O.description}),F.jsxs("div",{children:[F.jsx(Gr,{onClick:()=>p(!0),children:"Cancel"}),F.jsx(Gr,{onClick:()=>w(n,r),children:"Add"})]})]})})]})]}),F.jsx(ws,{textAlign:"center",children:F.jsx(Gr,{variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:()=>a(n,r),children:"Add new Waypoint"})})]})})]})},cje=ri(t=>({list:{maxHeight:"100%",overflow:"auto"},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)},attribute:{display:"inline-block",width:"40%",textAlign:"left",verticalAlign:"middle"},attributeValue:{display:"inline-block",width:"58%"},actionValue:{display:"inline-block",width:"40%"}})),uje=({mission:t,setmission:e,setScrool:n})=>{const r=cje(),i=mr(R=>R.mission),o=mr(R=>R.mission.selectpoint),a=Zl(),[s,l]=W.useState(!1),[c,h]=W.useState(!1),[p,g]=W.useState(!1),[v,x]=W.useState(!0);W.useEffect(()=>{console.log("render Router list")},[]),W.useEffect(()=>{e(i),i.route.length>0?x(!1):x(!0),l(!0)},[i]),W.useEffect(()=>{s&&(console.log("update mission"),a(uh.reloadMission(t.route))),t.route.length>0?x(!1):x(!0)},[t.route]),W.useEffect(()=>{s&&a(uh.reloadName({name:t.name,description:t.description}))},[t.name,t.description]),W.useEffect(()=>{h("Rute "+o.route_id),g("wp "+o.id),n(500+o.route_id*50+o.id*50)},[o]);const b=()=>{e({name:"new Mission",description:"",route:[]}),x(!1),M(),console.log("add new mission")},M=()=>{let R=[...t.route],O=R.length>0?+R.slice(-1)[0].id+1:0,B={max_vel:12,idle_vel:3,mode_yaw:2,mode_gimbal:0,mode_trace:0,mode_landing:2};R.push({name:"",uav:"",id:O,attributes:B,wp:[]}),e({...t,route:R})},w=(R,O)=>{console.log("add new wp"+R);let B=JSON.parse(JSON.stringify(t.route)),U=gt.getCenter();O>0&&(U.lat=(B[R].wp[O].pos[0]+B[R].wp[O-1].pos[0])/2,U.lng=(B[R].wp[O].pos[1]+B[R].wp[O-1].pos[1])/2),O<0?B[R].wp.push({pos:[U.lat,U.lng,5],action:{}}):B[R].wp.splice(O,0,{pos:[U.lat,U.lng,5],action:{}}),e({...t,route:B})},T=R=>{console.log("remove route"+R);let O=JSON.parse(JSON.stringify(t.route));O.splice(R,1),e({...t,route:O})},C=R=>(O,B)=>{h(B?R:!1)},I=R=>(O,B)=>{g(B?R:!1)};return F.jsx(W.Fragment,{children:v?F.jsx(ws,{textAlign:"center",children:F.jsx(Gr,{variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:b,children:"Create New Mission"})}):F.jsx(W.Fragment,{children:F.jsxs(ws,{style:{display:"flex",gap:"10px",flexDirection:"column",margin:"20px"},children:[F.jsx(gi,{required:!0,label:"Name Mission",variant:"standard",value:t.name?t.name:" ",onChange:R=>e({...t,name:R.target.value})}),F.jsx(gi,{required:!0,label:"Description of mission",variant:"standard",value:t.description?t.description:" ",onChange:R=>e({...t,description:R.target.value})}),Ze.Children.toArray(Object.values(t.route).map((R,O,B)=>F.jsxs(W.Fragment,{children:[F.jsxs(pl,{expanded:c==="Rute "+O,onChange:C("Rute "+O),children:[F.jsxs(gl,{expandIcon:F.jsx(Da,{}),children:[F.jsx(Bn,{sx:{width:"33%",flexShrink:0,color:iy.colors_devices[R.id]},children:"Rute "+O}),F.jsx(Bn,{sx:{color:"text.secondary"},children:R.name+"- "+R.uav}),F.jsx(wr,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>T(O),children:F.jsx(yu,{})})]}),F.jsx(ml,{className:r.details,children:c==="Rute "+O&&F.jsxs(W.Fragment,{children:[F.jsx(gi,{required:!0,label:"Route Name",variant:"standard",value:R.name?R.name:"",onChange:U=>e({...t,route:t.route.map(Z=>Z==t.route[O]?{...R,name:U.target.value}:Z)})}),F.jsx(gi,{required:!0,label:"UAV id",variant:"standard",value:R.uav?R.uav:"uav_",onChange:U=>e({...t,route:t.route.map(Z=>Z==t.route[O]?{...R,uav:U.target.value}:Z)})}),F.jsx(Ju,{emptyValue:null,value:R.uav_type?R.uav_type:"",onChange:U=>e({...t,route:t.route.map(Z=>Z==t.route[O]?{...R,uav_type:U.target.value}:Z)}),endpoint:"/api/category",keyGetter:U=>U,titleGetter:U=>U,label:"Type UAV mission",style:{display:"inline",width:"200px"}}),F.jsxs(pl,{expanded:p==="wp -"+O,onChange:I("wp -"+O),children:[F.jsx(gl,{expandIcon:F.jsx(Da,{}),children:F.jsx(Bn,{sx:{width:"53%",flexShrink:0},children:"Route Attributes"})}),F.jsx(ml,{className:r.details,children:R.attributes&&F.jsxs(W.Fragment,{children:[F.jsxs("div",{children:[F.jsx(Bn,{variant:"subtitle1",className:r.attribute,children:"Speed Mode"}),F.jsx("div",{className:r.attributeValue,children:F.jsx(Ju,{emptyValue:null,fullWidth:!0,value:R.attributes.mode_speed?R.attributes.mode_speed:0,onChange:U=>e({...t,route:t.route.map(Z=>{let j=JSON.parse(JSON.stringify(Z));return Z===t.route[O]?j.attributes.mode_speed=U.target.value:j=Z,j})}),endpoint:"/api/category/atributesparam/dji_M300/mode_speed",keyGetter:U=>U.id,titleGetter:U=>U.name})})]}),F.jsxs("div",{children:[F.jsx(Bn,{variant:"subtitle1",className:r.attribute,children:"Speed idle (m/s):"}),F.jsx(gi,{fullWidth:!0,required:!0,type:"number",className:r.attributeValue,value:R.attributes.idle_vel?R.attributes.idle_vel:1.85,onChange:U=>e({...t,route:t.route.map(Z=>{let j=JSON.parse(JSON.stringify(Z));return Z==t.route[O]?j.attributes.idle_vel=+U.target.value:j=Z,j})})})]}),F.jsxs("div",{children:[F.jsx(Bn,{variant:"subtitle1",className:r.attribute,children:"Speed MAX (m/s):"}),F.jsx(gi,{fullWidth:!0,required:!0,type:"number",className:r.attributeValue,value:R.attributes.max_vel?R.attributes.max_vel:12,onChange:U=>e({...t,route:t.route.map(Z=>{let j=JSON.parse(JSON.stringify(Z));return Z==t.route[O]?j.attributes.max_vel=+U.target.value:j=Z,j})})})]}),F.jsxs("div",{children:[F.jsx(Bn,{variant:"subtitle1",className:r.attribute,children:"landing mode"}),F.jsx("div",{className:r.attributeValue,children:F.jsx(Ju,{emptyValue:null,fullWidth:!0,value:R.attributes.mode_landing?R.attributes.mode_landing:0,onChange:U=>e({...t,route:t.route.map(Z=>{let j=JSON.parse(JSON.stringify(Z));return Z===t.route[O]?j.attributes.mode_landing=U.target.value:j=Z,j})}),endpoint:"/api/category/atributesparam/dji_M300/mode_landing",keyGetter:U=>U.id,titleGetter:U=>U.name})})]}),F.jsxs("div",{children:[F.jsx(Bn,{variant:"subtitle1",className:r.attribute,children:"Yaw mode"}),F.jsx("div",{className:r.attributeValue,children:F.jsx(Ju,{emptyValue:null,fullWidth:!0,value:R.attributes.mode_yaw?R.attributes.mode_yaw:0,onChange:U=>e({...t,route:t.route.map(Z=>{let j=JSON.parse(JSON.stringify(Z));return Z===t.route[O]?j.attributes.mode_yaw=U.target.value:j=Z,j})}),endpoint:"/api/category/atributesparam/dji_M300/mode_yaw",keyGetter:U=>U.id,titleGetter:U=>U.name})})]}),F.jsxs("div",{children:[F.jsx(Bn,{variant:"subtitle1",className:r.attribute,children:"Gimbal mode"}),F.jsx("div",{className:r.attributeValue,children:F.jsx(Ju,{emptyValue:null,fullWidth:!0,value:R.attributes.mode_gimbal?R.attributes.mode_gimbal:0,onChange:U=>e({...t,route:t.route.map(Z=>{let j=JSON.parse(JSON.stringify(Z));return Z===t.route[O]?j.attributes.mode_gimbal=U.target.value:j=Z,j})}),endpoint:"/api/category/atributesparam/dji_M300/mode_gimbal",keyGetter:U=>U.id,titleGetter:U=>U.name})})]}),F.jsxs("div",{children:[F.jsx(Bn,{variant:"subtitle1",className:r.attribute,children:"Trace mode:"}),F.jsx("div",{className:r.attributeValue,children:F.jsx(Ju,{emptyValue:null,fullWidth:!0,value:R.attributes.mode_trace?R.attributes.mode_trace:0,onChange:U=>e({...t,route:t.route.map(Z=>{let j=JSON.parse(JSON.stringify(Z));return Z===t.route[O]?j.attributes.mode_trace=U.target.value:j=Z,j})}),endpoint:"/api/category/atributesparam/dji_M300/mode_trace",keyGetter:U=>U.id,titleGetter:U=>U.name})})]})]},"fragment-route-atri-"+R.id)})]}),F.jsx(Bn,{variant:"subtitle1",children:"Waypoints"}),Ze.Children.toArray(Object.values(R.wp).map((U,Z,j)=>F.jsx(lje,{mission:t,setmission:e,index_wp:Z,index:O,waypoint:U,AddnewWp:w,expand_wp:p}))),F.jsx(ws,{textAlign:"center",children:F.jsx(Gr,{value:O,variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:U=>w(U.target.value,-1),children:"Add new Waypoint"})})]})})]}),O<B.length-1?F.jsx(Eb,{}):null]},"fragment-route-"+O))),F.jsx(ws,{textAlign:"center",children:F.jsx(Gr,{variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:M,children:"Add new Route"})})]})})})};var OU={},dje=si;Object.defineProperty(OU,"__esModule",{value:!0});var E1=OU.default=void 0,fje=dje(bi()),hje=F;E1=OU.default=(0,fje.default)((0,hje.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack");var LU={},pje=si;Object.defineProperty(LU,"__esModule",{value:!0});var DU=LU.default=void 0,mje=pje(bi()),gje=F;DU=LU.default=(0,mje.default)((0,gje.jsx)("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7zm-6 .67 2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"}),"SaveAlt");const yje=ri(t=>({toolbar:{display:"flex",gap:"10px 10px",height:"30px",borderBottom:"3px solid rgb(212, 212, 212)"},list:{maxHeight:"calc(100vh - 152px)",overflowY:"auto"},title:{flexGrow:1},fileInput:{display:"none"}})),Mse=({SetOpenSave:t})=>{const e=yje(),n=rm(),r=W.useContext(ly),i=W.useRef(null),[o,a]=W.useState(!1),s=W.useContext(kU),l=()=>{a(b=>!b)},[c,h]=W.useState({name:"no mission",description:"",route:[]});W.useEffect(()=>{if(s.changeWp.route_id>=0)if(o){let b=JSON.parse(JSON.stringify(c.route)),M=s.changeWp.lat-b[s.changeWp.route_id].wp[s.changeWp.wp_id].pos[0],w=s.changeWp.lng-b[s.changeWp.route_id].wp[s.changeWp.wp_id].pos[1],T=b[s.changeWp.route_id].wp.map(C=>{let I=C;return I.pos[0]=M+C.pos[0],I.pos[1]=w+C.pos[1],I});b[s.changeWp.route_id].wp=T,h({...c,route:b})}else{let b=JSON.parse(JSON.stringify(c.route));b[s.changeWp.route_id].wp[s.changeWp.wp_id].pos[0]=s.changeWp.lat,b[s.changeWp.route_id].wp[s.changeWp.wp_id].pos[1]=s.changeWp.lng,h({...c,route:b})}},[s.changeWp]);const p=b=>{console.log("scrool"+b),i.current.scroll&&setTimeout(()=>{i.current.scroll(0,b)},1e3)},g=b=>{const M=b.target.files[0];if(!M)return;const w=new FileReader;w.readAsText(M),w.onload=()=>{console.log(w.result),console.log(M.name),r.openMision(M.name,w.result)},w.onerror=()=>{console.log(w.error)}},v=()=>{h({name:"no mission",description:"",route:[]})},x=()=>{console.log("save mission"),t(!0)};return F.jsxs(W.Fragment,{children:[F.jsxs(vy,{className:e.toolbar,children:[F.jsx(wr,{edge:"start",sx:{mr:2},onClick:()=>n(-1),children:F.jsx(E1,{})}),F.jsx(Bn,{variant:"h6",className:e.title,children:"Mission Task"}),F.jsx(Bn,{children:"Group Route"}),F.jsx(cre,{checked:o,onChange:l,name:"checkedA",inputProps:{"aria-label":"secondary checkbox"}}),F.jsx(wr,{onClick:x,children:F.jsx(DU,{})}),F.jsx(wr,{onClick:v,children:F.jsx(yu,{})}),F.jsxs("label",{htmlFor:"upload-gpx",children:[F.jsx("input",{accept:".yaml, .plan, .waypoint, .kml",id:"upload-gpx",type:"file",className:e.fileInput,onChange:g}),F.jsx(wr,{edge:"end",component:"span",onClick:()=>{},children:F.jsx(Cj,{})})]})]}),F.jsx("div",{ref:i,className:e.list,children:F.jsx(uje,{mission:c,setmission:h,setScrool:p})})]})};var vje=Array.isArray,kc=vje,xje=typeof a_=="object"&&a_&&a_.Object===Object&&a_,Ese=xje,_je=Ese,bje=typeof self=="object"&&self&&self.Object===Object&&self,wje=_je||bje||Function("return this")(),Fh=wje,Sje=Fh,Mje=Sje.Symbol,EE=Mje,_7=EE,Tse=Object.prototype,Eje=Tse.hasOwnProperty,Tje=Tse.toString,Uw=_7?_7.toStringTag:void 0;function Cje(t){var e=Eje.call(t,Uw),n=t[Uw];try{t[Uw]=void 0;var r=!0}catch{}var i=Tje.call(t);return r&&(e?t[Uw]=n:delete t[Uw]),i}var Aje=Cje,Pje=Object.prototype,kje=Pje.toString;function Ije(t){return kje.call(t)}var Rje=Ije,b7=EE,Oje=Aje,Lje=Rje,Dje="[object Null]",Nje="[object Undefined]",w7=b7?b7.toStringTag:void 0;function zje(t){return t==null?t===void 0?Nje:Dje:w7&&w7 in Object(t)?Oje(t):Lje(t)}var lm=zje;function Fje(t){return t!=null&&typeof t=="object"}var cm=Fje,Bje=lm,$je=cm,jje="[object Symbol]";function Uje(t){return typeof t=="symbol"||$je(t)&&Bje(t)==jje}var T1=Uje,Vje=kc,Wje=T1,Hje=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Gje=/^\w*$/;function qje(t,e){if(Vje(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Wje(t)?!0:Gje.test(t)||!Hje.test(t)||e!=null&&t in Object(e)}var NU=qje;function Yje(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var xy=Yje;const C1=_i(xy);var Xje=lm,Kje=xy,Zje="[object AsyncFunction]",Jje="[object Function]",Qje="[object GeneratorFunction]",eUe="[object Proxy]";function tUe(t){if(!Kje(t))return!1;var e=Xje(t);return e==Jje||e==Qje||e==Zje||e==eUe}var zU=tUe;const Kr=_i(zU);var nUe=Fh,rUe=nUe["__core-js_shared__"],iUe=rUe,P3=iUe,S7=function(){var t=/[^.]+$/.exec(P3&&P3.keys&&P3.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function oUe(t){return!!S7&&S7 in t}var sUe=oUe,aUe=Function.prototype,lUe=aUe.toString;function cUe(t){if(t!=null){try{return lUe.call(t)}catch{}try{return t+""}catch{}}return""}var Cse=cUe,uUe=zU,dUe=sUe,fUe=xy,hUe=Cse,pUe=/[\\^$.*+?()[\]{}|]/g,mUe=/^\[object .+?Constructor\]$/,gUe=Function.prototype,yUe=Object.prototype,vUe=gUe.toString,xUe=yUe.hasOwnProperty,_Ue=RegExp("^"+vUe.call(xUe).replace(pUe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function bUe(t){if(!fUe(t)||dUe(t))return!1;var e=uUe(t)?_Ue:mUe;return e.test(hUe(t))}var wUe=bUe;function SUe(t,e){return t==null?void 0:t[e]}var MUe=SUe,EUe=wUe,TUe=MUe;function CUe(t,e){var n=TUe(t,e);return EUe(n)?n:void 0}var G0=CUe,AUe=G0,PUe=AUe(Object,"create"),KR=PUe,M7=KR;function kUe(){this.__data__=M7?M7(null):{},this.size=0}var IUe=kUe;function RUe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var OUe=RUe,LUe=KR,DUe="__lodash_hash_undefined__",NUe=Object.prototype,zUe=NUe.hasOwnProperty;function FUe(t){var e=this.__data__;if(LUe){var n=e[t];return n===DUe?void 0:n}return zUe.call(e,t)?e[t]:void 0}var BUe=FUe,$Ue=KR,jUe=Object.prototype,UUe=jUe.hasOwnProperty;function VUe(t){var e=this.__data__;return $Ue?e[t]!==void 0:UUe.call(e,t)}var WUe=VUe,HUe=KR,GUe="__lodash_hash_undefined__";function qUe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=HUe&&e===void 0?GUe:e,this}var YUe=qUe,XUe=IUe,KUe=OUe,ZUe=BUe,JUe=WUe,QUe=YUe;function A1(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}A1.prototype.clear=XUe;A1.prototype.delete=KUe;A1.prototype.get=ZUe;A1.prototype.has=JUe;A1.prototype.set=QUe;var e6e=A1;function t6e(){this.__data__=[],this.size=0}var n6e=t6e;function r6e(t,e){return t===e||t!==t&&e!==e}var FU=r6e,i6e=FU;function o6e(t,e){for(var n=t.length;n--;)if(i6e(t[n][0],e))return n;return-1}var ZR=o6e,s6e=ZR,a6e=Array.prototype,l6e=a6e.splice;function c6e(t){var e=this.__data__,n=s6e(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():l6e.call(e,n,1),--this.size,!0}var u6e=c6e,d6e=ZR;function f6e(t){var e=this.__data__,n=d6e(e,t);return n<0?void 0:e[n][1]}var h6e=f6e,p6e=ZR;function m6e(t){return p6e(this.__data__,t)>-1}var g6e=m6e,y6e=ZR;function v6e(t,e){var n=this.__data__,r=y6e(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var x6e=v6e,_6e=n6e,b6e=u6e,w6e=h6e,S6e=g6e,M6e=x6e;function P1(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}P1.prototype.clear=_6e;P1.prototype.delete=b6e;P1.prototype.get=w6e;P1.prototype.has=S6e;P1.prototype.set=M6e;var JR=P1,E6e=G0,T6e=Fh,C6e=E6e(T6e,"Map"),BU=C6e,E7=e6e,A6e=JR,P6e=BU;function k6e(){this.size=0,this.__data__={hash:new E7,map:new(P6e||A6e),string:new E7}}var I6e=k6e;function R6e(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var O6e=R6e,L6e=O6e;function D6e(t,e){var n=t.__data__;return L6e(e)?n[typeof e=="string"?"string":"hash"]:n.map}var QR=D6e,N6e=QR;function z6e(t){var e=N6e(this,t).delete(t);return this.size-=e?1:0,e}var F6e=z6e,B6e=QR;function $6e(t){return B6e(this,t).get(t)}var j6e=$6e,U6e=QR;function V6e(t){return U6e(this,t).has(t)}var W6e=V6e,H6e=QR;function G6e(t,e){var n=H6e(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var q6e=G6e,Y6e=I6e,X6e=F6e,K6e=j6e,Z6e=W6e,J6e=q6e;function k1(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}k1.prototype.clear=Y6e;k1.prototype.delete=X6e;k1.prototype.get=K6e;k1.prototype.has=Z6e;k1.prototype.set=J6e;var $U=k1,Ase=$U,Q6e="Expected a function";function jU(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Q6e);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(jU.Cache||Ase),n}jU.Cache=Ase;var e8e=jU,t8e=e8e,n8e=500;function r8e(t){var e=t8e(t,function(r){return n.size===n8e&&n.clear(),r}),n=e.cache;return e}var i8e=r8e,o8e=i8e,s8e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a8e=/\\(\\)?/g,l8e=o8e(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(s8e,function(n,r,i,o){e.push(i?o.replace(a8e,"$1"):r||n)}),e}),c8e=l8e;function u8e(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var UU=u8e,T7=EE,d8e=UU,f8e=kc,h8e=T1,p8e=1/0,C7=T7?T7.prototype:void 0,A7=C7?C7.toString:void 0;function Pse(t){if(typeof t=="string")return t;if(f8e(t))return d8e(t,Pse)+"";if(h8e(t))return A7?A7.call(t):"";var e=t+"";return e=="0"&&1/t==-p8e?"-0":e}var m8e=Pse,g8e=m8e;function y8e(t){return t==null?"":g8e(t)}var kse=y8e,v8e=kc,x8e=NU,_8e=c8e,b8e=kse;function w8e(t,e){return v8e(t)?t:x8e(t,e)?[t]:_8e(b8e(t))}var Ise=w8e,S8e=T1,M8e=1/0;function E8e(t){if(typeof t=="string"||S8e(t))return t;var e=t+"";return e=="0"&&1/t==-M8e?"-0":e}var eO=E8e,T8e=Ise,C8e=eO;function A8e(t,e){e=T8e(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[C8e(e[n++])];return n&&n==r?t:void 0}var VU=A8e,P8e=VU;function k8e(t,e,n){var r=t==null?void 0:P8e(t,e);return r===void 0?n:r}var Rse=k8e;const ld=_i(Rse);function I8e(t){return t==null}var R8e=I8e;const oi=_i(R8e);var O8e=lm,L8e=kc,D8e=cm,N8e="[object String]";function z8e(t){return typeof t=="string"||!L8e(t)&&D8e(t)&&O8e(t)==N8e}var F8e=z8e;const TE=_i(F8e);var Ose={exports:{}},ji={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ga=typeof Symbol=="function"&&Symbol.for,WU=ga?Symbol.for("react.element"):60103,HU=ga?Symbol.for("react.portal"):60106,tO=ga?Symbol.for("react.fragment"):60107,nO=ga?Symbol.for("react.strict_mode"):60108,rO=ga?Symbol.for("react.profiler"):60114,iO=ga?Symbol.for("react.provider"):60109,oO=ga?Symbol.for("react.context"):60110,GU=ga?Symbol.for("react.async_mode"):60111,sO=ga?Symbol.for("react.concurrent_mode"):60111,aO=ga?Symbol.for("react.forward_ref"):60112,lO=ga?Symbol.for("react.suspense"):60113,B8e=ga?Symbol.for("react.suspense_list"):60120,cO=ga?Symbol.for("react.memo"):60115,uO=ga?Symbol.for("react.lazy"):60116,$8e=ga?Symbol.for("react.block"):60121,j8e=ga?Symbol.for("react.fundamental"):60117,U8e=ga?Symbol.for("react.responder"):60118,V8e=ga?Symbol.for("react.scope"):60119;function Mu(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case WU:switch(t=t.type,t){case GU:case sO:case tO:case rO:case nO:case lO:return t;default:switch(t=t&&t.$$typeof,t){case oO:case aO:case uO:case cO:case iO:return t;default:return e}}case HU:return e}}}function Lse(t){return Mu(t)===sO}ji.AsyncMode=GU;ji.ConcurrentMode=sO;ji.ContextConsumer=oO;ji.ContextProvider=iO;ji.Element=WU;ji.ForwardRef=aO;ji.Fragment=tO;ji.Lazy=uO;ji.Memo=cO;ji.Portal=HU;ji.Profiler=rO;ji.StrictMode=nO;ji.Suspense=lO;ji.isAsyncMode=function(t){return Lse(t)||Mu(t)===GU};ji.isConcurrentMode=Lse;ji.isContextConsumer=function(t){return Mu(t)===oO};ji.isContextProvider=function(t){return Mu(t)===iO};ji.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===WU};ji.isForwardRef=function(t){return Mu(t)===aO};ji.isFragment=function(t){return Mu(t)===tO};ji.isLazy=function(t){return Mu(t)===uO};ji.isMemo=function(t){return Mu(t)===cO};ji.isPortal=function(t){return Mu(t)===HU};ji.isProfiler=function(t){return Mu(t)===rO};ji.isStrictMode=function(t){return Mu(t)===nO};ji.isSuspense=function(t){return Mu(t)===lO};ji.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===tO||t===sO||t===rO||t===nO||t===lO||t===B8e||typeof t=="object"&&t!==null&&(t.$$typeof===uO||t.$$typeof===cO||t.$$typeof===iO||t.$$typeof===oO||t.$$typeof===aO||t.$$typeof===j8e||t.$$typeof===U8e||t.$$typeof===V8e||t.$$typeof===$8e)};ji.typeOf=Mu;Ose.exports=ji;var YF=Ose.exports,W8e=lm,H8e=cm,G8e="[object Number]";function q8e(t){return typeof t=="number"||H8e(t)&&W8e(t)==G8e}var Dse=q8e;const Y8e=_i(Dse);var X8e=Dse;function K8e(t){return X8e(t)&&t!=+t}var Z8e=K8e;const CE=_i(Z8e);var cf=function(e){return e===0?0:e>0?1:-1},Qv=function(e){return TE(e)&&e.indexOf("%")===e.length-1},Tn=function(e){return Y8e(e)&&!CE(e)},ta=function(e){return Tn(e)||TE(e)},J8e=0,AE=function(e){var n=++J8e;return"".concat(e||"").concat(n)},kb=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Tn(e)&&!TE(e))return r;var o;if(Qv(e)){var a=e.indexOf("%");o=n*parseFloat(e.slice(0,a))/100}else o=+e;return CE(o)&&(o=r),i&&o>n&&(o=n),o},mg=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},Q8e=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},nf=function(e,n){return Tn(e)&&Tn(n)?function(r){return e+r*(n-e)}:function(){return n}};function tk(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):ld(r,e))===n})}function tb(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function XF(t){"@babel/helpers - typeof";return XF=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XF(t)}var eVe=["viewBox","children"],tVe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],P7=["points","pathLength"],k3={svg:eVe,polygon:P7,polyline:P7},qU=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],nk=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(W.isValidElement(e)&&(r=e.props),!C1(r))return null;var i={};return Object.keys(r).forEach(function(o){qU.includes(o)&&(i[o]=n||function(a){return r[o](r,a)})}),i},nVe=function(e,n,r){return function(i){return e(n,r,i),null}},rk=function(e,n,r){if(!C1(e)||XF(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(o){var a=e[o];qU.includes(o)&&typeof a=="function"&&(i||(i={}),i[o]=nVe(a,n,r))}),i},rVe=["children"],iVe=["children"];function k7(t,e){if(t==null)return{};var n=oVe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function oVe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function KF(t){"@babel/helpers - typeof";return KF=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KF(t)}var I7={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},Np=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},R7=null,I3=null,YU=function t(e){if(e===R7&&Array.isArray(I3))return I3;var n=[];return W.Children.forEach(e,function(r){oi(r)||(YF.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),I3=n,R7=e,n};function cd(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Np(i)}):r=[Np(e)],YU(t).forEach(function(i){var o=ld(i,"type.displayName")||ld(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}function Ap(t,e){var n=cd(t,e);return n&&n[0]}var O7=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!Tn(r)||r<=0||!Tn(i)||i<=0)},sVe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],aVe=function(e){return e&&e.type&&TE(e.type)&&sVe.indexOf(e.type)>=0},lVe=function(e){return e&&KF(e)==="object"&&"cx"in e&&"cy"in e&&"r"in e},cVe=function(e,n,r,i){var o,a=(o=k3==null?void 0:k3[i])!==null&&o!==void 0?o:[];return!Kr(e)&&(i&&a.includes(n)||tVe.includes(n))||r&&qU.includes(n)},ni=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(W.isValidElement(e)&&(i=e.props),!C1(i))return null;var o={};return Object.keys(i).forEach(function(a){var s;cVe((s=i)===null||s===void 0?void 0:s[a],a,n,r)&&(o[a]=i[a])}),o},Nse=function t(e,n){if(e===n)return!0;var r=W.Children.count(e);if(r!==W.Children.count(n))return!1;if(r===0)return!0;if(r===1)return L7(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var o=e[i],a=n[i];if(Array.isArray(o)||Array.isArray(a)){if(!t(o,a))return!1}else if(!L7(o,a))return!1}return!0},L7=function(e,n){if(oi(e)&&oi(n))return!0;if(!oi(e)&&!oi(n)){var r=e.props||{},i=r.children,o=k7(r,rVe),a=n.props||{},s=a.children,l=k7(a,iVe);return i&&s?tb(o,l)&&Nse(i,s):!i&&!s?tb(o,l):!1}return!1},D7=function(e,n){var r=[],i={};return YU(e).forEach(function(o,a){if(aVe(o))r.push(o);else if(o){var s=Np(o.type),l=n[s]||{},c=l.handler,h=l.once;if(c&&(!h||!i[s])){var p=c(o,s,a);r.push(p),i[s]=!0}}}),r},uVe=function(e){var n=e&&e.type;return n&&I7[n]?I7[n]:null},dVe=function(e,n){return YU(n).indexOf(e)},fVe=["children","width","height","viewBox","className","style","title","desc"];function ZF(){return ZF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZF.apply(this,arguments)}function hVe(t,e){if(t==null)return{};var n=pVe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function pVe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function JF(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,o=t.className,a=t.style,s=t.title,l=t.desc,c=hVe(t,fVe),h=i||{width:n,height:r,x:0,y:0},p=Kt("recharts-surface",o);return Ze.createElement("svg",ZF({},ni(c,!0,"svg"),{className:p,width:n,height:r,style:a,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height)}),Ze.createElement("title",null,s),Ze.createElement("desc",null,l),e)}var mVe=["children","className"];function QF(){return QF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QF.apply(this,arguments)}function gVe(t,e){if(t==null)return{};var n=yVe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yVe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var bs=Ze.forwardRef(function(t,e){var n=t.children,r=t.className,i=gVe(t,mVe),o=Kt("recharts-layer",r);return Ze.createElement("g",QF({className:o},ni(i,!0),{ref:e}),n)}),m0=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function vVe(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}var xVe=vVe,_Ve=xVe;function bVe(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:_Ve(t,e,n)}var wVe=bVe,SVe="\\ud800-\\udfff",MVe="\\u0300-\\u036f",EVe="\\ufe20-\\ufe2f",TVe="\\u20d0-\\u20ff",CVe=MVe+EVe+TVe,AVe="\\ufe0e\\ufe0f",PVe="\\u200d",kVe=RegExp("["+PVe+SVe+CVe+AVe+"]");function IVe(t){return kVe.test(t)}var zse=IVe;function RVe(t){return t.split("")}var OVe=RVe,Fse="\\ud800-\\udfff",LVe="\\u0300-\\u036f",DVe="\\ufe20-\\ufe2f",NVe="\\u20d0-\\u20ff",zVe=LVe+DVe+NVe,FVe="\\ufe0e\\ufe0f",BVe="["+Fse+"]",eB="["+zVe+"]",tB="\\ud83c[\\udffb-\\udfff]",$Ve="(?:"+eB+"|"+tB+")",Bse="[^"+Fse+"]",$se="(?:\\ud83c[\\udde6-\\uddff]){2}",jse="[\\ud800-\\udbff][\\udc00-\\udfff]",jVe="\\u200d",Use=$Ve+"?",Vse="["+FVe+"]?",UVe="(?:"+jVe+"(?:"+[Bse,$se,jse].join("|")+")"+Vse+Use+")*",VVe=Vse+Use+UVe,WVe="(?:"+[Bse+eB+"?",eB,$se,jse,BVe].join("|")+")",HVe=RegExp(tB+"(?="+tB+")|"+WVe+VVe,"g");function GVe(t){return t.match(HVe)||[]}var qVe=GVe,YVe=OVe,XVe=zse,KVe=qVe;function ZVe(t){return XVe(t)?KVe(t):YVe(t)}var JVe=ZVe,QVe=wVe,eWe=zse,tWe=JVe,nWe=kse;function rWe(t){return function(e){e=nWe(e);var n=eWe(e)?tWe(e):void 0,r=n?n[0]:e.charAt(0),i=n?QVe(n,1).join(""):e.slice(1);return r[t]()+i}}var iWe=rWe,oWe=iWe,sWe=oWe("toUpperCase"),aWe=sWe;const dO=_i(aWe);function ho(t){return function(){return t}}const Wse=Math.cos,ik=Math.sin,_f=Math.sqrt,ok=Math.PI,fO=2*ok,nB=Math.PI,rB=2*nB,Nv=1e-6,lWe=rB-Nv;function Hse(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function cWe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Hse;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let uWe=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Hse:cWe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,l=r-e,c=i-n,h=a-e,p=s-n,g=h*h+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>Nv)if(!(Math.abs(p*l-c*h)>Nv)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let v=r-a,x=i-s,b=l*l+c*c,M=v*v+x*x,w=Math.sqrt(b),T=Math.sqrt(g),C=o*Math.tan((nB-Math.acos((b+g-M)/(2*w*T)))/2),I=C/T,R=C/w;Math.abs(I-1)>Nv&&this._append`L${e+I*h},${n+I*p}`,this._append`A${o},${o},0,0,${+(p*v>h*x)},${this._x1=e+R*l},${this._y1=n+R*c}`}}arc(e,n,r,i,o,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),c=e+s,h=n+l,p=1^a,g=a?i-o:o-i;this._x1===null?this._append`M${c},${h}`:(Math.abs(this._x1-c)>Nv||Math.abs(this._y1-h)>Nv)&&this._append`L${c},${h}`,r&&(g<0&&(g=g%rB+rB),g>lWe?this._append`A${r},${r},0,1,${p},${e-s},${n-l}A${r},${r},0,1,${p},${this._x1=c},${this._y1=h}`:g>Nv&&this._append`A${r},${r},0,${+(g>=nB)},${p},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function XU(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new uWe(e)}function KU(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Gse(t){this._context=t}Gse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function hO(t){return new Gse(t)}function qse(t){return t[0]}function Yse(t){return t[1]}function Xse(t,e){var n=ho(!0),r=null,i=hO,o=null,a=XU(s);t=typeof t=="function"?t:t===void 0?qse:ho(t),e=typeof e=="function"?e:e===void 0?Yse:ho(e);function s(l){var c,h=(l=KU(l)).length,p,g=!1,v;for(r==null&&(o=i(v=a())),c=0;c<=h;++c)!(c<h&&n(p=l[c],c,l))===g&&((g=!g)?o.lineStart():o.lineEnd()),g&&o.point(+t(p,c,l),+e(p,c,l));if(v)return o=null,v+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:ho(+l),s):t},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:ho(+l),s):e},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ho(!!l),s):n},s.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),s):r},s}function rC(t,e,n){var r=null,i=ho(!0),o=null,a=hO,s=null,l=XU(c);t=typeof t=="function"?t:t===void 0?qse:ho(+t),e=typeof e=="function"?e:ho(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Yse:ho(+n);function c(p){var g,v,x,b=(p=KU(p)).length,M,w=!1,T,C=new Array(b),I=new Array(b);for(o==null&&(s=a(T=l())),g=0;g<=b;++g){if(!(g<b&&i(M=p[g],g,p))===w)if(w=!w)v=g,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),x=g-1;x>=v;--x)s.point(C[x],I[x]);s.lineEnd(),s.areaEnd()}w&&(C[g]=+t(M,g,p),I[g]=+e(M,g,p),s.point(r?+r(M,g,p):C[g],n?+n(M,g,p):I[g]))}if(T)return s=null,T+""||null}function h(){return Xse().defined(i).curve(a).context(o)}return c.x=function(p){return arguments.length?(t=typeof p=="function"?p:ho(+p),r=null,c):t},c.x0=function(p){return arguments.length?(t=typeof p=="function"?p:ho(+p),c):t},c.x1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:ho(+p),c):r},c.y=function(p){return arguments.length?(e=typeof p=="function"?p:ho(+p),n=null,c):e},c.y0=function(p){return arguments.length?(e=typeof p=="function"?p:ho(+p),c):e},c.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:ho(+p),c):n},c.lineX0=c.lineY0=function(){return h().x(t).y(e)},c.lineY1=function(){return h().x(t).y(n)},c.lineX1=function(){return h().x(r).y(e)},c.defined=function(p){return arguments.length?(i=typeof p=="function"?p:ho(!!p),c):i},c.curve=function(p){return arguments.length?(a=p,o!=null&&(s=a(o)),c):a},c.context=function(p){return arguments.length?(p==null?o=s=null:s=a(o=p),c):o},c}class Kse{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function dWe(t){return new Kse(t,!0)}function fWe(t){return new Kse(t,!1)}const ZU={draw(t,e){const n=_f(e/ok);t.moveTo(n,0),t.arc(0,0,n,0,fO)}},hWe={draw(t,e){const n=_f(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Zse=_f(1/3),pWe=Zse*2,mWe={draw(t,e){const n=_f(e/pWe),r=n*Zse;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},gWe={draw(t,e){const n=_f(e),r=-n/2;t.rect(r,r,n,n)}},yWe=.8908130915292852,Jse=ik(ok/10)/ik(7*ok/10),vWe=ik(fO/10)*Jse,xWe=-Wse(fO/10)*Jse,_We={draw(t,e){const n=_f(e*yWe),r=vWe*n,i=xWe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const a=fO*o/5,s=Wse(a),l=ik(a);t.lineTo(l*n,-s*n),t.lineTo(s*r-l*i,l*r+s*i)}t.closePath()}},R3=_f(3),bWe={draw(t,e){const n=-_f(e/(R3*3));t.moveTo(0,n*2),t.lineTo(-R3*n,-n),t.lineTo(R3*n,-n),t.closePath()}},Uu=-.5,Vu=_f(3)/2,iB=1/_f(12),wWe=(iB/2+1)*3,SWe={draw(t,e){const n=_f(e/wWe),r=n/2,i=n*iB,o=r,a=n*iB+n,s=-o,l=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,l),t.lineTo(Uu*r-Vu*i,Vu*r+Uu*i),t.lineTo(Uu*o-Vu*a,Vu*o+Uu*a),t.lineTo(Uu*s-Vu*l,Vu*s+Uu*l),t.lineTo(Uu*r+Vu*i,Uu*i-Vu*r),t.lineTo(Uu*o+Vu*a,Uu*a-Vu*o),t.lineTo(Uu*s+Vu*l,Uu*l-Vu*s),t.closePath()}};function MWe(t,e){let n=null,r=XU(i);t=typeof t=="function"?t:ho(t||ZU),e=typeof e=="function"?e:ho(e===void 0?64:+e);function i(){let o;if(n||(n=o=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:ho(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:ho(+o),i):e},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function sk(){}function ak(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Qse(t){this._context=t}Qse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ak(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ak(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function EWe(t){return new Qse(t)}function eae(t){this._context=t}eae.prototype={areaStart:sk,areaEnd:sk,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:ak(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function TWe(t){return new eae(t)}function tae(t){this._context=t}tae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ak(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function CWe(t){return new tae(t)}function nae(t){this._context=t}nae.prototype={areaStart:sk,areaEnd:sk,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function AWe(t){return new nae(t)}function N7(t){return t<0?-1:1}function z7(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(N7(o)+N7(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function F7(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function O3(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function lk(t){this._context=t}lk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:O3(this,this._t0,F7(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,O3(this,F7(this,n=z7(this,t,e)),n);break;default:O3(this,this._t0,n=z7(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function rae(t){this._context=new iae(t)}(rae.prototype=Object.create(lk.prototype)).point=function(t,e){lk.prototype.point.call(this,e,t)};function iae(t){this._context=t}iae.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function PWe(t){return new lk(t)}function kWe(t){return new rae(t)}function oae(t){this._context=t}oae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=B7(t),i=B7(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function B7(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function IWe(t){return new oae(t)}function pO(t,e){this._context=t,this._t=e}pO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function RWe(t){return new pO(t,.5)}function OWe(t){return new pO(t,0)}function LWe(t){return new pO(t,1)}function Ib(t,e){if((a=t.length)>1)for(var n=1,r,i,o=t[e[0]],a,s=o.length;n<a;++n)for(i=o,o=t[e[n]],r=0;r<s;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function oB(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function DWe(t,e){return t[e]}function NWe(t){const e=[];return e.key=t,e}function zWe(){var t=ho([]),e=oB,n=Ib,r=DWe;function i(o){var a=Array.from(t.apply(this,arguments),NWe),s,l=a.length,c=-1,h;for(const p of o)for(s=0,++c;s<l;++s)(a[s][c]=[0,+r(p,a[s].key,c,o)]).data=p;for(s=0,h=KU(e(a));s<l;++s)a[h[s]].index=s;return n(a,h),a}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:ho(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:ho(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?oB:typeof o=="function"?o:ho(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??Ib,i):n},i}function FWe(t,e){if((r=t.length)>0){for(var n,r,i=0,o=t[0].length,a;i<o;++i){for(a=n=0;n<r;++n)a+=t[n][i][1]||0;if(a)for(n=0;n<r;++n)t[n][i][1]/=a}Ib(t,e)}}function BWe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,o=r.length;n<o;++n){for(var a=0,s=0;a<i;++a)s+=t[a][n][1]||0;r[n][1]+=r[n][0]=-s/2}Ib(t,e)}}function $We(t,e){if(!(!((a=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,o,a;r<o;++r){for(var s=0,l=0,c=0;s<a;++s){for(var h=t[e[s]],p=h[r][1]||0,g=h[r-1][1]||0,v=(p-g)/2,x=0;x<s;++x){var b=t[e[x]],M=b[r][1]||0,w=b[r-1][1]||0;v+=M-w}l+=p,c+=v*p}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,Ib(t,e)}}function FM(t){"@babel/helpers - typeof";return FM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FM(t)}var jWe=["type","size","sizeType"];function sB(){return sB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sB.apply(this,arguments)}function $7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function j7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$7(Object(n),!0).forEach(function(r){UWe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UWe(t,e,n){return e=VWe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VWe(t){var e=WWe(t,"string");return FM(e)==="symbol"?e:String(e)}function WWe(t,e){if(FM(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(FM(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HWe(t,e){if(t==null)return{};var n=GWe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function GWe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var sae={symbolCircle:ZU,symbolCross:hWe,symbolDiamond:mWe,symbolSquare:gWe,symbolStar:_We,symbolTriangle:bWe,symbolWye:SWe},qWe=Math.PI/180,YWe=function(e){var n="symbol".concat(dO(e));return sae[n]||ZU},XWe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*qWe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},KWe=function(e,n){sae["symbol".concat(dO(e))]=n},JU=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,o=i===void 0?64:i,a=e.sizeType,s=a===void 0?"area":a,l=HWe(e,jWe),c=j7(j7({},l),{},{type:r,size:o,sizeType:s}),h=function(){var M=YWe(r),w=MWe().type(M).size(XWe(o,s,r));return w()},p=c.className,g=c.cx,v=c.cy,x=ni(c,!0);return g===+g&&v===+v&&o===+o?Ze.createElement("path",sB({},x,{className:Kt("recharts-symbols",p),transform:"translate(".concat(g,", ").concat(v,")"),d:h()})):null};JU.registerSymbol=KWe;function Rb(t){"@babel/helpers - typeof";return Rb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rb(t)}function aB(){return aB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aB.apply(this,arguments)}function U7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ZWe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U7(Object(n),!0).forEach(function(r){BM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JWe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aae(r.key),r)}}function QWe(t,e,n){return e&&V7(t.prototype,e),n&&V7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function eHe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lB(t,e)}function lB(t,e){return lB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},lB(t,e)}function tHe(t){var e=iHe();return function(){var r=ck(t),i;if(e){var o=ck(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return nHe(this,i)}}function nHe(t,e){if(e&&(Rb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rHe(t)}function rHe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iHe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ck(t){return ck=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ck(t)}function BM(t,e,n){return e=aae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aae(t){var e=oHe(t,"string");return Rb(e)==="symbol"?e:String(e)}function oHe(t,e){if(Rb(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Rb(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wu=32,QU=function(t){eHe(n,t);var e=tHe(n);function n(){return JWe(this,n),e.apply(this,arguments)}return QWe(n,[{key:"renderIcon",value:function(i){var o=this.props.inactiveColor,a=Wu/2,s=Wu/6,l=Wu/3,c=i.inactive?o:i.color;if(i.type==="plainline")return Ze.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:i.payload.strokeDasharray,x1:0,y1:a,x2:Wu,y2:a,className:"recharts-legend-icon"});if(i.type==="line")return Ze.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(Wu,"M").concat(2*l,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(i.type==="rect")return Ze.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Wu/8,"h").concat(Wu,"v").concat(Wu*3/4,"h").concat(-Wu,"z"),className:"recharts-legend-icon"});if(Ze.isValidElement(i.legendIcon)){var h=ZWe({},i);return delete h.legendIcon,Ze.cloneElement(i.legendIcon,h)}return Ze.createElement(JU,{fill:c,cx:a,cy:a,size:Wu,sizeType:"diameter",type:i.type})}},{key:"renderItems",value:function(){var i=this,o=this.props,a=o.payload,s=o.iconSize,l=o.layout,c=o.formatter,h=o.inactiveColor,p={x:0,y:0,width:Wu,height:Wu},g={display:l==="horizontal"?"inline-block":"block",marginRight:10},v={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(x,b){var M,w=x.formatter||c,T=Kt((M={"recharts-legend-item":!0},BM(M,"legend-item-".concat(b),!0),BM(M,"inactive",x.inactive),M));if(x.type==="none")return null;var C=Kr(x.value)?null:x.value;m0(!Kr(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var I=x.inactive?h:x.color;return Ze.createElement("li",aB({className:T,style:g,key:"legend-item-".concat(b)},rk(i.props,x,b)),Ze.createElement(JF,{width:s,height:s,viewBox:p,style:v},i.renderIcon(x)),Ze.createElement("span",{className:"recharts-legend-item-text",style:{color:I}},w?w(C,x,b):C))})}},{key:"render",value:function(){var i=this.props,o=i.payload,a=i.layout,s=i.align;if(!o||!o.length)return null;var l={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return Ze.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}]),n}(W.PureComponent);BM(QU,"displayName","Legend");BM(QU,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var sHe=JR;function aHe(){this.__data__=new sHe,this.size=0}var lHe=aHe;function cHe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var uHe=cHe;function dHe(t){return this.__data__.get(t)}var fHe=dHe;function hHe(t){return this.__data__.has(t)}var pHe=hHe,mHe=JR,gHe=BU,yHe=$U,vHe=200;function xHe(t,e){var n=this.__data__;if(n instanceof mHe){var r=n.__data__;if(!gHe||r.length<vHe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new yHe(r)}return n.set(t,e),this.size=n.size,this}var _He=xHe,bHe=JR,wHe=lHe,SHe=uHe,MHe=fHe,EHe=pHe,THe=_He;function I1(t){var e=this.__data__=new bHe(t);this.size=e.size}I1.prototype.clear=wHe;I1.prototype.delete=SHe;I1.prototype.get=MHe;I1.prototype.has=EHe;I1.prototype.set=THe;var lae=I1,CHe="__lodash_hash_undefined__";function AHe(t){return this.__data__.set(t,CHe),this}var PHe=AHe;function kHe(t){return this.__data__.has(t)}var IHe=kHe,RHe=$U,OHe=PHe,LHe=IHe;function uk(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new RHe;++e<n;)this.add(t[e])}uk.prototype.add=uk.prototype.push=OHe;uk.prototype.has=LHe;var cae=uk;function DHe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var uae=DHe;function NHe(t,e){return t.has(e)}var dae=NHe,zHe=cae,FHe=uae,BHe=dae,$He=1,jHe=2;function UHe(t,e,n,r,i,o){var a=n&$He,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(t),h=o.get(e);if(c&&h)return c==e&&h==t;var p=-1,g=!0,v=n&jHe?new zHe:void 0;for(o.set(t,e),o.set(e,t);++p<s;){var x=t[p],b=e[p];if(r)var M=a?r(b,x,p,e,t,o):r(x,b,p,t,e,o);if(M!==void 0){if(M)continue;g=!1;break}if(v){if(!FHe(e,function(w,T){if(!BHe(v,T)&&(x===w||i(x,w,n,r,o)))return v.push(T)})){g=!1;break}}else if(!(x===b||i(x,b,n,r,o))){g=!1;break}}return o.delete(t),o.delete(e),g}var fae=UHe,VHe=Fh,WHe=VHe.Uint8Array,HHe=WHe;function GHe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var qHe=GHe;function YHe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var e6=YHe,W7=EE,H7=HHe,XHe=FU,KHe=fae,ZHe=qHe,JHe=e6,QHe=1,e9e=2,t9e="[object Boolean]",n9e="[object Date]",r9e="[object Error]",i9e="[object Map]",o9e="[object Number]",s9e="[object RegExp]",a9e="[object Set]",l9e="[object String]",c9e="[object Symbol]",u9e="[object ArrayBuffer]",d9e="[object DataView]",G7=W7?W7.prototype:void 0,L3=G7?G7.valueOf:void 0;function f9e(t,e,n,r,i,o,a){switch(n){case d9e:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case u9e:return!(t.byteLength!=e.byteLength||!o(new H7(t),new H7(e)));case t9e:case n9e:case o9e:return XHe(+t,+e);case r9e:return t.name==e.name&&t.message==e.message;case s9e:case l9e:return t==e+"";case i9e:var s=ZHe;case a9e:var l=r&QHe;if(s||(s=JHe),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;r|=e9e,a.set(t,e);var h=KHe(s(t),s(e),r,i,o,a);return a.delete(t),h;case c9e:if(L3)return L3.call(t)==L3.call(e)}return!1}var h9e=f9e;function p9e(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var hae=p9e,m9e=hae,g9e=kc;function y9e(t,e,n){var r=e(t);return g9e(t)?r:m9e(r,n(t))}var v9e=y9e;function x9e(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}var _9e=x9e;function b9e(){return[]}var w9e=b9e,S9e=_9e,M9e=w9e,E9e=Object.prototype,T9e=E9e.propertyIsEnumerable,q7=Object.getOwnPropertySymbols,C9e=q7?function(t){return t==null?[]:(t=Object(t),S9e(q7(t),function(e){return T9e.call(t,e)}))}:M9e,A9e=C9e;function P9e(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var k9e=P9e,I9e=lm,R9e=cm,O9e="[object Arguments]";function L9e(t){return R9e(t)&&I9e(t)==O9e}var D9e=L9e,Y7=D9e,N9e=cm,pae=Object.prototype,z9e=pae.hasOwnProperty,F9e=pae.propertyIsEnumerable,B9e=Y7(function(){return arguments}())?Y7:function(t){return N9e(t)&&z9e.call(t,"callee")&&!F9e.call(t,"callee")},t6=B9e,dk={exports:{}};function $9e(){return!1}var j9e=$9e;dk.exports;(function(t,e){var n=Fh,r=j9e,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a?n.Buffer:void 0,l=s?s.isBuffer:void 0,c=l||r;t.exports=c})(dk,dk.exports);var mae=dk.exports,U9e=9007199254740991,V9e=/^(?:0|[1-9]\d*)$/;function W9e(t,e){var n=typeof t;return e=e??U9e,!!e&&(n=="number"||n!="symbol"&&V9e.test(t))&&t>-1&&t%1==0&&t<e}var n6=W9e,H9e=9007199254740991;function G9e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=H9e}var r6=G9e,q9e=lm,Y9e=r6,X9e=cm,K9e="[object Arguments]",Z9e="[object Array]",J9e="[object Boolean]",Q9e="[object Date]",eGe="[object Error]",tGe="[object Function]",nGe="[object Map]",rGe="[object Number]",iGe="[object Object]",oGe="[object RegExp]",sGe="[object Set]",aGe="[object String]",lGe="[object WeakMap]",cGe="[object ArrayBuffer]",uGe="[object DataView]",dGe="[object Float32Array]",fGe="[object Float64Array]",hGe="[object Int8Array]",pGe="[object Int16Array]",mGe="[object Int32Array]",gGe="[object Uint8Array]",yGe="[object Uint8ClampedArray]",vGe="[object Uint16Array]",xGe="[object Uint32Array]",bo={};bo[dGe]=bo[fGe]=bo[hGe]=bo[pGe]=bo[mGe]=bo[gGe]=bo[yGe]=bo[vGe]=bo[xGe]=!0;bo[K9e]=bo[Z9e]=bo[cGe]=bo[J9e]=bo[uGe]=bo[Q9e]=bo[eGe]=bo[tGe]=bo[nGe]=bo[rGe]=bo[iGe]=bo[oGe]=bo[sGe]=bo[aGe]=bo[lGe]=!1;function _Ge(t){return X9e(t)&&Y9e(t.length)&&!!bo[q9e(t)]}var bGe=_Ge;function wGe(t){return function(e){return t(e)}}var gae=wGe,fk={exports:{}};fk.exports;(function(t,e){var n=Ese,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,a=o&&n.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();t.exports=s})(fk,fk.exports);var SGe=fk.exports,MGe=bGe,EGe=gae,X7=SGe,K7=X7&&X7.isTypedArray,TGe=K7?EGe(K7):MGe,yae=TGe,CGe=k9e,AGe=t6,PGe=kc,kGe=mae,IGe=n6,RGe=yae,OGe=Object.prototype,LGe=OGe.hasOwnProperty;function DGe(t,e){var n=PGe(t),r=!n&&AGe(t),i=!n&&!r&&kGe(t),o=!n&&!r&&!i&&RGe(t),a=n||r||i||o,s=a?CGe(t.length,String):[],l=s.length;for(var c in t)(e||LGe.call(t,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||IGe(c,l)))&&s.push(c);return s}var NGe=DGe,zGe=Object.prototype;function FGe(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||zGe;return t===n}var BGe=FGe;function $Ge(t,e){return function(n){return t(e(n))}}var vae=$Ge,jGe=vae,UGe=jGe(Object.keys,Object),VGe=UGe,WGe=BGe,HGe=VGe,GGe=Object.prototype,qGe=GGe.hasOwnProperty;function YGe(t){if(!WGe(t))return HGe(t);var e=[];for(var n in Object(t))qGe.call(t,n)&&n!="constructor"&&e.push(n);return e}var XGe=YGe,KGe=zU,ZGe=r6;function JGe(t){return t!=null&&ZGe(t.length)&&!KGe(t)}var PE=JGe,QGe=NGe,e7e=XGe,t7e=PE;function n7e(t){return t7e(t)?QGe(t):e7e(t)}var mO=n7e,r7e=v9e,i7e=A9e,o7e=mO;function s7e(t){return r7e(t,o7e,i7e)}var a7e=s7e,Z7=a7e,l7e=1,c7e=Object.prototype,u7e=c7e.hasOwnProperty;function d7e(t,e,n,r,i,o){var a=n&l7e,s=Z7(t),l=s.length,c=Z7(e),h=c.length;if(l!=h&&!a)return!1;for(var p=l;p--;){var g=s[p];if(!(a?g in e:u7e.call(e,g)))return!1}var v=o.get(t),x=o.get(e);if(v&&x)return v==e&&x==t;var b=!0;o.set(t,e),o.set(e,t);for(var M=a;++p<l;){g=s[p];var w=t[g],T=e[g];if(r)var C=a?r(T,w,g,e,t,o):r(w,T,g,t,e,o);if(!(C===void 0?w===T||i(w,T,n,r,o):C)){b=!1;break}M||(M=g=="constructor")}if(b&&!M){var I=t.constructor,R=e.constructor;I!=R&&"constructor"in t&&"constructor"in e&&!(typeof I=="function"&&I instanceof I&&typeof R=="function"&&R instanceof R)&&(b=!1)}return o.delete(t),o.delete(e),b}var f7e=d7e,h7e=G0,p7e=Fh,m7e=h7e(p7e,"DataView"),g7e=m7e,y7e=G0,v7e=Fh,x7e=y7e(v7e,"Promise"),_7e=x7e,b7e=G0,w7e=Fh,S7e=b7e(w7e,"Set"),xae=S7e,M7e=G0,E7e=Fh,T7e=M7e(E7e,"WeakMap"),C7e=T7e,cB=g7e,uB=BU,dB=_7e,fB=xae,hB=C7e,_ae=lm,R1=Cse,J7="[object Map]",A7e="[object Object]",Q7="[object Promise]",eq="[object Set]",tq="[object WeakMap]",nq="[object DataView]",P7e=R1(cB),k7e=R1(uB),I7e=R1(dB),R7e=R1(fB),O7e=R1(hB),zv=_ae;(cB&&zv(new cB(new ArrayBuffer(1)))!=nq||uB&&zv(new uB)!=J7||dB&&zv(dB.resolve())!=Q7||fB&&zv(new fB)!=eq||hB&&zv(new hB)!=tq)&&(zv=function(t){var e=_ae(t),n=e==A7e?t.constructor:void 0,r=n?R1(n):"";if(r)switch(r){case P7e:return nq;case k7e:return J7;case I7e:return Q7;case R7e:return eq;case O7e:return tq}return e});var L7e=zv,D3=lae,D7e=fae,N7e=h9e,z7e=f7e,rq=L7e,iq=kc,oq=mae,F7e=yae,B7e=1,sq="[object Arguments]",aq="[object Array]",iC="[object Object]",$7e=Object.prototype,lq=$7e.hasOwnProperty;function j7e(t,e,n,r,i,o){var a=iq(t),s=iq(e),l=a?aq:rq(t),c=s?aq:rq(e);l=l==sq?iC:l,c=c==sq?iC:c;var h=l==iC,p=c==iC,g=l==c;if(g&&oq(t)){if(!oq(e))return!1;a=!0,h=!1}if(g&&!h)return o||(o=new D3),a||F7e(t)?D7e(t,e,n,r,i,o):N7e(t,e,l,n,r,i,o);if(!(n&B7e)){var v=h&&lq.call(t,"__wrapped__"),x=p&&lq.call(e,"__wrapped__");if(v||x){var b=v?t.value():t,M=x?e.value():e;return o||(o=new D3),i(b,M,n,r,o)}}return g?(o||(o=new D3),z7e(t,e,n,r,i,o)):!1}var U7e=j7e,V7e=U7e,cq=cm;function bae(t,e,n,r,i){return t===e?!0:t==null||e==null||!cq(t)&&!cq(e)?t!==t&&e!==e:V7e(t,e,n,r,bae,i)}var i6=bae,W7e=lae,H7e=i6,G7e=1,q7e=2;function Y7e(t,e,n,r){var i=n.length,o=i,a=!r;if(t==null)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var l=s[0],c=t[l],h=s[1];if(a&&s[2]){if(c===void 0&&!(l in t))return!1}else{var p=new W7e;if(r)var g=r(c,h,l,t,e,p);if(!(g===void 0?H7e(h,c,G7e|q7e,r,p):g))return!1}}return!0}var X7e=Y7e,K7e=xy;function Z7e(t){return t===t&&!K7e(t)}var wae=Z7e,J7e=wae,Q7e=mO;function eqe(t){for(var e=Q7e(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,J7e(i)]}return e}var tqe=eqe;function nqe(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var Sae=nqe,rqe=X7e,iqe=tqe,oqe=Sae;function sqe(t){var e=iqe(t);return e.length==1&&e[0][2]?oqe(e[0][0],e[0][1]):function(n){return n===t||rqe(n,t,e)}}var aqe=sqe;function lqe(t,e){return t!=null&&e in Object(t)}var cqe=lqe,uqe=Ise,dqe=t6,fqe=kc,hqe=n6,pqe=r6,mqe=eO;function gqe(t,e,n){e=uqe(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=mqe(e[r]);if(!(o=t!=null&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&pqe(i)&&hqe(a,i)&&(fqe(t)||dqe(t)))}var yqe=gqe,vqe=cqe,xqe=yqe;function _qe(t,e){return t!=null&&xqe(t,e,vqe)}var bqe=_qe,wqe=i6,Sqe=Rse,Mqe=bqe,Eqe=NU,Tqe=wae,Cqe=Sae,Aqe=eO,Pqe=1,kqe=2;function Iqe(t,e){return Eqe(t)&&Tqe(e)?Cqe(Aqe(t),e):function(n){var r=Sqe(n,t);return r===void 0&&r===e?Mqe(n,t):wqe(e,r,Pqe|kqe)}}var Rqe=Iqe;function Oqe(t){return t}var O1=Oqe;function Lqe(t){return function(e){return e==null?void 0:e[t]}}var Dqe=Lqe,Nqe=VU;function zqe(t){return function(e){return Nqe(e,t)}}var Fqe=zqe,Bqe=Dqe,$qe=Fqe,jqe=NU,Uqe=eO;function Vqe(t){return jqe(t)?Bqe(Uqe(t)):$qe(t)}var Wqe=Vqe,Hqe=aqe,Gqe=Rqe,qqe=O1,Yqe=kc,Xqe=Wqe;function Kqe(t){return typeof t=="function"?t:t==null?qqe:typeof t=="object"?Yqe(t)?Gqe(t[0],t[1]):Hqe(t):Xqe(t)}var _y=Kqe;function Zqe(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var Mae=Zqe;function Jqe(t){return t!==t}var Qqe=Jqe;function eYe(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var tYe=eYe,nYe=Mae,rYe=Qqe,iYe=tYe;function oYe(t,e,n){return e===e?iYe(t,e,n):nYe(t,rYe,n)}var sYe=oYe,aYe=sYe;function lYe(t,e){var n=t==null?0:t.length;return!!n&&aYe(t,e,0)>-1}var cYe=lYe;function uYe(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var dYe=uYe;function fYe(){}var hYe=fYe,N3=xae,pYe=hYe,mYe=e6,gYe=1/0,yYe=N3&&1/mYe(new N3([,-0]))[1]==gYe?function(t){return new N3(t)}:pYe,vYe=yYe,xYe=cae,_Ye=cYe,bYe=dYe,wYe=dae,SYe=vYe,MYe=e6,EYe=200;function TYe(t,e,n){var r=-1,i=_Ye,o=t.length,a=!0,s=[],l=s;if(n)a=!1,i=bYe;else if(o>=EYe){var c=e?null:SYe(t);if(c)return MYe(c);a=!1,i=wYe,l=new xYe}else l=e?[]:s;e:for(;++r<o;){var h=t[r],p=e?e(h):h;if(h=n||h!==0?h:0,a&&p===p){for(var g=l.length;g--;)if(l[g]===p)continue e;e&&l.push(p),s.push(h)}else i(l,p,n)||(l!==s&&l.push(p),s.push(h))}return s}var CYe=TYe,AYe=_y,PYe=CYe;function kYe(t,e){return t&&t.length?PYe(t,AYe(e)):[]}var IYe=kYe;const uq=_i(IYe);function Eae(t,e,n){return e===!0?uq(t,n):Kr(e)?uq(t,e):t}function Ob(t){"@babel/helpers - typeof";return Ob=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ob(t)}var RYe=["ref"];function dq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dq(Object(n),!0).forEach(function(r){gO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OYe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Cae(r.key),r)}}function LYe(t,e,n){return e&&fq(t.prototype,e),n&&fq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function DYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pB(t,e)}function pB(t,e){return pB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},pB(t,e)}function NYe(t){var e=FYe();return function(){var r=hk(t),i;if(e){var o=hk(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return zYe(this,i)}}function zYe(t,e){if(e&&(Ob(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tae(t)}function Tae(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function FYe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function hk(t){return hk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hk(t)}function gO(t,e,n){return e=Cae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cae(t){var e=BYe(t,"string");return Ob(e)==="symbol"?e:String(e)}function BYe(t,e){if(Ob(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ob(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Ye(t,e){if(t==null)return{};var n=jYe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jYe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function UYe(t){return t.value}function VYe(t,e){if(Ze.isValidElement(t))return Ze.cloneElement(t,e);if(typeof t=="function")return Ze.createElement(t,e);e.ref;var n=$Ye(e,RYe);return Ze.createElement(QU,n)}var hq=1,Lb=function(t){DYe(n,t);var e=NYe(n);function n(){var r;OYe(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o)),gO(Tae(r),"lastBoundingBox",{width:-1,height:-1}),r}return LYe(n,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){return this.wrapperNode&&this.wrapperNode.getBoundingClientRect?this.wrapperNode.getBoundingClientRect():null}},{key:"updateBBox",value:function(){var i=this.props.onBBoxUpdate;if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var o=this.wrapperNode.getBoundingClientRect();(Math.abs(o.width-this.lastBoundingBox.width)>hq||Math.abs(o.height-this.lastBoundingBox.height)>hq)&&(this.lastBoundingBox.width=o.width,this.lastBoundingBox.height=o.height,i&&i(o))}else(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,i&&i(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?gv({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(i){var o=this.props,a=o.layout,s=o.align,l=o.verticalAlign,c=o.margin,h=o.chartWidth,p=o.chartHeight,g,v;if(!i||(i.left===void 0||i.left===null)&&(i.right===void 0||i.right===null))if(s==="center"&&a==="vertical"){var x=this.getBBoxSnapshot();g={left:((h||0)-x.width)/2}}else g=s==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!i||(i.top===void 0||i.top===null)&&(i.bottom===void 0||i.bottom===null))if(l==="middle"){var b=this.getBBoxSnapshot();v={top:((p||0)-b.height)/2}}else v=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return gv(gv({},g),v)}},{key:"render",value:function(){var i=this,o=this.props,a=o.content,s=o.width,l=o.height,c=o.wrapperStyle,h=o.payloadUniqBy,p=o.payload,g=gv(gv({position:"absolute",width:s||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return Ze.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:function(x){i.wrapperNode=x}},VYe(a,gv(gv({},this.props),{},{payload:Eae(p,h,UYe)})))}}],[{key:"getWithHeight",value:function(i,o){var a=i.props.layout;return a==="vertical"&&Tn(i.props.height)?{height:i.props.height}:a==="horizontal"?{width:i.props.width||o}:null}}]),n}(W.PureComponent);gO(Lb,"displayName","Legend");gO(Lb,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var pq=EE,WYe=t6,HYe=kc,mq=pq?pq.isConcatSpreadable:void 0;function GYe(t){return HYe(t)||WYe(t)||!!(mq&&t&&t[mq])}var qYe=GYe,YYe=hae,XYe=qYe;function Aae(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=XYe),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?Aae(s,e-1,n,r,i):YYe(i,s):r||(i[i.length]=s)}return i}var Pae=Aae;function KYe(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var l=a[t?s:++i];if(n(o[l],l,o)===!1)break}return e}}var ZYe=KYe,JYe=ZYe,QYe=JYe(),eXe=QYe,tXe=eXe,nXe=mO;function rXe(t,e){return t&&tXe(t,e,nXe)}var kae=rXe,iXe=PE;function oXe(t,e){return function(n,r){if(n==null)return n;if(!iXe(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}var sXe=oXe,aXe=kae,lXe=sXe,cXe=lXe(aXe),o6=cXe,uXe=o6,dXe=PE;function fXe(t,e){var n=-1,r=dXe(t)?Array(t.length):[];return uXe(t,function(i,o,a){r[++n]=e(i,o,a)}),r}var Iae=fXe;function hXe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var pXe=hXe,gq=T1;function mXe(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,o=gq(t),a=e!==void 0,s=e===null,l=e===e,c=gq(e);if(!s&&!c&&!o&&t>e||o&&a&&l&&!s&&!c||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0}var gXe=mXe,yXe=gXe;function vXe(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var l=yXe(i[r],o[r]);if(l){if(r>=s)return l;var c=n[r];return l*(c=="desc"?-1:1)}}return t.index-e.index}var xXe=vXe,z3=UU,_Xe=VU,bXe=_y,wXe=Iae,SXe=pXe,MXe=gae,EXe=xXe,TXe=O1,CXe=kc;function AXe(t,e,n){e.length?e=z3(e,function(o){return CXe(o)?function(a){return _Xe(a,o.length===1?o[0]:o)}:o}):e=[TXe];var r=-1;e=z3(e,MXe(bXe));var i=wXe(t,function(o,a,s){var l=z3(e,function(c){return c(o)});return{criteria:l,index:++r,value:o}});return SXe(i,function(o,a){return EXe(o,a,n)})}var PXe=AXe;function kXe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var IXe=kXe,RXe=IXe,yq=Math.max;function OXe(t,e,n){return e=yq(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=yq(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),RXe(t,this,s)}}var LXe=OXe;function DXe(t){return function(){return t}}var NXe=DXe,zXe=G0,FXe=function(){try{var t=zXe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Rae=FXe,BXe=NXe,vq=Rae,$Xe=O1,jXe=vq?function(t,e){return vq(t,"toString",{configurable:!0,enumerable:!1,value:BXe(e),writable:!0})}:$Xe,UXe=jXe,VXe=800,WXe=16,HXe=Date.now;function GXe(t){var e=0,n=0;return function(){var r=HXe(),i=WXe-(r-n);if(n=r,i>0){if(++e>=VXe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var qXe=GXe,YXe=UXe,XXe=qXe,KXe=XXe(YXe),ZXe=KXe,JXe=O1,QXe=LXe,eKe=ZXe;function tKe(t,e){return eKe(QXe(t,e,JXe),t+"")}var nKe=tKe,rKe=FU,iKe=PE,oKe=n6,sKe=xy;function aKe(t,e,n){if(!sKe(n))return!1;var r=typeof e;return(r=="number"?iKe(n)&&oKe(e,n.length):r=="string"&&e in n)?rKe(n[e],t):!1}var yO=aKe,lKe=Pae,cKe=PXe,uKe=nKe,xq=yO,dKe=uKe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&xq(t,e[0],e[1])?e=[]:n>2&&xq(e[0],e[1],e[2])&&(e=[e[0]]),cKe(t,lKe(e,1),[])}),fKe=dKe;const s6=_i(fKe);function $M(t){"@babel/helpers - typeof";return $M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$M(t)}function hKe(t,e){return yKe(t)||gKe(t,e)||mKe(t,e)||pKe()}function pKe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mKe(t,e){if(t){if(typeof t=="string")return _q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _q(t,e)}}function _q(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gKe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function yKe(t){if(Array.isArray(t))return t}function bq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function F3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bq(Object(n),!0).forEach(function(r){vKe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vKe(t,e,n){return e=xKe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xKe(t){var e=_Ke(t,"string");return $M(e)==="symbol"?e:String(e)}function _Ke(t,e){if($M(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if($M(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bKe(t){return Array.isArray(t)&&ta(t[0])&&ta(t[1])?t.join(" ~ "):t}var wKe=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,o=i===void 0?{}:i,a=e.itemStyle,s=a===void 0?{}:a,l=e.labelStyle,c=l===void 0?{}:l,h=e.payload,p=e.formatter,g=e.itemSorter,v=e.wrapperClassName,x=e.labelClassName,b=e.label,M=e.labelFormatter,w=function(){if(h&&h.length){var Z={padding:0,margin:0},j=(g?s6(h,g):h).map(function(X,le){if(X.type==="none")return null;var me=F3({display:"block",paddingTop:4,paddingBottom:4,color:X.color||"#000"},s),ie=X.formatter||p||bKe,ce=X.value,fe=X.name,xe=ce,te=fe;if(ie&&xe!=null&&te!=null){var he=ie(ce,fe,X,le,h);if(Array.isArray(he)){var ve=hKe(he,2);xe=ve[0],te=ve[1]}else xe=he}return Ze.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(le),style:me},ta(te)?Ze.createElement("span",{className:"recharts-tooltip-item-name"},te):null,ta(te)?Ze.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,Ze.createElement("span",{className:"recharts-tooltip-item-value"},xe),Ze.createElement("span",{className:"recharts-tooltip-item-unit"},X.unit||""))});return Ze.createElement("ul",{className:"recharts-tooltip-item-list",style:Z},j)}return null},T=F3({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),C=F3({margin:0},c),I=!oi(b),R=I?b:"",O=Kt("recharts-default-tooltip",v),B=Kt("recharts-tooltip-label",x);return I&&M&&h!==void 0&&h!==null&&(R=M(b,h)),Ze.createElement("div",{className:O,style:T},Ze.createElement("p",{className:B,style:C},Ze.isValidElement(R)?R:"".concat(R)),w())},SKe=Object.getOwnPropertyNames,MKe=Object.getOwnPropertySymbols,EKe=Object.prototype.hasOwnProperty;function wq(t,e){return function(r,i,o){return t(r,i,o)&&e(r,i,o)}}function oC(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var o=i.cache,a=o.get(n),s=o.get(r);if(a&&s)return a===r&&s===n;o.set(n,r),o.set(r,n);var l=t(n,r,i);return o.delete(n),o.delete(r),l}}function Sq(t){return SKe(t).concat(MKe(t))}var Oae=Object.hasOwn||function(t,e){return EKe.call(t,e)};function L1(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var Lae="_owner",Mq=Object.getOwnPropertyDescriptor,Eq=Object.keys;function TKe(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function CKe(t,e){return L1(t.getTime(),e.getTime())}function Tq(t,e,n){if(t.size!==e.size)return!1;for(var r={},i=t.entries(),o=0,a,s;(a=i.next())&&!a.done;){for(var l=e.entries(),c=!1,h=0;(s=l.next())&&!s.done;){var p=a.value,g=p[0],v=p[1],x=s.value,b=x[0],M=x[1];!c&&!r[h]&&(c=n.equals(g,b,o,h,t,e,n)&&n.equals(v,M,g,b,t,e,n))&&(r[h]=!0),h++}if(!c)return!1;o++}return!0}function AKe(t,e,n){var r=Eq(t),i=r.length;if(Eq(e).length!==i)return!1;for(var o;i-- >0;)if(o=r[i],o===Lae&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!Oae(e,o)||!n.equals(t[o],e[o],o,o,t,e,n))return!1;return!0}function Vw(t,e,n){var r=Sq(t),i=r.length;if(Sq(e).length!==i)return!1;for(var o,a,s;i-- >0;)if(o=r[i],o===Lae&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!Oae(e,o)||!n.equals(t[o],e[o],o,o,t,e,n)||(a=Mq(t,o),s=Mq(e,o),(a||s)&&(!a||!s||a.configurable!==s.configurable||a.enumerable!==s.enumerable||a.writable!==s.writable)))return!1;return!0}function PKe(t,e){return L1(t.valueOf(),e.valueOf())}function kKe(t,e){return t.source===e.source&&t.flags===e.flags}function Cq(t,e,n){if(t.size!==e.size)return!1;for(var r={},i=t.values(),o,a;(o=i.next())&&!o.done;){for(var s=e.values(),l=!1,c=0;(a=s.next())&&!a.done;)!l&&!r[c]&&(l=n.equals(o.value,a.value,o.value,a.value,t,e,n))&&(r[c]=!0),c++;if(!l)return!1}return!0}function IKe(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}var RKe="[object Arguments]",OKe="[object Boolean]",LKe="[object Date]",DKe="[object Map]",NKe="[object Number]",zKe="[object Object]",FKe="[object RegExp]",BKe="[object Set]",$Ke="[object String]",jKe=Array.isArray,Aq=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Pq=Object.assign,UKe=Object.prototype.toString.call.bind(Object.prototype.toString);function VKe(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areMapsEqual,i=t.areObjectsEqual,o=t.arePrimitiveWrappersEqual,a=t.areRegExpsEqual,s=t.areSetsEqual,l=t.areTypedArraysEqual;return function(h,p,g){if(h===p)return!0;if(h==null||p==null||typeof h!="object"||typeof p!="object")return h!==h&&p!==p;var v=h.constructor;if(v!==p.constructor)return!1;if(v===Object)return i(h,p,g);if(jKe(h))return e(h,p,g);if(Aq!=null&&Aq(h))return l(h,p,g);if(v===Date)return n(h,p,g);if(v===RegExp)return a(h,p,g);if(v===Map)return r(h,p,g);if(v===Set)return s(h,p,g);var x=UKe(h);return x===LKe?n(h,p,g):x===FKe?a(h,p,g):x===DKe?r(h,p,g):x===BKe?s(h,p,g):x===zKe?typeof h.then!="function"&&typeof p.then!="function"&&i(h,p,g):x===RKe?i(h,p,g):x===OKe||x===NKe||x===$Ke?o(h,p,g):!1}}function WKe(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?Vw:TKe,areDatesEqual:CKe,areMapsEqual:r?wq(Tq,Vw):Tq,areObjectsEqual:r?Vw:AKe,arePrimitiveWrappersEqual:PKe,areRegExpsEqual:kKe,areSetsEqual:r?wq(Cq,Vw):Cq,areTypedArraysEqual:r?Vw:IKe};if(n&&(i=Pq({},i,n(i))),e){var o=oC(i.areArraysEqual),a=oC(i.areMapsEqual),s=oC(i.areObjectsEqual),l=oC(i.areSetsEqual);i=Pq({},i,{areArraysEqual:o,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:l})}return i}function HKe(t){return function(e,n,r,i,o,a,s){return t(e,n,s)}}function GKe(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,o=t.strict;if(r)return function(l,c){var h=r(),p=h.cache,g=p===void 0?e?new WeakMap:void 0:p,v=h.meta;return n(l,c,{cache:g,equals:i,meta:v,strict:o})};if(e)return function(l,c){return n(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var a={cache:void 0,equals:i,meta:void 0,strict:o};return function(l,c){return n(l,c,a)}}var qKe=by();by({strict:!0});by({circular:!0});by({circular:!0,strict:!0});by({createInternalComparator:function(){return L1}});by({strict:!0,createInternalComparator:function(){return L1}});by({circular:!0,createInternalComparator:function(){return L1}});by({circular:!0,createInternalComparator:function(){return L1},strict:!0});function by(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,o=t.strict,a=o===void 0?!1:o,s=WKe(t),l=VKe(s),c=r?r(l):HKe(l);return GKe({circular:n,comparator:l,createState:i,equals:c,strict:a})}function YKe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function kq(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(o){n<0&&(n=o),o-n>e?(t(o),n=-1):YKe(i)};requestAnimationFrame(r)}function mB(t){"@babel/helpers - typeof";return mB=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mB(t)}function XKe(t){return QKe(t)||JKe(t)||ZKe(t)||KKe()}function KKe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZKe(t,e){if(t){if(typeof t=="string")return Iq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Iq(t,e)}}function Iq(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function JKe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function QKe(t){if(Array.isArray(t))return t}function eZe(){var t={},e=function(){return null},n=!1,r=function i(o){if(!n){if(Array.isArray(o)){if(!o.length)return;var a=o,s=XKe(a),l=s[0],c=s.slice(1);if(typeof l=="number"){kq(i.bind(null,c),l);return}i(l),kq(i.bind(null,c));return}mB(o)==="object"&&(t=o,e(t)),typeof o=="function"&&o()}};return{stop:function(){n=!0},start:function(o){n=!1,r(o)},subscribe:function(o){return e=o,function(){e=function(){return null}}}}}function jM(t){"@babel/helpers - typeof";return jM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jM(t)}function Rq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Db(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rq(Object(n),!0).forEach(function(r){pk(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pk(t,e,n){return e=tZe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tZe(t){var e=nZe(t,"string");return jM(e)==="symbol"?e:String(e)}function nZe(t,e){if(jM(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(jM(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rZe=["Webkit","Moz","O","ms"],iZe=["-webkit-","-moz-","-o-","-ms-"],oZe=["transform","transformOrigin","transition"],sZe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(o){return i.includes(o)})})},aZe=function(e){return e},lZe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},cZe=function(e,n){if(oZe.indexOf(e)===-1)return pk({},e,Number.isNaN(n)?0:n);var r=e==="transition",i=e.replace(/(\w)/,function(a){return a.toUpperCase()}),o=n;return rZe.reduce(function(a,s,l){return r&&(o=n.replace(/(transform|transform-origin)/gim,"".concat(iZe[l],"$1"))),Db(Db({},a),{},pk({},s+i,o))},{})},WS=function(e,n){return Object.keys(n).reduce(function(r,i){return Db(Db({},r),{},pk({},i,e(i,n[i])))},{})},a6=function(e){return Object.keys(e).reduce(function(n,r){return Db(Db({},n),cZe(r,n[r]))},e)},Oq=function(e,n,r){return e.map(function(i){return"".concat(lZe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function uZe(t,e){return hZe(t)||fZe(t,e)||Dae(t,e)||dZe()}function dZe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fZe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function hZe(t){if(Array.isArray(t))return t}function pZe(t){return yZe(t)||gZe(t)||Dae(t)||mZe()}function mZe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dae(t,e){if(t){if(typeof t=="string")return gB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gB(t,e)}}function gZe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yZe(t){if(Array.isArray(t))return gB(t)}function gB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var mk=1e-4,Nae=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},zae=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},Lq=function(e,n){return function(r){var i=Nae(e,n);return zae(i,r)}},vZe=function(e,n){return function(r){var i=Nae(e,n),o=[].concat(pZe(i.map(function(a,s){return a*s}).slice(1)),[0]);return zae(o,r)}},Dq=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],o=n[1],a=n[2],s=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,o=0,a=1,s=1;break;case"ease":i=.25,o=.1,a=.25,s=1;break;case"ease-in":i=.42,o=0,a=1,s=1;break;case"ease-out":i=.42,o=0,a=.58,s=1;break;case"ease-in-out":i=0,o=0,a=.58,s=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(M){return parseFloat(M)}),h=uZe(c,4);i=h[0],o=h[1],a=h[2],s=h[3]}}}var p=Lq(i,a),g=Lq(o,s),v=vZe(i,a),x=function(w){return w>1?1:w<0?0:w},b=function(w){for(var T=w>1?1:w,C=T,I=0;I<8;++I){var R=p(C)-T,O=v(C);if(Math.abs(R-T)<mk||O<mk)return g(C);C=x(C-R/O)}return g(C)};return b.isStepper=!1,b},xZe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,o=i===void 0?8:i,a=e.dt,s=a===void 0?17:a,l=function(h,p,g){var v=-(h-p)*r,x=g*o,b=g+(v-x)*s/1e3,M=g*s/1e3+h;return Math.abs(M-p)<mk&&Math.abs(b)<mk?[p,0]:[M,b]};return l.isStepper=!0,l.dt=s,l},_Ze=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Dq(i);case"spring":return xZe();default:if(i.split("(")[0]==="cubic-bezier")return Dq(i)}return typeof i=="function"?i:null};function UM(t){"@babel/helpers - typeof";return UM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UM(t)}function Nq(t){return SZe(t)||wZe(t)||Fae(t)||bZe()}function bZe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wZe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function SZe(t){if(Array.isArray(t))return vB(t)}function zq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ia(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zq(Object(n),!0).forEach(function(r){yB(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yB(t,e,n){return e=MZe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MZe(t){var e=EZe(t,"string");return UM(e)==="symbol"?e:String(e)}function EZe(t,e){if(UM(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(UM(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TZe(t,e){return PZe(t)||AZe(t,e)||Fae(t,e)||CZe()}function CZe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fae(t,e){if(t){if(typeof t=="string")return vB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vB(t,e)}}function vB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function AZe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function PZe(t){if(Array.isArray(t))return t}var gk=function(e,n,r){return e+(n-e)*r},xB=function(e){var n=e.from,r=e.to;return n!==r},kZe=function t(e,n,r){var i=WS(function(o,a){if(xB(a)){var s=e(a.from,a.to,a.velocity),l=TZe(s,2),c=l[0],h=l[1];return Ia(Ia({},a),{},{from:c,velocity:h})}return a},n);return r<1?WS(function(o,a){return xB(a)?Ia(Ia({},a),{},{velocity:gk(a.velocity,i[o].velocity,r),from:gk(a.from,i[o].from,r)}):a},n):t(e,i,r-1)};const IZe=function(t,e,n,r,i){var o=sZe(t,e),a=o.reduce(function(M,w){return Ia(Ia({},M),{},yB({},w,[t[w],e[w]]))},{}),s=o.reduce(function(M,w){return Ia(Ia({},M),{},yB({},w,{from:t[w],velocity:0,to:e[w]}))},{}),l=-1,c,h,p=function(){return null},g=function(){return WS(function(w,T){return T.from},s)},v=function(){return!Object.values(s).filter(xB).length},x=function(w){c||(c=w);var T=w-c,C=T/n.dt;s=kZe(n,s,C),i(Ia(Ia(Ia({},t),e),g())),c=w,v()||(l=requestAnimationFrame(p))},b=function(w){h||(h=w);var T=(w-h)/r,C=WS(function(R,O){return gk.apply(void 0,Nq(O).concat([n(T)]))},a);if(i(Ia(Ia(Ia({},t),e),C)),T<1)l=requestAnimationFrame(p);else{var I=WS(function(R,O){return gk.apply(void 0,Nq(O).concat([n(1)]))},a);i(Ia(Ia(Ia({},t),e),I))}};return p=n.isStepper?x:b,function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(l)}}};function Nb(t){"@babel/helpers - typeof";return Nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nb(t)}var RZe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function OZe(t,e){if(t==null)return{};var n=LZe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function LZe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function B3(t){return FZe(t)||zZe(t)||NZe(t)||DZe()}function DZe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NZe(t,e){if(t){if(typeof t=="string")return _B(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _B(t,e)}}function zZe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function FZe(t){if(Array.isArray(t))return _B(t)}function _B(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ud(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fq(Object(n),!0).forEach(function(r){bS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bS(t,e,n){return e=Bae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BZe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bae(r.key),r)}}function $Ze(t,e,n){return e&&Bq(t.prototype,e),n&&Bq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bae(t){var e=jZe(t,"string");return Nb(e)==="symbol"?e:String(e)}function jZe(t,e){if(Nb(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Nb(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function UZe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bB(t,e)}function bB(t,e){return bB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},bB(t,e)}function VZe(t){var e=WZe();return function(){var r=yk(t),i;if(e){var o=yk(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return wB(this,i)}}function wB(t,e){if(e&&(Nb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SB(t)}function SB(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WZe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function yk(t){return yk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yk(t)}var Xp=function(t){UZe(n,t);var e=VZe(n);function n(r,i){var o;BZe(this,n),o=e.call(this,r,i);var a=o.props,s=a.isActive,l=a.attributeName,c=a.from,h=a.to,p=a.steps,g=a.children,v=a.duration;if(o.handleStyleChange=o.handleStyleChange.bind(SB(o)),o.changeStyle=o.changeStyle.bind(SB(o)),!s||v<=0)return o.state={style:{}},typeof g=="function"&&(o.state={style:h}),wB(o);if(p&&p.length)o.state={style:p[0].style};else if(c){if(typeof g=="function")return o.state={style:c},wB(o);o.state={style:l?bS({},l,c):c}}else o.state={style:{}};return o}return $Ze(n,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,a=i.canBegin;this.mounted=!0,!(!o||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,a=o.isActive,s=o.canBegin,l=o.attributeName,c=o.shouldReAnimate,h=o.to,p=o.from,g=this.state.style;if(s){if(!a){var v={style:l?bS({},l,h):h};this.state&&g&&(l&&g[l]!==h||!l&&g!==h)&&this.setState(v);return}if(!(qKe(i.to,h)&&i.canBegin&&i.isActive)){var x=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var b=x||c?p:i.to;if(this.state&&g){var M={style:l?bS({},l,b):b};(l&&[l]!==b||!l&&g!==b)&&this.setState(M)}this.runAnimation(Ud(Ud({},this.props),{},{from:b,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,a=i.from,s=i.to,l=i.duration,c=i.easing,h=i.begin,p=i.onAnimationEnd,g=i.onAnimationStart,v=IZe(a,s,_Ze(c),l,this.changeStyle),x=function(){o.stopJSAnimation=v()};this.manager.start([g,h,x,l,p])}},{key:"runStepAnimation",value:function(i){var o=this,a=i.steps,s=i.begin,l=i.onAnimationStart,c=a[0],h=c.style,p=c.duration,g=p===void 0?0:p,v=function(b,M,w){if(w===0)return b;var T=M.duration,C=M.easing,I=C===void 0?"ease":C,R=M.style,O=M.properties,B=M.onAnimationEnd,U=w>0?a[w-1]:M,Z=O||Object.keys(R);if(typeof I=="function"||I==="spring")return[].concat(B3(b),[o.runJSAnimation.bind(o,{from:U.style,to:R,duration:T,easing:I}),T]);var j=Oq(Z,T,I),X=Ud(Ud(Ud({},U.style),R),{},{transition:j});return[].concat(B3(b),[X,T,B]).filter(aZe)};return this.manager.start([l].concat(B3(a.reduce(v,[h,Math.max(g,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=eZe());var o=i.begin,a=i.duration,s=i.attributeName,l=i.to,c=i.easing,h=i.onAnimationStart,p=i.onAnimationEnd,g=i.steps,v=i.children,x=this.manager;if(this.unSubscribe=x.subscribe(this.handleStyleChange),typeof c=="function"||typeof v=="function"||c==="spring"){this.runJSAnimation(i);return}if(g.length>1){this.runStepAnimation(i);return}var b=s?bS({},s,l):l,M=Oq(Object.keys(b),a,c);x.start([h,o,Ud(Ud({},b),{},{transition:M}),a,p])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=OZe(i,RZe),c=W.Children.count(o),h=a6(this.state.style);if(typeof o=="function")return o(h);if(!s||c===0||a<=0)return o;var p=function(v){var x=v.props,b=x.style,M=b===void 0?{}:b,w=x.className,T=W.cloneElement(v,Ud(Ud({},l),{},{style:Ud(Ud({},M),h),className:w}));return T};return c===1?p(W.Children.only(o)):Ze.createElement("div",null,W.Children.map(o,function(g){return p(g)}))}}]),n}(W.PureComponent);Xp.displayName="Animate";Xp.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Xp.propTypes={from:Fr.oneOfType([Fr.object,Fr.string]),to:Fr.oneOfType([Fr.object,Fr.string]),attributeName:Fr.string,duration:Fr.number,begin:Fr.number,easing:Fr.oneOfType([Fr.string,Fr.func]),steps:Fr.arrayOf(Fr.shape({duration:Fr.number.isRequired,style:Fr.object.isRequired,easing:Fr.oneOfType([Fr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Fr.func]),properties:Fr.arrayOf("string"),onAnimationEnd:Fr.func})),children:Fr.oneOfType([Fr.node,Fr.func]),isActive:Fr.bool,canBegin:Fr.bool,onAnimationEnd:Fr.func,shouldReAnimate:Fr.bool,onAnimationStart:Fr.func,onAnimationReStart:Fr.func};Number.isFinite===void 0&&(Number.isFinite=function(t){return typeof t=="number"&&isFinite(t)});Fr.object,Fr.object,Fr.object,Fr.element;Fr.object,Fr.object,Fr.object,Fr.oneOfType([Fr.array,Fr.element]),Fr.any;function VM(t){"@babel/helpers - typeof";return VM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VM(t)}function sC(t,e,n){return e=HZe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HZe(t){var e=GZe(t,"string");return VM(e)==="symbol"?e:String(e)}function GZe(t,e){if(VM(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(VM(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ww="recharts-tooltip-wrapper",qZe={visibility:"hidden"};function YZe(t){var e,n=t.coordinate,r=t.translateX,i=t.translateY;return Kt(Ww,(e={},sC(e,"".concat(Ww,"-right"),Tn(r)&&n&&Tn(n.x)&&r>=n.x),sC(e,"".concat(Ww,"-left"),Tn(r)&&n&&Tn(n.x)&&r<n.x),sC(e,"".concat(Ww,"-bottom"),Tn(i)&&n&&Tn(n.y)&&i>=n.y),sC(e,"".concat(Ww,"-top"),Tn(i)&&n&&Tn(n.y)&&i<n.y),e))}function $q(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,o=t.position,a=t.reverseDirection,s=t.tooltipDimension,l=t.viewBox,c=t.viewBoxDimension;if(o&&Tn(o[r]))return o[r];var h=n[r]-s-i,p=n[r]+i;if(e[r])return a[r]?h:p;if(a[r]){var g=h,v=l[r];return g<v?Math.max(p,l[r]):Math.max(h,l[r])}var x=p+s,b=l[r]+c;return x>b?Math.max(h,l[r]):Math.max(p,l[r])}function XZe(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return a6({transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")})}function KZe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,o=t.reverseDirection,a=t.tooltipBox,s=t.useTranslate3d,l=t.viewBox,c,h,p;return a.height>0&&a.width>0&&n?(h=$q({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.width,viewBox:l,viewBoxDimension:l.width}),p=$q({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.height,viewBox:l,viewBoxDimension:l.height}),c=XZe({translateX:h,translateY:p,useTranslate3d:s})):c=qZe,{cssProperties:c,cssClasses:YZe({translateX:h,translateY:p,coordinate:n})}}function zb(t){"@babel/helpers - typeof";return zb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zb(t)}function jq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jq(Object(n),!0).forEach(function(r){$A(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZZe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Uq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$ae(r.key),r)}}function JZe(t,e,n){return e&&Uq(t.prototype,e),n&&Uq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function QZe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MB(t,e)}function MB(t,e){return MB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},MB(t,e)}function eJe(t){var e=nJe();return function(){var r=vk(t),i;if(e){var o=vk(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return tJe(this,i)}}function tJe(t,e){if(e&&(zb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BA(t)}function BA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nJe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function vk(t){return vk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vk(t)}function $A(t,e,n){return e=$ae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ae(t){var e=rJe(t,"string");return zb(e)==="symbol"?e:String(e)}function rJe(t,e){if(zb(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(zb(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vq=1,iJe=function(t){QZe(n,t);var e=eJe(n);function n(){var r;ZZe(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o)),$A(BA(r),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),$A(BA(r),"lastBoundingBox",{width:-1,height:-1}),$A(BA(r),"handleKeyDown",function(s){if(s.key==="Escape"){var l,c,h,p;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(h=(p=r.props.coordinate)===null||p===void 0?void 0:p.y)!==null&&h!==void 0?h:0}})}}),r}return JZe(n,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var i=this.wrapperNode.getBoundingClientRect();(Math.abs(i.width-this.lastBoundingBox.width)>Vq||Math.abs(i.height-this.lastBoundingBox.height)>Vq)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height)}else(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1)}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var i,o;this.props.active&&this.updateBBox(),this.state.dismissed&&(((i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==this.state.dismissedAtCoordinate.x||((o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var i=this,o=this.props,a=o.active,s=o.allowEscapeViewBox,l=o.animationDuration,c=o.animationEasing,h=o.children,p=o.coordinate,g=o.hasPayload,v=o.isAnimationActive,x=o.offset,b=o.position,M=o.reverseDirection,w=o.useTranslate3d,T=o.viewBox,C=o.wrapperStyle,I=KZe({allowEscapeViewBox:s,coordinate:p,offsetTopLeft:x,position:b,reverseDirection:M,tooltipBox:{height:this.lastBoundingBox.height,width:this.lastBoundingBox.width},useTranslate3d:w,viewBox:T}),R=I.cssClasses,O=I.cssProperties,B=$3($3($3({},v&&a&&a6({transition:"transform ".concat(l,"ms ").concat(c)})),O),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&g?"visible":"hidden",position:"absolute",top:0,left:0},C);return Ze.createElement("div",{tabIndex:-1,role:"dialog",className:R,style:B,ref:function(Z){i.wrapperNode=Z}},h)}}]),n}(W.PureComponent),oJe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},zp={isSsr:oJe(),get:function(e){return zp[e]},set:function(e,n){if(typeof e=="string")zp[e]=n;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(i){zp[i]=e[i]})}}};function Fb(t){"@babel/helpers - typeof";return Fb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fb(t)}function Wq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Hq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wq(Object(n),!0).forEach(function(r){l6(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sJe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jae(r.key),r)}}function aJe(t,e,n){return e&&Gq(t.prototype,e),n&&Gq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function lJe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EB(t,e)}function EB(t,e){return EB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},EB(t,e)}function cJe(t){var e=fJe();return function(){var r=xk(t),i;if(e){var o=xk(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return uJe(this,i)}}function uJe(t,e){if(e&&(Fb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dJe(t)}function dJe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fJe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xk(t){return xk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xk(t)}function l6(t,e,n){return e=jae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jae(t){var e=hJe(t,"string");return Fb(e)==="symbol"?e:String(e)}function hJe(t,e){if(Fb(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Fb(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pJe(t){return t.dataKey}function mJe(t,e){return Ze.isValidElement(t)?Ze.cloneElement(t,e):typeof t=="function"?Ze.createElement(t,e):Ze.createElement(wKe,e)}var e0=function(t){lJe(n,t);var e=cJe(n);function n(){return sJe(this,n),e.apply(this,arguments)}return aJe(n,[{key:"render",value:function(){var i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,c=i.content,h=i.coordinate,p=i.filterNull,g=i.isAnimationActive,v=i.offset,x=i.payload,b=i.payloadUniqBy,M=i.position,w=i.reverseDirection,T=i.useTranslate3d,C=i.viewBox,I=i.wrapperStyle,R=x??[];p&&R.length&&(R=Eae(x.filter(function(B){return B.value!=null}),b,pJe));var O=R.length>0;return Ze.createElement(iJe,{allowEscapeViewBox:a,animationDuration:s,animationEasing:l,isAnimationActive:g,active:o,coordinate:h,hasPayload:O,offset:v,position:M,reverseDirection:w,useTranslate3d:T,viewBox:C,wrapperStyle:I},mJe(c,Hq(Hq({},this.props),{},{payload:R})))}}]),n}(W.PureComponent);l6(e0,"displayName","Tooltip");l6(e0,"defaultProps",{allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!zp.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var gJe=Fh,yJe=function(){return gJe.Date.now()},vJe=yJe,xJe=/\s/;function _Je(t){for(var e=t.length;e--&&xJe.test(t.charAt(e)););return e}var bJe=_Je,wJe=bJe,SJe=/^\s+/;function MJe(t){return t&&t.slice(0,wJe(t)+1).replace(SJe,"")}var EJe=MJe,TJe=EJe,qq=xy,CJe=T1,Yq=NaN,AJe=/^[-+]0x[0-9a-f]+$/i,PJe=/^0b[01]+$/i,kJe=/^0o[0-7]+$/i,IJe=parseInt;function RJe(t){if(typeof t=="number")return t;if(CJe(t))return Yq;if(qq(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=qq(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=TJe(t);var n=PJe.test(t);return n||kJe.test(t)?IJe(t.slice(2),n?2:8):AJe.test(t)?Yq:+t}var Uae=RJe,OJe=xy,j3=vJe,Xq=Uae,LJe="Expected a function",DJe=Math.max,NJe=Math.min;function zJe(t,e,n){var r,i,o,a,s,l,c=0,h=!1,p=!1,g=!0;if(typeof t!="function")throw new TypeError(LJe);e=Xq(e)||0,OJe(n)&&(h=!!n.leading,p="maxWait"in n,o=p?DJe(Xq(n.maxWait)||0,e):o,g="trailing"in n?!!n.trailing:g);function v(O){var B=r,U=i;return r=i=void 0,c=O,a=t.apply(U,B),a}function x(O){return c=O,s=setTimeout(w,e),h?v(O):a}function b(O){var B=O-l,U=O-c,Z=e-B;return p?NJe(Z,o-U):Z}function M(O){var B=O-l,U=O-c;return l===void 0||B>=e||B<0||p&&U>=o}function w(){var O=j3();if(M(O))return T(O);s=setTimeout(w,b(O))}function T(O){return s=void 0,g&&r?v(O):(r=i=void 0,a)}function C(){s!==void 0&&clearTimeout(s),c=0,r=l=i=s=void 0}function I(){return s===void 0?a:T(j3())}function R(){var O=j3(),B=M(O);if(r=arguments,i=this,l=O,B){if(s===void 0)return x(l);if(p)return clearTimeout(s),s=setTimeout(w,e),v(l)}return s===void 0&&(s=setTimeout(w,e)),a}return R.cancel=C,R.flush=I,R}var FJe=zJe,BJe=FJe,$Je=xy,jJe="Expected a function";function UJe(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(jJe);return $Je(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),BJe(t,e,{leading:r,maxWait:e,trailing:i})}var VJe=UJe;const Vae=_i(VJe);function WM(t){"@babel/helpers - typeof";return WM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WM(t)}function Kq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Kq(Object(n),!0).forEach(function(r){WJe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WJe(t,e,n){return e=HJe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HJe(t){var e=GJe(t,"string");return WM(e)==="symbol"?e:String(e)}function GJe(t,e){if(WM(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(WM(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qJe(t,e){return ZJe(t)||KJe(t,e)||XJe(t,e)||YJe()}function YJe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XJe(t,e){if(t){if(typeof t=="string")return Zq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zq(t,e)}}function Zq(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function KJe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function ZJe(t){if(Array.isArray(t))return t}var JJe=W.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,o=t.width,a=o===void 0?"100%":o,s=t.height,l=s===void 0?"100%":s,c=t.minWidth,h=c===void 0?0:c,p=t.minHeight,g=t.maxHeight,v=t.children,x=t.debounce,b=x===void 0?0:x,M=t.id,w=t.className,T=t.onResize,C=t.style,I=C===void 0?{}:C,R=W.useRef(null),O=W.useRef();O.current=T,W.useImperativeHandle(e,function(){return R});var B=W.useState({containerWidth:i.width,containerHeight:i.height}),U=qJe(B,2),Z=U[0],j=U[1],X=W.useCallback(function(me,ie){j(function(ce){var fe=Math.round(me),xe=Math.round(ie);return ce.containerWidth===fe&&ce.containerHeight===xe?ce:{containerWidth:fe,containerHeight:xe}})},[]);W.useEffect(function(){var me=function(he){var ve,ze=he[0].contentRect,Ue=ze.width,rt=ze.height;X(Ue,rt),(ve=O.current)===null||ve===void 0||ve.call(O,Ue,rt)};b>0&&(me=Vae(me,b,{trailing:!0,leading:!1}));var ie=new ResizeObserver(me),ce=R.current.getBoundingClientRect(),fe=ce.width,xe=ce.height;return X(fe,xe),ie.observe(R.current),function(){ie.disconnect()}},[X,b]);var le=W.useMemo(function(){var me=Z.containerWidth,ie=Z.containerHeight;if(me<0||ie<0)return null;m0(Qv(a)||Qv(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,l),m0(!n||n>0,"The aspect(%s) must be greater than zero.",n);var ce=Qv(a)?me:a,fe=Qv(l)?ie:l;n&&n>0&&(ce?fe=ce/n:fe&&(ce=fe*n),g&&fe>g&&(fe=g)),m0(ce>0||fe>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,ce,fe,a,l,h,p,n);var xe=!Array.isArray(v)&&YF.isElement(v)&&Np(v.type).endsWith("Chart");return Ze.Children.map(v,function(te){return YF.isElement(te)?W.cloneElement(te,aC({width:ce,height:fe},xe?{style:aC({height:"100%",width:"100%",maxHeight:fe,maxWidth:ce},te.props.style)}:{})):te})},[n,v,l,g,p,h,Z,a]);return Ze.createElement("div",{id:M?"".concat(M):void 0,className:Kt("recharts-responsive-container",w),style:aC(aC({},I),{},{width:a,height:l,minWidth:h,minHeight:p,maxHeight:g}),ref:R},le)}),Wae=function(e){return null};Wae.displayName="Cell";function HM(t){"@babel/helpers - typeof";return HM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HM(t)}function Jq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function TB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jq(Object(n),!0).forEach(function(r){QJe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QJe(t,e,n){return e=eQe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eQe(t){var e=tQe(t,"string");return HM(e)==="symbol"?e:String(e)}function tQe(t,e){if(HM(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(HM(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ix={widthCache:{},cacheCount:0},nQe=2e3,rQe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Qq="recharts_measurement_span";function iQe(t){var e=TB({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var HS=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||zp.isSsr)return{width:0,height:0};var r=iQe(n),i=JSON.stringify({text:e,copyStyle:r});if(Ix.widthCache[i])return Ix.widthCache[i];try{var o=document.getElementById(Qq);o||(o=document.createElement("span"),o.setAttribute("id",Qq),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var a=TB(TB({},rQe),r);Object.assign(o.style,a),o.textContent="".concat(e);var s=o.getBoundingClientRect(),l={width:s.width,height:s.height};return Ix.widthCache[i]=l,++Ix.cacheCount>nQe&&(Ix.cacheCount=0,Ix.widthCache={}),l}catch{return{width:0,height:0}}},oQe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function GM(t){"@babel/helpers - typeof";return GM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GM(t)}function _k(t,e){return cQe(t)||lQe(t,e)||aQe(t,e)||sQe()}function sQe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aQe(t,e){if(t){if(typeof t=="string")return eY(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eY(t,e)}}function eY(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lQe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function cQe(t){if(Array.isArray(t))return t}function uQe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tY(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fQe(r.key),r)}}function dQe(t,e,n){return e&&tY(t.prototype,e),n&&tY(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function fQe(t){var e=hQe(t,"string");return GM(e)==="symbol"?e:String(e)}function hQe(t,e){if(GM(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(GM(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nY=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,rY=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,pQe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,mQe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Hae={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},gQe=Object.keys(Hae),k_="NaN";function yQe(t,e){return t*Hae[e]}var lC=function(){function t(e,n){uQe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!pQe.test(n)&&(this.num=NaN,this.unit=""),gQe.includes(n)&&(this.num=yQe(e,n),this.unit="px")}return dQe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=mQe.exec(n))!==null&&r!==void 0?r:[],o=_k(i,3),a=o[1],s=o[2];return new t(parseFloat(a),s??"")}}]),t}();function Gae(t){if(t.includes(k_))return k_;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=nY.exec(e))!==null&&n!==void 0?n:[],i=_k(r,4),o=i[1],a=i[2],s=i[3],l=lC.parse(o??""),c=lC.parse(s??""),h=a==="*"?l.multiply(c):l.divide(c);if(h.isNaN())return k_;e=e.replace(nY,h.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var p,g=(p=rY.exec(e))!==null&&p!==void 0?p:[],v=_k(g,4),x=v[1],b=v[2],M=v[3],w=lC.parse(x??""),T=lC.parse(M??""),C=b==="+"?w.add(T):w.subtract(T);if(C.isNaN())return k_;e=e.replace(rY,C.toString())}return e}var iY=/\(([^()]*)\)/;function vQe(t){for(var e=t;e.includes("(");){var n=iY.exec(e),r=_k(n,2),i=r[1];e=e.replace(iY,Gae(i))}return e}function xQe(t){var e=t.replace(/\s+/g,"");return e=vQe(e),e=Gae(e),e}function _Qe(t){try{return xQe(t)}catch{return k_}}function U3(t){var e=_Qe(t.slice(5,-1));return e===k_?"":e}var bQe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],wQe=["dx","dy","angle","className","breakAll"];function CB(){return CB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CB.apply(this,arguments)}function oY(t,e){if(t==null)return{};var n=SQe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function SQe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function sY(t,e){return CQe(t)||TQe(t,e)||EQe(t,e)||MQe()}function MQe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EQe(t,e){if(t){if(typeof t=="string")return aY(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aY(t,e)}}function aY(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function TQe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function CQe(t){if(Array.isArray(t))return t}var qae=/[ \f\n\r\t\v\u2028\u2029]+/,Yae=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var o=[];oi(n)||(r?o=n.toString().split(""):o=n.toString().split(qae));var a=o.map(function(l){return{word:l,width:HS(l,i).width}}),s=r?0:HS(" ",i).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}},AQe=function(e,n,r,i,o){var a=e.maxLines,s=e.children,l=e.style,c=e.breakAll,h=Tn(a),p=s,g=function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return ce.reduce(function(fe,xe){var te=xe.word,he=xe.width,ve=fe[fe.length-1];if(ve&&(i==null||o||ve.width+he+r<Number(i)))ve.words.push(te),ve.width+=he+r;else{var ze={words:[te],width:he};fe.push(ze)}return fe},[])},v=g(n),x=function(ce){return ce.reduce(function(fe,xe){return fe.width>xe.width?fe:xe})};if(!h)return v;for(var b="…",M=function(ce){var fe=p.slice(0,ce),xe=Yae({breakAll:c,style:l,children:fe+b}).wordsWithComputedWidth,te=g(xe),he=te.length>a||x(te).width>Number(i);return[he,te]},w=0,T=p.length-1,C=0,I;w<=T&&C<=p.length-1;){var R=Math.floor((w+T)/2),O=R-1,B=M(O),U=sY(B,2),Z=U[0],j=U[1],X=M(R),le=sY(X,1),me=le[0];if(!Z&&!me&&(w=R+1),Z&&me&&(T=R-1),!Z&&me){I=j;break}C++}return I||v},lY=function(e){var n=oi(e)?[]:e.toString().split(qae);return[{words:n}]},PQe=function(e){var n=e.width,r=e.scaleToFit,i=e.children,o=e.style,a=e.breakAll,s=e.maxLines;if((n||r)&&!zp.isSsr){var l,c,h=Yae({breakAll:a,children:i,style:o});if(h){var p=h.wordsWithComputedWidth,g=h.spaceWidth;l=p,c=g}else return lY(i);return AQe({breakAll:a,children:i,maxLines:s,style:o},l,c,n,r)}return lY(i)},cY="#808080",bk=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,a=e.lineHeight,s=a===void 0?"1em":a,l=e.capHeight,c=l===void 0?"0.71em":l,h=e.scaleToFit,p=h===void 0?!1:h,g=e.textAnchor,v=g===void 0?"start":g,x=e.verticalAnchor,b=x===void 0?"end":x,M=e.fill,w=M===void 0?cY:M,T=oY(e,bQe),C=W.useMemo(function(){return PQe({breakAll:T.breakAll,children:T.children,maxLines:T.maxLines,scaleToFit:p,style:T.style,width:T.width})},[T.breakAll,T.children,T.maxLines,p,T.style,T.width]),I=T.dx,R=T.dy,O=T.angle,B=T.className,U=T.breakAll,Z=oY(T,wQe);if(!ta(r)||!ta(o))return null;var j=r+(Tn(I)?I:0),X=o+(Tn(R)?R:0),le;switch(b){case"start":le=U3("calc(".concat(c,")"));break;case"middle":le=U3("calc(".concat((C.length-1)/2," * -").concat(s," + (").concat(c," / 2))"));break;default:le=U3("calc(".concat(C.length-1," * -").concat(s,")"));break}var me=[];if(p){var ie=C[0].width,ce=T.width;me.push("scale(".concat((Tn(ce)?ce/ie:1)/ie,")"))}return O&&me.push("rotate(".concat(O,", ").concat(j,", ").concat(X,")")),me.length&&(Z.transform=me.join(" ")),Ze.createElement("text",CB({},ni(Z,!0),{x:j,y:X,className:Kt("recharts-text",B),textAnchor:v,fill:w.includes("url")?cY:w}),C.map(function(fe,xe){var te=fe.words.join(U?"":" ");return Ze.createElement("tspan",{x:j,dy:xe===0?le:s,key:te},te)}))};function Kg(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function kQe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Xae(t){let e,n,r;t.length!==2?(e=Kg,n=(s,l)=>Kg(t(s),l),r=(s,l)=>t(s)-l):(e=t===Kg||t===kQe?t:IQe,n=t,r=t);function i(s,l,c=0,h=s.length){if(c<h){if(e(l,l)!==0)return h;do{const p=c+h>>>1;n(s[p],l)<0?c=p+1:h=p}while(c<h)}return c}function o(s,l,c=0,h=s.length){if(c<h){if(e(l,l)!==0)return h;do{const p=c+h>>>1;n(s[p],l)<=0?c=p+1:h=p}while(c<h)}return c}function a(s,l,c=0,h=s.length){const p=i(s,l,c,h-1);return p>c&&r(s[p-1],l)>-r(s[p],l)?p-1:p}return{left:i,center:a,right:o}}function IQe(){return 0}function Kae(t){return t===null?NaN:+t}function*RQe(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const OQe=Xae(Kg),LQe=OQe.right;Xae(Kae).center;const kE=LQe;class uY extends Map{constructor(e,n=zQe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(dY(this,e))}has(e){return super.has(dY(this,e))}set(e,n){return super.set(DQe(this,e),n)}delete(e){return super.delete(NQe(this,e))}}function dY({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function DQe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function NQe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function zQe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function FQe(t=Kg){if(t===Kg)return Zae;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Zae(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const BQe=Math.sqrt(50),$Qe=Math.sqrt(10),jQe=Math.sqrt(2);function wk(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=BQe?10:o>=$Qe?5:o>=jQe?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/a,s=Math.round(t*c),l=Math.round(e*c),s/c<t&&++s,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*a,s=Math.round(t/c),l=Math.round(e/c),s*c<t&&++s,l*c>e&&--l),l<s&&.5<=n&&n<2?wk(t,e,n*2):[s,l,c]}function AB(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,a]=r?wk(e,t,n):wk(t,e,n);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(r)if(a<0)for(let c=0;c<s;++c)l[c]=(o-c)/-a;else for(let c=0;c<s;++c)l[c]=(o-c)*a;else if(a<0)for(let c=0;c<s;++c)l[c]=(i+c)/-a;else for(let c=0;c<s;++c)l[c]=(i+c)*a;return l}function PB(t,e,n){return e=+e,t=+t,n=+n,wk(t,e,n)[2]}function UQe(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?PB(e,t,n):PB(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function fY(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function hY(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Jae(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?Zae:FQe(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,h=Math.log(l),p=.5*Math.exp(2*h/3),g=.5*Math.sqrt(h*p*(l-p)/l)*(c-l/2<0?-1:1),v=Math.max(n,Math.floor(e-c*p/l+g)),x=Math.min(r,Math.floor(e+(l-c)*p/l+g));Jae(t,e,v,x,i)}const o=t[e];let a=n,s=r;for(Hw(t,n,e),i(t[r],o)>0&&Hw(t,n,r);a<s;){for(Hw(t,a,s),++a,--s;i(t[a],o)<0;)++a;for(;i(t[s],o)>0;)--s}i(t[n],o)===0?Hw(t,n,s):(++s,Hw(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function Hw(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function VQe(t,e,n){if(t=Float64Array.from(RQe(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return hY(t);if(e>=1)return fY(t);var r,i=(r-1)*e,o=Math.floor(i),a=fY(Jae(t,o).subarray(0,o+1)),s=hY(t.subarray(o+1));return a+(s-a)*(i-o)}}function WQe(t,e,n=Kae){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),s=+n(t[o+1],o+1,t);return a+(s-a)*(i-o)}}function HQe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function wd(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function um(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const kB=Symbol("implicit");function c6(){var t=new uY,e=[],n=[],r=kB;function i(o){let a=t.get(o);if(a===void 0){if(r!==kB)return r;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new uY;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return c6(e,n).unknown(r)},wd.apply(i,arguments),i}function qM(){var t=c6().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,a,s=!1,l=0,c=0,h=.5;delete t.unknown;function p(){var g=e().length,v=i<r,x=v?i:r,b=v?r:i;o=(b-x)/Math.max(1,g-l+c*2),s&&(o=Math.floor(o)),x+=(b-x-o*(g-l))*h,a=o*(1-l),s&&(x=Math.round(x),a=Math.round(a));var M=HQe(g).map(function(w){return x+o*w});return n(v?M.reverse():M)}return t.domain=function(g){return arguments.length?(e(g),p()):e()},t.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,p()):[r,i]},t.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,s=!0,p()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(g){return arguments.length?(s=!!g,p()):s},t.padding=function(g){return arguments.length?(l=Math.min(1,c=+g),p()):l},t.paddingInner=function(g){return arguments.length?(l=Math.min(1,g),p()):l},t.paddingOuter=function(g){return arguments.length?(c=+g,p()):c},t.align=function(g){return arguments.length?(h=Math.max(0,Math.min(1,g)),p()):h},t.copy=function(){return qM(e(),[r,i]).round(s).paddingInner(l).paddingOuter(c).align(h)},wd.apply(p(),arguments)}function Qae(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Qae(e())},t}function GS(){return Qae(qM.apply(null,arguments).paddingInner(1))}function u6(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ele(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function IE(){}var YM=.7,Sk=1/YM,nb="\\s*([+-]?\\d+)\\s*",XM="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",GQe=/^#([0-9a-f]{3,8})$/,qQe=new RegExp(`^rgb\\(${nb},${nb},${nb}\\)$`),YQe=new RegExp(`^rgb\\(${bh},${bh},${bh}\\)$`),XQe=new RegExp(`^rgba\\(${nb},${nb},${nb},${XM}\\)$`),KQe=new RegExp(`^rgba\\(${bh},${bh},${bh},${XM}\\)$`),ZQe=new RegExp(`^hsl\\(${XM},${bh},${bh}\\)$`),JQe=new RegExp(`^hsla\\(${XM},${bh},${bh},${XM}\\)$`),pY={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};u6(IE,KM,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:mY,formatHex:mY,formatHex8:QQe,formatHsl:eet,formatRgb:gY,toString:gY});function mY(){return this.rgb().formatHex()}function QQe(){return this.rgb().formatHex8()}function eet(){return tle(this).formatHsl()}function gY(){return this.rgb().formatRgb()}function KM(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=GQe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?yY(e):n===3?new bc(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?cC(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?cC(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=qQe.exec(t))?new bc(e[1],e[2],e[3],1):(e=YQe.exec(t))?new bc(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=XQe.exec(t))?cC(e[1],e[2],e[3],e[4]):(e=KQe.exec(t))?cC(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ZQe.exec(t))?_Y(e[1],e[2]/100,e[3]/100,1):(e=JQe.exec(t))?_Y(e[1],e[2]/100,e[3]/100,e[4]):pY.hasOwnProperty(t)?yY(pY[t]):t==="transparent"?new bc(NaN,NaN,NaN,0):null}function yY(t){return new bc(t>>16&255,t>>8&255,t&255,1)}function cC(t,e,n,r){return r<=0&&(t=e=n=NaN),new bc(t,e,n,r)}function tet(t){return t instanceof IE||(t=KM(t)),t?(t=t.rgb(),new bc(t.r,t.g,t.b,t.opacity)):new bc}function IB(t,e,n,r){return arguments.length===1?tet(t):new bc(t,e,n,r??1)}function bc(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}u6(bc,IB,ele(IE,{brighter(t){return t=t==null?Sk:Math.pow(Sk,t),new bc(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?YM:Math.pow(YM,t),new bc(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new bc(g0(this.r),g0(this.g),g0(this.b),Mk(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vY,formatHex:vY,formatHex8:net,formatRgb:xY,toString:xY}));function vY(){return`#${t0(this.r)}${t0(this.g)}${t0(this.b)}`}function net(){return`#${t0(this.r)}${t0(this.g)}${t0(this.b)}${t0((isNaN(this.opacity)?1:this.opacity)*255)}`}function xY(){const t=Mk(this.opacity);return`${t===1?"rgb(":"rgba("}${g0(this.r)}, ${g0(this.g)}, ${g0(this.b)}${t===1?")":`, ${t})`}`}function Mk(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function g0(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function t0(t){return t=g0(t),(t<16?"0":"")+t.toString(16)}function _Y(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new sf(t,e,n,r)}function tle(t){if(t instanceof sf)return new sf(t.h,t.s,t.l,t.opacity);if(t instanceof IE||(t=KM(t)),!t)return new sf;if(t instanceof sf)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new sf(a,s,l,t.opacity)}function ret(t,e,n,r){return arguments.length===1?tle(t):new sf(t,e,n,r??1)}function sf(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}u6(sf,ret,ele(IE,{brighter(t){return t=t==null?Sk:Math.pow(Sk,t),new sf(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?YM:Math.pow(YM,t),new sf(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new bc(V3(t>=240?t-240:t+120,i,r),V3(t,i,r),V3(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new sf(bY(this.h),uC(this.s),uC(this.l),Mk(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Mk(this.opacity);return`${t===1?"hsl(":"hsla("}${bY(this.h)}, ${uC(this.s)*100}%, ${uC(this.l)*100}%${t===1?")":`, ${t})`}`}}));function bY(t){return t=(t||0)%360,t<0?t+360:t}function uC(t){return Math.max(0,Math.min(1,t||0))}function V3(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const d6=t=>()=>t;function iet(t,e){return function(n){return t+n*e}}function oet(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function set(t){return(t=+t)==1?nle:function(e,n){return n-e?oet(e,n,t):d6(isNaN(e)?n:e)}}function nle(t,e){var n=e-t;return n?iet(t,n):d6(isNaN(t)?e:t)}const wY=function t(e){var n=set(e);function r(i,o){var a=n((i=IB(i)).r,(o=IB(o)).r),s=n(i.g,o.g),l=n(i.b,o.b),c=nle(i.opacity,o.opacity);return function(h){return i.r=a(h),i.g=s(h),i.b=l(h),i.opacity=c(h),i+""}}return r.gamma=t,r}(1);function aet(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function cet(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function uet(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=D1(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function det(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Ek(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function fet(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=D1(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var RB=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,W3=new RegExp(RB.source,"g");function het(t){return function(){return t}}function pet(t){return function(e){return t(e)+""}}function met(t,e){var n=RB.lastIndex=W3.lastIndex=0,r,i,o,a=-1,s=[],l=[];for(t=t+"",e=e+"";(r=RB.exec(t))&&(i=W3.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:Ek(r,i)})),n=W3.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?pet(l[0].x):het(e):(e=l.length,function(c){for(var h=0,p;h<e;++h)s[(p=l[h]).i]=p.x(c);return s.join("")})}function D1(t,e){var n=typeof e,r;return e==null||n==="boolean"?d6(e):(n==="number"?Ek:n==="string"?(r=KM(e))?(e=r,wY):met:e instanceof KM?wY:e instanceof Date?det:cet(e)?aet:Array.isArray(e)?uet:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?fet:Ek)(t,e)}function f6(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function get(t,e){e===void 0&&(e=t,t=D1);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function yet(t){return function(){return t}}function Tk(t){return+t}var SY=[0,1];function Hl(t){return t}function OB(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:yet(isNaN(e)?NaN:.5)}function vet(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function xet(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=OB(i,r),o=n(a,o)):(r=OB(r,i),o=n(o,a)),function(s){return o(r(s))}}function _et(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=OB(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(s){var l=kE(t,s,1,r)-1;return o[l](i[l](s))}}function RE(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function vO(){var t=SY,e=SY,n=D1,r,i,o,a=Hl,s,l,c;function h(){var g=Math.min(t.length,e.length);return a!==Hl&&(a=vet(t[0],t[g-1])),s=g>2?_et:xet,l=c=null,p}function p(g){return g==null||isNaN(g=+g)?o:(l||(l=s(t.map(r),e,n)))(r(a(g)))}return p.invert=function(g){return a(i((c||(c=s(e,t.map(r),Ek)))(g)))},p.domain=function(g){return arguments.length?(t=Array.from(g,Tk),h()):t.slice()},p.range=function(g){return arguments.length?(e=Array.from(g),h()):e.slice()},p.rangeRound=function(g){return e=Array.from(g),n=f6,h()},p.clamp=function(g){return arguments.length?(a=g?!0:Hl,h()):a!==Hl},p.interpolate=function(g){return arguments.length?(n=g,h()):n},p.unknown=function(g){return arguments.length?(o=g,p):o},function(g,v){return r=g,i=v,h()}}function h6(){return vO()(Hl,Hl)}function bet(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ck(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Bb(t){return t=Ck(Math.abs(t)),t?t[1]:NaN}function wet(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}function Met(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Eet=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ZM(t){if(!(e=Eet.exec(t)))throw new Error("invalid format: "+t);var e;return new p6({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ZM.prototype=p6.prototype;function p6(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}p6.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Tet(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var rle;function Cet(t,e){var n=Ck(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(rle=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Ck(t,Math.max(0,e+o-1))[0]}function MY(t,e){var n=Ck(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const EY={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:bet,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>MY(t*100,e),r:MY,s:Cet,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function TY(t){return t}var CY=Array.prototype.map,AY=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Aet(t){var e=t.grouping===void 0||t.thousands===void 0?TY:wet(CY.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?TY:Met(CY.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(p){p=ZM(p);var g=p.fill,v=p.align,x=p.sign,b=p.symbol,M=p.zero,w=p.width,T=p.comma,C=p.precision,I=p.trim,R=p.type;R==="n"?(T=!0,R="g"):EY[R]||(C===void 0&&(C=12),I=!0,R="g"),(M||g==="0"&&v==="=")&&(M=!0,g="0",v="=");var O=b==="$"?n:b==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",B=b==="$"?r:/[%p]/.test(R)?a:"",U=EY[R],Z=/[defgprs%]/.test(R);C=C===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function j(X){var le=O,me=B,ie,ce,fe;if(R==="c")me=U(X)+me,X="";else{X=+X;var xe=X<0||1/X<0;if(X=isNaN(X)?l:U(Math.abs(X),C),I&&(X=Tet(X)),xe&&+X==0&&x!=="+"&&(xe=!1),le=(xe?x==="("?x:s:x==="-"||x==="("?"":x)+le,me=(R==="s"?AY[8+rle/3]:"")+me+(xe&&x==="("?")":""),Z){for(ie=-1,ce=X.length;++ie<ce;)if(fe=X.charCodeAt(ie),48>fe||fe>57){me=(fe===46?i+X.slice(ie+1):X.slice(ie))+me,X=X.slice(0,ie);break}}}T&&!M&&(X=e(X,1/0));var te=le.length+X.length+me.length,he=te<w?new Array(w-te+1).join(g):"";switch(T&&M&&(X=e(he+X,he.length?w-me.length:1/0),he=""),v){case"<":X=le+X+me+he;break;case"=":X=le+he+X+me;break;case"^":X=he.slice(0,te=he.length>>1)+le+X+me+he.slice(te);break;default:X=he+le+X+me;break}return o(X)}return j.toString=function(){return p+""},j}function h(p,g){var v=c((p=ZM(p),p.type="f",p)),x=Math.max(-8,Math.min(8,Math.floor(Bb(g)/3)))*3,b=Math.pow(10,-x),M=AY[8+x/3];return function(w){return v(b*w)+M}}return{format:c,formatPrefix:h}}var dC,m6,ile;Pet({thousands:",",grouping:[3],currency:["$",""]});function Pet(t){return dC=Aet(t),m6=dC.format,ile=dC.formatPrefix,dC}function ket(t){return Math.max(0,-Bb(Math.abs(t)))}function Iet(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Bb(e)/3)))*3-Bb(Math.abs(t)))}function Ret(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Bb(e)-Bb(t))+1}function ole(t,e,n,r){var i=UQe(t,e,n),o;switch(r=ZM(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=Iet(i,a))&&(r.precision=o),ile(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Ret(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=ket(i))&&(r.precision=o-(r.type==="%")*2);break}}return m6(r)}function wy(t){var e=t.domain;return t.ticks=function(n){var r=e();return AB(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return ole(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],s=r[o],l,c,h=10;for(s<a&&(c=a,a=s,s=c,c=i,i=o,o=c);h-- >0;){if(c=PB(a,s,n),c===l)return r[i]=a,r[o]=s,e(r);if(c>0)a=Math.floor(a/c)*c,s=Math.ceil(s/c)*c;else if(c<0)a=Math.ceil(a*c)/c,s=Math.floor(s*c)/c;else break;l=c}return t},t}function Ak(){var t=h6();return t.copy=function(){return RE(t,Ak())},wd.apply(t,arguments),wy(t)}function sle(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Tk),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return sle(t).unknown(e)},t=arguments.length?Array.from(t,Tk):[0,1],wy(n)}function ale(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}function PY(t){return Math.log(t)}function kY(t){return Math.exp(t)}function Oet(t){return-Math.log(-t)}function Let(t){return-Math.exp(-t)}function Det(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Net(t){return t===10?Det:t===Math.E?Math.exp:e=>Math.pow(t,e)}function zet(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function IY(t){return(e,n)=>-t(-e,n)}function g6(t){const e=t(PY,kY),n=e.domain;let r=10,i,o;function a(){return i=zet(r),o=Net(r),n()[0]<0?(i=IY(i),o=IY(o),t(Oet,Let)):t(PY,kY),e}return e.base=function(s){return arguments.length?(r=+s,a()):r},e.domain=function(s){return arguments.length?(n(s),a()):n()},e.ticks=s=>{const l=n();let c=l[0],h=l[l.length-1];const p=h<c;p&&([c,h]=[h,c]);let g=i(c),v=i(h),x,b;const M=s==null?10:+s;let w=[];if(!(r%1)&&v-g<M){if(g=Math.floor(g),v=Math.ceil(v),c>0){for(;g<=v;++g)for(x=1;x<r;++x)if(b=g<0?x/o(-g):x*o(g),!(b<c)){if(b>h)break;w.push(b)}}else for(;g<=v;++g)for(x=r-1;x>=1;--x)if(b=g>0?x/o(-g):x*o(g),!(b<c)){if(b>h)break;w.push(b)}w.length*2<M&&(w=AB(c,h,M))}else w=AB(g,v,Math.min(v-g,M)).map(o);return p?w.reverse():w},e.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=ZM(l)).precision==null&&(l.trim=!0),l=m6(l)),s===1/0)return l;const c=Math.max(1,r*s/e.ticks().length);return h=>{let p=h/o(Math.round(i(h)));return p*r<r-.5&&(p*=r),p<=c?l(h):""}},e.nice=()=>n(ale(n(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),e}function lle(){const t=g6(vO()).domain([1,10]);return t.copy=()=>RE(t,lle()).base(t.base()),wd.apply(t,arguments),t}function RY(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function OY(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function y6(t){var e=1,n=t(RY(e),OY(e));return n.constant=function(r){return arguments.length?t(RY(e=+r),OY(e)):e},wy(n)}function cle(){var t=y6(vO());return t.copy=function(){return RE(t,cle()).constant(t.constant())},wd.apply(t,arguments)}function LY(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Fet(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Bet(t){return t<0?-t*t:t*t}function v6(t){var e=t(Hl,Hl),n=1;function r(){return n===1?t(Hl,Hl):n===.5?t(Fet,Bet):t(LY(n),LY(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},wy(e)}function x6(){var t=v6(vO());return t.copy=function(){return RE(t,x6()).exponent(t.exponent())},wd.apply(t,arguments),t}function $et(){return x6.apply(null,arguments).exponent(.5)}function DY(t){return Math.sign(t)*t*t}function jet(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function ule(){var t=h6(),e=[0,1],n=!1,r;function i(o){var a=jet(t(o));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(o){return t.invert(DY(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,Tk)).map(DY)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return ule(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},wd.apply(i,arguments),wy(i)}function dle(){var t=[],e=[],n=[],r;function i(){var a=0,s=Math.max(1,e.length);for(n=new Array(s-1);++a<s;)n[a-1]=WQe(t,a/s);return o}function o(a){return a==null||isNaN(a=+a)?r:e[kE(n,a)]}return o.invertExtent=function(a){var s=e.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let s of a)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Kg),i()},o.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return dle().domain(t).range(e).unknown(r)},wd.apply(o,arguments)}function fle(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function a(l){return l!=null&&l<=l?i[kE(r,l,0,n)]:o}function s(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return a}return a.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,s()):[t,e]},a.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,s()):i.slice()},a.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},a.unknown=function(l){return arguments.length&&(o=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return fle().domain([t,e]).range(i).unknown(o)},wd.apply(wy(a),arguments)}function hle(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[kE(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return hle().domain(t).range(e).unknown(n)},wd.apply(i,arguments)}const H3=new Date,G3=new Date;function oa(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const l=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return l;let c;do l.push(c=new Date(+o)),e(o,s),t(o);while(c<o&&o<a);return l},i.filter=o=>oa(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;e(a,-1),!o(a););else for(;--s>=0;)for(;e(a,1),!o(a););}),n&&(i.count=(o,a)=>(H3.setTime(+o),G3.setTime(+a),t(H3),t(G3),Math.floor(n(H3,G3))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const Pk=oa(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Pk.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?oa(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Pk);Pk.range;const Pp=1e3,nd=Pp*60,kp=nd*60,Kp=kp*24,_6=Kp*7,NY=Kp*30,q3=Kp*365,n0=oa(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Pp)},(t,e)=>(e-t)/Pp,t=>t.getUTCSeconds());n0.range;const b6=oa(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Pp)},(t,e)=>{t.setTime(+t+e*nd)},(t,e)=>(e-t)/nd,t=>t.getMinutes());b6.range;const w6=oa(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*nd)},(t,e)=>(e-t)/nd,t=>t.getUTCMinutes());w6.range;const S6=oa(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Pp-t.getMinutes()*nd)},(t,e)=>{t.setTime(+t+e*kp)},(t,e)=>(e-t)/kp,t=>t.getHours());S6.range;const M6=oa(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*kp)},(t,e)=>(e-t)/kp,t=>t.getUTCHours());M6.range;const OE=oa(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*nd)/Kp,t=>t.getDate()-1);OE.range;const xO=oa(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Kp,t=>t.getUTCDate()-1);xO.range;const ple=oa(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Kp,t=>Math.floor(t/Kp));ple.range;function q0(t){return oa(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*nd)/_6)}const _O=q0(0),kk=q0(1),Uet=q0(2),Vet=q0(3),$b=q0(4),Wet=q0(5),Het=q0(6);_O.range;kk.range;Uet.range;Vet.range;$b.range;Wet.range;Het.range;function Y0(t){return oa(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/_6)}const bO=Y0(0),Ik=Y0(1),Get=Y0(2),qet=Y0(3),jb=Y0(4),Yet=Y0(5),Xet=Y0(6);bO.range;Ik.range;Get.range;qet.range;jb.range;Yet.range;Xet.range;const E6=oa(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());E6.range;const T6=oa(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());T6.range;const Zp=oa(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Zp.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:oa(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Zp.range;const Jp=oa(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Jp.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:oa(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Jp.range;function Y3(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ket(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Zet(t){let e,n,r;t.length!==2?(e=Y3,n=(s,l)=>Y3(t(s),l),r=(s,l)=>t(s)-l):(e=t===Y3||t===Ket?t:Jet,n=t,r=t);function i(s,l,c=0,h=s.length){if(c<h){if(e(l,l)!==0)return h;do{const p=c+h>>>1;n(s[p],l)<0?c=p+1:h=p}while(c<h)}return c}function o(s,l,c=0,h=s.length){if(c<h){if(e(l,l)!==0)return h;do{const p=c+h>>>1;n(s[p],l)<=0?c=p+1:h=p}while(c<h)}return c}function a(s,l,c=0,h=s.length){const p=i(s,l,c,h-1);return p>c&&r(s[p-1],l)>-r(s[p],l)?p-1:p}return{left:i,center:a,right:o}}function Jet(){return 0}const Qet=Math.sqrt(50),ett=Math.sqrt(10),ttt=Math.sqrt(2);function mle(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=Qet?10:o>=ett?5:o>=ttt?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/a,s=Math.round(t*c),l=Math.round(e*c),s/c<t&&++s,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*a,s=Math.round(t/c),l=Math.round(e/c),s*c<t&&++s,l*c>e&&--l),l<s&&.5<=n&&n<2?mle(t,e,n*2):[s,l,c]}function zY(t,e,n){return e=+e,t=+t,n=+n,mle(t,e,n)[2]}function FY(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?zY(e,t,n):zY(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function gle(t,e,n,r,i,o){const a=[[n0,1,Pp],[n0,5,5*Pp],[n0,15,15*Pp],[n0,30,30*Pp],[o,1,nd],[o,5,5*nd],[o,15,15*nd],[o,30,30*nd],[i,1,kp],[i,3,3*kp],[i,6,6*kp],[i,12,12*kp],[r,1,Kp],[r,2,2*Kp],[n,1,_6],[e,1,NY],[e,3,3*NY],[t,1,q3]];function s(c,h,p){const g=h<c;g&&([c,h]=[h,c]);const v=p&&typeof p.range=="function"?p:l(c,h,p),x=v?v.range(c,+h+1):[];return g?x.reverse():x}function l(c,h,p){const g=Math.abs(h-c)/p,v=Zet(([,,M])=>M).right(a,g);if(v===a.length)return t.every(FY(c/q3,h/q3,p));if(v===0)return Pk.every(Math.max(FY(c,h,p),1));const[x,b]=a[g/a[v-1][2]<a[v][2]/g?v-1:v];return x.every(b)}return[s,l]}const[ntt,rtt]=gle(Jp,T6,bO,ple,M6,w6),[itt,ott]=gle(Zp,E6,_O,OE,S6,b6);function X3(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function K3(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Gw(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function stt(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,l=t.shortMonths,c=qw(i),h=Yw(i),p=qw(o),g=Yw(o),v=qw(a),x=Yw(a),b=qw(s),M=Yw(s),w=qw(l),T=Yw(l),C={a:xe,A:te,b:he,B:ve,c:null,d:WY,e:WY,f:Ptt,g:Btt,G:jtt,H:Ttt,I:Ctt,j:Att,L:yle,m:ktt,M:Itt,p:ze,q:Ue,Q:qY,s:YY,S:Rtt,u:Ott,U:Ltt,V:Dtt,w:Ntt,W:ztt,x:null,X:null,y:Ftt,Y:$tt,Z:Utt,"%":GY},I={a:rt,A:Be,b:st,B:ct,c:null,d:HY,e:HY,f:Gtt,g:nnt,G:int,H:Vtt,I:Wtt,j:Htt,L:xle,m:qtt,M:Ytt,p:Dt,q:zt,Q:qY,s:YY,S:Xtt,u:Ktt,U:Ztt,V:Jtt,w:Qtt,W:ent,x:null,X:null,y:tnt,Y:rnt,Z:ont,"%":GY},R={a:j,A:X,b:le,B:me,c:ie,d:UY,e:UY,f:wtt,g:jY,G:$Y,H:VY,I:VY,j:vtt,L:btt,m:ytt,M:xtt,p:Z,q:gtt,Q:Mtt,s:Ett,S:_tt,u:dtt,U:ftt,V:htt,w:utt,W:ptt,x:ce,X:fe,y:jY,Y:$Y,Z:mtt,"%":Stt};C.x=O(n,C),C.X=O(r,C),C.c=O(e,C),I.x=O(n,I),I.X=O(r,I),I.c=O(e,I);function O(Fe,lt){return function(Qe){var ge=[],et=-1,ot=0,Tt=Fe.length,Ct,Bt,Gt;for(Qe instanceof Date||(Qe=new Date(+Qe));++et<Tt;)Fe.charCodeAt(et)===37&&(ge.push(Fe.slice(ot,et)),(Bt=BY[Ct=Fe.charAt(++et)])!=null?Ct=Fe.charAt(++et):Bt=Ct==="e"?" ":"0",(Gt=lt[Ct])&&(Ct=Gt(Qe,Bt)),ge.push(Ct),ot=et+1);return ge.push(Fe.slice(ot,et)),ge.join("")}}function B(Fe,lt){return function(Qe){var ge=Gw(1900,void 0,1),et=U(ge,Fe,Qe+="",0),ot,Tt;if(et!=Qe.length)return null;if("Q"in ge)return new Date(ge.Q);if("s"in ge)return new Date(ge.s*1e3+("L"in ge?ge.L:0));if(lt&&!("Z"in ge)&&(ge.Z=0),"p"in ge&&(ge.H=ge.H%12+ge.p*12),ge.m===void 0&&(ge.m="q"in ge?ge.q:0),"V"in ge){if(ge.V<1||ge.V>53)return null;"w"in ge||(ge.w=1),"Z"in ge?(ot=K3(Gw(ge.y,0,1)),Tt=ot.getUTCDay(),ot=Tt>4||Tt===0?Ik.ceil(ot):Ik(ot),ot=xO.offset(ot,(ge.V-1)*7),ge.y=ot.getUTCFullYear(),ge.m=ot.getUTCMonth(),ge.d=ot.getUTCDate()+(ge.w+6)%7):(ot=X3(Gw(ge.y,0,1)),Tt=ot.getDay(),ot=Tt>4||Tt===0?kk.ceil(ot):kk(ot),ot=OE.offset(ot,(ge.V-1)*7),ge.y=ot.getFullYear(),ge.m=ot.getMonth(),ge.d=ot.getDate()+(ge.w+6)%7)}else("W"in ge||"U"in ge)&&("w"in ge||(ge.w="u"in ge?ge.u%7:"W"in ge?1:0),Tt="Z"in ge?K3(Gw(ge.y,0,1)).getUTCDay():X3(Gw(ge.y,0,1)).getDay(),ge.m=0,ge.d="W"in ge?(ge.w+6)%7+ge.W*7-(Tt+5)%7:ge.w+ge.U*7-(Tt+6)%7);return"Z"in ge?(ge.H+=ge.Z/100|0,ge.M+=ge.Z%100,K3(ge)):X3(ge)}}function U(Fe,lt,Qe,ge){for(var et=0,ot=lt.length,Tt=Qe.length,Ct,Bt;et<ot;){if(ge>=Tt)return-1;if(Ct=lt.charCodeAt(et++),Ct===37){if(Ct=lt.charAt(et++),Bt=R[Ct in BY?lt.charAt(et++):Ct],!Bt||(ge=Bt(Fe,Qe,ge))<0)return-1}else if(Ct!=Qe.charCodeAt(ge++))return-1}return ge}function Z(Fe,lt,Qe){var ge=c.exec(lt.slice(Qe));return ge?(Fe.p=h.get(ge[0].toLowerCase()),Qe+ge[0].length):-1}function j(Fe,lt,Qe){var ge=v.exec(lt.slice(Qe));return ge?(Fe.w=x.get(ge[0].toLowerCase()),Qe+ge[0].length):-1}function X(Fe,lt,Qe){var ge=p.exec(lt.slice(Qe));return ge?(Fe.w=g.get(ge[0].toLowerCase()),Qe+ge[0].length):-1}function le(Fe,lt,Qe){var ge=w.exec(lt.slice(Qe));return ge?(Fe.m=T.get(ge[0].toLowerCase()),Qe+ge[0].length):-1}function me(Fe,lt,Qe){var ge=b.exec(lt.slice(Qe));return ge?(Fe.m=M.get(ge[0].toLowerCase()),Qe+ge[0].length):-1}function ie(Fe,lt,Qe){return U(Fe,e,lt,Qe)}function ce(Fe,lt,Qe){return U(Fe,n,lt,Qe)}function fe(Fe,lt,Qe){return U(Fe,r,lt,Qe)}function xe(Fe){return a[Fe.getDay()]}function te(Fe){return o[Fe.getDay()]}function he(Fe){return l[Fe.getMonth()]}function ve(Fe){return s[Fe.getMonth()]}function ze(Fe){return i[+(Fe.getHours()>=12)]}function Ue(Fe){return 1+~~(Fe.getMonth()/3)}function rt(Fe){return a[Fe.getUTCDay()]}function Be(Fe){return o[Fe.getUTCDay()]}function st(Fe){return l[Fe.getUTCMonth()]}function ct(Fe){return s[Fe.getUTCMonth()]}function Dt(Fe){return i[+(Fe.getUTCHours()>=12)]}function zt(Fe){return 1+~~(Fe.getUTCMonth()/3)}return{format:function(Fe){var lt=O(Fe+="",C);return lt.toString=function(){return Fe},lt},parse:function(Fe){var lt=B(Fe+="",!1);return lt.toString=function(){return Fe},lt},utcFormat:function(Fe){var lt=O(Fe+="",I);return lt.toString=function(){return Fe},lt},utcParse:function(Fe){var lt=B(Fe+="",!0);return lt.toString=function(){return Fe},lt}}}var BY={"-":"",_:" ",0:"0"},ya=/^\s*\d+/,att=/^%/,ltt=/[\\^$*+?|[\]().{}]/g;function xi(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function ctt(t){return t.replace(ltt,"\\$&")}function qw(t){return new RegExp("^(?:"+t.map(ctt).join("|")+")","i")}function Yw(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function utt(t,e,n){var r=ya.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function dtt(t,e,n){var r=ya.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function ftt(t,e,n){var r=ya.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function htt(t,e,n){var r=ya.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function ptt(t,e,n){var r=ya.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function $Y(t,e,n){var r=ya.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function jY(t,e,n){var r=ya.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function mtt(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function gtt(t,e,n){var r=ya.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function ytt(t,e,n){var r=ya.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function UY(t,e,n){var r=ya.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function vtt(t,e,n){var r=ya.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function VY(t,e,n){var r=ya.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function xtt(t,e,n){var r=ya.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function _tt(t,e,n){var r=ya.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function btt(t,e,n){var r=ya.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function wtt(t,e,n){var r=ya.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Stt(t,e,n){var r=att.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Mtt(t,e,n){var r=ya.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Ett(t,e,n){var r=ya.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function WY(t,e){return xi(t.getDate(),e,2)}function Ttt(t,e){return xi(t.getHours(),e,2)}function Ctt(t,e){return xi(t.getHours()%12||12,e,2)}function Att(t,e){return xi(1+OE.count(Zp(t),t),e,3)}function yle(t,e){return xi(t.getMilliseconds(),e,3)}function Ptt(t,e){return yle(t,e)+"000"}function ktt(t,e){return xi(t.getMonth()+1,e,2)}function Itt(t,e){return xi(t.getMinutes(),e,2)}function Rtt(t,e){return xi(t.getSeconds(),e,2)}function Ott(t){var e=t.getDay();return e===0?7:e}function Ltt(t,e){return xi(_O.count(Zp(t)-1,t),e,2)}function vle(t){var e=t.getDay();return e>=4||e===0?$b(t):$b.ceil(t)}function Dtt(t,e){return t=vle(t),xi($b.count(Zp(t),t)+(Zp(t).getDay()===4),e,2)}function Ntt(t){return t.getDay()}function ztt(t,e){return xi(kk.count(Zp(t)-1,t),e,2)}function Ftt(t,e){return xi(t.getFullYear()%100,e,2)}function Btt(t,e){return t=vle(t),xi(t.getFullYear()%100,e,2)}function $tt(t,e){return xi(t.getFullYear()%1e4,e,4)}function jtt(t,e){var n=t.getDay();return t=n>=4||n===0?$b(t):$b.ceil(t),xi(t.getFullYear()%1e4,e,4)}function Utt(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+xi(e/60|0,"0",2)+xi(e%60,"0",2)}function HY(t,e){return xi(t.getUTCDate(),e,2)}function Vtt(t,e){return xi(t.getUTCHours(),e,2)}function Wtt(t,e){return xi(t.getUTCHours()%12||12,e,2)}function Htt(t,e){return xi(1+xO.count(Jp(t),t),e,3)}function xle(t,e){return xi(t.getUTCMilliseconds(),e,3)}function Gtt(t,e){return xle(t,e)+"000"}function qtt(t,e){return xi(t.getUTCMonth()+1,e,2)}function Ytt(t,e){return xi(t.getUTCMinutes(),e,2)}function Xtt(t,e){return xi(t.getUTCSeconds(),e,2)}function Ktt(t){var e=t.getUTCDay();return e===0?7:e}function Ztt(t,e){return xi(bO.count(Jp(t)-1,t),e,2)}function _le(t){var e=t.getUTCDay();return e>=4||e===0?jb(t):jb.ceil(t)}function Jtt(t,e){return t=_le(t),xi(jb.count(Jp(t),t)+(Jp(t).getUTCDay()===4),e,2)}function Qtt(t){return t.getUTCDay()}function ent(t,e){return xi(Ik.count(Jp(t)-1,t),e,2)}function tnt(t,e){return xi(t.getUTCFullYear()%100,e,2)}function nnt(t,e){return t=_le(t),xi(t.getUTCFullYear()%100,e,2)}function rnt(t,e){return xi(t.getUTCFullYear()%1e4,e,4)}function int(t,e){var n=t.getUTCDay();return t=n>=4||n===0?jb(t):jb.ceil(t),xi(t.getUTCFullYear()%1e4,e,4)}function ont(){return"+0000"}function GY(){return"%"}function qY(t){return+t}function YY(t){return Math.floor(+t/1e3)}var Rx,ble,wle;snt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function snt(t){return Rx=stt(t),ble=Rx.format,Rx.parse,wle=Rx.utcFormat,Rx.utcParse,Rx}function ant(t){return new Date(t)}function lnt(t){return t instanceof Date?+t:+new Date(+t)}function C6(t,e,n,r,i,o,a,s,l,c){var h=h6(),p=h.invert,g=h.domain,v=c(".%L"),x=c(":%S"),b=c("%I:%M"),M=c("%I %p"),w=c("%a %d"),T=c("%b %d"),C=c("%B"),I=c("%Y");function R(O){return(l(O)<O?v:s(O)<O?x:a(O)<O?b:o(O)<O?M:r(O)<O?i(O)<O?w:T:n(O)<O?C:I)(O)}return h.invert=function(O){return new Date(p(O))},h.domain=function(O){return arguments.length?g(Array.from(O,lnt)):g().map(ant)},h.ticks=function(O){var B=g();return t(B[0],B[B.length-1],O??10)},h.tickFormat=function(O,B){return B==null?R:c(B)},h.nice=function(O){var B=g();return(!O||typeof O.range!="function")&&(O=e(B[0],B[B.length-1],O??10)),O?g(ale(B,O)):h},h.copy=function(){return RE(h,C6(t,e,n,r,i,o,a,s,l,c))},h}function cnt(){return wd.apply(C6(itt,ott,Zp,E6,_O,OE,S6,b6,n0,ble).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function unt(){return wd.apply(C6(ntt,rtt,Jp,T6,bO,xO,M6,w6,n0,wle).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function wO(){var t=0,e=1,n,r,i,o,a=Hl,s=!1,l;function c(p){return p==null||isNaN(p=+p)?l:a(i===0?.5:(p=(o(p)-n)*i,s?Math.max(0,Math.min(1,p)):p))}c.domain=function(p){return arguments.length?([t,e]=p,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(p){return arguments.length?(s=!!p,c):s},c.interpolator=function(p){return arguments.length?(a=p,c):a};function h(p){return function(g){var v,x;return arguments.length?([v,x]=g,a=p(v,x),c):[a(0),a(1)]}}return c.range=h(D1),c.rangeRound=h(f6),c.unknown=function(p){return arguments.length?(l=p,c):l},function(p){return o=p,n=p(t),r=p(e),i=n===r?0:1/(r-n),c}}function Sy(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Sle(){var t=wy(wO()(Hl));return t.copy=function(){return Sy(t,Sle())},um.apply(t,arguments)}function Mle(){var t=g6(wO()).domain([1,10]);return t.copy=function(){return Sy(t,Mle()).base(t.base())},um.apply(t,arguments)}function Ele(){var t=y6(wO());return t.copy=function(){return Sy(t,Ele()).constant(t.constant())},um.apply(t,arguments)}function A6(){var t=v6(wO());return t.copy=function(){return Sy(t,A6()).exponent(t.exponent())},um.apply(t,arguments)}function dnt(){return A6.apply(null,arguments).exponent(.5)}function Tle(){var t=[],e=Hl;function n(r){if(r!=null&&!isNaN(r=+r))return e((kE(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Kg),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>VQe(t,o/r))},n.copy=function(){return Tle(e).domain(t)},um.apply(n,arguments)}function SO(){var t=0,e=.5,n=1,r=1,i,o,a,s,l,c=Hl,h,p=!1,g;function v(b){return isNaN(b=+b)?g:(b=.5+((b=+h(b))-o)*(r*b<r*o?s:l),c(p?Math.max(0,Math.min(1,b)):b))}v.domain=function(b){return arguments.length?([t,e,n]=b,i=h(t=+t),o=h(e=+e),a=h(n=+n),s=i===o?0:.5/(o-i),l=o===a?0:.5/(a-o),r=o<i?-1:1,v):[t,e,n]},v.clamp=function(b){return arguments.length?(p=!!b,v):p},v.interpolator=function(b){return arguments.length?(c=b,v):c};function x(b){return function(M){var w,T,C;return arguments.length?([w,T,C]=M,c=get(b,[w,T,C]),v):[c(0),c(.5),c(1)]}}return v.range=x(D1),v.rangeRound=x(f6),v.unknown=function(b){return arguments.length?(g=b,v):g},function(b){return h=b,i=b(t),o=b(e),a=b(n),s=i===o?0:.5/(o-i),l=o===a?0:.5/(a-o),r=o<i?-1:1,v}}function Cle(){var t=wy(SO()(Hl));return t.copy=function(){return Sy(t,Cle())},um.apply(t,arguments)}function Ale(){var t=g6(SO()).domain([.1,1,10]);return t.copy=function(){return Sy(t,Ale()).base(t.base())},um.apply(t,arguments)}function Ple(){var t=y6(SO());return t.copy=function(){return Sy(t,Ple()).constant(t.constant())},um.apply(t,arguments)}function P6(){var t=v6(SO());return t.copy=function(){return Sy(t,P6()).exponent(t.exponent())},um.apply(t,arguments)}function fnt(){return P6.apply(null,arguments).exponent(.5)}const XY=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:qM,scaleDiverging:Cle,scaleDivergingLog:Ale,scaleDivergingPow:P6,scaleDivergingSqrt:fnt,scaleDivergingSymlog:Ple,scaleIdentity:sle,scaleImplicit:kB,scaleLinear:Ak,scaleLog:lle,scaleOrdinal:c6,scalePoint:GS,scalePow:x6,scaleQuantile:dle,scaleQuantize:fle,scaleRadial:ule,scaleSequential:Sle,scaleSequentialLog:Mle,scaleSequentialPow:A6,scaleSequentialQuantile:Tle,scaleSequentialSqrt:dnt,scaleSequentialSymlog:Ele,scaleSqrt:$et,scaleSymlog:cle,scaleThreshold:hle,scaleTime:cnt,scaleUtc:unt,tickFormat:ole},Symbol.toStringTag,{value:"Module"}));var hnt=T1;function pnt(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(a!=null&&(s===void 0?a===a&&!hnt(a):n(a,s)))var s=a,l=o}return l}var kle=pnt;function mnt(t,e){return t>e}var gnt=mnt,ynt=kle,vnt=gnt,xnt=O1;function _nt(t){return t&&t.length?ynt(t,xnt,vnt):void 0}var bnt=_nt;const MO=_i(bnt);function wnt(t,e){return t<e}var Snt=wnt,Mnt=kle,Ent=Snt,Tnt=O1;function Cnt(t){return t&&t.length?Mnt(t,Tnt,Ent):void 0}var Ant=Cnt;const EO=_i(Ant);var Pnt=UU,knt=_y,Int=Iae,Rnt=kc;function Ont(t,e){var n=Rnt(t)?Pnt:Int;return n(t,knt(e))}var Lnt=Ont,Dnt=Pae,Nnt=Lnt;function znt(t,e){return Dnt(Nnt(t,e),1)}var Fnt=znt;const Bnt=_i(Fnt);var $nt=i6;function jnt(t,e){return $nt(t,e)}var Unt=jnt;const TO=_i(Unt);var N1=1e9,Vnt={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},I6,Oo=!0,gd="[DecimalError] ",y0=gd+"Invalid argument: ",k6=gd+"Exponent out of range: ",z1=Math.floor,Fv=Math.pow,Wnt=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,iu,da=1e7,wo=7,Ile=9007199254740991,Rk=z1(Ile/wo),Yn={};Yn.absoluteValue=Yn.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Yn.comparedTo=Yn.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(r=o.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};Yn.decimalPlaces=Yn.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*wo;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Yn.dividedBy=Yn.div=function(t){return Fp(this,new this.constructor(t))};Yn.dividedToIntegerBy=Yn.idiv=function(t){var e=this,n=e.constructor;return oo(Fp(e,new n(t),0,1),n.precision)};Yn.equals=Yn.eq=function(t){return!this.cmp(t)};Yn.exponent=function(){return Ds(this)};Yn.greaterThan=Yn.gt=function(t){return this.cmp(t)>0};Yn.greaterThanOrEqualTo=Yn.gte=function(t){return this.cmp(t)>=0};Yn.isInteger=Yn.isint=function(){return this.e>this.d.length-2};Yn.isNegative=Yn.isneg=function(){return this.s<0};Yn.isPositive=Yn.ispos=function(){return this.s>0};Yn.isZero=function(){return this.s===0};Yn.lessThan=Yn.lt=function(t){return this.cmp(t)<0};Yn.lessThanOrEqualTo=Yn.lte=function(t){return this.cmp(t)<1};Yn.logarithm=Yn.log=function(t){var e,n=this,r=n.constructor,i=r.precision,o=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(iu))throw Error(gd+"NaN");if(n.s<1)throw Error(gd+(n.s?"NaN":"-Infinity"));return n.eq(iu)?new r(0):(Oo=!1,e=Fp(JM(n,o),JM(t,o),o),Oo=!0,oo(e,i))};Yn.minus=Yn.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Lle(e,t):Rle(e,(t.s=-t.s,t))};Yn.modulo=Yn.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(gd+"NaN");return n.s?(Oo=!1,e=Fp(n,t,0,1).times(t),Oo=!0,n.minus(e)):oo(new r(n),i)};Yn.naturalExponential=Yn.exp=function(){return Ole(this)};Yn.naturalLogarithm=Yn.ln=function(){return JM(this)};Yn.negated=Yn.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Yn.plus=Yn.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Rle(e,t):Lle(e,(t.s=-t.s,t))};Yn.precision=Yn.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(y0+t);if(e=Ds(i)+1,r=i.d.length-1,n=r*wo+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Yn.squareRoot=Yn.sqrt=function(){var t,e,n,r,i,o,a,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(gd+"NaN")}for(t=Ds(s),Oo=!1,i=Math.sqrt(+s),i==0||i==1/0?(e=dh(s.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=z1((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=a=n+3;;)if(o=r,r=o.plus(Fp(s,o,a+2)).times(.5),dh(o.d).slice(0,a)===(e=dh(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(oo(o,n+1,0),o.times(o).eq(s)){r=o;break}}else if(e!="9999")break;a+=4}return Oo=!0,oo(r,n)};Yn.times=Yn.mul=function(t){var e,n,r,i,o,a,s,l,c,h=this,p=h.constructor,g=h.d,v=(t=new p(t)).d;if(!h.s||!t.s)return new p(0);for(t.s*=h.s,n=h.e+t.e,l=g.length,c=v.length,l<c&&(o=g,g=v,v=o,a=l,l=c,c=a),o=[],a=l+c,r=a;r--;)o.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)s=o[i]+v[r]*g[i-r-1]+e,o[i--]=s%da|0,e=s/da|0;o[i]=(o[i]+e)%da|0}for(;!o[--a];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,Oo?oo(t,p.precision):t};Yn.toDecimalPlaces=Yn.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(kh(t,0,N1),e===void 0?e=r.rounding:kh(e,0,8),oo(n,t+Ds(n)+1,e))};Yn.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=D0(r,!0):(kh(t,0,N1),e===void 0?e=i.rounding:kh(e,0,8),r=oo(new i(r),t+1,e),n=D0(r,!0,t+1)),n};Yn.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?D0(i):(kh(t,0,N1),e===void 0?e=o.rounding:kh(e,0,8),r=oo(new o(i),t+Ds(i)+1,e),n=D0(r.abs(),!1,t+Ds(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Yn.toInteger=Yn.toint=function(){var t=this,e=t.constructor;return oo(new e(t),Ds(t)+1,e.rounding)};Yn.toNumber=function(){return+this};Yn.toPower=Yn.pow=function(t){var e,n,r,i,o,a,s=this,l=s.constructor,c=12,h=+(t=new l(t));if(!t.s)return new l(iu);if(s=new l(s),!s.s){if(t.s<1)throw Error(gd+"Infinity");return s}if(s.eq(iu))return s;if(r=l.precision,t.eq(iu))return oo(s,r);if(e=t.e,n=t.d.length-1,a=e>=n,o=s.s,a){if((n=h<0?-h:h)<=Ile){for(i=new l(iu),e=Math.ceil(r/wo+4),Oo=!1;n%2&&(i=i.times(s),ZY(i.d,e)),n=z1(n/2),n!==0;)s=s.times(s),ZY(s.d,e);return Oo=!0,t.s<0?new l(iu).div(i):oo(i,r)}}else if(o<0)throw Error(gd+"NaN");return o=o<0&&t.d[Math.max(e,n)]&1?-1:1,s.s=1,Oo=!1,i=t.times(JM(s,r+c)),Oo=!0,i=Ole(i),i.s=o,i};Yn.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?(n=Ds(i),r=D0(i,n<=o.toExpNeg||n>=o.toExpPos)):(kh(t,1,N1),e===void 0?e=o.rounding:kh(e,0,8),i=oo(new o(i),t,e),n=Ds(i),r=D0(i,t<=n||n<=o.toExpNeg,t)),r};Yn.toSignificantDigits=Yn.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(kh(t,1,N1),e===void 0?e=r.rounding:kh(e,0,8)),oo(new r(n),t,e)};Yn.toString=Yn.valueOf=Yn.val=Yn.toJSON=Yn[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ds(t),n=t.constructor;return D0(t,e<=n.toExpNeg||e>=n.toExpPos)};function Rle(t,e){var n,r,i,o,a,s,l,c,h=t.constructor,p=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),Oo?oo(e,p):e;if(l=t.d,c=e.d,a=t.e,i=e.e,l=l.slice(),o=a-i,o){for(o<0?(r=l,o=-o,s=c.length):(r=c,i=a,s=l.length),a=Math.ceil(p/wo),s=a>s?a+1:s+1,o>s&&(o=s,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(s=l.length,o=c.length,s-o<0&&(o=s,r=c,c=l,l=r),n=0;o;)n=(l[--o]=l[o]+c[o]+n)/da|0,l[o]%=da;for(n&&(l.unshift(n),++i),s=l.length;l[--s]==0;)l.pop();return e.d=l,e.e=i,Oo?oo(e,p):e}function kh(t,e,n){if(t!==~~t||t<e||t>n)throw Error(y0+t)}function dh(t){var e,n,r,i=t.length-1,o="",a=t[0];if(i>0){for(o+=a,e=1;e<i;e++)r=t[e]+"",n=wo-r.length,n&&(o+=_g(n)),o+=r;a=t[e],r=a+"",n=wo-r.length,n&&(o+=_g(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return o+a}var Fp=function(){function t(r,i){var o,a=0,s=r.length;for(r=r.slice();s--;)o=r[s]*i+a,r[s]=o%da|0,a=o/da|0;return a&&r.unshift(a),r}function e(r,i,o,a){var s,l;if(o!=a)l=o>a?1:-1;else for(s=l=0;s<o;s++)if(r[s]!=i[s]){l=r[s]>i[s]?1:-1;break}return l}function n(r,i,o){for(var a=0;o--;)r[o]-=a,a=r[o]<i[o]?1:0,r[o]=a*da+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,a){var s,l,c,h,p,g,v,x,b,M,w,T,C,I,R,O,B,U,Z=r.constructor,j=r.s==i.s?1:-1,X=r.d,le=i.d;if(!r.s)return new Z(r);if(!i.s)throw Error(gd+"Division by zero");for(l=r.e-i.e,B=le.length,R=X.length,v=new Z(j),x=v.d=[],c=0;le[c]==(X[c]||0);)++c;if(le[c]>(X[c]||0)&&--l,o==null?T=o=Z.precision:a?T=o+(Ds(r)-Ds(i))+1:T=o,T<0)return new Z(0);if(T=T/wo+2|0,c=0,B==1)for(h=0,le=le[0],T++;(c<R||h)&&T--;c++)C=h*da+(X[c]||0),x[c]=C/le|0,h=C%le|0;else{for(h=da/(le[0]+1)|0,h>1&&(le=t(le,h),X=t(X,h),B=le.length,R=X.length),I=B,b=X.slice(0,B),M=b.length;M<B;)b[M++]=0;U=le.slice(),U.unshift(0),O=le[0],le[1]>=da/2&&++O;do h=0,s=e(le,b,B,M),s<0?(w=b[0],B!=M&&(w=w*da+(b[1]||0)),h=w/O|0,h>1?(h>=da&&(h=da-1),p=t(le,h),g=p.length,M=b.length,s=e(p,b,g,M),s==1&&(h--,n(p,B<g?U:le,g))):(h==0&&(s=h=1),p=le.slice()),g=p.length,g<M&&p.unshift(0),n(b,p,M),s==-1&&(M=b.length,s=e(le,b,B,M),s<1&&(h++,n(b,B<M?U:le,M))),M=b.length):s===0&&(h++,b=[0]),x[c++]=h,s&&b[0]?b[M++]=X[I]||0:(b=[X[I]],M=1);while((I++<R||b[0]!==void 0)&&T--)}return x[0]||x.shift(),v.e=l,oo(v,a?o+Ds(v)+1:o)}}();function Ole(t,e){var n,r,i,o,a,s,l=0,c=0,h=t.constructor,p=h.precision;if(Ds(t)>16)throw Error(k6+Ds(t));if(!t.s)return new h(iu);for(e==null?(Oo=!1,s=p):s=e,a=new h(.03125);t.abs().gte(.1);)t=t.times(a),c+=5;for(r=Math.log(Fv(2,c))/Math.LN10*2+5|0,s+=r,n=i=o=new h(iu),h.precision=s;;){if(i=oo(i.times(t),s),n=n.times(++l),a=o.plus(Fp(i,n,s)),dh(a.d).slice(0,s)===dh(o.d).slice(0,s)){for(;c--;)o=oo(o.times(o),s);return h.precision=p,e==null?(Oo=!0,oo(o,p)):o}o=a}}function Ds(t){for(var e=t.e*wo,n=t.d[0];n>=10;n/=10)e++;return e}function Z3(t,e,n){if(e>t.LN10.sd())throw Oo=!0,n&&(t.precision=n),Error(gd+"LN10 precision limit exceeded");return oo(new t(t.LN10),e)}function _g(t){for(var e="";t--;)e+="0";return e}function JM(t,e){var n,r,i,o,a,s,l,c,h,p=1,g=10,v=t,x=v.d,b=v.constructor,M=b.precision;if(v.s<1)throw Error(gd+(v.s?"NaN":"-Infinity"));if(v.eq(iu))return new b(0);if(e==null?(Oo=!1,c=M):c=e,v.eq(10))return e==null&&(Oo=!0),Z3(b,c);if(c+=g,b.precision=c,n=dh(x),r=n.charAt(0),o=Ds(v),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)v=v.times(t),n=dh(v.d),r=n.charAt(0),p++;o=Ds(v),r>1?(v=new b("0."+n),o++):v=new b(r+"."+n.slice(1))}else return l=Z3(b,c+2,M).times(o+""),v=JM(new b(r+"."+n.slice(1)),c-g).plus(l),b.precision=M,e==null?(Oo=!0,oo(v,M)):v;for(s=a=v=Fp(v.minus(iu),v.plus(iu),c),h=oo(v.times(v),c),i=3;;){if(a=oo(a.times(h),c),l=s.plus(Fp(a,new b(i),c)),dh(l.d).slice(0,c)===dh(s.d).slice(0,c))return s=s.times(2),o!==0&&(s=s.plus(Z3(b,c+2,M).times(o+""))),s=Fp(s,new b(p),c),b.precision=M,e==null?(Oo=!0,oo(s,M)):s;s=l,i+=2}}function KY(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=z1(n/wo),t.d=[],r=(n+1)%wo,n<0&&(r+=wo),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=wo;r<i;)t.d.push(+e.slice(r,r+=wo));e=e.slice(r),r=wo-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Oo&&(t.e>Rk||t.e<-Rk))throw Error(k6+n)}else t.s=0,t.e=0,t.d=[0];return t}function oo(t,e,n){var r,i,o,a,s,l,c,h,p=t.d;for(a=1,o=p[0];o>=10;o/=10)a++;if(r=e-a,r<0)r+=wo,i=e,c=p[h=0];else{if(h=Math.ceil((r+1)/wo),o=p.length,h>=o)return t;for(c=o=p[h],a=1;o>=10;o/=10)a++;r%=wo,i=r-wo+a}if(n!==void 0&&(o=Fv(10,a-i-1),s=c/o%10|0,l=e<0||p[h+1]!==void 0||c%o,l=n<4?(s||l)&&(n==0||n==(t.s<0?3:2)):s>5||s==5&&(n==4||l||n==6&&(r>0?i>0?c/Fv(10,a-i):0:p[h-1])%10&1||n==(t.s<0?8:7))),e<1||!p[0])return l?(o=Ds(t),p.length=1,e=e-o-1,p[0]=Fv(10,(wo-e%wo)%wo),t.e=z1(-e/wo)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(r==0?(p.length=h,o=1,h--):(p.length=h+1,o=Fv(10,wo-r),p[h]=i>0?(c/Fv(10,a-i)%Fv(10,i)|0)*o:0),l)for(;;)if(h==0){(p[0]+=o)==da&&(p[0]=1,++t.e);break}else{if(p[h]+=o,p[h]!=da)break;p[h--]=0,o=1}for(r=p.length;p[--r]===0;)p.pop();if(Oo&&(t.e>Rk||t.e<-Rk))throw Error(k6+Ds(t));return t}function Lle(t,e){var n,r,i,o,a,s,l,c,h,p,g=t.constructor,v=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),Oo?oo(e,v):e;if(l=t.d,p=e.d,r=e.e,c=t.e,l=l.slice(),a=c-r,a){for(h=a<0,h?(n=l,a=-a,s=p.length):(n=p,r=c,s=l.length),i=Math.max(Math.ceil(v/wo),s)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=l.length,s=p.length,h=i<s,h&&(s=i),i=0;i<s;i++)if(l[i]!=p[i]){h=l[i]<p[i];break}a=0}for(h&&(n=l,l=p,p=n,e.s=-e.s),s=l.length,i=p.length-s;i>0;--i)l[s++]=0;for(i=p.length;i>a;){if(l[--i]<p[i]){for(o=i;o&&l[--o]===0;)l[o]=da-1;--l[o],l[i]+=da}l[i]-=p[i]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Oo?oo(e,v):e):new g(0)}function D0(t,e,n){var r,i=Ds(t),o=dh(t.d),a=o.length;return e?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+_g(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+_g(-i-1)+o,n&&(r=n-a)>0&&(o+=_g(r))):i>=a?(o+=_g(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+_g(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=_g(r))),t.s<0?"-"+o:o}function ZY(t,e){if(t.length>e)return t.length=e,!0}function Dle(t){var e,n,r;function i(o){var a=this;if(!(a instanceof i))return new i(o);if(a.constructor=i,o instanceof i){a.s=o.s,a.e=o.e,a.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(y0+o);if(o>0)a.s=1;else if(o<0)o=-o,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(o===~~o&&o<1e7){a.e=0,a.d=[o];return}return KY(a,o.toString())}else if(typeof o!="string")throw Error(y0+o);if(o.charCodeAt(0)===45?(o=o.slice(1),a.s=-1):a.s=1,Wnt.test(o))KY(a,o);else throw Error(y0+o)}if(i.prototype=Yn,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=Dle,i.config=i.set=Hnt,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Hnt(t){if(!t||typeof t!="object")throw Error(gd+"Object expected");var e,n,r,i=["precision",1,N1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(z1(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(y0+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(y0+n+": "+r);return this}var I6=Dle(Vnt);iu=new I6(1);const Zi=I6;function Gnt(t){return Knt(t)||Xnt(t)||Ynt(t)||qnt()}function qnt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ynt(t,e){if(t){if(typeof t=="string")return LB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LB(t,e)}}function Xnt(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Knt(t){if(Array.isArray(t))return LB(t)}function LB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Znt=function(e){return e},Nle={"@@functional/placeholder":!0},zle=function(e){return e===Nle},JY=function(e){return function n(){return arguments.length===0||arguments.length===1&&zle(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},Jnt=function t(e,n){return e===1?n:JY(function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.filter(function(s){return s!==Nle}).length;return a>=e?n.apply(void 0,i):t(e-a,JY(function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var h=i.map(function(p){return zle(p)?l.shift():p});return n.apply(void 0,Gnt(h).concat(l))}))})},CO=function(e){return Jnt(e.length,e)},DB=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},Qnt=CO(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),ert=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Znt;var i=n.reverse(),o=i[0],a=i.slice(1);return function(){return a.reduce(function(s,l){return l(s)},o.apply(void 0,arguments))}},NB=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},Fle=function(e){var n=null,r=null;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n&&o.every(function(s,l){return s===n[l]})||(n=o,r=e.apply(void 0,o)),r}};function trt(t){var e;return t===0?e=1:e=Math.floor(new Zi(t).abs().log(10).toNumber())+1,e}function nrt(t,e,n){for(var r=new Zi(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}var rrt=CO(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),irt=CO(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),ort=CO(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const AO={rangeStep:nrt,getDigitCount:trt,interpolateNumber:rrt,uninterpolateNumber:irt,uninterpolateTruncation:ort};function zB(t){return lrt(t)||art(t)||Ble(t)||srt()}function srt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function art(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function lrt(t){if(Array.isArray(t))return FB(t)}function QM(t,e){return drt(t)||urt(t,e)||Ble(t,e)||crt()}function crt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ble(t,e){if(t){if(typeof t=="string")return FB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FB(t,e)}}function FB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function urt(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,o=void 0;try{for(var a=t[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,o=l}finally{try{!r&&a.return!=null&&a.return()}finally{if(i)throw o}}return n}}function drt(t){if(Array.isArray(t))return t}function $le(t){var e=QM(t,2),n=e[0],r=e[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function jle(t,e,n){if(t.lte(0))return new Zi(0);var r=AO.getDigitCount(t.toNumber()),i=new Zi(10).pow(r),o=t.div(i),a=r!==1?.05:.1,s=new Zi(Math.ceil(o.div(a).toNumber())).add(n).mul(a),l=s.mul(i);return e?l:new Zi(Math.ceil(l))}function frt(t,e,n){var r=1,i=new Zi(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new Zi(10).pow(AO.getDigitCount(t)-1),i=new Zi(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new Zi(Math.floor(t)))}else t===0?i=new Zi(Math.floor((e-1)/2)):n||(i=new Zi(Math.floor(t)));var a=Math.floor((e-1)/2),s=ert(Qnt(function(l){return i.add(new Zi(l-a).mul(r)).toNumber()}),DB);return s(0,e)}function Ule(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Zi(0),tickMin:new Zi(0),tickMax:new Zi(0)};var o=jle(new Zi(e).sub(t).div(n-1),r,i),a;t<=0&&e>=0?a=new Zi(0):(a=new Zi(t).add(e).div(2),a=a.sub(new Zi(a).mod(o)));var s=Math.ceil(a.sub(t).div(o).toNumber()),l=Math.ceil(new Zi(e).sub(a).div(o).toNumber()),c=s+l+1;return c>n?Ule(t,e,n,r,i+1):(c<n&&(l=e>0?l+(n-c):l,s=e>0?s:s+(n-c)),{step:o,tickMin:a.sub(new Zi(s).mul(o)),tickMax:a.add(new Zi(l).mul(o))})}function hrt(t){var e=QM(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),s=$le([n,r]),l=QM(s,2),c=l[0],h=l[1];if(c===-1/0||h===1/0){var p=h===1/0?[c].concat(zB(DB(0,i-1).map(function(){return 1/0}))):[].concat(zB(DB(0,i-1).map(function(){return-1/0})),[h]);return n>r?NB(p):p}if(c===h)return frt(c,i,o);var g=Ule(c,h,a,o),v=g.step,x=g.tickMin,b=g.tickMax,M=AO.rangeStep(x,b.add(new Zi(.1).mul(v)),v);return n>r?NB(M):M}function prt(t,e){var n=QM(t,2),r=n[0],i=n[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=$le([r,i]),s=QM(a,2),l=s[0],c=s[1];if(l===-1/0||c===1/0)return[r,i];if(l===c)return[l];var h=Math.max(e,2),p=jle(new Zi(c).sub(l).div(h-1),o,0),g=[].concat(zB(AO.rangeStep(new Zi(l),new Zi(c).sub(new Zi(.99).mul(p)),p)),[c]);return r>i?NB(g):g}var mrt=Fle(hrt),grt=Fle(prt),yrt=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Ok(){return Ok=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ok.apply(this,arguments)}function vrt(t,e){return wrt(t)||brt(t,e)||_rt(t,e)||xrt()}function xrt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _rt(t,e){if(t){if(typeof t=="string")return QY(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QY(t,e)}}function QY(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function brt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function wrt(t){if(Array.isArray(t))return t}function Srt(t,e){if(t==null)return{};var n=Mrt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Mrt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function LE(t){var e=t.offset,n=t.layout,r=t.width,i=t.dataKey,o=t.data,a=t.dataPointFormatter,s=t.xAxis,l=t.yAxis,c=Srt(t,yrt),h=ni(c),p=o.map(function(g){var v=a(g,i),x=v.x,b=v.y,M=v.value,w=v.errorVal;if(!w)return null;var T=[],C,I;if(Array.isArray(w)){var R=vrt(w,2);C=R[0],I=R[1]}else C=I=w;if(n==="vertical"){var O=s.scale,B=b+e,U=B+r,Z=B-r,j=O(M-C),X=O(M+I);T.push({x1:X,y1:U,x2:X,y2:Z}),T.push({x1:j,y1:B,x2:X,y2:B}),T.push({x1:j,y1:U,x2:j,y2:Z})}else if(n==="horizontal"){var le=l.scale,me=x+e,ie=me-r,ce=me+r,fe=le(M-C),xe=le(M+I);T.push({x1:ie,y1:xe,x2:ce,y2:xe}),T.push({x1:me,y1:fe,x2:me,y2:xe}),T.push({x1:ie,y1:fe,x2:ce,y2:fe})}return Ze.createElement(bs,Ok({className:"recharts-errorBar",key:"bar-".concat(T.map(function(te){return"".concat(te.x1,"-").concat(te.x2,"-").concat(te.y1,"-").concat(te.y2)}))},h),T.map(function(te){return Ze.createElement("line",Ok({},te,{key:"line-".concat(te.x1,"-").concat(te.x2,"-").concat(te.y1,"-").concat(te.y2)}))}))});return Ze.createElement(bs,{className:"recharts-errorBars"},p)}LE.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"};LE.displayName="ErrorBar";function e2(t){"@babel/helpers - typeof";return e2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e2(t)}function eX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function J3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eX(Object(n),!0).forEach(function(r){Ert(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ert(t,e,n){return e=Trt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Trt(t){var e=Crt(t,"string");return e2(e)==="symbol"?e:String(e)}function Crt(t,e){if(e2(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(e2(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vle=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,a=Ap(n,Lb);if(!a)return null;var s;return a.props&&a.props.payload?s=a.props&&a.props.payload:o==="children"?s=(r||[]).reduce(function(l,c){var h=c.item,p=c.props,g=p.sectors||p.data||[];return l.concat(g.map(function(v){return{type:a.props.iconType||h.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):s=(r||[]).map(function(l){var c=l.item,h=c.props,p=h.dataKey,g=h.name,v=h.legendType,x=h.hide;return{inactive:x,dataKey:p,type:a.props.iconType||v||"square",color:R6(c),value:g||p,payload:c.props}}),J3(J3(J3({},a.props),Lb.getWithHeight(a,i)),{},{payload:s,item:a})};function t2(t){"@babel/helpers - typeof";return t2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t2(t)}function tX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ed(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tX(Object(n),!0).forEach(function(r){rb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rb(t,e,n){return e=Art(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Art(t){var e=Prt(t,"string");return t2(e)==="symbol"?e:String(e)}function Prt(t,e){if(t2(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(t2(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nX(t){return Ort(t)||Rrt(t)||Irt(t)||krt()}function krt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Irt(t,e){if(t){if(typeof t=="string")return BB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BB(t,e)}}function Rrt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ort(t){if(Array.isArray(t))return BB(t)}function BB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vu(t,e,n){return oi(t)||oi(e)?n:ta(e)?ld(t,e,n):Kr(e)?e(t):n}function qS(t,e,n,r){var i=Bnt(t,function(s){return vu(s,e)});if(n==="number"){var o=i.filter(function(s){return Tn(s)||parseFloat(s)});return o.length?[EO(o),MO(o)]:[1/0,-1/0]}var a=r?i.filter(function(s){return!oi(s)}):i;return a.map(function(s){return ta(s)||s instanceof Date?s:""})}var Lrt=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=-1,s=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(s<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var l=o.range,c=0;c<s;c++){var h=c>0?i[c-1].coordinate:i[s-1].coordinate,p=i[c].coordinate,g=c>=s-1?i[0].coordinate:i[c+1].coordinate,v=void 0;if(cf(p-h)!==cf(g-p)){var x=[];if(cf(g-p)===cf(l[1]-l[0])){v=g;var b=p+l[1]-l[0];x[0]=Math.min(b,(b+h)/2),x[1]=Math.max(b,(b+h)/2)}else{v=h;var M=g+l[1]-l[0];x[0]=Math.min(p,(M+p)/2),x[1]=Math.max(p,(M+p)/2)}var w=[Math.min(p,(v+p)/2),Math.max(p,(v+p)/2)];if(e>w[0]&&e<=w[1]||e>=x[0]&&e<=x[1]){a=i[c].index;break}}else{var T=Math.min(h,g),C=Math.max(h,g);if(e>(T+p)/2&&e<=(C+p)/2){a=i[c].index;break}}}else for(var I=0;I<s;I++)if(I===0&&e<=(r[I].coordinate+r[I+1].coordinate)/2||I>0&&I<s-1&&e>(r[I].coordinate+r[I-1].coordinate)/2&&e<=(r[I].coordinate+r[I+1].coordinate)/2||I===s-1&&e>(r[I].coordinate+r[I-1].coordinate)/2){a=r[I].index;break}return a},R6=function(e){var n=e,r=n.type.displayName,i=e.props,o=i.stroke,a=i.fill,s;switch(r){case"Line":s=o;break;case"Area":case"Radar":s=o&&o!=="none"?o:a;break;default:s=a;break}return s},Drt=function(e){var n=e.barSize,r=e.stackGroups,i=r===void 0?{}:r;if(!i)return{};for(var o={},a=Object.keys(i),s=0,l=a.length;s<l;s++)for(var c=i[a[s]].stackGroups,h=Object.keys(c),p=0,g=h.length;p<g;p++){var v=c[h[p]],x=v.items,b=v.cateAxisId,M=x.filter(function(C){return Np(C.type).indexOf("Bar")>=0});if(M&&M.length){var w=M[0].props.barSize,T=M[0].props[b];o[T]||(o[T]=[]),o[T].push({item:M[0],stackList:M.slice(1),barSize:oi(w)?n:w})}}return o},Nrt=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,o=e.sizeList,a=o===void 0?[]:o,s=e.maxBarSize,l=a.length;if(l<1)return null;var c=kb(n,i,0,!0),h,p=[];if(a[0].barSize===+a[0].barSize){var g=!1,v=i/l,x=a.reduce(function(I,R){return I+R.barSize||0},0);x+=(l-1)*c,x>=i&&(x-=(l-1)*c,c=0),x>=i&&v>0&&(g=!0,v*=.9,x=l*v);var b=(i-x)/2>>0,M={offset:b-c,size:0};h=a.reduce(function(I,R){var O={item:R.item,position:{offset:M.offset+M.size+c,size:g?v:R.barSize}},B=[].concat(nX(I),[O]);return M=B[B.length-1].position,R.stackList&&R.stackList.length&&R.stackList.forEach(function(U){B.push({item:U,position:M})}),B},p)}else{var w=kb(r,i,0,!0);i-2*w-(l-1)*c<=0&&(c=0);var T=(i-2*w-(l-1)*c)/l;T>1&&(T>>=0);var C=s===+s?Math.min(T,s):T;h=a.reduce(function(I,R,O){var B=[].concat(nX(I),[{item:R.item,position:{offset:w+(T+c)*O+(T-C)/2,size:C}}]);return R.stackList&&R.stackList.length&&R.stackList.forEach(function(U){B.push({item:U,position:B[B.length-1].position})}),B},p)}return h},zrt=function(e,n,r,i){var o=r.children,a=r.width,s=r.margin,l=a-(s.left||0)-(s.right||0),c=Vle({children:o,legendWidth:l});if(c){var h=i||{},p=h.width,g=h.height,v=c.align,x=c.verticalAlign,b=c.layout;if((b==="vertical"||b==="horizontal"&&x==="middle")&&v!=="center"&&Tn(e[v]))return ed(ed({},e),{},rb({},v,e[v]+(p||0)));if((b==="horizontal"||b==="vertical"&&v==="center")&&x!=="middle"&&Tn(e[x]))return ed(ed({},e),{},rb({},x,e[x]+(g||0)))}return e},Frt=function(e,n,r){return oi(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},Wle=function(e,n,r,i,o){var a=n.props.children,s=cd(a,LE).filter(function(c){return Frt(i,o,c.props.direction)});if(s&&s.length){var l=s.map(function(c){return c.props.dataKey});return e.reduce(function(c,h){var p=vu(h,r,0),g=Array.isArray(p)?[EO(p),MO(p)]:[p,p],v=l.reduce(function(x,b){var M=vu(h,b,0),w=g[0]-Math.abs(Array.isArray(M)?M[0]:M),T=g[1]+Math.abs(Array.isArray(M)?M[1]:M);return[Math.min(w,x[0]),Math.max(T,x[1])]},[1/0,-1/0]);return[Math.min(v[0],c[0]),Math.max(v[1],c[1])]},[1/0,-1/0])}return null},Brt=function(e,n,r,i,o){var a=n.map(function(s){return Wle(e,s,r,o,i)}).filter(function(s){return!oi(s)});return a&&a.length?a.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},Hle=function(e,n,r,i,o){var a=n.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&Wle(e,l,c,i)||qS(e,c,r,o)});if(r==="number")return a.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var s={};return a.reduce(function(l,c){for(var h=0,p=c.length;h<p;h++)s[c[h]]||(s[c[h]]=!0,l.push(c[h]));return l},[])},Gle=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},rX=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var o,a,s=e.map(function(l){return l.coordinate===n&&(o=!0),l.coordinate===r&&(a=!0),l.coordinate});return o||s.push(n),a||s.push(r),s},gg=function(e,n,r){if(!e)return null;var i=e.scale,o=e.duplicateDomain,a=e.type,s=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(n||r)&&a==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?cf(s[0]-s[1])*2*c:c,n&&(e.ticks||e.niceTicks)){var h=(e.ticks||e.niceTicks).map(function(p){var g=o?o.indexOf(p):p;return{coordinate:i(g)+c,value:p,offset:c}});return h.filter(function(p){return!CE(p.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(p,g){return{coordinate:i(p)+c,value:p,index:g,offset:c}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(p){return{coordinate:i(p)+c,value:p,offset:c}}):i.domain().map(function(p,g){return{coordinate:i(p)+c,value:o?o[p]:p,index:g,offset:c}})},Q3=new WeakMap,fC=function(e,n){if(typeof n!="function")return e;Q3.has(e)||Q3.set(e,new WeakMap);var r=Q3.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},$rt=function(e,n,r){var i=e.scale,o=e.type,a=e.layout,s=e.axisType;if(i==="auto")return a==="radial"&&s==="radiusAxis"?{scale:qM(),realScaleType:"band"}:a==="radial"&&s==="angleAxis"?{scale:Ak(),realScaleType:"linear"}:o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:GS(),realScaleType:"point"}:o==="category"?{scale:qM(),realScaleType:"band"}:{scale:Ak(),realScaleType:"linear"};if(TE(i)){var l="scale".concat(dO(i));return{scale:(XY[l]||GS)(),realScaleType:XY[l]?l:"point"}}return Kr(i)?{scale:i}:{scale:GS(),realScaleType:"point"}},iX=1e-4,jrt=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),o=Math.min(i[0],i[1])-iX,a=Math.max(i[0],i[1])+iX,s=e(n[0]),l=e(n[r-1]);(s<o||s>a||l<o||l>a)&&e.domain([n[0],n[r-1]])}},Urt=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},Vrt=function(e,n){if(!n||n.length!==2||!Tn(n[0])||!Tn(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),o=[e[0],e[1]];return(!Tn(e[0])||e[0]<r)&&(o[0]=r),(!Tn(e[1])||e[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<r&&(o[1]=r),o},Wrt=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,a=0,s=0;s<n;++s){var l=CE(e[s][r][1])?e[s][r][0]:e[s][r][1];l>=0?(e[s][r][0]=o,e[s][r][1]=o+l,o=e[s][r][1]):(e[s][r][0]=a,e[s][r][1]=a+l,a=e[s][r][1])}},Hrt=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,a=0;a<n;++a){var s=CE(e[a][r][1])?e[a][r][0]:e[a][r][1];s>=0?(e[a][r][0]=o,e[a][r][1]=o+s,o=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},Grt={sign:Wrt,expand:FWe,none:Ib,silhouette:BWe,wiggle:$We,positive:Hrt},qrt=function(e,n,r){var i=n.map(function(s){return s.props.dataKey}),o=Grt[r],a=zWe().keys(i).value(function(s,l){return+vu(s,l,0)}).order(oB).offset(o);return a(e)},Yrt=function(e,n,r,i,o,a){if(!e)return null;var s=a?n.reverse():n,l={},c=s.reduce(function(p,g){var v=g.props,x=v.stackId,b=v.hide;if(b)return p;var M=g.props[r],w=p[M]||{hasStack:!1,stackGroups:{}};if(ta(x)){var T=w.stackGroups[x]||{numericAxisId:r,cateAxisId:i,items:[]};T.items.push(g),w.hasStack=!0,w.stackGroups[x]=T}else w.stackGroups[AE("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[g]};return ed(ed({},p),{},rb({},M,w))},l),h={};return Object.keys(c).reduce(function(p,g){var v=c[g];if(v.hasStack){var x={};v.stackGroups=Object.keys(v.stackGroups).reduce(function(b,M){var w=v.stackGroups[M];return ed(ed({},b),{},rb({},M,{numericAxisId:r,cateAxisId:i,items:w.items,stackedData:qrt(e,w.items,o)}))},x)}return ed(ed({},p),{},rb({},g,v))},h)},Xrt=function(e,n){var r=n.realScaleType,i=n.type,o=n.tickCount,a=n.originalDomain,s=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(o&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var c=e.domain();if(!c.length)return null;var h=mrt(c,o,s);return e.domain([EO(h),MO(h)]),{niceTicks:h}}if(o&&i==="number"){var p=e.domain(),g=grt(p,o,s);return{niceTicks:g}}return null},oX=function(e){var n=e.axis,r=e.ticks,i=e.bandSize,o=e.entry,a=e.index,s=e.dataKey;if(n.type==="category"){if(!n.allowDuplicatedCategory&&n.dataKey&&!oi(o[n.dataKey])){var l=tk(r,"value",o[n.dataKey]);if(l)return l.coordinate+i/2}return r[a]?r[a].coordinate+i/2:null}var c=vu(o,oi(s)?n.dataKey:s);return oi(c)?null:n.scale(c)},sX=function(e){var n=e.axis,r=e.ticks,i=e.offset,o=e.bandSize,a=e.entry,s=e.index;if(n.type==="category")return r[s]?r[s].coordinate+i:null;var l=vu(a,n.dataKey,n.domain[s]);return oi(l)?null:n.scale(l)-o/2+i},Krt=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);return i<=0&&o>=0?0:o<0?o:i}return r[0]},Zrt=function(e,n){var r=e.props.stackId;if(ta(r)){var i=n[r];if(i){var o=i.items.indexOf(e);return o>=0?i.stackedData[o]:null}}return null},Jrt=function(e){return e.reduce(function(n,r){return[EO(r.concat([n[0]]).filter(Tn)),MO(r.concat([n[1]]).filter(Tn))]},[1/0,-1/0])},qle=function(e,n,r){return Object.keys(e).reduce(function(i,o){var a=e[o],s=a.stackedData,l=s.reduce(function(c,h){var p=Jrt(h.slice(n,r+1));return[Math.min(c[0],p[0]),Math.max(c[1],p[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},aX=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,lX=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,$B=function(e,n,r){if(Kr(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(Tn(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(aX.test(e[0])){var o=+aX.exec(e[0])[1];i[0]=n[0]-o}else Kr(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(Tn(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(lX.test(e[1])){var a=+lX.exec(e[1])[1];i[1]=n[1]+a}else Kr(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},Lk=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var o=s6(n,function(p){return p.coordinate}),a=1/0,s=1,l=o.length;s<l;s++){var c=o[s],h=o[s-1];a=Math.min((c.coordinate||0)-(h.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0},cX=function(e,n,r){return!e||!e.length||TO(e,ld(r,"type.defaultProps.domain"))?n:e},Yle=function(e,n){var r=e.props,i=r.dataKey,o=r.name,a=r.unit,s=r.formatter,l=r.tooltipType,c=r.chartType;return ed(ed({},ni(e)),{},{dataKey:i,unit:a,formatter:s,name:o||i,color:R6(e),value:vu(n,i),type:l,payload:n,chartType:c})};function n2(t){"@babel/helpers - typeof";return n2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n2(t)}function uX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uX(Object(n),!0).forEach(function(r){Qrt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qrt(t,e,n){return e=eit(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eit(t){var e=tit(t,"string");return n2(e)==="symbol"?e:String(e)}function tit(t,e){if(n2(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(n2(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Dk=Math.PI/180,nit=function(e){return e*180/Math.PI},Na=function(e,n,r,i){return{x:e+Math.cos(-Dk*i)*r,y:n+Math.sin(-Dk*i)*r}},rit=function(e,n){var r=e.x,i=e.y,o=n.x,a=n.y;return Math.sqrt(Math.pow(r-o,2)+Math.pow(i-a,2))},iit=function(e,n){var r=e.x,i=e.y,o=n.cx,a=n.cy,s=rit({x:r,y:i},{x:o,y:a});if(s<=0)return{radius:s};var l=(r-o)/s,c=Math.acos(l);return i>a&&(c=2*Math.PI-c),{radius:s,angle:nit(c),angleInRadian:c}},oit=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),o=Math.floor(r/360),a=Math.min(i,o);return{startAngle:n-a*360,endAngle:r-a*360}},sit=function(e,n){var r=n.startAngle,i=n.endAngle,o=Math.floor(r/360),a=Math.floor(i/360),s=Math.min(o,a);return e+s*360},fX=function(e,n){var r=e.x,i=e.y,o=iit({x:r,y:i},n),a=o.radius,s=o.angle,l=n.innerRadius,c=n.outerRadius;if(a<l||a>c)return!1;if(a===0)return!0;var h=oit(n),p=h.startAngle,g=h.endAngle,v=s,x;if(p<=g){for(;v>g;)v-=360;for(;v<p;)v+=360;x=v>=p&&v<=g}else{for(;v>p;)v-=360;for(;v<g;)v+=360;x=v>=g&&v<=p}return x?dX(dX({},n),{},{radius:a,angle:sit(v,n)}):null};function r2(t){"@babel/helpers - typeof";return r2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r2(t)}var ait=["offset"];function lit(t){return fit(t)||dit(t)||uit(t)||cit()}function cit(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uit(t,e){if(t){if(typeof t=="string")return jB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jB(t,e)}}function dit(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function fit(t){if(Array.isArray(t))return jB(t)}function jB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hit(t,e){if(t==null)return{};var n=pit(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function pit(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function hX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hX(Object(n),!0).forEach(function(r){mit(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mit(t,e,n){return e=git(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function git(t){var e=yit(t,"string");return r2(e)==="symbol"?e:String(e)}function yit(t,e){if(r2(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(r2(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function i2(){return i2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i2.apply(this,arguments)}var vit=function(e){var n=e.value,r=e.formatter,i=oi(e.children)?n:e.children;return Kr(r)?r(i):i},xit=function(e,n){var r=cf(n-e),i=Math.min(Math.abs(n-e),360);return r*i},_it=function(e,n,r){var i=e.position,o=e.viewBox,a=e.offset,s=e.className,l=o,c=l.cx,h=l.cy,p=l.innerRadius,g=l.outerRadius,v=l.startAngle,x=l.endAngle,b=l.clockWise,M=(p+g)/2,w=xit(v,x),T=w>=0?1:-1,C,I;i==="insideStart"?(C=v+T*a,I=b):i==="insideEnd"?(C=x-T*a,I=!b):i==="end"&&(C=x+T*a,I=b),I=w<=0?I:!I;var R=Na(c,h,M,C),O=Na(c,h,M,C+(I?1:-1)*359),B="M".concat(R.x,",").concat(R.y,`
    A`).concat(M,",").concat(M,",0,1,").concat(I?0:1,`,
    `).concat(O.x,",").concat(O.y),U=oi(e.id)?AE("recharts-radial-line-"):e.id;return Ze.createElement("text",i2({},r,{dominantBaseline:"central",className:Kt("recharts-radial-bar-label",s)}),Ze.createElement("defs",null,Ze.createElement("path",{id:U,d:B})),Ze.createElement("textPath",{xlinkHref:"#".concat(U)},n))},bit=function(e){var n=e.viewBox,r=e.offset,i=e.position,o=n,a=o.cx,s=o.cy,l=o.innerRadius,c=o.outerRadius,h=o.startAngle,p=o.endAngle,g=(h+p)/2;if(i==="outside"){var v=Na(a,s,c+r,g),x=v.x,b=v.y;return{x,y:b,textAnchor:x>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"end"};var M=(l+c)/2,w=Na(a,s,M,g),T=w.x,C=w.y;return{x:T,y:C,textAnchor:"middle",verticalAnchor:"middle"}},wit=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,o=e.position,a=n,s=a.x,l=a.y,c=a.width,h=a.height,p=h>=0?1:-1,g=p*i,v=p>0?"end":"start",x=p>0?"start":"end",b=c>=0?1:-1,M=b*i,w=b>0?"end":"start",T=b>0?"start":"end";if(o==="top"){var C={x:s+c/2,y:l-p*i,textAnchor:"middle",verticalAnchor:v};return Zs(Zs({},C),r?{height:Math.max(l-r.y,0),width:c}:{})}if(o==="bottom"){var I={x:s+c/2,y:l+h+g,textAnchor:"middle",verticalAnchor:x};return Zs(Zs({},I),r?{height:Math.max(r.y+r.height-(l+h),0),width:c}:{})}if(o==="left"){var R={x:s-M,y:l+h/2,textAnchor:w,verticalAnchor:"middle"};return Zs(Zs({},R),r?{width:Math.max(R.x-r.x,0),height:h}:{})}if(o==="right"){var O={x:s+c+M,y:l+h/2,textAnchor:T,verticalAnchor:"middle"};return Zs(Zs({},O),r?{width:Math.max(r.x+r.width-O.x,0),height:h}:{})}var B=r?{width:c,height:h}:{};return o==="insideLeft"?Zs({x:s+M,y:l+h/2,textAnchor:T,verticalAnchor:"middle"},B):o==="insideRight"?Zs({x:s+c-M,y:l+h/2,textAnchor:w,verticalAnchor:"middle"},B):o==="insideTop"?Zs({x:s+c/2,y:l+g,textAnchor:"middle",verticalAnchor:x},B):o==="insideBottom"?Zs({x:s+c/2,y:l+h-g,textAnchor:"middle",verticalAnchor:v},B):o==="insideTopLeft"?Zs({x:s+M,y:l+g,textAnchor:T,verticalAnchor:x},B):o==="insideTopRight"?Zs({x:s+c-M,y:l+g,textAnchor:w,verticalAnchor:x},B):o==="insideBottomLeft"?Zs({x:s+M,y:l+h-g,textAnchor:T,verticalAnchor:v},B):o==="insideBottomRight"?Zs({x:s+c-M,y:l+h-g,textAnchor:w,verticalAnchor:v},B):C1(o)&&(Tn(o.x)||Qv(o.x))&&(Tn(o.y)||Qv(o.y))?Zs({x:s+kb(o.x,c),y:l+kb(o.y,h),textAnchor:"end",verticalAnchor:"end"},B):Zs({x:s+c/2,y:l+h/2,textAnchor:"middle",verticalAnchor:"middle"},B)},Sit=function(e){return"cx"in e&&Tn(e.cx)};function fl(t){var e=t.offset,n=e===void 0?5:e,r=hit(t,ait),i=Zs({offset:n},r),o=i.viewBox,a=i.position,s=i.value,l=i.children,c=i.content,h=i.className,p=h===void 0?"":h,g=i.textBreakAll;if(!o||oi(s)&&oi(l)&&!W.isValidElement(c)&&!Kr(c))return null;if(W.isValidElement(c))return W.cloneElement(c,i);var v;if(Kr(c)){if(v=W.createElement(c,i),W.isValidElement(v))return v}else v=vit(i);var x=Sit(o),b=ni(i,!0);if(x&&(a==="insideStart"||a==="insideEnd"||a==="end"))return _it(i,v,b);var M=x?bit(i):wit(i);return Ze.createElement(bk,i2({className:Kt("recharts-label",p)},b,M,{breakAll:g}),v)}fl.displayName="Label";var Xle=function(e){var n=e.cx,r=e.cy,i=e.angle,o=e.startAngle,a=e.endAngle,s=e.r,l=e.radius,c=e.innerRadius,h=e.outerRadius,p=e.x,g=e.y,v=e.top,x=e.left,b=e.width,M=e.height,w=e.clockWise,T=e.labelViewBox;if(T)return T;if(Tn(b)&&Tn(M)){if(Tn(p)&&Tn(g))return{x:p,y:g,width:b,height:M};if(Tn(v)&&Tn(x))return{x:v,y:x,width:b,height:M}}return Tn(p)&&Tn(g)?{x:p,y:g,width:0,height:0}:Tn(n)&&Tn(r)?{cx:n,cy:r,startAngle:o||i||0,endAngle:a||i||0,innerRadius:c||0,outerRadius:h||l||s||0,clockWise:w}:e.viewBox?e.viewBox:{}},Mit=function(e,n){return e?e===!0?Ze.createElement(fl,{key:"label-implicit",viewBox:n}):ta(e)?Ze.createElement(fl,{key:"label-implicit",viewBox:n,value:e}):W.isValidElement(e)?e.type===fl?W.cloneElement(e,{key:"label-implicit",viewBox:n}):Ze.createElement(fl,{key:"label-implicit",content:e,viewBox:n}):Kr(e)?Ze.createElement(fl,{key:"label-implicit",content:e,viewBox:n}):C1(e)?Ze.createElement(fl,i2({viewBox:n},e,{key:"label-implicit"})):null:null},Eit=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,o=Xle(e),a=cd(i,fl).map(function(l,c){return W.cloneElement(l,{viewBox:n||o,key:"label-".concat(c)})});if(!r)return a;var s=Mit(e.label,n||o);return[s].concat(lit(a))};fl.parseViewBox=Xle;fl.renderCallByParent=Eit;function Tit(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Cit=Tit;const Ait=_i(Cit);function o2(t){"@babel/helpers - typeof";return o2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o2(t)}var Pit=["valueAccessor"],kit=["data","dataKey","clockWise","id","textBreakAll"];function Iit(t){return Dit(t)||Lit(t)||Oit(t)||Rit()}function Rit(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oit(t,e){if(t){if(typeof t=="string")return UB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UB(t,e)}}function Lit(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Dit(t){if(Array.isArray(t))return UB(t)}function UB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Nk(){return Nk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nk.apply(this,arguments)}function pX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pX(Object(n),!0).forEach(function(r){Nit(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nit(t,e,n){return e=zit(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zit(t){var e=Fit(t,"string");return o2(e)==="symbol"?e:String(e)}function Fit(t,e){if(o2(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(o2(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gX(t,e){if(t==null)return{};var n=Bit(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Bit(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var $it=function(e){return Array.isArray(e.value)?Ait(e.value):e.value};function Zg(t){var e=t.valueAccessor,n=e===void 0?$it:e,r=gX(t,Pit),i=r.data,o=r.dataKey,a=r.clockWise,s=r.id,l=r.textBreakAll,c=gX(r,kit);return!i||!i.length?null:Ze.createElement(bs,{className:"recharts-label-list"},i.map(function(h,p){var g=oi(o)?n(h,p):vu(h&&h.payload,o),v=oi(s)?{}:{id:"".concat(s,"-").concat(p)};return Ze.createElement(fl,Nk({},ni(h,!0),c,v,{parentViewBox:h.parentViewBox,value:g,textBreakAll:l,viewBox:fl.parseViewBox(oi(a)?h:mX(mX({},h),{},{clockWise:a})),key:"label-".concat(p),index:p}))}))}Zg.displayName="LabelList";function jit(t,e){return t?t===!0?Ze.createElement(Zg,{key:"labelList-implicit",data:e}):Ze.isValidElement(t)||Kr(t)?Ze.createElement(Zg,{key:"labelList-implicit",data:e,content:t}):C1(t)?Ze.createElement(Zg,Nk({data:e},t,{key:"labelList-implicit"})):null:null}function Uit(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=cd(r,Zg).map(function(a,s){return W.cloneElement(a,{data:e,key:"labelList-".concat(s)})});if(!n)return i;var o=jit(t.label,e);return[o].concat(Iit(i))}Zg.renderCallByParent=Uit;function s2(t){"@babel/helpers - typeof";return s2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s2(t)}function VB(){return VB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VB.apply(this,arguments)}function yX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yX(Object(n),!0).forEach(function(r){Vit(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vit(t,e,n){return e=Wit(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wit(t){var e=Hit(t,"string");return s2(e)==="symbol"?e:String(e)}function Hit(t,e){if(s2(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(s2(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Git=function(e,n){var r=cf(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},hC=function(e){var n=e.cx,r=e.cy,i=e.radius,o=e.angle,a=e.sign,s=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,h=l*(s?1:-1)+i,p=Math.asin(l/h)/Dk,g=c?o:o+a*p,v=Na(n,r,h,g),x=Na(n,r,i,g),b=c?o-a*p:o,M=Na(n,r,h*Math.cos(p*Dk),b);return{center:v,circleTangency:x,lineTangency:M,theta:p}},Kle=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.startAngle,s=e.endAngle,l=Git(a,s),c=a+l,h=Na(n,r,o,a),p=Na(n,r,o,c),g="M ".concat(h.x,",").concat(h.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(a>c),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(i>0){var v=Na(n,r,i,a),x=Na(n,r,i,c);g+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(a<=c),`,
            `).concat(v.x,",").concat(v.y," Z")}else g+="L ".concat(n,",").concat(r," Z");return g},qit=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.cornerRadius,s=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,h=e.endAngle,p=cf(h-c),g=hC({cx:n,cy:r,radius:o,angle:c,sign:p,cornerRadius:a,cornerIsExternal:l}),v=g.circleTangency,x=g.lineTangency,b=g.theta,M=hC({cx:n,cy:r,radius:o,angle:h,sign:-p,cornerRadius:a,cornerIsExternal:l}),w=M.circleTangency,T=M.lineTangency,C=M.theta,I=l?Math.abs(c-h):Math.abs(c-h)-b-C;if(I<0)return s?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):Kle({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:c,endAngle:h});var R="M ".concat(x.x,",").concat(x.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(p<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(I>180),",").concat(+(p<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(p<0),",").concat(T.x,",").concat(T.y,`
  `);if(i>0){var O=hC({cx:n,cy:r,radius:i,angle:c,sign:p,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),B=O.circleTangency,U=O.lineTangency,Z=O.theta,j=hC({cx:n,cy:r,radius:i,angle:h,sign:-p,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),X=j.circleTangency,le=j.lineTangency,me=j.theta,ie=l?Math.abs(c-h):Math.abs(c-h)-Z-me;if(ie<0&&a===0)return"".concat(R,"L").concat(n,",").concat(r,"Z");R+="L".concat(le.x,",").concat(le.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(p<0),",").concat(X.x,",").concat(X.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(ie>180),",").concat(+(p>0),",").concat(B.x,",").concat(B.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(p<0),",").concat(U.x,",").concat(U.y,"Z")}else R+="L".concat(n,",").concat(r,"Z");return R},Yit={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Zle=function(e){var n=vX(vX({},Yit),e),r=n.cx,i=n.cy,o=n.innerRadius,a=n.outerRadius,s=n.cornerRadius,l=n.forceCornerRadius,c=n.cornerIsExternal,h=n.startAngle,p=n.endAngle,g=n.className;if(a<o||h===p)return null;var v=Kt("recharts-sector",g),x=a-o,b=kb(s,x,0,!0),M;return b>0&&Math.abs(h-p)<360?M=qit({cx:r,cy:i,innerRadius:o,outerRadius:a,cornerRadius:Math.min(b,x/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:h,endAngle:p}):M=Kle({cx:r,cy:i,innerRadius:o,outerRadius:a,startAngle:h,endAngle:p}),Ze.createElement("path",VB({},ni(n,!0),{className:v,d:M,role:"img"}))};function a2(t){"@babel/helpers - typeof";return a2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a2(t)}function WB(){return WB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WB.apply(this,arguments)}function xX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _X(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xX(Object(n),!0).forEach(function(r){Xit(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xit(t,e,n){return e=Kit(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kit(t){var e=Zit(t,"string");return a2(e)==="symbol"?e:String(e)}function Zit(t,e){if(a2(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(a2(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bX={curveBasisClosed:TWe,curveBasisOpen:CWe,curveBasis:EWe,curveBumpX:dWe,curveBumpY:fWe,curveLinearClosed:AWe,curveLinear:hO,curveMonotoneX:PWe,curveMonotoneY:kWe,curveNatural:IWe,curveStep:RWe,curveStepAfter:LWe,curveStepBefore:OWe},pC=function(e){return e.x===+e.x&&e.y===+e.y},Xw=function(e){return e.x},Kw=function(e){return e.y},Jit=function(e,n){if(Kr(e))return e;var r="curve".concat(dO(e));return(r==="curveMonotone"||r==="curveBump")&&n?bX["".concat(r).concat(n==="vertical"?"Y":"X")]:bX[r]||hO},Qit=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,o=i===void 0?[]:i,a=e.baseLine,s=e.layout,l=e.connectNulls,c=l===void 0?!1:l,h=Jit(r,s),p=c?o.filter(function(b){return pC(b)}):o,g;if(Array.isArray(a)){var v=c?a.filter(function(b){return pC(b)}):a,x=p.map(function(b,M){return _X(_X({},b),{},{base:v[M]})});return s==="vertical"?g=rC().y(Kw).x1(Xw).x0(function(b){return b.base.x}):g=rC().x(Xw).y1(Kw).y0(function(b){return b.base.y}),g.defined(pC).curve(h),g(x)}return s==="vertical"&&Tn(a)?g=rC().y(Kw).x1(Xw).x0(a):Tn(a)?g=rC().x(Xw).y1(Kw).y0(a):g=Xse().x(Xw).y(Kw),g.defined(pC).curve(h),g(p)},HB=function(e){var n=e.className,r=e.points,i=e.path,o=e.pathRef;if((!r||!r.length)&&!i)return null;var a=r&&r.length?Qit(e):i;return Ze.createElement("path",WB({},ni(e),nk(e),{className:Kt("recharts-curve",n),d:a,ref:o}))};function l2(t){"@babel/helpers - typeof";return l2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l2(t)}function zk(){return zk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zk.apply(this,arguments)}function eot(t,e){return iot(t)||rot(t,e)||not(t,e)||tot()}function tot(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function not(t,e){if(t){if(typeof t=="string")return wX(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wX(t,e)}}function wX(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rot(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function iot(t){if(Array.isArray(t))return t}function SX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function MX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SX(Object(n),!0).forEach(function(r){oot(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oot(t,e,n){return e=sot(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sot(t){var e=aot(t,"string");return l2(e)==="symbol"?e:String(e)}function aot(t,e){if(l2(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(l2(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var EX=function(e,n,r,i,o){var a=Math.min(Math.abs(r)/2,Math.abs(i)/2),s=i>=0?1:-1,l=r>=0?1:-1,c=i>=0&&r>=0||i<0&&r<0?1:0,h;if(a>0&&o instanceof Array){for(var p=[0,0,0,0],g=0,v=4;g<v;g++)p[g]=o[g]>a?a:o[g];h="M".concat(e,",").concat(n+s*p[0]),p[0]>0&&(h+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(c,",").concat(e+l*p[0],",").concat(n)),h+="L ".concat(e+r-l*p[1],",").concat(n),p[1]>0&&(h+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(n+s*p[1])),h+="L ".concat(e+r,",").concat(n+i-s*p[2]),p[2]>0&&(h+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(c,`,
        `).concat(e+r-l*p[2],",").concat(n+i)),h+="L ".concat(e+l*p[3],",").concat(n+i),p[3]>0&&(h+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(n+i-s*p[3])),h+="Z"}else if(a>0&&o===+o&&o>0){var x=Math.min(a,o);h="M ".concat(e,",").concat(n+s*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(c,",").concat(e+l*x,",").concat(n,`
            L `).concat(e+r-l*x,",").concat(n,`
            A `).concat(x,",").concat(x,",0,0,").concat(c,",").concat(e+r,",").concat(n+s*x,`
            L `).concat(e+r,",").concat(n+i-s*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(c,",").concat(e+r-l*x,",").concat(n+i,`
            L `).concat(e+l*x,",").concat(n+i,`
            A `).concat(x,",").concat(x,",0,0,").concat(c,",").concat(e,",").concat(n+i-s*x," Z")}else h="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return h},lot=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,o=n.x,a=n.y,s=n.width,l=n.height;if(Math.abs(s)>0&&Math.abs(l)>0){var c=Math.min(o,o+s),h=Math.max(o,o+s),p=Math.min(a,a+l),g=Math.max(a,a+l);return r>=c&&r<=h&&i>=p&&i<=g}return!1},cot={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},O6=function(e){var n=MX(MX({},cot),e),r=W.useRef(),i=W.useState(-1),o=eot(i,2),a=o[0],s=o[1];W.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var I=r.current.getTotalLength();I&&s(I)}catch{}},[]);var l=n.x,c=n.y,h=n.width,p=n.height,g=n.radius,v=n.className,x=n.animationEasing,b=n.animationDuration,M=n.animationBegin,w=n.isAnimationActive,T=n.isUpdateAnimationActive;if(l!==+l||c!==+c||h!==+h||p!==+p||h===0||p===0)return null;var C=Kt("recharts-rectangle",v);return T?Ze.createElement(Xp,{canBegin:a>0,from:{width:h,height:p,x:l,y:c},to:{width:h,height:p,x:l,y:c},duration:b,animationEasing:x,isActive:T},function(I){var R=I.width,O=I.height,B=I.x,U=I.y;return Ze.createElement(Xp,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:M,duration:b,isActive:w,easing:x},Ze.createElement("path",zk({},ni(n,!0),{className:C,d:EX(B,U,R,O,g),ref:r})))}):Ze.createElement("path",zk({},ni(n,!0),{className:C,d:EX(l,c,h,p,g)}))};function GB(){return GB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},GB.apply(this,arguments)}var L6=function(e){var n=e.cx,r=e.cy,i=e.r,o=e.className,a=Kt("recharts-dot",o);return n===+n&&r===+r&&i===+i?Ze.createElement("circle",GB({},ni(e),nk(e),{className:a,cx:n,cy:r,r:i})):null};function c2(t){"@babel/helpers - typeof";return c2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c2(t)}var uot=["x","y","top","left","width","height","className"];function qB(){return qB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qB.apply(this,arguments)}function TX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dot(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TX(Object(n),!0).forEach(function(r){fot(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fot(t,e,n){return e=hot(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hot(t){var e=pot(t,"string");return c2(e)==="symbol"?e:String(e)}function pot(t,e){if(c2(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(c2(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mot(t,e){if(t==null)return{};var n=got(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function got(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var yot=function(e,n,r,i,o,a){return"M".concat(e,",").concat(o,"v").concat(i,"M").concat(a,",").concat(n,"h").concat(r)},vot=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,a=e.top,s=a===void 0?0:a,l=e.left,c=l===void 0?0:l,h=e.width,p=h===void 0?0:h,g=e.height,v=g===void 0?0:g,x=e.className,b=mot(e,uot),M=dot({x:r,y:o,top:s,left:c,width:p,height:v},b);return!Tn(r)||!Tn(o)||!Tn(p)||!Tn(v)||!Tn(s)||!Tn(c)?null:Ze.createElement("path",qB({},ni(M,!0),{className:Kt("recharts-cross",x),d:yot(r,o,p,v,s,c)}))},xot=vae,_ot=xot(Object.getPrototypeOf,Object),bot=_ot,wot=lm,Sot=bot,Mot=cm,Eot="[object Object]",Tot=Function.prototype,Cot=Object.prototype,Jle=Tot.toString,Aot=Cot.hasOwnProperty,Pot=Jle.call(Object);function kot(t){if(!Mot(t)||wot(t)!=Eot)return!1;var e=Sot(t);if(e===null)return!0;var n=Aot.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Jle.call(n)==Pot}var Iot=kot;const Rot=_i(Iot);var Oot=lm,Lot=cm,Dot="[object Boolean]";function Not(t){return t===!0||t===!1||Lot(t)&&Oot(t)==Dot}var zot=Not;const Fot=_i(zot);function u2(t){"@babel/helpers - typeof";return u2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u2(t)}function Fk(){return Fk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fk.apply(this,arguments)}function Bot(t,e){return Vot(t)||Uot(t,e)||jot(t,e)||$ot()}function $ot(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jot(t,e){if(t){if(typeof t=="string")return CX(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CX(t,e)}}function CX(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Uot(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function Vot(t){if(Array.isArray(t))return t}function AX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function PX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AX(Object(n),!0).forEach(function(r){Wot(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wot(t,e,n){return e=Hot(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hot(t){var e=Got(t,"string");return u2(e)==="symbol"?e:String(e)}function Got(t,e){if(u2(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(u2(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kX=function(e,n,r,i,o){var a=r-i,s;return s="M ".concat(e,",").concat(n),s+="L ".concat(e+r,",").concat(n),s+="L ".concat(e+r-a/2,",").concat(n+o),s+="L ".concat(e+r-a/2-i,",").concat(n+o),s+="L ".concat(e,",").concat(n," Z"),s},qot={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Yot=function(e){var n=PX(PX({},qot),e),r=W.useRef(),i=W.useState(-1),o=Bot(i,2),a=o[0],s=o[1];W.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var C=r.current.getTotalLength();C&&s(C)}catch{}},[]);var l=n.x,c=n.y,h=n.upperWidth,p=n.lowerWidth,g=n.height,v=n.className,x=n.animationEasing,b=n.animationDuration,M=n.animationBegin,w=n.isUpdateAnimationActive;if(l!==+l||c!==+c||h!==+h||p!==+p||g!==+g||h===0&&p===0||g===0)return null;var T=Kt("recharts-trapezoid",v);return w?Ze.createElement(Xp,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:g,x:l,y:c},to:{upperWidth:h,lowerWidth:p,height:g,x:l,y:c},duration:b,animationEasing:x,isActive:w},function(C){var I=C.upperWidth,R=C.lowerWidth,O=C.height,B=C.x,U=C.y;return Ze.createElement(Xp,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:M,duration:b,easing:x},Ze.createElement("path",Fk({},ni(n,!0),{className:T,d:kX(B,U,I,R,O),ref:r})))}):Ze.createElement("g",null,Ze.createElement("path",Fk({},ni(n,!0),{className:T,d:kX(l,c,h,p,g)})))},Xot=["option","shapeType","propTransformer","activeClassName","isActive"];function d2(t){"@babel/helpers - typeof";return d2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d2(t)}function Kot(t,e){if(t==null)return{};var n=Zot(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Zot(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function IX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IX(Object(n),!0).forEach(function(r){Jot(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jot(t,e,n){return e=Qot(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qot(t){var e=est(t,"string");return d2(e)==="symbol"?e:String(e)}function est(t,e){if(d2(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(d2(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tst(t,e){return Bk(Bk({},e),t)}function nst(t,e){return t==="symbols"}function RX(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return Ze.createElement(O6,n);case"trapezoid":return Ze.createElement(Yot,n);case"sector":return Ze.createElement(Zle,n);case"symbols":if(nst(e))return Ze.createElement(JU,n);break;default:return null}}function rst(t){return W.isValidElement(t)?t.props:t}function ist(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?tst:r,o=t.activeClassName,a=o===void 0?"recharts-active-shape":o,s=t.isActive,l=Kot(t,Xot),c;if(W.isValidElement(e))c=W.cloneElement(e,Bk(Bk({},l),rst(e)));else if(Kr(e))c=e(l);else if(Rot(e)&&!Fot(e)){var h=i(e,l);c=Ze.createElement(RX,{shapeType:n,elementProps:h})}else{var p=l;c=Ze.createElement(RX,{shapeType:n,elementProps:p})}return s?Ze.createElement(bs,{className:a},c):c}function PO(t,e){return e!=null&&"trapezoids"in t.props}function kO(t,e){return e!=null&&"sectors"in t.props}function f2(t,e){return e!=null&&"points"in t.props}function ost(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,o=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&o}function sst(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function ast(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function lst(t,e){var n;return PO(t,e)?n=ost:kO(t,e)?n=sst:f2(t,e)&&(n=ast),n}function cst(t,e){var n;return PO(t,e)?n="trapezoids":kO(t,e)?n="sectors":f2(t,e)&&(n="points"),n}function ust(t,e){if(PO(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(kO(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return f2(t,e)?e.payload:{}}function dst(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=cst(n,e),o=ust(n,e),a=r.filter(function(l,c){var h=TO(o,l),p=n.props[i].filter(function(x){var b=lst(n,e);return b(x,e)}),g=n.props[i].indexOf(p[p.length-1]),v=c===g;return h&&v}),s=r.indexOf(a[a.length-1]);return s}var fst=Math.ceil,hst=Math.max;function pst(t,e,n,r){for(var i=-1,o=hst(fst((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a}var mst=pst,gst=Uae,OX=1/0,yst=17976931348623157e292;function vst(t){if(!t)return t===0?t:0;if(t=gst(t),t===OX||t===-OX){var e=t<0?-1:1;return e*yst}return t===t?t:0}var Qle=vst,xst=mst,_st=yO,eN=Qle;function bst(t){return function(e,n,r){return r&&typeof r!="number"&&_st(e,n,r)&&(n=r=void 0),e=eN(e),n===void 0?(n=e,e=0):n=eN(n),r=r===void 0?e<n?1:-1:eN(r),xst(e,n,r,t)}}var wst=bst,Sst=wst,Mst=Sst(),Est=Mst;const $k=_i(Est);function h2(t){"@babel/helpers - typeof";return h2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h2(t)}function LX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function DX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LX(Object(n),!0).forEach(function(r){ece(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ece(t,e,n){return e=Tst(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tst(t){var e=Cst(t,"string");return h2(e)==="symbol"?e:String(e)}function Cst(t,e){if(h2(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(h2(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ast=["Webkit","Moz","O","ms"],Pst=function(e,n){if(!e)return null;var r=e.replace(/(\w)/,function(o){return o.toUpperCase()}),i=Ast.reduce(function(o,a){return DX(DX({},o),{},ece({},a+r,n))},{});return i[e]=n,i};function Ub(t){"@babel/helpers - typeof";return Ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ub(t)}function jk(){return jk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jk.apply(this,arguments)}function NX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NX(Object(n),!0).forEach(function(r){Kc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kst(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tce(r.key),r)}}function Ist(t,e,n){return e&&zX(t.prototype,e),n&&zX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Rst(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YB(t,e)}function YB(t,e){return YB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},YB(t,e)}function Ost(t){var e=Dst();return function(){var r=Uk(t),i;if(e){var o=Uk(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Lst(this,i)}}function Lst(t,e){if(e&&(Ub(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rh(t)}function rh(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dst(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Uk(t){return Uk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Uk(t)}function Kc(t,e,n){return e=tce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tce(t){var e=Nst(t,"string");return Ub(e)==="symbol"?e:String(e)}function Nst(t,e){if(Ub(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ub(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zst=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,o=e.x,a=e.width,s=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,c=GS().domain($k(0,l)).range([o,o+a-s]),h=c.domain().map(function(p){return c(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(i),scale:c,scaleValues:h}},FX=function(e){return e.changedTouches&&!!e.changedTouches.length},p2=function(t){Rst(n,t);var e=Ost(n);function n(r){var i;return kst(this,n),i=e.call(this,r),Kc(rh(i),"handleDrag",function(o){i.leaveTimer&&(clearTimeout(i.leaveTimer),i.leaveTimer=null),i.state.isTravellerMoving?i.handleTravellerMove(o):i.state.isSlideMoving&&i.handleSlideDrag(o)}),Kc(rh(i),"handleTouchMove",function(o){o.changedTouches!=null&&o.changedTouches.length>0&&i.handleDrag(o.changedTouches[0])}),Kc(rh(i),"handleDragEnd",function(){i.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var o=i.props,a=o.endIndex,s=o.onDragEnd,l=o.startIndex;s==null||s({endIndex:a,startIndex:l})}),i.detachDragEndListener()}),Kc(rh(i),"handleLeaveWrapper",function(){(i.state.isTravellerMoving||i.state.isSlideMoving)&&(i.leaveTimer=window.setTimeout(i.handleDragEnd,i.props.leaveTimeOut))}),Kc(rh(i),"handleEnterSlideOrTraveller",function(){i.setState({isTextActive:!0})}),Kc(rh(i),"handleLeaveSlideOrTraveller",function(){i.setState({isTextActive:!1})}),Kc(rh(i),"handleSlideDragStart",function(o){var a=FX(o)?o.changedTouches[0]:o;i.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),i.attachDragEndListener()}),i.travellerDragStartHandlers={startX:i.handleTravellerDragStart.bind(rh(i),"startX"),endX:i.handleTravellerDragStart.bind(rh(i),"endX")},i.state={},i}return Ist(n,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(i){var o=i.startX,a=i.endX,s=this.state.scaleValues,l=this.props,c=l.gap,h=l.data,p=h.length-1,g=Math.min(o,a),v=Math.max(o,a),x=n.getIndexInRange(s,g),b=n.getIndexInRange(s,v);return{startIndex:x-x%c,endIndex:b===p?p:b-b%c}}},{key:"getTextOfTick",value:function(i){var o=this.props,a=o.data,s=o.tickFormatter,l=o.dataKey,c=vu(a[i],l,i);return Kr(s)?s(c,i):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(i){var o=this.state,a=o.slideMoveStartX,s=o.startX,l=o.endX,c=this.props,h=c.x,p=c.width,g=c.travellerWidth,v=c.startIndex,x=c.endIndex,b=c.onChange,M=i.pageX-a;M>0?M=Math.min(M,h+p-g-l,h+p-g-s):M<0&&(M=Math.max(M,h-s,h-l));var w=this.getIndex({startX:s+M,endX:l+M});(w.startIndex!==v||w.endIndex!==x)&&b&&b(w),this.setState({startX:s+M,endX:l+M,slideMoveStartX:i.pageX})}},{key:"handleTravellerDragStart",value:function(i,o){var a=FX(o)?o.changedTouches[0]:o;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:i,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(i){var o,a=this.state,s=a.brushMoveStartX,l=a.movingTravellerId,c=a.endX,h=a.startX,p=this.state[l],g=this.props,v=g.x,x=g.width,b=g.travellerWidth,M=g.onChange,w=g.gap,T=g.data,C={startX:this.state.startX,endX:this.state.endX},I=i.pageX-s;I>0?I=Math.min(I,v+x-b-p):I<0&&(I=Math.max(I,v-p)),C[l]=p+I;var R=this.getIndex(C),O=R.startIndex,B=R.endIndex,U=function(){var j=T.length-1;return l==="startX"&&(c>h?O%w===0:B%w===0)||c<h&&B===j||l==="endX"&&(c>h?B%w===0:O%w===0)||c>h&&B===j};this.setState((o={},Kc(o,l,p+I),Kc(o,"brushMoveStartX",i.pageX),o),function(){M&&U()&&M(R)})}},{key:"handleTravellerMoveKeyboard",value:function(i,o){var a=this,s=this.state,l=s.scaleValues,c=s.startX,h=s.endX,p=this.state[o],g=l.indexOf(p);if(g!==-1){var v=g+i;if(!(v===-1||v>=l.length)){var x=l[v];o==="startX"&&x>=h||o==="endX"&&x<=c||this.setState(Kc({},o,x),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var i=this.props,o=i.x,a=i.y,s=i.width,l=i.height,c=i.fill,h=i.stroke;return Ze.createElement("rect",{stroke:h,fill:c,x:o,y:a,width:s,height:l})}},{key:"renderPanorama",value:function(){var i=this.props,o=i.x,a=i.y,s=i.width,l=i.height,c=i.data,h=i.children,p=i.padding,g=W.Children.only(h);return g?Ze.cloneElement(g,{x:o,y:a,width:s,height:l,margin:p,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(i,o){var a=this,s=this.props,l=s.y,c=s.travellerWidth,h=s.height,p=s.traveller,g=s.ariaLabel,v=s.data,x=s.startIndex,b=s.endIndex,M=Math.max(i,this.props.x),w=tN(tN({},ni(this.props)),{},{x:M,y:l,width:c,height:h}),T=g||"Min value: ".concat(v[x].name,", Max value: ").concat(v[b].name);return Ze.createElement(bs,{tabIndex:0,role:"slider","aria-label":T,"aria-valuenow":i,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[o],onTouchStart:this.travellerDragStartHandlers[o],onKeyDown:function(I){["ArrowLeft","ArrowRight"].includes(I.key)&&(I.preventDefault(),I.stopPropagation(),a.handleTravellerMoveKeyboard(I.key==="ArrowRight"?1:-1,o))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},n.renderTraveller(p,w))}},{key:"renderSlide",value:function(i,o){var a=this.props,s=a.y,l=a.height,c=a.stroke,h=a.travellerWidth,p=Math.min(i,o)+h,g=Math.max(Math.abs(o-i)-h,0);return Ze.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:p,y:s,width:g,height:l})}},{key:"renderText",value:function(){var i=this.props,o=i.startIndex,a=i.endIndex,s=i.y,l=i.height,c=i.travellerWidth,h=i.stroke,p=this.state,g=p.startX,v=p.endX,x=5,b={pointerEvents:"none",fill:h};return Ze.createElement(bs,{className:"recharts-brush-texts"},Ze.createElement(bk,jk({textAnchor:"end",verticalAnchor:"middle",x:Math.min(g,v)-x,y:s+l/2},b),this.getTextOfTick(o)),Ze.createElement(bk,jk({textAnchor:"start",verticalAnchor:"middle",x:Math.max(g,v)+c+x,y:s+l/2},b),this.getTextOfTick(a)))}},{key:"render",value:function(){var i=this.props,o=i.data,a=i.className,s=i.children,l=i.x,c=i.y,h=i.width,p=i.height,g=i.alwaysShowText,v=this.state,x=v.startX,b=v.endX,M=v.isTextActive,w=v.isSlideMoving,T=v.isTravellerMoving,C=v.isTravellerFocused;if(!o||!o.length||!Tn(l)||!Tn(c)||!Tn(h)||!Tn(p)||h<=0||p<=0)return null;var I=Kt("recharts-brush",a),R=Ze.Children.count(s)===1,O=Pst("userSelect","none");return Ze.createElement(bs,{className:I,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:O},this.renderBackground(),R&&this.renderPanorama(),this.renderSlide(x,b),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(b,"endX"),(M||w||T||C||g)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(i){var o=i.x,a=i.y,s=i.width,l=i.height,c=i.stroke,h=Math.floor(a+l/2)-1;return Ze.createElement(Ze.Fragment,null,Ze.createElement("rect",{x:o,y:a,width:s,height:l,fill:c,stroke:"none"}),Ze.createElement("line",{x1:o+1,y1:h,x2:o+s-1,y2:h,fill:"none",stroke:"#fff"}),Ze.createElement("line",{x1:o+1,y1:h+2,x2:o+s-1,y2:h+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(i,o){var a;return Ze.isValidElement(i)?a=Ze.cloneElement(i,o):Kr(i)?a=i(o):a=n.renderDefaultTraveller(o),a}},{key:"getDerivedStateFromProps",value:function(i,o){var a=i.data,s=i.width,l=i.x,c=i.travellerWidth,h=i.updateId,p=i.startIndex,g=i.endIndex;if(a!==o.prevData||h!==o.prevUpdateId)return tN({prevData:a,prevTravellerWidth:c,prevUpdateId:h,prevX:l,prevWidth:s},a&&a.length?zst({data:a,width:s,x:l,travellerWidth:c,startIndex:p,endIndex:g}):{scale:null,scaleValues:null});if(o.scale&&(s!==o.prevWidth||l!==o.prevX||c!==o.prevTravellerWidth)){o.scale.range([l,l+s-c]);var v=o.scale.domain().map(function(x){return o.scale(x)});return{prevData:a,prevTravellerWidth:c,prevUpdateId:h,prevX:l,prevWidth:s,startX:o.scale(i.startIndex),endX:o.scale(i.endIndex),scaleValues:v}}return null}},{key:"getIndexInRange",value:function(i,o){for(var a=i.length,s=0,l=a-1;l-s>1;){var c=Math.floor((s+l)/2);i[c]>o?l=c:s=c}return o>=i[l]?l:s}}]),n}(W.PureComponent);Kc(p2,"displayName","Brush");Kc(p2,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Fst=o6;function Bst(t,e){var n;return Fst(t,function(r,i,o){return n=e(r,i,o),!n}),!!n}var $st=Bst,jst=uae,Ust=_y,Vst=$st,Wst=kc,Hst=yO;function Gst(t,e,n){var r=Wst(t)?jst:Vst;return n&&Hst(t,e,n)&&(e=void 0),r(t,Ust(e))}var qst=Gst;const Yst=_i(qst);var wh=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},BX=Rae;function Xst(t,e,n){e=="__proto__"&&BX?BX(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Kst=Xst,Zst=Kst,Jst=kae,Qst=_y;function eat(t,e){var n={};return e=Qst(e),Jst(t,function(r,i,o){Zst(n,i,e(r,i,o))}),n}var tat=eat;const nat=_i(tat);function rat(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var iat=rat,oat=o6;function sat(t,e){var n=!0;return oat(t,function(r,i,o){return n=!!e(r,i,o),n}),n}var aat=sat,lat=iat,cat=aat,uat=_y,dat=kc,fat=yO;function hat(t,e,n){var r=dat(t)?lat:cat;return n&&fat(t,e,n)&&(e=void 0),r(t,uat(e))}var pat=hat;const nce=_i(pat);function m2(t){"@babel/helpers - typeof";return m2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m2(t)}var mat=["x","y"];function XB(){return XB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},XB.apply(this,arguments)}function $X(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$X(Object(n),!0).forEach(function(r){gat(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$X(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gat(t,e,n){return e=yat(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yat(t){var e=vat(t,"string");return m2(e)==="symbol"?e:String(e)}function vat(t,e){if(m2(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(m2(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xat(t,e){if(t==null)return{};var n=_at(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _at(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function bat(t,e){var n=t.x,r=t.y,i=xat(t,mat),o="".concat(n),a=parseInt(o,10),s="".concat(r),l=parseInt(s,10),c="".concat(e.height||i.height),h=parseInt(c,10),p="".concat(e.width||i.width),g=parseInt(p,10);return Zw(Zw(Zw(Zw(Zw({},e),i),a?{x:a}:{}),l?{y:l}:{}),{},{height:h,width:g,name:e.name,radius:e.radius})}function jX(t){return Ze.createElement(ist,XB({shapeType:"rectangle",propTransformer:bat,activeClassName:"recharts-active-bar"},t))}var wat=["value","background"];function Vb(t){"@babel/helpers - typeof";return Vb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vb(t)}function Sat(t,e){if(t==null)return{};var n=Mat(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Mat(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Vk(){return Vk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vk.apply(this,arguments)}function UX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ua(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UX(Object(n),!0).forEach(function(r){Dg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Eat(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rce(r.key),r)}}function Tat(t,e,n){return e&&VX(t.prototype,e),n&&VX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cat(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KB(t,e)}function KB(t,e){return KB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},KB(t,e)}function Aat(t){var e=kat();return function(){var r=Wk(t),i;if(e){var o=Wk(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Pat(this,i)}}function Pat(t,e){if(e&&(Vb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wS(t)}function wS(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kat(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Wk(t){return Wk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wk(t)}function Dg(t,e,n){return e=rce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rce(t){var e=Iat(t,"string");return Vb(e)==="symbol"?e:String(e)}function Iat(t,e){if(Vb(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Vb(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var IO=function(t){Cat(n,t);var e=Aat(n);function n(){var r;Eat(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o)),Dg(wS(r),"state",{isAnimationFinished:!1}),Dg(wS(r),"id",AE("recharts-bar-")),Dg(wS(r),"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),s&&s()}),Dg(wS(r),"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),s&&s()}),r}return Tat(n,[{key:"renderRectanglesStatically",value:function(i){var o=this,a=this.props,s=a.shape,l=a.dataKey,c=a.activeIndex,h=a.activeBar,p=ni(this.props);return i&&i.map(function(g,v){var x=v===c,b=x?h:s,M=ua(ua(ua({},p),g),{},{isActive:x,option:b,index:v,dataKey:l,onAnimationStart:o.handleAnimationStart,onAnimationEnd:o.handleAnimationEnd});return Ze.createElement(bs,Vk({className:"recharts-bar-rectangle"},rk(o.props,g,v),{key:"rectangle-".concat(g==null?void 0:g.x,"-").concat(g==null?void 0:g.y,"-").concat(g==null?void 0:g.value)}),Ze.createElement(jX,M))})}},{key:"renderRectanglesWithAnimation",value:function(){var i=this,o=this.props,a=o.data,s=o.layout,l=o.isAnimationActive,c=o.animationBegin,h=o.animationDuration,p=o.animationEasing,g=o.animationId,v=this.state.prevData;return Ze.createElement(Xp,{begin:c,duration:h,isActive:l,easing:p,from:{t:0},to:{t:1},key:"bar-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var b=x.t,M=a.map(function(w,T){var C=v&&v[T];if(C){var I=nf(C.x,w.x),R=nf(C.y,w.y),O=nf(C.width,w.width),B=nf(C.height,w.height);return ua(ua({},w),{},{x:I(b),y:R(b),width:O(b),height:B(b)})}if(s==="horizontal"){var U=nf(0,w.height),Z=U(b);return ua(ua({},w),{},{y:w.y+w.height-Z,height:Z})}var j=nf(0,w.width),X=j(b);return ua(ua({},w),{},{width:X})});return Ze.createElement(bs,null,i.renderRectanglesStatically(M))})}},{key:"renderRectangles",value:function(){var i=this.props,o=i.data,a=i.isAnimationActive,s=this.state.prevData;return a&&o&&o.length&&(!s||!TO(s,o))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(o)}},{key:"renderBackground",value:function(){var i=this,o=this.props,a=o.data,s=o.dataKey,l=o.activeIndex,c=ni(this.props.background);return a.map(function(h,p){h.value;var g=h.background,v=Sat(h,wat);if(!g)return null;var x=ua(ua(ua(ua(ua({},v),{},{fill:"#eee"},g),c),rk(i.props,h,p)),{},{onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd,dataKey:s,index:p,key:"background-bar-".concat(p),className:"recharts-bar-background-rectangle"});return Ze.createElement(jX,Vk({option:i.props.background,isActive:p===l},x))})}},{key:"renderErrorBar",value:function(i,o){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,l=a.xAxis,c=a.yAxis,h=a.layout,p=a.children,g=cd(p,LE);if(!g)return null;var v=h==="vertical"?s[0].height/2:s[0].width/2,x=function(w,T){var C=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:C,errorVal:vu(w,T)}},b={clipPath:i?"url(#clipPath-".concat(o,")"):null};return Ze.createElement(bs,b,g.map(function(M){return Ze.cloneElement(M,{key:"error-bar-".concat(o,"-").concat(M.props.dataKey),data:s,xAxis:l,yAxis:c,layout:h,offset:v,dataPointFormatter:x})}))}},{key:"render",value:function(){var i=this.props,o=i.hide,a=i.data,s=i.className,l=i.xAxis,c=i.yAxis,h=i.left,p=i.top,g=i.width,v=i.height,x=i.isAnimationActive,b=i.background,M=i.id;if(o||!a||!a.length)return null;var w=this.state.isAnimationFinished,T=Kt("recharts-bar",s),C=l&&l.allowDataOverflow,I=c&&c.allowDataOverflow,R=C||I,O=oi(M)?this.id:M;return Ze.createElement(bs,{className:T},C||I?Ze.createElement("defs",null,Ze.createElement("clipPath",{id:"clipPath-".concat(O)},Ze.createElement("rect",{x:C?h:h-g/2,y:I?p:p-v/2,width:C?g:g*2,height:I?v:v*2}))):null,Ze.createElement(bs,{className:"recharts-bar-rectangles",clipPath:R?"url(#clipPath-".concat(O,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(R,O),(!x||w)&&Zg.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(i,o){return i.animationId!==o.prevAnimationId?{prevAnimationId:i.animationId,curData:i.data,prevData:o.curData}:i.data!==o.curData?{curData:i.data}:null}}]),n}(W.PureComponent);Dg(IO,"displayName","Bar");Dg(IO,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!0,isAnimationActive:!zp.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Dg(IO,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,o=t.xAxis,a=t.yAxis,s=t.xAxisTicks,l=t.yAxisTicks,c=t.stackedData,h=t.dataStartIndex,p=t.displayedData,g=t.offset,v=Urt(r,n);if(!v)return null;var x=e.layout,b=n.props,M=b.dataKey,w=b.children,T=b.minPointSize,C=x==="horizontal"?a:o,I=c?C.scale.domain():null,R=Krt({numericAxis:C}),O=cd(w,Wae),B=p.map(function(U,Z){var j,X,le,me,ie,ce;if(c?j=Vrt(c[h+Z],I):(j=vu(U,M),Array.isArray(j)||(j=[R,j])),x==="horizontal"){var fe,xe=[a.scale(j[0]),a.scale(j[1])],te=xe[0],he=xe[1];X=sX({axis:o,ticks:s,bandSize:i,offset:v.offset,entry:U,index:Z}),le=(fe=he??te)!==null&&fe!==void 0?fe:void 0,me=v.size;var ve=te-he;if(ie=Number.isNaN(ve)?0:ve,ce={x:X,y:a.y,width:me,height:a.height},Math.abs(T)>0&&Math.abs(ie)<Math.abs(T)){var ze=cf(ie||T)*(Math.abs(T)-Math.abs(ie));le-=ze,ie+=ze}}else{var Ue=[o.scale(j[0]),o.scale(j[1])],rt=Ue[0],Be=Ue[1];if(X=rt,le=sX({axis:a,ticks:l,bandSize:i,offset:v.offset,entry:U,index:Z}),me=Be-rt,ie=v.size,ce={x:o.x,y:le,width:o.width,height:ie},Math.abs(T)>0&&Math.abs(me)<Math.abs(T)){var st=cf(me||T)*(Math.abs(T)-Math.abs(me));me+=st}}return ua(ua(ua({},U),{},{x:X,y:le,width:me,height:ie,value:c?j:j[1],payload:U,background:ce},O&&O[Z]&&O[Z].props),{},{tooltipPayload:[Yle(n,U)],tooltipPosition:{x:X+me/2,y:le+ie/2}})});return ua({data:B,layout:x},g)});function g2(t){"@babel/helpers - typeof";return g2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g2(t)}function Rat(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ice(r.key),r)}}function Oat(t,e,n){return e&&WX(t.prototype,e),n&&WX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function HX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HX(Object(n),!0).forEach(function(r){RO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RO(t,e,n){return e=ice(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ice(t){var e=Lat(t,"string");return g2(e)==="symbol"?e:String(e)}function Lat(t,e){if(g2(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(g2(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Dat=function(e,n,r,i,o){var a=e.width,s=e.height,l=e.layout,c=e.children,h=Object.keys(n),p={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},g=!!Ap(c,IO);return h.reduce(function(v,x){var b=n[x],M=b.orientation,w=b.domain,T=b.padding,C=T===void 0?{}:T,I=b.mirror,R=b.reversed,O="".concat(M).concat(I?"Mirror":""),B,U,Z,j,X;if(b.type==="number"&&(b.padding==="gap"||b.padding==="no-gap")){var le=w[1]-w[0],me=1/0,ie=b.categoricalDomain.sort();ie.forEach(function(Be,st){st>0&&(me=Math.min((Be||0)-(ie[st-1]||0),me))});var ce=me/le,fe=b.layout==="vertical"?r.height:r.width;if(b.padding==="gap"&&(B=ce*fe/2),b.padding==="no-gap"){var xe=kb(e.barCategoryGap,ce*fe),te=ce*fe/2;B=te-xe-(te-xe)/fe*xe}}i==="xAxis"?U=[r.left+(C.left||0)+(B||0),r.left+r.width-(C.right||0)-(B||0)]:i==="yAxis"?U=l==="horizontal"?[r.top+r.height-(C.bottom||0),r.top+(C.top||0)]:[r.top+(C.top||0)+(B||0),r.top+r.height-(C.bottom||0)-(B||0)]:U=b.range,R&&(U=[U[1],U[0]]);var he=$rt(b,o,g),ve=he.scale,ze=he.realScaleType;ve.domain(w).range(U),jrt(ve);var Ue=Xrt(ve,Zd(Zd({},b),{},{realScaleType:ze}));i==="xAxis"?(X=M==="top"&&!I||M==="bottom"&&I,Z=r.left,j=p[O]-X*b.height):i==="yAxis"&&(X=M==="left"&&!I||M==="right"&&I,Z=p[O]-X*b.width,j=r.top);var rt=Zd(Zd(Zd({},b),Ue),{},{realScaleType:ze,x:Z,y:j,scale:ve,width:i==="xAxis"?r.width:b.width,height:i==="yAxis"?r.height:b.height});return rt.bandSize=Lk(rt,Ue),!b.hide&&i==="xAxis"?p[O]+=(X?-1:1)*rt.height:b.hide||(p[O]+=(X?-1:1)*rt.width),Zd(Zd({},v),{},RO({},x,rt))},{})},oce=function(e,n){var r=e.x,i=e.y,o=n.x,a=n.y;return{x:Math.min(r,o),y:Math.min(i,a),width:Math.abs(o-r),height:Math.abs(a-i)}},Nat=function(e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2;return oce({x:n,y:r},{x:i,y:o})},sce=function(){function t(e){Rat(this,t),this.scale=e}return Oat(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,o=r.position;if(n!==void 0){if(o)switch(o){case"start":return this.scale(n);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(n)+s}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],o=r[r.length-1];return i<=o?n>=i&&n<=o:n>=o&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}]),t}();RO(sce,"EPS",1e-4);var D6=function(e){var n=Object.keys(e).reduce(function(r,i){return Zd(Zd({},r),{},RO({},i,sce.create(e[i])))},{});return Zd(Zd({},n),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.bandAware,s=o.position;return nat(i,function(l,c){return n[c].apply(l,{bandAware:a,position:s})})},isInRange:function(i){return nce(i,function(o,a){return n[a].isInRange(o)})}})};function zat(t){return(t%180+180)%180}var Fat=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=zat(i),a=o*Math.PI/180,s=Math.atan(r/n),l=a>s&&a<Math.PI-s?r/Math.sin(a):n/Math.cos(a);return Math.abs(l)};function y2(t){"@babel/helpers - typeof";return y2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y2(t)}function GX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GX(Object(n),!0).forEach(function(r){Bat(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bat(t,e,n){return e=$at(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $at(t){var e=jat(t,"string");return y2(e)==="symbol"?e:String(e)}function jat(t,e){if(y2(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(y2(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Uat(t,e){return Gat(t)||Hat(t,e)||Wat(t,e)||Vat()}function Vat(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wat(t,e){if(t){if(typeof t=="string")return YX(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YX(t,e)}}function YX(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hat(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function Gat(t){if(Array.isArray(t))return t}function ZB(){return ZB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZB.apply(this,arguments)}var qat=function(e,n){var r;return Ze.isValidElement(e)?r=Ze.cloneElement(e,n):Kr(e)?r=e(n):r=Ze.createElement("line",ZB({},n,{className:"recharts-reference-line-line"})),r},Yat=function(e,n,r,i,o){var a=o.viewBox,s=a.x,l=a.y,c=a.width,h=a.height,p=o.position;if(r){var g=o.y,v=o.yAxis.orientation,x=e.y.apply(g,{position:p});if(wh(o,"discard")&&!e.y.isInRange(x))return null;var b=[{x:s+c,y:x},{x:s,y:x}];return v==="left"?b.reverse():b}if(n){var M=o.x,w=o.xAxis.orientation,T=e.x.apply(M,{position:p});if(wh(o,"discard")&&!e.x.isInRange(T))return null;var C=[{x:T,y:l+h},{x:T,y:l}];return w==="top"?C.reverse():C}if(i){var I=o.segment,R=I.map(function(O){return e.apply(O,{position:p})});return wh(o,"discard")&&Yst(R,function(O){return!e.isInRange(O)})?null:R}return null};function N6(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxis,o=t.yAxis,a=t.shape,s=t.className,l=t.alwaysShow,c=t.clipPathId;m0(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=D6({x:i.scale,y:o.scale}),p=ta(e),g=ta(n),v=r&&r.length===2,x=Yat(h,p,g,v,t);if(!x)return null;var b=Uat(x,2),M=b[0],w=M.x,T=M.y,C=b[1],I=C.x,R=C.y,O=wh(t,"hidden")?"url(#".concat(c,")"):void 0,B=qX(qX({clipPath:O},ni(t,!0)),{},{x1:w,y1:T,x2:I,y2:R});return Ze.createElement(bs,{className:Kt("recharts-reference-line",s)},qat(a,B),fl.renderCallByParent(t,Nat({x1:w,y1:T,x2:I,y2:R})))}N6.displayName="ReferenceLine";N6.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"};function v2(t){"@babel/helpers - typeof";return v2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v2(t)}function JB(){return JB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JB.apply(this,arguments)}function XX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function KX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XX(Object(n),!0).forEach(function(r){Xat(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xat(t,e,n){return e=Kat(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kat(t){var e=Zat(t,"string");return v2(e)==="symbol"?e:String(e)}function Zat(t,e){if(v2(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(v2(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jat=function(e){var n=e.x,r=e.y,i=e.xAxis,o=e.yAxis,a=D6({x:i.scale,y:o.scale}),s=a.apply({x:n,y:r},{bandAware:!0});return wh(e,"discard")&&!a.isInRange(s)?null:s};function DE(t){var e=t.x,n=t.y,r=t.r,i=t.alwaysShow,o=t.clipPathId,a=ta(e),s=ta(n);if(m0(i===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!a||!s)return null;var l=Jat(t);if(!l)return null;var c=l.x,h=l.y,p=t.shape,g=t.className,v=wh(t,"hidden")?"url(#".concat(o,")"):void 0,x=KX(KX({clipPath:v},ni(t,!0)),{},{cx:c,cy:h});return Ze.createElement(bs,{className:Kt("recharts-reference-dot",g)},DE.renderDot(p,x),fl.renderCallByParent(t,{x:c-r,y:h-r,width:2*r,height:2*r}))}DE.displayName="ReferenceDot";DE.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1};DE.renderDot=function(t,e){var n;return Ze.isValidElement(t)?n=Ze.cloneElement(t,e):Kr(t)?n=t(e):n=Ze.createElement(L6,JB({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n};function x2(t){"@babel/helpers - typeof";return x2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x2(t)}function QB(){return QB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QB.apply(this,arguments)}function ZX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZX(Object(n),!0).forEach(function(r){Qat(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qat(t,e,n){return e=elt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function elt(t){var e=tlt(t,"string");return x2(e)==="symbol"?e:String(e)}function tlt(t,e){if(x2(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(x2(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nlt=function(e,n,r,i,o){var a=o.x1,s=o.x2,l=o.y1,c=o.y2,h=o.xAxis,p=o.yAxis;if(!h||!p)return null;var g=D6({x:h.scale,y:p.scale}),v={x:e?g.x.apply(a,{position:"start"}):g.x.rangeMin,y:r?g.y.apply(l,{position:"start"}):g.y.rangeMin},x={x:n?g.x.apply(s,{position:"end"}):g.x.rangeMax,y:i?g.y.apply(c,{position:"end"}):g.y.rangeMax};return wh(o,"discard")&&(!g.isInRange(v)||!g.isInRange(x))?null:oce(v,x)};function NE(t){var e=t.x1,n=t.x2,r=t.y1,i=t.y2,o=t.className,a=t.alwaysShow,s=t.clipPathId;m0(a===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var l=ta(e),c=ta(n),h=ta(r),p=ta(i),g=t.shape;if(!l&&!c&&!h&&!p&&!g)return null;var v=nlt(l,c,h,p,t);if(!v&&!g)return null;var x=wh(t,"hidden")?"url(#".concat(s,")"):void 0;return Ze.createElement(bs,{className:Kt("recharts-reference-area",o)},NE.renderRect(g,JX(JX({clipPath:x},ni(t,!0)),v)),fl.renderCallByParent(t,v))}NE.displayName="ReferenceArea";NE.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1};NE.renderRect=function(t,e){var n;return Ze.isValidElement(t)?n=Ze.cloneElement(t,e):Kr(t)?n=t(e):n=Ze.createElement(O6,QB({},e,{className:"recharts-reference-area-rect"})),n};function ace(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)if(n===void 0||n(t[i])===!0)r.push(t[i]);else return;return r}function rlt(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Fat(r,n)}function ilt(t,e,n){var r=n==="width",i=t.x,o=t.y,a=t.width,s=t.height;return e===1?{start:r?i:o,end:r?i+a:o+s}:{start:r?i+a:o+s,end:r?i:o}}function Hk(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function olt(t,e){return ace(t,e+1)}function slt(t,e,n,r,i){for(var o=(r||[]).slice(),a=e.start,s=e.end,l=0,c=1,h=a,p=function(){var x=r==null?void 0:r[l];if(x===void 0)return{v:ace(r,c)};var b=l,M,w=function(){return M===void 0&&(M=n(x,b)),M},T=x.coordinate,C=l===0||Hk(t,T,w,h,s);C||(l=0,h=a,c+=1),C&&(h=T+t*(w()/2+i),l+=c)},g;c<=o.length;)if(g=p(),g)return g.v;return[]}function _2(t){"@babel/helpers - typeof";return _2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_2(t)}function QX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ul(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QX(Object(n),!0).forEach(function(r){alt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function alt(t,e,n){return e=llt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function llt(t){var e=clt(t,"string");return _2(e)==="symbol"?e:String(e)}function clt(t,e){if(_2(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_2(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ult(t,e,n,r,i){for(var o=(r||[]).slice(),a=o.length,s=e.start,l=e.end,c=function(g){var v=o[g],x,b=function(){return x===void 0&&(x=n(v,g)),x};if(g===a-1){var M=t*(v.coordinate+t*b()/2-l);o[g]=v=ul(ul({},v),{},{tickCoord:M>0?v.coordinate-M*t:v.coordinate})}else o[g]=v=ul(ul({},v),{},{tickCoord:v.coordinate});var w=Hk(t,v.tickCoord,b,s,l);w&&(l=v.tickCoord-t*(b()/2+i),o[g]=ul(ul({},v),{},{isShow:!0}))},h=a-1;h>=0;h--)c(h);return o}function dlt(t,e,n,r,i,o){var a=(r||[]).slice(),s=a.length,l=e.start,c=e.end;if(o){var h=r[s-1],p=n(h,s-1),g=t*(h.coordinate+t*p/2-c);a[s-1]=h=ul(ul({},h),{},{tickCoord:g>0?h.coordinate-g*t:h.coordinate});var v=Hk(t,h.tickCoord,function(){return p},l,c);v&&(c=h.tickCoord-t*(p/2+i),a[s-1]=ul(ul({},h),{},{isShow:!0}))}for(var x=o?s-1:s,b=function(T){var C=a[T],I,R=function(){return I===void 0&&(I=n(C,T)),I};if(T===0){var O=t*(C.coordinate-t*R()/2-l);a[T]=C=ul(ul({},C),{},{tickCoord:O<0?C.coordinate-O*t:C.coordinate})}else a[T]=C=ul(ul({},C),{},{tickCoord:C.coordinate});var B=Hk(t,C.tickCoord,R,l,c);B&&(l=C.tickCoord+t*(R()/2+i),a[T]=ul(ul({},C),{},{isShow:!0}))},M=0;M<x;M++)b(M);return a}function e4(t,e,n){var r=t.tick,i=t.ticks,o=t.viewBox,a=t.minTickGap,s=t.orientation,l=t.interval,c=t.tickFormatter,h=t.unit,p=t.angle;if(!i||!i.length||!r)return[];if(Tn(l)||zp.isSsr)return olt(i,typeof l=="number"&&Tn(l)?l:0);var g=[],v=s==="top"||s==="bottom"?"width":"height",x=h&&v==="width"?HS(h,{fontSize:e,letterSpacing:n}):{width:0,height:0},b=function(C,I){var R=Kr(c)?c(C.value,I):C.value;return v==="width"?rlt(HS(R,{fontSize:e,letterSpacing:n}),x,p):HS(R,{fontSize:e,letterSpacing:n})[v]},M=i.length>=2?cf(i[1].coordinate-i[0].coordinate):1,w=ilt(o,M,v);return l==="equidistantPreserveStart"?slt(M,w,b,i,a):(l==="preserveStart"||l==="preserveStartEnd"?g=dlt(M,w,b,i,a,l==="preserveStartEnd"):g=ult(M,w,b,i,a),g.filter(function(T){return T.isShow}))}var flt=["viewBox"],hlt=["viewBox"],plt=["ticks"];function Wb(t){"@babel/helpers - typeof";return Wb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wb(t)}function I_(){return I_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},I_.apply(this,arguments)}function eK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ll(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eK(Object(n),!0).forEach(function(r){z6(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nN(t,e){if(t==null)return{};var n=mlt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function mlt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function glt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tK(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lce(r.key),r)}}function ylt(t,e,n){return e&&tK(t.prototype,e),n&&tK(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function vlt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&t4(t,e)}function t4(t,e){return t4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},t4(t,e)}function xlt(t){var e=wlt();return function(){var r=Gk(t),i;if(e){var o=Gk(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return _lt(this,i)}}function _lt(t,e){if(e&&(Wb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return blt(t)}function blt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wlt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Gk(t){return Gk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Gk(t)}function z6(t,e,n){return e=lce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lce(t){var e=Slt(t,"string");return Wb(e)==="symbol"?e:String(e)}function Slt(t,e){if(Wb(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Wb(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var YS=function(t){vlt(n,t);var e=xlt(n);function n(r){var i;return glt(this,n),i=e.call(this,r),i.state={fontSize:"",letterSpacing:""},i}return ylt(n,[{key:"shouldComponentUpdate",value:function(i,o){var a=i.viewBox,s=nN(i,flt),l=this.props,c=l.viewBox,h=nN(l,hlt);return!tb(a,c)||!tb(s,h)||!tb(o,this.state)}},{key:"componentDidMount",value:function(){var i=this.layerReference;if(i){var o=i.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];o&&this.setState({fontSize:window.getComputedStyle(o).fontSize,letterSpacing:window.getComputedStyle(o).letterSpacing})}}},{key:"getTickLineCoord",value:function(i){var o=this.props,a=o.x,s=o.y,l=o.width,c=o.height,h=o.orientation,p=o.tickSize,g=o.mirror,v=o.tickMargin,x,b,M,w,T,C,I=g?-1:1,R=i.tickSize||p,O=Tn(i.tickCoord)?i.tickCoord:i.coordinate;switch(h){case"top":x=b=i.coordinate,w=s+ +!g*c,M=w-I*R,C=M-I*v,T=O;break;case"left":M=w=i.coordinate,b=a+ +!g*l,x=b-I*R,T=x-I*v,C=O;break;case"right":M=w=i.coordinate,b=a+ +g*l,x=b+I*R,T=x+I*v,C=O;break;default:x=b=i.coordinate,w=s+ +g*c,M=w+I*R,C=M+I*v,T=O;break}return{line:{x1:x,y1:M,x2:b,y2:w},tick:{x:T,y:C}}}},{key:"getTickTextAnchor",value:function(){var i=this.props,o=i.orientation,a=i.mirror,s;switch(o){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var i=this.props,o=i.orientation,a=i.mirror,s="end";switch(o){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var i=this.props,o=i.x,a=i.y,s=i.width,l=i.height,c=i.orientation,h=i.mirror,p=i.axisLine,g=Ll(Ll(Ll({},ni(this.props)),ni(p)),{},{fill:"none"});if(c==="top"||c==="bottom"){var v=+(c==="top"&&!h||c==="bottom"&&h);g=Ll(Ll({},g),{},{x1:o,y1:a+v*l,x2:o+s,y2:a+v*l})}else{var x=+(c==="left"&&!h||c==="right"&&h);g=Ll(Ll({},g),{},{x1:o+x*s,y1:a,x2:o+x*s,y2:a+l})}return Ze.createElement("line",I_({},g,{className:Kt("recharts-cartesian-axis-line",ld(p,"className"))}))}},{key:"renderTicks",value:function(i,o,a){var s=this,l=this.props,c=l.tickLine,h=l.stroke,p=l.tick,g=l.tickFormatter,v=l.unit,x=e4(Ll(Ll({},this.props),{},{ticks:i}),o,a),b=this.getTickTextAnchor(),M=this.getTickVerticalAnchor(),w=ni(this.props),T=ni(p),C=Ll(Ll({},w),{},{fill:"none"},ni(c)),I=x.map(function(R,O){var B=s.getTickLineCoord(R),U=B.line,Z=B.tick,j=Ll(Ll(Ll(Ll({textAnchor:b,verticalAnchor:M},w),{},{stroke:"none",fill:h},T),Z),{},{index:O,payload:R,visibleTicksCount:x.length,tickFormatter:g});return Ze.createElement(bs,I_({className:"recharts-cartesian-axis-tick",key:"tick-".concat(R.value,"-").concat(R.coordinate,"-").concat(R.tickCoord)},rk(s.props,R,O)),c&&Ze.createElement("line",I_({},C,U,{className:Kt("recharts-cartesian-axis-tick-line",ld(c,"className"))})),p&&n.renderTickItem(p,j,"".concat(Kr(g)?g(R.value,O):R.value).concat(v||"")))});return Ze.createElement("g",{className:"recharts-cartesian-axis-ticks"},I)}},{key:"render",value:function(){var i=this,o=this.props,a=o.axisLine,s=o.width,l=o.height,c=o.ticksGenerator,h=o.className,p=o.hide;if(p)return null;var g=this.props,v=g.ticks,x=nN(g,plt),b=v;return Kr(c)&&(b=v&&v.length>0?c(this.props):c(x)),s<=0||l<=0||!b||!b.length?null:Ze.createElement(bs,{className:Kt("recharts-cartesian-axis",h),ref:function(w){i.layerReference=w}},a&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),fl.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(i,o,a){var s;return Ze.isValidElement(i)?s=Ze.cloneElement(i,o):Kr(i)?s=i(o):s=Ze.createElement(bk,I_({},o,{className:"recharts-cartesian-axis-tick-value"}),a),s}}]),n}(W.Component);z6(YS,"displayName","CartesianAxis");z6(YS,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Mlt=["x1","y1","x2","y2","key"],Elt=["offset"];function Hb(t){"@babel/helpers - typeof";return Hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hb(t)}function n4(){return n4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n4.apply(this,arguments)}function nK(t,e){if(t==null)return{};var n=Tlt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Tlt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function rK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ig(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rK(Object(n),!0).forEach(function(r){F6(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Clt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iK(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cce(r.key),r)}}function Alt(t,e,n){return e&&iK(t.prototype,e),n&&iK(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Plt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r4(t,e)}function r4(t,e){return r4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},r4(t,e)}function klt(t){var e=Olt();return function(){var r=qk(t),i;if(e){var o=qk(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Ilt(this,i)}}function Ilt(t,e){if(e&&(Hb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rlt(t)}function Rlt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Olt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function qk(t){return qk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qk(t)}function F6(t,e,n){return e=cce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cce(t){var e=Llt(t,"string");return Hb(e)==="symbol"?e:String(e)}function Llt(t,e){if(Hb(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Hb(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var B6=function(t){Plt(n,t);var e=klt(n);function n(){return Clt(this,n),e.apply(this,arguments)}return Alt(n,[{key:"renderHorizontal",value:function(i){var o=this,a=this.props,s=a.x,l=a.width,c=a.horizontal;if(!i||!i.length)return null;var h=i.map(function(p,g){var v=ig(ig({},o.props),{},{x1:s,y1:p,x2:s+l,y2:p,key:"line-".concat(g),index:g});return n.renderLineItem(c,v)});return Ze.createElement("g",{className:"recharts-cartesian-grid-horizontal"},h)}},{key:"renderVertical",value:function(i){var o=this,a=this.props,s=a.y,l=a.height,c=a.vertical;if(!i||!i.length)return null;var h=i.map(function(p,g){var v=ig(ig({},o.props),{},{x1:p,y1:s,x2:p,y2:s+l,key:"line-".concat(g),index:g});return n.renderLineItem(c,v)});return Ze.createElement("g",{className:"recharts-cartesian-grid-vertical"},h)}},{key:"renderVerticalStripes",value:function(i){var o=this.props.verticalFill;if(!o||!o.length)return null;var a=this.props,s=a.fillOpacity,l=a.x,c=a.y,h=a.width,p=a.height,g=i.map(function(x){return Math.round(x+l-l)}).sort(function(x,b){return x-b});l!==g[0]&&g.unshift(0);var v=g.map(function(x,b){var M=!g[b+1],w=M?l+h-x:g[b+1]-x;if(w<=0)return null;var T=b%o.length;return Ze.createElement("rect",{key:"react-".concat(b),x,y:c,width:w,height:p,stroke:"none",fill:o[T],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return Ze.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},v)}},{key:"renderHorizontalStripes",value:function(i){var o=this.props.horizontalFill;if(!o||!o.length)return null;var a=this.props,s=a.fillOpacity,l=a.x,c=a.y,h=a.width,p=a.height,g=i.map(function(x){return Math.round(x+c-c)}).sort(function(x,b){return x-b});c!==g[0]&&g.unshift(0);var v=g.map(function(x,b){var M=!g[b+1],w=M?c+p-x:g[b+1]-x;if(w<=0)return null;var T=b%o.length;return Ze.createElement("rect",{key:"react-".concat(b),y:x,x:l,height:w,width:h,stroke:"none",fill:o[T],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return Ze.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},v)}},{key:"renderBackground",value:function(){var i=this.props.fill;if(!i||i==="none")return null;var o=this.props,a=o.fillOpacity,s=o.x,l=o.y,c=o.width,h=o.height;return Ze.createElement("rect",{x:s,y:l,width:c,height:h,stroke:"none",fill:i,fillOpacity:a,className:"recharts-cartesian-grid-bg"})}},{key:"render",value:function(){var i=this.props,o=i.x,a=i.y,s=i.width,l=i.height,c=i.horizontal,h=i.vertical,p=i.horizontalCoordinatesGenerator,g=i.verticalCoordinatesGenerator,v=i.xAxis,x=i.yAxis,b=i.offset,M=i.chartWidth,w=i.chartHeight,T=i.syncWithTicks,C=i.horizontalValues,I=i.verticalValues;if(!Tn(s)||s<=0||!Tn(l)||l<=0||!Tn(o)||o!==+o||!Tn(a)||a!==+a)return null;var R=this.props,O=R.horizontalPoints,B=R.verticalPoints;if((!O||!O.length)&&Kr(p)){var U=C&&C.length;O=p({yAxis:x?ig(ig({},x),{},{ticks:U?C:x.ticks}):void 0,width:M,height:w,offset:b},U?!0:T)}if((!B||!B.length)&&Kr(g)){var Z=I&&I.length;B=g({xAxis:v?ig(ig({},v),{},{ticks:Z?I:v.ticks}):void 0,width:M,height:w,offset:b},Z?!0:T)}return Ze.createElement("g",{className:"recharts-cartesian-grid"},this.renderBackground(),c&&this.renderHorizontal(O),h&&this.renderVertical(B),c&&this.renderHorizontalStripes(O),h&&this.renderVerticalStripes(B))}}],[{key:"renderLineItem",value:function(i,o){var a;if(Ze.isValidElement(i))a=Ze.cloneElement(i,o);else if(Kr(i))a=i(o);else{var s=o.x1,l=o.y1,c=o.x2,h=o.y2,p=o.key,g=nK(o,Mlt),v=ni(g);v.offset;var x=nK(v,Elt);a=Ze.createElement("line",n4({},x,{x1:s,y1:l,x2:c,y2:h,fill:"none",key:p}))}return a}}]),n}(W.PureComponent);F6(B6,"displayName","CartesianGrid");F6(B6,"defaultProps",{horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]});var Dlt=["type","layout","connectNulls","ref"];function Gb(t){"@babel/helpers - typeof";return Gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gb(t)}function Nlt(t,e){if(t==null)return{};var n=zlt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function zlt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function XS(){return XS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},XS.apply(this,arguments)}function oK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oK(Object(n),!0).forEach(function(r){Jd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ox(t){return jlt(t)||$lt(t)||Blt(t)||Flt()}function Flt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Blt(t,e){if(t){if(typeof t=="string")return i4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i4(t,e)}}function $lt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jlt(t){if(Array.isArray(t))return i4(t)}function i4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ult(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sK(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uce(r.key),r)}}function Vlt(t,e,n){return e&&sK(t.prototype,e),n&&sK(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Wlt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o4(t,e)}function o4(t,e){return o4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},o4(t,e)}function Hlt(t){var e=qlt();return function(){var r=Yk(t),i;if(e){var o=Yk(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Glt(this,i)}}function Glt(t,e){if(e&&(Gb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yg(t)}function yg(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qlt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Yk(t){return Yk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yk(t)}function Jd(t,e,n){return e=uce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uce(t){var e=Ylt(t,"string");return Gb(e)==="symbol"?e:String(e)}function Ylt(t,e){if(Gb(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Gb(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qb=function(t){Wlt(n,t);var e=Hlt(n);function n(){var r;Ult(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o)),Jd(yg(r),"state",{isAnimationFinished:!0,totalLength:0}),Jd(yg(r),"generateSimpleStrokeDasharray",function(s,l){return"".concat(l,"px ").concat(s-l,"px")}),Jd(yg(r),"getStrokeDasharray",function(s,l,c){var h=c.reduce(function(T,C){return T+C});if(!h)return r.generateSimpleStrokeDasharray(l,s);for(var p=Math.floor(s/h),g=s%h,v=l-s,x=[],b=0,M=0;b<c.length;M+=c[b],++b)if(M+c[b]>g){x=[].concat(Ox(c.slice(0,b)),[g-M]);break}var w=x.length%2===0?[0,v]:[v];return[].concat(Ox(n.repeat(c,p)),Ox(x),w).map(function(T){return"".concat(T,"px")}).join(", ")}),Jd(yg(r),"id",AE("recharts-line-")),Jd(yg(r),"pathRef",function(s){r.mainCurve=s}),Jd(yg(r),"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Jd(yg(r),"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return Vlt(n,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var i=this.getTotalLength();this.setState({totalLength:i})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var i=this.getTotalLength();i!==this.state.totalLength&&this.setState({totalLength:i})}}},{key:"getTotalLength",value:function(){var i=this.mainCurve;try{return i&&i.getTotalLength&&i.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(i,o){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.points,l=a.xAxis,c=a.yAxis,h=a.layout,p=a.children,g=cd(p,LE);if(!g)return null;var v=function(M,w){return{x:M.x,y:M.y,value:M.value,errorVal:vu(M.payload,w)}},x={clipPath:i?"url(#clipPath-".concat(o,")"):null};return Ze.createElement(bs,x,g.map(function(b){return Ze.cloneElement(b,{key:"bar-".concat(b.props.dataKey),data:s,xAxis:l,yAxis:c,layout:h,dataPointFormatter:v})}))}},{key:"renderDots",value:function(i,o,a){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,h=l.points,p=l.dataKey,g=ni(this.props),v=ni(c,!0),x=h.map(function(M,w){var T=Xc(Xc(Xc({key:"dot-".concat(w),r:3},g),v),{},{value:M.value,dataKey:p,cx:M.x,cy:M.y,index:w,payload:M.payload});return n.renderDotItem(c,T)}),b={clipPath:i?"url(#clipPath-".concat(o?"":"dots-").concat(a,")"):null};return Ze.createElement(bs,XS({className:"recharts-line-dots",key:"dots"},b),x)}},{key:"renderCurveStatically",value:function(i,o,a,s){var l=this.props,c=l.type,h=l.layout,p=l.connectNulls;l.ref;var g=Nlt(l,Dlt),v=Xc(Xc(Xc({},ni(g,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:o?"url(#clipPath-".concat(a,")"):null,points:i},s),{},{type:c,layout:h,connectNulls:p});return Ze.createElement(HB,XS({},v,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(i,o){var a=this,s=this.props,l=s.points,c=s.strokeDasharray,h=s.isAnimationActive,p=s.animationBegin,g=s.animationDuration,v=s.animationEasing,x=s.animationId,b=s.animateNewValues,M=s.width,w=s.height,T=this.state,C=T.prevPoints,I=T.totalLength;return Ze.createElement(Xp,{begin:p,duration:g,isActive:h,easing:v,from:{t:0},to:{t:1},key:"line-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(R){var O=R.t;if(C){var B=C.length/l.length,U=l.map(function(me,ie){var ce=Math.floor(ie*B);if(C[ce]){var fe=C[ce],xe=nf(fe.x,me.x),te=nf(fe.y,me.y);return Xc(Xc({},me),{},{x:xe(O),y:te(O)})}if(b){var he=nf(M*2,me.x),ve=nf(w/2,me.y);return Xc(Xc({},me),{},{x:he(O),y:ve(O)})}return Xc(Xc({},me),{},{x:me.x,y:me.y})});return a.renderCurveStatically(U,i,o)}var Z=nf(0,I),j=Z(O),X;if(c){var le="".concat(c).split(/[,\s]+/gim).map(function(me){return parseFloat(me)});X=a.getStrokeDasharray(j,I,le)}else X=a.generateSimpleStrokeDasharray(I,j);return a.renderCurveStatically(l,i,o,{strokeDasharray:X})})}},{key:"renderCurve",value:function(i,o){var a=this.props,s=a.points,l=a.isAnimationActive,c=this.state,h=c.prevPoints,p=c.totalLength;return l&&s&&s.length&&(!h&&p>0||!TO(h,s))?this.renderCurveWithAnimation(i,o):this.renderCurveStatically(s,i,o)}},{key:"render",value:function(){var i,o=this.props,a=o.hide,s=o.dot,l=o.points,c=o.className,h=o.xAxis,p=o.yAxis,g=o.top,v=o.left,x=o.width,b=o.height,M=o.isAnimationActive,w=o.id;if(a||!l||!l.length)return null;var T=this.state.isAnimationFinished,C=l.length===1,I=Kt("recharts-line",c),R=h&&h.allowDataOverflow,O=p&&p.allowDataOverflow,B=R||O,U=oi(w)?this.id:w,Z=(i=ni(s))!==null&&i!==void 0?i:{r:3,strokeWidth:2},j=Z.r,X=j===void 0?3:j,le=Z.strokeWidth,me=le===void 0?2:le,ie=lVe(s)?s:{},ce=ie.clipDot,fe=ce===void 0?!0:ce,xe=X*2+me;return Ze.createElement(bs,{className:I},R||O?Ze.createElement("defs",null,Ze.createElement("clipPath",{id:"clipPath-".concat(U)},Ze.createElement("rect",{x:R?v:v-x/2,y:O?g:g-b/2,width:R?x:x*2,height:O?b:b*2})),!fe&&Ze.createElement("clipPath",{id:"clipPath-dots-".concat(U)},Ze.createElement("rect",{x:v-xe/2,y:g-xe/2,width:x+xe,height:b+xe}))):null,!C&&this.renderCurve(B,U),this.renderErrorBar(B,U),(C||s)&&this.renderDots(B,fe,U),(!M||T)&&Zg.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(i,o){return i.animationId!==o.prevAnimationId?{prevAnimationId:i.animationId,curPoints:i.points,prevPoints:o.curPoints}:i.points!==o.curPoints?{curPoints:i.points}:null}},{key:"repeat",value:function(i,o){for(var a=i.length%2!==0?[].concat(Ox(i),[0]):i,s=[],l=0;l<o;++l)s=[].concat(Ox(s),Ox(a));return s}},{key:"renderDotItem",value:function(i,o){var a;if(Ze.isValidElement(i))a=Ze.cloneElement(i,o);else if(Kr(i))a=i(o);else{var s=Kt("recharts-line-dot",i?i.className:"");a=Ze.createElement(L6,XS({},o,{className:s}))}return a}}]),n}(W.PureComponent);Jd(qb,"displayName","Line");Jd(qb,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!zp.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Jd(qb,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,a=t.dataKey,s=t.bandSize,l=t.displayedData,c=t.offset,h=e.layout,p=l.map(function(g,v){var x=vu(g,a);return h==="horizontal"?{x:oX({axis:n,ticks:i,bandSize:s,entry:g,index:v}),y:oi(x)?null:r.scale(x),value:x,payload:g}:{x:oi(x)?null:n.scale(x),y:oX({axis:r,ticks:o,bandSize:s,entry:g,index:v}),value:x,payload:g}});return Xc({points:p,layout:h},c)});var OO=function(){return null};OO.displayName="XAxis";OO.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0};var LO=function(){return null};LO.displayName="YAxis";LO.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1};var Xlt=_y,Klt=PE,Zlt=mO;function Jlt(t){return function(e,n,r){var i=Object(e);if(!Klt(e)){var o=Xlt(n);e=Zlt(e),n=function(s){return o(i[s],s,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:void 0}}var Qlt=Jlt,ect=Qle;function tct(t){var e=ect(t),n=e%1;return e===e?n?e-n:e:0}var nct=tct,rct=Mae,ict=_y,oct=nct,sct=Math.max;function act(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:oct(n);return i<0&&(i=sct(r+i,0)),rct(t,ict(e),i)}var lct=act,cct=Qlt,uct=lct,dct=cct(uct),fct=dct;const hct=_i(fct);var pct="Invariant failed";function mct(t,e){if(!t)throw new Error(pct)}function dce(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,o=t.endAngle,a=Na(e,n,r,i),s=Na(e,n,r,o);return{points:[a,s],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}function aK(t){return xct(t)||vct(t)||yct(t)||gct()}function gct(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yct(t,e){if(t){if(typeof t=="string")return s4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s4(t,e)}}function vct(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xct(t){if(Array.isArray(t))return s4(t)}function s4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var a4=function(e,n,r,i,o){var a=cd(e,N6),s=cd(e,DE),l=[].concat(aK(a),aK(s)),c=cd(e,NE),h="".concat(i,"Id"),p=i[0],g=n;if(l.length&&(g=l.reduce(function(b,M){if(M.props[h]===r&&wh(M.props,"extendDomain")&&Tn(M.props[p])){var w=M.props[p];return[Math.min(b[0],w),Math.max(b[1],w)]}return b},g)),c.length){var v="".concat(p,"1"),x="".concat(p,"2");g=c.reduce(function(b,M){if(M.props[h]===r&&wh(M.props,"extendDomain")&&Tn(M.props[v])&&Tn(M.props[x])){var w=M.props[v],T=M.props[x];return[Math.min(b[0],w,T),Math.max(b[1],w,T)]}return b},g)}return o&&o.length&&(g=o.reduce(function(b,M){return Tn(M)?[Math.min(b[0],M),Math.max(b[1],M)]:b},g)),g},fce={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,h){this.fn=l,this.context=c,this.once=h||!1}function o(l,c,h,p,g){if(typeof h!="function")throw new TypeError("The listener must be a function");var v=new i(h,p||l,g),x=n?n+c:c;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],v]:l._events[x].push(v):(l._events[x]=v,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],h,p;if(this._eventsCount===0)return c;for(p in h=this._events)e.call(h,p)&&c.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},s.prototype.listeners=function(c){var h=n?n+c:c,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,v=p.length,x=new Array(v);g<v;g++)x[g]=p[g].fn;return x},s.prototype.listenerCount=function(c){var h=n?n+c:c,p=this._events[h];return p?p.fn?1:p.length:0},s.prototype.emit=function(c,h,p,g,v,x){var b=n?n+c:c;if(!this._events[b])return!1;var M=this._events[b],w=arguments.length,T,C;if(M.fn){switch(M.once&&this.removeListener(c,M.fn,void 0,!0),w){case 1:return M.fn.call(M.context),!0;case 2:return M.fn.call(M.context,h),!0;case 3:return M.fn.call(M.context,h,p),!0;case 4:return M.fn.call(M.context,h,p,g),!0;case 5:return M.fn.call(M.context,h,p,g,v),!0;case 6:return M.fn.call(M.context,h,p,g,v,x),!0}for(C=1,T=new Array(w-1);C<w;C++)T[C-1]=arguments[C];M.fn.apply(M.context,T)}else{var I=M.length,R;for(C=0;C<I;C++)switch(M[C].once&&this.removeListener(c,M[C].fn,void 0,!0),w){case 1:M[C].fn.call(M[C].context);break;case 2:M[C].fn.call(M[C].context,h);break;case 3:M[C].fn.call(M[C].context,h,p);break;case 4:M[C].fn.call(M[C].context,h,p,g);break;default:if(!T)for(R=1,T=new Array(w-1);R<w;R++)T[R-1]=arguments[R];M[C].fn.apply(M[C].context,T)}}return!0},s.prototype.on=function(c,h,p){return o(this,c,h,p,!1)},s.prototype.once=function(c,h,p){return o(this,c,h,p,!0)},s.prototype.removeListener=function(c,h,p,g){var v=n?n+c:c;if(!this._events[v])return this;if(!h)return a(this,v),this;var x=this._events[v];if(x.fn)x.fn===h&&(!g||x.once)&&(!p||x.context===p)&&a(this,v);else{for(var b=0,M=[],w=x.length;b<w;b++)(x[b].fn!==h||g&&!x[b].once||p&&x[b].context!==p)&&M.push(x[b]);M.length?this._events[v]=M.length===1?M[0]:M:a(this,v)}return this},s.prototype.removeAllListeners=function(c){var h;return c?(h=n?n+c:c,this._events[h]&&a(this,h)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s})(fce);var _ct=fce.exports;const bct=_i(_ct);var rN=new bct,iN="recharts.syncMouseEvents";function b2(t){"@babel/helpers - typeof";return b2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b2(t)}function wct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lK(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hce(r.key),r)}}function Sct(t,e,n){return e&&lK(t.prototype,e),n&&lK(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function oN(t,e,n){return e=hce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hce(t){var e=Mct(t,"string");return b2(e)==="symbol"?e:String(e)}function Mct(t,e){if(b2(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(b2(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ect=function(){function t(){wct(this,t),oN(this,"activeIndex",0),oN(this,"coordinateList",[]),oN(this,"layout","horizontal")}return Sct(t,[{key:"setDetails",value:function(n){var r=n.coordinateList,i=r===void 0?[]:r,o=n.container,a=o===void 0?null:o,s=n.layout,l=s===void 0?null:s,c=n.offset,h=c===void 0?null:c,p=n.mouseHandlerCallback,g=p===void 0?null:p;this.coordinateList=i??this.coordinateList,this.container=a??this.container,this.layout=l??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,a=i.y,s=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((n=window)===null||n===void 0?void 0:n.scrollX)||0,h=((r=window)===null||r===void 0?void 0:r.scrollY)||0,p=o+l+c,g=a+this.offset.top+s/2+h;this.mouseHandlerCallback({pageX:p,pageY:g})}}}]),t}();function Tct(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&Tn(r)&&Tn(i))return!0}return!1}function Cct(t,e,n){var r,i,o,a;if(t==="horizontal")r=e.x,o=r,i=n.top,a=n.top+n.height;else if(t==="vertical")i=e.y,a=i,r=n.left,o=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var s=e.cx,l=e.cy,c=e.innerRadius,h=e.outerRadius,p=e.angle,g=Na(s,l,c,p),v=Na(s,l,h,p);r=g.x,i=g.y,o=v.x,a=v.y}else return dce(e);return[{x:r,y:i},{x:o,y:a}]}function Act(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}var Pct=["item"],kct=["children","className","width","height","style","compact","title","desc"];function Yb(t){"@babel/helpers - typeof";return Yb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yb(t)}function cK(t,e){return Oct(t)||Rct(t,e)||pce(t,e)||Ict()}function Ict(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rct(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(h){c=!0,i=h}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function Oct(t){if(Array.isArray(t))return t}function R_(){return R_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},R_.apply(this,arguments)}function uK(t,e){if(t==null)return{};var n=Lct(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Lct(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Dct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dK(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mce(r.key),r)}}function Nct(t,e,n){return e&&dK(t.prototype,e),n&&dK(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function zct(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l4(t,e)}function l4(t,e){return l4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},l4(t,e)}function Fct(t){var e=$ct();return function(){var r=Xk(t),i;if(e){var o=Xk(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Bct(this,i)}}function Bct(t,e){if(e&&(Yb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vr(t)}function Vr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $ct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Xk(t){return Xk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xk(t)}function Xb(t){return Vct(t)||Uct(t)||pce(t)||jct()}function jct(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pce(t,e){if(t){if(typeof t=="string")return c4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c4(t,e)}}function Uct(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Vct(t){if(Array.isArray(t))return c4(t)}function c4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function fK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fK(Object(n),!0).forEach(function(r){pr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pr(t,e,n){return e=mce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mce(t){var e=Wct(t,"string");return Yb(e)==="symbol"?e:String(e)}function Wct(t,e){if(Yb(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Yb(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hct={xAxis:["bottom","top"],yAxis:["left","right"]},Gct={width:"100%",height:"100%"},gce={x:0,y:0},qct=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},Yct=function(e,n,r,i){var o=n.find(function(h){return h&&h.index===r});if(o){if(e==="horizontal")return{x:o.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:o.coordinate};if(e==="centric"){var a=o.coordinate,s=i.radius;return Jt(Jt(Jt({},i),Na(i.cx,i.cy,s,a)),{},{angle:a,radius:s})}var l=o.coordinate,c=i.angle;return Jt(Jt(Jt({},i),Na(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return gce},DO=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,o=n.dataEndIndex,a=(r??[]).reduce(function(s,l){var c=l.props.data;return c&&c.length?[].concat(Xb(s),Xb(c)):s},[]);return a.length>0?a:e&&e.length&&Tn(i)&&Tn(o)?e.slice(i,o+1):[]};function yce(t){return t==="number"?[0,"auto"]:void 0}var vce=function(e,n,r,i){var o=e.graphicalItems,a=e.tooltipAxis,s=DO(n,e);return r<0||!o||!o.length||r>=s.length?null:o.reduce(function(l,c){var h,p=c.props.hide;if(p)return l;var g=(h=c.props.data)!==null&&h!==void 0?h:n;g&&e.dataStartIndex+e.dataEndIndex!==0&&(g=g.slice(e.dataStartIndex,e.dataEndIndex+1));var v;if(a.dataKey&&!a.allowDuplicatedCategory){var x=g===void 0?s:g;v=tk(x,a.dataKey,i)}else v=g&&g[r]||s[r];return v?[].concat(Xb(l),[Yle(c,v)]):l},[])},hK=function(e,n,r,i){var o=i||{x:e.chartX,y:e.chartY},a=qct(o,r),s=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,h=Lrt(a,s,c,l);if(h>=0&&c){var p=c[h]&&c[h].value,g=vce(e,n,h,p),v=Yct(r,s,h,o);return{activeTooltipIndex:h,activeLabel:p,activePayload:g,activeCoordinate:v}}return null},Xct=function(e,n){var r=n.axes,i=n.graphicalItems,o=n.axisType,a=n.axisIdKey,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,h=e.layout,p=e.children,g=e.stackOffset,v=Gle(h,o);return r.reduce(function(x,b){var M,w=b.props,T=w.type,C=w.dataKey,I=w.allowDataOverflow,R=w.allowDuplicatedCategory,O=w.scale,B=w.ticks,U=w.includeHidden,Z=b.props[a];if(x[Z])return x;var j=DO(e.data,{graphicalItems:i.filter(function(Ue){return Ue.props[a]===Z}),dataStartIndex:l,dataEndIndex:c}),X=j.length,le,me,ie;Tct(b.props.domain,I,T)&&(le=$B(b.props.domain,null,I),v&&(T==="number"||O!=="auto")&&(ie=qS(j,C,"category")));var ce=yce(T);if(!le||le.length===0){var fe,xe=(fe=b.props.domain)!==null&&fe!==void 0?fe:ce;if(C){if(le=qS(j,C,T),T==="category"&&v){var te=Q8e(le);R&&te?(me=le,le=$k(0,X)):R||(le=cX(xe,le,b).reduce(function(Ue,rt){return Ue.indexOf(rt)>=0?Ue:[].concat(Xb(Ue),[rt])},[]))}else if(T==="category")R?le=le.filter(function(Ue){return Ue!==""&&!oi(Ue)}):le=cX(xe,le,b).reduce(function(Ue,rt){return Ue.indexOf(rt)>=0||rt===""||oi(rt)?Ue:[].concat(Xb(Ue),[rt])},[]);else if(T==="number"){var he=Brt(j,i.filter(function(Ue){return Ue.props[a]===Z&&(U||!Ue.props.hide)}),C,o,h);he&&(le=he)}v&&(T==="number"||O!=="auto")&&(ie=qS(j,C,"category"))}else v?le=$k(0,X):s&&s[Z]&&s[Z].hasStack&&T==="number"?le=g==="expand"?[0,1]:qle(s[Z].stackGroups,l,c):le=Hle(j,i.filter(function(Ue){return Ue.props[a]===Z&&(U||!Ue.props.hide)}),T,h,!0);if(T==="number")le=a4(p,le,Z,o,B),xe&&(le=$B(xe,le,I));else if(T==="category"&&xe){var ve=xe,ze=le.every(function(Ue){return ve.indexOf(Ue)>=0});ze&&(le=ve)}}return Jt(Jt({},x),{},pr({},Z,Jt(Jt({},b.props),{},{axisType:o,domain:le,categoricalDomain:ie,duplicateDomain:me,originalDomain:(M=b.props.domain)!==null&&M!==void 0?M:ce,isCategorical:v,layout:h})))},{})},Kct=function(e,n){var r=n.graphicalItems,i=n.Axis,o=n.axisType,a=n.axisIdKey,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,h=e.layout,p=e.children,g=DO(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),v=g.length,x=Gle(h,o),b=-1;return r.reduce(function(M,w){var T=w.props[a],C=yce("number");if(!M[T]){b++;var I;return x?I=$k(0,v):s&&s[T]&&s[T].hasStack?(I=qle(s[T].stackGroups,l,c),I=a4(p,I,T,o)):(I=$B(C,Hle(g,r.filter(function(R){return R.props[a]===T&&!R.props.hide}),"number",h),i.defaultProps.allowDataOverflow),I=a4(p,I,T,o)),Jt(Jt({},M),{},pr({},T,Jt(Jt({axisType:o},i.defaultProps),{},{hide:!0,orientation:ld(Hct,"".concat(o,".").concat(b%2),null),domain:I,originalDomain:C,isCategorical:x,layout:h})))}return M},{})},Zct=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,o=n.AxisComp,a=n.graphicalItems,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,h=e.children,p="".concat(i,"Id"),g=cd(h,o),v={};return g&&g.length?v=Xct(e,{axes:g,graphicalItems:a,axisType:i,axisIdKey:p,stackGroups:s,dataStartIndex:l,dataEndIndex:c}):a&&a.length&&(v=Kct(e,{Axis:o,graphicalItems:a,axisType:i,axisIdKey:p,stackGroups:s,dataStartIndex:l,dataEndIndex:c})),v},Jct=function(e){var n=mg(e),r=gg(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:s6(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Lk(n,r)}},pK=function(e){var n=e.children,r=e.defaultShowTooltip,i=Ap(n,p2),o=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!r}},Qct=function(e){return!e||!e.length?!1:e.some(function(n){var r=Np(n&&n.type);return r&&r.indexOf("Bar")>=0})},mK=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},eut=function(e,n){var r=e.props,i=e.graphicalItems,o=e.xAxisMap,a=o===void 0?{}:o,s=e.yAxisMap,l=s===void 0?{}:s,c=r.width,h=r.height,p=r.children,g=r.margin||{},v=Ap(p,p2),x=Ap(p,Lb),b=Object.keys(l).reduce(function(R,O){var B=l[O],U=B.orientation;return!B.mirror&&!B.hide?Jt(Jt({},R),{},pr({},U,R[U]+B.width)):R},{left:g.left||0,right:g.right||0}),M=Object.keys(a).reduce(function(R,O){var B=a[O],U=B.orientation;return!B.mirror&&!B.hide?Jt(Jt({},R),{},pr({},U,ld(R,"".concat(U))+B.height)):R},{top:g.top||0,bottom:g.bottom||0}),w=Jt(Jt({},M),b),T=w.bottom;v&&(w.bottom+=v.props.height||p2.defaultProps.height),x&&n&&(w=zrt(w,i,r,n));var C=c-w.left-w.right,I=h-w.top-w.bottom;return Jt(Jt({brushBottom:T},w),{},{width:Math.max(C,0),height:Math.max(I,0)})},tut=function(e){var n,r=e.chartName,i=e.GraphicalChild,o=e.defaultTooltipEventType,a=o===void 0?"axis":o,s=e.validateTooltipEventTypes,l=s===void 0?["axis"]:s,c=e.axisComponents,h=e.legendContent,p=e.formatAxisMap,g=e.defaultProps,v=function(M,w){var T=w.graphicalItems,C=w.stackGroups,I=w.offset,R=w.updateId,O=w.dataStartIndex,B=w.dataEndIndex,U=M.barSize,Z=M.layout,j=M.barGap,X=M.barCategoryGap,le=M.maxBarSize,me=mK(Z),ie=me.numericAxisName,ce=me.cateAxisName,fe=Qct(T),xe=fe&&Drt({barSize:U,stackGroups:C}),te=[];return T.forEach(function(he,ve){var ze=DO(M.data,{graphicalItems:[he],dataStartIndex:O,dataEndIndex:B}),Ue=he.props,rt=Ue.dataKey,Be=Ue.maxBarSize,st=he.props["".concat(ie,"Id")],ct=he.props["".concat(ce,"Id")],Dt={},zt=c.reduce(function(Ce,_e){var ht,dt=w["".concat(_e.axisType,"Map")],Wt=he.props["".concat(_e.axisType,"Id")];dt&&dt[Wt]||_e.axisType==="zAxis"||mct(!1);var jt=dt[Wt];return Jt(Jt({},Ce),{},(ht={},pr(ht,_e.axisType,jt),pr(ht,"".concat(_e.axisType,"Ticks"),gg(jt)),ht))},Dt),Fe=zt[ce],lt=zt["".concat(ce,"Ticks")],Qe=C&&C[st]&&C[st].hasStack&&Zrt(he,C[st].stackGroups),ge=Np(he.type).indexOf("Bar")>=0,et=Lk(Fe,lt),ot=[];if(ge){var Tt,Ct,Bt=oi(Be)?le:Be,Gt=(Tt=(Ct=Lk(Fe,lt,!0))!==null&&Ct!==void 0?Ct:Bt)!==null&&Tt!==void 0?Tt:0;ot=Nrt({barGap:j,barCategoryGap:X,bandSize:Gt!==et?Gt:et,sizeList:xe[ct],maxBarSize:Bt}),Gt!==et&&(ot=ot.map(function(Ce){return Jt(Jt({},Ce),{},{position:Jt(Jt({},Ce.position),{},{offset:Ce.position.offset-Gt/2})})}))}var sn=he&&he.type&&he.type.getComposedData;if(sn){var Je;te.push({props:Jt(Jt({},sn(Jt(Jt({},zt),{},{displayedData:ze,props:M,dataKey:rt,item:he,bandSize:et,barPosition:ot,offset:I,stackedData:Qe,layout:Z,dataStartIndex:O,dataEndIndex:B}))),{},(Je={key:he.key||"item-".concat(ve)},pr(Je,ie,zt[ie]),pr(Je,ce,zt[ce]),pr(Je,"animationId",R),Je)),childIndex:dVe(he,M.children),item:he})}}),te},x=function(M,w){var T=M.props,C=M.dataStartIndex,I=M.dataEndIndex,R=M.updateId;if(!O7({props:T}))return null;var O=T.children,B=T.layout,U=T.stackOffset,Z=T.data,j=T.reverseStackOrder,X=mK(B),le=X.numericAxisName,me=X.cateAxisName,ie=cd(O,i),ce=Yrt(Z,ie,"".concat(le,"Id"),"".concat(me,"Id"),U,j),fe=c.reduce(function(ze,Ue){var rt="".concat(Ue.axisType,"Map");return Jt(Jt({},ze),{},pr({},rt,Zct(T,Jt(Jt({},Ue),{},{graphicalItems:ie,stackGroups:Ue.axisType===le&&ce,dataStartIndex:C,dataEndIndex:I}))))},{}),xe=eut(Jt(Jt({},fe),{},{props:T,graphicalItems:ie}),w==null?void 0:w.legendBBox);Object.keys(fe).forEach(function(ze){fe[ze]=p(T,fe[ze],xe,ze.replace("Map",""),r)});var te=fe["".concat(me,"Map")],he=Jct(te),ve=v(T,Jt(Jt({},fe),{},{dataStartIndex:C,dataEndIndex:I,updateId:R,graphicalItems:ie,stackGroups:ce,offset:xe}));return Jt(Jt({formattedGraphicalItems:ve,graphicalItems:ie,offset:xe,stackGroups:ce},he),fe)};return n=function(b){zct(w,b);var M=Fct(w);function w(T){var C,I,R;return Dct(this,w),R=M.call(this,T),pr(Vr(R),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),pr(Vr(R),"accessibilityManager",new Ect),pr(Vr(R),"handleLegendBBoxUpdate",function(O){if(O){var B=R.state,U=B.dataStartIndex,Z=B.dataEndIndex,j=B.updateId;R.setState(Jt({legendBBox:O},x({props:R.props,dataStartIndex:U,dataEndIndex:Z,updateId:j},Jt(Jt({},R.state),{},{legendBBox:O}))))}}),pr(Vr(R),"handleReceiveSyncEvent",function(O,B,U){if(R.props.syncId===O){if(U===R.eventEmitterSymbol&&typeof R.props.syncMethod!="function")return;R.applySyncEvent(B)}}),pr(Vr(R),"handleBrushChange",function(O){var B=O.startIndex,U=O.endIndex;if(B!==R.state.dataStartIndex||U!==R.state.dataEndIndex){var Z=R.state.updateId;R.setState(function(){return Jt({dataStartIndex:B,dataEndIndex:U},x({props:R.props,dataStartIndex:B,dataEndIndex:U,updateId:Z},R.state))}),R.triggerSyncEvent({dataStartIndex:B,dataEndIndex:U})}}),pr(Vr(R),"handleMouseEnter",function(O){var B=R.getMouseInfo(O);if(B){var U=Jt(Jt({},B),{},{isTooltipActive:!0});R.setState(U),R.triggerSyncEvent(U);var Z=R.props.onMouseEnter;Kr(Z)&&Z(U,O)}}),pr(Vr(R),"triggeredAfterMouseMove",function(O){var B=R.getMouseInfo(O),U=B?Jt(Jt({},B),{},{isTooltipActive:!0}):{isTooltipActive:!1};R.setState(U),R.triggerSyncEvent(U);var Z=R.props.onMouseMove;Kr(Z)&&Z(U,O)}),pr(Vr(R),"handleItemMouseEnter",function(O){R.setState(function(){return{isTooltipActive:!0,activeItem:O,activePayload:O.tooltipPayload,activeCoordinate:O.tooltipPosition||{x:O.cx,y:O.cy}}})}),pr(Vr(R),"handleItemMouseLeave",function(){R.setState(function(){return{isTooltipActive:!1}})}),pr(Vr(R),"handleMouseMove",function(O){O.persist(),R.throttleTriggeredAfterMouseMove(O)}),pr(Vr(R),"handleMouseLeave",function(O){var B={isTooltipActive:!1};R.setState(B),R.triggerSyncEvent(B);var U=R.props.onMouseLeave;Kr(U)&&U(B,O)}),pr(Vr(R),"handleOuterEvent",function(O){var B=uVe(O),U=ld(R.props,"".concat(B));if(B&&Kr(U)){var Z,j;/.*touch.*/i.test(B)?j=R.getMouseInfo(O.changedTouches[0]):j=R.getMouseInfo(O),U((Z=j)!==null&&Z!==void 0?Z:{},O)}}),pr(Vr(R),"handleClick",function(O){var B=R.getMouseInfo(O);if(B){var U=Jt(Jt({},B),{},{isTooltipActive:!0});R.setState(U),R.triggerSyncEvent(U);var Z=R.props.onClick;Kr(Z)&&Z(U,O)}}),pr(Vr(R),"handleMouseDown",function(O){var B=R.props.onMouseDown;if(Kr(B)){var U=R.getMouseInfo(O);B(U,O)}}),pr(Vr(R),"handleMouseUp",function(O){var B=R.props.onMouseUp;if(Kr(B)){var U=R.getMouseInfo(O);B(U,O)}}),pr(Vr(R),"handleTouchMove",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&R.throttleTriggeredAfterMouseMove(O.changedTouches[0])}),pr(Vr(R),"handleTouchStart",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&R.handleMouseDown(O.changedTouches[0])}),pr(Vr(R),"handleTouchEnd",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&R.handleMouseUp(O.changedTouches[0])}),pr(Vr(R),"triggerSyncEvent",function(O){R.props.syncId!==void 0&&rN.emit(iN,R.props.syncId,O,R.eventEmitterSymbol)}),pr(Vr(R),"applySyncEvent",function(O){var B=R.props,U=B.layout,Z=B.syncMethod,j=R.state.updateId,X=O.dataStartIndex,le=O.dataEndIndex;if(O.dataStartIndex!==void 0||O.dataEndIndex!==void 0)R.setState(Jt({dataStartIndex:X,dataEndIndex:le},x({props:R.props,dataStartIndex:X,dataEndIndex:le,updateId:j},R.state)));else if(O.activeTooltipIndex!==void 0){var me=O.chartX,ie=O.chartY,ce=O.activeTooltipIndex,fe=R.state,xe=fe.offset,te=fe.tooltipTicks;if(!xe)return;if(typeof Z=="function")ce=Z(te,O);else if(Z==="value"){ce=-1;for(var he=0;he<te.length;he++)if(te[he].value===O.activeLabel){ce=he;break}}var ve=Jt(Jt({},xe),{},{x:xe.left,y:xe.top}),ze=Math.min(me,ve.x+ve.width),Ue=Math.min(ie,ve.y+ve.height),rt=te[ce]&&te[ce].value,Be=vce(R.state,R.props.data,ce),st=te[ce]?{x:U==="horizontal"?te[ce].coordinate:ze,y:U==="horizontal"?Ue:te[ce].coordinate}:gce;R.setState(Jt(Jt({},O),{},{activeLabel:rt,activeCoordinate:st,activePayload:Be,activeTooltipIndex:ce}))}else R.setState(O)}),pr(Vr(R),"verticalCoordinatesGenerator",function(O,B){var U=O.xAxis,Z=O.width,j=O.height,X=O.offset;return rX(e4(Jt(Jt(Jt({},YS.defaultProps),U),{},{ticks:gg(U,!0),viewBox:{x:0,y:0,width:Z,height:j}})),X.left,X.left+X.width,B)}),pr(Vr(R),"horizontalCoordinatesGenerator",function(O,B){var U=O.yAxis,Z=O.width,j=O.height,X=O.offset;return rX(e4(Jt(Jt(Jt({},YS.defaultProps),U),{},{ticks:gg(U,!0),viewBox:{x:0,y:0,width:Z,height:j}})),X.top,X.top+X.height,B)}),pr(Vr(R),"axesTicksGenerator",function(O){return gg(O,!0)}),pr(Vr(R),"renderCursor",function(O){var B,U=R.state,Z=U.isTooltipActive,j=U.activeCoordinate,X=U.activePayload,le=U.offset,me=U.activeTooltipIndex,ie=U.tooltipAxisBandSize,ce=R.getTooltipEventType(),fe=(B=O.props.active)!==null&&B!==void 0?B:Z;if(!O||!O.props.cursor||!fe||!j||r!=="ScatterChart"&&ce!=="axis")return null;var xe=R.props.layout,te,he=HB;if(r==="ScatterChart")te=j,he=vot;else if(r==="BarChart")te=Act(xe,j,le,ie),he=O6;else if(xe==="radial"){var ve=dce(j),ze=ve.cx,Ue=ve.cy,rt=ve.radius,Be=ve.startAngle,st=ve.endAngle;te={cx:ze,cy:Ue,startAngle:Be,endAngle:st,innerRadius:rt,outerRadius:rt},he=Zle}else te={points:Cct(xe,j,le)},he=HB;var ct=O.key||"_recharts-cursor",Dt=Jt(Jt(Jt(Jt({stroke:"#ccc",pointerEvents:"none"},le),te),ni(O.props.cursor)),{},{payload:X,payloadIndex:me,key:ct,className:"recharts-tooltip-cursor"});return W.isValidElement(O.props.cursor)?W.cloneElement(O.props.cursor,Dt):W.createElement(he,Dt)}),pr(Vr(R),"renderPolarAxis",function(O,B,U){var Z=ld(O,"type.axisType"),j=ld(R.state,"".concat(Z,"Map")),X=j&&j[O.props["".concat(Z,"Id")]];return W.cloneElement(O,Jt(Jt({},X),{},{className:Z,key:O.key||"".concat(B,"-").concat(U),ticks:gg(X,!0)}))}),pr(Vr(R),"renderXAxis",function(O,B,U){var Z=R.state.xAxisMap,j=Z[O.props.xAxisId];return R.renderAxis(j,O,B,U)}),pr(Vr(R),"renderYAxis",function(O,B,U){var Z=R.state.yAxisMap,j=Z[O.props.yAxisId];return R.renderAxis(j,O,B,U)}),pr(Vr(R),"renderGrid",function(O){var B=R.state,U=B.xAxisMap,Z=B.yAxisMap,j=B.offset,X=R.props,le=X.width,me=X.height,ie=mg(U),ce=hct(Z,function(te){return nce(te.domain,Number.isFinite)}),fe=ce||mg(Z),xe=O.props||{};return W.cloneElement(O,{key:O.key||"grid",x:Tn(xe.x)?xe.x:j.left,y:Tn(xe.y)?xe.y:j.top,width:Tn(xe.width)?xe.width:j.width,height:Tn(xe.height)?xe.height:j.height,xAxis:ie,yAxis:fe,offset:j,chartWidth:le,chartHeight:me,verticalCoordinatesGenerator:xe.verticalCoordinatesGenerator||R.verticalCoordinatesGenerator,horizontalCoordinatesGenerator:xe.horizontalCoordinatesGenerator||R.horizontalCoordinatesGenerator})}),pr(Vr(R),"renderPolarGrid",function(O){var B=O.props,U=B.radialLines,Z=B.polarAngles,j=B.polarRadius,X=R.state,le=X.radiusAxisMap,me=X.angleAxisMap,ie=mg(le),ce=mg(me),fe=ce.cx,xe=ce.cy,te=ce.innerRadius,he=ce.outerRadius;return W.cloneElement(O,{polarAngles:Array.isArray(Z)?Z:gg(ce,!0).map(function(ve){return ve.coordinate}),polarRadius:Array.isArray(j)?j:gg(ie,!0).map(function(ve){return ve.coordinate}),cx:fe,cy:xe,innerRadius:te,outerRadius:he,key:O.key||"polar-grid",radialLines:U})}),pr(Vr(R),"renderLegend",function(){var O=R.state.formattedGraphicalItems,B=R.props,U=B.children,Z=B.width,j=B.height,X=R.props.margin||{},le=Z-(X.left||0)-(X.right||0),me=Vle({children:U,formattedGraphicalItems:O,legendWidth:le,legendContent:h});if(!me)return null;var ie=me.item,ce=uK(me,Pct);return W.cloneElement(ie,Jt(Jt({},ce),{},{chartWidth:Z,chartHeight:j,margin:X,onBBoxUpdate:R.handleLegendBBoxUpdate}))}),pr(Vr(R),"renderTooltip",function(){var O,B=R.props.children,U=Ap(B,e0);if(!U)return null;var Z=R.state,j=Z.isTooltipActive,X=Z.activeCoordinate,le=Z.activePayload,me=Z.activeLabel,ie=Z.offset,ce=(O=U.props.active)!==null&&O!==void 0?O:j;return W.cloneElement(U,{viewBox:Jt(Jt({},ie),{},{x:ie.left,y:ie.top}),active:ce,label:me,payload:ce?le:[],coordinate:X})}),pr(Vr(R),"renderBrush",function(O){var B=R.props,U=B.margin,Z=B.data,j=R.state,X=j.offset,le=j.dataStartIndex,me=j.dataEndIndex,ie=j.updateId;return W.cloneElement(O,{key:O.key||"_recharts-brush",onChange:fC(R.handleBrushChange,O.props.onChange),data:Z,x:Tn(O.props.x)?O.props.x:X.left,y:Tn(O.props.y)?O.props.y:X.top+X.height+X.brushBottom-(U.bottom||0),width:Tn(O.props.width)?O.props.width:X.width,startIndex:le,endIndex:me,updateId:"brush-".concat(ie)})}),pr(Vr(R),"renderReferenceElement",function(O,B,U){if(!O)return null;var Z=Vr(R),j=Z.clipPathId,X=R.state,le=X.xAxisMap,me=X.yAxisMap,ie=X.offset,ce=O.props,fe=ce.xAxisId,xe=ce.yAxisId;return W.cloneElement(O,{key:O.key||"".concat(B,"-").concat(U),xAxis:le[fe],yAxis:me[xe],viewBox:{x:ie.left,y:ie.top,width:ie.width,height:ie.height},clipPathId:j})}),pr(Vr(R),"renderActivePoints",function(O){var B=O.item,U=O.activePoint,Z=O.basePoint,j=O.childIndex,X=O.isRange,le=[],me=B.props.key,ie=B.item.props,ce=ie.activeDot,fe=ie.dataKey,xe=Jt(Jt({index:j,dataKey:fe,cx:U.x,cy:U.y,r:4,fill:R6(B.item),strokeWidth:2,stroke:"#fff",payload:U.payload,value:U.value,key:"".concat(me,"-activePoint-").concat(j)},ni(ce)),nk(ce));return le.push(w.renderActiveDot(ce,xe)),Z?le.push(w.renderActiveDot(ce,Jt(Jt({},xe),{},{cx:Z.x,cy:Z.y,key:"".concat(me,"-basePoint-").concat(j)}))):X&&le.push(null),le}),pr(Vr(R),"renderGraphicChild",function(O,B,U){var Z=R.filterFormatItem(O,B,U);if(!Z)return null;var j=R.getTooltipEventType(),X=R.state,le=X.isTooltipActive,me=X.tooltipAxis,ie=X.activeTooltipIndex,ce=X.activeLabel,fe=R.props.children,xe=Ap(fe,e0),te=Z.props,he=te.points,ve=te.isRange,ze=te.baseLine,Ue=Z.item.props,rt=Ue.activeDot,Be=Ue.hide,st=Ue.activeBar,ct=Ue.activeShape,Dt=!!(!Be&&le&&xe&&(rt||st||ct)),zt={};j!=="axis"&&xe&&xe.props.trigger==="click"?zt={onClick:fC(R.handleItemMouseEnter,O.props.onClick)}:j!=="axis"&&(zt={onMouseLeave:fC(R.handleItemMouseLeave,O.props.onMouseLeave),onMouseEnter:fC(R.handleItemMouseEnter,O.props.onMouseEnter)});var Fe=W.cloneElement(O,Jt(Jt({},Z.props),zt));function lt(_e){return typeof me.dataKey=="function"?me.dataKey(_e.payload):null}if(Dt)if(ie>=0){var Qe,ge;if(me.dataKey&&!me.allowDuplicatedCategory){var et=typeof me.dataKey=="function"?lt:"payload.".concat(me.dataKey.toString());Qe=tk(he,et,ce),ge=ve&&ze&&tk(ze,et,ce)}else Qe=he==null?void 0:he[ie],ge=ve&&ze&&ze[ie];if(ct||st){var ot=O.props.activeIndex!==void 0?O.props.activeIndex:ie;return[W.cloneElement(O,Jt(Jt(Jt({},Z.props),zt),{},{activeIndex:ot})),null,null]}if(!oi(Qe))return[Fe].concat(Xb(R.renderActivePoints({item:Z,activePoint:Qe,basePoint:ge,childIndex:ie,isRange:ve})))}else{var Tt,Ct=(Tt=R.getItemByXY(R.state.activeCoordinate))!==null&&Tt!==void 0?Tt:{graphicalItem:Fe},Bt=Ct.graphicalItem,Gt=Bt.item,sn=Gt===void 0?O:Gt,Je=Bt.childIndex,Ce=Jt(Jt(Jt({},Z.props),zt),{},{activeIndex:Je});return[W.cloneElement(sn,Ce),null,null]}return ve?[Fe,null,null]:[Fe,null]}),pr(Vr(R),"renderCustomized",function(O,B,U){return W.cloneElement(O,Jt(Jt({key:"recharts-customized-".concat(U)},R.props),R.state))}),pr(Vr(R),"renderMap",{CartesianGrid:{handler:R.renderGrid,once:!0},ReferenceArea:{handler:R.renderReferenceElement},ReferenceLine:{handler:R.renderReferenceElement},ReferenceDot:{handler:R.renderReferenceElement},XAxis:{handler:R.renderXAxis},YAxis:{handler:R.renderYAxis},Brush:{handler:R.renderBrush,once:!0},Bar:{handler:R.renderGraphicChild},Line:{handler:R.renderGraphicChild},Area:{handler:R.renderGraphicChild},Radar:{handler:R.renderGraphicChild},RadialBar:{handler:R.renderGraphicChild},Scatter:{handler:R.renderGraphicChild},Pie:{handler:R.renderGraphicChild},Funnel:{handler:R.renderGraphicChild},Tooltip:{handler:R.renderCursor,once:!0},PolarGrid:{handler:R.renderPolarGrid,once:!0},PolarAngleAxis:{handler:R.renderPolarAxis},PolarRadiusAxis:{handler:R.renderPolarAxis},Customized:{handler:R.renderCustomized}}),R.clipPathId="".concat((C=T.id)!==null&&C!==void 0?C:AE("recharts"),"-clip"),R.throttleTriggeredAfterMouseMove=Vae(R.triggeredAfterMouseMove,(I=T.throttleDelay)!==null&&I!==void 0?I:1e3/60),R.state={},R}return Nct(w,[{key:"componentDidMount",value:function(){var C,I;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(I=this.props.margin.top)!==null&&I!==void 0?I:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout})}},{key:"getSnapshotBeforeUpdate",value:function(C,I){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==I.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==C.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==C.margin){var R,O;this.accessibilityManager.setDetails({offset:{left:(R=this.props.margin.left)!==null&&R!==void 0?R:0,top:(O=this.props.margin.top)!==null&&O!==void 0?O:0}})}return null}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var C=Ap(this.props.children,e0);if(C&&typeof C.props.shared=="boolean"){var I=C.props.shared?"axis":"item";return l.indexOf(I)>=0?I:a}return a}},{key:"getMouseInfo",value:function(C){if(!this.container)return null;var I=this.container,R=I.getBoundingClientRect(),O=oQe(R),B={chartX:Math.round(C.pageX-O.left),chartY:Math.round(C.pageY-O.top)},U=R.width/I.offsetWidth||1,Z=this.inRange(B.chartX,B.chartY,U);if(!Z)return null;var j=this.state,X=j.xAxisMap,le=j.yAxisMap,me=this.getTooltipEventType();if(me!=="axis"&&X&&le){var ie=mg(X).scale,ce=mg(le).scale,fe=ie&&ie.invert?ie.invert(B.chartX):null,xe=ce&&ce.invert?ce.invert(B.chartY):null;return Jt(Jt({},B),{},{xValue:fe,yValue:xe})}var te=hK(this.state,this.props.data,this.props.layout,Z);return te?Jt(Jt({},B),te):null}},{key:"inRange",value:function(C,I){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,O=this.props.layout,B=C/R,U=I/R;if(O==="horizontal"||O==="vertical"){var Z=this.state.offset,j=B>=Z.left&&B<=Z.left+Z.width&&U>=Z.top&&U<=Z.top+Z.height;return j?{x:B,y:U}:null}var X=this.state,le=X.angleAxisMap,me=X.radiusAxisMap;if(le&&me){var ie=mg(le);return fX({x:B,y:U},ie)}return null}},{key:"parseEventsOfWrapper",value:function(){var C=this.props.children,I=this.getTooltipEventType(),R=Ap(C,e0),O={};R&&I==="axis"&&(R.props.trigger==="click"?O={onClick:this.handleClick}:O={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var B=nk(this.props,this.handleOuterEvent);return Jt(Jt({},B),O)}},{key:"addListener",value:function(){rN.on(iN,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){rN.removeListener(iN,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(C,I,R){for(var O=this.state.formattedGraphicalItems,B=0,U=O.length;B<U;B++){var Z=O[B];if(Z.item===C||Z.props.key===C.key||I===Np(Z.item.type)&&R===Z.childIndex)return Z}return null}},{key:"renderAxis",value:function(C,I,R,O){var B=this.props,U=B.width,Z=B.height;return Ze.createElement(YS,R_({},C,{className:Kt("recharts-".concat(C.axisType," ").concat(C.axisType),C.className),key:I.key||"".concat(R,"-").concat(O),viewBox:{x:0,y:0,width:U,height:Z},ticksGenerator:this.axesTicksGenerator}))}},{key:"renderClipPath",value:function(){var C=this.clipPathId,I=this.state.offset,R=I.left,O=I.top,B=I.height,U=I.width;return Ze.createElement("defs",null,Ze.createElement("clipPath",{id:C},Ze.createElement("rect",{x:R,y:O,height:B,width:U})))}},{key:"getXScales",value:function(){var C=this.state.xAxisMap;return C?Object.entries(C).reduce(function(I,R){var O=cK(R,2),B=O[0],U=O[1];return Jt(Jt({},I),{},pr({},B,U.scale))},{}):null}},{key:"getYScales",value:function(){var C=this.state.yAxisMap;return C?Object.entries(C).reduce(function(I,R){var O=cK(R,2),B=O[0],U=O[1];return Jt(Jt({},I),{},pr({},B,U.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(C){var I;return(I=this.state.xAxisMap)===null||I===void 0||(I=I[C])===null||I===void 0?void 0:I.scale}},{key:"getYScaleByAxisId",value:function(C){var I;return(I=this.state.yAxisMap)===null||I===void 0||(I=I[C])===null||I===void 0?void 0:I.scale}},{key:"getItemByXY",value:function(C){var I=this.state,R=I.formattedGraphicalItems,O=I.activeItem;if(R&&R.length)for(var B=0,U=R.length;B<U;B++){var Z=R[B],j=Z.props,X=Z.item,le=Np(X.type);if(le==="Bar"){var me=(j.data||[]).find(function(xe){return lot(C,xe)});if(me)return{graphicalItem:Z,payload:me}}else if(le==="RadialBar"){var ie=(j.data||[]).find(function(xe){return fX(C,xe)});if(ie)return{graphicalItem:Z,payload:ie}}else if(PO(Z,O)||kO(Z,O)||f2(Z,O)){var ce=dst({graphicalItem:Z,activeTooltipItem:O,itemData:X.props.data}),fe=X.props.activeIndex===void 0?ce:X.props.activeIndex;return{graphicalItem:Jt(Jt({},Z),{},{childIndex:fe}),payload:f2(Z,O)?X.props.data[ce]:Z.props.data[ce]}}}return null}},{key:"render",value:function(){var C=this;if(!O7(this))return null;var I=this.props,R=I.children,O=I.className,B=I.width,U=I.height,Z=I.style,j=I.compact,X=I.title,le=I.desc,me=uK(I,kct),ie=ni(me);if(j)return Ze.createElement(JF,R_({},ie,{width:B,height:U,title:X,desc:le}),this.renderClipPath(),D7(R,this.renderMap));if(this.props.accessibilityLayer){var ce,fe;ie.tabIndex=(ce=this.props.tabIndex)!==null&&ce!==void 0?ce:0,ie.role=(fe=this.props.role)!==null&&fe!==void 0?fe:"img",ie.onKeyDown=function(te){C.accessibilityManager.keyboardEvent(te)},ie.onFocus=function(){C.accessibilityManager.focus()}}var xe=this.parseEventsOfWrapper();return Ze.createElement("div",R_({className:Kt("recharts-wrapper",O),style:Jt({position:"relative",cursor:"default",width:B,height:U},Z)},xe,{ref:function(he){C.container=he},role:"region"}),Ze.createElement(JF,R_({},ie,{width:B,height:U,title:X,desc:le,style:Gct}),this.renderClipPath(),D7(R,this.renderMap)),this.renderLegend(),this.renderTooltip())}}]),w}(W.Component),pr(n,"displayName",r),pr(n,"defaultProps",Jt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},g)),pr(n,"getDerivedStateFromProps",function(b,M){var w=b.dataKey,T=b.data,C=b.children,I=b.width,R=b.height,O=b.layout,B=b.stackOffset,U=b.margin;if(M.updateId===void 0){var Z=pK(b);return Jt(Jt(Jt({},Z),{},{updateId:0},x(Jt(Jt({props:b},Z),{},{updateId:0}),M)),{},{prevDataKey:w,prevData:T,prevWidth:I,prevHeight:R,prevLayout:O,prevStackOffset:B,prevMargin:U,prevChildren:C})}if(w!==M.prevDataKey||T!==M.prevData||I!==M.prevWidth||R!==M.prevHeight||O!==M.prevLayout||B!==M.prevStackOffset||!tb(U,M.prevMargin)){var j=pK(b),X={chartX:M.chartX,chartY:M.chartY,isTooltipActive:M.isTooltipActive},le=Jt(Jt({},hK(M,T,O)),{},{updateId:M.updateId+1}),me=Jt(Jt(Jt({},j),X),le);return Jt(Jt(Jt({},me),x(Jt({props:b},me),M)),{},{prevDataKey:w,prevData:T,prevWidth:I,prevHeight:R,prevLayout:O,prevStackOffset:B,prevMargin:U,prevChildren:C})}if(!Nse(C,M.prevChildren)){var ie=!oi(T),ce=ie?M.updateId:M.updateId+1;return Jt(Jt({updateId:ce},x(Jt(Jt({props:b},M),{},{updateId:ce}),M)),{},{prevChildren:C})}return null}),pr(n,"renderActiveDot",function(b,M){var w;return W.isValidElement(b)?w=W.cloneElement(b,M):Kr(b)?w=b(M):w=Ze.createElement(L6,M),Ze.createElement(bs,{className:"recharts-active-dot",key:M.key},w)}),n},nut=tut({chartName:"LineChart",GraphicalChild:qb,axisComponents:[{axisType:"xAxis",AxisComp:OO},{axisType:"yAxis",AxisComp:LO}],formatAxisMap:Dat});const rut=ri(t=>({chart:{flexGrow:1,overflow:"hidden"},content:{height:"100%",flexGrow:1,alignItems:"stretch",display:"flex",flexDirection:"column",overflowY:"auto"}})),$6=()=>{const t=rut(),[e,n]=W.useState([]),[r,i]=W.useState([]),[o,a]=W.useState([]),s=Ze.createRef();s.current=o;const[l,c]=W.useState(-1),h=mr(I=>I.mission.route),[p,g]=W.useState(0),[v,x]=W.useState(0),[b,M]=W.useState(0);W.useEffect(()=>{console.log(e);const I=e.map(Z=>Z.data);console.log(I.flat());const R=I.flat().map(Z=>Z.elevation),O=I.flat().map(Z=>Z.uavheight?Number(Z.uavheight):0);console.log(R),console.log(O);const B=Math.min(...R),U=Math.max(...O);console.log("value"+B+"max"+U),g(B),x(U),M(U-B)},[e]);const w=I=>{let R=[];return I.length>0&&I.forEach(O=>{let B=[];O.wp.forEach(U=>{B.push([U.pos[0],U.pos[1],U.pos[2]])}),R.push(B)}),R};async function T(){if(console.log("--------------   LLAMANDO A ELEVATION"),h.length>0){let I=JSON.parse(JSON.stringify(h)),R=I.map(U=>U.id),O=w(I);i(O);let B;try{const U=await fetch("/api/map/elevation",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({routes:O})});if(U.ok)B=await U.json();else throw new Error(U.status)}catch(U){console.log(U)}if(B.status){let U=B.elevation.map((Z,j)=>({name:"RT"+j,data:Z,color:iy.colors_devices[R[j]]}));c(-1),a(U)}else console.log("no get elevation of point")}}W.useEffect(()=>{console.log("mission Elevation")},[]),W.useEffect(()=>{let I=!1,R=w(h);if(console.log("update elevation"),R.length>r.length)console.log("ruta mayour"),R[+R.length+-1].length>0?I=!0:i(R);else if(R.length<r.length){console.log(" se ha eliminado  una ruta");let O=[],B=[];r.map((U,Z)=>{let j=!1;R.map(X=>{JSON.stringify(U)===JSON.stringify(X)&&(j=!0)}),j&&(O.push(U),B.push(s.current[Z]))}),a(B),i(O)}else{console.log("ruta de la misma longitud");for(let O=0;O<R.length;O=O+1)if(JSON.stringify(R[O])!=JSON.stringify(r[O])){console.log("latitude longitude no equals");let B=r[O].map(Z=>[Z[0],Z[1]]),U=R[O].map(Z=>[Z[0],Z[1]]);if(JSON.stringify(B)===JSON.stringify(U)){for(let Z=0;Z<r[O].length;Z=Z+1)if(r[O][Z][2]!==R[O][Z][2]){console.log("diferent elevation");let j=JSON.parse(JSON.stringify(s.current));for(let X=0;X<j[O].data.length;X=X+1)j[O].data[X].hasOwnProperty("wp")&&j[O].data[X].wp==Z&&(console.log("encontrado elev profile wp"),j[O].data[X].uavheight=+j[O].data[X].uavheight-+j[O].data[X].uav+ +R[O][Z][2],j[O].data[X].uav=+R[O][Z][2]);console.log(j),a(j)}i(R);break}else{console.log("nuevas posiciones"),I=!0;break}}}I&&T()},[h]),W.useEffect(()=>{l==-1?n(o):n([o[l]])},[l,o]);const C=({active:I,payload:R,label:O})=>{if(I&&R&&R.length){let B=[R[0].payload];return B[0].color=R[0].color,R.map(U=>{let Z=!0;B.map(j=>{U.payload.rt==j.rt&&(Z=!1)}),U.payload.color=U.color,Z&&B.push(U.payload)}),B[0].uavheight?F.jsxs("div",{style:{background:"#FFFFFF"},children:[F.jsx("div",{children:`distancia ${O} m `}),B.map(U=>F.jsxs(W.Fragment,{children:[F.jsx("div",{style:{color:U.color,fontSize:16},children:`Ruta ${U.rt} - wp ${U.wp}`},`tr${U.rt}`),F.jsx("div",{style:{color:U.color,fontSize:16},children:`Terreno:${U.elevation} - UAV: ${U.uavheight}`},`dr${U.rt}`)]},"s-"+U.rt))]}):F.jsxs("div",{style:{background:"#FFFFFF"},children:[F.jsx("div",{children:`distancia ${O} m `}),B.map(U=>F.jsxs(W.Fragment,{children:[F.jsx("div",{style:{color:U.color,fontSize:16},children:`Ruta ${U.rt}`},`tr${U.rt}`),F.jsx("div",{style:{color:U.color,fontSize:16},children:`Terreno:${U.elevation} `},`dr${U.rt}`)]},"s-"+U.rt))]})}return null};return F.jsxs("div",{className:t.content,children:[F.jsxs(ws,{style:{display:"flex",margin:"10px",alignItems:"center"},children:[F.jsx("a",{style:{marginInline:"20px"},children:"Elevation Profile"}),F.jsxs(uE,{children:[F.jsx(dE,{id:"demo-simple-select-label",children:"Route"}),F.jsxs(fE,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:l,label:"Elevation Profile",onChange:I=>c(I.target.value),children:[F.jsx(lu,{value:-1,children:"All Routes"}),o.map((I,R,O)=>F.jsx(lu,{value:R,children:`Route${R}`},`sel${R}`))]})]})]}),e.length>0&&F.jsx("div",{className:t.chart,children:F.jsx(JJe,{width:"100%",height:"100%",children:F.jsxs(nut,{data:e,margin:{top:10,right:40,left:0,bottom:10},children:[F.jsx(OO,{dataKey:"length",type:"number",domain:["dataMin","dataMax"]}),F.jsx(LO,{type:"number",tickFormatter:I=>I.toFixed(2),domain:[p-b/5,v+b/5]}),F.jsx(B6,{strokeDasharray:"3 3"}),F.jsx(e0,{content:F.jsx(C,{})}),F.jsx(Lb,{}),e.map((I,R,O)=>F.jsxs(W.Fragment,{children:[F.jsx(qb,{type:"monotone",dataKey:"elevation",data:I.data,name:I.name,stroke:I.color,activeDot:{r:8,onClick:(B,U)=>{console.log(U);let Z=`https://www.google.com/maps?q=${U.payload.lat},${U.payload.lng}`;window.open(Z,"_blank")}}},I.name),F.jsx(qb,{connectNulls:!0,dataKey:"uavheight",data:I.data,name:I.name+"-v",stroke:I.color,strokeDasharray:"5 5",activeDot:{onClick:(B,U)=>{console.log(U)}}},I.name+"-v")]},"s-"+R))]})})})]})},iut=ri(t=>({card:{pointerEvents:"auto",width:"500px",height:"180px"},media:{height:t.dimensions.popupImageHeight,display:"flex",justifyContent:"flex-end",alignItems:"flex-start"},mediaButton:{color:t.palette.colors.white,mixBlendMode:"difference"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(1,1,0,2)},content:{paddingTop:"15px",paddingBottom:t.spacing(1)},negative:{color:t.palette.colors.negative},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},table:{"& .MuiTableCell-sizeSmall":{paddingLeft:0,paddingRight:0}},cell:{borderBottom:"none"},actions:{justifyContent:"center"},root:{pointerEvents:"none",position:"fixed",zIndex:6,left:"50%",top:"40%",transform:"translateX(-50%)"}})),xce=({SetOpenSave:t,OpenSave:e})=>{const n=iut(),r=mr(h=>h.mission),[i,o]=W.useState("yaml"),[a,s]=W.useState(r.name),l=async()=>{let h,p="text/plain";if(i=="yaml"){let b={version:"3"};b.name=r.name,b.route=r.route,h=qP.stringify(b)}if(i=="kml"){p="application/xml";let b=`<?xml version="1.0" encoding="UTF-8"?>
`;b+=`<kml>
`,b+=`<Document>
`,r.route.map((w,T,C)=>{b+=`<Style id="sn_ylw-pushpin1${T}">
`,b+=`<LineStyle>
`,b+=`<color>ff${iy.colors_devices[T].substr(-6)}</color>
`,b+=`<width>3</width>
`,b+=`</LineStyle>
`,b+=`</Style>
`});let M=[];for(const w of r.route)if(w.wp.length){let T=await fetch(`/api/map/elevation?locations=[[${w.wp[0].pos[0]},${w.wp[0].pos[1]}]]`);if(T.ok){let C=await T.json();M.push(C.results[0].elevation)}else M.push(0)}else M.push(0);r.route.map((w,T)=>{b+=`<Placemark>
`,b+=`<name>${w.uav}-${w.name}</name>
`,b+=`<styleUrl>#sn_ylw-pushpin1${T}</styleUrl>
`,b+=`<open>1</open>
`,b+=`<LineString>
`;let C="";w.wp.map(I=>{C=C+I.pos[1]+","+I.pos[0]+","+(+I.pos[2]+ +M[T])+" "}),b+=`<tessellate>1</tessellate>
`,b+=`<altitudeMode>absolute</altitudeMode>
`,b+=`<coordinates>
`,b+=C+`
`,b+=`</coordinates>
`,b+=`</LineString>
`,b+=`</Placemark>
`}),b+=`</Document>
`,b+="</kml>",h=b}if(i=="plan"){p="application/json";let b={fileType:"Plan"};b.geoFence={circles:[],polygons:[],version:2},b.groundStation="QGroundControl",b.mission={},b.mission.cruiseSpeed=r.route[0].attributes.idle_vel,b.mission.firmwareType=12,b.mission.globalPlanAltitudeMode=0,b.mission.hoverSpeed=5,b.mission.items=[],r.route.map((M,w,T)=>{M.wp.map((C,I,R)=>{let O={AMSLAltAboveTerrain:null,Altitude:C.pos[2],AltitudeMode:1,autoContinue:!0,command:16,doJumpId:1,frame:3,params:[0,0,0,null,C.pos[0],C.pos[1],C.pos[2]],type:"SimpleItem"};I==0&&(O.command=84,b.mission.plannedHomePosition=[C.pos[0],C.pos[1],C.pos[2]]),I+1==R.length&&(O.command=84),b.mission.items.push(O)})}),b.mission.vehicleType=20,b.mission.version=2,b.rallyPoints={points:[],version:2},b.version=1,h=JSON.stringify(b)}if(i=="waypoint"){let b=`QGC WPL 110
`;r.route.map(M=>{M.wp.map((w,T,C)=>{T==0?b+=`${T}	1	0	16	0	0	0	0	${w.pos[0]}	${w.pos[1]}	${w.pos[2]}	1
`:b+=`${T}	0	0	16	0	0	0	0	${w.pos[0]}	${w.pos[1]}	${w.pos[2]}	1
`})}),h=b}const g=new Blob([h],{type:p}),v=URL.createObjectURL(g),x=document.createElement("a");x.download=r.name+"."+i,x.href=v,x.click()},c=()=>{t(!1)};return F.jsx("div",{className:n.root,children:F.jsxs(Oh,{elevation:3,className:n.card,children:[F.jsxs("div",{className:n.header,children:[F.jsx(Bn,{variant:"body2",color:"textSecondary",children:"Save Mission"}),F.jsx(wr,{size:"small",onClick:c,onTouchStart:c,children:F.jsx(Ah,{fontSize:"small"})})]}),F.jsxs(Y$,{className:n.content,children:[F.jsx(gi,{required:!0,label:"Name Mission",variant:"standard",value:a||" ",onChange:h=>s(h.target.value),style:{width:"300px",marginRight:"5px"}}),F.jsxs(uE,{children:[F.jsx(dE,{children:"Type file mission"}),F.jsx(fE,{label:"Type file mission",value:i,onChange:h=>o(h.target.value),sx:{width:"120px"},children:["yaml","kml","waypoint","plan"].map(h=>F.jsx(lu,{value:h,children:h},h))})]})]}),F.jsx(qne,{classes:{root:n.actions},disableSpacing:!0,children:F.jsx(Gr,{onClick:l,children:"Save Mission"})})]})})},out=ri(t=>({root:{margin:"0",height:"100vh"},sidebarStyle:{display:"flex",flexDirection:"column",position:"fixed",left:0,top:"88px",height:"calc(100% - 95px)",width:"560px",margin:"0px",zIndex:3},middleStyle:{flex:1,display:"grid"},panelElevation:{display:"flex",flexDirection:"column",position:"fixed",right:0,bottom:0,height:"50vh",width:"calc(100% - 560px)",margin:"0px",zIndex:3}})),sut=(t,e)=>{setList([...list,toastProperties])},aut=()=>{const t=out(),[e,n]=W.useState(!1),r=mr(a=>a.data.positions),[i,o]=W.useState([]);return W.useEffect(()=>{o(Object.values(r))},[r]),F.jsx("div",{className:t.root,children:F.jsx(IU,{children:F.jsxs(xE,{notification:sut,children:[F.jsx(OR,{}),F.jsx(_E,{}),F.jsxs("div",{style:{float:"right",width:"calc(100% - 560px)",height:"calc(70vh - 95px)",right:"0px",margin:"auto"},children:[F.jsxs(uj,{children:[F.jsx(PU,{}),F.jsx(rje,{}),F.jsx(bse,{positions:i,onClick:null,selectedPosition:null,showStatus:!0})]}),F.jsx(AU,{})]}),F.jsx("div",{className:t.sidebarStyle,children:F.jsx("div",{className:t.middleStyle,children:F.jsx(Ls,{square:!0,children:F.jsx(Mse,{SetOpenSave:n})})})}),F.jsx("div",{className:t.panelElevation,children:F.jsx("div",{className:t.middleStyle,children:F.jsx(Ls,{square:!0,children:F.jsx($6,{})})})}),e&&F.jsx(xce,{SetOpenSave:n})]})})})},lut=ri(t=>({root:{height:"100%",display:"flex",flexDirection:"column"},content:{overflow:"auto",paddingTop:t.spacing(2),paddingBottom:t.spacing(2)},buttons:{marginTop:t.spacing(2),marginBottom:t.spacing(2),display:"flex",justifyContent:"space-evenly","& > *":{flexBasis:"33%"}},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)}})),cut=()=>{const t=lut(),e=rm(),[n,r]=W.useState([]),[i,o]=W.useState(),a=mr(l=>l.events.items),s=mr(l=>l.devices.items);return W.useEffect(()=>{r(a)},[a]),W.useEffect(()=>{o({...s,"-1":{name:"GCS"}})},[s]),mr(l=>{if(n){const c=l.devices.items[n.deviceId];if(c)return c.name}return null}),F.jsxs("div",{className:t.root,children:[F.jsx(aE,{position:"sticky",color:"inherit",children:F.jsxs(vy,{children:[F.jsx(wr,{color:"inherit",edge:"start",sx:{mr:2},onClick:()=>e(-1),children:F.jsx(E1,{})}),F.jsx(Bn,{variant:"h6",children:"Missions"})]})}),F.jsx("div",{className:t.content,children:F.jsx(d1,{maxWidth:"sm",children:F.jsx(Ls,{children:F.jsxs(hR,{children:[F.jsx(ej,{children:F.jsxs(Gg,{children:[F.jsx(rs,{children:"id"}),F.jsx(rs,{children:"initTime"}),F.jsx(rs,{children:"endTime"}),F.jsx(rs,{children:"status"}),F.jsx(rs,{children:"UAV's"})]})}),F.jsx(mR,{children:n&&n.map(l=>F.jsxs(Gg,{children:[F.jsx(rs,{children:i[l.deviceId].name}),F.jsx(rs,{children:l.eventTime}),F.jsx(rs,{children:l.attributes.message})]},l.id))})]})})})})]})},uut=()=>F.jsx("div",{children:"ReplayPage"}),dut=ri(t=>({root:{position:"relative",width:"200px",height:"200px",backgroundColor:"#F7F9F9",overflow:"hidden",margin:"auto"},box_down:{width:"100%",height:"50%",backgroundColor:"#5D6D7E",position:"absolute",transition:"bottom 0.3s ease-in-out",bottom:0,left:"50%",transform:"translate(-50%, 100%)",borderTop:"6px solid #1B2631 "},box_right:{width:"50%",height:"100%",backgroundColor:"#5D6D7E",position:"absolute",transition:"right 0.3s ease-in-out",top:"50%",right:0,transform:"translate(100%, -50%)",borderLeft:"6px solid #1B2631 "},box_up:{width:"100%",height:"50%",backgroundColor:"#5D6D7E",position:"absolute",transition:"top 0.3s ease-in-out",top:0,left:"50%",transform:"translate(-50%, -100%)",borderBottom:"6px solid #1B2631 "},box_left:{width:"50%",height:"100%",backgroundColor:"#5D6D7E",position:"absolute",transition:"left 0.3s ease-in-out",top:"50%",left:0,transform:"translate(-100%, -50%)",borderRight:"6px solid #1B2631 "},text_right:{position:"absolute",right:"15%",top:"50%"},text_left:{position:"absolute",left:"15%",top:"50%"},text_down:{position:"absolute",right:"50%",bottom:"15%",transform:"translate(50%, 50%)"},text_up:{position:"absolute",right:"50%",top:"15%",transform:"translate(50%, -50%)"},icon:{position:"absolute",width:"25%",height:"25%",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},centerContent:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}})),Kk=({device:t,data:e=[10,15,11,0,12,20],sensors:n={down:[0,15],front:[0,15],left:[0,12],back:[0,12],right:[0,12],up:[0,20]},front_view:r=!1,test:i=!1})=>{const o=dut(),[a,s]=W.useState(0),[l,c]=W.useState(0),[h,p]=W.useState(0),[g,v]=W.useState(0);W.useEffect(()=>{r?(n.hasOwnProperty("down")&&v(40-40*e[0]/n.down[1]),n.hasOwnProperty("left")&&c(40-40*e[2]/n.left[1]),n.hasOwnProperty("right")&&s(40-40*e[4]/n.right[1]),n.hasOwnProperty("up")&&p(40-40*e[5]/n.up[1])):(n.hasOwnProperty("front")&&p(40-40*e[1]/n.front[1]),n.hasOwnProperty("left")&&s(40-40*e[2]/n.left[1]),n.hasOwnProperty("back")&&v(40-40*e[3]/n.down[1]),n.hasOwnProperty("right")&&c(40-50*e[4]/n.right[1]))},[e,t,n]);const x=()=>{s(M=>M-10),c(M=>M-10),p(M=>M-10),v(M=>M-10)},b=()=>{s(M=>M+10),c(M=>M+10),p(M=>M+10),v(M=>M+10)};return F.jsxs("div",{style:{flex:1,margin:"10px"},children:[F.jsxs("div",{className:o.root,children:[F.jsx("div",{className:o.box_left,style:{left:`${a}%`}}),F.jsx("div",{className:o.box_right,style:{right:`${l}%`}}),F.jsx("div",{className:o.box_up,style:{top:`${h}%`}}),F.jsx("div",{className:o.box_down,style:{bottom:`${g}%`}}),!r&&F.jsxs(F.Fragment,{children:[a<50&&F.jsxs("div",{className:o.text_left,children:[" ",`${e[2]}m`]}),l<50&&F.jsxs("div",{className:o.text_right,children:[" ",`${e[4]}m`]}),h<50&&F.jsxs("div",{className:o.text_up,children:[" ",`${e[1]}m`]}),g<50&&F.jsxs("div",{className:o.text_down,children:[" ",`${e[3]}m`]}),F.jsx("img",{className:o.icon,src:SM[AP("dji_M210_melodic")],alt:""})]}),r&&F.jsxs(F.Fragment,{children:[a<50&&F.jsxs("div",{className:o.text_left,children:[" ",`${e[4]}m`]}),l<50&&F.jsxs("div",{className:o.text_right,children:[" ",`${e[2]}m`]}),h<50&&F.jsxs("div",{className:o.text_up,children:[" ",`${e[5]}m`]}),g<50&&F.jsxs("div",{className:o.text_down,children:[" ",`${e[0]}m`]}),F.jsx("img",{className:o.icon,src:_0e[AP("dji_M210_melodic")],alt:""})]})]}),!r&&F.jsx(Bn,{align:"center",children:"Top view"}),r&&F.jsx(Bn,{align:"center",children:"Front view"}),i&&F.jsxs("div",{children:[F.jsx("button",{onClick:x,children:"Move Left"}),F.jsx("button",{onClick:b,children:"Move Right"})]})]})};var _ce={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(a_,function(){var n=1e3,r=6e4,i=36e5,o="millisecond",a="second",s="minute",l="hour",c="day",h="week",p="month",g="quarter",v="year",x="date",b="Invalid Date",M=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,w=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,T={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(ie){var ce=["th","st","nd","rd"],fe=ie%100;return"["+ie+(ce[(fe-20)%10]||ce[fe]||ce[0])+"]"}},C=function(ie,ce,fe){var xe=String(ie);return!xe||xe.length>=ce?ie:""+Array(ce+1-xe.length).join(fe)+ie},I={s:C,z:function(ie){var ce=-ie.utcOffset(),fe=Math.abs(ce),xe=Math.floor(fe/60),te=fe%60;return(ce<=0?"+":"-")+C(xe,2,"0")+":"+C(te,2,"0")},m:function ie(ce,fe){if(ce.date()<fe.date())return-ie(fe,ce);var xe=12*(fe.year()-ce.year())+(fe.month()-ce.month()),te=ce.clone().add(xe,p),he=fe-te<0,ve=ce.clone().add(xe+(he?-1:1),p);return+(-(xe+(fe-te)/(he?te-ve:ve-te))||0)},a:function(ie){return ie<0?Math.ceil(ie)||0:Math.floor(ie)},p:function(ie){return{M:p,y:v,w:h,d:c,D:x,h:l,m:s,s:a,ms:o,Q:g}[ie]||String(ie||"").toLowerCase().replace(/s$/,"")},u:function(ie){return ie===void 0}},R="en",O={};O[R]=T;var B="$isDayjsObject",U=function(ie){return ie instanceof le||!(!ie||!ie[B])},Z=function ie(ce,fe,xe){var te;if(!ce)return R;if(typeof ce=="string"){var he=ce.toLowerCase();O[he]&&(te=he),fe&&(O[he]=fe,te=he);var ve=ce.split("-");if(!te&&ve.length>1)return ie(ve[0])}else{var ze=ce.name;O[ze]=ce,te=ze}return!xe&&te&&(R=te),te||!xe&&R},j=function(ie,ce){if(U(ie))return ie.clone();var fe=typeof ce=="object"?ce:{};return fe.date=ie,fe.args=arguments,new le(fe)},X=I;X.l=Z,X.i=U,X.w=function(ie,ce){return j(ie,{locale:ce.$L,utc:ce.$u,x:ce.$x,$offset:ce.$offset})};var le=function(){function ie(fe){this.$L=Z(fe.locale,null,!0),this.parse(fe),this.$x=this.$x||fe.x||{},this[B]=!0}var ce=ie.prototype;return ce.parse=function(fe){this.$d=function(xe){var te=xe.date,he=xe.utc;if(te===null)return new Date(NaN);if(X.u(te))return new Date;if(te instanceof Date)return new Date(te);if(typeof te=="string"&&!/Z$/i.test(te)){var ve=te.match(M);if(ve){var ze=ve[2]-1||0,Ue=(ve[7]||"0").substring(0,3);return he?new Date(Date.UTC(ve[1],ze,ve[3]||1,ve[4]||0,ve[5]||0,ve[6]||0,Ue)):new Date(ve[1],ze,ve[3]||1,ve[4]||0,ve[5]||0,ve[6]||0,Ue)}}return new Date(te)}(fe),this.init()},ce.init=function(){var fe=this.$d;this.$y=fe.getFullYear(),this.$M=fe.getMonth(),this.$D=fe.getDate(),this.$W=fe.getDay(),this.$H=fe.getHours(),this.$m=fe.getMinutes(),this.$s=fe.getSeconds(),this.$ms=fe.getMilliseconds()},ce.$utils=function(){return X},ce.isValid=function(){return this.$d.toString()!==b},ce.isSame=function(fe,xe){var te=j(fe);return this.startOf(xe)<=te&&te<=this.endOf(xe)},ce.isAfter=function(fe,xe){return j(fe)<this.startOf(xe)},ce.isBefore=function(fe,xe){return this.endOf(xe)<j(fe)},ce.$g=function(fe,xe,te){return X.u(fe)?this[xe]:this.set(te,fe)},ce.unix=function(){return Math.floor(this.valueOf()/1e3)},ce.valueOf=function(){return this.$d.getTime()},ce.startOf=function(fe,xe){var te=this,he=!!X.u(xe)||xe,ve=X.p(fe),ze=function(Fe,lt){var Qe=X.w(te.$u?Date.UTC(te.$y,lt,Fe):new Date(te.$y,lt,Fe),te);return he?Qe:Qe.endOf(c)},Ue=function(Fe,lt){return X.w(te.toDate()[Fe].apply(te.toDate("s"),(he?[0,0,0,0]:[23,59,59,999]).slice(lt)),te)},rt=this.$W,Be=this.$M,st=this.$D,ct="set"+(this.$u?"UTC":"");switch(ve){case v:return he?ze(1,0):ze(31,11);case p:return he?ze(1,Be):ze(0,Be+1);case h:var Dt=this.$locale().weekStart||0,zt=(rt<Dt?rt+7:rt)-Dt;return ze(he?st-zt:st+(6-zt),Be);case c:case x:return Ue(ct+"Hours",0);case l:return Ue(ct+"Minutes",1);case s:return Ue(ct+"Seconds",2);case a:return Ue(ct+"Milliseconds",3);default:return this.clone()}},ce.endOf=function(fe){return this.startOf(fe,!1)},ce.$set=function(fe,xe){var te,he=X.p(fe),ve="set"+(this.$u?"UTC":""),ze=(te={},te[c]=ve+"Date",te[x]=ve+"Date",te[p]=ve+"Month",te[v]=ve+"FullYear",te[l]=ve+"Hours",te[s]=ve+"Minutes",te[a]=ve+"Seconds",te[o]=ve+"Milliseconds",te)[he],Ue=he===c?this.$D+(xe-this.$W):xe;if(he===p||he===v){var rt=this.clone().set(x,1);rt.$d[ze](Ue),rt.init(),this.$d=rt.set(x,Math.min(this.$D,rt.daysInMonth())).$d}else ze&&this.$d[ze](Ue);return this.init(),this},ce.set=function(fe,xe){return this.clone().$set(fe,xe)},ce.get=function(fe){return this[X.p(fe)]()},ce.add=function(fe,xe){var te,he=this;fe=Number(fe);var ve=X.p(xe),ze=function(Be){var st=j(he);return X.w(st.date(st.date()+Math.round(Be*fe)),he)};if(ve===p)return this.set(p,this.$M+fe);if(ve===v)return this.set(v,this.$y+fe);if(ve===c)return ze(1);if(ve===h)return ze(7);var Ue=(te={},te[s]=r,te[l]=i,te[a]=n,te)[ve]||1,rt=this.$d.getTime()+fe*Ue;return X.w(rt,this)},ce.subtract=function(fe,xe){return this.add(-1*fe,xe)},ce.format=function(fe){var xe=this,te=this.$locale();if(!this.isValid())return te.invalidDate||b;var he=fe||"YYYY-MM-DDTHH:mm:ssZ",ve=X.z(this),ze=this.$H,Ue=this.$m,rt=this.$M,Be=te.weekdays,st=te.months,ct=te.meridiem,Dt=function(lt,Qe,ge,et){return lt&&(lt[Qe]||lt(xe,he))||ge[Qe].slice(0,et)},zt=function(lt){return X.s(ze%12||12,lt,"0")},Fe=ct||function(lt,Qe,ge){var et=lt<12?"AM":"PM";return ge?et.toLowerCase():et};return he.replace(w,function(lt,Qe){return Qe||function(ge){switch(ge){case"YY":return String(xe.$y).slice(-2);case"YYYY":return X.s(xe.$y,4,"0");case"M":return rt+1;case"MM":return X.s(rt+1,2,"0");case"MMM":return Dt(te.monthsShort,rt,st,3);case"MMMM":return Dt(st,rt);case"D":return xe.$D;case"DD":return X.s(xe.$D,2,"0");case"d":return String(xe.$W);case"dd":return Dt(te.weekdaysMin,xe.$W,Be,2);case"ddd":return Dt(te.weekdaysShort,xe.$W,Be,3);case"dddd":return Be[xe.$W];case"H":return String(ze);case"HH":return X.s(ze,2,"0");case"h":return zt(1);case"hh":return zt(2);case"a":return Fe(ze,Ue,!0);case"A":return Fe(ze,Ue,!1);case"m":return String(Ue);case"mm":return X.s(Ue,2,"0");case"s":return String(xe.$s);case"ss":return X.s(xe.$s,2,"0");case"SSS":return X.s(xe.$ms,3,"0");case"Z":return ve}return null}(lt)||ve.replace(":","")})},ce.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},ce.diff=function(fe,xe,te){var he,ve=this,ze=X.p(xe),Ue=j(fe),rt=(Ue.utcOffset()-this.utcOffset())*r,Be=this-Ue,st=function(){return X.m(ve,Ue)};switch(ze){case v:he=st()/12;break;case p:he=st();break;case g:he=st()/3;break;case h:he=(Be-rt)/6048e5;break;case c:he=(Be-rt)/864e5;break;case l:he=Be/i;break;case s:he=Be/r;break;case a:he=Be/n;break;default:he=Be}return te?he:X.a(he)},ce.daysInMonth=function(){return this.endOf(p).$D},ce.$locale=function(){return O[this.$L]},ce.locale=function(fe,xe){if(!fe)return this.$L;var te=this.clone(),he=Z(fe,xe,!0);return he&&(te.$L=he),te},ce.clone=function(){return X.w(this.$d,this)},ce.toDate=function(){return new Date(this.valueOf())},ce.toJSON=function(){return this.isValid()?this.toISOString():null},ce.toISOString=function(){return this.$d.toISOString()},ce.toString=function(){return this.$d.toUTCString()},ie}(),me=le.prototype;return j.prototype=me,[["$ms",o],["$s",a],["$m",s],["$H",l],["$W",c],["$M",p],["$y",v],["$D",x]].forEach(function(ie){me[ie[1]]=function(ce){return this.$g(ce,ie[0],ie[1])}}),j.extend=function(ie,ce){return ie.$i||(ie(ce,le,j),ie.$i=!0),j},j.locale=Z,j.isDayjs=U,j.unix=function(ie){return j(1e3*ie)},j.en=O[R],j.Ls=O,j.p={},j})})(_ce);var fut=_ce.exports;const gK=_i(fut),hut=(t,e,n,r,i,o,a)=>{const s=mr(l=>l.devices.items);W.useEffect(()=>{const l=Object.values(s).filter(c=>!e.statuses.length||e.statuses.includes(c.status)).filter(c=>{const h=t.toLowerCase();return[c.name,c.uniqueId,c.phone,c.model,c.contact].some(p=>p&&p.toLowerCase().includes(h))});switch(n){case"name":l.sort((c,h)=>c.name.localeCompare(h.name));break;case"lastUpdate":l.sort((c,h)=>{const p=c.lastUpdate?gK(c.lastUpdate).valueOf():0;return(h.lastUpdate?gK(h.lastUpdate).valueOf():0)-p});break}o(l),a(r?l.map(c=>i[c.id]).filter(Boolean):Object.values(i))},[t,e,n,r,s,i,o,a])},put=ri(t=>({card:{pointerEvents:"auto"},media:{height:"20vw",width:"100%",background:"black"},media1:{width:"100%",height:"100%",display:"flex",justifyContent:"flex-end",alignItems:"flex-start",background:"black"},gruopBtn:{float:"right",height:"40px"},mediaButton:{color:t.palette.colors.white,mixBlendMode:"difference"},tittle:{display:"block",width:"calc( 100% - 60pt )",paddingLeft:"15pt",paddingTop:"10pt",paddingBottom:"10pt",textAlign:"left"},root:{pointerEvents:"none"},root_max:{pointerEvents:"none"}})),Zk=({deviceId:t,deviceIp:e="127.0.0.1",camera_src:n="video0",onClose:r})=>{const i=put(),o=t?mr(h=>h.devices.items[t]):{name:"test"},a="http://"+e+":8889/"+n;W.useState(!1);let s=i.card,l=i.root_max,c=i.media;return W.useRef(),F.jsx("div",{className:l,children:o&&F.jsxs(Oh,{className:s,children:[F.jsx("div",{children:F.jsx("div",{className:i.tittle,children:"Id: "+o.name})}),F.jsx("iframe",{src:a,className:c})]})})},mut=ri(t=>({card:{pointerEvents:"auto"},media:{width:"100%",height:"20vw",justifyContent:"flex-end",alignItems:"flex-start"},mediaButton:{color:t.palette.colors.white,mixBlendMode:"difference"},tittle:{display:"block",width:"calc( 100% - 60pt )",paddingLeft:"15pt",paddingTop:"10pt",paddingBottom:"10pt",textAlign:"left"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(1,1,0,2)},root:{pointerEvents:"none"},root_max:{pointerEvents:"none"}})),bce=({deviceId:t,datacamera:e,onClose:n})=>{const r=mut(),[i,o]=W.useState(YP),a=mr(h=>h.devices.items[t]);W.useState(!1);let s=r.card,l=r.root_max;const c=mr(h=>h.data.camera[t]);return W.useEffect(()=>{t!=null&&(c!=null?o("data:image/bgr8;base64,"+c.camera):o(YP))},[c]),F.jsx("div",{className:l,children:a&&F.jsxs(Oh,{className:s,children:[F.jsx("div",{children:F.jsxs("div",{className:r.tittle,children:["Image "+a.name," "]})}),F.jsx("img",{src:i,className:r.media})]})})},gut=()=>W.useMemo(()=>({custom:[{key:"data",name:"commandData",type:"string"}],positionPeriodic:[{key:"frequency",name:"commandFrequency",type:"number"}],setTimezone:[{key:"timezone",name:"commandTimezone",type:"string"}],sendSms:[{key:"phone",name:"commandPhone",type:"string"},{key:"message",name:"commandMessage",type:"string"}],message:[{key:"message",name:"commandMessage",type:"string"}],sendUssd:[{key:"phone",name:"commandPhone",type:"string"}],sosNumber:[{key:"index",name:"commandIndex",type:"number"},{key:"phone",name:"commandPhone",type:"string"}],silenceTime:[{key:"data",name:"commandData",type:"string"}],setPhonebook:[{key:"data",name:"commandData",type:"string"}],voiceMessage:[{key:"data",name:"commandData",type:"string"}],outputControl:[{key:"index",name:"commandIndex",type:"number"},{key:"data",name:"commandData",type:"string"}],voiceMonitoring:[{key:"enable",name:"commandEnable",type:"boolean"}],setAgps:[{key:"enable",name:"commandEnable",type:"boolean"}],setIndicator:[{key:"data",name:"commandData",type:"string"}],configuration:[{key:"data",name:"commandData",type:"string"}],setConnection:[{key:"server",name:"commandServer",type:"string"},{key:"port",name:"commandPort",type:"number"}],setOdometer:[{key:"data",name:"commandData",type:"string"}],modePowerSaving:[{key:"enable",name:"commandEnable",type:"boolean"}],modeDeepSleep:[{key:"enable",name:"commandEnable",type:"boolean"}],alarmGeofence:[{key:"radius",name:"commandRadius",type:"number"}],alarmBattery:[{key:"enable",name:"commandEnable",type:"boolean"}],alarmSos:[{key:"enable",name:"commandEnable",type:"boolean"}],alarmRemove:[{key:"enable",name:"commandEnable",type:"boolean"}],alarmClock:[{key:"data",name:"commandData",type:"string"}],alarmSpeed:[{key:"data",name:"commandData",type:"string"}],alarmFall:[{key:"enable",name:"commandEnable",type:"boolean"}],alarmVibration:[{key:"data",name:"commandData",type:"string"}],SetupCamera:[{key:"type",name:"Type",type:"number"},{key:"enable",name:"Enable",type:"number"}],Gimbal:[{key:"roll",name:"Roll",type:"number"},{key:"pitch",name:"Pitch",type:"number"},{key:"yaw",name:"Yaw",type:"number"}],GimbalPitch:[{key:"pitch",name:"Pitch",type:"number"}],treat:[{key:"enable",name:"commandEnable",type:"boolean"}],setupcamera:[{key:"cameraType",name:"cameraType",type:"number"},{key:"start",name:"start",type:"number"}]}),[]),yut=({deviceId:t,item:e,setItem:n})=>{const r=mr(s=>s.session.server.textEnabled),i=gut(),[o,a]=W.useState([]);return W.useEffect(()=>{e&&e.type?a(i[e.type]||[]):a([])},[i,e]),F.jsxs(W.Fragment,{children:[F.jsx(Ju,{value:e.type||"",onChange:s=>n({...e,type:s.target.value,attributes:{}}),endpoint:t?`/api/commands/types?${new URLSearchParams({deviceId:t}).toString()}`:"/api/commands/types",keyGetter:s=>s.type,titleGetter:s=>Zoe("command_",s.type),label:"Command type",getItems:s=>console.log(s)}),o.map(({key:s,name:l,type:c})=>c==="boolean"?F.jsx(R9,{control:F.jsx(k9,{checked:e.attributes[s],onChange:h=>{const p={...e,attributes:{...e.attributes}};p.attributes[s]=h.target.checked,n(p)}}),label:l}):F.jsx(gi,{type:c==="number"?"number":"text",value:e.attributes[s],onChange:h=>{const p={...e,attributes:{...e.attributes}};p.attributes[s]=c==="number"?Number(h.target.value):h.target.value,n(p)},label:l})),r&&F.jsx(R9,{control:F.jsx(k9,{checked:e.textChannel,onChange:s=>n({...e,textChannel:s.target.checked})}),label:"commandSendSms"})]},"sdf")};ri(t=>({root:{height:"100%",display:"flex",flexDirection:"column"},content:{overflow:"auto",paddingTop:t.spacing(2),paddingBottom:t.spacing(2)},buttons:{marginTop:t.spacing(2),marginBottom:t.spacing(2),display:"flex",justifyContent:"space-evenly","& > *":{flexBasis:"33%"}},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)}}));const vut=ri(t=>({root:{pointerEvents:"none",position:"fixed",zIndex:6,left:"50%",top:"20%",transform:"translateX(-50%)"},card:{pointerEvents:"auto",width:t.dimensions.popupMaxWidth},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(1,1,0,2)},content:{overflow:"auto",paddingTop:t.spacing(2),paddingBottom:t.spacing(2)},buttons:{marginTop:t.spacing(2),marginBottom:t.spacing(2),display:"flex",justifyContent:"space-evenly","& > *":{flexBasis:"33%"}},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)}})),xut=({id:t,onClose:e})=>{const n=vut(),[r,i]=W.useState({}),[o,a]=W.useState(0),s=fre(async()=>{let c;if(o){const p=await fetch(`/api/commands/${o}`);if(p.ok)c=await p.json();else throw Error(await p.text())}else c=r;c.deviceId=parseInt(t,10);const h=await fetch("/api/commands/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(h.ok)console.log("ok");else throw Error(await h.text())}),l=()=>o||r&&r.type;return F.jsx("div",{className:n.root,children:F.jsxs(Oh,{elevation:3,className:n.card,children:[F.jsxs("div",{className:n.header,children:[F.jsx(Bn,{variant:"body2",color:"textSecondary",children:"Send Commands"}),F.jsx(wr,{size:"small",onClick:e,onTouchStart:e,children:F.jsx(Ah,{fontSize:"small"})})]}),F.jsxs(d1,{maxWidth:"xs",className:n.container,children:[F.jsxs(pl,{defaultExpanded:!0,children:[F.jsx(gl,{expandIcon:F.jsx(Da,{}),children:F.jsx(Bn,{variant:"subtitle1",children:"Command"})}),F.jsx(ml,{className:n.details,children:!o&&F.jsx(yut,{deviceId:t,item:r,setItem:i})})]}),F.jsxs("div",{className:n.buttons,children:[F.jsx(Gr,{type:"button",color:"primary",variant:"outlined",onClick:e,children:"Cancel"}),F.jsx(Gr,{type:"button",color:"primary",variant:"contained",onClick:s,disabled:!l(),children:"Send"})]})]})]})})},_ut=ri(t=>({root:{margin:"0",height:"100vh",display:"flex",flexDirection:"column"},content:{overflow:"auto",paddingTop:t.spacing(2),paddingBottom:t.spacing(2)},buttons:{marginTop:t.spacing(2),marginBottom:t.spacing(2),display:"flex",justifyContent:"space-evenly","& > *":{flexBasis:"33%"}},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)}})),but=({device:t,myhostname:e})=>{const n=t.camera&&t.camera.length>0?t.camera[0]:{type:""};return F.jsxs(F.Fragment,{children:[n.type==="WebRTC"&&F.jsx(Zk,{deviceId:t.id,deviceIp:e,devicename:t.name,camera_src:t.name+"_"+n.source,onClose:()=>{console.log("cerrar ")}}),n.type==="WebRTC_env"&&F.jsx(Zk,{deviceId:t.id,deviceIp:t.ip,devicename:t.name,camera_src:n.source,onClose:()=>{console.log("cerrar ")}}),n.type==="Websocket"&&F.jsx(bce,{deviceId:t.id,datacamera:null,onClose:()=>console.log("cerrar ")})]})},wut=()=>{const t=_ut(),e=rm(),{id:n}=Cge(),[r,i]=Ze.useState(0),[o,a]=W.useState(),[s,l]=W.useState({}),c=mr(me=>me.data.positions),h=mr(me=>me.devices.items),p=mr(me=>me.session.markers);W.useState(0);const[g,v]=W.useState([]),x=`${window.location.hostname}`,[b,M]=W.useState([]),[w,T]=W.useState([]),[C,I]=W.useState(""),[R,O]=IA("filter",{statuses:[],groups:[]}),[B,U]=IA("filterSort",""),[Z,j]=IA("filterMap",!1),[X,le]=W.useState(!1);return hut(C,R,B,Z,c,T,M),W.useEffect(()=>{v(p)},[p]),W.useEffect(()=>{n&&a(c[n])},[n,c]),W.useEffect(()=>{n&&(l(h[n]),console.log(h[n]))},[n]),F.jsxs("div",{className:t.root,children:[F.jsx(aE,{position:"sticky",color:"inherit",children:F.jsxs(vy,{children:[F.jsx(wr,{color:"inherit",edge:"start",sx:{mr:2},onClick:()=>e(-1),children:F.jsx(E1,{})}),F.jsx(Bn,{variant:"h6",children:s.name})]})}),F.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[F.jsxs("div",{style:{flex:1},children:[F.jsx("div",{style:{height:"50vh"},children:F.jsx(wse,{filteredPositions:b,markers:g,selectedPosition:n,filteredMissiondeviceid:n})}),F.jsx("div",{children:Object.keys(s).length>0&&F.jsx(but,{device:s,myhostname:x})})]}),F.jsxs("div",{style:{flex:1,justifyContent:"space-between",display:"flex",flexDirection:"column"},children:[F.jsx("div",{style:{height:"50vh"},className:t.content,children:F.jsx(d1,{maxWidth:"false",children:F.jsx(Ls,{children:F.jsxs(hR,{"aria-label":"simple table",children:[F.jsx(ej,{children:F.jsxs(Gg,{children:[F.jsx(rs,{sx:{fontWeight:"bold"},children:"Attributes"}),F.jsx(rs,{sx:{fontWeight:"bold"},children:"Value"})]})}),F.jsxs(mR,{children:[o&&Object.getOwnPropertyNames(o).filter(me=>me!=="attributes").map(me=>F.jsxs(Gg,{children:[F.jsx(rs,{children:me}),F.jsx(rs,{children:F.jsx(qF,{position:o,property:me})})]},me)),o&&Object.getOwnPropertyNames(o.attributes).map(me=>F.jsxs(Gg,{children:[F.jsx(rs,{children:me}),F.jsx(rs,{children:F.jsx(qF,{position:o,attribute:me})})]},me))]})]})})})}),F.jsx("div",{style:{padding:"15px",margin:"10px"},children:F.jsxs(Ls,{children:[F.jsx(Bn,{align:"center",variant:"h5",component:"div",style:{padding:"15px"},children:"Avoidance sensor"}),o&&o.attributes&&F.jsxs("div",{style:{display:"flex",flex:1},children:[F.jsx(Kk,{front_view:!0,data:o.attributes.obstacle_info}),F.jsx(Kk,{front_view:!1,data:o.attributes.obstacle_info})]})]})}),F.jsx("div",{style:{padding:"15px",marginTop:"auto"},children:F.jsx(Ls,{children:F.jsxs(MEe,{showLabels:!0,value:r,onChange:(me,ie)=>{i(ie)},children:[F.jsx(FT,{label:"Edit",icon:F.jsx(SU,{})}),F.jsx(FT,{label:"Result",icon:F.jsx(XR,{})}),F.jsx(FT,{label:"Command",icon:F.jsx(bU,{}),onClick:()=>le(!0)}),F.jsx(FT,{label:"Delete",icon:F.jsx(yu,{})})]})})})]})]}),X&&F.jsx(xut,{id:n,onClose:()=>le(!1)})]})},Sut=ri(()=>({root:{height:"100%"},sidebarStyle:{pointerEvents:"none",display:"flex",flexDirection:"column",position:"fixed",left:0,top:"88px",height:"calc(100% - 88px)",width:"360px",margin:"0px",zIndex:3},middleStyle:{flex:1,display:"grid"},contentListStyle:{pointerEvents:"auto",gridArea:"1 / 1",zIndex:4}})),Mut=(t,e)=>{switch(t){case"success":toastProperties={id:list.length+1,title:"Success",description:e,backgroundColor:"#5cb85c"};break;case"danger":toastProperties={id:list.length+1,title:"Danger",description:e,backgroundColor:"#d9534f"};break;case"info":toastProperties={id:list.length+1,title:"Info",description:e,backgroundColor:"#5bc0de"};break;case"warning":toastProperties={id:list.length+1,title:"Warning",description:e,backgroundColor:"#f0ad4e"};break;default:toastProperties=[]}setList([...list,toastProperties])},Eut=()=>{const[t,e]=W.useState(!1),n=mr(a=>a.devices.items);let r=Object.values(n);const i=`${window.location.hostname}`,o=Sut();return F.jsx("div",{className:o.root,children:F.jsxs(xE,{notification:Mut,children:[F.jsx(OR,{}),F.jsx(_E,{}),F.jsx("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 90px)"},children:F.jsx(ws,{component:"div",sx:{overflow:"auto"},style:{backgroundColor:"#000000",width:"calc(100vw - 360px)",height:"calc(100vh - 90px",padding:"20px",float:"right"},children:F.jsx(N9,{container:!0,spacing:2,justifyContent:"space-around",children:Ze.Children.toArray(Object.values(n).map(a=>F.jsx(W.Fragment,{children:a.camera.map((s,l)=>F.jsxs(N9,{item:!0,xs:12,sm:6,children:[s.type==="WebRTC"&&F.jsx(Zk,{deviceId:a.id,deviceIp:i,devicename:a.name,camera_src:a.name+"_"+s.source,onClose:()=>{console.log("cerrar ")}}),s.type==="WebRTC_env"&&F.jsx(Zk,{deviceId:a.id,deviceIp:a.ip,devicename:a.name,camera_src:s.source,onClose:()=>{console.log("cerrar ")}}),s.type==="Websocket"&&F.jsx(bce,{deviceId:a.id,datacamera:null,onClose:()=>console.log("cerrar ")})]},"card-"+a.id+"-"+l))},"dev"+a.id)))})})}),F.jsx("div",{className:o.sidebarStyle,children:F.jsx("div",{className:o.middleStyle,children:F.jsxs(Ls,{square:!0,className:o.contentListStyle,children:[F.jsx(xse,{SetAddUAVOpen:e}),F.jsx(rse,{devices:r})]})})})]})})},Tut=ri(t=>({root:{height:"100%",display:"flex",flexDirection:"column"},content:{overflow:"auto",paddingTop:t.spacing(2),paddingBottom:t.spacing(2)},buttons:{marginTop:t.spacing(2),marginBottom:t.spacing(2),display:"flex",justifyContent:"space-evenly","& > *":{flexBasis:"33%"}},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)}})),sN=()=>{const t=Tut(),e=rm(),[n,r]=W.useState([]),[i,o]=W.useState(),a=mr(l=>l.events.items),s=mr(l=>l.devices.items);return W.useEffect(()=>{r(a)},[a]),W.useEffect(()=>{o({...s,"-1":{name:"GCS"}})},[s]),mr(l=>{if(n){const c=l.devices.items[n.deviceId];if(c)return c.name}return null}),F.jsxs("div",{className:t.root,children:[F.jsx(aE,{position:"sticky",color:"inherit",children:F.jsxs(vy,{children:[F.jsx(wr,{color:"inherit",edge:"start",sx:{mr:2},onClick:()=>e(-1),children:F.jsx(E1,{})}),F.jsx(Bn,{variant:"h6",children:"Events"})]})}),F.jsx("div",{className:t.content,children:F.jsx(d1,{maxWidth:"sm",children:F.jsx(Ls,{children:F.jsxs(hR,{children:[F.jsx(ej,{children:F.jsxs(Gg,{children:[F.jsx(rs,{children:"UAV"}),F.jsx(rs,{children:"Fecha"}),F.jsx(rs,{children:"Valor"})]})}),F.jsx(mR,{children:n&&n.map(l=>F.jsxs(Gg,{children:[F.jsx(rs,{children:i[l.deviceId].name}),F.jsx(rs,{children:l.eventTime}),F.jsx(rs,{children:l.attributes.message})]},l.id))})]})})})})]})},Cut=()=>F.jsxs("div",{children:[F.jsx("h3",{children:"Move the Square"}),F.jsx(Kk,{}),F.jsx(Eb,{}),F.jsx(Kk,{front_view:!0})]}),wce=W.createContext(null);function Aut(){const[t,e]=W.useState(null);return W.useEffect(()=>{e(`mui-p-${Math.round(Math.random()*1e5)}`)},[]),t}function Put(t){const{children:e,value:n}=t,r=Aut(),i=W.useMemo(()=>({idPrefix:r,value:n}),[r,n]);return F.jsx(wce.Provider,{value:i,children:e})}function Sce(){return W.useContext(wce)}function Mce(t,e){const{idPrefix:n}=t;return n===null?null:`${t.idPrefix}-P-${e}`}function Ece(t,e){const{idPrefix:n}=t;return n===null?null:`${t.idPrefix}-T-${e}`}const kut=["children"],Iut=W.forwardRef(function(e,n){const{children:r}=e,i=on(e,kut),o=Sce();if(o===null)throw new TypeError("No TabContext provided");const a=W.Children.map(r,s=>W.isValidElement(s)?W.cloneElement(s,{"aria-controls":Mce(o,s.props.value),id:Ece(o,s.props.value)}):null);return F.jsx(dre,de({},i,{ref:n,value:o.value,children:a}))}),Rut=Iut;function Out(t){return Vn("MuiTabPanel",t)}Wn("MuiTabPanel",["root"]);const Lut=["children","className","value"],Dut=t=>{const{classes:e}=t;return Hn({root:["root"]},Out,e)},Nut=tn("div",{name:"MuiTabPanel",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({padding:t.spacing(3)})),zut=W.forwardRef(function(e,n){const r=Jn({props:e,name:"MuiTabPanel"}),{children:i,className:o,value:a}=r,s=on(r,Lut),l=de({},r),c=Dut(l),h=Sce();if(h===null)throw new TypeError("No TabContext provided");const p=Mce(h,a),g=Ece(h,a);return F.jsx(Nut,de({"aria-labelledby":g,className:Kt(c.root,o),hidden:a!==h.value,id:p,ref:n,role:"tabpanel",ownerState:l},s,{children:a===h.value&&i}))}),aN=zut,Fut=ri(t=>({list:{maxHeight:"100%",overflow:"auto"},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)},attributeName:{display:"inline-block",width:"40%",textAlign:"left",verticalAlign:"middle"},attribute:{display:"inline-block",width:"58%"},actionValue:{display:"inline-block",width:"40%"}})),Tce=({markers:t,setMarkers:e,type:n="Base"})=>{const r=Fut(),[i,o]=W.useState(!1),[a,s]=W.useState(!0),l=v=>(x,b)=>{o(b?v:!1)},c=()=>{let v=gt.getCenter(),x=JSON.parse(JSON.stringify(t));x.push({latitude:v.lat,longitude:v.lng}),e(x,{meth:"add",index:-1})},h=v=>{let x=JSON.parse(JSON.stringify(t));x.splice(v,1),e(x,{meth:"del",index:v})},p=(v,x)=>{let b=JSON.parse(JSON.stringify(t));b[v].latitude=x,e(b,{meth:"mod",index:v})},g=(v,x)=>{let b=JSON.parse(JSON.stringify(t));b[v].longitude=x,e(b,{meth:"mod",index:v})};return W.useEffect(()=>{t&&(t.length>0?s(!1):s(!0))},[t]),F.jsx(W.Fragment,{children:a?F.jsx(ws,{textAlign:"center",children:F.jsx(Gr,{variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:c,children:"Create New Base"})}):F.jsxs("div",{className:r.details,children:[Ze.Children.toArray(Object.values(t).map((v,x,b)=>F.jsxs(pl,{expanded:i==="wp "+x,onChange:l("wp "+x),children:[F.jsxs(gl,{expandIcon:F.jsx(Da,{}),children:[F.jsx(Bn,{sx:{width:"33%",flexShrink:0},children:n+" "+x}),F.jsx(wr,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>h(x),children:F.jsx(yu,{})})]}),F.jsx(ml,{className:r.details,children:i==="wp "+x&&F.jsx(W.Fragment,{children:F.jsxs(ws,{component:"form",sx:{"& .MuiTextField-root":{m:1}},children:[F.jsx("div",{children:F.jsx(Bn,{variant:"subtitle1",style:{display:"inline"},children:"Position"})}),F.jsx(gi,{required:!0,label:"Latitude ",type:"number",sx:{width:"15ch"},variant:"standard",inputProps:{maxLength:8,step:1e-4},value:v.latitude,onChange:M=>{p(x,M.target.value)}}),F.jsx(gi,{required:!0,label:"Longitud ",type:"number",variant:"standard",sx:{width:"15ch"},inputProps:{maxLength:8,step:1e-4},value:v.longitude,onChange:M=>{g(x,M.target.value)}})]})})})]}))),F.jsx(ws,{textAlign:"center",children:F.jsxs(Gr,{variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:c,children:["Create new ",n]})})]})})},But=ri(t=>({list:{maxHeight:"100%",overflow:"auto"},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)},attributeName:{display:"inline-block",width:"40%",textAlign:"left",verticalAlign:"middle"},attribute:{display:"inline-block",width:"58%"},actionValue:{display:"inline-block",width:"40%"}})),$ut=({data:t,param:e,setData:n,type:r="Base"})=>{const i=But(),[o,a]=W.useState(!1),[s,l]=W.useState(!1),c=p=>(g,v)=>{a(v?p:!1)},h=(p=0,g="mission",v,x)=>{let b=JSON.parse(JSON.stringify(t));b[p][g][v]=Number(x),n(b)};return W.useEffect(()=>{t&&(t.length>0?l(!1):l(!0)),console.log(t),console.log(e)},[t]),F.jsx("div",{children:s?F.jsx(ws,{textAlign:"center",children:F.jsx(Bn,{children:"dont exits base"})}):F.jsx("div",{className:i.details,children:Ze.Children.toArray(Object.values(t).map((p,g,v)=>F.jsxs(pl,{expanded:o===`wp ${g}`,onChange:c(`wp ${g}`),children:[F.jsxs(gl,{expandIcon:F.jsx(Da,{}),children:[F.jsx(Bn,{sx:{width:"33%",flexShrink:0},children:`${r} ${g}`}),F.jsx(wr,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>console.log("button"),children:F.jsx(Sse,{})})]}),F.jsx(ml,{className:i.details,children:o===`wp ${g}`&&F.jsxs(ws,{component:"form",sx:{"& .MuiTextField-root":{m:1}},children:[F.jsx("div",{children:F.jsx(Bn,{variant:"subtitle1",style:{display:"inline"},children:"Device params"})}),F.jsx("div",{children:e.devices&&Ze.Children.toArray(Object.keys(e.devices).map((x,b,M)=>F.jsx("div",{children:x=="id"&&F.jsx(Ju,{emptyValue:null,fullWidth:!0,label:"device",value:p.devices[x],endpoint:"/api/devices",keyGetter:w=>w.id,titleGetter:w=>`${w.name} - ${w.category}`,onChange:w=>{h(g,"devices",x,w.target.value)}})})))}),F.jsx("div",{children:F.jsx(Bn,{variant:"subtitle1",style:{display:"inline"},children:"Settings"})}),F.jsx("div",{children:e.settings&&Ze.Children.toArray(Object.keys(e.settings).map(x=>F.jsx("div",{children:e.settings[x].name&&F.jsxs(W.Fragment,{children:[F.jsx(Bn,{variant:"subtitle1",className:i.attributeName,children:e.settings[x].name}),F.jsx("div",{className:i.actionValue,children:F.jsx(gi,{required:!0,fullWidth:!0,type:"number",value:p.settings[x]?p.settings[x]:e.settings[x].default,onChange:b=>{h(g,"settings",x,b.target.value)}})})]})})))})]})})]})))})})};class jut{constructor(){this.markers={},this.select={id:-1}}initMarkers(e){this.markers=JSON.parse(JSON.stringify(e))}getMarkers(){return this.markers}setMarkers(e){this.markers=e}getSelect(){return this.select}setSelect(e){this.select=e}}const Uut=({markers:t,selectMarkers:e=[],showTitles:n,showLines:r,moveMarkers:i,setMarkers:o,SelectItems:a,CreateItems:s,setLocations:l})=>{const c=W.useId(),h=`${c}-lines`,p=`${c}-select`,g=.4,[v,x]=W.useState(new jut),b=()=>gt.getCanvas().style.cursor="move",M=()=>gt.getCanvas().style.cursor="pointer",w=()=>gt.getCanvas().style.cursor="",T=j=>{j.hasOwnProperty("features")?j.features[0].properties.type=="element"&&l({...j.features[0].properties,type:"object"}):l({latitude:j.lngLat.lat,longitude:j.lngLat.lng,groupId:0,id:0,type:"point"})},C=j=>{var ie;gt.getCanvas().style.cursor="grabbing",console.log("on move point"+j.lngLat.lng+"-"+j.lngLat.lat);let X=v.getMarkers(),le=v.getSelect();console.log(X),console.log(le),le.id>=0&&(le.type=="base"&&(X.bases[le.id].latitude=j.lngLat.lat,X.bases[le.id].longitude=j.lngLat.lng),le.type=="element"&&(X.elements[le.groupId].items[le.id].latitude=j.lngLat.lat,X.elements[le.groupId].items[le.id].longitude=j.lngLat.lng));let me=B(X);(ie=gt.getSource(c))==null||ie.setData({type:"FeatureCollection",features:me.map(ce=>({type:"Feature",geometry:{type:"Point",coordinates:[ce.longitude,ce.latitude]},properties:{...ce}}))})},I=j=>{let X=j.lngLat;gt.getCanvas().style.cursor="";let le=v.getMarkers(),me=v.getSelect();console.log(le),console.log(me),me.id>=0&&(me.type=="base"&&(le.bases[me.id].latitude=j.lngLat.lat,le.bases[me.id].longitude=j.lngLat.lng),me.type=="element"&&(le.elements[me.groupId].items[me.id].latitude=j.lngLat.lat,le.elements[me.groupId].items[me.id].longitude=j.lngLat.lng)),v.getSelect({id:-1}),o(le),console.log(`Longitude: ${X.lng} Latitude: ${X.lat}`),gt.off("mousemove",C),gt.off("touchmove",C)},R=j=>{j.preventDefault(),v.setSelect(j.features[0].properties),gt.getCanvas().style.cursor="grab",gt.on("mousemove",C),gt.once("mouseup",I)},O=j=>{j.points.length===1&&(console.log("touch start"),j.preventDefault(),gt.on("touchmove",C),gt.once("touchend",I))};W.useEffect(()=>(gt.addSource(c,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),gt.addSource(h,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),gt.addSource(p,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),gt.addLayer({id:p,type:"symbol",source:p,filter:["!has","point_count"],layout:{"icon-image":"background-{groupId}","icon-size":g*1.2,"icon-allow-overlap":!0,"text-allow-overlap":!0,"text-field":"{title}","text-font":ff(gt),"text-size":14},paint:{"text-color":"white"}}),r&&gt.addLayer({source:h,id:h,type:"line",paint:{"line-color":["get","color"],"line-width":2}}),n?gt.addLayer({id:c,type:"symbol",source:c,filter:["!has","point_count"],layout:{"icon-image":"{image}","icon-size":g,"icon-allow-overlap":!0,"text-field":"{title}","text-allow-overlap":!0,"text-anchor":"bottom","text-offset":[0,-2*g],"text-font":ff(gt),"text-size":12},paint:{"text-halo-color":"white","text-halo-width":1}}):gt.addLayer({id:c,type:"symbol",source:c,layout:{"icon-image":"{image}","icon-size":g,"icon-allow-overlap":!0}}),a&&(gt.on("mouseenter",c,M),gt.on("mouseleave",c,w),gt.on("click",c,T)),s&&gt.on("click",T),i&&(gt.on("mouseenter",c,b),gt.on("mouseleave",c,w),gt.on("mousedown",c,R),gt.on("touchstart",c,O)),()=>{gt.off("click",T),gt.off("click",c,T),gt.off("mouseenter",c,M),gt.off("mouseenter",c,b),gt.off("mouseleave",c,w),gt.off("mousedown",c,R),gt.off("touchstart",c,O),gt.getLayer(c)&&gt.removeLayer(c),gt.getLayer(p)&&gt.removeLayer(p),gt.getLayer(h)&&gt.removeLayer(h),gt.getSource(c)&&gt.removeSource(c),gt.getSource(h)&&gt.removeSource(h),gt.getSource(p)&&gt.removeSource(p)}),[n,r,i,a,s]);function B(j){const X=[];return j.elements&&j.elements.forEach((le,me)=>{le.items.forEach((ie,ce)=>{X.push({...ie,type:"element",groupId:me,id:ce,image:le.type,title:`${me}-${ce}`})})}),j.bases&&j.bases.forEach((le,me)=>{X.push({...le,type:"base",groupId:0,id:me,image:"base",title:`b-${me}`})}),X}function U(j,X){let le=Object.values(j.items).map(me=>[me.longitude,me.latitude]);return{id:j.id,type:"Feature",geometry:{type:"LineString",coordinates:le},properties:{name:j.name,color:iy.colors_devices[X]}}}function Z(j){console.log(j);const X=[];return j.length>0&&j.forEach((le,me)=>{le.items.forEach((ie,ce)=>{X.push({...ie,type:"element",groupId:me,id:ce,image:le.type,title:`${me}-${ce}`})})}),X}return W.useEffect(()=>{var X;v.initMarkers(t);let j=B(t);(X=gt.getSource(c))==null||X.setData({type:"FeatureCollection",features:j.map(le=>({type:"Feature",geometry:{type:"Point",coordinates:[le.longitude,le.latitude]},properties:{...le}}))}),gt.getSource(h).setData({type:"FeatureCollection",features:t.elements.map((le,me)=>U(le,me))})},[t,n,r,i,a,s]),W.useEffect(()=>{let j=Z(e);gt.getSource(p).setData({type:"FeatureCollection",features:j.map(X=>({type:"Feature",geometry:{type:"Point",coordinates:[X.longitude,X.latitude]},properties:{...X}}))})},[e,n,r,i,a,s]),null},Vut=ri(t=>({list:{maxHeight:"100%",overflow:"auto"},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)},attributeName:{display:"inline-block",width:"40%",textAlign:"left",verticalAlign:"middle"},attributeValue:{display:"inline-block",width:"58%"},actionValue:{display:"inline-block",width:"40%"}})),Wut=({markers:t,setMarkers:e})=>{const n=Vut();Zl(),W.useState(!1),W.useState(!1);const[r,i]=W.useState(!1),[o,a]=W.useState(!0),s=(p,g)=>{let v=JSON.parse(JSON.stringify(t));v[p].items=g,e(v)},l=p=>{let g=JSON.parse(JSON.stringify(t));g.splice(p,1),e(g)},c=()=>{let p=JSON.parse(JSON.stringify(t));p.push({type:"powerTower",name:"Elements",linea:!0,items:[]}),e(p)},h=p=>(g,v)=>{i(v?p:!1)};return W.useEffect(()=>{t&&(t.length>0?a(!1):a(!0)),console.log(t)},[t]),F.jsx(W.Fragment,{children:o?F.jsx(ws,{textAlign:"center",children:F.jsx(Gr,{variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:c,children:"Create New Group"})}):F.jsxs("div",{className:n.details,children:[Ze.Children.toArray(Object.values(t).map((p,g,v)=>F.jsxs(pl,{expanded:r==="Elements "+g,onChange:h("Elements "+g),children:[F.jsxs(gl,{expandIcon:F.jsx(Da,{}),children:[F.jsx(Bn,{sx:{width:"33%",flexShrink:0},children:"Group "+g}),F.jsx(wr,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>l(g),children:F.jsx(yu,{})})]}),F.jsx(ml,{className:n.details,children:r==="Elements "+g&&F.jsxs(W.Fragment,{children:[F.jsx(gi,{required:!0,label:"Name",variant:"standard",value:p.name?p.name:""}),F.jsx(Ju,{emptyValue:null,value:0,data:[{id:0,name:"Power Tower"},{id:1,name:"wind turbine"},{id:2,name:"Solar Panel"}],label:"Type",style:{display:"inline",width:"200px"}}),F.jsx(Tce,{markers:p.items,setMarkers:x=>s(g,x),type:"Element"})]})})]}))),F.jsx(ws,{textAlign:"center",children:F.jsx(Gr,{variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:c,children:"Create List of Elements"})})]})})},Hut=ri(t=>({list:{maxHeight:"100%",overflow:"auto"},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)},attributeName:{display:"inline-block",width:"40%",textAlign:"left",verticalAlign:"middle"},attributeValue:{display:"inline-block",width:"58%"},actionValue:{display:"inline-block",width:"40%"}})),Gut=({Data:t,setData:e})=>{const n=Hut(),[r,i]=W.useState(!1),[o,a]=W.useState(!1),[s,l]=W.useState(!1),c=v=>{let x=JSON.parse(JSON.stringify(t));x.splice(v,1),e(x)},h=(v,x)=>{let b=JSON.parse(JSON.stringify(t));b[v].items.splice(x,1),e(b)},p=v=>(x,b)=>{a(b?v:!1)},g=v=>(x,b)=>{i(b?v:!1)};return W.useEffect(()=>{t&&(t.length>0?l(!0):l(!1))},[t]),F.jsx("div",{children:s&&F.jsx("div",{className:n.details,children:Ze.Children.toArray(Object.values(t).map((v,x,b)=>F.jsxs(pl,{expanded:r===`Elements ${x}`,onChange:g(`Elements ${x}`),children:[F.jsxs(gl,{expandIcon:F.jsx(Da,{}),children:[F.jsx(Bn,{sx:{width:"33%",flexShrink:0},children:`Group ${x}`}),F.jsx(wr,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>c(x),children:F.jsx(yu,{})})]}),F.jsx(ml,{className:n.details,children:r===`Elements ${x}`&&F.jsxs(F.Fragment,{children:[F.jsx(gi,{required:!0,label:"Name",variant:"standard",value:v.name?v.name:""}),F.jsx("div",{className:n.details,children:Ze.Children.toArray(Object.values(v.items).map((M,w,T)=>F.jsxs(pl,{expanded:o===`Elements ${w}`,onChange:p(`Elements ${w}`),children:[F.jsxs(gl,{expandIcon:F.jsx(Da,{}),children:[M.title?F.jsx(Bn,{sx:{width:"33%",flexShrink:0},children:`Element ${M.title}`}):F.jsx(Bn,{sx:{width:"33%",flexShrink:0},children:`Element ${w}`}),F.jsx(wr,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>h(x,w),children:F.jsx(yu,{})})]}),F.jsx(ml,{className:n.details,children:o===`Elements ${w}`&&F.jsxs(ws,{component:"form",sx:{"& .MuiTextField-root":{m:1}},children:[F.jsx(gi,{disabled:!0,label:"Latitude ",type:"number",sx:{width:"15ch"},variant:"standard",inputProps:{maxLength:8,step:1e-4},value:M.latitude}),F.jsx(gi,{disabled:!0,label:"Longitud ",type:"number",variant:"standard",sx:{width:"15ch"},inputProps:{maxLength:8,step:1e-4},value:M.longitude})]})})]})))})]})})]})))})})},qut=ri(t=>({root:{margin:"0",height:"100vh"},sidebarStyle:{display:"flex",flexDirection:"column",position:"fixed",left:0,top:"88px",height:"calc(100% - 95px)",width:"560px",margin:"0px",zIndex:3},middleStyle:{flex:1,display:"grid"},panelElevation:{display:"flex",flexDirection:"column",position:"fixed",right:0,bottom:0,height:"30vh",width:"calc(100% - 560px)",margin:"0px",zIndex:3},toolbar:{display:"flex",gap:"10px 10px",height:"30px",borderBottom:"3px solid rgb(212, 212, 212)"},list:{maxHeight:"calc(100vh - 152px)",overflowY:"auto",display:"flex",gap:"10px",flexDirection:"column",margin:"20px"},title:{flexGrow:1},fileInput:{display:"none"},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)},panelButton:{width:"80%",flexShrink:0,marginTop:"15px"},mapContainer:{float:"right",width:"calc(100% - 560px)",height:"calc(70vh - 95px)",right:"0px",margin:"auto"}})),Yut=(t,e)=>{console.log(t+e)},Xut=()=>{const t=qut(),e=rm(),n=Zl(),[r,i]=W.useState(!0),[o,a]=W.useState(!1),[s,l]=W.useState(!1),[c,h]=W.useState(!1),[p,g]=W.useState(!1),[v,x]=W.useState(100),b=mr(Fe=>Fe.session.markers),M=mr(Fe=>Fe.session.planning),[w,T]=W.useState(b),[C,I]=W.useState(M),[R,O]=W.useState(-1),[B,U]=W.useState("2"),[Z,j]=W.useState(""),[X,le]=W.useState(!0),me=fre(async()=>{console.log("send planning");let Fe={};Fe.id=C.id,Fe.name=C.name,Fe.case=C.objetivo.case,Fe.meteo=C.meteo,Fe.locations=C.loc.map(Tt=>{let Ct=Tt.items.map(Bt=>({latitude:Bt.latitude,longitude:Bt.longitude}));return{name:Tt.name,items:Ct}});let Qe=C.bases.map(Tt=>Tt.devices.id).some((Tt,Ct,Bt)=>Bt.indexOf(Tt)!==Ct);if(j(""),Qe)return j("the device is repeated please change"),null;if(C.loc.length===0)return j("No elements to inspection"),null;let ge=[];const et=await fetch("/api/devices");if(et.ok)ge=await et.json();else throw Error(await et.text());Fe.devices=C.bases.map((Tt,Ct)=>{let Bt=JSON.parse(JSON.stringify(Tt)),Gt=ge.find(sn=>sn.id==Tt.devices.id);return delete Bt.devices,Bt.id=Gt.name,Bt.category=Gt.category,Bt.settings.base=Object.values(w.bases[Ct]),Bt.settings.landing_mode=2,Bt}),console.log(Fe);const ot=await fetch("http://127.0.0.1:8004/mission_request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Fe)});if(ot.ok){const Tt=await ot.json();console.log(Tt),x(0)}else throw Error(await et.text());return!0}),ie=()=>{console.log("uno")},ce=Fe=>{let lt=qP.stringify(Fe);const Qe=new Blob([lt],{type:"text/plain"}),ge=URL.createObjectURL(Qe),et=document.createElement("a");et.download=`${Fe.name}.yaml`,et.href=ge,et.click()},fe=async()=>{const Fe={};Fe.id=C.id,Fe.name=C.name,Fe.objetivo=C.objetivo.id,Fe.meteo=C.meteo,Fe.locations=C.loc.map(Qe=>{let ge=Qe.items.map(et=>({latitude:et.latitude,longitude:et.longitude}));return{name:Qe.name,items:ge}}),console.log(Fe);const lt=await fetch("/api/missions/sendTask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Fe)});if(lt.ok){const Qe=await lt.json();console.log(Qe)}else throw Error(await lt.text())},xe=Fe=>{const lt=Fe.target.files[0];if(!lt)return;const Qe=new FileReader;Qe.readAsText(lt),Qe.onload=()=>{let ge=qP.parse(Qe.result);T(et=>({...et,bases:ge.markersbase,elements:ge.elements})),ge.hasOwnProperty("markersbase")&&delete ge.markersbase,ge.hasOwnProperty("elements")&&delete ge.elements,I(ge)},Qe.onerror=()=>{console.log(Qe.error)}},te=async Fe=>{console.log("Setdefault");const lt=await fetch("api/planning/setDefault",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Fe)});if(lt.ok)await lt.json();else throw Error(await lt.text())},he=Fe=>{I({...C,bases:Fe})},ve=(Fe,lt)=>{U(lt),lt==2||lt==1?i(!0):i(!1),lt==1?a(!0):a(!1),lt==1?l(!0):l(!1)},ze=(Fe,lt={})=>{T({...w,bases:Fe}),lt.hasOwnProperty("meth")&&(lt.meth=="add"&&I(Qe=>{let ge=JSON.parse(JSON.stringify(Qe.bases)),et={};return Object.keys(Qe.settings).forEach(ot=>{et[ot]={},Object.keys(Qe.settings[ot]).forEach(Tt=>{et[ot][Tt]=Qe.settings[ot][Tt].default})}),ge.push(et),{...Qe,bases:ge}}),lt.meth=="del"&&I(Qe=>{let ge=JSON.parse(JSON.stringify(Qe.bases));return console.log(ge),ge.splice(lt.index,1),{...Qe,bases:ge}}))},Ue=Fe=>{T({...w,elements:Fe})},rt=Fe=>{T(Fe)},Be=Fe=>{I({...C,loc:Fe})},st=(Fe,lt,Qe)=>(Qe=="path-object"&&(Fe.length==0?Fe.push({type:"powerTower",name:"Elements",linea:!0,items:[lt]}):Fe.find(et=>et.items[0].groupId==lt.groupId)===void 0?Fe.push({type:"powerTower",name:"Elements",linea:!0,items:[lt]}):Fe[+Fe.length-1].items.push(lt)),Qe=="object"&&Fe.push({type:"powerTower",name:"Elements",linea:!0,items:[lt]}),Qe=="point"&&Fe.push({type:"powerTower",name:"Elements",linea:!0,items:[lt]}),Fe),ct=Fe=>{console.log(Fe),I(lt=>{let Qe=JSON.parse(JSON.stringify(lt.loc));return console.log(lt.objetivo.type),{...lt,loc:st(Qe,Fe,lt.objetivo.type)}})},Dt=Fe=>{console.log("update objetivo"),I(lt=>{let Qe=JSON.parse(JSON.stringify(lt));return Qe.objetivo=Fe,Fe.type!==lt.objetivo.type&&(Qe.loc=[]),Qe})},zt=()=>{le(Fe=>!Fe)};return h1(async()=>{if(console.log("change objetivo"),R!==C.objetivo.id){console.log("are different"),O(C.objetivo.id);const Fe=await fetch(`/api/planning/missionparam/${C.objetivo.id}`);if(Fe.ok){console.log("response ok");const lt=await Fe.json();if(console.log(lt),lt.hasOwnProperty("settings"))if(C.bases.length==0){console.log("settings base lenght  zero");let Qe=w.bases.map(()=>{let ge={};return Object.keys(lt).forEach(et=>{ge[et]={},Object.keys(lt[et]).forEach(ot=>{ge[et][ot]=lt[et][ot].default})}),ge});I(ge=>{const et=JSON.parse(JSON.stringify(ge));return et.bases=Qe,et.settings=lt,et})}else{console.log("change basesss");let Qe={};Object.keys(lt.settings).forEach(ge=>{Qe[ge]=lt.settings[ge].default}),console.log(Qe),I(ge=>{const et=JSON.parse(JSON.stringify(ge));return et.bases=et.bases.map(ot=>({...ot,settings:Qe})),et.settings=lt,console.log(et),et})}}else throw Error(await Fe.text())}else console.log("are equal")},[C.objetivo,R]),W.useEffect(()=>{B==2&&C.objetivo.id!=3?h(!0):h(!1),B==2&&C.objetivo.id==3?g(!0):g(!1)},[B,C.objetivo]),W.useEffect(()=>{T(b)},[b]),W.useEffect(()=>{I(M)},[M]),W.useEffect(()=>{n(ef.updateMarker(w))},[w]),W.useEffect(()=>{n(ef.updatePlanning(C))},[C]),W.useEffect(()=>{const Fe=setInterval(()=>{console.log("response Planning"),x(Qe=>Qe+1)},5e3),lt=async()=>{const Qe=await fetch(`http://127.0.0.1:8004/get_plan?IDs=${C.id}`);if(Qe.ok){const ge=await Qe.json();console.log(ge),Array.isArray(ge.results)&&ge.results.length>0&&ge.results[0].hasOwnProperty("route")&&(console.log("response to check planning"),x(10),n(uh.updateMission({...ge.results[0],version:"3"})))}else throw Error(await Qe.text())};return v<4?lt():clearInterval(Fe),()=>clearInterval(Fe)},[v]),F.jsx("div",{className:t.root,children:F.jsx(IU,{children:F.jsxs(xE,{notification:Yut,children:[F.jsx(OR,{}),F.jsx(_E,{}),F.jsxs("div",{className:t.mapContainer,children:[F.jsxs(uj,{children:[X&&F.jsx(_se,{}),F.jsx(Uut,{markers:w,selectMarkers:C.loc,showTitles:r,showLines:o,moveMarkers:s,setMarkers:rt,SelectItems:c,CreateItems:p,setLocations:ct}),F.jsx(PU,{})]}),F.jsx(AU,{})]}),F.jsx("div",{className:t.sidebarStyle,children:F.jsx("div",{className:t.middleStyle,children:F.jsxs(Ls,{square:!0,children:[F.jsxs(vy,{className:t.toolbar,children:[F.jsx(wr,{edge:"start",sx:{mr:2},onClick:()=>e(-1),children:F.jsx(E1,{})}),F.jsx(Bn,{variant:"h6",className:t.title,children:"Planning"}),F.jsx(Bn,{children:"Show Mission"}),F.jsx(cre,{checked:X,onChange:zt,name:"checkedA",inputProps:{"aria-label":"secondary checkbox"}}),F.jsx(wr,{onClick:()=>{ce({...C,markersbase:w.bases,elements:w.elements})},children:F.jsx(DU,{})}),F.jsx(wr,{onClick:ie,children:F.jsx(yu,{})}),F.jsx(Fie,{readFile:Fe=>{xe(Fe)},typefiles:".yaml, .plan, .waypoint, .kml"})]}),F.jsx("div",{className:t.list,children:F.jsxs(Put,{value:B,children:[F.jsx(ws,{sx:{borderBottom:1,borderColor:"divider"},children:F.jsxs(Rut,{onChange:ve,"aria-label":"lab API tabs example",children:[F.jsx(Xv,{label:"Elements",value:"1"}),F.jsx(Xv,{label:"Planning",value:"2"}),F.jsx(Xv,{label:"Settings",value:"3"})]})}),F.jsx(aN,{value:"1",children:F.jsxs("div",{className:t.details,children:[F.jsxs(pl,{children:[F.jsx(gl,{expandIcon:F.jsx(Da,{}),children:F.jsx(Bn,{children:"Base elements"})}),F.jsx(ml,{className:t.details,children:F.jsx(Tce,{markers:w.bases,setMarkers:ze})})]}),F.jsx(Eb,{}),F.jsxs(pl,{children:[F.jsx(gl,{expandIcon:F.jsx(Da,{}),children:F.jsx(Bn,{children:"Interest Elements"})}),F.jsx(ml,{className:t.details,children:F.jsx(Wut,{markers:w.elements,setMarkers:Ue})})]}),F.jsx(ws,{textAlign:"center",children:F.jsx(Gr,{variant:"contained",size:"large",className:t.panelButton,onClick:me,children:"Save Global Markers"})})]})}),F.jsx(aN,{value:"2",children:F.jsxs(ws,{className:t.details,children:[F.jsx(gi,{required:!0,fullWidth:!0,label:"id",type:"number",variant:"standard",value:C.id?C.id:123,onChange:Fe=>I({...C,id:Fe.target.value})}),F.jsx(gi,{required:!0,fullWidth:!0,label:"Name Mission",variant:"standard",value:C.name?C.name:" ",onChange:Fe=>I({...C,name:Fe.target.value})}),F.jsx(Ju,{emptyValue:null,fullWidth:!0,label:"objetive",value:C.objetivo.id,endpoint:"/api/planning/missionstype",keyGetter:Fe=>Fe.id,titleGetter:Fe=>Fe.name,onChange:(Fe,lt)=>{Dt(lt[Fe.target.value])},getItems:Fe=>{console.log(Fe),I({...C,objetivo:Fe})}}),F.jsxs(pl,{children:[F.jsx(gl,{expandIcon:F.jsx(Da,{}),children:F.jsx(Bn,{children:"Points to inspect "})}),F.jsx(ml,{className:t.details,children:F.jsxs("div",{className:t.details,children:[C.objetivo.hasOwnProperty("description")?F.jsx(Bn,{children:C.objetivo.description}):F.jsx(Bn,{children:"select doing click in the map"}),F.jsx(Gut,{Data:C.loc,setData:Be})]})})]}),F.jsx(Eb,{}),F.jsxs(pl,{children:[F.jsx(gl,{expandIcon:F.jsx(Da,{}),children:F.jsx(Bn,{children:"Meteo"})}),F.jsxs(ml,{className:t.details,children:[F.jsx(gi,{required:!0,fullWidth:!0,label:"wind speed",type:"number",variant:"standard",value:12}),F.jsx(gi,{required:!0,fullWidth:!0,label:"Wind direction",type:"number",variant:"standard",value:12}),F.jsx(gi,{required:!0,fullWidth:!0,label:"Temperature",type:"number",variant:"standard",value:12}),F.jsx(gi,{required:!0,fullWidth:!0,label:"Humidity",type:"number",variant:"standard",value:12}),F.jsx(gi,{required:!0,fullWidth:!0,label:"Pressure",type:"number",variant:"standard",value:12})]})]})]})}),F.jsx(aN,{value:"3",children:F.jsxs("div",{className:t.details,children:[F.jsx($ut,{data:C.bases,param:C.settings,setData:he}),F.jsxs(ws,{textAlign:"center",children:[F.jsx(Gr,{variant:"contained",size:"large",className:t.panelButton,onClick:me,children:"Plannig"}),F.jsx(Gr,{variant:"contained",size:"large",className:t.panelButton,onClick:fe,children:"Planing with Global Setting"}),F.jsx(Gr,{variant:"contained",size:"large",className:t.panelButton,onClick:()=>te({...C,markersbase:w.bases,elements:w.elements}),children:"Save Global Settings"})]}),F.jsx(Bn,{children:Z})]})})]})})]})})}),F.jsx("div",{className:t.panelElevation,children:F.jsx("div",{className:t.middleStyle,children:F.jsx(Ls,{square:!0,children:F.jsx($6,{})})})})]})})})};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const NO="162",Qc={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},eu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Cce=0,u4=1,Ace=2,Kut=3,Pce=0,zO=1,KS=2,Xd=3,Qp=0,ql=1,af=2,Bp=0,v0=1,d4=2,f4=3,h4=4,kce=5,Eg=100,Ice=101,Rce=102,p4=103,m4=104,Oce=200,Lce=201,Dce=202,Nce=203,Jk=204,Qk=205,zce=206,Fce=207,Bce=208,$ce=209,jce=210,Uce=211,Vce=212,Wce=213,Hce=214,Gce=0,qce=1,Yce=2,w2=3,Xce=4,Kce=5,Zce=6,Jce=7,zE=0,Qce=1,eue=2,Sh=0,tue=1,nue=2,rue=3,j6=4,iue=5,oue=6,sue=7,g4="attached",aue="detached",FO=300,em=301,cy=302,S2=303,M2=304,F1=306,E2=1e3,hl=1001,T2=1002,xs=1003,eI=1004,Zut=1004,Vv=1005,Jut=1005,Uo=1006,ZS=1007,Qut=1007,fh=1008,edt=1008,Mh=1009,lue=1010,cue=1011,BO=1012,U6=1013,Ip=1014,ou=1015,Kb=1016,V6=1017,W6=1018,Jg=1020,uue=1021,Ul=1023,due=1024,fue=1025,Qg=1026,N0=1027,H6=1028,G6=1029,hue=1030,q6=1031,Y6=1033,jA=33776,UA=33777,VA=33778,WA=33779,y4=35840,v4=35841,x4=35842,_4=35843,X6=36196,b4=37492,w4=37496,S4=37808,M4=37809,E4=37810,T4=37811,C4=37812,A4=37813,P4=37814,k4=37815,I4=37816,R4=37817,O4=37818,L4=37819,D4=37820,N4=37821,HA=36492,z4=36494,F4=36495,pue=36283,B4=36284,$4=36285,j4=36286,mue=2200,gue=2201,yue=2202,C2=2300,A2=2301,GA=2302,r0=2400,i0=2401,P2=2402,$O=2500,K6=2501,tdt=0,ndt=1,rdt=2,vue=3200,xue=3201,My=0,_ue=1,bp="",Yu="srgb",dm="srgb-linear",jO="display-p3",FE="display-p3-linear",k2="linear",fo="srgb",I2="rec709",R2="p3",idt=0,Bv=7680,odt=7681,sdt=7682,adt=7683,ldt=34055,cdt=34056,udt=5386,ddt=512,fdt=513,hdt=514,pdt=515,mdt=516,gdt=517,ydt=518,U4=519,bue=512,wue=513,Sue=514,Z6=515,Mue=516,Eue=517,Tue=518,Cue=519,O2=35044,vdt=35048,xdt=35040,_dt=35045,bdt=35049,wdt=35041,Sdt=35046,Mdt=35050,Edt=35042,Tdt="100",V4="300 es",tI=1035,hh=2e3,L2=2001;class bf{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let o=0,a=i.length;o<a;o++)i[o].call(this,e);e.target=null}}}const ol=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let yK=1234567;const x0=Math.PI/180,Zb=180/Math.PI;function fu(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(ol[t&255]+ol[t>>8&255]+ol[t>>16&255]+ol[t>>24&255]+"-"+ol[e&255]+ol[e>>8&255]+"-"+ol[e>>16&15|64]+ol[e>>24&255]+"-"+ol[n&63|128]+ol[n>>8&255]+"-"+ol[n>>16&255]+ol[n>>24&255]+ol[r&255]+ol[r>>8&255]+ol[r>>16&255]+ol[r>>24&255]).toLowerCase()}function is(t,e,n){return Math.max(e,Math.min(n,t))}function J6(t,e){return(t%e+e)%e}function Cdt(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function Adt(t,e,n){return t!==e?(n-t)/(e-t):0}function JS(t,e,n){return(1-n)*t+n*e}function Pdt(t,e,n,r){return JS(t,e,1-Math.exp(-n*r))}function kdt(t,e=1){return e-Math.abs(J6(t,e*2)-e)}function Idt(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function Rdt(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function Odt(t,e){return t+Math.floor(Math.random()*(e-t+1))}function Ldt(t,e){return t+Math.random()*(e-t)}function Ddt(t){return t*(.5-Math.random())}function Ndt(t){t!==void 0&&(yK=t);let e=yK+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function zdt(t){return t*x0}function Fdt(t){return t*Zb}function W4(t){return(t&t-1)===0&&t!==0}function Bdt(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function nI(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function $dt(t,e,n,r,i){const o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),c=o((e+r)/2),h=a((e+r)/2),p=o((e-r)/2),g=a((e-r)/2),v=o((r-e)/2),x=a((r-e)/2);switch(i){case"XYX":t.set(s*h,l*p,l*g,s*c);break;case"YZY":t.set(l*g,s*h,l*p,s*c);break;case"ZXZ":t.set(l*p,l*g,s*h,s*c);break;case"XZX":t.set(s*h,l*x,l*v,s*c);break;case"YXY":t.set(l*v,s*h,l*x,s*c);break;case"ZYZ":t.set(l*x,l*v,s*h,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Vl(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Rr(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const Aue={DEG2RAD:x0,RAD2DEG:Zb,generateUUID:fu,clamp:is,euclideanModulo:J6,mapLinear:Cdt,inverseLerp:Adt,lerp:JS,damp:Pdt,pingpong:kdt,smoothstep:Idt,smootherstep:Rdt,randInt:Odt,randFloat:Ldt,randFloatSpread:Ddt,seededRandom:Ndt,degToRad:zdt,radToDeg:Fdt,isPowerOfTwo:W4,ceilPowerOfTwo:Bdt,floorPowerOfTwo:nI,setQuaternionFromProperEuler:$dt,normalize:Rr,denormalize:Vl};class Ht{constructor(e=0,n=0){Ht.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(is(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),o=this.x-e.x,a=this.y-e.y;return this.x=o*r-a*i+e.x,this.y=o*i+a*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ir{constructor(e,n,r,i,o,a,s,l,c){Ir.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,a,s,l,c)}set(e,n,r,i,o,a,s,l,c){const h=this.elements;return h[0]=e,h[1]=i,h[2]=s,h[3]=n,h[4]=o,h[5]=l,h[6]=r,h[7]=a,h[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,a=r[0],s=r[3],l=r[6],c=r[1],h=r[4],p=r[7],g=r[2],v=r[5],x=r[8],b=i[0],M=i[3],w=i[6],T=i[1],C=i[4],I=i[7],R=i[2],O=i[5],B=i[8];return o[0]=a*b+s*T+l*R,o[3]=a*M+s*C+l*O,o[6]=a*w+s*I+l*B,o[1]=c*b+h*T+p*R,o[4]=c*M+h*C+p*O,o[7]=c*w+h*I+p*B,o[2]=g*b+v*T+x*R,o[5]=g*M+v*C+x*O,o[8]=g*w+v*I+x*B,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],h=e[8];return n*a*h-n*s*c-r*o*h+r*s*l+i*o*c-i*a*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],h=e[8],p=h*a-s*c,g=s*l-h*o,v=c*o-a*l,x=n*p+r*g+i*v;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const b=1/x;return e[0]=p*b,e[1]=(i*c-h*r)*b,e[2]=(s*r-i*a)*b,e[3]=g*b,e[4]=(h*n-i*l)*b,e[5]=(i*o-s*n)*b,e[6]=v*b,e[7]=(r*l-c*n)*b,e[8]=(a*n-r*o)*b,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,o,a,s){const l=Math.cos(o),c=Math.sin(o);return this.set(r*l,r*c,-r*(l*a+c*s)+a+e,-i*c,i*l,-i*(-c*a+l*s)+s+n,0,0,1),this}scale(e,n){return this.premultiply(lN.makeScale(e,n)),this}rotate(e){return this.premultiply(lN.makeRotation(-e)),this}translate(e,n){return this.premultiply(lN.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const lN=new Ir;function Pue(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const jdt={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function O_(t,e){return new jdt[t](e)}function D2(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function kue(){const t=D2("canvas");return t.style.display="block",t}const vK={};function Iue(t){t in vK||(vK[t]=!0,console.warn(t))}const xK=new Ir().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),_K=new Ir().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),mC={[dm]:{transfer:k2,primaries:I2,toReference:t=>t,fromReference:t=>t},[Yu]:{transfer:fo,primaries:I2,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[FE]:{transfer:k2,primaries:R2,toReference:t=>t.applyMatrix3(_K),fromReference:t=>t.applyMatrix3(xK)},[jO]:{transfer:fo,primaries:R2,toReference:t=>t.convertSRGBToLinear().applyMatrix3(_K),fromReference:t=>t.applyMatrix3(xK).convertLinearToSRGB()}},Udt=new Set([dm,FE]),Ni={enabled:!0,_workingColorSpace:dm,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!Udt.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=mC[e].toReference,i=mC[n].fromReference;return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return mC[t].primaries},getTransfer:function(t){return t===bp?k2:mC[t].transfer}};function ib(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function cN(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let Lx;class Q6{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Lx===void 0&&(Lx=D2("canvas")),Lx.width=e.width,Lx.height=e.height;const r=Lx.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=Lx}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=D2("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),o=i.data;for(let a=0;a<o.length;a++)o[a]=ib(o[a]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(ib(n[r]/255)*255):n[r]=ib(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Vdt=0;class o0{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Vdt++}),this.uuid=fu(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let o;if(Array.isArray(i)){o=[];for(let a=0,s=i.length;a<s;a++)i[a].isDataTexture?o.push(uN(i[a].image)):o.push(uN(i[a]))}else o=uN(i);r.url=o}return n||(e.images[this.uuid]=r),r}}function uN(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?Q6.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Wdt=0;class Go extends bf{constructor(e=Go.DEFAULT_IMAGE,n=Go.DEFAULT_MAPPING,r=hl,i=hl,o=Uo,a=fh,s=Ul,l=Mh,c=Go.DEFAULT_ANISOTROPY,h=bp){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Wdt++}),this.uuid=fu(),this.name="",this.source=new o0(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=o,this.minFilter=a,this.anisotropy=c,this.format=s,this.internalFormat=null,this.type=l,this.offset=new Ht(0,0),this.repeat=new Ht(1,1),this.center=new Ht(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ir,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==FO)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case E2:e.x=e.x-Math.floor(e.x);break;case hl:e.x=e.x<0?0:1;break;case T2:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case E2:e.y=e.y-Math.floor(e.y);break;case hl:e.y=e.y<0?0:1;break;case T2:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Go.DEFAULT_IMAGE=null;Go.DEFAULT_MAPPING=FO;Go.DEFAULT_ANISOTROPY=1;class zi{constructor(e=0,n=0,r=0,i=1){zi.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=this.w,a=e.elements;return this.x=a[0]*n+a[4]*r+a[8]*i+a[12]*o,this.y=a[1]*n+a[5]*r+a[9]*i+a[13]*o,this.z=a[2]*n+a[6]*r+a[10]*i+a[14]*o,this.w=a[3]*n+a[7]*r+a[11]*i+a[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,o;const l=e.elements,c=l[0],h=l[4],p=l[8],g=l[1],v=l[5],x=l[9],b=l[2],M=l[6],w=l[10];if(Math.abs(h-g)<.01&&Math.abs(p-b)<.01&&Math.abs(x-M)<.01){if(Math.abs(h+g)<.1&&Math.abs(p+b)<.1&&Math.abs(x+M)<.1&&Math.abs(c+v+w-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const C=(c+1)/2,I=(v+1)/2,R=(w+1)/2,O=(h+g)/4,B=(p+b)/4,U=(x+M)/4;return C>I&&C>R?C<.01?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt(C),i=O/r,o=B/r):I>R?I<.01?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(I),r=O/i,o=U/i):R<.01?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(R),r=B/o,i=U/o),this.set(r,i,o,n),this}let T=Math.sqrt((M-x)*(M-x)+(p-b)*(p-b)+(g-h)*(g-h));return Math.abs(T)<.001&&(T=1),this.x=(M-x)/T,this.y=(p-b)/T,this.z=(g-h)/T,this.w=Math.acos((c+v+w-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Rue extends bf{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new zi(0,0,e,n),this.scissorTest=!1,this.viewport=new zi(0,0,e,n);const i={width:e,height:n,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Uo,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0,count:1},r);const o=new Go(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);o.flipY=!1,o.generateMipmaps=r.generateMipmaps,o.internalFormat=r.internalFormat,this.textures=[];const a=r.count;for(let s=0;s<a;s++)this.textures[s]=o.clone(),this.textures[s].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,o=this.textures.length;i<o;i++)this.textures[i].image.width=e,this.textures[i].image.height=n,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new o0(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class gf extends Rue{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class UO extends Go{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=xs,this.minFilter=xs,this.wrapR=hl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Hdt extends gf{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new UO(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class e8 extends Go{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=xs,this.minFilter=xs,this.wrapR=hl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Gdt extends gf{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new e8(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class pa{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,o,a,s){let l=r[i+0],c=r[i+1],h=r[i+2],p=r[i+3];const g=o[a+0],v=o[a+1],x=o[a+2],b=o[a+3];if(s===0){e[n+0]=l,e[n+1]=c,e[n+2]=h,e[n+3]=p;return}if(s===1){e[n+0]=g,e[n+1]=v,e[n+2]=x,e[n+3]=b;return}if(p!==b||l!==g||c!==v||h!==x){let M=1-s;const w=l*g+c*v+h*x+p*b,T=w>=0?1:-1,C=1-w*w;if(C>Number.EPSILON){const R=Math.sqrt(C),O=Math.atan2(R,w*T);M=Math.sin(M*O)/R,s=Math.sin(s*O)/R}const I=s*T;if(l=l*M+g*I,c=c*M+v*I,h=h*M+x*I,p=p*M+b*I,M===1-s){const R=1/Math.sqrt(l*l+c*c+h*h+p*p);l*=R,c*=R,h*=R,p*=R}}e[n]=l,e[n+1]=c,e[n+2]=h,e[n+3]=p}static multiplyQuaternionsFlat(e,n,r,i,o,a){const s=r[i],l=r[i+1],c=r[i+2],h=r[i+3],p=o[a],g=o[a+1],v=o[a+2],x=o[a+3];return e[n]=s*x+h*p+l*v-c*g,e[n+1]=l*x+h*g+c*p-s*v,e[n+2]=c*x+h*v+s*g-l*p,e[n+3]=h*x-s*p-l*g-c*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,o=e._z,a=e._order,s=Math.cos,l=Math.sin,c=s(r/2),h=s(i/2),p=s(o/2),g=l(r/2),v=l(i/2),x=l(o/2);switch(a){case"XYZ":this._x=g*h*p+c*v*x,this._y=c*v*p-g*h*x,this._z=c*h*x+g*v*p,this._w=c*h*p-g*v*x;break;case"YXZ":this._x=g*h*p+c*v*x,this._y=c*v*p-g*h*x,this._z=c*h*x-g*v*p,this._w=c*h*p+g*v*x;break;case"ZXY":this._x=g*h*p-c*v*x,this._y=c*v*p+g*h*x,this._z=c*h*x+g*v*p,this._w=c*h*p-g*v*x;break;case"ZYX":this._x=g*h*p-c*v*x,this._y=c*v*p+g*h*x,this._z=c*h*x-g*v*p,this._w=c*h*p+g*v*x;break;case"YZX":this._x=g*h*p+c*v*x,this._y=c*v*p+g*h*x,this._z=c*h*x-g*v*p,this._w=c*h*p-g*v*x;break;case"XZY":this._x=g*h*p-c*v*x,this._y=c*v*p-g*h*x,this._z=c*h*x+g*v*p,this._w=c*h*p+g*v*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],l=n[9],c=n[2],h=n[6],p=n[10],g=r+s+p;if(g>0){const v=.5/Math.sqrt(g+1);this._w=.25/v,this._x=(h-l)*v,this._y=(o-c)*v,this._z=(a-i)*v}else if(r>s&&r>p){const v=2*Math.sqrt(1+r-s-p);this._w=(h-l)/v,this._x=.25*v,this._y=(i+a)/v,this._z=(o+c)/v}else if(s>p){const v=2*Math.sqrt(1+s-r-p);this._w=(o-c)/v,this._x=(i+a)/v,this._y=.25*v,this._z=(l+h)/v}else{const v=2*Math.sqrt(1+p-r-s);this._w=(a-i)/v,this._x=(o+c)/v,this._y=(l+h)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(is(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,o=e._z,a=e._w,s=n._x,l=n._y,c=n._z,h=n._w;return this._x=r*h+a*s+i*c-o*l,this._y=i*h+a*l+o*s-r*c,this._z=o*h+a*c+r*l-i*s,this._w=a*h-r*s-i*l-o*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,o=this._z,a=this._w;let s=a*e._w+r*e._x+i*e._y+o*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=r,this._y=i,this._z=o,this;const l=1-s*s;if(l<=Number.EPSILON){const v=1-n;return this._w=v*a+n*this._w,this._x=v*r+n*this._x,this._y=v*i+n*this._y,this._z=v*o+n*this._z,this.normalize(),this}const c=Math.sqrt(l),h=Math.atan2(c,s),p=Math.sin((1-n)*h)/c,g=Math.sin(n*h)/c;return this._w=a*p+this._w*g,this._x=r*p+this._x*g,this._y=i*p+this._y*g,this._z=o*p+this._z*g,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),o=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),o*Math.sin(n),o*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Oe{constructor(e=0,n=0,r=0){Oe.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(bK.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(bK.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[3]*r+o[6]*i,this.y=o[1]*n+o[4]*r+o[7]*i,this.z=o[2]*n+o[5]*r+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=e.elements,a=1/(o[3]*n+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*n+o[4]*r+o[8]*i+o[12])*a,this.y=(o[1]*n+o[5]*r+o[9]*i+o[13])*a,this.z=(o[2]*n+o[6]*r+o[10]*i+o[14])*a,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,o=e.x,a=e.y,s=e.z,l=e.w,c=2*(a*i-s*r),h=2*(s*n-o*i),p=2*(o*r-a*n);return this.x=n+l*c+a*p-s*h,this.y=r+l*h+s*c-o*p,this.z=i+l*p+o*h-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i,this.y=o[1]*n+o[5]*r+o[9]*i,this.z=o[2]*n+o[6]*r+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,o=e.z,a=n.x,s=n.y,l=n.z;return this.x=i*l-o*s,this.y=o*a-r*l,this.z=r*s-i*a,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return dN.copy(this).projectOnVector(e),this.sub(dN)}reflect(e){return this.sub(dN.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(is(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const dN=new Oe,bK=new pa;class Yl{constructor(e=new Oe(1/0,1/0,1/0),n=new Oe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(Vd.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(Vd.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=Vd.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const o=r.getAttribute("position");if(n===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let a=0,s=o.count;a<s;a++)e.isMesh===!0?e.getVertexPosition(a,Vd):Vd.fromBufferAttribute(o,a),Vd.applyMatrix4(e.matrixWorld),this.expandByPoint(Vd);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),gC.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),gC.copy(r.boundingBox)),gC.applyMatrix4(e.matrixWorld),this.union(gC)}const i=e.children;for(let o=0,a=i.length;o<a;o++)this.expandByObject(i[o],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Vd),Vd.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Jw),yC.subVectors(this.max,Jw),Dx.subVectors(e.a,Jw),Nx.subVectors(e.b,Jw),zx.subVectors(e.c,Jw),og.subVectors(Nx,Dx),sg.subVectors(zx,Nx),yv.subVectors(Dx,zx);let n=[0,-og.z,og.y,0,-sg.z,sg.y,0,-yv.z,yv.y,og.z,0,-og.x,sg.z,0,-sg.x,yv.z,0,-yv.x,-og.y,og.x,0,-sg.y,sg.x,0,-yv.y,yv.x,0];return!fN(n,Dx,Nx,zx,yC)||(n=[1,0,0,0,1,0,0,0,1],!fN(n,Dx,Nx,zx,yC))?!1:(vC.crossVectors(og,sg),n=[vC.x,vC.y,vC.z],fN(n,Dx,Nx,zx,yC))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Vd).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Vd).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(cp[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),cp[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),cp[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),cp[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),cp[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),cp[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),cp[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),cp[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(cp),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const cp=[new Oe,new Oe,new Oe,new Oe,new Oe,new Oe,new Oe,new Oe],Vd=new Oe,gC=new Yl,Dx=new Oe,Nx=new Oe,zx=new Oe,og=new Oe,sg=new Oe,yv=new Oe,Jw=new Oe,yC=new Oe,vC=new Oe,vv=new Oe;function fN(t,e,n,r,i){for(let o=0,a=t.length-3;o<=a;o+=3){vv.fromArray(t,o);const s=i.x*Math.abs(vv.x)+i.y*Math.abs(vv.y)+i.z*Math.abs(vv.z),l=e.dot(vv),c=n.dot(vv),h=r.dot(vv);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>s)return!1}return!0}const qdt=new Yl,Qw=new Oe,hN=new Oe;class xl{constructor(e=new Oe,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):qdt.setFromPoints(e).getCenter(r);let i=0;for(let o=0,a=e.length;o<a;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Qw.subVectors(e,this.center);const n=Qw.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(Qw,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(hN.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Qw.copy(e.center).add(hN)),this.expandByPoint(Qw.copy(e.center).sub(hN))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const up=new Oe,pN=new Oe,xC=new Oe,ag=new Oe,mN=new Oe,_C=new Oe,gN=new Oe;class Ey{constructor(e=new Oe,n=new Oe(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,up)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=up.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(up.copy(this.origin).addScaledVector(this.direction,n),up.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){pN.copy(e).add(n).multiplyScalar(.5),xC.copy(n).sub(e).normalize(),ag.copy(this.origin).sub(pN);const o=e.distanceTo(n)*.5,a=-this.direction.dot(xC),s=ag.dot(this.direction),l=-ag.dot(xC),c=ag.lengthSq(),h=Math.abs(1-a*a);let p,g,v,x;if(h>0)if(p=a*l-s,g=a*s-l,x=o*h,p>=0)if(g>=-x)if(g<=x){const b=1/h;p*=b,g*=b,v=p*(p+a*g+2*s)+g*(a*p+g+2*l)+c}else g=o,p=Math.max(0,-(a*g+s)),v=-p*p+g*(g+2*l)+c;else g=-o,p=Math.max(0,-(a*g+s)),v=-p*p+g*(g+2*l)+c;else g<=-x?(p=Math.max(0,-(-a*o+s)),g=p>0?-o:Math.min(Math.max(-o,-l),o),v=-p*p+g*(g+2*l)+c):g<=x?(p=0,g=Math.min(Math.max(-o,-l),o),v=g*(g+2*l)+c):(p=Math.max(0,-(a*o+s)),g=p>0?o:Math.min(Math.max(-o,-l),o),v=-p*p+g*(g+2*l)+c);else g=a>0?-o:o,p=Math.max(0,-(a*g+s)),v=-p*p+g*(g+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,p),i&&i.copy(pN).addScaledVector(xC,g),v}intersectSphere(e,n){up.subVectors(e.center,this.origin);const r=up.dot(this.direction),i=up.dot(up)-r*r,o=e.radius*e.radius;if(i>o)return null;const a=Math.sqrt(o-i),s=r-a,l=r+a;return l<0?null:s<0?this.at(l,n):this.at(s,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,o,a,s,l;const c=1/this.direction.x,h=1/this.direction.y,p=1/this.direction.z,g=this.origin;return c>=0?(r=(e.min.x-g.x)*c,i=(e.max.x-g.x)*c):(r=(e.max.x-g.x)*c,i=(e.min.x-g.x)*c),h>=0?(o=(e.min.y-g.y)*h,a=(e.max.y-g.y)*h):(o=(e.max.y-g.y)*h,a=(e.min.y-g.y)*h),r>a||o>i||((o>r||isNaN(r))&&(r=o),(a<i||isNaN(i))&&(i=a),p>=0?(s=(e.min.z-g.z)*p,l=(e.max.z-g.z)*p):(s=(e.max.z-g.z)*p,l=(e.min.z-g.z)*p),r>l||s>i)||((s>r||r!==r)&&(r=s),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,up)!==null}intersectTriangle(e,n,r,i,o){mN.subVectors(n,e),_C.subVectors(r,e),gN.crossVectors(mN,_C);let a=this.direction.dot(gN),s;if(a>0){if(i)return null;s=1}else if(a<0)s=-1,a=-a;else return null;ag.subVectors(this.origin,e);const l=s*this.direction.dot(_C.crossVectors(ag,_C));if(l<0)return null;const c=s*this.direction.dot(mN.cross(ag));if(c<0||l+c>a)return null;const h=-s*ag.dot(gN);return h<0?null:this.at(h/a,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class xr{constructor(e,n,r,i,o,a,s,l,c,h,p,g,v,x,b,M){xr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,a,s,l,c,h,p,g,v,x,b,M)}set(e,n,r,i,o,a,s,l,c,h,p,g,v,x,b,M){const w=this.elements;return w[0]=e,w[4]=n,w[8]=r,w[12]=i,w[1]=o,w[5]=a,w[9]=s,w[13]=l,w[2]=c,w[6]=h,w[10]=p,w[14]=g,w[3]=v,w[7]=x,w[11]=b,w[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new xr().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/Fx.setFromMatrixColumn(e,0).length(),o=1/Fx.setFromMatrixColumn(e,1).length(),a=1/Fx.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,o=e.z,a=Math.cos(r),s=Math.sin(r),l=Math.cos(i),c=Math.sin(i),h=Math.cos(o),p=Math.sin(o);if(e.order==="XYZ"){const g=a*h,v=a*p,x=s*h,b=s*p;n[0]=l*h,n[4]=-l*p,n[8]=c,n[1]=v+x*c,n[5]=g-b*c,n[9]=-s*l,n[2]=b-g*c,n[6]=x+v*c,n[10]=a*l}else if(e.order==="YXZ"){const g=l*h,v=l*p,x=c*h,b=c*p;n[0]=g+b*s,n[4]=x*s-v,n[8]=a*c,n[1]=a*p,n[5]=a*h,n[9]=-s,n[2]=v*s-x,n[6]=b+g*s,n[10]=a*l}else if(e.order==="ZXY"){const g=l*h,v=l*p,x=c*h,b=c*p;n[0]=g-b*s,n[4]=-a*p,n[8]=x+v*s,n[1]=v+x*s,n[5]=a*h,n[9]=b-g*s,n[2]=-a*c,n[6]=s,n[10]=a*l}else if(e.order==="ZYX"){const g=a*h,v=a*p,x=s*h,b=s*p;n[0]=l*h,n[4]=x*c-v,n[8]=g*c+b,n[1]=l*p,n[5]=b*c+g,n[9]=v*c-x,n[2]=-c,n[6]=s*l,n[10]=a*l}else if(e.order==="YZX"){const g=a*l,v=a*c,x=s*l,b=s*c;n[0]=l*h,n[4]=b-g*p,n[8]=x*p+v,n[1]=p,n[5]=a*h,n[9]=-s*h,n[2]=-c*h,n[6]=v*p+x,n[10]=g-b*p}else if(e.order==="XZY"){const g=a*l,v=a*c,x=s*l,b=s*c;n[0]=l*h,n[4]=-p,n[8]=c*h,n[1]=g*p+b,n[5]=a*h,n[9]=v*p-x,n[2]=x*p-v,n[6]=s*h,n[10]=b*p+g}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Ydt,e,Xdt)}lookAt(e,n,r){const i=this.elements;return Gc.subVectors(e,n),Gc.lengthSq()===0&&(Gc.z=1),Gc.normalize(),lg.crossVectors(r,Gc),lg.lengthSq()===0&&(Math.abs(r.z)===1?Gc.x+=1e-4:Gc.z+=1e-4,Gc.normalize(),lg.crossVectors(r,Gc)),lg.normalize(),bC.crossVectors(Gc,lg),i[0]=lg.x,i[4]=bC.x,i[8]=Gc.x,i[1]=lg.y,i[5]=bC.y,i[9]=Gc.y,i[2]=lg.z,i[6]=bC.z,i[10]=Gc.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,a=r[0],s=r[4],l=r[8],c=r[12],h=r[1],p=r[5],g=r[9],v=r[13],x=r[2],b=r[6],M=r[10],w=r[14],T=r[3],C=r[7],I=r[11],R=r[15],O=i[0],B=i[4],U=i[8],Z=i[12],j=i[1],X=i[5],le=i[9],me=i[13],ie=i[2],ce=i[6],fe=i[10],xe=i[14],te=i[3],he=i[7],ve=i[11],ze=i[15];return o[0]=a*O+s*j+l*ie+c*te,o[4]=a*B+s*X+l*ce+c*he,o[8]=a*U+s*le+l*fe+c*ve,o[12]=a*Z+s*me+l*xe+c*ze,o[1]=h*O+p*j+g*ie+v*te,o[5]=h*B+p*X+g*ce+v*he,o[9]=h*U+p*le+g*fe+v*ve,o[13]=h*Z+p*me+g*xe+v*ze,o[2]=x*O+b*j+M*ie+w*te,o[6]=x*B+b*X+M*ce+w*he,o[10]=x*U+b*le+M*fe+w*ve,o[14]=x*Z+b*me+M*xe+w*ze,o[3]=T*O+C*j+I*ie+R*te,o[7]=T*B+C*X+I*ce+R*he,o[11]=T*U+C*le+I*fe+R*ve,o[15]=T*Z+C*me+I*xe+R*ze,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],o=e[12],a=e[1],s=e[5],l=e[9],c=e[13],h=e[2],p=e[6],g=e[10],v=e[14],x=e[3],b=e[7],M=e[11],w=e[15];return x*(+o*l*p-i*c*p-o*s*g+r*c*g+i*s*v-r*l*v)+b*(+n*l*v-n*c*g+o*a*g-i*a*v+i*c*h-o*l*h)+M*(+n*c*p-n*s*v-o*a*p+r*a*v+o*s*h-r*c*h)+w*(-i*s*h-n*l*p+n*s*g+i*a*p-r*a*g+r*l*h)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],h=e[8],p=e[9],g=e[10],v=e[11],x=e[12],b=e[13],M=e[14],w=e[15],T=p*M*c-b*g*c+b*l*v-s*M*v-p*l*w+s*g*w,C=x*g*c-h*M*c-x*l*v+a*M*v+h*l*w-a*g*w,I=h*b*c-x*p*c+x*s*v-a*b*v-h*s*w+a*p*w,R=x*p*l-h*b*l-x*s*g+a*b*g+h*s*M-a*p*M,O=n*T+r*C+i*I+o*R;if(O===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const B=1/O;return e[0]=T*B,e[1]=(b*g*o-p*M*o-b*i*v+r*M*v+p*i*w-r*g*w)*B,e[2]=(s*M*o-b*l*o+b*i*c-r*M*c-s*i*w+r*l*w)*B,e[3]=(p*l*o-s*g*o-p*i*c+r*g*c+s*i*v-r*l*v)*B,e[4]=C*B,e[5]=(h*M*o-x*g*o+x*i*v-n*M*v-h*i*w+n*g*w)*B,e[6]=(x*l*o-a*M*o-x*i*c+n*M*c+a*i*w-n*l*w)*B,e[7]=(a*g*o-h*l*o+h*i*c-n*g*c-a*i*v+n*l*v)*B,e[8]=I*B,e[9]=(x*p*o-h*b*o-x*r*v+n*b*v+h*r*w-n*p*w)*B,e[10]=(a*b*o-x*s*o+x*r*c-n*b*c-a*r*w+n*s*w)*B,e[11]=(h*s*o-a*p*o-h*r*c+n*p*c+a*r*v-n*s*v)*B,e[12]=R*B,e[13]=(h*b*i-x*p*i+x*r*g-n*b*g-h*r*M+n*p*M)*B,e[14]=(x*s*i-a*b*i-x*r*l+n*b*l+a*r*M-n*s*M)*B,e[15]=(a*p*i-h*s*i+h*r*l-n*p*l-a*r*g+n*s*g)*B,this}scale(e){const n=this.elements,r=e.x,i=e.y,o=e.z;return n[0]*=r,n[4]*=i,n[8]*=o,n[1]*=r,n[5]*=i,n[9]*=o,n[2]*=r,n[6]*=i,n[10]*=o,n[3]*=r,n[7]*=i,n[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),o=1-r,a=e.x,s=e.y,l=e.z,c=o*a,h=o*s;return this.set(c*a+r,c*s-i*l,c*l+i*s,0,c*s+i*l,h*s+r,h*l-i*a,0,c*l-i*s,h*l+i*a,o*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,o,a){return this.set(1,r,o,0,e,1,a,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,o=n._x,a=n._y,s=n._z,l=n._w,c=o+o,h=a+a,p=s+s,g=o*c,v=o*h,x=o*p,b=a*h,M=a*p,w=s*p,T=l*c,C=l*h,I=l*p,R=r.x,O=r.y,B=r.z;return i[0]=(1-(b+w))*R,i[1]=(v+I)*R,i[2]=(x-C)*R,i[3]=0,i[4]=(v-I)*O,i[5]=(1-(g+w))*O,i[6]=(M+T)*O,i[7]=0,i[8]=(x+C)*B,i[9]=(M-T)*B,i[10]=(1-(g+b))*B,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let o=Fx.set(i[0],i[1],i[2]).length();const a=Fx.set(i[4],i[5],i[6]).length(),s=Fx.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],Wd.copy(this);const c=1/o,h=1/a,p=1/s;return Wd.elements[0]*=c,Wd.elements[1]*=c,Wd.elements[2]*=c,Wd.elements[4]*=h,Wd.elements[5]*=h,Wd.elements[6]*=h,Wd.elements[8]*=p,Wd.elements[9]*=p,Wd.elements[10]*=p,n.setFromRotationMatrix(Wd),r.x=o,r.y=a,r.z=s,this}makePerspective(e,n,r,i,o,a,s=hh){const l=this.elements,c=2*o/(n-e),h=2*o/(r-i),p=(n+e)/(n-e),g=(r+i)/(r-i);let v,x;if(s===hh)v=-(a+o)/(a-o),x=-2*a*o/(a-o);else if(s===L2)v=-a/(a-o),x=-a*o/(a-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);return l[0]=c,l[4]=0,l[8]=p,l[12]=0,l[1]=0,l[5]=h,l[9]=g,l[13]=0,l[2]=0,l[6]=0,l[10]=v,l[14]=x,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,o,a,s=hh){const l=this.elements,c=1/(n-e),h=1/(r-i),p=1/(a-o),g=(n+e)*c,v=(r+i)*h;let x,b;if(s===hh)x=(a+o)*p,b=-2*p;else if(s===L2)x=o*p,b=-1*p;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-g,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-v,l[2]=0,l[6]=0,l[10]=b,l[14]=-x,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const Fx=new Oe,Wd=new xr,Ydt=new Oe(0,0,0),Xdt=new Oe(1,1,1),lg=new Oe,bC=new Oe,Gc=new Oe,wK=new xr,SK=new pa;class xu{constructor(e=0,n=0,r=0,i=xu.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,o=i[0],a=i[4],s=i[8],l=i[1],c=i[5],h=i[9],p=i[2],g=i[6],v=i[10];switch(n){case"XYZ":this._y=Math.asin(is(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-h,v),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(g,c),this._z=0);break;case"YXZ":this._x=Math.asin(-is(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(s,v),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-p,o),this._z=0);break;case"ZXY":this._x=Math.asin(is(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-p,v),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-is(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(g,v),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(is(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-p,o)):(this._x=0,this._y=Math.atan2(s,v));break;case"XZY":this._z=Math.asin(-is(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(g,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-h,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return wK.makeRotationFromQuaternion(e),this.setFromRotationMatrix(wK,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return SK.setFromEuler(this),this.setFromQuaternion(SK,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}xu.DEFAULT_ORDER="XYZ";class _0{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Kdt=0;const MK=new Oe,Bx=new pa,dp=new xr,wC=new Oe,eS=new Oe,Zdt=new Oe,Jdt=new pa,EK=new Oe(1,0,0),TK=new Oe(0,1,0),CK=new Oe(0,0,1),Qdt={type:"added"},eft={type:"removed"},yN={type:"childadded",child:null},vN={type:"childremoved",child:null};class vi extends bf{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Kdt++}),this.uuid=fu(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=vi.DEFAULT_UP.clone();const e=new Oe,n=new xu,r=new pa,i=new Oe(1,1,1);function o(){r.setFromEuler(n,!1)}function a(){n.setFromQuaternion(r,void 0,!1)}n._onChange(o),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new xr},normalMatrix:{value:new Ir}}),this.matrix=new xr,this.matrixWorld=new xr,this.matrixAutoUpdate=vi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=vi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new _0,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Bx.setFromAxisAngle(e,n),this.quaternion.multiply(Bx),this}rotateOnWorldAxis(e,n){return Bx.setFromAxisAngle(e,n),this.quaternion.premultiply(Bx),this}rotateX(e){return this.rotateOnAxis(EK,e)}rotateY(e){return this.rotateOnAxis(TK,e)}rotateZ(e){return this.rotateOnAxis(CK,e)}translateOnAxis(e,n){return MK.copy(e).applyQuaternion(this.quaternion),this.position.add(MK.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(EK,e)}translateY(e){return this.translateOnAxis(TK,e)}translateZ(e){return this.translateOnAxis(CK,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(dp.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?wC.copy(e):wC.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),eS.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?dp.lookAt(eS,wC,this.up):dp.lookAt(wC,eS,this.up),this.quaternion.setFromRotationMatrix(dp),i&&(dp.extractRotation(i.matrixWorld),Bx.setFromRotationMatrix(dp),this.quaternion.premultiply(Bx.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Qdt),yN.child=e,this.dispatchEvent(yN),yN.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(eft),vN.child=e,this.dispatchEvent(vN),vN.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),dp.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),dp.multiply(e.parent.matrixWorld)),e.applyMatrix4(dp),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const a=this.children[r].getObjectByProperty(e,n);if(a!==void 0)return a}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let o=0,a=i.length;o<a;o++)i[o].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(eS,e,Zdt),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(eS,Jdt,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const o=n[r];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let o=0,a=i.length;o<a;o++){const s=i[o];s.matrixWorldAutoUpdate===!0&&s.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(s=>({boxInitialized:s.boxInitialized,boxMin:s.box.min.toArray(),boxMax:s.box.max.toArray(),sphereInitialized:s.sphereInitialized,sphereRadius:s.sphere.radius,sphereCenter:s.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function o(s,l){return s[l.uuid]===void 0&&(s[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(e.geometries,this.geometry);const s=this.geometry.parameters;if(s!==void 0&&s.shapes!==void 0){const l=s.shapes;if(Array.isArray(l))for(let c=0,h=l.length;c<h;c++){const p=l[c];o(e.shapes,p)}else o(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const s=[];for(let l=0,c=this.material.length;l<c;l++)s.push(o(e.materials,this.material[l]));i.material=s}else i.material=o(e.materials,this.material);if(this.children.length>0){i.children=[];for(let s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let s=0;s<this.animations.length;s++){const l=this.animations[s];i.animations.push(o(e.animations,l))}}if(n){const s=a(e.geometries),l=a(e.materials),c=a(e.textures),h=a(e.images),p=a(e.shapes),g=a(e.skeletons),v=a(e.animations),x=a(e.nodes);s.length>0&&(r.geometries=s),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),h.length>0&&(r.images=h),p.length>0&&(r.shapes=p),g.length>0&&(r.skeletons=g),v.length>0&&(r.animations=v),x.length>0&&(r.nodes=x)}return r.object=i,r;function a(s){const l=[];for(const c in s){const h=s[c];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}vi.DEFAULT_UP=new Oe(0,1,0);vi.DEFAULT_MATRIX_AUTO_UPDATE=!0;vi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Hd=new Oe,fp=new Oe,xN=new Oe,hp=new Oe,$x=new Oe,jx=new Oe,AK=new Oe,_N=new Oe,bN=new Oe,wN=new Oe;class su{constructor(e=new Oe,n=new Oe,r=new Oe){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),Hd.subVectors(e,n),i.cross(Hd);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(e,n,r,i,o){Hd.subVectors(i,n),fp.subVectors(r,n),xN.subVectors(e,n);const a=Hd.dot(Hd),s=Hd.dot(fp),l=Hd.dot(xN),c=fp.dot(fp),h=fp.dot(xN),p=a*c-s*s;if(p===0)return o.set(0,0,0),null;const g=1/p,v=(c*l-s*h)*g,x=(a*h-s*l)*g;return o.set(1-v-x,x,v)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,hp)===null?!1:hp.x>=0&&hp.y>=0&&hp.x+hp.y<=1}static getInterpolation(e,n,r,i,o,a,s,l){return this.getBarycoord(e,n,r,i,hp)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(o,hp.x),l.addScaledVector(a,hp.y),l.addScaledVector(s,hp.z),l)}static isFrontFacing(e,n,r,i){return Hd.subVectors(r,n),fp.subVectors(e,n),Hd.cross(fp).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Hd.subVectors(this.c,this.b),fp.subVectors(this.a,this.b),Hd.cross(fp).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return su.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return su.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,o){return su.getInterpolation(e,this.a,this.b,this.c,n,r,i,o)}containsPoint(e){return su.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return su.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,o=this.c;let a,s;$x.subVectors(i,r),jx.subVectors(o,r),_N.subVectors(e,r);const l=$x.dot(_N),c=jx.dot(_N);if(l<=0&&c<=0)return n.copy(r);bN.subVectors(e,i);const h=$x.dot(bN),p=jx.dot(bN);if(h>=0&&p<=h)return n.copy(i);const g=l*p-h*c;if(g<=0&&l>=0&&h<=0)return a=l/(l-h),n.copy(r).addScaledVector($x,a);wN.subVectors(e,o);const v=$x.dot(wN),x=jx.dot(wN);if(x>=0&&v<=x)return n.copy(o);const b=v*c-l*x;if(b<=0&&c>=0&&x<=0)return s=c/(c-x),n.copy(r).addScaledVector(jx,s);const M=h*x-v*p;if(M<=0&&p-h>=0&&v-x>=0)return AK.subVectors(o,i),s=(p-h)/(p-h+(v-x)),n.copy(i).addScaledVector(AK,s);const w=1/(M+b+g);return a=b*w,s=g*w,n.copy(r).addScaledVector($x,a).addScaledVector(jx,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Oue={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},cg={h:0,s:0,l:0},SC={h:0,s:0,l:0};function SN(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class Fn{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Yu){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ni.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=Ni.workingColorSpace){return this.r=e,this.g=n,this.b=r,Ni.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=Ni.workingColorSpace){if(e=J6(e,1),n=is(n,0,1),r=is(r,0,1),n===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,a=2*r-o;this.r=SN(a,o,e+1/3),this.g=SN(a,o,e),this.b=SN(a,o,e-1/3)}return Ni.toWorkingColorSpace(this,i),this}setStyle(e,n=Yu){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const a=i[1],s=i[2];switch(a){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,n);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,n);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=i[1],a=o.length;if(a===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,n);if(a===6)return this.setHex(parseInt(o,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Yu){const r=Oue[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ib(e.r),this.g=ib(e.g),this.b=ib(e.b),this}copyLinearToSRGB(e){return this.r=cN(e.r),this.g=cN(e.g),this.b=cN(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Yu){return Ni.fromWorkingColorSpace(sl.copy(this),e),Math.round(is(sl.r*255,0,255))*65536+Math.round(is(sl.g*255,0,255))*256+Math.round(is(sl.b*255,0,255))}getHexString(e=Yu){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Ni.workingColorSpace){Ni.fromWorkingColorSpace(sl.copy(this),n);const r=sl.r,i=sl.g,o=sl.b,a=Math.max(r,i,o),s=Math.min(r,i,o);let l,c;const h=(s+a)/2;if(s===a)l=0,c=0;else{const p=a-s;switch(c=h<=.5?p/(a+s):p/(2-a-s),a){case r:l=(i-o)/p+(i<o?6:0);break;case i:l=(o-r)/p+2;break;case o:l=(r-i)/p+4;break}l/=6}return e.h=l,e.s=c,e.l=h,e}getRGB(e,n=Ni.workingColorSpace){return Ni.fromWorkingColorSpace(sl.copy(this),n),e.r=sl.r,e.g=sl.g,e.b=sl.b,e}getStyle(e=Yu){Ni.fromWorkingColorSpace(sl.copy(this),e);const n=sl.r,r=sl.g,i=sl.b;return e!==Yu?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(cg),this.setHSL(cg.h+e,cg.s+n,cg.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(cg),e.getHSL(SC);const r=JS(cg.h,SC.h,n),i=JS(cg.s,SC.s,n),o=JS(cg.l,SC.l,n);return this.setHSL(r,i,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,o=e.elements;return this.r=o[0]*n+o[3]*r+o[6]*i,this.g=o[1]*n+o[4]*r+o[7]*i,this.b=o[2]*n+o[5]*r+o[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const sl=new Fn;Fn.NAMES=Oue;let tft=0;class ja extends bf{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:tft++}),this.uuid=fu(),this.name="",this.type="Material",this.blending=v0,this.side=Qp,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Jk,this.blendDst=Qk,this.blendEquation=Eg,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Fn(0,0,0),this.blendAlpha=0,this.depthFunc=w2,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=U4,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Bv,this.stencilZFail=Bv,this.stencilZPass=Bv,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==v0&&(r.blending=this.blending),this.side!==Qp&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==Jk&&(r.blendSrc=this.blendSrc),this.blendDst!==Qk&&(r.blendDst=this.blendDst),this.blendEquation!==Eg&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==w2&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==U4&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Bv&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Bv&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Bv&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(o){const a=[];for(const s in o){const l=o[s];delete l.metadata,a.push(l)}return a}if(n){const o=i(e.textures),a=i(e.images);o.length>0&&(r.textures=o),a.length>0&&(r.images=a)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let o=0;o!==i;++o)r[o]=n[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Ty extends ja{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Fn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new xu,this.combine=zE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const wp=nft();function nft(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const o=new Uint32Array(2048),a=new Uint32Array(64),s=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,h=0;for(;!(c&8388608);)c<<=1,h-=8388608;c&=-8388609,h+=947912704,o[l]=c|h}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(s[l]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:o,exponentTable:a,offsetTable:s}}function gc(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=is(t,-65504,65504),wp.floatView[0]=t;const e=wp.uint32View[0],n=e>>23&511;return wp.baseTable[n]+((e&8388607)>>wp.shiftTable[n])}function SS(t){const e=t>>10;return wp.uint32View[0]=wp.mantissaTable[wp.offsetTable[e]+(t&1023)]+wp.exponentTable[e],wp.floatView[0]}const rft={toHalfFloat:gc,fromHalfFloat:SS},Ps=new Oe,MC=new Ht;class Qi{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=O2,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=ou,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return Iue("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)MC.fromBufferAttribute(this,n),MC.applyMatrix3(e),this.setXY(n,MC.x,MC.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Ps.fromBufferAttribute(this,n),Ps.applyMatrix3(e),this.setXYZ(n,Ps.x,Ps.y,Ps.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Ps.fromBufferAttribute(this,n),Ps.applyMatrix4(e),this.setXYZ(n,Ps.x,Ps.y,Ps.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Ps.fromBufferAttribute(this,n),Ps.applyNormalMatrix(e),this.setXYZ(n,Ps.x,Ps.y,Ps.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Ps.fromBufferAttribute(this,n),Ps.transformDirection(e),this.setXYZ(n,Ps.x,Ps.y,Ps.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=Vl(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Rr(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Vl(n,this.array)),n}setX(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Vl(n,this.array)),n}setY(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Vl(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Vl(n,this.array)),n}setW(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array),i=Rr(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,o){return e*=this.itemSize,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array),i=Rr(i,this.array),o=Rr(o,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==O2&&(e.usage=this.usage),e}}class ift extends Qi{constructor(e,n,r){super(new Int8Array(e),n,r)}}class oft extends Qi{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class sft extends Qi{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class aft extends Qi{constructor(e,n,r){super(new Int16Array(e),n,r)}}class t8 extends Qi{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class lft extends Qi{constructor(e,n,r){super(new Int32Array(e),n,r)}}class n8 extends Qi{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class cft extends Qi{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=SS(this.array[e*this.itemSize]);return this.normalized&&(n=Vl(n,this.array)),n}setX(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize]=gc(n),this}getY(e){let n=SS(this.array[e*this.itemSize+1]);return this.normalized&&(n=Vl(n,this.array)),n}setY(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize+1]=gc(n),this}getZ(e){let n=SS(this.array[e*this.itemSize+2]);return this.normalized&&(n=Vl(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize+2]=gc(n),this}getW(e){let n=SS(this.array[e*this.itemSize+3]);return this.normalized&&(n=Vl(n,this.array)),n}setW(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize+3]=gc(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array)),this.array[e+0]=gc(n),this.array[e+1]=gc(r),this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array),i=Rr(i,this.array)),this.array[e+0]=gc(n),this.array[e+1]=gc(r),this.array[e+2]=gc(i),this}setXYZW(e,n,r,i,o){return e*=this.itemSize,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array),i=Rr(i,this.array),o=Rr(o,this.array)),this.array[e+0]=gc(n),this.array[e+1]=gc(r),this.array[e+2]=gc(i),this.array[e+3]=gc(o),this}}class ir extends Qi{constructor(e,n,r){super(new Float32Array(e),n,r)}}let uft=0;const Hu=new xr,MN=new vi,Ux=new Oe,qc=new Yl,tS=new Yl,ca=new Oe;class Dr extends bf{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:uft++}),this.uuid=fu(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Pue(e)?n8:t8)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new Ir().getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Hu.makeRotationFromQuaternion(e),this.applyMatrix4(Hu),this}rotateX(e){return Hu.makeRotationX(e),this.applyMatrix4(Hu),this}rotateY(e){return Hu.makeRotationY(e),this.applyMatrix4(Hu),this}rotateZ(e){return Hu.makeRotationZ(e),this.applyMatrix4(Hu),this}translate(e,n,r){return Hu.makeTranslation(e,n,r),this.applyMatrix4(Hu),this}scale(e,n,r){return Hu.makeScale(e,n,r),this.applyMatrix4(Hu),this}lookAt(e){return MN.lookAt(e),MN.updateMatrix(),this.applyMatrix4(MN.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ux).negate(),this.translate(Ux.x,Ux.y,Ux.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const o=e[r];n.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new ir(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Yl);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Oe(-1/0,-1/0,-1/0),new Oe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const o=n[r];qc.setFromBufferAttribute(o),this.morphTargetsRelative?(ca.addVectors(this.boundingBox.min,qc.min),this.boundingBox.expandByPoint(ca),ca.addVectors(this.boundingBox.max,qc.max),this.boundingBox.expandByPoint(ca)):(this.boundingBox.expandByPoint(qc.min),this.boundingBox.expandByPoint(qc.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xl);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Oe,1/0);return}if(e){const r=this.boundingSphere.center;if(qc.setFromBufferAttribute(e),n)for(let o=0,a=n.length;o<a;o++){const s=n[o];tS.setFromBufferAttribute(s),this.morphTargetsRelative?(ca.addVectors(qc.min,tS.min),qc.expandByPoint(ca),ca.addVectors(qc.max,tS.max),qc.expandByPoint(ca)):(qc.expandByPoint(tS.min),qc.expandByPoint(tS.max))}qc.getCenter(r);let i=0;for(let o=0,a=e.count;o<a;o++)ca.fromBufferAttribute(e,o),i=Math.max(i,r.distanceToSquared(ca));if(n)for(let o=0,a=n.length;o<a;o++){const s=n[o],l=this.morphTargetsRelative;for(let c=0,h=s.count;c<h;c++)ca.fromBufferAttribute(s,c),l&&(Ux.fromBufferAttribute(e,c),ca.add(Ux)),i=Math.max(i,r.distanceToSquared(ca))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,i=n.normal,o=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Qi(new Float32Array(4*r.count),4));const a=this.getAttribute("tangent"),s=[],l=[];for(let U=0;U<r.count;U++)s[U]=new Oe,l[U]=new Oe;const c=new Oe,h=new Oe,p=new Oe,g=new Ht,v=new Ht,x=new Ht,b=new Oe,M=new Oe;function w(U,Z,j){c.fromBufferAttribute(r,U),h.fromBufferAttribute(r,Z),p.fromBufferAttribute(r,j),g.fromBufferAttribute(o,U),v.fromBufferAttribute(o,Z),x.fromBufferAttribute(o,j),h.sub(c),p.sub(c),v.sub(g),x.sub(g);const X=1/(v.x*x.y-x.x*v.y);isFinite(X)&&(b.copy(h).multiplyScalar(x.y).addScaledVector(p,-v.y).multiplyScalar(X),M.copy(p).multiplyScalar(v.x).addScaledVector(h,-x.x).multiplyScalar(X),s[U].add(b),s[Z].add(b),s[j].add(b),l[U].add(M),l[Z].add(M),l[j].add(M))}let T=this.groups;T.length===0&&(T=[{start:0,count:e.count}]);for(let U=0,Z=T.length;U<Z;++U){const j=T[U],X=j.start,le=j.count;for(let me=X,ie=X+le;me<ie;me+=3)w(e.getX(me+0),e.getX(me+1),e.getX(me+2))}const C=new Oe,I=new Oe,R=new Oe,O=new Oe;function B(U){R.fromBufferAttribute(i,U),O.copy(R);const Z=s[U];C.copy(Z),C.sub(R.multiplyScalar(R.dot(Z))).normalize(),I.crossVectors(O,Z);const X=I.dot(l[U])<0?-1:1;a.setXYZW(U,C.x,C.y,C.z,X)}for(let U=0,Z=T.length;U<Z;++U){const j=T[U],X=j.start,le=j.count;for(let me=X,ie=X+le;me<ie;me+=3)B(e.getX(me+0)),B(e.getX(me+1)),B(e.getX(me+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Qi(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let g=0,v=r.count;g<v;g++)r.setXYZ(g,0,0,0);const i=new Oe,o=new Oe,a=new Oe,s=new Oe,l=new Oe,c=new Oe,h=new Oe,p=new Oe;if(e)for(let g=0,v=e.count;g<v;g+=3){const x=e.getX(g+0),b=e.getX(g+1),M=e.getX(g+2);i.fromBufferAttribute(n,x),o.fromBufferAttribute(n,b),a.fromBufferAttribute(n,M),h.subVectors(a,o),p.subVectors(i,o),h.cross(p),s.fromBufferAttribute(r,x),l.fromBufferAttribute(r,b),c.fromBufferAttribute(r,M),s.add(h),l.add(h),c.add(h),r.setXYZ(x,s.x,s.y,s.z),r.setXYZ(b,l.x,l.y,l.z),r.setXYZ(M,c.x,c.y,c.z)}else for(let g=0,v=n.count;g<v;g+=3)i.fromBufferAttribute(n,g+0),o.fromBufferAttribute(n,g+1),a.fromBufferAttribute(n,g+2),h.subVectors(a,o),p.subVectors(i,o),h.cross(p),r.setXYZ(g+0,h.x,h.y,h.z),r.setXYZ(g+1,h.x,h.y,h.z),r.setXYZ(g+2,h.x,h.y,h.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)ca.fromBufferAttribute(e,n),ca.normalize(),e.setXYZ(n,ca.x,ca.y,ca.z)}toNonIndexed(){function e(s,l){const c=s.array,h=s.itemSize,p=s.normalized,g=new c.constructor(l.length*h);let v=0,x=0;for(let b=0,M=l.length;b<M;b++){s.isInterleavedBufferAttribute?v=l[b]*s.data.stride+s.offset:v=l[b]*h;for(let w=0;w<h;w++)g[x++]=c[v++]}return new Qi(g,h,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Dr,r=this.index.array,i=this.attributes;for(const s in i){const l=i[s],c=e(l,r);n.setAttribute(s,c)}const o=this.morphAttributes;for(const s in o){const l=[],c=o[s];for(let h=0,p=c.length;h<p;h++){const g=c[h],v=e(g,r);l.push(v)}n.morphAttributes[s]=l}n.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let s=0,l=a.length;s<l;s++){const c=a[s];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let o=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],h=[];for(let p=0,g=c.length;p<g;p++){const v=c[p];h.push(v.toJSON(e.data))}h.length>0&&(i[l]=h,o=!0)}o&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return s!==null&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const c in i){const h=i[c];this.setAttribute(c,h.clone(n))}const o=e.morphAttributes;for(const c in o){const h=[],p=o[c];for(let g=0,v=p.length;g<v;g++)h.push(p[g].clone(n));this.morphAttributes[c]=h}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,h=a.length;c<h;c++){const p=a[c];this.addGroup(p.start,p.count,p.materialIndex)}const s=e.boundingBox;s!==null&&(this.boundingBox=s.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const PK=new xr,xv=new Ey,EC=new xl,kK=new Oe,Vx=new Oe,Wx=new Oe,Hx=new Oe,EN=new Oe,TC=new Oe,CC=new Ht,AC=new Ht,PC=new Ht,IK=new Oe,RK=new Oe,OK=new Oe,kC=new Oe,IC=new Oe;class Rs extends vi{constructor(e=new Dr,n=new Ty){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=i.length;o<a;o++){const s=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=o}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,o=r.morphAttributes.position,a=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const s=this.morphTargetInfluences;if(o&&s){TC.set(0,0,0);for(let l=0,c=o.length;l<c;l++){const h=s[l],p=o[l];h!==0&&(EN.fromBufferAttribute(p,e),a?TC.addScaledVector(EN,h):TC.addScaledVector(EN.sub(n),h))}n.add(TC)}return n}raycast(e,n){const r=this.geometry,i=this.material,o=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),EC.copy(r.boundingSphere),EC.applyMatrix4(o),xv.copy(e.ray).recast(e.near),!(EC.containsPoint(xv.origin)===!1&&(xv.intersectSphere(EC,kK)===null||xv.origin.distanceToSquared(kK)>(e.far-e.near)**2))&&(PK.copy(o).invert(),xv.copy(e.ray).applyMatrix4(PK),!(r.boundingBox!==null&&xv.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,xv)))}_computeIntersections(e,n,r){let i;const o=this.geometry,a=this.material,s=o.index,l=o.attributes.position,c=o.attributes.uv,h=o.attributes.uv1,p=o.attributes.normal,g=o.groups,v=o.drawRange;if(s!==null)if(Array.isArray(a))for(let x=0,b=g.length;x<b;x++){const M=g[x],w=a[M.materialIndex],T=Math.max(M.start,v.start),C=Math.min(s.count,Math.min(M.start+M.count,v.start+v.count));for(let I=T,R=C;I<R;I+=3){const O=s.getX(I),B=s.getX(I+1),U=s.getX(I+2);i=RC(this,w,e,r,c,h,p,O,B,U),i&&(i.faceIndex=Math.floor(I/3),i.face.materialIndex=M.materialIndex,n.push(i))}}else{const x=Math.max(0,v.start),b=Math.min(s.count,v.start+v.count);for(let M=x,w=b;M<w;M+=3){const T=s.getX(M),C=s.getX(M+1),I=s.getX(M+2);i=RC(this,a,e,r,c,h,p,T,C,I),i&&(i.faceIndex=Math.floor(M/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(a))for(let x=0,b=g.length;x<b;x++){const M=g[x],w=a[M.materialIndex],T=Math.max(M.start,v.start),C=Math.min(l.count,Math.min(M.start+M.count,v.start+v.count));for(let I=T,R=C;I<R;I+=3){const O=I,B=I+1,U=I+2;i=RC(this,w,e,r,c,h,p,O,B,U),i&&(i.faceIndex=Math.floor(I/3),i.face.materialIndex=M.materialIndex,n.push(i))}}else{const x=Math.max(0,v.start),b=Math.min(l.count,v.start+v.count);for(let M=x,w=b;M<w;M+=3){const T=M,C=M+1,I=M+2;i=RC(this,a,e,r,c,h,p,T,C,I),i&&(i.faceIndex=Math.floor(M/3),n.push(i))}}}}function dft(t,e,n,r,i,o,a,s){let l;if(e.side===ql?l=r.intersectTriangle(a,o,i,!0,s):l=r.intersectTriangle(i,o,a,e.side===Qp,s),l===null)return null;IC.copy(s),IC.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(IC);return c<n.near||c>n.far?null:{distance:c,point:IC.clone(),object:t}}function RC(t,e,n,r,i,o,a,s,l,c){t.getVertexPosition(s,Vx),t.getVertexPosition(l,Wx),t.getVertexPosition(c,Hx);const h=dft(t,e,n,r,Vx,Wx,Hx,kC);if(h){i&&(CC.fromBufferAttribute(i,s),AC.fromBufferAttribute(i,l),PC.fromBufferAttribute(i,c),h.uv=su.getInterpolation(kC,Vx,Wx,Hx,CC,AC,PC,new Ht)),o&&(CC.fromBufferAttribute(o,s),AC.fromBufferAttribute(o,l),PC.fromBufferAttribute(o,c),h.uv1=su.getInterpolation(kC,Vx,Wx,Hx,CC,AC,PC,new Ht)),a&&(IK.fromBufferAttribute(a,s),RK.fromBufferAttribute(a,l),OK.fromBufferAttribute(a,c),h.normal=su.getInterpolation(kC,Vx,Wx,Hx,IK,RK,OK,new Oe),h.normal.dot(r.direction)>0&&h.normal.multiplyScalar(-1));const p={a:s,b:l,c,normal:new Oe,materialIndex:0};su.getNormal(Vx,Wx,Hx,p.normal),h.face=p}return h}class Cy extends Dr{constructor(e=1,n=1,r=1,i=1,o=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:o,depthSegments:a};const s=this;i=Math.floor(i),o=Math.floor(o),a=Math.floor(a);const l=[],c=[],h=[],p=[];let g=0,v=0;x("z","y","x",-1,-1,r,n,e,a,o,0),x("z","y","x",1,-1,r,n,-e,a,o,1),x("x","z","y",1,1,e,r,n,i,a,2),x("x","z","y",1,-1,e,r,-n,i,a,3),x("x","y","z",1,-1,e,n,r,i,o,4),x("x","y","z",-1,-1,e,n,-r,i,o,5),this.setIndex(l),this.setAttribute("position",new ir(c,3)),this.setAttribute("normal",new ir(h,3)),this.setAttribute("uv",new ir(p,2));function x(b,M,w,T,C,I,R,O,B,U,Z){const j=I/B,X=R/U,le=I/2,me=R/2,ie=O/2,ce=B+1,fe=U+1;let xe=0,te=0;const he=new Oe;for(let ve=0;ve<fe;ve++){const ze=ve*X-me;for(let Ue=0;Ue<ce;Ue++){const rt=Ue*j-le;he[b]=rt*T,he[M]=ze*C,he[w]=ie,c.push(he.x,he.y,he.z),he[b]=0,he[M]=0,he[w]=O>0?1:-1,h.push(he.x,he.y,he.z),p.push(Ue/B),p.push(1-ve/U),xe+=1}}for(let ve=0;ve<U;ve++)for(let ze=0;ze<B;ze++){const Ue=g+ze+ce*ve,rt=g+ze+ce*(ve+1),Be=g+(ze+1)+ce*(ve+1),st=g+(ze+1)+ce*ve;l.push(Ue,rt,st),l.push(rt,Be,st),te+=6}s.addGroup(v,te,Z),v+=te,g+=xe}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cy(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Jb(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function zl(t){const e={};for(let n=0;n<t.length;n++){const r=Jb(t[n]);for(const i in r)e[i]=r[i]}return e}function fft(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function Lue(t){return t.getRenderTarget()===null?t.outputColorSpace:Ni.workingColorSpace}const Due={clone:Jb,merge:zl};var hft=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,pft=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class yf extends ja{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=hft,this.fragmentShader=pft,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Jb(e.uniforms),this.uniformsGroups=fft(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?n.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?n.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?n.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?n.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?n.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?n.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?n.uniforms[i]={type:"m4",value:a.toArray()}:n.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class BE extends vi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new xr,this.projectionMatrix=new xr,this.projectionMatrixInverse=new xr,this.coordinateSystem=hh}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const ug=new Oe,LK=new Ht,DK=new Ht;class os extends BE{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Zb*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(x0*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Zb*2*Math.atan(Math.tan(x0*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){ug.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(ug.x,ug.y).multiplyScalar(-e/ug.z),ug.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(ug.x,ug.y).multiplyScalar(-e/ug.z)}getViewSize(e,n){return this.getViewBounds(e,LK,DK),n.subVectors(DK,LK)}setViewOffset(e,n,r,i,o,a){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(x0*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,o=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;o+=a.offsetX*i/l,n-=a.offsetY*r/c,i*=a.width/l,r*=a.height/c}const s=this.filmOffset;s!==0&&(o+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Gx=-90,qx=1;class Nue extends vi{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new os(Gx,qx,e,n);i.layers=this.layers,this.add(i);const o=new os(Gx,qx,e,n);o.layers=this.layers,this.add(o);const a=new os(Gx,qx,e,n);a.layers=this.layers,this.add(a);const s=new os(Gx,qx,e,n);s.layers=this.layers,this.add(s);const l=new os(Gx,qx,e,n);l.layers=this.layers,this.add(l);const c=new os(Gx,qx,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,o,a,s,l]=n;for(const c of n)this.remove(c);if(e===hh)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===L2)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,a,s,l,c,h]=this.children,p=e.getRenderTarget(),g=e.getActiveCubeFace(),v=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;const b=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,o),e.setRenderTarget(r,1,i),e.render(n,a),e.setRenderTarget(r,2,i),e.render(n,s),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,c),r.texture.generateMipmaps=b,e.setRenderTarget(r,5,i),e.render(n,h),e.setRenderTarget(p,g,v),e.xr.enabled=x,r.texture.needsPMREMUpdate=!0}}class $E extends Go{constructor(e,n,r,i,o,a,s,l,c,h){e=e!==void 0?e:[],n=n!==void 0?n:em,super(e,n,r,i,o,a,s,l,c,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class zue extends gf{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new $E(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Uo}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Cy(5,5,5),o=new yf({name:"CubemapFromEquirect",uniforms:Jb(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:ql,blending:Bp});o.uniforms.tEquirect.value=n;const a=new Rs(i,o),s=n.minFilter;return n.minFilter===fh&&(n.minFilter=Uo),new Nue(1,10,this).update(e,a),n.minFilter=s,a.geometry.dispose(),a.material.dispose(),this}clear(e,n,r,i){const o=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(n,r,i);e.setRenderTarget(o)}}const TN=new Oe,mft=new Oe,gft=new Ir;class ah{constructor(e=new Oe(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=TN.subVectors(r,n).cross(mft.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(TN),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:n.copy(e.start).addScaledVector(r,o)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||gft.getNormalMatrix(e),i=this.coplanarPoint(TN).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _v=new xl,OC=new Oe;class jE{constructor(e=new ah,n=new ah,r=new ah,i=new ah,o=new ah,a=new ah){this.planes=[e,n,r,i,o,a]}set(e,n,r,i,o,a){const s=this.planes;return s[0].copy(e),s[1].copy(n),s[2].copy(r),s[3].copy(i),s[4].copy(o),s[5].copy(a),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=hh){const r=this.planes,i=e.elements,o=i[0],a=i[1],s=i[2],l=i[3],c=i[4],h=i[5],p=i[6],g=i[7],v=i[8],x=i[9],b=i[10],M=i[11],w=i[12],T=i[13],C=i[14],I=i[15];if(r[0].setComponents(l-o,g-c,M-v,I-w).normalize(),r[1].setComponents(l+o,g+c,M+v,I+w).normalize(),r[2].setComponents(l+a,g+h,M+x,I+T).normalize(),r[3].setComponents(l-a,g-h,M-x,I-T).normalize(),r[4].setComponents(l-s,g-p,M-b,I-C).normalize(),n===hh)r[5].setComponents(l+s,g+p,M+b,I+C).normalize();else if(n===L2)r[5].setComponents(s,p,b,C).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),_v.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),_v.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(_v)}intersectsSprite(e){return _v.center.set(0,0,0),_v.radius=.7071067811865476,_v.applyMatrix4(e.matrixWorld),this.intersectsSphere(_v)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let o=0;o<6;o++)if(n[o].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(OC.x=i.normal.x>0?e.max.x:e.min.x,OC.y=i.normal.y>0?e.max.y:e.min.y,OC.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(OC)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Fue(){let t=null,e=!1,n=null,r=null;function i(o,a){n(o,a),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){n=o},setContext:function(o){t=o}}}function yft(t,e){const n=e.isWebGL2,r=new WeakMap;function i(c,h){const p=c.array,g=c.usage,v=p.byteLength,x=t.createBuffer();t.bindBuffer(h,x),t.bufferData(h,p,g),c.onUploadCallback();let b;if(p instanceof Float32Array)b=t.FLOAT;else if(p instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(n)b=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else b=t.UNSIGNED_SHORT;else if(p instanceof Int16Array)b=t.SHORT;else if(p instanceof Uint32Array)b=t.UNSIGNED_INT;else if(p instanceof Int32Array)b=t.INT;else if(p instanceof Int8Array)b=t.BYTE;else if(p instanceof Uint8Array)b=t.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)b=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:x,type:b,bytesPerElement:p.BYTES_PER_ELEMENT,version:c.version,size:v}}function o(c,h,p){const g=h.array,v=h._updateRange,x=h.updateRanges;if(t.bindBuffer(p,c),v.count===-1&&x.length===0&&t.bufferSubData(p,0,g),x.length!==0){for(let b=0,M=x.length;b<M;b++){const w=x[b];n?t.bufferSubData(p,w.start*g.BYTES_PER_ELEMENT,g,w.start,w.count):t.bufferSubData(p,w.start*g.BYTES_PER_ELEMENT,g.subarray(w.start,w.start+w.count))}h.clearUpdateRanges()}v.count!==-1&&(n?t.bufferSubData(p,v.offset*g.BYTES_PER_ELEMENT,g,v.offset,v.count):t.bufferSubData(p,v.offset*g.BYTES_PER_ELEMENT,g.subarray(v.offset,v.offset+v.count)),v.count=-1),h.onUploadCallback()}function a(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function s(c){c.isInterleavedBufferAttribute&&(c=c.data);const h=r.get(c);h&&(t.deleteBuffer(h.buffer),r.delete(c))}function l(c,h){if(c.isGLBufferAttribute){const g=r.get(c);(!g||g.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const p=r.get(c);if(p===void 0)r.set(c,i(c,h));else if(p.version<c.version){if(p.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");o(p.buffer,c,h),p.version=c.version}}return{get:a,remove:s,update:l}}class B1 extends Dr{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const o=e/2,a=n/2,s=Math.floor(r),l=Math.floor(i),c=s+1,h=l+1,p=e/s,g=n/l,v=[],x=[],b=[],M=[];for(let w=0;w<h;w++){const T=w*g-a;for(let C=0;C<c;C++){const I=C*p-o;x.push(I,-T,0),b.push(0,0,1),M.push(C/s),M.push(1-w/l)}}for(let w=0;w<l;w++)for(let T=0;T<s;T++){const C=T+c*w,I=T+c*(w+1),R=T+1+c*(w+1),O=T+1+c*w;v.push(C,I,O),v.push(I,R,O)}this.setIndex(v),this.setAttribute("position",new ir(x,3)),this.setAttribute("normal",new ir(b,3)),this.setAttribute("uv",new ir(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new B1(e.width,e.height,e.widthSegments,e.heightSegments)}}var vft=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,xft=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,_ft=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,bft=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,wft=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Sft=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Mft=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Eft=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Tft=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Cft=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,Aft=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Pft=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,kft=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Ift=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Rft=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Oft=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Lft=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Dft=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Nft=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,zft=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Fft=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Bft=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,$ft=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,jft=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Uft=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Vft=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Wft=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Hft=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Gft=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,qft=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Yft="gl_FragColor = linearToOutputTexel( gl_FragColor );",Xft=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,Kft=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Zft=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Jft=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Qft=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,eht=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,tht=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,nht=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,rht=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,iht=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,oht=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,sht=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,aht=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lht=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,cht=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,uht=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,dht=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,fht=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,hht=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,pht=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,mht=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,ght=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,yht=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,vht=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,xht=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,_ht=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,bht=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,wht=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Sht=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Mht=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Eht=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Tht=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Cht=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Aht=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Pht=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,kht=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Iht=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Rht=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Oht=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Lht=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
	#endif
	#ifdef MORPHTARGETS_TEXTURE
		#ifndef USE_INSTANCING_MORPH
			uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		#endif
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Dht=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Nht=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,zht=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Fht=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Bht=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,$ht=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,jht=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Uht=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Vht=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Wht=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Hht=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Ght=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,qht=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Yht=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Xht=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Kht=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Zht=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Jht=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Qht=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,ept=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,tpt=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,npt=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,rpt=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,ipt=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,opt=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,spt=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,apt=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,lpt=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,cpt=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,upt=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,dpt=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	float startCompression = 0.8 - 0.04;
	float desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min(color.r, min(color.g, color.b));
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max(color.r, max(color.g, color.b));
	if (peak < startCompression) return color;
	float d = 1. - startCompression;
	float newPeak = 1. - d * d / (peak + d - startCompression);
	color *= newPeak / peak;
	float g = 1. - 1. / (desaturation * (peak - newPeak) + 1.);
	return mix(color, vec3(1, 1, 1), g);
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,fpt=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,hpt=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,ppt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,mpt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,gpt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,ypt=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vpt=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,xpt=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,_pt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,bpt=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,wpt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Spt=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Mpt=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Ept=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Tpt=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Cpt=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Apt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Ppt=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,kpt=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Ipt=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Rpt=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Opt=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Lpt=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Dpt=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Npt=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,zpt=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Fpt=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Bpt=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,$pt=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jpt=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Upt=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Vpt=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Wpt=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Hpt=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Gpt=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,qpt=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Ypt=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Xpt=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Kpt=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Zpt=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,zr={alphahash_fragment:vft,alphahash_pars_fragment:xft,alphamap_fragment:_ft,alphamap_pars_fragment:bft,alphatest_fragment:wft,alphatest_pars_fragment:Sft,aomap_fragment:Mft,aomap_pars_fragment:Eft,batching_pars_vertex:Tft,batching_vertex:Cft,begin_vertex:Aft,beginnormal_vertex:Pft,bsdfs:kft,iridescence_fragment:Ift,bumpmap_pars_fragment:Rft,clipping_planes_fragment:Oft,clipping_planes_pars_fragment:Lft,clipping_planes_pars_vertex:Dft,clipping_planes_vertex:Nft,color_fragment:zft,color_pars_fragment:Fft,color_pars_vertex:Bft,color_vertex:$ft,common:jft,cube_uv_reflection_fragment:Uft,defaultnormal_vertex:Vft,displacementmap_pars_vertex:Wft,displacementmap_vertex:Hft,emissivemap_fragment:Gft,emissivemap_pars_fragment:qft,colorspace_fragment:Yft,colorspace_pars_fragment:Xft,envmap_fragment:Kft,envmap_common_pars_fragment:Zft,envmap_pars_fragment:Jft,envmap_pars_vertex:Qft,envmap_physical_pars_fragment:dht,envmap_vertex:eht,fog_vertex:tht,fog_pars_vertex:nht,fog_fragment:rht,fog_pars_fragment:iht,gradientmap_pars_fragment:oht,lightmap_fragment:sht,lightmap_pars_fragment:aht,lights_lambert_fragment:lht,lights_lambert_pars_fragment:cht,lights_pars_begin:uht,lights_toon_fragment:fht,lights_toon_pars_fragment:hht,lights_phong_fragment:pht,lights_phong_pars_fragment:mht,lights_physical_fragment:ght,lights_physical_pars_fragment:yht,lights_fragment_begin:vht,lights_fragment_maps:xht,lights_fragment_end:_ht,logdepthbuf_fragment:bht,logdepthbuf_pars_fragment:wht,logdepthbuf_pars_vertex:Sht,logdepthbuf_vertex:Mht,map_fragment:Eht,map_pars_fragment:Tht,map_particle_fragment:Cht,map_particle_pars_fragment:Aht,metalnessmap_fragment:Pht,metalnessmap_pars_fragment:kht,morphinstance_vertex:Iht,morphcolor_vertex:Rht,morphnormal_vertex:Oht,morphtarget_pars_vertex:Lht,morphtarget_vertex:Dht,normal_fragment_begin:Nht,normal_fragment_maps:zht,normal_pars_fragment:Fht,normal_pars_vertex:Bht,normal_vertex:$ht,normalmap_pars_fragment:jht,clearcoat_normal_fragment_begin:Uht,clearcoat_normal_fragment_maps:Vht,clearcoat_pars_fragment:Wht,iridescence_pars_fragment:Hht,opaque_fragment:Ght,packing:qht,premultiplied_alpha_fragment:Yht,project_vertex:Xht,dithering_fragment:Kht,dithering_pars_fragment:Zht,roughnessmap_fragment:Jht,roughnessmap_pars_fragment:Qht,shadowmap_pars_fragment:ept,shadowmap_pars_vertex:tpt,shadowmap_vertex:npt,shadowmask_pars_fragment:rpt,skinbase_vertex:ipt,skinning_pars_vertex:opt,skinning_vertex:spt,skinnormal_vertex:apt,specularmap_fragment:lpt,specularmap_pars_fragment:cpt,tonemapping_fragment:upt,tonemapping_pars_fragment:dpt,transmission_fragment:fpt,transmission_pars_fragment:hpt,uv_pars_fragment:ppt,uv_pars_vertex:mpt,uv_vertex:gpt,worldpos_vertex:ypt,background_vert:vpt,background_frag:xpt,backgroundCube_vert:_pt,backgroundCube_frag:bpt,cube_vert:wpt,cube_frag:Spt,depth_vert:Mpt,depth_frag:Ept,distanceRGBA_vert:Tpt,distanceRGBA_frag:Cpt,equirect_vert:Apt,equirect_frag:Ppt,linedashed_vert:kpt,linedashed_frag:Ipt,meshbasic_vert:Rpt,meshbasic_frag:Opt,meshlambert_vert:Lpt,meshlambert_frag:Dpt,meshmatcap_vert:Npt,meshmatcap_frag:zpt,meshnormal_vert:Fpt,meshnormal_frag:Bpt,meshphong_vert:$pt,meshphong_frag:jpt,meshphysical_vert:Upt,meshphysical_frag:Vpt,meshtoon_vert:Wpt,meshtoon_frag:Hpt,points_vert:Gpt,points_frag:qpt,shadow_vert:Ypt,shadow_frag:Xpt,sprite_vert:Kpt,sprite_frag:Zpt},Mn={common:{diffuse:{value:new Fn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ir},alphaMap:{value:null},alphaMapTransform:{value:new Ir},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ir}},envmap:{envMap:{value:null},envMapRotation:{value:new Ir},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ir}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ir}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ir},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ir},normalScale:{value:new Ht(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ir},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ir}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ir}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ir}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Fn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Fn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ir},alphaTest:{value:0},uvTransform:{value:new Ir}},sprite:{diffuse:{value:new Fn(16777215)},opacity:{value:1},center:{value:new Ht(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ir},alphaMap:{value:null},alphaMapTransform:{value:new Ir},alphaTest:{value:0}}},rf={basic:{uniforms:zl([Mn.common,Mn.specularmap,Mn.envmap,Mn.aomap,Mn.lightmap,Mn.fog]),vertexShader:zr.meshbasic_vert,fragmentShader:zr.meshbasic_frag},lambert:{uniforms:zl([Mn.common,Mn.specularmap,Mn.envmap,Mn.aomap,Mn.lightmap,Mn.emissivemap,Mn.bumpmap,Mn.normalmap,Mn.displacementmap,Mn.fog,Mn.lights,{emissive:{value:new Fn(0)}}]),vertexShader:zr.meshlambert_vert,fragmentShader:zr.meshlambert_frag},phong:{uniforms:zl([Mn.common,Mn.specularmap,Mn.envmap,Mn.aomap,Mn.lightmap,Mn.emissivemap,Mn.bumpmap,Mn.normalmap,Mn.displacementmap,Mn.fog,Mn.lights,{emissive:{value:new Fn(0)},specular:{value:new Fn(1118481)},shininess:{value:30}}]),vertexShader:zr.meshphong_vert,fragmentShader:zr.meshphong_frag},standard:{uniforms:zl([Mn.common,Mn.envmap,Mn.aomap,Mn.lightmap,Mn.emissivemap,Mn.bumpmap,Mn.normalmap,Mn.displacementmap,Mn.roughnessmap,Mn.metalnessmap,Mn.fog,Mn.lights,{emissive:{value:new Fn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:zr.meshphysical_vert,fragmentShader:zr.meshphysical_frag},toon:{uniforms:zl([Mn.common,Mn.aomap,Mn.lightmap,Mn.emissivemap,Mn.bumpmap,Mn.normalmap,Mn.displacementmap,Mn.gradientmap,Mn.fog,Mn.lights,{emissive:{value:new Fn(0)}}]),vertexShader:zr.meshtoon_vert,fragmentShader:zr.meshtoon_frag},matcap:{uniforms:zl([Mn.common,Mn.bumpmap,Mn.normalmap,Mn.displacementmap,Mn.fog,{matcap:{value:null}}]),vertexShader:zr.meshmatcap_vert,fragmentShader:zr.meshmatcap_frag},points:{uniforms:zl([Mn.points,Mn.fog]),vertexShader:zr.points_vert,fragmentShader:zr.points_frag},dashed:{uniforms:zl([Mn.common,Mn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:zr.linedashed_vert,fragmentShader:zr.linedashed_frag},depth:{uniforms:zl([Mn.common,Mn.displacementmap]),vertexShader:zr.depth_vert,fragmentShader:zr.depth_frag},normal:{uniforms:zl([Mn.common,Mn.bumpmap,Mn.normalmap,Mn.displacementmap,{opacity:{value:1}}]),vertexShader:zr.meshnormal_vert,fragmentShader:zr.meshnormal_frag},sprite:{uniforms:zl([Mn.sprite,Mn.fog]),vertexShader:zr.sprite_vert,fragmentShader:zr.sprite_frag},background:{uniforms:{uvTransform:{value:new Ir},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:zr.background_vert,fragmentShader:zr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ir}},vertexShader:zr.backgroundCube_vert,fragmentShader:zr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:zr.cube_vert,fragmentShader:zr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:zr.equirect_vert,fragmentShader:zr.equirect_frag},distanceRGBA:{uniforms:zl([Mn.common,Mn.displacementmap,{referencePosition:{value:new Oe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:zr.distanceRGBA_vert,fragmentShader:zr.distanceRGBA_frag},shadow:{uniforms:zl([Mn.lights,Mn.fog,{color:{value:new Fn(0)},opacity:{value:1}}]),vertexShader:zr.shadow_vert,fragmentShader:zr.shadow_frag}};rf.physical={uniforms:zl([rf.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ir},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ir},clearcoatNormalScale:{value:new Ht(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ir},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ir},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ir},sheen:{value:0},sheenColor:{value:new Fn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ir},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ir},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ir},transmissionSamplerSize:{value:new Ht},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ir},attenuationDistance:{value:0},attenuationColor:{value:new Fn(0)},specularColor:{value:new Fn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ir},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ir},anisotropyVector:{value:new Ht},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ir}}]),vertexShader:zr.meshphysical_vert,fragmentShader:zr.meshphysical_frag};const LC={r:0,b:0,g:0},bv=new xu,Jpt=new xr;function Qpt(t,e,n,r,i,o,a){const s=new Fn(0);let l=o===!0?0:1,c,h,p=null,g=0,v=null;function x(M,w){let T=!1,C=w.isScene===!0?w.background:null;C&&C.isTexture&&(C=(w.backgroundBlurriness>0?n:e).get(C)),C===null?b(s,l):C&&C.isColor&&(b(C,1),T=!0);const I=t.xr.getEnvironmentBlendMode();I==="additive"?r.buffers.color.setClear(0,0,0,1,a):I==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,a),(t.autoClear||T)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),C&&(C.isCubeTexture||C.mapping===F1)?(h===void 0&&(h=new Rs(new Cy(1,1,1),new yf({name:"BackgroundCubeMaterial",uniforms:Jb(rf.backgroundCube.uniforms),vertexShader:rf.backgroundCube.vertexShader,fragmentShader:rf.backgroundCube.fragmentShader,side:ql,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(R,O,B){this.matrixWorld.copyPosition(B.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(h)),bv.copy(w.backgroundRotation),bv.x*=-1,bv.y*=-1,bv.z*=-1,C.isCubeTexture&&C.isRenderTargetTexture===!1&&(bv.y*=-1,bv.z*=-1),h.material.uniforms.envMap.value=C,h.material.uniforms.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=w.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(Jpt.makeRotationFromEuler(bv)),h.material.toneMapped=Ni.getTransfer(C.colorSpace)!==fo,(p!==C||g!==C.version||v!==t.toneMapping)&&(h.material.needsUpdate=!0,p=C,g=C.version,v=t.toneMapping),h.layers.enableAll(),M.unshift(h,h.geometry,h.material,0,0,null)):C&&C.isTexture&&(c===void 0&&(c=new Rs(new B1(2,2),new yf({name:"BackgroundMaterial",uniforms:Jb(rf.background.uniforms),vertexShader:rf.background.vertexShader,fragmentShader:rf.background.fragmentShader,side:Qp,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=C,c.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,c.material.toneMapped=Ni.getTransfer(C.colorSpace)!==fo,C.matrixAutoUpdate===!0&&C.updateMatrix(),c.material.uniforms.uvTransform.value.copy(C.matrix),(p!==C||g!==C.version||v!==t.toneMapping)&&(c.material.needsUpdate=!0,p=C,g=C.version,v=t.toneMapping),c.layers.enableAll(),M.unshift(c,c.geometry,c.material,0,0,null))}function b(M,w){M.getRGB(LC,Lue(t)),r.buffers.color.setClear(LC.r,LC.g,LC.b,w,a)}return{getClearColor:function(){return s},setClearColor:function(M,w=1){s.set(M),l=w,b(s,l)},getClearAlpha:function(){return l},setClearAlpha:function(M){l=M,b(s,l)},render:x}}function emt(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),a=r.isWebGL2||o!==null,s={},l=M(null);let c=l,h=!1;function p(ie,ce,fe,xe,te){let he=!1;if(a){const ve=b(xe,fe,ce);c!==ve&&(c=ve,v(c.object)),he=w(ie,xe,fe,te),he&&T(ie,xe,fe,te)}else{const ve=ce.wireframe===!0;(c.geometry!==xe.id||c.program!==fe.id||c.wireframe!==ve)&&(c.geometry=xe.id,c.program=fe.id,c.wireframe=ve,he=!0)}te!==null&&n.update(te,t.ELEMENT_ARRAY_BUFFER),(he||h)&&(h=!1,U(ie,ce,fe,xe),te!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(te).buffer))}function g(){return r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()}function v(ie){return r.isWebGL2?t.bindVertexArray(ie):o.bindVertexArrayOES(ie)}function x(ie){return r.isWebGL2?t.deleteVertexArray(ie):o.deleteVertexArrayOES(ie)}function b(ie,ce,fe){const xe=fe.wireframe===!0;let te=s[ie.id];te===void 0&&(te={},s[ie.id]=te);let he=te[ce.id];he===void 0&&(he={},te[ce.id]=he);let ve=he[xe];return ve===void 0&&(ve=M(g()),he[xe]=ve),ve}function M(ie){const ce=[],fe=[],xe=[];for(let te=0;te<i;te++)ce[te]=0,fe[te]=0,xe[te]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ce,enabledAttributes:fe,attributeDivisors:xe,object:ie,attributes:{},index:null}}function w(ie,ce,fe,xe){const te=c.attributes,he=ce.attributes;let ve=0;const ze=fe.getAttributes();for(const Ue in ze)if(ze[Ue].location>=0){const Be=te[Ue];let st=he[Ue];if(st===void 0&&(Ue==="instanceMatrix"&&ie.instanceMatrix&&(st=ie.instanceMatrix),Ue==="instanceColor"&&ie.instanceColor&&(st=ie.instanceColor)),Be===void 0||Be.attribute!==st||st&&Be.data!==st.data)return!0;ve++}return c.attributesNum!==ve||c.index!==xe}function T(ie,ce,fe,xe){const te={},he=ce.attributes;let ve=0;const ze=fe.getAttributes();for(const Ue in ze)if(ze[Ue].location>=0){let Be=he[Ue];Be===void 0&&(Ue==="instanceMatrix"&&ie.instanceMatrix&&(Be=ie.instanceMatrix),Ue==="instanceColor"&&ie.instanceColor&&(Be=ie.instanceColor));const st={};st.attribute=Be,Be&&Be.data&&(st.data=Be.data),te[Ue]=st,ve++}c.attributes=te,c.attributesNum=ve,c.index=xe}function C(){const ie=c.newAttributes;for(let ce=0,fe=ie.length;ce<fe;ce++)ie[ce]=0}function I(ie){R(ie,0)}function R(ie,ce){const fe=c.newAttributes,xe=c.enabledAttributes,te=c.attributeDivisors;fe[ie]=1,xe[ie]===0&&(t.enableVertexAttribArray(ie),xe[ie]=1),te[ie]!==ce&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](ie,ce),te[ie]=ce)}function O(){const ie=c.newAttributes,ce=c.enabledAttributes;for(let fe=0,xe=ce.length;fe<xe;fe++)ce[fe]!==ie[fe]&&(t.disableVertexAttribArray(fe),ce[fe]=0)}function B(ie,ce,fe,xe,te,he,ve){ve===!0?t.vertexAttribIPointer(ie,ce,fe,te,he):t.vertexAttribPointer(ie,ce,fe,xe,te,he)}function U(ie,ce,fe,xe){if(r.isWebGL2===!1&&(ie.isInstancedMesh||xe.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;C();const te=xe.attributes,he=fe.getAttributes(),ve=ce.defaultAttributeValues;for(const ze in he){const Ue=he[ze];if(Ue.location>=0){let rt=te[ze];if(rt===void 0&&(ze==="instanceMatrix"&&ie.instanceMatrix&&(rt=ie.instanceMatrix),ze==="instanceColor"&&ie.instanceColor&&(rt=ie.instanceColor)),rt!==void 0){const Be=rt.normalized,st=rt.itemSize,ct=n.get(rt);if(ct===void 0)continue;const Dt=ct.buffer,zt=ct.type,Fe=ct.bytesPerElement,lt=r.isWebGL2===!0&&(zt===t.INT||zt===t.UNSIGNED_INT||rt.gpuType===U6);if(rt.isInterleavedBufferAttribute){const Qe=rt.data,ge=Qe.stride,et=rt.offset;if(Qe.isInstancedInterleavedBuffer){for(let ot=0;ot<Ue.locationSize;ot++)R(Ue.location+ot,Qe.meshPerAttribute);ie.isInstancedMesh!==!0&&xe._maxInstanceCount===void 0&&(xe._maxInstanceCount=Qe.meshPerAttribute*Qe.count)}else for(let ot=0;ot<Ue.locationSize;ot++)I(Ue.location+ot);t.bindBuffer(t.ARRAY_BUFFER,Dt);for(let ot=0;ot<Ue.locationSize;ot++)B(Ue.location+ot,st/Ue.locationSize,zt,Be,ge*Fe,(et+st/Ue.locationSize*ot)*Fe,lt)}else{if(rt.isInstancedBufferAttribute){for(let Qe=0;Qe<Ue.locationSize;Qe++)R(Ue.location+Qe,rt.meshPerAttribute);ie.isInstancedMesh!==!0&&xe._maxInstanceCount===void 0&&(xe._maxInstanceCount=rt.meshPerAttribute*rt.count)}else for(let Qe=0;Qe<Ue.locationSize;Qe++)I(Ue.location+Qe);t.bindBuffer(t.ARRAY_BUFFER,Dt);for(let Qe=0;Qe<Ue.locationSize;Qe++)B(Ue.location+Qe,st/Ue.locationSize,zt,Be,st*Fe,st/Ue.locationSize*Qe*Fe,lt)}}else if(ve!==void 0){const Be=ve[ze];if(Be!==void 0)switch(Be.length){case 2:t.vertexAttrib2fv(Ue.location,Be);break;case 3:t.vertexAttrib3fv(Ue.location,Be);break;case 4:t.vertexAttrib4fv(Ue.location,Be);break;default:t.vertexAttrib1fv(Ue.location,Be)}}}}O()}function Z(){le();for(const ie in s){const ce=s[ie];for(const fe in ce){const xe=ce[fe];for(const te in xe)x(xe[te].object),delete xe[te];delete ce[fe]}delete s[ie]}}function j(ie){if(s[ie.id]===void 0)return;const ce=s[ie.id];for(const fe in ce){const xe=ce[fe];for(const te in xe)x(xe[te].object),delete xe[te];delete ce[fe]}delete s[ie.id]}function X(ie){for(const ce in s){const fe=s[ce];if(fe[ie.id]===void 0)continue;const xe=fe[ie.id];for(const te in xe)x(xe[te].object),delete xe[te];delete fe[ie.id]}}function le(){me(),h=!0,c!==l&&(c=l,v(c.object))}function me(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:p,reset:le,resetDefaultState:me,dispose:Z,releaseStatesOfGeometry:j,releaseStatesOfProgram:X,initAttributes:C,enableAttribute:I,disableUnusedAttributes:O}}function tmt(t,e,n,r){const i=r.isWebGL2;let o;function a(h){o=h}function s(h,p){t.drawArrays(o,h,p),n.update(p,o,1)}function l(h,p,g){if(g===0)return;let v,x;if(i)v=t,x="drawArraysInstanced";else if(v=e.get("ANGLE_instanced_arrays"),x="drawArraysInstancedANGLE",v===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[x](o,h,p,g),n.update(p,o,g)}function c(h,p,g){if(g===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let x=0;x<g;x++)this.render(h[x],p[x]);else{v.multiDrawArraysWEBGL(o,h,0,p,0,g);let x=0;for(let b=0;b<g;b++)x+=p[b];n.update(x,o,1)}}this.setMode=a,this.render=s,this.renderInstances=l,this.renderMultiDraw=c}function nmt(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const B=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(B.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(B){if(B==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";B="mediump"}return B==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let s=n.precision!==void 0?n.precision:"highp";const l=o(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);const c=a||e.has("WEBGL_draw_buffers"),h=n.logarithmicDepthBuffer===!0,p=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),g=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=t.getParameter(t.MAX_TEXTURE_SIZE),x=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),b=t.getParameter(t.MAX_VERTEX_ATTRIBS),M=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),w=t.getParameter(t.MAX_VARYING_VECTORS),T=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),C=g>0,I=a||e.has("OES_texture_float"),R=C&&I,O=a?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:a,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:o,precision:s,logarithmicDepthBuffer:h,maxTextures:p,maxVertexTextures:g,maxTextureSize:v,maxCubemapSize:x,maxAttributes:b,maxVertexUniforms:M,maxVaryings:w,maxFragmentUniforms:T,vertexTextures:C,floatFragmentTextures:I,floatVertexTextures:R,maxSamples:O}}function rmt(t){const e=this;let n=null,r=0,i=!1,o=!1;const a=new ah,s=new Ir,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(p,g){const v=p.length!==0||g||r!==0||i;return i=g,r=p.length,v},this.beginShadows=function(){o=!0,h(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(p,g){n=h(p,g,0)},this.setState=function(p,g,v){const x=p.clippingPlanes,b=p.clipIntersection,M=p.clipShadows,w=t.get(p);if(!i||x===null||x.length===0||o&&!M)o?h(null):c();else{const T=o?0:r,C=T*4;let I=w.clippingState||null;l.value=I,I=h(x,g,C,v);for(let R=0;R!==C;++R)I[R]=n[R];w.clippingState=I,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=T}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function h(p,g,v,x){const b=p!==null?p.length:0;let M=null;if(b!==0){if(M=l.value,x!==!0||M===null){const w=v+b*4,T=g.matrixWorldInverse;s.getNormalMatrix(T),(M===null||M.length<w)&&(M=new Float32Array(w));for(let C=0,I=v;C!==b;++C,I+=4)a.copy(p[C]).applyMatrix4(T,s),a.normal.toArray(M,I),M[I+3]=a.constant}l.value=M,l.needsUpdate=!0}return e.numPlanes=b,e.numIntersection=0,M}}function imt(t){let e=new WeakMap;function n(a,s){return s===S2?a.mapping=em:s===M2&&(a.mapping=cy),a}function r(a){if(a&&a.isTexture){const s=a.mapping;if(s===S2||s===M2)if(e.has(a)){const l=e.get(a).texture;return n(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new zue(l.height);return c.fromEquirectangularTexture(t,a),e.set(a,c),a.addEventListener("dispose",i),n(c.texture,a.mapping)}else return null}}return a}function i(a){const s=a.target;s.removeEventListener("dispose",i);const l=e.get(s);l!==void 0&&(e.delete(s),l.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}class Rp extends BE{constructor(e=-1,n=1,r=1,i=-1,o=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=o,this.far=a,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,o,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=r-e,a=r+e,s=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=c*this.view.offsetX,a=o+c*this.view.width,s-=h*this.view.offsetY,l=s-h*this.view.height}this.projectionMatrix.makeOrthographic(o,a,s,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const L_=4,NK=[.125,.215,.35,.446,.526,.582],Wv=20,CN=new Rp,zK=new Fn;let AN=null,PN=0,kN=0;const $v=(1+Math.sqrt(5))/2,Yx=1/$v,FK=[new Oe(1,1,1),new Oe(-1,1,1),new Oe(1,1,-1),new Oe(-1,1,-1),new Oe(0,$v,Yx),new Oe(0,$v,-Yx),new Oe(Yx,0,$v),new Oe(-Yx,0,$v),new Oe($v,Yx,0),new Oe(-$v,Yx,0)];class H4{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){AN=this._renderer.getRenderTarget(),PN=this._renderer.getActiveCubeFace(),kN=this._renderer.getActiveMipmapLevel(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,r,i,o),n>0&&this._blur(o,0,0,n),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=jK(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=$K(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(AN,PN,kN),e.scissorTest=!1,DC(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===em||e.mapping===cy?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),AN=this._renderer.getRenderTarget(),PN=this._renderer.getActiveCubeFace(),kN=this._renderer.getActiveMipmapLevel();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Uo,minFilter:Uo,generateMipmaps:!1,type:Kb,format:Ul,colorSpace:dm,depthBuffer:!1},i=BK(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=BK(e,n,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=omt(o)),this._blurMaterial=smt(o,e,n)}return i}_compileMaterial(e){const n=new Rs(this._lodPlanes[0],e);this._renderer.compile(n,CN)}_sceneToCubeUV(e,n,r,i){const s=new os(90,1,n,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],h=this._renderer,p=h.autoClear,g=h.toneMapping;h.getClearColor(zK),h.toneMapping=Sh,h.autoClear=!1;const v=new Ty({name:"PMREM.Background",side:ql,depthWrite:!1,depthTest:!1}),x=new Rs(new Cy,v);let b=!1;const M=e.background;M?M.isColor&&(v.color.copy(M),e.background=null,b=!0):(v.color.copy(zK),b=!0);for(let w=0;w<6;w++){const T=w%3;T===0?(s.up.set(0,l[w],0),s.lookAt(c[w],0,0)):T===1?(s.up.set(0,0,l[w]),s.lookAt(0,c[w],0)):(s.up.set(0,l[w],0),s.lookAt(0,0,c[w]));const C=this._cubeSize;DC(i,T*C,w>2?C:0,C,C),h.setRenderTarget(i),b&&h.render(x,s),h.render(e,s)}x.geometry.dispose(),x.material.dispose(),h.toneMapping=g,h.autoClear=p,e.background=M}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===em||e.mapping===cy;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=jK()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=$K());const o=i?this._cubemapMaterial:this._equirectMaterial,a=new Rs(this._lodPlanes[0],o),s=o.uniforms;s.envMap.value=e;const l=this._cubeSize;DC(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(a,CN)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const o=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),a=FK[(i-1)%FK.length];this._blur(e,i-1,i,o,a)}n.autoClear=r}_blur(e,n,r,i,o){const a=this._pingPongRenderTarget;this._halfBlur(e,a,n,r,i,"latitudinal",o),this._halfBlur(a,e,r,r,i,"longitudinal",o)}_halfBlur(e,n,r,i,o,a,s){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,p=new Rs(this._lodPlanes[i],c),g=c.uniforms,v=this._sizeLods[r]-1,x=isFinite(o)?Math.PI/(2*v):2*Math.PI/(2*Wv-1),b=o/x,M=isFinite(o)?1+Math.floor(h*b):Wv;M>Wv&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${M} samples when the maximum is set to ${Wv}`);const w=[];let T=0;for(let B=0;B<Wv;++B){const U=B/b,Z=Math.exp(-U*U/2);w.push(Z),B===0?T+=Z:B<M&&(T+=2*Z)}for(let B=0;B<w.length;B++)w[B]=w[B]/T;g.envMap.value=e.texture,g.samples.value=M,g.weights.value=w,g.latitudinal.value=a==="latitudinal",s&&(g.poleAxis.value=s);const{_lodMax:C}=this;g.dTheta.value=x,g.mipInt.value=C-r;const I=this._sizeLods[i],R=3*I*(i>C-L_?i-C+L_:0),O=4*(this._cubeSize-I);DC(n,R,O,3*I,2*I),l.setRenderTarget(n),l.render(p,CN)}}function omt(t){const e=[],n=[],r=[];let i=t;const o=t-L_+1+NK.length;for(let a=0;a<o;a++){const s=Math.pow(2,i);n.push(s);let l=1/s;a>t-L_?l=NK[a-t+L_-1]:a===0&&(l=0),r.push(l);const c=1/(s-2),h=-c,p=1+c,g=[h,h,p,h,p,p,h,h,p,p,h,p],v=6,x=6,b=3,M=2,w=1,T=new Float32Array(b*x*v),C=new Float32Array(M*x*v),I=new Float32Array(w*x*v);for(let O=0;O<v;O++){const B=O%3*2/3-1,U=O>2?0:-1,Z=[B,U,0,B+2/3,U,0,B+2/3,U+1,0,B,U,0,B+2/3,U+1,0,B,U+1,0];T.set(Z,b*x*O),C.set(g,M*x*O);const j=[O,O,O,O,O,O];I.set(j,w*x*O)}const R=new Dr;R.setAttribute("position",new Qi(T,b)),R.setAttribute("uv",new Qi(C,M)),R.setAttribute("faceIndex",new Qi(I,w)),e.push(R),i>L_&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function BK(t,e,n){const r=new gf(t,e,n);return r.texture.mapping=F1,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function DC(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function smt(t,e,n){const r=new Float32Array(Wv),i=new Oe(0,1,0);return new yf({name:"SphericalGaussianBlur",defines:{n:Wv,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:r8(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Bp,depthTest:!1,depthWrite:!1})}function $K(){return new yf({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:r8(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Bp,depthTest:!1,depthWrite:!1})}function jK(){return new yf({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:r8(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Bp,depthTest:!1,depthWrite:!1})}function r8(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function amt(t){let e=new WeakMap,n=null;function r(s){if(s&&s.isTexture){const l=s.mapping,c=l===S2||l===M2,h=l===em||l===cy;if(c||h)if(s.isRenderTargetTexture&&s.needsPMREMUpdate===!0){s.needsPMREMUpdate=!1;let p=e.get(s);return n===null&&(n=new H4(t)),p=c?n.fromEquirectangular(s,p):n.fromCubemap(s,p),e.set(s,p),p.texture}else{if(e.has(s))return e.get(s).texture;{const p=s.image;if(c&&p&&p.height>0||h&&p&&i(p)){n===null&&(n=new H4(t));const g=c?n.fromEquirectangular(s):n.fromCubemap(s);return e.set(s,g),s.addEventListener("dispose",o),g.texture}else return null}}}return s}function i(s){let l=0;const c=6;for(let h=0;h<c;h++)s[h]!==void 0&&l++;return l===c}function o(s){const l=s.target;l.removeEventListener("dispose",o);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:a}}function lmt(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function cmt(t,e,n,r){const i={},o=new WeakMap;function a(p){const g=p.target;g.index!==null&&e.remove(g.index);for(const x in g.attributes)e.remove(g.attributes[x]);for(const x in g.morphAttributes){const b=g.morphAttributes[x];for(let M=0,w=b.length;M<w;M++)e.remove(b[M])}g.removeEventListener("dispose",a),delete i[g.id];const v=o.get(g);v&&(e.remove(v),o.delete(g)),r.releaseStatesOfGeometry(g),g.isInstancedBufferGeometry===!0&&delete g._maxInstanceCount,n.memory.geometries--}function s(p,g){return i[g.id]===!0||(g.addEventListener("dispose",a),i[g.id]=!0,n.memory.geometries++),g}function l(p){const g=p.attributes;for(const x in g)e.update(g[x],t.ARRAY_BUFFER);const v=p.morphAttributes;for(const x in v){const b=v[x];for(let M=0,w=b.length;M<w;M++)e.update(b[M],t.ARRAY_BUFFER)}}function c(p){const g=[],v=p.index,x=p.attributes.position;let b=0;if(v!==null){const T=v.array;b=v.version;for(let C=0,I=T.length;C<I;C+=3){const R=T[C+0],O=T[C+1],B=T[C+2];g.push(R,O,O,B,B,R)}}else if(x!==void 0){const T=x.array;b=x.version;for(let C=0,I=T.length/3-1;C<I;C+=3){const R=C+0,O=C+1,B=C+2;g.push(R,O,O,B,B,R)}}else return;const M=new(Pue(g)?n8:t8)(g,1);M.version=b;const w=o.get(p);w&&e.remove(w),o.set(p,M)}function h(p){const g=o.get(p);if(g){const v=p.index;v!==null&&g.version<v.version&&c(p)}else c(p);return o.get(p)}return{get:s,update:l,getWireframeAttribute:h}}function umt(t,e,n,r){const i=r.isWebGL2;let o;function a(v){o=v}let s,l;function c(v){s=v.type,l=v.bytesPerElement}function h(v,x){t.drawElements(o,x,s,v*l),n.update(x,o,1)}function p(v,x,b){if(b===0)return;let M,w;if(i)M=t,w="drawElementsInstanced";else if(M=e.get("ANGLE_instanced_arrays"),w="drawElementsInstancedANGLE",M===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}M[w](o,x,s,v*l,b),n.update(x,o,b)}function g(v,x,b){if(b===0)return;const M=e.get("WEBGL_multi_draw");if(M===null)for(let w=0;w<b;w++)this.render(v[w]/l,x[w]);else{M.multiDrawElementsWEBGL(o,x,0,s,v,0,b);let w=0;for(let T=0;T<b;T++)w+=x[T];n.update(w,o,1)}}this.setMode=a,this.setIndex=c,this.render=h,this.renderInstances=p,this.renderMultiDraw=g}function dmt(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,a,s){switch(n.calls++,a){case t.TRIANGLES:n.triangles+=s*(o/3);break;case t.LINES:n.lines+=s*(o/2);break;case t.LINE_STRIP:n.lines+=s*(o-1);break;case t.LINE_LOOP:n.lines+=s*o;break;case t.POINTS:n.points+=s*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function fmt(t,e){return t[0]-e[0]}function hmt(t,e){return Math.abs(e[1])-Math.abs(t[1])}function pmt(t,e,n){const r={},i=new Float32Array(8),o=new WeakMap,a=new zi,s=[];for(let c=0;c<8;c++)s[c]=[c,0];function l(c,h,p){const g=c.morphTargetInfluences;if(e.isWebGL2===!0){const x=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,b=x!==void 0?x.length:0;let M=o.get(h);if(M===void 0||M.count!==b){let me=function(){X.dispose(),o.delete(h),h.removeEventListener("dispose",me)};var v=me;M!==void 0&&M.texture.dispose();const w=h.morphAttributes.position!==void 0,T=h.morphAttributes.normal!==void 0,C=h.morphAttributes.color!==void 0,I=h.morphAttributes.position||[],R=h.morphAttributes.normal||[],O=h.morphAttributes.color||[];let B=0;w===!0&&(B=1),T===!0&&(B=2),C===!0&&(B=3);let U=h.attributes.position.count*B,Z=1;U>e.maxTextureSize&&(Z=Math.ceil(U/e.maxTextureSize),U=e.maxTextureSize);const j=new Float32Array(U*Z*4*b),X=new UO(j,U,Z,b);X.type=ou,X.needsUpdate=!0;const le=B*4;for(let ie=0;ie<b;ie++){const ce=I[ie],fe=R[ie],xe=O[ie],te=U*Z*4*ie;for(let he=0;he<ce.count;he++){const ve=he*le;w===!0&&(a.fromBufferAttribute(ce,he),j[te+ve+0]=a.x,j[te+ve+1]=a.y,j[te+ve+2]=a.z,j[te+ve+3]=0),T===!0&&(a.fromBufferAttribute(fe,he),j[te+ve+4]=a.x,j[te+ve+5]=a.y,j[te+ve+6]=a.z,j[te+ve+7]=0),C===!0&&(a.fromBufferAttribute(xe,he),j[te+ve+8]=a.x,j[te+ve+9]=a.y,j[te+ve+10]=a.z,j[te+ve+11]=xe.itemSize===4?a.w:1)}}M={count:b,texture:X,size:new Ht(U,Z)},o.set(h,M),h.addEventListener("dispose",me)}if(c.isInstancedMesh===!0&&c.morphTexture!==null)p.getUniforms().setValue(t,"morphTexture",c.morphTexture,n);else{let w=0;for(let C=0;C<g.length;C++)w+=g[C];const T=h.morphTargetsRelative?1:1-w;p.getUniforms().setValue(t,"morphTargetBaseInfluence",T),p.getUniforms().setValue(t,"morphTargetInfluences",g)}p.getUniforms().setValue(t,"morphTargetsTexture",M.texture,n),p.getUniforms().setValue(t,"morphTargetsTextureSize",M.size)}else{const x=g===void 0?0:g.length;let b=r[h.id];if(b===void 0||b.length!==x){b=[];for(let I=0;I<x;I++)b[I]=[I,0];r[h.id]=b}for(let I=0;I<x;I++){const R=b[I];R[0]=I,R[1]=g[I]}b.sort(hmt);for(let I=0;I<8;I++)I<x&&b[I][1]?(s[I][0]=b[I][0],s[I][1]=b[I][1]):(s[I][0]=Number.MAX_SAFE_INTEGER,s[I][1]=0);s.sort(fmt);const M=h.morphAttributes.position,w=h.morphAttributes.normal;let T=0;for(let I=0;I<8;I++){const R=s[I],O=R[0],B=R[1];O!==Number.MAX_SAFE_INTEGER&&B?(M&&h.getAttribute("morphTarget"+I)!==M[O]&&h.setAttribute("morphTarget"+I,M[O]),w&&h.getAttribute("morphNormal"+I)!==w[O]&&h.setAttribute("morphNormal"+I,w[O]),i[I]=B,T+=B):(M&&h.hasAttribute("morphTarget"+I)===!0&&h.deleteAttribute("morphTarget"+I),w&&h.hasAttribute("morphNormal"+I)===!0&&h.deleteAttribute("morphNormal"+I),i[I]=0)}const C=h.morphTargetsRelative?1:1-T;p.getUniforms().setValue(t,"morphTargetBaseInfluence",C),p.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:l}}function mmt(t,e,n,r){let i=new WeakMap;function o(l){const c=r.render.frame,h=l.geometry,p=e.get(l,h);if(i.get(p)!==c&&(e.update(p),i.set(p,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",s)===!1&&l.addEventListener("dispose",s),i.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const g=l.skeleton;i.get(g)!==c&&(g.update(),i.set(g,c))}return p}function a(){i=new WeakMap}function s(l){const c=l.target;c.removeEventListener("dispose",s),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:o,dispose:a}}class i8 extends Go{constructor(e,n,r,i,o,a,s,l,c,h){if(h=h!==void 0?h:Qg,h!==Qg&&h!==N0)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&h===Qg&&(r=Ip),r===void 0&&h===N0&&(r=Jg),super(null,i,o,a,s,l,h,r,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=s!==void 0?s:xs,this.minFilter=l!==void 0?l:xs,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const Bue=new Go,$ue=new i8(1,1);$ue.compareFunction=Z6;const jue=new UO,Uue=new e8,Vue=new $E,UK=[],VK=[],WK=new Float32Array(16),HK=new Float32Array(9),GK=new Float32Array(4);function $1(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=UK[i];if(o===void 0&&(o=new Float32Array(i),UK[i]=o),e!==0){r.toArray(o,0);for(let a=1,s=0;a!==e;++a)s+=n,t[a].toArray(o,s)}return o}function ra(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function ia(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function VO(t,e){let n=VK[e];n===void 0&&(n=new Int32Array(e),VK[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function gmt(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function ymt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ra(n,e))return;t.uniform2fv(this.addr,e),ia(n,e)}}function vmt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(ra(n,e))return;t.uniform3fv(this.addr,e),ia(n,e)}}function xmt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ra(n,e))return;t.uniform4fv(this.addr,e),ia(n,e)}}function _mt(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(ra(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),ia(n,e)}else{if(ra(n,r))return;GK.set(r),t.uniformMatrix2fv(this.addr,!1,GK),ia(n,r)}}function bmt(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(ra(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),ia(n,e)}else{if(ra(n,r))return;HK.set(r),t.uniformMatrix3fv(this.addr,!1,HK),ia(n,r)}}function wmt(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(ra(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),ia(n,e)}else{if(ra(n,r))return;WK.set(r),t.uniformMatrix4fv(this.addr,!1,WK),ia(n,r)}}function Smt(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Mmt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ra(n,e))return;t.uniform2iv(this.addr,e),ia(n,e)}}function Emt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(ra(n,e))return;t.uniform3iv(this.addr,e),ia(n,e)}}function Tmt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ra(n,e))return;t.uniform4iv(this.addr,e),ia(n,e)}}function Cmt(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Amt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ra(n,e))return;t.uniform2uiv(this.addr,e),ia(n,e)}}function Pmt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(ra(n,e))return;t.uniform3uiv(this.addr,e),ia(n,e)}}function kmt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ra(n,e))return;t.uniform4uiv(this.addr,e),ia(n,e)}}function Imt(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);const o=this.type===t.SAMPLER_2D_SHADOW?$ue:Bue;n.setTexture2D(e||o,i)}function Rmt(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Uue,i)}function Omt(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||Vue,i)}function Lmt(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||jue,i)}function Dmt(t){switch(t){case 5126:return gmt;case 35664:return ymt;case 35665:return vmt;case 35666:return xmt;case 35674:return _mt;case 35675:return bmt;case 35676:return wmt;case 5124:case 35670:return Smt;case 35667:case 35671:return Mmt;case 35668:case 35672:return Emt;case 35669:case 35673:return Tmt;case 5125:return Cmt;case 36294:return Amt;case 36295:return Pmt;case 36296:return kmt;case 35678:case 36198:case 36298:case 36306:case 35682:return Imt;case 35679:case 36299:case 36307:return Rmt;case 35680:case 36300:case 36308:case 36293:return Omt;case 36289:case 36303:case 36311:case 36292:return Lmt}}function Nmt(t,e){t.uniform1fv(this.addr,e)}function zmt(t,e){const n=$1(e,this.size,2);t.uniform2fv(this.addr,n)}function Fmt(t,e){const n=$1(e,this.size,3);t.uniform3fv(this.addr,n)}function Bmt(t,e){const n=$1(e,this.size,4);t.uniform4fv(this.addr,n)}function $mt(t,e){const n=$1(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function jmt(t,e){const n=$1(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Umt(t,e){const n=$1(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Vmt(t,e){t.uniform1iv(this.addr,e)}function Wmt(t,e){t.uniform2iv(this.addr,e)}function Hmt(t,e){t.uniform3iv(this.addr,e)}function Gmt(t,e){t.uniform4iv(this.addr,e)}function qmt(t,e){t.uniform1uiv(this.addr,e)}function Ymt(t,e){t.uniform2uiv(this.addr,e)}function Xmt(t,e){t.uniform3uiv(this.addr,e)}function Kmt(t,e){t.uniform4uiv(this.addr,e)}function Zmt(t,e,n){const r=this.cache,i=e.length,o=VO(n,i);ra(r,o)||(t.uniform1iv(this.addr,o),ia(r,o));for(let a=0;a!==i;++a)n.setTexture2D(e[a]||Bue,o[a])}function Jmt(t,e,n){const r=this.cache,i=e.length,o=VO(n,i);ra(r,o)||(t.uniform1iv(this.addr,o),ia(r,o));for(let a=0;a!==i;++a)n.setTexture3D(e[a]||Uue,o[a])}function Qmt(t,e,n){const r=this.cache,i=e.length,o=VO(n,i);ra(r,o)||(t.uniform1iv(this.addr,o),ia(r,o));for(let a=0;a!==i;++a)n.setTextureCube(e[a]||Vue,o[a])}function egt(t,e,n){const r=this.cache,i=e.length,o=VO(n,i);ra(r,o)||(t.uniform1iv(this.addr,o),ia(r,o));for(let a=0;a!==i;++a)n.setTexture2DArray(e[a]||jue,o[a])}function tgt(t){switch(t){case 5126:return Nmt;case 35664:return zmt;case 35665:return Fmt;case 35666:return Bmt;case 35674:return $mt;case 35675:return jmt;case 35676:return Umt;case 5124:case 35670:return Vmt;case 35667:case 35671:return Wmt;case 35668:case 35672:return Hmt;case 35669:case 35673:return Gmt;case 5125:return qmt;case 36294:return Ymt;case 36295:return Xmt;case 36296:return Kmt;case 35678:case 36198:case 36298:case 36306:case 35682:return Zmt;case 35679:case 36299:case 36307:return Jmt;case 35680:case 36300:case 36308:case 36293:return Qmt;case 36289:case 36303:case 36311:case 36292:return egt}}class ngt{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=Dmt(n.type)}}class rgt{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=tgt(n.type)}}class igt{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let o=0,a=i.length;o!==a;++o){const s=i[o];s.setValue(e,n[s.id],r)}}}const IN=/(\w+)(\])?(\[|\.)?/g;function qK(t,e){t.seq.push(e),t.map[e.id]=e}function ogt(t,e,n){const r=t.name,i=r.length;for(IN.lastIndex=0;;){const o=IN.exec(r),a=IN.lastIndex;let s=o[1];const l=o[2]==="]",c=o[3];if(l&&(s=s|0),c===void 0||c==="["&&a+2===i){qK(n,c===void 0?new ngt(s,t,e):new rgt(s,t,e));break}else{let p=n.map[s];p===void 0&&(p=new igt(s),qK(n,p)),n=p}}}class qA{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const o=e.getActiveUniform(n,i),a=e.getUniformLocation(n,o.name);ogt(o,a,this)}}setValue(e,n,r,i){const o=this.map[n];o!==void 0&&o.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let o=0,a=n.length;o!==a;++o){const s=n[o],l=r[s.id];l.needsUpdate!==!1&&s.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,o=e.length;i!==o;++i){const a=e[i];a.id in n&&r.push(a)}return r}}function YK(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const sgt=37297;let agt=0;function lgt(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let a=i;a<o;a++){const s=a+1;r.push(`${s===e?">":" "} ${s}: ${n[a]}`)}return r.join(`
`)}function cgt(t){const e=Ni.getPrimaries(Ni.workingColorSpace),n=Ni.getPrimaries(t);let r;switch(e===n?r="":e===R2&&n===I2?r="LinearDisplayP3ToLinearSRGB":e===I2&&n===R2&&(r="LinearSRGBToLinearDisplayP3"),t){case dm:case FE:return[r,"LinearTransferOETF"];case Yu:case jO:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[r,"LinearTransferOETF"]}}function XK(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const a=parseInt(o[1]);return n.toUpperCase()+`

`+i+`

`+lgt(t.getShaderSource(e),a)}else return i}function ugt(t,e){const n=cgt(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function dgt(t,e){let n;switch(e){case tue:n="Linear";break;case nue:n="Reinhard";break;case rue:n="OptimizedCineon";break;case j6:n="ACESFilmic";break;case oue:n="AgX";break;case sue:n="Neutral";break;case iue:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function fgt(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.alphaToCoverage||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(D_).join(`
`)}function hgt(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(D_).join(`
`)}function pgt(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function mgt(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const o=t.getActiveAttrib(e,i),a=o.name;let s=1;o.type===t.FLOAT_MAT2&&(s=2),o.type===t.FLOAT_MAT3&&(s=3),o.type===t.FLOAT_MAT4&&(s=4),n[a]={type:o.type,location:t.getAttribLocation(e,a),locationSize:s}}return n}function D_(t){return t!==""}function KK(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function ZK(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const ggt=/^[ \t]*#include +<([\w\d./]+)>/gm;function G4(t){return t.replace(ggt,vgt)}const ygt=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function vgt(t,e){let n=zr[e];if(n===void 0){const r=ygt.get(e);if(r!==void 0)n=zr[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return G4(n)}const xgt=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function JK(t){return t.replace(xgt,_gt)}function _gt(t,e,n,r){let i="";for(let o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function QK(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	`;return t.isWebGL2&&(e+=`precision ${t.precision} sampler3D;
		precision ${t.precision} sampler2DArray;
		precision ${t.precision} sampler2DShadow;
		precision ${t.precision} samplerCubeShadow;
		precision ${t.precision} sampler2DArrayShadow;
		precision ${t.precision} isampler2D;
		precision ${t.precision} isampler3D;
		precision ${t.precision} isamplerCube;
		precision ${t.precision} isampler2DArray;
		precision ${t.precision} usampler2D;
		precision ${t.precision} usampler3D;
		precision ${t.precision} usamplerCube;
		precision ${t.precision} usampler2DArray;
		`),t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function bgt(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===zO?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===KS?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Xd&&(e="SHADOWMAP_TYPE_VSM"),e}function wgt(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case em:case cy:e="ENVMAP_TYPE_CUBE";break;case F1:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Sgt(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case cy:e="ENVMAP_MODE_REFRACTION";break}return e}function Mgt(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case zE:e="ENVMAP_BLENDING_MULTIPLY";break;case Qce:e="ENVMAP_BLENDING_MIX";break;case eue:e="ENVMAP_BLENDING_ADD";break}return e}function Egt(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function Tgt(t,e,n,r){const i=t.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const l=bgt(n),c=wgt(n),h=Sgt(n),p=Mgt(n),g=Egt(n),v=n.isWebGL2?"":fgt(n),x=hgt(n),b=pgt(o),M=i.createProgram();let w,T,C=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(w=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b].filter(D_).join(`
`),w.length>0&&(w+=`
`),T=[v,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b].filter(D_).join(`
`),T.length>0&&(T+=`
`)):(w=[QK(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(D_).join(`
`),T=[v,QK(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",n.envMap?"#define "+p:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Sh?"#define TONE_MAPPING":"",n.toneMapping!==Sh?zr.tonemapping_pars_fragment:"",n.toneMapping!==Sh?dgt("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",zr.colorspace_pars_fragment,ugt("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(D_).join(`
`)),a=G4(a),a=KK(a,n),a=ZK(a,n),s=G4(s),s=KK(s,n),s=ZK(s,n),a=JK(a),s=JK(s),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,w=[x,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,T=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===V4?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===V4?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+T);const I=C+w+a,R=C+T+s,O=YK(i,i.VERTEX_SHADER,I),B=YK(i,i.FRAGMENT_SHADER,R);i.attachShader(M,O),i.attachShader(M,B),n.index0AttributeName!==void 0?i.bindAttribLocation(M,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(M,0,"position"),i.linkProgram(M);function U(le){if(t.debug.checkShaderErrors){const me=i.getProgramInfoLog(M).trim(),ie=i.getShaderInfoLog(O).trim(),ce=i.getShaderInfoLog(B).trim();let fe=!0,xe=!0;if(i.getProgramParameter(M,i.LINK_STATUS)===!1)if(fe=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,M,O,B);else{const te=XK(i,O,"vertex"),he=XK(i,B,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(M,i.VALIDATE_STATUS)+`

Material Name: `+le.name+`
Material Type: `+le.type+`

Program Info Log: `+me+`
`+te+`
`+he)}else me!==""?console.warn("THREE.WebGLProgram: Program Info Log:",me):(ie===""||ce==="")&&(xe=!1);xe&&(le.diagnostics={runnable:fe,programLog:me,vertexShader:{log:ie,prefix:w},fragmentShader:{log:ce,prefix:T}})}i.deleteShader(O),i.deleteShader(B),Z=new qA(i,M),j=mgt(i,M)}let Z;this.getUniforms=function(){return Z===void 0&&U(this),Z};let j;this.getAttributes=function(){return j===void 0&&U(this),j};let X=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return X===!1&&(X=i.getProgramParameter(M,sgt)),X},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(M),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=agt++,this.cacheKey=e,this.usedTimes=1,this.program=M,this.vertexShader=O,this.fragmentShader=B,this}let Cgt=0;class Agt{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),o=this._getShaderStage(r),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(o)===!1&&(a.add(o),o.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new Pgt(e),n.set(e,r)),r}}class Pgt{constructor(e){this.id=Cgt++,this.code=e,this.usedTimes=0}}function kgt(t,e,n,r,i,o,a){const s=new _0,l=new Agt,c=new Set,h=[],p=i.isWebGL2,g=i.logarithmicDepthBuffer,v=i.vertexTextures;let x=i.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function M(j){return c.add(j),j===0?"uv":`uv${j}`}function w(j,X,le,me,ie){const ce=me.fog,fe=ie.geometry,xe=j.isMeshStandardMaterial?me.environment:null,te=(j.isMeshStandardMaterial?n:e).get(j.envMap||xe),he=te&&te.mapping===F1?te.image.height:null,ve=b[j.type];j.precision!==null&&(x=i.getMaxPrecision(j.precision),x!==j.precision&&console.warn("THREE.WebGLProgram.getParameters:",j.precision,"not supported, using",x,"instead."));const ze=fe.morphAttributes.position||fe.morphAttributes.normal||fe.morphAttributes.color,Ue=ze!==void 0?ze.length:0;let rt=0;fe.morphAttributes.position!==void 0&&(rt=1),fe.morphAttributes.normal!==void 0&&(rt=2),fe.morphAttributes.color!==void 0&&(rt=3);let Be,st,ct,Dt;if(ve){const Te=rf[ve];Be=Te.vertexShader,st=Te.fragmentShader}else Be=j.vertexShader,st=j.fragmentShader,l.update(j),ct=l.getVertexShaderID(j),Dt=l.getFragmentShaderID(j);const zt=t.getRenderTarget(),Fe=ie.isInstancedMesh===!0,lt=ie.isBatchedMesh===!0,Qe=!!j.map,ge=!!j.matcap,et=!!te,ot=!!j.aoMap,Tt=!!j.lightMap,Ct=!!j.bumpMap,Bt=!!j.normalMap,Gt=!!j.displacementMap,sn=!!j.emissiveMap,Je=!!j.metalnessMap,Ce=!!j.roughnessMap,_e=j.anisotropy>0,ht=j.clearcoat>0,dt=j.iridescence>0,Wt=j.sheen>0,jt=j.transmission>0,Sn=_e&&!!j.anisotropyMap,cn=ht&&!!j.clearcoatMap,Rt=ht&&!!j.clearcoatNormalMap,nn=ht&&!!j.clearcoatRoughnessMap,An=dt&&!!j.iridescenceMap,mt=dt&&!!j.iridescenceThicknessMap,un=Wt&&!!j.sheenColorMap,an=Wt&&!!j.sheenRoughnessMap,Ot=!!j.specularMap,Ie=!!j.specularColorMap,Ve=!!j.specularIntensityMap,Me=jt&&!!j.transmissionMap,it=jt&&!!j.thicknessMap,Qt=!!j.gradientMap,Xe=!!j.alphaMap,It=j.alphaTest>0,Et=!!j.alphaHash,we=!!j.extensions;let oe=Sh;j.toneMapped&&(zt===null||zt.isXRRenderTarget===!0)&&(oe=t.toneMapping);const pe={isWebGL2:p,shaderID:ve,shaderType:j.type,shaderName:j.name,vertexShader:Be,fragmentShader:st,defines:j.defines,customVertexShaderID:ct,customFragmentShaderID:Dt,isRawShaderMaterial:j.isRawShaderMaterial===!0,glslVersion:j.glslVersion,precision:x,batching:lt,instancing:Fe,instancingColor:Fe&&ie.instanceColor!==null,instancingMorph:Fe&&ie.morphTexture!==null,supportsVertexTextures:v,outputColorSpace:zt===null?t.outputColorSpace:zt.isXRRenderTarget===!0?zt.texture.colorSpace:dm,alphaToCoverage:!!j.alphaToCoverage,map:Qe,matcap:ge,envMap:et,envMapMode:et&&te.mapping,envMapCubeUVHeight:he,aoMap:ot,lightMap:Tt,bumpMap:Ct,normalMap:Bt,displacementMap:v&&Gt,emissiveMap:sn,normalMapObjectSpace:Bt&&j.normalMapType===_ue,normalMapTangentSpace:Bt&&j.normalMapType===My,metalnessMap:Je,roughnessMap:Ce,anisotropy:_e,anisotropyMap:Sn,clearcoat:ht,clearcoatMap:cn,clearcoatNormalMap:Rt,clearcoatRoughnessMap:nn,iridescence:dt,iridescenceMap:An,iridescenceThicknessMap:mt,sheen:Wt,sheenColorMap:un,sheenRoughnessMap:an,specularMap:Ot,specularColorMap:Ie,specularIntensityMap:Ve,transmission:jt,transmissionMap:Me,thicknessMap:it,gradientMap:Qt,opaque:j.transparent===!1&&j.blending===v0&&j.alphaToCoverage===!1,alphaMap:Xe,alphaTest:It,alphaHash:Et,combine:j.combine,mapUv:Qe&&M(j.map.channel),aoMapUv:ot&&M(j.aoMap.channel),lightMapUv:Tt&&M(j.lightMap.channel),bumpMapUv:Ct&&M(j.bumpMap.channel),normalMapUv:Bt&&M(j.normalMap.channel),displacementMapUv:Gt&&M(j.displacementMap.channel),emissiveMapUv:sn&&M(j.emissiveMap.channel),metalnessMapUv:Je&&M(j.metalnessMap.channel),roughnessMapUv:Ce&&M(j.roughnessMap.channel),anisotropyMapUv:Sn&&M(j.anisotropyMap.channel),clearcoatMapUv:cn&&M(j.clearcoatMap.channel),clearcoatNormalMapUv:Rt&&M(j.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:nn&&M(j.clearcoatRoughnessMap.channel),iridescenceMapUv:An&&M(j.iridescenceMap.channel),iridescenceThicknessMapUv:mt&&M(j.iridescenceThicknessMap.channel),sheenColorMapUv:un&&M(j.sheenColorMap.channel),sheenRoughnessMapUv:an&&M(j.sheenRoughnessMap.channel),specularMapUv:Ot&&M(j.specularMap.channel),specularColorMapUv:Ie&&M(j.specularColorMap.channel),specularIntensityMapUv:Ve&&M(j.specularIntensityMap.channel),transmissionMapUv:Me&&M(j.transmissionMap.channel),thicknessMapUv:it&&M(j.thicknessMap.channel),alphaMapUv:Xe&&M(j.alphaMap.channel),vertexTangents:!!fe.attributes.tangent&&(Bt||_e),vertexColors:j.vertexColors,vertexAlphas:j.vertexColors===!0&&!!fe.attributes.color&&fe.attributes.color.itemSize===4,pointsUvs:ie.isPoints===!0&&!!fe.attributes.uv&&(Qe||Xe),fog:!!ce,useFog:j.fog===!0,fogExp2:!!ce&&ce.isFogExp2,flatShading:j.flatShading===!0,sizeAttenuation:j.sizeAttenuation===!0,logarithmicDepthBuffer:g,skinning:ie.isSkinnedMesh===!0,morphTargets:fe.morphAttributes.position!==void 0,morphNormals:fe.morphAttributes.normal!==void 0,morphColors:fe.morphAttributes.color!==void 0,morphTargetsCount:Ue,morphTextureStride:rt,numDirLights:X.directional.length,numPointLights:X.point.length,numSpotLights:X.spot.length,numSpotLightMaps:X.spotLightMap.length,numRectAreaLights:X.rectArea.length,numHemiLights:X.hemi.length,numDirLightShadows:X.directionalShadowMap.length,numPointLightShadows:X.pointShadowMap.length,numSpotLightShadows:X.spotShadowMap.length,numSpotLightShadowsWithMaps:X.numSpotLightShadowsWithMaps,numLightProbes:X.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:j.dithering,shadowMapEnabled:t.shadowMap.enabled&&le.length>0,shadowMapType:t.shadowMap.type,toneMapping:oe,useLegacyLights:t._useLegacyLights,decodeVideoTexture:Qe&&j.map.isVideoTexture===!0&&Ni.getTransfer(j.map.colorSpace)===fo,premultipliedAlpha:j.premultipliedAlpha,doubleSided:j.side===af,flipSided:j.side===ql,useDepthPacking:j.depthPacking>=0,depthPacking:j.depthPacking||0,index0AttributeName:j.index0AttributeName,extensionDerivatives:we&&j.extensions.derivatives===!0,extensionFragDepth:we&&j.extensions.fragDepth===!0,extensionDrawBuffers:we&&j.extensions.drawBuffers===!0,extensionShaderTextureLOD:we&&j.extensions.shaderTextureLOD===!0,extensionClipCullDistance:we&&j.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:we&&j.extensions.multiDraw===!0&&r.has("WEBGL_multi_draw"),rendererExtensionFragDepth:p||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:p||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:p||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:j.customProgramCacheKey()};return pe.vertexUv1s=c.has(1),pe.vertexUv2s=c.has(2),pe.vertexUv3s=c.has(3),c.clear(),pe}function T(j){const X=[];if(j.shaderID?X.push(j.shaderID):(X.push(j.customVertexShaderID),X.push(j.customFragmentShaderID)),j.defines!==void 0)for(const le in j.defines)X.push(le),X.push(j.defines[le]);return j.isRawShaderMaterial===!1&&(C(X,j),I(X,j),X.push(t.outputColorSpace)),X.push(j.customProgramCacheKey),X.join()}function C(j,X){j.push(X.precision),j.push(X.outputColorSpace),j.push(X.envMapMode),j.push(X.envMapCubeUVHeight),j.push(X.mapUv),j.push(X.alphaMapUv),j.push(X.lightMapUv),j.push(X.aoMapUv),j.push(X.bumpMapUv),j.push(X.normalMapUv),j.push(X.displacementMapUv),j.push(X.emissiveMapUv),j.push(X.metalnessMapUv),j.push(X.roughnessMapUv),j.push(X.anisotropyMapUv),j.push(X.clearcoatMapUv),j.push(X.clearcoatNormalMapUv),j.push(X.clearcoatRoughnessMapUv),j.push(X.iridescenceMapUv),j.push(X.iridescenceThicknessMapUv),j.push(X.sheenColorMapUv),j.push(X.sheenRoughnessMapUv),j.push(X.specularMapUv),j.push(X.specularColorMapUv),j.push(X.specularIntensityMapUv),j.push(X.transmissionMapUv),j.push(X.thicknessMapUv),j.push(X.combine),j.push(X.fogExp2),j.push(X.sizeAttenuation),j.push(X.morphTargetsCount),j.push(X.morphAttributeCount),j.push(X.numDirLights),j.push(X.numPointLights),j.push(X.numSpotLights),j.push(X.numSpotLightMaps),j.push(X.numHemiLights),j.push(X.numRectAreaLights),j.push(X.numDirLightShadows),j.push(X.numPointLightShadows),j.push(X.numSpotLightShadows),j.push(X.numSpotLightShadowsWithMaps),j.push(X.numLightProbes),j.push(X.shadowMapType),j.push(X.toneMapping),j.push(X.numClippingPlanes),j.push(X.numClipIntersection),j.push(X.depthPacking)}function I(j,X){s.disableAll(),X.isWebGL2&&s.enable(0),X.supportsVertexTextures&&s.enable(1),X.instancing&&s.enable(2),X.instancingColor&&s.enable(3),X.instancingMorph&&s.enable(4),X.matcap&&s.enable(5),X.envMap&&s.enable(6),X.normalMapObjectSpace&&s.enable(7),X.normalMapTangentSpace&&s.enable(8),X.clearcoat&&s.enable(9),X.iridescence&&s.enable(10),X.alphaTest&&s.enable(11),X.vertexColors&&s.enable(12),X.vertexAlphas&&s.enable(13),X.vertexUv1s&&s.enable(14),X.vertexUv2s&&s.enable(15),X.vertexUv3s&&s.enable(16),X.vertexTangents&&s.enable(17),X.anisotropy&&s.enable(18),X.alphaHash&&s.enable(19),X.batching&&s.enable(20),j.push(s.mask),s.disableAll(),X.fog&&s.enable(0),X.useFog&&s.enable(1),X.flatShading&&s.enable(2),X.logarithmicDepthBuffer&&s.enable(3),X.skinning&&s.enable(4),X.morphTargets&&s.enable(5),X.morphNormals&&s.enable(6),X.morphColors&&s.enable(7),X.premultipliedAlpha&&s.enable(8),X.shadowMapEnabled&&s.enable(9),X.useLegacyLights&&s.enable(10),X.doubleSided&&s.enable(11),X.flipSided&&s.enable(12),X.useDepthPacking&&s.enable(13),X.dithering&&s.enable(14),X.transmission&&s.enable(15),X.sheen&&s.enable(16),X.opaque&&s.enable(17),X.pointsUvs&&s.enable(18),X.decodeVideoTexture&&s.enable(19),X.alphaToCoverage&&s.enable(20),j.push(s.mask)}function R(j){const X=b[j.type];let le;if(X){const me=rf[X];le=Due.clone(me.uniforms)}else le=j.uniforms;return le}function O(j,X){let le;for(let me=0,ie=h.length;me<ie;me++){const ce=h[me];if(ce.cacheKey===X){le=ce,++le.usedTimes;break}}return le===void 0&&(le=new Tgt(t,X,j,o),h.push(le)),le}function B(j){if(--j.usedTimes===0){const X=h.indexOf(j);h[X]=h[h.length-1],h.pop(),j.destroy()}}function U(j){l.remove(j)}function Z(){l.dispose()}return{getParameters:w,getProgramCacheKey:T,getUniforms:R,acquireProgram:O,releaseProgram:B,releaseShaderCache:U,programs:h,dispose:Z}}function Igt(){let t=new WeakMap;function e(o){let a=t.get(o);return a===void 0&&(a={},t.set(o,a)),a}function n(o){t.delete(o)}function r(o,a,s){t.get(o)[a]=s}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function Rgt(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function eZ(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function tZ(){const t=[];let e=0;const n=[],r=[],i=[];function o(){e=0,n.length=0,r.length=0,i.length=0}function a(p,g,v,x,b,M){let w=t[e];return w===void 0?(w={id:p.id,object:p,geometry:g,material:v,groupOrder:x,renderOrder:p.renderOrder,z:b,group:M},t[e]=w):(w.id=p.id,w.object=p,w.geometry=g,w.material=v,w.groupOrder=x,w.renderOrder=p.renderOrder,w.z=b,w.group=M),e++,w}function s(p,g,v,x,b,M){const w=a(p,g,v,x,b,M);v.transmission>0?r.push(w):v.transparent===!0?i.push(w):n.push(w)}function l(p,g,v,x,b,M){const w=a(p,g,v,x,b,M);v.transmission>0?r.unshift(w):v.transparent===!0?i.unshift(w):n.unshift(w)}function c(p,g){n.length>1&&n.sort(p||Rgt),r.length>1&&r.sort(g||eZ),i.length>1&&i.sort(g||eZ)}function h(){for(let p=e,g=t.length;p<g;p++){const v=t[p];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:n,transmissive:r,transparent:i,init:o,push:s,unshift:l,finish:h,sort:c}}function Ogt(){let t=new WeakMap;function e(r,i){const o=t.get(r);let a;return o===void 0?(a=new tZ,t.set(r,[a])):i>=o.length?(a=new tZ,o.push(a)):a=o[i],a}function n(){t=new WeakMap}return{get:e,dispose:n}}function Lgt(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Oe,color:new Fn};break;case"SpotLight":n={position:new Oe,direction:new Oe,color:new Fn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Oe,color:new Fn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Oe,skyColor:new Fn,groundColor:new Fn};break;case"RectAreaLight":n={color:new Fn,position:new Oe,halfWidth:new Oe,halfHeight:new Oe};break}return t[e.id]=n,n}}}function Dgt(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ht};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ht};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ht,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let Ngt=0;function zgt(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Fgt(t,e){const n=new Lgt,r=Dgt(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)i.probe.push(new Oe);const o=new Oe,a=new xr,s=new xr;function l(h,p){let g=0,v=0,x=0;for(let le=0;le<9;le++)i.probe[le].set(0,0,0);let b=0,M=0,w=0,T=0,C=0,I=0,R=0,O=0,B=0,U=0,Z=0;h.sort(zgt);const j=p===!0?Math.PI:1;for(let le=0,me=h.length;le<me;le++){const ie=h[le],ce=ie.color,fe=ie.intensity,xe=ie.distance,te=ie.shadow&&ie.shadow.map?ie.shadow.map.texture:null;if(ie.isAmbientLight)g+=ce.r*fe*j,v+=ce.g*fe*j,x+=ce.b*fe*j;else if(ie.isLightProbe){for(let he=0;he<9;he++)i.probe[he].addScaledVector(ie.sh.coefficients[he],fe);Z++}else if(ie.isDirectionalLight){const he=n.get(ie);if(he.color.copy(ie.color).multiplyScalar(ie.intensity*j),ie.castShadow){const ve=ie.shadow,ze=r.get(ie);ze.shadowBias=ve.bias,ze.shadowNormalBias=ve.normalBias,ze.shadowRadius=ve.radius,ze.shadowMapSize=ve.mapSize,i.directionalShadow[b]=ze,i.directionalShadowMap[b]=te,i.directionalShadowMatrix[b]=ie.shadow.matrix,I++}i.directional[b]=he,b++}else if(ie.isSpotLight){const he=n.get(ie);he.position.setFromMatrixPosition(ie.matrixWorld),he.color.copy(ce).multiplyScalar(fe*j),he.distance=xe,he.coneCos=Math.cos(ie.angle),he.penumbraCos=Math.cos(ie.angle*(1-ie.penumbra)),he.decay=ie.decay,i.spot[w]=he;const ve=ie.shadow;if(ie.map&&(i.spotLightMap[B]=ie.map,B++,ve.updateMatrices(ie),ie.castShadow&&U++),i.spotLightMatrix[w]=ve.matrix,ie.castShadow){const ze=r.get(ie);ze.shadowBias=ve.bias,ze.shadowNormalBias=ve.normalBias,ze.shadowRadius=ve.radius,ze.shadowMapSize=ve.mapSize,i.spotShadow[w]=ze,i.spotShadowMap[w]=te,O++}w++}else if(ie.isRectAreaLight){const he=n.get(ie);he.color.copy(ce).multiplyScalar(fe),he.halfWidth.set(ie.width*.5,0,0),he.halfHeight.set(0,ie.height*.5,0),i.rectArea[T]=he,T++}else if(ie.isPointLight){const he=n.get(ie);if(he.color.copy(ie.color).multiplyScalar(ie.intensity*j),he.distance=ie.distance,he.decay=ie.decay,ie.castShadow){const ve=ie.shadow,ze=r.get(ie);ze.shadowBias=ve.bias,ze.shadowNormalBias=ve.normalBias,ze.shadowRadius=ve.radius,ze.shadowMapSize=ve.mapSize,ze.shadowCameraNear=ve.camera.near,ze.shadowCameraFar=ve.camera.far,i.pointShadow[M]=ze,i.pointShadowMap[M]=te,i.pointShadowMatrix[M]=ie.shadow.matrix,R++}i.point[M]=he,M++}else if(ie.isHemisphereLight){const he=n.get(ie);he.skyColor.copy(ie.color).multiplyScalar(fe*j),he.groundColor.copy(ie.groundColor).multiplyScalar(fe*j),i.hemi[C]=he,C++}}T>0&&(e.isWebGL2?t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Mn.LTC_FLOAT_1,i.rectAreaLTC2=Mn.LTC_FLOAT_2):(i.rectAreaLTC1=Mn.LTC_HALF_1,i.rectAreaLTC2=Mn.LTC_HALF_2):t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Mn.LTC_FLOAT_1,i.rectAreaLTC2=Mn.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Mn.LTC_HALF_1,i.rectAreaLTC2=Mn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=g,i.ambient[1]=v,i.ambient[2]=x;const X=i.hash;(X.directionalLength!==b||X.pointLength!==M||X.spotLength!==w||X.rectAreaLength!==T||X.hemiLength!==C||X.numDirectionalShadows!==I||X.numPointShadows!==R||X.numSpotShadows!==O||X.numSpotMaps!==B||X.numLightProbes!==Z)&&(i.directional.length=b,i.spot.length=w,i.rectArea.length=T,i.point.length=M,i.hemi.length=C,i.directionalShadow.length=I,i.directionalShadowMap.length=I,i.pointShadow.length=R,i.pointShadowMap.length=R,i.spotShadow.length=O,i.spotShadowMap.length=O,i.directionalShadowMatrix.length=I,i.pointShadowMatrix.length=R,i.spotLightMatrix.length=O+B-U,i.spotLightMap.length=B,i.numSpotLightShadowsWithMaps=U,i.numLightProbes=Z,X.directionalLength=b,X.pointLength=M,X.spotLength=w,X.rectAreaLength=T,X.hemiLength=C,X.numDirectionalShadows=I,X.numPointShadows=R,X.numSpotShadows=O,X.numSpotMaps=B,X.numLightProbes=Z,i.version=Ngt++)}function c(h,p){let g=0,v=0,x=0,b=0,M=0;const w=p.matrixWorldInverse;for(let T=0,C=h.length;T<C;T++){const I=h[T];if(I.isDirectionalLight){const R=i.directional[g];R.direction.setFromMatrixPosition(I.matrixWorld),o.setFromMatrixPosition(I.target.matrixWorld),R.direction.sub(o),R.direction.transformDirection(w),g++}else if(I.isSpotLight){const R=i.spot[x];R.position.setFromMatrixPosition(I.matrixWorld),R.position.applyMatrix4(w),R.direction.setFromMatrixPosition(I.matrixWorld),o.setFromMatrixPosition(I.target.matrixWorld),R.direction.sub(o),R.direction.transformDirection(w),x++}else if(I.isRectAreaLight){const R=i.rectArea[b];R.position.setFromMatrixPosition(I.matrixWorld),R.position.applyMatrix4(w),s.identity(),a.copy(I.matrixWorld),a.premultiply(w),s.extractRotation(a),R.halfWidth.set(I.width*.5,0,0),R.halfHeight.set(0,I.height*.5,0),R.halfWidth.applyMatrix4(s),R.halfHeight.applyMatrix4(s),b++}else if(I.isPointLight){const R=i.point[v];R.position.setFromMatrixPosition(I.matrixWorld),R.position.applyMatrix4(w),v++}else if(I.isHemisphereLight){const R=i.hemi[M];R.direction.setFromMatrixPosition(I.matrixWorld),R.direction.transformDirection(w),M++}}}return{setup:l,setupView:c,state:i}}function nZ(t,e){const n=new Fgt(t,e),r=[],i=[];function o(){r.length=0,i.length=0}function a(p){r.push(p)}function s(p){i.push(p)}function l(p){n.setup(r,p)}function c(p){n.setupView(r,p)}return{init:o,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:l,setupLightsView:c,pushLight:a,pushShadow:s}}function Bgt(t,e){let n=new WeakMap;function r(o,a=0){const s=n.get(o);let l;return s===void 0?(l=new nZ(t,e),n.set(o,[l])):a>=s.length?(l=new nZ(t,e),s.push(l)):l=s[a],l}function i(){n=new WeakMap}return{get:r,dispose:i}}class o8 extends ja{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=vue,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class s8 extends ja{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const $gt=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,jgt=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Ugt(t,e,n){let r=new jE;const i=new Ht,o=new Ht,a=new zi,s=new o8({depthPacking:xue}),l=new s8,c={},h=n.maxTextureSize,p={[Qp]:ql,[ql]:Qp,[af]:af},g=new yf({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ht},radius:{value:4}},vertexShader:$gt,fragmentShader:jgt}),v=g.clone();v.defines.HORIZONTAL_PASS=1;const x=new Dr;x.setAttribute("position",new Qi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new Rs(x,g),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=zO;let w=this.type;this.render=function(O,B,U){if(M.enabled===!1||M.autoUpdate===!1&&M.needsUpdate===!1||O.length===0)return;const Z=t.getRenderTarget(),j=t.getActiveCubeFace(),X=t.getActiveMipmapLevel(),le=t.state;le.setBlending(Bp),le.buffers.color.setClear(1,1,1,1),le.buffers.depth.setTest(!0),le.setScissorTest(!1);const me=w!==Xd&&this.type===Xd,ie=w===Xd&&this.type!==Xd;for(let ce=0,fe=O.length;ce<fe;ce++){const xe=O[ce],te=xe.shadow;if(te===void 0){console.warn("THREE.WebGLShadowMap:",xe,"has no shadow.");continue}if(te.autoUpdate===!1&&te.needsUpdate===!1)continue;i.copy(te.mapSize);const he=te.getFrameExtents();if(i.multiply(he),o.copy(te.mapSize),(i.x>h||i.y>h)&&(i.x>h&&(o.x=Math.floor(h/he.x),i.x=o.x*he.x,te.mapSize.x=o.x),i.y>h&&(o.y=Math.floor(h/he.y),i.y=o.y*he.y,te.mapSize.y=o.y)),te.map===null||me===!0||ie===!0){const ze=this.type!==Xd?{minFilter:xs,magFilter:xs}:{};te.map!==null&&te.map.dispose(),te.map=new gf(i.x,i.y,ze),te.map.texture.name=xe.name+".shadowMap",te.camera.updateProjectionMatrix()}t.setRenderTarget(te.map),t.clear();const ve=te.getViewportCount();for(let ze=0;ze<ve;ze++){const Ue=te.getViewport(ze);a.set(o.x*Ue.x,o.y*Ue.y,o.x*Ue.z,o.y*Ue.w),le.viewport(a),te.updateMatrices(xe,ze),r=te.getFrustum(),I(B,U,te.camera,xe,this.type)}te.isPointLightShadow!==!0&&this.type===Xd&&T(te,U),te.needsUpdate=!1}w=this.type,M.needsUpdate=!1,t.setRenderTarget(Z,j,X)};function T(O,B){const U=e.update(b);g.defines.VSM_SAMPLES!==O.blurSamples&&(g.defines.VSM_SAMPLES=O.blurSamples,v.defines.VSM_SAMPLES=O.blurSamples,g.needsUpdate=!0,v.needsUpdate=!0),O.mapPass===null&&(O.mapPass=new gf(i.x,i.y)),g.uniforms.shadow_pass.value=O.map.texture,g.uniforms.resolution.value=O.mapSize,g.uniforms.radius.value=O.radius,t.setRenderTarget(O.mapPass),t.clear(),t.renderBufferDirect(B,null,U,g,b,null),v.uniforms.shadow_pass.value=O.mapPass.texture,v.uniforms.resolution.value=O.mapSize,v.uniforms.radius.value=O.radius,t.setRenderTarget(O.map),t.clear(),t.renderBufferDirect(B,null,U,v,b,null)}function C(O,B,U,Z){let j=null;const X=U.isPointLight===!0?O.customDistanceMaterial:O.customDepthMaterial;if(X!==void 0)j=X;else if(j=U.isPointLight===!0?l:s,t.localClippingEnabled&&B.clipShadows===!0&&Array.isArray(B.clippingPlanes)&&B.clippingPlanes.length!==0||B.displacementMap&&B.displacementScale!==0||B.alphaMap&&B.alphaTest>0||B.map&&B.alphaTest>0){const le=j.uuid,me=B.uuid;let ie=c[le];ie===void 0&&(ie={},c[le]=ie);let ce=ie[me];ce===void 0&&(ce=j.clone(),ie[me]=ce,B.addEventListener("dispose",R)),j=ce}if(j.visible=B.visible,j.wireframe=B.wireframe,Z===Xd?j.side=B.shadowSide!==null?B.shadowSide:B.side:j.side=B.shadowSide!==null?B.shadowSide:p[B.side],j.alphaMap=B.alphaMap,j.alphaTest=B.alphaTest,j.map=B.map,j.clipShadows=B.clipShadows,j.clippingPlanes=B.clippingPlanes,j.clipIntersection=B.clipIntersection,j.displacementMap=B.displacementMap,j.displacementScale=B.displacementScale,j.displacementBias=B.displacementBias,j.wireframeLinewidth=B.wireframeLinewidth,j.linewidth=B.linewidth,U.isPointLight===!0&&j.isMeshDistanceMaterial===!0){const le=t.properties.get(j);le.light=U}return j}function I(O,B,U,Z,j){if(O.visible===!1)return;if(O.layers.test(B.layers)&&(O.isMesh||O.isLine||O.isPoints)&&(O.castShadow||O.receiveShadow&&j===Xd)&&(!O.frustumCulled||r.intersectsObject(O))){O.modelViewMatrix.multiplyMatrices(U.matrixWorldInverse,O.matrixWorld);const me=e.update(O),ie=O.material;if(Array.isArray(ie)){const ce=me.groups;for(let fe=0,xe=ce.length;fe<xe;fe++){const te=ce[fe],he=ie[te.materialIndex];if(he&&he.visible){const ve=C(O,he,Z,j);O.onBeforeShadow(t,O,B,U,me,ve,te),t.renderBufferDirect(U,null,me,ve,O,te),O.onAfterShadow(t,O,B,U,me,ve,te)}}}else if(ie.visible){const ce=C(O,ie,Z,j);O.onBeforeShadow(t,O,B,U,me,ce,null),t.renderBufferDirect(U,null,me,ce,O,null),O.onAfterShadow(t,O,B,U,me,ce,null)}}const le=O.children;for(let me=0,ie=le.length;me<ie;me++)I(le[me],B,U,Z,j)}function R(O){O.target.removeEventListener("dispose",R);for(const U in c){const Z=c[U],j=O.target.uuid;j in Z&&(Z[j].dispose(),delete Z[j])}}}function Vgt(t,e,n){const r=n.isWebGL2;function i(){let Xe=!1;const It=new zi;let Et=null;const we=new zi(0,0,0,0);return{setMask:function(oe){Et!==oe&&!Xe&&(t.colorMask(oe,oe,oe,oe),Et=oe)},setLocked:function(oe){Xe=oe},setClear:function(oe,pe,Te,Pe,Ne){Ne===!0&&(oe*=Pe,pe*=Pe,Te*=Pe),It.set(oe,pe,Te,Pe),we.equals(It)===!1&&(t.clearColor(oe,pe,Te,Pe),we.copy(It))},reset:function(){Xe=!1,Et=null,we.set(-1,0,0,0)}}}function o(){let Xe=!1,It=null,Et=null,we=null;return{setTest:function(oe){oe?Fe(t.DEPTH_TEST):lt(t.DEPTH_TEST)},setMask:function(oe){It!==oe&&!Xe&&(t.depthMask(oe),It=oe)},setFunc:function(oe){if(Et!==oe){switch(oe){case Gce:t.depthFunc(t.NEVER);break;case qce:t.depthFunc(t.ALWAYS);break;case Yce:t.depthFunc(t.LESS);break;case w2:t.depthFunc(t.LEQUAL);break;case Xce:t.depthFunc(t.EQUAL);break;case Kce:t.depthFunc(t.GEQUAL);break;case Zce:t.depthFunc(t.GREATER);break;case Jce:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Et=oe}},setLocked:function(oe){Xe=oe},setClear:function(oe){we!==oe&&(t.clearDepth(oe),we=oe)},reset:function(){Xe=!1,It=null,Et=null,we=null}}}function a(){let Xe=!1,It=null,Et=null,we=null,oe=null,pe=null,Te=null,Pe=null,Ne=null;return{setTest:function(Ke){Xe||(Ke?Fe(t.STENCIL_TEST):lt(t.STENCIL_TEST))},setMask:function(Ke){It!==Ke&&!Xe&&(t.stencilMask(Ke),It=Ke)},setFunc:function(Ke,qe,je){(Et!==Ke||we!==qe||oe!==je)&&(t.stencilFunc(Ke,qe,je),Et=Ke,we=qe,oe=je)},setOp:function(Ke,qe,je){(pe!==Ke||Te!==qe||Pe!==je)&&(t.stencilOp(Ke,qe,je),pe=Ke,Te=qe,Pe=je)},setLocked:function(Ke){Xe=Ke},setClear:function(Ke){Ne!==Ke&&(t.clearStencil(Ke),Ne=Ke)},reset:function(){Xe=!1,It=null,Et=null,we=null,oe=null,pe=null,Te=null,Pe=null,Ne=null}}}const s=new i,l=new o,c=new a,h=new WeakMap,p=new WeakMap;let g={},v={},x=new WeakMap,b=[],M=null,w=!1,T=null,C=null,I=null,R=null,O=null,B=null,U=null,Z=new Fn(0,0,0),j=0,X=!1,le=null,me=null,ie=null,ce=null,fe=null;const xe=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let te=!1,he=0;const ve=t.getParameter(t.VERSION);ve.indexOf("WebGL")!==-1?(he=parseFloat(/^WebGL (\d)/.exec(ve)[1]),te=he>=1):ve.indexOf("OpenGL ES")!==-1&&(he=parseFloat(/^OpenGL ES (\d)/.exec(ve)[1]),te=he>=2);let ze=null,Ue={};const rt=t.getParameter(t.SCISSOR_BOX),Be=t.getParameter(t.VIEWPORT),st=new zi().fromArray(rt),ct=new zi().fromArray(Be);function Dt(Xe,It,Et,we){const oe=new Uint8Array(4),pe=t.createTexture();t.bindTexture(Xe,pe),t.texParameteri(Xe,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Xe,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Te=0;Te<Et;Te++)r&&(Xe===t.TEXTURE_3D||Xe===t.TEXTURE_2D_ARRAY)?t.texImage3D(It,0,t.RGBA,1,1,we,0,t.RGBA,t.UNSIGNED_BYTE,oe):t.texImage2D(It+Te,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,oe);return pe}const zt={};zt[t.TEXTURE_2D]=Dt(t.TEXTURE_2D,t.TEXTURE_2D,1),zt[t.TEXTURE_CUBE_MAP]=Dt(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(zt[t.TEXTURE_2D_ARRAY]=Dt(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),zt[t.TEXTURE_3D]=Dt(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),s.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Fe(t.DEPTH_TEST),l.setFunc(w2),Gt(!1),sn(u4),Fe(t.CULL_FACE),Ct(Bp);function Fe(Xe){g[Xe]!==!0&&(t.enable(Xe),g[Xe]=!0)}function lt(Xe){g[Xe]!==!1&&(t.disable(Xe),g[Xe]=!1)}function Qe(Xe,It){return v[Xe]!==It?(t.bindFramebuffer(Xe,It),v[Xe]=It,r&&(Xe===t.DRAW_FRAMEBUFFER&&(v[t.FRAMEBUFFER]=It),Xe===t.FRAMEBUFFER&&(v[t.DRAW_FRAMEBUFFER]=It)),!0):!1}function ge(Xe,It){let Et=b,we=!1;if(Xe){Et=x.get(It),Et===void 0&&(Et=[],x.set(It,Et));const oe=Xe.textures;if(Et.length!==oe.length||Et[0]!==t.COLOR_ATTACHMENT0){for(let pe=0,Te=oe.length;pe<Te;pe++)Et[pe]=t.COLOR_ATTACHMENT0+pe;Et.length=oe.length,we=!0}}else Et[0]!==t.BACK&&(Et[0]=t.BACK,we=!0);if(we)if(n.isWebGL2)t.drawBuffers(Et);else if(e.has("WEBGL_draw_buffers")===!0)e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Et);else throw new Error("THREE.WebGLState: Usage of gl.drawBuffers() require WebGL2 or WEBGL_draw_buffers extension")}function et(Xe){return M!==Xe?(t.useProgram(Xe),M=Xe,!0):!1}const ot={[Eg]:t.FUNC_ADD,[Ice]:t.FUNC_SUBTRACT,[Rce]:t.FUNC_REVERSE_SUBTRACT};if(r)ot[p4]=t.MIN,ot[m4]=t.MAX;else{const Xe=e.get("EXT_blend_minmax");Xe!==null&&(ot[p4]=Xe.MIN_EXT,ot[m4]=Xe.MAX_EXT)}const Tt={[Oce]:t.ZERO,[Lce]:t.ONE,[Dce]:t.SRC_COLOR,[Jk]:t.SRC_ALPHA,[jce]:t.SRC_ALPHA_SATURATE,[Bce]:t.DST_COLOR,[zce]:t.DST_ALPHA,[Nce]:t.ONE_MINUS_SRC_COLOR,[Qk]:t.ONE_MINUS_SRC_ALPHA,[$ce]:t.ONE_MINUS_DST_COLOR,[Fce]:t.ONE_MINUS_DST_ALPHA,[Uce]:t.CONSTANT_COLOR,[Vce]:t.ONE_MINUS_CONSTANT_COLOR,[Wce]:t.CONSTANT_ALPHA,[Hce]:t.ONE_MINUS_CONSTANT_ALPHA};function Ct(Xe,It,Et,we,oe,pe,Te,Pe,Ne,Ke){if(Xe===Bp){w===!0&&(lt(t.BLEND),w=!1);return}if(w===!1&&(Fe(t.BLEND),w=!0),Xe!==kce){if(Xe!==T||Ke!==X){if((C!==Eg||O!==Eg)&&(t.blendEquation(t.FUNC_ADD),C=Eg,O=Eg),Ke)switch(Xe){case v0:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case d4:t.blendFunc(t.ONE,t.ONE);break;case f4:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case h4:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Xe);break}else switch(Xe){case v0:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case d4:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case f4:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case h4:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Xe);break}I=null,R=null,B=null,U=null,Z.set(0,0,0),j=0,T=Xe,X=Ke}return}oe=oe||It,pe=pe||Et,Te=Te||we,(It!==C||oe!==O)&&(t.blendEquationSeparate(ot[It],ot[oe]),C=It,O=oe),(Et!==I||we!==R||pe!==B||Te!==U)&&(t.blendFuncSeparate(Tt[Et],Tt[we],Tt[pe],Tt[Te]),I=Et,R=we,B=pe,U=Te),(Pe.equals(Z)===!1||Ne!==j)&&(t.blendColor(Pe.r,Pe.g,Pe.b,Ne),Z.copy(Pe),j=Ne),T=Xe,X=!1}function Bt(Xe,It){Xe.side===af?lt(t.CULL_FACE):Fe(t.CULL_FACE);let Et=Xe.side===ql;It&&(Et=!Et),Gt(Et),Xe.blending===v0&&Xe.transparent===!1?Ct(Bp):Ct(Xe.blending,Xe.blendEquation,Xe.blendSrc,Xe.blendDst,Xe.blendEquationAlpha,Xe.blendSrcAlpha,Xe.blendDstAlpha,Xe.blendColor,Xe.blendAlpha,Xe.premultipliedAlpha),l.setFunc(Xe.depthFunc),l.setTest(Xe.depthTest),l.setMask(Xe.depthWrite),s.setMask(Xe.colorWrite);const we=Xe.stencilWrite;c.setTest(we),we&&(c.setMask(Xe.stencilWriteMask),c.setFunc(Xe.stencilFunc,Xe.stencilRef,Xe.stencilFuncMask),c.setOp(Xe.stencilFail,Xe.stencilZFail,Xe.stencilZPass)),Ce(Xe.polygonOffset,Xe.polygonOffsetFactor,Xe.polygonOffsetUnits),Xe.alphaToCoverage===!0?Fe(t.SAMPLE_ALPHA_TO_COVERAGE):lt(t.SAMPLE_ALPHA_TO_COVERAGE)}function Gt(Xe){le!==Xe&&(Xe?t.frontFace(t.CW):t.frontFace(t.CCW),le=Xe)}function sn(Xe){Xe!==Cce?(Fe(t.CULL_FACE),Xe!==me&&(Xe===u4?t.cullFace(t.BACK):Xe===Ace?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):lt(t.CULL_FACE),me=Xe}function Je(Xe){Xe!==ie&&(te&&t.lineWidth(Xe),ie=Xe)}function Ce(Xe,It,Et){Xe?(Fe(t.POLYGON_OFFSET_FILL),(ce!==It||fe!==Et)&&(t.polygonOffset(It,Et),ce=It,fe=Et)):lt(t.POLYGON_OFFSET_FILL)}function _e(Xe){Xe?Fe(t.SCISSOR_TEST):lt(t.SCISSOR_TEST)}function ht(Xe){Xe===void 0&&(Xe=t.TEXTURE0+xe-1),ze!==Xe&&(t.activeTexture(Xe),ze=Xe)}function dt(Xe,It,Et){Et===void 0&&(ze===null?Et=t.TEXTURE0+xe-1:Et=ze);let we=Ue[Et];we===void 0&&(we={type:void 0,texture:void 0},Ue[Et]=we),(we.type!==Xe||we.texture!==It)&&(ze!==Et&&(t.activeTexture(Et),ze=Et),t.bindTexture(Xe,It||zt[Xe]),we.type=Xe,we.texture=It)}function Wt(){const Xe=Ue[ze];Xe!==void 0&&Xe.type!==void 0&&(t.bindTexture(Xe.type,null),Xe.type=void 0,Xe.texture=void 0)}function jt(){try{t.compressedTexImage2D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function Sn(){try{t.compressedTexImage3D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function cn(){try{t.texSubImage2D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function Rt(){try{t.texSubImage3D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function nn(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function An(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function mt(){try{t.texStorage2D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function un(){try{t.texStorage3D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function an(){try{t.texImage2D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function Ot(){try{t.texImage3D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function Ie(Xe){st.equals(Xe)===!1&&(t.scissor(Xe.x,Xe.y,Xe.z,Xe.w),st.copy(Xe))}function Ve(Xe){ct.equals(Xe)===!1&&(t.viewport(Xe.x,Xe.y,Xe.z,Xe.w),ct.copy(Xe))}function Me(Xe,It){let Et=p.get(It);Et===void 0&&(Et=new WeakMap,p.set(It,Et));let we=Et.get(Xe);we===void 0&&(we=t.getUniformBlockIndex(It,Xe.name),Et.set(Xe,we))}function it(Xe,It){const we=p.get(It).get(Xe);h.get(It)!==we&&(t.uniformBlockBinding(It,we,Xe.__bindingPointIndex),h.set(It,we))}function Qt(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),r===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),g={},ze=null,Ue={},v={},x=new WeakMap,b=[],M=null,w=!1,T=null,C=null,I=null,R=null,O=null,B=null,U=null,Z=new Fn(0,0,0),j=0,X=!1,le=null,me=null,ie=null,ce=null,fe=null,st.set(0,0,t.canvas.width,t.canvas.height),ct.set(0,0,t.canvas.width,t.canvas.height),s.reset(),l.reset(),c.reset()}return{buffers:{color:s,depth:l,stencil:c},enable:Fe,disable:lt,bindFramebuffer:Qe,drawBuffers:ge,useProgram:et,setBlending:Ct,setMaterial:Bt,setFlipSided:Gt,setCullFace:sn,setLineWidth:Je,setPolygonOffset:Ce,setScissorTest:_e,activeTexture:ht,bindTexture:dt,unbindTexture:Wt,compressedTexImage2D:jt,compressedTexImage3D:Sn,texImage2D:an,texImage3D:Ot,updateUBOMapping:Me,uniformBlockBinding:it,texStorage2D:mt,texStorage3D:un,texSubImage2D:cn,texSubImage3D:Rt,compressedTexSubImage2D:nn,compressedTexSubImage3D:An,scissor:Ie,viewport:Ve,reset:Qt}}function Wgt(t,e,n,r,i,o,a){const s=i.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=new Ht,p=new WeakMap;let g;const v=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(Ce,_e){return x?new OffscreenCanvas(Ce,_e):D2("canvas")}function M(Ce,_e,ht,dt){let Wt=1;const jt=Je(Ce);if((jt.width>dt||jt.height>dt)&&(Wt=dt/Math.max(jt.width,jt.height)),Wt<1||_e===!0)if(typeof HTMLImageElement<"u"&&Ce instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Ce instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Ce instanceof ImageBitmap||typeof VideoFrame<"u"&&Ce instanceof VideoFrame){const Sn=_e?nI:Math.floor,cn=Sn(Wt*jt.width),Rt=Sn(Wt*jt.height);g===void 0&&(g=b(cn,Rt));const nn=ht?b(cn,Rt):g;return nn.width=cn,nn.height=Rt,nn.getContext("2d").drawImage(Ce,0,0,cn,Rt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+jt.width+"x"+jt.height+") to ("+cn+"x"+Rt+")."),nn}else return"data"in Ce&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+jt.width+"x"+jt.height+")."),Ce;return Ce}function w(Ce){const _e=Je(Ce);return W4(_e.width)&&W4(_e.height)}function T(Ce){return s?!1:Ce.wrapS!==hl||Ce.wrapT!==hl||Ce.minFilter!==xs&&Ce.minFilter!==Uo}function C(Ce,_e){return Ce.generateMipmaps&&_e&&Ce.minFilter!==xs&&Ce.minFilter!==Uo}function I(Ce){t.generateMipmap(Ce)}function R(Ce,_e,ht,dt,Wt=!1){if(s===!1)return _e;if(Ce!==null){if(t[Ce]!==void 0)return t[Ce];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ce+"'")}let jt=_e;if(_e===t.RED&&(ht===t.FLOAT&&(jt=t.R32F),ht===t.HALF_FLOAT&&(jt=t.R16F),ht===t.UNSIGNED_BYTE&&(jt=t.R8)),_e===t.RED_INTEGER&&(ht===t.UNSIGNED_BYTE&&(jt=t.R8UI),ht===t.UNSIGNED_SHORT&&(jt=t.R16UI),ht===t.UNSIGNED_INT&&(jt=t.R32UI),ht===t.BYTE&&(jt=t.R8I),ht===t.SHORT&&(jt=t.R16I),ht===t.INT&&(jt=t.R32I)),_e===t.RG&&(ht===t.FLOAT&&(jt=t.RG32F),ht===t.HALF_FLOAT&&(jt=t.RG16F),ht===t.UNSIGNED_BYTE&&(jt=t.RG8)),_e===t.RG_INTEGER&&(ht===t.UNSIGNED_BYTE&&(jt=t.RG8UI),ht===t.UNSIGNED_SHORT&&(jt=t.RG16UI),ht===t.UNSIGNED_INT&&(jt=t.RG32UI),ht===t.BYTE&&(jt=t.RG8I),ht===t.SHORT&&(jt=t.RG16I),ht===t.INT&&(jt=t.RG32I)),_e===t.RGBA){const Sn=Wt?k2:Ni.getTransfer(dt);ht===t.FLOAT&&(jt=t.RGBA32F),ht===t.HALF_FLOAT&&(jt=t.RGBA16F),ht===t.UNSIGNED_BYTE&&(jt=Sn===fo?t.SRGB8_ALPHA8:t.RGBA8),ht===t.UNSIGNED_SHORT_4_4_4_4&&(jt=t.RGBA4),ht===t.UNSIGNED_SHORT_5_5_5_1&&(jt=t.RGB5_A1)}return(jt===t.R16F||jt===t.R32F||jt===t.RG16F||jt===t.RG32F||jt===t.RGBA16F||jt===t.RGBA32F)&&e.get("EXT_color_buffer_float"),jt}function O(Ce,_e,ht){return C(Ce,ht)===!0||Ce.isFramebufferTexture&&Ce.minFilter!==xs&&Ce.minFilter!==Uo?Math.log2(Math.max(_e.width,_e.height))+1:Ce.mipmaps!==void 0&&Ce.mipmaps.length>0?Ce.mipmaps.length:Ce.isCompressedTexture&&Array.isArray(Ce.image)?_e.mipmaps.length:1}function B(Ce){return Ce===xs||Ce===eI||Ce===Vv?t.NEAREST:t.LINEAR}function U(Ce){const _e=Ce.target;_e.removeEventListener("dispose",U),j(_e),_e.isVideoTexture&&p.delete(_e)}function Z(Ce){const _e=Ce.target;_e.removeEventListener("dispose",Z),le(_e)}function j(Ce){const _e=r.get(Ce);if(_e.__webglInit===void 0)return;const ht=Ce.source,dt=v.get(ht);if(dt){const Wt=dt[_e.__cacheKey];Wt.usedTimes--,Wt.usedTimes===0&&X(Ce),Object.keys(dt).length===0&&v.delete(ht)}r.remove(Ce)}function X(Ce){const _e=r.get(Ce);t.deleteTexture(_e.__webglTexture);const ht=Ce.source,dt=v.get(ht);delete dt[_e.__cacheKey],a.memory.textures--}function le(Ce){const _e=r.get(Ce);if(Ce.depthTexture&&Ce.depthTexture.dispose(),Ce.isWebGLCubeRenderTarget)for(let dt=0;dt<6;dt++){if(Array.isArray(_e.__webglFramebuffer[dt]))for(let Wt=0;Wt<_e.__webglFramebuffer[dt].length;Wt++)t.deleteFramebuffer(_e.__webglFramebuffer[dt][Wt]);else t.deleteFramebuffer(_e.__webglFramebuffer[dt]);_e.__webglDepthbuffer&&t.deleteRenderbuffer(_e.__webglDepthbuffer[dt])}else{if(Array.isArray(_e.__webglFramebuffer))for(let dt=0;dt<_e.__webglFramebuffer.length;dt++)t.deleteFramebuffer(_e.__webglFramebuffer[dt]);else t.deleteFramebuffer(_e.__webglFramebuffer);if(_e.__webglDepthbuffer&&t.deleteRenderbuffer(_e.__webglDepthbuffer),_e.__webglMultisampledFramebuffer&&t.deleteFramebuffer(_e.__webglMultisampledFramebuffer),_e.__webglColorRenderbuffer)for(let dt=0;dt<_e.__webglColorRenderbuffer.length;dt++)_e.__webglColorRenderbuffer[dt]&&t.deleteRenderbuffer(_e.__webglColorRenderbuffer[dt]);_e.__webglDepthRenderbuffer&&t.deleteRenderbuffer(_e.__webglDepthRenderbuffer)}const ht=Ce.textures;for(let dt=0,Wt=ht.length;dt<Wt;dt++){const jt=r.get(ht[dt]);jt.__webglTexture&&(t.deleteTexture(jt.__webglTexture),a.memory.textures--),r.remove(ht[dt])}r.remove(Ce)}let me=0;function ie(){me=0}function ce(){const Ce=me;return Ce>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Ce+" texture units while this GPU supports only "+i.maxTextures),me+=1,Ce}function fe(Ce){const _e=[];return _e.push(Ce.wrapS),_e.push(Ce.wrapT),_e.push(Ce.wrapR||0),_e.push(Ce.magFilter),_e.push(Ce.minFilter),_e.push(Ce.anisotropy),_e.push(Ce.internalFormat),_e.push(Ce.format),_e.push(Ce.type),_e.push(Ce.generateMipmaps),_e.push(Ce.premultiplyAlpha),_e.push(Ce.flipY),_e.push(Ce.unpackAlignment),_e.push(Ce.colorSpace),_e.join()}function xe(Ce,_e){const ht=r.get(Ce);if(Ce.isVideoTexture&&Gt(Ce),Ce.isRenderTargetTexture===!1&&Ce.version>0&&ht.__version!==Ce.version){const dt=Ce.image;if(dt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(dt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ct(ht,Ce,_e);return}}n.bindTexture(t.TEXTURE_2D,ht.__webglTexture,t.TEXTURE0+_e)}function te(Ce,_e){const ht=r.get(Ce);if(Ce.version>0&&ht.__version!==Ce.version){ct(ht,Ce,_e);return}n.bindTexture(t.TEXTURE_2D_ARRAY,ht.__webglTexture,t.TEXTURE0+_e)}function he(Ce,_e){const ht=r.get(Ce);if(Ce.version>0&&ht.__version!==Ce.version){ct(ht,Ce,_e);return}n.bindTexture(t.TEXTURE_3D,ht.__webglTexture,t.TEXTURE0+_e)}function ve(Ce,_e){const ht=r.get(Ce);if(Ce.version>0&&ht.__version!==Ce.version){Dt(ht,Ce,_e);return}n.bindTexture(t.TEXTURE_CUBE_MAP,ht.__webglTexture,t.TEXTURE0+_e)}const ze={[E2]:t.REPEAT,[hl]:t.CLAMP_TO_EDGE,[T2]:t.MIRRORED_REPEAT},Ue={[xs]:t.NEAREST,[eI]:t.NEAREST_MIPMAP_NEAREST,[Vv]:t.NEAREST_MIPMAP_LINEAR,[Uo]:t.LINEAR,[ZS]:t.LINEAR_MIPMAP_NEAREST,[fh]:t.LINEAR_MIPMAP_LINEAR},rt={[bue]:t.NEVER,[Cue]:t.ALWAYS,[wue]:t.LESS,[Z6]:t.LEQUAL,[Sue]:t.EQUAL,[Tue]:t.GEQUAL,[Mue]:t.GREATER,[Eue]:t.NOTEQUAL};function Be(Ce,_e,ht){if(_e.type===ou&&e.has("OES_texture_float_linear")===!1&&(_e.magFilter===Uo||_e.magFilter===ZS||_e.magFilter===Vv||_e.magFilter===fh||_e.minFilter===Uo||_e.minFilter===ZS||_e.minFilter===Vv||_e.minFilter===fh)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),ht?(t.texParameteri(Ce,t.TEXTURE_WRAP_S,ze[_e.wrapS]),t.texParameteri(Ce,t.TEXTURE_WRAP_T,ze[_e.wrapT]),(Ce===t.TEXTURE_3D||Ce===t.TEXTURE_2D_ARRAY)&&t.texParameteri(Ce,t.TEXTURE_WRAP_R,ze[_e.wrapR]),t.texParameteri(Ce,t.TEXTURE_MAG_FILTER,Ue[_e.magFilter]),t.texParameteri(Ce,t.TEXTURE_MIN_FILTER,Ue[_e.minFilter])):(t.texParameteri(Ce,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(Ce,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(Ce===t.TEXTURE_3D||Ce===t.TEXTURE_2D_ARRAY)&&t.texParameteri(Ce,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(_e.wrapS!==hl||_e.wrapT!==hl)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(Ce,t.TEXTURE_MAG_FILTER,B(_e.magFilter)),t.texParameteri(Ce,t.TEXTURE_MIN_FILTER,B(_e.minFilter)),_e.minFilter!==xs&&_e.minFilter!==Uo&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),_e.compareFunction&&(t.texParameteri(Ce,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(Ce,t.TEXTURE_COMPARE_FUNC,rt[_e.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(_e.magFilter===xs||_e.minFilter!==Vv&&_e.minFilter!==fh||_e.type===ou&&e.has("OES_texture_float_linear")===!1||s===!1&&_e.type===Kb&&e.has("OES_texture_half_float_linear")===!1)return;if(_e.anisotropy>1||r.get(_e).__currentAnisotropy){const dt=e.get("EXT_texture_filter_anisotropic");t.texParameterf(Ce,dt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(_e.anisotropy,i.getMaxAnisotropy())),r.get(_e).__currentAnisotropy=_e.anisotropy}}}function st(Ce,_e){let ht=!1;Ce.__webglInit===void 0&&(Ce.__webglInit=!0,_e.addEventListener("dispose",U));const dt=_e.source;let Wt=v.get(dt);Wt===void 0&&(Wt={},v.set(dt,Wt));const jt=fe(_e);if(jt!==Ce.__cacheKey){Wt[jt]===void 0&&(Wt[jt]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,ht=!0),Wt[jt].usedTimes++;const Sn=Wt[Ce.__cacheKey];Sn!==void 0&&(Wt[Ce.__cacheKey].usedTimes--,Sn.usedTimes===0&&X(_e)),Ce.__cacheKey=jt,Ce.__webglTexture=Wt[jt].texture}return ht}function ct(Ce,_e,ht){let dt=t.TEXTURE_2D;(_e.isDataArrayTexture||_e.isCompressedArrayTexture)&&(dt=t.TEXTURE_2D_ARRAY),_e.isData3DTexture&&(dt=t.TEXTURE_3D);const Wt=st(Ce,_e),jt=_e.source;n.bindTexture(dt,Ce.__webglTexture,t.TEXTURE0+ht);const Sn=r.get(jt);if(jt.version!==Sn.__version||Wt===!0){n.activeTexture(t.TEXTURE0+ht);const cn=Ni.getPrimaries(Ni.workingColorSpace),Rt=_e.colorSpace===bp?null:Ni.getPrimaries(_e.colorSpace),nn=_e.colorSpace===bp||cn===Rt?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,_e.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,_e.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,_e.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,nn);const An=T(_e)&&w(_e.image)===!1;let mt=M(_e.image,An,!1,i.maxTextureSize);mt=sn(_e,mt);const un=w(mt)||s,an=o.convert(_e.format,_e.colorSpace);let Ot=o.convert(_e.type),Ie=R(_e.internalFormat,an,Ot,_e.colorSpace,_e.isVideoTexture);Be(dt,_e,un);let Ve;const Me=_e.mipmaps,it=s&&_e.isVideoTexture!==!0&&Ie!==X6,Qt=Sn.__version===void 0||Wt===!0,Xe=jt.dataReady,It=O(_e,mt,un);if(_e.isDepthTexture)Ie=t.DEPTH_COMPONENT,s?_e.type===ou?Ie=t.DEPTH_COMPONENT32F:_e.type===Ip?Ie=t.DEPTH_COMPONENT24:_e.type===Jg?Ie=t.DEPTH24_STENCIL8:Ie=t.DEPTH_COMPONENT16:_e.type===ou&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),_e.format===Qg&&Ie===t.DEPTH_COMPONENT&&_e.type!==BO&&_e.type!==Ip&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),_e.type=Ip,Ot=o.convert(_e.type)),_e.format===N0&&Ie===t.DEPTH_COMPONENT&&(Ie=t.DEPTH_STENCIL,_e.type!==Jg&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),_e.type=Jg,Ot=o.convert(_e.type))),Qt&&(it?n.texStorage2D(t.TEXTURE_2D,1,Ie,mt.width,mt.height):n.texImage2D(t.TEXTURE_2D,0,Ie,mt.width,mt.height,0,an,Ot,null));else if(_e.isDataTexture)if(Me.length>0&&un){it&&Qt&&n.texStorage2D(t.TEXTURE_2D,It,Ie,Me[0].width,Me[0].height);for(let Et=0,we=Me.length;Et<we;Et++)Ve=Me[Et],it?Xe&&n.texSubImage2D(t.TEXTURE_2D,Et,0,0,Ve.width,Ve.height,an,Ot,Ve.data):n.texImage2D(t.TEXTURE_2D,Et,Ie,Ve.width,Ve.height,0,an,Ot,Ve.data);_e.generateMipmaps=!1}else it?(Qt&&n.texStorage2D(t.TEXTURE_2D,It,Ie,mt.width,mt.height),Xe&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,mt.width,mt.height,an,Ot,mt.data)):n.texImage2D(t.TEXTURE_2D,0,Ie,mt.width,mt.height,0,an,Ot,mt.data);else if(_e.isCompressedTexture)if(_e.isCompressedArrayTexture){it&&Qt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,It,Ie,Me[0].width,Me[0].height,mt.depth);for(let Et=0,we=Me.length;Et<we;Et++)Ve=Me[Et],_e.format!==Ul?an!==null?it?Xe&&n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Et,0,0,0,Ve.width,Ve.height,mt.depth,an,Ve.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,Et,Ie,Ve.width,Ve.height,mt.depth,0,Ve.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):it?Xe&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,Et,0,0,0,Ve.width,Ve.height,mt.depth,an,Ot,Ve.data):n.texImage3D(t.TEXTURE_2D_ARRAY,Et,Ie,Ve.width,Ve.height,mt.depth,0,an,Ot,Ve.data)}else{it&&Qt&&n.texStorage2D(t.TEXTURE_2D,It,Ie,Me[0].width,Me[0].height);for(let Et=0,we=Me.length;Et<we;Et++)Ve=Me[Et],_e.format!==Ul?an!==null?it?Xe&&n.compressedTexSubImage2D(t.TEXTURE_2D,Et,0,0,Ve.width,Ve.height,an,Ve.data):n.compressedTexImage2D(t.TEXTURE_2D,Et,Ie,Ve.width,Ve.height,0,Ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):it?Xe&&n.texSubImage2D(t.TEXTURE_2D,Et,0,0,Ve.width,Ve.height,an,Ot,Ve.data):n.texImage2D(t.TEXTURE_2D,Et,Ie,Ve.width,Ve.height,0,an,Ot,Ve.data)}else if(_e.isDataArrayTexture)it?(Qt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,It,Ie,mt.width,mt.height,mt.depth),Xe&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,mt.width,mt.height,mt.depth,an,Ot,mt.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,Ie,mt.width,mt.height,mt.depth,0,an,Ot,mt.data);else if(_e.isData3DTexture)it?(Qt&&n.texStorage3D(t.TEXTURE_3D,It,Ie,mt.width,mt.height,mt.depth),Xe&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,mt.width,mt.height,mt.depth,an,Ot,mt.data)):n.texImage3D(t.TEXTURE_3D,0,Ie,mt.width,mt.height,mt.depth,0,an,Ot,mt.data);else if(_e.isFramebufferTexture){if(Qt)if(it)n.texStorage2D(t.TEXTURE_2D,It,Ie,mt.width,mt.height);else{let Et=mt.width,we=mt.height;for(let oe=0;oe<It;oe++)n.texImage2D(t.TEXTURE_2D,oe,Ie,Et,we,0,an,Ot,null),Et>>=1,we>>=1}}else if(Me.length>0&&un){if(it&&Qt){const Et=Je(Me[0]);n.texStorage2D(t.TEXTURE_2D,It,Ie,Et.width,Et.height)}for(let Et=0,we=Me.length;Et<we;Et++)Ve=Me[Et],it?Xe&&n.texSubImage2D(t.TEXTURE_2D,Et,0,0,an,Ot,Ve):n.texImage2D(t.TEXTURE_2D,Et,Ie,an,Ot,Ve);_e.generateMipmaps=!1}else if(it){if(Qt){const Et=Je(mt);n.texStorage2D(t.TEXTURE_2D,It,Ie,Et.width,Et.height)}Xe&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,an,Ot,mt)}else n.texImage2D(t.TEXTURE_2D,0,Ie,an,Ot,mt);C(_e,un)&&I(dt),Sn.__version=jt.version,_e.onUpdate&&_e.onUpdate(_e)}Ce.__version=_e.version}function Dt(Ce,_e,ht){if(_e.image.length!==6)return;const dt=st(Ce,_e),Wt=_e.source;n.bindTexture(t.TEXTURE_CUBE_MAP,Ce.__webglTexture,t.TEXTURE0+ht);const jt=r.get(Wt);if(Wt.version!==jt.__version||dt===!0){n.activeTexture(t.TEXTURE0+ht);const Sn=Ni.getPrimaries(Ni.workingColorSpace),cn=_e.colorSpace===bp?null:Ni.getPrimaries(_e.colorSpace),Rt=_e.colorSpace===bp||Sn===cn?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,_e.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,_e.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,_e.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Rt);const nn=_e.isCompressedTexture||_e.image[0].isCompressedTexture,An=_e.image[0]&&_e.image[0].isDataTexture,mt=[];for(let Et=0;Et<6;Et++)!nn&&!An?mt[Et]=M(_e.image[Et],!1,!0,i.maxCubemapSize):mt[Et]=An?_e.image[Et].image:_e.image[Et],mt[Et]=sn(_e,mt[Et]);const un=mt[0],an=w(un)||s,Ot=o.convert(_e.format,_e.colorSpace),Ie=o.convert(_e.type),Ve=R(_e.internalFormat,Ot,Ie,_e.colorSpace),Me=s&&_e.isVideoTexture!==!0,it=jt.__version===void 0||dt===!0,Qt=Wt.dataReady;let Xe=O(_e,un,an);Be(t.TEXTURE_CUBE_MAP,_e,an);let It;if(nn){Me&&it&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Xe,Ve,un.width,un.height);for(let Et=0;Et<6;Et++){It=mt[Et].mipmaps;for(let we=0;we<It.length;we++){const oe=It[we];_e.format!==Ul?Ot!==null?Me?Qt&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Et,we,0,0,oe.width,oe.height,Ot,oe.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Et,we,Ve,oe.width,oe.height,0,oe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Me?Qt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Et,we,0,0,oe.width,oe.height,Ot,Ie,oe.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Et,we,Ve,oe.width,oe.height,0,Ot,Ie,oe.data)}}}else{if(It=_e.mipmaps,Me&&it){It.length>0&&Xe++;const Et=Je(mt[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,Xe,Ve,Et.width,Et.height)}for(let Et=0;Et<6;Et++)if(An){Me?Qt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Et,0,0,0,mt[Et].width,mt[Et].height,Ot,Ie,mt[Et].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Et,0,Ve,mt[Et].width,mt[Et].height,0,Ot,Ie,mt[Et].data);for(let we=0;we<It.length;we++){const pe=It[we].image[Et].image;Me?Qt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Et,we+1,0,0,pe.width,pe.height,Ot,Ie,pe.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Et,we+1,Ve,pe.width,pe.height,0,Ot,Ie,pe.data)}}else{Me?Qt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Et,0,0,0,Ot,Ie,mt[Et]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Et,0,Ve,Ot,Ie,mt[Et]);for(let we=0;we<It.length;we++){const oe=It[we];Me?Qt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Et,we+1,0,0,Ot,Ie,oe.image[Et]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Et,we+1,Ve,Ot,Ie,oe.image[Et])}}}C(_e,an)&&I(t.TEXTURE_CUBE_MAP),jt.__version=Wt.version,_e.onUpdate&&_e.onUpdate(_e)}Ce.__version=_e.version}function zt(Ce,_e,ht,dt,Wt,jt){const Sn=o.convert(ht.format,ht.colorSpace),cn=o.convert(ht.type),Rt=R(ht.internalFormat,Sn,cn,ht.colorSpace);if(!r.get(_e).__hasExternalTextures){const An=Math.max(1,_e.width>>jt),mt=Math.max(1,_e.height>>jt);Wt===t.TEXTURE_3D||Wt===t.TEXTURE_2D_ARRAY?n.texImage3D(Wt,jt,Rt,An,mt,_e.depth,0,Sn,cn,null):n.texImage2D(Wt,jt,Rt,An,mt,0,Sn,cn,null)}n.bindFramebuffer(t.FRAMEBUFFER,Ce),Bt(_e)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,dt,Wt,r.get(ht).__webglTexture,0,Ct(_e)):(Wt===t.TEXTURE_2D||Wt>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Wt<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,dt,Wt,r.get(ht).__webglTexture,jt),n.bindFramebuffer(t.FRAMEBUFFER,null)}function Fe(Ce,_e,ht){if(t.bindRenderbuffer(t.RENDERBUFFER,Ce),_e.depthBuffer&&!_e.stencilBuffer){let dt=s===!0?t.DEPTH_COMPONENT24:t.DEPTH_COMPONENT16;if(ht||Bt(_e)){const Wt=_e.depthTexture;Wt&&Wt.isDepthTexture&&(Wt.type===ou?dt=t.DEPTH_COMPONENT32F:Wt.type===Ip&&(dt=t.DEPTH_COMPONENT24));const jt=Ct(_e);Bt(_e)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,jt,dt,_e.width,_e.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,jt,dt,_e.width,_e.height)}else t.renderbufferStorage(t.RENDERBUFFER,dt,_e.width,_e.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,Ce)}else if(_e.depthBuffer&&_e.stencilBuffer){const dt=Ct(_e);ht&&Bt(_e)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,dt,t.DEPTH24_STENCIL8,_e.width,_e.height):Bt(_e)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,dt,t.DEPTH24_STENCIL8,_e.width,_e.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,_e.width,_e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,Ce)}else{const dt=_e.textures;for(let Wt=0;Wt<dt.length;Wt++){const jt=dt[Wt],Sn=o.convert(jt.format,jt.colorSpace),cn=o.convert(jt.type),Rt=R(jt.internalFormat,Sn,cn,jt.colorSpace),nn=Ct(_e);ht&&Bt(_e)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,nn,Rt,_e.width,_e.height):Bt(_e)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,nn,Rt,_e.width,_e.height):t.renderbufferStorage(t.RENDERBUFFER,Rt,_e.width,_e.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function lt(Ce,_e){if(_e&&_e.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,Ce),!(_e.depthTexture&&_e.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(_e.depthTexture).__webglTexture||_e.depthTexture.image.width!==_e.width||_e.depthTexture.image.height!==_e.height)&&(_e.depthTexture.image.width=_e.width,_e.depthTexture.image.height=_e.height,_e.depthTexture.needsUpdate=!0),xe(_e.depthTexture,0);const dt=r.get(_e.depthTexture).__webglTexture,Wt=Ct(_e);if(_e.depthTexture.format===Qg)Bt(_e)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,dt,0,Wt):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,dt,0);else if(_e.depthTexture.format===N0)Bt(_e)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,dt,0,Wt):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,dt,0);else throw new Error("Unknown depthTexture format")}function Qe(Ce){const _e=r.get(Ce),ht=Ce.isWebGLCubeRenderTarget===!0;if(Ce.depthTexture&&!_e.__autoAllocateDepthBuffer){if(ht)throw new Error("target.depthTexture not supported in Cube render targets");lt(_e.__webglFramebuffer,Ce)}else if(ht){_e.__webglDepthbuffer=[];for(let dt=0;dt<6;dt++)n.bindFramebuffer(t.FRAMEBUFFER,_e.__webglFramebuffer[dt]),_e.__webglDepthbuffer[dt]=t.createRenderbuffer(),Fe(_e.__webglDepthbuffer[dt],Ce,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,_e.__webglFramebuffer),_e.__webglDepthbuffer=t.createRenderbuffer(),Fe(_e.__webglDepthbuffer,Ce,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function ge(Ce,_e,ht){const dt=r.get(Ce);_e!==void 0&&zt(dt.__webglFramebuffer,Ce,Ce.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),ht!==void 0&&Qe(Ce)}function et(Ce){const _e=Ce.texture,ht=r.get(Ce),dt=r.get(_e);Ce.addEventListener("dispose",Z);const Wt=Ce.textures,jt=Ce.isWebGLCubeRenderTarget===!0,Sn=Wt.length>1,cn=w(Ce)||s;if(Sn||(dt.__webglTexture===void 0&&(dt.__webglTexture=t.createTexture()),dt.__version=_e.version,a.memory.textures++),jt){ht.__webglFramebuffer=[];for(let Rt=0;Rt<6;Rt++)if(s&&_e.mipmaps&&_e.mipmaps.length>0){ht.__webglFramebuffer[Rt]=[];for(let nn=0;nn<_e.mipmaps.length;nn++)ht.__webglFramebuffer[Rt][nn]=t.createFramebuffer()}else ht.__webglFramebuffer[Rt]=t.createFramebuffer()}else{if(s&&_e.mipmaps&&_e.mipmaps.length>0){ht.__webglFramebuffer=[];for(let Rt=0;Rt<_e.mipmaps.length;Rt++)ht.__webglFramebuffer[Rt]=t.createFramebuffer()}else ht.__webglFramebuffer=t.createFramebuffer();if(Sn)if(i.drawBuffers)for(let Rt=0,nn=Wt.length;Rt<nn;Rt++){const An=r.get(Wt[Rt]);An.__webglTexture===void 0&&(An.__webglTexture=t.createTexture(),a.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&Ce.samples>0&&Bt(Ce)===!1){ht.__webglMultisampledFramebuffer=t.createFramebuffer(),ht.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,ht.__webglMultisampledFramebuffer);for(let Rt=0;Rt<Wt.length;Rt++){const nn=Wt[Rt];ht.__webglColorRenderbuffer[Rt]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,ht.__webglColorRenderbuffer[Rt]);const An=o.convert(nn.format,nn.colorSpace),mt=o.convert(nn.type),un=R(nn.internalFormat,An,mt,nn.colorSpace,Ce.isXRRenderTarget===!0),an=Ct(Ce);t.renderbufferStorageMultisample(t.RENDERBUFFER,an,un,Ce.width,Ce.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Rt,t.RENDERBUFFER,ht.__webglColorRenderbuffer[Rt])}t.bindRenderbuffer(t.RENDERBUFFER,null),Ce.depthBuffer&&(ht.__webglDepthRenderbuffer=t.createRenderbuffer(),Fe(ht.__webglDepthRenderbuffer,Ce,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(jt){n.bindTexture(t.TEXTURE_CUBE_MAP,dt.__webglTexture),Be(t.TEXTURE_CUBE_MAP,_e,cn);for(let Rt=0;Rt<6;Rt++)if(s&&_e.mipmaps&&_e.mipmaps.length>0)for(let nn=0;nn<_e.mipmaps.length;nn++)zt(ht.__webglFramebuffer[Rt][nn],Ce,_e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Rt,nn);else zt(ht.__webglFramebuffer[Rt],Ce,_e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Rt,0);C(_e,cn)&&I(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Sn){for(let Rt=0,nn=Wt.length;Rt<nn;Rt++){const An=Wt[Rt],mt=r.get(An);n.bindTexture(t.TEXTURE_2D,mt.__webglTexture),Be(t.TEXTURE_2D,An,cn),zt(ht.__webglFramebuffer,Ce,An,t.COLOR_ATTACHMENT0+Rt,t.TEXTURE_2D,0),C(An,cn)&&I(t.TEXTURE_2D)}n.unbindTexture()}else{let Rt=t.TEXTURE_2D;if((Ce.isWebGL3DRenderTarget||Ce.isWebGLArrayRenderTarget)&&(s?Rt=Ce.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Rt,dt.__webglTexture),Be(Rt,_e,cn),s&&_e.mipmaps&&_e.mipmaps.length>0)for(let nn=0;nn<_e.mipmaps.length;nn++)zt(ht.__webglFramebuffer[nn],Ce,_e,t.COLOR_ATTACHMENT0,Rt,nn);else zt(ht.__webglFramebuffer,Ce,_e,t.COLOR_ATTACHMENT0,Rt,0);C(_e,cn)&&I(Rt),n.unbindTexture()}Ce.depthBuffer&&Qe(Ce)}function ot(Ce){const _e=w(Ce)||s,ht=Ce.textures;for(let dt=0,Wt=ht.length;dt<Wt;dt++){const jt=ht[dt];if(C(jt,_e)){const Sn=Ce.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,cn=r.get(jt).__webglTexture;n.bindTexture(Sn,cn),I(Sn),n.unbindTexture()}}}function Tt(Ce){if(s&&Ce.samples>0&&Bt(Ce)===!1){const _e=Ce.textures,ht=Ce.width,dt=Ce.height;let Wt=t.COLOR_BUFFER_BIT;const jt=[],Sn=Ce.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,cn=r.get(Ce),Rt=_e.length>1;if(Rt)for(let nn=0;nn<_e.length;nn++)n.bindFramebuffer(t.FRAMEBUFFER,cn.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+nn,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,cn.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+nn,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,cn.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,cn.__webglFramebuffer);for(let nn=0;nn<_e.length;nn++){jt.push(t.COLOR_ATTACHMENT0+nn),Ce.depthBuffer&&jt.push(Sn);const An=cn.__ignoreDepthValues!==void 0?cn.__ignoreDepthValues:!1;if(An===!1&&(Ce.depthBuffer&&(Wt|=t.DEPTH_BUFFER_BIT),Ce.stencilBuffer&&(Wt|=t.STENCIL_BUFFER_BIT)),Rt&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,cn.__webglColorRenderbuffer[nn]),An===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[Sn]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[Sn])),Rt){const mt=r.get(_e[nn]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,mt,0)}t.blitFramebuffer(0,0,ht,dt,0,0,ht,dt,Wt,t.NEAREST),c&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,jt)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),Rt)for(let nn=0;nn<_e.length;nn++){n.bindFramebuffer(t.FRAMEBUFFER,cn.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+nn,t.RENDERBUFFER,cn.__webglColorRenderbuffer[nn]);const An=r.get(_e[nn]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,cn.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+nn,t.TEXTURE_2D,An,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,cn.__webglMultisampledFramebuffer)}}function Ct(Ce){return Math.min(i.maxSamples,Ce.samples)}function Bt(Ce){const _e=r.get(Ce);return s&&Ce.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&_e.__useRenderToTexture!==!1}function Gt(Ce){const _e=a.render.frame;p.get(Ce)!==_e&&(p.set(Ce,_e),Ce.update())}function sn(Ce,_e){const ht=Ce.colorSpace,dt=Ce.format,Wt=Ce.type;return Ce.isCompressedTexture===!0||Ce.isVideoTexture===!0||Ce.format===tI||ht!==dm&&ht!==bp&&(Ni.getTransfer(ht)===fo?s===!1?e.has("EXT_sRGB")===!0&&dt===Ul?(Ce.format=tI,Ce.minFilter=Uo,Ce.generateMipmaps=!1):_e=Q6.sRGBToLinear(_e):(dt!==Ul||Wt!==Mh)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ht)),_e}function Je(Ce){return typeof HTMLImageElement<"u"&&Ce instanceof HTMLImageElement?(h.width=Ce.naturalWidth||Ce.width,h.height=Ce.naturalHeight||Ce.height):typeof VideoFrame<"u"&&Ce instanceof VideoFrame?(h.width=Ce.displayWidth,h.height=Ce.displayHeight):(h.width=Ce.width,h.height=Ce.height),h}this.allocateTextureUnit=ce,this.resetTextureUnits=ie,this.setTexture2D=xe,this.setTexture2DArray=te,this.setTexture3D=he,this.setTextureCube=ve,this.rebindTextures=ge,this.setupRenderTarget=et,this.updateRenderTargetMipmap=ot,this.updateMultisampleRenderTarget=Tt,this.setupDepthRenderbuffer=Qe,this.setupFrameBufferTexture=zt,this.useMultisampledRTT=Bt}function Wue(t,e,n){const r=n.isWebGL2;function i(o,a=bp){let s;const l=Ni.getTransfer(a);if(o===Mh)return t.UNSIGNED_BYTE;if(o===V6)return t.UNSIGNED_SHORT_4_4_4_4;if(o===W6)return t.UNSIGNED_SHORT_5_5_5_1;if(o===lue)return t.BYTE;if(o===cue)return t.SHORT;if(o===BO)return t.UNSIGNED_SHORT;if(o===U6)return t.INT;if(o===Ip)return t.UNSIGNED_INT;if(o===ou)return t.FLOAT;if(o===Kb)return r?t.HALF_FLOAT:(s=e.get("OES_texture_half_float"),s!==null?s.HALF_FLOAT_OES:null);if(o===uue)return t.ALPHA;if(o===Ul)return t.RGBA;if(o===due)return t.LUMINANCE;if(o===fue)return t.LUMINANCE_ALPHA;if(o===Qg)return t.DEPTH_COMPONENT;if(o===N0)return t.DEPTH_STENCIL;if(o===tI)return s=e.get("EXT_sRGB"),s!==null?s.SRGB_ALPHA_EXT:null;if(o===H6)return t.RED;if(o===G6)return t.RED_INTEGER;if(o===hue)return t.RG;if(o===q6)return t.RG_INTEGER;if(o===Y6)return t.RGBA_INTEGER;if(o===jA||o===UA||o===VA||o===WA)if(l===fo)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(o===jA)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===UA)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===VA)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===WA)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(o===jA)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===UA)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===VA)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===WA)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===y4||o===v4||o===x4||o===_4)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(o===y4)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===v4)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===x4)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===_4)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===X6)return s=e.get("WEBGL_compressed_texture_etc1"),s!==null?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===b4||o===w4)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(o===b4)return l===fo?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(o===w4)return l===fo?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===S4||o===M4||o===E4||o===T4||o===C4||o===A4||o===P4||o===k4||o===I4||o===R4||o===O4||o===L4||o===D4||o===N4)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(o===S4)return l===fo?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===M4)return l===fo?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===E4)return l===fo?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===T4)return l===fo?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===C4)return l===fo?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===A4)return l===fo?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===P4)return l===fo?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===k4)return l===fo?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===I4)return l===fo?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===R4)return l===fo?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===O4)return l===fo?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===L4)return l===fo?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===D4)return l===fo?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===N4)return l===fo?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===HA||o===z4||o===F4)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(o===HA)return l===fo?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(o===z4)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(o===F4)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(o===pue||o===B4||o===$4||o===j4)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(o===HA)return s.COMPRESSED_RED_RGTC1_EXT;if(o===B4)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===$4)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===j4)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===Jg?r?t.UNSIGNED_INT_24_8:(s=e.get("WEBGL_depth_texture"),s!==null?s.UNSIGNED_INT_24_8_WEBGL:null):t[o]!==void 0?t[o]:null}return{convert:i}}class Hue extends os{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class N_ extends vi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Hgt={type:"move"};class RN{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new N_,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new N_,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Oe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Oe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new N_,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Oe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Oe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,o=null,a=null;const s=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const b of e.hand.values()){const M=n.getJointPose(b,r),w=this._getHandJoint(c,b);M!==null&&(w.matrix.fromArray(M.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.matrixWorldNeedsUpdate=!0,w.jointRadius=M.radius),w.visible=M!==null}const h=c.joints["index-finger-tip"],p=c.joints["thumb-tip"],g=h.position.distanceTo(p.position),v=.02,x=.005;c.inputState.pinching&&g>v+x?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&g<=v-x&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(o=n.getPose(e.gripSpace,r),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));s!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&o!==null&&(i=o),i!==null&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(Hgt)))}return s!==null&&(s.visible=i!==null),l!==null&&(l.visible=o!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new N_;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}const Ggt=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,qgt=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Ygt{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,r){if(this.texture===null){const i=new Go,o=e.properties.get(i);o.__webglTexture=n.texture,(n.depthNear!=r.depthNear||n.depthFar!=r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=i}}render(e,n){if(this.texture!==null){if(this.mesh===null){const r=n.cameras[0].viewport,i=new yf({extensions:{fragDepth:!0},vertexShader:Ggt,fragmentShader:qgt,uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new Rs(new B1(20,20),i)}e.render(this.mesh,n)}}reset(){this.texture=null,this.mesh=null}}class Xgt extends bf{constructor(e,n){super();const r=this;let i=null,o=1,a=null,s="local-floor",l=1,c=null,h=null,p=null,g=null,v=null,x=null;const b=new Ygt,M=n.getContextAttributes();let w=null,T=null;const C=[],I=[],R=new Ht;let O=null;const B=new os;B.layers.enable(1),B.viewport=new zi;const U=new os;U.layers.enable(2),U.viewport=new zi;const Z=[B,U],j=new Hue;j.layers.enable(1),j.layers.enable(2);let X=null,le=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Be){let st=C[Be];return st===void 0&&(st=new RN,C[Be]=st),st.getTargetRaySpace()},this.getControllerGrip=function(Be){let st=C[Be];return st===void 0&&(st=new RN,C[Be]=st),st.getGripSpace()},this.getHand=function(Be){let st=C[Be];return st===void 0&&(st=new RN,C[Be]=st),st.getHandSpace()};function me(Be){const st=I.indexOf(Be.inputSource);if(st===-1)return;const ct=C[st];ct!==void 0&&(ct.update(Be.inputSource,Be.frame,c||a),ct.dispatchEvent({type:Be.type,data:Be.inputSource}))}function ie(){i.removeEventListener("select",me),i.removeEventListener("selectstart",me),i.removeEventListener("selectend",me),i.removeEventListener("squeeze",me),i.removeEventListener("squeezestart",me),i.removeEventListener("squeezeend",me),i.removeEventListener("end",ie),i.removeEventListener("inputsourceschange",ce);for(let Be=0;Be<C.length;Be++){const st=I[Be];st!==null&&(I[Be]=null,C[Be].disconnect(st))}X=null,le=null,b.reset(),e.setRenderTarget(w),v=null,g=null,p=null,i=null,T=null,rt.stop(),r.isPresenting=!1,e.setPixelRatio(O),e.setSize(R.width,R.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Be){o=Be,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Be){s=Be,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(Be){c=Be},this.getBaseLayer=function(){return g!==null?g:v},this.getBinding=function(){return p},this.getFrame=function(){return x},this.getSession=function(){return i},this.setSession=async function(Be){if(i=Be,i!==null){if(w=e.getRenderTarget(),i.addEventListener("select",me),i.addEventListener("selectstart",me),i.addEventListener("selectend",me),i.addEventListener("squeeze",me),i.addEventListener("squeezestart",me),i.addEventListener("squeezeend",me),i.addEventListener("end",ie),i.addEventListener("inputsourceschange",ce),M.xrCompatible!==!0&&await n.makeXRCompatible(),O=e.getPixelRatio(),e.getSize(R),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const st={antialias:i.renderState.layers===void 0?M.antialias:!0,alpha:!0,depth:M.depth,stencil:M.stencil,framebufferScaleFactor:o};v=new XRWebGLLayer(i,n,st),i.updateRenderState({baseLayer:v}),e.setPixelRatio(1),e.setSize(v.framebufferWidth,v.framebufferHeight,!1),T=new gf(v.framebufferWidth,v.framebufferHeight,{format:Ul,type:Mh,colorSpace:e.outputColorSpace,stencilBuffer:M.stencil})}else{let st=null,ct=null,Dt=null;M.depth&&(Dt=M.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,st=M.stencil?N0:Qg,ct=M.stencil?Jg:Ip);const zt={colorFormat:n.RGBA8,depthFormat:Dt,scaleFactor:o};p=new XRWebGLBinding(i,n),g=p.createProjectionLayer(zt),i.updateRenderState({layers:[g]}),e.setPixelRatio(1),e.setSize(g.textureWidth,g.textureHeight,!1),T=new gf(g.textureWidth,g.textureHeight,{format:Ul,type:Mh,depthTexture:new i8(g.textureWidth,g.textureHeight,ct,void 0,void 0,void 0,void 0,void 0,void 0,st),stencilBuffer:M.stencil,colorSpace:e.outputColorSpace,samples:M.antialias?4:0});const Fe=e.properties.get(T);Fe.__ignoreDepthValues=g.ignoreDepthValues}T.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await i.requestReferenceSpace(s),rt.setContext(i),rt.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function ce(Be){for(let st=0;st<Be.removed.length;st++){const ct=Be.removed[st],Dt=I.indexOf(ct);Dt>=0&&(I[Dt]=null,C[Dt].disconnect(ct))}for(let st=0;st<Be.added.length;st++){const ct=Be.added[st];let Dt=I.indexOf(ct);if(Dt===-1){for(let Fe=0;Fe<C.length;Fe++)if(Fe>=I.length){I.push(ct),Dt=Fe;break}else if(I[Fe]===null){I[Fe]=ct,Dt=Fe;break}if(Dt===-1)break}const zt=C[Dt];zt&&zt.connect(ct)}}const fe=new Oe,xe=new Oe;function te(Be,st,ct){fe.setFromMatrixPosition(st.matrixWorld),xe.setFromMatrixPosition(ct.matrixWorld);const Dt=fe.distanceTo(xe),zt=st.projectionMatrix.elements,Fe=ct.projectionMatrix.elements,lt=zt[14]/(zt[10]-1),Qe=zt[14]/(zt[10]+1),ge=(zt[9]+1)/zt[5],et=(zt[9]-1)/zt[5],ot=(zt[8]-1)/zt[0],Tt=(Fe[8]+1)/Fe[0],Ct=lt*ot,Bt=lt*Tt,Gt=Dt/(-ot+Tt),sn=Gt*-ot;st.matrixWorld.decompose(Be.position,Be.quaternion,Be.scale),Be.translateX(sn),Be.translateZ(Gt),Be.matrixWorld.compose(Be.position,Be.quaternion,Be.scale),Be.matrixWorldInverse.copy(Be.matrixWorld).invert();const Je=lt+Gt,Ce=Qe+Gt,_e=Ct-sn,ht=Bt+(Dt-sn),dt=ge*Qe/Ce*Je,Wt=et*Qe/Ce*Je;Be.projectionMatrix.makePerspective(_e,ht,dt,Wt,Je,Ce),Be.projectionMatrixInverse.copy(Be.projectionMatrix).invert()}function he(Be,st){st===null?Be.matrixWorld.copy(Be.matrix):Be.matrixWorld.multiplyMatrices(st.matrixWorld,Be.matrix),Be.matrixWorldInverse.copy(Be.matrixWorld).invert()}this.updateCamera=function(Be){if(i===null)return;b.texture!==null&&(Be.near=b.depthNear,Be.far=b.depthFar),j.near=U.near=B.near=Be.near,j.far=U.far=B.far=Be.far,(X!==j.near||le!==j.far)&&(i.updateRenderState({depthNear:j.near,depthFar:j.far}),X=j.near,le=j.far,B.near=X,B.far=le,U.near=X,U.far=le,B.updateProjectionMatrix(),U.updateProjectionMatrix(),Be.updateProjectionMatrix());const st=Be.parent,ct=j.cameras;he(j,st);for(let Dt=0;Dt<ct.length;Dt++)he(ct[Dt],st);ct.length===2?te(j,B,U):j.projectionMatrix.copy(B.projectionMatrix),ve(Be,j,st)};function ve(Be,st,ct){ct===null?Be.matrix.copy(st.matrixWorld):(Be.matrix.copy(ct.matrixWorld),Be.matrix.invert(),Be.matrix.multiply(st.matrixWorld)),Be.matrix.decompose(Be.position,Be.quaternion,Be.scale),Be.updateMatrixWorld(!0),Be.projectionMatrix.copy(st.projectionMatrix),Be.projectionMatrixInverse.copy(st.projectionMatrixInverse),Be.isPerspectiveCamera&&(Be.fov=Zb*2*Math.atan(1/Be.projectionMatrix.elements[5]),Be.zoom=1)}this.getCamera=function(){return j},this.getFoveation=function(){if(!(g===null&&v===null))return l},this.setFoveation=function(Be){l=Be,g!==null&&(g.fixedFoveation=Be),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=Be)},this.hasDepthSensing=function(){return b.texture!==null};let ze=null;function Ue(Be,st){if(h=st.getViewerPose(c||a),x=st,h!==null){const ct=h.views;v!==null&&(e.setRenderTargetFramebuffer(T,v.framebuffer),e.setRenderTarget(T));let Dt=!1;ct.length!==j.cameras.length&&(j.cameras.length=0,Dt=!0);for(let Fe=0;Fe<ct.length;Fe++){const lt=ct[Fe];let Qe=null;if(v!==null)Qe=v.getViewport(lt);else{const et=p.getViewSubImage(g,lt);Qe=et.viewport,Fe===0&&(e.setRenderTargetTextures(T,et.colorTexture,g.ignoreDepthValues?void 0:et.depthStencilTexture),e.setRenderTarget(T))}let ge=Z[Fe];ge===void 0&&(ge=new os,ge.layers.enable(Fe),ge.viewport=new zi,Z[Fe]=ge),ge.matrix.fromArray(lt.transform.matrix),ge.matrix.decompose(ge.position,ge.quaternion,ge.scale),ge.projectionMatrix.fromArray(lt.projectionMatrix),ge.projectionMatrixInverse.copy(ge.projectionMatrix).invert(),ge.viewport.set(Qe.x,Qe.y,Qe.width,Qe.height),Fe===0&&(j.matrix.copy(ge.matrix),j.matrix.decompose(j.position,j.quaternion,j.scale)),Dt===!0&&j.cameras.push(ge)}const zt=i.enabledFeatures;if(zt&&zt.includes("depth-sensing")){const Fe=p.getDepthInformation(ct[0]);Fe&&Fe.isValid&&Fe.texture&&b.init(e,Fe,i.renderState)}}for(let ct=0;ct<C.length;ct++){const Dt=I[ct],zt=C[ct];Dt!==null&&zt!==void 0&&zt.update(Dt,st,c||a)}b.render(e,j),ze&&ze(Be,st),st.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:st}),x=null}const rt=new Fue;rt.setAnimationLoop(Ue),this.setAnimationLoop=function(Be){ze=Be},this.dispose=function(){}}}const wv=new xu,Kgt=new xr;function Zgt(t,e){function n(M,w){M.matrixAutoUpdate===!0&&M.updateMatrix(),w.value.copy(M.matrix)}function r(M,w){w.color.getRGB(M.fogColor.value,Lue(t)),w.isFog?(M.fogNear.value=w.near,M.fogFar.value=w.far):w.isFogExp2&&(M.fogDensity.value=w.density)}function i(M,w,T,C,I){w.isMeshBasicMaterial||w.isMeshLambertMaterial?o(M,w):w.isMeshToonMaterial?(o(M,w),p(M,w)):w.isMeshPhongMaterial?(o(M,w),h(M,w)):w.isMeshStandardMaterial?(o(M,w),g(M,w),w.isMeshPhysicalMaterial&&v(M,w,I)):w.isMeshMatcapMaterial?(o(M,w),x(M,w)):w.isMeshDepthMaterial?o(M,w):w.isMeshDistanceMaterial?(o(M,w),b(M,w)):w.isMeshNormalMaterial?o(M,w):w.isLineBasicMaterial?(a(M,w),w.isLineDashedMaterial&&s(M,w)):w.isPointsMaterial?l(M,w,T,C):w.isSpriteMaterial?c(M,w):w.isShadowMaterial?(M.color.value.copy(w.color),M.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function o(M,w){M.opacity.value=w.opacity,w.color&&M.diffuse.value.copy(w.color),w.emissive&&M.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(M.map.value=w.map,n(w.map,M.mapTransform)),w.alphaMap&&(M.alphaMap.value=w.alphaMap,n(w.alphaMap,M.alphaMapTransform)),w.bumpMap&&(M.bumpMap.value=w.bumpMap,n(w.bumpMap,M.bumpMapTransform),M.bumpScale.value=w.bumpScale,w.side===ql&&(M.bumpScale.value*=-1)),w.normalMap&&(M.normalMap.value=w.normalMap,n(w.normalMap,M.normalMapTransform),M.normalScale.value.copy(w.normalScale),w.side===ql&&M.normalScale.value.negate()),w.displacementMap&&(M.displacementMap.value=w.displacementMap,n(w.displacementMap,M.displacementMapTransform),M.displacementScale.value=w.displacementScale,M.displacementBias.value=w.displacementBias),w.emissiveMap&&(M.emissiveMap.value=w.emissiveMap,n(w.emissiveMap,M.emissiveMapTransform)),w.specularMap&&(M.specularMap.value=w.specularMap,n(w.specularMap,M.specularMapTransform)),w.alphaTest>0&&(M.alphaTest.value=w.alphaTest);const T=e.get(w),C=T.envMap,I=T.envMapRotation;if(C&&(M.envMap.value=C,wv.copy(I),wv.x*=-1,wv.y*=-1,wv.z*=-1,C.isCubeTexture&&C.isRenderTargetTexture===!1&&(wv.y*=-1,wv.z*=-1),M.envMapRotation.value.setFromMatrix4(Kgt.makeRotationFromEuler(wv)),M.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,M.reflectivity.value=w.reflectivity,M.ior.value=w.ior,M.refractionRatio.value=w.refractionRatio),w.lightMap){M.lightMap.value=w.lightMap;const R=t._useLegacyLights===!0?Math.PI:1;M.lightMapIntensity.value=w.lightMapIntensity*R,n(w.lightMap,M.lightMapTransform)}w.aoMap&&(M.aoMap.value=w.aoMap,M.aoMapIntensity.value=w.aoMapIntensity,n(w.aoMap,M.aoMapTransform))}function a(M,w){M.diffuse.value.copy(w.color),M.opacity.value=w.opacity,w.map&&(M.map.value=w.map,n(w.map,M.mapTransform))}function s(M,w){M.dashSize.value=w.dashSize,M.totalSize.value=w.dashSize+w.gapSize,M.scale.value=w.scale}function l(M,w,T,C){M.diffuse.value.copy(w.color),M.opacity.value=w.opacity,M.size.value=w.size*T,M.scale.value=C*.5,w.map&&(M.map.value=w.map,n(w.map,M.uvTransform)),w.alphaMap&&(M.alphaMap.value=w.alphaMap,n(w.alphaMap,M.alphaMapTransform)),w.alphaTest>0&&(M.alphaTest.value=w.alphaTest)}function c(M,w){M.diffuse.value.copy(w.color),M.opacity.value=w.opacity,M.rotation.value=w.rotation,w.map&&(M.map.value=w.map,n(w.map,M.mapTransform)),w.alphaMap&&(M.alphaMap.value=w.alphaMap,n(w.alphaMap,M.alphaMapTransform)),w.alphaTest>0&&(M.alphaTest.value=w.alphaTest)}function h(M,w){M.specular.value.copy(w.specular),M.shininess.value=Math.max(w.shininess,1e-4)}function p(M,w){w.gradientMap&&(M.gradientMap.value=w.gradientMap)}function g(M,w){M.metalness.value=w.metalness,w.metalnessMap&&(M.metalnessMap.value=w.metalnessMap,n(w.metalnessMap,M.metalnessMapTransform)),M.roughness.value=w.roughness,w.roughnessMap&&(M.roughnessMap.value=w.roughnessMap,n(w.roughnessMap,M.roughnessMapTransform)),e.get(w).envMap&&(M.envMapIntensity.value=w.envMapIntensity)}function v(M,w,T){M.ior.value=w.ior,w.sheen>0&&(M.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),M.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(M.sheenColorMap.value=w.sheenColorMap,n(w.sheenColorMap,M.sheenColorMapTransform)),w.sheenRoughnessMap&&(M.sheenRoughnessMap.value=w.sheenRoughnessMap,n(w.sheenRoughnessMap,M.sheenRoughnessMapTransform))),w.clearcoat>0&&(M.clearcoat.value=w.clearcoat,M.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(M.clearcoatMap.value=w.clearcoatMap,n(w.clearcoatMap,M.clearcoatMapTransform)),w.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap,n(w.clearcoatRoughnessMap,M.clearcoatRoughnessMapTransform)),w.clearcoatNormalMap&&(M.clearcoatNormalMap.value=w.clearcoatNormalMap,n(w.clearcoatNormalMap,M.clearcoatNormalMapTransform),M.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),w.side===ql&&M.clearcoatNormalScale.value.negate())),w.iridescence>0&&(M.iridescence.value=w.iridescence,M.iridescenceIOR.value=w.iridescenceIOR,M.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],M.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(M.iridescenceMap.value=w.iridescenceMap,n(w.iridescenceMap,M.iridescenceMapTransform)),w.iridescenceThicknessMap&&(M.iridescenceThicknessMap.value=w.iridescenceThicknessMap,n(w.iridescenceThicknessMap,M.iridescenceThicknessMapTransform))),w.transmission>0&&(M.transmission.value=w.transmission,M.transmissionSamplerMap.value=T.texture,M.transmissionSamplerSize.value.set(T.width,T.height),w.transmissionMap&&(M.transmissionMap.value=w.transmissionMap,n(w.transmissionMap,M.transmissionMapTransform)),M.thickness.value=w.thickness,w.thicknessMap&&(M.thicknessMap.value=w.thicknessMap,n(w.thicknessMap,M.thicknessMapTransform)),M.attenuationDistance.value=w.attenuationDistance,M.attenuationColor.value.copy(w.attenuationColor)),w.anisotropy>0&&(M.anisotropyVector.value.set(w.anisotropy*Math.cos(w.anisotropyRotation),w.anisotropy*Math.sin(w.anisotropyRotation)),w.anisotropyMap&&(M.anisotropyMap.value=w.anisotropyMap,n(w.anisotropyMap,M.anisotropyMapTransform))),M.specularIntensity.value=w.specularIntensity,M.specularColor.value.copy(w.specularColor),w.specularColorMap&&(M.specularColorMap.value=w.specularColorMap,n(w.specularColorMap,M.specularColorMapTransform)),w.specularIntensityMap&&(M.specularIntensityMap.value=w.specularIntensityMap,n(w.specularIntensityMap,M.specularIntensityMapTransform))}function x(M,w){w.matcap&&(M.matcap.value=w.matcap)}function b(M,w){const T=e.get(w).light;M.referencePosition.value.setFromMatrixPosition(T.matrixWorld),M.nearDistance.value=T.shadow.camera.near,M.farDistance.value=T.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function Jgt(t,e,n,r){let i={},o={},a=[];const s=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(T,C){const I=C.program;r.uniformBlockBinding(T,I)}function c(T,C){let I=i[T.id];I===void 0&&(x(T),I=h(T),i[T.id]=I,T.addEventListener("dispose",M));const R=C.program;r.updateUBOMapping(T,R);const O=e.render.frame;o[T.id]!==O&&(g(T),o[T.id]=O)}function h(T){const C=p();T.__bindingPointIndex=C;const I=t.createBuffer(),R=T.__size,O=T.usage;return t.bindBuffer(t.UNIFORM_BUFFER,I),t.bufferData(t.UNIFORM_BUFFER,R,O),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,C,I),I}function p(){for(let T=0;T<s;T++)if(a.indexOf(T)===-1)return a.push(T),T;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function g(T){const C=i[T.id],I=T.uniforms,R=T.__cache;t.bindBuffer(t.UNIFORM_BUFFER,C);for(let O=0,B=I.length;O<B;O++){const U=Array.isArray(I[O])?I[O]:[I[O]];for(let Z=0,j=U.length;Z<j;Z++){const X=U[Z];if(v(X,O,Z,R)===!0){const le=X.__offset,me=Array.isArray(X.value)?X.value:[X.value];let ie=0;for(let ce=0;ce<me.length;ce++){const fe=me[ce],xe=b(fe);typeof fe=="number"||typeof fe=="boolean"?(X.__data[0]=fe,t.bufferSubData(t.UNIFORM_BUFFER,le+ie,X.__data)):fe.isMatrix3?(X.__data[0]=fe.elements[0],X.__data[1]=fe.elements[1],X.__data[2]=fe.elements[2],X.__data[3]=0,X.__data[4]=fe.elements[3],X.__data[5]=fe.elements[4],X.__data[6]=fe.elements[5],X.__data[7]=0,X.__data[8]=fe.elements[6],X.__data[9]=fe.elements[7],X.__data[10]=fe.elements[8],X.__data[11]=0):(fe.toArray(X.__data,ie),ie+=xe.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,le,X.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function v(T,C,I,R){const O=T.value,B=C+"_"+I;if(R[B]===void 0)return typeof O=="number"||typeof O=="boolean"?R[B]=O:R[B]=O.clone(),!0;{const U=R[B];if(typeof O=="number"||typeof O=="boolean"){if(U!==O)return R[B]=O,!0}else if(U.equals(O)===!1)return U.copy(O),!0}return!1}function x(T){const C=T.uniforms;let I=0;const R=16;for(let B=0,U=C.length;B<U;B++){const Z=Array.isArray(C[B])?C[B]:[C[B]];for(let j=0,X=Z.length;j<X;j++){const le=Z[j],me=Array.isArray(le.value)?le.value:[le.value];for(let ie=0,ce=me.length;ie<ce;ie++){const fe=me[ie],xe=b(fe),te=I%R;te!==0&&R-te<xe.boundary&&(I+=R-te),le.__data=new Float32Array(xe.storage/Float32Array.BYTES_PER_ELEMENT),le.__offset=I,I+=xe.storage}}}const O=I%R;return O>0&&(I+=R-O),T.__size=I,T.__cache={},this}function b(T){const C={boundary:0,storage:0};return typeof T=="number"||typeof T=="boolean"?(C.boundary=4,C.storage=4):T.isVector2?(C.boundary=8,C.storage=8):T.isVector3||T.isColor?(C.boundary=16,C.storage=12):T.isVector4?(C.boundary=16,C.storage=16):T.isMatrix3?(C.boundary=48,C.storage=48):T.isMatrix4?(C.boundary=64,C.storage=64):T.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",T),C}function M(T){const C=T.target;C.removeEventListener("dispose",M);const I=a.indexOf(C.__bindingPointIndex);a.splice(I,1),t.deleteBuffer(i[C.id]),delete i[C.id],delete o[C.id]}function w(){for(const T in i)t.deleteBuffer(i[T]);a=[],i={},o={}}return{bind:l,update:c,dispose:w}}class a8{constructor(e={}){const{canvas:n=kue(),context:r=null,depth:i=!0,stencil:o=!0,alpha:a=!1,antialias:s=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:p=!1}=e;this.isWebGLRenderer=!0;let g;r!==null?g=r.getContextAttributes().alpha:g=a;const v=new Uint32Array(4),x=new Int32Array(4);let b=null,M=null;const w=[],T=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Yu,this._useLegacyLights=!1,this.toneMapping=Sh,this.toneMappingExposure=1;const C=this;let I=!1,R=0,O=0,B=null,U=-1,Z=null;const j=new zi,X=new zi;let le=null;const me=new Fn(0);let ie=0,ce=n.width,fe=n.height,xe=1,te=null,he=null;const ve=new zi(0,0,ce,fe),ze=new zi(0,0,ce,fe);let Ue=!1;const rt=new jE;let Be=!1,st=!1,ct=null;const Dt=new xr,zt=new Ht,Fe=new Oe,lt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Qe(){return B===null?xe:1}let ge=r;function et(Ae,ut){for(let bt=0;bt<Ae.length;bt++){const yt=Ae[bt],vt=n.getContext(yt,ut);if(vt!==null)return vt}return null}try{const Ae={alpha:!0,depth:i,stencil:o,antialias:s,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:h,failIfMajorPerformanceCaveat:p};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${NO}`),n.addEventListener("webglcontextlost",Qt,!1),n.addEventListener("webglcontextrestored",Xe,!1),n.addEventListener("webglcontextcreationerror",It,!1),ge===null){const ut=["webgl2","webgl","experimental-webgl"];if(C.isWebGL1Renderer===!0&&ut.shift(),ge=et(ut,Ae),ge===null)throw et(ut)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&ge instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),ge.getShaderPrecisionFormat===void 0&&(ge.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ae){throw console.error("THREE.WebGLRenderer: "+Ae.message),Ae}let ot,Tt,Ct,Bt,Gt,sn,Je,Ce,_e,ht,dt,Wt,jt,Sn,cn,Rt,nn,An,mt,un,an,Ot,Ie,Ve;function Me(){ot=new lmt(ge),Tt=new nmt(ge,ot,e),ot.init(Tt),Ot=new Wue(ge,ot,Tt),Ct=new Vgt(ge,ot,Tt),Bt=new dmt(ge),Gt=new Igt,sn=new Wgt(ge,ot,Ct,Gt,Tt,Ot,Bt),Je=new imt(C),Ce=new amt(C),_e=new yft(ge,Tt),Ie=new emt(ge,ot,_e,Tt),ht=new cmt(ge,_e,Bt,Ie),dt=new mmt(ge,ht,_e,Bt),mt=new pmt(ge,Tt,sn),Rt=new rmt(Gt),Wt=new kgt(C,Je,Ce,ot,Tt,Ie,Rt),jt=new Zgt(C,Gt),Sn=new Ogt,cn=new Bgt(ot,Tt),An=new Qpt(C,Je,Ce,Ct,dt,g,l),nn=new Ugt(C,dt,Tt),Ve=new Jgt(ge,Bt,Tt,Ct),un=new tmt(ge,ot,Bt,Tt),an=new umt(ge,ot,Bt,Tt),Bt.programs=Wt.programs,C.capabilities=Tt,C.extensions=ot,C.properties=Gt,C.renderLists=Sn,C.shadowMap=nn,C.state=Ct,C.info=Bt}Me();const it=new Xgt(C,ge);this.xr=it,this.getContext=function(){return ge},this.getContextAttributes=function(){return ge.getContextAttributes()},this.forceContextLoss=function(){const Ae=ot.get("WEBGL_lose_context");Ae&&Ae.loseContext()},this.forceContextRestore=function(){const Ae=ot.get("WEBGL_lose_context");Ae&&Ae.restoreContext()},this.getPixelRatio=function(){return xe},this.setPixelRatio=function(Ae){Ae!==void 0&&(xe=Ae,this.setSize(ce,fe,!1))},this.getSize=function(Ae){return Ae.set(ce,fe)},this.setSize=function(Ae,ut,bt=!0){if(it.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ce=Ae,fe=ut,n.width=Math.floor(Ae*xe),n.height=Math.floor(ut*xe),bt===!0&&(n.style.width=Ae+"px",n.style.height=ut+"px"),this.setViewport(0,0,Ae,ut)},this.getDrawingBufferSize=function(Ae){return Ae.set(ce*xe,fe*xe).floor()},this.setDrawingBufferSize=function(Ae,ut,bt){ce=Ae,fe=ut,xe=bt,n.width=Math.floor(Ae*bt),n.height=Math.floor(ut*bt),this.setViewport(0,0,Ae,ut)},this.getCurrentViewport=function(Ae){return Ae.copy(j)},this.getViewport=function(Ae){return Ae.copy(ve)},this.setViewport=function(Ae,ut,bt,yt){Ae.isVector4?ve.set(Ae.x,Ae.y,Ae.z,Ae.w):ve.set(Ae,ut,bt,yt),Ct.viewport(j.copy(ve).multiplyScalar(xe).round())},this.getScissor=function(Ae){return Ae.copy(ze)},this.setScissor=function(Ae,ut,bt,yt){Ae.isVector4?ze.set(Ae.x,Ae.y,Ae.z,Ae.w):ze.set(Ae,ut,bt,yt),Ct.scissor(X.copy(ze).multiplyScalar(xe).round())},this.getScissorTest=function(){return Ue},this.setScissorTest=function(Ae){Ct.setScissorTest(Ue=Ae)},this.setOpaqueSort=function(Ae){te=Ae},this.setTransparentSort=function(Ae){he=Ae},this.getClearColor=function(Ae){return Ae.copy(An.getClearColor())},this.setClearColor=function(){An.setClearColor.apply(An,arguments)},this.getClearAlpha=function(){return An.getClearAlpha()},this.setClearAlpha=function(){An.setClearAlpha.apply(An,arguments)},this.clear=function(Ae=!0,ut=!0,bt=!0){let yt=0;if(Ae){let vt=!1;if(B!==null){const pn=B.texture.format;vt=pn===Y6||pn===q6||pn===G6}if(vt){const pn=B.texture.type,Cn=pn===Mh||pn===Ip||pn===BO||pn===Jg||pn===V6||pn===W6,Xn=An.getClearColor(),dr=An.getClearAlpha(),fr=Xn.r,cr=Xn.g,_r=Xn.b;Cn?(v[0]=fr,v[1]=cr,v[2]=_r,v[3]=dr,ge.clearBufferuiv(ge.COLOR,0,v)):(x[0]=fr,x[1]=cr,x[2]=_r,x[3]=dr,ge.clearBufferiv(ge.COLOR,0,x))}else yt|=ge.COLOR_BUFFER_BIT}ut&&(yt|=ge.DEPTH_BUFFER_BIT),bt&&(yt|=ge.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ge.clear(yt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Qt,!1),n.removeEventListener("webglcontextrestored",Xe,!1),n.removeEventListener("webglcontextcreationerror",It,!1),Sn.dispose(),cn.dispose(),Gt.dispose(),Je.dispose(),Ce.dispose(),dt.dispose(),Ie.dispose(),Ve.dispose(),Wt.dispose(),it.dispose(),it.removeEventListener("sessionstart",Ne),it.removeEventListener("sessionend",Ke),ct&&(ct.dispose(),ct=null),qe.stop()};function Qt(Ae){Ae.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),I=!0}function Xe(){console.log("THREE.WebGLRenderer: Context Restored."),I=!1;const Ae=Bt.autoReset,ut=nn.enabled,bt=nn.autoUpdate,yt=nn.needsUpdate,vt=nn.type;Me(),Bt.autoReset=Ae,nn.enabled=ut,nn.autoUpdate=bt,nn.needsUpdate=yt,nn.type=vt}function It(Ae){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Ae.statusMessage)}function Et(Ae){const ut=Ae.target;ut.removeEventListener("dispose",Et),we(ut)}function we(Ae){oe(Ae),Gt.remove(Ae)}function oe(Ae){const ut=Gt.get(Ae).programs;ut!==void 0&&(ut.forEach(function(bt){Wt.releaseProgram(bt)}),Ae.isShaderMaterial&&Wt.releaseShaderCache(Ae))}this.renderBufferDirect=function(Ae,ut,bt,yt,vt,pn){ut===null&&(ut=lt);const Cn=vt.isMesh&&vt.matrixWorld.determinant()<0,Xn=$n(Ae,ut,bt,yt,vt);Ct.setMaterial(yt,Cn);let dr=bt.index,fr=1;if(yt.wireframe===!0){if(dr=ht.getWireframeAttribute(bt),dr===void 0)return;fr=2}const cr=bt.drawRange,_r=bt.attributes.position;let ar=cr.start*fr,No=(cr.start+cr.count)*fr;pn!==null&&(ar=Math.max(ar,pn.start*fr),No=Math.min(No,(pn.start+pn.count)*fr)),dr!==null?(ar=Math.max(ar,0),No=Math.min(No,dr.count)):_r!=null&&(ar=Math.max(ar,0),No=Math.min(No,_r.count));const fi=No-ar;if(fi<0||fi===1/0)return;Ie.setup(vt,yt,Xn,bt,dr);let Yr,Kn=un;if(dr!==null&&(Yr=_e.get(dr),Kn=an,Kn.setIndex(Yr)),vt.isMesh)yt.wireframe===!0?(Ct.setLineWidth(yt.wireframeLinewidth*Qe()),Kn.setMode(ge.LINES)):Kn.setMode(ge.TRIANGLES);else if(vt.isLine){let Dn=yt.linewidth;Dn===void 0&&(Dn=1),Ct.setLineWidth(Dn*Qe()),vt.isLineSegments?Kn.setMode(ge.LINES):vt.isLineLoop?Kn.setMode(ge.LINE_LOOP):Kn.setMode(ge.LINE_STRIP)}else vt.isPoints?Kn.setMode(ge.POINTS):vt.isSprite&&Kn.setMode(ge.TRIANGLES);if(vt.isBatchedMesh)Kn.renderMultiDraw(vt._multiDrawStarts,vt._multiDrawCounts,vt._multiDrawCount);else if(vt.isInstancedMesh)Kn.renderInstances(ar,fi,vt.count);else if(bt.isInstancedBufferGeometry){const Dn=bt._maxInstanceCount!==void 0?bt._maxInstanceCount:1/0,to=Math.min(bt.instanceCount,Dn);Kn.renderInstances(ar,fi,to)}else Kn.render(ar,fi)};function pe(Ae,ut,bt){Ae.transparent===!0&&Ae.side===af&&Ae.forceSinglePass===!1?(Ae.side=ql,Ae.needsUpdate=!0,kn(Ae,ut,bt),Ae.side=Qp,Ae.needsUpdate=!0,kn(Ae,ut,bt),Ae.side=af):kn(Ae,ut,bt)}this.compile=function(Ae,ut,bt=null){bt===null&&(bt=Ae),M=cn.get(bt),M.init(),T.push(M),bt.traverseVisible(function(vt){vt.isLight&&vt.layers.test(ut.layers)&&(M.pushLight(vt),vt.castShadow&&M.pushShadow(vt))}),Ae!==bt&&Ae.traverseVisible(function(vt){vt.isLight&&vt.layers.test(ut.layers)&&(M.pushLight(vt),vt.castShadow&&M.pushShadow(vt))}),M.setupLights(C._useLegacyLights);const yt=new Set;return Ae.traverse(function(vt){const pn=vt.material;if(pn)if(Array.isArray(pn))for(let Cn=0;Cn<pn.length;Cn++){const Xn=pn[Cn];pe(Xn,bt,vt),yt.add(Xn)}else pe(pn,bt,vt),yt.add(pn)}),T.pop(),M=null,yt},this.compileAsync=function(Ae,ut,bt=null){const yt=this.compile(Ae,ut,bt);return new Promise(vt=>{function pn(){if(yt.forEach(function(Cn){Gt.get(Cn).currentProgram.isReady()&&yt.delete(Cn)}),yt.size===0){vt(Ae);return}setTimeout(pn,10)}ot.get("KHR_parallel_shader_compile")!==null?pn():setTimeout(pn,10)})};let Te=null;function Pe(Ae){Te&&Te(Ae)}function Ne(){qe.stop()}function Ke(){qe.start()}const qe=new Fue;qe.setAnimationLoop(Pe),typeof self<"u"&&qe.setContext(self),this.setAnimationLoop=function(Ae){Te=Ae,it.setAnimationLoop(Ae),Ae===null?qe.stop():qe.start()},it.addEventListener("sessionstart",Ne),it.addEventListener("sessionend",Ke),this.render=function(Ae,ut){if(ut!==void 0&&ut.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(I===!0)return;Ae.matrixWorldAutoUpdate===!0&&Ae.updateMatrixWorld(),ut.parent===null&&ut.matrixWorldAutoUpdate===!0&&ut.updateMatrixWorld(),it.enabled===!0&&it.isPresenting===!0&&(it.cameraAutoUpdate===!0&&it.updateCamera(ut),ut=it.getCamera()),Ae.isScene===!0&&Ae.onBeforeRender(C,Ae,ut,B),M=cn.get(Ae,T.length),M.init(),T.push(M),Dt.multiplyMatrices(ut.projectionMatrix,ut.matrixWorldInverse),rt.setFromProjectionMatrix(Dt),st=this.localClippingEnabled,Be=Rt.init(this.clippingPlanes,st),b=Sn.get(Ae,w.length),b.init(),w.push(b),je(Ae,ut,0,C.sortObjects),b.finish(),C.sortObjects===!0&&b.sort(te,he),this.info.render.frame++,Be===!0&&Rt.beginShadows();const bt=M.state.shadowsArray;if(nn.render(bt,Ae,ut),Be===!0&&Rt.endShadows(),this.info.autoReset===!0&&this.info.reset(),(it.enabled===!1||it.isPresenting===!1||it.hasDepthSensing()===!1)&&An.render(b,Ae),M.setupLights(C._useLegacyLights),ut.isArrayCamera){const yt=ut.cameras;for(let vt=0,pn=yt.length;vt<pn;vt++){const Cn=yt[vt];tt(b,Ae,Cn,Cn.viewport)}}else tt(b,Ae,ut);B!==null&&(sn.updateMultisampleRenderTarget(B),sn.updateRenderTargetMipmap(B)),Ae.isScene===!0&&Ae.onAfterRender(C,Ae,ut),Ie.resetDefaultState(),U=-1,Z=null,T.pop(),T.length>0?M=T[T.length-1]:M=null,w.pop(),w.length>0?b=w[w.length-1]:b=null};function je(Ae,ut,bt,yt){if(Ae.visible===!1)return;if(Ae.layers.test(ut.layers)){if(Ae.isGroup)bt=Ae.renderOrder;else if(Ae.isLOD)Ae.autoUpdate===!0&&Ae.update(ut);else if(Ae.isLight)M.pushLight(Ae),Ae.castShadow&&M.pushShadow(Ae);else if(Ae.isSprite){if(!Ae.frustumCulled||rt.intersectsSprite(Ae)){yt&&Fe.setFromMatrixPosition(Ae.matrixWorld).applyMatrix4(Dt);const Cn=dt.update(Ae),Xn=Ae.material;Xn.visible&&b.push(Ae,Cn,Xn,bt,Fe.z,null)}}else if((Ae.isMesh||Ae.isLine||Ae.isPoints)&&(!Ae.frustumCulled||rt.intersectsObject(Ae))){const Cn=dt.update(Ae),Xn=Ae.material;if(yt&&(Ae.boundingSphere!==void 0?(Ae.boundingSphere===null&&Ae.computeBoundingSphere(),Fe.copy(Ae.boundingSphere.center)):(Cn.boundingSphere===null&&Cn.computeBoundingSphere(),Fe.copy(Cn.boundingSphere.center)),Fe.applyMatrix4(Ae.matrixWorld).applyMatrix4(Dt)),Array.isArray(Xn)){const dr=Cn.groups;for(let fr=0,cr=dr.length;fr<cr;fr++){const _r=dr[fr],ar=Xn[_r.materialIndex];ar&&ar.visible&&b.push(Ae,Cn,ar,bt,Fe.z,_r)}}else Xn.visible&&b.push(Ae,Cn,Xn,bt,Fe.z,null)}}const pn=Ae.children;for(let Cn=0,Xn=pn.length;Cn<Xn;Cn++)je(pn[Cn],ut,bt,yt)}function tt(Ae,ut,bt,yt){const vt=Ae.opaque,pn=Ae.transmissive,Cn=Ae.transparent;M.setupLightsView(bt),Be===!0&&Rt.setGlobalState(C.clippingPlanes,bt),pn.length>0&&Nt(vt,pn,ut,bt),yt&&Ct.viewport(j.copy(yt)),vt.length>0&&Ut(vt,ut,bt),pn.length>0&&Ut(pn,ut,bt),Cn.length>0&&Ut(Cn,ut,bt),Ct.buffers.depth.setTest(!0),Ct.buffers.depth.setMask(!0),Ct.buffers.color.setMask(!0),Ct.setPolygonOffset(!1)}function Nt(Ae,ut,bt,yt){if((bt.isScene===!0?bt.overrideMaterial:null)!==null)return;const pn=Tt.isWebGL2;ct===null&&(ct=new gf(1,1,{generateMipmaps:!0,type:ot.has("EXT_color_buffer_half_float")?Kb:Mh,minFilter:fh,samples:pn?4:0})),C.getDrawingBufferSize(zt),pn?ct.setSize(zt.x,zt.y):ct.setSize(nI(zt.x),nI(zt.y));const Cn=C.getRenderTarget();C.setRenderTarget(ct),C.getClearColor(me),ie=C.getClearAlpha(),ie<1&&C.setClearColor(16777215,.5),C.clear();const Xn=C.toneMapping;C.toneMapping=Sh,Ut(Ae,bt,yt),sn.updateMultisampleRenderTarget(ct),sn.updateRenderTargetMipmap(ct);let dr=!1;for(let fr=0,cr=ut.length;fr<cr;fr++){const _r=ut[fr],ar=_r.object,No=_r.geometry,fi=_r.material,Yr=_r.group;if(fi.side===af&&ar.layers.test(yt.layers)){const Kn=fi.side;fi.side=ql,fi.needsUpdate=!0,$t(ar,bt,yt,No,fi,Yr),fi.side=Kn,fi.needsUpdate=!0,dr=!0}}dr===!0&&(sn.updateMultisampleRenderTarget(ct),sn.updateRenderTargetMipmap(ct)),C.setRenderTarget(Cn),C.setClearColor(me,ie),C.toneMapping=Xn}function Ut(Ae,ut,bt){const yt=ut.isScene===!0?ut.overrideMaterial:null;for(let vt=0,pn=Ae.length;vt<pn;vt++){const Cn=Ae[vt],Xn=Cn.object,dr=Cn.geometry,fr=yt===null?Cn.material:yt,cr=Cn.group;Xn.layers.test(bt.layers)&&$t(Xn,ut,bt,dr,fr,cr)}}function $t(Ae,ut,bt,yt,vt,pn){Ae.onBeforeRender(C,ut,bt,yt,vt,pn),Ae.modelViewMatrix.multiplyMatrices(bt.matrixWorldInverse,Ae.matrixWorld),Ae.normalMatrix.getNormalMatrix(Ae.modelViewMatrix),vt.onBeforeRender(C,ut,bt,yt,Ae,pn),vt.transparent===!0&&vt.side===af&&vt.forceSinglePass===!1?(vt.side=ql,vt.needsUpdate=!0,C.renderBufferDirect(bt,ut,yt,vt,Ae,pn),vt.side=Qp,vt.needsUpdate=!0,C.renderBufferDirect(bt,ut,yt,vt,Ae,pn),vt.side=af):C.renderBufferDirect(bt,ut,yt,vt,Ae,pn),Ae.onAfterRender(C,ut,bt,yt,vt,pn)}function kn(Ae,ut,bt){ut.isScene!==!0&&(ut=lt);const yt=Gt.get(Ae),vt=M.state.lights,pn=M.state.shadowsArray,Cn=vt.state.version,Xn=Wt.getParameters(Ae,vt.state,pn,ut,bt),dr=Wt.getProgramCacheKey(Xn);let fr=yt.programs;yt.environment=Ae.isMeshStandardMaterial?ut.environment:null,yt.fog=ut.fog,yt.envMap=(Ae.isMeshStandardMaterial?Ce:Je).get(Ae.envMap||yt.environment),yt.envMapRotation=yt.environment!==null&&Ae.envMap===null?ut.environmentRotation:Ae.envMapRotation,fr===void 0&&(Ae.addEventListener("dispose",Et),fr=new Map,yt.programs=fr);let cr=fr.get(dr);if(cr!==void 0){if(yt.currentProgram===cr&&yt.lightsStateVersion===Cn)return En(Ae,Xn),cr}else Xn.uniforms=Wt.getUniforms(Ae),Ae.onBuild(bt,Xn,C),Ae.onBeforeCompile(Xn,C),cr=Wt.acquireProgram(Xn,dr),fr.set(dr,cr),yt.uniforms=Xn.uniforms;const _r=yt.uniforms;return(!Ae.isShaderMaterial&&!Ae.isRawShaderMaterial||Ae.clipping===!0)&&(_r.clippingPlanes=Rt.uniform),En(Ae,Xn),yt.needsLights=$r(Ae),yt.lightsStateVersion=Cn,yt.needsLights&&(_r.ambientLightColor.value=vt.state.ambient,_r.lightProbe.value=vt.state.probe,_r.directionalLights.value=vt.state.directional,_r.directionalLightShadows.value=vt.state.directionalShadow,_r.spotLights.value=vt.state.spot,_r.spotLightShadows.value=vt.state.spotShadow,_r.rectAreaLights.value=vt.state.rectArea,_r.ltc_1.value=vt.state.rectAreaLTC1,_r.ltc_2.value=vt.state.rectAreaLTC2,_r.pointLights.value=vt.state.point,_r.pointLightShadows.value=vt.state.pointShadow,_r.hemisphereLights.value=vt.state.hemi,_r.directionalShadowMap.value=vt.state.directionalShadowMap,_r.directionalShadowMatrix.value=vt.state.directionalShadowMatrix,_r.spotShadowMap.value=vt.state.spotShadowMap,_r.spotLightMatrix.value=vt.state.spotLightMatrix,_r.spotLightMap.value=vt.state.spotLightMap,_r.pointShadowMap.value=vt.state.pointShadowMap,_r.pointShadowMatrix.value=vt.state.pointShadowMatrix),yt.currentProgram=cr,yt.uniformsList=null,cr}function er(Ae){if(Ae.uniformsList===null){const ut=Ae.currentProgram.getUniforms();Ae.uniformsList=qA.seqWithValue(ut.seq,Ae.uniforms)}return Ae.uniformsList}function En(Ae,ut){const bt=Gt.get(Ae);bt.outputColorSpace=ut.outputColorSpace,bt.batching=ut.batching,bt.instancing=ut.instancing,bt.instancingColor=ut.instancingColor,bt.instancingMorph=ut.instancingMorph,bt.skinning=ut.skinning,bt.morphTargets=ut.morphTargets,bt.morphNormals=ut.morphNormals,bt.morphColors=ut.morphColors,bt.morphTargetsCount=ut.morphTargetsCount,bt.numClippingPlanes=ut.numClippingPlanes,bt.numIntersection=ut.numClipIntersection,bt.vertexAlphas=ut.vertexAlphas,bt.vertexTangents=ut.vertexTangents,bt.toneMapping=ut.toneMapping}function $n(Ae,ut,bt,yt,vt){ut.isScene!==!0&&(ut=lt),sn.resetTextureUnits();const pn=ut.fog,Cn=yt.isMeshStandardMaterial?ut.environment:null,Xn=B===null?C.outputColorSpace:B.isXRRenderTarget===!0?B.texture.colorSpace:dm,dr=(yt.isMeshStandardMaterial?Ce:Je).get(yt.envMap||Cn),fr=yt.vertexColors===!0&&!!bt.attributes.color&&bt.attributes.color.itemSize===4,cr=!!bt.attributes.tangent&&(!!yt.normalMap||yt.anisotropy>0),_r=!!bt.morphAttributes.position,ar=!!bt.morphAttributes.normal,No=!!bt.morphAttributes.color;let fi=Sh;yt.toneMapped&&(B===null||B.isXRRenderTarget===!0)&&(fi=C.toneMapping);const Yr=bt.morphAttributes.position||bt.morphAttributes.normal||bt.morphAttributes.color,Kn=Yr!==void 0?Yr.length:0,Dn=Gt.get(yt),to=M.state.lights;if(Be===!0&&(st===!0||Ae!==Z)){const hi=Ae===Z&&yt.id===U;Rt.setState(yt,Ae,hi)}let tr=!1;yt.version===Dn.__version?(Dn.needsLights&&Dn.lightsStateVersion!==to.state.version||Dn.outputColorSpace!==Xn||vt.isBatchedMesh&&Dn.batching===!1||!vt.isBatchedMesh&&Dn.batching===!0||vt.isInstancedMesh&&Dn.instancing===!1||!vt.isInstancedMesh&&Dn.instancing===!0||vt.isSkinnedMesh&&Dn.skinning===!1||!vt.isSkinnedMesh&&Dn.skinning===!0||vt.isInstancedMesh&&Dn.instancingColor===!0&&vt.instanceColor===null||vt.isInstancedMesh&&Dn.instancingColor===!1&&vt.instanceColor!==null||vt.isInstancedMesh&&Dn.instancingMorph===!0&&vt.morphTexture===null||vt.isInstancedMesh&&Dn.instancingMorph===!1&&vt.morphTexture!==null||Dn.envMap!==dr||yt.fog===!0&&Dn.fog!==pn||Dn.numClippingPlanes!==void 0&&(Dn.numClippingPlanes!==Rt.numPlanes||Dn.numIntersection!==Rt.numIntersection)||Dn.vertexAlphas!==fr||Dn.vertexTangents!==cr||Dn.morphTargets!==_r||Dn.morphNormals!==ar||Dn.morphColors!==No||Dn.toneMapping!==fi||Tt.isWebGL2===!0&&Dn.morphTargetsCount!==Kn)&&(tr=!0):(tr=!0,Dn.__version=yt.version);let Li=Dn.currentProgram;tr===!0&&(Li=kn(yt,ut,vt));let Ns=!1,Ur=!1,hr=!1;const Si=Li.getUniforms(),Zr=Dn.uniforms;if(Ct.useProgram(Li.program)&&(Ns=!0,Ur=!0,hr=!0),yt.id!==U&&(U=yt.id,Ur=!0),Ns||Z!==Ae){Si.setValue(ge,"projectionMatrix",Ae.projectionMatrix),Si.setValue(ge,"viewMatrix",Ae.matrixWorldInverse);const hi=Si.map.cameraPosition;hi!==void 0&&hi.setValue(ge,Fe.setFromMatrixPosition(Ae.matrixWorld)),Tt.logarithmicDepthBuffer&&Si.setValue(ge,"logDepthBufFC",2/(Math.log(Ae.far+1)/Math.LN2)),(yt.isMeshPhongMaterial||yt.isMeshToonMaterial||yt.isMeshLambertMaterial||yt.isMeshBasicMaterial||yt.isMeshStandardMaterial||yt.isShaderMaterial)&&Si.setValue(ge,"isOrthographic",Ae.isOrthographicCamera===!0),Z!==Ae&&(Z=Ae,Ur=!0,hr=!0)}if(vt.isSkinnedMesh){Si.setOptional(ge,vt,"bindMatrix"),Si.setOptional(ge,vt,"bindMatrixInverse");const hi=vt.skeleton;hi&&(Tt.floatVertexTextures?(hi.boneTexture===null&&hi.computeBoneTexture(),Si.setValue(ge,"boneTexture",hi.boneTexture,sn)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}vt.isBatchedMesh&&(Si.setOptional(ge,vt,"batchingTexture"),Si.setValue(ge,"batchingTexture",vt._matricesTexture,sn));const Rc=bt.morphAttributes;if((Rc.position!==void 0||Rc.normal!==void 0||Rc.color!==void 0&&Tt.isWebGL2===!0)&&mt.update(vt,bt,Li),(Ur||Dn.receiveShadow!==vt.receiveShadow)&&(Dn.receiveShadow=vt.receiveShadow,Si.setValue(ge,"receiveShadow",vt.receiveShadow)),yt.isMeshGouraudMaterial&&yt.envMap!==null&&(Zr.envMap.value=dr,Zr.flipEnvMap.value=dr.isCubeTexture&&dr.isRenderTargetTexture===!1?-1:1),Ur&&(Si.setValue(ge,"toneMappingExposure",C.toneMappingExposure),Dn.needsLights&&sr(Zr,hr),pn&&yt.fog===!0&&jt.refreshFogUniforms(Zr,pn),jt.refreshMaterialUniforms(Zr,yt,xe,fe,ct),qA.upload(ge,er(Dn),Zr,sn)),yt.isShaderMaterial&&yt.uniformsNeedUpdate===!0&&(qA.upload(ge,er(Dn),Zr,sn),yt.uniformsNeedUpdate=!1),yt.isSpriteMaterial&&Si.setValue(ge,"center",vt.center),Si.setValue(ge,"modelViewMatrix",vt.modelViewMatrix),Si.setValue(ge,"normalMatrix",vt.normalMatrix),Si.setValue(ge,"modelMatrix",vt.matrixWorld),yt.isShaderMaterial||yt.isRawShaderMaterial){const hi=yt.uniformsGroups;for(let Eu=0,To=hi.length;Eu<To;Eu++)if(Tt.isWebGL2){const $h=hi[Eu];Ve.update($h,Li),Ve.bind($h,Li)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Li}function sr(Ae,ut){Ae.ambientLightColor.needsUpdate=ut,Ae.lightProbe.needsUpdate=ut,Ae.directionalLights.needsUpdate=ut,Ae.directionalLightShadows.needsUpdate=ut,Ae.pointLights.needsUpdate=ut,Ae.pointLightShadows.needsUpdate=ut,Ae.spotLights.needsUpdate=ut,Ae.spotLightShadows.needsUpdate=ut,Ae.rectAreaLights.needsUpdate=ut,Ae.hemisphereLights.needsUpdate=ut}function $r(Ae){return Ae.isMeshLambertMaterial||Ae.isMeshToonMaterial||Ae.isMeshPhongMaterial||Ae.isMeshStandardMaterial||Ae.isShadowMaterial||Ae.isShaderMaterial&&Ae.lights===!0}this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return O},this.getRenderTarget=function(){return B},this.setRenderTargetTextures=function(Ae,ut,bt){Gt.get(Ae.texture).__webglTexture=ut,Gt.get(Ae.depthTexture).__webglTexture=bt;const yt=Gt.get(Ae);yt.__hasExternalTextures=!0,yt.__autoAllocateDepthBuffer=bt===void 0,yt.__autoAllocateDepthBuffer||ot.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),yt.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(Ae,ut){const bt=Gt.get(Ae);bt.__webglFramebuffer=ut,bt.__useDefaultFramebuffer=ut===void 0},this.setRenderTarget=function(Ae,ut=0,bt=0){B=Ae,R=ut,O=bt;let yt=!0,vt=null,pn=!1,Cn=!1;if(Ae){const dr=Gt.get(Ae);dr.__useDefaultFramebuffer!==void 0?(Ct.bindFramebuffer(ge.FRAMEBUFFER,null),yt=!1):dr.__webglFramebuffer===void 0?sn.setupRenderTarget(Ae):dr.__hasExternalTextures&&sn.rebindTextures(Ae,Gt.get(Ae.texture).__webglTexture,Gt.get(Ae.depthTexture).__webglTexture);const fr=Ae.texture;(fr.isData3DTexture||fr.isDataArrayTexture||fr.isCompressedArrayTexture)&&(Cn=!0);const cr=Gt.get(Ae).__webglFramebuffer;Ae.isWebGLCubeRenderTarget?(Array.isArray(cr[ut])?vt=cr[ut][bt]:vt=cr[ut],pn=!0):Tt.isWebGL2&&Ae.samples>0&&sn.useMultisampledRTT(Ae)===!1?vt=Gt.get(Ae).__webglMultisampledFramebuffer:Array.isArray(cr)?vt=cr[bt]:vt=cr,j.copy(Ae.viewport),X.copy(Ae.scissor),le=Ae.scissorTest}else j.copy(ve).multiplyScalar(xe).floor(),X.copy(ze).multiplyScalar(xe).floor(),le=Ue;if(Ct.bindFramebuffer(ge.FRAMEBUFFER,vt)&&Tt.drawBuffers&&yt&&Ct.drawBuffers(Ae,vt),Ct.viewport(j),Ct.scissor(X),Ct.setScissorTest(le),pn){const dr=Gt.get(Ae.texture);ge.framebufferTexture2D(ge.FRAMEBUFFER,ge.COLOR_ATTACHMENT0,ge.TEXTURE_CUBE_MAP_POSITIVE_X+ut,dr.__webglTexture,bt)}else if(Cn){const dr=Gt.get(Ae.texture),fr=ut||0;ge.framebufferTextureLayer(ge.FRAMEBUFFER,ge.COLOR_ATTACHMENT0,dr.__webglTexture,bt||0,fr)}U=-1},this.readRenderTargetPixels=function(Ae,ut,bt,yt,vt,pn,Cn){if(!(Ae&&Ae.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Xn=Gt.get(Ae).__webglFramebuffer;if(Ae.isWebGLCubeRenderTarget&&Cn!==void 0&&(Xn=Xn[Cn]),Xn){Ct.bindFramebuffer(ge.FRAMEBUFFER,Xn);try{const dr=Ae.texture,fr=dr.format,cr=dr.type;if(fr!==Ul&&Ot.convert(fr)!==ge.getParameter(ge.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const _r=cr===Kb&&(ot.has("EXT_color_buffer_half_float")||Tt.isWebGL2&&ot.has("EXT_color_buffer_float"));if(cr!==Mh&&Ot.convert(cr)!==ge.getParameter(ge.IMPLEMENTATION_COLOR_READ_TYPE)&&!(cr===ou&&(Tt.isWebGL2||ot.has("OES_texture_float")||ot.has("WEBGL_color_buffer_float")))&&!_r){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ut>=0&&ut<=Ae.width-yt&&bt>=0&&bt<=Ae.height-vt&&ge.readPixels(ut,bt,yt,vt,Ot.convert(fr),Ot.convert(cr),pn)}finally{const dr=B!==null?Gt.get(B).__webglFramebuffer:null;Ct.bindFramebuffer(ge.FRAMEBUFFER,dr)}}},this.copyFramebufferToTexture=function(Ae,ut,bt=0){const yt=Math.pow(2,-bt),vt=Math.floor(ut.image.width*yt),pn=Math.floor(ut.image.height*yt);sn.setTexture2D(ut,0),ge.copyTexSubImage2D(ge.TEXTURE_2D,bt,0,0,Ae.x,Ae.y,vt,pn),Ct.unbindTexture()},this.copyTextureToTexture=function(Ae,ut,bt,yt=0){const vt=ut.image.width,pn=ut.image.height,Cn=Ot.convert(bt.format),Xn=Ot.convert(bt.type);sn.setTexture2D(bt,0),ge.pixelStorei(ge.UNPACK_FLIP_Y_WEBGL,bt.flipY),ge.pixelStorei(ge.UNPACK_PREMULTIPLY_ALPHA_WEBGL,bt.premultiplyAlpha),ge.pixelStorei(ge.UNPACK_ALIGNMENT,bt.unpackAlignment),ut.isDataTexture?ge.texSubImage2D(ge.TEXTURE_2D,yt,Ae.x,Ae.y,vt,pn,Cn,Xn,ut.image.data):ut.isCompressedTexture?ge.compressedTexSubImage2D(ge.TEXTURE_2D,yt,Ae.x,Ae.y,ut.mipmaps[0].width,ut.mipmaps[0].height,Cn,ut.mipmaps[0].data):ge.texSubImage2D(ge.TEXTURE_2D,yt,Ae.x,Ae.y,Cn,Xn,ut.image),yt===0&&bt.generateMipmaps&&ge.generateMipmap(ge.TEXTURE_2D),Ct.unbindTexture()},this.copyTextureToTexture3D=function(Ae,ut,bt,yt,vt=0){if(C.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const pn=Math.round(Ae.max.x-Ae.min.x),Cn=Math.round(Ae.max.y-Ae.min.y),Xn=Ae.max.z-Ae.min.z+1,dr=Ot.convert(yt.format),fr=Ot.convert(yt.type);let cr;if(yt.isData3DTexture)sn.setTexture3D(yt,0),cr=ge.TEXTURE_3D;else if(yt.isDataArrayTexture||yt.isCompressedArrayTexture)sn.setTexture2DArray(yt,0),cr=ge.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ge.pixelStorei(ge.UNPACK_FLIP_Y_WEBGL,yt.flipY),ge.pixelStorei(ge.UNPACK_PREMULTIPLY_ALPHA_WEBGL,yt.premultiplyAlpha),ge.pixelStorei(ge.UNPACK_ALIGNMENT,yt.unpackAlignment);const _r=ge.getParameter(ge.UNPACK_ROW_LENGTH),ar=ge.getParameter(ge.UNPACK_IMAGE_HEIGHT),No=ge.getParameter(ge.UNPACK_SKIP_PIXELS),fi=ge.getParameter(ge.UNPACK_SKIP_ROWS),Yr=ge.getParameter(ge.UNPACK_SKIP_IMAGES),Kn=bt.isCompressedTexture?bt.mipmaps[vt]:bt.image;ge.pixelStorei(ge.UNPACK_ROW_LENGTH,Kn.width),ge.pixelStorei(ge.UNPACK_IMAGE_HEIGHT,Kn.height),ge.pixelStorei(ge.UNPACK_SKIP_PIXELS,Ae.min.x),ge.pixelStorei(ge.UNPACK_SKIP_ROWS,Ae.min.y),ge.pixelStorei(ge.UNPACK_SKIP_IMAGES,Ae.min.z),bt.isDataTexture||bt.isData3DTexture?ge.texSubImage3D(cr,vt,ut.x,ut.y,ut.z,pn,Cn,Xn,dr,fr,Kn.data):yt.isCompressedArrayTexture?ge.compressedTexSubImage3D(cr,vt,ut.x,ut.y,ut.z,pn,Cn,Xn,dr,Kn.data):ge.texSubImage3D(cr,vt,ut.x,ut.y,ut.z,pn,Cn,Xn,dr,fr,Kn),ge.pixelStorei(ge.UNPACK_ROW_LENGTH,_r),ge.pixelStorei(ge.UNPACK_IMAGE_HEIGHT,ar),ge.pixelStorei(ge.UNPACK_SKIP_PIXELS,No),ge.pixelStorei(ge.UNPACK_SKIP_ROWS,fi),ge.pixelStorei(ge.UNPACK_SKIP_IMAGES,Yr),vt===0&&yt.generateMipmaps&&ge.generateMipmap(cr),Ct.unbindTexture()},this.initTexture=function(Ae){Ae.isCubeTexture?sn.setTextureCube(Ae,0):Ae.isData3DTexture?sn.setTexture3D(Ae,0):Ae.isDataArrayTexture||Ae.isCompressedArrayTexture?sn.setTexture2DArray(Ae,0):sn.setTexture2D(Ae,0),Ct.unbindTexture()},this.resetState=function(){R=0,O=0,B=null,Ct.reset(),Ie.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return hh}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===jO?"display-p3":"srgb",n.unpackColorSpace=Ni.workingColorSpace===FE?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class Gue extends a8{}Gue.prototype.isWebGL1Renderer=!0;class WO{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new Fn(e),this.density=n}clone(){return new WO(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class HO{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new Fn(e),this.near=n,this.far=r}clone(){return new HO(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class rI extends vi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new xu,this.environmentRotation=new xu,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class GO{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=O2,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=fu()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return Iue("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,o=this.stride;i<o;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=fu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=fu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Dl=new Oe;class z0{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)Dl.fromBufferAttribute(this,n),Dl.applyMatrix4(e),this.setXYZ(n,Dl.x,Dl.y,Dl.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Dl.fromBufferAttribute(this,n),Dl.applyNormalMatrix(e),this.setXYZ(n,Dl.x,Dl.y,Dl.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Dl.fromBufferAttribute(this,n),Dl.transformDirection(e),this.setXYZ(n,Dl.x,Dl.y,Dl.z);return this}getComponent(e,n){let r=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(r=Vl(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Rr(r,this.array)),this.data.array[e*this.data.stride+this.offset+n]=r,this}setX(e,n){return this.normalized&&(n=Rr(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Rr(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Rr(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Rr(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=Vl(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=Vl(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=Vl(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=Vl(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array),i=Rr(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,o){return e=e*this.data.stride+this.offset,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array),i=Rr(i,this.array),o=Rr(o,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)n.push(this.data.array[i+o])}return new Qi(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new z0(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)n.push(this.data.array[i+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class l8 extends ja{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Fn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Xx;const nS=new Oe,Kx=new Oe,Zx=new Oe,Jx=new Ht,rS=new Ht,que=new xr,NC=new Oe,iS=new Oe,zC=new Oe,rZ=new Ht,ON=new Ht,iZ=new Ht;class Yue extends vi{constructor(e=new l8){if(super(),this.isSprite=!0,this.type="Sprite",Xx===void 0){Xx=new Dr;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new GO(n,5);Xx.setIndex([0,1,2,0,2,3]),Xx.setAttribute("position",new z0(r,3,0,!1)),Xx.setAttribute("uv",new z0(r,2,3,!1))}this.geometry=Xx,this.material=e,this.center=new Ht(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Kx.setFromMatrixScale(this.matrixWorld),que.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Zx.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Kx.multiplyScalar(-Zx.z);const r=this.material.rotation;let i,o;r!==0&&(o=Math.cos(r),i=Math.sin(r));const a=this.center;FC(NC.set(-.5,-.5,0),Zx,a,Kx,i,o),FC(iS.set(.5,-.5,0),Zx,a,Kx,i,o),FC(zC.set(.5,.5,0),Zx,a,Kx,i,o),rZ.set(0,0),ON.set(1,0),iZ.set(1,1);let s=e.ray.intersectTriangle(NC,iS,zC,!1,nS);if(s===null&&(FC(iS.set(-.5,.5,0),Zx,a,Kx,i,o),ON.set(0,1),s=e.ray.intersectTriangle(NC,zC,iS,!1,nS),s===null))return;const l=e.ray.origin.distanceTo(nS);l<e.near||l>e.far||n.push({distance:l,point:nS.clone(),uv:su.getInterpolation(nS,NC,iS,zC,rZ,ON,iZ,new Ht),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function FC(t,e,n,r,i,o){Jx.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(rS.x=o*Jx.x-i*Jx.y,rS.y=i*Jx.x+o*Jx.y):rS.copy(Jx),t.copy(e),t.x+=rS.x,t.y+=rS.y,t.applyMatrix4(que)}const BC=new Oe,oZ=new Oe;class Xue extends vi{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const o=n[r];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const i=this.levels;let o;for(o=0;o<i.length&&!(n<i[o].distance);o++);return i.splice(o,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i;r++){let o=n[r].distance;if(n[r].object.visible&&(o-=o*n[r].hysteresis),e<o)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){BC.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(BC);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){BC.setFromMatrixPosition(e.matrixWorld),oZ.setFromMatrixPosition(this.matrixWorld);const r=BC.distanceTo(oZ)/e.zoom;n[0].object.visible=!0;let i,o;for(i=1,o=n.length;i<o;i++){let a=n[i].distance;if(n[i].object.visible&&(a-=a*n[i].hysteresis),r>=a)n[i-1].object.visible=!1,n[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<o;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,o=r.length;i<o;i++){const a=r[i];n.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return n}}const sZ=new Oe,aZ=new zi,lZ=new zi,Qgt=new Oe,cZ=new xr,$C=new Oe,LN=new xl,uZ=new xr,DN=new Ey;class Kue extends Rs{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=g4,this.bindMatrix=new xr,this.bindMatrixInverse=new xr,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Yl),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,$C),this.boundingBox.expandByPoint($C)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new xl),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,$C),this.boundingSphere.expandByPoint($C)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),LN.copy(this.boundingSphere),LN.applyMatrix4(i),e.ray.intersectsSphere(LN)!==!1&&(uZ.copy(i).invert(),DN.copy(e.ray).applyMatrix4(uZ),!(this.boundingBox!==null&&DN.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,DN)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new zi,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===g4?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===aue?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;aZ.fromBufferAttribute(i.attributes.skinIndex,e),lZ.fromBufferAttribute(i.attributes.skinWeight,e),sZ.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let o=0;o<4;o++){const a=lZ.getComponent(o);if(a!==0){const s=aZ.getComponent(o);cZ.multiplyMatrices(r.bones[s].matrixWorld,r.boneInverses[s]),n.addScaledVector(Qgt.copy(sZ).applyMatrix4(cZ),a)}}return n.applyMatrix4(this.bindMatrixInverse)}}class c8 extends vi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ey extends Go{constructor(e=null,n=1,r=1,i,o,a,s,l,c=xs,h=xs,p,g){super(null,a,s,l,c,h,i,o,p,g),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const dZ=new xr,eyt=new xr;class qO{constructor(e=[],n=[]){this.uuid=fu(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new xr)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new xr;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let o=0,a=e.length;o<a;o++){const s=e[o]?e[o].matrixWorld:eyt;dZ.multiplyMatrices(s,n[o]),dZ.toArray(r,o*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new qO(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new ey(n,e,e,Ul,ou);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const o=e.bones[r];let a=n[o];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),a=new c8),this.bones.push(a),this.boneInverses.push(new xr().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,o=n.length;i<o;i++){const a=n[i];e.bones.push(a.uuid);const s=r[i];e.boneInverses.push(s.toArray())}return e}}class Qb extends Qi{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Qx=new xr,fZ=new xr,jC=[],hZ=new Yl,tyt=new xr,oS=new Rs,sS=new xl;class Zue extends Rs{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Qb(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,tyt)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new Yl),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,Qx),hZ.copy(e.boundingBox).applyMatrix4(Qx),this.boundingBox.union(hZ)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new xl),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,Qx),sS.copy(e.boundingSphere).applyMatrix4(Qx),this.boundingSphere.union(sS)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const r=n.morphTargetInfluences,i=this.morphTexture.source.data.data,o=r.length+1,a=e*o+1;for(let s=0;s<r.length;s++)r[s]=i[a+s]}raycast(e,n){const r=this.matrixWorld,i=this.count;if(oS.geometry=this.geometry,oS.material=this.material,oS.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),sS.copy(this.boundingSphere),sS.applyMatrix4(r),e.ray.intersectsSphere(sS)!==!1))for(let o=0;o<i;o++){this.getMatrixAt(o,Qx),fZ.multiplyMatrices(r,Qx),oS.matrixWorld=fZ,oS.raycast(e,jC);for(let a=0,s=jC.length;a<s;a++){const l=jC[a];l.instanceId=o,l.object=this,n.push(l)}jC.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Qb(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const r=n.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new ey(new Float32Array(i*this.count),i,this.count,H6,ou));const o=this.morphTexture.source.data.data;let a=0;for(let c=0;c<r.length;c++)a+=r[c];const s=this.geometry.morphTargetsRelative?1:1-a,l=i*e;o[l]=s,o.set(r,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function nyt(t,e){return t.z-e.z}function ryt(t,e){return e.z-t.z}class iyt{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const o=r[this.index];i.push(o),this.index++,o.start=e.start,o.count=e.count,o.z=n}reset(){this.list.length=0,this.index=0}}const e_="batchId",dg=new xr,pZ=new xr,oyt=new xr,mZ=new xr,NN=new jE,UC=new Yl,Sv=new xl,aS=new Oe,zN=new iyt,al=new Rs,VC=[];function syt(t,e,n=0){const r=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const i=t.count;for(let o=0;o<i;o++)for(let a=0;a<r;a++)e.setComponent(o+n,a,t.getComponent(o,a))}else e.array.set(t.array,n*r);e.needsUpdate=!0}class Jue extends Rs{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,n,r=n*2,i){super(new Dr,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=n,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),r=new ey(n,e,e,Ul,ou);this._matricesTexture=r}_initializeGeometry(e){const n=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,o=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const l=e.getAttribute(s),{array:c,itemSize:h,normalized:p}=l,g=new c.constructor(r*h),v=new l.constructor(g,h,p);v.setUsage(l.usage),n.setAttribute(s,v)}if(e.getIndex()!==null){const s=r>65536?new Uint32Array(o):new Uint16Array(o);n.setIndex(new Qi(s,1))}const a=i>65536?new Uint32Array(r):new Uint16Array(r);n.setAttribute(e_,new Qi(a,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(e_))throw new Error(`BatchedMesh: Geometry cannot use attribute "${e_}"`);const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in n.attributes){if(r===e_)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),o=n.getAttribute(r);if(i.itemSize!==o.itemSize||i.normalized!==o.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Yl);const e=this._geometryCount,n=this.boundingBox,r=this._active;n.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,dg),this.getBoundingBoxAt(i,UC).applyMatrix4(dg),n.union(UC))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xl);const e=this._geometryCount,n=this.boundingSphere,r=this._active;n.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,dg),this.getBoundingSphereAt(i,Sv).applyMatrix4(dg),n.union(Sv))}addGeometry(e,n=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let o=null;const a=this._reservedRanges,s=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(o=a[a.length-1]),n===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=n,o===null?i.vertexStart=0:i.vertexStart=o.vertexStart+o.vertexCount;const c=e.getIndex(),h=c!==null;if(h&&(r===-1?i.indexCount=c.count:i.indexCount=r,o===null?i.indexStart=0:i.indexStart=o.indexStart+o.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const p=this._visibility,g=this._active,v=this._matricesTexture,x=this._matricesTexture.image.data;p.push(!0),g.push(!0);const b=this._geometryCount;this._geometryCount++,oyt.toArray(x,b*16),v.needsUpdate=!0,a.push(i),s.push({start:h?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Yl,sphereInitialized:!1,sphere:new xl});const M=this.geometry.getAttribute(e_);for(let w=0;w<i.vertexCount;w++)M.setX(i.vertexStart+w,b);return M.needsUpdate=!0,this.setGeometryAt(b,e),b}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,i=r.getIndex()!==null,o=r.getIndex(),a=n.getIndex(),s=this._reservedRanges[e];if(i&&a.count>s.indexCount||n.attributes.position.count>s.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=s.vertexStart,c=s.vertexCount;for(const v in r.attributes){if(v===e_)continue;const x=n.getAttribute(v),b=r.getAttribute(v);syt(x,b,l);const M=x.itemSize;for(let w=x.count,T=c;w<T;w++){const C=l+w;for(let I=0;I<M;I++)b.setComponent(C,I,0)}b.needsUpdate=!0}if(i){const v=s.indexStart;for(let x=0;x<a.count;x++)o.setX(v+x,l+a.getX(x));for(let x=a.count,b=s.indexCount;x<b;x++)o.setX(v+x,l);o.needsUpdate=!0}const h=this._bounds[e];n.boundingBox!==null?(h.box.copy(n.boundingBox),h.boxInitialized=!0):h.boxInitialized=!1,n.boundingSphere!==null?(h.sphere.copy(n.boundingSphere),h.sphereInitialized=!0):h.sphereInitialized=!1;const p=this._drawRanges[e],g=n.getAttribute("position");return p.count=i?a.count:g.count,this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._active;return e>=n.length||n[e]===!1?this:(n[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,n){if(this._active[e]===!1)return null;const i=this._bounds[e],o=i.box,a=this.geometry;if(i.boxInitialized===!1){o.makeEmpty();const s=a.index,l=a.attributes.position,c=this._drawRanges[e];for(let h=c.start,p=c.start+c.count;h<p;h++){let g=h;s&&(g=s.getX(g)),o.expandByPoint(aS.fromBufferAttribute(l,g))}i.boxInitialized=!0}return n.copy(o),n}getBoundingSphereAt(e,n){if(this._active[e]===!1)return null;const i=this._bounds[e],o=i.sphere,a=this.geometry;if(i.sphereInitialized===!1){o.makeEmpty(),this.getBoundingBoxAt(e,UC),UC.getCenter(o.center);const s=a.index,l=a.attributes.position,c=this._drawRanges[e];let h=0;for(let p=c.start,g=c.start+c.count;p<g;p++){let v=p;s&&(v=s.getX(v)),aS.fromBufferAttribute(l,v),h=Math.max(h,o.center.distanceToSquared(aS))}o.radius=Math.sqrt(h),i.sphereInitialized=!0}return n.copy(o),n}setMatrixAt(e,n){const r=this._active,i=this._matricesTexture,o=this._matricesTexture.image.data,a=this._geometryCount;return e>=a||r[e]===!1?this:(n.toArray(o,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,n){const r=this._active,i=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||r[e]===!1?null:n.fromArray(i,e*16)}setVisibleAt(e,n){const r=this._visibility,i=this._active,o=this._geometryCount;return e>=o||i[e]===!1||r[e]===n?this:(r[e]=n,this._visibilityChanged=!0,this)}getVisibleAt(e){const n=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:n[e]}raycast(e,n){const r=this._visibility,i=this._active,o=this._drawRanges,a=this._geometryCount,s=this.matrixWorld,l=this.geometry;al.material=this.material,al.geometry.index=l.index,al.geometry.attributes=l.attributes,al.geometry.boundingBox===null&&(al.geometry.boundingBox=new Yl),al.geometry.boundingSphere===null&&(al.geometry.boundingSphere=new xl);for(let c=0;c<a;c++){if(!r[c]||!i[c])continue;const h=o[c];al.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(c,al.matrixWorld).premultiply(s),this.getBoundingBoxAt(c,al.geometry.boundingBox),this.getBoundingSphereAt(c,al.geometry.boundingSphere),al.raycast(e,VC);for(let p=0,g=VC.length;p<g;p++){const v=VC[p];v.object=this,v.batchId=c,n.push(v)}VC.length=0}al.material=null,al.geometry.index=null,al.geometry.attributes={},al.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(n=>({...n})),this._reservedRanges=e._reservedRanges.map(n=>({...n})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(n=>({boxInitialized:n.boxInitialized,box:n.box.clone(),sphereInitialized:n.sphereInitialized,sphere:n.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,n,r,i,o){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=i.getIndex(),s=a===null?1:a.array.BYTES_PER_ELEMENT,l=this._active,c=this._visibility,h=this._multiDrawStarts,p=this._multiDrawCounts,g=this._drawRanges,v=this.perObjectFrustumCulled;v&&(mZ.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),NN.setFromProjectionMatrix(mZ,e.coordinateSystem));let x=0;if(this.sortObjects){pZ.copy(this.matrixWorld).invert(),aS.setFromMatrixPosition(r.matrixWorld).applyMatrix4(pZ);for(let w=0,T=c.length;w<T;w++)if(c[w]&&l[w]){this.getMatrixAt(w,dg),this.getBoundingSphereAt(w,Sv).applyMatrix4(dg);let C=!1;if(v&&(C=!NN.intersectsSphere(Sv)),!C){const I=aS.distanceTo(Sv.center);zN.push(g[w],I)}}const b=zN.list,M=this.customSort;M===null?b.sort(o.transparent?ryt:nyt):M.call(this,b,r);for(let w=0,T=b.length;w<T;w++){const C=b[w];h[x]=C.start*s,p[x]=C.count,x++}zN.reset()}else for(let b=0,M=c.length;b<M;b++)if(c[b]&&l[b]){let w=!1;if(v&&(this.getMatrixAt(b,dg),this.getBoundingSphereAt(b,Sv).applyMatrix4(dg),w=!NN.intersectsSphere(Sv)),!w){const T=g[b];h[x]=T.start*s,p[x]=T.count,x++}}this._multiDrawCount=x,this._visibilityChanged=!1}onBeforeShadow(e,n,r,i,o,a){this.onBeforeRender(e,null,i,o,a)}}class Ql extends ja{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Fn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const gZ=new Oe,yZ=new Oe,vZ=new xr,FN=new Ey,WC=new xl;class uy extends vi{constructor(e=new Dr,n=new Ql){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,o=n.count;i<o;i++)gZ.fromBufferAttribute(n,i-1),yZ.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=gZ.distanceTo(yZ);e.setAttribute("lineDistance",new ir(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,o=e.params.Line.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),WC.copy(r.boundingSphere),WC.applyMatrix4(i),WC.radius+=o,e.ray.intersectsSphere(WC)===!1)return;vZ.copy(i).invert(),FN.copy(e.ray).applyMatrix4(vZ);const s=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=s*s,c=new Oe,h=new Oe,p=new Oe,g=new Oe,v=this.isLineSegments?2:1,x=r.index,M=r.attributes.position;if(x!==null){const w=Math.max(0,a.start),T=Math.min(x.count,a.start+a.count);for(let C=w,I=T-1;C<I;C+=v){const R=x.getX(C),O=x.getX(C+1);if(c.fromBufferAttribute(M,R),h.fromBufferAttribute(M,O),FN.distanceSqToSegment(c,h,g,p)>l)continue;g.applyMatrix4(this.matrixWorld);const U=e.ray.origin.distanceTo(g);U<e.near||U>e.far||n.push({distance:U,point:p.clone().applyMatrix4(this.matrixWorld),index:C,face:null,faceIndex:null,object:this})}}else{const w=Math.max(0,a.start),T=Math.min(M.count,a.start+a.count);for(let C=w,I=T-1;C<I;C+=v){if(c.fromBufferAttribute(M,C),h.fromBufferAttribute(M,C+1),FN.distanceSqToSegment(c,h,g,p)>l)continue;g.applyMatrix4(this.matrixWorld);const O=e.ray.origin.distanceTo(g);O<e.near||O>e.far||n.push({distance:O,point:p.clone().applyMatrix4(this.matrixWorld),index:C,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=i.length;o<a;o++){const s=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=o}}}}}const xZ=new Oe,_Z=new Oe;class Bh extends uy{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,o=n.count;i<o;i+=2)xZ.fromBufferAttribute(n,i),_Z.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+xZ.distanceTo(_Z);e.setAttribute("lineDistance",new ir(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Que extends uy{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class u8 extends ja{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Fn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const bZ=new xr,q4=new Ey,HC=new xl,GC=new Oe;class ede extends vi{constructor(e=new Dr,n=new u8){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,o=e.params.Points.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),HC.copy(r.boundingSphere),HC.applyMatrix4(i),HC.radius+=o,e.ray.intersectsSphere(HC)===!1)return;bZ.copy(i).invert(),q4.copy(e.ray).applyMatrix4(bZ);const s=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=s*s,c=r.index,p=r.attributes.position;if(c!==null){const g=Math.max(0,a.start),v=Math.min(c.count,a.start+a.count);for(let x=g,b=v;x<b;x++){const M=c.getX(x);GC.fromBufferAttribute(p,M),wZ(GC,M,l,i,e,n,this)}}else{const g=Math.max(0,a.start),v=Math.min(p.count,a.start+a.count);for(let x=g,b=v;x<b;x++)GC.fromBufferAttribute(p,x),wZ(GC,x,l,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,a=i.length;o<a;o++){const s=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=o}}}}}function wZ(t,e,n,r,i,o,a){const s=q4.distanceSqToPoint(t);if(s<n){const l=new Oe;q4.closestPointToPoint(t,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;o.push({distance:c,distanceToRay:Math.sqrt(s),point:l,index:e,face:null,object:a})}}class ayt extends Go{constructor(e,n,r,i,o,a,s,l,c){super(e,n,r,i,o,a,s,l,c),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:Uo,this.magFilter=o!==void 0?o:Uo,this.generateMipmaps=!1;const h=this;function p(){h.needsUpdate=!0,e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class lyt extends Go{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=xs,this.minFilter=xs,this.generateMipmaps=!1,this.needsUpdate=!0}}class YO extends Go{constructor(e,n,r,i,o,a,s,l,c,h,p,g){super(null,a,s,l,c,h,i,o,p,g),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class cyt extends YO{constructor(e,n,r,i,o,a){super(e,n,r,o,a),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=hl}}class uyt extends YO{constructor(e,n,r){super(void 0,e[0].width,e[0].height,n,r,em),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class dyt extends Go{constructor(e,n,r,i,o,a,s,l,c){super(e,n,r,i,o,a,s,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class wf{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),o=0;n.push(0);for(let a=1;a<=e;a++)r=this.getPoint(a/e),o+=r.distanceTo(i),n.push(o),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const o=r.length;let a;n?a=n:a=e*r[o-1];let s=0,l=o-1,c;for(;s<=l;)if(i=Math.floor(s+(l-s)/2),c=r[i]-a,c<0)s=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===a)return i/(o-1);const h=r[i],g=r[i+1]-h,v=(a-h)/g;return(i+v)/(o-1)}getTangent(e,n){let i=e-1e-4,o=e+1e-4;i<0&&(i=0),o>1&&(o=1);const a=this.getPoint(i),s=this.getPoint(o),l=n||(a.isVector2?new Ht:new Oe);return l.copy(s).sub(a).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new Oe,i=[],o=[],a=[],s=new Oe,l=new xr;for(let v=0;v<=e;v++){const x=v/e;i[v]=this.getTangentAt(x,new Oe)}o[0]=new Oe,a[0]=new Oe;let c=Number.MAX_VALUE;const h=Math.abs(i[0].x),p=Math.abs(i[0].y),g=Math.abs(i[0].z);h<=c&&(c=h,r.set(1,0,0)),p<=c&&(c=p,r.set(0,1,0)),g<=c&&r.set(0,0,1),s.crossVectors(i[0],r).normalize(),o[0].crossVectors(i[0],s),a[0].crossVectors(i[0],o[0]);for(let v=1;v<=e;v++){if(o[v]=o[v-1].clone(),a[v]=a[v-1].clone(),s.crossVectors(i[v-1],i[v]),s.length()>Number.EPSILON){s.normalize();const x=Math.acos(is(i[v-1].dot(i[v]),-1,1));o[v].applyMatrix4(l.makeRotationAxis(s,x))}a[v].crossVectors(i[v],o[v])}if(n===!0){let v=Math.acos(is(o[0].dot(o[e]),-1,1));v/=e,i[0].dot(s.crossVectors(o[0],o[e]))>0&&(v=-v);for(let x=1;x<=e;x++)o[x].applyMatrix4(l.makeRotationAxis(i[x],v*x)),a[x].crossVectors(i[x],o[x])}return{tangents:i,normals:o,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class XO extends wf{constructor(e=0,n=0,r=1,i=1,o=0,a=Math.PI*2,s=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=o,this.aEndAngle=a,this.aClockwise=s,this.aRotation=l}getPoint(e,n=new Ht){const r=n,i=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const a=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=i;for(;o>i;)o-=i;o<Number.EPSILON&&(a?o=0:o=i),this.aClockwise===!0&&!a&&(o===i?o=-i:o=o-i);const s=this.aStartAngle+e*o;let l=this.aX+this.xRadius*Math.cos(s),c=this.aY+this.yRadius*Math.sin(s);if(this.aRotation!==0){const h=Math.cos(this.aRotation),p=Math.sin(this.aRotation),g=l-this.aX,v=c-this.aY;l=g*h-v*p+this.aX,c=g*p+v*h+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class tde extends XO{constructor(e,n,r,i,o,a){super(e,n,r,r,i,o,a),this.isArcCurve=!0,this.type="ArcCurve"}}function d8(){let t=0,e=0,n=0,r=0;function i(o,a,s,l){t=o,e=s,n=-3*o+3*a-2*s-l,r=2*o-2*a+s+l}return{initCatmullRom:function(o,a,s,l,c){i(a,s,c*(s-o),c*(l-a))},initNonuniformCatmullRom:function(o,a,s,l,c,h,p){let g=(a-o)/c-(s-o)/(c+h)+(s-a)/h,v=(s-a)/h-(l-a)/(h+p)+(l-s)/p;g*=h,v*=h,i(a,s,g,v)},calc:function(o){const a=o*o,s=a*o;return t+e*o+n*a+r*s}}}const qC=new Oe,BN=new d8,$N=new d8,jN=new d8;class nde extends wf{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new Oe){const r=n,i=this.points,o=i.length,a=(o-(this.closed?0:1))*e;let s=Math.floor(a),l=a-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/o)+1)*o:l===0&&s===o-1&&(s=o-2,l=1);let c,h;this.closed||s>0?c=i[(s-1)%o]:(qC.subVectors(i[0],i[1]).add(i[0]),c=qC);const p=i[s%o],g=i[(s+1)%o];if(this.closed||s+2<o?h=i[(s+2)%o]:(qC.subVectors(i[o-1],i[o-2]).add(i[o-1]),h=qC),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let x=Math.pow(c.distanceToSquared(p),v),b=Math.pow(p.distanceToSquared(g),v),M=Math.pow(g.distanceToSquared(h),v);b<1e-4&&(b=1),x<1e-4&&(x=b),M<1e-4&&(M=b),BN.initNonuniformCatmullRom(c.x,p.x,g.x,h.x,x,b,M),$N.initNonuniformCatmullRom(c.y,p.y,g.y,h.y,x,b,M),jN.initNonuniformCatmullRom(c.z,p.z,g.z,h.z,x,b,M)}else this.curveType==="catmullrom"&&(BN.initCatmullRom(c.x,p.x,g.x,h.x,this.tension),$N.initCatmullRom(c.y,p.y,g.y,h.y,this.tension),jN.initCatmullRom(c.z,p.z,g.z,h.z,this.tension));return r.set(BN.calc(l),$N.calc(l),jN.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new Oe().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function SZ(t,e,n,r,i){const o=(r-e)*.5,a=(i-n)*.5,s=t*t,l=t*s;return(2*n-2*r+o+a)*l+(-3*n+3*r-2*o-a)*s+o*t+n}function fyt(t,e){const n=1-t;return n*n*e}function hyt(t,e){return 2*(1-t)*t*e}function pyt(t,e){return t*t*e}function QS(t,e,n,r){return fyt(t,e)+hyt(t,n)+pyt(t,r)}function myt(t,e){const n=1-t;return n*n*n*e}function gyt(t,e){const n=1-t;return 3*n*n*t*e}function yyt(t,e){return 3*(1-t)*t*t*e}function vyt(t,e){return t*t*t*e}function eM(t,e,n,r,i){return myt(t,e)+gyt(t,n)+yyt(t,r)+vyt(t,i)}class f8 extends wf{constructor(e=new Ht,n=new Ht,r=new Ht,i=new Ht){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new Ht){const r=n,i=this.v0,o=this.v1,a=this.v2,s=this.v3;return r.set(eM(e,i.x,o.x,a.x,s.x),eM(e,i.y,o.y,a.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class rde extends wf{constructor(e=new Oe,n=new Oe,r=new Oe,i=new Oe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new Oe){const r=n,i=this.v0,o=this.v1,a=this.v2,s=this.v3;return r.set(eM(e,i.x,o.x,a.x,s.x),eM(e,i.y,o.y,a.y,s.y),eM(e,i.z,o.z,a.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class h8 extends wf{constructor(e=new Ht,n=new Ht){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new Ht){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Ht){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ide extends wf{constructor(e=new Oe,n=new Oe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new Oe){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Oe){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class p8 extends wf{constructor(e=new Ht,n=new Ht,r=new Ht){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new Ht){const r=n,i=this.v0,o=this.v1,a=this.v2;return r.set(QS(e,i.x,o.x,a.x),QS(e,i.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class m8 extends wf{constructor(e=new Oe,n=new Oe,r=new Oe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new Oe){const r=n,i=this.v0,o=this.v1,a=this.v2;return r.set(QS(e,i.x,o.x,a.x),QS(e,i.y,o.y,a.y),QS(e,i.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class g8 extends wf{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new Ht){const r=n,i=this.points,o=(i.length-1)*e,a=Math.floor(o),s=o-a,l=i[a===0?a:a-1],c=i[a],h=i[a>i.length-2?i.length-1:a+1],p=i[a>i.length-3?i.length-1:a+2];return r.set(SZ(s,l.x,c.x,h.x,p.x),SZ(s,l.y,c.y,h.y,p.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new Ht().fromArray(i))}return this}}var iI=Object.freeze({__proto__:null,ArcCurve:tde,CatmullRomCurve3:nde,CubicBezierCurve:f8,CubicBezierCurve3:rde,EllipseCurve:XO,LineCurve:h8,LineCurve3:ide,QuadraticBezierCurve:p8,QuadraticBezierCurve3:m8,SplineCurve:g8});class ode extends wf{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new iI[r](n,e))}return this}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let o=0;for(;o<i.length;){if(i[o]>=r){const a=i[o]-r,s=this.curves[o],l=s.getLength(),c=l===0?0:1-a/l;return s.getPointAt(c,n)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,o=this.curves;i<o.length;i++){const a=o[i],s=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,l=a.getPoints(s);for(let c=0;c<l.length;c++){const h=l[c];r&&r.equals(h)||(n.push(h),r=h)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new iI[i.type]().fromJSON(i))}return this}}class N2 extends ode{constructor(e){super(),this.type="Path",this.currentPoint=new Ht,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new h8(this.currentPoint.clone(),new Ht(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const o=new p8(this.currentPoint.clone(),new Ht(e,n),new Ht(r,i));return this.curves.push(o),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,o,a){const s=new f8(this.currentPoint.clone(),new Ht(e,n),new Ht(r,i),new Ht(o,a));return this.curves.push(s),this.currentPoint.set(o,a),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new g8(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,o,a){const s=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+s,n+l,r,i,o,a),this}absarc(e,n,r,i,o,a){return this.absellipse(e,n,r,r,i,o,a),this}ellipse(e,n,r,i,o,a,s,l){const c=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+c,n+h,r,i,o,a,s,l),this}absellipse(e,n,r,i,o,a,s,l){const c=new XO(e,n,r,i,o,a,s,l);if(this.curves.length>0){const p=c.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(c);const h=c.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class UE extends Dr{constructor(e=[new Ht(0,-.5),new Ht(.5,0),new Ht(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=is(i,0,Math.PI*2);const o=[],a=[],s=[],l=[],c=[],h=1/n,p=new Oe,g=new Ht,v=new Oe,x=new Oe,b=new Oe;let M=0,w=0;for(let T=0;T<=e.length-1;T++)switch(T){case 0:M=e[T+1].x-e[T].x,w=e[T+1].y-e[T].y,v.x=w*1,v.y=-M,v.z=w*0,b.copy(v),v.normalize(),l.push(v.x,v.y,v.z);break;case e.length-1:l.push(b.x,b.y,b.z);break;default:M=e[T+1].x-e[T].x,w=e[T+1].y-e[T].y,v.x=w*1,v.y=-M,v.z=w*0,x.copy(v),v.x+=b.x,v.y+=b.y,v.z+=b.z,v.normalize(),l.push(v.x,v.y,v.z),b.copy(x)}for(let T=0;T<=n;T++){const C=r+T*h*i,I=Math.sin(C),R=Math.cos(C);for(let O=0;O<=e.length-1;O++){p.x=e[O].x*I,p.y=e[O].y,p.z=e[O].x*R,a.push(p.x,p.y,p.z),g.x=T/n,g.y=O/(e.length-1),s.push(g.x,g.y);const B=l[3*O+0]*I,U=l[3*O+1],Z=l[3*O+0]*R;c.push(B,U,Z)}}for(let T=0;T<n;T++)for(let C=0;C<e.length-1;C++){const I=C+T*e.length,R=I,O=I+e.length,B=I+e.length+1,U=I+1;o.push(R,O,U),o.push(B,U,O)}this.setIndex(o),this.setAttribute("position",new ir(a,3)),this.setAttribute("uv",new ir(s,2)),this.setAttribute("normal",new ir(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new UE(e.points,e.segments,e.phiStart,e.phiLength)}}class KO extends UE{constructor(e=1,n=1,r=4,i=8){const o=new N2;o.absarc(0,-n/2,e,Math.PI*1.5,0),o.absarc(0,n/2,e,0,Math.PI*.5),super(o.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:r,radialSegments:i}}static fromJSON(e){return new KO(e.radius,e.length,e.capSegments,e.radialSegments)}}class ZO extends Dr{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const o=[],a=[],s=[],l=[],c=new Oe,h=new Ht;a.push(0,0,0),s.push(0,0,1),l.push(.5,.5);for(let p=0,g=3;p<=n;p++,g+=3){const v=r+p/n*i;c.x=e*Math.cos(v),c.y=e*Math.sin(v),a.push(c.x,c.y,c.z),s.push(0,0,1),h.x=(a[g]/e+1)/2,h.y=(a[g+1]/e+1)/2,l.push(h.x,h.y)}for(let p=1;p<=n;p++)o.push(p,p+1,0);this.setIndex(o),this.setAttribute("position",new ir(a,3)),this.setAttribute("normal",new ir(s,3)),this.setAttribute("uv",new ir(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ZO(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class j1 extends Dr{constructor(e=1,n=1,r=1,i=32,o=1,a=!1,s=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:o,openEnded:a,thetaStart:s,thetaLength:l};const c=this;i=Math.floor(i),o=Math.floor(o);const h=[],p=[],g=[],v=[];let x=0;const b=[],M=r/2;let w=0;T(),a===!1&&(e>0&&C(!0),n>0&&C(!1)),this.setIndex(h),this.setAttribute("position",new ir(p,3)),this.setAttribute("normal",new ir(g,3)),this.setAttribute("uv",new ir(v,2));function T(){const I=new Oe,R=new Oe;let O=0;const B=(n-e)/r;for(let U=0;U<=o;U++){const Z=[],j=U/o,X=j*(n-e)+e;for(let le=0;le<=i;le++){const me=le/i,ie=me*l+s,ce=Math.sin(ie),fe=Math.cos(ie);R.x=X*ce,R.y=-j*r+M,R.z=X*fe,p.push(R.x,R.y,R.z),I.set(ce,B,fe).normalize(),g.push(I.x,I.y,I.z),v.push(me,1-j),Z.push(x++)}b.push(Z)}for(let U=0;U<i;U++)for(let Z=0;Z<o;Z++){const j=b[Z][U],X=b[Z+1][U],le=b[Z+1][U+1],me=b[Z][U+1];h.push(j,X,me),h.push(X,le,me),O+=6}c.addGroup(w,O,0),w+=O}function C(I){const R=x,O=new Ht,B=new Oe;let U=0;const Z=I===!0?e:n,j=I===!0?1:-1;for(let le=1;le<=i;le++)p.push(0,M*j,0),g.push(0,j,0),v.push(.5,.5),x++;const X=x;for(let le=0;le<=i;le++){const ie=le/i*l+s,ce=Math.cos(ie),fe=Math.sin(ie);B.x=Z*fe,B.y=M*j,B.z=Z*ce,p.push(B.x,B.y,B.z),g.push(0,j,0),O.x=ce*.5+.5,O.y=fe*.5*j+.5,v.push(O.x,O.y),x++}for(let le=0;le<i;le++){const me=R+le,ie=X+le;I===!0?h.push(ie,ie+1,me):h.push(ie+1,ie,me),U+=3}c.addGroup(w,U,I===!0?1:2),w+=U}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new j1(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class JO extends j1{constructor(e=1,n=1,r=32,i=1,o=!1,a=0,s=Math.PI*2){super(0,e,n,r,i,o,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s}}static fromJSON(e){return new JO(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ay extends Dr{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const o=[],a=[];s(i),c(r),h(),this.setAttribute("position",new ir(o,3)),this.setAttribute("normal",new ir(o.slice(),3)),this.setAttribute("uv",new ir(a,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function s(T){const C=new Oe,I=new Oe,R=new Oe;for(let O=0;O<n.length;O+=3)v(n[O+0],C),v(n[O+1],I),v(n[O+2],R),l(C,I,R,T)}function l(T,C,I,R){const O=R+1,B=[];for(let U=0;U<=O;U++){B[U]=[];const Z=T.clone().lerp(I,U/O),j=C.clone().lerp(I,U/O),X=O-U;for(let le=0;le<=X;le++)le===0&&U===O?B[U][le]=Z:B[U][le]=Z.clone().lerp(j,le/X)}for(let U=0;U<O;U++)for(let Z=0;Z<2*(O-U)-1;Z++){const j=Math.floor(Z/2);Z%2===0?(g(B[U][j+1]),g(B[U+1][j]),g(B[U][j])):(g(B[U][j+1]),g(B[U+1][j+1]),g(B[U+1][j]))}}function c(T){const C=new Oe;for(let I=0;I<o.length;I+=3)C.x=o[I+0],C.y=o[I+1],C.z=o[I+2],C.normalize().multiplyScalar(T),o[I+0]=C.x,o[I+1]=C.y,o[I+2]=C.z}function h(){const T=new Oe;for(let C=0;C<o.length;C+=3){T.x=o[C+0],T.y=o[C+1],T.z=o[C+2];const I=M(T)/2/Math.PI+.5,R=w(T)/Math.PI+.5;a.push(I,1-R)}x(),p()}function p(){for(let T=0;T<a.length;T+=6){const C=a[T+0],I=a[T+2],R=a[T+4],O=Math.max(C,I,R),B=Math.min(C,I,R);O>.9&&B<.1&&(C<.2&&(a[T+0]+=1),I<.2&&(a[T+2]+=1),R<.2&&(a[T+4]+=1))}}function g(T){o.push(T.x,T.y,T.z)}function v(T,C){const I=T*3;C.x=e[I+0],C.y=e[I+1],C.z=e[I+2]}function x(){const T=new Oe,C=new Oe,I=new Oe,R=new Oe,O=new Ht,B=new Ht,U=new Ht;for(let Z=0,j=0;Z<o.length;Z+=9,j+=6){T.set(o[Z+0],o[Z+1],o[Z+2]),C.set(o[Z+3],o[Z+4],o[Z+5]),I.set(o[Z+6],o[Z+7],o[Z+8]),O.set(a[j+0],a[j+1]),B.set(a[j+2],a[j+3]),U.set(a[j+4],a[j+5]),R.copy(T).add(C).add(I).divideScalar(3);const X=M(R);b(O,j+0,T,X),b(B,j+2,C,X),b(U,j+4,I,X)}}function b(T,C,I,R){R<0&&T.x===1&&(a[C]=T.x-1),I.x===0&&I.z===0&&(a[C]=R/2/Math.PI+.5)}function M(T){return Math.atan2(T.z,-T.x)}function w(T){return Math.atan2(-T.y,Math.sqrt(T.x*T.x+T.z*T.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ay(e.vertices,e.indices,e.radius,e.details)}}class VE extends Ay{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,a,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new VE(e.radius,e.detail)}}const YC=new Oe,XC=new Oe,UN=new Oe,KC=new su;class sde extends Dr{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),o=Math.cos(x0*n),a=e.getIndex(),s=e.getAttribute("position"),l=a?a.count:s.count,c=[0,0,0],h=["a","b","c"],p=new Array(3),g={},v=[];for(let x=0;x<l;x+=3){a?(c[0]=a.getX(x),c[1]=a.getX(x+1),c[2]=a.getX(x+2)):(c[0]=x,c[1]=x+1,c[2]=x+2);const{a:b,b:M,c:w}=KC;if(b.fromBufferAttribute(s,c[0]),M.fromBufferAttribute(s,c[1]),w.fromBufferAttribute(s,c[2]),KC.getNormal(UN),p[0]=`${Math.round(b.x*i)},${Math.round(b.y*i)},${Math.round(b.z*i)}`,p[1]=`${Math.round(M.x*i)},${Math.round(M.y*i)},${Math.round(M.z*i)}`,p[2]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let T=0;T<3;T++){const C=(T+1)%3,I=p[T],R=p[C],O=KC[h[T]],B=KC[h[C]],U=`${I}_${R}`,Z=`${R}_${I}`;Z in g&&g[Z]?(UN.dot(g[Z].normal)<=o&&(v.push(O.x,O.y,O.z),v.push(B.x,B.y,B.z)),g[Z]=null):U in g||(g[U]={index0:c[T],index1:c[C],normal:UN.clone()})}}for(const x in g)if(g[x]){const{index0:b,index1:M}=g[x];YC.fromBufferAttribute(s,b),XC.fromBufferAttribute(s,M),v.push(YC.x,YC.y,YC.z),v.push(XC.x,XC.y,XC.z)}this.setAttribute("position",new ir(v,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class b0 extends N2{constructor(e){super(e),this.uuid=fu(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new N2().fromJSON(i))}return this}}const xyt={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let o=ade(t,0,i,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,l,c,h,p,g,v;if(r&&(o=Myt(t,e,o,n)),t.length>80*n){s=c=t[0],l=h=t[1];for(let x=n;x<i;x+=n)p=t[x],g=t[x+1],p<s&&(s=p),g<l&&(l=g),p>c&&(c=p),g>h&&(h=g);v=Math.max(c-s,h-l),v=v!==0?32767/v:0}return z2(o,a,n,s,l,v,0),a}};function ade(t,e,n,r,i){let o,a;if(i===Dyt(t,e,n,r)>0)for(o=e;o<n;o+=r)a=MZ(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=MZ(o,t[o],t[o+1],a);return a&&QO(a,a.next)&&(B2(a),a=a.next),a}function F0(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(QO(n,n.next)||Wo(n.prev,n,n.next)===0)){if(B2(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function z2(t,e,n,r,i,o,a){if(!t)return;!a&&o&&Pyt(t,r,i,o);let s=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,o?byt(t,r,i,o):_yt(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),B2(t),t=c.next,s=c.next;continue}if(t=c,t===s){a?a===1?(t=wyt(F0(t),e,n),z2(t,e,n,r,i,o,2)):a===2&&Syt(t,e,n,r,i,o):z2(F0(t),e,n,r,i,o,1);break}}}function _yt(t){const e=t.prev,n=t,r=t.next;if(Wo(e,n,r)>=0)return!1;const i=e.x,o=n.x,a=r.x,s=e.y,l=n.y,c=r.y,h=i<o?i<a?i:a:o<a?o:a,p=s<l?s<c?s:c:l<c?l:c,g=i>o?i>a?i:a:o>a?o:a,v=s>l?s>c?s:c:l>c?l:c;let x=r.next;for(;x!==e;){if(x.x>=h&&x.x<=g&&x.y>=p&&x.y<=v&&z_(i,s,o,l,a,c,x.x,x.y)&&Wo(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function byt(t,e,n,r){const i=t.prev,o=t,a=t.next;if(Wo(i,o,a)>=0)return!1;const s=i.x,l=o.x,c=a.x,h=i.y,p=o.y,g=a.y,v=s<l?s<c?s:c:l<c?l:c,x=h<p?h<g?h:g:p<g?p:g,b=s>l?s>c?s:c:l>c?l:c,M=h>p?h>g?h:g:p>g?p:g,w=Y4(v,x,e,n,r),T=Y4(b,M,e,n,r);let C=t.prevZ,I=t.nextZ;for(;C&&C.z>=w&&I&&I.z<=T;){if(C.x>=v&&C.x<=b&&C.y>=x&&C.y<=M&&C!==i&&C!==a&&z_(s,h,l,p,c,g,C.x,C.y)&&Wo(C.prev,C,C.next)>=0||(C=C.prevZ,I.x>=v&&I.x<=b&&I.y>=x&&I.y<=M&&I!==i&&I!==a&&z_(s,h,l,p,c,g,I.x,I.y)&&Wo(I.prev,I,I.next)>=0))return!1;I=I.nextZ}for(;C&&C.z>=w;){if(C.x>=v&&C.x<=b&&C.y>=x&&C.y<=M&&C!==i&&C!==a&&z_(s,h,l,p,c,g,C.x,C.y)&&Wo(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;I&&I.z<=T;){if(I.x>=v&&I.x<=b&&I.y>=x&&I.y<=M&&I!==i&&I!==a&&z_(s,h,l,p,c,g,I.x,I.y)&&Wo(I.prev,I,I.next)>=0)return!1;I=I.nextZ}return!0}function wyt(t,e,n){let r=t;do{const i=r.prev,o=r.next.next;!QO(i,o)&&lde(i,r,r.next,o)&&F2(i,o)&&F2(o,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(o.i/n|0),B2(r),B2(r.next),r=t=o),r=r.next}while(r!==t);return F0(r)}function Syt(t,e,n,r,i,o){let a=t;do{let s=a.next.next;for(;s!==a.prev;){if(a.i!==s.i&&Ryt(a,s)){let l=cde(a,s);a=F0(a,a.next),l=F0(l,l.next),z2(a,e,n,r,i,o,0),z2(l,e,n,r,i,o,0);return}s=s.next}a=a.next}while(a!==t)}function Myt(t,e,n,r){const i=[];let o,a,s,l,c;for(o=0,a=e.length;o<a;o++)s=e[o]*r,l=o<a-1?e[o+1]*r:t.length,c=ade(t,s,l,r,!1),c===c.next&&(c.steiner=!0),i.push(Iyt(c));for(i.sort(Eyt),o=0;o<i.length;o++)n=Tyt(i[o],n);return n}function Eyt(t,e){return t.x-e.x}function Tyt(t,e){const n=Cyt(t,e);if(!n)return e;const r=cde(n,t);return F0(r,r.next),F0(n,n.next)}function Cyt(t,e){let n=e,r=-1/0,i;const o=t.x,a=t.y;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){const g=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(g<=o&&g>r&&(r=g,i=n.x<n.next.x?n:n.next,g===o))return i}n=n.next}while(n!==e);if(!i)return null;const s=i,l=i.x,c=i.y;let h=1/0,p;n=i;do o>=n.x&&n.x>=l&&o!==n.x&&z_(a<c?o:r,a,l,c,a<c?r:o,a,n.x,n.y)&&(p=Math.abs(a-n.y)/(o-n.x),F2(n,t)&&(p<h||p===h&&(n.x>i.x||n.x===i.x&&Ayt(i,n)))&&(i=n,h=p)),n=n.next;while(n!==s);return i}function Ayt(t,e){return Wo(t.prev,t,e.prev)<0&&Wo(e.next,t,t.next)<0}function Pyt(t,e,n,r){let i=t;do i.z===0&&(i.z=Y4(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,kyt(i)}function kyt(t){let e,n,r,i,o,a,s,l,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ,!!r);e++);for(l=c;s>0||l>0&&r;)s!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1);return t}function Y4(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Iyt(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function z_(t,e,n,r,i,o,a,s){return(i-a)*(e-s)>=(t-a)*(o-s)&&(t-a)*(r-s)>=(n-a)*(e-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function Ryt(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Oyt(t,e)&&(F2(t,e)&&F2(e,t)&&Lyt(t,e)&&(Wo(t.prev,t,e.prev)||Wo(t,e.prev,e))||QO(t,e)&&Wo(t.prev,t,t.next)>0&&Wo(e.prev,e,e.next)>0)}function Wo(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function QO(t,e){return t.x===e.x&&t.y===e.y}function lde(t,e,n,r){const i=JC(Wo(t,e,n)),o=JC(Wo(t,e,r)),a=JC(Wo(n,r,t)),s=JC(Wo(n,r,e));return!!(i!==o&&a!==s||i===0&&ZC(t,n,e)||o===0&&ZC(t,r,e)||a===0&&ZC(n,t,r)||s===0&&ZC(n,e,r))}function ZC(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function JC(t){return t>0?1:t<0?-1:0}function Oyt(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&lde(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function F2(t,e){return Wo(t.prev,t,t.next)<0?Wo(t,e,t.next)>=0&&Wo(t,t.prev,e)>=0:Wo(t,e,t.prev)<0||Wo(t,t.next,e)<0}function Lyt(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function cde(t,e){const n=new X4(t.i,t.x,t.y),r=new X4(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function MZ(t,e,n,r){const i=new X4(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function B2(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function X4(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Dyt(t,e,n,r){let i=0;for(let o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}class Eh{static area(e){const n=e.length;let r=0;for(let i=n-1,o=0;o<n;i=o++)r+=e[i].x*e[o].y-e[o].x*e[i].y;return r*.5}static isClockWise(e){return Eh.area(e)<0}static triangulateShape(e,n){const r=[],i=[],o=[];EZ(e),TZ(r,e);let a=e.length;n.forEach(EZ);for(let l=0;l<n.length;l++)i.push(a),a+=n[l].length,TZ(r,n[l]);const s=xyt.triangulate(r,i);for(let l=0;l<s.length;l+=3)o.push(s.slice(l,l+3));return o}}function EZ(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function TZ(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class eL extends Dr{constructor(e=new b0([new Ht(.5,.5),new Ht(-.5,.5),new Ht(-.5,-.5),new Ht(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],o=[];for(let s=0,l=e.length;s<l;s++){const c=e[s];a(c)}this.setAttribute("position",new ir(i,3)),this.setAttribute("uv",new ir(o,2)),this.computeVertexNormals();function a(s){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,h=n.steps!==void 0?n.steps:1,p=n.depth!==void 0?n.depth:1;let g=n.bevelEnabled!==void 0?n.bevelEnabled:!0,v=n.bevelThickness!==void 0?n.bevelThickness:.2,x=n.bevelSize!==void 0?n.bevelSize:v-.1,b=n.bevelOffset!==void 0?n.bevelOffset:0,M=n.bevelSegments!==void 0?n.bevelSegments:3;const w=n.extrudePath,T=n.UVGenerator!==void 0?n.UVGenerator:Nyt;let C,I=!1,R,O,B,U;w&&(C=w.getSpacedPoints(h),I=!0,g=!1,R=w.computeFrenetFrames(h,!1),O=new Oe,B=new Oe,U=new Oe),g||(M=0,v=0,x=0,b=0);const Z=s.extractPoints(c);let j=Z.shape;const X=Z.holes;if(!Eh.isClockWise(j)){j=j.reverse();for(let ge=0,et=X.length;ge<et;ge++){const ot=X[ge];Eh.isClockWise(ot)&&(X[ge]=ot.reverse())}}const me=Eh.triangulateShape(j,X),ie=j;for(let ge=0,et=X.length;ge<et;ge++){const ot=X[ge];j=j.concat(ot)}function ce(ge,et,ot){return et||console.error("THREE.ExtrudeGeometry: vec does not exist"),ge.clone().addScaledVector(et,ot)}const fe=j.length,xe=me.length;function te(ge,et,ot){let Tt,Ct,Bt;const Gt=ge.x-et.x,sn=ge.y-et.y,Je=ot.x-ge.x,Ce=ot.y-ge.y,_e=Gt*Gt+sn*sn,ht=Gt*Ce-sn*Je;if(Math.abs(ht)>Number.EPSILON){const dt=Math.sqrt(_e),Wt=Math.sqrt(Je*Je+Ce*Ce),jt=et.x-sn/dt,Sn=et.y+Gt/dt,cn=ot.x-Ce/Wt,Rt=ot.y+Je/Wt,nn=((cn-jt)*Ce-(Rt-Sn)*Je)/(Gt*Ce-sn*Je);Tt=jt+Gt*nn-ge.x,Ct=Sn+sn*nn-ge.y;const An=Tt*Tt+Ct*Ct;if(An<=2)return new Ht(Tt,Ct);Bt=Math.sqrt(An/2)}else{let dt=!1;Gt>Number.EPSILON?Je>Number.EPSILON&&(dt=!0):Gt<-Number.EPSILON?Je<-Number.EPSILON&&(dt=!0):Math.sign(sn)===Math.sign(Ce)&&(dt=!0),dt?(Tt=-sn,Ct=Gt,Bt=Math.sqrt(_e)):(Tt=Gt,Ct=sn,Bt=Math.sqrt(_e/2))}return new Ht(Tt/Bt,Ct/Bt)}const he=[];for(let ge=0,et=ie.length,ot=et-1,Tt=ge+1;ge<et;ge++,ot++,Tt++)ot===et&&(ot=0),Tt===et&&(Tt=0),he[ge]=te(ie[ge],ie[ot],ie[Tt]);const ve=[];let ze,Ue=he.concat();for(let ge=0,et=X.length;ge<et;ge++){const ot=X[ge];ze=[];for(let Tt=0,Ct=ot.length,Bt=Ct-1,Gt=Tt+1;Tt<Ct;Tt++,Bt++,Gt++)Bt===Ct&&(Bt=0),Gt===Ct&&(Gt=0),ze[Tt]=te(ot[Tt],ot[Bt],ot[Gt]);ve.push(ze),Ue=Ue.concat(ze)}for(let ge=0;ge<M;ge++){const et=ge/M,ot=v*Math.cos(et*Math.PI/2),Tt=x*Math.sin(et*Math.PI/2)+b;for(let Ct=0,Bt=ie.length;Ct<Bt;Ct++){const Gt=ce(ie[Ct],he[Ct],Tt);Dt(Gt.x,Gt.y,-ot)}for(let Ct=0,Bt=X.length;Ct<Bt;Ct++){const Gt=X[Ct];ze=ve[Ct];for(let sn=0,Je=Gt.length;sn<Je;sn++){const Ce=ce(Gt[sn],ze[sn],Tt);Dt(Ce.x,Ce.y,-ot)}}}const rt=x+b;for(let ge=0;ge<fe;ge++){const et=g?ce(j[ge],Ue[ge],rt):j[ge];I?(B.copy(R.normals[0]).multiplyScalar(et.x),O.copy(R.binormals[0]).multiplyScalar(et.y),U.copy(C[0]).add(B).add(O),Dt(U.x,U.y,U.z)):Dt(et.x,et.y,0)}for(let ge=1;ge<=h;ge++)for(let et=0;et<fe;et++){const ot=g?ce(j[et],Ue[et],rt):j[et];I?(B.copy(R.normals[ge]).multiplyScalar(ot.x),O.copy(R.binormals[ge]).multiplyScalar(ot.y),U.copy(C[ge]).add(B).add(O),Dt(U.x,U.y,U.z)):Dt(ot.x,ot.y,p/h*ge)}for(let ge=M-1;ge>=0;ge--){const et=ge/M,ot=v*Math.cos(et*Math.PI/2),Tt=x*Math.sin(et*Math.PI/2)+b;for(let Ct=0,Bt=ie.length;Ct<Bt;Ct++){const Gt=ce(ie[Ct],he[Ct],Tt);Dt(Gt.x,Gt.y,p+ot)}for(let Ct=0,Bt=X.length;Ct<Bt;Ct++){const Gt=X[Ct];ze=ve[Ct];for(let sn=0,Je=Gt.length;sn<Je;sn++){const Ce=ce(Gt[sn],ze[sn],Tt);I?Dt(Ce.x,Ce.y+C[h-1].y,C[h-1].x+ot):Dt(Ce.x,Ce.y,p+ot)}}}Be(),st();function Be(){const ge=i.length/3;if(g){let et=0,ot=fe*et;for(let Tt=0;Tt<xe;Tt++){const Ct=me[Tt];zt(Ct[2]+ot,Ct[1]+ot,Ct[0]+ot)}et=h+M*2,ot=fe*et;for(let Tt=0;Tt<xe;Tt++){const Ct=me[Tt];zt(Ct[0]+ot,Ct[1]+ot,Ct[2]+ot)}}else{for(let et=0;et<xe;et++){const ot=me[et];zt(ot[2],ot[1],ot[0])}for(let et=0;et<xe;et++){const ot=me[et];zt(ot[0]+fe*h,ot[1]+fe*h,ot[2]+fe*h)}}r.addGroup(ge,i.length/3-ge,0)}function st(){const ge=i.length/3;let et=0;ct(ie,et),et+=ie.length;for(let ot=0,Tt=X.length;ot<Tt;ot++){const Ct=X[ot];ct(Ct,et),et+=Ct.length}r.addGroup(ge,i.length/3-ge,1)}function ct(ge,et){let ot=ge.length;for(;--ot>=0;){const Tt=ot;let Ct=ot-1;Ct<0&&(Ct=ge.length-1);for(let Bt=0,Gt=h+M*2;Bt<Gt;Bt++){const sn=fe*Bt,Je=fe*(Bt+1),Ce=et+Tt+sn,_e=et+Ct+sn,ht=et+Ct+Je,dt=et+Tt+Je;Fe(Ce,_e,ht,dt)}}}function Dt(ge,et,ot){l.push(ge),l.push(et),l.push(ot)}function zt(ge,et,ot){lt(ge),lt(et),lt(ot);const Tt=i.length/3,Ct=T.generateTopUV(r,i,Tt-3,Tt-2,Tt-1);Qe(Ct[0]),Qe(Ct[1]),Qe(Ct[2])}function Fe(ge,et,ot,Tt){lt(ge),lt(et),lt(Tt),lt(et),lt(ot),lt(Tt);const Ct=i.length/3,Bt=T.generateSideWallUV(r,i,Ct-6,Ct-3,Ct-2,Ct-1);Qe(Bt[0]),Qe(Bt[1]),Qe(Bt[3]),Qe(Bt[1]),Qe(Bt[2]),Qe(Bt[3])}function lt(ge){i.push(l[ge*3+0]),i.push(l[ge*3+1]),i.push(l[ge*3+2])}function Qe(ge){o.push(ge.x),o.push(ge.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return zyt(n,r,e)}static fromJSON(e,n){const r=[];for(let o=0,a=e.shapes.length;o<a;o++){const s=n[e.shapes[o]];r.push(s)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new iI[i.type]().fromJSON(i)),new eL(r,e.options)}}const Nyt={generateTopUV:function(t,e,n,r,i){const o=e[n*3],a=e[n*3+1],s=e[r*3],l=e[r*3+1],c=e[i*3],h=e[i*3+1];return[new Ht(o,a),new Ht(s,l),new Ht(c,h)]},generateSideWallUV:function(t,e,n,r,i,o){const a=e[n*3],s=e[n*3+1],l=e[n*3+2],c=e[r*3],h=e[r*3+1],p=e[r*3+2],g=e[i*3],v=e[i*3+1],x=e[i*3+2],b=e[o*3],M=e[o*3+1],w=e[o*3+2];return Math.abs(s-h)<Math.abs(a-c)?[new Ht(a,1-l),new Ht(c,1-p),new Ht(g,1-x),new Ht(b,1-w)]:[new Ht(s,1-l),new Ht(h,1-p),new Ht(v,1-x),new Ht(M,1-w)]}};function zyt(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const o=t[r];n.shapes.push(o.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class tL extends Ay{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,o,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new tL(e.radius,e.detail)}}class WE extends Ay{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new WE(e.radius,e.detail)}}class nL extends Dr{constructor(e=.5,n=1,r=32,i=1,o=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:o,thetaLength:a},r=Math.max(3,r),i=Math.max(1,i);const s=[],l=[],c=[],h=[];let p=e;const g=(n-e)/i,v=new Oe,x=new Ht;for(let b=0;b<=i;b++){for(let M=0;M<=r;M++){const w=o+M/r*a;v.x=p*Math.cos(w),v.y=p*Math.sin(w),l.push(v.x,v.y,v.z),c.push(0,0,1),x.x=(v.x/n+1)/2,x.y=(v.y/n+1)/2,h.push(x.x,x.y)}p+=g}for(let b=0;b<i;b++){const M=b*(r+1);for(let w=0;w<r;w++){const T=w+M,C=T,I=T+r+1,R=T+r+2,O=T+1;s.push(C,I,O),s.push(I,R,O)}}this.setIndex(s),this.setAttribute("position",new ir(l,3)),this.setAttribute("normal",new ir(c,3)),this.setAttribute("uv",new ir(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nL(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class rL extends Dr{constructor(e=new b0([new Ht(0,.5),new Ht(-.5,-.5),new Ht(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],o=[],a=[];let s=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let h=0;h<e.length;h++)c(e[h]),this.addGroup(s,l,h),s+=l,l=0;this.setIndex(r),this.setAttribute("position",new ir(i,3)),this.setAttribute("normal",new ir(o,3)),this.setAttribute("uv",new ir(a,2));function c(h){const p=i.length/3,g=h.extractPoints(n);let v=g.shape;const x=g.holes;Eh.isClockWise(v)===!1&&(v=v.reverse());for(let M=0,w=x.length;M<w;M++){const T=x[M];Eh.isClockWise(T)===!0&&(x[M]=T.reverse())}const b=Eh.triangulateShape(v,x);for(let M=0,w=x.length;M<w;M++){const T=x[M];v=v.concat(T)}for(let M=0,w=v.length;M<w;M++){const T=v[M];i.push(T.x,T.y,0),o.push(0,0,1),a.push(T.x,T.y)}for(let M=0,w=b.length;M<w;M++){const T=b[M],C=T[0]+p,I=T[1]+p,R=T[2]+p;r.push(C,I,R),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return Fyt(n,e)}static fromJSON(e,n){const r=[];for(let i=0,o=e.shapes.length;i<o;i++){const a=n[e.shapes[i]];r.push(a)}return new rL(r,e.curveSegments)}}function Fyt(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class U1 extends Dr{constructor(e=1,n=32,r=16,i=0,o=Math.PI*2,a=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:o,thetaStart:a,thetaLength:s},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(a+s,Math.PI);let c=0;const h=[],p=new Oe,g=new Oe,v=[],x=[],b=[],M=[];for(let w=0;w<=r;w++){const T=[],C=w/r;let I=0;w===0&&a===0?I=.5/n:w===r&&l===Math.PI&&(I=-.5/n);for(let R=0;R<=n;R++){const O=R/n;p.x=-e*Math.cos(i+O*o)*Math.sin(a+C*s),p.y=e*Math.cos(a+C*s),p.z=e*Math.sin(i+O*o)*Math.sin(a+C*s),x.push(p.x,p.y,p.z),g.copy(p).normalize(),b.push(g.x,g.y,g.z),M.push(O+I,1-C),T.push(c++)}h.push(T)}for(let w=0;w<r;w++)for(let T=0;T<n;T++){const C=h[w][T+1],I=h[w][T],R=h[w+1][T],O=h[w+1][T+1];(w!==0||a>0)&&v.push(C,I,O),(w!==r-1||l<Math.PI)&&v.push(I,R,O)}this.setIndex(v),this.setAttribute("position",new ir(x,3)),this.setAttribute("normal",new ir(b,3)),this.setAttribute("uv",new ir(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new U1(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class iL extends Ay{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new iL(e.radius,e.detail)}}class oL extends Dr{constructor(e=1,n=.4,r=12,i=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:o},r=Math.floor(r),i=Math.floor(i);const a=[],s=[],l=[],c=[],h=new Oe,p=new Oe,g=new Oe;for(let v=0;v<=r;v++)for(let x=0;x<=i;x++){const b=x/i*o,M=v/r*Math.PI*2;p.x=(e+n*Math.cos(M))*Math.cos(b),p.y=(e+n*Math.cos(M))*Math.sin(b),p.z=n*Math.sin(M),s.push(p.x,p.y,p.z),h.x=e*Math.cos(b),h.y=e*Math.sin(b),g.subVectors(p,h).normalize(),l.push(g.x,g.y,g.z),c.push(x/i),c.push(v/r)}for(let v=1;v<=r;v++)for(let x=1;x<=i;x++){const b=(i+1)*v+x-1,M=(i+1)*(v-1)+x-1,w=(i+1)*(v-1)+x,T=(i+1)*v+x;a.push(b,M,T),a.push(M,w,T)}this.setIndex(a),this.setAttribute("position",new ir(s,3)),this.setAttribute("normal",new ir(l,3)),this.setAttribute("uv",new ir(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new oL(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class sL extends Dr{constructor(e=1,n=.4,r=64,i=8,o=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:o,q:a},r=Math.floor(r),i=Math.floor(i);const s=[],l=[],c=[],h=[],p=new Oe,g=new Oe,v=new Oe,x=new Oe,b=new Oe,M=new Oe,w=new Oe;for(let C=0;C<=r;++C){const I=C/r*o*Math.PI*2;T(I,o,a,e,v),T(I+.01,o,a,e,x),M.subVectors(x,v),w.addVectors(x,v),b.crossVectors(M,w),w.crossVectors(b,M),b.normalize(),w.normalize();for(let R=0;R<=i;++R){const O=R/i*Math.PI*2,B=-n*Math.cos(O),U=n*Math.sin(O);p.x=v.x+(B*w.x+U*b.x),p.y=v.y+(B*w.y+U*b.y),p.z=v.z+(B*w.z+U*b.z),l.push(p.x,p.y,p.z),g.subVectors(p,v).normalize(),c.push(g.x,g.y,g.z),h.push(C/r),h.push(R/i)}}for(let C=1;C<=r;C++)for(let I=1;I<=i;I++){const R=(i+1)*(C-1)+(I-1),O=(i+1)*C+(I-1),B=(i+1)*C+I,U=(i+1)*(C-1)+I;s.push(R,O,U),s.push(O,B,U)}this.setIndex(s),this.setAttribute("position",new ir(l,3)),this.setAttribute("normal",new ir(c,3)),this.setAttribute("uv",new ir(h,2));function T(C,I,R,O,B){const U=Math.cos(C),Z=Math.sin(C),j=R/I*C,X=Math.cos(j);B.x=O*(2+X)*.5*U,B.y=O*(2+X)*Z*.5,B.z=O*Math.sin(j)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sL(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class aL extends Dr{constructor(e=new m8(new Oe(-1,-1,0),new Oe(-1,1,0),new Oe(1,1,0)),n=64,r=1,i=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:o};const a=e.computeFrenetFrames(n,o);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const s=new Oe,l=new Oe,c=new Ht;let h=new Oe;const p=[],g=[],v=[],x=[];b(),this.setIndex(x),this.setAttribute("position",new ir(p,3)),this.setAttribute("normal",new ir(g,3)),this.setAttribute("uv",new ir(v,2));function b(){for(let C=0;C<n;C++)M(C);M(o===!1?n:0),T(),w()}function M(C){h=e.getPointAt(C/n,h);const I=a.normals[C],R=a.binormals[C];for(let O=0;O<=i;O++){const B=O/i*Math.PI*2,U=Math.sin(B),Z=-Math.cos(B);l.x=Z*I.x+U*R.x,l.y=Z*I.y+U*R.y,l.z=Z*I.z+U*R.z,l.normalize(),g.push(l.x,l.y,l.z),s.x=h.x+r*l.x,s.y=h.y+r*l.y,s.z=h.z+r*l.z,p.push(s.x,s.y,s.z)}}function w(){for(let C=1;C<=n;C++)for(let I=1;I<=i;I++){const R=(i+1)*(C-1)+(I-1),O=(i+1)*C+(I-1),B=(i+1)*C+I,U=(i+1)*(C-1)+I;x.push(R,O,U),x.push(O,B,U)}}function T(){for(let C=0;C<=n;C++)for(let I=0;I<=i;I++)c.x=C/n,c.y=I/i,v.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new aL(new iI[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class ude extends Dr{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new Oe,o=new Oe;if(e.index!==null){const a=e.attributes.position,s=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:s.count,materialIndex:0}]);for(let c=0,h=l.length;c<h;++c){const p=l[c],g=p.start,v=p.count;for(let x=g,b=g+v;x<b;x+=3)for(let M=0;M<3;M++){const w=s.getX(x+M),T=s.getX(x+(M+1)%3);i.fromBufferAttribute(a,w),o.fromBufferAttribute(a,T),CZ(i,o,r)===!0&&(n.push(i.x,i.y,i.z),n.push(o.x,o.y,o.z))}}}else{const a=e.attributes.position;for(let s=0,l=a.count/3;s<l;s++)for(let c=0;c<3;c++){const h=3*s+c,p=3*s+(c+1)%3;i.fromBufferAttribute(a,h),o.fromBufferAttribute(a,p),CZ(i,o,r)===!0&&(n.push(i.x,i.y,i.z),n.push(o.x,o.y,o.z))}}this.setAttribute("position",new ir(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function CZ(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var AZ=Object.freeze({__proto__:null,BoxGeometry:Cy,CapsuleGeometry:KO,CircleGeometry:ZO,ConeGeometry:JO,CylinderGeometry:j1,DodecahedronGeometry:VE,EdgesGeometry:sde,ExtrudeGeometry:eL,IcosahedronGeometry:tL,LatheGeometry:UE,OctahedronGeometry:WE,PlaneGeometry:B1,PolyhedronGeometry:Ay,RingGeometry:nL,ShapeGeometry:rL,SphereGeometry:U1,TetrahedronGeometry:iL,TorusGeometry:oL,TorusKnotGeometry:sL,TubeGeometry:aL,WireframeGeometry:ude});class dde extends ja{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Fn(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class fde extends yf{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class y8 extends ja{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Fn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=My,this.normalScale=new Ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new xu,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class hde extends y8{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ht(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return is(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Fn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Fn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Fn(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class pde extends ja{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Fn(16777215),this.specular=new Fn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=My,this.normalScale=new Ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new xu,this.combine=zE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class mde extends ja{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Fn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=My,this.normalScale=new Ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class gde extends ja{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=My,this.normalScale=new Ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class yde extends ja{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Fn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=My,this.normalScale=new Ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new xu,this.combine=zE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class vde extends ja{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Fn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=My,this.normalScale=new Ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xde extends Ql{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function s0(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function _de(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function bde(t){function e(i,o){return t[i]-t[o]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function K4(t,e,n){const r=t.length,i=new t.constructor(r);for(let o=0,a=0;a!==r;++o){const s=n[o]*e;for(let l=0;l!==e;++l)i[a++]=t[s+l]}return i}function v8(t,e,n,r){let i=1,o=t[0];for(;o!==void 0&&o[r]===void 0;)o=t[i++];if(o===void 0)return;let a=o[r];if(a!==void 0)if(Array.isArray(a))do a=o[r],a!==void 0&&(e.push(o.time),n.push.apply(n,a)),o=t[i++];while(o!==void 0);else if(a.toArray!==void 0)do a=o[r],a!==void 0&&(e.push(o.time),a.toArray(n,n.length)),o=t[i++];while(o!==void 0);else do a=o[r],a!==void 0&&(e.push(o.time),n.push(a)),o=t[i++];while(o!==void 0)}function Byt(t,e,n,r,i=30){const o=t.clone();o.name=e;const a=[];for(let l=0;l<o.tracks.length;++l){const c=o.tracks[l],h=c.getValueSize(),p=[],g=[];for(let v=0;v<c.times.length;++v){const x=c.times[v]*i;if(!(x<n||x>=r)){p.push(c.times[v]);for(let b=0;b<h;++b)g.push(c.values[v*h+b])}}p.length!==0&&(c.times=s0(p,c.times.constructor),c.values=s0(g,c.values.constructor),a.push(c))}o.tracks=a;let s=1/0;for(let l=0;l<o.tracks.length;++l)s>o.tracks[l].times[0]&&(s=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*s);return o.resetDuration(),o}function $yt(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,o=e/r;for(let a=0;a<i;++a){const s=n.tracks[a],l=s.ValueTypeName;if(l==="bool"||l==="string")continue;const c=t.tracks.find(function(w){return w.name===s.name&&w.ValueTypeName===l});if(c===void 0)continue;let h=0;const p=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=p/3);let g=0;const v=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=v/3);const x=s.times.length-1;let b;if(o<=s.times[0]){const w=h,T=p-h;b=s.values.slice(w,T)}else if(o>=s.times[x]){const w=x*p+h,T=w+p-h;b=s.values.slice(w,T)}else{const w=s.createInterpolant(),T=h,C=p-h;w.evaluate(o),b=w.resultBuffer.slice(T,C)}l==="quaternion"&&new pa().fromArray(b).normalize().conjugate().toArray(b);const M=c.times.length;for(let w=0;w<M;++w){const T=w*v+g;if(l==="quaternion")pa.multiplyQuaternionsFlat(c.values,T,b,0,c.values,T);else{const C=v-g*2;for(let I=0;I<C;++I)c.values[T+I]-=b[I]}}}return t.blendMode=K6,t}const jyt={convertArray:s0,isTypedArray:_de,getKeyframeOrder:bde,sortedArray:K4,flattenJSON:v8,subclip:Byt,makeClipAdditive:$yt};class HE{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],o=n[r-1];e:{t:{let a;n:{r:if(!(e<i)){for(let s=r+2;;){if(i===void 0){if(e<o)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===s)break;if(o=i,i=n[++r],e<i)break t}a=n.length;break n}if(!(e>=o)){const s=n[1];e<s&&(r=2,o=s);for(let l=r-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=o,o=n[--r-1],e>=o)break t}a=r,r=0;break n}break e}for(;r<a;){const s=r+a>>>1;e<n[s]?a=s:r=s+1}if(i=n[r],o=n[r-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,o,i)}return this.interpolate_(r,o,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,o=e*i;for(let a=0;a!==i;++a)n[a]=r[o+a];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class wde extends HE{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:r0,endingEnd:r0}}intervalChanged_(e,n,r){const i=this.parameterPositions;let o=e-2,a=e+1,s=i[o],l=i[a];if(s===void 0)switch(this.getSettings_().endingStart){case i0:o=e,s=2*n-r;break;case P2:o=i.length-2,s=n+i[o]-i[o+1];break;default:o=e,s=r}if(l===void 0)switch(this.getSettings_().endingEnd){case i0:a=e,l=2*r-n;break;case P2:a=1,l=r+i[1]-i[0];break;default:a=e-1,l=n}const c=(r-n)*.5,h=this.valueSize;this._weightPrev=c/(n-s),this._weightNext=c/(l-r),this._offsetPrev=o*h,this._offsetNext=a*h}interpolate_(e,n,r,i){const o=this.resultBuffer,a=this.sampleValues,s=this.valueSize,l=e*s,c=l-s,h=this._offsetPrev,p=this._offsetNext,g=this._weightPrev,v=this._weightNext,x=(r-n)/(i-n),b=x*x,M=b*x,w=-g*M+2*g*b-g*x,T=(1+g)*M+(-1.5-2*g)*b+(-.5+g)*x+1,C=(-1-v)*M+(1.5+v)*b+.5*x,I=v*M-v*b;for(let R=0;R!==s;++R)o[R]=w*a[h+R]+T*a[c+R]+C*a[l+R]+I*a[p+R];return o}}class x8 extends HE{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const o=this.resultBuffer,a=this.sampleValues,s=this.valueSize,l=e*s,c=l-s,h=(r-n)/(i-n),p=1-h;for(let g=0;g!==s;++g)o[g]=a[c+g]*p+a[l+g]*h;return o}}class Sde extends HE{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Sf{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=s0(n,this.TimeBufferType),this.values=s0(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:s0(e.times,Array),values:s0(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new Sde(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new x8(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new wde(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case C2:n=this.InterpolantFactoryMethodDiscrete;break;case A2:n=this.InterpolantFactoryMethodLinear;break;case GA:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return C2;case this.InterpolantFactoryMethodLinear:return A2;case this.InterpolantFactoryMethodSmooth:return GA}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let o=0,a=i-1;for(;o!==i&&r[o]<e;)++o;for(;a!==-1&&r[a]>n;)--a;if(++a,o!==0||a!==i){o>=a&&(a=Math.max(a,1),o=a-1);const s=this.getValueSize();this.times=r.slice(o,a),this.values=this.values.slice(o*s,a*s)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,o=r.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let s=0;s!==o;s++){const l=r[s];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,l,a),e=!1;break}a=l}if(i!==void 0&&_de(i))for(let s=0,l=i.length;s!==l;++s){const c=i[s];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===GA,o=e.length-1;let a=1;for(let s=1;s<o;++s){let l=!1;const c=e[s],h=e[s+1];if(c!==h&&(s!==1||c!==e[0]))if(i)l=!0;else{const p=s*r,g=p-r,v=p+r;for(let x=0;x!==r;++x){const b=n[p+x];if(b!==n[g+x]||b!==n[v+x]){l=!0;break}}}if(l){if(s!==a){e[a]=e[s];const p=s*r,g=a*r;for(let v=0;v!==r;++v)n[g+v]=n[p+v]}++a}}if(o>0){e[a]=e[o];for(let s=o*r,l=a*r,c=0;c!==r;++c)n[l+c]=n[s+c];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=n.slice(0,a*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}Sf.prototype.TimeBufferType=Float32Array;Sf.prototype.ValueBufferType=Float32Array;Sf.prototype.DefaultInterpolation=A2;class X0 extends Sf{}X0.prototype.ValueTypeName="bool";X0.prototype.ValueBufferType=Array;X0.prototype.DefaultInterpolation=C2;X0.prototype.InterpolantFactoryMethodLinear=void 0;X0.prototype.InterpolantFactoryMethodSmooth=void 0;class _8 extends Sf{}_8.prototype.ValueTypeName="color";class $2 extends Sf{}$2.prototype.ValueTypeName="number";class Mde extends HE{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const o=this.resultBuffer,a=this.sampleValues,s=this.valueSize,l=(r-n)/(i-n);let c=e*s;for(let h=c+s;c!==h;c+=4)pa.slerpFlat(o,0,a,c-s,a,c,l);return o}}class V1 extends Sf{InterpolantFactoryMethodLinear(e){return new Mde(this.times,this.values,this.getValueSize(),e)}}V1.prototype.ValueTypeName="quaternion";V1.prototype.DefaultInterpolation=A2;V1.prototype.InterpolantFactoryMethodSmooth=void 0;class K0 extends Sf{}K0.prototype.ValueTypeName="string";K0.prototype.ValueBufferType=Array;K0.prototype.DefaultInterpolation=C2;K0.prototype.InterpolantFactoryMethodLinear=void 0;K0.prototype.InterpolantFactoryMethodSmooth=void 0;class j2 extends Sf{}j2.prototype.ValueTypeName="vector";class U2{constructor(e,n=-1,r,i=$O){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=fu(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let a=0,s=r.length;a!==s;++a)n.push(Vyt(r[a]).scale(i));const o=new this(e.name,e.duration,n,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,a=r.length;o!==a;++o)n.push(Sf.toJSON(r[o]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const o=n.length,a=[];for(let s=0;s<o;s++){let l=[],c=[];l.push((s+o-1)%o,s,(s+1)%o),c.push(0,1,0);const h=bde(l);l=K4(l,1,h),c=K4(c,1,h),!i&&l[0]===0&&(l.push(o),c.push(c[0])),a.push(new $2(".morphTargetInfluences["+n[s].name+"]",l,c).scale(1/r))}return new this(e,-1,a)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},o=/^([\w-]*?)([\d]+)$/;for(let s=0,l=e.length;s<l;s++){const c=e[s],h=c.name.match(o);if(h&&h.length>1){const p=h[1];let g=i[p];g||(i[p]=g=[]),g.push(c)}}const a=[];for(const s in i)a.push(this.CreateFromMorphTargetSequence(s,i[s],n,r));return a}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(p,g,v,x,b){if(v.length!==0){const M=[],w=[];v8(v,M,w,x),M.length!==0&&b.push(new p(g,M,w))}},i=[],o=e.name||"default",a=e.fps||30,s=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let p=0;p<c.length;p++){const g=c[p].keys;if(!(!g||g.length===0))if(g[0].morphTargets){const v={};let x;for(x=0;x<g.length;x++)if(g[x].morphTargets)for(let b=0;b<g[x].morphTargets.length;b++)v[g[x].morphTargets[b]]=-1;for(const b in v){const M=[],w=[];for(let T=0;T!==g[x].morphTargets.length;++T){const C=g[x];M.push(C.time),w.push(C.morphTarget===b?1:0)}i.push(new $2(".morphTargetInfluence["+b+"]",M,w))}l=v.length*a}else{const v=".bones["+n[p].name+"]";r(j2,v+".position",g,"pos",i),r(V1,v+".quaternion",g,"rot",i),r(j2,v+".scale",g,"scl",i)}}return i.length===0?null:new this(o,l,i,s)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const o=this.tracks[r];n=Math.max(n,o.times[o.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Uyt(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return $2;case"vector":case"vector2":case"vector3":case"vector4":return j2;case"color":return _8;case"quaternion":return V1;case"bool":case"boolean":return X0;case"string":return K0}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function Vyt(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Uyt(t.type);if(t.times===void 0){const n=[],r=[];v8(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Op={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class b8{constructor(e,n,r){const i=this;let o=!1,a=0,s=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(h){s++,o===!1&&i.onStart!==void 0&&i.onStart(h,a,s),o=!0},this.itemEnd=function(h){a++,i.onProgress!==void 0&&i.onProgress(h,a,s),a===s&&(o=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(h){i.onError!==void 0&&i.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,p){return c.push(h,p),this},this.removeHandler=function(h){const p=c.indexOf(h);return p!==-1&&c.splice(p,2),this},this.getHandler=function(h){for(let p=0,g=c.length;p<g;p+=2){const v=c[p],x=c[p+1];if(v.global&&(v.lastIndex=0),v.test(h))return x}return null}}}const Ede=new b8;class Ic{constructor(e){this.manager=e!==void 0?e:Ede,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,o){r.load(e,i,n,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Ic.DEFAULT_MATERIAL_NAME="__DEFAULT";const pp={};class Wyt extends Error{constructor(e,n){super(e),this.response=n}}class tm extends Ic{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=Op.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(o),this.manager.itemEnd(e)},0),o;if(pp[e]!==void 0){pp[e].push({onLoad:n,onProgress:r,onError:i});return}pp[e]=[],pp[e].push({onLoad:n,onProgress:r,onError:i});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,l=this.responseType;fetch(a).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const h=pp[e],p=c.body.getReader(),g=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),v=g?parseInt(g):0,x=v!==0;let b=0;const M=new ReadableStream({start(w){T();function T(){p.read().then(({done:C,value:I})=>{if(C)w.close();else{b+=I.byteLength;const R=new ProgressEvent("progress",{lengthComputable:x,loaded:b,total:v});for(let O=0,B=h.length;O<B;O++){const U=h[O];U.onProgress&&U.onProgress(R)}w.enqueue(I),T()}})}}});return new Response(M)}else throw new Wyt(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(h=>new DOMParser().parseFromString(h,s));case"json":return c.json();default:if(s===void 0)return c.text();{const p=/charset="?([^;"\s]*)"?/i.exec(s),g=p&&p[1]?p[1].toLowerCase():void 0,v=new TextDecoder(g);return c.arrayBuffer().then(x=>v.decode(x))}}}).then(c=>{Op.add(e,c);const h=pp[e];delete pp[e];for(let p=0,g=h.length;p<g;p++){const v=h[p];v.onLoad&&v.onLoad(c)}}).catch(c=>{const h=pp[e];if(h===void 0)throw this.manager.itemError(e),c;delete pp[e];for(let p=0,g=h.length;p<g;p++){const v=h[p];v.onError&&v.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Hyt extends Ic{constructor(e){super(e)}load(e,n,r,i){const o=this,a=new tm(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(s){try{n(o.parse(JSON.parse(s)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=U2.parse(e[r]);n.push(i)}return n}}class Gyt extends Ic{constructor(e){super(e)}load(e,n,r,i){const o=this,a=[],s=new YO,l=new tm(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(o.withCredentials);let c=0;function h(p){l.load(e[p],function(g){const v=o.parse(g,!0);a[p]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},c+=1,c===6&&(v.mipmapCount===1&&(s.minFilter=Uo),s.image=a,s.format=v.format,s.needsUpdate=!0,n&&n(s))},r,i)}if(Array.isArray(e))for(let p=0,g=e.length;p<g;++p)h(p);else l.load(e,function(p){const g=o.parse(p,!0);if(g.isCubemap){const v=g.mipmaps.length/g.mipmapCount;for(let x=0;x<v;x++){a[x]={mipmaps:[]};for(let b=0;b<g.mipmapCount;b++)a[x].mipmaps.push(g.mipmaps[x*g.mipmapCount+b]),a[x].format=g.format,a[x].width=g.width,a[x].height=g.height}s.image=a}else s.image.width=g.width,s.image.height=g.height,s.mipmaps=g.mipmaps;g.mipmapCount===1&&(s.minFilter=Uo),s.format=g.format,s.needsUpdate=!0,n&&n(s)},r,i);return s}}class V2 extends Ic{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,a=Op.get(e);if(a!==void 0)return o.manager.itemStart(e),setTimeout(function(){n&&n(a),o.manager.itemEnd(e)},0),a;const s=D2("img");function l(){h(),Op.add(e,this),n&&n(this),o.manager.itemEnd(e)}function c(p){h(),i&&i(p),o.manager.itemError(e),o.manager.itemEnd(e)}function h(){s.removeEventListener("load",l,!1),s.removeEventListener("error",c,!1)}return s.addEventListener("load",l,!1),s.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(s.crossOrigin=this.crossOrigin),o.manager.itemStart(e),s.src=e,s}}class qyt extends Ic{constructor(e){super(e)}load(e,n,r,i){const o=new $E;o.colorSpace=Yu;const a=new V2(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let s=0;function l(c){a.load(e[c],function(h){o.images[c]=h,s++,s===6&&(o.needsUpdate=!0,n&&n(o))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return o}}class Yyt extends Ic{constructor(e){super(e)}load(e,n,r,i){const o=this,a=new ey,s=new tm(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(o.withCredentials),s.load(e,function(l){let c;try{c=o.parse(l)}catch(h){if(i!==void 0)i(h);else{console.error(h);return}}c.image!==void 0?a.image=c.image:c.data!==void 0&&(a.image.width=c.width,a.image.height=c.height,a.image.data=c.data),a.wrapS=c.wrapS!==void 0?c.wrapS:hl,a.wrapT=c.wrapT!==void 0?c.wrapT:hl,a.magFilter=c.magFilter!==void 0?c.magFilter:Uo,a.minFilter=c.minFilter!==void 0?c.minFilter:Uo,a.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(a.colorSpace=c.colorSpace),c.flipY!==void 0&&(a.flipY=c.flipY),c.format!==void 0&&(a.format=c.format),c.type!==void 0&&(a.type=c.type),c.mipmaps!==void 0&&(a.mipmaps=c.mipmaps,a.minFilter=fh),c.mipmapCount===1&&(a.minFilter=Uo),c.generateMipmaps!==void 0&&(a.generateMipmaps=c.generateMipmaps),a.needsUpdate=!0,n&&n(a,c)},r,i),a}}class Xyt extends Ic{constructor(e){super(e)}load(e,n,r,i){const o=new Go,a=new V2(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(s){o.image=s,o.needsUpdate=!0,n!==void 0&&n(o)},r,i),o}}class Py extends vi{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Fn(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class Tde extends Py{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(vi.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Fn(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const VN=new xr,PZ=new Oe,kZ=new Oe;class w8{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ht(512,512),this.map=null,this.mapPass=null,this.matrix=new xr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new jE,this._frameExtents=new Ht(1,1),this._viewportCount=1,this._viewports=[new zi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;PZ.setFromMatrixPosition(e.matrixWorld),n.position.copy(PZ),kZ.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(kZ),n.updateMatrixWorld(),VN.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(VN),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(VN)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Kyt extends w8{constructor(){super(new os(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=Zb*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,o=e.distance||n.far;(r!==n.fov||i!==n.aspect||o!==n.far)&&(n.fov=r,n.aspect=i,n.far=o,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Cde extends Py{constructor(e,n,r=0,i=Math.PI/3,o=0,a=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(vi.DEFAULT_UP),this.updateMatrix(),this.target=new vi,this.distance=r,this.angle=i,this.penumbra=o,this.decay=a,this.map=null,this.shadow=new Kyt}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const IZ=new xr,lS=new Oe,WN=new Oe;class Zyt extends w8{constructor(){super(new os(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ht(4,2),this._viewportCount=6,this._viewports=[new zi(2,1,1,1),new zi(0,1,1,1),new zi(3,1,1,1),new zi(1,1,1,1),new zi(3,0,1,1),new zi(1,0,1,1)],this._cubeDirections=[new Oe(1,0,0),new Oe(-1,0,0),new Oe(0,0,1),new Oe(0,0,-1),new Oe(0,1,0),new Oe(0,-1,0)],this._cubeUps=[new Oe(0,1,0),new Oe(0,1,0),new Oe(0,1,0),new Oe(0,1,0),new Oe(0,0,1),new Oe(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,o=e.distance||r.far;o!==r.far&&(r.far=o,r.updateProjectionMatrix()),lS.setFromMatrixPosition(e.matrixWorld),r.position.copy(lS),WN.copy(r.position),WN.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(WN),r.updateMatrixWorld(),i.makeTranslation(-lS.x,-lS.y,-lS.z),IZ.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(IZ)}}class Ade extends Py{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new Zyt}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Jyt extends w8{constructor(){super(new Rp(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Pde extends Py{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(vi.DEFAULT_UP),this.updateMatrix(),this.target=new vi,this.shadow=new Jyt}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class kde extends Py{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class Ide extends Py{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class Rde{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Oe)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,o=e.z,a=this.coefficients;return n.copy(a[0]).multiplyScalar(.282095),n.addScaledVector(a[1],.488603*i),n.addScaledVector(a[2],.488603*o),n.addScaledVector(a[3],.488603*r),n.addScaledVector(a[4],1.092548*(r*i)),n.addScaledVector(a[5],1.092548*(i*o)),n.addScaledVector(a[6],.315392*(3*o*o-1)),n.addScaledVector(a[7],1.092548*(r*o)),n.addScaledVector(a[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,o=e.z,a=this.coefficients;return n.copy(a[0]).multiplyScalar(.886227),n.addScaledVector(a[1],2*.511664*i),n.addScaledVector(a[2],2*.511664*o),n.addScaledVector(a[3],2*.511664*r),n.addScaledVector(a[4],2*.429043*r*i),n.addScaledVector(a[5],2*.429043*i*o),n.addScaledVector(a[6],.743125*o*o-.247708),n.addScaledVector(a[7],2*.429043*r*o),n.addScaledVector(a[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,o=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*o,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*o,n[6]=.315392*(3*o*o-1),n[7]=1.092548*r*o,n[8]=.546274*(r*r-i*i)}}class Ode extends Py{constructor(e=new Rde,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class lL extends Ic{constructor(e){super(e),this.textures={}}load(e,n,r,i){const o=this,a=new tm(o.manager);a.setPath(o.path),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(e,function(s){try{n(o.parse(JSON.parse(s)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(o){return n[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),n[o]}const i=lL.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Fn().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const o in e.uniforms){const a=e.uniforms[o];switch(i.uniforms[o]={},a.type){case"t":i.uniforms[o].value=r(a.value);break;case"c":i.uniforms[o].value=new Fn().setHex(a.value);break;case"v2":i.uniforms[o].value=new Ht().fromArray(a.value);break;case"v3":i.uniforms[o].value=new Oe().fromArray(a.value);break;case"v4":i.uniforms[o].value=new zi().fromArray(a.value);break;case"m3":i.uniforms[o].value=new Ir().fromArray(a.value);break;case"m4":i.uniforms[o].value=new xr().fromArray(a.value);break;default:i.uniforms[o].value=a.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const o in e.extensions)i.extensions[o]=e.extensions[o];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),i.normalScale=new Ht().fromArray(o)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Ht().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:dde,SpriteMaterial:l8,RawShaderMaterial:fde,ShaderMaterial:yf,PointsMaterial:u8,MeshPhysicalMaterial:hde,MeshStandardMaterial:y8,MeshPhongMaterial:pde,MeshToonMaterial:mde,MeshNormalMaterial:gde,MeshLambertMaterial:yde,MeshDepthMaterial:o8,MeshDistanceMaterial:s8,MeshBasicMaterial:Ty,MeshMatcapMaterial:vde,LineDashedMaterial:xde,LineBasicMaterial:Ql,Material:ja};return new n[e]}}class Z4{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class Lde extends Dr{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Dde extends Ic{constructor(e){super(e)}load(e,n,r,i){const o=this,a=new tm(o.manager);a.setPath(o.path),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(e,function(s){try{n(o.parse(JSON.parse(s)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(v,x){if(n[x]!==void 0)return n[x];const M=v.interleavedBuffers[x],w=o(v,M.buffer),T=O_(M.type,w),C=new GO(T,M.stride);return C.uuid=M.uuid,n[x]=C,C}function o(v,x){if(r[x]!==void 0)return r[x];const M=v.arrayBuffers[x],w=new Uint32Array(M).buffer;return r[x]=w,w}const a=e.isInstancedBufferGeometry?new Lde:new Dr,s=e.data.index;if(s!==void 0){const v=O_(s.type,s.array);a.setIndex(new Qi(v,1))}const l=e.data.attributes;for(const v in l){const x=l[v];let b;if(x.isInterleavedBufferAttribute){const M=i(e.data,x.data);b=new z0(M,x.itemSize,x.offset,x.normalized)}else{const M=O_(x.type,x.array),w=x.isInstancedBufferAttribute?Qb:Qi;b=new w(M,x.itemSize,x.normalized)}x.name!==void 0&&(b.name=x.name),x.usage!==void 0&&b.setUsage(x.usage),a.setAttribute(v,b)}const c=e.data.morphAttributes;if(c)for(const v in c){const x=c[v],b=[];for(let M=0,w=x.length;M<w;M++){const T=x[M];let C;if(T.isInterleavedBufferAttribute){const I=i(e.data,T.data);C=new z0(I,T.itemSize,T.offset,T.normalized)}else{const I=O_(T.type,T.array);C=new Qi(I,T.itemSize,T.normalized)}T.name!==void 0&&(C.name=T.name),b.push(C)}a.morphAttributes[v]=b}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let v=0,x=p.length;v!==x;++v){const b=p[v];a.addGroup(b.start,b.count,b.materialIndex)}const g=e.data.boundingSphere;if(g!==void 0){const v=new Oe;g.center!==void 0&&v.fromArray(g.center),a.boundingSphere=new xl(v,g.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class Qyt extends Ic{constructor(e){super(e)}load(e,n,r,i){const o=this,a=this.path===""?Z4.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const s=new tm(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(p){i!==void 0&&i(p),console.error("THREE:ObjectLoader: Can't parse "+e+".",p.message);return}const h=c.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(c,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?Z4.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const o=new tm(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const a=await o.loadAsync(e,n),s=JSON.parse(a),l=s.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(s)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,i),a=this.parseImages(e.images,function(){n!==void 0&&n(c)}),s=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,s),c=this.parseObject(e.object,o,l,s,r),h=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,h),n!==void 0){let p=!1;for(const g in a)if(a[g].data instanceof HTMLImageElement){p=!0;break}p===!1&&n(c)}return c}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),o=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,o),s=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,i,s,a,n),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const o=new b0().fromJSON(e[r]);n[o.uuid]=o}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(o){o.isBone&&(i[o.uuid]=o)}),e!==void 0)for(let o=0,a=e.length;o<a;o++){const s=new qO().fromJSON(e[o],i);r[s.uuid]=s}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new Dde;for(let o=0,a=e.length;o<a;o++){let s;const l=e[o];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":s=i.parse(l);break;default:l.type in AZ?s=AZ[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}s.uuid=l.uuid,l.name!==void 0&&(s.name=l.name),l.userData!==void 0&&(s.userData=l.userData),r[l.uuid]=s}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const o=new lL;o.setTextures(n);for(let a=0,s=e.length;a<s;a++){const l=e[a];r[l.uuid]===void 0&&(r[l.uuid]=o.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],o=U2.parse(i);n[o.uuid]=o}return n}parseImages(e,n){const r=this,i={};let o;function a(l){return r.manager.itemStart(l),o.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function s(l){if(typeof l=="string"){const c=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return a(h)}else return l.data?{data:O_(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new b8(n);o=new V2(l),o.setCrossOrigin(this.crossOrigin);for(let c=0,h=e.length;c<h;c++){const p=e[c],g=p.url;if(Array.isArray(g)){const v=[];for(let x=0,b=g.length;x<b;x++){const M=g[x],w=s(M);w!==null&&(w instanceof HTMLImageElement?v.push(w):v.push(new ey(w.data,w.width,w.height)))}i[p.uuid]=new o0(v)}else{const v=s(p.url);i[p.uuid]=new o0(v)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function o(a){if(typeof a=="string"){const s=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s)?s:n.resourcePath+s;return await i.loadAsync(l)}else return a.data?{data:O_(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){i=new V2(this.manager),i.setCrossOrigin(this.crossOrigin);for(let a=0,s=e.length;a<s;a++){const l=e[a],c=l.url;if(Array.isArray(c)){const h=[];for(let p=0,g=c.length;p<g;p++){const v=c[p],x=await o(v);x!==null&&(x instanceof HTMLImageElement?h.push(x):h.push(new ey(x.data,x.width,x.height)))}r[l.uuid]=new o0(h)}else{const h=await o(l.url);r[l.uuid]=new o0(h)}}}return r}parseTextures(e,n){function r(o,a){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),a[o])}const i={};if(e!==void 0)for(let o=0,a=e.length;o<a;o++){const s=e[o];s.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),n[s.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",s.image);const l=n[s.image],c=l.data;let h;Array.isArray(c)?(h=new $E,c.length===6&&(h.needsUpdate=!0)):(c&&c.data?h=new ey:h=new Go,c&&(h.needsUpdate=!0)),h.source=l,h.uuid=s.uuid,s.name!==void 0&&(h.name=s.name),s.mapping!==void 0&&(h.mapping=r(s.mapping,evt)),s.channel!==void 0&&(h.channel=s.channel),s.offset!==void 0&&h.offset.fromArray(s.offset),s.repeat!==void 0&&h.repeat.fromArray(s.repeat),s.center!==void 0&&h.center.fromArray(s.center),s.rotation!==void 0&&(h.rotation=s.rotation),s.wrap!==void 0&&(h.wrapS=r(s.wrap[0],RZ),h.wrapT=r(s.wrap[1],RZ)),s.format!==void 0&&(h.format=s.format),s.internalFormat!==void 0&&(h.internalFormat=s.internalFormat),s.type!==void 0&&(h.type=s.type),s.colorSpace!==void 0&&(h.colorSpace=s.colorSpace),s.minFilter!==void 0&&(h.minFilter=r(s.minFilter,OZ)),s.magFilter!==void 0&&(h.magFilter=r(s.magFilter,OZ)),s.anisotropy!==void 0&&(h.anisotropy=s.anisotropy),s.flipY!==void 0&&(h.flipY=s.flipY),s.generateMipmaps!==void 0&&(h.generateMipmaps=s.generateMipmaps),s.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=s.premultiplyAlpha),s.unpackAlignment!==void 0&&(h.unpackAlignment=s.unpackAlignment),s.compareFunction!==void 0&&(h.compareFunction=s.compareFunction),s.userData!==void 0&&(h.userData=s.userData),i[s.uuid]=h}return i}parseObject(e,n,r,i,o){let a;function s(g){return n[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",g),n[g]}function l(g){if(g!==void 0){if(Array.isArray(g)){const v=[];for(let x=0,b=g.length;x<b;x++){const M=g[x];r[M]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",M),v.push(r[M])}return v}return r[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),r[g]}}function c(g){return i[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",g),i[g]}let h,p;switch(e.type){case"Scene":a=new rI,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new Fn(e.background):a.background=c(e.background)),e.environment!==void 0&&(a.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new HO(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new WO(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(e.backgroundRotation),e.environmentRotation!==void 0&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new os(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Rp(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new kde(e.color,e.intensity);break;case"DirectionalLight":a=new Pde(e.color,e.intensity);break;case"PointLight":a=new Ade(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new Ide(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new Cde(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new Tde(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new Ode().fromJSON(e);break;case"SkinnedMesh":h=s(e.geometry),p=l(e.material),a=new Kue(h,p),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":h=s(e.geometry),p=l(e.material),a=new Rs(h,p);break;case"InstancedMesh":h=s(e.geometry),p=l(e.material);const g=e.count,v=e.instanceMatrix,x=e.instanceColor;a=new Zue(h,p,g),a.instanceMatrix=new Qb(new Float32Array(v.array),16),x!==void 0&&(a.instanceColor=new Qb(new Float32Array(x.array),x.itemSize));break;case"BatchedMesh":h=s(e.geometry),p=l(e.material),a=new Jue(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,p),a.geometry=h,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map(b=>{const M=new Yl;M.min.fromArray(b.boxMin),M.max.fromArray(b.boxMax);const w=new xl;return w.radius=b.sphereRadius,w.center.fromArray(b.sphereCenter),{boxInitialized:b.boxInitialized,box:M,sphereInitialized:b.sphereInitialized,sphere:w}}),a._maxGeometryCount=e.maxGeometryCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=c(e.matricesTexture.uuid);break;case"LOD":a=new Xue;break;case"Line":a=new uy(s(e.geometry),l(e.material));break;case"LineLoop":a=new Que(s(e.geometry),l(e.material));break;case"LineSegments":a=new Bh(s(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new ede(s(e.geometry),l(e.material));break;case"Sprite":a=new Yue(l(e.material));break;case"Group":a=new N_;break;case"Bone":a=new c8;break;default:a=new vi}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const g=e.children;for(let v=0;v<g.length;v++)a.add(this.parseObject(g[v],n,r,i,o))}if(e.animations!==void 0){const g=e.animations;for(let v=0;v<g.length;v++){const x=g[v];a.animations.push(o[x])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const g=e.levels;for(let v=0;v<g.length;v++){const x=g[v],b=a.getObjectByProperty("uuid",x.object);b!==void 0&&a.addLevel(b,x.distance,x.hysteresis)}}return a}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const evt={UVMapping:FO,CubeReflectionMapping:em,CubeRefractionMapping:cy,EquirectangularReflectionMapping:S2,EquirectangularRefractionMapping:M2,CubeUVReflectionMapping:F1},RZ={RepeatWrapping:E2,ClampToEdgeWrapping:hl,MirroredRepeatWrapping:T2},OZ={NearestFilter:xs,NearestMipmapNearestFilter:eI,NearestMipmapLinearFilter:Vv,LinearFilter:Uo,LinearMipmapNearestFilter:ZS,LinearMipmapLinearFilter:fh};class tvt extends Ic{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,a=Op.get(e);if(a!==void 0){if(o.manager.itemStart(e),a.then){a.then(c=>{n&&n(c),o.manager.itemEnd(e)}).catch(c=>{i&&i(c)});return}return setTimeout(function(){n&&n(a),o.manager.itemEnd(e)},0),a}const s={};s.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",s.headers=this.requestHeader;const l=fetch(e,s).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(c){return Op.add(e,c),n&&n(c),o.manager.itemEnd(e),c}).catch(function(c){i&&i(c),Op.remove(e),o.manager.itemError(e),o.manager.itemEnd(e)});Op.add(e,l),o.manager.itemStart(e)}}let QC;class S8{static getContext(){return QC===void 0&&(QC=new(window.AudioContext||window.webkitAudioContext)),QC}static setContext(e){QC=e}}class nvt extends Ic{constructor(e){super(e)}load(e,n,r,i){const o=this,a=new tm(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{const c=l.slice(0);S8.getContext().decodeAudioData(c,function(p){n(p)}).catch(s)}catch(c){s(c)}},r,i);function s(l){i?i(l):console.error(l),o.manager.itemError(e)}}}const LZ=new xr,DZ=new xr,Mv=new xr;class rvt{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new os,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new os,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Mv.copy(e.projectionMatrix);const i=n.eyeSep/2,o=i*n.near/n.focus,a=n.near*Math.tan(x0*n.fov*.5)/n.zoom;let s,l;DZ.elements[12]=-i,LZ.elements[12]=i,s=-a*n.aspect+o,l=a*n.aspect+o,Mv.elements[0]=2*n.near/(l-s),Mv.elements[8]=(l+s)/(l-s),this.cameraL.projectionMatrix.copy(Mv),s=-a*n.aspect-o,l=a*n.aspect-o,Mv.elements[0]=2*n.near/(l-s),Mv.elements[8]=(l+s)/(l-s),this.cameraR.projectionMatrix.copy(Mv)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(DZ),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(LZ)}}class M8{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=NZ(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=NZ();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function NZ(){return(typeof performance>"u"?Date:performance).now()}const Ev=new Oe,zZ=new pa,ivt=new Oe,Tv=new Oe;class ovt extends vi{constructor(){super(),this.type="AudioListener",this.context=S8.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new M8}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ev,zZ,ivt),Tv.set(0,0,-1).applyQuaternion(zZ),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Ev.x,i),n.positionY.linearRampToValueAtTime(Ev.y,i),n.positionZ.linearRampToValueAtTime(Ev.z,i),n.forwardX.linearRampToValueAtTime(Tv.x,i),n.forwardY.linearRampToValueAtTime(Tv.y,i),n.forwardZ.linearRampToValueAtTime(Tv.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(Ev.x,Ev.y,Ev.z),n.setOrientation(Tv.x,Tv.y,Tv.z,r.x,r.y,r.z)}}let Nde=class extends vi{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}};const Cv=new Oe,FZ=new pa,svt=new Oe,Av=new Oe;class avt extends Nde{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Cv,FZ,svt),Av.set(0,0,1).applyQuaternion(FZ);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Cv.x,r),n.positionY.linearRampToValueAtTime(Cv.y,r),n.positionZ.linearRampToValueAtTime(Cv.z,r),n.orientationX.linearRampToValueAtTime(Av.x,r),n.orientationY.linearRampToValueAtTime(Av.y,r),n.orientationZ.linearRampToValueAtTime(Av.z,r)}else n.setPosition(Cv.x,Cv.y,Cv.z),n.setOrientation(Av.x,Av.y,Av.z)}}class lvt{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class zde{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,o,a;switch(n){case"quaternion":i=this._slerp,o=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,o=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,o=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=o,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,o=e*i+i;let a=this.cumulativeWeight;if(a===0){for(let s=0;s!==i;++s)r[o+s]=r[s];a=n}else{a+=n;const s=n/a;this._mixBufferRegion(r,o,0,s,i)}this.cumulativeWeight=a}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,o=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const l=n*this._origIndex;this._mixBufferRegion(r,i,l,1-o,n)}a>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let l=n,c=n+n;l!==c;++l)if(r[l]!==r[l+n]){s.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let o=r,a=i;o!==a;++o)n[o]=n[i+o%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,o){if(i>=.5)for(let a=0;a!==o;++a)e[n+a]=e[r+a]}_slerp(e,n,r,i){pa.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,o){const a=this._workIndex*o;pa.multiplyQuaternionsFlat(e,a,e,n,e,r),pa.slerpFlat(e,n,e,n,e,a,i)}_lerp(e,n,r,i,o){const a=1-i;for(let s=0;s!==o;++s){const l=n+s;e[l]=e[l]*a+e[r+s]*i}}_lerpAdditive(e,n,r,i,o){for(let a=0;a!==o;++a){const s=n+a;e[s]=e[s]+e[r+a]*i}}}const E8="\\[\\]\\.:\\/",cvt=new RegExp("["+E8+"]","g"),T8="[^"+E8+"]",uvt="[^"+E8.replace("\\.","")+"]",dvt=/((?:WC+[\/:])*)/.source.replace("WC",T8),fvt=/(WCOD+)?/.source.replace("WCOD",uvt),hvt=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",T8),pvt=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",T8),mvt=new RegExp("^"+dvt+fvt+hvt+pvt+"$"),gvt=["material","materials","bones","map"];class yvt{constructor(e,n,r){const i=r||ui.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,o=r.length;i!==o;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class ui{constructor(e,n,r){this.path=n,this.parsedPath=r||ui.parseTrackName(n),this.node=ui.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new ui.Composite(e,n,r):new ui(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(cvt,"")}static parseTrackName(e){const n=mvt.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const o=r.nodeName.substring(i+1);gvt.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(o){for(let a=0;a<o.length;a++){const s=o[a];if(s.name===n||s.uuid===n)return s;const l=r(s.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let o=n.propertyIndex;if(e||(e=ui.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let c=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===c){c=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const a=e[i];if(a===void 0){const c=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let s=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?s=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(s=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(o!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ui.Composite=yvt;ui.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ui.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ui.prototype.GetterByBindingType=[ui.prototype._getValue_direct,ui.prototype._getValue_array,ui.prototype._getValue_arrayElement,ui.prototype._getValue_toArray];ui.prototype.SetterByBindingTypeAndVersioning=[[ui.prototype._setValue_direct,ui.prototype._setValue_direct_setNeedsUpdate,ui.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ui.prototype._setValue_array,ui.prototype._setValue_array_setNeedsUpdate,ui.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ui.prototype._setValue_arrayElement,ui.prototype._setValue_arrayElement_setNeedsUpdate,ui.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ui.prototype._setValue_fromArray,ui.prototype._setValue_fromArray_setNeedsUpdate,ui.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class vvt{constructor(){this.isAnimationObjectGroup=!0,this.uuid=fu(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length;let s,l=e.length,c=this.nCachedObjects_;for(let h=0,p=arguments.length;h!==p;++h){const g=arguments[h],v=g.uuid;let x=n[v];if(x===void 0){x=l++,n[v]=x,e.push(g);for(let b=0,M=a;b!==M;++b)o[b].push(new ui(g,r[b],i[b]))}else if(x<c){s=e[x];const b=--c,M=e[b];n[M.uuid]=x,e[x]=M,n[v]=b,e[b]=g;for(let w=0,T=a;w!==T;++w){const C=o[w],I=C[b];let R=C[x];C[x]=I,R===void 0&&(R=new ui(g,r[w],i[w])),C[b]=R}}else e[x]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let o=this.nCachedObjects_;for(let a=0,s=arguments.length;a!==s;++a){const l=arguments[a],c=l.uuid,h=n[c];if(h!==void 0&&h>=o){const p=o++,g=e[p];n[g.uuid]=h,e[h]=g,n[c]=p,e[p]=l;for(let v=0,x=i;v!==x;++v){const b=r[v],M=b[p],w=b[h];b[h]=M,b[p]=w}}}this.nCachedObjects_=o}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let o=this.nCachedObjects_,a=e.length;for(let s=0,l=arguments.length;s!==l;++s){const c=arguments[s],h=c.uuid,p=n[h];if(p!==void 0)if(delete n[h],p<o){const g=--o,v=e[g],x=--a,b=e[x];n[v.uuid]=p,e[p]=v,n[b.uuid]=g,e[g]=b,e.pop();for(let M=0,w=i;M!==w;++M){const T=r[M],C=T[g],I=T[x];T[p]=C,T[g]=I,T.pop()}}else{const g=--a,v=e[g];g>0&&(n[v.uuid]=p),e[p]=v,e.pop();for(let x=0,b=i;x!==b;++x){const M=r[x];M[p]=M[g],M.pop()}}}this.nCachedObjects_=o}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const o=this._bindings;if(i!==void 0)return o[i];const a=this._paths,s=this._parsedPaths,l=this._objects,c=l.length,h=this.nCachedObjects_,p=new Array(c);i=o.length,r[e]=i,a.push(e),s.push(n),o.push(p);for(let g=h,v=l.length;g!==v;++g){const x=l[g];p[g]=new ui(x,e,n)}return p}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length-1,l=a[s],c=e[s];n[c]=r,a[r]=l,a.pop(),o[r]=o[s],o.pop(),i[r]=i[s],i.pop()}}}class Fde{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const o=n.tracks,a=o.length,s=new Array(a),l={endingStart:r0,endingEnd:r0};for(let c=0;c!==a;++c){const h=o[c].createInterpolant(null);s[c]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=gue,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,o=e._clip.duration,a=o/i,s=i/o;e.warp(1,a,n),this.warp(s,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,o=i.time,a=this.timeScale;let s=this._timeScaleInterpolant;s===null&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);const l=s.parameterPositions,c=s.sampleValues;return l[0]=o,l[1]=o+r,c[0]=e/a,c[1]=n/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const l=(e-o)*r;l<0||r===0?n=0:(this._startTime=null,n=r*l)}n*=this._updateTimeScale(e);const a=this._updateTime(n),s=this._updateWeight(e);if(s>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case K6:for(let h=0,p=l.length;h!==p;++h)l[h].evaluate(a),c[h].accumulateAdditive(s);break;case $O:default:for(let h=0,p=l.length;h!==p;++h)l[h].evaluate(a),c[h].accumulate(i,s)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,o=this._loopCount;const a=r===yue;if(e===0)return o===-1?i:a&&(o&1)===1?n-i:i;if(r===mue){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),i>=n||i<0){const s=Math.floor(i/n);i-=n*s,o+=Math.abs(s);const l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=o,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}else this.time=i;if(a&&(o&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=i0,i.endingEnd=i0):(e?i.endingStart=this.zeroSlopeAtStart?i0:r0:i.endingStart=P2,n?i.endingEnd=this.zeroSlopeAtEnd?i0:r0:i.endingEnd=P2)}_scheduleFading(e,n,r){const i=this._mixer,o=i.time;let a=this._weightInterpolant;a===null&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const s=a.parameterPositions,l=a.sampleValues;return s[0]=o,l[0]=n,s[1]=o+e,l[1]=r,this}}const xvt=new Float32Array(1);class _vt extends bf{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,o=i.length,a=e._propertyBindings,s=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let h=c[l];h===void 0&&(h={},c[l]=h);for(let p=0;p!==o;++p){const g=i[p],v=g.name;let x=h[v];if(x!==void 0)++x.referenceCount,a[p]=x;else{if(x=a[p],x!==void 0){x._cacheIndex===null&&(++x.referenceCount,this._addInactiveBinding(x,l,v));continue}const b=n&&n._propertyBindings[p].binding.parsedPath;x=new zde(ui.create(r,v,b),g.ValueTypeName,g.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,l,v),a[p]=x}s[p].resultBuffer=x.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,o=this._actionsByClip[i];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,o=this._actionsByClip;let a=o[n];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[n]=a;else{const s=a.knownActions;e._byClipCacheIndex=s.length,s.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const o=e._clip.uuid,a=this._actionsByClip,s=a[o],l=s.knownActions,c=l[l.length-1],h=e._byClipCacheIndex;c._byClipCacheIndex=h,l[h]=c,l.pop(),e._byClipCacheIndex=null;const p=s.actionByRoot,g=(e._localRoot||this._root).uuid;delete p[g],l.length===0&&delete a[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,o=this._bindings;let a=i[n];a===void 0&&(a={},i[n]=a),a[r]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,o=r.path,a=this._bindingsByRootAndName,s=a[i],l=n[n.length-1],c=e._cacheIndex;l._cacheIndex=c,n[c]=l,n.pop(),delete s[o],Object.keys(s).length===0&&delete a[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new x8(new Float32Array(2),new Float32Array(2),1,xvt),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,o=n[i];e.__cacheIndex=i,n[i]=e,o.__cacheIndex=r,n[r]=o}clipAction(e,n,r){const i=n||this._root,o=i.uuid;let a=typeof e=="string"?U2.findByName(i,e):e;const s=a!==null?a.uuid:e,l=this._actionsByClip[s];let c=null;if(r===void 0&&(a!==null?r=a.blendMode:r=$O),l!==void 0){const p=l.actionByRoot[o];if(p!==void 0&&p.blendMode===r)return p;c=l.knownActions[0],a===null&&(a=c._clip)}if(a===null)return null;const h=new Fde(this,a,n,r);return this._bindAction(h,c),this._addInactiveAction(h,s,o),h}existingAction(e,n){const r=n||this._root,i=r.uuid,o=typeof e=="string"?U2.findByName(r,e):e,a=o?o.uuid:e,s=this._actionsByClip[a];return s!==void 0&&s.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,o=Math.sign(e),a=this._accuIndex^=1;for(let c=0;c!==r;++c)n[c]._update(i,e,o,a);const s=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)s[c].apply(a);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,o=i[r];if(o!==void 0){const a=o.knownActions;for(let s=0,l=a.length;s!==l;++s){const c=a[s];this._deactivateAction(c);const h=c._cacheIndex,p=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,p._cacheIndex=h,n[h]=p,n.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const a in r){const s=r[a].actionByRoot,l=s[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,o=i[n];if(o!==void 0)for(const a in o){const s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class C8{constructor(e){this.value=e}clone(){return new C8(this.value.clone===void 0?this.value:this.value.clone())}}let bvt=0;class wvt extends bf{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:bvt++}),this.name="",this.usage=O2,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++){const o=Array.isArray(n[r])?n[r]:[n[r]];for(let a=0;a<o.length;a++)this.uniforms.push(o[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class Svt extends GO{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class Mvt{constructor(e,n,r,i,o){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const BZ=new xr;class Bde{constructor(e,n,r=0,i=1/0){this.ray=new Ey(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new _0,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return BZ.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(BZ),this}intersectObject(e,n=!0,r=[]){return J4(e,this,r,n),r.sort($Z),r}intersectObjects(e,n=!0,r=[]){for(let i=0,o=e.length;i<o;i++)J4(e[i],this,r,n);return r.sort($Z),r}}function $Z(t,e){return t.distance-e.distance}function J4(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let o=0,a=i.length;o<a;o++)J4(i[o],e,n,!0)}}class W2{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(is(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Evt{constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}const jZ=new Ht;class Tvt{constructor(e=new Ht(1/0,1/0),n=new Ht(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=jZ.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,jZ).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const UZ=new Oe,eA=new Oe;class Cvt{constructor(e=new Oe,n=new Oe){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){UZ.subVectors(e,this.start),eA.subVectors(this.end,this.start);const r=eA.dot(eA);let o=eA.dot(UZ)/r;return n&&(o=is(o,0,1)),o}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const VZ=new Oe;class Avt extends vi{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new Dr,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,s=1,l=32;a<l;a++,s++){const c=a/l*Math.PI*2,h=s/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(h),Math.sin(h),1)}r.setAttribute("position",new ir(i,3));const o=new Ql({fog:!1,toneMapped:!1});this.cone=new Bh(r,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),VZ.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(VZ),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const fg=new Oe,tA=new xr,HN=new xr;class Pvt extends Bh{constructor(e){const n=$de(e),r=new Dr,i=[],o=[],a=new Fn(0,0,1),s=new Fn(0,1,0);for(let c=0;c<n.length;c++){const h=n[c];h.parent&&h.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),o.push(a.r,a.g,a.b),o.push(s.r,s.g,s.b))}r.setAttribute("position",new ir(i,3)),r.setAttribute("color",new ir(o,3));const l=new Ql({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");HN.copy(this.root.matrixWorld).invert();for(let o=0,a=0;o<n.length;o++){const s=n[o];s.parent&&s.parent.isBone&&(tA.multiplyMatrices(HN,s.matrixWorld),fg.setFromMatrixPosition(tA),i.setXYZ(a,fg.x,fg.y,fg.z),tA.multiplyMatrices(HN,s.parent.matrixWorld),fg.setFromMatrixPosition(tA),i.setXYZ(a+1,fg.x,fg.y,fg.z),a+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function $de(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,$de(t.children[n]));return e}class kvt extends Rs{constructor(e,n,r){const i=new U1(n,4,2),o=new Ty({wireframe:!0,fog:!1,toneMapped:!1});super(i,o),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Ivt=new Oe,WZ=new Fn,HZ=new Fn;class Rvt extends vi{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new WE(n);i.rotateY(Math.PI*.5),this.material=new Ty({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=i.getAttribute("position"),a=new Float32Array(o.count*3);i.setAttribute("color",new Qi(a,3)),this.add(new Rs(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");WZ.copy(this.light.color),HZ.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const o=r<i/2?WZ:HZ;n.setXYZ(r,o.r,o.g,o.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Ivt.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Ovt extends Bh{constructor(e=10,n=10,r=4473924,i=8947848){r=new Fn(r),i=new Fn(i);const o=n/2,a=e/n,s=e/2,l=[],c=[];for(let g=0,v=0,x=-s;g<=n;g++,x+=a){l.push(-s,0,x,s,0,x),l.push(x,0,-s,x,0,s);const b=g===o?r:i;b.toArray(c,v),v+=3,b.toArray(c,v),v+=3,b.toArray(c,v),v+=3,b.toArray(c,v),v+=3}const h=new Dr;h.setAttribute("position",new ir(l,3)),h.setAttribute("color",new ir(c,3));const p=new Ql({vertexColors:!0,toneMapped:!1});super(h,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Lvt extends Bh{constructor(e=10,n=16,r=8,i=64,o=4473924,a=8947848){o=new Fn(o),a=new Fn(a);const s=[],l=[];if(n>1)for(let p=0;p<n;p++){const g=p/n*(Math.PI*2),v=Math.sin(g)*e,x=Math.cos(g)*e;s.push(0,0,0),s.push(v,0,x);const b=p&1?o:a;l.push(b.r,b.g,b.b),l.push(b.r,b.g,b.b)}for(let p=0;p<r;p++){const g=p&1?o:a,v=e-e/r*p;for(let x=0;x<i;x++){let b=x/i*(Math.PI*2),M=Math.sin(b)*v,w=Math.cos(b)*v;s.push(M,0,w),l.push(g.r,g.g,g.b),b=(x+1)/i*(Math.PI*2),M=Math.sin(b)*v,w=Math.cos(b)*v,s.push(M,0,w),l.push(g.r,g.g,g.b)}}const c=new Dr;c.setAttribute("position",new ir(s,3)),c.setAttribute("color",new ir(l,3));const h=new Ql({vertexColors:!0,toneMapped:!1});super(c,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const GZ=new Oe,nA=new Oe,qZ=new Oe;class Dvt extends vi{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new Dr;i.setAttribute("position",new ir([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const o=new Ql({fog:!1,toneMapped:!1});this.lightPlane=new uy(i,o),this.add(this.lightPlane),i=new Dr,i.setAttribute("position",new ir([0,0,0,0,0,1],3)),this.targetLine=new uy(i,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),GZ.setFromMatrixPosition(this.light.matrixWorld),nA.setFromMatrixPosition(this.light.target.matrixWorld),qZ.subVectors(nA,GZ),this.lightPlane.lookAt(nA),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(nA),this.targetLine.scale.z=qZ.length()}}const rA=new Oe,Qo=new BE;class Nvt extends Bh{constructor(e){const n=new Dr,r=new Ql({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],o=[],a={};s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4");function s(x,b){l(x),l(b)}function l(x){i.push(0,0,0),o.push(0,0,0),a[x]===void 0&&(a[x]=[]),a[x].push(i.length/3-1)}n.setAttribute("position",new ir(i,3)),n.setAttribute("color",new ir(o,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const c=new Fn(16755200),h=new Fn(16711680),p=new Fn(43775),g=new Fn(16777215),v=new Fn(3355443);this.setColors(c,h,p,g,v)}setColors(e,n,r,i,o){const s=this.geometry.getAttribute("color");s.setXYZ(0,e.r,e.g,e.b),s.setXYZ(1,e.r,e.g,e.b),s.setXYZ(2,e.r,e.g,e.b),s.setXYZ(3,e.r,e.g,e.b),s.setXYZ(4,e.r,e.g,e.b),s.setXYZ(5,e.r,e.g,e.b),s.setXYZ(6,e.r,e.g,e.b),s.setXYZ(7,e.r,e.g,e.b),s.setXYZ(8,e.r,e.g,e.b),s.setXYZ(9,e.r,e.g,e.b),s.setXYZ(10,e.r,e.g,e.b),s.setXYZ(11,e.r,e.g,e.b),s.setXYZ(12,e.r,e.g,e.b),s.setXYZ(13,e.r,e.g,e.b),s.setXYZ(14,e.r,e.g,e.b),s.setXYZ(15,e.r,e.g,e.b),s.setXYZ(16,e.r,e.g,e.b),s.setXYZ(17,e.r,e.g,e.b),s.setXYZ(18,e.r,e.g,e.b),s.setXYZ(19,e.r,e.g,e.b),s.setXYZ(20,e.r,e.g,e.b),s.setXYZ(21,e.r,e.g,e.b),s.setXYZ(22,e.r,e.g,e.b),s.setXYZ(23,e.r,e.g,e.b),s.setXYZ(24,n.r,n.g,n.b),s.setXYZ(25,n.r,n.g,n.b),s.setXYZ(26,n.r,n.g,n.b),s.setXYZ(27,n.r,n.g,n.b),s.setXYZ(28,n.r,n.g,n.b),s.setXYZ(29,n.r,n.g,n.b),s.setXYZ(30,n.r,n.g,n.b),s.setXYZ(31,n.r,n.g,n.b),s.setXYZ(32,r.r,r.g,r.b),s.setXYZ(33,r.r,r.g,r.b),s.setXYZ(34,r.r,r.g,r.b),s.setXYZ(35,r.r,r.g,r.b),s.setXYZ(36,r.r,r.g,r.b),s.setXYZ(37,r.r,r.g,r.b),s.setXYZ(38,i.r,i.g,i.b),s.setXYZ(39,i.r,i.g,i.b),s.setXYZ(40,o.r,o.g,o.b),s.setXYZ(41,o.r,o.g,o.b),s.setXYZ(42,o.r,o.g,o.b),s.setXYZ(43,o.r,o.g,o.b),s.setXYZ(44,o.r,o.g,o.b),s.setXYZ(45,o.r,o.g,o.b),s.setXYZ(46,o.r,o.g,o.b),s.setXYZ(47,o.r,o.g,o.b),s.setXYZ(48,o.r,o.g,o.b),s.setXYZ(49,o.r,o.g,o.b),s.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;Qo.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ys("c",n,e,Qo,0,0,-1),ys("t",n,e,Qo,0,0,1),ys("n1",n,e,Qo,-r,-i,-1),ys("n2",n,e,Qo,r,-i,-1),ys("n3",n,e,Qo,-r,i,-1),ys("n4",n,e,Qo,r,i,-1),ys("f1",n,e,Qo,-r,-i,1),ys("f2",n,e,Qo,r,-i,1),ys("f3",n,e,Qo,-r,i,1),ys("f4",n,e,Qo,r,i,1),ys("u1",n,e,Qo,r*.7,i*1.1,-1),ys("u2",n,e,Qo,-r*.7,i*1.1,-1),ys("u3",n,e,Qo,0,i*2,-1),ys("cf1",n,e,Qo,-r,0,1),ys("cf2",n,e,Qo,r,0,1),ys("cf3",n,e,Qo,0,-i,1),ys("cf4",n,e,Qo,0,i,1),ys("cn1",n,e,Qo,-r,0,-1),ys("cn2",n,e,Qo,r,0,-1),ys("cn3",n,e,Qo,0,-i,-1),ys("cn4",n,e,Qo,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ys(t,e,n,r,i,o,a){rA.set(i,o,a).unproject(r);const s=e[t];if(s!==void 0){const l=n.getAttribute("position");for(let c=0,h=s.length;c<h;c++)l.setXYZ(s[c],rA.x,rA.y,rA.z)}}const iA=new Yl;class zvt extends Bh{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),o=new Dr;o.setIndex(new Qi(r,1)),o.setAttribute("position",new Qi(i,3)),super(o,new Ql({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&iA.setFromObject(this.object),iA.isEmpty())return;const n=iA.min,r=iA.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Fvt extends Bh{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new Dr;o.setIndex(new Qi(r,1)),o.setAttribute("position",new ir(i,3)),super(o,new Ql({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Bvt extends uy{constructor(e,n=1,r=16776960){const i=r,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new Dr;a.setAttribute("position",new ir(o,3)),a.computeBoundingSphere(),super(a,new Ql({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const s=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Dr;l.setAttribute("position",new ir(s,3)),l.computeBoundingSphere(),this.add(new Rs(l,new Ty({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const YZ=new Oe;let oA,GN;class $vt extends vi{constructor(e=new Oe(0,0,1),n=new Oe(0,0,0),r=1,i=16776960,o=r*.2,a=o*.2){super(),this.type="ArrowHelper",oA===void 0&&(oA=new Dr,oA.setAttribute("position",new ir([0,0,0,0,1,0],3)),GN=new j1(0,.5,1,5,1),GN.translate(0,-.5,0)),this.position.copy(n),this.line=new uy(oA,new Ql({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Rs(GN,new Ty({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,o,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{YZ.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(YZ,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class jvt extends Bh{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Dr;i.setAttribute("position",new ir(n,3)),i.setAttribute("color",new ir(r,3));const o=new Ql({vertexColors:!0,toneMapped:!1});super(i,o),this.type="AxesHelper"}setColors(e,n,r){const i=new Fn,o=this.geometry.attributes.color.array;return i.set(e),i.toArray(o,0),i.toArray(o,3),i.set(n),i.toArray(o,6),i.toArray(o,9),i.set(r),i.toArray(o,12),i.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Uvt{constructor(){this.type="ShapePath",this.color=new Fn,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new N2,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,o,a){return this.currentPath.bezierCurveTo(e,n,r,i,o,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(w){const T=[];for(let C=0,I=w.length;C<I;C++){const R=w[C],O=new b0;O.curves=R.curves,T.push(O)}return T}function r(w,T){const C=T.length;let I=!1;for(let R=C-1,O=0;O<C;R=O++){let B=T[R],U=T[O],Z=U.x-B.x,j=U.y-B.y;if(Math.abs(j)>Number.EPSILON){if(j<0&&(B=T[O],Z=-Z,U=T[R],j=-j),w.y<B.y||w.y>U.y)continue;if(w.y===B.y){if(w.x===B.x)return!0}else{const X=j*(w.x-B.x)-Z*(w.y-B.y);if(X===0)return!0;if(X<0)continue;I=!I}}else{if(w.y!==B.y)continue;if(U.x<=w.x&&w.x<=B.x||B.x<=w.x&&w.x<=U.x)return!0}}return I}const i=Eh.isClockWise,o=this.subPaths;if(o.length===0)return[];let a,s,l;const c=[];if(o.length===1)return s=o[0],l=new b0,l.curves=s.curves,c.push(l),c;let h=!i(o[0].getPoints());h=e?!h:h;const p=[],g=[];let v=[],x=0,b;g[x]=void 0,v[x]=[];for(let w=0,T=o.length;w<T;w++)s=o[w],b=s.getPoints(),a=i(b),a=e?!a:a,a?(!h&&g[x]&&x++,g[x]={s:new b0,p:b},g[x].s.curves=s.curves,h&&x++,v[x]=[]):v[x].push({h:s,p:b[0]});if(!g[0])return n(o);if(g.length>1){let w=!1,T=0;for(let C=0,I=g.length;C<I;C++)p[C]=[];for(let C=0,I=g.length;C<I;C++){const R=v[C];for(let O=0;O<R.length;O++){const B=R[O];let U=!0;for(let Z=0;Z<g.length;Z++)r(B.p,g[Z].p)&&(C!==Z&&T++,U?(U=!1,p[Z].push(B)):w=!0);U&&p[C].push(B)}}T>0&&w===!1&&(v=p)}let M;for(let w=0,T=g.length;w<T;w++){l=g[w].s,c.push(l),M=v[w];for(let C=0,I=M.length;C<I;C++)l.holes.push(M[C].h)}return c}}class Vvt extends gf{constructor(e=1,n=1,r=1,i={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,n,{...i,count:r}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:NO}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=NO);const Wvt=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:j6,AddEquation:Eg,AddOperation:eue,AdditiveAnimationBlendMode:K6,AdditiveBlending:d4,AgXToneMapping:oue,AlphaFormat:uue,AlwaysCompare:Cue,AlwaysDepth:qce,AlwaysStencilFunc:U4,AmbientLight:kde,AnimationAction:Fde,AnimationClip:U2,AnimationLoader:Hyt,AnimationMixer:_vt,AnimationObjectGroup:vvt,AnimationUtils:jyt,ArcCurve:tde,ArrayCamera:Hue,ArrowHelper:$vt,AttachedBindMode:g4,Audio:Nde,AudioAnalyser:lvt,AudioContext:S8,AudioListener:ovt,AudioLoader:nvt,AxesHelper:jvt,BackSide:ql,BasicDepthPacking:vue,BasicShadowMap:Pce,BatchedMesh:Jue,Bone:c8,BooleanKeyframeTrack:X0,Box2:Tvt,Box3:Yl,Box3Helper:Fvt,BoxGeometry:Cy,BoxHelper:zvt,BufferAttribute:Qi,BufferGeometry:Dr,BufferGeometryLoader:Dde,ByteType:lue,Cache:Op,Camera:BE,CameraHelper:Nvt,CanvasTexture:dyt,CapsuleGeometry:KO,CatmullRomCurve3:nde,CineonToneMapping:rue,CircleGeometry:ZO,ClampToEdgeWrapping:hl,Clock:M8,Color:Fn,ColorKeyframeTrack:_8,ColorManagement:Ni,CompressedArrayTexture:cyt,CompressedCubeTexture:uyt,CompressedTexture:YO,CompressedTextureLoader:Gyt,ConeGeometry:JO,ConstantAlphaFactor:Wce,ConstantColorFactor:Uce,CubeCamera:Nue,CubeReflectionMapping:em,CubeRefractionMapping:cy,CubeTexture:$E,CubeTextureLoader:qyt,CubeUVReflectionMapping:F1,CubicBezierCurve:f8,CubicBezierCurve3:rde,CubicInterpolant:wde,CullFaceBack:u4,CullFaceFront:Ace,CullFaceFrontBack:Kut,CullFaceNone:Cce,Curve:wf,CurvePath:ode,CustomBlending:kce,CustomToneMapping:iue,CylinderGeometry:j1,Cylindrical:Evt,Data3DTexture:e8,DataArrayTexture:UO,DataTexture:ey,DataTextureLoader:Yyt,DataUtils:rft,DecrementStencilOp:adt,DecrementWrapStencilOp:cdt,DefaultLoadingManager:Ede,DepthFormat:Qg,DepthStencilFormat:N0,DepthTexture:i8,DetachedBindMode:aue,DirectionalLight:Pde,DirectionalLightHelper:Dvt,DiscreteInterpolant:Sde,DisplayP3ColorSpace:jO,DodecahedronGeometry:VE,DoubleSide:af,DstAlphaFactor:zce,DstColorFactor:Bce,DynamicCopyUsage:Mdt,DynamicDrawUsage:vdt,DynamicReadUsage:bdt,EdgesGeometry:sde,EllipseCurve:XO,EqualCompare:Sue,EqualDepth:Xce,EqualStencilFunc:hdt,EquirectangularReflectionMapping:S2,EquirectangularRefractionMapping:M2,Euler:xu,EventDispatcher:bf,ExtrudeGeometry:eL,FileLoader:tm,Float16BufferAttribute:cft,Float32BufferAttribute:ir,FloatType:ou,Fog:HO,FogExp2:WO,FramebufferTexture:lyt,FrontSide:Qp,Frustum:jE,GLBufferAttribute:Mvt,GLSL1:Tdt,GLSL3:V4,GreaterCompare:Mue,GreaterDepth:Zce,GreaterEqualCompare:Tue,GreaterEqualDepth:Kce,GreaterEqualStencilFunc:ydt,GreaterStencilFunc:mdt,GridHelper:Ovt,Group:N_,HalfFloatType:Kb,HemisphereLight:Tde,HemisphereLightHelper:Rvt,IcosahedronGeometry:tL,ImageBitmapLoader:tvt,ImageLoader:V2,ImageUtils:Q6,IncrementStencilOp:sdt,IncrementWrapStencilOp:ldt,InstancedBufferAttribute:Qb,InstancedBufferGeometry:Lde,InstancedInterleavedBuffer:Svt,InstancedMesh:Zue,Int16BufferAttribute:aft,Int32BufferAttribute:lft,Int8BufferAttribute:ift,IntType:U6,InterleavedBuffer:GO,InterleavedBufferAttribute:z0,Interpolant:HE,InterpolateDiscrete:C2,InterpolateLinear:A2,InterpolateSmooth:GA,InvertStencilOp:udt,KeepStencilOp:Bv,KeyframeTrack:Sf,LOD:Xue,LatheGeometry:UE,Layers:_0,LessCompare:wue,LessDepth:Yce,LessEqualCompare:Z6,LessEqualDepth:w2,LessEqualStencilFunc:pdt,LessStencilFunc:fdt,Light:Py,LightProbe:Ode,Line:uy,Line3:Cvt,LineBasicMaterial:Ql,LineCurve:h8,LineCurve3:ide,LineDashedMaterial:xde,LineLoop:Que,LineSegments:Bh,LinearDisplayP3ColorSpace:FE,LinearFilter:Uo,LinearInterpolant:x8,LinearMipMapLinearFilter:edt,LinearMipMapNearestFilter:Qut,LinearMipmapLinearFilter:fh,LinearMipmapNearestFilter:ZS,LinearSRGBColorSpace:dm,LinearToneMapping:tue,LinearTransfer:k2,Loader:Ic,LoaderUtils:Z4,LoadingManager:b8,LoopOnce:mue,LoopPingPong:yue,LoopRepeat:gue,LuminanceAlphaFormat:fue,LuminanceFormat:due,MOUSE:Qc,Material:ja,MaterialLoader:lL,MathUtils:Aue,Matrix3:Ir,Matrix4:xr,MaxEquation:m4,Mesh:Rs,MeshBasicMaterial:Ty,MeshDepthMaterial:o8,MeshDistanceMaterial:s8,MeshLambertMaterial:yde,MeshMatcapMaterial:vde,MeshNormalMaterial:gde,MeshPhongMaterial:pde,MeshPhysicalMaterial:hde,MeshStandardMaterial:y8,MeshToonMaterial:mde,MinEquation:p4,MirroredRepeatWrapping:T2,MixOperation:Qce,MultiplyBlending:h4,MultiplyOperation:zE,NearestFilter:xs,NearestMipMapLinearFilter:Jut,NearestMipMapNearestFilter:Zut,NearestMipmapLinearFilter:Vv,NearestMipmapNearestFilter:eI,NeutralToneMapping:sue,NeverCompare:bue,NeverDepth:Gce,NeverStencilFunc:ddt,NoBlending:Bp,NoColorSpace:bp,NoToneMapping:Sh,NormalAnimationBlendMode:$O,NormalBlending:v0,NotEqualCompare:Eue,NotEqualDepth:Jce,NotEqualStencilFunc:gdt,NumberKeyframeTrack:$2,Object3D:vi,ObjectLoader:Qyt,ObjectSpaceNormalMap:_ue,OctahedronGeometry:WE,OneFactor:Lce,OneMinusConstantAlphaFactor:Hce,OneMinusConstantColorFactor:Vce,OneMinusDstAlphaFactor:Fce,OneMinusDstColorFactor:$ce,OneMinusSrcAlphaFactor:Qk,OneMinusSrcColorFactor:Nce,OrthographicCamera:Rp,P3Primaries:R2,PCFShadowMap:zO,PCFSoftShadowMap:KS,PMREMGenerator:H4,Path:N2,PerspectiveCamera:os,Plane:ah,PlaneGeometry:B1,PlaneHelper:Bvt,PointLight:Ade,PointLightHelper:kvt,Points:ede,PointsMaterial:u8,PolarGridHelper:Lvt,PolyhedronGeometry:Ay,PositionalAudio:avt,PropertyBinding:ui,PropertyMixer:zde,QuadraticBezierCurve:p8,QuadraticBezierCurve3:m8,Quaternion:pa,QuaternionKeyframeTrack:V1,QuaternionLinearInterpolant:Mde,RED_GREEN_RGTC2_Format:$4,RED_RGTC1_Format:pue,REVISION:NO,RGBADepthPacking:xue,RGBAFormat:Ul,RGBAIntegerFormat:Y6,RGBA_ASTC_10x10_Format:L4,RGBA_ASTC_10x5_Format:I4,RGBA_ASTC_10x6_Format:R4,RGBA_ASTC_10x8_Format:O4,RGBA_ASTC_12x10_Format:D4,RGBA_ASTC_12x12_Format:N4,RGBA_ASTC_4x4_Format:S4,RGBA_ASTC_5x4_Format:M4,RGBA_ASTC_5x5_Format:E4,RGBA_ASTC_6x5_Format:T4,RGBA_ASTC_6x6_Format:C4,RGBA_ASTC_8x5_Format:A4,RGBA_ASTC_8x6_Format:P4,RGBA_ASTC_8x8_Format:k4,RGBA_BPTC_Format:HA,RGBA_ETC2_EAC_Format:w4,RGBA_PVRTC_2BPPV1_Format:_4,RGBA_PVRTC_4BPPV1_Format:x4,RGBA_S3TC_DXT1_Format:UA,RGBA_S3TC_DXT3_Format:VA,RGBA_S3TC_DXT5_Format:WA,RGB_BPTC_SIGNED_Format:z4,RGB_BPTC_UNSIGNED_Format:F4,RGB_ETC1_Format:X6,RGB_ETC2_Format:b4,RGB_PVRTC_2BPPV1_Format:v4,RGB_PVRTC_4BPPV1_Format:y4,RGB_S3TC_DXT1_Format:jA,RGFormat:hue,RGIntegerFormat:q6,RawShaderMaterial:fde,Ray:Ey,Raycaster:Bde,Rec709Primaries:I2,RectAreaLight:Ide,RedFormat:H6,RedIntegerFormat:G6,ReinhardToneMapping:nue,RenderTarget:Rue,RepeatWrapping:E2,ReplaceStencilOp:odt,ReverseSubtractEquation:Rce,RingGeometry:nL,SIGNED_RED_GREEN_RGTC2_Format:j4,SIGNED_RED_RGTC1_Format:B4,SRGBColorSpace:Yu,SRGBTransfer:fo,Scene:rI,ShaderChunk:zr,ShaderLib:rf,ShaderMaterial:yf,ShadowMaterial:dde,Shape:b0,ShapeGeometry:rL,ShapePath:Uvt,ShapeUtils:Eh,ShortType:cue,Skeleton:qO,SkeletonHelper:Pvt,SkinnedMesh:Kue,Source:o0,Sphere:xl,SphereGeometry:U1,Spherical:W2,SphericalHarmonics3:Rde,SplineCurve:g8,SpotLight:Cde,SpotLightHelper:Avt,Sprite:Yue,SpriteMaterial:l8,SrcAlphaFactor:Jk,SrcAlphaSaturateFactor:jce,SrcColorFactor:Dce,StaticCopyUsage:Sdt,StaticDrawUsage:O2,StaticReadUsage:_dt,StereoCamera:rvt,StreamCopyUsage:Edt,StreamDrawUsage:xdt,StreamReadUsage:wdt,StringKeyframeTrack:K0,SubtractEquation:Ice,SubtractiveBlending:f4,TOUCH:eu,TangentSpaceNormalMap:My,TetrahedronGeometry:iL,Texture:Go,TextureLoader:Xyt,TorusGeometry:oL,TorusKnotGeometry:sL,Triangle:su,TriangleFanDrawMode:rdt,TriangleStripDrawMode:ndt,TrianglesDrawMode:tdt,TubeGeometry:aL,UVMapping:FO,Uint16BufferAttribute:t8,Uint32BufferAttribute:n8,Uint8BufferAttribute:oft,Uint8ClampedBufferAttribute:sft,Uniform:C8,UniformsGroup:wvt,UniformsLib:Mn,UniformsUtils:Due,UnsignedByteType:Mh,UnsignedInt248Type:Jg,UnsignedIntType:Ip,UnsignedShort4444Type:V6,UnsignedShort5551Type:W6,UnsignedShortType:BO,VSMShadowMap:Xd,Vector2:Ht,Vector3:Oe,Vector4:zi,VectorKeyframeTrack:j2,VideoTexture:ayt,WebGL1Renderer:Gue,WebGL3DRenderTarget:Gdt,WebGLArrayRenderTarget:Hdt,WebGLCoordinateSystem:hh,WebGLCubeRenderTarget:zue,WebGLMultipleRenderTargets:Vvt,WebGLRenderTarget:gf,WebGLRenderer:a8,WebGLUtils:Wue,WebGPUCoordinateSystem:L2,WireframeGeometry:ude,WrapAroundEnding:P2,ZeroCurvatureEnding:r0,ZeroFactor:Oce,ZeroSlopeEnding:i0,ZeroStencilOp:idt,_SRGBAFormat:tI,createCanvasElement:kue},Symbol.toStringTag,{value:"Module"}));var jde={exports:{}},Z0={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Z0.ConcurrentRoot=1;Z0.ContinuousEventPriority=4;Z0.DefaultEventPriority=16;Z0.DiscreteEventPriority=1;Z0.IdleEventPriority=536870912;Z0.LegacyRoot=0;jde.exports=Z0;var F_=jde.exports;function Hvt(t){let e;const n=new Set,r=(c,h)=>{const p=typeof c=="function"?c(e):c;if(p!==e){const g=e;e=h?p:Object.assign({},e,p),n.forEach(v=>v(e,g))}},i=()=>e,o=(c,h=i,p=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let g=h(e);function v(){const x=h(e);if(!p(g,x)){const b=g;c(g=x,b)}}return n.add(v),()=>n.delete(v)},l={setState:r,getState:i,subscribe:(c,h,p)=>h||p?o(c,h,p):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=t(r,i,l),l}const Gvt=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),XZ=Gvt?W.useEffect:W.useLayoutEffect;function qvt(t){const e=typeof t=="function"?Hvt(t):t,n=(r=e.getState,i=Object.is)=>{const[,o]=W.useReducer(M=>M+1,0),a=e.getState(),s=W.useRef(a),l=W.useRef(r),c=W.useRef(i),h=W.useRef(!1),p=W.useRef();p.current===void 0&&(p.current=r(a));let g,v=!1;(s.current!==a||l.current!==r||c.current!==i||h.current)&&(g=r(a),v=!i(p.current,g)),XZ(()=>{v&&(p.current=g),s.current=a,l.current=r,c.current=i,h.current=!1});const x=W.useRef(a);XZ(()=>{const M=()=>{try{const T=e.getState(),C=l.current(T);c.current(p.current,C)||(s.current=T,p.current=C,o())}catch{h.current=!0,o()}},w=e.subscribe(M);return e.getState()!==x.current&&M(),w},[]);const b=v?g:p.current;return W.useDebugValue(b),b};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}var Ude={exports:{}},qN={exports:{}},YN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KZ;function Yvt(){return KZ||(KZ=1,function(t){function e(te,he){var ve=te.length;te.push(he);e:for(;0<ve;){var ze=ve-1>>>1,Ue=te[ze];if(0<i(Ue,he))te[ze]=he,te[ve]=Ue,ve=ze;else break e}}function n(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var he=te[0],ve=te.pop();if(ve!==he){te[0]=ve;e:for(var ze=0,Ue=te.length,rt=Ue>>>1;ze<rt;){var Be=2*(ze+1)-1,st=te[Be],ct=Be+1,Dt=te[ct];if(0>i(st,ve))ct<Ue&&0>i(Dt,st)?(te[ze]=Dt,te[ct]=ve,ze=ct):(te[ze]=st,te[Be]=ve,ze=Be);else if(ct<Ue&&0>i(Dt,ve))te[ze]=Dt,te[ct]=ve,ze=ct;else break e}}return he}function i(te,he){var ve=te.sortIndex-he.sortIndex;return ve!==0?ve:te.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var l=[],c=[],h=1,p=null,g=3,v=!1,x=!1,b=!1,M=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(te){for(var he=n(c);he!==null;){if(he.callback===null)r(c);else if(he.startTime<=te)r(c),he.sortIndex=he.expirationTime,e(l,he);else break;he=n(c)}}function I(te){if(b=!1,C(te),!x)if(n(l)!==null)x=!0,fe(R);else{var he=n(c);he!==null&&xe(I,he.startTime-te)}}function R(te,he){x=!1,b&&(b=!1,w(U),U=-1),v=!0;var ve=g;try{for(C(he),p=n(l);p!==null&&(!(p.expirationTime>he)||te&&!X());){var ze=p.callback;if(typeof ze=="function"){p.callback=null,g=p.priorityLevel;var Ue=ze(p.expirationTime<=he);he=t.unstable_now(),typeof Ue=="function"?p.callback=Ue:p===n(l)&&r(l),C(he)}else r(l);p=n(l)}if(p!==null)var rt=!0;else{var Be=n(c);Be!==null&&xe(I,Be.startTime-he),rt=!1}return rt}finally{p=null,g=ve,v=!1}}var O=!1,B=null,U=-1,Z=5,j=-1;function X(){return!(t.unstable_now()-j<Z)}function le(){if(B!==null){var te=t.unstable_now();j=te;var he=!0;try{he=B(!0,te)}finally{he?me():(O=!1,B=null)}}else O=!1}var me;if(typeof T=="function")me=function(){T(le)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,ce=ie.port2;ie.port1.onmessage=le,me=function(){ce.postMessage(null)}}else me=function(){M(le,0)};function fe(te){B=te,O||(O=!0,me())}function xe(te,he){U=M(function(){te(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_continueExecution=function(){x||v||(x=!0,fe(R))},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(te){switch(g){case 1:case 2:case 3:var he=3;break;default:he=g}var ve=g;g=he;try{return te()}finally{g=ve}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(te,he){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ve=g;g=te;try{return he()}finally{g=ve}},t.unstable_scheduleCallback=function(te,he,ve){var ze=t.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?ze+ve:ze):ve=ze,te){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=ve+Ue,te={id:h++,callback:he,priorityLevel:te,startTime:ve,expirationTime:Ue,sortIndex:-1},ve>ze?(te.sortIndex=ve,e(c,te),n(l)===null&&te===n(c)&&(b?(w(U),U=-1):b=!0,xe(I,ve-ze))):(te.sortIndex=Ue,e(l,te),x||v||(x=!0,fe(R))),te},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(te){var he=g;return function(){var ve=g;g=he;try{return te.apply(this,arguments)}finally{g=ve}}}}(YN)),YN}var ZZ;function Xvt(){return ZZ||(ZZ=1,qN.exports=Yvt()),qN.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kvt=function(e){var n={},r=W,i=Xvt(),o=Object.assign;function a(S){for(var E="https://reactjs.org/docs/error-decoder.html?invariant="+S,$=1;$<arguments.length;$++)E+="&args[]="+encodeURIComponent(arguments[$]);return"Minified React error #"+S+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),x=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),I=Symbol.for("react.offscreen"),R=Symbol.iterator;function O(S){return S===null||typeof S!="object"?null:(S=R&&S[R]||S["@@iterator"],typeof S=="function"?S:null)}function B(S){if(S==null)return null;if(typeof S=="function")return S.displayName||S.name||null;if(typeof S=="string")return S;switch(S){case h:return"Fragment";case c:return"Portal";case g:return"Profiler";case p:return"StrictMode";case M:return"Suspense";case w:return"SuspenseList"}if(typeof S=="object")switch(S.$$typeof){case x:return(S.displayName||"Context")+".Consumer";case v:return(S._context.displayName||"Context")+".Provider";case b:var E=S.render;return S=S.displayName,S||(S=E.displayName||E.name||"",S=S!==""?"ForwardRef("+S+")":"ForwardRef"),S;case T:return E=S.displayName||null,E!==null?E:B(S.type)||"Memo";case C:E=S._payload,S=S._init;try{return B(S(E))}catch{}}return null}function U(S){var E=S.type;switch(S.tag){case 24:return"Cache";case 9:return(E.displayName||"Context")+".Consumer";case 10:return(E._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return S=E.render,S=S.displayName||S.name||"",E.displayName||(S!==""?"ForwardRef("+S+")":"ForwardRef");case 7:return"Fragment";case 5:return E;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(E);case 8:return E===p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof E=="function")return E.displayName||E.name||null;if(typeof E=="string")return E}return null}function Z(S){var E=S,$=S;if(S.alternate)for(;E.return;)E=E.return;else{S=E;do E=S,E.flags&4098&&($=E.return),S=E.return;while(S)}return E.tag===3?$:null}function j(S){if(Z(S)!==S)throw Error(a(188))}function X(S){var E=S.alternate;if(!E){if(E=Z(S),E===null)throw Error(a(188));return E!==S?null:S}for(var $=S,q=E;;){var Q=$.return;if(Q===null)break;var ue=Q.alternate;if(ue===null){if(q=Q.return,q!==null){$=q;continue}break}if(Q.child===ue.child){for(ue=Q.child;ue;){if(ue===$)return j(Q),S;if(ue===q)return j(Q),E;ue=ue.sibling}throw Error(a(188))}if($.return!==q.return)$=Q,q=ue;else{for(var We=!1,_t=Q.child;_t;){if(_t===$){We=!0,$=Q,q=ue;break}if(_t===q){We=!0,q=Q,$=ue;break}_t=_t.sibling}if(!We){for(_t=ue.child;_t;){if(_t===$){We=!0,$=ue,q=Q;break}if(_t===q){We=!0,q=ue,$=Q;break}_t=_t.sibling}if(!We)throw Error(a(189))}}if($.alternate!==q)throw Error(a(190))}if($.tag!==3)throw Error(a(188));return $.stateNode.current===$?S:E}function le(S){return S=X(S),S!==null?me(S):null}function me(S){if(S.tag===5||S.tag===6)return S;for(S=S.child;S!==null;){var E=me(S);if(E!==null)return E;S=S.sibling}return null}function ie(S){if(S.tag===5||S.tag===6)return S;for(S=S.child;S!==null;){if(S.tag!==4){var E=ie(S);if(E!==null)return E}S=S.sibling}return null}var ce=Array.isArray,fe=e.getPublicInstance,xe=e.getRootHostContext,te=e.getChildHostContext,he=e.prepareForCommit,ve=e.resetAfterCommit,ze=e.createInstance,Ue=e.appendInitialChild,rt=e.finalizeInitialChildren,Be=e.prepareUpdate,st=e.shouldSetTextContent,ct=e.createTextInstance,Dt=e.scheduleTimeout,zt=e.cancelTimeout,Fe=e.noTimeout,lt=e.isPrimaryRenderer,Qe=e.supportsMutation,ge=e.supportsPersistence,et=e.supportsHydration,ot=e.getInstanceFromNode,Tt=e.preparePortalMount,Ct=e.getCurrentEventPriority,Bt=e.detachDeletedInstance,Gt=e.supportsMicrotasks,sn=e.scheduleMicrotask,Je=e.supportsTestSelectors,Ce=e.findFiberRoot,_e=e.getBoundingRect,ht=e.getTextContent,dt=e.isHiddenSubtree,Wt=e.matchAccessibilityRole,jt=e.setFocusIfFocusable,Sn=e.setupIntersectionObserver,cn=e.appendChild,Rt=e.appendChildToContainer,nn=e.commitTextUpdate,An=e.commitMount,mt=e.commitUpdate,un=e.insertBefore,an=e.insertInContainerBefore,Ot=e.removeChild,Ie=e.removeChildFromContainer,Ve=e.resetTextContent,Me=e.hideInstance,it=e.hideTextInstance,Qt=e.unhideInstance,Xe=e.unhideTextInstance,It=e.clearContainer,Et=e.cloneInstance,we=e.createContainerChildSet,oe=e.appendChildToContainerChildSet,pe=e.finalizeContainerChildren,Te=e.replaceContainerChildren,Pe=e.cloneHiddenInstance,Ne=e.cloneHiddenTextInstance,Ke=e.canHydrateInstance,qe=e.canHydrateTextInstance,je=e.canHydrateSuspenseInstance,tt=e.isSuspenseInstancePending,Nt=e.isSuspenseInstanceFallback,Ut=e.registerSuspenseInstanceRetry,$t=e.getNextHydratableSibling,kn=e.getFirstHydratableChild,er=e.getFirstHydratableChildWithinContainer,En=e.getFirstHydratableChildWithinSuspenseInstance,$n=e.hydrateInstance,sr=e.hydrateTextInstance,$r=e.hydrateSuspenseInstance,Ae=e.getNextHydratableInstanceAfterSuspenseInstance,ut=e.commitHydratedContainer,bt=e.commitHydratedSuspenseInstance,yt=e.clearSuspenseBoundary,vt=e.clearSuspenseBoundaryFromContainer,pn=e.shouldDeleteUnhydratedTailInstances,Cn=e.didNotMatchHydratedContainerTextInstance,Xn=e.didNotMatchHydratedTextInstance,dr;function fr(S){if(dr===void 0)try{throw Error()}catch($){var E=$.stack.trim().match(/\n( *(at )?)/);dr=E&&E[1]||""}return`
`+dr+S}var cr=!1;function _r(S,E){if(!S||cr)return"";cr=!0;var $=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(E)if(E=function(){throw Error()},Object.defineProperty(E.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(E,[])}catch(yn){var q=yn}Reflect.construct(S,[],E)}else{try{E.call()}catch(yn){q=yn}S.call(E.prototype)}else{try{throw Error()}catch(yn){q=yn}S()}}catch(yn){if(yn&&q&&typeof yn.stack=="string"){for(var Q=yn.stack.split(`
`),ue=q.stack.split(`
`),We=Q.length-1,_t=ue.length-1;1<=We&&0<=_t&&Q[We]!==ue[_t];)_t--;for(;1<=We&&0<=_t;We--,_t--)if(Q[We]!==ue[_t]){if(We!==1||_t!==1)do if(We--,_t--,0>_t||Q[We]!==ue[_t]){var Vt=`
`+Q[We].replace(" at new "," at ");return S.displayName&&Vt.includes("<anonymous>")&&(Vt=Vt.replace("<anonymous>",S.displayName)),Vt}while(1<=We&&0<=_t);break}}}finally{cr=!1,Error.prepareStackTrace=$}return(S=S?S.displayName||S.name:"")?fr(S):""}var ar=Object.prototype.hasOwnProperty,No=[],fi=-1;function Yr(S){return{current:S}}function Kn(S){0>fi||(S.current=No[fi],No[fi]=null,fi--)}function Dn(S,E){fi++,No[fi]=S.current,S.current=E}var to={},tr=Yr(to),Li=Yr(!1),Ns=to;function Ur(S,E){var $=S.type.contextTypes;if(!$)return to;var q=S.stateNode;if(q&&q.__reactInternalMemoizedUnmaskedChildContext===E)return q.__reactInternalMemoizedMaskedChildContext;var Q={},ue;for(ue in $)Q[ue]=E[ue];return q&&(S=S.stateNode,S.__reactInternalMemoizedUnmaskedChildContext=E,S.__reactInternalMemoizedMaskedChildContext=Q),Q}function hr(S){return S=S.childContextTypes,S!=null}function Si(){Kn(Li),Kn(tr)}function Zr(S,E,$){if(tr.current!==to)throw Error(a(168));Dn(tr,E),Dn(Li,$)}function Rc(S,E,$){var q=S.stateNode;if(E=E.childContextTypes,typeof q.getChildContext!="function")return $;q=q.getChildContext();for(var Q in q)if(!(Q in E))throw Error(a(108,U(S)||"Unknown",Q));return o({},$,q)}function hi(S){return S=(S=S.stateNode)&&S.__reactInternalMemoizedMergedChildContext||to,Ns=tr.current,Dn(tr,S),Dn(Li,Li.current),!0}function Eu(S,E,$){var q=S.stateNode;if(!q)throw Error(a(169));$?(S=Rc(S,E,Ns),q.__reactInternalMemoizedMergedChildContext=S,Kn(Li),Kn(tr),Dn(tr,S)):Kn(Li),Dn(Li,$)}var To=Math.clz32?Math.clz32:fm,$h=Math.log,ky=Math.LN2;function fm(S){return S>>>=0,S===0?32:31-($h(S)/ky|0)|0}var Sd=64,Sl=4194304;function Md(S){switch(S&-S){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return S&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return S&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return S}}function Tu(S,E){var $=S.pendingLanes;if($===0)return 0;var q=0,Q=S.suspendedLanes,ue=S.pingedLanes,We=$&268435455;if(We!==0){var _t=We&~Q;_t!==0?q=Md(_t):(ue&=We,ue!==0&&(q=Md(ue)))}else We=$&~Q,We!==0?q=Md(We):ue!==0&&(q=Md(ue));if(q===0)return 0;if(E!==0&&E!==q&&!(E&Q)&&(Q=q&-q,ue=E&-E,Q>=ue||Q===16&&(ue&4194240)!==0))return E;if(q&4&&(q|=$&16),E=S.entangledLanes,E!==0)for(S=S.entanglements,E&=q;0<E;)$=31-To(E),Q=1<<$,q|=S[$],E&=~Q;return q}function J0(S,E){switch(S){case 1:case 2:case 4:return E+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return E+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function W1(S,E){for(var $=S.suspendedLanes,q=S.pingedLanes,Q=S.expirationTimes,ue=S.pendingLanes;0<ue;){var We=31-To(ue),_t=1<<We,Vt=Q[We];Vt===-1?(!(_t&$)||_t&q)&&(Q[We]=J0(_t,E)):Vt<=E&&(S.expiredLanes|=_t),ue&=~_t}}function jh(S){return S=S.pendingLanes&-1073741825,S!==0?S:S&1073741824?1073741824:0}function Uh(S){for(var E=[],$=0;31>$;$++)E.push(S);return E}function Mf(S,E,$){S.pendingLanes|=E,E!==536870912&&(S.suspendedLanes=0,S.pingedLanes=0),S=S.eventTimes,E=31-To(E),S[E]=$}function H1(S,E){var $=S.pendingLanes&~E;S.pendingLanes=E,S.suspendedLanes=0,S.pingedLanes=0,S.expiredLanes&=E,S.mutableReadLanes&=E,S.entangledLanes&=E,E=S.entanglements;var q=S.eventTimes;for(S=S.expirationTimes;0<$;){var Q=31-To($),ue=1<<Q;E[Q]=0,q[Q]=-1,S[Q]=-1,$&=~ue}}function hm(S,E){var $=S.entangledLanes|=E;for(S=S.entanglements;$;){var q=31-To($),Q=1<<q;Q&E|S[q]&E&&(S[q]|=E),$&=~Q}}var Xr=0;function Vh(S){return S&=-S,1<S?4<S?S&268435455?16:536870912:4:1}var pm=i.unstable_scheduleCallback,Iy=i.unstable_cancelCallback,Ry=i.unstable_shouldYield,Oy=i.unstable_requestPaint,Ui=i.unstable_now,Ef=i.unstable_ImmediatePriority,Ua=i.unstable_UserBlockingPriority,Tf=i.unstable_NormalPriority,mm=i.unstable_IdlePriority,Cu=null,va=null;function Cf(S){if(va&&typeof va.onCommitFiberRoot=="function")try{va.onCommitFiberRoot(Cu,S,void 0,(S.current.flags&128)===128)}catch{}}function Au(S,E){return S===E&&(S!==0||1/S===1/E)||S!==S&&E!==E}var yr=typeof Object.is=="function"?Object.is:Au,Va=null,Ts=!1,zs=!1;function gm(S){Va===null?Va=[S]:Va.push(S)}function ym(S){Ts=!0,gm(S)}function xa(){if(!zs&&Va!==null){zs=!0;var S=0,E=Xr;try{var $=Va;for(Xr=1;S<$.length;S++){var q=$[S];do q=q(!0);while(q!==null)}Va=null,Ts=!1}catch(Q){throw Va!==null&&(Va=Va.slice(S+1)),pm(Ef,xa),Q}finally{Xr=E,zs=!1}}return null}var Ly=s.ReactCurrentBatchConfig;function Af(S,E){if(yr(S,E))return!0;if(typeof S!="object"||S===null||typeof E!="object"||E===null)return!1;var $=Object.keys(S),q=Object.keys(E);if($.length!==q.length)return!1;for(q=0;q<$.length;q++){var Q=$[q];if(!ar.call(E,Q)||!yr(S[Q],E[Q]))return!1}return!0}function vm(S){switch(S.tag){case 5:return fr(S.type);case 16:return fr("Lazy");case 13:return fr("Suspense");case 19:return fr("SuspenseList");case 0:case 2:case 15:return S=_r(S.type,!1),S;case 11:return S=_r(S.type.render,!1),S;case 1:return S=_r(S.type,!0),S;default:return""}}function _a(S,E){if(S&&S.defaultProps){E=o({},E),S=S.defaultProps;for(var $ in S)E[$]===void 0&&(E[$]=S[$]);return E}return E}var Pf=Yr(null),Ed=null,Td=null,xm=null;function Pu(){xm=Td=Ed=null}function Q0(S,E,$){lt?(Dn(Pf,E._currentValue),E._currentValue=$):(Dn(Pf,E._currentValue2),E._currentValue2=$)}function Dy(S){var E=Pf.current;Kn(Pf),lt?S._currentValue=E:S._currentValue2=E}function Ny(S,E,$){for(;S!==null;){var q=S.alternate;if((S.childLanes&E)!==E?(S.childLanes|=E,q!==null&&(q.childLanes|=E)):q!==null&&(q.childLanes&E)!==E&&(q.childLanes|=E),S===$)break;S=S.return}}function kf(S,E){Ed=S,xm=Td=null,S=S.dependencies,S!==null&&S.firstContext!==null&&(S.lanes&E&&(Yo=!0),S.firstContext=null)}function Wa(S){var E=lt?S._currentValue:S._currentValue2;if(xm!==S)if(S={context:S,memoizedValue:E,next:null},Td===null){if(Ed===null)throw Error(a(308));Td=S,Ed.dependencies={lanes:0,firstContext:S}}else Td=Td.next=S;return E}var ec=null,tc=!1;function If(S){S.updateQueue={baseState:S.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _m(S,E){S=S.updateQueue,E.updateQueue===S&&(E.updateQueue={baseState:S.baseState,firstBaseUpdate:S.firstBaseUpdate,lastBaseUpdate:S.lastBaseUpdate,shared:S.shared,effects:S.effects})}function Ml(S,E){return{eventTime:S,lane:E,tag:0,payload:null,callback:null,next:null}}function ba(S,E){var $=S.updateQueue;$!==null&&($=$.shared,ei!==null&&S.mode&1&&!(gr&2)?(S=$.interleaved,S===null?(E.next=E,ec===null?ec=[$]:ec.push($)):(E.next=S.next,S.next=E),$.interleaved=E):(S=$.pending,S===null?E.next=E:(E.next=S.next,S.next=E),$.pending=E))}function Wh(S,E,$){if(E=E.updateQueue,E!==null&&(E=E.shared,($&4194240)!==0)){var q=E.lanes;q&=S.pendingLanes,$|=q,E.lanes=$,hm(S,$)}}function zy(S,E){var $=S.updateQueue,q=S.alternate;if(q!==null&&(q=q.updateQueue,$===q)){var Q=null,ue=null;if($=$.firstBaseUpdate,$!==null){do{var We={eventTime:$.eventTime,lane:$.lane,tag:$.tag,payload:$.payload,callback:$.callback,next:null};ue===null?Q=ue=We:ue=ue.next=We,$=$.next}while($!==null);ue===null?Q=ue=E:ue=ue.next=E}else Q=ue=E;$={baseState:q.baseState,firstBaseUpdate:Q,lastBaseUpdate:ue,shared:q.shared,effects:q.effects},S.updateQueue=$;return}S=$.lastBaseUpdate,S===null?$.firstBaseUpdate=E:S.next=E,$.lastBaseUpdate=E}function Rf(S,E,$,q){var Q=S.updateQueue;tc=!1;var ue=Q.firstBaseUpdate,We=Q.lastBaseUpdate,_t=Q.shared.pending;if(_t!==null){Q.shared.pending=null;var Vt=_t,yn=Vt.next;Vt.next=null,We===null?ue=yn:We.next=yn,We=Vt;var jn=S.alternate;jn!==null&&(jn=jn.updateQueue,_t=jn.lastBaseUpdate,_t!==We&&(_t===null?jn.firstBaseUpdate=yn:_t.next=yn,jn.lastBaseUpdate=Vt))}if(ue!==null){var Cr=Q.baseState;We=0,jn=yn=Vt=null,_t=ue;do{var lr=_t.lane,Pi=_t.eventTime;if((q&lr)===lr){jn!==null&&(jn=jn.next={eventTime:Pi,lane:0,tag:_t.tag,payload:_t.payload,callback:_t.callback,next:null});e:{var rr=S,Xs=_t;switch(lr=E,Pi=$,Xs.tag){case 1:if(rr=Xs.payload,typeof rr=="function"){Cr=rr.call(Pi,Cr,lr);break e}Cr=rr;break e;case 3:rr.flags=rr.flags&-65537|128;case 0:if(rr=Xs.payload,lr=typeof rr=="function"?rr.call(Pi,Cr,lr):rr,lr==null)break e;Cr=o({},Cr,lr);break e;case 2:tc=!0}}_t.callback!==null&&_t.lane!==0&&(S.flags|=64,lr=Q.effects,lr===null?Q.effects=[_t]:lr.push(_t))}else Pi={eventTime:Pi,lane:lr,tag:_t.tag,payload:_t.payload,callback:_t.callback,next:null},jn===null?(yn=jn=Pi,Vt=Cr):jn=jn.next=Pi,We|=lr;if(_t=_t.next,_t===null){if(_t=Q.shared.pending,_t===null)break;lr=_t,_t=lr.next,lr.next=null,Q.lastBaseUpdate=lr,Q.shared.pending=null}}while(!0);if(jn===null&&(Vt=Cr),Q.baseState=Vt,Q.firstBaseUpdate=yn,Q.lastBaseUpdate=jn,E=Q.shared.interleaved,E!==null){Q=E;do We|=Q.lane,Q=Q.next;while(Q!==E)}else ue===null&&(Q.shared.lanes=0);Wf|=We,S.lanes=We,S.memoizedState=Cr}}function ku(S,E,$){if(S=E.effects,E.effects=null,S!==null)for(E=0;E<S.length;E++){var q=S[E],Q=q.callback;if(Q!==null){if(q.callback=null,q=$,typeof Q!="function")throw Error(a(191,Q));Q.call(q)}}}var Fy=new r.Component().refs;function nc(S,E,$,q){E=S.memoizedState,$=$(q,E),$=$==null?E:o({},E,$),S.memoizedState=$,S.lanes===0&&(S.updateQueue.baseState=$)}var Oc={isMounted:function(S){return(S=S._reactInternals)?Z(S)===S:!1},enqueueSetState:function(S,E,$){S=S._reactInternals;var q=As(),Q=Uc(S),ue=Ml(q,Q);ue.payload=E,$!=null&&(ue.callback=$),ba(S,ue),E=Al(S,Q,q),E!==null&&Wh(E,S,Q)},enqueueReplaceState:function(S,E,$){S=S._reactInternals;var q=As(),Q=Uc(S),ue=Ml(q,Q);ue.tag=1,ue.payload=E,$!=null&&(ue.callback=$),ba(S,ue),E=Al(S,Q,q),E!==null&&Wh(E,S,Q)},enqueueForceUpdate:function(S,E){S=S._reactInternals;var $=As(),q=Uc(S),Q=Ml($,q);Q.tag=2,E!=null&&(Q.callback=E),ba(S,Q),E=Al(S,q,$),E!==null&&Wh(E,S,q)}};function By(S,E,$,q,Q,ue,We){return S=S.stateNode,typeof S.shouldComponentUpdate=="function"?S.shouldComponentUpdate(q,ue,We):E.prototype&&E.prototype.isPureReactComponent?!Af($,q)||!Af(Q,ue):!0}function bm(S,E,$){var q=!1,Q=to,ue=E.contextType;return typeof ue=="object"&&ue!==null?ue=Wa(ue):(Q=hr(E)?Ns:tr.current,q=E.contextTypes,ue=(q=q!=null)?Ur(S,Q):to),E=new E($,ue),S.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=Oc,S.stateNode=E,E._reactInternals=S,q&&(S=S.stateNode,S.__reactInternalMemoizedUnmaskedChildContext=Q,S.__reactInternalMemoizedMaskedChildContext=ue),E}function Wr(S,E,$,q){S=E.state,typeof E.componentWillReceiveProps=="function"&&E.componentWillReceiveProps($,q),typeof E.UNSAFE_componentWillReceiveProps=="function"&&E.UNSAFE_componentWillReceiveProps($,q),E.state!==S&&Oc.enqueueReplaceState(E,E.state,null)}function Oi(S,E,$,q){var Q=S.stateNode;Q.props=$,Q.state=S.memoizedState,Q.refs=Fy,If(S);var ue=E.contextType;typeof ue=="object"&&ue!==null?Q.context=Wa(ue):(ue=hr(E)?Ns:tr.current,Q.context=Ur(S,ue)),Q.state=S.memoizedState,ue=E.getDerivedStateFromProps,typeof ue=="function"&&(nc(S,E,ue,$),Q.state=S.memoizedState),typeof E.getDerivedStateFromProps=="function"||typeof Q.getSnapshotBeforeUpdate=="function"||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(E=Q.state,typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount(),E!==Q.state&&Oc.enqueueReplaceState(Q,Q.state,null),Rf(S,$,Q,q),Q.state=S.memoizedState),typeof Q.componentDidMount=="function"&&(S.flags|=4194308)}var Of=[],Sr=0,rc=null,Mi=0,jr=[],Cs=0,Iu=null,El=1,Ha="";function ic(S,E){Of[Sr++]=Mi,Of[Sr++]=rc,rc=S,Mi=E}function wm(S,E,$){jr[Cs++]=El,jr[Cs++]=Ha,jr[Cs++]=Iu,Iu=S;var q=El;S=Ha;var Q=32-To(q)-1;q&=~(1<<Q),$+=1;var ue=32-To(E)+Q;if(30<ue){var We=Q-Q%5;ue=(q&(1<<We)-1).toString(32),q>>=We,Q-=We,El=1<<32-To(E)+Q|$<<Q|q,Ha=ue+S}else El=1<<ue|$<<Q|q,Ha=S}function Lf(S){S.return!==null&&(ic(S,1),wm(S,1,0))}function Hh(S){for(;S===rc;)rc=Of[--Sr],Of[Sr]=null,Mi=Of[--Sr],Of[Sr]=null;for(;S===Iu;)Iu=jr[--Cs],jr[Cs]=null,Ha=jr[--Cs],jr[Cs]=null,El=jr[--Cs],jr[Cs]=null}var as=null,ls=null,pi=!1,Gh=!1,wa=null;function ex(S,E){var $=fc(5,null,null,0);$.elementType="DELETED",$.stateNode=E,$.return=S,E=S.deletions,E===null?(S.deletions=[$],S.flags|=16):E.push($)}function $y(S,E){switch(S.tag){case 5:return E=Ke(E,S.type,S.pendingProps),E!==null?(S.stateNode=E,as=S,ls=kn(E),!0):!1;case 6:return E=qe(E,S.pendingProps),E!==null?(S.stateNode=E,as=S,ls=null,!0):!1;case 13:if(E=je(E),E!==null){var $=Iu!==null?{id:El,overflow:Ha}:null;return S.memoizedState={dehydrated:E,treeContext:$,retryLane:1073741824},$=fc(18,null,null,0),$.stateNode=E,$.return=S,S.child=$,as=S,ls=null,!0}return!1;default:return!1}}function Df(S){return(S.mode&1)!==0&&(S.flags&128)===0}function qh(S){if(pi){var E=ls;if(E){var $=E;if(!$y(S,E)){if(Df(S))throw Error(a(418));E=$t($);var q=as;E&&$y(S,E)?ex(q,$):(S.flags=S.flags&-4097|2,pi=!1,as=S)}}else{if(Df(S))throw Error(a(418));S.flags=S.flags&-4097|2,pi=!1,as=S}}}function jy(S){for(S=S.return;S!==null&&S.tag!==5&&S.tag!==3&&S.tag!==13;)S=S.return;as=S}function Nf(S){if(!et||S!==as)return!1;if(!pi)return jy(S),pi=!0,!1;if(S.tag!==3&&(S.tag!==5||pn(S.type)&&!st(S.type,S.memoizedProps))){var E=ls;if(E){if(Df(S)){for(S=ls;S;)S=$t(S);throw Error(a(418))}for(;E;)ex(S,E),E=$t(E)}}if(jy(S),S.tag===13){if(!et)throw Error(a(316));if(S=S.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(a(317));ls=Ae(S)}else ls=as?$t(S.stateNode):null;return!0}function oc(){et&&(ls=as=null,Gh=pi=!1)}function zf(S){wa===null?wa=[S]:wa.push(S)}function Ru(S,E,$){if(S=$.ref,S!==null&&typeof S!="function"&&typeof S!="object"){if($._owner){if($=$._owner,$){if($.tag!==1)throw Error(a(309));var q=$.stateNode}if(!q)throw Error(a(147,S));var Q=q,ue=""+S;return E!==null&&E.ref!==null&&typeof E.ref=="function"&&E.ref._stringRef===ue?E.ref:(E=function(We){var _t=Q.refs;_t===Fy&&(_t=Q.refs={}),We===null?delete _t[ue]:_t[ue]=We},E._stringRef=ue,E)}if(typeof S!="string")throw Error(a(284));if(!$._owner)throw Error(a(290,S))}return S}function Yh(S,E){throw S=Object.prototype.toString.call(E),Error(a(31,S==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":S))}function Vi(S){var E=S._init;return E(S._payload)}function Ou(S){function E(Lt,St){if(S){var Ft=Lt.deletions;Ft===null?(Lt.deletions=[St],Lt.flags|=16):Ft.push(St)}}function $(Lt,St){if(!S)return null;for(;St!==null;)E(Lt,St),St=St.sibling;return null}function q(Lt,St){for(Lt=new Map;St!==null;)St.key!==null?Lt.set(St.key,St):Lt.set(St.index,St),St=St.sibling;return Lt}function Q(Lt,St){return Lt=Jf(Lt,St),Lt.index=0,Lt.sibling=null,Lt}function ue(Lt,St,Ft){return Lt.index=Ft,S?(Ft=Lt.alternate,Ft!==null?(Ft=Ft.index,Ft<St?(Lt.flags|=2,St):Ft):(Lt.flags|=2,St)):(Lt.flags|=1048576,St)}function We(Lt){return S&&Lt.alternate===null&&(Lt.flags|=2),Lt}function _t(Lt,St,Ft,On){return St===null||St.tag!==6?(St=av(Ft,Lt.mode,On),St.return=Lt,St):(St=Q(St,Ft),St.return=Lt,St)}function Vt(Lt,St,Ft,On){var or=Ft.type;return or===h?jn(Lt,St,Ft.props.children,On,Ft.key):St!==null&&(St.elementType===or||typeof or=="object"&&or!==null&&or.$$typeof===C&&Vi(or)===St.type)?(On=Q(St,Ft.props),On.ref=Ru(Lt,St,Ft),On.return=Lt,On):(On=ax(Ft.type,Ft.key,Ft.props,null,Lt.mode,On),On.ref=Ru(Lt,St,Ft),On.return=Lt,On)}function yn(Lt,St,Ft,On){return St===null||St.tag!==4||St.stateNode.containerInfo!==Ft.containerInfo||St.stateNode.implementation!==Ft.implementation?(St=rw(Ft,Lt.mode,On),St.return=Lt,St):(St=Q(St,Ft.children||[]),St.return=Lt,St)}function jn(Lt,St,Ft,On,or){return St===null||St.tag!==7?(St=tp(Ft,Lt.mode,On,or),St.return=Lt,St):(St=Q(St,Ft),St.return=Lt,St)}function Cr(Lt,St,Ft){if(typeof St=="string"&&St!==""||typeof St=="number")return St=av(""+St,Lt.mode,Ft),St.return=Lt,St;if(typeof St=="object"&&St!==null){switch(St.$$typeof){case l:return Ft=ax(St.type,St.key,St.props,null,Lt.mode,Ft),Ft.ref=Ru(Lt,null,St),Ft.return=Lt,Ft;case c:return St=rw(St,Lt.mode,Ft),St.return=Lt,St;case C:var On=St._init;return Cr(Lt,On(St._payload),Ft)}if(ce(St)||O(St))return St=tp(St,Lt.mode,Ft,null),St.return=Lt,St;Yh(Lt,St)}return null}function lr(Lt,St,Ft,On){var or=St!==null?St.key:null;if(typeof Ft=="string"&&Ft!==""||typeof Ft=="number")return or!==null?null:_t(Lt,St,""+Ft,On);if(typeof Ft=="object"&&Ft!==null){switch(Ft.$$typeof){case l:return Ft.key===or?Vt(Lt,St,Ft,On):null;case c:return Ft.key===or?yn(Lt,St,Ft,On):null;case C:return or=Ft._init,lr(Lt,St,or(Ft._payload),On)}if(ce(Ft)||O(Ft))return or!==null?null:jn(Lt,St,Ft,On,null);Yh(Lt,Ft)}return null}function Pi(Lt,St,Ft,On,or){if(typeof On=="string"&&On!==""||typeof On=="number")return Lt=Lt.get(Ft)||null,_t(St,Lt,""+On,or);if(typeof On=="object"&&On!==null){switch(On.$$typeof){case l:return Lt=Lt.get(On.key===null?Ft:On.key)||null,Vt(St,Lt,On,or);case c:return Lt=Lt.get(On.key===null?Ft:On.key)||null,yn(St,Lt,On,or);case C:var br=On._init;return Pi(Lt,St,Ft,br(On._payload),or)}if(ce(On)||O(On))return Lt=Lt.get(Ft)||null,jn(St,Lt,On,or,null);Yh(St,On)}return null}function rr(Lt,St,Ft,On){for(var or=null,br=null,Ar=St,ti=St=0,xo=null;Ar!==null&&ti<Ft.length;ti++){Ar.index>ti?(xo=Ar,Ar=null):xo=Ar.sibling;var ii=lr(Lt,Ar,Ft[ti],On);if(ii===null){Ar===null&&(Ar=xo);break}S&&Ar&&ii.alternate===null&&E(Lt,Ar),St=ue(ii,St,ti),br===null?or=ii:br.sibling=ii,br=ii,Ar=xo}if(ti===Ft.length)return $(Lt,Ar),pi&&ic(Lt,ti),or;if(Ar===null){for(;ti<Ft.length;ti++)Ar=Cr(Lt,Ft[ti],On),Ar!==null&&(St=ue(Ar,St,ti),br===null?or=Ar:br.sibling=Ar,br=Ar);return pi&&ic(Lt,ti),or}for(Ar=q(Lt,Ar);ti<Ft.length;ti++)xo=Pi(Ar,Lt,ti,Ft[ti],On),xo!==null&&(S&&xo.alternate!==null&&Ar.delete(xo.key===null?ti:xo.key),St=ue(xo,St,ti),br===null?or=xo:br.sibling=xo,br=xo);return S&&Ar.forEach(function(Qf){return E(Lt,Qf)}),pi&&ic(Lt,ti),or}function Xs(Lt,St,Ft,On){var or=O(Ft);if(typeof or!="function")throw Error(a(150));if(Ft=or.call(Ft),Ft==null)throw Error(a(151));for(var br=or=null,Ar=St,ti=St=0,xo=null,ii=Ft.next();Ar!==null&&!ii.done;ti++,ii=Ft.next()){Ar.index>ti?(xo=Ar,Ar=null):xo=Ar.sibling;var Qf=lr(Lt,Ar,ii.value,On);if(Qf===null){Ar===null&&(Ar=xo);break}S&&Ar&&Qf.alternate===null&&E(Lt,Ar),St=ue(Qf,St,ti),br===null?or=Qf:br.sibling=Qf,br=Qf,Ar=xo}if(ii.done)return $(Lt,Ar),pi&&ic(Lt,ti),or;if(Ar===null){for(;!ii.done;ti++,ii=Ft.next())ii=Cr(Lt,ii.value,On),ii!==null&&(St=ue(ii,St,ti),br===null?or=ii:br.sibling=ii,br=ii);return pi&&ic(Lt,ti),or}for(Ar=q(Lt,Ar);!ii.done;ti++,ii=Ft.next())ii=Pi(Ar,Lt,ti,ii.value,On),ii!==null&&(S&&ii.alternate!==null&&Ar.delete(ii.key===null?ti:ii.key),St=ue(ii,St,ti),br===null?or=ii:br.sibling=ii,br=ii);return S&&Ar.forEach(function(fL){return E(Lt,fL)}),pi&&ic(Lt,ti),or}function Pl(Lt,St,Ft,On){if(typeof Ft=="object"&&Ft!==null&&Ft.type===h&&Ft.key===null&&(Ft=Ft.props.children),typeof Ft=="object"&&Ft!==null){switch(Ft.$$typeof){case l:e:{for(var or=Ft.key,br=St;br!==null;){if(br.key===or){if(or=Ft.type,or===h){if(br.tag===7){$(Lt,br.sibling),St=Q(br,Ft.props.children),St.return=Lt,Lt=St;break e}}else if(br.elementType===or||typeof or=="object"&&or!==null&&or.$$typeof===C&&Vi(or)===br.type){$(Lt,br.sibling),St=Q(br,Ft.props),St.ref=Ru(Lt,br,Ft),St.return=Lt,Lt=St;break e}$(Lt,br);break}else E(Lt,br);br=br.sibling}Ft.type===h?(St=tp(Ft.props.children,Lt.mode,On,Ft.key),St.return=Lt,Lt=St):(On=ax(Ft.type,Ft.key,Ft.props,null,Lt.mode,On),On.ref=Ru(Lt,St,Ft),On.return=Lt,Lt=On)}return We(Lt);case c:e:{for(br=Ft.key;St!==null;){if(St.key===br)if(St.tag===4&&St.stateNode.containerInfo===Ft.containerInfo&&St.stateNode.implementation===Ft.implementation){$(Lt,St.sibling),St=Q(St,Ft.children||[]),St.return=Lt,Lt=St;break e}else{$(Lt,St);break}else E(Lt,St);St=St.sibling}St=rw(Ft,Lt.mode,On),St.return=Lt,Lt=St}return We(Lt);case C:return br=Ft._init,Pl(Lt,St,br(Ft._payload),On)}if(ce(Ft))return rr(Lt,St,Ft,On);if(O(Ft))return Xs(Lt,St,Ft,On);Yh(Lt,Ft)}return typeof Ft=="string"&&Ft!==""||typeof Ft=="number"?(Ft=""+Ft,St!==null&&St.tag===6?($(Lt,St.sibling),St=Q(St,Ft),St.return=Lt,Lt=St):($(Lt,St),St=av(Ft,Lt.mode,On),St.return=Lt,Lt=St),We(Lt)):$(Lt,St)}return Pl}var zo=Ou(!0),Cd=Ou(!1),Lc={},Fs=Yr(Lc),Tl=Yr(Lc),sc=Yr(Lc);function Bs(S){if(S===Lc)throw Error(a(174));return S}function Sm(S,E){Dn(sc,E),Dn(Tl,S),Dn(Fs,Lc),S=xe(E),Kn(Fs),Dn(Fs,S)}function Ad(){Kn(Fs),Kn(Tl),Kn(sc)}function Uy(S){var E=Bs(sc.current),$=Bs(Fs.current);E=te($,S.type,E),$!==E&&(Dn(Tl,S),Dn(Fs,E))}function Mm(S){Tl.current===S&&(Kn(Fs),Kn(Tl))}var Wi=Yr(0);function Sa(S){for(var E=S;E!==null;){if(E.tag===13){var $=E.memoizedState;if($!==null&&($=$.dehydrated,$===null||tt($)||Nt($)))return E}else if(E.tag===19&&E.memoizedProps.revealOrder!==void 0){if(E.flags&128)return E}else if(E.child!==null){E.child.return=E,E=E.child;continue}if(E===S)break;for(;E.sibling===null;){if(E.return===null||E.return===S)return null;E=E.return}E.sibling.return=E.return,E=E.sibling}return null}var Pd=[];function $s(){for(var S=0;S<Pd.length;S++){var E=Pd[S];lt?E._workInProgressVersionPrimary=null:E._workInProgressVersionSecondary=null}Pd.length=0}var Lu=s.ReactCurrentDispatcher,Ma=s.ReactCurrentBatchConfig,kd=0,no=null,Hi=null,Fo=null,js=!1,Ea=!1,Du=0,Dc=0;function Gi(){throw Error(a(321))}function Vy(S,E){if(E===null)return!1;for(var $=0;$<E.length&&$<S.length;$++)if(!yr(S[$],E[$]))return!1;return!0}function Xh(S,E,$,q,Q,ue){if(kd=ue,no=E,E.memoizedState=null,E.updateQueue=null,E.lanes=0,Lu.current=S===null||S.memoizedState===null?nx:G1,S=$(q,Q),Ea){ue=0;do{if(Ea=!1,Du=0,25<=ue)throw Error(a(301));ue+=1,Fo=Hi=null,E.updateQueue=null,Lu.current=Hs,S=$(q,Q)}while(Ea)}if(Lu.current=ep,E=Hi!==null&&Hi.next!==null,kd=0,Fo=Hi=no=null,js=!1,E)throw Error(a(300));return S}function Em(){var S=Du!==0;return Du=0,S}function Ga(){var S={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fo===null?no.memoizedState=Fo=S:Fo=Fo.next=S,Fo}function Us(){if(Hi===null){var S=no.alternate;S=S!==null?S.memoizedState:null}else S=Hi.next;var E=Fo===null?no.memoizedState:Fo.next;if(E!==null)Fo=E,Hi=S;else{if(S===null)throw Error(a(310));Hi=S,S={memoizedState:Hi.memoizedState,baseState:Hi.baseState,baseQueue:Hi.baseQueue,queue:Hi.queue,next:null},Fo===null?no.memoizedState=Fo=S:Fo=Fo.next=S}return Fo}function Vs(S,E){return typeof E=="function"?E(S):E}function wn(S){var E=Us(),$=E.queue;if($===null)throw Error(a(311));$.lastRenderedReducer=S;var q=Hi,Q=q.baseQueue,ue=$.pending;if(ue!==null){if(Q!==null){var We=Q.next;Q.next=ue.next,ue.next=We}q.baseQueue=Q=ue,$.pending=null}if(Q!==null){ue=Q.next,q=q.baseState;var _t=We=null,Vt=null,yn=ue;do{var jn=yn.lane;if((kd&jn)===jn)Vt!==null&&(Vt=Vt.next={lane:0,action:yn.action,hasEagerState:yn.hasEagerState,eagerState:yn.eagerState,next:null}),q=yn.hasEagerState?yn.eagerState:S(q,yn.action);else{var Cr={lane:jn,action:yn.action,hasEagerState:yn.hasEagerState,eagerState:yn.eagerState,next:null};Vt===null?(_t=Vt=Cr,We=q):Vt=Vt.next=Cr,no.lanes|=jn,Wf|=jn}yn=yn.next}while(yn!==null&&yn!==ue);Vt===null?We=q:Vt.next=_t,yr(q,E.memoizedState)||(Yo=!0),E.memoizedState=q,E.baseState=We,E.baseQueue=Vt,$.lastRenderedState=q}if(S=$.interleaved,S!==null){Q=S;do ue=Q.lane,no.lanes|=ue,Wf|=ue,Q=Q.next;while(Q!==S)}else Q===null&&($.lanes=0);return[E.memoizedState,$.dispatch]}function Id(S){var E=Us(),$=E.queue;if($===null)throw Error(a(311));$.lastRenderedReducer=S;var q=$.dispatch,Q=$.pending,ue=E.memoizedState;if(Q!==null){$.pending=null;var We=Q=Q.next;do ue=S(ue,We.action),We=We.next;while(We!==Q);yr(ue,E.memoizedState)||(Yo=!0),E.memoizedState=ue,E.baseQueue===null&&(E.baseState=ue),$.lastRenderedState=ue}return[ue,q]}function Nc(){}function Rd(S,E){var $=no,q=Us(),Q=E(),ue=!yr(q.memoizedState,Q);if(ue&&(q.memoizedState=Q,Yo=!0),q=q.queue,Ld(Tm.bind(null,$,q,S),[S]),q.getSnapshot!==E||ue||Fo!==null&&Fo.memoizedState.tag&1){if($.flags|=2048,Od(9,xn.bind(null,$,q,Q,E),void 0,null),ei===null)throw Error(a(349));kd&30||Wy($,E,Q)}return Q}function Wy(S,E,$){S.flags|=16384,S={getSnapshot:E,value:$},E=no.updateQueue,E===null?(E={lastEffect:null,stores:null},no.updateQueue=E,E.stores=[S]):($=E.stores,$===null?E.stores=[S]:$.push(S))}function xn(S,E,$,q){E.value=$,E.getSnapshot=q,Cm(E)&&Al(S,1,-1)}function Tm(S,E,$){return $(function(){Cm(E)&&Al(S,1,-1)})}function Cm(S){var E=S.getSnapshot;S=S.value;try{var $=E();return!yr(S,$)}catch{return!0}}function Hy(S){var E=Ga();return typeof S=="function"&&(S=S()),E.memoizedState=E.baseState=S,S={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:S},E.queue=S,S=S.dispatch=Ta.bind(null,no,S),[E.memoizedState,S]}function Od(S,E,$,q){return S={tag:S,create:E,destroy:$,deps:q,next:null},E=no.updateQueue,E===null?(E={lastEffect:null,stores:null},no.updateQueue=E,E.lastEffect=S.next=S):($=E.lastEffect,$===null?E.lastEffect=S.next=S:(q=$.next,$.next=S,S.next=q,E.lastEffect=S)),S}function Gy(){return Us().memoizedState}function Kh(S,E,$,q){var Q=Ga();no.flags|=S,Q.memoizedState=Od(1|E,$,void 0,q===void 0?null:q)}function Zh(S,E,$,q){var Q=Us();q=q===void 0?null:q;var ue=void 0;if(Hi!==null){var We=Hi.memoizedState;if(ue=We.destroy,q!==null&&Vy(q,We.deps)){Q.memoizedState=Od(E,$,ue,q);return}}no.flags|=S,Q.memoizedState=Od(1|E,$,ue,q)}function qy(S,E){return Kh(8390656,8,S,E)}function Ld(S,E){return Zh(2048,8,S,E)}function Am(S,E){return Zh(4,2,S,E)}function Pm(S,E){return Zh(4,4,S,E)}function km(S,E){if(typeof E=="function")return S=S(),E(S),function(){E(null)};if(E!=null)return S=S(),E.current=S,function(){E.current=null}}function Ws(S,E,$){return $=$!=null?$.concat([S]):null,Zh(4,4,km.bind(null,E,S),$)}function ac(){}function Ff(S,E){var $=Us();E=E===void 0?null:E;var q=$.memoizedState;return q!==null&&E!==null&&Vy(E,q[1])?q[0]:($.memoizedState=[S,E],S)}function Im(S,E){var $=Us();E=E===void 0?null:E;var q=$.memoizedState;return q!==null&&E!==null&&Vy(E,q[1])?q[0]:(S=S(),$.memoizedState=[S,E],S)}function Jh(S,E){var $=Xr;Xr=$!==0&&4>$?$:4,S(!0);var q=Ma.transition;Ma.transition={};try{S(!1),E()}finally{Xr=$,Ma.transition=q}}function Rm(){return Us().memoizedState}function tx(S,E,$){var q=Uc(S);$={lane:q,action:$,hasEagerState:!1,eagerState:null,next:null},Ei(S)?Qh(E,$):(Om(S,E,$),$=As(),S=Al(S,q,$),S!==null&&Yy(S,E,q))}function Ta(S,E,$){var q=Uc(S),Q={lane:q,action:$,hasEagerState:!1,eagerState:null,next:null};if(Ei(S))Qh(E,Q);else{Om(S,E,Q);var ue=S.alternate;if(S.lanes===0&&(ue===null||ue.lanes===0)&&(ue=E.lastRenderedReducer,ue!==null))try{var We=E.lastRenderedState,_t=ue(We,$);if(Q.hasEagerState=!0,Q.eagerState=_t,yr(_t,We))return}catch{}finally{}$=As(),S=Al(S,q,$),S!==null&&Yy(S,E,q)}}function Ei(S){var E=S.alternate;return S===no||E!==null&&E===no}function Qh(S,E){Ea=js=!0;var $=S.pending;$===null?E.next=E:(E.next=$.next,$.next=E),S.pending=E}function Om(S,E,$){ei!==null&&S.mode&1&&!(gr&2)?(S=E.interleaved,S===null?($.next=$,ec===null?ec=[E]:ec.push(E)):($.next=S.next,S.next=$),E.interleaved=$):(S=E.pending,S===null?$.next=$:($.next=S.next,S.next=$),E.pending=$)}function Yy(S,E,$){if($&4194240){var q=E.lanes;q&=S.pendingLanes,$|=q,E.lanes=$,hm(S,$)}}var ep={readContext:Wa,useCallback:Gi,useContext:Gi,useEffect:Gi,useImperativeHandle:Gi,useInsertionEffect:Gi,useLayoutEffect:Gi,useMemo:Gi,useReducer:Gi,useRef:Gi,useState:Gi,useDebugValue:Gi,useDeferredValue:Gi,useTransition:Gi,useMutableSource:Gi,useSyncExternalStore:Gi,useId:Gi,unstable_isNewReconciler:!1},nx={readContext:Wa,useCallback:function(S,E){return Ga().memoizedState=[S,E===void 0?null:E],S},useContext:Wa,useEffect:qy,useImperativeHandle:function(S,E,$){return $=$!=null?$.concat([S]):null,Kh(4194308,4,km.bind(null,E,S),$)},useLayoutEffect:function(S,E){return Kh(4194308,4,S,E)},useInsertionEffect:function(S,E){return Kh(4,2,S,E)},useMemo:function(S,E){var $=Ga();return E=E===void 0?null:E,S=S(),$.memoizedState=[S,E],S},useReducer:function(S,E,$){var q=Ga();return E=$!==void 0?$(E):E,q.memoizedState=q.baseState=E,S={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:S,lastRenderedState:E},q.queue=S,S=S.dispatch=tx.bind(null,no,S),[q.memoizedState,S]},useRef:function(S){var E=Ga();return S={current:S},E.memoizedState=S},useState:Hy,useDebugValue:ac,useDeferredValue:function(S){var E=Hy(S),$=E[0],q=E[1];return qy(function(){var Q=Ma.transition;Ma.transition={};try{q(S)}finally{Ma.transition=Q}},[S]),$},useTransition:function(){var S=Hy(!1),E=S[0];return S=Jh.bind(null,S[1]),Ga().memoizedState=S,[E,S]},useMutableSource:function(){},useSyncExternalStore:function(S,E,$){var q=no,Q=Ga();if(pi){if($===void 0)throw Error(a(407));$=$()}else{if($=E(),ei===null)throw Error(a(349));kd&30||Wy(q,E,$)}Q.memoizedState=$;var ue={value:$,getSnapshot:E};return Q.queue=ue,qy(Tm.bind(null,q,ue,S),[S]),q.flags|=2048,Od(9,xn.bind(null,q,ue,$,E),void 0,null),$},useId:function(){var S=Ga(),E=ei.identifierPrefix;if(pi){var $=Ha,q=El;$=(q&~(1<<32-To(q)-1)).toString(32)+$,E=":"+E+"R"+$,$=Du++,0<$&&(E+="H"+$.toString(32)),E+=":"}else $=Dc++,E=":"+E+"r"+$.toString(32)+":";return S.memoizedState=E},unstable_isNewReconciler:!1},G1={readContext:Wa,useCallback:Ff,useContext:Wa,useEffect:Ld,useImperativeHandle:Ws,useInsertionEffect:Am,useLayoutEffect:Pm,useMemo:Im,useReducer:wn,useRef:Gy,useState:function(){return wn(Vs)},useDebugValue:ac,useDeferredValue:function(S){var E=wn(Vs),$=E[0],q=E[1];return Ld(function(){var Q=Ma.transition;Ma.transition={};try{q(S)}finally{Ma.transition=Q}},[S]),$},useTransition:function(){var S=wn(Vs)[0],E=Us().memoizedState;return[S,E]},useMutableSource:Nc,useSyncExternalStore:Rd,useId:Rm,unstable_isNewReconciler:!1},Hs={readContext:Wa,useCallback:Ff,useContext:Wa,useEffect:Ld,useImperativeHandle:Ws,useInsertionEffect:Am,useLayoutEffect:Pm,useMemo:Im,useReducer:Id,useRef:Gy,useState:function(){return Id(Vs)},useDebugValue:ac,useDeferredValue:function(S){var E=Id(Vs),$=E[0],q=E[1];return Ld(function(){var Q=Ma.transition;Ma.transition={};try{q(S)}finally{Ma.transition=Q}},[S]),$},useTransition:function(){var S=Id(Vs)[0],E=Us().memoizedState;return[S,E]},useMutableSource:Nc,useSyncExternalStore:Rd,useId:Rm,unstable_isNewReconciler:!1};function Bf(S,E){try{var $="",q=E;do $+=vm(q),q=q.return;while(q);var Q=$}catch(ue){Q=`
Error generating stack: `+ue.message+`
`+ue.stack}return{value:S,source:E,stack:Q}}function Nn(S,E){try{console.error(E.value)}catch($){setTimeout(function(){throw $})}}var nr=typeof WeakMap=="function"?WeakMap:Map;function $f(S,E,$){$=Ml(-1,$),$.tag=3,$.payload={element:null};var q=E.value;return $.callback=function(){tv||(tv=!0,Y1=q),Nn(S,E)},$}function Lm(S,E,$){$=Ml(-1,$),$.tag=3;var q=S.type.getDerivedStateFromError;if(typeof q=="function"){var Q=E.value;$.payload=function(){return q(Q)},$.callback=function(){Nn(S,E)}}var ue=S.stateNode;return ue!==null&&typeof ue.componentDidCatch=="function"&&($.callback=function(){Nn(S,E),typeof q!="function"&&(zu===null?zu=new Set([this]):zu.add(this));var We=E.stack;this.componentDidCatch(E.value,{componentStack:We!==null?We:""})}),$}function Dm(S,E,$){var q=S.pingCache;if(q===null){q=S.pingCache=new nr;var Q=new Set;q.set(E,Q)}else Q=q.get(E),Q===void 0&&(Q=new Set,q.set(E,Q));Q.has($)||(Q.add($),S=uL.bind(null,S,E,$),E.then(S,S))}function so(S){do{var E;if((E=S.tag===13)&&(E=S.memoizedState,E=E!==null?E.dehydrated!==null:!0),E)return S;S=S.return}while(S!==null);return null}function Nm(S,E,$,q,Q){return S.mode&1?(S.flags|=65536,S.lanes=Q,S):(S===E?S.flags|=65536:(S.flags|=128,$.flags|=131072,$.flags&=-52805,$.tag===1&&($.alternate===null?$.tag=17:(E=Ml(-1,1),E.tag=2,ba($,E))),$.lanes|=1),S)}function go(S){S.flags|=4}function Xy(S,E){if(S!==null&&S.child===E.child)return!0;if(E.flags&16)return!1;for(S=E.child;S!==null;){if(S.flags&12854||S.subtreeFlags&12854)return!1;S=S.sibling}return!0}var Cl,Ti,Ci,zc;if(Qe)Cl=function(S,E){for(var $=E.child;$!==null;){if($.tag===5||$.tag===6)Ue(S,$.stateNode);else if($.tag!==4&&$.child!==null){$.child.return=$,$=$.child;continue}if($===E)break;for(;$.sibling===null;){if($.return===null||$.return===E)return;$=$.return}$.sibling.return=$.return,$=$.sibling}},Ti=function(){},Ci=function(S,E,$,q,Q){if(S=S.memoizedProps,S!==q){var ue=E.stateNode,We=Bs(Fs.current);$=Be(ue,$,S,q,Q,We),(E.updateQueue=$)&&go(E)}},zc=function(S,E,$,q){$!==q&&go(E)};else if(ge){Cl=function(S,E,$,q){for(var Q=E.child;Q!==null;){if(Q.tag===5){var ue=Q.stateNode;$&&q&&(ue=Pe(ue,Q.type,Q.memoizedProps,Q)),Ue(S,ue)}else if(Q.tag===6)ue=Q.stateNode,$&&q&&(ue=Ne(ue,Q.memoizedProps,Q)),Ue(S,ue);else if(Q.tag!==4){if(Q.tag===22&&Q.memoizedState!==null)ue=Q.child,ue!==null&&(ue.return=Q),Cl(S,Q,!0,!0);else if(Q.child!==null){Q.child.return=Q,Q=Q.child;continue}}if(Q===E)break;for(;Q.sibling===null;){if(Q.return===null||Q.return===E)return;Q=Q.return}Q.sibling.return=Q.return,Q=Q.sibling}};var jf=function(S,E,$,q){for(var Q=E.child;Q!==null;){if(Q.tag===5){var ue=Q.stateNode;$&&q&&(ue=Pe(ue,Q.type,Q.memoizedProps,Q)),oe(S,ue)}else if(Q.tag===6)ue=Q.stateNode,$&&q&&(ue=Ne(ue,Q.memoizedProps,Q)),oe(S,ue);else if(Q.tag!==4){if(Q.tag===22&&Q.memoizedState!==null)ue=Q.child,ue!==null&&(ue.return=Q),jf(S,Q,!0,!0);else if(Q.child!==null){Q.child.return=Q,Q=Q.child;continue}}if(Q===E)break;for(;Q.sibling===null;){if(Q.return===null||Q.return===E)return;Q=Q.return}Q.sibling.return=Q.return,Q=Q.sibling}};Ti=function(S,E){var $=E.stateNode;if(!Xy(S,E)){S=$.containerInfo;var q=we(S);jf(q,E,!1,!1),$.pendingChildren=q,go(E),pe(S,q)}},Ci=function(S,E,$,q,Q){var ue=S.stateNode,We=S.memoizedProps;if((S=Xy(S,E))&&We===q)E.stateNode=ue;else{var _t=E.stateNode,Vt=Bs(Fs.current),yn=null;We!==q&&(yn=Be(_t,$,We,q,Q,Vt)),S&&yn===null?E.stateNode=ue:(ue=Et(ue,yn,$,We,q,E,S,_t),rt(ue,$,q,Q,Vt)&&go(E),E.stateNode=ue,S?go(E):Cl(ue,E,!1,!1))}},zc=function(S,E,$,q){$!==q?(S=Bs(sc.current),$=Bs(Fs.current),E.stateNode=ct(q,S,$,E),go(E)):E.stateNode=S.stateNode}}else Ti=function(){},Ci=function(){},zc=function(){};function Fc(S,E){if(!pi)switch(S.tailMode){case"hidden":E=S.tail;for(var $=null;E!==null;)E.alternate!==null&&($=E),E=E.sibling;$===null?S.tail=null:$.sibling=null;break;case"collapsed":$=S.tail;for(var q=null;$!==null;)$.alternate!==null&&(q=$),$=$.sibling;q===null?E||S.tail===null?S.tail=null:S.tail.sibling=null:q.sibling=null}}function ao(S){var E=S.alternate!==null&&S.alternate.child===S.child,$=0,q=0;if(E)for(var Q=S.child;Q!==null;)$|=Q.lanes|Q.childLanes,q|=Q.subtreeFlags&14680064,q|=Q.flags&14680064,Q.return=S,Q=Q.sibling;else for(Q=S.child;Q!==null;)$|=Q.lanes|Q.childLanes,q|=Q.subtreeFlags,q|=Q.flags,Q.return=S,Q=Q.sibling;return S.subtreeFlags|=q,S.childLanes=$,E}function Ky(S,E,$){var q=E.pendingProps;switch(Hh(E),E.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ao(E),null;case 1:return hr(E.type)&&Si(),ao(E),null;case 3:return q=E.stateNode,Ad(),Kn(Li),Kn(tr),$s(),q.pendingContext&&(q.context=q.pendingContext,q.pendingContext=null),(S===null||S.child===null)&&(Nf(E)?go(E):S===null||S.memoizedState.isDehydrated&&!(E.flags&256)||(E.flags|=1024,wa!==null&&(iv(wa),wa=null))),Ti(S,E),ao(E),null;case 5:Mm(E),$=Bs(sc.current);var Q=E.type;if(S!==null&&E.stateNode!=null)Ci(S,E,Q,q,$),S.ref!==E.ref&&(E.flags|=512,E.flags|=2097152);else{if(!q){if(E.stateNode===null)throw Error(a(166));return ao(E),null}if(S=Bs(Fs.current),Nf(E)){if(!et)throw Error(a(175));S=$n(E.stateNode,E.type,E.memoizedProps,$,S,E,!Gh),E.updateQueue=S,S!==null&&go(E)}else{var ue=ze(Q,q,$,S,E);Cl(ue,E,!1,!1),E.stateNode=ue,rt(ue,Q,q,$,S)&&go(E)}E.ref!==null&&(E.flags|=512,E.flags|=2097152)}return ao(E),null;case 6:if(S&&E.stateNode!=null)zc(S,E,S.memoizedProps,q);else{if(typeof q!="string"&&E.stateNode===null)throw Error(a(166));if(S=Bs(sc.current),$=Bs(Fs.current),Nf(E)){if(!et)throw Error(a(176));if(S=E.stateNode,q=E.memoizedProps,($=sr(S,q,E,!Gh))&&(Q=as,Q!==null))switch(ue=(Q.mode&1)!==0,Q.tag){case 3:Cn(Q.stateNode.containerInfo,S,q,ue);break;case 5:Xn(Q.type,Q.memoizedProps,Q.stateNode,S,q,ue)}$&&go(E)}else E.stateNode=ct(q,S,$,E)}return ao(E),null;case 13:if(Kn(Wi),q=E.memoizedState,pi&&ls!==null&&E.mode&1&&!(E.flags&128)){for(S=ls;S;)S=$t(S);return oc(),E.flags|=98560,E}if(q!==null&&q.dehydrated!==null){if(q=Nf(E),S===null){if(!q)throw Error(a(318));if(!et)throw Error(a(344));if(S=E.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(a(317));$r(S,E)}else oc(),!(E.flags&128)&&(E.memoizedState=null),E.flags|=4;return ao(E),null}return wa!==null&&(iv(wa),wa=null),E.flags&128?(E.lanes=$,E):(q=q!==null,$=!1,S===null?Nf(E):$=S.memoizedState!==null,q&&!$&&(E.child.flags|=8192,E.mode&1&&(S===null||Wi.current&1?Zo===0&&(Zo=3):J1())),E.updateQueue!==null&&(E.flags|=4),ao(E),null);case 4:return Ad(),Ti(S,E),S===null&&Tt(E.stateNode.containerInfo),ao(E),null;case 10:return Dy(E.type._context),ao(E),null;case 17:return hr(E.type)&&Si(),ao(E),null;case 19:if(Kn(Wi),Q=E.memoizedState,Q===null)return ao(E),null;if(q=(E.flags&128)!==0,ue=Q.rendering,ue===null)if(q)Fc(Q,!1);else{if(Zo!==0||S!==null&&S.flags&128)for(S=E.child;S!==null;){if(ue=Sa(S),ue!==null){for(E.flags|=128,Fc(Q,!1),S=ue.updateQueue,S!==null&&(E.updateQueue=S,E.flags|=4),E.subtreeFlags=0,S=$,q=E.child;q!==null;)$=q,Q=S,$.flags&=14680066,ue=$.alternate,ue===null?($.childLanes=0,$.lanes=Q,$.child=null,$.subtreeFlags=0,$.memoizedProps=null,$.memoizedState=null,$.updateQueue=null,$.dependencies=null,$.stateNode=null):($.childLanes=ue.childLanes,$.lanes=ue.lanes,$.child=ue.child,$.subtreeFlags=0,$.deletions=null,$.memoizedProps=ue.memoizedProps,$.memoizedState=ue.memoizedState,$.updateQueue=ue.updateQueue,$.type=ue.type,Q=ue.dependencies,$.dependencies=Q===null?null:{lanes:Q.lanes,firstContext:Q.firstContext}),q=q.sibling;return Dn(Wi,Wi.current&1|2),E.child}S=S.sibling}Q.tail!==null&&Ui()>rx&&(E.flags|=128,q=!0,Fc(Q,!1),E.lanes=4194304)}else{if(!q)if(S=Sa(ue),S!==null){if(E.flags|=128,q=!0,S=S.updateQueue,S!==null&&(E.updateQueue=S,E.flags|=4),Fc(Q,!0),Q.tail===null&&Q.tailMode==="hidden"&&!ue.alternate&&!pi)return ao(E),null}else 2*Ui()-Q.renderingStartTime>rx&&$!==1073741824&&(E.flags|=128,q=!0,Fc(Q,!1),E.lanes=4194304);Q.isBackwards?(ue.sibling=E.child,E.child=ue):(S=Q.last,S!==null?S.sibling=ue:E.child=ue,Q.last=ue)}return Q.tail!==null?(E=Q.tail,Q.rendering=E,Q.tail=E.sibling,Q.renderingStartTime=Ui(),E.sibling=null,S=Wi.current,Dn(Wi,q?S&1|2:S&1),E):(ao(E),null);case 22:case 23:return X1(),q=E.memoizedState!==null,S!==null&&S.memoizedState!==null!==q&&(E.flags|=8192),q&&E.mode&1?vo&1073741824&&(ao(E),Qe&&E.subtreeFlags&6&&(E.flags|=8192)):ao(E),null;case 24:return null;case 25:return null}throw Error(a(156,E.tag))}var Zy=s.ReactCurrentOwner,Yo=!1;function cs(S,E,$,q){E.child=S===null?Cd(E,null,$,q):zo(E,S.child,$,q)}function zm(S,E,$,q,Q){$=$.render;var ue=E.ref;return kf(E,Q),q=Xh(S,E,$,q,ue,Q),$=Em(),S!==null&&!Yo?(E.updateQueue=S.updateQueue,E.flags&=-2053,S.lanes&=~Q,Mt(S,E,Q)):(pi&&$&&Lf(E),E.flags|=1,cs(S,E,q,Q),E.child)}function Hr(S,E,$,q,Q){if(S===null){var ue=$.type;return typeof ue=="function"&&!nw(ue)&&ue.defaultProps===void 0&&$.compare===null&&$.defaultProps===void 0?(E.tag=15,E.type=ue,L(S,E,ue,q,Q)):(S=ax($.type,null,q,E,E.mode,Q),S.ref=E.ref,S.return=E,E.child=S)}if(ue=S.child,!(S.lanes&Q)){var We=ue.memoizedProps;if($=$.compare,$=$!==null?$:Af,$(We,q)&&S.ref===E.ref)return Mt(S,E,Q)}return E.flags|=1,S=Jf(ue,q),S.ref=E.ref,S.return=E,E.child=S}function L(S,E,$,q,Q){if(S!==null&&Af(S.memoizedProps,q)&&S.ref===E.ref)if(Yo=!1,(S.lanes&Q)!==0)S.flags&131072&&(Yo=!0);else return E.lanes=S.lanes,Mt(S,E,Q);return A(S,E,$,q,Q)}function d(S,E,$){var q=E.pendingProps,Q=q.children,ue=S!==null?S.memoizedState:null;if(q.mode==="hidden")if(!(E.mode&1))E.memoizedState={baseLanes:0,cachePool:null},Dn(Bm,vo),vo|=$;else if($&1073741824)E.memoizedState={baseLanes:0,cachePool:null},q=ue!==null?ue.baseLanes:$,Dn(Bm,vo),vo|=q;else return S=ue!==null?ue.baseLanes|$:$,E.lanes=E.childLanes=1073741824,E.memoizedState={baseLanes:S,cachePool:null},E.updateQueue=null,Dn(Bm,vo),vo|=S,null;else ue!==null?(q=ue.baseLanes|$,E.memoizedState=null):q=$,Dn(Bm,vo),vo|=q;return cs(S,E,Q,$),E.child}function y(S,E){var $=E.ref;(S===null&&$!==null||S!==null&&S.ref!==$)&&(E.flags|=512,E.flags|=2097152)}function A(S,E,$,q,Q){var ue=hr($)?Ns:tr.current;return ue=Ur(E,ue),kf(E,Q),$=Xh(S,E,$,q,ue,Q),q=Em(),S!==null&&!Yo?(E.updateQueue=S.updateQueue,E.flags&=-2053,S.lanes&=~Q,Mt(S,E,Q)):(pi&&q&&Lf(E),E.flags|=1,cs(S,E,$,Q),E.child)}function k(S,E,$,q,Q){if(hr($)){var ue=!0;hi(E)}else ue=!1;if(kf(E,Q),E.stateNode===null)S!==null&&(S.alternate=null,E.alternate=null,E.flags|=2),bm(E,$,q),Oi(E,$,q,Q),q=!0;else if(S===null){var We=E.stateNode,_t=E.memoizedProps;We.props=_t;var Vt=We.context,yn=$.contextType;typeof yn=="object"&&yn!==null?yn=Wa(yn):(yn=hr($)?Ns:tr.current,yn=Ur(E,yn));var jn=$.getDerivedStateFromProps,Cr=typeof jn=="function"||typeof We.getSnapshotBeforeUpdate=="function";Cr||typeof We.UNSAFE_componentWillReceiveProps!="function"&&typeof We.componentWillReceiveProps!="function"||(_t!==q||Vt!==yn)&&Wr(E,We,q,yn),tc=!1;var lr=E.memoizedState;We.state=lr,Rf(E,q,We,Q),Vt=E.memoizedState,_t!==q||lr!==Vt||Li.current||tc?(typeof jn=="function"&&(nc(E,$,jn,q),Vt=E.memoizedState),(_t=tc||By(E,$,_t,q,lr,Vt,yn))?(Cr||typeof We.UNSAFE_componentWillMount!="function"&&typeof We.componentWillMount!="function"||(typeof We.componentWillMount=="function"&&We.componentWillMount(),typeof We.UNSAFE_componentWillMount=="function"&&We.UNSAFE_componentWillMount()),typeof We.componentDidMount=="function"&&(E.flags|=4194308)):(typeof We.componentDidMount=="function"&&(E.flags|=4194308),E.memoizedProps=q,E.memoizedState=Vt),We.props=q,We.state=Vt,We.context=yn,q=_t):(typeof We.componentDidMount=="function"&&(E.flags|=4194308),q=!1)}else{We=E.stateNode,_m(S,E),_t=E.memoizedProps,yn=E.type===E.elementType?_t:_a(E.type,_t),We.props=yn,Cr=E.pendingProps,lr=We.context,Vt=$.contextType,typeof Vt=="object"&&Vt!==null?Vt=Wa(Vt):(Vt=hr($)?Ns:tr.current,Vt=Ur(E,Vt));var Pi=$.getDerivedStateFromProps;(jn=typeof Pi=="function"||typeof We.getSnapshotBeforeUpdate=="function")||typeof We.UNSAFE_componentWillReceiveProps!="function"&&typeof We.componentWillReceiveProps!="function"||(_t!==Cr||lr!==Vt)&&Wr(E,We,q,Vt),tc=!1,lr=E.memoizedState,We.state=lr,Rf(E,q,We,Q);var rr=E.memoizedState;_t!==Cr||lr!==rr||Li.current||tc?(typeof Pi=="function"&&(nc(E,$,Pi,q),rr=E.memoizedState),(yn=tc||By(E,$,yn,q,lr,rr,Vt)||!1)?(jn||typeof We.UNSAFE_componentWillUpdate!="function"&&typeof We.componentWillUpdate!="function"||(typeof We.componentWillUpdate=="function"&&We.componentWillUpdate(q,rr,Vt),typeof We.UNSAFE_componentWillUpdate=="function"&&We.UNSAFE_componentWillUpdate(q,rr,Vt)),typeof We.componentDidUpdate=="function"&&(E.flags|=4),typeof We.getSnapshotBeforeUpdate=="function"&&(E.flags|=1024)):(typeof We.componentDidUpdate!="function"||_t===S.memoizedProps&&lr===S.memoizedState||(E.flags|=4),typeof We.getSnapshotBeforeUpdate!="function"||_t===S.memoizedProps&&lr===S.memoizedState||(E.flags|=1024),E.memoizedProps=q,E.memoizedState=rr),We.props=q,We.state=rr,We.context=Vt,q=yn):(typeof We.componentDidUpdate!="function"||_t===S.memoizedProps&&lr===S.memoizedState||(E.flags|=4),typeof We.getSnapshotBeforeUpdate!="function"||_t===S.memoizedProps&&lr===S.memoizedState||(E.flags|=1024),q=!1)}return D(S,E,$,q,ue,Q)}function D(S,E,$,q,Q,ue){y(S,E);var We=(E.flags&128)!==0;if(!q&&!We)return Q&&Eu(E,$,!1),Mt(S,E,ue);q=E.stateNode,Zy.current=E;var _t=We&&typeof $.getDerivedStateFromError!="function"?null:q.render();return E.flags|=1,S!==null&&We?(E.child=zo(E,S.child,null,ue),E.child=zo(E,null,_t,ue)):cs(S,E,_t,ue),E.memoizedState=q.state,Q&&Eu(E,$,!0),E.child}function H(S){var E=S.stateNode;E.pendingContext?Zr(S,E.pendingContext,E.pendingContext!==E.context):E.context&&Zr(S,E.context,!1),Sm(S,E.containerInfo)}function G(S,E,$,q,Q){return oc(),zf(Q),E.flags|=256,cs(S,E,$,q),E.child}var K={dehydrated:null,treeContext:null,retryLane:0};function ee(S){return{baseLanes:S,cachePool:null}}function re(S,E,$){var q=E.pendingProps,Q=Wi.current,ue=!1,We=(E.flags&128)!==0,_t;if((_t=We)||(_t=S!==null&&S.memoizedState===null?!1:(Q&2)!==0),_t?(ue=!0,E.flags&=-129):(S===null||S.memoizedState!==null)&&(Q|=1),Dn(Wi,Q&1),S===null)return qh(E),S=E.memoizedState,S!==null&&(S=S.dehydrated,S!==null)?(E.mode&1?Nt(S)?E.lanes=8:E.lanes=1073741824:E.lanes=1,null):(Q=q.children,S=q.fallback,ue?(q=E.mode,ue=E.child,Q={mode:"hidden",children:Q},!(q&1)&&ue!==null?(ue.childLanes=0,ue.pendingProps=Q):ue=lx(Q,q,0,null),S=tp(S,q,$,null),ue.return=E,S.return=E,ue.sibling=S,E.child=ue,E.child.memoizedState=ee($),E.memoizedState=K,S):se(E,Q));if(Q=S.memoizedState,Q!==null){if(_t=Q.dehydrated,_t!==null){if(We)return E.flags&256?(E.flags&=-257,Re(S,E,$,Error(a(422)))):E.memoizedState!==null?(E.child=S.child,E.flags|=128,null):(ue=q.fallback,Q=E.mode,q=lx({mode:"visible",children:q.children},Q,0,null),ue=tp(ue,Q,$,null),ue.flags|=2,q.return=E,ue.return=E,q.sibling=ue,E.child=q,E.mode&1&&zo(E,S.child,null,$),E.child.memoizedState=ee($),E.memoizedState=K,ue);if(!(E.mode&1))E=Re(S,E,$,null);else if(Nt(_t))E=Re(S,E,$,Error(a(419)));else if(q=($&S.childLanes)!==0,Yo||q){if(q=ei,q!==null){switch($&-$){case 4:ue=2;break;case 16:ue=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ue=32;break;case 536870912:ue=268435456;break;default:ue=0}q=ue&(q.suspendedLanes|$)?0:ue,q!==0&&q!==Q.retryLane&&(Q.retryLane=q,Al(S,q,-1))}J1(),E=Re(S,E,$,Error(a(421)))}else tt(_t)?(E.flags|=128,E.child=S.child,E=ew.bind(null,S),Ut(_t,E),E=null):($=Q.treeContext,et&&(ls=En(_t),as=E,pi=!0,wa=null,Gh=!1,$!==null&&(jr[Cs++]=El,jr[Cs++]=Ha,jr[Cs++]=Iu,El=$.id,Ha=$.overflow,Iu=E)),E=se(E,E.pendingProps.children),E.flags|=4096);return E}return ue?(q=Le(S,E,q.children,q.fallback,$),ue=E.child,Q=S.child.memoizedState,ue.memoizedState=Q===null?ee($):{baseLanes:Q.baseLanes|$,cachePool:null},ue.childLanes=S.childLanes&~$,E.memoizedState=K,q):($=be(S,E,q.children,$),E.memoizedState=null,$)}return ue?(q=Le(S,E,q.children,q.fallback,$),ue=E.child,Q=S.child.memoizedState,ue.memoizedState=Q===null?ee($):{baseLanes:Q.baseLanes|$,cachePool:null},ue.childLanes=S.childLanes&~$,E.memoizedState=K,q):($=be(S,E,q.children,$),E.memoizedState=null,$)}function se(S,E){return E=lx({mode:"visible",children:E},S.mode,0,null),E.return=S,S.child=E}function be(S,E,$,q){var Q=S.child;return S=Q.sibling,$=Jf(Q,{mode:"visible",children:$}),!(E.mode&1)&&($.lanes=q),$.return=E,$.sibling=null,S!==null&&(q=E.deletions,q===null?(E.deletions=[S],E.flags|=16):q.push(S)),E.child=$}function Le(S,E,$,q,Q){var ue=E.mode;S=S.child;var We=S.sibling,_t={mode:"hidden",children:$};return!(ue&1)&&E.child!==S?($=E.child,$.childLanes=0,$.pendingProps=_t,E.deletions=null):($=Jf(S,_t),$.subtreeFlags=S.subtreeFlags&14680064),We!==null?q=Jf(We,q):(q=tp(q,ue,Q,null),q.flags|=2),q.return=E,$.return=E,$.sibling=q,E.child=$,q}function Re(S,E,$,q){return q!==null&&zf(q),zo(E,S.child,null,$),S=se(E,E.pendingProps.children),S.flags|=2,E.memoizedState=null,S}function $e(S,E,$){S.lanes|=E;var q=S.alternate;q!==null&&(q.lanes|=E),Ny(S.return,E,$)}function ke(S,E,$,q,Q){var ue=S.memoizedState;ue===null?S.memoizedState={isBackwards:E,rendering:null,renderingStartTime:0,last:q,tail:$,tailMode:Q}:(ue.isBackwards=E,ue.rendering=null,ue.renderingStartTime=0,ue.last=q,ue.tail=$,ue.tailMode=Q)}function at(S,E,$){var q=E.pendingProps,Q=q.revealOrder,ue=q.tail;if(cs(S,E,q.children,$),q=Wi.current,q&2)q=q&1|2,E.flags|=128;else{if(S!==null&&S.flags&128)e:for(S=E.child;S!==null;){if(S.tag===13)S.memoizedState!==null&&$e(S,$,E);else if(S.tag===19)$e(S,$,E);else if(S.child!==null){S.child.return=S,S=S.child;continue}if(S===E)break e;for(;S.sibling===null;){if(S.return===null||S.return===E)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}q&=1}if(Dn(Wi,q),!(E.mode&1))E.memoizedState=null;else switch(Q){case"forwards":for($=E.child,Q=null;$!==null;)S=$.alternate,S!==null&&Sa(S)===null&&(Q=$),$=$.sibling;$=Q,$===null?(Q=E.child,E.child=null):(Q=$.sibling,$.sibling=null),ke(E,!1,Q,$,ue);break;case"backwards":for($=null,Q=E.child,E.child=null;Q!==null;){if(S=Q.alternate,S!==null&&Sa(S)===null){E.child=Q;break}S=Q.sibling,Q.sibling=$,$=Q,Q=S}ke(E,!0,$,null,ue);break;case"together":ke(E,!1,null,null,void 0);break;default:E.memoizedState=null}return E.child}function Mt(S,E,$){if(S!==null&&(E.dependencies=S.dependencies),Wf|=E.lanes,!($&E.childLanes))return null;if(S!==null&&E.child!==S.child)throw Error(a(153));if(E.child!==null){for(S=E.child,$=Jf(S,S.pendingProps),E.child=$,$.return=E;S.sibling!==null;)S=S.sibling,$=$.sibling=Jf(S,S.pendingProps),$.return=E;$.sibling=null}return E.child}function Ge(S,E,$){switch(E.tag){case 3:H(E),oc();break;case 5:Uy(E);break;case 1:hr(E.type)&&hi(E);break;case 4:Sm(E,E.stateNode.containerInfo);break;case 10:Q0(E,E.type._context,E.memoizedProps.value);break;case 13:var q=E.memoizedState;if(q!==null)return q.dehydrated!==null?(Dn(Wi,Wi.current&1),E.flags|=128,null):$&E.child.childLanes?re(S,E,$):(Dn(Wi,Wi.current&1),S=Mt(S,E,$),S!==null?S.sibling:null);Dn(Wi,Wi.current&1);break;case 19:if(q=($&E.childLanes)!==0,S.flags&128){if(q)return at(S,E,$);E.flags|=128}var Q=E.memoizedState;if(Q!==null&&(Q.rendering=null,Q.tail=null,Q.lastEffect=null),Dn(Wi,Wi.current),q)break;return null;case 22:case 23:return E.lanes=0,d(S,E,$)}return Mt(S,E,$)}function ft(S,E){switch(Hh(E),E.tag){case 1:return hr(E.type)&&Si(),S=E.flags,S&65536?(E.flags=S&-65537|128,E):null;case 3:return Ad(),Kn(Li),Kn(tr),$s(),S=E.flags,S&65536&&!(S&128)?(E.flags=S&-65537|128,E):null;case 5:return Mm(E),null;case 13:if(Kn(Wi),S=E.memoizedState,S!==null&&S.dehydrated!==null){if(E.alternate===null)throw Error(a(340));oc()}return S=E.flags,S&65536?(E.flags=S&-65537|128,E):null;case 19:return Kn(Wi),null;case 4:return Ad(),null;case 10:return Dy(E.type._context),null;case 22:case 23:return X1(),null;case 24:return null;default:return null}}var At=!1,Pt=!1,qt=typeof WeakSet=="function"?WeakSet:Set,wt=null;function Xt(S,E){var $=S.ref;if($!==null)if(typeof $=="function")try{$(null)}catch(q){Ka(S,E,q)}else $.current=null}function ln(S,E,$){try{$()}catch(q){Ka(S,E,q)}}var In=!1;function Pr(S,E){for(he(S.containerInfo),wt=E;wt!==null;)if(S=wt,E=S.child,(S.subtreeFlags&1028)!==0&&E!==null)E.return=S,wt=E;else for(;wt!==null;){S=wt;try{var $=S.alternate;if(S.flags&1024)switch(S.tag){case 0:case 11:case 15:break;case 1:if($!==null){var q=$.memoizedProps,Q=$.memoizedState,ue=S.stateNode,We=ue.getSnapshotBeforeUpdate(S.elementType===S.type?q:_a(S.type,q),Q);ue.__reactInternalSnapshotBeforeUpdate=We}break;case 3:Qe&&It(S.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(_t){Ka(S,S.return,_t)}if(E=S.sibling,E!==null){E.return=S.return,wt=E;break}wt=S.return}return $=In,In=!1,$}function dn(S,E,$){var q=E.updateQueue;if(q=q!==null?q.lastEffect:null,q!==null){var Q=q=q.next;do{if((Q.tag&S)===S){var ue=Q.destroy;Q.destroy=void 0,ue!==void 0&&ln(E,$,ue)}Q=Q.next}while(Q!==q)}}function Zn(S,E){if(E=E.updateQueue,E=E!==null?E.lastEffect:null,E!==null){var $=E=E.next;do{if(($.tag&S)===S){var q=$.create;$.destroy=q()}$=$.next}while($!==E)}}function Rn(S){var E=S.ref;if(E!==null){var $=S.stateNode;switch(S.tag){case 5:S=fe($);break;default:S=$}typeof E=="function"?E(S):E.current=S}}function Qr(S,E,$){if(va&&typeof va.onCommitFiberUnmount=="function")try{va.onCommitFiberUnmount(Cu,E)}catch{}switch(E.tag){case 0:case 11:case 14:case 15:if(S=E.updateQueue,S!==null&&(S=S.lastEffect,S!==null)){var q=S=S.next;do{var Q=q,ue=Q.destroy;Q=Q.tag,ue!==void 0&&(Q&2||Q&4)&&ln(E,$,ue),q=q.next}while(q!==S)}break;case 1:if(Xt(E,$),S=E.stateNode,typeof S.componentWillUnmount=="function")try{S.props=E.memoizedProps,S.state=E.memoizedState,S.componentWillUnmount()}catch(We){Ka(E,$,We)}break;case 5:Xt(E,$);break;case 4:Qe?lo(S,E,$):ge&&ge&&(E=E.stateNode.containerInfo,$=we(E),Te(E,$))}}function Er(S,E,$){for(var q=E;;)if(Qr(S,q,$),q.child===null||Qe&&q.tag===4){if(q===E)break;for(;q.sibling===null;){if(q.return===null||q.return===E)return;q=q.return}q.sibling.return=q.return,q=q.sibling}else q.child.return=q,q=q.child}function vr(S){var E=S.alternate;E!==null&&(S.alternate=null,vr(E)),S.child=null,S.deletions=null,S.sibling=null,S.tag===5&&(E=S.stateNode,E!==null&&Bt(E)),S.stateNode=null,S.return=null,S.dependencies=null,S.memoizedProps=null,S.memoizedState=null,S.pendingProps=null,S.stateNode=null,S.updateQueue=null}function Tr(S){return S.tag===5||S.tag===3||S.tag===4}function ro(S){e:for(;;){for(;S.sibling===null;){if(S.return===null||Tr(S.return))return null;S=S.return}for(S.sibling.return=S.return,S=S.sibling;S.tag!==5&&S.tag!==6&&S.tag!==18;){if(S.flags&2||S.child===null||S.tag===4)continue e;S.child.return=S,S=S.child}if(!(S.flags&2))return S.stateNode}}function mi(S){if(Qe){e:{for(var E=S.return;E!==null;){if(Tr(E))break e;E=E.return}throw Error(a(160))}var $=E;switch($.tag){case 5:E=$.stateNode,$.flags&32&&(Ve(E),$.flags&=-33),$=ro(S),yo(S,$,E);break;case 3:case 4:E=$.stateNode.containerInfo,$=ro(S),Bo(S,$,E);break;default:throw Error(a(161))}}}function Bo(S,E,$){var q=S.tag;if(q===5||q===6)S=S.stateNode,E?an($,S,E):Rt($,S);else if(q!==4&&(S=S.child,S!==null))for(Bo(S,E,$),S=S.sibling;S!==null;)Bo(S,E,$),S=S.sibling}function yo(S,E,$){var q=S.tag;if(q===5||q===6)S=S.stateNode,E?un($,S,E):cn($,S);else if(q!==4&&(S=S.child,S!==null))for(yo(S,E,$),S=S.sibling;S!==null;)yo(S,E,$),S=S.sibling}function lo(S,E,$){for(var q=E,Q=!1,ue,We;;){if(!Q){Q=q.return;e:for(;;){if(Q===null)throw Error(a(160));switch(ue=Q.stateNode,Q.tag){case 5:We=!1;break e;case 3:ue=ue.containerInfo,We=!0;break e;case 4:ue=ue.containerInfo,We=!0;break e}Q=Q.return}Q=!0}if(q.tag===5||q.tag===6)Er(S,q,$),We?Ie(ue,q.stateNode):Ot(ue,q.stateNode);else if(q.tag===18)We?vt(ue,q.stateNode):yt(ue,q.stateNode);else if(q.tag===4){if(q.child!==null){ue=q.stateNode.containerInfo,We=!0,q.child.return=q,q=q.child;continue}}else if(Qr(S,q,$),q.child!==null){q.child.return=q,q=q.child;continue}if(q===E)break;for(;q.sibling===null;){if(q.return===null||q.return===E)return;q=q.return,q.tag===4&&(Q=!1)}q.sibling.return=q.return,q=q.sibling}}function Gs(S,E){if(Qe){switch(E.tag){case 0:case 11:case 14:case 15:dn(3,E,E.return),Zn(3,E),dn(5,E,E.return);return;case 1:return;case 5:var $=E.stateNode;if($!=null){var q=E.memoizedProps;S=S!==null?S.memoizedProps:q;var Q=E.type,ue=E.updateQueue;E.updateQueue=null,ue!==null&&mt($,ue,Q,S,q,E)}return;case 6:if(E.stateNode===null)throw Error(a(162));$=E.memoizedProps,nn(E.stateNode,S!==null?S.memoizedProps:$,$);return;case 3:et&&S!==null&&S.memoizedState.isDehydrated&&ut(E.stateNode.containerInfo);return;case 12:return;case 13:li(E);return;case 19:li(E);return;case 17:return}throw Error(a(163))}switch(E.tag){case 0:case 11:case 14:case 15:dn(3,E,E.return),Zn(3,E),dn(5,E,E.return);return;case 12:return;case 13:li(E);return;case 19:li(E);return;case 3:et&&S!==null&&S.memoizedState.isDehydrated&&ut(E.stateNode.containerInfo);break;case 22:case 23:return}e:if(ge){switch(E.tag){case 1:case 5:case 6:break e;case 3:case 4:E=E.stateNode,Te(E.containerInfo,E.pendingChildren);break e}throw Error(a(163))}}function li(S){var E=S.updateQueue;if(E!==null){S.updateQueue=null;var $=S.stateNode;$===null&&($=S.stateNode=new qt),E.forEach(function(q){var Q=sx.bind(null,S,q);$.has(q)||($.add(q),q.then(Q,Q))})}}function lc(S,E){for(wt=E;wt!==null;){E=wt;var $=E.deletions;if($!==null)for(var q=0;q<$.length;q++){var Q=$[q];try{var ue=S;Qe?lo(ue,Q,E):Er(ue,Q,E);var We=Q.alternate;We!==null&&(We.return=null),Q.return=null}catch(or){Ka(Q,E,or)}}if($=E.child,E.subtreeFlags&12854&&$!==null)$.return=E,wt=$;else for(;wt!==null;){E=wt;try{var _t=E.flags;if(_t&32&&Qe&&Ve(E.stateNode),_t&512){var Vt=E.alternate;if(Vt!==null){var yn=Vt.ref;yn!==null&&(typeof yn=="function"?yn(null):yn.current=null)}}if(_t&8192)switch(E.tag){case 13:if(E.memoizedState!==null){var jn=E.alternate;(jn===null||jn.memoizedState===null)&&(ev=Ui())}break;case 22:var Cr=E.memoizedState!==null,lr=E.alternate,Pi=lr!==null&&lr.memoizedState!==null;if($=E,Qe){e:if(q=$,Q=Cr,ue=null,Qe)for(var rr=q;;){if(rr.tag===5){if(ue===null){ue=rr;var Xs=rr.stateNode;Q?Me(Xs):Qt(rr.stateNode,rr.memoizedProps)}}else if(rr.tag===6){if(ue===null){var Pl=rr.stateNode;Q?it(Pl):Xe(Pl,rr.memoizedProps)}}else if((rr.tag!==22&&rr.tag!==23||rr.memoizedState===null||rr===q)&&rr.child!==null){rr.child.return=rr,rr=rr.child;continue}if(rr===q)break;for(;rr.sibling===null;){if(rr.return===null||rr.return===q)break e;ue===rr&&(ue=null),rr=rr.return}ue===rr&&(ue=null),rr.sibling.return=rr.return,rr=rr.sibling}}if(Cr&&!Pi&&$.mode&1){wt=$;for(var Lt=$.child;Lt!==null;){for($=wt=Lt;wt!==null;){q=wt;var St=q.child;switch(q.tag){case 0:case 11:case 14:case 15:dn(4,q,q.return);break;case 1:Xt(q,q.return);var Ft=q.stateNode;if(typeof Ft.componentWillUnmount=="function"){var On=q.return;try{Ft.props=q.memoizedProps,Ft.state=q.memoizedState,Ft.componentWillUnmount()}catch(or){Ka(q,On,or)}}break;case 5:Xt(q,q.return);break;case 22:if(q.memoizedState!==null){Dd($);continue}}St!==null?(St.return=q,wt=St):Dd($)}Lt=Lt.sibling}}}switch(_t&4102){case 2:mi(E),E.flags&=-3;break;case 6:mi(E),E.flags&=-3,Gs(E.alternate,E);break;case 4096:E.flags&=-4097;break;case 4100:E.flags&=-4097,Gs(E.alternate,E);break;case 4:Gs(E.alternate,E)}}catch(or){Ka(E,E.return,or)}if($=E.sibling,$!==null){$.return=E.return,wt=$;break}wt=E.return}}}function cc(S,E,$){wt=S,Bc(S)}function Bc(S,E,$){for(var q=(S.mode&1)!==0;wt!==null;){var Q=wt,ue=Q.child;if(Q.tag===22&&q){var We=Q.memoizedState!==null||At;if(!We){var _t=Q.alternate,Vt=_t!==null&&_t.memoizedState!==null||Pt;_t=At;var yn=Pt;if(At=We,(Pt=Vt)&&!yn)for(wt=Q;wt!==null;)We=wt,Vt=We.child,We.tag===22&&We.memoizedState!==null?us(Q):Vt!==null?(Vt.return=We,wt=Vt):us(Q);for(;ue!==null;)wt=ue,Bc(ue),ue=ue.sibling;wt=Q,At=_t,Pt=yn}Nu(S)}else Q.subtreeFlags&8772&&ue!==null?(ue.return=Q,wt=ue):Nu(S)}}function Nu(S){for(;wt!==null;){var E=wt;if(E.flags&8772){var $=E.alternate;try{if(E.flags&8772)switch(E.tag){case 0:case 11:case 15:Pt||Zn(5,E);break;case 1:var q=E.stateNode;if(E.flags&4&&!Pt)if($===null)q.componentDidMount();else{var Q=E.elementType===E.type?$.memoizedProps:_a(E.type,$.memoizedProps);q.componentDidUpdate(Q,$.memoizedState,q.__reactInternalSnapshotBeforeUpdate)}var ue=E.updateQueue;ue!==null&&ku(E,ue,q);break;case 3:var We=E.updateQueue;if(We!==null){if($=null,E.child!==null)switch(E.child.tag){case 5:$=fe(E.child.stateNode);break;case 1:$=E.child.stateNode}ku(E,We,$)}break;case 5:var _t=E.stateNode;$===null&&E.flags&4&&An(_t,E.type,E.memoizedProps,E);break;case 6:break;case 4:break;case 12:break;case 13:if(et&&E.memoizedState===null){var Vt=E.alternate;if(Vt!==null){var yn=Vt.memoizedState;if(yn!==null){var jn=yn.dehydrated;jn!==null&&bt(jn)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}Pt||E.flags&512&&Rn(E)}catch(Cr){Ka(E,E.return,Cr)}}if(E===S){wt=null;break}if($=E.sibling,$!==null){$.return=E.return,wt=$;break}wt=E.return}}function Dd(S){for(;wt!==null;){var E=wt;if(E===S){wt=null;break}var $=E.sibling;if($!==null){$.return=E.return,wt=$;break}wt=E.return}}function us(S){for(;wt!==null;){var E=wt;try{switch(E.tag){case 0:case 11:case 15:var $=E.return;try{Zn(4,E)}catch(Vt){Ka(E,$,Vt)}break;case 1:var q=E.stateNode;if(typeof q.componentDidMount=="function"){var Q=E.return;try{q.componentDidMount()}catch(Vt){Ka(E,Q,Vt)}}var ue=E.return;try{Rn(E)}catch(Vt){Ka(E,ue,Vt)}break;case 5:var We=E.return;try{Rn(E)}catch(Vt){Ka(E,We,Vt)}}}catch(Vt){Ka(E,E.return,Vt)}if(E===S){wt=null;break}var _t=E.sibling;if(_t!==null){_t.return=E.return,wt=_t;break}wt=E.return}}var Co=0,Xo=1,uc=2,Di=3,co=4;if(typeof Symbol=="function"&&Symbol.for){var Ko=Symbol.for;Co=Ko("selector.component"),Xo=Ko("selector.has_pseudo_class"),uc=Ko("selector.role"),Di=Ko("selector.test_id"),co=Ko("selector.text")}function qi(S){var E=ot(S);if(E!=null){if(typeof E.memoizedProps["data-testname"]!="string")throw Error(a(364));return E}if(S=Ce(S),S===null)throw Error(a(362));return S.stateNode.current}function $c(S,E){switch(E.$$typeof){case Co:if(S.type===E.value)return!0;break;case Xo:e:{E=E.value,S=[S,0];for(var $=0;$<S.length;){var q=S[$++],Q=S[$++],ue=E[Q];if(q.tag!==5||!dt(q)){for(;ue!=null&&$c(q,ue);)Q++,ue=E[Q];if(Q===E.length){E=!0;break e}else for(q=q.child;q!==null;)S.push(q,Q),q=q.sibling}}E=!1}return E;case uc:if(S.tag===5&&Wt(S.stateNode,E.value))return!0;break;case co:if((S.tag===5||S.tag===6)&&(S=ht(S),S!==null&&0<=S.indexOf(E.value)))return!0;break;case Di:if(S.tag===5&&(S=S.memoizedProps["data-testname"],typeof S=="string"&&S.toLowerCase()===E.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Uf(S){switch(S.$$typeof){case Co:return"<"+(B(S.value)||"Unknown")+">";case Xo:return":has("+(Uf(S)||"")+")";case uc:return'[role="'+S.value+'"]';case co:return'"'+S.value+'"';case Di:return'[data-testname="'+S.value+'"]';default:throw Error(a(365))}}function Jy(S,E){var $=[];S=[S,0];for(var q=0;q<S.length;){var Q=S[q++],ue=S[q++],We=E[ue];if(Q.tag!==5||!dt(Q)){for(;We!=null&&$c(Q,We);)ue++,We=E[ue];if(ue===E.length)$.push(Q);else for(Q=Q.child;Q!==null;)S.push(Q,ue),Q=Q.sibling}}return $}function Fm(S,E){if(!Je)throw Error(a(363));S=qi(S),S=Jy(S,E),E=[],S=Array.from(S);for(var $=0;$<S.length;){var q=S[$++];if(q.tag===5)dt(q)||E.push(q.stateNode);else for(q=q.child;q!==null;)S.push(q),q=q.sibling}return E}var q1=Math.ceil,Vf=s.ReactCurrentDispatcher,qa=s.ReactCurrentOwner,Ai=s.ReactCurrentBatchConfig,gr=0,ei=null,ci=null,$o=0,vo=0,Bm=Yr(0),Zo=0,Yi=null,Wf=0,Qy=0,Nd=0,jc=null,qs=null,ev=0,rx=1/0;function $m(){rx=Ui()+500}var tv=!1,Y1=null,zu=null,ix=!1,Fu=null,nv=0,jm=0,Hf=null,ox=-1,Gf=0;function As(){return gr&6?Ui():ox!==-1?ox:ox=Ui()}function Uc(S){return S.mode&1?gr&2&&$o!==0?$o&-$o:Ly.transition!==null?(Gf===0&&(S=Sd,Sd<<=1,!(Sd&4194240)&&(Sd=64),Gf=S),Gf):(S=Xr,S!==0?S:Ct()):1}function Al(S,E,$){if(50<jm)throw jm=0,Hf=null,Error(a(185));var q=rv(S,E);return q===null?null:(Mf(q,E,$),(!(gr&2)||q!==ei)&&(q===ei&&(!(gr&2)&&(Qy|=E),Zo===4&&dc(q,$o)),Ya(q,$),E===1&&gr===0&&!(S.mode&1)&&($m(),Ts&&xa())),q)}function rv(S,E){S.lanes|=E;var $=S.alternate;for($!==null&&($.lanes|=E),$=S,S=S.return;S!==null;)S.childLanes|=E,$=S.alternate,$!==null&&($.childLanes|=E),$=S,S=S.return;return $.tag===3?$.stateNode:null}function Ya(S,E){var $=S.callbackNode;W1(S,E);var q=Tu(S,S===ei?$o:0);if(q===0)$!==null&&Iy($),S.callbackNode=null,S.callbackPriority=0;else if(E=q&-q,S.callbackPriority!==E){if($!=null&&Iy($),E===1)S.tag===0?ym(YE.bind(null,S)):gm(YE.bind(null,S)),Gt?sn(function(){gr===0&&xa()}):pm(Ef,xa),$=null;else{switch(Vh(q)){case 1:$=Ef;break;case 4:$=Ua;break;case 16:$=Tf;break;case 536870912:$=mm;break;default:$=Tf}$=Zf($,Ys.bind(null,S))}S.callbackPriority=E,S.callbackNode=$}}function Ys(S,E){if(ox=-1,Gf=0,gr&6)throw Error(a(327));var $=S.callbackNode;if(Kf()&&S.callbackNode!==$)return null;var q=Tu(S,S===ei?$o:0);if(q===0)return null;if(q&30||q&S.expiredLanes||E)E=Um(S,q);else{E=q;var Q=gr;gr|=2;var ue=Z1();(ei!==S||$o!==E)&&($m(),Yf(S,E));do try{Q1();break}catch(_t){K1(S,_t)}while(!0);Pu(),Vf.current=ue,gr=Q,ci!==null?E=0:(ei=null,$o=0,E=Zo)}if(E!==0){if(E===2&&(Q=jh(S),Q!==0&&(q=Q,E=qf(S,Q))),E===1)throw $=Yi,Yf(S,0),dc(S,q),Ya(S,Ui()),$;if(E===6)dc(S,q);else{if(Q=S.current.alternate,!(q&30)&&!qE(Q)&&(E=Um(S,q),E===2&&(ue=jh(S),ue!==0&&(q=ue,E=qf(S,ue))),E===1))throw $=Yi,Yf(S,0),dc(S,q),Ya(S,Ui()),$;switch(S.finishedWork=Q,S.finishedLanes=q,E){case 0:case 1:throw Error(a(345));case 2:Xf(S,qs);break;case 3:if(dc(S,q),(q&130023424)===q&&(E=ev+500-Ui(),10<E)){if(Tu(S,0)!==0)break;if(Q=S.suspendedLanes,(Q&q)!==q){As(),S.pingedLanes|=S.suspendedLanes&Q;break}S.timeoutHandle=Dt(Xf.bind(null,S,qs),E);break}Xf(S,qs);break;case 4:if(dc(S,q),(q&4194240)===q)break;for(E=S.eventTimes,Q=-1;0<q;){var We=31-To(q);ue=1<<We,We=E[We],We>Q&&(Q=We),q&=~ue}if(q=Q,q=Ui()-q,q=(120>q?120:480>q?480:1080>q?1080:1920>q?1920:3e3>q?3e3:4320>q?4320:1960*q1(q/1960))-q,10<q){S.timeoutHandle=Dt(Xf.bind(null,S,qs),q);break}Xf(S,qs);break;case 5:Xf(S,qs);break;default:throw Error(a(329))}}}return Ya(S,Ui()),S.callbackNode===$?Ys.bind(null,S):null}function qf(S,E){var $=jc;return S.current.memoizedState.isDehydrated&&(Yf(S,E).flags|=256),S=Um(S,E),S!==2&&(E=qs,qs=$,E!==null&&iv(E)),S}function iv(S){qs===null?qs=S:qs.push.apply(qs,S)}function qE(S){for(var E=S;;){if(E.flags&16384){var $=E.updateQueue;if($!==null&&($=$.stores,$!==null))for(var q=0;q<$.length;q++){var Q=$[q],ue=Q.getSnapshot;Q=Q.value;try{if(!yr(ue(),Q))return!1}catch{return!1}}}if($=E.child,E.subtreeFlags&16384&&$!==null)$.return=E,E=$;else{if(E===S)break;for(;E.sibling===null;){if(E.return===null||E.return===S)return!0;E=E.return}E.sibling.return=E.return,E=E.sibling}}return!0}function dc(S,E){for(E&=~Nd,E&=~Qy,S.suspendedLanes|=E,S.pingedLanes&=~E,S=S.expirationTimes;0<E;){var $=31-To(E),q=1<<$;S[$]=-1,E&=~q}}function YE(S){if(gr&6)throw Error(a(327));Kf();var E=Tu(S,0);if(!(E&1))return Ya(S,Ui()),null;var $=Um(S,E);if(S.tag!==0&&$===2){var q=jh(S);q!==0&&(E=q,$=qf(S,q))}if($===1)throw $=Yi,Yf(S,0),dc(S,E),Ya(S,Ui()),$;if($===6)throw Error(a(345));return S.finishedWork=S.current.alternate,S.finishedLanes=E,Xf(S,qs),Ya(S,Ui()),null}function ov(S){Fu!==null&&Fu.tag===0&&!(gr&6)&&Kf();var E=gr;gr|=1;var $=Ai.transition,q=Xr;try{if(Ai.transition=null,Xr=1,S)return S()}finally{Xr=q,Ai.transition=$,gr=E,!(gr&6)&&xa()}}function X1(){vo=Bm.current,Kn(Bm)}function Yf(S,E){S.finishedWork=null,S.finishedLanes=0;var $=S.timeoutHandle;if($!==Fe&&(S.timeoutHandle=Fe,zt($)),ci!==null)for($=ci.return;$!==null;){var q=$;switch(Hh(q),q.tag){case 1:q=q.type.childContextTypes,q!=null&&Si();break;case 3:Ad(),Kn(Li),Kn(tr),$s();break;case 5:Mm(q);break;case 4:Ad();break;case 13:Kn(Wi);break;case 19:Kn(Wi);break;case 10:Dy(q.type._context);break;case 22:case 23:X1()}$=$.return}if(ei=S,ci=S=Jf(S.current,null),$o=vo=E,Zo=0,Yi=null,Nd=Qy=Wf=0,qs=jc=null,ec!==null){for(E=0;E<ec.length;E++)if($=ec[E],q=$.interleaved,q!==null){$.interleaved=null;var Q=q.next,ue=$.pending;if(ue!==null){var We=ue.next;ue.next=Q,q.next=We}$.pending=q}ec=null}return S}function K1(S,E){do{var $=ci;try{if(Pu(),Lu.current=ep,js){for(var q=no.memoizedState;q!==null;){var Q=q.queue;Q!==null&&(Q.pending=null),q=q.next}js=!1}if(kd=0,Fo=Hi=no=null,Ea=!1,Du=0,qa.current=null,$===null||$.return===null){Zo=1,Yi=E,ci=null;break}e:{var ue=S,We=$.return,_t=$,Vt=E;if(E=$o,_t.flags|=32768,Vt!==null&&typeof Vt=="object"&&typeof Vt.then=="function"){var yn=Vt,jn=_t,Cr=jn.tag;if(!(jn.mode&1)&&(Cr===0||Cr===11||Cr===15)){var lr=jn.alternate;lr?(jn.updateQueue=lr.updateQueue,jn.memoizedState=lr.memoizedState,jn.lanes=lr.lanes):(jn.updateQueue=null,jn.memoizedState=null)}var Pi=so(We);if(Pi!==null){Pi.flags&=-257,Nm(Pi,We,_t,ue,E),Pi.mode&1&&Dm(ue,yn,E),E=Pi,Vt=yn;var rr=E.updateQueue;if(rr===null){var Xs=new Set;Xs.add(Vt),E.updateQueue=Xs}else rr.add(Vt);break e}else{if(!(E&1)){Dm(ue,yn,E),J1();break e}Vt=Error(a(426))}}else if(pi&&_t.mode&1){var Pl=so(We);if(Pl!==null){!(Pl.flags&65536)&&(Pl.flags|=256),Nm(Pl,We,_t,ue,E),zf(Vt);break e}}ue=Vt,Zo!==4&&(Zo=2),jc===null?jc=[ue]:jc.push(ue),Vt=Bf(Vt,_t),_t=We;do{switch(_t.tag){case 3:_t.flags|=65536,E&=-E,_t.lanes|=E;var Lt=$f(_t,Vt,E);zy(_t,Lt);break e;case 1:ue=Vt;var St=_t.type,Ft=_t.stateNode;if(!(_t.flags&128)&&(typeof St.getDerivedStateFromError=="function"||Ft!==null&&typeof Ft.componentDidCatch=="function"&&(zu===null||!zu.has(Ft)))){_t.flags|=65536,E&=-E,_t.lanes|=E;var On=Lm(_t,ue,E);zy(_t,On);break e}}_t=_t.return}while(_t!==null)}Xa($)}catch(or){E=or,ci===$&&$!==null&&(ci=$=$.return);continue}break}while(!0)}function Z1(){var S=Vf.current;return Vf.current=ep,S===null?ep:S}function J1(){(Zo===0||Zo===3||Zo===2)&&(Zo=4),ei===null||!(Wf&268435455)&&!(Qy&268435455)||dc(ei,$o)}function Um(S,E){var $=gr;gr|=2;var q=Z1();ei===S&&$o===E||Yf(S,E);do try{XE();break}catch(Q){K1(S,Q)}while(!0);if(Pu(),gr=$,Vf.current=q,ci!==null)throw Error(a(261));return ei=null,$o=0,Zo}function XE(){for(;ci!==null;)Vm(ci)}function Q1(){for(;ci!==null&&!Ry();)Vm(ci)}function Vm(S){var E=tw(S.alternate,S,vo);S.memoizedProps=S.pendingProps,E===null?Xa(S):ci=E,qa.current=null}function Xa(S){var E=S;do{var $=E.alternate;if(S=E.return,E.flags&32768){if($=ft($,E),$!==null){$.flags&=32767,ci=$;return}if(S!==null)S.flags|=32768,S.subtreeFlags=0,S.deletions=null;else{Zo=6,ci=null;return}}else if($=Ky($,E,vo),$!==null){ci=$;return}if(E=E.sibling,E!==null){ci=E;return}ci=E=S}while(E!==null);Zo===0&&(Zo=5)}function Xf(S,E){var $=Xr,q=Ai.transition;try{Ai.transition=null,Xr=1,cL(S,E,$)}finally{Ai.transition=q,Xr=$}return null}function cL(S,E,$){do Kf();while(Fu!==null);if(gr&6)throw Error(a(327));var q=S.finishedWork,Q=S.finishedLanes;if(q===null)return null;if(S.finishedWork=null,S.finishedLanes=0,q===S.current)throw Error(a(177));S.callbackNode=null,S.callbackPriority=0;var ue=q.lanes|q.childLanes;if(H1(S,ue),S===ei&&(ci=ei=null,$o=0),!(q.subtreeFlags&2064)&&!(q.flags&2064)||ix||(ix=!0,Zf(Tf,function(){return Kf(),null})),ue=(q.flags&15990)!==0,q.subtreeFlags&15990||ue){ue=Ai.transition,Ai.transition=null;var We=Xr;Xr=1;var _t=gr;gr|=4,qa.current=null,Pr(S,q),lc(S,q),ve(S.containerInfo),S.current=q,cc(q),Oy(),gr=_t,Xr=We,Ai.transition=ue}else S.current=q;if(ix&&(ix=!1,Fu=S,nv=Q),ue=S.pendingLanes,ue===0&&(zu=null),Cf(q.stateNode),Ya(S,Ui()),E!==null)for($=S.onRecoverableError,q=0;q<E.length;q++)$(E[q]);if(tv)throw tv=!1,S=Y1,Y1=null,S;return nv&1&&S.tag!==0&&Kf(),ue=S.pendingLanes,ue&1?S===Hf?jm++:(jm=0,Hf=S):jm=0,xa(),null}function Kf(){if(Fu!==null){var S=Vh(nv),E=Ai.transition,$=Xr;try{if(Ai.transition=null,Xr=16>S?16:S,Fu===null)var q=!1;else{if(S=Fu,Fu=null,nv=0,gr&6)throw Error(a(331));var Q=gr;for(gr|=4,wt=S.current;wt!==null;){var ue=wt,We=ue.child;if(wt.flags&16){var _t=ue.deletions;if(_t!==null){for(var Vt=0;Vt<_t.length;Vt++){var yn=_t[Vt];for(wt=yn;wt!==null;){var jn=wt;switch(jn.tag){case 0:case 11:case 15:dn(8,jn,ue)}var Cr=jn.child;if(Cr!==null)Cr.return=jn,wt=Cr;else for(;wt!==null;){jn=wt;var lr=jn.sibling,Pi=jn.return;if(vr(jn),jn===yn){wt=null;break}if(lr!==null){lr.return=Pi,wt=lr;break}wt=Pi}}}var rr=ue.alternate;if(rr!==null){var Xs=rr.child;if(Xs!==null){rr.child=null;do{var Pl=Xs.sibling;Xs.sibling=null,Xs=Pl}while(Xs!==null)}}wt=ue}}if(ue.subtreeFlags&2064&&We!==null)We.return=ue,wt=We;else e:for(;wt!==null;){if(ue=wt,ue.flags&2048)switch(ue.tag){case 0:case 11:case 15:dn(9,ue,ue.return)}var Lt=ue.sibling;if(Lt!==null){Lt.return=ue.return,wt=Lt;break e}wt=ue.return}}var St=S.current;for(wt=St;wt!==null;){We=wt;var Ft=We.child;if(We.subtreeFlags&2064&&Ft!==null)Ft.return=We,wt=Ft;else e:for(We=St;wt!==null;){if(_t=wt,_t.flags&2048)try{switch(_t.tag){case 0:case 11:case 15:Zn(9,_t)}}catch(or){Ka(_t,_t.return,or)}if(_t===We){wt=null;break e}var On=_t.sibling;if(On!==null){On.return=_t.return,wt=On;break e}wt=_t.return}}if(gr=Q,xa(),va&&typeof va.onPostCommitFiberRoot=="function")try{va.onPostCommitFiberRoot(Cu,S)}catch{}q=!0}return q}finally{Xr=$,Ai.transition=E}}return!1}function KE(S,E,$){E=Bf($,E),E=$f(S,E,1),ba(S,E),E=As(),S=rv(S,1),S!==null&&(Mf(S,1,E),Ya(S,E))}function Ka(S,E,$){if(S.tag===3)KE(S,S,$);else for(;E!==null;){if(E.tag===3){KE(E,S,$);break}else if(E.tag===1){var q=E.stateNode;if(typeof E.type.getDerivedStateFromError=="function"||typeof q.componentDidCatch=="function"&&(zu===null||!zu.has(q))){S=Bf($,S),S=Lm(E,S,1),ba(E,S),S=As(),E=rv(E,1),E!==null&&(Mf(E,1,S),Ya(E,S));break}}E=E.return}}function uL(S,E,$){var q=S.pingCache;q!==null&&q.delete(E),E=As(),S.pingedLanes|=S.suspendedLanes&$,ei===S&&($o&$)===$&&(Zo===4||Zo===3&&($o&130023424)===$o&&500>Ui()-ev?Yf(S,0):Nd|=$),Ya(S,E)}function ZE(S,E){E===0&&(S.mode&1?(E=Sl,Sl<<=1,!(Sl&130023424)&&(Sl=4194304)):E=1);var $=As();S=rv(S,E),S!==null&&(Mf(S,E,$),Ya(S,$))}function ew(S){var E=S.memoizedState,$=0;E!==null&&($=E.retryLane),ZE(S,$)}function sx(S,E){var $=0;switch(S.tag){case 13:var q=S.stateNode,Q=S.memoizedState;Q!==null&&($=Q.retryLane);break;case 19:q=S.stateNode;break;default:throw Error(a(314))}q!==null&&q.delete(E),ZE(S,$)}var tw;tw=function(S,E,$){if(S!==null)if(S.memoizedProps!==E.pendingProps||Li.current)Yo=!0;else{if(!(S.lanes&$)&&!(E.flags&128))return Yo=!1,Ge(S,E,$);Yo=!!(S.flags&131072)}else Yo=!1,pi&&E.flags&1048576&&wm(E,Mi,E.index);switch(E.lanes=0,E.tag){case 2:var q=E.type;S!==null&&(S.alternate=null,E.alternate=null,E.flags|=2),S=E.pendingProps;var Q=Ur(E,tr.current);kf(E,$),Q=Xh(null,E,q,S,Q,$);var ue=Em();return E.flags|=1,typeof Q=="object"&&Q!==null&&typeof Q.render=="function"&&Q.$$typeof===void 0?(E.tag=1,E.memoizedState=null,E.updateQueue=null,hr(q)?(ue=!0,hi(E)):ue=!1,E.memoizedState=Q.state!==null&&Q.state!==void 0?Q.state:null,If(E),Q.updater=Oc,E.stateNode=Q,Q._reactInternals=E,Oi(E,q,S,$),E=D(null,E,q,!0,ue,$)):(E.tag=0,pi&&ue&&Lf(E),cs(null,E,Q,$),E=E.child),E;case 16:q=E.elementType;e:{switch(S!==null&&(S.alternate=null,E.alternate=null,E.flags|=2),S=E.pendingProps,Q=q._init,q=Q(q._payload),E.type=q,Q=E.tag=dL(q),S=_a(q,S),Q){case 0:E=A(null,E,q,S,$);break e;case 1:E=k(null,E,q,S,$);break e;case 11:E=zm(null,E,q,S,$);break e;case 14:E=Hr(null,E,q,_a(q.type,S),$);break e}throw Error(a(306,q,""))}return E;case 0:return q=E.type,Q=E.pendingProps,Q=E.elementType===q?Q:_a(q,Q),A(S,E,q,Q,$);case 1:return q=E.type,Q=E.pendingProps,Q=E.elementType===q?Q:_a(q,Q),k(S,E,q,Q,$);case 3:e:{if(H(E),S===null)throw Error(a(387));q=E.pendingProps,ue=E.memoizedState,Q=ue.element,_m(S,E),Rf(E,q,null,$);var We=E.memoizedState;if(q=We.element,et&&ue.isDehydrated)if(ue={element:q,isDehydrated:!1,cache:We.cache,transitions:We.transitions},E.updateQueue.baseState=ue,E.memoizedState=ue,E.flags&256){Q=Error(a(423)),E=G(S,E,q,$,Q);break e}else if(q!==Q){Q=Error(a(424)),E=G(S,E,q,$,Q);break e}else for(et&&(ls=er(E.stateNode.containerInfo),as=E,pi=!0,wa=null,Gh=!1),$=Cd(E,null,q,$),E.child=$;$;)$.flags=$.flags&-3|4096,$=$.sibling;else{if(oc(),q===Q){E=Mt(S,E,$);break e}cs(S,E,q,$)}E=E.child}return E;case 5:return Uy(E),S===null&&qh(E),q=E.type,Q=E.pendingProps,ue=S!==null?S.memoizedProps:null,We=Q.children,st(q,Q)?We=null:ue!==null&&st(q,ue)&&(E.flags|=32),y(S,E),cs(S,E,We,$),E.child;case 6:return S===null&&qh(E),null;case 13:return re(S,E,$);case 4:return Sm(E,E.stateNode.containerInfo),q=E.pendingProps,S===null?E.child=zo(E,null,q,$):cs(S,E,q,$),E.child;case 11:return q=E.type,Q=E.pendingProps,Q=E.elementType===q?Q:_a(q,Q),zm(S,E,q,Q,$);case 7:return cs(S,E,E.pendingProps,$),E.child;case 8:return cs(S,E,E.pendingProps.children,$),E.child;case 12:return cs(S,E,E.pendingProps.children,$),E.child;case 10:e:{if(q=E.type._context,Q=E.pendingProps,ue=E.memoizedProps,We=Q.value,Q0(E,q,We),ue!==null)if(yr(ue.value,We)){if(ue.children===Q.children&&!Li.current){E=Mt(S,E,$);break e}}else for(ue=E.child,ue!==null&&(ue.return=E);ue!==null;){var _t=ue.dependencies;if(_t!==null){We=ue.child;for(var Vt=_t.firstContext;Vt!==null;){if(Vt.context===q){if(ue.tag===1){Vt=Ml(-1,$&-$),Vt.tag=2;var yn=ue.updateQueue;if(yn!==null){yn=yn.shared;var jn=yn.pending;jn===null?Vt.next=Vt:(Vt.next=jn.next,jn.next=Vt),yn.pending=Vt}}ue.lanes|=$,Vt=ue.alternate,Vt!==null&&(Vt.lanes|=$),Ny(ue.return,$,E),_t.lanes|=$;break}Vt=Vt.next}}else if(ue.tag===10)We=ue.type===E.type?null:ue.child;else if(ue.tag===18){if(We=ue.return,We===null)throw Error(a(341));We.lanes|=$,_t=We.alternate,_t!==null&&(_t.lanes|=$),Ny(We,$,E),We=ue.sibling}else We=ue.child;if(We!==null)We.return=ue;else for(We=ue;We!==null;){if(We===E){We=null;break}if(ue=We.sibling,ue!==null){ue.return=We.return,We=ue;break}We=We.return}ue=We}cs(S,E,Q.children,$),E=E.child}return E;case 9:return Q=E.type,q=E.pendingProps.children,kf(E,$),Q=Wa(Q),q=q(Q),E.flags|=1,cs(S,E,q,$),E.child;case 14:return q=E.type,Q=_a(q,E.pendingProps),Q=_a(q.type,Q),Hr(S,E,q,Q,$);case 15:return L(S,E,E.type,E.pendingProps,$);case 17:return q=E.type,Q=E.pendingProps,Q=E.elementType===q?Q:_a(q,Q),S!==null&&(S.alternate=null,E.alternate=null,E.flags|=2),E.tag=1,hr(q)?(S=!0,hi(E)):S=!1,kf(E,$),bm(E,q,Q),Oi(E,q,Q,$),D(null,E,q,!0,S,$);case 19:return at(S,E,$);case 22:return d(S,E,$)}throw Error(a(156,E.tag))};function Zf(S,E){return pm(S,E)}function sv(S,E,$,q){this.tag=S,this.key=$,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=E,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=q,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fc(S,E,$,q){return new sv(S,E,$,q)}function nw(S){return S=S.prototype,!(!S||!S.isReactComponent)}function dL(S){if(typeof S=="function")return nw(S)?1:0;if(S!=null){if(S=S.$$typeof,S===b)return 11;if(S===T)return 14}return 2}function Jf(S,E){var $=S.alternate;return $===null?($=fc(S.tag,E,S.key,S.mode),$.elementType=S.elementType,$.type=S.type,$.stateNode=S.stateNode,$.alternate=S,S.alternate=$):($.pendingProps=E,$.type=S.type,$.flags=0,$.subtreeFlags=0,$.deletions=null),$.flags=S.flags&14680064,$.childLanes=S.childLanes,$.lanes=S.lanes,$.child=S.child,$.memoizedProps=S.memoizedProps,$.memoizedState=S.memoizedState,$.updateQueue=S.updateQueue,E=S.dependencies,$.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext},$.sibling=S.sibling,$.index=S.index,$.ref=S.ref,$}function ax(S,E,$,q,Q,ue){var We=2;if(q=S,typeof S=="function")nw(S)&&(We=1);else if(typeof S=="string")We=5;else e:switch(S){case h:return tp($.children,Q,ue,E);case p:We=8,Q|=8;break;case g:return S=fc(12,$,E,Q|2),S.elementType=g,S.lanes=ue,S;case M:return S=fc(13,$,E,Q),S.elementType=M,S.lanes=ue,S;case w:return S=fc(19,$,E,Q),S.elementType=w,S.lanes=ue,S;case I:return lx($,Q,ue,E);default:if(typeof S=="object"&&S!==null)switch(S.$$typeof){case v:We=10;break e;case x:We=9;break e;case b:We=11;break e;case T:We=14;break e;case C:We=16,q=null;break e}throw Error(a(130,S==null?S:typeof S,""))}return E=fc(We,$,E,Q),E.elementType=S,E.type=q,E.lanes=ue,E}function tp(S,E,$,q){return S=fc(7,S,q,E),S.lanes=$,S}function lx(S,E,$,q){return S=fc(22,S,q,E),S.elementType=I,S.lanes=$,S.stateNode={},S}function av(S,E,$){return S=fc(6,S,null,E),S.lanes=$,S}function rw(S,E,$){return E=fc(4,S.children!==null?S.children:[],S.key,E),E.lanes=$,E.stateNode={containerInfo:S.containerInfo,pendingChildren:null,implementation:S.implementation},E}function Wm(S,E,$,q,Q){this.tag=E,this.containerInfo=S,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Fe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uh(0),this.expirationTimes=Uh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uh(0),this.identifierPrefix=q,this.onRecoverableError=Q,et&&(this.mutableSourceEagerHydrationData=null)}function JE(S,E,$,q,Q,ue,We,_t,Vt){return S=new Wm(S,E,$,_t,Vt),E===1?(E=1,ue===!0&&(E|=8)):E=0,ue=fc(3,null,null,E),S.current=ue,ue.stateNode=S,ue.memoizedState={element:q,isDehydrated:$,cache:null,transitions:null},If(ue),S}function uo(S){if(!S)return to;S=S._reactInternals;e:{if(Z(S)!==S||S.tag!==1)throw Error(a(170));var E=S;do{switch(E.tag){case 3:E=E.stateNode.context;break e;case 1:if(hr(E.type)){E=E.stateNode.__reactInternalMemoizedMergedChildContext;break e}}E=E.return}while(E!==null);throw Error(a(171))}if(S.tag===1){var $=S.type;if(hr($))return Rc(S,$,E)}return E}function lv(S){var E=S._reactInternals;if(E===void 0)throw typeof S.render=="function"?Error(a(188)):(S=Object.keys(S).join(","),Error(a(268,S)));return S=le(E),S===null?null:S.stateNode}function iw(S,E){if(S=S.memoizedState,S!==null&&S.dehydrated!==null){var $=S.retryLane;S.retryLane=$!==0&&$<E?$:E}}function Hm(S,E){iw(S,E),(S=S.alternate)&&iw(S,E)}function cx(S){return S=le(S),S===null?null:S.stateNode}function cv(){return null}return n.attemptContinuousHydration=function(S){if(S.tag===13){var E=As();Al(S,134217728,E),Hm(S,134217728)}},n.attemptHydrationAtCurrentPriority=function(S){if(S.tag===13){var E=As(),$=Uc(S);Al(S,$,E),Hm(S,$)}},n.attemptSynchronousHydration=function(S){switch(S.tag){case 3:var E=S.stateNode;if(E.current.memoizedState.isDehydrated){var $=Md(E.pendingLanes);$!==0&&(hm(E,$|1),Ya(E,Ui()),!(gr&6)&&($m(),xa()))}break;case 13:var q=As();ov(function(){return Al(S,1,q)}),Hm(S,1)}},n.batchedUpdates=function(S,E){var $=gr;gr|=1;try{return S(E)}finally{gr=$,gr===0&&($m(),Ts&&xa())}},n.createComponentSelector=function(S){return{$$typeof:Co,value:S}},n.createContainer=function(S,E,$,q,Q,ue,We){return JE(S,E,!1,null,$,q,Q,ue,We)},n.createHasPseudoClassSelector=function(S){return{$$typeof:Xo,value:S}},n.createHydrationContainer=function(S,E,$,q,Q,ue,We,_t,Vt){return S=JE($,q,!0,S,Q,ue,We,_t,Vt),S.context=uo(null),$=S.current,q=As(),Q=Uc($),ue=Ml(q,Q),ue.callback=E??null,ba($,ue),S.current.lanes=Q,Mf(S,Q,q),Ya(S,q),S},n.createPortal=function(S,E,$){var q=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:q==null?null:""+q,children:S,containerInfo:E,implementation:$}},n.createRoleSelector=function(S){return{$$typeof:uc,value:S}},n.createTestNameSelector=function(S){return{$$typeof:Di,value:S}},n.createTextSelector=function(S){return{$$typeof:co,value:S}},n.deferredUpdates=function(S){var E=Xr,$=Ai.transition;try{return Ai.transition=null,Xr=16,S()}finally{Xr=E,Ai.transition=$}},n.discreteUpdates=function(S,E,$,q,Q){var ue=Xr,We=Ai.transition;try{return Ai.transition=null,Xr=1,S(E,$,q,Q)}finally{Xr=ue,Ai.transition=We,gr===0&&$m()}},n.findAllNodes=Fm,n.findBoundingRects=function(S,E){if(!Je)throw Error(a(363));E=Fm(S,E),S=[];for(var $=0;$<E.length;$++)S.push(_e(E[$]));for(E=S.length-1;0<E;E--){$=S[E];for(var q=$.x,Q=q+$.width,ue=$.y,We=ue+$.height,_t=E-1;0<=_t;_t--)if(E!==_t){var Vt=S[_t],yn=Vt.x,jn=yn+Vt.width,Cr=Vt.y,lr=Cr+Vt.height;if(q>=yn&&ue>=Cr&&Q<=jn&&We<=lr){S.splice(E,1);break}else if(q!==yn||$.width!==Vt.width||lr<ue||Cr>We){if(!(ue!==Cr||$.height!==Vt.height||jn<q||yn>Q)){yn>q&&(Vt.width+=yn-q,Vt.x=q),jn<Q&&(Vt.width=Q-yn),S.splice(E,1);break}}else{Cr>ue&&(Vt.height+=Cr-ue,Vt.y=ue),lr<We&&(Vt.height=We-Cr),S.splice(E,1);break}}}return S},n.findHostInstance=lv,n.findHostInstanceWithNoPortals=function(S){return S=X(S),S=S!==null?ie(S):null,S===null?null:S.stateNode},n.findHostInstanceWithWarning=function(S){return lv(S)},n.flushControlled=function(S){var E=gr;gr|=1;var $=Ai.transition,q=Xr;try{Ai.transition=null,Xr=1,S()}finally{Xr=q,Ai.transition=$,gr=E,gr===0&&($m(),xa())}},n.flushPassiveEffects=Kf,n.flushSync=ov,n.focusWithin=function(S,E){if(!Je)throw Error(a(363));for(S=qi(S),E=Jy(S,E),E=Array.from(E),S=0;S<E.length;){var $=E[S++];if(!dt($)){if($.tag===5&&jt($.stateNode))return!0;for($=$.child;$!==null;)E.push($),$=$.sibling}}return!1},n.getCurrentUpdatePriority=function(){return Xr},n.getFindAllNodesFailureDescription=function(S,E){if(!Je)throw Error(a(363));var $=0,q=[];S=[qi(S),0];for(var Q=0;Q<S.length;){var ue=S[Q++],We=S[Q++],_t=E[We];if((ue.tag!==5||!dt(ue))&&($c(ue,_t)&&(q.push(Uf(_t)),We++,We>$&&($=We)),We<E.length))for(ue=ue.child;ue!==null;)S.push(ue,We),ue=ue.sibling}if($<E.length){for(S=[];$<E.length;$++)S.push(Uf(E[$]));return`findAllNodes was able to match part of the selector:
  `+(q.join(" > ")+`

No matching component was found for:
  `)+S.join(" > ")}return null},n.getPublicRootInstance=function(S){if(S=S.current,!S.child)return null;switch(S.child.tag){case 5:return fe(S.child.stateNode);default:return S.child.stateNode}},n.injectIntoDevTools=function(S){if(S={bundleType:S.bundleType,version:S.version,rendererPackageName:S.rendererPackageName,rendererConfig:S.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:s.ReactCurrentDispatcher,findHostInstanceByFiber:cx,findFiberByHostInstance:S.findFiberByHostInstance||cv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")S=!1;else{var E=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(E.isDisabled||!E.supportsFiber)S=!0;else{try{Cu=E.inject(S),va=E}catch{}S=!!E.checkDCE}}return S},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(S,E,$,q){if(!Je)throw Error(a(363));S=Fm(S,E);var Q=Sn(S,$,q).disconnect;return{disconnect:function(){Q()}}},n.registerMutableSourceForHydration=function(S,E){var $=E._getVersion;$=$(E._source),S.mutableSourceEagerHydrationData==null?S.mutableSourceEagerHydrationData=[E,$]:S.mutableSourceEagerHydrationData.push(E,$)},n.runWithPriority=function(S,E){var $=Xr;try{return Xr=S,E()}finally{Xr=$}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(S,E,$,q){var Q=E.current,ue=As(),We=Uc(Q);return $=uo($),E.context===null?E.context=$:E.pendingContext=$,E=Ml(ue,We),E.payload={element:S},q=q===void 0?null:q,q!==null&&(E.callback=q),ba(Q,E),S=Al(Q,We,ue),S!==null&&Wh(S,Q,We),We},n};Ude.exports=Kvt;var Zvt=Ude.exports;const Jvt=_i(Zvt);var Vde={exports:{}},Wde={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(te,he){var ve=te.length;te.push(he);e:for(;0<ve;){var ze=ve-1>>>1,Ue=te[ze];if(0<i(Ue,he))te[ze]=he,te[ve]=Ue,ve=ze;else break e}}function n(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var he=te[0],ve=te.pop();if(ve!==he){te[0]=ve;e:for(var ze=0,Ue=te.length,rt=Ue>>>1;ze<rt;){var Be=2*(ze+1)-1,st=te[Be],ct=Be+1,Dt=te[ct];if(0>i(st,ve))ct<Ue&&0>i(Dt,st)?(te[ze]=Dt,te[ct]=ve,ze=ct):(te[ze]=st,te[Be]=ve,ze=Be);else if(ct<Ue&&0>i(Dt,ve))te[ze]=Dt,te[ct]=ve,ze=ct;else break e}}return he}function i(te,he){var ve=te.sortIndex-he.sortIndex;return ve!==0?ve:te.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var l=[],c=[],h=1,p=null,g=3,v=!1,x=!1,b=!1,M=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(te){for(var he=n(c);he!==null;){if(he.callback===null)r(c);else if(he.startTime<=te)r(c),he.sortIndex=he.expirationTime,e(l,he);else break;he=n(c)}}function I(te){if(b=!1,C(te),!x)if(n(l)!==null)x=!0,fe(R);else{var he=n(c);he!==null&&xe(I,he.startTime-te)}}function R(te,he){x=!1,b&&(b=!1,w(U),U=-1),v=!0;var ve=g;try{for(C(he),p=n(l);p!==null&&(!(p.expirationTime>he)||te&&!X());){var ze=p.callback;if(typeof ze=="function"){p.callback=null,g=p.priorityLevel;var Ue=ze(p.expirationTime<=he);he=t.unstable_now(),typeof Ue=="function"?p.callback=Ue:p===n(l)&&r(l),C(he)}else r(l);p=n(l)}if(p!==null)var rt=!0;else{var Be=n(c);Be!==null&&xe(I,Be.startTime-he),rt=!1}return rt}finally{p=null,g=ve,v=!1}}var O=!1,B=null,U=-1,Z=5,j=-1;function X(){return!(t.unstable_now()-j<Z)}function le(){if(B!==null){var te=t.unstable_now();j=te;var he=!0;try{he=B(!0,te)}finally{he?me():(O=!1,B=null)}}else O=!1}var me;if(typeof T=="function")me=function(){T(le)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,ce=ie.port2;ie.port1.onmessage=le,me=function(){ce.postMessage(null)}}else me=function(){M(le,0)};function fe(te){B=te,O||(O=!0,me())}function xe(te,he){U=M(function(){te(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_continueExecution=function(){x||v||(x=!0,fe(R))},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(te){switch(g){case 1:case 2:case 3:var he=3;break;default:he=g}var ve=g;g=he;try{return te()}finally{g=ve}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(te,he){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ve=g;g=te;try{return he()}finally{g=ve}},t.unstable_scheduleCallback=function(te,he,ve){var ze=t.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?ze+ve:ze):ve=ze,te){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=ve+Ue,te={id:h++,callback:he,priorityLevel:te,startTime:ve,expirationTime:Ue,sortIndex:-1},ve>ze?(te.sortIndex=ve,e(c,te),n(l)===null&&te===n(c)&&(b?(w(U),U=-1):b=!0,xe(I,ve-ze))):(te.sortIndex=Ue,e(l,te),x||v||(x=!0,fe(R))),te},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(te){var he=g;return function(){var ve=g;g=he;try{return te.apply(this,arguments)}finally{g=ve}}}})(Wde);Vde.exports=Wde;var JZ=Vde.exports;const A8={},Hde=t=>void Object.assign(A8,t);function Qvt(t,e){function n(h,{args:p=[],attach:g,...v},x){let b=`${h[0].toUpperCase()}${h.slice(1)}`,M;if(h==="primitive"){if(v.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const w=v.object;M=o_(w,{type:h,root:x,attach:g,primitive:!0})}else{const w=A8[b];if(!w)throw new Error(`R3F: ${b} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(p))throw new Error("R3F: The args prop must be an array!");M=o_(new w(...p),{type:h,root:x,attach:g,memoizedProps:{args:p}})}return M.__r3f.attach===void 0&&(M instanceof Dr?M.__r3f.attach="geometry":M instanceof ja&&(M.__r3f.attach="material")),b!=="inject"&&ZN(M,v),M}function r(h,p){let g=!1;if(p){var v,x;(v=p.__r3f)!=null&&v.attach?KN(h,p,p.__r3f.attach):p.isObject3D&&h.isObject3D&&(h.add(p),g=!0),g||(x=h.__r3f)==null||x.objects.push(p),p.__r3f||o_(p,{}),p.__r3f.parent=h,e5(p),s_(p)}}function i(h,p,g){let v=!1;if(p){var x,b;if((x=p.__r3f)!=null&&x.attach)KN(h,p,p.__r3f.attach);else if(p.isObject3D&&h.isObject3D){p.parent=h,p.dispatchEvent({type:"added"});const M=h.children.filter(T=>T!==p),w=M.indexOf(g);h.children=[...M.slice(0,w),p,...M.slice(w)],v=!0}v||(b=h.__r3f)==null||b.objects.push(p),p.__r3f||o_(p,{}),p.__r3f.parent=h,e5(p),s_(p)}}function o(h,p,g=!1){h&&[...h].forEach(v=>a(p,v,g))}function a(h,p,g){if(p){var v,x,b;if(p.__r3f&&(p.__r3f.parent=null),(v=h.__r3f)!=null&&v.objects&&(h.__r3f.objects=h.__r3f.objects.filter(I=>I!==p)),(x=p.__r3f)!=null&&x.attach)rJ(h,p,p.__r3f.attach);else if(p.isObject3D&&h.isObject3D){var M;h.remove(p),(M=p.__r3f)!=null&&M.root&&a0t(YA(p),p)}const T=(b=p.__r3f)==null?void 0:b.primitive,C=!T&&(g===void 0?p.dispose!==null:g);if(!T){var w;o((w=p.__r3f)==null?void 0:w.objects,p,C),o(p.children,p,C)}if(delete p.__r3f,C&&p.dispose&&p.type!=="Scene"){const I=()=>{try{p.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?JZ.unstable_scheduleCallback(JZ.unstable_IdlePriority,I):I()}s_(h)}}function s(h,p,g,v){var x;const b=(x=h.__r3f)==null?void 0:x.parent;if(!b)return;const M=n(p,g,h.__r3f.root);if(h.children){for(const w of h.children)w.__r3f&&r(M,w);h.children=h.children.filter(w=>!w.__r3f)}h.__r3f.objects.forEach(w=>r(M,w)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||a(b,h),M.parent&&(M.__r3f.autoRemovedBeforeAppend=!0),r(b,M),M.raycast&&M.__r3f.eventCount&&YA(M).getState().internal.interaction.push(M),[v,v.alternate].forEach(w=>{w!==null&&(w.stateNode=M,w.ref&&(typeof w.ref=="function"?w.ref(M):w.ref.current=M))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Jvt({createInstance:n,removeChild:a,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,p)=>{if(!p)return;const g=h.getState().scene;g.__r3f&&(g.__r3f.root=h,r(g,p))},removeChildFromContainer:(h,p)=>{p&&a(h.getState().scene,p)},insertInContainerBefore:(h,p,g)=>{if(!p||!g)return;const v=h.getState().scene;v.__r3f&&i(v,p,g)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var p;return!!((p=h==null?void 0:h.__r3f)!=null?p:{}).handlers},prepareUpdate(h,p,g,v){var x;if(((x=h==null?void 0:h.__r3f)!=null?x:{}).primitive&&v.object&&v.object!==h)return[!0];{const{args:M=[],children:w,...T}=v,{args:C=[],children:I,...R}=g;if(!Array.isArray(M))throw new Error("R3F: the args prop must be an array!");if(M.some((B,U)=>B!==C[U]))return[!0];const O=Jde(h,T,R,!0);return O.changes.length?[!1,O]:null}},commitUpdate(h,[p,g],v,x,b,M){p?s(h,v,b,M):ZN(h,g)},commitMount(h,p,g,v){var x;const b=(x=h.__r3f)!=null?x:{};h.raycast&&b.handlers&&b.eventCount&&YA(h).getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>o_(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var p;const{attach:g,parent:v}=(p=h.__r3f)!=null?p:{};g&&v&&rJ(v,h,g),h.isObject3D&&(h.visible=!1),s_(h)},unhideInstance(h,p){var g;const{attach:v,parent:x}=(g=h.__r3f)!=null?g:{};v&&x&&KN(x,h,v),(h.isObject3D&&p.visible==null||p.visible)&&(h.visible=!0),s_(h)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():F_.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Io.fun(performance.now)?performance.now:Io.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Io.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Io.fun(clearTimeout)?clearTimeout:void 0}),applyProps:ZN}}var QZ,eJ;const XN=t=>"colorSpace"in t||"outputColorSpace"in t,Gde=()=>{var t;return(t=A8.ColorManagement)!=null?t:null},qde=t=>t&&t.isOrthographicCamera,e0t=t=>t&&t.hasOwnProperty("current"),GE=typeof window<"u"&&((QZ=window.document)!=null&&QZ.createElement||((eJ=window.navigator)==null?void 0:eJ.product)==="ReactNative")?W.useLayoutEffect:W.useEffect;function Yde(t){const e=W.useRef(t);return GE(()=>void(e.current=t),[t]),e}function t0t({set:t}){return GE(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class Xde extends W.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}Xde.getDerivedStateFromError=()=>({error:!0});const Kde="__default",tJ=new Map,n0t=t=>t&&!!t.memoized&&!!t.changes;function Zde(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const cS=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()};function YA(t){let e=t.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Io={obj:t=>t===Object(t)&&!Io.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(Io.str(t)||Io.num(t))return t===e;const o=Io.obj(t);if(o&&r==="reference")return t===e;const a=Io.arr(t);if(a&&n==="reference")return t===e;if((a||o)&&t===e)return!0;let s;for(s in t)if(!(s in e))return!1;if(o&&n==="shallow"&&r==="shallow"){for(s in i?e:t)if(!Io.equ(t[s],e[s],{strict:i,objects:"reference"}))return!1}else for(s in i?e:t)if(t[s]!==e[s])return!1;if(Io.und(s)){if(a&&t.length===0&&e.length===0||o&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function r0t(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function o_(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function Q4(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce((o,a)=>o[a],t),{target:n,key:i}}else return{target:n,key:e}}const nJ=/-\d+$/;function KN(t,e,n){if(Io.str(n)){if(nJ.test(n)){const o=n.replace(nJ,""),{target:a,key:s}=Q4(t,o);Array.isArray(a[s])||(a[s]=[])}const{target:r,key:i}=Q4(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function rJ(t,e,n){var r,i;if(Io.str(n)){const{target:o,key:a}=Q4(t,n),s=e.__r3f.previousAttach;s===void 0?delete o[a]:o[a]=s}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(t,e);(i=e.__r3f)==null||delete i.previousAttach}function Jde(t,{children:e,key:n,ref:r,...i},{children:o,key:a,ref:s,...l}={},c=!1){var h;const p=(h=t==null?void 0:t.__r3f)!=null?h:{},g=Object.entries(i),v=[];if(c){const b=Object.keys(l);for(let M=0;M<b.length;M++)i.hasOwnProperty(b[M])||g.unshift([b[M],Kde+"remove"])}g.forEach(([b,M])=>{var w;if((w=t.__r3f)!=null&&w.primitive&&b==="object"||Io.equ(M,l[b]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(b))return v.push([b,M,!0,[]]);let T=[];b.includes("-")&&(T=b.split("-")),v.push([b,M,!1,T]);for(const C in i){const I=i[C];C.startsWith(`${b}-`)&&v.push([C,I,!1,C.split("-")])}});const x={...i};return p.memoizedProps&&p.memoizedProps.args&&(x.args=p.memoizedProps.args),p.memoizedProps&&p.memoizedProps.attach&&(x.attach=p.memoizedProps.attach),{memoized:x,changes:v}}const i0t=typeof process<"u"&&!1;function ZN(t,e){var n,r,i;const o=(n=t.__r3f)!=null?n:{},a=o.root,s=(r=a==null||a.getState==null?void 0:a.getState())!=null?r:{},{memoized:l,changes:c}=n0t(e)?e:Jde(t,e),h=o.eventCount;t.__r3f&&(t.__r3f.memoizedProps=l);for(let g=0;g<c.length;g++){let[v,x,b,M]=c[g];if(XN(t)){const I="srgb",R="srgb-linear";v==="encoding"?(v="colorSpace",x=x===3001?I:R):v==="outputEncoding"&&(v="outputColorSpace",x=x===3001?I:R)}let w=t,T=w[v];if(M.length&&(T=M.reduce((C,I)=>C[I],t),!(T&&T.set))){const[C,...I]=M.reverse();w=I.reverse().reduce((R,O)=>R[O],t),v=C}if(x===Kde+"remove")if(w.constructor){let C=tJ.get(w.constructor);C||(C=new w.constructor,tJ.set(w.constructor,C)),x=C[v]}else x=0;if(b)x?o.handlers[v]=x:delete o.handlers[v],o.eventCount=Object.keys(o.handlers).length;else if(T&&T.set&&(T.copy||T instanceof _0)){if(Array.isArray(x))T.fromArray?T.fromArray(x):T.set(...x);else if(T.copy&&x&&x.constructor&&(i0t?T.constructor.name===x.constructor.name:T.constructor===x.constructor))T.copy(x);else if(x!==void 0){const C=T instanceof Fn;!C&&T.setScalar?T.setScalar(x):T instanceof _0&&x instanceof _0?T.mask=x.mask:T.set(x),!Gde()&&!s.linear&&C&&T.convertSRGBToLinear()}}else if(w[v]=x,w[v]instanceof Go&&w[v].format===Ul&&w[v].type===Mh){const C=w[v];XN(C)&&XN(s.gl)?C.colorSpace=s.gl.outputColorSpace:C.encoding=s.gl.outputEncoding}s_(t)}if(o.parent&&t.raycast&&h!==o.eventCount){const g=YA(t).getState().internal,v=g.interaction.indexOf(t);v>-1&&g.interaction.splice(v,1),o.eventCount&&g.interaction.push(t)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(i=t.__r3f)!=null&&i.parent&&e5(t),t}function s_(t){var e,n;const r=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function e5(t){t.onUpdate==null||t.onUpdate(t)}function o0t(t,e){t.manual||(qde(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function sA(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function s0t(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return F_.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return F_.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return F_.ContinuousEventPriority;default:return F_.DefaultEventPriority}}function Qde(t,e,n,r){const i=n.get(e);i&&(n.delete(e),n.size===0&&(t.delete(r),i.target.releasePointerCapture(r)))}function a0t(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{Qde(n.capturedMap,e,r,i)})}function l0t(t){function e(l){const{internal:c}=t.getState(),h=l.offsetX-c.initialClick[0],p=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(h*h+p*p))}function n(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(h=>{var p;return(p=c.__r3f)==null?void 0:p.handlers["onPointer"+h]}))}function r(l,c){const h=t.getState(),p=new Set,g=[],v=c?c(h.internal.interaction):h.internal.interaction;for(let w=0;w<v.length;w++){const T=cS(v[w]);T&&(T.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function x(w){const T=cS(w);if(!T||!T.events.enabled||T.raycaster.camera===null)return[];if(T.raycaster.camera===void 0){var C;T.events.compute==null||T.events.compute(l,T,(C=T.previousRoot)==null?void 0:C.getState()),T.raycaster.camera===void 0&&(T.raycaster.camera=null)}return T.raycaster.camera?T.raycaster.intersectObject(w,!0):[]}let b=v.flatMap(x).sort((w,T)=>{const C=cS(w.object),I=cS(T.object);return!C||!I?w.distance-T.distance:I.events.priority-C.events.priority||w.distance-T.distance}).filter(w=>{const T=sA(w);return p.has(T)?!1:(p.add(T),!0)});h.events.filter&&(b=h.events.filter(b,h));for(const w of b){let T=w.object;for(;T;){var M;(M=T.__r3f)!=null&&M.eventCount&&g.push({...w,eventObject:T}),T=T.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let w of h.internal.capturedMap.get(l.pointerId).values())p.has(sA(w.intersection))||g.push(w.intersection);return g}function i(l,c,h,p){const g=t.getState();if(l.length){const v={stopped:!1};for(const x of l){const b=cS(x.object)||g,{raycaster:M,pointer:w,camera:T,internal:C}=b,I=new Oe(w.x,w.y,0).unproject(T),R=j=>{var X,le;return(X=(le=C.capturedMap.get(j))==null?void 0:le.has(x.eventObject))!=null?X:!1},O=j=>{const X={intersection:x,target:c.target};C.capturedMap.has(j)?C.capturedMap.get(j).set(x.eventObject,X):C.capturedMap.set(j,new Map([[x.eventObject,X]])),c.target.setPointerCapture(j)},B=j=>{const X=C.capturedMap.get(j);X&&Qde(C.capturedMap,x.eventObject,X,j)};let U={};for(let j in c){let X=c[j];typeof X!="function"&&(U[j]=X)}let Z={...x,...U,pointer:w,intersections:l,stopped:v.stopped,delta:h,unprojectedPoint:I,ray:M.ray,camera:T,stopPropagation(){const j="pointerId"in c&&C.capturedMap.get(c.pointerId);if((!j||j.has(x.eventObject))&&(Z.stopped=v.stopped=!0,C.hovered.size&&Array.from(C.hovered.values()).find(X=>X.eventObject===x.eventObject))){const X=l.slice(0,l.indexOf(x));o([...X,x])}},target:{hasPointerCapture:R,setPointerCapture:O,releasePointerCapture:B},currentTarget:{hasPointerCapture:R,setPointerCapture:O,releasePointerCapture:B},nativeEvent:c};if(p(Z),v.stopped===!0)break}}return l}function o(l){const{internal:c}=t.getState();for(const h of c.hovered.values())if(!l.length||!l.find(p=>p.object===h.object&&p.index===h.index&&p.instanceId===h.instanceId)){const g=h.eventObject.__r3f,v=g==null?void 0:g.handlers;if(c.hovered.delete(sA(h)),g!=null&&g.eventCount){const x={...h,intersections:l};v.onPointerOut==null||v.onPointerOut(x),v.onPointerLeave==null||v.onPointerLeave(x)}}}function a(l,c){for(let h=0;h<c.length;h++){const p=c[h].__r3f;p==null||p.handlers.onPointerMissed==null||p.handlers.onPointerMissed(l)}}function s(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return c=>{const{internal:h}=t.getState();"pointerId"in c&&h.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(c.pointerId)&&(h.capturedMap.delete(c.pointerId),o([]))})}}return function(h){const{onPointerMissed:p,internal:g}=t.getState();g.lastEvent.current=h;const v=l==="onPointerMove",x=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",M=r(h,v?n:void 0),w=x?e(h):0;l==="onPointerDown"&&(g.initialClick=[h.offsetX,h.offsetY],g.initialHits=M.map(C=>C.eventObject)),x&&!M.length&&w<=2&&(a(h,g.interaction),p&&p(h)),v&&o(M);function T(C){const I=C.eventObject,R=I.__r3f,O=R==null?void 0:R.handlers;if(R!=null&&R.eventCount)if(v){if(O.onPointerOver||O.onPointerEnter||O.onPointerOut||O.onPointerLeave){const B=sA(C),U=g.hovered.get(B);U?U.stopped&&C.stopPropagation():(g.hovered.set(B,C),O.onPointerOver==null||O.onPointerOver(C),O.onPointerEnter==null||O.onPointerEnter(C))}O.onPointerMove==null||O.onPointerMove(C)}else{const B=O[l];B?(!x||g.initialHits.includes(I))&&(a(h,g.interaction.filter(U=>!g.initialHits.includes(U))),B(C)):x&&g.initialHits.includes(I)&&a(h,g.interaction.filter(U=>!g.initialHits.includes(U)))}}i(M,h,w,T)}}return{handlePointer:s}}const efe=t=>!!(t!=null&&t.render),tfe=W.createContext(null),c0t=(t,e)=>{const n=qvt((s,l)=>{const c=new Oe,h=new Oe,p=new Oe;function g(w=l().camera,T=h,C=l().size){const{width:I,height:R,top:O,left:B}=C,U=I/R;T instanceof Oe?p.copy(T):p.set(...T);const Z=w.getWorldPosition(c).distanceTo(p);if(qde(w))return{width:I/w.zoom,height:R/w.zoom,top:O,left:B,factor:1,distance:Z,aspect:U};{const j=w.fov*Math.PI/180,X=2*Math.tan(j/2)*Z,le=X*(I/R);return{width:le,height:X,top:O,left:B,factor:I/le,distance:Z,aspect:U}}}let v;const x=w=>s(T=>({performance:{...T.performance,current:w}})),b=new Ht;return{set:s,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(w=1)=>t(l(),w),advance:(w,T)=>e(w,T,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new M8,pointer:b,mouse:b,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const w=l();v&&clearTimeout(v),w.performance.current!==w.performance.min&&x(w.performance.min),v=setTimeout(()=>x(l().performance.max),w.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:g},setEvents:w=>s(T=>({...T,events:{...T.events,...w}})),setSize:(w,T,C,I,R)=>{const O=l().camera,B={width:w,height:T,top:I||0,left:R||0,updateStyle:C};s(U=>({size:B,viewport:{...U.viewport,...g(O,h,B)}}))},setDpr:w=>s(T=>{const C=Zde(w);return{viewport:{...T.viewport,dpr:C,initialDpr:T.viewport.initialDpr||C}}}),setFrameloop:(w="always")=>{const T=l().clock;T.stop(),T.elapsedTime=0,w!=="never"&&(T.start(),T.elapsedTime=0),s(()=>({frameloop:w}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:W.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(w,T,C)=>{const I=l().internal;return I.priority=I.priority+(T>0?1:0),I.subscribers.push({ref:w,priority:T,store:C}),I.subscribers=I.subscribers.sort((R,O)=>R.priority-O.priority),()=>{const R=l().internal;R!=null&&R.subscribers&&(R.priority=R.priority-(T>0?1:0),R.subscribers=R.subscribers.filter(O=>O.ref!==w))}}}}}),r=n.getState();let i=r.size,o=r.viewport.dpr,a=r.camera;return n.subscribe(()=>{const{camera:s,size:l,viewport:c,gl:h,set:p}=n.getState();if(l.width!==i.width||l.height!==i.height||c.dpr!==o){var g;i=l,o=c.dpr,o0t(s,l),h.setPixelRatio(c.dpr);const v=(g=l.updateStyle)!=null?g:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,v)}s!==a&&(a=s,p(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(s)}})))}),n.subscribe(s=>t(s)),n};let aA,u0t=new Set,d0t=new Set,f0t=new Set;function JN(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function uS(t,e){switch(t){case"before":return JN(u0t,e);case"after":return JN(d0t,e);case"tail":return JN(f0t,e)}}let QN,ez;function tz(t,e,n){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),QN=e.internal.subscribers,aA=0;aA<QN.length;aA++)ez=QN[aA],ez.ref.current(ez.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function h0t(t){let e=!1,n,r,i;function o(l){r=requestAnimationFrame(o),e=!0,n=0,uS("before",l);for(const h of t.values()){var c;i=h.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((c=i.gl.xr)!=null&&c.isPresenting)&&(n+=tz(l,i))}if(uS("after",l),n===0)return uS("tail",l),e=!1,cancelAnimationFrame(r)}function a(l,c=1){var h;if(!l)return t.forEach(p=>a(p.store.getState(),c));(h=l.gl.xr)!=null&&h.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(o)))}function s(l,c=!0,h,p){if(c&&uS("before",l),h)tz(l,h,p);else for(const g of t.values())tz(l,g.store.getState());c&&uS("after",l)}return{loop:o,invalidate:a,advance:s}}function nfe(){const t=W.useContext(tfe);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function hg(t=n=>n,e){return nfe()(t,e)}function rfe(t,e=0){const n=nfe(),r=n.getState().internal.subscribe,i=Yde(t);return GE(()=>r(i,e,n),[e,r,n]),null}const e1=new Map,{invalidate:iJ,advance:oJ}=h0t(e1),{reconciler:oI,applyProps:t_}=Qvt(e1,s0t),n_={objects:"shallow",strict:!1},p0t=(t,e)=>{const n=typeof t=="function"?t(e):t;return efe(n)?n:new a8({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function m0t(t,e){const n=typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:o,left:a,updateStyle:s=n}=e;return{width:r,height:i,top:o,left:a,updateStyle:s}}else if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:r,height:i,top:o,left:a}=t.parentElement.getBoundingClientRect();return{width:r,height:i,top:o,left:a,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function g0t(t){const e=e1.get(t),n=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,o=r||c0t(iJ,oJ),a=n||oI.createContainer(o,F_.ConcurrentRoot,null,!1,null,"",i,null);e||e1.set(t,{fiber:a,store:o});let s,l=!1,c;return{configure(h={}){let{gl:p,size:g,scene:v,events:x,onCreated:b,shadows:M=!1,linear:w=!1,flat:T=!1,legacy:C=!1,orthographic:I=!1,frameloop:R="always",dpr:O=[1,2],performance:B,raycaster:U,camera:Z,onPointerMissed:j}=h,X=o.getState(),le=X.gl;X.gl||X.set({gl:le=p0t(p,t)});let me=X.raycaster;me||X.set({raycaster:me=new Bde});const{params:ie,...ce}=U||{};if(Io.equ(ce,me,n_)||t_(me,{...ce}),Io.equ(ie,me.params,n_)||t_(me,{params:{...me.params,...ie}}),!X.camera||X.camera===c&&!Io.equ(c,Z,n_)){c=Z;const ve=Z instanceof BE,ze=ve?Z:I?new Rp(0,0,0,0,.1,1e3):new os(75,0,.1,1e3);ve||(ze.position.z=5,Z&&t_(ze,Z),!X.camera&&!(Z!=null&&Z.rotation)&&ze.lookAt(0,0,0)),X.set({camera:ze}),me.camera=ze}if(!X.scene){let ve;v instanceof rI?ve=v:(ve=new rI,v&&t_(ve,v)),X.set({scene:o_(ve)})}if(!X.xr){var fe;const ve=(rt,Be)=>{const st=o.getState();st.frameloop!=="never"&&oJ(rt,!0,st,Be)},ze=()=>{const rt=o.getState();rt.gl.xr.enabled=rt.gl.xr.isPresenting,rt.gl.xr.setAnimationLoop(rt.gl.xr.isPresenting?ve:null),rt.gl.xr.isPresenting||iJ(rt)},Ue={connect(){const rt=o.getState().gl;rt.xr.addEventListener("sessionstart",ze),rt.xr.addEventListener("sessionend",ze)},disconnect(){const rt=o.getState().gl;rt.xr.removeEventListener("sessionstart",ze),rt.xr.removeEventListener("sessionend",ze)}};typeof((fe=le.xr)==null?void 0:fe.addEventListener)=="function"&&Ue.connect(),X.set({xr:Ue})}if(le.shadowMap){const ve=le.shadowMap.enabled,ze=le.shadowMap.type;if(le.shadowMap.enabled=!!M,Io.boo(M))le.shadowMap.type=KS;else if(Io.str(M)){var xe;const Ue={basic:Pce,percentage:zO,soft:KS,variance:Xd};le.shadowMap.type=(xe=Ue[M])!=null?xe:KS}else Io.obj(M)&&Object.assign(le.shadowMap,M);(ve!==le.shadowMap.enabled||ze!==le.shadowMap.type)&&(le.shadowMap.needsUpdate=!0)}const te=Gde();te&&("enabled"in te?te.enabled=!C:"legacyMode"in te&&(te.legacyMode=C)),l||t_(le,{outputEncoding:w?3e3:3001,toneMapping:T?Sh:j6}),X.legacy!==C&&X.set(()=>({legacy:C})),X.linear!==w&&X.set(()=>({linear:w})),X.flat!==T&&X.set(()=>({flat:T})),p&&!Io.fun(p)&&!efe(p)&&!Io.equ(p,le,n_)&&t_(le,p),x&&!X.events.handlers&&X.set({events:x(o)});const he=m0t(t,g);return Io.equ(he,X.size,n_)||X.setSize(he.width,he.height,he.updateStyle,he.top,he.left),O&&X.viewport.dpr!==Zde(O)&&X.setDpr(O),X.frameloop!==R&&X.setFrameloop(R),X.onPointerMissed||X.set({onPointerMissed:j}),B&&!Io.equ(B,X.performance,n_)&&X.set(ve=>({performance:{...ve.performance,...B}})),s=b,l=!0,this},render(h){return l||this.configure(),oI.updateContainer(W.createElement(y0t,{store:o,children:h,onCreated:s,rootElement:t}),a,null,()=>{}),o},unmount(){ife(t)}}}function y0t({store:t,children:e,onCreated:n,rootElement:r}){return GE(()=>{const i=t.getState();i.set(o=>({internal:{...o.internal,active:!0}})),n&&n(i),t.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),W.createElement(tfe.Provider,{value:t},e)}function ife(t,e){const n=e1.get(t),r=n==null?void 0:n.fiber;if(r){const i=n==null?void 0:n.store.getState();i&&(i.internal.active=!1),oI.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var o,a,s,l;i.events.disconnect==null||i.events.disconnect(),(o=i.gl)==null||(a=o.renderLists)==null||a.dispose==null||a.dispose(),(s=i.gl)==null||s.forceContextLoss==null||s.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),r0t(i),e1.delete(t),e&&e(t)}catch{}},500)})}}oI.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:W.version});function t5(t,e,n){var r,i,o,a,s;e==null&&(e=100);function l(){var h=Date.now()-a;h<e&&h>=0?r=setTimeout(l,e-h):(r=null,n||(s=t.apply(o,i),o=i=null))}var c=function(){o=this,i=arguments,a=Date.now();var h=n&&!r;return r||(r=setTimeout(l,e)),h&&(s=t.apply(o,i),o=i=null),s};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(s=t.apply(o,i),o=i=null,clearTimeout(r),r=null)},c}t5.debounce=t5;var v0t=t5;const sJ=_i(v0t);function x0t(t){let{debounce:e,scroll:n,polyfill:r,offsetSize:i}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const o=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,s]=W.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=W.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a}),c=e?typeof e=="number"?e:e.scroll:null,h=e?typeof e=="number"?e:e.resize:null,p=W.useRef(!1);W.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[g,v,x]=W.useMemo(()=>{const T=()=>{if(!l.current.element)return;const{left:C,top:I,width:R,height:O,bottom:B,right:U,x:Z,y:j}=l.current.element.getBoundingClientRect(),X={left:C,top:I,width:R,height:O,bottom:B,right:U,x:Z,y:j};l.current.element instanceof HTMLElement&&i&&(X.height=l.current.element.offsetHeight,X.width=l.current.element.offsetWidth),Object.freeze(X),p.current&&!S0t(l.current.lastBounds,X)&&s(l.current.lastBounds=X)};return[T,h?sJ(T,h):T,c?sJ(T,c):T]},[s,i,c,h]);function b(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(T=>T.removeEventListener("scroll",x,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function M(){l.current.element&&(l.current.resizeObserver=new o(x),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(T=>T.addEventListener("scroll",x,{capture:!0,passive:!0})))}const w=T=>{!T||T===l.current.element||(b(),l.current.element=T,l.current.scrollContainers=ofe(T),M())};return b0t(x,!!n),_0t(v),W.useEffect(()=>{b(),M()},[n,x,v]),W.useEffect(()=>b,[]),[w,a,g]}function _0t(t){W.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function b0t(t,e){W.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function ofe(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(o=>o==="auto"||o==="scroll")&&e.push(t),[...e,...ofe(t.parentElement)]}const w0t=["x","y","top","bottom","left","right","width","height"],S0t=(t,e)=>w0t.every(n=>t[n]===e[n]);var M0t=Object.defineProperty,E0t=Object.defineProperties,T0t=Object.getOwnPropertyDescriptors,aJ=Object.getOwnPropertySymbols,C0t=Object.prototype.hasOwnProperty,A0t=Object.prototype.propertyIsEnumerable,lJ=(t,e,n)=>e in t?M0t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cJ=(t,e)=>{for(var n in e||(e={}))C0t.call(e,n)&&lJ(t,n,e[n]);if(aJ)for(var n of aJ(e))A0t.call(e,n)&&lJ(t,n,e[n]);return t},P0t=(t,e)=>E0t(t,T0t(e));function sfe(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const i=sfe(r,e,n);if(i)return i;r=e?null:r.sibling}}function afe(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const P8=afe(W.createContext(null));class lfe extends W.Component{render(){return W.createElement(P8.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:uJ,ReactCurrentDispatcher:dJ}=W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function k0t(){const t=W.useContext(P8);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=W.useId();return W.useMemo(()=>{for(const r of[uJ==null?void 0:uJ.current,t,t==null?void 0:t.alternate]){if(!r)continue;const i=sfe(r,!1,o=>{let a=o.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[t,e])}function I0t(){var t,e;const n=k0t(),[r]=W.useState(()=>new Map);r.clear();let i=n;for(;i;){const o=(t=i.type)==null?void 0:t._context;o&&o!==P8&&!r.has(o)&&r.set(o,(e=dJ==null?void 0:dJ.current)==null?void 0:e.readContext(afe(o))),i=i.return}return r}function R0t(){const t=I0t();return W.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>W.createElement(e,null,W.createElement(n.Provider,P0t(cJ({},r),{value:t.get(n)}))),e=>W.createElement(lfe,cJ({},e))),[t])}const nz={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function O0t(t){const{handlePointer:e}=l0t(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(nz).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:i}=t.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var r;const{set:i,events:o}=t.getState();o.disconnect==null||o.disconnect(),i(a=>({events:{...a.events,connected:n}})),Object.entries((r=o.handlers)!=null?r:[]).forEach(([a,s])=>{const[l,c]=nz[a];n.addEventListener(l,s,{passive:c})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([o,a])=>{if(r&&r.connected instanceof HTMLElement){const[s]=nz[o];r.connected.removeEventListener(s,a)}}),n(o=>({events:{...o.events,connected:void 0}}))}}}}const L0t=W.forwardRef(function({children:e,fallback:n,resize:r,style:i,gl:o,events:a=O0t,eventSource:s,eventPrefix:l,shadows:c,linear:h,flat:p,legacy:g,orthographic:v,frameloop:x,dpr:b,performance:M,raycaster:w,camera:T,scene:C,onPointerMissed:I,onCreated:R,...O},B){W.useMemo(()=>Hde(Wvt),[]);const U=R0t(),[Z,j]=x0t({scroll:!0,debounce:{scroll:50,resize:0},...r}),X=W.useRef(null),le=W.useRef(null);W.useImperativeHandle(B,()=>X.current);const me=Yde(I),[ie,ce]=W.useState(!1),[fe,xe]=W.useState(!1);if(ie)throw ie;if(fe)throw fe;const te=W.useRef(null);GE(()=>{const ve=X.current;j.width>0&&j.height>0&&ve&&(te.current||(te.current=g0t(ve)),te.current.configure({gl:o,events:a,shadows:c,linear:h,flat:p,legacy:g,orthographic:v,frameloop:x,dpr:b,performance:M,raycaster:w,camera:T,scene:C,size:j,onPointerMissed:(...ze)=>me.current==null?void 0:me.current(...ze),onCreated:ze=>{ze.events.connect==null||ze.events.connect(s?e0t(s)?s.current:s:le.current),l&&ze.setEvents({compute:(Ue,rt)=>{const Be=Ue[l+"X"],st=Ue[l+"Y"];rt.pointer.set(Be/rt.size.width*2-1,-(st/rt.size.height)*2+1),rt.raycaster.setFromCamera(rt.pointer,rt.camera)}}),R==null||R(ze)}}),te.current.render(W.createElement(U,null,W.createElement(Xde,{set:xe},W.createElement(W.Suspense,{fallback:W.createElement(t0t,{set:ce})},e)))))}),W.useEffect(()=>{const ve=X.current;if(ve)return()=>ife(ve)},[]);const he=s?"none":"auto";return W.createElement("div",de({ref:le,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:he,...i}},O),W.createElement("div",{ref:Z,style:{width:"100%",height:"100%"}},W.createElement("canvas",{ref:X,style:{display:"block"}},n)))}),D0t=W.forwardRef(function(e,n){return W.createElement(lfe,null,W.createElement(L0t,de({},e,{ref:n})))});var N0t=Object.defineProperty,z0t=(t,e,n)=>e in t?N0t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mr=(t,e,n)=>(z0t(t,typeof e!="symbol"?e+"":e,n),n);const lA=new Ey,fJ=new ah,F0t=Math.cos(70*(Math.PI/180)),hJ=(t,e)=>(t%e+e)%e;let B0t=class extends bf{constructor(e,n){super(),Mr(this,"object"),Mr(this,"domElement"),Mr(this,"enabled",!0),Mr(this,"target",new Oe),Mr(this,"minDistance",0),Mr(this,"maxDistance",1/0),Mr(this,"minZoom",0),Mr(this,"maxZoom",1/0),Mr(this,"minPolarAngle",0),Mr(this,"maxPolarAngle",Math.PI),Mr(this,"minAzimuthAngle",-1/0),Mr(this,"maxAzimuthAngle",1/0),Mr(this,"enableDamping",!1),Mr(this,"dampingFactor",.05),Mr(this,"enableZoom",!0),Mr(this,"zoomSpeed",1),Mr(this,"enableRotate",!0),Mr(this,"rotateSpeed",1),Mr(this,"enablePan",!0),Mr(this,"panSpeed",1),Mr(this,"screenSpacePanning",!0),Mr(this,"keyPanSpeed",7),Mr(this,"zoomToCursor",!1),Mr(this,"autoRotate",!1),Mr(this,"autoRotateSpeed",2),Mr(this,"reverseOrbit",!1),Mr(this,"reverseHorizontalOrbit",!1),Mr(this,"reverseVerticalOrbit",!1),Mr(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Mr(this,"mouseButtons",{LEFT:Qc.ROTATE,MIDDLE:Qc.DOLLY,RIGHT:Qc.PAN}),Mr(this,"touches",{ONE:eu.ROTATE,TWO:eu.DOLLY_PAN}),Mr(this,"target0"),Mr(this,"position0"),Mr(this,"zoom0"),Mr(this,"_domElementKeyEvents",null),Mr(this,"getPolarAngle"),Mr(this,"getAzimuthalAngle"),Mr(this,"setPolarAngle"),Mr(this,"setAzimuthalAngle"),Mr(this,"getDistance"),Mr(this,"listenToKeyEvents"),Mr(this,"stopListenToKeyEvents"),Mr(this,"saveState"),Mr(this,"reset"),Mr(this,"update"),Mr(this,"connect"),Mr(this,"dispose"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=Ie=>{let Ve=hJ(Ie,2*Math.PI),Me=h.phi;Me<0&&(Me+=2*Math.PI),Ve<0&&(Ve+=2*Math.PI);let it=Math.abs(Ve-Me);2*Math.PI-it<it&&(Ve<Me?Ve+=2*Math.PI:Me+=2*Math.PI),p.phi=Ve-Me,r.update()},this.setAzimuthalAngle=Ie=>{let Ve=hJ(Ie,2*Math.PI),Me=h.theta;Me<0&&(Me+=2*Math.PI),Ve<0&&(Ve+=2*Math.PI);let it=Math.abs(Ve-Me);2*Math.PI-it<it&&(Ve<Me?Ve+=2*Math.PI:Me+=2*Math.PI),p.theta=Ve-Me,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=Ie=>{Ie.addEventListener("keydown",cn),this._domElementKeyEvents=Ie},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",cn),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=s.NONE},this.update=(()=>{const Ie=new Oe,Ve=new Oe(0,1,0),Me=new pa().setFromUnitVectors(e.up,Ve),it=Me.clone().invert(),Qt=new Oe,Xe=new pa,It=2*Math.PI;return function(){const we=r.object.position;Me.setFromUnitVectors(e.up,Ve),it.copy(Me).invert(),Ie.copy(we).sub(r.target),Ie.applyQuaternion(Me),h.setFromVector3(Ie),r.autoRotate&&l===s.NONE&&ie(le()),r.enableDamping?(h.theta+=p.theta*r.dampingFactor,h.phi+=p.phi*r.dampingFactor):(h.theta+=p.theta,h.phi+=p.phi);let oe=r.minAzimuthAngle,pe=r.maxAzimuthAngle;isFinite(oe)&&isFinite(pe)&&(oe<-Math.PI?oe+=It:oe>Math.PI&&(oe-=It),pe<-Math.PI?pe+=It:pe>Math.PI&&(pe-=It),oe<=pe?h.theta=Math.max(oe,Math.min(pe,h.theta)):h.theta=h.theta>(oe+pe)/2?Math.max(oe,h.theta):Math.min(pe,h.theta)),h.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,h.phi)),h.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(v,r.dampingFactor):r.target.add(v),r.zoomToCursor&&Z||r.object.isOrthographicCamera?h.radius=Ue(h.radius):h.radius=Ue(h.radius*g),Ie.setFromSpherical(h),Ie.applyQuaternion(it),we.copy(r.target).add(Ie),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(p.theta*=1-r.dampingFactor,p.phi*=1-r.dampingFactor,v.multiplyScalar(1-r.dampingFactor)):(p.set(0,0,0),v.set(0,0,0));let Te=!1;if(r.zoomToCursor&&Z){let Pe=null;if(r.object instanceof os&&r.object.isPerspectiveCamera){const Ne=Ie.length();Pe=Ue(Ne*g);const Ke=Ne-Pe;r.object.position.addScaledVector(B,Ke),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Ne=new Oe(U.x,U.y,0);Ne.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/g)),r.object.updateProjectionMatrix(),Te=!0;const Ke=new Oe(U.x,U.y,0);Ke.unproject(r.object),r.object.position.sub(Ke).add(Ne),r.object.updateMatrixWorld(),Pe=Ie.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Pe!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Pe).add(r.object.position):(lA.origin.copy(r.object.position),lA.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(lA.direction))<F0t?e.lookAt(r.target):(fJ.setFromNormalAndCoplanarPoint(r.object.up,r.target),lA.intersectPlane(fJ,r.target))))}else r.object instanceof Rp&&r.object.isOrthographicCamera&&(Te=g!==1,Te&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/g)),r.object.updateProjectionMatrix()));return g=1,Z=!1,Te||Qt.distanceToSquared(r.object.position)>c||8*(1-Xe.dot(r.object.quaternion))>c?(r.dispatchEvent(i),Qt.copy(r.object.position),Xe.copy(r.object.quaternion),Te=!1,!0):!1}})(),this.connect=Ie=>{Ie===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=Ie,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",An),r.domElement.addEventListener("pointerdown",Ce),r.domElement.addEventListener("pointercancel",dt),r.domElement.addEventListener("wheel",Sn)},this.dispose=()=>{var Ie,Ve,Me,it,Qt,Xe;(Ie=r.domElement)==null||Ie.removeEventListener("contextmenu",An),(Ve=r.domElement)==null||Ve.removeEventListener("pointerdown",Ce),(Me=r.domElement)==null||Me.removeEventListener("pointercancel",dt),(it=r.domElement)==null||it.removeEventListener("wheel",Sn),(Qt=r.domElement)==null||Qt.ownerDocument.removeEventListener("pointermove",_e),(Xe=r.domElement)==null||Xe.ownerDocument.removeEventListener("pointerup",ht),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",cn)};const r=this,i={type:"change"},o={type:"start"},a={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=s.NONE;const c=1e-6,h=new W2,p=new W2;let g=1;const v=new Oe,x=new Ht,b=new Ht,M=new Ht,w=new Ht,T=new Ht,C=new Ht,I=new Ht,R=new Ht,O=new Ht,B=new Oe,U=new Ht;let Z=!1;const j=[],X={};function le(){return 2*Math.PI/60/60*r.autoRotateSpeed}function me(){return Math.pow(.95,r.zoomSpeed)}function ie(Ie){r.reverseOrbit||r.reverseHorizontalOrbit?p.theta+=Ie:p.theta-=Ie}function ce(Ie){r.reverseOrbit||r.reverseVerticalOrbit?p.phi+=Ie:p.phi-=Ie}const fe=(()=>{const Ie=new Oe;return function(Me,it){Ie.setFromMatrixColumn(it,0),Ie.multiplyScalar(-Me),v.add(Ie)}})(),xe=(()=>{const Ie=new Oe;return function(Me,it){r.screenSpacePanning===!0?Ie.setFromMatrixColumn(it,1):(Ie.setFromMatrixColumn(it,0),Ie.crossVectors(r.object.up,Ie)),Ie.multiplyScalar(Me),v.add(Ie)}})(),te=(()=>{const Ie=new Oe;return function(Me,it){const Qt=r.domElement;if(Qt&&r.object instanceof os&&r.object.isPerspectiveCamera){const Xe=r.object.position;Ie.copy(Xe).sub(r.target);let It=Ie.length();It*=Math.tan(r.object.fov/2*Math.PI/180),fe(2*Me*It/Qt.clientHeight,r.object.matrix),xe(2*it*It/Qt.clientHeight,r.object.matrix)}else Qt&&r.object instanceof Rp&&r.object.isOrthographicCamera?(fe(Me*(r.object.right-r.object.left)/r.object.zoom/Qt.clientWidth,r.object.matrix),xe(it*(r.object.top-r.object.bottom)/r.object.zoom/Qt.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function he(Ie){r.object instanceof os&&r.object.isPerspectiveCamera||r.object instanceof Rp&&r.object.isOrthographicCamera?g/=Ie:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function ve(Ie){r.object instanceof os&&r.object.isPerspectiveCamera||r.object instanceof Rp&&r.object.isOrthographicCamera?g*=Ie:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function ze(Ie){if(!r.zoomToCursor||!r.domElement)return;Z=!0;const Ve=r.domElement.getBoundingClientRect(),Me=Ie.clientX-Ve.left,it=Ie.clientY-Ve.top,Qt=Ve.width,Xe=Ve.height;U.x=Me/Qt*2-1,U.y=-(it/Xe)*2+1,B.set(U.x,U.y,1).unproject(r.object).sub(r.object.position).normalize()}function Ue(Ie){return Math.max(r.minDistance,Math.min(r.maxDistance,Ie))}function rt(Ie){x.set(Ie.clientX,Ie.clientY)}function Be(Ie){ze(Ie),I.set(Ie.clientX,Ie.clientY)}function st(Ie){w.set(Ie.clientX,Ie.clientY)}function ct(Ie){b.set(Ie.clientX,Ie.clientY),M.subVectors(b,x).multiplyScalar(r.rotateSpeed);const Ve=r.domElement;Ve&&(ie(2*Math.PI*M.x/Ve.clientHeight),ce(2*Math.PI*M.y/Ve.clientHeight)),x.copy(b),r.update()}function Dt(Ie){R.set(Ie.clientX,Ie.clientY),O.subVectors(R,I),O.y>0?he(me()):O.y<0&&ve(me()),I.copy(R),r.update()}function zt(Ie){T.set(Ie.clientX,Ie.clientY),C.subVectors(T,w).multiplyScalar(r.panSpeed),te(C.x,C.y),w.copy(T),r.update()}function Fe(Ie){ze(Ie),Ie.deltaY<0?ve(me()):Ie.deltaY>0&&he(me()),r.update()}function lt(Ie){let Ve=!1;switch(Ie.code){case r.keys.UP:te(0,r.keyPanSpeed),Ve=!0;break;case r.keys.BOTTOM:te(0,-r.keyPanSpeed),Ve=!0;break;case r.keys.LEFT:te(r.keyPanSpeed,0),Ve=!0;break;case r.keys.RIGHT:te(-r.keyPanSpeed,0),Ve=!0;break}Ve&&(Ie.preventDefault(),r.update())}function Qe(){if(j.length==1)x.set(j[0].pageX,j[0].pageY);else{const Ie=.5*(j[0].pageX+j[1].pageX),Ve=.5*(j[0].pageY+j[1].pageY);x.set(Ie,Ve)}}function ge(){if(j.length==1)w.set(j[0].pageX,j[0].pageY);else{const Ie=.5*(j[0].pageX+j[1].pageX),Ve=.5*(j[0].pageY+j[1].pageY);w.set(Ie,Ve)}}function et(){const Ie=j[0].pageX-j[1].pageX,Ve=j[0].pageY-j[1].pageY,Me=Math.sqrt(Ie*Ie+Ve*Ve);I.set(0,Me)}function ot(){r.enableZoom&&et(),r.enablePan&&ge()}function Tt(){r.enableZoom&&et(),r.enableRotate&&Qe()}function Ct(Ie){if(j.length==1)b.set(Ie.pageX,Ie.pageY);else{const Me=Ot(Ie),it=.5*(Ie.pageX+Me.x),Qt=.5*(Ie.pageY+Me.y);b.set(it,Qt)}M.subVectors(b,x).multiplyScalar(r.rotateSpeed);const Ve=r.domElement;Ve&&(ie(2*Math.PI*M.x/Ve.clientHeight),ce(2*Math.PI*M.y/Ve.clientHeight)),x.copy(b)}function Bt(Ie){if(j.length==1)T.set(Ie.pageX,Ie.pageY);else{const Ve=Ot(Ie),Me=.5*(Ie.pageX+Ve.x),it=.5*(Ie.pageY+Ve.y);T.set(Me,it)}C.subVectors(T,w).multiplyScalar(r.panSpeed),te(C.x,C.y),w.copy(T)}function Gt(Ie){const Ve=Ot(Ie),Me=Ie.pageX-Ve.x,it=Ie.pageY-Ve.y,Qt=Math.sqrt(Me*Me+it*it);R.set(0,Qt),O.set(0,Math.pow(R.y/I.y,r.zoomSpeed)),he(O.y),I.copy(R)}function sn(Ie){r.enableZoom&&Gt(Ie),r.enablePan&&Bt(Ie)}function Je(Ie){r.enableZoom&&Gt(Ie),r.enableRotate&&Ct(Ie)}function Ce(Ie){var Ve,Me;r.enabled!==!1&&(j.length===0&&((Ve=r.domElement)==null||Ve.ownerDocument.addEventListener("pointermove",_e),(Me=r.domElement)==null||Me.ownerDocument.addEventListener("pointerup",ht)),mt(Ie),Ie.pointerType==="touch"?Rt(Ie):Wt(Ie))}function _e(Ie){r.enabled!==!1&&(Ie.pointerType==="touch"?nn(Ie):jt(Ie))}function ht(Ie){var Ve,Me,it;un(Ie),j.length===0&&((Ve=r.domElement)==null||Ve.releasePointerCapture(Ie.pointerId),(Me=r.domElement)==null||Me.ownerDocument.removeEventListener("pointermove",_e),(it=r.domElement)==null||it.ownerDocument.removeEventListener("pointerup",ht)),r.dispatchEvent(a),l=s.NONE}function dt(Ie){un(Ie)}function Wt(Ie){let Ve;switch(Ie.button){case 0:Ve=r.mouseButtons.LEFT;break;case 1:Ve=r.mouseButtons.MIDDLE;break;case 2:Ve=r.mouseButtons.RIGHT;break;default:Ve=-1}switch(Ve){case Qc.DOLLY:if(r.enableZoom===!1)return;Be(Ie),l=s.DOLLY;break;case Qc.ROTATE:if(Ie.ctrlKey||Ie.metaKey||Ie.shiftKey){if(r.enablePan===!1)return;st(Ie),l=s.PAN}else{if(r.enableRotate===!1)return;rt(Ie),l=s.ROTATE}break;case Qc.PAN:if(Ie.ctrlKey||Ie.metaKey||Ie.shiftKey){if(r.enableRotate===!1)return;rt(Ie),l=s.ROTATE}else{if(r.enablePan===!1)return;st(Ie),l=s.PAN}break;default:l=s.NONE}l!==s.NONE&&r.dispatchEvent(o)}function jt(Ie){if(r.enabled!==!1)switch(l){case s.ROTATE:if(r.enableRotate===!1)return;ct(Ie);break;case s.DOLLY:if(r.enableZoom===!1)return;Dt(Ie);break;case s.PAN:if(r.enablePan===!1)return;zt(Ie);break}}function Sn(Ie){r.enabled===!1||r.enableZoom===!1||l!==s.NONE&&l!==s.ROTATE||(Ie.preventDefault(),r.dispatchEvent(o),Fe(Ie),r.dispatchEvent(a))}function cn(Ie){r.enabled===!1||r.enablePan===!1||lt(Ie)}function Rt(Ie){switch(an(Ie),j.length){case 1:switch(r.touches.ONE){case eu.ROTATE:if(r.enableRotate===!1)return;Qe(),l=s.TOUCH_ROTATE;break;case eu.PAN:if(r.enablePan===!1)return;ge(),l=s.TOUCH_PAN;break;default:l=s.NONE}break;case 2:switch(r.touches.TWO){case eu.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ot(),l=s.TOUCH_DOLLY_PAN;break;case eu.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Tt(),l=s.TOUCH_DOLLY_ROTATE;break;default:l=s.NONE}break;default:l=s.NONE}l!==s.NONE&&r.dispatchEvent(o)}function nn(Ie){switch(an(Ie),l){case s.TOUCH_ROTATE:if(r.enableRotate===!1)return;Ct(Ie),r.update();break;case s.TOUCH_PAN:if(r.enablePan===!1)return;Bt(Ie),r.update();break;case s.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;sn(Ie),r.update();break;case s.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Je(Ie),r.update();break;default:l=s.NONE}}function An(Ie){r.enabled!==!1&&Ie.preventDefault()}function mt(Ie){j.push(Ie)}function un(Ie){delete X[Ie.pointerId];for(let Ve=0;Ve<j.length;Ve++)if(j[Ve].pointerId==Ie.pointerId){j.splice(Ve,1);return}}function an(Ie){let Ve=X[Ie.pointerId];Ve===void 0&&(Ve=new Ht,X[Ie.pointerId]=Ve),Ve.set(Ie.pageX,Ie.pageY)}function Ot(Ie){const Ve=Ie.pointerId===j[0].pointerId?j[1]:j[0];return X[Ve.pointerId]}n!==void 0&&this.connect(n),this.update()}};const $0t=W.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:r,enableDamping:i=!0,keyEvents:o=!1,onChange:a,onStart:s,onEnd:l,...c},h)=>{const p=hg(O=>O.invalidate),g=hg(O=>O.camera),v=hg(O=>O.gl),x=hg(O=>O.events),b=hg(O=>O.setEvents),M=hg(O=>O.set),w=hg(O=>O.get),T=hg(O=>O.performance),C=e||g,I=r||x.connected||v.domElement,R=W.useMemo(()=>new B0t(C),[C]);return rfe(()=>{R.enabled&&R.update()},-1),W.useEffect(()=>(o&&R.connect(o===!0?I:o),R.connect(I),()=>void R.dispose()),[o,I,n,R,p]),W.useEffect(()=>{const O=Z=>{p(),n&&T.regress(),a&&a(Z)},B=Z=>{s&&s(Z)},U=Z=>{l&&l(Z)};return R.addEventListener("change",O),R.addEventListener("start",B),R.addEventListener("end",U),()=>{R.removeEventListener("start",B),R.removeEventListener("end",U),R.removeEventListener("change",O)}},[a,s,l,R,p,b]),W.useEffect(()=>{if(t){const O=w().controls;return M({controls:R}),()=>M({controls:O})}},[t,R]),W.createElement("primitive",de({ref:h,object:R,enableDamping:i},c))});var k8={},j0t=si;Object.defineProperty(k8,"__esModule",{value:!0});var cfe=k8.default=void 0,U0t=j0t(bi()),V0t=F;cfe=k8.default=(0,U0t.default)((0,V0t.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6m0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20"}),"AccountCircle");const W0t=t=>W.createElement("svg",{width:189,height:100,viewBox:"0 0 189 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},W.createElement("g",{filter:"url(#filter0_i_515_194)"},W.createElement("path",{d:"M50.5271 48.0609L50.5394 66.4046C49.79 67.2593 48.6447 68.1767 47.1037 69.1569C45.5836 70.1371 43.6362 70.9822 41.2617 71.6921C38.8871 72.3812 36.054 72.7268 32.7624 72.729C29.7832 72.731 27.0745 72.2537 24.6364 71.297C22.1983 70.3194 20.1035 68.8938 18.3523 67.0199C16.601 65.1253 15.2453 62.8137 14.2851 60.0851C13.3458 57.3566 12.875 54.2319 12.8726 50.7111L12.8708 48.0236C12.8685 44.5028 13.3351 41.3774 14.2708 38.6476C15.2065 35.9179 16.5278 33.6149 18.2349 31.7387C19.942 29.8418 21.9723 28.4029 24.3258 27.4222C26.6793 26.4414 29.2831 25.9501 32.1373 25.9482C36.1998 25.9455 39.5232 26.5995 42.1074 27.9103C44.6916 29.2002 46.6511 30.9906 47.986 33.2813C49.3417 35.5721 50.1768 38.2069 50.4913 41.1859L40.6788 41.1925C40.4694 39.6718 40.0519 38.3596 39.4261 37.2558C38.8212 36.152 37.9561 35.3089 36.8307 34.7263C35.7053 34.1229 34.2467 33.8218 32.4551 33.823C31.0176 33.8239 29.7157 34.1269 28.5494 34.7318C27.404 35.3159 26.4358 36.202 25.645 37.39C24.8541 38.5781 24.2509 40.0576 23.8354 41.8287C23.4199 43.579 23.213 45.6208 23.2145 47.9542L23.2164 50.7042C23.2179 53.0375 23.4276 55.0894 23.8455 56.86C24.2842 58.6305 24.9206 60.1093 25.7547 61.2962C26.5888 62.4623 27.6415 63.347 28.9127 63.9504C30.2048 64.5537 31.705 64.8547 33.4133 64.8536C34.7467 64.8527 35.8716 64.7478 36.7881 64.5388C37.7046 64.3091 38.4545 64.0273 39.0376 63.6936C39.6207 63.339 40.0579 63.0158 40.3494 62.7239L40.3444 55.1614L32.2506 55.1669L32.2459 48.0731L50.5271 48.0609ZM57.4815 26.5875L74.9502 26.5758C78.4294 26.5734 81.4402 27.0923 83.9825 28.1322C86.5457 29.1722 88.5155 30.7125 89.8919 32.7533C91.2682 34.794 91.9574 37.3144 91.9594 40.3144C91.9611 42.8144 91.5563 44.9397 90.7449 46.6902C89.9336 48.4407 88.7888 49.8894 87.3104 51.0363C85.8528 52.1831 84.1451 53.1113 82.1872 53.8209L78.8759 55.6357L64.0009 55.6456L63.9331 47.7394L74.9956 47.732C76.5165 47.731 77.7767 47.4593 78.7763 46.917C79.776 46.3746 80.5255 45.6137 81.0248 44.6342C81.545 43.6339 81.8046 42.467 81.8037 41.1337C81.8028 39.7587 81.5416 38.5714 81.0201 37.5717C80.4986 36.5721 79.7272 35.8122 78.7061 35.292C77.7057 34.751 76.4555 34.481 74.9555 34.482L67.6743 34.4869L67.6994 72.0806L57.5119 72.0875L57.4815 26.5875ZM82.6994 72.0706L72.4672 51.8587L83.2171 51.8202L93.6054 71.5945L93.6057 72.0633L82.6994 72.0706ZM115.068 61.9552L125.169 26.5422L136.513 26.5346L120.949 72.045L113.543 72.0499L115.068 61.9552ZM105.825 26.5551L115.943 61.9546L117.543 72.0473L110.043 72.0523L94.5127 26.5627L105.825 26.5551ZM166.033 56.7648L176.158 56.758C175.993 59.8831 175.141 62.6441 173.601 65.041C172.082 67.417 169.968 69.283 167.261 70.639C164.554 71.9741 161.335 72.6429 157.606 72.6454C154.627 72.6474 151.96 72.1388 149.605 71.1196C147.25 70.1003 145.249 68.6433 143.602 66.7486C141.976 64.833 140.724 62.5317 139.848 59.8448C138.992 57.1371 138.562 54.0853 138.56 50.6894L138.558 47.9082C138.556 44.5124 139.002 41.46 139.896 38.751C140.79 36.0421 142.07 33.7288 143.735 31.811C145.4 29.8932 147.399 28.4231 149.732 27.4007C152.065 26.3783 154.669 25.8662 157.544 25.8642C161.419 25.8616 164.69 26.5574 167.357 27.9514C170.025 29.3455 172.089 31.2607 173.549 33.6973C175.03 36.1338 175.917 38.9144 176.211 42.0392L166.054 42.046C165.97 40.2753 165.635 38.7859 165.051 37.578C164.467 36.3492 163.571 35.4227 162.362 34.7985C161.153 34.1743 159.549 33.8629 157.549 33.8642C156.091 33.8652 154.809 34.1369 153.706 34.6793C152.623 35.2217 151.717 36.066 150.989 37.2124C150.281 38.3587 149.751 39.8174 149.398 41.5884C149.045 43.3387 148.869 45.4221 148.871 47.8388L148.873 50.6825C148.874 53.0784 149.032 55.1512 149.346 56.901C149.659 58.6508 150.16 60.0983 150.848 61.2437C151.558 62.3891 152.464 63.2426 153.569 63.8044C154.673 64.3662 156.017 64.6465 157.601 64.6454C159.413 64.6442 160.923 64.362 162.131 63.7987C163.339 63.2145 164.266 62.3389 164.911 61.1718C165.556 60.0047 165.93 58.5357 166.033 56.7648Z",fill:"#0904D8"})),W.createElement("defs",null,W.createElement("filter",{id:"filter0_i_515_194",x:12.8561,y:25.8517,width:163.375,height:46.8906,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},W.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),W.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),W.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),W.createElement("feOffset",null),W.createElement("feGaussianBlur",{stdDeviation:29.85}),W.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:-1,k3:1}),W.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.227569 0 0 0 0 0.298979 0 0 0 0 0.941667 0 0 0 1 0"}),W.createElement("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow_515_194"})))),H0t=ri(t=>({toolbar:{backgroundColor:t.palette.background.paper},image:{alignSelf:"center",maxWidth:"240px",maxHeight:"20px",width:"auto",height:"auto"}})),G0t=({title:t,navIcon:e,tabs:n})=>{var b;const r=rm(),[i,o]=W.useState(null),[a,s]=W.useState(!1),l=H0t(),c=a?"Use Light Mode":"Use Dark Mode",h=F.jsx(Mg,{arrow:!0,title:c,children:F.jsx(wr,{onClick:()=>s(M=>!M),children:a?F.jsx(D3e,{}):F.jsx(N3e,{})})}),p=F.jsx(z3e,{}),g=F.jsx(F3e,{color:"disabled"}),v=F.jsx(Mg,{arrow:!0,title:((b=i==null?void 0:i.ws)==null?void 0:b.url)??"Server unknown",children:F.jsx(wr,{children:i!=null&&i.connected?p:g})}),x=[{title:"ROS",url:"/ros",submenu:[{title:"Connect ROS",action:()=>r("/topics")},{title:"Show Topics",action:()=>r("/topics")},{title:"Show Services",url:"seo",input:"yaml"}]},{title:"uav",url:"/services",submenu:[{title:"Web Design",url:"web-design"},{title:"Web Development",url:"web-dev"},{title:"SEO",url:"seo"}]}];return F.jsx(aE,{position:"static",color:"transparent",className:l.toolbar,children:F.jsx(d1,{maxWidth:"xl",children:F.jsxs(vy,{variant:"dense",children:[e??F.jsx(wr,{children:F.jsx(W0t,{className:l.image})}),F.jsx(Bn,{variant:"h6",style:{flexGrow:1,marginLeft:"1rem"},children:t??"Management Tool"}),n&&F.jsx(F.Fragment,{children:n}),Ze.Children.toArray(x.map((M,w)=>F.jsx(W.Fragment,{children:F.jsx(Bie,{items:M,depthLevel:0})},"s1-"+w))),h,v,F.jsx(cfe,{})]})})})},pJ={type:"change"},rz={type:"start"},mJ={type:"end"},cA=new Ey,gJ=new ah,q0t=Math.cos(70*Aue.DEG2RAD);class Y0t extends bf{constructor(e,n){super(),this.object=e,this.domElement=n,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Oe,this.cursor=new Oe,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Qc.ROTATE,MIDDLE:Qc.DOLLY,RIGHT:Qc.PAN},this.touches={ONE:eu.ROTATE,TWO:eu.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return s.phi},this.getAzimuthalAngle=function(){return s.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Me){Me.addEventListener("keydown",cn),this._domElementKeyEvents=Me},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",cn),this._domElementKeyEvents=null},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(pJ),r.update(),o=i.NONE},this.update=function(){const Me=new Oe,it=new pa().setFromUnitVectors(e.up,new Oe(0,1,0)),Qt=it.clone().invert(),Xe=new Oe,It=new pa,Et=new Oe,we=2*Math.PI;return function(pe=null){const Te=r.object.position;Me.copy(Te).sub(r.target),Me.applyQuaternion(it),s.setFromVector3(Me),r.autoRotate&&o===i.NONE&&le(j(pe)),r.enableDamping?(s.theta+=l.theta*r.dampingFactor,s.phi+=l.phi*r.dampingFactor):(s.theta+=l.theta,s.phi+=l.phi);let Pe=r.minAzimuthAngle,Ne=r.maxAzimuthAngle;isFinite(Pe)&&isFinite(Ne)&&(Pe<-Math.PI?Pe+=we:Pe>Math.PI&&(Pe-=we),Ne<-Math.PI?Ne+=we:Ne>Math.PI&&(Ne-=we),Pe<=Ne?s.theta=Math.max(Pe,Math.min(Ne,s.theta)):s.theta=s.theta>(Pe+Ne)/2?Math.max(Pe,s.theta):Math.min(Ne,s.theta)),s.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,s.phi)),s.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(h,r.dampingFactor):r.target.add(h),r.target.sub(r.cursor),r.target.clampLength(r.minTargetRadius,r.maxTargetRadius),r.target.add(r.cursor);let Ke=!1;if(r.zoomToCursor&&O||r.object.isOrthographicCamera)s.radius=ve(s.radius);else{const qe=s.radius;s.radius=ve(s.radius*c),Ke=qe!=s.radius}if(Me.setFromSpherical(s),Me.applyQuaternion(Qt),Te.copy(r.target).add(Me),r.object.lookAt(r.target),r.enableDamping===!0?(l.theta*=1-r.dampingFactor,l.phi*=1-r.dampingFactor,h.multiplyScalar(1-r.dampingFactor)):(l.set(0,0,0),h.set(0,0,0)),r.zoomToCursor&&O){let qe=null;if(r.object.isPerspectiveCamera){const je=Me.length();qe=ve(je*c);const tt=je-qe;r.object.position.addScaledVector(I,tt),r.object.updateMatrixWorld(),Ke=!!tt}else if(r.object.isOrthographicCamera){const je=new Oe(R.x,R.y,0);je.unproject(r.object);const tt=r.object.zoom;r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/c)),r.object.updateProjectionMatrix(),Ke=tt!==r.object.zoom;const Nt=new Oe(R.x,R.y,0);Nt.unproject(r.object),r.object.position.sub(Nt).add(je),r.object.updateMatrixWorld(),qe=Me.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;qe!==null&&(this.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(qe).add(r.object.position):(cA.origin.copy(r.object.position),cA.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(cA.direction))<q0t?e.lookAt(r.target):(gJ.setFromNormalAndCoplanarPoint(r.object.up,r.target),cA.intersectPlane(gJ,r.target))))}else if(r.object.isOrthographicCamera){const qe=r.object.zoom;r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/c)),qe!==r.object.zoom&&(r.object.updateProjectionMatrix(),Ke=!0)}return c=1,O=!1,Ke||Xe.distanceToSquared(r.object.position)>a||8*(1-It.dot(r.object.quaternion))>a||Et.distanceToSquared(r.target)>a?(r.dispatchEvent(pJ),Xe.copy(r.object.position),It.copy(r.object.quaternion),Et.copy(r.target),!0):!1}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",An),r.domElement.removeEventListener("pointerdown",sn),r.domElement.removeEventListener("pointercancel",Ce),r.domElement.removeEventListener("wheel",dt),r.domElement.removeEventListener("pointermove",Je),r.domElement.removeEventListener("pointerup",Ce),r.domElement.getRootNode().removeEventListener("keydown",jt,{capture:!0}),r._domElementKeyEvents!==null&&(r._domElementKeyEvents.removeEventListener("keydown",cn),r._domElementKeyEvents=null)};const r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=i.NONE;const a=1e-6,s=new W2,l=new W2;let c=1;const h=new Oe,p=new Ht,g=new Ht,v=new Ht,x=new Ht,b=new Ht,M=new Ht,w=new Ht,T=new Ht,C=new Ht,I=new Oe,R=new Ht;let O=!1;const B=[],U={};let Z=!1;function j(Me){return Me!==null?2*Math.PI/60*r.autoRotateSpeed*Me:2*Math.PI/60/60*r.autoRotateSpeed}function X(Me){const it=Math.abs(Me*.01);return Math.pow(.95,r.zoomSpeed*it)}function le(Me){l.theta-=Me}function me(Me){l.phi-=Me}const ie=function(){const Me=new Oe;return function(Qt,Xe){Me.setFromMatrixColumn(Xe,0),Me.multiplyScalar(-Qt),h.add(Me)}}(),ce=function(){const Me=new Oe;return function(Qt,Xe){r.screenSpacePanning===!0?Me.setFromMatrixColumn(Xe,1):(Me.setFromMatrixColumn(Xe,0),Me.crossVectors(r.object.up,Me)),Me.multiplyScalar(Qt),h.add(Me)}}(),fe=function(){const Me=new Oe;return function(Qt,Xe){const It=r.domElement;if(r.object.isPerspectiveCamera){const Et=r.object.position;Me.copy(Et).sub(r.target);let we=Me.length();we*=Math.tan(r.object.fov/2*Math.PI/180),ie(2*Qt*we/It.clientHeight,r.object.matrix),ce(2*Xe*we/It.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(ie(Qt*(r.object.right-r.object.left)/r.object.zoom/It.clientWidth,r.object.matrix),ce(Xe*(r.object.top-r.object.bottom)/r.object.zoom/It.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function xe(Me){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?c/=Me:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function te(Me){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?c*=Me:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function he(Me,it){if(!r.zoomToCursor)return;O=!0;const Qt=r.domElement.getBoundingClientRect(),Xe=Me-Qt.left,It=it-Qt.top,Et=Qt.width,we=Qt.height;R.x=Xe/Et*2-1,R.y=-(It/we)*2+1,I.set(R.x,R.y,1).unproject(r.object).sub(r.object.position).normalize()}function ve(Me){return Math.max(r.minDistance,Math.min(r.maxDistance,Me))}function ze(Me){p.set(Me.clientX,Me.clientY)}function Ue(Me){he(Me.clientX,Me.clientX),w.set(Me.clientX,Me.clientY)}function rt(Me){x.set(Me.clientX,Me.clientY)}function Be(Me){g.set(Me.clientX,Me.clientY),v.subVectors(g,p).multiplyScalar(r.rotateSpeed);const it=r.domElement;le(2*Math.PI*v.x/it.clientHeight),me(2*Math.PI*v.y/it.clientHeight),p.copy(g),r.update()}function st(Me){T.set(Me.clientX,Me.clientY),C.subVectors(T,w),C.y>0?xe(X(C.y)):C.y<0&&te(X(C.y)),w.copy(T),r.update()}function ct(Me){b.set(Me.clientX,Me.clientY),M.subVectors(b,x).multiplyScalar(r.panSpeed),fe(M.x,M.y),x.copy(b),r.update()}function Dt(Me){he(Me.clientX,Me.clientY),Me.deltaY<0?te(X(Me.deltaY)):Me.deltaY>0&&xe(X(Me.deltaY)),r.update()}function zt(Me){let it=!1;switch(Me.code){case r.keys.UP:Me.ctrlKey||Me.metaKey||Me.shiftKey?me(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):fe(0,r.keyPanSpeed),it=!0;break;case r.keys.BOTTOM:Me.ctrlKey||Me.metaKey||Me.shiftKey?me(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):fe(0,-r.keyPanSpeed),it=!0;break;case r.keys.LEFT:Me.ctrlKey||Me.metaKey||Me.shiftKey?le(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):fe(r.keyPanSpeed,0),it=!0;break;case r.keys.RIGHT:Me.ctrlKey||Me.metaKey||Me.shiftKey?le(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):fe(-r.keyPanSpeed,0),it=!0;break}it&&(Me.preventDefault(),r.update())}function Fe(Me){if(B.length===1)p.set(Me.pageX,Me.pageY);else{const it=Ie(Me),Qt=.5*(Me.pageX+it.x),Xe=.5*(Me.pageY+it.y);p.set(Qt,Xe)}}function lt(Me){if(B.length===1)x.set(Me.pageX,Me.pageY);else{const it=Ie(Me),Qt=.5*(Me.pageX+it.x),Xe=.5*(Me.pageY+it.y);x.set(Qt,Xe)}}function Qe(Me){const it=Ie(Me),Qt=Me.pageX-it.x,Xe=Me.pageY-it.y,It=Math.sqrt(Qt*Qt+Xe*Xe);w.set(0,It)}function ge(Me){r.enableZoom&&Qe(Me),r.enablePan&&lt(Me)}function et(Me){r.enableZoom&&Qe(Me),r.enableRotate&&Fe(Me)}function ot(Me){if(B.length==1)g.set(Me.pageX,Me.pageY);else{const Qt=Ie(Me),Xe=.5*(Me.pageX+Qt.x),It=.5*(Me.pageY+Qt.y);g.set(Xe,It)}v.subVectors(g,p).multiplyScalar(r.rotateSpeed);const it=r.domElement;le(2*Math.PI*v.x/it.clientHeight),me(2*Math.PI*v.y/it.clientHeight),p.copy(g)}function Tt(Me){if(B.length===1)b.set(Me.pageX,Me.pageY);else{const it=Ie(Me),Qt=.5*(Me.pageX+it.x),Xe=.5*(Me.pageY+it.y);b.set(Qt,Xe)}M.subVectors(b,x).multiplyScalar(r.panSpeed),fe(M.x,M.y),x.copy(b)}function Ct(Me){const it=Ie(Me),Qt=Me.pageX-it.x,Xe=Me.pageY-it.y,It=Math.sqrt(Qt*Qt+Xe*Xe);T.set(0,It),C.set(0,Math.pow(T.y/w.y,r.zoomSpeed)),xe(C.y),w.copy(T);const Et=(Me.pageX+it.x)*.5,we=(Me.pageY+it.y)*.5;he(Et,we)}function Bt(Me){r.enableZoom&&Ct(Me),r.enablePan&&Tt(Me)}function Gt(Me){r.enableZoom&&Ct(Me),r.enableRotate&&ot(Me)}function sn(Me){r.enabled!==!1&&(B.length===0&&(r.domElement.setPointerCapture(Me.pointerId),r.domElement.addEventListener("pointermove",Je),r.domElement.addEventListener("pointerup",Ce)),!an(Me)&&(mt(Me),Me.pointerType==="touch"?Rt(Me):_e(Me)))}function Je(Me){r.enabled!==!1&&(Me.pointerType==="touch"?nn(Me):ht(Me))}function Ce(Me){switch(un(Me),B.length){case 0:r.domElement.releasePointerCapture(Me.pointerId),r.domElement.removeEventListener("pointermove",Je),r.domElement.removeEventListener("pointerup",Ce),r.dispatchEvent(mJ),o=i.NONE;break;case 1:const it=B[0],Qt=U[it];Rt({pointerId:it,pageX:Qt.x,pageY:Qt.y});break}}function _e(Me){let it;switch(Me.button){case 0:it=r.mouseButtons.LEFT;break;case 1:it=r.mouseButtons.MIDDLE;break;case 2:it=r.mouseButtons.RIGHT;break;default:it=-1}switch(it){case Qc.DOLLY:if(r.enableZoom===!1)return;Ue(Me),o=i.DOLLY;break;case Qc.ROTATE:if(Me.ctrlKey||Me.metaKey||Me.shiftKey){if(r.enablePan===!1)return;rt(Me),o=i.PAN}else{if(r.enableRotate===!1)return;ze(Me),o=i.ROTATE}break;case Qc.PAN:if(Me.ctrlKey||Me.metaKey||Me.shiftKey){if(r.enableRotate===!1)return;ze(Me),o=i.ROTATE}else{if(r.enablePan===!1)return;rt(Me),o=i.PAN}break;default:o=i.NONE}o!==i.NONE&&r.dispatchEvent(rz)}function ht(Me){switch(o){case i.ROTATE:if(r.enableRotate===!1)return;Be(Me);break;case i.DOLLY:if(r.enableZoom===!1)return;st(Me);break;case i.PAN:if(r.enablePan===!1)return;ct(Me);break}}function dt(Me){r.enabled===!1||r.enableZoom===!1||o!==i.NONE||(Me.preventDefault(),r.dispatchEvent(rz),Dt(Wt(Me)),r.dispatchEvent(mJ))}function Wt(Me){const it=Me.deltaMode,Qt={clientX:Me.clientX,clientY:Me.clientY,deltaY:Me.deltaY};switch(it){case 1:Qt.deltaY*=16;break;case 2:Qt.deltaY*=100;break}return Me.ctrlKey&&!Z&&(Qt.deltaY*=10),Qt}function jt(Me){Me.key==="Control"&&(Z=!0,r.domElement.getRootNode().addEventListener("keyup",Sn,{passive:!0,capture:!0}))}function Sn(Me){Me.key==="Control"&&(Z=!1,r.domElement.getRootNode().removeEventListener("keyup",Sn,{passive:!0,capture:!0}))}function cn(Me){r.enabled===!1||r.enablePan===!1||zt(Me)}function Rt(Me){switch(Ot(Me),B.length){case 1:switch(r.touches.ONE){case eu.ROTATE:if(r.enableRotate===!1)return;Fe(Me),o=i.TOUCH_ROTATE;break;case eu.PAN:if(r.enablePan===!1)return;lt(Me),o=i.TOUCH_PAN;break;default:o=i.NONE}break;case 2:switch(r.touches.TWO){case eu.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ge(Me),o=i.TOUCH_DOLLY_PAN;break;case eu.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;et(Me),o=i.TOUCH_DOLLY_ROTATE;break;default:o=i.NONE}break;default:o=i.NONE}o!==i.NONE&&r.dispatchEvent(rz)}function nn(Me){switch(Ot(Me),o){case i.TOUCH_ROTATE:if(r.enableRotate===!1)return;ot(Me),r.update();break;case i.TOUCH_PAN:if(r.enablePan===!1)return;Tt(Me),r.update();break;case i.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Bt(Me),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Gt(Me),r.update();break;default:o=i.NONE}}function An(Me){r.enabled!==!1&&Me.preventDefault()}function mt(Me){B.push(Me.pointerId)}function un(Me){delete U[Me.pointerId];for(let it=0;it<B.length;it++)if(B[it]==Me.pointerId){B.splice(it,1);return}}function an(Me){for(let it=0;it<B.length;it++)if(B[it]==Me.pointerId)return!0;return!1}function Ot(Me){let it=U[Me.pointerId];it===void 0&&(it=new Ht,U[Me.pointerId]=it),it.set(Me.pageX,Me.pageY)}function Ie(Me){const it=Me.pointerId===B[0]?B[1]:B[0];return U[it]}r.domElement.addEventListener("contextmenu",An),r.domElement.addEventListener("pointerdown",sn),r.domElement.addEventListener("pointercancel",Ce),r.domElement.addEventListener("wheel",dt,{passive:!1}),r.domElement.getRootNode().addEventListener("keydown",jt,{passive:!0,capture:!0}),this.update()}}Hde({OrbitControls:Y0t});function X0t(t){const e=t.materialProps??{wireframe:!0,color:new Fn(9358407)};return F.jsxs("group",{rotation:[0,0,t.theta],position:[t.x,t.y,0],scale:t.scale??[1,1,1],children:[F.jsxs("mesh",{scale:[.05,.05,.05],children:[F.jsx("boxGeometry",{}),F.jsx("meshBasicMaterial",{color:16711680})]}),F.jsx("group",{position:[.75,0,0],children:F.jsxs("mesh",{rotation:[0,0,-Math.PI/2],scale:[.5,.5,.5],children:[F.jsx("coneGeometry",{}),F.jsx("meshBasicMaterial",{...e})]})}),F.jsx("group",{position:[.25,0,0],children:F.jsxs("mesh",{rotation:[0,0,-Math.PI/2],scale:[.2,.5,.2],children:[F.jsx("cylinderGeometry",{}),F.jsx("meshBasicMaterial",{...e})]})})]})}function K0t({position:t,polyhedron:e}){const n=W.useRef(),[r,i]=W.useState(1);return console.log(e),rfe((o,a)=>{n.current.rotation.x+=a,n.current.rotation.y+=.5*a}),F.jsx("mesh",{position:t,ref:n,onPointerDown:()=>{i((r+1)%3)},geometry:e[r],children:F.jsx("meshBasicMaterial",{color:"lime",wireframe:!0})})}const Z0t=ri(t=>({root:{margin:"0",height:"100vh"},sidebarStyle:{display:"flex",flexDirection:"column",position:"fixed",left:0,top:"88px",height:"calc(100% - 95px)",width:"560px",margin:"0px",zIndex:3},middleStyle:{flex:1,display:"grid"},panelElevation:{display:"flex",flexDirection:"column",position:"fixed",right:0,bottom:0,height:"30vh",width:"calc(100% - 560px)",margin:"0px",zIndex:3}})),J0t=(t,e)=>{setList([...list,toastProperties])},Q0t=()=>{const t=Z0t(),e=0,[n,r]=W.useState(!1),i=mr(p=>p.data.positions),[o,a]=W.useState([]),s=[new Cy,new U1(.785398),new VE(.785398)];W.useEffect(()=>{a(Object.values(i))},[i]);const l=F.jsx(F.Fragment,{children:F.jsxs(dre,{value:e,onChange:(p,g)=>navigate(`/robot/${id}/${g}`),style:{flexGrow:1},children:[F.jsx(Xv,{label:"Viz"}),F.jsx(Xv,{label:"Imagery"}),F.jsx(Xv,{label:"Stats"}),F.jsx(Xv,{label:"Report"})]})}),c=[];c.push(new Oe(-10,0,0)),c.push(new Oe(0,10,0)),c.push(new Oe(10,0,0));const h=new Dr().setFromPoints(c);return F.jsx("div",{className:t.root,children:F.jsx(IU,{children:F.jsxs(xE,{notification:J0t,children:[F.jsx(G0t,{tabs:l}),F.jsx(_E,{}),F.jsx("div",{style:{float:"right",width:"calc(100% - 560px)",height:"calc(70vh - 95px)",right:"0px",margin:"auto"},children:F.jsxs(D0t,{camera:{position:[1,2,3]},children:[F.jsx(K0t,{position:[2,2,0],polyhedron:s}),F.jsx("line",{geometry:h,children:F.jsx("lineBasicMaterial",{attach:"material",color:"#9c88ff",linewidth:10,linecap:"round",linejoin:"round"})}),F.jsxs("mesh",{"rotation-y":2,children:[F.jsx("boxGeometry",{}),F.jsx("meshBasicMaterial",{color:"orange"})]}),F.jsxs("mesh",{rotation:[-Math.PI/2,0,0],children:[F.jsx("planeGeometry",{args:[5,5,64,64]}),F.jsx("meshBasicMaterial",{attach:"material",transparent:!0,side:af})]}),F.jsx(X0t,{x:0,y:0,theta:0,materialProps:{color:new Fn(3311528),wireframe:!0}}),F.jsx($0t,{}),F.jsx("axesHelper",{args:[5]}),F.jsx("gridHelper",{})]})}),F.jsx("div",{className:t.sidebarStyle,children:F.jsx("div",{className:t.middleStyle,children:F.jsx(Ls,{square:!0,children:F.jsx(Mse,{SetOpenSave:r})})})}),F.jsx("div",{className:t.panelElevation,children:F.jsx("div",{className:t.middleStyle,children:F.jsx(Ls,{square:!0,children:F.jsx($6,{})})})}),n&&F.jsx(xce,{SetOpenSave:r})]})})})},ext=()=>{const t=rm();EI();const e=hDe();return h1(async()=>{t("/")},[e]),F.jsx(Vge,{children:F.jsxs(Nl,{path:"/",element:F.jsx(fDe,{}),children:[F.jsx(Nl,{index:!0,element:F.jsx(tje,{})}),F.jsx(Nl,{path:"mission",element:F.jsx(aut,{})}),F.jsx(Nl,{path:"3Dmission",element:F.jsx(Q0t,{})}),F.jsx(Nl,{path:"planning",element:F.jsx(Xut,{})}),F.jsx(Nl,{path:"camera",element:F.jsx(Eut,{})}),F.jsx(Nl,{path:"device/:id",element:F.jsx(wut,{})}),F.jsx(Nl,{path:"replay",element:F.jsx(uut,{})}),F.jsx(Nl,{path:"topics",element:F.jsx(Cut,{})}),F.jsx(Nl,{path:"event/:id",element:F.jsx(sN,{})}),F.jsxs(Nl,{path:"reports",children:[F.jsx(Nl,{path:"events",element:F.jsx(sN,{})}),F.jsx(Nl,{path:"mission",element:F.jsx(cut,{})}),F.jsx(Nl,{path:"mission/:id",element:F.jsx(sN,{})})]})]})})},txt=()=>{const t={white:A0.white,background:yh[50],primary:vte[900],secondary:tf[800],positive:tf[500],medium:p$[700],negative:xp[500],neutral:yh[500],geometry:"#3bb2d0"};return{background:{default:t.background},primary:{main:t.primary},secondary:{main:t.secondary,contrastText:t.white},colors:t}},nxt={sidebarWidth:"28%",sidebarWidthTablet:"52px",drawerWidthDesktop:"360px",drawerWidthTablet:"320px",drawerHeightPhone:"250px",filterFormWidth:"160px",eventsDrawerWidth:"320px",bottomBarHeight:56,popupMapOffset:300,popupMaxWidth:288,popupImageHeight:144},rxt={MuiUseMediaQuery:{defaultProps:{noSsr:!0}},MuiOutlinedInput:{styleOverrides:{root:{backgroundColor:yh[50]}}},MuiButton:{styleOverrides:{sizeMedium:{height:"40px"}}},MuiFormControl:{defaultProps:{size:"small"}},MuiSnackbar:{defaultProps:{anchorOrigin:{vertical:"bottom",horizontal:"center"}}}},ixt=()=>W.useMemo(()=>L$({palette:txt(),dimensions:nxt,components:rxt}),[]),oxt=({children:t})=>{const e=ixt();return F.jsx(L1e,{theme:e,children:t})},sxt=({children:t})=>{const e=Zl(),n=mr(o=>!!o.session.server),[r,i]=W.useState(null);return h1(async()=>{if(!r)try{const o=await fetch("/api/server");if(o.ok)e(ef.updateServer(await o.json()));else throw Error(await o.text())}catch(o){i(o.message)}},[r]),r?F.jsx(xSe,{severity:"error",action:F.jsx(wr,{color:"inherit",size:"small",onClick:()=>i(null),children:F.jsx(XR,{fontSize:"inherit"})}),children:r}):n?t:F.jsx(DAe,{})};b0e();const axt=kee(document.getElementById("root"));axt.render(F.jsx(Jye,{store:Qve,children:F.jsx($te,{injectFirst:!0,children:F.jsxs(oxt,{children:[F.jsx(HTe,{}),F.jsx(sxt,{children:F.jsx(Hge,{children:F.jsx(ext,{})})})]})})}))});export default lxt();
