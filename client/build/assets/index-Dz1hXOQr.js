var Tpe=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var t_t=Tpe((l_t,wP)=>{function Cpe(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var zx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Zf(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var QJ={exports:{}},AR={},eQ={exports:{}},ei={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vE=Symbol.for("react.element"),Ape=Symbol.for("react.portal"),Ppe=Symbol.for("react.fragment"),Ipe=Symbol.for("react.strict_mode"),Rpe=Symbol.for("react.profiler"),kpe=Symbol.for("react.provider"),Ope=Symbol.for("react.context"),Lpe=Symbol.for("react.forward_ref"),Dpe=Symbol.for("react.suspense"),Npe=Symbol.for("react.memo"),zpe=Symbol.for("react.lazy"),PH=Symbol.iterator;function Fpe(t){return t===null||typeof t!="object"?null:(t=PH&&t[PH]||t["@@iterator"],typeof t=="function"?t:null)}var tQ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nQ=Object.assign,rQ={};function P1(t,e,n){this.props=t,this.context=e,this.refs=rQ,this.updater=n||tQ}P1.prototype.isReactComponent={};P1.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};P1.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function iQ(){}iQ.prototype=P1.prototype;function z5(t,e,n){this.props=t,this.context=e,this.refs=rQ,this.updater=n||tQ}var F5=z5.prototype=new iQ;F5.constructor=z5;nQ(F5,P1.prototype);F5.isPureReactComponent=!0;var IH=Array.isArray,oQ=Object.prototype.hasOwnProperty,B5={current:null},sQ={key:!0,ref:!0,__self:!0,__source:!0};function aQ(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)oQ.call(e,r)&&!sQ.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),d=0;d<a;d++)l[d]=arguments[d+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:vE,type:t,key:o,ref:s,props:i,_owner:B5.current}}function Bpe(t,e){return{$$typeof:vE,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function j5(t){return typeof t=="object"&&t!==null&&t.$$typeof===vE}function jpe(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var RH=/\/+/g;function _3(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jpe(""+t.key):e.toString(36)}function $A(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case vE:case Ape:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+_3(s,0):r,IH(i)?(n="",t!=null&&(n=t.replace(RH,"$&/")+"/"),$A(i,e,n,"",function(d){return d})):i!=null&&(j5(i)&&(i=Bpe(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(RH,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",IH(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+_3(o,a);s+=$A(o,e,n,l,i)}else if(l=Fpe(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+_3(o,a++),s+=$A(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function jT(t,e,n){if(t==null)return t;var r=[],i=0;return $A(t,r,"","",function(o){return e.call(n,o,i++)}),r}function $pe(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Zl={current:null},UA={transition:null},Upe={ReactCurrentDispatcher:Zl,ReactCurrentBatchConfig:UA,ReactCurrentOwner:B5};ei.Children={map:jT,forEach:function(t,e,n){jT(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return jT(t,function(){e++}),e},toArray:function(t){return jT(t,function(e){return e})||[]},only:function(t){if(!j5(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ei.Component=P1;ei.Fragment=Ppe;ei.Profiler=Rpe;ei.PureComponent=z5;ei.StrictMode=Ipe;ei.Suspense=Dpe;ei.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Upe;ei.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=nQ({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=B5.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)oQ.call(e,l)&&!sQ.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var d=0;d<l;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:vE,type:t.type,key:i,ref:o,props:r,_owner:s}};ei.createContext=function(t){return t={$$typeof:Ope,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:kpe,_context:t},t.Consumer=t};ei.createElement=aQ;ei.createFactory=function(t){var e=aQ.bind(null,t);return e.type=t,e};ei.createRef=function(){return{current:null}};ei.forwardRef=function(t){return{$$typeof:Lpe,render:t}};ei.isValidElement=j5;ei.lazy=function(t){return{$$typeof:zpe,_payload:{_status:-1,_result:t},_init:$pe}};ei.memo=function(t,e){return{$$typeof:Npe,type:t,compare:e===void 0?null:e}};ei.startTransition=function(t){var e=UA.transition;UA.transition={};try{t()}finally{UA.transition=e}};ei.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ei.useCallback=function(t,e){return Zl.current.useCallback(t,e)};ei.useContext=function(t){return Zl.current.useContext(t)};ei.useDebugValue=function(){};ei.useDeferredValue=function(t){return Zl.current.useDeferredValue(t)};ei.useEffect=function(t,e){return Zl.current.useEffect(t,e)};ei.useId=function(){return Zl.current.useId()};ei.useImperativeHandle=function(t,e,n){return Zl.current.useImperativeHandle(t,e,n)};ei.useInsertionEffect=function(t,e){return Zl.current.useInsertionEffect(t,e)};ei.useLayoutEffect=function(t,e){return Zl.current.useLayoutEffect(t,e)};ei.useMemo=function(t,e){return Zl.current.useMemo(t,e)};ei.useReducer=function(t,e,n){return Zl.current.useReducer(t,e,n)};ei.useRef=function(t){return Zl.current.useRef(t)};ei.useState=function(t){return Zl.current.useState(t)};ei.useSyncExternalStore=function(t,e,n){return Zl.current.useSyncExternalStore(t,e,n)};ei.useTransition=function(){return Zl.current.useTransition()};ei.version="18.2.0";eQ.exports=ei;var V=eQ.exports;const Ye=Mi(V),Ob=Cpe({__proto__:null,default:Ye},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vpe=V,Hpe=Symbol.for("react.element"),Wpe=Symbol.for("react.fragment"),Gpe=Object.prototype.hasOwnProperty,qpe=Vpe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xpe={key:!0,ref:!0,__self:!0,__source:!0};function lQ(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Gpe.call(e,r)&&!Xpe.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Hpe,type:t,key:o,ref:s,props:i,_owner:qpe.current}}AR.Fragment=Wpe;AR.jsx=lQ;AR.jsxs=lQ;QJ.exports=AR;var z=QJ.exports,cQ={exports:{}},Cu={},uQ={exports:{}},dQ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ee,ye){var be=ee.length;ee.push(ye);e:for(;0<be;){var Le=be-1>>>1,je=ee[Le];if(0<i(je,ye))ee[Le]=ye,ee[be]=je,be=Le;else break e}}function n(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var ye=ee[0],be=ee.pop();if(be!==ye){ee[0]=be;e:for(var Le=0,je=ee.length,dt=je>>>1;Le<dt;){var Be=2*(Le+1)-1,ot=ee[Be],at=Be+1,It=ee[at];if(0>i(ot,be))at<je&&0>i(It,ot)?(ee[Le]=It,ee[at]=be,Le=at):(ee[Le]=ot,ee[Be]=be,Le=Be);else if(at<je&&0>i(It,be))ee[Le]=It,ee[at]=be,Le=at;else break e}}return ye}function i(ee,ye){var be=ee.sortIndex-ye.sortIndex;return be!==0?be:ee.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],d=[],h=1,p=null,g=3,v=!1,x=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(ee){for(var ye=n(d);ye!==null;){if(ye.callback===null)r(d);else if(ye.startTime<=ee)r(d),ye.sortIndex=ye.expirationTime,e(l,ye);else break;ye=n(d)}}function P(ee){if(b=!1,A(ee),!x)if(n(l)!==null)x=!0,he(k);else{var ye=n(d);ye!==null&&we(P,ye.startTime-ee)}}function k(ee,ye){x=!1,b&&(b=!1,S(W),W=-1),v=!0;var be=g;try{for(A(ye),p=n(l);p!==null&&(!(p.expirationTime>ye)||ee&&!Y());){var Le=p.callback;if(typeof Le=="function"){p.callback=null,g=p.priorityLevel;var je=Le(p.expirationTime<=ye);ye=t.unstable_now(),typeof je=="function"?p.callback=je:p===n(l)&&r(l),A(ye)}else r(l);p=n(l)}if(p!==null)var dt=!0;else{var Be=n(d);Be!==null&&we(P,Be.startTime-ye),dt=!1}return dt}finally{p=null,g=be,v=!1}}var F=!1,B=null,W=-1,J=5,H=-1;function Y(){return!(t.unstable_now()-H<J)}function le(){if(B!==null){var ee=t.unstable_now();H=ee;var ye=!0;try{ye=B(!0,ee)}finally{ye?pe():(F=!1,B=null)}}else F=!1}var pe;if(typeof C=="function")pe=function(){C(le)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,me=re.port2;re.port1.onmessage=le,pe=function(){me.postMessage(null)}}else pe=function(){w(le,0)};function he(ee){B=ee,F||(F=!0,pe())}function we(ee,ye){W=w(function(){ee(t.unstable_now())},ye)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_continueExecution=function(){x||v||(x=!0,he(k))},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(ee){switch(g){case 1:case 2:case 3:var ye=3;break;default:ye=g}var be=g;g=ye;try{return ee()}finally{g=be}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ee,ye){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var be=g;g=ee;try{return ye()}finally{g=be}},t.unstable_scheduleCallback=function(ee,ye,be){var Le=t.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Le+be:Le):be=Le,ee){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=be+je,ee={id:h++,callback:ye,priorityLevel:ee,startTime:be,expirationTime:je,sortIndex:-1},be>Le?(ee.sortIndex=be,e(d,ee),n(l)===null&&ee===n(d)&&(b?(S(W),W=-1):b=!0,we(P,be-Le))):(ee.sortIndex=je,e(l,ee),x||v||(x=!0,he(k))),ee},t.unstable_shouldYield=Y,t.unstable_wrapCallback=function(ee){var ye=g;return function(){var be=g;g=ye;try{return ee.apply(this,arguments)}finally{g=be}}}})(dQ);uQ.exports=dQ;var Ype=uQ.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hQ=V,_u=Ype;function dn(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fQ=new Set,O2={};function n_(t,e){Lb(t,e),Lb(t+"Capture",e)}function Lb(t,e){for(O2[t]=e,t=0;t<e.length;t++)fQ.add(e[t])}var pm=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kz=Object.prototype.hasOwnProperty,Kpe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kH={},OH={};function Zpe(t){return kz.call(OH,t)?!0:kz.call(kH,t)?!1:Kpe.test(t)?OH[t]=!0:(kH[t]=!0,!1)}function Jpe(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Qpe(t,e,n,r){if(e===null||typeof e>"u"||Jpe(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Jl(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Ba={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ba[t]=new Jl(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ba[e]=new Jl(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ba[t]=new Jl(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ba[t]=new Jl(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ba[t]=new Jl(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ba[t]=new Jl(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ba[t]=new Jl(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ba[t]=new Jl(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ba[t]=new Jl(t,5,!1,t.toLowerCase(),null,!1,!1)});var $5=/[\-:]([a-z])/g;function U5(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($5,U5);Ba[e]=new Jl(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($5,U5);Ba[e]=new Jl(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($5,U5);Ba[e]=new Jl(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ba[t]=new Jl(t,1,!1,t.toLowerCase(),null,!1,!1)});Ba.xlinkHref=new Jl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ba[t]=new Jl(t,1,!1,t.toLowerCase(),null,!0,!0)});function V5(t,e,n,r){var i=Ba.hasOwnProperty(e)?Ba[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Qpe(e,n,i,r)&&(n=null),r||i===null?Zpe(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Am=hQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$T=Symbol.for("react.element"),Fx=Symbol.for("react.portal"),Bx=Symbol.for("react.fragment"),H5=Symbol.for("react.strict_mode"),Oz=Symbol.for("react.profiler"),pQ=Symbol.for("react.provider"),mQ=Symbol.for("react.context"),W5=Symbol.for("react.forward_ref"),Lz=Symbol.for("react.suspense"),Dz=Symbol.for("react.suspense_list"),G5=Symbol.for("react.memo"),Ug=Symbol.for("react.lazy"),gQ=Symbol.for("react.offscreen"),LH=Symbol.iterator;function Gw(t){return t===null||typeof t!="object"?null:(t=LH&&t[LH]||t["@@iterator"],typeof t=="function"?t:null)}var $o=Object.assign,x3;function VS(t){if(x3===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);x3=e&&e[1]||""}return`
`+x3+t}var b3=!1;function w3(t,e){if(!t||b3)return"";b3=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{b3=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?VS(t):""}function eme(t){switch(t.tag){case 5:return VS(t.type);case 16:return VS("Lazy");case 13:return VS("Suspense");case 19:return VS("SuspenseList");case 0:case 2:case 15:return t=w3(t.type,!1),t;case 11:return t=w3(t.type.render,!1),t;case 1:return t=w3(t.type,!0),t;default:return""}}function Nz(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bx:return"Fragment";case Fx:return"Portal";case Oz:return"Profiler";case H5:return"StrictMode";case Lz:return"Suspense";case Dz:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case mQ:return(t.displayName||"Context")+".Consumer";case pQ:return(t._context.displayName||"Context")+".Provider";case W5:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case G5:return e=t.displayName||null,e!==null?e:Nz(t.type)||"Memo";case Ug:e=t._payload,t=t._init;try{return Nz(t(e))}catch{}}return null}function tme(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nz(e);case 8:return e===H5?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Cy(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yQ(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nme(t){var e=yQ(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function UT(t){t._valueTracker||(t._valueTracker=nme(t))}function vQ(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=yQ(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function SP(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function zz(t,e){var n=e.checked;return $o({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function DH(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Cy(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _Q(t,e){e=e.checked,e!=null&&V5(t,"checked",e,!1)}function Fz(t,e){_Q(t,e);var n=Cy(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Bz(t,e.type,n):e.hasOwnProperty("defaultValue")&&Bz(t,e.type,Cy(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function NH(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Bz(t,e,n){(e!=="number"||SP(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var HS=Array.isArray;function fb(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Cy(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function jz(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(dn(91));return $o({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zH(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(dn(92));if(HS(n)){if(1<n.length)throw Error(dn(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Cy(n)}}function xQ(t,e){var n=Cy(e.value),r=Cy(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function FH(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bQ(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $z(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bQ(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var VT,wQ=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(VT=VT||document.createElement("div"),VT.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=VT.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function L2(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var n2={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rme=["Webkit","ms","Moz","O"];Object.keys(n2).forEach(function(t){rme.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),n2[e]=n2[t]})});function SQ(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||n2.hasOwnProperty(t)&&n2[t]?(""+e).trim():e+"px"}function MQ(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=SQ(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var ime=$o({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Uz(t,e){if(e){if(ime[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(dn(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(dn(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(dn(61))}if(e.style!=null&&typeof e.style!="object")throw Error(dn(62))}}function Vz(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hz=null;function q5(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wz=null,pb=null,mb=null;function BH(t){if(t=bE(t)){if(typeof Wz!="function")throw Error(dn(280));var e=t.stateNode;e&&(e=OR(e),Wz(t.stateNode,t.type,e))}}function EQ(t){pb?mb?mb.push(t):mb=[t]:pb=t}function TQ(){if(pb){var t=pb,e=mb;if(mb=pb=null,BH(t),e)for(t=0;t<e.length;t++)BH(e[t])}}function CQ(t,e){return t(e)}function AQ(){}var S3=!1;function PQ(t,e,n){if(S3)return t(e,n);S3=!0;try{return CQ(t,e,n)}finally{S3=!1,(pb!==null||mb!==null)&&(AQ(),TQ())}}function D2(t,e){var n=t.stateNode;if(n===null)return null;var r=OR(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(dn(231,e,typeof n));return n}var Gz=!1;if(pm)try{var qw={};Object.defineProperty(qw,"passive",{get:function(){Gz=!0}}),window.addEventListener("test",qw,qw),window.removeEventListener("test",qw,qw)}catch{Gz=!1}function ome(t,e,n,r,i,o,s,a,l){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var r2=!1,MP=null,EP=!1,qz=null,sme={onError:function(t){r2=!0,MP=t}};function ame(t,e,n,r,i,o,s,a,l){r2=!1,MP=null,ome.apply(sme,arguments)}function lme(t,e,n,r,i,o,s,a,l){if(ame.apply(this,arguments),r2){if(r2){var d=MP;r2=!1,MP=null}else throw Error(dn(198));EP||(EP=!0,qz=d)}}function r_(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function IQ(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function jH(t){if(r_(t)!==t)throw Error(dn(188))}function cme(t){var e=t.alternate;if(!e){if(e=r_(t),e===null)throw Error(dn(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return jH(i),t;if(o===r)return jH(i),e;o=o.sibling}throw Error(dn(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(dn(189))}}if(n.alternate!==r)throw Error(dn(190))}if(n.tag!==3)throw Error(dn(188));return n.stateNode.current===n?t:e}function RQ(t){return t=cme(t),t!==null?kQ(t):null}function kQ(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=kQ(t);if(e!==null)return e;t=t.sibling}return null}var OQ=_u.unstable_scheduleCallback,$H=_u.unstable_cancelCallback,ume=_u.unstable_shouldYield,dme=_u.unstable_requestPaint,cs=_u.unstable_now,hme=_u.unstable_getCurrentPriorityLevel,X5=_u.unstable_ImmediatePriority,LQ=_u.unstable_UserBlockingPriority,TP=_u.unstable_NormalPriority,fme=_u.unstable_LowPriority,DQ=_u.unstable_IdlePriority,PR=null,kf=null;function pme(t){if(kf&&typeof kf.onCommitFiberRoot=="function")try{kf.onCommitFiberRoot(PR,t,void 0,(t.current.flags&128)===128)}catch{}}var Mh=Math.clz32?Math.clz32:yme,mme=Math.log,gme=Math.LN2;function yme(t){return t>>>=0,t===0?32:31-(mme(t)/gme|0)|0}var HT=64,WT=4194304;function WS(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function CP(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=WS(a):(o&=s,o!==0&&(r=WS(o)))}else s=n&~i,s!==0?r=WS(s):o!==0&&(r=WS(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Mh(e),i=1<<n,r|=t[n],e&=~i;return r}function vme(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _me(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Mh(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=vme(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function Xz(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function NQ(){var t=HT;return HT<<=1,!(HT&4194240)&&(HT=64),t}function M3(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _E(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mh(e),t[e]=n}function xme(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Mh(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Y5(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Mh(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Vi=0;function zQ(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var FQ,K5,BQ,jQ,$Q,Yz=!1,GT=[],cy=null,uy=null,dy=null,N2=new Map,z2=new Map,qg=[],bme="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function UH(t,e){switch(t){case"focusin":case"focusout":cy=null;break;case"dragenter":case"dragleave":uy=null;break;case"mouseover":case"mouseout":dy=null;break;case"pointerover":case"pointerout":N2.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":z2.delete(e.pointerId)}}function Xw(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=bE(e),e!==null&&K5(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function wme(t,e,n,r,i){switch(e){case"focusin":return cy=Xw(cy,t,e,n,r,i),!0;case"dragenter":return uy=Xw(uy,t,e,n,r,i),!0;case"mouseover":return dy=Xw(dy,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return N2.set(o,Xw(N2.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,z2.set(o,Xw(z2.get(o)||null,t,e,n,r,i)),!0}return!1}function UQ(t){var e=t0(t.target);if(e!==null){var n=r_(e);if(n!==null){if(e=n.tag,e===13){if(e=IQ(n),e!==null){t.blockedOn=e,$Q(t.priority,function(){BQ(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function VA(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Kz(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Hz=r,n.target.dispatchEvent(r),Hz=null}else return e=bE(n),e!==null&&K5(e),t.blockedOn=n,!1;e.shift()}return!0}function VH(t,e,n){VA(t)&&n.delete(e)}function Sme(){Yz=!1,cy!==null&&VA(cy)&&(cy=null),uy!==null&&VA(uy)&&(uy=null),dy!==null&&VA(dy)&&(dy=null),N2.forEach(VH),z2.forEach(VH)}function Yw(t,e){t.blockedOn===e&&(t.blockedOn=null,Yz||(Yz=!0,_u.unstable_scheduleCallback(_u.unstable_NormalPriority,Sme)))}function F2(t){function e(i){return Yw(i,t)}if(0<GT.length){Yw(GT[0],t);for(var n=1;n<GT.length;n++){var r=GT[n];r.blockedOn===t&&(r.blockedOn=null)}}for(cy!==null&&Yw(cy,t),uy!==null&&Yw(uy,t),dy!==null&&Yw(dy,t),N2.forEach(e),z2.forEach(e),n=0;n<qg.length;n++)r=qg[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qg.length&&(n=qg[0],n.blockedOn===null);)UQ(n),n.blockedOn===null&&qg.shift()}var gb=Am.ReactCurrentBatchConfig,AP=!0;function Mme(t,e,n,r){var i=Vi,o=gb.transition;gb.transition=null;try{Vi=1,Z5(t,e,n,r)}finally{Vi=i,gb.transition=o}}function Eme(t,e,n,r){var i=Vi,o=gb.transition;gb.transition=null;try{Vi=4,Z5(t,e,n,r)}finally{Vi=i,gb.transition=o}}function Z5(t,e,n,r){if(AP){var i=Kz(t,e,n,r);if(i===null)L3(t,e,r,PP,n),UH(t,r);else if(wme(i,t,e,n,r))r.stopPropagation();else if(UH(t,r),e&4&&-1<bme.indexOf(t)){for(;i!==null;){var o=bE(i);if(o!==null&&FQ(o),o=Kz(t,e,n,r),o===null&&L3(t,e,r,PP,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else L3(t,e,r,null,n)}}var PP=null;function Kz(t,e,n,r){if(PP=null,t=q5(r),t=t0(t),t!==null)if(e=r_(t),e===null)t=null;else if(n=e.tag,n===13){if(t=IQ(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return PP=t,null}function VQ(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hme()){case X5:return 1;case LQ:return 4;case TP:case fme:return 16;case DQ:return 536870912;default:return 16}default:return 16}}var Qg=null,J5=null,HA=null;function HQ(){if(HA)return HA;var t,e=J5,n=e.length,r,i="value"in Qg?Qg.value:Qg.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return HA=i.slice(t,1<r?1-r:void 0)}function WA(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qT(){return!0}function HH(){return!1}function Au(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?qT:HH,this.isPropagationStopped=HH,this}return $o(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qT)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qT)},persist:function(){},isPersistent:qT}),e}var I1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Q5=Au(I1),xE=$o({},I1,{view:0,detail:0}),Tme=Au(xE),E3,T3,Kw,IR=$o({},xE,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ej,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Kw&&(Kw&&t.type==="mousemove"?(E3=t.screenX-Kw.screenX,T3=t.screenY-Kw.screenY):T3=E3=0,Kw=t),E3)},movementY:function(t){return"movementY"in t?t.movementY:T3}}),WH=Au(IR),Cme=$o({},IR,{dataTransfer:0}),Ame=Au(Cme),Pme=$o({},xE,{relatedTarget:0}),C3=Au(Pme),Ime=$o({},I1,{animationName:0,elapsedTime:0,pseudoElement:0}),Rme=Au(Ime),kme=$o({},I1,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ome=Au(kme),Lme=$o({},I1,{data:0}),GH=Au(Lme),Dme={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nme={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zme={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fme(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zme[t])?!!e[t]:!1}function ej(){return Fme}var Bme=$o({},xE,{key:function(t){if(t.key){var e=Dme[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=WA(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Nme[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ej,charCode:function(t){return t.type==="keypress"?WA(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?WA(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jme=Au(Bme),$me=$o({},IR,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qH=Au($me),Ume=$o({},xE,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ej}),Vme=Au(Ume),Hme=$o({},I1,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wme=Au(Hme),Gme=$o({},IR,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qme=Au(Gme),Xme=[9,13,27,32],tj=pm&&"CompositionEvent"in window,i2=null;pm&&"documentMode"in document&&(i2=document.documentMode);var Yme=pm&&"TextEvent"in window&&!i2,WQ=pm&&(!tj||i2&&8<i2&&11>=i2),XH=" ",YH=!1;function GQ(t,e){switch(t){case"keyup":return Xme.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qQ(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var jx=!1;function Kme(t,e){switch(t){case"compositionend":return qQ(e);case"keypress":return e.which!==32?null:(YH=!0,XH);case"textInput":return t=e.data,t===XH&&YH?null:t;default:return null}}function Zme(t,e){if(jx)return t==="compositionend"||!tj&&GQ(t,e)?(t=HQ(),HA=J5=Qg=null,jx=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return WQ&&e.locale!=="ko"?null:e.data;default:return null}}var Jme={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function KH(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Jme[t.type]:e==="textarea"}function XQ(t,e,n,r){EQ(r),e=IP(e,"onChange"),0<e.length&&(n=new Q5("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var o2=null,B2=null;function Qme(t){oee(t,0)}function RR(t){var e=Vx(t);if(vQ(e))return t}function ege(t,e){if(t==="change")return e}var YQ=!1;if(pm){var A3;if(pm){var P3="oninput"in document;if(!P3){var ZH=document.createElement("div");ZH.setAttribute("oninput","return;"),P3=typeof ZH.oninput=="function"}A3=P3}else A3=!1;YQ=A3&&(!document.documentMode||9<document.documentMode)}function JH(){o2&&(o2.detachEvent("onpropertychange",KQ),B2=o2=null)}function KQ(t){if(t.propertyName==="value"&&RR(B2)){var e=[];XQ(e,B2,t,q5(t)),PQ(Qme,e)}}function tge(t,e,n){t==="focusin"?(JH(),o2=e,B2=n,o2.attachEvent("onpropertychange",KQ)):t==="focusout"&&JH()}function nge(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return RR(B2)}function rge(t,e){if(t==="click")return RR(e)}function ige(t,e){if(t==="input"||t==="change")return RR(e)}function oge(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ah=typeof Object.is=="function"?Object.is:oge;function j2(t,e){if(Ah(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!kz.call(e,i)||!Ah(t[i],e[i]))return!1}return!0}function QH(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function eW(t,e){var n=QH(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=QH(n)}}function ZQ(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ZQ(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function JQ(){for(var t=window,e=SP();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=SP(t.document)}return e}function nj(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sge(t){var e=JQ(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ZQ(n.ownerDocument.documentElement,n)){if(r!==null&&nj(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=eW(n,o);var s=eW(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var age=pm&&"documentMode"in document&&11>=document.documentMode,$x=null,Zz=null,s2=null,Jz=!1;function tW(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jz||$x==null||$x!==SP(r)||(r=$x,"selectionStart"in r&&nj(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),s2&&j2(s2,r)||(s2=r,r=IP(Zz,"onSelect"),0<r.length&&(e=new Q5("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=$x)))}function XT(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ux={animationend:XT("Animation","AnimationEnd"),animationiteration:XT("Animation","AnimationIteration"),animationstart:XT("Animation","AnimationStart"),transitionend:XT("Transition","TransitionEnd")},I3={},QQ={};pm&&(QQ=document.createElement("div").style,"AnimationEvent"in window||(delete Ux.animationend.animation,delete Ux.animationiteration.animation,delete Ux.animationstart.animation),"TransitionEvent"in window||delete Ux.transitionend.transition);function kR(t){if(I3[t])return I3[t];if(!Ux[t])return t;var e=Ux[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in QQ)return I3[t]=e[n];return t}var eee=kR("animationend"),tee=kR("animationiteration"),nee=kR("animationstart"),ree=kR("transitionend"),iee=new Map,nW="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fy(t,e){iee.set(t,e),n_(e,[t])}for(var R3=0;R3<nW.length;R3++){var k3=nW[R3],lge=k3.toLowerCase(),cge=k3[0].toUpperCase()+k3.slice(1);Fy(lge,"on"+cge)}Fy(eee,"onAnimationEnd");Fy(tee,"onAnimationIteration");Fy(nee,"onAnimationStart");Fy("dblclick","onDoubleClick");Fy("focusin","onFocus");Fy("focusout","onBlur");Fy(ree,"onTransitionEnd");Lb("onMouseEnter",["mouseout","mouseover"]);Lb("onMouseLeave",["mouseout","mouseover"]);Lb("onPointerEnter",["pointerout","pointerover"]);Lb("onPointerLeave",["pointerout","pointerover"]);n_("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));n_("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));n_("onBeforeInput",["compositionend","keypress","textInput","paste"]);n_("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));n_("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));n_("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var GS="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uge=new Set("cancel close invalid load scroll toggle".split(" ").concat(GS));function rW(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,lme(r,e,void 0,t),t.currentTarget=null}function oee(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,d=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;rW(i,a,d),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,d=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;rW(i,a,d),o=l}}}if(EP)throw t=qz,EP=!1,qz=null,t}function po(t,e){var n=e[rF];n===void 0&&(n=e[rF]=new Set);var r=t+"__bubble";n.has(r)||(see(e,t,2,!1),n.add(r))}function O3(t,e,n){var r=0;e&&(r|=4),see(n,t,r,e)}var YT="_reactListening"+Math.random().toString(36).slice(2);function $2(t){if(!t[YT]){t[YT]=!0,fQ.forEach(function(n){n!=="selectionchange"&&(uge.has(n)||O3(n,!1,t),O3(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[YT]||(e[YT]=!0,O3("selectionchange",!1,e))}}function see(t,e,n,r){switch(VQ(e)){case 1:var i=Mme;break;case 4:i=Eme;break;default:i=Z5}n=i.bind(null,e,n,t),i=void 0,!Gz||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function L3(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=t0(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}PQ(function(){var d=o,h=q5(n),p=[];e:{var g=iee.get(t);if(g!==void 0){var v=Q5,x=t;switch(t){case"keypress":if(WA(n)===0)break e;case"keydown":case"keyup":v=jme;break;case"focusin":x="focus",v=C3;break;case"focusout":x="blur",v=C3;break;case"beforeblur":case"afterblur":v=C3;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=WH;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Ame;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Vme;break;case eee:case tee:case nee:v=Rme;break;case ree:v=Wme;break;case"scroll":v=Tme;break;case"wheel":v=qme;break;case"copy":case"cut":case"paste":v=Ome;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=qH}var b=(e&4)!==0,w=!b&&t==="scroll",S=b?g!==null?g+"Capture":null:g;b=[];for(var C=d,A;C!==null;){A=C;var P=A.stateNode;if(A.tag===5&&P!==null&&(A=P,S!==null&&(P=D2(C,S),P!=null&&b.push(U2(C,P,A)))),w)break;C=C.return}0<b.length&&(g=new v(g,x,null,n,h),p.push({event:g,listeners:b}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",g&&n!==Hz&&(x=n.relatedTarget||n.fromElement)&&(t0(x)||x[mm]))break e;if((v||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,v?(x=n.relatedTarget||n.toElement,v=d,x=x?t0(x):null,x!==null&&(w=r_(x),x!==w||x.tag!==5&&x.tag!==6)&&(x=null)):(v=null,x=d),v!==x)){if(b=WH,P="onMouseLeave",S="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(b=qH,P="onPointerLeave",S="onPointerEnter",C="pointer"),w=v==null?g:Vx(v),A=x==null?g:Vx(x),g=new b(P,C+"leave",v,n,h),g.target=w,g.relatedTarget=A,P=null,t0(h)===d&&(b=new b(S,C+"enter",x,n,h),b.target=A,b.relatedTarget=w,P=b),w=P,v&&x)t:{for(b=v,S=x,C=0,A=b;A;A=W_(A))C++;for(A=0,P=S;P;P=W_(P))A++;for(;0<C-A;)b=W_(b),C--;for(;0<A-C;)S=W_(S),A--;for(;C--;){if(b===S||S!==null&&b===S.alternate)break t;b=W_(b),S=W_(S)}b=null}else b=null;v!==null&&iW(p,g,v,b,!1),x!==null&&w!==null&&iW(p,w,x,b,!0)}}e:{if(g=d?Vx(d):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var k=ege;else if(KH(g))if(YQ)k=ige;else{k=nge;var F=tge}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(k=rge);if(k&&(k=k(t,d))){XQ(p,k,n,h);break e}F&&F(t,g,d),t==="focusout"&&(F=g._wrapperState)&&F.controlled&&g.type==="number"&&Bz(g,"number",g.value)}switch(F=d?Vx(d):window,t){case"focusin":(KH(F)||F.contentEditable==="true")&&($x=F,Zz=d,s2=null);break;case"focusout":s2=Zz=$x=null;break;case"mousedown":Jz=!0;break;case"contextmenu":case"mouseup":case"dragend":Jz=!1,tW(p,n,h);break;case"selectionchange":if(age)break;case"keydown":case"keyup":tW(p,n,h)}var B;if(tj)e:{switch(t){case"compositionstart":var W="onCompositionStart";break e;case"compositionend":W="onCompositionEnd";break e;case"compositionupdate":W="onCompositionUpdate";break e}W=void 0}else jx?GQ(t,n)&&(W="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(W="onCompositionStart");W&&(WQ&&n.locale!=="ko"&&(jx||W!=="onCompositionStart"?W==="onCompositionEnd"&&jx&&(B=HQ()):(Qg=h,J5="value"in Qg?Qg.value:Qg.textContent,jx=!0)),F=IP(d,W),0<F.length&&(W=new GH(W,t,null,n,h),p.push({event:W,listeners:F}),B?W.data=B:(B=qQ(n),B!==null&&(W.data=B)))),(B=Yme?Kme(t,n):Zme(t,n))&&(d=IP(d,"onBeforeInput"),0<d.length&&(h=new GH("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:d}),h.data=B))}oee(p,e)})}function U2(t,e,n){return{instance:t,listener:e,currentTarget:n}}function IP(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=D2(t,n),o!=null&&r.unshift(U2(t,o,i)),o=D2(t,e),o!=null&&r.push(U2(t,o,i))),t=t.return}return r}function W_(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function iW(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,d=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&d!==null&&(a=d,i?(l=D2(n,o),l!=null&&s.unshift(U2(n,l,a))):i||(l=D2(n,o),l!=null&&s.push(U2(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var dge=/\r\n?/g,hge=/\u0000|\uFFFD/g;function oW(t){return(typeof t=="string"?t:""+t).replace(dge,`
`).replace(hge,"")}function KT(t,e,n){if(e=oW(e),oW(t)!==e&&n)throw Error(dn(425))}function RP(){}var Qz=null,eF=null;function tF(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nF=typeof setTimeout=="function"?setTimeout:void 0,fge=typeof clearTimeout=="function"?clearTimeout:void 0,sW=typeof Promise=="function"?Promise:void 0,pge=typeof queueMicrotask=="function"?queueMicrotask:typeof sW<"u"?function(t){return sW.resolve(null).then(t).catch(mge)}:nF;function mge(t){setTimeout(function(){throw t})}function D3(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),F2(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);F2(e)}function hy(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function aW(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var R1=Math.random().toString(36).slice(2),Tf="__reactFiber$"+R1,V2="__reactProps$"+R1,mm="__reactContainer$"+R1,rF="__reactEvents$"+R1,gge="__reactListeners$"+R1,yge="__reactHandles$"+R1;function t0(t){var e=t[Tf];if(e)return e;for(var n=t.parentNode;n;){if(e=n[mm]||n[Tf]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=aW(t);t!==null;){if(n=t[Tf])return n;t=aW(t)}return e}t=n,n=t.parentNode}return null}function bE(t){return t=t[Tf]||t[mm],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vx(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(dn(33))}function OR(t){return t[V2]||null}var iF=[],Hx=-1;function By(t){return{current:t}}function vo(t){0>Hx||(t.current=iF[Hx],iF[Hx]=null,Hx--)}function io(t,e){Hx++,iF[Hx]=t.current,t.current=e}var Ay={},bl=By(Ay),wc=By(!1),R0=Ay;function Db(t,e){var n=t.type.contextTypes;if(!n)return Ay;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Sc(t){return t=t.childContextTypes,t!=null}function kP(){vo(wc),vo(bl)}function lW(t,e,n){if(bl.current!==Ay)throw Error(dn(168));io(bl,e),io(wc,n)}function aee(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(dn(108,tme(t)||"Unknown",i));return $o({},n,r)}function OP(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ay,R0=bl.current,io(bl,t),io(wc,wc.current),!0}function cW(t,e,n){var r=t.stateNode;if(!r)throw Error(dn(169));n?(t=aee(t,e,R0),r.__reactInternalMemoizedMergedChildContext=t,vo(wc),vo(bl),io(bl,t)):vo(wc),io(wc,n)}var Wp=null,LR=!1,N3=!1;function lee(t){Wp===null?Wp=[t]:Wp.push(t)}function vge(t){LR=!0,lee(t)}function jy(){if(!N3&&Wp!==null){N3=!0;var t=0,e=Vi;try{var n=Wp;for(Vi=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Wp=null,LR=!1}catch(i){throw Wp!==null&&(Wp=Wp.slice(t+1)),OQ(X5,jy),i}finally{Vi=e,N3=!1}}return null}var Wx=[],Gx=0,LP=null,DP=0,cd=[],ud=0,k0=null,Kp=1,Zp="";function jv(t,e){Wx[Gx++]=DP,Wx[Gx++]=LP,LP=t,DP=e}function cee(t,e,n){cd[ud++]=Kp,cd[ud++]=Zp,cd[ud++]=k0,k0=t;var r=Kp;t=Zp;var i=32-Mh(r)-1;r&=~(1<<i),n+=1;var o=32-Mh(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Kp=1<<32-Mh(e)+i|n<<i|r,Zp=o+t}else Kp=1<<o|n<<i|r,Zp=t}function rj(t){t.return!==null&&(jv(t,1),cee(t,1,0))}function ij(t){for(;t===LP;)LP=Wx[--Gx],Wx[Gx]=null,DP=Wx[--Gx],Wx[Gx]=null;for(;t===k0;)k0=cd[--ud],cd[ud]=null,Zp=cd[--ud],cd[ud]=null,Kp=cd[--ud],cd[ud]=null}var mu=null,hu=null,Co=!1,mh=null;function uee(t,e){var n=md(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function uW(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mu=t,hu=hy(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mu=t,hu=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=k0!==null?{id:Kp,overflow:Zp}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=md(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,mu=t,hu=null,!0):!1;default:return!1}}function oF(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sF(t){if(Co){var e=hu;if(e){var n=e;if(!uW(t,e)){if(oF(t))throw Error(dn(418));e=hy(n.nextSibling);var r=mu;e&&uW(t,e)?uee(r,n):(t.flags=t.flags&-4097|2,Co=!1,mu=t)}}else{if(oF(t))throw Error(dn(418));t.flags=t.flags&-4097|2,Co=!1,mu=t}}}function dW(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mu=t}function ZT(t){if(t!==mu)return!1;if(!Co)return dW(t),Co=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!tF(t.type,t.memoizedProps)),e&&(e=hu)){if(oF(t))throw dee(),Error(dn(418));for(;e;)uee(t,e),e=hy(e.nextSibling)}if(dW(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(dn(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){hu=hy(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}hu=null}}else hu=mu?hy(t.stateNode.nextSibling):null;return!0}function dee(){for(var t=hu;t;)t=hy(t.nextSibling)}function Nb(){hu=mu=null,Co=!1}function oj(t){mh===null?mh=[t]:mh.push(t)}var _ge=Am.ReactCurrentBatchConfig;function uh(t,e){if(t&&t.defaultProps){e=$o({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var NP=By(null),zP=null,qx=null,sj=null;function aj(){sj=qx=zP=null}function lj(t){var e=NP.current;vo(NP),t._currentValue=e}function aF(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function yb(t,e){zP=t,sj=qx=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(xc=!0),t.firstContext=null)}function Md(t){var e=t._currentValue;if(sj!==t)if(t={context:t,memoizedValue:e,next:null},qx===null){if(zP===null)throw Error(dn(308));qx=t,zP.dependencies={lanes:0,firstContext:t}}else qx=qx.next=t;return e}var n0=null;function cj(t){n0===null?n0=[t]:n0.push(t)}function hee(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,cj(e)):(n.next=i.next,i.next=n),e.interleaved=n,gm(t,r)}function gm(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vg=!1;function uj(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fee(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function am(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fy(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,vi&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,gm(t,n)}return i=r.interleaved,i===null?(e.next=e,cj(r)):(e.next=i.next,i.next=e),r.interleaved=e,gm(t,n)}function GA(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Y5(t,n)}}function hW(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function FP(t,e,n,r){var i=t.updateQueue;Vg=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,d=l.next;l.next=null,s===null?o=d:s.next=d,s=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==s&&(a===null?h.firstBaseUpdate=d:a.next=d,h.lastBaseUpdate=l))}if(o!==null){var p=i.baseState;s=0,h=d=l=null,a=o;do{var g=a.lane,v=a.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,b=a;switch(g=e,v=n,b.tag){case 1:if(x=b.payload,typeof x=="function"){p=x.call(v,p,g);break e}p=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=b.payload,g=typeof x=="function"?x.call(v,p,g):x,g==null)break e;p=$o({},p,g);break e;case 2:Vg=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[a]:g.push(a))}else v={eventTime:v,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(d=h=v,l=p):h=h.next=v,s|=g;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;g=a,a=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(h===null&&(l=p),i.baseState=l,i.firstBaseUpdate=d,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);L0|=s,t.lanes=s,t.memoizedState=p}}function fW(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(dn(191,i));i.call(r)}}}var pee=new hQ.Component().refs;function lF(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:$o({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var DR={isMounted:function(t){return(t=t._reactInternals)?r_(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Yl(),i=my(t),o=am(r,i);o.payload=e,n!=null&&(o.callback=n),e=fy(t,o,i),e!==null&&(Eh(e,t,i,r),GA(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Yl(),i=my(t),o=am(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=fy(t,o,i),e!==null&&(Eh(e,t,i,r),GA(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Yl(),r=my(t),i=am(n,r);i.tag=2,e!=null&&(i.callback=e),e=fy(t,i,r),e!==null&&(Eh(e,t,r,n),GA(e,t,r))}};function pW(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!j2(n,r)||!j2(i,o):!0}function mee(t,e,n){var r=!1,i=Ay,o=e.contextType;return typeof o=="object"&&o!==null?o=Md(o):(i=Sc(e)?R0:bl.current,r=e.contextTypes,o=(r=r!=null)?Db(t,i):Ay),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=DR,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function mW(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&DR.enqueueReplaceState(e,e.state,null)}function cF(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=pee,uj(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Md(o):(o=Sc(e)?R0:bl.current,i.context=Db(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(lF(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&DR.enqueueReplaceState(i,i.state,null),FP(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Zw(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(dn(309));var r=n.stateNode}if(!r)throw Error(dn(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;a===pee&&(a=i.refs={}),s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(dn(284));if(!n._owner)throw Error(dn(290,t))}return t}function JT(t,e){throw t=Object.prototype.toString.call(e),Error(dn(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function gW(t){var e=t._init;return e(t._payload)}function gee(t){function e(S,C){if(t){var A=S.deletions;A===null?(S.deletions=[C],S.flags|=16):A.push(C)}}function n(S,C){if(!t)return null;for(;C!==null;)e(S,C),C=C.sibling;return null}function r(S,C){for(S=new Map;C!==null;)C.key!==null?S.set(C.key,C):S.set(C.index,C),C=C.sibling;return S}function i(S,C){return S=gy(S,C),S.index=0,S.sibling=null,S}function o(S,C,A){return S.index=A,t?(A=S.alternate,A!==null?(A=A.index,A<C?(S.flags|=2,C):A):(S.flags|=2,C)):(S.flags|=1048576,C)}function s(S){return t&&S.alternate===null&&(S.flags|=2),S}function a(S,C,A,P){return C===null||C.tag!==6?(C=V3(A,S.mode,P),C.return=S,C):(C=i(C,A),C.return=S,C)}function l(S,C,A,P){var k=A.type;return k===Bx?h(S,C,A.props.children,P,A.key):C!==null&&(C.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ug&&gW(k)===C.type)?(P=i(C,A.props),P.ref=Zw(S,C,A),P.return=S,P):(P=JA(A.type,A.key,A.props,null,S.mode,P),P.ref=Zw(S,C,A),P.return=S,P)}function d(S,C,A,P){return C===null||C.tag!==4||C.stateNode.containerInfo!==A.containerInfo||C.stateNode.implementation!==A.implementation?(C=H3(A,S.mode,P),C.return=S,C):(C=i(C,A.children||[]),C.return=S,C)}function h(S,C,A,P,k){return C===null||C.tag!==7?(C=v0(A,S.mode,P,k),C.return=S,C):(C=i(C,A),C.return=S,C)}function p(S,C,A){if(typeof C=="string"&&C!==""||typeof C=="number")return C=V3(""+C,S.mode,A),C.return=S,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case $T:return A=JA(C.type,C.key,C.props,null,S.mode,A),A.ref=Zw(S,null,C),A.return=S,A;case Fx:return C=H3(C,S.mode,A),C.return=S,C;case Ug:var P=C._init;return p(S,P(C._payload),A)}if(HS(C)||Gw(C))return C=v0(C,S.mode,A,null),C.return=S,C;JT(S,C)}return null}function g(S,C,A,P){var k=C!==null?C.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return k!==null?null:a(S,C,""+A,P);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case $T:return A.key===k?l(S,C,A,P):null;case Fx:return A.key===k?d(S,C,A,P):null;case Ug:return k=A._init,g(S,C,k(A._payload),P)}if(HS(A)||Gw(A))return k!==null?null:h(S,C,A,P,null);JT(S,A)}return null}function v(S,C,A,P,k){if(typeof P=="string"&&P!==""||typeof P=="number")return S=S.get(A)||null,a(C,S,""+P,k);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case $T:return S=S.get(P.key===null?A:P.key)||null,l(C,S,P,k);case Fx:return S=S.get(P.key===null?A:P.key)||null,d(C,S,P,k);case Ug:var F=P._init;return v(S,C,A,F(P._payload),k)}if(HS(P)||Gw(P))return S=S.get(A)||null,h(C,S,P,k,null);JT(C,P)}return null}function x(S,C,A,P){for(var k=null,F=null,B=C,W=C=0,J=null;B!==null&&W<A.length;W++){B.index>W?(J=B,B=null):J=B.sibling;var H=g(S,B,A[W],P);if(H===null){B===null&&(B=J);break}t&&B&&H.alternate===null&&e(S,B),C=o(H,C,W),F===null?k=H:F.sibling=H,F=H,B=J}if(W===A.length)return n(S,B),Co&&jv(S,W),k;if(B===null){for(;W<A.length;W++)B=p(S,A[W],P),B!==null&&(C=o(B,C,W),F===null?k=B:F.sibling=B,F=B);return Co&&jv(S,W),k}for(B=r(S,B);W<A.length;W++)J=v(B,S,W,A[W],P),J!==null&&(t&&J.alternate!==null&&B.delete(J.key===null?W:J.key),C=o(J,C,W),F===null?k=J:F.sibling=J,F=J);return t&&B.forEach(function(Y){return e(S,Y)}),Co&&jv(S,W),k}function b(S,C,A,P){var k=Gw(A);if(typeof k!="function")throw Error(dn(150));if(A=k.call(A),A==null)throw Error(dn(151));for(var F=k=null,B=C,W=C=0,J=null,H=A.next();B!==null&&!H.done;W++,H=A.next()){B.index>W?(J=B,B=null):J=B.sibling;var Y=g(S,B,H.value,P);if(Y===null){B===null&&(B=J);break}t&&B&&Y.alternate===null&&e(S,B),C=o(Y,C,W),F===null?k=Y:F.sibling=Y,F=Y,B=J}if(H.done)return n(S,B),Co&&jv(S,W),k;if(B===null){for(;!H.done;W++,H=A.next())H=p(S,H.value,P),H!==null&&(C=o(H,C,W),F===null?k=H:F.sibling=H,F=H);return Co&&jv(S,W),k}for(B=r(S,B);!H.done;W++,H=A.next())H=v(B,S,W,H.value,P),H!==null&&(t&&H.alternate!==null&&B.delete(H.key===null?W:H.key),C=o(H,C,W),F===null?k=H:F.sibling=H,F=H);return t&&B.forEach(function(le){return e(S,le)}),Co&&jv(S,W),k}function w(S,C,A,P){if(typeof A=="object"&&A!==null&&A.type===Bx&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case $T:e:{for(var k=A.key,F=C;F!==null;){if(F.key===k){if(k=A.type,k===Bx){if(F.tag===7){n(S,F.sibling),C=i(F,A.props.children),C.return=S,S=C;break e}}else if(F.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ug&&gW(k)===F.type){n(S,F.sibling),C=i(F,A.props),C.ref=Zw(S,F,A),C.return=S,S=C;break e}n(S,F);break}else e(S,F);F=F.sibling}A.type===Bx?(C=v0(A.props.children,S.mode,P,A.key),C.return=S,S=C):(P=JA(A.type,A.key,A.props,null,S.mode,P),P.ref=Zw(S,C,A),P.return=S,S=P)}return s(S);case Fx:e:{for(F=A.key;C!==null;){if(C.key===F)if(C.tag===4&&C.stateNode.containerInfo===A.containerInfo&&C.stateNode.implementation===A.implementation){n(S,C.sibling),C=i(C,A.children||[]),C.return=S,S=C;break e}else{n(S,C);break}else e(S,C);C=C.sibling}C=H3(A,S.mode,P),C.return=S,S=C}return s(S);case Ug:return F=A._init,w(S,C,F(A._payload),P)}if(HS(A))return x(S,C,A,P);if(Gw(A))return b(S,C,A,P);JT(S,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,C!==null&&C.tag===6?(n(S,C.sibling),C=i(C,A),C.return=S,S=C):(n(S,C),C=V3(A,S.mode,P),C.return=S,S=C),s(S)):n(S,C)}return w}var zb=gee(!0),yee=gee(!1),wE={},Of=By(wE),H2=By(wE),W2=By(wE);function r0(t){if(t===wE)throw Error(dn(174));return t}function dj(t,e){switch(io(W2,e),io(H2,t),io(Of,wE),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$z(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$z(e,t)}vo(Of),io(Of,e)}function Fb(){vo(Of),vo(H2),vo(W2)}function vee(t){r0(W2.current);var e=r0(Of.current),n=$z(e,t.type);e!==n&&(io(H2,t),io(Of,n))}function hj(t){H2.current===t&&(vo(Of),vo(H2))}var Do=By(0);function BP(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var z3=[];function fj(){for(var t=0;t<z3.length;t++)z3[t]._workInProgressVersionPrimary=null;z3.length=0}var qA=Am.ReactCurrentDispatcher,F3=Am.ReactCurrentBatchConfig,O0=0,Bo=null,zs=null,ca=null,jP=!1,a2=!1,G2=0,xge=0;function nl(){throw Error(dn(321))}function pj(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ah(t[n],e[n]))return!1;return!0}function mj(t,e,n,r,i,o){if(O0=o,Bo=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qA.current=t===null||t.memoizedState===null?Mge:Ege,t=n(r,i),a2){o=0;do{if(a2=!1,G2=0,25<=o)throw Error(dn(301));o+=1,ca=zs=null,e.updateQueue=null,qA.current=Tge,t=n(r,i)}while(a2)}if(qA.current=$P,e=zs!==null&&zs.next!==null,O0=0,ca=zs=Bo=null,jP=!1,e)throw Error(dn(300));return t}function gj(){var t=G2!==0;return G2=0,t}function bf(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ca===null?Bo.memoizedState=ca=t:ca=ca.next=t,ca}function Ed(){if(zs===null){var t=Bo.alternate;t=t!==null?t.memoizedState:null}else t=zs.next;var e=ca===null?Bo.memoizedState:ca.next;if(e!==null)ca=e,zs=t;else{if(t===null)throw Error(dn(310));zs=t,t={memoizedState:zs.memoizedState,baseState:zs.baseState,baseQueue:zs.baseQueue,queue:zs.queue,next:null},ca===null?Bo.memoizedState=ca=t:ca=ca.next=t}return ca}function q2(t,e){return typeof e=="function"?e(t):e}function B3(t){var e=Ed(),n=e.queue;if(n===null)throw Error(dn(311));n.lastRenderedReducer=t;var r=zs,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,d=o;do{var h=d.lane;if((O0&h)===h)l!==null&&(l=l.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};l===null?(a=l=p,s=r):l=l.next=p,Bo.lanes|=h,L0|=h}d=d.next}while(d!==null&&d!==o);l===null?s=r:l.next=a,Ah(r,e.memoizedState)||(xc=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Bo.lanes|=o,L0|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function j3(t){var e=Ed(),n=e.queue;if(n===null)throw Error(dn(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);Ah(o,e.memoizedState)||(xc=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function _ee(){}function xee(t,e){var n=Bo,r=Ed(),i=e(),o=!Ah(r.memoizedState,i);if(o&&(r.memoizedState=i,xc=!0),r=r.queue,yj(See.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||ca!==null&&ca.memoizedState.tag&1){if(n.flags|=2048,X2(9,wee.bind(null,n,r,i,e),void 0,null),ua===null)throw Error(dn(349));O0&30||bee(n,e,i)}return i}function bee(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Bo.updateQueue,e===null?(e={lastEffect:null,stores:null},Bo.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function wee(t,e,n,r){e.value=n,e.getSnapshot=r,Mee(e)&&Eee(t)}function See(t,e,n){return n(function(){Mee(e)&&Eee(t)})}function Mee(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ah(t,n)}catch{return!0}}function Eee(t){var e=gm(t,1);e!==null&&Eh(e,t,1,-1)}function yW(t){var e=bf();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:q2,lastRenderedState:t},e.queue=t,t=t.dispatch=Sge.bind(null,Bo,t),[e.memoizedState,t]}function X2(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Bo.updateQueue,e===null?(e={lastEffect:null,stores:null},Bo.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Tee(){return Ed().memoizedState}function XA(t,e,n,r){var i=bf();Bo.flags|=t,i.memoizedState=X2(1|e,n,void 0,r===void 0?null:r)}function NR(t,e,n,r){var i=Ed();r=r===void 0?null:r;var o=void 0;if(zs!==null){var s=zs.memoizedState;if(o=s.destroy,r!==null&&pj(r,s.deps)){i.memoizedState=X2(e,n,o,r);return}}Bo.flags|=t,i.memoizedState=X2(1|e,n,o,r)}function vW(t,e){return XA(8390656,8,t,e)}function yj(t,e){return NR(2048,8,t,e)}function Cee(t,e){return NR(4,2,t,e)}function Aee(t,e){return NR(4,4,t,e)}function Pee(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Iee(t,e,n){return n=n!=null?n.concat([t]):null,NR(4,4,Pee.bind(null,e,t),n)}function vj(){}function Ree(t,e){var n=Ed();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pj(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function kee(t,e){var n=Ed();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pj(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Oee(t,e,n){return O0&21?(Ah(n,e)||(n=NQ(),Bo.lanes|=n,L0|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,xc=!0),t.memoizedState=n)}function bge(t,e){var n=Vi;Vi=n!==0&&4>n?n:4,t(!0);var r=F3.transition;F3.transition={};try{t(!1),e()}finally{Vi=n,F3.transition=r}}function Lee(){return Ed().memoizedState}function wge(t,e,n){var r=my(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Dee(t))Nee(e,n);else if(n=hee(t,e,n,r),n!==null){var i=Yl();Eh(n,t,r,i),zee(n,e,r)}}function Sge(t,e,n){var r=my(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Dee(t))Nee(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,Ah(a,s)){var l=e.interleaved;l===null?(i.next=i,cj(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=hee(t,e,i,r),n!==null&&(i=Yl(),Eh(n,t,r,i),zee(n,e,r))}}function Dee(t){var e=t.alternate;return t===Bo||e!==null&&e===Bo}function Nee(t,e){a2=jP=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function zee(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Y5(t,n)}}var $P={readContext:Md,useCallback:nl,useContext:nl,useEffect:nl,useImperativeHandle:nl,useInsertionEffect:nl,useLayoutEffect:nl,useMemo:nl,useReducer:nl,useRef:nl,useState:nl,useDebugValue:nl,useDeferredValue:nl,useTransition:nl,useMutableSource:nl,useSyncExternalStore:nl,useId:nl,unstable_isNewReconciler:!1},Mge={readContext:Md,useCallback:function(t,e){return bf().memoizedState=[t,e===void 0?null:e],t},useContext:Md,useEffect:vW,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,XA(4194308,4,Pee.bind(null,e,t),n)},useLayoutEffect:function(t,e){return XA(4194308,4,t,e)},useInsertionEffect:function(t,e){return XA(4,2,t,e)},useMemo:function(t,e){var n=bf();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=bf();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=wge.bind(null,Bo,t),[r.memoizedState,t]},useRef:function(t){var e=bf();return t={current:t},e.memoizedState=t},useState:yW,useDebugValue:vj,useDeferredValue:function(t){return bf().memoizedState=t},useTransition:function(){var t=yW(!1),e=t[0];return t=bge.bind(null,t[1]),bf().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Bo,i=bf();if(Co){if(n===void 0)throw Error(dn(407));n=n()}else{if(n=e(),ua===null)throw Error(dn(349));O0&30||bee(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,vW(See.bind(null,r,o,t),[t]),r.flags|=2048,X2(9,wee.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=bf(),e=ua.identifierPrefix;if(Co){var n=Zp,r=Kp;n=(r&~(1<<32-Mh(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=G2++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=xge++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ege={readContext:Md,useCallback:Ree,useContext:Md,useEffect:yj,useImperativeHandle:Iee,useInsertionEffect:Cee,useLayoutEffect:Aee,useMemo:kee,useReducer:B3,useRef:Tee,useState:function(){return B3(q2)},useDebugValue:vj,useDeferredValue:function(t){var e=Ed();return Oee(e,zs.memoizedState,t)},useTransition:function(){var t=B3(q2)[0],e=Ed().memoizedState;return[t,e]},useMutableSource:_ee,useSyncExternalStore:xee,useId:Lee,unstable_isNewReconciler:!1},Tge={readContext:Md,useCallback:Ree,useContext:Md,useEffect:yj,useImperativeHandle:Iee,useInsertionEffect:Cee,useLayoutEffect:Aee,useMemo:kee,useReducer:j3,useRef:Tee,useState:function(){return j3(q2)},useDebugValue:vj,useDeferredValue:function(t){var e=Ed();return zs===null?e.memoizedState=t:Oee(e,zs.memoizedState,t)},useTransition:function(){var t=j3(q2)[0],e=Ed().memoizedState;return[t,e]},useMutableSource:_ee,useSyncExternalStore:xee,useId:Lee,unstable_isNewReconciler:!1};function Bb(t,e){try{var n="",r=e;do n+=eme(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function $3(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function uF(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Cge=typeof WeakMap=="function"?WeakMap:Map;function Fee(t,e,n){n=am(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){VP||(VP=!0,xF=r),uF(t,e)},n}function Bee(t,e,n){n=am(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){uF(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){uF(t,e),typeof r!="function"&&(py===null?py=new Set([this]):py.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function _W(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Cge;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=$ge.bind(null,t,e,n),e.then(t,t))}function xW(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function bW(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=am(-1,1),e.tag=2,fy(n,e,1))),n.lanes|=1),t)}var Age=Am.ReactCurrentOwner,xc=!1;function Vl(t,e,n,r){e.child=t===null?yee(e,null,n,r):zb(e,t.child,n,r)}function wW(t,e,n,r,i){n=n.render;var o=e.ref;return yb(e,i),r=mj(t,e,n,r,o,i),n=gj(),t!==null&&!xc?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ym(t,e,i)):(Co&&n&&rj(e),e.flags|=1,Vl(t,e,r,i),e.child)}function SW(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Tj(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,jee(t,e,o,r,i)):(t=JA(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:j2,n(s,r)&&t.ref===e.ref)return ym(t,e,i)}return e.flags|=1,t=gy(o,r),t.ref=e.ref,t.return=e,e.child=t}function jee(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(j2(o,r)&&t.ref===e.ref)if(xc=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(xc=!0);else return e.lanes=t.lanes,ym(t,e,i)}return dF(t,e,n,r,i)}function $ee(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},io(Yx,eu),eu|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,io(Yx,eu),eu|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,io(Yx,eu),eu|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,io(Yx,eu),eu|=r;return Vl(t,e,i,n),e.child}function Uee(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function dF(t,e,n,r,i){var o=Sc(n)?R0:bl.current;return o=Db(e,o),yb(e,i),n=mj(t,e,n,r,o,i),r=gj(),t!==null&&!xc?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ym(t,e,i)):(Co&&r&&rj(e),e.flags|=1,Vl(t,e,n,i),e.child)}function MW(t,e,n,r,i){if(Sc(n)){var o=!0;OP(e)}else o=!1;if(yb(e,i),e.stateNode===null)YA(t,e),mee(e,n,r),cF(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=Md(d):(d=Sc(n)?R0:bl.current,d=Db(e,d));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==d)&&mW(e,s,r,d),Vg=!1;var g=e.memoizedState;s.state=g,FP(e,r,s,i),l=e.memoizedState,a!==r||g!==l||wc.current||Vg?(typeof h=="function"&&(lF(e,n,h,r),l=e.memoizedState),(a=Vg||pW(e,n,a,r,g,l,d))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=d,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,fee(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:uh(e.type,a),s.props=d,p=e.pendingProps,g=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Md(l):(l=Sc(n)?R0:bl.current,l=Db(e,l));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==p||g!==l)&&mW(e,s,r,l),Vg=!1,g=e.memoizedState,s.state=g,FP(e,r,s,i);var x=e.memoizedState;a!==p||g!==x||wc.current||Vg?(typeof v=="function"&&(lF(e,n,v,r),x=e.memoizedState),(d=Vg||pW(e,n,d,r,g,x,l)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,x,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,x,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),s.props=r,s.state=x,s.context=l,r=d):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return hF(t,e,n,r,o,i)}function hF(t,e,n,r,i,o){Uee(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&cW(e,n,!1),ym(t,e,o);r=e.stateNode,Age.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=zb(e,t.child,null,o),e.child=zb(e,null,a,o)):Vl(t,e,a,o),e.memoizedState=r.state,i&&cW(e,n,!0),e.child}function Vee(t){var e=t.stateNode;e.pendingContext?lW(t,e.pendingContext,e.pendingContext!==e.context):e.context&&lW(t,e.context,!1),dj(t,e.containerInfo)}function EW(t,e,n,r,i){return Nb(),oj(i),e.flags|=256,Vl(t,e,n,r),e.child}var fF={dehydrated:null,treeContext:null,retryLane:0};function pF(t){return{baseLanes:t,cachePool:null,transitions:null}}function Hee(t,e,n){var r=e.pendingProps,i=Do.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),io(Do,i&1),t===null)return sF(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=BR(s,r,0,null),t=v0(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=pF(n),e.memoizedState=fF,t):_j(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Pge(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=gy(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=gy(a,o):(o=v0(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?pF(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=fF,r}return o=t.child,t=o.sibling,r=gy(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function _j(t,e){return e=BR({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function QT(t,e,n,r){return r!==null&&oj(r),zb(e,t.child,null,n),t=_j(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Pge(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=$3(Error(dn(422))),QT(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=BR({mode:"visible",children:r.children},i,0,null),o=v0(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&zb(e,t.child,null,s),e.child.memoizedState=pF(s),e.memoizedState=fF,o);if(!(e.mode&1))return QT(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(dn(419)),r=$3(o,r,void 0),QT(t,e,s,r)}if(a=(s&t.childLanes)!==0,xc||a){if(r=ua,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,gm(t,i),Eh(r,t,i,-1))}return Ej(),r=$3(Error(dn(421))),QT(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Uge.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,hu=hy(i.nextSibling),mu=e,Co=!0,mh=null,t!==null&&(cd[ud++]=Kp,cd[ud++]=Zp,cd[ud++]=k0,Kp=t.id,Zp=t.overflow,k0=e),e=_j(e,r.children),e.flags|=4096,e)}function TW(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),aF(t.return,e,n)}function U3(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Wee(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Vl(t,e,r.children,n),r=Do.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&TW(t,n,e);else if(t.tag===19)TW(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(io(Do,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&BP(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),U3(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&BP(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}U3(e,!0,n,null,o);break;case"together":U3(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function YA(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ym(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),L0|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(dn(153));if(e.child!==null){for(t=e.child,n=gy(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gy(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ige(t,e,n){switch(e.tag){case 3:Vee(e),Nb();break;case 5:vee(e);break;case 1:Sc(e.type)&&OP(e);break;case 4:dj(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;io(NP,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(io(Do,Do.current&1),e.flags|=128,null):n&e.child.childLanes?Hee(t,e,n):(io(Do,Do.current&1),t=ym(t,e,n),t!==null?t.sibling:null);io(Do,Do.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Wee(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),io(Do,Do.current),r)break;return null;case 22:case 23:return e.lanes=0,$ee(t,e,n)}return ym(t,e,n)}var Gee,mF,qee,Xee;Gee=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mF=function(){};qee=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,r0(Of.current);var o=null;switch(n){case"input":i=zz(t,i),r=zz(t,r),o=[];break;case"select":i=$o({},i,{value:void 0}),r=$o({},r,{value:void 0}),o=[];break;case"textarea":i=jz(t,i),r=jz(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=RP)}Uz(n,r);var s;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var a=i[d];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(O2.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var l=r[d];if(a=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&l!==a&&(l!=null||a!=null))if(d==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(d,n)),n=l;else d==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(d,l)):d==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(d,""+l):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(O2.hasOwnProperty(d)?(l!=null&&d==="onScroll"&&po("scroll",t),o||a===l||(o=[])):(o=o||[]).push(d,l))}n&&(o=o||[]).push("style",n);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};Xee=function(t,e,n,r){n!==r&&(e.flags|=4)};function Jw(t,e){if(!Co)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function rl(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Rge(t,e,n){var r=e.pendingProps;switch(ij(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rl(e),null;case 1:return Sc(e.type)&&kP(),rl(e),null;case 3:return r=e.stateNode,Fb(),vo(wc),vo(bl),fj(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ZT(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mh!==null&&(SF(mh),mh=null))),mF(t,e),rl(e),null;case 5:hj(e);var i=r0(W2.current);if(n=e.type,t!==null&&e.stateNode!=null)qee(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(dn(166));return rl(e),null}if(t=r0(Of.current),ZT(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Tf]=e,r[V2]=o,t=(e.mode&1)!==0,n){case"dialog":po("cancel",r),po("close",r);break;case"iframe":case"object":case"embed":po("load",r);break;case"video":case"audio":for(i=0;i<GS.length;i++)po(GS[i],r);break;case"source":po("error",r);break;case"img":case"image":case"link":po("error",r),po("load",r);break;case"details":po("toggle",r);break;case"input":DH(r,o),po("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},po("invalid",r);break;case"textarea":zH(r,o),po("invalid",r)}Uz(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&KT(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&KT(r.textContent,a,t),i=["children",""+a]):O2.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&po("scroll",r)}switch(n){case"input":UT(r),NH(r,o,!0);break;case"textarea":UT(r),FH(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=RP)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bQ(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Tf]=e,t[V2]=r,Gee(t,e,!1,!1),e.stateNode=t;e:{switch(s=Vz(n,r),n){case"dialog":po("cancel",t),po("close",t),i=r;break;case"iframe":case"object":case"embed":po("load",t),i=r;break;case"video":case"audio":for(i=0;i<GS.length;i++)po(GS[i],t);i=r;break;case"source":po("error",t),i=r;break;case"img":case"image":case"link":po("error",t),po("load",t),i=r;break;case"details":po("toggle",t),i=r;break;case"input":DH(t,r),i=zz(t,r),po("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=$o({},r,{value:void 0}),po("invalid",t);break;case"textarea":zH(t,r),i=jz(t,r),po("invalid",t);break;default:i=r}Uz(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?MQ(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&wQ(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&L2(t,l):typeof l=="number"&&L2(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(O2.hasOwnProperty(o)?l!=null&&o==="onScroll"&&po("scroll",t):l!=null&&V5(t,o,l,s))}switch(n){case"input":UT(t),NH(t,r,!1);break;case"textarea":UT(t),FH(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Cy(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?fb(t,!!r.multiple,o,!1):r.defaultValue!=null&&fb(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=RP)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rl(e),null;case 6:if(t&&e.stateNode!=null)Xee(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(dn(166));if(n=r0(W2.current),r0(Of.current),ZT(e)){if(r=e.stateNode,n=e.memoizedProps,r[Tf]=e,(o=r.nodeValue!==n)&&(t=mu,t!==null))switch(t.tag){case 3:KT(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&KT(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Tf]=e,e.stateNode=r}return rl(e),null;case 13:if(vo(Do),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Co&&hu!==null&&e.mode&1&&!(e.flags&128))dee(),Nb(),e.flags|=98560,o=!1;else if(o=ZT(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(dn(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(dn(317));o[Tf]=e}else Nb(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rl(e),o=!1}else mh!==null&&(SF(mh),mh=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Do.current&1?Fs===0&&(Fs=3):Ej())),e.updateQueue!==null&&(e.flags|=4),rl(e),null);case 4:return Fb(),mF(t,e),t===null&&$2(e.stateNode.containerInfo),rl(e),null;case 10:return lj(e.type._context),rl(e),null;case 17:return Sc(e.type)&&kP(),rl(e),null;case 19:if(vo(Do),o=e.memoizedState,o===null)return rl(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Jw(o,!1);else{if(Fs!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=BP(t),s!==null){for(e.flags|=128,Jw(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return io(Do,Do.current&1|2),e.child}t=t.sibling}o.tail!==null&&cs()>jb&&(e.flags|=128,r=!0,Jw(o,!1),e.lanes=4194304)}else{if(!r)if(t=BP(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Jw(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Co)return rl(e),null}else 2*cs()-o.renderingStartTime>jb&&n!==1073741824&&(e.flags|=128,r=!0,Jw(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=cs(),e.sibling=null,n=Do.current,io(Do,r?n&1|2:n&1),e):(rl(e),null);case 22:case 23:return Mj(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?eu&1073741824&&(rl(e),e.subtreeFlags&6&&(e.flags|=8192)):rl(e),null;case 24:return null;case 25:return null}throw Error(dn(156,e.tag))}function kge(t,e){switch(ij(e),e.tag){case 1:return Sc(e.type)&&kP(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fb(),vo(wc),vo(bl),fj(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hj(e),null;case 13:if(vo(Do),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(dn(340));Nb()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return vo(Do),null;case 4:return Fb(),null;case 10:return lj(e.type._context),null;case 22:case 23:return Mj(),null;case 24:return null;default:return null}}var eC=!1,hl=!1,Oge=typeof WeakSet=="function"?WeakSet:Set,qn=null;function Xx(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){qo(t,e,r)}else n.current=null}function gF(t,e,n){try{n()}catch(r){qo(t,e,r)}}var CW=!1;function Lge(t,e){if(Qz=AP,t=JQ(),nj(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,d=0,h=0,p=t,g=null;t:for(;;){for(var v;p!==n||i!==0&&p.nodeType!==3||(a=s+i),p!==o||r!==0&&p.nodeType!==3||(l=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(v=p.firstChild)!==null;)g=p,p=v;for(;;){if(p===t)break t;if(g===n&&++d===i&&(a=s),g===o&&++h===r&&(l=s),(v=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=v}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(eF={focusedElem:t,selectionRange:n},AP=!1,qn=e;qn!==null;)if(e=qn,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,qn=t;else for(;qn!==null;){e=qn;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var b=x.memoizedProps,w=x.memoizedState,S=e.stateNode,C=S.getSnapshotBeforeUpdate(e.elementType===e.type?b:uh(e.type,b),w);S.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(dn(163))}}catch(P){qo(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,qn=t;break}qn=e.return}return x=CW,CW=!1,x}function l2(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&gF(e,n,o)}i=i.next}while(i!==r)}}function zR(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function yF(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Yee(t){var e=t.alternate;e!==null&&(t.alternate=null,Yee(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Tf],delete e[V2],delete e[rF],delete e[gge],delete e[yge])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Kee(t){return t.tag===5||t.tag===3||t.tag===4}function AW(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Kee(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vF(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=RP));else if(r!==4&&(t=t.child,t!==null))for(vF(t,e,n),t=t.sibling;t!==null;)vF(t,e,n),t=t.sibling}function _F(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(_F(t,e,n),t=t.sibling;t!==null;)_F(t,e,n),t=t.sibling}var Aa=null,hh=!1;function Mg(t,e,n){for(n=n.child;n!==null;)Zee(t,e,n),n=n.sibling}function Zee(t,e,n){if(kf&&typeof kf.onCommitFiberUnmount=="function")try{kf.onCommitFiberUnmount(PR,n)}catch{}switch(n.tag){case 5:hl||Xx(n,e);case 6:var r=Aa,i=hh;Aa=null,Mg(t,e,n),Aa=r,hh=i,Aa!==null&&(hh?(t=Aa,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Aa.removeChild(n.stateNode));break;case 18:Aa!==null&&(hh?(t=Aa,n=n.stateNode,t.nodeType===8?D3(t.parentNode,n):t.nodeType===1&&D3(t,n),F2(t)):D3(Aa,n.stateNode));break;case 4:r=Aa,i=hh,Aa=n.stateNode.containerInfo,hh=!0,Mg(t,e,n),Aa=r,hh=i;break;case 0:case 11:case 14:case 15:if(!hl&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&gF(n,e,s),i=i.next}while(i!==r)}Mg(t,e,n);break;case 1:if(!hl&&(Xx(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){qo(n,e,a)}Mg(t,e,n);break;case 21:Mg(t,e,n);break;case 22:n.mode&1?(hl=(r=hl)||n.memoizedState!==null,Mg(t,e,n),hl=r):Mg(t,e,n);break;default:Mg(t,e,n)}}function PW(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Oge),e.forEach(function(r){var i=Vge.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function nh(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:Aa=a.stateNode,hh=!1;break e;case 3:Aa=a.stateNode.containerInfo,hh=!0;break e;case 4:Aa=a.stateNode.containerInfo,hh=!0;break e}a=a.return}if(Aa===null)throw Error(dn(160));Zee(o,s,i),Aa=null,hh=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(d){qo(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Jee(e,t),e=e.sibling}function Jee(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nh(e,t),_f(t),r&4){try{l2(3,t,t.return),zR(3,t)}catch(b){qo(t,t.return,b)}try{l2(5,t,t.return)}catch(b){qo(t,t.return,b)}}break;case 1:nh(e,t),_f(t),r&512&&n!==null&&Xx(n,n.return);break;case 5:if(nh(e,t),_f(t),r&512&&n!==null&&Xx(n,n.return),t.flags&32){var i=t.stateNode;try{L2(i,"")}catch(b){qo(t,t.return,b)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&_Q(i,o),Vz(a,s);var d=Vz(a,o);for(s=0;s<l.length;s+=2){var h=l[s],p=l[s+1];h==="style"?MQ(i,p):h==="dangerouslySetInnerHTML"?wQ(i,p):h==="children"?L2(i,p):V5(i,h,p,d)}switch(a){case"input":Fz(i,o);break;case"textarea":xQ(i,o);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?fb(i,!!o.multiple,v,!1):g!==!!o.multiple&&(o.defaultValue!=null?fb(i,!!o.multiple,o.defaultValue,!0):fb(i,!!o.multiple,o.multiple?[]:"",!1))}i[V2]=o}catch(b){qo(t,t.return,b)}}break;case 6:if(nh(e,t),_f(t),r&4){if(t.stateNode===null)throw Error(dn(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(b){qo(t,t.return,b)}}break;case 3:if(nh(e,t),_f(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{F2(e.containerInfo)}catch(b){qo(t,t.return,b)}break;case 4:nh(e,t),_f(t);break;case 13:nh(e,t),_f(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(wj=cs())),r&4&&PW(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(hl=(d=hl)||h,nh(e,t),hl=d):nh(e,t),_f(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(qn=t,h=t.child;h!==null;){for(p=qn=h;qn!==null;){switch(g=qn,v=g.child,g.tag){case 0:case 11:case 14:case 15:l2(4,g,g.return);break;case 1:Xx(g,g.return);var x=g.stateNode;if(typeof x.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(b){qo(r,n,b)}}break;case 5:Xx(g,g.return);break;case 22:if(g.memoizedState!==null){RW(p);continue}}v!==null?(v.return=g,qn=v):RW(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,d?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=p.stateNode,l=p.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=SQ("display",s))}catch(b){qo(t,t.return,b)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(b){qo(t,t.return,b)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:nh(e,t),_f(t),r&4&&PW(t);break;case 21:break;default:nh(e,t),_f(t)}}function _f(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Kee(n)){var r=n;break e}n=n.return}throw Error(dn(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(L2(i,""),r.flags&=-33);var o=AW(t);_F(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=AW(t);vF(t,a,s);break;default:throw Error(dn(161))}}catch(l){qo(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Dge(t,e,n){qn=t,Qee(t)}function Qee(t,e,n){for(var r=(t.mode&1)!==0;qn!==null;){var i=qn,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||eC;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||hl;a=eC;var d=hl;if(eC=s,(hl=l)&&!d)for(qn=i;qn!==null;)s=qn,l=s.child,s.tag===22&&s.memoizedState!==null?kW(i):l!==null?(l.return=s,qn=l):kW(i);for(;o!==null;)qn=o,Qee(o),o=o.sibling;qn=i,eC=a,hl=d}IW(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,qn=o):IW(t)}}function IW(t){for(;qn!==null;){var e=qn;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:hl||zR(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!hl)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:uh(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&fW(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}fW(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&F2(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(dn(163))}hl||e.flags&512&&yF(e)}catch(g){qo(e,e.return,g)}}if(e===t){qn=null;break}if(n=e.sibling,n!==null){n.return=e.return,qn=n;break}qn=e.return}}function RW(t){for(;qn!==null;){var e=qn;if(e===t){qn=null;break}var n=e.sibling;if(n!==null){n.return=e.return,qn=n;break}qn=e.return}}function kW(t){for(;qn!==null;){var e=qn;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{zR(4,e)}catch(l){qo(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){qo(e,i,l)}}var o=e.return;try{yF(e)}catch(l){qo(e,o,l)}break;case 5:var s=e.return;try{yF(e)}catch(l){qo(e,s,l)}}}catch(l){qo(e,e.return,l)}if(e===t){qn=null;break}var a=e.sibling;if(a!==null){a.return=e.return,qn=a;break}qn=e.return}}var Nge=Math.ceil,UP=Am.ReactCurrentDispatcher,xj=Am.ReactCurrentOwner,vd=Am.ReactCurrentBatchConfig,vi=0,ua=null,Ss=null,Na=0,eu=0,Yx=By(0),Fs=0,Y2=null,L0=0,FR=0,bj=0,c2=null,vc=null,wj=0,jb=1/0,Vp=null,VP=!1,xF=null,py=null,tC=!1,ey=null,HP=0,u2=0,bF=null,KA=-1,ZA=0;function Yl(){return vi&6?cs():KA!==-1?KA:KA=cs()}function my(t){return t.mode&1?vi&2&&Na!==0?Na&-Na:_ge.transition!==null?(ZA===0&&(ZA=NQ()),ZA):(t=Vi,t!==0||(t=window.event,t=t===void 0?16:VQ(t.type)),t):1}function Eh(t,e,n,r){if(50<u2)throw u2=0,bF=null,Error(dn(185));_E(t,n,r),(!(vi&2)||t!==ua)&&(t===ua&&(!(vi&2)&&(FR|=n),Fs===4&&Xg(t,Na)),Mc(t,r),n===1&&vi===0&&!(e.mode&1)&&(jb=cs()+500,LR&&jy()))}function Mc(t,e){var n=t.callbackNode;_me(t,e);var r=CP(t,t===ua?Na:0);if(r===0)n!==null&&$H(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&$H(n),e===1)t.tag===0?vge(OW.bind(null,t)):lee(OW.bind(null,t)),pge(function(){!(vi&6)&&jy()}),n=null;else{switch(zQ(r)){case 1:n=X5;break;case 4:n=LQ;break;case 16:n=TP;break;case 536870912:n=DQ;break;default:n=TP}n=ate(n,ete.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ete(t,e){if(KA=-1,ZA=0,vi&6)throw Error(dn(327));var n=t.callbackNode;if(vb()&&t.callbackNode!==n)return null;var r=CP(t,t===ua?Na:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=WP(t,r);else{e=r;var i=vi;vi|=2;var o=nte();(ua!==t||Na!==e)&&(Vp=null,jb=cs()+500,y0(t,e));do try{Bge();break}catch(a){tte(t,a)}while(!0);aj(),UP.current=o,vi=i,Ss!==null?e=0:(ua=null,Na=0,e=Fs)}if(e!==0){if(e===2&&(i=Xz(t),i!==0&&(r=i,e=wF(t,i))),e===1)throw n=Y2,y0(t,0),Xg(t,r),Mc(t,cs()),n;if(e===6)Xg(t,r);else{if(i=t.current.alternate,!(r&30)&&!zge(i)&&(e=WP(t,r),e===2&&(o=Xz(t),o!==0&&(r=o,e=wF(t,o))),e===1))throw n=Y2,y0(t,0),Xg(t,r),Mc(t,cs()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(dn(345));case 2:$v(t,vc,Vp);break;case 3:if(Xg(t,r),(r&130023424)===r&&(e=wj+500-cs(),10<e)){if(CP(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Yl(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=nF($v.bind(null,t,vc,Vp),e);break}$v(t,vc,Vp);break;case 4:if(Xg(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-Mh(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=cs()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nge(r/1960))-r,10<r){t.timeoutHandle=nF($v.bind(null,t,vc,Vp),r);break}$v(t,vc,Vp);break;case 5:$v(t,vc,Vp);break;default:throw Error(dn(329))}}}return Mc(t,cs()),t.callbackNode===n?ete.bind(null,t):null}function wF(t,e){var n=c2;return t.current.memoizedState.isDehydrated&&(y0(t,e).flags|=256),t=WP(t,e),t!==2&&(e=vc,vc=n,e!==null&&SF(e)),t}function SF(t){vc===null?vc=t:vc.push.apply(vc,t)}function zge(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Ah(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xg(t,e){for(e&=~bj,e&=~FR,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mh(e),r=1<<n;t[n]=-1,e&=~r}}function OW(t){if(vi&6)throw Error(dn(327));vb();var e=CP(t,0);if(!(e&1))return Mc(t,cs()),null;var n=WP(t,e);if(t.tag!==0&&n===2){var r=Xz(t);r!==0&&(e=r,n=wF(t,r))}if(n===1)throw n=Y2,y0(t,0),Xg(t,e),Mc(t,cs()),n;if(n===6)throw Error(dn(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$v(t,vc,Vp),Mc(t,cs()),null}function Sj(t,e){var n=vi;vi|=1;try{return t(e)}finally{vi=n,vi===0&&(jb=cs()+500,LR&&jy())}}function D0(t){ey!==null&&ey.tag===0&&!(vi&6)&&vb();var e=vi;vi|=1;var n=vd.transition,r=Vi;try{if(vd.transition=null,Vi=1,t)return t()}finally{Vi=r,vd.transition=n,vi=e,!(vi&6)&&jy()}}function Mj(){eu=Yx.current,vo(Yx)}function y0(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,fge(n)),Ss!==null)for(n=Ss.return;n!==null;){var r=n;switch(ij(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kP();break;case 3:Fb(),vo(wc),vo(bl),fj();break;case 5:hj(r);break;case 4:Fb();break;case 13:vo(Do);break;case 19:vo(Do);break;case 10:lj(r.type._context);break;case 22:case 23:Mj()}n=n.return}if(ua=t,Ss=t=gy(t.current,null),Na=eu=e,Fs=0,Y2=null,bj=FR=L0=0,vc=c2=null,n0!==null){for(e=0;e<n0.length;e++)if(n=n0[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}n0=null}return t}function tte(t,e){do{var n=Ss;try{if(aj(),qA.current=$P,jP){for(var r=Bo.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}jP=!1}if(O0=0,ca=zs=Bo=null,a2=!1,G2=0,xj.current=null,n===null||n.return===null){Fs=1,Y2=e,Ss=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=Na,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var d=l,h=a,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=xW(s);if(v!==null){v.flags&=-257,bW(v,s,a,o,e),v.mode&1&&_W(o,d,e),e=v,l=d;var x=e.updateQueue;if(x===null){var b=new Set;b.add(l),e.updateQueue=b}else x.add(l);break e}else{if(!(e&1)){_W(o,d,e),Ej();break e}l=Error(dn(426))}}else if(Co&&a.mode&1){var w=xW(s);if(w!==null){!(w.flags&65536)&&(w.flags|=256),bW(w,s,a,o,e),oj(Bb(l,a));break e}}o=l=Bb(l,a),Fs!==4&&(Fs=2),c2===null?c2=[o]:c2.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var S=Fee(o,l,e);hW(o,S);break e;case 1:a=l;var C=o.type,A=o.stateNode;if(!(o.flags&128)&&(typeof C.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(py===null||!py.has(A)))){o.flags|=65536,e&=-e,o.lanes|=e;var P=Bee(o,a,e);hW(o,P);break e}}o=o.return}while(o!==null)}ite(n)}catch(k){e=k,Ss===n&&n!==null&&(Ss=n=n.return);continue}break}while(!0)}function nte(){var t=UP.current;return UP.current=$P,t===null?$P:t}function Ej(){(Fs===0||Fs===3||Fs===2)&&(Fs=4),ua===null||!(L0&268435455)&&!(FR&268435455)||Xg(ua,Na)}function WP(t,e){var n=vi;vi|=2;var r=nte();(ua!==t||Na!==e)&&(Vp=null,y0(t,e));do try{Fge();break}catch(i){tte(t,i)}while(!0);if(aj(),vi=n,UP.current=r,Ss!==null)throw Error(dn(261));return ua=null,Na=0,Fs}function Fge(){for(;Ss!==null;)rte(Ss)}function Bge(){for(;Ss!==null&&!ume();)rte(Ss)}function rte(t){var e=ste(t.alternate,t,eu);t.memoizedProps=t.pendingProps,e===null?ite(t):Ss=e,xj.current=null}function ite(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=kge(n,e),n!==null){n.flags&=32767,Ss=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fs=6,Ss=null;return}}else if(n=Rge(n,e,eu),n!==null){Ss=n;return}if(e=e.sibling,e!==null){Ss=e;return}Ss=e=t}while(e!==null);Fs===0&&(Fs=5)}function $v(t,e,n){var r=Vi,i=vd.transition;try{vd.transition=null,Vi=1,jge(t,e,n,r)}finally{vd.transition=i,Vi=r}return null}function jge(t,e,n,r){do vb();while(ey!==null);if(vi&6)throw Error(dn(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(dn(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(xme(t,o),t===ua&&(Ss=ua=null,Na=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||tC||(tC=!0,ate(TP,function(){return vb(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=vd.transition,vd.transition=null;var s=Vi;Vi=1;var a=vi;vi|=4,xj.current=null,Lge(t,n),Jee(n,t),sge(eF),AP=!!Qz,eF=Qz=null,t.current=n,Dge(n),dme(),vi=a,Vi=s,vd.transition=o}else t.current=n;if(tC&&(tC=!1,ey=t,HP=i),o=t.pendingLanes,o===0&&(py=null),pme(n.stateNode),Mc(t,cs()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(VP)throw VP=!1,t=xF,xF=null,t;return HP&1&&t.tag!==0&&vb(),o=t.pendingLanes,o&1?t===bF?u2++:(u2=0,bF=t):u2=0,jy(),null}function vb(){if(ey!==null){var t=zQ(HP),e=vd.transition,n=Vi;try{if(vd.transition=null,Vi=16>t?16:t,ey===null)var r=!1;else{if(t=ey,ey=null,HP=0,vi&6)throw Error(dn(331));var i=vi;for(vi|=4,qn=t.current;qn!==null;){var o=qn,s=o.child;if(qn.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var d=a[l];for(qn=d;qn!==null;){var h=qn;switch(h.tag){case 0:case 11:case 15:l2(8,h,o)}var p=h.child;if(p!==null)p.return=h,qn=p;else for(;qn!==null;){h=qn;var g=h.sibling,v=h.return;if(Yee(h),h===d){qn=null;break}if(g!==null){g.return=v,qn=g;break}qn=v}}}var x=o.alternate;if(x!==null){var b=x.child;if(b!==null){x.child=null;do{var w=b.sibling;b.sibling=null,b=w}while(b!==null)}}qn=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,qn=s;else e:for(;qn!==null;){if(o=qn,o.flags&2048)switch(o.tag){case 0:case 11:case 15:l2(9,o,o.return)}var S=o.sibling;if(S!==null){S.return=o.return,qn=S;break e}qn=o.return}}var C=t.current;for(qn=C;qn!==null;){s=qn;var A=s.child;if(s.subtreeFlags&2064&&A!==null)A.return=s,qn=A;else e:for(s=C;qn!==null;){if(a=qn,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:zR(9,a)}}catch(k){qo(a,a.return,k)}if(a===s){qn=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,qn=P;break e}qn=a.return}}if(vi=i,jy(),kf&&typeof kf.onPostCommitFiberRoot=="function")try{kf.onPostCommitFiberRoot(PR,t)}catch{}r=!0}return r}finally{Vi=n,vd.transition=e}}return!1}function LW(t,e,n){e=Bb(n,e),e=Fee(t,e,1),t=fy(t,e,1),e=Yl(),t!==null&&(_E(t,1,e),Mc(t,e))}function qo(t,e,n){if(t.tag===3)LW(t,t,n);else for(;e!==null;){if(e.tag===3){LW(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(py===null||!py.has(r))){t=Bb(n,t),t=Bee(e,t,1),e=fy(e,t,1),t=Yl(),e!==null&&(_E(e,1,t),Mc(e,t));break}}e=e.return}}function $ge(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Yl(),t.pingedLanes|=t.suspendedLanes&n,ua===t&&(Na&n)===n&&(Fs===4||Fs===3&&(Na&130023424)===Na&&500>cs()-wj?y0(t,0):bj|=n),Mc(t,e)}function ote(t,e){e===0&&(t.mode&1?(e=WT,WT<<=1,!(WT&130023424)&&(WT=4194304)):e=1);var n=Yl();t=gm(t,e),t!==null&&(_E(t,e,n),Mc(t,n))}function Uge(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ote(t,n)}function Vge(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(dn(314))}r!==null&&r.delete(e),ote(t,n)}var ste;ste=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wc.current)xc=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return xc=!1,Ige(t,e,n);xc=!!(t.flags&131072)}else xc=!1,Co&&e.flags&1048576&&cee(e,DP,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;YA(t,e),t=e.pendingProps;var i=Db(e,bl.current);yb(e,n),i=mj(null,e,r,t,i,n);var o=gj();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Sc(r)?(o=!0,OP(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,uj(e),i.updater=DR,e.stateNode=i,i._reactInternals=e,cF(e,r,t,n),e=hF(null,e,r,!0,o,n)):(e.tag=0,Co&&o&&rj(e),Vl(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(YA(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Wge(r),t=uh(r,t),i){case 0:e=dF(null,e,r,t,n);break e;case 1:e=MW(null,e,r,t,n);break e;case 11:e=wW(null,e,r,t,n);break e;case 14:e=SW(null,e,r,uh(r.type,t),n);break e}throw Error(dn(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:uh(r,i),dF(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:uh(r,i),MW(t,e,r,i,n);case 3:e:{if(Vee(e),t===null)throw Error(dn(387));r=e.pendingProps,o=e.memoizedState,i=o.element,fee(t,e),FP(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Bb(Error(dn(423)),e),e=EW(t,e,r,n,i);break e}else if(r!==i){i=Bb(Error(dn(424)),e),e=EW(t,e,r,n,i);break e}else for(hu=hy(e.stateNode.containerInfo.firstChild),mu=e,Co=!0,mh=null,n=yee(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Nb(),r===i){e=ym(t,e,n);break e}Vl(t,e,r,n)}e=e.child}return e;case 5:return vee(e),t===null&&sF(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,tF(r,i)?s=null:o!==null&&tF(r,o)&&(e.flags|=32),Uee(t,e),Vl(t,e,s,n),e.child;case 6:return t===null&&sF(e),null;case 13:return Hee(t,e,n);case 4:return dj(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=zb(e,null,r,n):Vl(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:uh(r,i),wW(t,e,r,i,n);case 7:return Vl(t,e,e.pendingProps,n),e.child;case 8:return Vl(t,e,e.pendingProps.children,n),e.child;case 12:return Vl(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,io(NP,r._currentValue),r._currentValue=s,o!==null)if(Ah(o.value,s)){if(o.children===i.children&&!wc.current){e=ym(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=am(-1,n&-n),l.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?l.next=l:(l.next=h.next,h.next=l),d.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),aF(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(dn(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),aF(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Vl(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,yb(e,n),i=Md(i),r=r(i),e.flags|=1,Vl(t,e,r,n),e.child;case 14:return r=e.type,i=uh(r,e.pendingProps),i=uh(r.type,i),SW(t,e,r,i,n);case 15:return jee(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:uh(r,i),YA(t,e),e.tag=1,Sc(r)?(t=!0,OP(e)):t=!1,yb(e,n),mee(e,r,i),cF(e,r,i,n),hF(null,e,r,!0,t,n);case 19:return Wee(t,e,n);case 22:return $ee(t,e,n)}throw Error(dn(156,e.tag))};function ate(t,e){return OQ(t,e)}function Hge(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function md(t,e,n,r){return new Hge(t,e,n,r)}function Tj(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Wge(t){if(typeof t=="function")return Tj(t)?1:0;if(t!=null){if(t=t.$$typeof,t===W5)return 11;if(t===G5)return 14}return 2}function gy(t,e){var n=t.alternate;return n===null?(n=md(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function JA(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Tj(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Bx:return v0(n.children,i,o,e);case H5:s=8,i|=8;break;case Oz:return t=md(12,n,e,i|2),t.elementType=Oz,t.lanes=o,t;case Lz:return t=md(13,n,e,i),t.elementType=Lz,t.lanes=o,t;case Dz:return t=md(19,n,e,i),t.elementType=Dz,t.lanes=o,t;case gQ:return BR(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pQ:s=10;break e;case mQ:s=9;break e;case W5:s=11;break e;case G5:s=14;break e;case Ug:s=16,r=null;break e}throw Error(dn(130,t==null?t:typeof t,""))}return e=md(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function v0(t,e,n,r){return t=md(7,t,r,e),t.lanes=n,t}function BR(t,e,n,r){return t=md(22,t,r,e),t.elementType=gQ,t.lanes=n,t.stateNode={isHidden:!1},t}function V3(t,e,n){return t=md(6,t,null,e),t.lanes=n,t}function H3(t,e,n){return e=md(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Gge(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=M3(0),this.expirationTimes=M3(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=M3(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Cj(t,e,n,r,i,o,s,a,l){return t=new Gge(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=md(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},uj(o),t}function qge(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fx,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function lte(t){if(!t)return Ay;t=t._reactInternals;e:{if(r_(t)!==t||t.tag!==1)throw Error(dn(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Sc(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(dn(171))}if(t.tag===1){var n=t.type;if(Sc(n))return aee(t,n,e)}return e}function cte(t,e,n,r,i,o,s,a,l){return t=Cj(n,r,!0,t,i,o,s,a,l),t.context=lte(null),n=t.current,r=Yl(),i=my(n),o=am(r,i),o.callback=e??null,fy(n,o,i),t.current.lanes=i,_E(t,i,r),Mc(t,r),t}function jR(t,e,n,r){var i=e.current,o=Yl(),s=my(i);return n=lte(n),e.context===null?e.context=n:e.pendingContext=n,e=am(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=fy(i,e,s),t!==null&&(Eh(t,i,s,o),GA(t,i,s)),s}function GP(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function DW(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Aj(t,e){DW(t,e),(t=t.alternate)&&DW(t,e)}function Xge(){return null}var ute=typeof reportError=="function"?reportError:function(t){console.error(t)};function Pj(t){this._internalRoot=t}$R.prototype.render=Pj.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(dn(409));jR(t,e,null,null)};$R.prototype.unmount=Pj.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;D0(function(){jR(null,t,null,null)}),e[mm]=null}};function $R(t){this._internalRoot=t}$R.prototype.unstable_scheduleHydration=function(t){if(t){var e=jQ();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qg.length&&e!==0&&e<qg[n].priority;n++);qg.splice(n,0,t),n===0&&UQ(t)}};function Ij(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function UR(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function NW(){}function Yge(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var d=GP(s);o.call(d)}}var s=cte(e,r,t,0,null,!1,!1,"",NW);return t._reactRootContainer=s,t[mm]=s.current,$2(t.nodeType===8?t.parentNode:t),D0(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var d=GP(l);a.call(d)}}var l=Cj(t,0,!1,null,null,!1,!1,"",NW);return t._reactRootContainer=l,t[mm]=l.current,$2(t.nodeType===8?t.parentNode:t),D0(function(){jR(e,l,n,r)}),l}function VR(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=GP(s);a.call(l)}}jR(e,s,t,i)}else s=Yge(n,e,t,i,r);return GP(s)}FQ=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=WS(e.pendingLanes);n!==0&&(Y5(e,n|1),Mc(e,cs()),!(vi&6)&&(jb=cs()+500,jy()))}break;case 13:D0(function(){var r=gm(t,1);if(r!==null){var i=Yl();Eh(r,t,1,i)}}),Aj(t,1)}};K5=function(t){if(t.tag===13){var e=gm(t,134217728);if(e!==null){var n=Yl();Eh(e,t,134217728,n)}Aj(t,134217728)}};BQ=function(t){if(t.tag===13){var e=my(t),n=gm(t,e);if(n!==null){var r=Yl();Eh(n,t,e,r)}Aj(t,e)}};jQ=function(){return Vi};$Q=function(t,e){var n=Vi;try{return Vi=t,e()}finally{Vi=n}};Wz=function(t,e,n){switch(e){case"input":if(Fz(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=OR(r);if(!i)throw Error(dn(90));vQ(r),Fz(r,i)}}}break;case"textarea":xQ(t,n);break;case"select":e=n.value,e!=null&&fb(t,!!n.multiple,e,!1)}};CQ=Sj;AQ=D0;var Kge={usingClientEntryPoint:!1,Events:[bE,Vx,OR,EQ,TQ,Sj]},Qw={findFiberByHostInstance:t0,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Zge={bundleType:Qw.bundleType,version:Qw.version,rendererPackageName:Qw.rendererPackageName,rendererConfig:Qw.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Am.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=RQ(t),t===null?null:t.stateNode},findFiberByHostInstance:Qw.findFiberByHostInstance||Xge,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nC.isDisabled&&nC.supportsFiber)try{PR=nC.inject(Zge),kf=nC}catch{}}Cu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kge;Cu.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ij(e))throw Error(dn(200));return qge(t,e,null,n)};Cu.createRoot=function(t,e){if(!Ij(t))throw Error(dn(299));var n=!1,r="",i=ute;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Cj(t,1,!1,null,null,n,!1,r,i),t[mm]=e.current,$2(t.nodeType===8?t.parentNode:t),new Pj(e)};Cu.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(dn(188)):(t=Object.keys(t).join(","),Error(dn(268,t)));return t=RQ(e),t=t===null?null:t.stateNode,t};Cu.flushSync=function(t){return D0(t)};Cu.hydrate=function(t,e,n){if(!UR(e))throw Error(dn(200));return VR(null,t,e,!0,n)};Cu.hydrateRoot=function(t,e,n){if(!Ij(t))throw Error(dn(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=ute;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=cte(e,null,t,1,n??null,i,!1,o,s),t[mm]=e.current,$2(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new $R(e)};Cu.render=function(t,e,n){if(!UR(e))throw Error(dn(200));return VR(null,t,e,!1,n)};Cu.unmountComponentAtNode=function(t){if(!UR(t))throw Error(dn(40));return t._reactRootContainer?(D0(function(){VR(null,null,t,!1,function(){t._reactRootContainer=null,t[mm]=null})}),!0):!1};Cu.unstable_batchedUpdates=Sj;Cu.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!UR(n))throw Error(dn(200));if(t==null||t._reactInternals===void 0)throw Error(dn(38));return VR(t,e,n,!1,r)};Cu.version="18.2.0-next-9e3b772b8-20220608";function dte(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dte)}catch(t){console.error(t)}}dte(),cQ.exports=Cu;var k1=cQ.exports;const rC=Mi(k1);var hte,zW=k1;hte=zW.createRoot,zW.hydrateRoot;/**
 * @remix-run/router v1.19.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function K2(){return K2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},K2.apply(this,arguments)}var ty;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ty||(ty={}));const FW="popstate";function Jge(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:s,hash:a}=r.location;return MF("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:pte(i)}return eye(e,n,null,t)}function $s(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fte(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Qge(){return Math.random().toString(36).substr(2,8)}function BW(t,e){return{usr:t.state,key:t.key,idx:e}}function MF(t,e,n,r){return n===void 0&&(n=null),K2({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?O1(e):e,{state:n,key:e&&e.key||r||Qge()})}function pte(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function O1(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function eye(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a=ty.Pop,l=null,d=h();d==null&&(d=0,s.replaceState(K2({},s.state,{idx:d}),""));function h(){return(s.state||{idx:null}).idx}function p(){a=ty.Pop;let w=h(),S=w==null?null:w-d;d=w,l&&l({action:a,location:b.location,delta:S})}function g(w,S){a=ty.Push;let C=MF(b.location,w,S);d=h()+1;let A=BW(C,d),P=b.createHref(C);try{s.pushState(A,"",P)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(P)}o&&l&&l({action:a,location:b.location,delta:1})}function v(w,S){a=ty.Replace;let C=MF(b.location,w,S);d=h();let A=BW(C,d),P=b.createHref(C);s.replaceState(A,"",P),o&&l&&l({action:a,location:b.location,delta:0})}function x(w){let S=i.location.origin!=="null"?i.location.origin:i.location.href,C=typeof w=="string"?w:pte(w);return C=C.replace(/ $/,"%20"),$s(S,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,S)}let b={get action(){return a},get location(){return t(i,s)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(FW,p),l=w,()=>{i.removeEventListener(FW,p),l=null}},createHref(w){return e(i,w)},createURL:x,encodeLocation(w){let S=x(w);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:g,replace:v,go(w){return s.go(w)}};return b}var jW;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(jW||(jW={}));function tye(t,e,n){return n===void 0&&(n="/"),nye(t,e,n,!1)}function nye(t,e,n,r){let i=typeof e=="string"?O1(e):e,o=yte(i.pathname||"/",n);if(o==null)return null;let s=mte(t);rye(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let d=pye(o);a=hye(s[l],d,r)}return a}function mte(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&($s(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let d=_0([r,l.relativePath]),h=n.concat(l);o.children&&o.children.length>0&&($s(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),mte(o.children,e,h,d)),!(o.path==null&&!o.index)&&e.push({path:d,score:uye(d,o.index),routesMeta:h})};return t.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let l of gte(o.path))i(o,s,l)}),e}function gte(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=gte(r.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),i&&a.push(...s),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function rye(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:dye(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const iye=/^:[\w-]+$/,oye=3,sye=2,aye=1,lye=10,cye=-2,$W=t=>t==="*";function uye(t,e){let n=t.split("/"),r=n.length;return n.some($W)&&(r+=cye),e&&(r+=sye),n.filter(i=>!$W(i)).reduce((i,o)=>i+(iye.test(o)?oye:o===""?aye:lye),r)}function dye(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function hye(t,e,n){let{routesMeta:r}=t,i={},o="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],d=a===r.length-1,h=o==="/"?e:e.slice(o.length)||"/",p=UW({path:l.relativePath,caseSensitive:l.caseSensitive,end:d},h),g=l.route;if(!p&&d&&n&&!r[r.length-1].route.index&&(p=UW({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!p)return null;Object.assign(i,p.params),s.push({params:i,pathname:_0([o,p.pathname]),pathnameBase:xye(_0([o,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(o=_0([o,p.pathnameBase]))}return s}function UW(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=fye(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((d,h,p)=>{let{paramName:g,isOptional:v}=h;if(g==="*"){let b=a[p]||"";s=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const x=a[p];return v&&!x?d[g]=void 0:d[g]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:s,pattern:t}}function fye(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),fte(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function pye(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fte(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function yte(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function mye(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?O1(t):t;return{pathname:n?n.startsWith("/")?n:gye(n,e):e,search:bye(r),hash:wye(i)}}function gye(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function W3(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yye(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function vye(t,e){let n=yye(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function _ye(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=O1(t):(i=K2({},t),$s(!i.pathname||!i.pathname.includes("?"),W3("?","pathname","search",i)),$s(!i.pathname||!i.pathname.includes("#"),W3("#","pathname","hash",i)),$s(!i.search||!i.search.includes("#"),W3("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let p=e.length-1;if(!r&&s.startsWith("..")){let g=s.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}a=p>=0?e[p]:"/"}let l=mye(i,a),d=s&&s!=="/"&&s.endsWith("/"),h=(o||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(d||h)&&(l.pathname+="/"),l}const _0=t=>t.join("/").replace(/\/\/+/g,"/"),xye=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),bye=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,wye=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Sye(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const vte=["post","put","patch","delete"];new Set(vte);const Mye=["get",...vte];new Set(Mye);/**
 * React Router v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Z2(){return Z2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Z2.apply(this,arguments)}const Rj=V.createContext(null),Eye=V.createContext(null),HR=V.createContext(null),WR=V.createContext(null),$y=V.createContext({outlet:null,matches:[],isDataRoute:!1}),_te=V.createContext(null);function GR(){return V.useContext(WR)!=null}function qR(){return GR()||$s(!1),V.useContext(WR).location}function xte(t){V.useContext(HR).static||V.useLayoutEffect(t)}function Jf(){let{isDataRoute:t}=V.useContext($y);return t?jye():Tye()}function Tye(){GR()||$s(!1);let t=V.useContext(Rj),{basename:e,future:n,navigator:r}=V.useContext(HR),{matches:i}=V.useContext($y),{pathname:o}=qR(),s=JSON.stringify(vye(i,n.v7_relativeSplatPath)),a=V.useRef(!1);return xte(()=>{a.current=!0}),V.useCallback(function(d,h){if(h===void 0&&(h={}),!a.current)return;if(typeof d=="number"){r.go(d);return}let p=_ye(d,JSON.parse(s),o,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:_0([e,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[e,r,s,o,t])}const Cye=V.createContext(null);function Aye(t){let e=V.useContext($y).outlet;return e&&V.createElement(Cye.Provider,{value:t},e)}function bte(){let{matches:t}=V.useContext($y),e=t[t.length-1];return e?e.params:{}}function Pye(t,e){return Iye(t,e)}function Iye(t,e,n,r){GR()||$s(!1);let{navigator:i}=V.useContext(HR),{matches:o}=V.useContext($y),s=o[o.length-1],a=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let d=qR(),h;if(e){var p;let w=typeof e=="string"?O1(e):e;l==="/"||(p=w.pathname)!=null&&p.startsWith(l)||$s(!1),h=w}else h=d;let g=h.pathname||"/",v=g;if(l!=="/"){let w=l.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=tye(t,{pathname:v}),b=Dye(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:_0([l,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:_0([l,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),o,n,r);return e&&b?V.createElement(WR.Provider,{value:{location:Z2({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:ty.Pop}},b):b}function Rye(){let t=Bye(),e=Sye(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:i},n):null,null)}const kye=V.createElement(Rye,null);class Oye extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?V.createElement($y.Provider,{value:this.props.routeContext},V.createElement(_te.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Lye(t){let{routeContext:e,match:n,children:r}=t,i=V.useContext(Rj);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),V.createElement($y.Provider,{value:e},r)}function Dye(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=s.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);h>=0||$s(!1),s=s.slice(0,Math.min(s.length,h+1))}let l=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<s.length;h++){let p=s[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=h),p.route.id){let{loaderData:g,errors:v}=n,x=p.route.loader&&g[p.route.id]===void 0&&(!v||v[p.route.id]===void 0);if(p.route.lazy||x){l=!0,d>=0?s=s.slice(0,d+1):s=[s[0]];break}}}return s.reduceRight((h,p,g)=>{let v,x=!1,b=null,w=null;n&&(v=a&&p.route.id?a[p.route.id]:void 0,b=p.route.errorElement||kye,l&&(d<0&&g===0?(x=!0,w=null):d===g&&(x=!0,w=p.route.hydrateFallbackElement||null)));let S=e.concat(s.slice(0,g+1)),C=()=>{let A;return v?A=b:x?A=w:p.route.Component?A=V.createElement(p.route.Component,null):p.route.element?A=p.route.element:A=h,V.createElement(Lye,{match:p,routeContext:{outlet:h,matches:S,isDataRoute:n!=null},children:A})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?V.createElement(Oye,{location:n.location,revalidation:n.revalidation,component:b,error:v,children:C(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):C()},null)}var wte=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(wte||{}),qP=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(qP||{});function Nye(t){let e=V.useContext(Rj);return e||$s(!1),e}function zye(t){let e=V.useContext(Eye);return e||$s(!1),e}function Fye(t){let e=V.useContext($y);return e||$s(!1),e}function Ste(t){let e=Fye(),n=e.matches[e.matches.length-1];return n.route.id||$s(!1),n.route.id}function Bye(){var t;let e=V.useContext(_te),n=zye(qP.UseRouteError),r=Ste(qP.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function jye(){let{router:t}=Nye(wte.UseNavigateStable),e=Ste(qP.UseNavigateStable),n=V.useRef(!1);return xte(()=>{n.current=!0}),V.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Z2({fromRouteId:e},o)))},[t,e])}function $ye(t){return Aye(t.context)}function cl(t){$s(!1)}function Uye(t){let{basename:e="/",children:n=null,location:r,navigationType:i=ty.Pop,navigator:o,static:s=!1,future:a}=t;GR()&&$s(!1);let l=e.replace(/^\/*/,"/"),d=V.useMemo(()=>({basename:l,navigator:o,static:s,future:Z2({v7_relativeSplatPath:!1},a)}),[l,a,o,s]);typeof r=="string"&&(r=O1(r));let{pathname:h="/",search:p="",hash:g="",state:v=null,key:x="default"}=r,b=V.useMemo(()=>{let w=yte(h,l);return w==null?null:{location:{pathname:w,search:p,hash:g,state:v,key:x},navigationType:i}},[l,h,p,g,v,x,i]);return b==null?null:V.createElement(HR.Provider,{value:d},V.createElement(WR.Provider,{children:n,value:b}))}function Vye(t){let{children:e,location:n}=t;return Pye(EF(e),n)}new Promise(()=>{});function EF(t,e){e===void 0&&(e=[]);let n=[];return V.Children.forEach(t,(r,i)=>{if(!V.isValidElement(r))return;let o=[...e,i];if(r.type===V.Fragment){n.push.apply(n,EF(r.props.children,o));return}r.type!==cl&&$s(!1),!r.props.index||!r.props.children||$s(!1);let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=EF(r.props.children,o)),n.push(s)}),n}/**
 * React Router DOM v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Hye="6";try{window.__reactRouterVersion=Hye}catch{}const Wye="startTransition",VW=Ob[Wye];function Gye(t){let{basename:e,children:n,future:r,window:i}=t,o=V.useRef();o.current==null&&(o.current=Jge({window:i,v5Compat:!0}));let s=o.current,[a,l]=V.useState({action:s.action,location:s.location}),{v7_startTransition:d}=r||{},h=V.useCallback(p=>{d&&VW?VW(()=>l(p)):l(p)},[l,d]);return V.useLayoutEffect(()=>s.listen(h),[s,h]),V.createElement(Uye,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:s,future:r})}var HW;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(HW||(HW={}));var WW;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(WW||(WW={}));var Mte={exports:{}},Ete={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SE=V;function qye(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xye=typeof Object.is=="function"?Object.is:qye,Yye=SE.useSyncExternalStore,Kye=SE.useRef,Zye=SE.useEffect,Jye=SE.useMemo,Qye=SE.useDebugValue;Ete.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var o=Kye(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=Jye(function(){function l(v){if(!d){if(d=!0,h=v,v=r(v),i!==void 0&&s.hasValue){var x=s.value;if(i(x,v))return p=x}return p=v}if(x=p,Xye(h,v))return x;var b=r(v);return i!==void 0&&i(x,b)?x:(h=v,p=b)}var d=!1,h,p,g=n===void 0?null:n;return[function(){return l(e())},g===null?void 0:function(){return l(g())}]},[e,n,r,i]);var a=Yye(t,o[0],o[1]);return Zye(function(){s.hasValue=!0,s.value=a},[a]),Qye(a),a};Mte.exports=Ete;var eve=Mte.exports,ci="default"in Ob?Ye:Ob,GW=Symbol.for("react-redux-context"),qW=typeof globalThis<"u"?globalThis:{};function tve(){if(!ci.createContext)return{};const t=qW[GW]??(qW[GW]=new Map);let e=t.get(ci.createContext);return e||(e=ci.createContext(null),t.set(ci.createContext,e)),e}var vm=tve(),Tte=()=>{throw new Error("uSES not initialized!")};function kj(t=vm){return function(){return ci.useContext(t)}}var Cte=kj(),Ate=Tte,nve=t=>{Ate=t},rve=(t,e)=>t===e;function ive(t=vm){const e=t===vm?Cte:kj(t),n=(r,i={})=>{const{equalityFn:o=rve,devModeChecks:s={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:l,getServerState:d,stabilityCheck:h,identityFunctionCheck:p}=e();ci.useRef(!0);const g=ci.useCallback({[r.name](x){return r(x)}}[r.name],[r,h,s.stabilityCheck]),v=Ate(l.addNestedSub,a.getState,d||a.getState,g,o);return ci.useDebugValue(v),v};return Object.assign(n,{withTypes:()=>n}),n}var nr=ive(),ove=Symbol.for("react.element"),sve=Symbol.for("react.portal"),ave=Symbol.for("react.fragment"),lve=Symbol.for("react.strict_mode"),cve=Symbol.for("react.profiler"),uve=Symbol.for("react.provider"),dve=Symbol.for("react.context"),hve=Symbol.for("react.server_context"),Pte=Symbol.for("react.forward_ref"),fve=Symbol.for("react.suspense"),pve=Symbol.for("react.suspense_list"),Oj=Symbol.for("react.memo"),mve=Symbol.for("react.lazy"),gve=Pte,yve=Oj;function vve(t){if(typeof t=="object"&&t!==null){const e=t.$$typeof;switch(e){case ove:{const n=t.type;switch(n){case ave:case cve:case lve:case fve:case pve:return n;default:{const r=n&&n.$$typeof;switch(r){case hve:case dve:case Pte:case mve:case Oj:case uve:return r;default:return e}}}}case sve:return e}}}function _ve(t){return vve(t)===Oj}function xve(t,e,n,r,{areStatesEqual:i,areOwnPropsEqual:o,areStatePropsEqual:s}){let a=!1,l,d,h,p,g;function v(C,A){return l=C,d=A,h=t(l,d),p=e(r,d),g=n(h,p,d),a=!0,g}function x(){return h=t(l,d),e.dependsOnOwnProps&&(p=e(r,d)),g=n(h,p,d),g}function b(){return t.dependsOnOwnProps&&(h=t(l,d)),e.dependsOnOwnProps&&(p=e(r,d)),g=n(h,p,d),g}function w(){const C=t(l,d),A=!s(C,h);return h=C,A&&(g=n(h,p,d)),g}function S(C,A){const P=!o(A,d),k=!i(C,l,A,d);return l=C,d=A,P&&k?x():P?b():k?w():g}return function(A,P){return a?S(A,P):v(A,P)}}function bve(t,{initMapStateToProps:e,initMapDispatchToProps:n,initMergeProps:r,...i}){const o=e(t,i),s=n(t,i),a=r(t,i);return xve(o,s,a,t,i)}function wve(t,e){const n={};for(const r in t){const i=t[r];typeof i=="function"&&(n[r]=(...o)=>e(i(...o)))}return n}function TF(t){return function(n){const r=t(n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function XW(t){return t.dependsOnOwnProps?!!t.dependsOnOwnProps:t.length!==1}function Ite(t,e){return function(r,{displayName:i}){const o=function(a,l){return o.dependsOnOwnProps?o.mapToProps(a,l):o.mapToProps(a,void 0)};return o.dependsOnOwnProps=!0,o.mapToProps=function(a,l){o.mapToProps=t,o.dependsOnOwnProps=XW(t);let d=o(a,l);return typeof d=="function"&&(o.mapToProps=d,o.dependsOnOwnProps=XW(d),d=o(a,l)),d},o}}function Lj(t,e){return(n,r)=>{throw new Error(`Invalid value of type ${typeof t} for ${e} argument when connecting component ${r.wrappedComponentName}.`)}}function Sve(t){return t&&typeof t=="object"?TF(e=>wve(t,e)):t?typeof t=="function"?Ite(t):Lj(t,"mapDispatchToProps"):TF(e=>({dispatch:e}))}function Mve(t){return t?typeof t=="function"?Ite(t):Lj(t,"mapStateToProps"):TF(()=>({}))}function Eve(t,e,n){return{...n,...t,...e}}function Tve(t){return function(n,{displayName:r,areMergedPropsEqual:i}){let o=!1,s;return function(l,d,h){const p=t(l,d,h);return o?i(p,s)||(s=p):(o=!0,s=p),s}}}function Cve(t){return t?typeof t=="function"?Tve(t):Lj(t,"mergeProps"):()=>Eve}function Rte(t){t()}function Ave(){let t=null,e=null;return{clear(){t=null,e=null},notify(){Rte(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var YW={notify(){},get:()=>[]};function kte(t,e){let n,r=YW,i=0,o=!1;function s(b){h();const w=r.subscribe(b);let S=!1;return()=>{S||(S=!0,w(),p())}}function a(){r.notify()}function l(){x.onStateChange&&x.onStateChange()}function d(){return o}function h(){i++,n||(n=e?e.addNestedSub(l):t.subscribe(l),r=Ave())}function p(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=YW)}function g(){o||(o=!0,h())}function v(){o&&(o=!1,p())}const x={addNestedSub:s,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:d,trySubscribe:g,tryUnsubscribe:v,getListeners:()=>r};return x}var Pve=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ive=typeof navigator<"u"&&navigator.product==="ReactNative",XP=Pve||Ive?ci.useLayoutEffect:ci.useEffect;function KW(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function G3(t,e){if(KW(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!KW(t[n[i]],e[n[i]]))return!1;return!0}var Rve={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},kve={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Ove={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Ote={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Lve={[gve]:Ove,[yve]:Ote};function ZW(t){return _ve(t)?Ote:Lve[t.$$typeof]||Rve}var Dve=Object.defineProperty,Nve=Object.getOwnPropertyNames,JW=Object.getOwnPropertySymbols,zve=Object.getOwnPropertyDescriptor,Fve=Object.getPrototypeOf,QW=Object.prototype;function CF(t,e){if(typeof e!="string"){if(QW){const o=Fve(e);o&&o!==QW&&CF(t,o)}let n=Nve(e);JW&&(n=n.concat(JW(e)));const r=ZW(t),i=ZW(e);for(let o=0;o<n.length;++o){const s=n[o];if(!kve[s]&&!(i&&i[s])&&!(r&&r[s])){const a=zve(e,s);try{Dve(t,s,a)}catch{}}}}return t}var Lte=Tte,Bve=t=>{Lte=t},jve=[null,null];function $ve(t,e,n){XP(()=>t(...e),n)}function Uve(t,e,n,r,i,o){t.current=r,n.current=!1,i.current&&(i.current=null,o())}function Vve(t,e,n,r,i,o,s,a,l,d,h){if(!t)return()=>{};let p=!1,g=null;const v=()=>{if(p||!a.current)return;const b=e.getState();let w,S;try{w=r(b,i.current)}catch(C){S=C,g=C}S||(g=null),w===o.current?s.current||d():(o.current=w,l.current=w,s.current=!0,h())};return n.onStateChange=v,n.trySubscribe(),v(),()=>{if(p=!0,n.tryUnsubscribe(),n.onStateChange=null,g)throw g}}function Hve(t,e){return t===e}function Wve(t,e,n,{pure:r,areStatesEqual:i=Hve,areOwnPropsEqual:o=G3,areStatePropsEqual:s=G3,areMergedPropsEqual:a=G3,forwardRef:l=!1,context:d=vm}={}){const h=d,p=Mve(t),g=Sve(e),v=Cve(n),x=!!t;return w=>{const S=w.displayName||w.name||"Component",C=`Connect(${S})`,A={shouldHandleStateChanges:x,displayName:C,wrappedComponentName:S,WrappedComponent:w,initMapStateToProps:p,initMapDispatchToProps:g,initMergeProps:v,areStatesEqual:i,areStatePropsEqual:s,areOwnPropsEqual:o,areMergedPropsEqual:a};function P(B){const[W,J,H]=ci.useMemo(()=>{const{reactReduxForwardedRef:ge,...et}=B;return[B.context,ge,et]},[B]),Y=ci.useMemo(()=>{let ge=h;return W!=null&&W.Consumer,ge},[W,h]),le=ci.useContext(Y),pe=!!B.store&&!!B.store.getState&&!!B.store.dispatch,re=!!le&&!!le.store,me=pe?B.store:le.store,he=re?le.getServerState:me.getState,we=ci.useMemo(()=>bve(me.dispatch,A),[me]),[ee,ye]=ci.useMemo(()=>{if(!x)return jve;const ge=kte(me,pe?void 0:le.subscription),et=ge.notifyNestedSubs.bind(ge);return[ge,et]},[me,pe,le]),be=ci.useMemo(()=>pe?le:{...le,subscription:ee},[pe,le,ee]),Le=ci.useRef(void 0),je=ci.useRef(H),dt=ci.useRef(void 0),Be=ci.useRef(!1),ot=ci.useRef(!1),at=ci.useRef(void 0);XP(()=>(ot.current=!0,()=>{ot.current=!1}),[]);const It=ci.useMemo(()=>()=>dt.current&&H===je.current?dt.current:we(me.getState(),H),[me,H]),Lt=ci.useMemo(()=>et=>ee?Vve(x,me,ee,we,je,Le,Be,ot,dt,ye,et):()=>{},[ee]);$ve(Uve,[je,Le,Be,H,dt,ye]);let lt;try{lt=Lte(Lt,It,he?()=>we(he(),H):It)}catch(ge){throw at.current&&(ge.message+=`
The error may be correlated with this previous error:
${at.current.stack}

`),ge}XP(()=>{at.current=void 0,dt.current=void 0,Le.current=lt});const Je=ci.useMemo(()=>ci.createElement(w,{...lt,ref:J}),[J,w,lt]);return ci.useMemo(()=>x?ci.createElement(Y.Provider,{value:be},Je):Je,[Y,Je,be])}const F=ci.memo(P);if(F.WrappedComponent=w,F.displayName=P.displayName=C,l){const W=ci.forwardRef(function(H,Y){return ci.createElement(F,{...H,reactReduxForwardedRef:Y})});return W.displayName=C,W.WrappedComponent=w,CF(W,w)}return CF(F,w)}}var Gve=Wve;function qve({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:o="once"}){const s=ci.useMemo(()=>{const d=kte(t);return{store:t,subscription:d,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:o}},[t,r,i,o]),a=ci.useMemo(()=>t.getState(),[t]);XP(()=>{const{subscription:d}=s;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),a!==t.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[s,a]);const l=e||vm;return ci.createElement(l.Provider,{value:s},n)}var Xve=qve;function Dte(t=vm){const e=t===vm?Cte:kj(t),n=()=>{const{store:r}=e();return r};return Object.assign(n,{withTypes:()=>n}),n}var Yve=Dte();function Kve(t=vm){const e=t===vm?Yve:Dte(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Ql=Kve(),Zve=Rte;nve(eve.useSyncExternalStoreWithSelector);Bve(V.useSyncExternalStore);function Ta(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Jve=typeof Symbol=="function"&&Symbol.observable||"@@observable",e9=Jve,q3=()=>Math.random().toString(36).substring(7).split("").join("."),Qve={INIT:`@@redux/INIT${q3()}`,REPLACE:`@@redux/REPLACE${q3()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${q3()}`},YP=Qve;function Dj(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function Nte(t,e,n){if(typeof t!="function")throw new Error(Ta(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ta(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ta(1));return n(Nte)(t,e)}let r=t,i=e,o=new Map,s=o,a=0,l=!1;function d(){s===o&&(s=new Map,o.forEach((w,S)=>{s.set(S,w)}))}function h(){if(l)throw new Error(Ta(3));return i}function p(w){if(typeof w!="function")throw new Error(Ta(4));if(l)throw new Error(Ta(5));let S=!0;d();const C=a++;return s.set(C,w),function(){if(S){if(l)throw new Error(Ta(6));S=!1,d(),s.delete(C),o=null}}}function g(w){if(!Dj(w))throw new Error(Ta(7));if(typeof w.type>"u")throw new Error(Ta(8));if(typeof w.type!="string")throw new Error(Ta(17));if(l)throw new Error(Ta(9));try{l=!0,i=r(i,w)}finally{l=!1}return(o=s).forEach(C=>{C()}),w}function v(w){if(typeof w!="function")throw new Error(Ta(10));r=w,g({type:YP.REPLACE})}function x(){const w=p;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(Ta(11));function C(){const P=S;P.next&&P.next(h())}return C(),{unsubscribe:w(C)}},[e9](){return this}}}return g({type:YP.INIT}),{dispatch:g,subscribe:p,getState:h,replaceReducer:v,[e9]:x}}function e0e(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:YP.INIT})>"u")throw new Error(Ta(12));if(typeof n(void 0,{type:YP.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ta(13))})}function zte(t){const e=Object.keys(t),n={};for(let o=0;o<e.length;o++){const s=e[o];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{e0e(n)}catch(o){i=o}return function(s={},a){if(i)throw i;let l=!1;const d={};for(let h=0;h<r.length;h++){const p=r[h],g=n[p],v=s[p],x=g(v,a);if(typeof x>"u")throw a&&a.type,new Error(Ta(14));d[p]=x,l=l||x!==v}return l=l||r.length!==Object.keys(s).length,l?d:s}}function KP(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function t0e(...t){return e=>(n,r)=>{const i=e(n,r);let o=()=>{throw new Error(Ta(15))};const s={getState:i.getState,dispatch:(l,...d)=>o(l,...d)},a=t.map(l=>l(s));return o=KP(...a)(i.dispatch),{...i,dispatch:o}}}function n0e(t){return Dj(t)&&"type"in t&&typeof t.type=="string"}var Fte=Symbol.for("immer-nothing"),t9=Symbol.for("immer-draftable"),xu=Symbol.for("immer-state");function xh(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var $b=Object.getPrototypeOf;function N0(t){return!!t&&!!t[xu]}function _m(t){var e;return t?Bte(t)||Array.isArray(t)||!!t[t9]||!!((e=t.constructor)!=null&&e[t9])||YR(t)||KR(t):!1}var r0e=Object.prototype.constructor.toString();function Bte(t){if(!t||typeof t!="object")return!1;const e=$b(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===r0e}function ZP(t,e){XR(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function XR(t){const e=t[xu];return e?e.type_:Array.isArray(t)?1:YR(t)?2:KR(t)?3:0}function AF(t,e){return XR(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function jte(t,e,n){const r=XR(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function i0e(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function YR(t){return t instanceof Map}function KR(t){return t instanceof Set}function Uv(t){return t.copy_||t.base_}function PF(t,e){if(YR(t))return new Map(t);if(KR(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=Bte(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[xu];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[s]})}return Object.create($b(t),r)}else{const r=$b(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function Nj(t,e=!1){return ZR(t)||N0(t)||!_m(t)||(XR(t)>1&&(t.set=t.add=t.clear=t.delete=o0e),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>Nj(r,!0))),t}function o0e(){xh(2)}function ZR(t){return Object.isFrozen(t)}var s0e={};function z0(t){const e=s0e[t];return e||xh(0,t),e}var J2;function $te(){return J2}function a0e(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function n9(t,e){e&&(z0("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function IF(t){RF(t),t.drafts_.forEach(l0e),t.drafts_=null}function RF(t){t===J2&&(J2=t.parent_)}function r9(t){return J2=a0e(J2,t)}function l0e(t){const e=t[xu];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function i9(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[xu].modified_&&(IF(e),xh(4)),_m(t)&&(t=JP(e,t),e.parent_||QP(e,t)),e.patches_&&z0("Patches").generateReplacementPatches_(n[xu].base_,t,e.patches_,e.inversePatches_)):t=JP(e,n,[]),IF(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Fte?t:void 0}function JP(t,e,n){if(ZR(e))return e;const r=e[xu];if(!r)return ZP(e,(i,o)=>o9(t,r,e,i,o,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return QP(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),ZP(o,(a,l)=>o9(t,r,i,a,l,n,s)),QP(t,i,!1),n&&t.patches_&&z0("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function o9(t,e,n,r,i,o,s){if(N0(i)){const a=o&&e&&e.type_!==3&&!AF(e.assigned_,r)?o.concat(r):void 0,l=JP(t,i,a);if(jte(n,r,l),N0(l))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(_m(i)&&!ZR(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;JP(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&QP(t,i)}}function QP(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Nj(e,n)}function c0e(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:$te(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=zj;n&&(i=[r],o=Q2);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,a}var zj={get(t,e){if(e===xu)return t;const n=Uv(t);if(!AF(n,e))return u0e(t,n,e);const r=n[e];return t.finalized_||!_m(r)?r:r===X3(t.base_,e)?(Y3(t),t.copy_[e]=OF(r,t)):r},has(t,e){return e in Uv(t)},ownKeys(t){return Reflect.ownKeys(Uv(t))},set(t,e,n){const r=Ute(Uv(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=X3(Uv(t),e),o=i==null?void 0:i[xu];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(i0e(n,i)&&(n!==void 0||AF(t.base_,e)))return!0;Y3(t),kF(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return X3(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Y3(t),kF(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Uv(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){xh(11)},getPrototypeOf(t){return $b(t.base_)},setPrototypeOf(){xh(12)}},Q2={};ZP(zj,(t,e)=>{Q2[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Q2.deleteProperty=function(t,e){return Q2.set.call(this,t,e,void 0)};Q2.set=function(t,e,n){return zj.set.call(this,t[0],e,n,t[0])};function X3(t,e){const n=t[xu];return(n?Uv(n):t)[e]}function u0e(t,e,n){var i;const r=Ute(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function Ute(t,e){if(!(e in t))return;let n=$b(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=$b(n)}}function kF(t){t.modified_||(t.modified_=!0,t.parent_&&kF(t.parent_))}function Y3(t){t.copy_||(t.copy_=PF(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var d0e=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const o=n;n=e;const s=this;return function(l=o,...d){return s.produce(l,h=>n.call(this,h,...d))}}typeof n!="function"&&xh(6),r!==void 0&&typeof r!="function"&&xh(7);let i;if(_m(e)){const o=r9(this),s=OF(e,void 0);let a=!0;try{i=n(s),a=!1}finally{a?IF(o):RF(o)}return n9(o,r),i9(i,o)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===Fte&&(i=void 0),this.autoFreeze_&&Nj(i,!0),r){const o=[],s=[];z0("Patches").generateReplacementPatches_(e,i,o,s),r(o,s)}return i}else xh(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...a)=>this.produceWithPatches(s,l=>e(l,...a));let r,i;return[this.produce(e,n,(s,a)=>{r=s,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){_m(t)||xh(8),N0(t)&&(t=h0e(t));const e=r9(this),n=OF(t,void 0);return n[xu].isManual_=!0,RF(e),n}finishDraft(t,e){const n=t&&t[xu];(!n||!n.isManual_)&&xh(9);const{scope_:r}=n;return n9(r,e),i9(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=z0("Patches").applyPatches_;return N0(t)?r(t,e):this.produce(t,i=>r(i,e))}};function OF(t,e){const n=YR(t)?z0("MapSet").proxyMap_(t,e):KR(t)?z0("MapSet").proxySet_(t,e):c0e(t,e);return(e?e.scope_:$te()).drafts_.push(n),n}function h0e(t){return N0(t)||xh(10,t),Vte(t)}function Vte(t){if(!_m(t)||ZR(t))return t;const e=t[xu];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=PF(t,e.scope_.immer_.useStrictShallowCopy_)}else n=PF(t,!0);return ZP(n,(r,i)=>{jte(n,r,Vte(i))}),e&&(e.finalized_=!1),n}var bu=new d0e,Hte=bu.produce;bu.produceWithPatches.bind(bu);bu.setAutoFreeze.bind(bu);bu.setUseStrictShallowCopy.bind(bu);bu.applyPatches.bind(bu);bu.createDraft.bind(bu);bu.finishDraft.bind(bu);function Wte(t){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,t):i(o)}var f0e=Wte(),p0e=Wte,m0e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?KP:KP.apply(null,arguments)};function s9(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(Th(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>n0e(r)&&r.type===t,n}var Gte=class qS extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,qS.prototype)}static get[Symbol.species](){return qS}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new qS(...e[0].concat(this)):new qS(...e.concat(this))}};function a9(t){return _m(t)?Hte(t,()=>{}):t}function l9(t,e,n){if(t.has(e)){let i=t.get(e);return n.update&&(i=n.update(i,e,t),t.set(e,i)),i}if(!n.insert)throw new Error(Th(10));const r=n.insert(e,t);return t.set(e,r),r}function g0e(t){return typeof t=="boolean"}var y0e=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=e??{};let s=new Gte;return n&&(g0e(n)?s.push(f0e):s.push(p0e(n.extraArgument))),s},v0e="RTK_autoBatch",qte=t=>e=>{setTimeout(e,t)},_0e=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:qte(10),x0e=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,o=!1,s=!1;const a=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?_0e:t.type==="callback"?t.queueNotification:qte(t.timeout),d=()=>{s=!1,o&&(o=!1,a.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const p=()=>i&&h(),g=r.subscribe(p);return a.add(h),()=>{g(),a.delete(h)}},dispatch(h){var p;try{return i=!((p=h==null?void 0:h.meta)!=null&&p[v0e]),o=!i,o&&(s||(s=!0,l(d))),r.dispatch(h)}finally{i=!0}}})},b0e=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new Gte(t);return r&&i.push(x0e(typeof r=="object"?r:void 0)),i};function w0e(t){const e=y0e(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:s=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(Dj(n))a=zte(n);else throw new Error(Th(1));let l;typeof r=="function"?l=r(e):l=e();let d=KP;i&&(d=m0e({trace:!1,...typeof i=="object"&&i}));const h=t0e(...l),p=b0e(h);let g=typeof s=="function"?s(p):p();const v=d(...g);return Nte(a,o,v)}function Xte(t){const e={},n=[];let r;const i={addCase(o,s){const a=typeof o=="string"?o:o.type;if(!a)throw new Error(Th(28));if(a in e)throw new Error(Th(29));return e[a]=s,i},addMatcher(o,s){return n.push({matcher:o,reducer:s}),i},addDefaultCase(o){return r=o,i}};return t(i),[e,n,r]}function S0e(t){return typeof t=="function"}function M0e(t,e){let[n,r,i]=Xte(e),o;if(S0e(t))o=()=>a9(t());else{const a=a9(t);o=()=>a}function s(a=o(),l){let d=[n[l.type],...r.filter(({matcher:h})=>h(l)).map(({reducer:h})=>h)];return d.filter(h=>!!h).length===0&&(d=[i]),d.reduce((h,p)=>{if(p)if(N0(h)){const v=p(h,l);return v===void 0?h:v}else{if(_m(h))return Hte(h,g=>p(g,l));{const g=p(h,l);if(g===void 0){if(h===null)return h;throw new Error(Th(9))}return g}}return h},a)}return s.getInitialState=o,s}var E0e=Symbol.for("rtk-slice-createasyncthunk");function T0e(t,e){return`${t}/${e}`}function C0e({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[E0e];return function(i){const{name:o,reducerPath:s=o}=i;if(!o)throw new Error(Th(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(P0e()):i.reducers)||{},l=Object.keys(a),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(A,P){const k=typeof A=="string"?A:A.type;if(!k)throw new Error(Th(12));if(k in d.sliceCaseReducersByType)throw new Error(Th(13));return d.sliceCaseReducersByType[k]=P,h},addMatcher(A,P){return d.sliceMatchers.push({matcher:A,reducer:P}),h},exposeAction(A,P){return d.actionCreators[A]=P,h},exposeCaseReducer(A,P){return d.sliceCaseReducersByName[A]=P,h}};l.forEach(A=>{const P=a[A],k={reducerName:A,type:T0e(o,A),createNotation:typeof i.reducers=="function"};R0e(P)?O0e(k,P,h,e):I0e(k,P,h)});function p(){const[A={},P=[],k=void 0]=typeof i.extraReducers=="function"?Xte(i.extraReducers):[i.extraReducers],F={...A,...d.sliceCaseReducersByType};return M0e(i.initialState,B=>{for(let W in F)B.addCase(W,F[W]);for(let W of d.sliceMatchers)B.addMatcher(W.matcher,W.reducer);for(let W of P)B.addMatcher(W.matcher,W.reducer);k&&B.addDefaultCase(k)})}const g=A=>A,v=new Map;let x;function b(A,P){return x||(x=p()),x(A,P)}function w(){return x||(x=p()),x.getInitialState()}function S(A,P=!1){function k(B){let W=B[A];return typeof W>"u"&&P&&(W=w()),W}function F(B=g){const W=l9(v,P,{insert:()=>new WeakMap});return l9(W,B,{insert:()=>{const J={};for(const[H,Y]of Object.entries(i.selectors??{}))J[H]=A0e(Y,B,w,P);return J}})}return{reducerPath:A,getSelectors:F,get selectors(){return F(k)},selectSlice:k}}const C={name:o,reducer:b,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:w,...S(s),injectInto(A,{reducerPath:P,...k}={}){const F=P??s;return A.inject({reducerPath:F,reducer:b},k),{...C,...S(F,!0)}}};return C}}function A0e(t,e,n,r){function i(o,...s){let a=e(o);return typeof a>"u"&&r&&(a=n()),t(a,...s)}return i.unwrapped=t,i}var L1=C0e();function P0e(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function I0e({type:t,reducerName:e,createNotation:n},r,i){let o,s;if("reducer"in r){if(n&&!k0e(r))throw new Error(Th(17));o=r.reducer,s=r.prepare}else o=r;i.addCase(t,o).exposeCaseReducer(e,o).exposeAction(e,s?s9(t,s):s9(t))}function R0e(t){return t._reducerDefinitionType==="asyncThunk"}function k0e(t){return t._reducerDefinitionType==="reducerWithPrepare"}function O0e({type:t,reducerName:e},n,r,i){if(!i)throw new Error(Th(18));const{payloadCreator:o,fulfilled:s,pending:a,rejected:l,settled:d,options:h}=n,p=i(t,o,h);r.exposeAction(e,p),s&&r.addCase(p.fulfilled,s),a&&r.addCase(p.pending,a),l&&r.addCase(p.rejected,l),d&&r.addMatcher(p.settled,d),r.exposeCaseReducer(e,{fulfilled:s||iC,pending:a||iC,rejected:l||iC,settled:d||iC})}function iC(){}function Th(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const{reducer:L0e,actions:Yte}=L1({name:"errors",initialState:{errors:[]},reducers:{push(t,e){t.errors.push(e.payload)},pop(t){t.errors.length&&t.errors.shift()}}}),{reducer:D0e,actions:ou}=L1({name:"devices",initialState:{items:{},selectedId:null,selectedIds:[]},reducers:{refresh(t,e){t.items={},e.payload.forEach(n=>t.items[n.id]=n)},update1(t,e){t.items[e.payload.id]=e.payload},update(t,e){e.payload.forEach(n=>t.items[n.id]=n)},select(t,e){t.selectedId=e.payload},selectId(t,e){t.selectedId=e.payload,t.selectedIds=[t.selectedId]},selectIds(t,e){t.selectedIds=e.payload,[t.selectedId]=t.selectedIds},remove(t,e){delete t.items[e.payload]},clear(t,e){t.items={}}}}),{reducer:N0e,actions:K3}=L1({name:"data",initialState:{server:null,user:null,socket:null,camera:{},positions:{},history:{}},reducers:{updateServer(t,e){t.server=e.payload},updateUser(t,e){t.user=e.payload},updateSocket(t,e){t.socket=e.payload},updatePositions(t,e){Object.keys(e.payload).length>0&&e.payload.forEach(n=>{t.positions[n.deviceId]=n,t.history={}})},updatePosition(t,e){t.positions[e.payload.deviceId]===void 0&&(t.positions[e.payload.deviceId]={attributes:{}}),e.payload.hasOwnProperty("latitude")&&(t.positions[e.payload.deviceId].id=e.payload.id,t.positions[e.payload.deviceId].deviceId=e.payload.deviceId,t.positions[e.payload.deviceId].latitude=e.payload.latitude,t.positions[e.payload.deviceId].longitude=e.payload.longitude,t.positions[e.payload.deviceId].altitude=e.payload.altitude,t.positions[e.payload.deviceId].deviceTime=e.payload.deviceTime),e.payload.hasOwnProperty("course")&&(t.positions[e.payload.deviceId].course=e.payload.course),e.payload.hasOwnProperty("speed")&&(t.positions[e.payload.deviceId].speed=e.payload.speed),e.payload.hasOwnProperty("batteryLevel")&&(t.positions[e.payload.deviceId].attributes.batteryLevel=e.payload.batteryLevel)},updateCamera(t,e){Object.keys(e.payload).length>0&&e.payload.forEach(n=>{t.camera[n.deviceId]=n})}}}),z0e=t=>{let e=[],n=!1;for(let r=0;r<t.length;r++){if(e[r]={},t[r].hasOwnProperty("uav")&&(e[r].uav=t[r].uav),e[r].id=r,e[r].name=t[r].name,e[r].wp=[],e[r].attributes={},Array.isArray(t[r].wp))for(let i=0;i<t[r].wp.length;i++)e[r].wp[i]={},e[r].wp[i].pos=t[r].wp[i].pos,(Math.abs(Number(t[r].wp[i].pos[1]))>90||Math.abs(Number(t[r].wp[i].pos[2]))>90)&&(n=!0),e[r].wp[i].yaw=t[r].wp[i].yaw,e[r].wp[i].gimbal=t[r].wp[i].gimbal,t[r].wp[i].hasOwnProperty("speed")&&(e[r].wp[i].speed=t[r].wp[i].speed),t[r].wp[i].hasOwnProperty("action")&&(e[r].wp[i].action=t[r].wp[i].action);t[r].hasOwnProperty("attributes")?(t[r].attributes.hasOwnProperty("mode_landing")&&(console.log("have modelanding"+r),e[r].attributes.mode_landing=t[r].attributes.mode_landing),t[r].attributes.hasOwnProperty("mode_yaw")&&(e[r].attributes.mode_yaw=t[r].attributes.mode_yaw),t[r].attributes.hasOwnProperty("mode_gimbal")&&(e[r].attributes.mode_gimbal=t[r].attributes.mode_gimbal),t[r].attributes.hasOwnProperty("mode_trace")&&(e[r].attributes.mode_trace=t[r].attributes.mode_trace),t[r].attributes.hasOwnProperty("idle_vel")&&(e[r].attributes.idle_vel=t[r].attributes.idle_vel),t[r].attributes.hasOwnProperty("max_vel")&&(e[r].attributes.max_vel=t[r].attributes.max_vel)):(t[r].hasOwnProperty("mode_landing")&&(e[r].attributes.mode_landing=t[r].mode_landing),t[r].hasOwnProperty("mode_yaw")&&(e[r].attributes.mode_yaw=t[r].mode_yaw),t[r].hasOwnProperty("mode_gimbal")&&(e[r].attributes.mode_gimbal=t[r].mode_gimbal),t[r].hasOwnProperty("mode_trace")&&(e[r].attributes.mode_trace=t[r].mode_trace),t[r].hasOwnProperty("idle_vel")&&(e[r].attributes.idle_vel=t[r].idle_vel),t[r].hasOwnProperty("max_vel")&&(e[r].attributes.max_vel=t[r].max_vel))}return n?(alert("Error en coordenadas latitud y longitud valores entre -90 y 90"),[]):e},F0e=t=>{let e=[];console.log("mission < 3");for(let n=1;n<=t.uav_n;n++)if(t.hasOwnProperty("uav_"+n)){let r=n-1;console.log("uav - "+r),e[r]={},e[r].id=r,e[r].uav="uav_"+n,e[r].name="uav_"+n,e[r].wp=[],e[r].attributes={};for(let i=0;i<t["uav_"+n].wp_n;i++)e[r].wp[i]={},t["uav_"+n]["wp_"+i].length==3?(e[r].wp[i].yaw=0,e[r].wp[i].pos=t["uav_"+n]["wp_"+i]):(e[r].wp[i].yaw=t["uav_"+n]["wp_"+i][3],e[r].wp[i].pos=t["uav_"+n]["wp_"+i].slice(0,-1));t.hasOwnProperty("mode_landing")&&(e[r].attributes.mode_landing=t.mode_landing),t.hasOwnProperty("mode_yaw")&&(e[r].attributes.mode_yaw=t.mode_yaw),t.hasOwnProperty("idle_vel")&&(e[r].attributes.idle_vel=t.idle_vel),t["uav_"+n].hasOwnProperty("attributes")?(t["uav_"+n].attributes.hasOwnProperty("mode_landing")&&(console.log("have modelanding"+n),e[r].attributes.mode_landing=t["uav_"+n].attributes.mode_landing),t["uav_"+n].attributes.hasOwnProperty("mode_yaw")&&(e[r].attributes.mode_yaw=t["uav_"+n].attributes.mode_yaw),t["uav_"+n].attributes.hasOwnProperty("idle_vel")&&(e[r].attributes.idle_vel=t["uav_"+n].attributes.idle_vel),t["uav_"+n].attributes.hasOwnProperty("max_vel")&&(e[n].attributes.max_vel=t["uav_"+n].attributes.max_vel)):(t["uav_"+n].hasOwnProperty("mode_landing")&&(e[r].attributes.mode_landing=t["uav_"+n].mode_landing),t["uav_"+n].hasOwnProperty("mode_yaw")&&(e[r].attributes.mode_yaw=t["uav_"+n].mode_yaw),t["uav_"+n].hasOwnProperty("idle_vel")&&(e[r].attributes.idle_vel=t["uav_"+n].idle_vel))}return console.log("-----------   legacy   --------"),console.log(e),e},{reducer:B0e,actions:Af}=L1({name:"mission",initialState:{name:"Mission no loaded",description:"",home:[0,0],route:[],attributes:{},selectpoint:{id:-1}},reducers:{updateWpPos(t,e){e.payload.route_id>=0&&(t.route[e.payload.route_id].wp[e.payload.wp_id].pos[0]=e.payload.lat,t.route[e.payload.route_id].wp[e.payload.wp_id].pos[1]=e.payload.lng)},selectpoint(t,e){console.log("selec point"),t.selectpoint=e.payload},reloadMission(t,e){t.route=e.payload},reloadName(t,e){t.name=e.payload.name,t.description=e.payload.description},updateMission(t,e){t.name=e.payload.name,e.payload.version=="3"?t.route=z0e(e.payload.route):t.route=F0e(e.payload),t.route.length>0&&(console.log("update home"),t.home=t.route[0].wp[0].pos)},clearMission(t,e){console.log("clear mission"),t.name="Mission no loaded",t.route=[],t.attributes={}}}}),{reducer:j0e,actions:gh}=L1({name:"session",initialState:{server:null,user:{latitude:36.473284,longitude:-6.20777,zoom:12,attributes:{}},socket:null,positions:{},history:{},markers:{bases:[],elements:[]},planning:{id:1234,name:"no mission",objetivo:{id:1},loc:[],meteo:[],bases:[],settings:{}}},reducers:{updateServer(t,e){t.server=e.payload},updateServerROS(t,e){t.server.rosState=e.payload},updateUser(t,e){t.user=e.payload},updateSocket(t,e){t.socket=e.payload},updatePositions(t,e){const n=t.user.attributes.mapLiveRoutes||t.server.attributes.mapLiveRoutes||"none",r=t.user.attributes["web.liveRouteLength"]||t.user.attributes["web.liveRouteLength"]||10;e.payload.forEach(i=>{if(t.positions[i.deviceId]=i,n!=="none"){const o=t.history[i.deviceId]||[],s=o.at(-1);(!s||s[0]!==i.longitude&&s[1]!==i.latitude)&&(t.history[i.deviceId]=[...o.slice(1-r),[i.longitude,i.latitude]])}else t.history={}})},updateMarker(t,e){e.payload&&e.payload.elements&&(t.markers=e.payload)},addMarkerElement(t,e){t.markers.elements.push(...e.payload)},addMarkerBase(t,e){t.markers.bases.push(...e.payload)},updatePlanning(t,e){e.payload.objetivo&&(t.planning=e.payload)}}}),{reducer:$0e,actions:U0e}=L1({name:"events",initialState:{items:[]},reducers:{add(t,e){t.items.unshift(...e.payload),t.items.splice(50)},delete(t,e){t.items=t.items.filter(n=>n.id!==e.payload.id)},deleteAll(t){t.items=[]}}}),c9=3,V0e=1500,H0e=()=>t=>{const e=[];let n=!1,r=0;return setInterval(()=>{n?(e.length<c9&&(n=!1),Zve(()=>e.splice(0,e.length).forEach(i=>t(i)))):(r>c9&&(n=!0),r=0)},V0e),i=>i.type==="devices/update"||i.type==="positions/update"?n?(e.push(i),null):(r+=1,t(i)):t(i)},W0e=zte({errors:L0e,devices:D0e,data:N0e,events:$0e,mission:B0e,session:j0e}),G0e=w0e({reducer:W0e,middleware:t=>t().concat(H0e)}),F0={black:"#000",white:"#fff"},Gp={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},G_={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Kte={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},q_={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},X_={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},yh={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Fj={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",A100:"#ffe57f",A200:"#ffd740",A400:"#ffc400",A700:"#ffab00"},eS={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Lf={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},tS={white:F0.white,background:Lf[50],primary:Kte[900],secondary:yh[800],positive:yh[500],medium:Fj[700],negative:Gp[500],neutral:Lf[500],geometry:"#3bb2d0"},q0e={0:"#F34C28",1:"#F39A28",2:"#1EC910",3:"#1012C9",4:"#C310C9",5:"#1FDBF1",6:"#F6FD04",7:"#808080"},Hf={background:{default:tS.background},primary:{main:tS.primary},secondary:{main:tS.secondary,contrastText:tS.white},colors:tS,colors_devices:q0e};var Bj={exports:{}};Bj.exports=Zte;Bj.exports.parse=Zte;Bj.exports.stringify=Jte;var u9=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,d9=new RegExp("^"+u9.source+"(\\s"+u9.source+"){1,}");function Zte(t){var e=t.split(";"),n=e.pop(),r=(e.shift()||"").split("=").pop(),i=0;function o(C){var A=n.substring(i).match(C);return A?(i+=A[0].length,A[0]):null}function s(C){return C&&r.match(/\d+/)&&(C.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+r}}),C}function a(){o(/^\s*/)}function l(){a();for(var C=0,A=[],P=[A],k=A,F;F=o(/^(\()/)||o(/^(\))/)||o(/^(,)/)||o(d9);){if(F==="(")P.push(k),k=[],P[P.length-1].push(k),C++;else if(F===")"){if(k.length===0||(k=P.pop(),!k))return null;if(C--,C===0)break}else if(F===",")k=[],P[P.length-1].push(k);else if(!F.split(/\s/g).some(isNaN))Array.prototype.push.apply(k,F.split(/\s/g).map(parseFloat));else return null;a()}return C!==0?null:A}function d(){for(var C=[],A,P;P=o(d9)||o(/^(,)/);)P===","?(C.push(A),A=[]):P.split(/\s/g).some(isNaN)||(A||(A=[]),Array.prototype.push.apply(A,P.split(/\s/g).map(parseFloat))),a();if(A)C.push(A);else return null;return C.length?C:null}function h(){if(!o(/^(point(\sz)?)/i)||(a(),!o(/^(\()/)))return null;var C=d();return!C||(a(),!o(/^(\))/))?null:{type:"Point",coordinates:C[0]}}function p(){if(!o(/^(multipoint)/i))return null;a();var C=n.substring(n.indexOf("(")+1,n.length-1).replace(/\(/g,"").replace(/\)/g,"");n="MULTIPOINT ("+C+")";var A=l();return A?(a(),{type:"MultiPoint",coordinates:A}):null}function g(){if(!o(/^(multilinestring)/i))return null;a();var C=l();return C?(a(),{type:"MultiLineString",coordinates:C}):null}function v(){if(!o(/^(linestring(\sz)?)/i)||(a(),!o(/^(\()/)))return null;var C=d();return!C||!o(/^(\))/)?null:{type:"LineString",coordinates:C}}function x(){if(!o(/^(polygon(\sz)?)/i))return null;a();var C=l();return C?{type:"Polygon",coordinates:C}:null}function b(){if(!o(/^(multipolygon)/i))return null;a();var C=l();return C?{type:"MultiPolygon",coordinates:C}:null}function w(){var C=[],A;if(!o(/^(geometrycollection)/i)||(a(),!o(/^(\()/)))return null;for(;A=S();)C.push(A),a(),o(/^(,)/),a();return o(/^(\))/)?{type:"GeometryCollection",geometries:C}:null}function S(){return h()||v()||x()||p()||g()||b()||w()}return s(S())}function Jte(t){t.type==="Feature"&&(t=t.geometry);function e(s){return s.join(" ")}function n(s){return s.map(e).join(", ")}function r(s){return s.map(n).map(o).join(", ")}function i(s){return s.map(r).map(o).join(", ")}function o(s){return"("+s+")"}switch(t.type){case"Point":return"POINT ("+e(t.coordinates)+")";case"LineString":return"LINESTRING ("+n(t.coordinates)+")";case"Polygon":return"POLYGON ("+r(t.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+n(t.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+i(t.coordinates)+")";case"MultiLineString":return"MULTILINESTRING ("+r(t.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+t.geometries.map(Jte).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}}const rh=t=>new Promise(e=>{const n=new Image;n.onload=()=>e(n),n.src=t}),h9=(t,e)=>{const n=document.createElement("canvas");n.width=t.width*devicePixelRatio,n.height=t.height*devicePixelRatio,n.style.width=`${t.width}px`,n.style.height=`${t.height}px`;const r=n.getContext("2d");return r.save(),r.fillStyle=e,r.globalAlpha=1,r.fillRect(0,0,n.width,n.height),r.globalCompositeOperation="destination-atop",r.globalAlpha=1,r.drawImage(t,0,0,n.width,n.height),r.restore(),n},Qu=(t,e,n,r,i)=>{const o=document.createElement("canvas");o.width=t.width*devicePixelRatio,o.height=t.height*devicePixelRatio,o.style.width=`${t.width}px`,o.style.height=`${t.height}px`;const s=o.getContext("2d");if(s.drawImage(t,0,0,o.width,o.height),e){const l=o.width*.5,d=o.height*.5;s.drawImage(h9(e,n),(o.width-l)/2,(o.height-d)/2,l,d)}else n&&s.drawImage(h9(t,n),0,0,o.width,o.height);return s.getImageData(0,0,o.width,o.height)},Ch=t=>{var s;const e=new Set,{layers:n}=t.getStyle();(s=n==null?void 0:n.forEach)==null||s.call(n,a=>{var l,d,h;(h=(d=(l=a.layout)==null?void 0:l["text-font"])==null?void 0:d.forEach)==null||h.call(d,e.add,e)});const r=[...e],i=r.find(a=>a.includes("Regular"));if(i)return[i];const o=r.find(Boolean);return o?[o]:["Roboto Regular"]},X0e="data:image/svg+xml,%3csvg%20width='48px'%20height='48px'%20viewBox='0%200%2010%2010'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3cfilter%20id='shadow'%3e%3cfeDropShadow%20dx='0'%20dy='0.1'%20stdDeviation='0.3'%20flood-color='grey'/%3e%3c/filter%3e%3c/defs%3e%3ccircle%20cx='5'%20cy='50%25'%20r='4'%20style='fill:white;%20filter:url(%23shadow);'/%3e%3c/svg%3e",Y0e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='56'%20height='56'%20version='1.1'%20viewBox='0%200%2011.667%2011.667'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m%205.833%200.1%20L%204.2%201.79%20A%205.83%205.83%200,0,1%207.4,1.79%20Z%20'%20fill='%23283593'%20/%3e%3c/svg%3e",K0e="data:image/svg+xml,%3csvg%20width='48px'%20height='48px'%20viewBox='0%200%2010%2010'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='5'%20cy='50%25'%20r='4'%20stroke='black'%20stroke-width='0.5'/%3e%3c/svg%3e",Z0e="data:image/svg+xml,%3csvg%20width='48px'%20height='72px'%20viewBox='0%200%2010%2015'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3cfilter%20id='shadow'%3e%3cfeDropShadow%20dx='0'%20dy='0.1'%20stdDeviation='0.3'%20flood-color='grey'/%3e%3c/filter%3e%3c/defs%3e%3ccircle%20cx='5'%20cy='50%25'%20r='4'%20style='fill:white;%20filter:url(%23shadow);'/%3e%3cpath%20d='m%205%200%20L%201.5%205.5%20L%208.5%205.5%20Z%20'%20style='fill:white;%20'/%3e%3c/svg%3e",oC="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='24'%20height='24'%20fill='%23000000'%3e%3cpath%20d='M8,22h2l4.997-8H20c1.105,0,2-0.895,2-2s-0.895-2-2-2h-5.003L10,2H8l2.493,8H4.996L3.5,8H2l1,4l-1,4h1.5l1.496-2h5.497%20L8,22z'%20fill='%23000000'/%3e%3c/svg%3e",J0e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='24'%20height='24'%20fill='%23000000'%3e%3cpath%20d='M%202%203%20L%202%205%20L%209%205%20L%209%203%20L%202%203%20z%20M%2011%203%20L%2011%206.2050781%20C%208.584%206.6840781%207.012375%207.956%206.359375%209%20L%204%209%20L%204%207%20L%202%207%20L%202%2013%20L%204%2013%20L%204%2011%20L%206%2011%20L%206%2013.300781%20C%206%2015.370781%207.8795313%2017%2010.269531%2017%20L%2013.810547%2017%20C%2016.170547%2017%2021.570703%2017%2021.970703%2013%20L%2017%2013%20C%2014.79%2013%2013%2011.21%2013%209%20L%2013%203%20L%2011%203%20z%20M%2015%203%20L%2015%205%20L%2022%205%20L%2022%203%20L%2015%203%20z%20M%2015%206.1699219%20L%2015%209%20C%2015%2010.1%2015.9%2011%2017%2011%20L%2021.740234%2011%20C%2020.940234%208.64%2018.28%206.7299219%2015%206.1699219%20z%20M%2021%2018%20C%2021%2018.552%2020.552%2019%2020%2019%20L%206%2019%20L%206%2021%20L%2020%2021%20C%2021.654%2021%2023%2019.654%2023%2018%20L%2021%2018%20z'%20fill='%23000000'/%3e%3c/svg%3e",Q0e="/assets/drone1-C9CzjY_U.svg",e_e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='24'%20height='24'%20fill='%23000000'%3e%3cpath%20d='%20M18,22%20v-9%20h3%20v-3%20h-3%20L18,2%20c-5,2,-5,8,-5,8.5%20H7%20L1.5,6%20v13%20l5.5-6.5%20h6%20c0,4,4,8,5,8z'%20fill='%23000000'/%3e%3c/svg%3e",Vv="/assets/drone2-DvfKL1Xg.svg",t_e="/assets/drone3-Q_BmG4OH.svg",n_e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='47'%20height='37'%20viewBox='0%200%2047%2037'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M23.5%200L46.4497%2036.75H0.550327L23.5%200Z'%20fill='%2300FF0A'/%3e%3c/svg%3e",r_e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='10.550469mm'%20height='11.099902mm'%20viewBox='0%200%2010.550469%2011.099902'%20version='1.1'%20id='svg5'%20sodipodi:docname='PowerTower.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3csodipodi:namedview%20id='namedview29'%20pagecolor='%23ffffff'%20bordercolor='%23000000'%20borderopacity='0.25'%20inkscape:showpageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20inkscape:document-units='mm'%20showgrid='false'%20/%3e%3cdefs%20id='defs2'%20/%3e%3cg%20id='layer1'%20transform='matrix(1.2914054,0,0,1.2914054,-44.349104,-250.92541)'%20inkscape:export-filename='../8bf6bfef/g329812.svg'%20inkscape:export-xdpi='96'%20inkscape:export-ydpi='96'%3e%3cg%20id='g1611'%20transform='matrix(0.1732213,0,0,0.1732213,28.393016,160.64652)'%3e%3cpath%20style='fill:%23000000;stroke:%23999999;stroke-width:0.264583'%20d='m%2044.755491,243.21009%20c%200.0638,-0.70167%200.12758,-1.40335%200.19137,-2.10502'%20id='path245-8-0'%20/%3e%3cpath%20style='fill:%23000000;stroke-width:0.264583'%20d='m%2042.705671,243.89909%2015.24211,-49.59496%2014.9889,49.61983%20-14.94047,-4.79905%20z'%20id='path366-6-1'%20/%3e%3cpath%20style='fill:none;stroke:%23999999;stroke-width:1.5;stroke-dasharray:none;stroke-dashoffset:0'%20d='m%2065.090551,218.22825%20-14.21776,4.65545%2015.77463,5.18213%20-21.10264,6.73158'%20id='path1500-5-8'%20/%3e%3cpath%20style='fill:none;stroke:%23999999;stroke-width:1.5;stroke-dasharray:none;stroke-dashoffset:0'%20d='m%2050.587581,218.15902%2014.21776,4.65545%20-15.77463,5.18213%2021.10264,6.73158'%20id='path1500-5-6-0'%20/%3e%3cpath%20style='fill:%23000000;stroke:%23b3b3b3;stroke-width:2;stroke-dasharray:none;stroke-dashoffset:0'%20d='m%2037.095893,210.4801%2041.910248,0.11388'%20id='path368-6-4'%20/%3e%3ccircle%20style='fill:%2387decd;stroke:%23000000;stroke-width:0.495712;stroke-dasharray:none;stroke-dashoffset:0'%20id='path3174'%20cx='36.455219'%20cy='210.51549'%20r='1.8656268'%20/%3e%3ccircle%20style='fill:%235fd3bc;stroke:%23000000;stroke-width:0.495712;stroke-dasharray:none;stroke-dashoffset:0'%20id='path3174-8'%20cx='79.391953'%20cy='210.65347'%20r='1.8656268'%20/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",i_e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='80'%20height='80'%20viewBox='0%200%2011%2010'%20version='1.1'%20id='svg5'%20sodipodi:docname='PowerTower.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3csodipodi:namedview%20id='namedview29'%20pagecolor='%23ffffff'%20bordercolor='%23000000'%20borderopacity='0.25'%20inkscape:showpageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20inkscape:document-units='mm'%20showgrid='false'%20/%3e%3cdefs%20id='defs2'%20/%3e%3cg%20id='layer1'%20transform='matrix(1.2914054,0,0,1.2914054,-44.349104,-250.92541)'%20inkscape:export-filename='../8bf6bfef/g329812.svg'%20inkscape:export-xdpi='96'%20inkscape:export-ydpi='96'%3e%3cg%20id='g1611'%20transform='matrix(0.1732213,0,0,0.1732213,28.393016,160.64652)'%3e%3ccircle%20style='fill:yellow;stroke:%23000000;stroke-width:0.495712;stroke-dasharray:none;stroke-dashoffset:0'%20id='path3174'%20cx='58'%20cy='213'%20r='10'%20/%3e%3cpath%20style='fill:%2387decd;stroke:%23000000;stroke-width:0.51;stroke-dasharray:none;stroke-dashoffset:0'%20d='m%2058,210%20L84.5%20210%20L58%20205%20Z'%20id='path368-6-9'%20/%3e%3cpath%20style='fill:%2387decd;stroke:%23000000;stroke-width:0.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-linejoin:round'%20d='m%2058,210%20L32.5%20210%20L58%20205%20Z'%20id='path368-6-9'%20/%3e%3crect%20width='5'%20height='10'%20x='55.5'%20y='210'%20style='fill:%23b3b3b3;stroke:%23000000;stroke-width:1;stroke-dasharray:none;stroke-dashoffset:0'%20/%3e%3cpath%20style='fill:%23b3b3b3;stroke:%23000000;stroke-width:1;stroke-dasharray:none;stroke-dashoffset:0'%20d='m%2053,210%20q%205%20-10%2010%200%20Z'%20id='path368-6-9'%20/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",o_e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='200'%20height='200'%20viewBox='90%2070%2050%2050'%20%3e%3cg%20transform='rotate(-134.05384,100.54137,156.99454)'%20%3e%3cpath%20style='fill:%23b3b3b3;stroke:%23000000;stroke-width:0.3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:3.2;stroke-dasharray:none;paint-order:markers%20stroke%20fill'%20d='m%20141.88197,212.63576%20c%200,0%201.61498,-2.59663%202.08997,-3.29329%200.475,-0.69665%205.60494,-6.33325%205.8266,-6.61825%200.22166,-0.285%204.49661,-5.2566%204.49661,-5.2566%200,0%20-8.89652,8.80472%20-9.59488,9.59488%20-0.31234,0.35339%20-1.13999,1.29832%20-1.61498,1.67832%20-0.38387,0.30709%20-2.3433,1.48831%20-2.3433,1.48831%20l%200.15832,0.94999%20z'%20id='path5414-6'%20/%3e%3cpath%20style='fill:%23b3b3b3;stroke:%23000000;stroke-width:0.3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:3.2;stroke-dasharray:none;paint-order:markers%20stroke%20fill'%20d='m%20139.16624,215.47396%20c%200,0%20-2.48114,1.78731%20-3.14399,2.30846%20-0.66284,0.52114%20-5.93862,6.02146%20-6.20793,6.26195%20-0.2693,0.24049%20-4.93961,4.84269%20-4.93961,4.84269%200,0%208.18122,-9.47306%208.9222,-10.22339%200.33142,-0.33557%201.21807,-1.22536%201.56492,-1.7251%200.28035,-0.40381%201.32599,-2.43883%201.32599,-2.43883%20l%200.95854,0.0936%20z'%20id='path5414-8-3'%20/%3e%3cpath%20style='fill:%23b3b3b3;stroke:%23000000;stroke-width:0.3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:3.2;stroke-dasharray:none;paint-order:markers%20stroke%20fill'%20d='m%20137.73369,214.37741%20c%200,0%200.76165,0.91155%201.83664,1.13999%200.98467,0.20925%202.44799,-1.41988%202.37497,-2.46997%20-0.0723,-1.03979%20-1.13998,-1.89998%20-1.13998,-1.89998%20z'%20id='path5345-3'%20/%3e%3cpath%20style='fill:%23b3b3b3;stroke:%23000000;stroke-width:0.3;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:3.2;stroke-dasharray:none;paint-order:markers%20stroke%20fill'%20d='m%20132.92042,209.46914%20c%20-0.66499,0.74416%203.90652,5.766%204.62327,5.00327%200.71676,-0.76273%202.50933,-2.59676%203.26163,-3.32496%200.83233,-0.80566%20-3.92896,-5.43754%20-4.71828,-4.74994%20-0.78931,0.6876%20-2.50163,2.32747%20-3.16662,3.07163%20z'%20id='path5294-7'%20/%3e%3c/g%3e%3c/svg%3e",s_e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='40'%20height='40'%20viewBox='0%200%2040%2040'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='4'%20y='4'%20width='32'%20height='32'%20fill='%235144E6'%20stroke='%23FF0A0A'%20stroke-width='8'/%3e%3c/svg%3e",a_e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG0AAAG6CAYAAAACtMh1AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAADvRJREFUeJzt3X1UlnWex/HPBTeBqDwJhIkCGbhmzKj4UCtm7inH1B3L2WbbzNQJbRxHbcbZcTI0s3TLmdMcz2zblq6Go+RksWaK9DBTYhiapIhoiOitiIIiCioP8vDbP3Q5Q5ZzofcDn+bzOoc/gN/1vX7nenPDxX3uA5YxBh2NZVnDAWQACPfSFuoAzDHGrPDS+a/L6qDR0sLCwp6YOXOmV86fkZGBwsLCA8aYfl7ZwN/g8PYGvoVfeHg4Fi9e7JWTl5SUoLCw0M8rJ7fBx9sbkPZTNEKKRkjRCCkaIUUjpGiEFI2QohFSNEKKRkjRCCkaIUUjpGiEFI2QohFSNEKKRkjRCCkaIUUjpGiEFI1QR32xqi1vv/02Dh061O7jZs+ejaCgIDfsyDOoo6Wnp+O9995r93FTpkyhjvZd+Pa41xhj2XkDMM3bm3WF70K0vzuKRkjRCCkaIUUjpGiEFI2QohFSNEKKRkjRCCkaIUUjpGiEHABgWVYwOlbAW9qx1teyrFCbawPbMdenHXM9pcUYU+2wLGslgCe9vZubkAigyg1ze7tp7k2xLOt/HAAmjxkzBuPGjfP2flqtWrUKNTU1ttZGR0dj/vz5ttbm5ORg3bp1ttZGRkZi0aJFttZ6yubNm5GZmTnZAcAxePBgzJgxw9t7arV9+3bk5eXZWhseHm57735+frajBQcHd6hrAgAVFRXIzMx0dKSfY2KTohFSNEKKRkjRCCkaIQeA2o0bNwY6nU5v76VVbm4u/Pzs/Qnh48ePY8qUKbbWFhcX295DRUWF7bmesnfvXgCodQD4dX5+/pz8/HxfL+/pr0UmJCR0sbOwqqrqclpa2gmbc7sCiLCzsKampjEtLa3U5lxPaQaw3GGMeRXAq97ezV+zLCsdwL/ZXH7AGDPA5twUAHb/1r7TGJNgc61H6WcaIUUjpGiEFI2QohFSNEKKRkjRCCkaIUUjpGiEFI2QohFSNEKKRkjRCCkaIUUjpGiEFI2QohFSNEKKRkjRCCkaIUUjpGiEFI2QohFSNEKKRkjRCCkaIUUjpGiEFI2QohFSNEKKRkjRCCkaIUUjpGiEFI2QohFSNEKKRkjRCCkaIUUjpGiEFI2QohFSNEKKRkjRCCkaIUUjZBljXD/UsvwBvAJgCADrBkbEBQQEhPXr1++6i0pKSnD+/PlaAAdtzg0HEJOYmIhbbvn2/8p89OhRVFVVNQDYb3fDX1MKYLYxxi3/q8Zd0R4B8PawYcMQEBDg8vkdXU5ODurr6/9gjJntjvkOdwwFEAwA69evR3R0tJtO0XHFxcXB6XQGuWu+fqYRUjRCikZI0Qh5NFr5mWqkb8nFOx/uxumzNd+4puhoOY6fOgtnWSXe3JiDc9WXWj939txFvLkxB3X1lz215Va79h3BB9sLPH7eb+KxaB/nHkD8w6mY+NxqPDJ/BXqO/Q1m/Uc6zlRdaLPuhRWbcezkWeQdcGLqi2swZ9n61s8dLavE1BfWoLqmzu37PeQsx5+27mp9P33rTry8Osvt57XDXbf8bbS0tCBl8RpMuK8/BvxDL2zLO4T3cwrwn+9uw5rMXEx8cChGDIzH/sNl+DD3AFY+NxlbsvMBAGs/2IUfPzAI4+77fpuZxgB7Djhx0FmO0K6BuP/uO3G6qgalp6pwz4A7Wtft+PIwYm4LgwGws+AImpoN7h0Yj+6RIahvaMTO/BIkJkTj831H0NTUjNHD7sLlxia8/GYWMj7Zg1vDghAfeyum/+heXLxYDwBoaGjEZ3uKcaqyBgm9IjHke7d74jK28ki0/YfK0Cc2CmkvPgkAePrxB7C/uAyzlr2FT/cU47WMbLyWkQ0fy8Kq1EkI8L/y75I7+TlwR88IzHhpHZIHxreZufHPeUh58Y/oG9cdXxaV4ofJiZg7aRSSp/0OX72zCPGxUSg8XIbh03+L3NXzcP+M36NPbBROVlajrqERJe8tQfWFS7hvxu9xe/duOFtzCbUNlzFhRH88mzIWm7cX4GLdZcx8OR3PPjkWO/Ydxt6vTuCztHmY9dJb+PiLg+gW3Bl5RaVYlToJUx5K9sSlBOChb4/+/n54ZspoAEBjUzOam1twV3wP/OWNufjLfz2NeY8/gF88+k/49L9/icnjh7Ue5/DxwcoFT6C86gJ+9cqGNjOHDYjHiaxl+Gz1PMx5dCT2FJViUGIc+vSKwJrNuQCANzKyMahvDAb2i0XBhkXYtfZZbHrlZ6i6UAvniTOts4bcFYuTHyzDM0+Mxo59R5CYEI1Zj45EWJdO2P/u83hs7NA2514wbSxK3l+KL9al4nu398CXRcfddem+kUceaX3iohASFIh/nv0HbN2xHw5fX4wc1Afzf/IgRg7pi5FD+raufXZ5Bv6xf+/W95PujMW8SaOwNC0LvW8LbzP3N8vfRfaXxThyshK3hnWFBeDxMXfj9Yzt+PXU0VibuRMvzZoACxbe/zQfG/6ch+JjFdfs7+ePjERgJ3+EdO2Ea5/Wu/ap01NVNfjV8new96tSOCuqMHzgHdescSeP3YhMfW41dhU6MahvDHx8LGTtPIARP30FD//yVWTvLkJzcwsKi8uwevMOJPWLbXNs6vRxuDM2CotXZ7Z+LGVxGj4vOIK1L/4ETz08vPXjEx8cirIz5/HzJWvR1NyCR0cPxrotuZi7/B38+6RRWL80BQDQJk2bLl+P1vb92roG/GDmcnQL6oyPXvsF7oyJuuFrcqM88kgrK69C0bEKFP3vCwgJCsS5mktYvu5jLPvjR9iYvQ8bs/fBYVloajGYOu5uRIUHtzk+wN8PKxc8geHTftf6sWOnqhAaFIjyyhrsKDiC+oZGNFxuREyPcIwYEI81H36Bp8Yno2vnTjheXgVfXx/4+vhg09Xb9uoLtQgLDvyG3V4p2MnfDxfrLyP/q+PoGdWt9bM1F+tQfakOXQL98UXhUZw4cx4XauvR3NwCX1/PPAY8chZnWSV+9qMRCAm6cpFCgzpj0Yzx2P+nhZg+PhkxkaGICOmCWY+MwKvPTAQABHfphMTbu8O6+ii4+/u9kTp1NPrfcRscDh+8MOOHOFpWicnPrcZ9AxNgDLBkxRYAQMpDyYgJD8W0CVcegVPHD0P/+Gg8lroS5Wer8UBSH8xZ9hZ8fX0RExEKf78rX7tBgQHo0e3KF8y/jhqMvrFRSH7yt/g8/zDCugQiKrQroiJCMG/SKKzalIPn39iMyWOGYsv2AmTvLvLEpbzCGOPyNwApAExpaan5exQbG2sAvGnccG2NMXoai5GiEVI0QopGyF23/C0A8MknnyAiIsJNp+i4amtrgWt/4XMZd72wpw+A3QC6uHw4BwNgojHmLXcMd0s0ALAsKxJAzxs8fEmvXr1+kJGRcd1Fc+fOxbZt2w4BeMzm3IcApGZmZiIyMvJbF6WmpiIrK+s4gAl2N/w154wxR27w2L/Jbc+IGGNOAzh9I8dallUVEBCApKSk664LCQkBgFpjTJ7NuQMAIDEx8bqvEgsLCwOABrtzPU03IoQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSOkaIQUjZCiEVI0QopGSNEIKRohRSPkcMUQy7LiAcS4YtZVUe1Y29WyrPttru3bjrmB7ZhrxzljTJ4rBt10NMuyhgDIccWsG9QbwEdumNvD1XMty/qpMeb1m53jigt9DwDHvU9/CL+AIBeMA/ZvWgg0OW2t7XprAoZMXWNr7cn8TTi4damttYGhPXHPUxtsrbVjx+v/grpzJ5IBdIhoFgCExQyGX2CIC8YB/p27AdVOW2t9bwlEWNxQW2urywps78HHL8D2XDt8/QKAq9fqZulGhJCiEVI0QopGSNEIueLu8TQAfLx0ECwfXxeMA+qrTyGuV3dba2tOHUTWwj621jbWVdveQ+3ZY7bn2p2Hq9fqZrki2gYA8RfPlPRzwaz/NxTo3svOwpamhvMXKg7Z/SU4DsAgW3ObL1+8UHFoq825dpwGsMQVg246mjGmEcDzLthLK8uy0gHYigbAaYz5sc25KbAZDcApu3M9TT/TCCkaIUUjpGiEFI2QohFSNEKKRkjRCCkaIUUj5K1XULlSoGVZSTbXuvJlfl7zXYiWAGC3tzfhSdTRFixYgOnTp7f7uPDwcDfsxnOooyUl2f2u+N2iGxFCikZI0QgpGiFFI6RohBSNkKIRUjRCHfUZkcbKykosXLjQKyfPz88HgEavnNwGyxjj7T1cw7Ks4QAyAHjrScI6AHOMMSu8dP7r+j/vUx1aYP5/2wAAAABJRU5ErkJggg==",mc="/assets/drone-svgrepo-BHqRZACo.svg",Z3={0:"#F34C28",1:"#F39A28",2:"#1EC910",3:"#1012C9",4:"#C310C9",5:"#1FDBF1",6:"#F6FD04",7:"#808080"},eM={helicopter:J0e,plane:oC,drone:Q0e,dji_M210_noetic:Vv,dji_M210_melodic:Vv,dji_M210_noetic_rtk:Vv,dji_M210_melodic_rtk:Vv,dji_M300:Vv,dji_M300_rtk:Vv,dji_M600:mc,px4:oC,catec:t_e,fuvex:oC,griffin:e_e,default:oC},l_e={helicopter:mc,plane:mc,drone:mc,dji_M210_noetic:mc,dji_M210_melodic:mc,dji_M210_noetic_rtk:mc,dji_M210_melodic_rtk:mc,dji_M300:mc,dji_M300_rtk:Vv,dji_M600:mc,px4:mc,catec:mc,fuvex:mc,default:mc},eI=t=>eM.hasOwnProperty(t)?t:"default",Kc={},c_e=async()=>{const t=await rh(X0e),e=await rh(K0e),n=await rh(Z0e);Kc.background=await Qu(t),Kc.item=await Qu(await rh(n_e)),Kc.powerTower=await Qu(await rh(r_e)),Kc.windTurbine=await Qu(await rh(i_e)),Kc.solarPanel=await Qu(await rh(o_e)),Kc.grua=await Qu(await rh(a_e)),Kc.base=await Qu(await rh(s_e)),Kc.direction=await Qu(await rh(Y0e)),Object.keys(Hf.colors_devices).forEach(async r=>{Kc[`background-${r}`]=await Qu(t,null,Z3[r]),Kc[`mission-${r}`]=await Qu(e,null,Z3[r]),Kc[`backgroundDirection-${r}`]=await Qu(n,null,Z3[r])}),await Promise.all(Object.keys(eM).map(async r=>{const i=[];["primary","positive","negative","neutral"].forEach(o=>{i.push(rh(eM[r]).then(s=>{Kc[`${r}-${o}`]=Qu(t,s,Hf.colors[o])}))}),await Promise.all(i)}))};function B0(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}const u_e=Object.freeze(Object.defineProperty({__proto__:null,default:B0},Symbol.toStringTag,{value:"Module"})),j0="$$material";function de(){return de=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},de.apply(this,arguments)}function an(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Qte(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var d_e=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,h_e=Qte(function(t){return d_e.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91});function f_e(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function p_e(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var m_e=function(){function t(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(p_e(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=f_e(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},t}(),ul="-ms-",tI="-moz-",Oi="-webkit-",ene="comm",jj="rule",$j="decl",g_e="@import",tne="@keyframes",y_e="@layer",v_e=Math.abs,JR=String.fromCharCode,__e=Object.assign;function x_e(t,e){return Ia(t,0)^45?(((e<<2^Ia(t,0))<<2^Ia(t,1))<<2^Ia(t,2))<<2^Ia(t,3):0}function nne(t){return t.trim()}function b_e(t,e){return(t=e.exec(t))?t[0]:t}function Li(t,e,n){return t.replace(e,n)}function LF(t,e){return t.indexOf(e)}function Ia(t,e){return t.charCodeAt(e)|0}function tM(t,e,n){return t.slice(e,n)}function Sf(t){return t.length}function Uj(t){return t.length}function sC(t,e){return e.push(t),t}function w_e(t,e){return t.map(e).join("")}var QR=1,Ub=1,rne=0,Cc=0,ws=0,D1="";function ek(t,e,n,r,i,o,s){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:QR,column:Ub,length:s,return:""}}function nS(t,e){return __e(ek("",null,null,"",null,null,0),t,{length:-t.length},e)}function S_e(){return ws}function M_e(){return ws=Cc>0?Ia(D1,--Cc):0,Ub--,ws===10&&(Ub=1,QR--),ws}function gu(){return ws=Cc<rne?Ia(D1,Cc++):0,Ub++,ws===10&&(Ub=1,QR++),ws}function Df(){return Ia(D1,Cc)}function QA(){return Cc}function ME(t,e){return tM(D1,t,e)}function nM(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function ine(t){return QR=Ub=1,rne=Sf(D1=t),Cc=0,[]}function one(t){return D1="",t}function eP(t){return nne(ME(Cc-1,DF(t===91?t+2:t===40?t+1:t)))}function E_e(t){for(;(ws=Df())&&ws<33;)gu();return nM(t)>2||nM(ws)>3?"":" "}function T_e(t,e){for(;--e&&gu()&&!(ws<48||ws>102||ws>57&&ws<65||ws>70&&ws<97););return ME(t,QA()+(e<6&&Df()==32&&gu()==32))}function DF(t){for(;gu();)switch(ws){case t:return Cc;case 34:case 39:t!==34&&t!==39&&DF(ws);break;case 40:t===41&&DF(t);break;case 92:gu();break}return Cc}function C_e(t,e){for(;gu()&&t+ws!==57;)if(t+ws===84&&Df()===47)break;return"/*"+ME(e,Cc-1)+"*"+JR(t===47?t:gu())}function A_e(t){for(;!nM(Df());)gu();return ME(t,Cc)}function P_e(t){return one(tP("",null,null,null,[""],t=ine(t),0,[0],t))}function tP(t,e,n,r,i,o,s,a,l){for(var d=0,h=0,p=s,g=0,v=0,x=0,b=1,w=1,S=1,C=0,A="",P=i,k=o,F=r,B=A;w;)switch(x=C,C=gu()){case 40:if(x!=108&&Ia(B,p-1)==58){LF(B+=Li(eP(C),"&","&\f"),"&\f")!=-1&&(S=-1);break}case 34:case 39:case 91:B+=eP(C);break;case 9:case 10:case 13:case 32:B+=E_e(x);break;case 92:B+=T_e(QA()-1,7);continue;case 47:switch(Df()){case 42:case 47:sC(I_e(C_e(gu(),QA()),e,n),l);break;default:B+="/"}break;case 123*b:a[d++]=Sf(B)*S;case 125*b:case 59:case 0:switch(C){case 0:case 125:w=0;case 59+h:S==-1&&(B=Li(B,/\f/g,"")),v>0&&Sf(B)-p&&sC(v>32?p9(B+";",r,n,p-1):p9(Li(B," ","")+";",r,n,p-2),l);break;case 59:B+=";";default:if(sC(F=f9(B,e,n,d,h,i,a,A,P=[],k=[],p),o),C===123)if(h===0)tP(B,e,F,F,P,o,p,a,k);else switch(g===99&&Ia(B,3)===110?100:g){case 100:case 108:case 109:case 115:tP(t,F,F,r&&sC(f9(t,F,F,0,0,i,a,A,i,P=[],p),k),i,k,p,a,r?P:k);break;default:tP(B,F,F,F,[""],k,0,a,k)}}d=h=v=0,b=S=1,A=B="",p=s;break;case 58:p=1+Sf(B),v=x;default:if(b<1){if(C==123)--b;else if(C==125&&b++==0&&M_e()==125)continue}switch(B+=JR(C),C*b){case 38:S=h>0?1:(B+="\f",-1);break;case 44:a[d++]=(Sf(B)-1)*S,S=1;break;case 64:Df()===45&&(B+=eP(gu())),g=Df(),h=p=Sf(A=B+=A_e(QA())),C++;break;case 45:x===45&&Sf(B)==2&&(b=0)}}return o}function f9(t,e,n,r,i,o,s,a,l,d,h){for(var p=i-1,g=i===0?o:[""],v=Uj(g),x=0,b=0,w=0;x<r;++x)for(var S=0,C=tM(t,p+1,p=v_e(b=s[x])),A=t;S<v;++S)(A=nne(b>0?g[S]+" "+C:Li(C,/&\f/g,g[S])))&&(l[w++]=A);return ek(t,e,n,i===0?jj:a,l,d,h)}function I_e(t,e,n){return ek(t,e,n,ene,JR(S_e()),tM(t,2,-2),0)}function p9(t,e,n,r){return ek(t,e,n,$j,tM(t,0,r),tM(t,r+1,-1),r)}function _b(t,e){for(var n="",r=Uj(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function R_e(t,e,n,r){switch(t.type){case y_e:if(t.children.length)break;case g_e:case $j:return t.return=t.return||t.value;case ene:return"";case tne:return t.return=t.value+"{"+_b(t.children,r)+"}";case jj:t.value=t.props.join(",")}return Sf(n=_b(t.children,r))?t.return=t.value+"{"+n+"}":""}function k_e(t){var e=Uj(t);return function(n,r,i,o){for(var s="",a=0;a<e;a++)s+=t[a](n,r,i,o)||"";return s}}function O_e(t){return function(e){e.root||(e=e.return)&&t(e)}}var L_e=function(e,n,r){for(var i=0,o=0;i=o,o=Df(),i===38&&o===12&&(n[r]=1),!nM(o);)gu();return ME(e,Cc)},D_e=function(e,n){var r=-1,i=44;do switch(nM(i)){case 0:i===38&&Df()===12&&(n[r]=1),e[r]+=L_e(Cc-1,n,r);break;case 2:e[r]+=eP(i);break;case 4:if(i===44){e[++r]=Df()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=JR(i)}while(i=gu());return e},N_e=function(e,n){return one(D_e(ine(e),n))},m9=new WeakMap,z_e=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!m9.get(r))&&!i){m9.set(e,!0);for(var o=[],s=N_e(n,o),a=r.props,l=0,d=0;l<s.length;l++)for(var h=0;h<a.length;h++,d++)e.props[d]=o[l]?s[l].replace(/&\f/g,a[h]):a[h]+" "+s[l]}}},F_e=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function sne(t,e){switch(x_e(t,e)){case 5103:return Oi+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Oi+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Oi+t+tI+t+ul+t+t;case 6828:case 4268:return Oi+t+ul+t+t;case 6165:return Oi+t+ul+"flex-"+t+t;case 5187:return Oi+t+Li(t,/(\w+).+(:[^]+)/,Oi+"box-$1$2"+ul+"flex-$1$2")+t;case 5443:return Oi+t+ul+"flex-item-"+Li(t,/flex-|-self/,"")+t;case 4675:return Oi+t+ul+"flex-line-pack"+Li(t,/align-content|flex-|-self/,"")+t;case 5548:return Oi+t+ul+Li(t,"shrink","negative")+t;case 5292:return Oi+t+ul+Li(t,"basis","preferred-size")+t;case 6060:return Oi+"box-"+Li(t,"-grow","")+Oi+t+ul+Li(t,"grow","positive")+t;case 4554:return Oi+Li(t,/([^-])(transform)/g,"$1"+Oi+"$2")+t;case 6187:return Li(Li(Li(t,/(zoom-|grab)/,Oi+"$1"),/(image-set)/,Oi+"$1"),t,"")+t;case 5495:case 3959:return Li(t,/(image-set\([^]*)/,Oi+"$1$`$1");case 4968:return Li(Li(t,/(.+:)(flex-)?(.*)/,Oi+"box-pack:$3"+ul+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Oi+t+t;case 4095:case 3583:case 4068:case 2532:return Li(t,/(.+)-inline(.+)/,Oi+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Sf(t)-1-e>6)switch(Ia(t,e+1)){case 109:if(Ia(t,e+4)!==45)break;case 102:return Li(t,/(.+:)(.+)-([^]+)/,"$1"+Oi+"$2-$3$1"+tI+(Ia(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~LF(t,"stretch")?sne(Li(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Ia(t,e+1)!==115)break;case 6444:switch(Ia(t,Sf(t)-3-(~LF(t,"!important")&&10))){case 107:return Li(t,":",":"+Oi)+t;case 101:return Li(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Oi+(Ia(t,14)===45?"inline-":"")+"box$3$1"+Oi+"$2$3$1"+ul+"$2box$3")+t}break;case 5936:switch(Ia(t,e+11)){case 114:return Oi+t+ul+Li(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Oi+t+ul+Li(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Oi+t+ul+Li(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Oi+t+ul+t+t}return t}var B_e=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case $j:e.return=sne(e.value,e.length);break;case tne:return _b([nS(e,{value:Li(e.value,"@","@"+Oi)})],i);case jj:if(e.length)return w_e(e.props,function(o){switch(b_e(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return _b([nS(e,{props:[Li(o,/:(read-\w+)/,":"+tI+"$1")]})],i);case"::placeholder":return _b([nS(e,{props:[Li(o,/:(plac\w+)/,":"+Oi+"input-$1")]}),nS(e,{props:[Li(o,/:(plac\w+)/,":"+tI+"$1")]}),nS(e,{props:[Li(o,/:(plac\w+)/,ul+"input-$1")]})],i)}return""})}},j_e=[B_e],ane=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(b){var w=b.getAttribute("data-emotion");w.indexOf(" ")!==-1&&(document.head.appendChild(b),b.setAttribute("data-s",""))})}var i=e.stylisPlugins||j_e,o={},s,a=[];s=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(b){for(var w=b.getAttribute("data-emotion").split(" "),S=1;S<w.length;S++)o[w[S]]=!0;a.push(b)});var l,d=[z_e,F_e];{var h,p=[R_e,O_e(function(b){h.insert(b)})],g=k_e(d.concat(i,p)),v=function(w){return _b(P_e(w),g)};l=function(w,S,C,A){h=C,v(w?w+"{"+S.styles+"}":S.styles),A&&(x.inserted[S.name]=!0)}}var x={key:n,sheet:new m_e({key:n,container:s,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:l};return x.sheet.hydrate(a),x},lne={exports:{}},Hi={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ha=typeof Symbol=="function"&&Symbol.for,Vj=ha?Symbol.for("react.element"):60103,Hj=ha?Symbol.for("react.portal"):60106,tk=ha?Symbol.for("react.fragment"):60107,nk=ha?Symbol.for("react.strict_mode"):60108,rk=ha?Symbol.for("react.profiler"):60114,ik=ha?Symbol.for("react.provider"):60109,ok=ha?Symbol.for("react.context"):60110,Wj=ha?Symbol.for("react.async_mode"):60111,sk=ha?Symbol.for("react.concurrent_mode"):60111,ak=ha?Symbol.for("react.forward_ref"):60112,lk=ha?Symbol.for("react.suspense"):60113,$_e=ha?Symbol.for("react.suspense_list"):60120,ck=ha?Symbol.for("react.memo"):60115,uk=ha?Symbol.for("react.lazy"):60116,U_e=ha?Symbol.for("react.block"):60121,V_e=ha?Symbol.for("react.fundamental"):60117,H_e=ha?Symbol.for("react.responder"):60118,W_e=ha?Symbol.for("react.scope"):60119;function Pu(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Vj:switch(t=t.type,t){case Wj:case sk:case tk:case rk:case nk:case lk:return t;default:switch(t=t&&t.$$typeof,t){case ok:case ak:case uk:case ck:case ik:return t;default:return e}}case Hj:return e}}}function cne(t){return Pu(t)===sk}Hi.AsyncMode=Wj;Hi.ConcurrentMode=sk;Hi.ContextConsumer=ok;Hi.ContextProvider=ik;Hi.Element=Vj;Hi.ForwardRef=ak;Hi.Fragment=tk;Hi.Lazy=uk;Hi.Memo=ck;Hi.Portal=Hj;Hi.Profiler=rk;Hi.StrictMode=nk;Hi.Suspense=lk;Hi.isAsyncMode=function(t){return cne(t)||Pu(t)===Wj};Hi.isConcurrentMode=cne;Hi.isContextConsumer=function(t){return Pu(t)===ok};Hi.isContextProvider=function(t){return Pu(t)===ik};Hi.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vj};Hi.isForwardRef=function(t){return Pu(t)===ak};Hi.isFragment=function(t){return Pu(t)===tk};Hi.isLazy=function(t){return Pu(t)===uk};Hi.isMemo=function(t){return Pu(t)===ck};Hi.isPortal=function(t){return Pu(t)===Hj};Hi.isProfiler=function(t){return Pu(t)===rk};Hi.isStrictMode=function(t){return Pu(t)===nk};Hi.isSuspense=function(t){return Pu(t)===lk};Hi.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===tk||t===sk||t===rk||t===nk||t===lk||t===$_e||typeof t=="object"&&t!==null&&(t.$$typeof===uk||t.$$typeof===ck||t.$$typeof===ik||t.$$typeof===ok||t.$$typeof===ak||t.$$typeof===V_e||t.$$typeof===H_e||t.$$typeof===W_e||t.$$typeof===U_e)};Hi.typeOf=Pu;lne.exports=Hi;var G_e=lne.exports,une=G_e,q_e={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},X_e={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},dne={};dne[une.ForwardRef]=q_e;dne[une.Memo]=X_e;var Y_e=!0;function K_e(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):r+=i+" "}),r}var hne=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||Y_e===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},fne=function(e,n,r){hne(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var o=n;do e.insert(n===o?"."+i:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function Z_e(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var J_e={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Q_e=/[A-Z]|^ms/g,exe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,pne=function(e){return e.charCodeAt(1)===45},g9=function(e){return e!=null&&typeof e!="boolean"},J3=Qte(function(t){return pne(t)?t:t.replace(Q_e,"-$&").toLowerCase()}),y9=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(exe,function(r,i,o){return Mf={name:i,styles:o,next:Mf},i})}return J_e[e]!==1&&!pne(e)&&typeof n=="number"&&n!==0?n+"px":n};function rM(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Mf={name:n.name,styles:n.styles,next:Mf},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)Mf={name:r.name,styles:r.styles,next:Mf},r=r.next;var i=n.styles+";";return i}return txe(t,e,n)}case"function":{if(t!==void 0){var o=Mf,s=n(t);return Mf=o,rM(t,e,s)}break}}if(e==null)return n;var a=e[n];return a!==void 0?a:n}function txe(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=rM(t,e,n[i])+";";else for(var o in n){var s=n[o];if(typeof s!="object")e!=null&&e[s]!==void 0?r+=o+"{"+e[s]+"}":g9(s)&&(r+=J3(o)+":"+y9(o,s)+";");else if(Array.isArray(s)&&typeof s[0]=="string"&&(e==null||e[s[0]]===void 0))for(var a=0;a<s.length;a++)g9(s[a])&&(r+=J3(o)+":"+y9(o,s[a])+";");else{var l=rM(t,e,s);switch(o){case"animation":case"animationName":{r+=J3(o)+":"+l+";";break}default:r+=o+"{"+l+"}"}}}return r}var v9=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Mf,Gj=function(e,n,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,o="";Mf=void 0;var s=e[0];s==null||s.raw===void 0?(i=!1,o+=rM(r,n,s)):o+=s[0];for(var a=1;a<e.length;a++)o+=rM(r,n,e[a]),i&&(o+=s[a]);v9.lastIndex=0;for(var l="",d;(d=v9.exec(o))!==null;)l+="-"+d[1];var h=Z_e(o)+l;return{name:h,styles:o,next:Mf}},nxe=function(e){return e()},mne=Ob.useInsertionEffect?Ob.useInsertionEffect:!1,rxe=mne||nxe,_9=mne||V.useLayoutEffect,gne=V.createContext(typeof HTMLElement<"u"?ane({key:"css"}):null),ixe=gne.Provider,yne=function(e){return V.forwardRef(function(n,r){var i=V.useContext(gne);return e(n,i,r)})},EE=V.createContext({}),Q3={exports:{}},x9;function vne(){return x9||(x9=1,function(t){function e(){return t.exports=e=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(this,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(Q3)),Q3.exports}vne();var oxe=yne(function(t,e){var n=t.styles,r=Gj([n],void 0,V.useContext(EE)),i=V.useRef();return _9(function(){var o=e.key+"-global",s=new e.sheet.constructor({key:o,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+o+" "+r.name+'"]');return e.sheet.tags.length&&(s.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",o),s.hydrate([l])),i.current=[s,a],function(){s.flush()}},[e]),_9(function(){var o=i.current,s=o[0],a=o[1];if(a){o[1]=!1;return}if(r.next!==void 0&&fne(e,r.next,!0),s.tags.length){var l=s.tags[s.tags.length-1].nextElementSibling;s.before=l,s.flush()}e.insert("",r,s,!1)},[e,r.name]),null});function TE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Gj(e)}var i_=function(){var e=TE.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},sxe=h_e,axe=function(e){return e!=="theme"},b9=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?sxe:axe},w9=function(e,n,r){var i;if(n){var o=n.shouldForwardProp;i=e.__emotion_forwardProp&&o?function(s){return e.__emotion_forwardProp(s)&&o(s)}:o}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},lxe=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return hne(n,r,i),rxe(function(){return fne(n,r,i)}),null},cxe=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,o,s;n!==void 0&&(o=n.label,s=n.target);var a=w9(e,n,r),l=a||b9(i),d=!l("as");return function(){var h=arguments,p=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&p.push("label:"+o+";"),h[0]==null||h[0].raw===void 0)p.push.apply(p,h);else{p.push(h[0][0]);for(var g=h.length,v=1;v<g;v++)p.push(h[v],h[0][v])}var x=yne(function(b,w,S){var C=d&&b.as||i,A="",P=[],k=b;if(b.theme==null){k={};for(var F in b)k[F]=b[F];k.theme=V.useContext(EE)}typeof b.className=="string"?A=K_e(w.registered,P,b.className):b.className!=null&&(A=b.className+" ");var B=Gj(p.concat(P),w.registered,k);A+=w.key+"-"+B.name,s!==void 0&&(A+=" "+s);var W=d&&a===void 0?b9(C):l,J={};for(var H in b)d&&H==="as"||W(H)&&(J[H]=b[H]);return J.className=A,J.ref=S,V.createElement(V.Fragment,null,V.createElement(lxe,{cache:w,serialized:B,isStringTag:typeof C=="string"}),V.createElement(C,J))});return x.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",x.defaultProps=e.defaultProps,x.__emotion_real=x,x.__emotion_base=i,x.__emotion_styles=p,x.__emotion_forwardProp=a,Object.defineProperty(x,"toString",{value:function(){return"."+s}}),x.withComponent=function(b,w){return t(b,de({},n,w,{shouldForwardProp:w9(x,w,!0)})).apply(void 0,p)},x}},uxe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],NF=cxe.bind();uxe.forEach(function(t){NF[t]=NF(t)});var _ne={exports:{}},dxe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",hxe=dxe,fxe=hxe;function xne(){}function bne(){}bne.resetWarningCache=xne;var pxe=function(){function t(r,i,o,s,a,l){if(l!==fxe){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:bne,resetWarningCache:xne};return n.PropTypes=n,n};_ne.exports=pxe();var qj=_ne.exports;const Nr=Mi(qj);let zF;typeof document=="object"&&(zF=ane({key:"css",prepend:!0}));function wne(t){const{injectFirst:e,children:n}=t;return e&&zF?z.jsx(ixe,{value:zF,children:n}):n}function mxe(t){return t==null||Object.keys(t).length===0}function Sne(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(mxe(i)?n:i):e;return z.jsx(oxe,{styles:r})}function Xj(t,e){return NF(t,e)}const Mne=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))},gxe=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:Sne,StyledEngineProvider:wne,ThemeContext:EE,css:TE,default:Xj,internal_processStyles:Mne,keyframes:i_},Symbol.toStringTag,{value:"Module"}));function qp(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function Ene(t){if(!qp(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=Ene(t[n])}),e}function za(t,e,n={clone:!0}){const r=n.clone?de({},t):t;return qp(t)&&qp(e)&&Object.keys(e).forEach(i=>{i!=="__proto__"&&(qp(e[i])&&i in t&&qp(t[i])?r[i]=za(t[i],e[i],n):n.clone?r[i]=qp(e[i])?Ene(e[i]):e[i]:r[i]=e[i])}),r}const yxe=Object.freeze(Object.defineProperty({__proto__:null,default:za,isPlainObject:qp},Symbol.toStringTag,{value:"Module"})),vxe=["values","unit","step"],_xe=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>de({},n,{[r.key]:r.val}),{})};function Tne(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=t,i=an(t,vxe),o=_xe(e),s=Object.keys(o);function a(g){return`@media (min-width:${typeof e[g]=="number"?e[g]:g}${n})`}function l(g){return`@media (max-width:${(typeof e[g]=="number"?e[g]:g)-r/100}${n})`}function d(g,v){const x=s.indexOf(v);return`@media (min-width:${typeof e[g]=="number"?e[g]:g}${n}) and (max-width:${(x!==-1&&typeof e[s[x]]=="number"?e[s[x]]:v)-r/100}${n})`}function h(g){return s.indexOf(g)+1<s.length?d(g,s[s.indexOf(g)+1]):a(g)}function p(g){const v=s.indexOf(g);return v===0?a(s[1]):v===s.length-1?l(s[v]):d(g,s[s.indexOf(g)+1]).replace("@media","@media not all and")}return de({keys:s,values:o,up:a,down:l,between:d,only:h,not:p,unit:n},i)}const xxe={borderRadius:4};function d2(t,e){return e?za(t,e,{clone:!1}):t}const Yj={xs:0,sm:600,md:900,lg:1200,xl:1536},S9={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${Yj[t]}px)`};function Ac(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const o=r.breakpoints||S9;return e.reduce((s,a,l)=>(s[o.up(o.keys[l])]=n(e[l]),s),{})}if(typeof e=="object"){const o=r.breakpoints||S9;return Object.keys(e).reduce((s,a)=>{if(Object.keys(o.values||Yj).indexOf(a)!==-1){const l=o.up(a);s[l]=n(e[a],a)}else{const l=a;s[l]=e[l]}return s},{})}return n(e)}function Cne(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((r,i)=>{const o=t.up(i);return r[o]={},r},{}))||{}}function Ane(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function bxe(t,...e){const n=Cne(t),r=[n,...e].reduce((i,o)=>za(i,o),{});return Ane(Object.keys(n),r)}function wxe(t,e){if(typeof t!="object")return{};const n={},r=Object.keys(e);return Array.isArray(t)?r.forEach((i,o)=>{o<t.length&&(n[i]=!0)}):r.forEach(i=>{t[i]!=null&&(n[i]=!0)}),n}function x0({values:t,breakpoints:e,base:n}){const r=n||wxe(t,e),i=Object.keys(r);if(i.length===0)return t;let o;return i.reduce((s,a,l)=>(Array.isArray(t)?(s[a]=t[l]!=null?t[l]:t[o],o=l):typeof t=="object"?(s[a]=t[a]!=null?t[a]:t[o],o=a):s[a]=t,s),{})}function Jt(t){if(typeof t!="string")throw new Error(B0(7));return t.charAt(0).toUpperCase()+t.slice(1)}const Sxe=Object.freeze(Object.defineProperty({__proto__:null,default:Jt},Symbol.toStringTag,{value:"Module"}));function Vb(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function nI(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=Vb(t,n)||r,e&&(i=e(i,r,t)),i}function fs(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,o=s=>{if(s[e]==null)return null;const a=s[e],l=s.theme,d=Vb(l,r)||{};return Ac(s,a,p=>{let g=nI(d,i,p);return p===g&&typeof p=="string"&&(g=nI(d,i,`${e}${p==="default"?"":Jt(p)}`,p)),n===!1?g:{[n]:g}})};return o.propTypes={},o.filterProps=[e],o}function Mxe(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const Exe={m:"margin",p:"padding"},Txe={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},M9={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Cxe=Mxe(t=>{if(t.length>2)if(M9[t])t=M9[t];else return[t];const[e,n]=t.split(""),r=Exe[e],i=Txe[n]||"";return Array.isArray(i)?i.map(o=>r+o):[r+i]}),Kj=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Zj=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Kj,...Zj];function CE(t,e,n,r){var i;const o=(i=Vb(t,e,!1))!=null?i:n;return typeof o=="number"?s=>typeof s=="string"?s:o*s:Array.isArray(o)?s=>typeof s=="string"?s:o[s]:typeof o=="function"?o:()=>{}}function Jj(t){return CE(t,"spacing",8)}function $0(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),r=t(n);return e>=0?r:typeof r=="number"?-r:`-${r}`}function Axe(t,e){return n=>t.reduce((r,i)=>(r[i]=$0(e,n),r),{})}function Pxe(t,e,n,r){if(e.indexOf(n)===-1)return null;const i=Cxe(n),o=Axe(i,r),s=t[n];return Ac(t,s,o)}function Pne(t,e){const n=Jj(t.theme);return Object.keys(t).map(r=>Pxe(t,e,r,n)).reduce(d2,{})}function Wo(t){return Pne(t,Kj)}Wo.propTypes={};Wo.filterProps=Kj;function Go(t){return Pne(t,Zj)}Go.propTypes={};Go.filterProps=Zj;function Ixe(t=8){if(t.mui)return t;const e=Jj({spacing:t}),n=(...r)=>(r.length===0?[1]:r).map(o=>{const s=e(o);return typeof s=="number"?`${s}px`:s}).join(" ");return n.mui=!0,n}function dk(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(o=>{r[o]=i}),r),{}),n=r=>Object.keys(r).reduce((i,o)=>e[o]?d2(i,e[o](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function dd(t){return typeof t!="number"?t:`${t}px solid`}function Rd(t,e){return fs({prop:t,themeKey:"borders",transform:e})}const Rxe=Rd("border",dd),kxe=Rd("borderTop",dd),Oxe=Rd("borderRight",dd),Lxe=Rd("borderBottom",dd),Dxe=Rd("borderLeft",dd),Nxe=Rd("borderColor"),zxe=Rd("borderTopColor"),Fxe=Rd("borderRightColor"),Bxe=Rd("borderBottomColor"),jxe=Rd("borderLeftColor"),$xe=Rd("outline",dd),Uxe=Rd("outlineColor"),hk=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=CE(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:$0(e,r)});return Ac(t,t.borderRadius,n)}return null};hk.propTypes={};hk.filterProps=["borderRadius"];dk(Rxe,kxe,Oxe,Lxe,Dxe,Nxe,zxe,Fxe,Bxe,jxe,hk,$xe,Uxe);const fk=t=>{if(t.gap!==void 0&&t.gap!==null){const e=CE(t.theme,"spacing",8),n=r=>({gap:$0(e,r)});return Ac(t,t.gap,n)}return null};fk.propTypes={};fk.filterProps=["gap"];const pk=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=CE(t.theme,"spacing",8),n=r=>({columnGap:$0(e,r)});return Ac(t,t.columnGap,n)}return null};pk.propTypes={};pk.filterProps=["columnGap"];const mk=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=CE(t.theme,"spacing",8),n=r=>({rowGap:$0(e,r)});return Ac(t,t.rowGap,n)}return null};mk.propTypes={};mk.filterProps=["rowGap"];const Vxe=fs({prop:"gridColumn"}),Hxe=fs({prop:"gridRow"}),Wxe=fs({prop:"gridAutoFlow"}),Gxe=fs({prop:"gridAutoColumns"}),qxe=fs({prop:"gridAutoRows"}),Xxe=fs({prop:"gridTemplateColumns"}),Yxe=fs({prop:"gridTemplateRows"}),Kxe=fs({prop:"gridTemplateAreas"}),Zxe=fs({prop:"gridArea"});dk(fk,pk,mk,Vxe,Hxe,Wxe,Gxe,qxe,Xxe,Yxe,Kxe,Zxe);function xb(t,e){return e==="grey"?e:t}const Jxe=fs({prop:"color",themeKey:"palette",transform:xb}),Qxe=fs({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:xb}),ebe=fs({prop:"backgroundColor",themeKey:"palette",transform:xb});dk(Jxe,Qxe,ebe);function su(t){return t<=1&&t!==0?`${t*100}%`:t}const tbe=fs({prop:"width",transform:su}),Qj=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,i;const o=((r=t.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||Yj[n];return o?((i=t.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${o}${t.theme.breakpoints.unit}`}:{maxWidth:o}:{maxWidth:su(n)}};return Ac(t,t.maxWidth,e)}return null};Qj.filterProps=["maxWidth"];const nbe=fs({prop:"minWidth",transform:su}),rbe=fs({prop:"height",transform:su}),ibe=fs({prop:"maxHeight",transform:su}),obe=fs({prop:"minHeight",transform:su});fs({prop:"size",cssProperty:"width",transform:su});fs({prop:"size",cssProperty:"height",transform:su});const sbe=fs({prop:"boxSizing"});dk(tbe,Qj,nbe,rbe,ibe,obe,sbe);const AE={border:{themeKey:"borders",transform:dd},borderTop:{themeKey:"borders",transform:dd},borderRight:{themeKey:"borders",transform:dd},borderBottom:{themeKey:"borders",transform:dd},borderLeft:{themeKey:"borders",transform:dd},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:dd},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:hk},color:{themeKey:"palette",transform:xb},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:xb},backgroundColor:{themeKey:"palette",transform:xb},p:{style:Go},pt:{style:Go},pr:{style:Go},pb:{style:Go},pl:{style:Go},px:{style:Go},py:{style:Go},padding:{style:Go},paddingTop:{style:Go},paddingRight:{style:Go},paddingBottom:{style:Go},paddingLeft:{style:Go},paddingX:{style:Go},paddingY:{style:Go},paddingInline:{style:Go},paddingInlineStart:{style:Go},paddingInlineEnd:{style:Go},paddingBlock:{style:Go},paddingBlockStart:{style:Go},paddingBlockEnd:{style:Go},m:{style:Wo},mt:{style:Wo},mr:{style:Wo},mb:{style:Wo},ml:{style:Wo},mx:{style:Wo},my:{style:Wo},margin:{style:Wo},marginTop:{style:Wo},marginRight:{style:Wo},marginBottom:{style:Wo},marginLeft:{style:Wo},marginX:{style:Wo},marginY:{style:Wo},marginInline:{style:Wo},marginInlineStart:{style:Wo},marginInlineEnd:{style:Wo},marginBlock:{style:Wo},marginBlockStart:{style:Wo},marginBlockEnd:{style:Wo},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:fk},rowGap:{style:mk},columnGap:{style:pk},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:su},maxWidth:{style:Qj},minWidth:{transform:su},height:{transform:su},maxHeight:{transform:su},minHeight:{transform:su},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function abe(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function lbe(t,e){return typeof t=="function"?t(e):t}function Ine(){function t(n,r,i,o){const s={[n]:r,theme:i},a=o[n];if(!a)return{[n]:r};const{cssProperty:l=n,themeKey:d,transform:h,style:p}=a;if(r==null)return null;if(d==="typography"&&r==="inherit")return{[n]:r};const g=Vb(i,d)||{};return p?p(s):Ac(s,r,x=>{let b=nI(g,h,x);return x===b&&typeof x=="string"&&(b=nI(g,h,`${n}${x==="default"?"":Jt(x)}`,x)),l===!1?b:{[l]:b}})}function e(n){var r;const{sx:i,theme:o={}}=n||{};if(!i)return null;const s=(r=o.unstable_sxConfig)!=null?r:AE;function a(l){let d=l;if(typeof l=="function")d=l(o);else if(typeof l!="object")return l;if(!d)return null;const h=Cne(o.breakpoints),p=Object.keys(h);let g=h;return Object.keys(d).forEach(v=>{const x=lbe(d[v],o);if(x!=null)if(typeof x=="object")if(s[v])g=d2(g,t(v,x,o,s));else{const b=Ac({theme:o},x,w=>({[v]:w}));abe(b,x)?g[v]=e({sx:x,theme:o}):g=d2(g,b)}else g=d2(g,t(v,x,o,s))}),Ane(p,g)}return Array.isArray(i)?i.map(a):a(i)}return e}const N1=Ine();N1.filterProps=["sx"];function Rne(t,e){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(t).replace(/(\[[^\]]+\])/,"*:where($1)")]:e}:n.palette.mode===t?e:{}}const cbe=["breakpoints","palette","spacing","shape"];function z1(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:o={}}=t,s=an(t,cbe),a=Tne(n),l=Ixe(i);let d=za({breakpoints:a,direction:"ltr",components:{},palette:de({mode:"light"},r),spacing:l,shape:de({},xxe,o)},s);return d.applyStyles=Rne,d=e.reduce((h,p)=>za(h,p),d),d.unstable_sxConfig=de({},AE,s==null?void 0:s.unstable_sxConfig),d.unstable_sx=function(p){return N1({sx:p,theme:this})},d}const ube=Object.freeze(Object.defineProperty({__proto__:null,default:z1,private_createBreakpoints:Tne,unstable_applyStyles:Rne},Symbol.toStringTag,{value:"Module"}));function dbe(t){return Object.keys(t).length===0}function kne(t=null){const e=V.useContext(EE);return!e||dbe(e)?t:e}const hbe=z1();function gk(t=hbe){return kne(t)}function fbe({styles:t,themeId:e,defaultTheme:n={}}){const r=gk(n),i=typeof t=="function"?t(e&&r[e]||r):t;return z.jsx(Sne,{styles:i})}const pbe=["sx"],mbe=t=>{var e,n;const r={systemProps:{},otherProps:{}},i=(e=t==null||(n=t.theme)==null?void 0:n.unstable_sxConfig)!=null?e:AE;return Object.keys(t).forEach(o=>{i[o]?r.systemProps[o]=t[o]:r.otherProps[o]=t[o]}),r};function PE(t){const{sx:e}=t,n=an(t,pbe),{systemProps:r,otherProps:i}=mbe(n);let o;return Array.isArray(e)?o=[r,...e]:typeof e=="function"?o=(...s)=>{const a=e(...s);return qp(a)?de({},r,a):r}:o=de({},r,e),de({},i,{sx:o})}const gbe=Object.freeze(Object.defineProperty({__proto__:null,default:N1,extendSxProp:PE,unstable_createStyleFunctionSx:Ine,unstable_defaultSxConfig:AE},Symbol.toStringTag,{value:"Module"})),E9=t=>t,ybe=()=>{let t=E9;return{configure(e){t=e},generate(e){return t(e)},reset(){t=E9}}},e$=ybe();function One(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=One(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Wt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=One(t))&&(r&&(r+=" "),r+=e);return r}const vbe=["className","component"];function _be(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,o=Xj("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(N1);return V.forwardRef(function(l,d){const h=gk(n),p=PE(l),{className:g,component:v="div"}=p,x=an(p,vbe);return z.jsx(o,de({as:v,ref:d,className:Wt(g,i?i(r):r),theme:e&&h[e]||h},x))})}const Lne={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function jn(t,e,n="Mui"){const r=Lne[e];return r?`${n}-${r}`:`${e$.generate(t)}-${e}`}function $n(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=jn(t,i,n)}),r}var Dne={exports:{}},Wi={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t$=Symbol.for("react.element"),n$=Symbol.for("react.portal"),yk=Symbol.for("react.fragment"),vk=Symbol.for("react.strict_mode"),_k=Symbol.for("react.profiler"),xk=Symbol.for("react.provider"),bk=Symbol.for("react.context"),xbe=Symbol.for("react.server_context"),wk=Symbol.for("react.forward_ref"),Sk=Symbol.for("react.suspense"),Mk=Symbol.for("react.suspense_list"),Ek=Symbol.for("react.memo"),Tk=Symbol.for("react.lazy"),bbe=Symbol.for("react.offscreen"),Nne;Nne=Symbol.for("react.module.reference");function kd(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case t$:switch(t=t.type,t){case yk:case _k:case vk:case Sk:case Mk:return t;default:switch(t=t&&t.$$typeof,t){case xbe:case bk:case wk:case Tk:case Ek:case xk:return t;default:return e}}case n$:return e}}}Wi.ContextConsumer=bk;Wi.ContextProvider=xk;Wi.Element=t$;Wi.ForwardRef=wk;Wi.Fragment=yk;Wi.Lazy=Tk;Wi.Memo=Ek;Wi.Portal=n$;Wi.Profiler=_k;Wi.StrictMode=vk;Wi.Suspense=Sk;Wi.SuspenseList=Mk;Wi.isAsyncMode=function(){return!1};Wi.isConcurrentMode=function(){return!1};Wi.isContextConsumer=function(t){return kd(t)===bk};Wi.isContextProvider=function(t){return kd(t)===xk};Wi.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===t$};Wi.isForwardRef=function(t){return kd(t)===wk};Wi.isFragment=function(t){return kd(t)===yk};Wi.isLazy=function(t){return kd(t)===Tk};Wi.isMemo=function(t){return kd(t)===Ek};Wi.isPortal=function(t){return kd(t)===n$};Wi.isProfiler=function(t){return kd(t)===_k};Wi.isStrictMode=function(t){return kd(t)===vk};Wi.isSuspense=function(t){return kd(t)===Sk};Wi.isSuspenseList=function(t){return kd(t)===Mk};Wi.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===yk||t===_k||t===vk||t===Sk||t===Mk||t===bbe||typeof t=="object"&&t!==null&&(t.$$typeof===Tk||t.$$typeof===Ek||t.$$typeof===xk||t.$$typeof===bk||t.$$typeof===wk||t.$$typeof===Nne||t.getModuleId!==void 0)};Wi.typeOf=kd;Dne.exports=Wi;var T9=Dne.exports;const wbe=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function zne(t){const e=`${t}`.match(wbe);return e&&e[1]||""}function Fne(t,e=""){return t.displayName||t.name||zne(t)||e}function C9(t,e,n){const r=Fne(e);return t.displayName||(r!==""?`${n}(${r})`:n)}function Sbe(t){if(t!=null){if(typeof t=="string")return t;if(typeof t=="function")return Fne(t,"Component");if(typeof t=="object")switch(t.$$typeof){case T9.ForwardRef:return C9(t,t.render,"ForwardRef");case T9.Memo:return C9(t,t.type,"memo");default:return}}}const Mbe=Object.freeze(Object.defineProperty({__proto__:null,default:Sbe,getFunctionName:zne},Symbol.toStringTag,{value:"Module"})),Ebe=["ownerState"],Tbe=["variants"],Cbe=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function Abe(t){return Object.keys(t).length===0}function Pbe(t){return typeof t=="string"&&t.charCodeAt(0)>96}function eD(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const Ibe=z1(),Rbe=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function aC({defaultTheme:t,theme:e,themeId:n}){return Abe(e)?t:e[n]||e}function kbe(t){return t?(e,n)=>n[t]:null}function nP(t,e){let{ownerState:n}=e,r=an(e,Ebe);const i=typeof t=="function"?t(de({ownerState:n},r)):t;if(Array.isArray(i))return i.flatMap(o=>nP(o,de({ownerState:n},r)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:o=[]}=i;let a=an(i,Tbe);return o.forEach(l=>{let d=!0;typeof l.props=="function"?d=l.props(de({ownerState:n},r,n)):Object.keys(l.props).forEach(h=>{(n==null?void 0:n[h])!==l.props[h]&&r[h]!==l.props[h]&&(d=!1)}),d&&(Array.isArray(a)||(a=[a]),a.push(typeof l.style=="function"?l.style(de({ownerState:n},r,n)):l.style))}),a}return i}function Obe(t={}){const{themeId:e,defaultTheme:n=Ibe,rootShouldForwardProp:r=eD,slotShouldForwardProp:i=eD}=t,o=s=>N1(de({},s,{theme:aC(de({},s,{defaultTheme:n,themeId:e}))}));return o.__mui_systemSx=!0,(s,a={})=>{Mne(s,k=>k.filter(F=>!(F!=null&&F.__mui_systemSx)));const{name:l,slot:d,skipVariantsResolver:h,skipSx:p,overridesResolver:g=kbe(Rbe(d))}=a,v=an(a,Cbe),x=h!==void 0?h:d&&d!=="Root"&&d!=="root"||!1,b=p||!1;let w,S=eD;d==="Root"||d==="root"?S=r:d?S=i:Pbe(s)&&(S=void 0);const C=Xj(s,de({shouldForwardProp:S,label:w},v)),A=k=>typeof k=="function"&&k.__emotion_real!==k||qp(k)?F=>nP(k,de({},F,{theme:aC({theme:F.theme,defaultTheme:n,themeId:e})})):k,P=(k,...F)=>{let B=A(k);const W=F?F.map(A):[];l&&g&&W.push(Y=>{const le=aC(de({},Y,{defaultTheme:n,themeId:e}));if(!le.components||!le.components[l]||!le.components[l].styleOverrides)return null;const pe=le.components[l].styleOverrides,re={};return Object.entries(pe).forEach(([me,he])=>{re[me]=nP(he,de({},Y,{theme:le}))}),g(Y,re)}),l&&!x&&W.push(Y=>{var le;const pe=aC(de({},Y,{defaultTheme:n,themeId:e})),re=pe==null||(le=pe.components)==null||(le=le[l])==null?void 0:le.variants;return nP({variants:re},de({},Y,{theme:pe}))}),b||W.push(o);const J=W.length-F.length;if(Array.isArray(k)&&J>0){const Y=new Array(J).fill("");B=[...k,...Y],B.raw=[...k.raw,...Y]}const H=C(B,...W);return s.muiName&&(H.muiName=s.muiName),H};return C.withConfig&&(P.withConfig=C.withConfig),P}}const Bne=Obe();function r$(t,e){const n=de({},e);return Object.keys(t).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=de({},t[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=t[r]||{},o=e[r];n[r]={},!o||!Object.keys(o)?n[r]=i:!i||!Object.keys(i)?n[r]=o:(n[r]=de({},o),Object.keys(i).forEach(s=>{n[r][s]=r$(i[s],o[s])}))}else n[r]===void 0&&(n[r]=t[r])}),n}function Lbe(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:r$(e.components[n].defaultProps,r)}function i$({props:t,name:e,defaultTheme:n,themeId:r}){let i=gk(n);return r&&(i=i[r]||i),Lbe({theme:i,name:e,props:t})}const wu=typeof window<"u"?V.useLayoutEffect:V.useEffect;function Dbe(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}const Nbe=Object.freeze(Object.defineProperty({__proto__:null,default:Dbe},Symbol.toStringTag,{value:"Module"}));function FF(...t){return t.reduce((e,n)=>n==null?e:function(...i){e.apply(this,i),n.apply(this,i)},()=>{})}function IE(t,e=166){let n;function r(...i){const o=()=>{t.apply(this,i)};clearTimeout(n),n=setTimeout(o,e)}return r.clear=()=>{clearTimeout(n)},r}function zbe(t,e){return()=>null}function h2(t,e){var n,r;return V.isValidElement(t)&&e.indexOf((n=t.type.muiName)!=null?n:(r=t.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function Ms(t){return t&&t.ownerDocument||document}function Wf(t){return Ms(t).defaultView||window}function Fbe(t,e){return()=>null}function rI(t,e){typeof t=="function"?t(e):t&&(t.current=e)}let A9=0;function Bbe(t){const[e,n]=V.useState(t),r=t||e;return V.useEffect(()=>{e==null&&(A9+=1,n(`mui-${A9}`))},[e]),r}const P9=Ob.useId;function Ck(t){if(P9!==void 0){const e=P9();return t??e}return Bbe(t)}function jbe(t,e,n,r,i){return null}function Hb({controlled:t,default:e,name:n,state:r="value"}){const{current:i}=V.useRef(t!==void 0),[o,s]=V.useState(e),a=i?t:o,l=V.useCallback(d=>{i||s(d)},[]);return[a,l]}function ql(t){const e=V.useRef(t);return wu(()=>{e.current=t}),V.useRef((...n)=>(0,e.current)(...n)).current}function Po(...t){return V.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{rI(n,e)})},t)}const I9={};function $be(t,e){const n=V.useRef(I9);return n.current===I9&&(n.current=t(e)),n}const Ube=[];function Vbe(t){V.useEffect(t,Ube)}class RE{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new RE}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}}function ny(){const t=$be(RE.create).current;return Vbe(t.disposeEffect),t}let Ak=!0,BF=!1;const Hbe=new RE,Wbe={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Gbe(t){const{type:e,tagName:n}=t;return!!(n==="INPUT"&&Wbe[e]&&!t.readOnly||n==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function qbe(t){t.metaKey||t.altKey||t.ctrlKey||(Ak=!0)}function tD(){Ak=!1}function Xbe(){this.visibilityState==="hidden"&&BF&&(Ak=!0)}function Ybe(t){t.addEventListener("keydown",qbe,!0),t.addEventListener("mousedown",tD,!0),t.addEventListener("pointerdown",tD,!0),t.addEventListener("touchstart",tD,!0),t.addEventListener("visibilitychange",Xbe,!0)}function Kbe(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch{}return Ak||Gbe(e)}function Pk(){const t=V.useCallback(i=>{i!=null&&Ybe(i.ownerDocument)},[]),e=V.useRef(!1);function n(){return e.current?(BF=!0,Hbe.start(100,()=>{BF=!1}),e.current=!1,!0):!1}function r(i){return Kbe(i)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:r,onBlur:n,ref:t}}function jne(t){const e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}let Y_;function $ne(){if(Y_)return Y_;const t=document.createElement("div"),e=document.createElement("div");return e.style.width="10px",e.style.height="1px",t.appendChild(e),t.dir="rtl",t.style.fontSize="14px",t.style.width="4px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.overflow="scroll",document.body.appendChild(t),Y_="reverse",t.scrollLeft>0?Y_="default":(t.scrollLeft=1,t.scrollLeft===0&&(Y_="negative")),document.body.removeChild(t),Y_}function Zbe(t,e){const n=t.scrollLeft;if(e!=="rtl")return n;switch($ne()){case"negative":return t.scrollWidth-t.clientWidth+n;case"reverse":return t.scrollWidth-t.clientWidth-n;default:return n}}const Une=t=>{const e=V.useRef({});return V.useEffect(()=>{e.current=t}),e.current};function Jbe(t){return V.Children.toArray(t).filter(e=>V.isValidElement(e))}function Un(t,e,n=void 0){const r={};return Object.keys(t).forEach(i=>{r[i]=t[i].reduce((o,s)=>{if(s){const a=e(s);a!==""&&o.push(a),n&&n[s]&&o.push(n[s])}return o},[]).join(" ")}),r}const Vne=V.createContext(null);function o$(){return V.useContext(Vne)}const Qbe=typeof Symbol=="function"&&Symbol.for,Hne=Qbe?Symbol.for("mui.nested"):"__THEME_NESTED__";function e1e(t,e){return typeof e=="function"?e(t):de({},t,e)}function t1e(t){const{children:e,theme:n}=t,r=o$(),i=V.useMemo(()=>{const o=r===null?n:e1e(r,n);return o!=null&&(o[Hne]=r!==null),o},[n,r]);return z.jsx(Vne.Provider,{value:i,children:e})}const R9={};function k9(t,e,n,r=!1){return V.useMemo(()=>{const i=t&&e[t]||e;if(typeof n=="function"){const o=n(i),s=t?de({},e,{[t]:o}):o;return r?()=>s:s}return t?de({},e,{[t]:n}):de({},e,n)},[t,e,n,r])}function n1e(t){const{children:e,theme:n,themeId:r}=t,i=kne(R9),o=o$()||R9,s=k9(r,i,n),a=k9(r,o,n,!0);return z.jsx(t1e,{theme:a,children:z.jsx(EE.Provider,{value:s,children:e})})}function iM(t){"@babel/helpers - typeof";return iM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iM(t)}function r1e(t,e){if(iM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(iM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function i1e(t){var e=r1e(t,"string");return iM(e)=="symbol"?e:String(e)}const o1e=["className","component","disableGutters","fixed","maxWidth","classes"],s1e=z1(),a1e=Bne("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${Jt(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),l1e=t=>i$({props:t,name:"MuiContainer",defaultTheme:s1e}),c1e=(t,e)=>{const n=l=>jn(e,l),{classes:r,fixed:i,disableGutters:o,maxWidth:s}=t,a={root:["root",s&&`maxWidth${Jt(String(s))}`,i&&"fixed",o&&"disableGutters"]};return Un(a,n,r)};function u1e(t={}){const{createStyledComponent:e=a1e,useThemeProps:n=l1e,componentName:r="MuiContainer"}=t,i=e(({theme:s,ownerState:a})=>de({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!a.disableGutters&&{paddingLeft:s.spacing(2),paddingRight:s.spacing(2),[s.breakpoints.up("sm")]:{paddingLeft:s.spacing(3),paddingRight:s.spacing(3)}}),({theme:s,ownerState:a})=>a.fixed&&Object.keys(s.breakpoints.values).reduce((l,d)=>{const h=d,p=s.breakpoints.values[h];return p!==0&&(l[s.breakpoints.up(h)]={maxWidth:`${p}${s.breakpoints.unit}`}),l},{}),({theme:s,ownerState:a})=>de({},a.maxWidth==="xs"&&{[s.breakpoints.up("xs")]:{maxWidth:Math.max(s.breakpoints.values.xs,444)}},a.maxWidth&&a.maxWidth!=="xs"&&{[s.breakpoints.up(a.maxWidth)]:{maxWidth:`${s.breakpoints.values[a.maxWidth]}${s.breakpoints.unit}`}}));return V.forwardRef(function(a,l){const d=n(a),{className:h,component:p="div",disableGutters:g=!1,fixed:v=!1,maxWidth:x="lg"}=d,b=an(d,o1e),w=de({},d,{component:p,disableGutters:g,fixed:v,maxWidth:x}),S=c1e(w,r);return z.jsx(i,de({as:p,ownerState:w,className:Wt(S.root,h),ref:l},b))})}const d1e=["component","direction","spacing","divider","children","className","useFlexGap"],h1e=z1(),f1e=Bne("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root});function p1e(t){return i$({props:t,name:"MuiStack",defaultTheme:h1e})}function m1e(t,e){const n=V.Children.toArray(t).filter(Boolean);return n.reduce((r,i,o)=>(r.push(i),o<n.length-1&&r.push(V.cloneElement(e,{key:`separator-${o}`})),r),[])}const g1e=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],y1e=({ownerState:t,theme:e})=>{let n=de({display:"flex",flexDirection:"column"},Ac({theme:e},x0({values:t.direction,breakpoints:e.breakpoints.values}),r=>({flexDirection:r})));if(t.spacing){const r=Jj(e),i=Object.keys(e.breakpoints.values).reduce((l,d)=>((typeof t.spacing=="object"&&t.spacing[d]!=null||typeof t.direction=="object"&&t.direction[d]!=null)&&(l[d]=!0),l),{}),o=x0({values:t.direction,base:i}),s=x0({values:t.spacing,base:i});typeof o=="object"&&Object.keys(o).forEach((l,d,h)=>{if(!o[l]){const g=d>0?o[h[d-1]]:"column";o[l]=g}}),n=za(n,Ac({theme:e},s,(l,d)=>t.useFlexGap?{gap:$0(r,l)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${g1e(d?o[d]:t.direction)}`]:$0(r,l)}}))}return n=bxe(e.breakpoints,n),n};function v1e(t={}){const{createStyledComponent:e=f1e,useThemeProps:n=p1e,componentName:r="MuiStack"}=t,i=()=>Un({root:["root"]},l=>jn(r,l),{}),o=e(y1e);return V.forwardRef(function(l,d){const h=n(l),p=PE(h),{component:g="div",direction:v="column",spacing:x=0,divider:b,children:w,className:S,useFlexGap:C=!1}=p,A=an(p,d1e),P={direction:v,spacing:x,useFlexGap:C},k=i();return z.jsx(o,de({as:g,ownerState:P,ref:d,className:Wt(k.root,S)},A,{children:b?m1e(w,b):w}))})}function _1e(t,e){return de({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}var ps={},Wne={exports:{}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(Wne);var Xr=Wne.exports;const x1e=Zf(u_e),b1e=Zf(Nbe);var Gne=Xr;Object.defineProperty(ps,"__esModule",{value:!0});var Zi=ps.alpha=Kne;ps.blend=O1e;ps.colorChannel=void 0;var Wb=ps.darken=a$;ps.decomposeColor=Td;var w1e=ps.emphasize=k1e,S1e=ps.getContrastRatio=A1e;ps.getLuminance=iI;ps.hexToRgb=qne;ps.hslToRgb=Yne;var Gb=ps.lighten=l$;ps.private_safeAlpha=P1e;ps.private_safeColorChannel=void 0;ps.private_safeDarken=I1e;ps.private_safeEmphasize=Zne;ps.private_safeLighten=R1e;ps.recomposeColor=F1;ps.rgbToHex=C1e;var O9=Gne(x1e),M1e=Gne(b1e);function s$(t,e=0,n=1){return(0,M1e.default)(t,e,n)}function qne(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function E1e(t){const e=t.toString(16);return e.length===1?`0${e}`:e}function Td(t){if(t.type)return t;if(t.charAt(0)==="#")return Td(qne(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error((0,O9.default)(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error((0,O9.default)(10,i))}else r=r.split(",");return r=r.map(o=>parseFloat(o)),{type:n,values:r,colorSpace:i}}const Xne=t=>{const e=Td(t);return e.values.slice(0,3).map((n,r)=>e.type.indexOf("hsl")!==-1&&r!==0?`${n}%`:n).join(" ")};ps.colorChannel=Xne;const T1e=(t,e)=>{try{return Xne(t)}catch{return t}};ps.private_safeColorChannel=T1e;function F1(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.indexOf("rgb")!==-1?r=r.map((i,o)=>o<3?parseInt(i,10):i):e.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function C1e(t){if(t.indexOf("#")===0)return t;const{values:e}=Td(t);return`#${e.map((n,r)=>E1e(r===3?Math.round(255*n):n)).join("")}`}function Yne(t){t=Td(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,o=r*Math.min(i,1-i),s=(d,h=(d+n/30)%12)=>i-o*Math.max(Math.min(h-3,9-h,1),-1);let a="rgb";const l=[Math.round(s(0)*255),Math.round(s(8)*255),Math.round(s(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),F1({type:a,values:l})}function iI(t){t=Td(t);let e=t.type==="hsl"||t.type==="hsla"?Td(Yne(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function A1e(t,e){const n=iI(t),r=iI(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function Kne(t,e){return t=Td(t),e=s$(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,F1(t)}function P1e(t,e,n){try{return Kne(t,e)}catch{return t}}function a$(t,e){if(t=Td(t),e=s$(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return F1(t)}function I1e(t,e,n){try{return a$(t,e)}catch{return t}}function l$(t,e){if(t=Td(t),e=s$(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return F1(t)}function R1e(t,e,n){try{return l$(t,e)}catch{return t}}function k1e(t,e=.15){return iI(t)>.5?a$(t,e):l$(t,e)}function Zne(t,e,n){try{return Zne(t,e)}catch{return t}}function O1e(t,e,n,r=1){const i=(l,d)=>Math.round((l**(1/r)*(1-n)+d**(1/r)*n)**r),o=Td(t),s=Td(e),a=[i(o.values[0],s.values[0]),i(o.values[1],s.values[1]),i(o.values[2],s.values[2])];return F1({type:"rgb",values:a})}const L1e=["mode","contrastThreshold","tonalOffset"],L9={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:F0.white,default:F0.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},nD={text:{primary:F0.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:F0.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function D9(t,e,n,r){const i=r.light||r,o=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=Gb(t.main,i):e==="dark"&&(t.dark=Wb(t.main,o)))}function D1e(t="light"){return t==="dark"?{main:q_[200],light:q_[50],dark:q_[400]}:{main:q_[700],light:q_[400],dark:q_[800]}}function N1e(t="light"){return t==="dark"?{main:G_[200],light:G_[50],dark:G_[400]}:{main:G_[500],light:G_[300],dark:G_[700]}}function z1e(t="light"){return t==="dark"?{main:Gp[500],light:Gp[300],dark:Gp[700]}:{main:Gp[700],light:Gp[400],dark:Gp[800]}}function F1e(t="light"){return t==="dark"?{main:X_[400],light:X_[300],dark:X_[700]}:{main:X_[700],light:X_[500],dark:X_[900]}}function B1e(t="light"){return t==="dark"?{main:yh[400],light:yh[300],dark:yh[700]}:{main:yh[800],light:yh[500],dark:yh[900]}}function j1e(t="light"){return t==="dark"?{main:eS[400],light:eS[300],dark:eS[700]}:{main:"#ed6c02",light:eS[500],dark:eS[900]}}function $1e(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2}=t,i=an(t,L1e),o=t.primary||D1e(e),s=t.secondary||N1e(e),a=t.error||z1e(e),l=t.info||F1e(e),d=t.success||B1e(e),h=t.warning||j1e(e);function p(b){return S1e(b,nD.text.primary)>=n?nD.text.primary:L9.text.primary}const g=({color:b,name:w,mainShade:S=500,lightShade:C=300,darkShade:A=700})=>{if(b=de({},b),!b.main&&b[S]&&(b.main=b[S]),!b.hasOwnProperty("main"))throw new Error(B0(11,w?` (${w})`:"",S));if(typeof b.main!="string")throw new Error(B0(12,w?` (${w})`:"",JSON.stringify(b.main)));return D9(b,"light",C,r),D9(b,"dark",A,r),b.contrastText||(b.contrastText=p(b.main)),b},v={dark:nD,light:L9};return za(de({common:de({},F0),mode:e,primary:g({color:o,name:"primary"}),secondary:g({color:s,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:g({color:a,name:"error"}),warning:g({color:h,name:"warning"}),info:g({color:l,name:"info"}),success:g({color:d,name:"success"}),grey:Lf,contrastThreshold:n,getContrastText:p,augmentColor:g,tonalOffset:r},v[e]),i)}const U1e=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function V1e(t){return Math.round(t*1e5)/1e5}const N9={textTransform:"uppercase"},z9='"Roboto", "Helvetica", "Arial", sans-serif';function H1e(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:r=z9,fontSize:i=14,fontWeightLight:o=300,fontWeightRegular:s=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:d=16,allVariants:h,pxToRem:p}=n,g=an(n,U1e),v=i/14,x=p||(S=>`${S/d*v}rem`),b=(S,C,A,P,k)=>de({fontFamily:r,fontWeight:S,fontSize:x(C),lineHeight:A},r===z9?{letterSpacing:`${V1e(P/C)}em`}:{},k,h),w={h1:b(o,96,1.167,-1.5),h2:b(o,60,1.2,-.5),h3:b(s,48,1.167,0),h4:b(s,34,1.235,.25),h5:b(s,24,1.334,0),h6:b(a,20,1.6,.15),subtitle1:b(s,16,1.75,.15),subtitle2:b(a,14,1.57,.1),body1:b(s,16,1.5,.15),body2:b(s,14,1.43,.15),button:b(a,14,1.75,.4,N9),caption:b(s,12,1.66,.4),overline:b(s,12,2.66,1,N9),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return za(de({htmlFontSize:d,pxToRem:x,fontFamily:r,fontSize:i,fontWeightLight:o,fontWeightRegular:s,fontWeightMedium:a,fontWeightBold:l},w),g,{clone:!1})}const W1e=.2,G1e=.14,q1e=.12;function Mo(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${W1e})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${G1e})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${q1e})`].join(",")}const X1e=["none",Mo(0,2,1,-1,0,1,1,0,0,1,3,0),Mo(0,3,1,-2,0,2,2,0,0,1,5,0),Mo(0,3,3,-2,0,3,4,0,0,1,8,0),Mo(0,2,4,-1,0,4,5,0,0,1,10,0),Mo(0,3,5,-1,0,5,8,0,0,1,14,0),Mo(0,3,5,-1,0,6,10,0,0,1,18,0),Mo(0,4,5,-2,0,7,10,1,0,2,16,1),Mo(0,5,5,-3,0,8,10,1,0,3,14,2),Mo(0,5,6,-3,0,9,12,1,0,3,16,2),Mo(0,6,6,-3,0,10,14,1,0,4,18,3),Mo(0,6,7,-4,0,11,15,1,0,4,20,3),Mo(0,7,8,-4,0,12,17,2,0,5,22,4),Mo(0,7,8,-4,0,13,19,2,0,5,24,4),Mo(0,7,9,-4,0,14,21,2,0,5,26,4),Mo(0,8,9,-5,0,15,22,2,0,6,28,5),Mo(0,8,10,-5,0,16,24,2,0,6,30,5),Mo(0,8,11,-5,0,17,26,2,0,6,32,5),Mo(0,9,11,-5,0,18,28,2,0,7,34,6),Mo(0,9,12,-6,0,19,29,2,0,7,36,6),Mo(0,10,13,-6,0,20,31,3,0,8,38,7),Mo(0,10,13,-6,0,21,33,3,0,8,40,7),Mo(0,10,14,-6,0,22,35,3,0,8,42,7),Mo(0,11,14,-7,0,23,36,3,0,9,44,8),Mo(0,11,15,-7,0,24,38,3,0,9,46,8)],Y1e=["duration","easing","delay"],K1e={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Jne={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function F9(t){return`${Math.round(t)}ms`}function Z1e(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function J1e(t){const e=de({},K1e,t.easing),n=de({},Jne,t.duration);return de({getAutoHeightDuration:Z1e,create:(i=["all"],o={})=>{const{duration:s=n.standard,easing:a=e.easeInOut,delay:l=0}=o;return an(o,Y1e),(Array.isArray(i)?i:[i]).map(d=>`${d} ${typeof s=="string"?s:F9(s)} ${a} ${typeof l=="string"?l:F9(l)}`).join(",")}},t,{easing:e,duration:n})}const Q1e={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},ewe=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function c$(t={},...e){const{mixins:n={},palette:r={},transitions:i={},typography:o={}}=t,s=an(t,ewe);if(t.vars)throw new Error(B0(18));const a=$1e(r),l=z1(t);let d=za(l,{mixins:_1e(l.breakpoints,n),palette:a,shadows:X1e.slice(),typography:H1e(a,o),transitions:J1e(i),zIndex:de({},Q1e)});return d=za(d,s),d=e.reduce((h,p)=>za(h,p),d),d.unstable_sxConfig=de({},AE,s==null?void 0:s.unstable_sxConfig),d.unstable_sx=function(p){return N1({sx:p,theme:this})},d}const Ik=c$();function Od(){const t=gk(Ik);return t[j0]||t}function Wn({props:t,name:e}){return i$({props:t,name:e,defaultTheme:Ik,themeId:j0})}var kE={},rD={exports:{}},B9;function twe(){return B9||(B9=1,function(t){function e(n,r){if(n==null)return{};var i={},o=Object.keys(n),s,a;for(a=0;a<o.length;a++)s=o[a],!(r.indexOf(s)>=0)&&(i[s]=n[s]);return i}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(rD)),rD.exports}const Qne=Zf(gxe),nwe=Zf(yxe),rwe=Zf(Sxe),iwe=Zf(Mbe),owe=Zf(ube),swe=Zf(gbe);var B1=Xr;Object.defineProperty(kE,"__esModule",{value:!0});var awe=kE.default=xwe,ere=kE.shouldForwardProp=rP;kE.systemDefaultTheme=void 0;var ad=B1(vne()),jF=B1(twe()),j9=pwe(Qne),lwe=nwe;B1(rwe);B1(iwe);var cwe=B1(owe),uwe=B1(swe);const dwe=["ownerState"],hwe=["variants"],fwe=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function tre(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(tre=function(r){return r?n:e})(t)}function pwe(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=tre(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}function mwe(t){return Object.keys(t).length===0}function gwe(t){return typeof t=="string"&&t.charCodeAt(0)>96}function rP(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const ywe=kE.systemDefaultTheme=(0,cwe.default)(),vwe=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function lC({defaultTheme:t,theme:e,themeId:n}){return mwe(e)?t:e[n]||e}function _we(t){return t?(e,n)=>n[t]:null}function iP(t,e){let{ownerState:n}=e,r=(0,jF.default)(e,dwe);const i=typeof t=="function"?t((0,ad.default)({ownerState:n},r)):t;if(Array.isArray(i))return i.flatMap(o=>iP(o,(0,ad.default)({ownerState:n},r)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:o=[]}=i;let a=(0,jF.default)(i,hwe);return o.forEach(l=>{let d=!0;typeof l.props=="function"?d=l.props((0,ad.default)({ownerState:n},r,n)):Object.keys(l.props).forEach(h=>{(n==null?void 0:n[h])!==l.props[h]&&r[h]!==l.props[h]&&(d=!1)}),d&&(Array.isArray(a)||(a=[a]),a.push(typeof l.style=="function"?l.style((0,ad.default)({ownerState:n},r,n)):l.style))}),a}return i}function xwe(t={}){const{themeId:e,defaultTheme:n=ywe,rootShouldForwardProp:r=rP,slotShouldForwardProp:i=rP}=t,o=s=>(0,uwe.default)((0,ad.default)({},s,{theme:lC((0,ad.default)({},s,{defaultTheme:n,themeId:e}))}));return o.__mui_systemSx=!0,(s,a={})=>{(0,j9.internal_processStyles)(s,k=>k.filter(F=>!(F!=null&&F.__mui_systemSx)));const{name:l,slot:d,skipVariantsResolver:h,skipSx:p,overridesResolver:g=_we(vwe(d))}=a,v=(0,jF.default)(a,fwe),x=h!==void 0?h:d&&d!=="Root"&&d!=="root"||!1,b=p||!1;let w,S=rP;d==="Root"||d==="root"?S=r:d?S=i:gwe(s)&&(S=void 0);const C=(0,j9.default)(s,(0,ad.default)({shouldForwardProp:S,label:w},v)),A=k=>typeof k=="function"&&k.__emotion_real!==k||(0,lwe.isPlainObject)(k)?F=>iP(k,(0,ad.default)({},F,{theme:lC({theme:F.theme,defaultTheme:n,themeId:e})})):k,P=(k,...F)=>{let B=A(k);const W=F?F.map(A):[];l&&g&&W.push(Y=>{const le=lC((0,ad.default)({},Y,{defaultTheme:n,themeId:e}));if(!le.components||!le.components[l]||!le.components[l].styleOverrides)return null;const pe=le.components[l].styleOverrides,re={};return Object.entries(pe).forEach(([me,he])=>{re[me]=iP(he,(0,ad.default)({},Y,{theme:le}))}),g(Y,re)}),l&&!x&&W.push(Y=>{var le;const pe=lC((0,ad.default)({},Y,{defaultTheme:n,themeId:e})),re=pe==null||(le=pe.components)==null||(le=le[l])==null?void 0:le.variants;return iP({variants:re},(0,ad.default)({},Y,{theme:pe}))}),b||W.push(o);const J=W.length-F.length;if(Array.isArray(k)&&J>0){const Y=new Array(J).fill("");B=[...k,...Y],B.raw=[...k.raw,...Y]}const H=C(B,...W);return s.muiName&&(H.muiName=s.muiName),H};return C.withConfig&&(P.withConfig=C.withConfig),P}}const ec=t=>ere(t)&&t!=="classes",bwe=ere,Kt=awe({themeId:j0,defaultTheme:Ik,rootShouldForwardProp:ec}),wwe=["theme"];function Swe(t){let{theme:e}=t,n=an(t,wwe);const r=e[j0];return z.jsx(n1e,de({},n,{themeId:r?j0:void 0,theme:r||e}))}const $9=t=>{let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,(e/100).toFixed(2)};function Mwe(t){return jn("MuiSvgIcon",t)}$n("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Ewe=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Twe=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${Jt(e)}`,`fontSize${Jt(n)}`]};return Un(i,Mwe,r)},Cwe=Kt("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${Jt(n.color)}`],e[`fontSize${Jt(n.fontSize)}`]]}})(({theme:t,ownerState:e})=>{var n,r,i,o,s,a,l,d,h,p,g,v,x;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:e.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=t.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(i=t.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((o=t.typography)==null||(s=o.pxToRem)==null?void 0:s.call(o,20))||"1.25rem",medium:((a=t.typography)==null||(l=a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem",large:((d=t.typography)==null||(h=d.pxToRem)==null?void 0:h.call(d,35))||"2.1875rem"}[e.fontSize],color:(p=(g=(t.vars||t).palette)==null||(g=g[e.color])==null?void 0:g.main)!=null?p:{action:(v=(t.vars||t).palette)==null||(v=v.action)==null?void 0:v.active,disabled:(x=(t.vars||t).palette)==null||(x=x.action)==null?void 0:x.disabled,inherit:void 0}[e.color]}}),$F=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiSvgIcon"}),{children:i,className:o,color:s="inherit",component:a="svg",fontSize:l="medium",htmlColor:d,inheritViewBox:h=!1,titleAccess:p,viewBox:g="0 0 24 24"}=r,v=an(r,Ewe),x=V.isValidElement(i)&&i.type==="svg",b=de({},r,{color:s,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:h,viewBox:g,hasSvgAsChild:x}),w={};h||(w.viewBox=g);const S=Twe(b);return z.jsxs(Cwe,de({as:a,className:Wt(S.root,o),focusable:"false",color:d,"aria-hidden":p?void 0:!0,role:p?"img":void 0,ref:n},w,v,x&&i.props,{ownerState:b,children:[x?i.props.children:i,p?z.jsx("title",{children:p}):null]}))});$F.muiName="SvgIcon";function ja(t,e){function n(r,i){return z.jsx($F,de({"data-testid":`${e}Icon`,ref:i},r,{children:t}))}return n.muiName=$F.muiName,V.memo(V.forwardRef(n))}const Awe={configure:t=>{e$.configure(t)}},Pwe=Object.freeze(Object.defineProperty({__proto__:null,capitalize:Jt,createChainedFunction:FF,createSvgIcon:ja,debounce:IE,deprecatedPropType:zbe,isMuiElement:h2,ownerDocument:Ms,ownerWindow:Wf,requirePropFactory:Fbe,setRef:rI,unstable_ClassNameGenerator:Awe,unstable_useEnhancedEffect:wu,unstable_useId:Ck,unsupportedProp:jbe,useControlled:Hb,useEventCallback:ql,useForkRef:Po,useIsFocusVisible:Pk},Symbol.toStringTag,{value:"Module"}));function UF(t,e){return UF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},UF(t,e)}function OE(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,UF(t,e)}const U9={disabled:!1},oI=Ye.createContext(null);var Iwe=function(e){return e.scrollTop},XS="unmounted",Hv="exited",Wv="entering",Ox="entered",VF="exiting",Dh=function(t){OE(e,t);function e(r,i){var o;o=t.call(this,r,i)||this;var s=i,a=s&&!s.isMounting?r.enter:r.appear,l;return o.appearStatus=null,r.in?a?(l=Hv,o.appearStatus=Wv):l=Ox:r.unmountOnExit||r.mountOnEnter?l=XS:l=Hv,o.state={status:l},o.nextCallback=null,o}e.getDerivedStateFromProps=function(i,o){var s=i.in;return s&&o.status===XS?{status:Hv}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var o=null;if(i!==this.props){var s=this.state.status;this.props.in?s!==Wv&&s!==Ox&&(o=Wv):(s===Wv||s===Ox)&&(o=VF)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,o,s,a;return o=s=a=i,i!=null&&typeof i!="number"&&(o=i.exit,s=i.enter,a=i.appear!==void 0?i.appear:s),{exit:o,enter:s,appear:a}},n.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null)if(this.cancelNextCallback(),o===Wv){if(this.props.unmountOnExit||this.props.mountOnEnter){var s=this.props.nodeRef?this.props.nodeRef.current:rC.findDOMNode(this);s&&Iwe(s)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Hv&&this.setState({status:XS})},n.performEnter=function(i){var o=this,s=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[rC.findDOMNode(this),a],d=l[0],h=l[1],p=this.getTimeouts(),g=a?p.appear:p.enter;if(!i&&!s||U9.disabled){this.safeSetState({status:Ox},function(){o.props.onEntered(d)});return}this.props.onEnter(d,h),this.safeSetState({status:Wv},function(){o.props.onEntering(d,h),o.onTransitionEnd(g,function(){o.safeSetState({status:Ox},function(){o.props.onEntered(d,h)})})})},n.performExit=function(){var i=this,o=this.props.exit,s=this.getTimeouts(),a=this.props.nodeRef?void 0:rC.findDOMNode(this);if(!o||U9.disabled){this.safeSetState({status:Hv},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:VF},function(){i.props.onExiting(a),i.onTransitionEnd(s.exit,function(){i.safeSetState({status:Hv},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},n.setNextCallback=function(i){var o=this,s=!0;return this.nextCallback=function(a){s&&(s=!1,o.nextCallback=null,i(a))},this.nextCallback.cancel=function(){s=!1},this.nextCallback},n.onTransitionEnd=function(i,o){this.setNextCallback(o);var s=this.props.nodeRef?this.props.nodeRef.current:rC.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!s||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[s,this.nextCallback],d=l[0],h=l[1];this.props.addEndListener(d,h)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===XS)return null;var o=this.props,s=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var a=an(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ye.createElement(oI.Provider,{value:null},typeof s=="function"?s(i,a):Ye.cloneElement(Ye.Children.only(s),a))},e}(Ye.Component);Dh.contextType=oI;Dh.propTypes={};function K_(){}Dh.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:K_,onEntering:K_,onEntered:K_,onExit:K_,onExiting:K_,onExited:K_};Dh.UNMOUNTED=XS;Dh.EXITED=Hv;Dh.ENTERING=Wv;Dh.ENTERED=Ox;Dh.EXITING=VF;function oM(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u$(t,e){var n=function(o){return e&&V.isValidElement(o)?e(o):o},r=Object.create(null);return t&&V.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function Rwe(t,e){t=t||{},e=e||{};function n(h){return h in e?e[h]:t[h]}var r=Object.create(null),i=[];for(var o in t)o in e?i.length&&(r[o]=i,i=[]):i.push(o);var s,a={};for(var l in e){if(r[l])for(s=0;s<r[l].length;s++){var d=r[l][s];a[r[l][s]]=n(d)}a[l]=n(l)}for(s=0;s<i.length;s++)a[i[s]]=n(i[s]);return a}function i0(t,e,n){return n[e]!=null?n[e]:t.props[e]}function kwe(t,e){return u$(t.children,function(n){return V.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:i0(n,"appear",t),enter:i0(n,"enter",t),exit:i0(n,"exit",t)})})}function Owe(t,e,n){var r=u$(t.children),i=Rwe(e,r);return Object.keys(i).forEach(function(o){var s=i[o];if(V.isValidElement(s)){var a=o in e,l=o in r,d=e[o],h=V.isValidElement(d)&&!d.props.in;l&&(!a||h)?i[o]=V.cloneElement(s,{onExited:n.bind(null,s),in:!0,exit:i0(s,"exit",t),enter:i0(s,"enter",t)}):!l&&a&&!h?i[o]=V.cloneElement(s,{in:!1}):l&&a&&V.isValidElement(d)&&(i[o]=V.cloneElement(s,{onExited:n.bind(null,s),in:d.props.in,exit:i0(s,"exit",t),enter:i0(s,"enter",t)}))}}),i}var Lwe=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},Dwe={component:"div",childFactory:function(e){return e}},d$=function(t){OE(e,t);function e(r,i){var o;o=t.call(this,r,i)||this;var s=o.handleExited.bind(oM(o));return o.state={contextValue:{isMounting:!0},handleExited:s,firstRender:!0},o}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,o){var s=o.children,a=o.handleExited,l=o.firstRender;return{children:l?kwe(i,a):Owe(i,s,a),firstRender:!1}},n.handleExited=function(i,o){var s=u$(this.props.children);i.key in s||(i.props.onExited&&i.props.onExited(o),this.mounted&&this.setState(function(a){var l=de({},a.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,o=i.component,s=i.childFactory,a=an(i,["component","childFactory"]),l=this.state.contextValue,d=Lwe(this.state.children).map(s);return delete a.appear,delete a.enter,delete a.exit,o===null?Ye.createElement(oI.Provider,{value:l},d):Ye.createElement(oI.Provider,{value:l},Ye.createElement(o,a,d))},e}(Ye.Component);d$.propTypes={};d$.defaultProps=Dwe;const nre=t=>t.scrollTop;function qb(t,e){var n,r;const{timeout:i,easing:o,style:s={}}=t;return{duration:(n=s.transitionDuration)!=null?n:typeof i=="number"?i:i[e.mode]||0,easing:(r=s.transitionTimingFunction)!=null?r:typeof o=="object"?o[e.mode]:o,delay:s.transitionDelay}}function Nwe(t){return jn("MuiCollapse",t)}$n("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const zwe=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Fwe=t=>{const{orientation:e,classes:n}=t,r={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return Un(r,Nwe,n)},Bwe=Kt("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],n.state==="entered"&&e.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&e.hidden]}})(({theme:t,ownerState:e})=>de({height:0,overflow:"hidden",transition:t.transitions.create("height")},e.orientation==="horizontal"&&{height:"auto",width:0,transition:t.transitions.create("width")},e.state==="entered"&&de({height:"auto",overflow:"visible"},e.orientation==="horizontal"&&{width:"auto"}),e.state==="exited"&&!e.in&&e.collapsedSize==="0px"&&{visibility:"hidden"})),jwe=Kt("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,e)=>e.wrapper})(({ownerState:t})=>de({display:"flex",width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),$we=Kt("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,e)=>e.wrapperInner})(({ownerState:t})=>de({width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),rre=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiCollapse"}),{addEndListener:i,children:o,className:s,collapsedSize:a="0px",component:l,easing:d,in:h,onEnter:p,onEntered:g,onEntering:v,onExit:x,onExited:b,onExiting:w,orientation:S="vertical",style:C,timeout:A=Jne.standard,TransitionComponent:P=Dh}=r,k=an(r,zwe),F=de({},r,{orientation:S,collapsedSize:a}),B=Fwe(F),W=Od(),J=ny(),H=V.useRef(null),Y=V.useRef(),le=typeof a=="number"?`${a}px`:a,pe=S==="horizontal",re=pe?"width":"height",me=V.useRef(null),he=Po(n,me),we=at=>It=>{if(at){const Lt=me.current;It===void 0?at(Lt):at(Lt,It)}},ee=()=>H.current?H.current[pe?"clientWidth":"clientHeight"]:0,ye=we((at,It)=>{H.current&&pe&&(H.current.style.position="absolute"),at.style[re]=le,p&&p(at,It)}),be=we((at,It)=>{const Lt=ee();H.current&&pe&&(H.current.style.position="");const{duration:lt,easing:Je}=qb({style:C,timeout:A,easing:d},{mode:"enter"});if(A==="auto"){const Qe=W.transitions.getAutoHeightDuration(Lt);at.style.transitionDuration=`${Qe}ms`,Y.current=Qe}else at.style.transitionDuration=typeof lt=="string"?lt:`${lt}ms`;at.style[re]=`${Lt}px`,at.style.transitionTimingFunction=Je,v&&v(at,It)}),Le=we((at,It)=>{at.style[re]="auto",g&&g(at,It)}),je=we(at=>{at.style[re]=`${ee()}px`,x&&x(at)}),dt=we(b),Be=we(at=>{const It=ee(),{duration:Lt,easing:lt}=qb({style:C,timeout:A,easing:d},{mode:"exit"});if(A==="auto"){const Je=W.transitions.getAutoHeightDuration(It);at.style.transitionDuration=`${Je}ms`,Y.current=Je}else at.style.transitionDuration=typeof Lt=="string"?Lt:`${Lt}ms`;at.style[re]=le,at.style.transitionTimingFunction=lt,w&&w(at)}),ot=at=>{A==="auto"&&J.start(Y.current||0,at),i&&i(me.current,at)};return z.jsx(P,de({in:h,onEnter:ye,onEntered:Le,onEntering:be,onExit:je,onExited:dt,onExiting:Be,addEndListener:ot,nodeRef:me,timeout:A==="auto"?null:A},k,{children:(at,It)=>z.jsx(Bwe,de({as:l,className:Wt(B.root,s,{entered:B.entered,exited:!h&&le==="0px"&&B.hidden}[at]),style:de({[pe?"minWidth":"minHeight"]:le},C),ref:he},It,{ownerState:de({},F,{state:at}),children:z.jsx(jwe,{ownerState:de({},F,{state:at}),className:B.wrapper,ref:H,children:z.jsx($we,{ownerState:de({},F,{state:at}),className:B.wrapperInner,children:o})})}))}))});rre.muiSupportAuto=!0;function Uwe(t){return jn("MuiPaper",t)}$n("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Vwe=["className","component","elevation","square","variant"],Hwe=t=>{const{square:e,elevation:n,variant:r,classes:i}=t,o={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return Un(o,Uwe,i)},Wwe=Kt("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(({theme:t,ownerState:e})=>{var n;return de({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!e.square&&{borderRadius:t.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.divider}`},e.variant==="elevation"&&de({boxShadow:(t.vars||t).shadows[e.elevation]},!t.vars&&t.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${Zi("#fff",$9(e.elevation))}, ${Zi("#fff",$9(e.elevation))})`},t.vars&&{backgroundImage:(n=t.vars.overlays)==null?void 0:n[e.elevation]}))}),jo=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiPaper"}),{className:i,component:o="div",elevation:s=1,square:a=!1,variant:l="elevation"}=r,d=an(r,Vwe),h=de({},r,{component:o,elevation:s,square:a,variant:l}),p=Hwe(h);return z.jsx(Wwe,de({as:o,ownerState:h,className:Wt(p.root,i),ref:n},d))}),ire=V.createContext({});function sI(t){return typeof t=="string"}function Kx(t,e,n){return t===void 0||sI(t)?e:de({},e,{ownerState:de({},e.ownerState,n)})}const Gwe={disableDefaultClasses:!1},qwe=V.createContext(Gwe);function Xwe(t){const{disableDefaultClasses:e}=V.useContext(qwe);return n=>e?"":t(n)}function aI(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function ore(t,e,n){return typeof t=="function"?t(e,n):t}function V9(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function sre(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=t;if(!e){const v=Wt(n==null?void 0:n.className,o,i==null?void 0:i.className,r==null?void 0:r.className),x=de({},n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),b=de({},n,i,r);return v.length>0&&(b.className=v),Object.keys(x).length>0&&(b.style=x),{props:b,internalRef:void 0}}const s=aI(de({},i,r)),a=V9(r),l=V9(i),d=e(s),h=Wt(d==null?void 0:d.className,n==null?void 0:n.className,o,i==null?void 0:i.className,r==null?void 0:r.className),p=de({},d==null?void 0:d.style,n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),g=de({},d,n,l,a);return h.length>0&&(g.className=h),Object.keys(p).length>0&&(g.style=p),{props:g,internalRef:d.ref}}const Ywe=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function Pc(t){var e;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:o=!1}=t,s=an(t,Ywe),a=o?{}:ore(r,i),{props:l,internalRef:d}=sre(de({},s,{externalSlotProps:a})),h=Po(d,a==null?void 0:a.ref,(e=t.additionalProps)==null?void 0:e.ref);return Kx(n,de({},l,{ref:h}),i)}const Kwe=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],Zwe=["component","slots","slotProps"],Jwe=["component"];function lI(t,e){const{className:n,elementType:r,ownerState:i,externalForwardedProps:o,getSlotOwnerState:s,internalForwardedProps:a}=e,l=an(e,Kwe),{component:d,slots:h={[t]:void 0},slotProps:p={[t]:void 0}}=o,g=an(o,Zwe),v=h[t]||r,x=ore(p[t],i),b=sre(de({className:n},l,{externalForwardedProps:t==="root"?g:void 0,externalSlotProps:x})),{props:{component:w},internalRef:S}=b,C=an(b.props,Jwe),A=Po(S,x==null?void 0:x.ref,e.ref),P=s?s(C):{},k=de({},i,P),F=t==="root"?w||d:w,B=Kx(v,de({},t==="root"&&!d&&!h[t]&&a,t!=="root"&&!h[t]&&a,C,F&&{as:F},{ref:A}),k);return Object.keys(P).forEach(W=>{delete B[W]}),[v,B]}function Qwe(t){return jn("MuiAccordion",t)}const cC=$n("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),eSe=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],tSe=t=>{const{classes:e,square:n,expanded:r,disabled:i,disableGutters:o}=t;return Un({root:["root",!n&&"rounded",r&&"expanded",i&&"disabled",!o&&"gutters"],region:["region"]},Qwe,e)},nSe=Kt(jo,{name:"MuiAccordion",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${cC.region}`]:e.region},e.root,!n.square&&e.rounded,!n.disableGutters&&e.gutters]}})(({theme:t})=>{const e={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],e),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],e)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${cC.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${cC.disabled}`]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}},({theme:t,ownerState:e})=>de({},!e.square&&{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},!e.disableGutters&&{[`&.${cC.expanded}`]:{margin:"16px 0"}})),ml=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiAccordion"}),{children:i,className:o,defaultExpanded:s=!1,disabled:a=!1,disableGutters:l=!1,expanded:d,onChange:h,square:p=!1,slots:g={},slotProps:v={},TransitionComponent:x,TransitionProps:b}=r,w=an(r,eSe),[S,C]=Hb({controlled:d,default:s,name:"Accordion",state:"expanded"}),A=V.useCallback(pe=>{C(!S),h&&h(pe,!S)},[S,h,C]),[P,...k]=V.Children.toArray(i),F=V.useMemo(()=>({expanded:S,disabled:a,disableGutters:l,toggle:A}),[S,a,l,A]),B=de({},r,{square:p,disabled:a,disableGutters:l,expanded:S}),W=tSe(B),J=de({transition:x},g),H=de({transition:b},v),[Y,le]=lI("transition",{elementType:rre,externalForwardedProps:{slots:J,slotProps:H},ownerState:B});return z.jsxs(nSe,de({className:Wt(W.root,o),ref:n,ownerState:B,square:p},w,{children:[z.jsx(ire.Provider,{value:F,children:P}),z.jsx(Y,de({in:S,timeout:"auto"},le,{children:z.jsx("div",{"aria-labelledby":P.props.id,id:P.props["aria-controls"],role:"region",className:W.region,children:k})}))]}))});function rSe(t){return jn("MuiAccordionDetails",t)}$n("MuiAccordionDetails",["root"]);const iSe=["className"],oSe=t=>{const{classes:e}=t;return Un({root:["root"]},rSe,e)},sSe=Kt("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({padding:t.spacing(1,2,2)})),gl=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiAccordionDetails"}),{className:i}=r,o=an(r,iSe),s=r,a=oSe(s);return z.jsx(sSe,de({className:Wt(a.root,i),ref:n,ownerState:s},o))});function aSe(t){const{className:e,classes:n,pulsate:r=!1,rippleX:i,rippleY:o,rippleSize:s,in:a,onExited:l,timeout:d}=t,[h,p]=V.useState(!1),g=Wt(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),v={width:s,height:s,top:-(s/2)+o,left:-(s/2)+i},x=Wt(n.child,h&&n.childLeaving,r&&n.childPulsate);return!a&&!h&&p(!0),V.useEffect(()=>{if(!a&&l!=null){const b=setTimeout(l,d);return()=>{clearTimeout(b)}}},[l,a,d]),z.jsx("span",{className:g,style:v,children:z.jsx("span",{className:x})})}const ld=$n("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),lSe=["center","classes","className"];let Rk=t=>t,H9,W9,G9,q9;const HF=550,cSe=80,uSe=i_(H9||(H9=Rk`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),dSe=i_(W9||(W9=Rk`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),hSe=i_(G9||(G9=Rk`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),fSe=Kt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),pSe=Kt(aSe,{name:"MuiTouchRipple",slot:"Ripple"})(q9||(q9=Rk`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),ld.rippleVisible,uSe,HF,({theme:t})=>t.transitions.easing.easeInOut,ld.ripplePulsate,({theme:t})=>t.transitions.duration.shorter,ld.child,ld.childLeaving,dSe,HF,({theme:t})=>t.transitions.easing.easeInOut,ld.childPulsate,hSe,({theme:t})=>t.transitions.easing.easeInOut),mSe=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:s}=r,a=an(r,lSe),[l,d]=V.useState([]),h=V.useRef(0),p=V.useRef(null);V.useEffect(()=>{p.current&&(p.current(),p.current=null)},[l]);const g=V.useRef(!1),v=ny(),x=V.useRef(null),b=V.useRef(null),w=V.useCallback(P=>{const{pulsate:k,rippleX:F,rippleY:B,rippleSize:W,cb:J}=P;d(H=>[...H,z.jsx(pSe,{classes:{ripple:Wt(o.ripple,ld.ripple),rippleVisible:Wt(o.rippleVisible,ld.rippleVisible),ripplePulsate:Wt(o.ripplePulsate,ld.ripplePulsate),child:Wt(o.child,ld.child),childLeaving:Wt(o.childLeaving,ld.childLeaving),childPulsate:Wt(o.childPulsate,ld.childPulsate)},timeout:HF,pulsate:k,rippleX:F,rippleY:B,rippleSize:W},h.current)]),h.current+=1,p.current=J},[o]),S=V.useCallback((P={},k={},F=()=>{})=>{const{pulsate:B=!1,center:W=i||k.pulsate,fakeElement:J=!1}=k;if((P==null?void 0:P.type)==="mousedown"&&g.current){g.current=!1;return}(P==null?void 0:P.type)==="touchstart"&&(g.current=!0);const H=J?null:b.current,Y=H?H.getBoundingClientRect():{width:0,height:0,left:0,top:0};let le,pe,re;if(W||P===void 0||P.clientX===0&&P.clientY===0||!P.clientX&&!P.touches)le=Math.round(Y.width/2),pe=Math.round(Y.height/2);else{const{clientX:me,clientY:he}=P.touches&&P.touches.length>0?P.touches[0]:P;le=Math.round(me-Y.left),pe=Math.round(he-Y.top)}if(W)re=Math.sqrt((2*Y.width**2+Y.height**2)/3),re%2===0&&(re+=1);else{const me=Math.max(Math.abs((H?H.clientWidth:0)-le),le)*2+2,he=Math.max(Math.abs((H?H.clientHeight:0)-pe),pe)*2+2;re=Math.sqrt(me**2+he**2)}P!=null&&P.touches?x.current===null&&(x.current=()=>{w({pulsate:B,rippleX:le,rippleY:pe,rippleSize:re,cb:F})},v.start(cSe,()=>{x.current&&(x.current(),x.current=null)})):w({pulsate:B,rippleX:le,rippleY:pe,rippleSize:re,cb:F})},[i,w,v]),C=V.useCallback(()=>{S({},{pulsate:!0})},[S]),A=V.useCallback((P,k)=>{if(v.clear(),(P==null?void 0:P.type)==="touchend"&&x.current){x.current(),x.current=null,v.start(0,()=>{A(P,k)});return}x.current=null,d(F=>F.length>0?F.slice(1):F),p.current=k},[v]);return V.useImperativeHandle(n,()=>({pulsate:C,start:S,stop:A}),[C,S,A]),z.jsx(fSe,de({className:Wt(ld.root,o.root,s),ref:b},a,{children:z.jsx(d$,{component:null,exit:!0,children:l})}))});function gSe(t){return jn("MuiButtonBase",t)}const ySe=$n("MuiButtonBase",["root","disabled","focusVisible"]),vSe=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],_Se=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,s=Un({root:["root",e&&"disabled",n&&"focusVisible"]},gSe,i);return n&&r&&(s.root+=` ${r}`),s},xSe=Kt("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${ySe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Pm=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:s,className:a,component:l="button",disabled:d=!1,disableRipple:h=!1,disableTouchRipple:p=!1,focusRipple:g=!1,LinkComponent:v="a",onBlur:x,onClick:b,onContextMenu:w,onDragLeave:S,onFocus:C,onFocusVisible:A,onKeyDown:P,onKeyUp:k,onMouseDown:F,onMouseLeave:B,onMouseUp:W,onTouchEnd:J,onTouchMove:H,onTouchStart:Y,tabIndex:le=0,TouchRippleProps:pe,touchRippleRef:re,type:me}=r,he=an(r,vSe),we=V.useRef(null),ee=V.useRef(null),ye=Po(ee,re),{isFocusVisibleRef:be,onFocus:Le,onBlur:je,ref:dt}=Pk(),[Be,ot]=V.useState(!1);d&&Be&&ot(!1),V.useImperativeHandle(i,()=>({focusVisible:()=>{ot(!0),we.current.focus()}}),[]);const[at,It]=V.useState(!1);V.useEffect(()=>{It(!0)},[]);const Lt=at&&!h&&!d;V.useEffect(()=>{Be&&g&&!h&&at&&ee.current.pulsate()},[h,g,Be,at]);function lt(Rt,Xt,Tn=p){return ql(en=>(Xt&&Xt(en),!Tn&&ee.current&&ee.current[Rt](en),!0))}const Je=lt("start",F),Qe=lt("stop",w),ge=lt("stop",S),et=lt("stop",W),Ke=lt("stop",Rt=>{Be&&Rt.preventDefault(),B&&B(Rt)}),Tt=lt("start",Y),ke=lt("stop",J),Vt=lt("stop",H),zt=lt("stop",Rt=>{je(Rt),be.current===!1&&ot(!1),x&&x(Rt)},!1),$t=ql(Rt=>{we.current||(we.current=Rt.currentTarget),Le(Rt),be.current===!0&&(ot(!0),A&&A(Rt)),C&&C(Rt)}),Qt=()=>{const Rt=we.current;return l&&l!=="button"&&!(Rt.tagName==="A"&&Rt.href)},Ie=V.useRef(!1),Me=ql(Rt=>{g&&!Ie.current&&Be&&ee.current&&Rt.key===" "&&(Ie.current=!0,ee.current.stop(Rt,()=>{ee.current.start(Rt)})),Rt.target===Rt.currentTarget&&Qt()&&Rt.key===" "&&Rt.preventDefault(),P&&P(Rt),Rt.target===Rt.currentTarget&&Qt()&&Rt.key==="Enter"&&!d&&(Rt.preventDefault(),b&&b(Rt))}),wt=ql(Rt=>{g&&Rt.key===" "&&ee.current&&Be&&!Rt.defaultPrevented&&(Ie.current=!1,ee.current.stop(Rt,()=>{ee.current.pulsate(Rt)})),k&&k(Rt),b&&Rt.target===Rt.currentTarget&&Qt()&&Rt.key===" "&&!Rt.defaultPrevented&&b(Rt)});let St=l;St==="button"&&(he.href||he.to)&&(St=v);const Bt={};St==="button"?(Bt.type=me===void 0?"button":me,Bt.disabled=d):(!he.href&&!he.to&&(Bt.role="button"),d&&(Bt["aria-disabled"]=d));const jt=Po(n,dt,we),Rn=de({},r,{centerRipple:o,component:l,disabled:d,disableRipple:h,disableTouchRipple:p,focusRipple:g,tabIndex:le,focusVisible:Be}),ft=_Se(Rn);return z.jsxs(xSe,de({as:St,className:Wt(ft.root,a),ownerState:Rn,onBlur:zt,onClick:b,onContextMenu:Qe,onFocus:$t,onKeyDown:Me,onKeyUp:wt,onMouseDown:Je,onMouseLeave:Ke,onMouseUp:et,onDragLeave:ge,onTouchEnd:ke,onTouchMove:Vt,onTouchStart:Tt,ref:jt,tabIndex:d?-1:le,type:me},Bt,he,{children:[s,Lt?z.jsx(mSe,de({ref:ye,center:o},pe)):null]}))});function bSe(t){return jn("MuiAccordionSummary",t)}const Zx=$n("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),wSe=["children","className","expandIcon","focusVisibleClassName","onClick"],SSe=t=>{const{classes:e,expanded:n,disabled:r,disableGutters:i}=t;return Un({root:["root",n&&"expanded",r&&"disabled",!i&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!i&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]},bSe,e)},MSe=Kt(Pm,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t,ownerState:e})=>{const n={duration:t.transitions.duration.shortest};return de({display:"flex",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],n),[`&.${Zx.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${Zx.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`&:hover:not(.${Zx.disabled})`]:{cursor:"pointer"}},!e.disableGutters&&{[`&.${Zx.expanded}`]:{minHeight:64}})}),ESe=Kt("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(t,e)=>e.content})(({theme:t,ownerState:e})=>de({display:"flex",flexGrow:1,margin:"12px 0"},!e.disableGutters&&{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),[`&.${Zx.expanded}`]:{margin:"20px 0"}})),TSe=Kt("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(t,e)=>e.expandIconWrapper})(({theme:t})=>({display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),[`&.${Zx.expanded}`]:{transform:"rotate(180deg)"}})),yl=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiAccordionSummary"}),{children:i,className:o,expandIcon:s,focusVisibleClassName:a,onClick:l}=r,d=an(r,wSe),{disabled:h=!1,disableGutters:p,expanded:g,toggle:v}=V.useContext(ire),x=S=>{v&&v(S),l&&l(S)},b=de({},r,{expanded:g,disabled:h,disableGutters:p}),w=SSe(b);return z.jsxs(MSe,de({focusRipple:!1,disableRipple:!0,disabled:h,component:"div","aria-expanded":g,className:Wt(w.root,o),focusVisibleClassName:Wt(w.focusVisible,a),onClick:x,ref:n,ownerState:b},d,{children:[z.jsx(ESe,{className:w.content,ownerState:b,children:i}),s&&z.jsx(TSe,{className:w.expandIconWrapper,ownerState:b,children:s})]}))});function h$(t){return Wn}function CSe(t){return jn("MuiAlert",t)}const X9=$n("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function ASe(t){return jn("MuiIconButton",t)}const PSe=$n("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),ISe=["edge","children","className","color","disabled","disableFocusRipple","size"],RSe=t=>{const{classes:e,disabled:n,color:r,edge:i,size:o}=t,s={root:["root",n&&"disabled",r!=="default"&&`color${Jt(r)}`,i&&`edge${Jt(i)}`,`size${Jt(o)}`]};return Un(s,ASe,e)},kSe=Kt(Pm,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="default"&&e[`color${Jt(n.color)}`],n.edge&&e[`edge${Jt(n.edge)}`],e[`size${Jt(n.size)}`]]}})(({theme:t,ownerState:e})=>de({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Zi(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:t,ownerState:e})=>{var n;const r=(n=(t.vars||t).palette)==null?void 0:n[e.color];return de({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&de({color:r==null?void 0:r.main},!e.disableRipple&&{"&:hover":de({},r&&{backgroundColor:t.vars?`rgba(${r.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Zi(r.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),e.size==="small"&&{padding:5,fontSize:t.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${PSe.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})}),hr=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiIconButton"}),{edge:i=!1,children:o,className:s,color:a="default",disabled:l=!1,disableFocusRipple:d=!1,size:h="medium"}=r,p=an(r,ISe),g=de({},r,{edge:i,color:a,disabled:l,disableFocusRipple:d,size:h}),v=RSe(g);return z.jsx(kSe,de({className:Wt(v.root,s),centerRipple:!0,focusRipple:!d,disabled:l,ref:n},p,{ownerState:g,children:o}))}),OSe=ja(z.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),LSe=ja(z.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),DSe=ja(z.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),NSe=ja(z.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),zSe=ja(z.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),FSe=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],BSe=h$(),jSe=t=>{const{variant:e,color:n,severity:r,classes:i}=t,o={root:["root",`color${Jt(n||r)}`,`${e}${Jt(n||r)}`,`${e}`],icon:["icon"],message:["message"],action:["action"]};return Un(o,CSe,i)},$Se=Kt(jo,{name:"MuiAlert",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${Jt(n.color||n.severity)}`]]}})(({theme:t})=>{const e=t.palette.mode==="light"?Wb:Gb,n=t.palette.mode==="light"?Gb:Wb;return de({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(([,r])=>r.main&&r.light).map(([r])=>({props:{colorSeverity:r,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert[`${r}Color`]:e(t.palette[r].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${r}StandardBg`]:n(t.palette[r].light,.9),[`& .${X9.icon}`]:t.vars?{color:t.vars.palette.Alert[`${r}IconColor`]}:{color:t.palette[r].main}}})),...Object.entries(t.palette).filter(([,r])=>r.main&&r.light).map(([r])=>({props:{colorSeverity:r,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert[`${r}Color`]:e(t.palette[r].light,.6),border:`1px solid ${(t.vars||t).palette[r].light}`,[`& .${X9.icon}`]:t.vars?{color:t.vars.palette.Alert[`${r}IconColor`]}:{color:t.palette[r].main}}})),...Object.entries(t.palette).filter(([,r])=>r.main&&r.dark).map(([r])=>({props:{colorSeverity:r,variant:"filled"},style:de({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert[`${r}FilledColor`],backgroundColor:t.vars.palette.Alert[`${r}FilledBg`]}:{backgroundColor:t.palette.mode==="dark"?t.palette[r].dark:t.palette[r].main,color:t.palette.getContrastText(t.palette[r].main)})}))]})}),USe=Kt("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(t,e)=>e.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),VSe=Kt("div",{name:"MuiAlert",slot:"Message",overridesResolver:(t,e)=>e.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),Y9=Kt("div",{name:"MuiAlert",slot:"Action",overridesResolver:(t,e)=>e.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),K9={success:z.jsx(OSe,{fontSize:"inherit"}),warning:z.jsx(LSe,{fontSize:"inherit"}),error:z.jsx(DSe,{fontSize:"inherit"}),info:z.jsx(NSe,{fontSize:"inherit"})},HSe=V.forwardRef(function(e,n){const r=BSe({props:e,name:"MuiAlert"}),{action:i,children:o,className:s,closeText:a="Close",color:l,components:d={},componentsProps:h={},icon:p,iconMapping:g=K9,onClose:v,role:x="alert",severity:b="success",slotProps:w={},slots:S={},variant:C="standard"}=r,A=an(r,FSe),P=de({},r,{color:l,severity:b,variant:C,colorSeverity:l||b}),k=jSe(P),F={slots:de({closeButton:d.CloseButton,closeIcon:d.CloseIcon},S),slotProps:de({},h,w)},[B,W]=lI("closeButton",{elementType:hr,externalForwardedProps:F,ownerState:P}),[J,H]=lI("closeIcon",{elementType:zSe,externalForwardedProps:F,ownerState:P});return z.jsxs($Se,de({role:x,elevation:0,ownerState:P,className:Wt(k.root,s),ref:n},A,{children:[p!==!1?z.jsx(USe,{ownerState:P,className:k.icon,children:p||g[b]||K9[b]}):null,z.jsx(VSe,{ownerState:P,className:k.message,children:o}),i!=null?z.jsx(Y9,{ownerState:P,className:k.action,children:i}):null,i==null&&v?z.jsx(Y9,{ownerState:P,className:k.action,children:z.jsx(B,de({size:"small","aria-label":a,title:a,color:"inherit",onClick:v},W,{children:z.jsx(J,de({fontSize:"small"},H))}))}):null]}))});function WSe(t){return jn("MuiTypography",t)}$n("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const GSe=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],qSe=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:s}=t,a={root:["root",o,t.align!=="inherit"&&`align${Jt(e)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return Un(a,WSe,s)},XSe=Kt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${Jt(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(({theme:t,ownerState:e})=>de({margin:0},e.variant==="inherit"&&{font:"inherit"},e.variant!=="inherit"&&t.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),Z9={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},YSe={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},KSe=t=>YSe[t]||t,yn=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiTypography"}),i=KSe(r.color),o=PE(de({},r,{color:i})),{align:s="inherit",className:a,component:l,gutterBottom:d=!1,noWrap:h=!1,paragraph:p=!1,variant:g="body1",variantMapping:v=Z9}=o,x=an(o,GSe),b=de({},o,{align:s,color:i,className:a,component:l,gutterBottom:d,noWrap:h,paragraph:p,variant:g,variantMapping:v}),w=l||(p?"p":v[g]||Z9[g])||"span",S=qSe(b);return z.jsx(XSe,de({as:w,ref:n,ownerState:b,className:Wt(S.root,a)},x))});function ZSe(t){return jn("MuiAppBar",t)}$n("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const JSe=["className","color","enableColorOnDark","position"],QSe=t=>{const{color:e,position:n,classes:r}=t,i={root:["root",`color${Jt(e)}`,`position${Jt(n)}`]};return Un(i,ZSe,r)},uC=(t,e)=>t?`${t==null?void 0:t.replace(")","")}, ${e})`:e,e2e=Kt(jo,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${Jt(n.position)}`],e[`color${Jt(n.color)}`]]}})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[900];return de({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},e.position==="fixed"&&{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},e.position==="absolute"&&{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},e.position==="sticky"&&{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},e.position==="static"&&{position:"static"},e.position==="relative"&&{position:"relative"},!t.vars&&de({},e.color==="default"&&{backgroundColor:n,color:t.palette.getContrastText(n)},e.color&&e.color!=="default"&&e.color!=="inherit"&&e.color!=="transparent"&&{backgroundColor:t.palette[e.color].main,color:t.palette[e.color].contrastText},e.color==="inherit"&&{color:"inherit"},t.palette.mode==="dark"&&!e.enableColorOnDark&&{backgroundColor:null,color:null},e.color==="transparent"&&de({backgroundColor:"transparent",color:"inherit"},t.palette.mode==="dark"&&{backgroundImage:"none"})),t.vars&&de({},e.color==="default"&&{"--AppBar-background":e.enableColorOnDark?t.vars.palette.AppBar.defaultBg:uC(t.vars.palette.AppBar.darkBg,t.vars.palette.AppBar.defaultBg),"--AppBar-color":e.enableColorOnDark?t.vars.palette.text.primary:uC(t.vars.palette.AppBar.darkColor,t.vars.palette.text.primary)},e.color&&!e.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":e.enableColorOnDark?t.vars.palette[e.color].main:uC(t.vars.palette.AppBar.darkBg,t.vars.palette[e.color].main),"--AppBar-color":e.enableColorOnDark?t.vars.palette[e.color].contrastText:uC(t.vars.palette.AppBar.darkColor,t.vars.palette[e.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:e.color==="inherit"?"inherit":"var(--AppBar-color)"},e.color==="transparent"&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),j1=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiAppBar"}),{className:i,color:o="primary",enableColorOnDark:s=!1,position:a="fixed"}=r,l=an(r,JSe),d=de({},r,{color:o,position:a,enableColorOnDark:s}),h=QSe(d);return z.jsx(e2e,de({square:!0,component:"header",ownerState:d,elevation:4,className:Wt(h.root,i,a==="fixed"&&"mui-fixed"),ref:n},l))});function t2e(t){const{badgeContent:e,invisible:n=!1,max:r=99,showZero:i=!1}=t,o=Une({badgeContent:e,max:r});let s=n;n===!1&&e===0&&!i&&(s=!0);const{badgeContent:a,max:l=r}=s?o:t,d=a&&Number(a)>l?`${l}+`:a;return{badgeContent:a,invisible:s,max:l,displayValue:d}}const are="base";function n2e(t){return`${are}--${t}`}function r2e(t,e){return`${are}-${t}-${e}`}function lre(t,e){const n=Lne[e];return n?n2e(n):r2e(t,e)}function i2e(t,e){const n={};return e.forEach(r=>{n[r]=lre(t,r)}),n}function J9(t){return t.substring(2).toLowerCase()}function o2e(t,e){return e.documentElement.clientWidth<t.clientX||e.documentElement.clientHeight<t.clientY}function s2e(t){const{children:e,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:i,touchEvent:o="onTouchEnd"}=t,s=V.useRef(!1),a=V.useRef(null),l=V.useRef(!1),d=V.useRef(!1);V.useEffect(()=>(setTimeout(()=>{l.current=!0},0),()=>{l.current=!1}),[]);const h=Po(e.ref,a),p=ql(x=>{const b=d.current;d.current=!1;const w=Ms(a.current);if(!l.current||!a.current||"clientX"in x&&o2e(x,w))return;if(s.current){s.current=!1;return}let S;x.composedPath?S=x.composedPath().indexOf(a.current)>-1:S=!w.documentElement.contains(x.target)||a.current.contains(x.target),!S&&(n||!b)&&i(x)}),g=x=>b=>{d.current=!0;const w=e.props[x];w&&w(b)},v={ref:h};return o!==!1&&(v[o]=g(o)),V.useEffect(()=>{if(o!==!1){const x=J9(o),b=Ms(a.current),w=()=>{s.current=!0};return b.addEventListener(x,p),b.addEventListener("touchmove",w),()=>{b.removeEventListener(x,p),b.removeEventListener("touchmove",w)}}},[p,o]),r!==!1&&(v[r]=g(r)),V.useEffect(()=>{if(r!==!1){const x=J9(r),b=Ms(a.current);return b.addEventListener(x,p),()=>{b.removeEventListener(x,p)}}},[p,r]),z.jsx(V.Fragment,{children:V.cloneElement(e,v)})}const a2e=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function l2e(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function c2e(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=r=>t.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=e(`[name="${t.name}"]:checked`);return n||(n=e(`[name="${t.name}"]`)),n!==t}function u2e(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||c2e(t))}function d2e(t){const e=[],n=[];return Array.from(t.querySelectorAll(a2e)).forEach((r,i)=>{const o=l2e(r);o===-1||!u2e(r)||(o===0?e.push(r):n.push({documentOrder:i,tabIndex:o,node:r}))}),n.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(e)}function h2e(){return!0}function f2e(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:o=d2e,isEnabled:s=h2e,open:a}=t,l=V.useRef(!1),d=V.useRef(null),h=V.useRef(null),p=V.useRef(null),g=V.useRef(null),v=V.useRef(!1),x=V.useRef(null),b=Po(e.ref,x),w=V.useRef(null);V.useEffect(()=>{!a||!x.current||(v.current=!n)},[n,a]),V.useEffect(()=>{if(!a||!x.current)return;const A=Ms(x.current);return x.current.contains(A.activeElement)||(x.current.hasAttribute("tabIndex")||x.current.setAttribute("tabIndex","-1"),v.current&&x.current.focus()),()=>{i||(p.current&&p.current.focus&&(l.current=!0,p.current.focus()),p.current=null)}},[a]),V.useEffect(()=>{if(!a||!x.current)return;const A=Ms(x.current),P=B=>{w.current=B,!(r||!s()||B.key!=="Tab")&&A.activeElement===x.current&&B.shiftKey&&(l.current=!0,h.current&&h.current.focus())},k=()=>{const B=x.current;if(B===null)return;if(!A.hasFocus()||!s()||l.current){l.current=!1;return}if(B.contains(A.activeElement)||r&&A.activeElement!==d.current&&A.activeElement!==h.current)return;if(A.activeElement!==g.current)g.current=null;else if(g.current!==null)return;if(!v.current)return;let W=[];if((A.activeElement===d.current||A.activeElement===h.current)&&(W=o(x.current)),W.length>0){var J,H;const Y=!!((J=w.current)!=null&&J.shiftKey&&((H=w.current)==null?void 0:H.key)==="Tab"),le=W[0],pe=W[W.length-1];typeof le!="string"&&typeof pe!="string"&&(Y?pe.focus():le.focus())}else B.focus()};A.addEventListener("focusin",k),A.addEventListener("keydown",P,!0);const F=setInterval(()=>{A.activeElement&&A.activeElement.tagName==="BODY"&&k()},50);return()=>{clearInterval(F),A.removeEventListener("focusin",k),A.removeEventListener("keydown",P,!0)}},[n,r,i,s,a,o]);const S=A=>{p.current===null&&(p.current=A.relatedTarget),v.current=!0,g.current=A.target;const P=e.props.onFocus;P&&P(A)},C=A=>{p.current===null&&(p.current=A.relatedTarget),v.current=!0};return z.jsxs(V.Fragment,{children:[z.jsx("div",{tabIndex:a?0:-1,onFocus:C,ref:d,"data-testid":"sentinelStart"}),V.cloneElement(e,{ref:b,onFocus:S}),z.jsx("div",{tabIndex:a?0:-1,onFocus:C,ref:h,"data-testid":"sentinelEnd"})]})}function p2e(t){return typeof t=="function"?t():t}const cre=V.forwardRef(function(e,n){const{children:r,container:i,disablePortal:o=!1}=e,[s,a]=V.useState(null),l=Po(V.isValidElement(r)?r.ref:null,n);if(wu(()=>{o||a(p2e(i)||document.body)},[i,o]),wu(()=>{if(s&&!o)return rI(n,s),()=>{rI(n,null)}},[n,s,o]),o){if(V.isValidElement(r)){const d={ref:l};return V.cloneElement(r,d)}return z.jsx(V.Fragment,{children:r})}return z.jsx(V.Fragment,{children:s&&k1.createPortal(r,s)})});function m2e(t){const e=Ms(t);return e.body===t?Wf(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function f2(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function Q9(t){return parseInt(Wf(t).getComputedStyle(t).paddingRight,10)||0}function g2e(t){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(t.tagName)!==-1,r=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return n||r}function eG(t,e,n,r,i){const o=[e,n,...r];[].forEach.call(t.children,s=>{const a=o.indexOf(s)===-1,l=!g2e(s);a&&l&&f2(s,i)})}function iD(t,e){let n=-1;return t.some((r,i)=>e(r)?(n=i,!0):!1),n}function y2e(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(m2e(r)){const s=jne(Ms(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${Q9(r)+s}px`;const a=Ms(r).querySelectorAll(".mui-fixed");[].forEach.call(a,l=>{n.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${Q9(l)+s}px`})}let o;if(r.parentNode instanceof DocumentFragment)o=Ms(r).body;else{const s=r.parentElement,a=Wf(r);o=(s==null?void 0:s.nodeName)==="HTML"&&a.getComputedStyle(s).overflowY==="scroll"?s:r}n.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{n.forEach(({value:o,el:s,property:a})=>{o?s.style.setProperty(a,o):s.style.removeProperty(a)})}}function v2e(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class _2e{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,n){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&f2(e.modalRef,!1);const i=v2e(n);eG(n,e.mount,e.modalRef,i,!0);const o=iD(this.containers,s=>s.container===n);return o!==-1?(this.containers[o].modals.push(e),r):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:i}),r)}mount(e,n){const r=iD(this.containers,o=>o.modals.indexOf(e)!==-1),i=this.containers[r];i.restore||(i.restore=y2e(i,n))}remove(e,n=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const i=iD(this.containers,s=>s.modals.indexOf(e)!==-1),o=this.containers[i];if(o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(r,1),o.modals.length===0)o.restore&&o.restore(),e.modalRef&&f2(e.modalRef,n),eG(o.container,e.mount,e.modalRef,o.hiddenSiblings,!1),this.containers.splice(i,1);else{const s=o.modals[o.modals.length-1];s.modalRef&&f2(s.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}function x2e(t){return typeof t=="function"?t():t}function b2e(t){return t?t.props.hasOwnProperty("in"):!1}const w2e=new _2e;function S2e(t){const{container:e,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,manager:i=w2e,closeAfterTransition:o=!1,onTransitionEnter:s,onTransitionExited:a,children:l,onClose:d,open:h,rootRef:p}=t,g=V.useRef({}),v=V.useRef(null),x=V.useRef(null),b=Po(x,p),[w,S]=V.useState(!h),C=b2e(l);let A=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(A=!1);const P=()=>Ms(v.current),k=()=>(g.current.modalRef=x.current,g.current.mount=v.current,g.current),F=()=>{i.mount(k(),{disableScrollLock:r}),x.current&&(x.current.scrollTop=0)},B=ql(()=>{const he=x2e(e)||P().body;i.add(k(),he),x.current&&F()}),W=V.useCallback(()=>i.isTopModal(k()),[i]),J=ql(he=>{v.current=he,he&&(h&&W()?F():x.current&&f2(x.current,A))}),H=V.useCallback(()=>{i.remove(k(),A)},[A,i]);V.useEffect(()=>()=>{H()},[H]),V.useEffect(()=>{h?B():(!C||!o)&&H()},[h,H,C,o,B]);const Y=he=>we=>{var ee;(ee=he.onKeyDown)==null||ee.call(he,we),!(we.key!=="Escape"||we.which===229||!W())&&(n||(we.stopPropagation(),d&&d(we,"escapeKeyDown")))},le=he=>we=>{var ee;(ee=he.onClick)==null||ee.call(he,we),we.target===we.currentTarget&&d&&d(we,"backdropClick")};return{getRootProps:(he={})=>{const we=aI(t);delete we.onTransitionEnter,delete we.onTransitionExited;const ee=de({},we,he);return de({role:"presentation"},ee,{onKeyDown:Y(ee),ref:b})},getBackdropProps:(he={})=>{const we=he;return de({"aria-hidden":!0},we,{onClick:le(we),open:h})},getTransitionProps:()=>{const he=()=>{S(!1),s&&s()},we=()=>{S(!0),a&&a(),o&&H()};return{onEnter:FF(he,l==null?void 0:l.props.onEnter),onExited:FF(we,l==null?void 0:l.props.onExited)}},rootRef:b,portalRef:J,isTopModal:W,exited:w,hasTransition:C}}var Ec="top",Cd="bottom",Ad="right",Tc="left",f$="auto",LE=[Ec,Cd,Ad,Tc],Xb="start",sM="end",M2e="clippingParents",ure="viewport",rS="popper",E2e="reference",tG=LE.reduce(function(t,e){return t.concat([e+"-"+Xb,e+"-"+sM])},[]),dre=[].concat(LE,[f$]).reduce(function(t,e){return t.concat([e,e+"-"+Xb,e+"-"+sM])},[]),T2e="beforeRead",C2e="read",A2e="afterRead",P2e="beforeMain",I2e="main",R2e="afterMain",k2e="beforeWrite",O2e="write",L2e="afterWrite",D2e=[T2e,C2e,A2e,P2e,I2e,R2e,k2e,O2e,L2e];function Gf(t){return t?(t.nodeName||"").toLowerCase():null}function Su(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function U0(t){var e=Su(t).Element;return t instanceof e||t instanceof Element}function _d(t){var e=Su(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function p$(t){if(typeof ShadowRoot>"u")return!1;var e=Su(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function N2e(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},o=e.elements[n];!_d(o)||!Gf(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var a=i[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function z2e(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},s=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=s.reduce(function(l,d){return l[d]="",l},{});!_d(i)||!Gf(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(l){i.removeAttribute(l)}))})}}const F2e={name:"applyStyles",enabled:!0,phase:"write",fn:N2e,effect:z2e,requires:["computeStyles"]};function Nf(t){return t.split("-")[0]}var b0=Math.max,cI=Math.min,Yb=Math.round;function WF(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function hre(){return!/^((?!chrome|android).)*safari/i.test(WF())}function Kb(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,o=1;e&&_d(t)&&(i=t.offsetWidth>0&&Yb(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Yb(r.height)/t.offsetHeight||1);var s=U0(t)?Su(t):window,a=s.visualViewport,l=!hre()&&n,d=(r.left+(l&&a?a.offsetLeft:0))/i,h=(r.top+(l&&a?a.offsetTop:0))/o,p=r.width/i,g=r.height/o;return{width:p,height:g,top:h,right:d+p,bottom:h+g,left:d,x:d,y:h}}function m$(t){var e=Kb(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function fre(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&p$(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function xm(t){return Su(t).getComputedStyle(t)}function B2e(t){return["table","td","th"].indexOf(Gf(t))>=0}function Uy(t){return((U0(t)?t.ownerDocument:t.document)||window.document).documentElement}function kk(t){return Gf(t)==="html"?t:t.assignedSlot||t.parentNode||(p$(t)?t.host:null)||Uy(t)}function nG(t){return!_d(t)||xm(t).position==="fixed"?null:t.offsetParent}function j2e(t){var e=/firefox/i.test(WF()),n=/Trident/i.test(WF());if(n&&_d(t)){var r=xm(t);if(r.position==="fixed")return null}var i=kk(t);for(p$(i)&&(i=i.host);_d(i)&&["html","body"].indexOf(Gf(i))<0;){var o=xm(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function DE(t){for(var e=Su(t),n=nG(t);n&&B2e(n)&&xm(n).position==="static";)n=nG(n);return n&&(Gf(n)==="html"||Gf(n)==="body"&&xm(n).position==="static")?e:n||j2e(t)||e}function g$(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function p2(t,e,n){return b0(t,cI(e,n))}function $2e(t,e,n){var r=p2(t,e,n);return r>n?n:r}function pre(){return{top:0,right:0,bottom:0,left:0}}function mre(t){return Object.assign({},pre(),t)}function gre(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var U2e=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,mre(typeof e!="number"?e:gre(e,LE))};function V2e(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=Nf(n.placement),l=g$(a),d=[Tc,Ad].indexOf(a)>=0,h=d?"height":"width";if(!(!o||!s)){var p=U2e(i.padding,n),g=m$(o),v=l==="y"?Ec:Tc,x=l==="y"?Cd:Ad,b=n.rects.reference[h]+n.rects.reference[l]-s[l]-n.rects.popper[h],w=s[l]-n.rects.reference[l],S=DE(o),C=S?l==="y"?S.clientHeight||0:S.clientWidth||0:0,A=b/2-w/2,P=p[v],k=C-g[h]-p[x],F=C/2-g[h]/2+A,B=p2(P,F,k),W=l;n.modifiersData[r]=(e={},e[W]=B,e.centerOffset=B-F,e)}}function H2e(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||fre(e.elements.popper,i)&&(e.elements.arrow=i))}const W2e={name:"arrow",enabled:!0,phase:"main",fn:V2e,effect:H2e,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Zb(t){return t.split("-")[1]}var G2e={top:"auto",right:"auto",bottom:"auto",left:"auto"};function q2e(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Yb(n*i)/i||0,y:Yb(r*i)/i||0}}function rG(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,s=t.offsets,a=t.position,l=t.gpuAcceleration,d=t.adaptive,h=t.roundOffsets,p=t.isFixed,g=s.x,v=g===void 0?0:g,x=s.y,b=x===void 0?0:x,w=typeof h=="function"?h({x:v,y:b}):{x:v,y:b};v=w.x,b=w.y;var S=s.hasOwnProperty("x"),C=s.hasOwnProperty("y"),A=Tc,P=Ec,k=window;if(d){var F=DE(n),B="clientHeight",W="clientWidth";if(F===Su(n)&&(F=Uy(n),xm(F).position!=="static"&&a==="absolute"&&(B="scrollHeight",W="scrollWidth")),F=F,i===Ec||(i===Tc||i===Ad)&&o===sM){P=Cd;var J=p&&F===k&&k.visualViewport?k.visualViewport.height:F[B];b-=J-r.height,b*=l?1:-1}if(i===Tc||(i===Ec||i===Cd)&&o===sM){A=Ad;var H=p&&F===k&&k.visualViewport?k.visualViewport.width:F[W];v-=H-r.width,v*=l?1:-1}}var Y=Object.assign({position:a},d&&G2e),le=h===!0?q2e({x:v,y:b},Su(n)):{x:v,y:b};if(v=le.x,b=le.y,l){var pe;return Object.assign({},Y,(pe={},pe[P]=C?"0":"",pe[A]=S?"0":"",pe.transform=(k.devicePixelRatio||1)<=1?"translate("+v+"px, "+b+"px)":"translate3d("+v+"px, "+b+"px, 0)",pe))}return Object.assign({},Y,(e={},e[P]=C?b+"px":"",e[A]=S?v+"px":"",e.transform="",e))}function X2e(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,s=o===void 0?!0:o,a=n.roundOffsets,l=a===void 0?!0:a,d={placement:Nf(e.placement),variation:Zb(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,rG(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,rG(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Y2e={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:X2e,data:{}};var dC={passive:!0};function K2e(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=i===void 0?!0:i,s=r.resize,a=s===void 0?!0:s,l=Su(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&d.forEach(function(h){h.addEventListener("scroll",n.update,dC)}),a&&l.addEventListener("resize",n.update,dC),function(){o&&d.forEach(function(h){h.removeEventListener("scroll",n.update,dC)}),a&&l.removeEventListener("resize",n.update,dC)}}const Z2e={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:K2e,data:{}};var J2e={left:"right",right:"left",bottom:"top",top:"bottom"};function oP(t){return t.replace(/left|right|bottom|top/g,function(e){return J2e[e]})}var Q2e={start:"end",end:"start"};function iG(t){return t.replace(/start|end/g,function(e){return Q2e[e]})}function y$(t){var e=Su(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function v$(t){return Kb(Uy(t)).left+y$(t).scrollLeft}function eMe(t,e){var n=Su(t),r=Uy(t),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;var d=hre();(d||!d&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a+v$(t),y:l}}function tMe(t){var e,n=Uy(t),r=y$(t),i=(e=t.ownerDocument)==null?void 0:e.body,o=b0(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=b0(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+v$(t),l=-r.scrollTop;return xm(i||n).direction==="rtl"&&(a+=b0(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}function _$(t){var e=xm(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function yre(t){return["html","body","#document"].indexOf(Gf(t))>=0?t.ownerDocument.body:_d(t)&&_$(t)?t:yre(kk(t))}function m2(t,e){var n;e===void 0&&(e=[]);var r=yre(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),o=Su(r),s=i?[o].concat(o.visualViewport||[],_$(r)?r:[]):r,a=e.concat(s);return i?a:a.concat(m2(kk(s)))}function GF(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function nMe(t,e){var n=Kb(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function oG(t,e,n){return e===ure?GF(eMe(t,n)):U0(e)?nMe(e,n):GF(tMe(Uy(t)))}function rMe(t){var e=m2(kk(t)),n=["absolute","fixed"].indexOf(xm(t).position)>=0,r=n&&_d(t)?DE(t):t;return U0(r)?e.filter(function(i){return U0(i)&&fre(i,r)&&Gf(i)!=="body"}):[]}function iMe(t,e,n,r){var i=e==="clippingParents"?rMe(t):[].concat(e),o=[].concat(i,[n]),s=o[0],a=o.reduce(function(l,d){var h=oG(t,d,r);return l.top=b0(h.top,l.top),l.right=cI(h.right,l.right),l.bottom=cI(h.bottom,l.bottom),l.left=b0(h.left,l.left),l},oG(t,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function vre(t){var e=t.reference,n=t.element,r=t.placement,i=r?Nf(r):null,o=r?Zb(r):null,s=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case Ec:l={x:s,y:e.y-n.height};break;case Cd:l={x:s,y:e.y+e.height};break;case Ad:l={x:e.x+e.width,y:a};break;case Tc:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var d=i?g$(i):null;if(d!=null){var h=d==="y"?"height":"width";switch(o){case Xb:l[d]=l[d]-(e[h]/2-n[h]/2);break;case sM:l[d]=l[d]+(e[h]/2-n[h]/2);break}}return l}function aM(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,o=n.strategy,s=o===void 0?t.strategy:o,a=n.boundary,l=a===void 0?M2e:a,d=n.rootBoundary,h=d===void 0?ure:d,p=n.elementContext,g=p===void 0?rS:p,v=n.altBoundary,x=v===void 0?!1:v,b=n.padding,w=b===void 0?0:b,S=mre(typeof w!="number"?w:gre(w,LE)),C=g===rS?E2e:rS,A=t.rects.popper,P=t.elements[x?C:g],k=iMe(U0(P)?P:P.contextElement||Uy(t.elements.popper),l,h,s),F=Kb(t.elements.reference),B=vre({reference:F,element:A,strategy:"absolute",placement:i}),W=GF(Object.assign({},A,B)),J=g===rS?W:F,H={top:k.top-J.top+S.top,bottom:J.bottom-k.bottom+S.bottom,left:k.left-J.left+S.left,right:J.right-k.right+S.right},Y=t.modifiersData.offset;if(g===rS&&Y){var le=Y[i];Object.keys(H).forEach(function(pe){var re=[Ad,Cd].indexOf(pe)>=0?1:-1,me=[Ec,Cd].indexOf(pe)>=0?"y":"x";H[pe]+=le[me]*re})}return H}function oMe(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,d=l===void 0?dre:l,h=Zb(r),p=h?a?tG:tG.filter(function(x){return Zb(x)===h}):LE,g=p.filter(function(x){return d.indexOf(x)>=0});g.length===0&&(g=p);var v=g.reduce(function(x,b){return x[b]=aM(t,{placement:b,boundary:i,rootBoundary:o,padding:s})[Nf(b)],x},{});return Object.keys(v).sort(function(x,b){return v[x]-v[b]})}function sMe(t){if(Nf(t)===f$)return[];var e=oP(t);return[iG(t),e,iG(e)]}function aMe(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!0:s,l=n.fallbackPlacements,d=n.padding,h=n.boundary,p=n.rootBoundary,g=n.altBoundary,v=n.flipVariations,x=v===void 0?!0:v,b=n.allowedAutoPlacements,w=e.options.placement,S=Nf(w),C=S===w,A=l||(C||!x?[oP(w)]:sMe(w)),P=[w].concat(A).reduce(function(Be,ot){return Be.concat(Nf(ot)===f$?oMe(e,{placement:ot,boundary:h,rootBoundary:p,padding:d,flipVariations:x,allowedAutoPlacements:b}):ot)},[]),k=e.rects.reference,F=e.rects.popper,B=new Map,W=!0,J=P[0],H=0;H<P.length;H++){var Y=P[H],le=Nf(Y),pe=Zb(Y)===Xb,re=[Ec,Cd].indexOf(le)>=0,me=re?"width":"height",he=aM(e,{placement:Y,boundary:h,rootBoundary:p,altBoundary:g,padding:d}),we=re?pe?Ad:Tc:pe?Cd:Ec;k[me]>F[me]&&(we=oP(we));var ee=oP(we),ye=[];if(o&&ye.push(he[le]<=0),a&&ye.push(he[we]<=0,he[ee]<=0),ye.every(function(Be){return Be})){J=Y,W=!1;break}B.set(Y,ye)}if(W)for(var be=x?3:1,Le=function(ot){var at=P.find(function(It){var Lt=B.get(It);if(Lt)return Lt.slice(0,ot).every(function(lt){return lt})});if(at)return J=at,"break"},je=be;je>0;je--){var dt=Le(je);if(dt==="break")break}e.placement!==J&&(e.modifiersData[r]._skip=!0,e.placement=J,e.reset=!0)}}const lMe={name:"flip",enabled:!0,phase:"main",fn:aMe,requiresIfExists:["offset"],data:{_skip:!1}};function sG(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function aG(t){return[Ec,Ad,Cd,Tc].some(function(e){return t[e]>=0})}function cMe(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=aM(e,{elementContext:"reference"}),a=aM(e,{altBoundary:!0}),l=sG(s,r),d=sG(a,i,o),h=aG(l),p=aG(d);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:d,isReferenceHidden:h,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":p})}const uMe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:cMe};function dMe(t,e,n){var r=Nf(t),i=[Tc,Ec].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[Tc,Ad].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function hMe(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=i===void 0?[0,0]:i,s=dre.reduce(function(h,p){return h[p]=dMe(p,e.rects,o),h},{}),a=s[e.placement],l=a.x,d=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=d),e.modifiersData[r]=s}const fMe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:hMe};function pMe(t){var e=t.state,n=t.name;e.modifiersData[n]=vre({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const mMe={name:"popperOffsets",enabled:!0,phase:"read",fn:pMe,data:{}};function gMe(t){return t==="x"?"y":"x"}function yMe(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!1:s,l=n.boundary,d=n.rootBoundary,h=n.altBoundary,p=n.padding,g=n.tether,v=g===void 0?!0:g,x=n.tetherOffset,b=x===void 0?0:x,w=aM(e,{boundary:l,rootBoundary:d,padding:p,altBoundary:h}),S=Nf(e.placement),C=Zb(e.placement),A=!C,P=g$(S),k=gMe(P),F=e.modifiersData.popperOffsets,B=e.rects.reference,W=e.rects.popper,J=typeof b=="function"?b(Object.assign({},e.rects,{placement:e.placement})):b,H=typeof J=="number"?{mainAxis:J,altAxis:J}:Object.assign({mainAxis:0,altAxis:0},J),Y=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,le={x:0,y:0};if(F){if(o){var pe,re=P==="y"?Ec:Tc,me=P==="y"?Cd:Ad,he=P==="y"?"height":"width",we=F[P],ee=we+w[re],ye=we-w[me],be=v?-W[he]/2:0,Le=C===Xb?B[he]:W[he],je=C===Xb?-W[he]:-B[he],dt=e.elements.arrow,Be=v&&dt?m$(dt):{width:0,height:0},ot=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:pre(),at=ot[re],It=ot[me],Lt=p2(0,B[he],Be[he]),lt=A?B[he]/2-be-Lt-at-H.mainAxis:Le-Lt-at-H.mainAxis,Je=A?-B[he]/2+be+Lt+It+H.mainAxis:je+Lt+It+H.mainAxis,Qe=e.elements.arrow&&DE(e.elements.arrow),ge=Qe?P==="y"?Qe.clientTop||0:Qe.clientLeft||0:0,et=(pe=Y==null?void 0:Y[P])!=null?pe:0,Ke=we+lt-et-ge,Tt=we+Je-et,ke=p2(v?cI(ee,Ke):ee,we,v?b0(ye,Tt):ye);F[P]=ke,le[P]=ke-we}if(a){var Vt,zt=P==="x"?Ec:Tc,$t=P==="x"?Cd:Ad,Qt=F[k],Ie=k==="y"?"height":"width",Me=Qt+w[zt],wt=Qt-w[$t],St=[Ec,Tc].indexOf(S)!==-1,Bt=(Vt=Y==null?void 0:Y[k])!=null?Vt:0,jt=St?Me:Qt-B[Ie]-W[Ie]-Bt+H.altAxis,Rn=St?Qt+B[Ie]+W[Ie]-Bt-H.altAxis:wt,ft=v&&St?$2e(jt,Qt,Rn):p2(v?jt:Me,Qt,v?Rn:wt);F[k]=ft,le[k]=ft-Qt}e.modifiersData[r]=le}}const vMe={name:"preventOverflow",enabled:!0,phase:"main",fn:yMe,requiresIfExists:["offset"]};function _Me(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function xMe(t){return t===Su(t)||!_d(t)?y$(t):_Me(t)}function bMe(t){var e=t.getBoundingClientRect(),n=Yb(e.width)/t.offsetWidth||1,r=Yb(e.height)/t.offsetHeight||1;return n!==1||r!==1}function wMe(t,e,n){n===void 0&&(n=!1);var r=_d(e),i=_d(e)&&bMe(e),o=Uy(e),s=Kb(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Gf(e)!=="body"||_$(o))&&(a=xMe(e)),_d(e)?(l=Kb(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=v$(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function SMe(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function i(o){n.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||i(o)}),r}function MMe(t){var e=SMe(t);return D2e.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function EMe(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function TMe(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var lG={placement:"bottom",modifiers:[],strategy:"absolute"};function cG(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function CMe(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,o=i===void 0?lG:i;return function(a,l,d){d===void 0&&(d=o);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},lG,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},p=[],g=!1,v={state:h,setOptions:function(S){var C=typeof S=="function"?S(h.options):S;b(),h.options=Object.assign({},o,h.options,C),h.scrollParents={reference:U0(a)?m2(a):a.contextElement?m2(a.contextElement):[],popper:m2(l)};var A=MMe(TMe([].concat(r,h.options.modifiers)));return h.orderedModifiers=A.filter(function(P){return P.enabled}),x(),v.update()},forceUpdate:function(){if(!g){var S=h.elements,C=S.reference,A=S.popper;if(cG(C,A)){h.rects={reference:wMe(C,DE(A),h.options.strategy==="fixed"),popper:m$(A)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(H){return h.modifiersData[H.name]=Object.assign({},H.data)});for(var P=0;P<h.orderedModifiers.length;P++){if(h.reset===!0){h.reset=!1,P=-1;continue}var k=h.orderedModifiers[P],F=k.fn,B=k.options,W=B===void 0?{}:B,J=k.name;typeof F=="function"&&(h=F({state:h,options:W,name:J,instance:v})||h)}}}},update:EMe(function(){return new Promise(function(w){v.forceUpdate(),w(h)})}),destroy:function(){b(),g=!0}};if(!cG(a,l))return v;v.setOptions(d).then(function(w){!g&&d.onFirstUpdate&&d.onFirstUpdate(w)});function x(){h.orderedModifiers.forEach(function(w){var S=w.name,C=w.options,A=C===void 0?{}:C,P=w.effect;if(typeof P=="function"){var k=P({state:h,name:S,instance:v,options:A}),F=function(){};p.push(k||F)}})}function b(){p.forEach(function(w){return w()}),p=[]}return v}}var AMe=[Z2e,mMe,Y2e,F2e,fMe,lMe,vMe,W2e,uMe],PMe=CMe({defaultModifiers:AMe});const _re="Popper";function IMe(t){return lre(_re,t)}i2e(_re,["root"]);const RMe=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],kMe=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function OMe(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function qF(t){return typeof t=="function"?t():t}function LMe(t){return t.nodeType!==void 0}const DMe=()=>Un({root:["root"]},Xwe(IMe)),NMe={},zMe=V.forwardRef(function(e,n){var r;const{anchorEl:i,children:o,direction:s,disablePortal:a,modifiers:l,open:d,placement:h,popperOptions:p,popperRef:g,slotProps:v={},slots:x={},TransitionProps:b}=e,w=an(e,RMe),S=V.useRef(null),C=Po(S,n),A=V.useRef(null),P=Po(A,g),k=V.useRef(P);wu(()=>{k.current=P},[P]),V.useImperativeHandle(g,()=>A.current,[]);const F=OMe(h,s),[B,W]=V.useState(F),[J,H]=V.useState(qF(i));V.useEffect(()=>{A.current&&A.current.forceUpdate()}),V.useEffect(()=>{i&&H(qF(i))},[i]),wu(()=>{if(!J||!d)return;const me=ee=>{W(ee.placement)};let he=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:ee})=>{me(ee)}}];l!=null&&(he=he.concat(l)),p&&p.modifiers!=null&&(he=he.concat(p.modifiers));const we=PMe(J,S.current,de({placement:F},p,{modifiers:he}));return k.current(we),()=>{we.destroy(),k.current(null)}},[J,a,l,d,p,F]);const Y={placement:B};b!==null&&(Y.TransitionProps=b);const le=DMe(),pe=(r=x.root)!=null?r:"div",re=Pc({elementType:pe,externalSlotProps:v.root,externalForwardedProps:w,additionalProps:{role:"tooltip",ref:C},ownerState:e,className:le.root});return z.jsx(pe,de({},re,{children:typeof o=="function"?o(Y):o}))}),FMe=V.forwardRef(function(e,n){const{anchorEl:r,children:i,container:o,direction:s="ltr",disablePortal:a=!1,keepMounted:l=!1,modifiers:d,open:h,placement:p="bottom",popperOptions:g=NMe,popperRef:v,style:x,transition:b=!1,slotProps:w={},slots:S={}}=e,C=an(e,kMe),[A,P]=V.useState(!0),k=()=>{P(!1)},F=()=>{P(!0)};if(!l&&!h&&(!b||A))return null;let B;if(o)B=o;else if(r){const H=qF(r);B=H&&LMe(H)?Ms(H).body:Ms(null).body}const W=!h&&l&&(!b||A)?"none":void 0,J=b?{in:h,onEnter:k,onExited:F}:void 0;return z.jsx(cre,{disablePortal:a,container:B,children:z.jsx(zMe,de({anchorEl:r,direction:s,disablePortal:a,modifiers:d,ref:n,open:b?!A:h,placement:p,popperOptions:g,popperRef:v,slotProps:w,slots:S},C,{style:de({position:"fixed",top:0,left:0,display:W},x),TransitionProps:J,children:i}))})});function BMe(t={}){const{autoHideDuration:e=null,disableWindowBlurListener:n=!1,onClose:r,open:i,resumeHideDuration:o}=t,s=ny();V.useEffect(()=>{if(!i)return;function S(C){C.defaultPrevented||(C.key==="Escape"||C.key==="Esc")&&(r==null||r(C,"escapeKeyDown"))}return document.addEventListener("keydown",S),()=>{document.removeEventListener("keydown",S)}},[i,r]);const a=ql((S,C)=>{r==null||r(S,C)}),l=ql(S=>{!r||S==null||s.start(S,()=>{a(null,"timeout")})});V.useEffect(()=>(i&&l(e),s.clear),[i,e,l,s]);const d=S=>{r==null||r(S,"clickaway")},h=s.clear,p=V.useCallback(()=>{e!=null&&l(o??e*.5)},[e,o,l]),g=S=>C=>{const A=S.onBlur;A==null||A(C),p()},v=S=>C=>{const A=S.onFocus;A==null||A(C),h()},x=S=>C=>{const A=S.onMouseEnter;A==null||A(C),h()},b=S=>C=>{const A=S.onMouseLeave;A==null||A(C),p()};return V.useEffect(()=>{if(!n&&i)return window.addEventListener("focus",p),window.addEventListener("blur",h),()=>{window.removeEventListener("focus",p),window.removeEventListener("blur",h)}},[n,i,p,h]),{getRootProps:(S={})=>{const C=de({},aI(t),aI(S));return de({role:"presentation"},S,C,{onBlur:g(C),onFocus:v(C),onMouseEnter:x(C),onMouseLeave:b(C)})},onClickAway:d}}const jMe=["onChange","maxRows","minRows","style","value"];function hC(t){return parseInt(t,10)||0}const $Me={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function UMe(t){return t==null||Object.keys(t).length===0||t.outerHeightStyle===0&&!t.overflowing}const VMe=V.forwardRef(function(e,n){const{onChange:r,maxRows:i,minRows:o=1,style:s,value:a}=e,l=an(e,jMe),{current:d}=V.useRef(a!=null),h=V.useRef(null),p=Po(n,h),g=V.useRef(null),v=V.useCallback(()=>{const w=h.current,C=Wf(w).getComputedStyle(w);if(C.width==="0px")return{outerHeightStyle:0,overflowing:!1};const A=g.current;A.style.width=C.width,A.value=w.value||e.placeholder||"x",A.value.slice(-1)===`
`&&(A.value+=" ");const P=C.boxSizing,k=hC(C.paddingBottom)+hC(C.paddingTop),F=hC(C.borderBottomWidth)+hC(C.borderTopWidth),B=A.scrollHeight;A.value="x";const W=A.scrollHeight;let J=B;o&&(J=Math.max(Number(o)*W,J)),i&&(J=Math.min(Number(i)*W,J)),J=Math.max(J,W);const H=J+(P==="border-box"?k+F:0),Y=Math.abs(J-B)<=1;return{outerHeightStyle:H,overflowing:Y}},[i,o,e.placeholder]),x=V.useCallback(()=>{const w=v();if(UMe(w))return;const S=h.current;S.style.height=`${w.outerHeightStyle}px`,S.style.overflow=w.overflowing?"hidden":""},[v]);wu(()=>{const w=()=>{x()};let S;const C=IE(w),A=h.current,P=Wf(A);P.addEventListener("resize",C);let k;return typeof ResizeObserver<"u"&&(k=new ResizeObserver(w),k.observe(A)),()=>{C.clear(),cancelAnimationFrame(S),P.removeEventListener("resize",C),k&&k.disconnect()}},[v,x]),wu(()=>{x()});const b=w=>{d||x(),r&&r(w)};return z.jsxs(V.Fragment,{children:[z.jsx("textarea",de({value:a,onChange:b,ref:p,rows:o},l)),z.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:g,tabIndex:-1,style:de({},$Me.shadow,s,{paddingTop:0,paddingBottom:0})})]})});var x$={};Object.defineProperty(x$,"__esModule",{value:!0});var xre=x$.default=void 0,HMe=GMe(V),WMe=Qne;function bre(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(bre=function(r){return r?n:e})(t)}function GMe(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=bre(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}function qMe(t){return Object.keys(t).length===0}function XMe(t=null){const e=HMe.useContext(WMe.ThemeContext);return!e||qMe(e)?t:e}xre=x$.default=XMe;const YMe=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],KMe=Kt(FMe,{name:"MuiPopper",slot:"Root",overridesResolver:(t,e)=>e.root})({}),wre=V.forwardRef(function(e,n){var r;const i=xre(),o=Wn({props:e,name:"MuiPopper"}),{anchorEl:s,component:a,components:l,componentsProps:d,container:h,disablePortal:p,keepMounted:g,modifiers:v,open:x,placement:b,popperOptions:w,popperRef:S,transition:C,slots:A,slotProps:P}=o,k=an(o,YMe),F=(r=A==null?void 0:A.root)!=null?r:l==null?void 0:l.Root,B=de({anchorEl:s,container:h,disablePortal:p,keepMounted:g,modifiers:v,open:x,placement:b,popperOptions:w,popperRef:S,transition:C},k);return z.jsx(KMe,de({as:a,direction:i==null?void 0:i.direction,slots:{root:F},slotProps:P??d},B,{ref:n}))});function o_({props:t,states:e,muiFormControl:n}){return e.reduce((r,i)=>(r[i]=t[i],n&&typeof t[i]>"u"&&(r[i]=n[i]),r),{})}const Ok=V.createContext(void 0);function Im(){return V.useContext(Ok)}function Sre(t){return z.jsx(fbe,de({},t,{defaultTheme:Ik,themeId:j0}))}function uG(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function uI(t,e=!1){return t&&(uG(t.value)&&t.value!==""||e&&uG(t.defaultValue)&&t.defaultValue!=="")}function ZMe(t){return t.startAdornment}function JMe(t){return jn("MuiInputBase",t)}const Jb=$n("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),QMe=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],Lk=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,n.size==="small"&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e[`color${Jt(n.color)}`],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},Dk=(t,e)=>{const{ownerState:n}=t;return[e.input,n.size==="small"&&e.inputSizeSmall,n.multiline&&e.inputMultiline,n.type==="search"&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},eEe=t=>{const{classes:e,color:n,disabled:r,error:i,endAdornment:o,focused:s,formControl:a,fullWidth:l,hiddenLabel:d,multiline:h,readOnly:p,size:g,startAdornment:v,type:x}=t,b={root:["root",`color${Jt(n)}`,r&&"disabled",i&&"error",l&&"fullWidth",s&&"focused",a&&"formControl",g&&g!=="medium"&&`size${Jt(g)}`,h&&"multiline",v&&"adornedStart",o&&"adornedEnd",d&&"hiddenLabel",p&&"readOnly"],input:["input",r&&"disabled",x==="search"&&"inputTypeSearch",h&&"inputMultiline",g==="small"&&"inputSizeSmall",d&&"inputHiddenLabel",v&&"inputAdornedStart",o&&"inputAdornedEnd",p&&"readOnly"]};return Un(b,JMe,e)},Nk=Kt("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Lk})(({theme:t,ownerState:e})=>de({},t.typography.body1,{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Jb.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"}},e.multiline&&de({padding:"4px 0 5px"},e.size==="small"&&{paddingTop:1}),e.fullWidth&&{width:"100%"})),zk=Kt("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Dk})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light",r=de({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),i={opacity:"0 !important"},o=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return de({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Jb.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus:-ms-input-placeholder":o,"&:focus::-ms-input-placeholder":o},[`&.${Jb.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},e.size==="small"&&{paddingTop:1},e.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},e.type==="search"&&{MozAppearance:"textfield"})}),tEe=z.jsx(Sre,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),nEe=V.forwardRef(function(e,n){var r;const i=Wn({props:e,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:s,autoFocus:a,className:l,components:d={},componentsProps:h={},defaultValue:p,disabled:g,disableInjectingGlobalStyles:v,endAdornment:x,fullWidth:b=!1,id:w,inputComponent:S="input",inputProps:C={},inputRef:A,maxRows:P,minRows:k,multiline:F=!1,name:B,onBlur:W,onChange:J,onClick:H,onFocus:Y,onKeyDown:le,onKeyUp:pe,placeholder:re,readOnly:me,renderSuffix:he,rows:we,slotProps:ee={},slots:ye={},startAdornment:be,type:Le="text",value:je}=i,dt=an(i,QMe),Be=C.value!=null?C.value:je,{current:ot}=V.useRef(Be!=null),at=V.useRef(),It=V.useCallback(ft=>{},[]),Lt=Po(at,A,C.ref,It),[lt,Je]=V.useState(!1),Qe=Im(),ge=o_({props:i,muiFormControl:Qe,states:["color","disabled","error","hiddenLabel","size","required","filled"]});ge.focused=Qe?Qe.focused:lt,V.useEffect(()=>{!Qe&&g&&lt&&(Je(!1),W&&W())},[Qe,g,lt,W]);const et=Qe&&Qe.onFilled,Ke=Qe&&Qe.onEmpty,Tt=V.useCallback(ft=>{uI(ft)?et&&et():Ke&&Ke()},[et,Ke]);wu(()=>{ot&&Tt({value:Be})},[Be,Tt,ot]);const ke=ft=>{if(ge.disabled){ft.stopPropagation();return}Y&&Y(ft),C.onFocus&&C.onFocus(ft),Qe&&Qe.onFocus?Qe.onFocus(ft):Je(!0)},Vt=ft=>{W&&W(ft),C.onBlur&&C.onBlur(ft),Qe&&Qe.onBlur?Qe.onBlur(ft):Je(!1)},zt=(ft,...Rt)=>{if(!ot){const Xt=ft.target||at.current;if(Xt==null)throw new Error(B0(1));Tt({value:Xt.value})}C.onChange&&C.onChange(ft,...Rt),J&&J(ft,...Rt)};V.useEffect(()=>{Tt(at.current)},[]);const $t=ft=>{at.current&&ft.currentTarget===ft.target&&at.current.focus(),H&&H(ft)};let Qt=S,Ie=C;F&&Qt==="input"&&(we?Ie=de({type:void 0,minRows:we,maxRows:we},Ie):Ie=de({type:void 0,maxRows:P,minRows:k},Ie),Qt=VMe);const Me=ft=>{Tt(ft.animationName==="mui-auto-fill-cancel"?at.current:{value:"x"})};V.useEffect(()=>{Qe&&Qe.setAdornedStart(!!be)},[Qe,be]);const wt=de({},i,{color:ge.color||"primary",disabled:ge.disabled,endAdornment:x,error:ge.error,focused:ge.focused,formControl:Qe,fullWidth:b,hiddenLabel:ge.hiddenLabel,multiline:F,size:ge.size,startAdornment:be,type:Le}),St=eEe(wt),Bt=ye.root||d.Root||Nk,jt=ee.root||h.root||{},Rn=ye.input||d.Input||zk;return Ie=de({},Ie,(r=ee.input)!=null?r:h.input),z.jsxs(V.Fragment,{children:[!v&&tEe,z.jsxs(Bt,de({},jt,!sI(Bt)&&{ownerState:de({},wt,jt.ownerState)},{ref:n,onClick:$t},dt,{className:Wt(St.root,jt.className,l,me&&"MuiInputBase-readOnly"),children:[be,z.jsx(Ok.Provider,{value:null,children:z.jsx(Rn,de({ownerState:wt,"aria-invalid":ge.error,"aria-describedby":o,autoComplete:s,autoFocus:a,defaultValue:p,disabled:ge.disabled,id:w,onAnimationStart:Me,name:B,placeholder:re,readOnly:me,required:ge.required,rows:we,value:Be,onKeyDown:le,onKeyUp:pe,type:Le},Ie,!sI(Rn)&&{as:Qt,ownerState:de({},wt,Ie.ownerState)},{ref:Lt,className:Wt(St.input,Ie.className,me&&"MuiInputBase-readOnly"),onBlur:Vt,onChange:zt,onFocus:ke}))}),x,he?he(de({},ge,{startAdornment:be})):null]}))]})}),b$=nEe;function rEe(t){return jn("MuiInput",t)}const iS=de({},Jb,$n("MuiInput",["root","underline","input"]));function iEe(t){return jn("MuiOutlinedInput",t)}const Eg=de({},Jb,$n("MuiOutlinedInput",["root","notchedOutline","input"]));function oEe(t){return jn("MuiFilledInput",t)}const Sv=de({},Jb,$n("MuiFilledInput",["root","underline","input"])),sEe=ja(z.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),aEe=ja(z.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function lEe(t){return jn("MuiAvatar",t)}$n("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const cEe=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],uEe=h$(),dEe=t=>{const{classes:e,variant:n,colorDefault:r}=t;return Un({root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]},lEe,e)},hEe=Kt("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],n.colorDefault&&e.colorDefault]}})(({theme:t})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:de({color:(t.vars||t).palette.background.default},t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:de({backgroundColor:t.palette.grey[400]},t.applyStyles("dark",{backgroundColor:t.palette.grey[600]})))}]})),fEe=Kt("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(t,e)=>e.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),pEe=Kt(aEe,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(t,e)=>e.fallback})({width:"75%",height:"75%"});function mEe({crossOrigin:t,referrerPolicy:e,src:n,srcSet:r}){const[i,o]=V.useState(!1);return V.useEffect(()=>{if(!n&&!r)return;o(!1);let s=!0;const a=new Image;return a.onload=()=>{s&&o("loaded")},a.onerror=()=>{s&&o("error")},a.crossOrigin=t,a.referrerPolicy=e,a.src=n,r&&(a.srcset=r),()=>{s=!1}},[t,e,n,r]),i}const gEe=V.forwardRef(function(e,n){const r=uEe({props:e,name:"MuiAvatar"}),{alt:i,children:o,className:s,component:a="div",slots:l={},slotProps:d={},imgProps:h,sizes:p,src:g,srcSet:v,variant:x="circular"}=r,b=an(r,cEe);let w=null;const S=mEe(de({},h,{src:g,srcSet:v})),C=g||v,A=C&&S!=="error",P=de({},r,{colorDefault:!A,component:a,variant:x}),k=dEe(P),[F,B]=lI("img",{className:k.img,elementType:fEe,externalForwardedProps:{slots:l,slotProps:{img:de({},h,d.img)}},additionalProps:{alt:i,src:g,srcSet:v,sizes:p},ownerState:P});return A?w=z.jsx(F,de({},B)):o||o===0?w=o:C&&i?w=i[0]:w=z.jsx(pEe,{ownerState:P,className:k.fallback}),z.jsx(hEe,de({as:a,ownerState:P,className:Wt(k.root,s),ref:n},b,{children:w}))}),yEe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],vEe={entering:{opacity:1},entered:{opacity:1}},Mre=V.forwardRef(function(e,n){const r=Od(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:s=!0,children:a,easing:l,in:d,onEnter:h,onEntered:p,onEntering:g,onExit:v,onExited:x,onExiting:b,style:w,timeout:S=i,TransitionComponent:C=Dh}=e,A=an(e,yEe),P=V.useRef(null),k=Po(P,a.ref,n),F=re=>me=>{if(re){const he=P.current;me===void 0?re(he):re(he,me)}},B=F(g),W=F((re,me)=>{nre(re);const he=qb({style:w,timeout:S,easing:l},{mode:"enter"});re.style.webkitTransition=r.transitions.create("opacity",he),re.style.transition=r.transitions.create("opacity",he),h&&h(re,me)}),J=F(p),H=F(b),Y=F(re=>{const me=qb({style:w,timeout:S,easing:l},{mode:"exit"});re.style.webkitTransition=r.transitions.create("opacity",me),re.style.transition=r.transitions.create("opacity",me),v&&v(re)}),le=F(x),pe=re=>{o&&o(P.current,re)};return z.jsx(C,de({appear:s,in:d,nodeRef:P,onEnter:W,onEntered:J,onEntering:B,onExit:Y,onExited:le,onExiting:H,addEndListener:pe,timeout:S},A,{children:(re,me)=>V.cloneElement(a,de({style:de({opacity:0,visibility:re==="exited"&&!d?"hidden":void 0},vEe[re],w,a.props.style),ref:k},me))}))});function _Ee(t){return jn("MuiBackdrop",t)}$n("MuiBackdrop",["root","invisible"]);const xEe=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],bEe=t=>{const{classes:e,invisible:n}=t;return Un({root:["root",n&&"invisible"]},_Ee,e)},wEe=Kt("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})(({ownerState:t})=>de({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})),SEe=V.forwardRef(function(e,n){var r,i,o;const s=Wn({props:e,name:"MuiBackdrop"}),{children:a,className:l,component:d="div",components:h={},componentsProps:p={},invisible:g=!1,open:v,slotProps:x={},slots:b={},TransitionComponent:w=Mre,transitionDuration:S}=s,C=an(s,xEe),A=de({},s,{component:d,invisible:g}),P=bEe(A),k=(r=x.root)!=null?r:p.root;return z.jsx(w,de({in:v,timeout:S},C,{children:z.jsx(wEe,de({"aria-hidden":!0},k,{as:(i=(o=b.root)!=null?o:h.Root)!=null?i:d,className:Wt(P.root,l,k==null?void 0:k.className),ownerState:de({},A,k==null?void 0:k.ownerState),classes:P,ref:n,children:a}))}))});function MEe(t){return jn("MuiBadge",t)}const Tg=$n("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),EEe=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],oD=10,sD=4,TEe=h$(),CEe=t=>{const{color:e,anchorOrigin:n,invisible:r,overlap:i,variant:o,classes:s={}}=t,a={root:["root"],badge:["badge",o,r&&"invisible",`anchorOrigin${Jt(n.vertical)}${Jt(n.horizontal)}`,`anchorOrigin${Jt(n.vertical)}${Jt(n.horizontal)}${Jt(i)}`,`overlap${Jt(i)}`,e!=="default"&&`color${Jt(e)}`]};return Un(a,MEe,s)},AEe=Kt("span",{name:"MuiBadge",slot:"Root",overridesResolver:(t,e)=>e.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),PEe=Kt("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.badge,e[n.variant],e[`anchorOrigin${Jt(n.anchorOrigin.vertical)}${Jt(n.anchorOrigin.horizontal)}${Jt(n.overlap)}`],n.color!=="default"&&e[`color${Jt(n.color)}`],n.invisible&&e.invisible]}})(({theme:t})=>{var e;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:oD*2,lineHeight:1,padding:"0 6px",height:oD*2,borderRadius:oD,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen}),variants:[...Object.keys(((e=t.vars)!=null?e:t).palette).filter(n=>{var r,i;return((r=t.vars)!=null?r:t).palette[n].main&&((i=t.vars)!=null?i:t).palette[n].contrastText}).map(n=>({props:{color:n},style:{backgroundColor:(t.vars||t).palette[n].main,color:(t.vars||t).palette[n].contrastText}})),{props:{variant:"dot"},style:{borderRadius:sD,height:sD*2,minWidth:sD*2,padding:0}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Tg.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Tg.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Tg.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Tg.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Tg.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Tg.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Tg.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Tg.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})}}]}}),IEe=V.forwardRef(function(e,n){var r,i,o,s,a,l;const d=TEe({props:e,name:"MuiBadge"}),{anchorOrigin:h={vertical:"top",horizontal:"right"},className:p,component:g,components:v={},componentsProps:x={},children:b,overlap:w="rectangular",color:S="default",invisible:C=!1,max:A=99,badgeContent:P,slots:k,slotProps:F,showZero:B=!1,variant:W="standard"}=d,J=an(d,EEe),{badgeContent:H,invisible:Y,max:le,displayValue:pe}=t2e({max:A,invisible:C,badgeContent:P,showZero:B}),re=Une({anchorOrigin:h,color:S,overlap:w,variant:W,badgeContent:P}),me=Y||H==null&&W!=="dot",{color:he=S,overlap:we=w,anchorOrigin:ee=h,variant:ye=W}=me?re:d,be=ye!=="dot"?pe:void 0,Le=de({},d,{badgeContent:H,invisible:me,max:le,displayValue:be,showZero:B,anchorOrigin:ee,color:he,overlap:we,variant:ye}),je=CEe(Le),dt=(r=(i=k==null?void 0:k.root)!=null?i:v.Root)!=null?r:AEe,Be=(o=(s=k==null?void 0:k.badge)!=null?s:v.Badge)!=null?o:PEe,ot=(a=F==null?void 0:F.root)!=null?a:x.root,at=(l=F==null?void 0:F.badge)!=null?l:x.badge,It=Pc({elementType:dt,externalSlotProps:ot,externalForwardedProps:J,additionalProps:{ref:n,as:g},ownerState:Le,className:Wt(ot==null?void 0:ot.className,je.root,p)}),Lt=Pc({elementType:Be,externalSlotProps:at,ownerState:Le,className:Wt(je.badge,at==null?void 0:at.className)});return z.jsxs(dt,de({},It,{children:[b,z.jsx(Be,de({},Lt,{children:be}))]}))});function REe(t){return jn("MuiBottomNavigation",t)}$n("MuiBottomNavigation",["root"]);const kEe=["children","className","component","onChange","showLabels","value"],OEe=t=>{const{classes:e}=t;return Un({root:["root"]},REe,e)},LEe=Kt("div",{name:"MuiBottomNavigation",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({display:"flex",justifyContent:"center",height:56,backgroundColor:(t.vars||t).palette.background.paper})),DEe=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiBottomNavigation"}),{children:i,className:o,component:s="div",onChange:a,showLabels:l=!1,value:d}=r,h=an(r,kEe),p=de({},r,{component:s,showLabels:l}),g=OEe(p);return z.jsx(LEe,de({as:s,className:Wt(g.root,o),ref:n,ownerState:p},h,{children:V.Children.map(i,(v,x)=>{if(!V.isValidElement(v))return null;const b=v.props.value===void 0?x:v.props.value;return V.cloneElement(v,{selected:b===d,showLabel:v.props.showLabel!==void 0?v.props.showLabel:l,value:b,onChange:a})})}))});function NEe(t){return jn("MuiBottomNavigationAction",t)}const Ere=$n("MuiBottomNavigationAction",["root","iconOnly","selected","label"]),zEe=["className","icon","label","onChange","onClick","selected","showLabel","value"],FEe=t=>{const{classes:e,showLabel:n,selected:r}=t;return Un({root:["root",!n&&!r&&"iconOnly",r&&"selected"],label:["label",!n&&!r&&"iconOnly",r&&"selected"]},NEe,e)},BEe=Kt(Pm,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.showLabel&&!n.selected&&e.iconOnly]}})(({theme:t,ownerState:e})=>de({transition:t.transitions.create(["color","padding-top"],{duration:t.transitions.duration.short}),padding:"0px 12px",minWidth:80,maxWidth:168,color:(t.vars||t).palette.text.secondary,flexDirection:"column",flex:"1"},!e.showLabel&&!e.selected&&{paddingTop:14},!e.showLabel&&!e.selected&&!e.label&&{paddingTop:0},{[`&.${Ere.selected}`]:{color:(t.vars||t).palette.primary.main}})),jEe=Kt("span",{name:"MuiBottomNavigationAction",slot:"Label",overridesResolver:(t,e)=>e.label})(({theme:t,ownerState:e})=>de({fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s"},!e.showLabel&&!e.selected&&{opacity:0,transitionDelay:"0s"},{[`&.${Ere.selected}`]:{fontSize:t.typography.pxToRem(14)}})),fC=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiBottomNavigationAction"}),{className:i,icon:o,label:s,onChange:a,onClick:l,value:d}=r,h=an(r,zEe),p=r,g=FEe(p),v=x=>{a&&a(x,d),l&&l(x)};return z.jsxs(BEe,de({ref:n,className:Wt(g.root,i),focusRipple:!0,onClick:v,ownerState:p},h,{children:[o,z.jsx(jEe,{className:g.label,ownerState:p,children:s})]}))}),$Ee=$n("MuiBox",["root"]),UEe=c$(),Ko=_be({themeId:j0,defaultTheme:UEe,defaultClassName:$Ee.root,generateClassName:e$.generate});function VEe(t){return jn("MuiButton",t)}const pC=$n("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),Tre=V.createContext({}),Cre=V.createContext(void 0),HEe=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],WEe=t=>{const{color:e,disableElevation:n,fullWidth:r,size:i,variant:o,classes:s}=t,a={root:["root",o,`${o}${Jt(e)}`,`size${Jt(i)}`,`${o}Size${Jt(i)}`,`color${Jt(e)}`,n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${Jt(i)}`],endIcon:["icon","endIcon",`iconSize${Jt(i)}`]},l=Un(a,VEe,s);return de({},s,l)},Are=t=>de({},t.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},t.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},t.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),GEe=Kt(Pm,{shouldForwardProp:t=>ec(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${Jt(n.color)}`],e[`size${Jt(n.size)}`],e[`${n.variant}Size${Jt(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})(({theme:t,ownerState:e})=>{var n,r;const i=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],o=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return de({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":de({textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:Zi(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Zi(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${(t.vars||t).palette[e.color].main}`,backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Zi(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:o,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}}),"&:active":de({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[8]}),[`&.${pC.focusVisible}`]:de({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[6]}),[`&.${pC.disabled}`]:de({color:(t.vars||t).palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},e.variant==="contained"&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main,border:t.vars?`1px solid rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${Zi(t.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:t.vars?t.vars.palette.text.primary:(n=(r=t.palette).getContrastText)==null?void 0:n.call(r,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:i,boxShadow:(t.vars||t).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:t})=>t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${pC.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${pC.disabled}`]:{boxShadow:"none"}}),qEe=Kt("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,e[`iconSize${Jt(n.size)}`]]}})(({ownerState:t})=>de({display:"inherit",marginRight:8,marginLeft:-4},t.size==="small"&&{marginLeft:-2},Are(t))),XEe=Kt("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,e[`iconSize${Jt(n.size)}`]]}})(({ownerState:t})=>de({display:"inherit",marginRight:-4,marginLeft:8},t.size==="small"&&{marginRight:-2},Are(t))),jr=V.forwardRef(function(e,n){const r=V.useContext(Tre),i=V.useContext(Cre),o=r$(r,e),s=Wn({props:o,name:"MuiButton"}),{children:a,color:l="primary",component:d="button",className:h,disabled:p=!1,disableElevation:g=!1,disableFocusRipple:v=!1,endIcon:x,focusVisibleClassName:b,fullWidth:w=!1,size:S="medium",startIcon:C,type:A,variant:P="text"}=s,k=an(s,HEe),F=de({},s,{color:l,component:d,disabled:p,disableElevation:g,disableFocusRipple:v,fullWidth:w,size:S,type:A,variant:P}),B=WEe(F),W=C&&z.jsx(qEe,{className:B.startIcon,ownerState:F,children:C}),J=x&&z.jsx(XEe,{className:B.endIcon,ownerState:F,children:x}),H=i||"";return z.jsxs(GEe,de({ownerState:F,className:Wt(r.className,B.root,h,H),component:d,disabled:p,focusRipple:!v,focusVisibleClassName:Wt(B.focusVisible,b),ref:n,type:A},k,{classes:B,children:[W,a,J]}))});function YEe(t){return jn("MuiButtonGroup",t)}const Pa=$n("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),KEe=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],ZEe=(t,e)=>{const{ownerState:n}=t;return[{[`& .${Pa.grouped}`]:e.grouped},{[`& .${Pa.grouped}`]:e[`grouped${Jt(n.orientation)}`]},{[`& .${Pa.grouped}`]:e[`grouped${Jt(n.variant)}`]},{[`& .${Pa.grouped}`]:e[`grouped${Jt(n.variant)}${Jt(n.orientation)}`]},{[`& .${Pa.grouped}`]:e[`grouped${Jt(n.variant)}${Jt(n.color)}`]},{[`& .${Pa.firstButton}`]:e.firstButton},{[`& .${Pa.lastButton}`]:e.lastButton},{[`& .${Pa.middleButton}`]:e.middleButton},e.root,e[n.variant],n.disableElevation===!0&&e.disableElevation,n.fullWidth&&e.fullWidth,n.orientation==="vertical"&&e.vertical]},JEe=t=>{const{classes:e,color:n,disabled:r,disableElevation:i,fullWidth:o,orientation:s,variant:a}=t,l={root:["root",a,s==="vertical"&&"vertical",o&&"fullWidth",i&&"disableElevation"],grouped:["grouped",`grouped${Jt(s)}`,`grouped${Jt(a)}`,`grouped${Jt(a)}${Jt(s)}`,`grouped${Jt(a)}${Jt(n)}`,r&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return Un(l,YEe,e)},QEe=Kt("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:ZEe})(({theme:t,ownerState:e})=>de({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[2]},e.disableElevation&&{boxShadow:"none"},e.fullWidth&&{width:"100%"},e.orientation==="vertical"&&{flexDirection:"column"},{[`& .${Pa.grouped}`]:de({minWidth:40,"&:hover":de({},e.variant==="contained"&&{boxShadow:"none"})},e.variant==="contained"&&{boxShadow:"none"}),[`& .${Pa.firstButton},& .${Pa.middleButton}`]:de({},e.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},e.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},e.variant==="text"&&e.orientation==="horizontal"&&{borderRight:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Pa.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="text"&&e.orientation==="vertical"&&{borderBottom:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Pa.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="text"&&e.color!=="inherit"&&{borderColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:Zi(t.palette[e.color].main,.5)},e.variant==="outlined"&&e.orientation==="horizontal"&&{borderRightColor:"transparent"},e.variant==="outlined"&&e.orientation==="vertical"&&{borderBottomColor:"transparent"},e.variant==="contained"&&e.orientation==="horizontal"&&{borderRight:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${Pa.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="contained"&&e.orientation==="vertical"&&{borderBottom:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${Pa.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="contained"&&e.color!=="inherit"&&{borderColor:(t.vars||t).palette[e.color].dark},{"&:hover":de({},e.variant==="outlined"&&e.orientation==="horizontal"&&{borderRightColor:"currentColor"},e.variant==="outlined"&&e.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${Pa.lastButton},& .${Pa.middleButton}`]:de({},e.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},e.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},e.variant==="outlined"&&e.orientation==="horizontal"&&{marginLeft:-1},e.variant==="outlined"&&e.orientation==="vertical"&&{marginTop:-1})})),eTe=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiButtonGroup"}),{children:i,className:o,color:s="primary",component:a="div",disabled:l=!1,disableElevation:d=!1,disableFocusRipple:h=!1,disableRipple:p=!1,fullWidth:g=!1,orientation:v="horizontal",size:x="medium",variant:b="outlined"}=r,w=an(r,KEe),S=de({},r,{color:s,component:a,disabled:l,disableElevation:d,disableFocusRipple:h,disableRipple:p,fullWidth:g,orientation:v,size:x,variant:b}),C=JEe(S),A=V.useMemo(()=>({className:C.grouped,color:s,disabled:l,disableElevation:d,disableFocusRipple:h,disableRipple:p,fullWidth:g,size:x,variant:b}),[s,l,d,h,p,g,x,b,C.grouped]),P=Jbe(i),k=P.length,F=B=>{const W=B===0,J=B===k-1;return W&&J?"":W?C.firstButton:J?C.lastButton:C.middleButton};return z.jsx(QEe,de({as:a,role:"group",className:Wt(C.root,o),ref:n,ownerState:S},w,{children:z.jsx(Tre.Provider,{value:A,children:P.map((B,W)=>z.jsx(Cre.Provider,{value:F(W),children:B},W))})}))});function tTe(t){return jn("MuiCard",t)}$n("MuiCard",["root"]);const nTe=["className","raised"],rTe=t=>{const{classes:e}=t;return Un({root:["root"]},tTe,e)},iTe=Kt(jo,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({overflow:"hidden"})),Nh=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiCard"}),{className:i,raised:o=!1}=r,s=an(r,nTe),a=de({},r,{raised:o}),l=rTe(a);return z.jsx(iTe,de({className:Wt(l.root,i),elevation:o?8:void 0,ref:n,ownerState:a},s))});function oTe(t){return jn("MuiCardActions",t)}$n("MuiCardActions",["root","spacing"]);const sTe=["disableSpacing","className"],aTe=t=>{const{classes:e,disableSpacing:n}=t;return Un({root:["root",!n&&"spacing"]},oTe,e)},lTe=Kt("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})(({ownerState:t})=>de({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),Pre=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiCardActions"}),{disableSpacing:i=!1,className:o}=r,s=an(r,sTe),a=de({},r,{disableSpacing:i}),l=aTe(a);return z.jsx(lTe,de({className:Wt(l.root,o),ownerState:a,ref:n},s))});function cTe(t){return jn("MuiCardContent",t)}$n("MuiCardContent",["root"]);const uTe=["className","component"],dTe=t=>{const{classes:e}=t;return Un({root:["root"]},cTe,e)},hTe=Kt("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),Fk=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiCardContent"}),{className:i,component:o="div"}=r,s=an(r,uTe),a=de({},r,{component:o}),l=dTe(a);return z.jsx(hTe,de({as:o,className:Wt(l.root,i),ownerState:a,ref:n},s))});function fTe(t){return jn("MuiCardHeader",t)}const dG=$n("MuiCardHeader",["root","avatar","action","content","title","subheader"]),pTe=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],mTe=t=>{const{classes:e}=t;return Un({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},fTe,e)},gTe=Kt("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(t,e)=>de({[`& .${dG.title}`]:e.title,[`& .${dG.subheader}`]:e.subheader},e.root)})({display:"flex",alignItems:"center",padding:16}),yTe=Kt("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(t,e)=>e.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),vTe=Kt("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(t,e)=>e.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),_Te=Kt("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(t,e)=>e.content})({flex:"1 1 auto"}),xTe=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiCardHeader"}),{action:i,avatar:o,className:s,component:a="div",disableTypography:l=!1,subheader:d,subheaderTypographyProps:h,title:p,titleTypographyProps:g}=r,v=an(r,pTe),x=de({},r,{component:a,disableTypography:l}),b=mTe(x);let w=p;w!=null&&w.type!==yn&&!l&&(w=z.jsx(yn,de({variant:o?"body2":"h5",className:b.title,component:"span",display:"block"},g,{children:w})));let S=d;return S!=null&&S.type!==yn&&!l&&(S=z.jsx(yn,de({variant:o?"body2":"body1",className:b.subheader,color:"text.secondary",component:"span",display:"block"},h,{children:S}))),z.jsxs(gTe,de({className:Wt(b.root,s),as:a,ref:n,ownerState:x},v,{children:[o&&z.jsx(yTe,{className:b.avatar,ownerState:x,children:o}),z.jsxs(_Te,{className:b.content,ownerState:x,children:[w,S]}),i&&z.jsx(vTe,{className:b.action,ownerState:x,children:i})]}))});function bTe(t){return jn("MuiCardMedia",t)}$n("MuiCardMedia",["root","media","img"]);const wTe=["children","className","component","image","src","style"],STe=t=>{const{classes:e,isMediaComponent:n,isImageComponent:r}=t;return Un({root:["root",n&&"media",r&&"img"]},bTe,e)},MTe=Kt("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{isMediaComponent:r,isImageComponent:i}=n;return[e.root,r&&e.media,i&&e.img]}})(({ownerState:t})=>de({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},t.isMediaComponent&&{width:"100%"},t.isImageComponent&&{objectFit:"cover"})),ETe=["video","audio","picture","iframe","img"],TTe=["picture","img"],Ire=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiCardMedia"}),{children:i,className:o,component:s="div",image:a,src:l,style:d}=r,h=an(r,wTe),p=ETe.indexOf(s)!==-1,g=!p&&a?de({backgroundImage:`url("${a}")`},d):d,v=de({},r,{component:s,isMediaComponent:p,isImageComponent:TTe.indexOf(s)!==-1}),x=STe(v);return z.jsx(MTe,de({className:Wt(x.root,o),as:s,role:!p&&a?"img":void 0,ref:n,style:g,ownerState:v,src:p?a||l:void 0},h,{children:i}))});function CTe(t){return jn("PrivateSwitchBase",t)}$n("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const ATe=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],PTe=t=>{const{classes:e,checked:n,disabled:r,edge:i}=t,o={root:["root",n&&"checked",r&&"disabled",i&&`edge${Jt(i)}`],input:["input"]};return Un(o,CTe,e)},ITe=Kt(Pm)(({ownerState:t})=>de({padding:9,borderRadius:"50%"},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12})),RTe=Kt("input",{shouldForwardProp:ec})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Rre=V.forwardRef(function(e,n){const{autoFocus:r,checked:i,checkedIcon:o,className:s,defaultChecked:a,disabled:l,disableFocusRipple:d=!1,edge:h=!1,icon:p,id:g,inputProps:v,inputRef:x,name:b,onBlur:w,onChange:S,onFocus:C,readOnly:A,required:P=!1,tabIndex:k,type:F,value:B}=e,W=an(e,ATe),[J,H]=Hb({controlled:i,default:!!a,name:"SwitchBase",state:"checked"}),Y=Im(),le=ye=>{C&&C(ye),Y&&Y.onFocus&&Y.onFocus(ye)},pe=ye=>{w&&w(ye),Y&&Y.onBlur&&Y.onBlur(ye)},re=ye=>{if(ye.nativeEvent.defaultPrevented)return;const be=ye.target.checked;H(be),S&&S(ye,be)};let me=l;Y&&typeof me>"u"&&(me=Y.disabled);const he=F==="checkbox"||F==="radio",we=de({},e,{checked:J,disabled:me,disableFocusRipple:d,edge:h}),ee=PTe(we);return z.jsxs(ITe,de({component:"span",className:Wt(ee.root,s),centerRipple:!0,focusRipple:!d,disabled:me,tabIndex:null,role:void 0,onFocus:le,onBlur:pe,ownerState:we,ref:n},W,{children:[z.jsx(RTe,de({autoFocus:r,checked:i,defaultChecked:a,className:ee.input,disabled:me,id:he?g:void 0,name:b,onChange:re,readOnly:A,ref:x,required:P,ownerState:we,tabIndex:k,type:F},F==="checkbox"&&B===void 0?{}:{value:B},v)),J?o:p]}))}),kTe=ja(z.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),OTe=ja(z.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),LTe=ja(z.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function DTe(t){return jn("MuiCheckbox",t)}const aD=$n("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),NTe=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],zTe=t=>{const{classes:e,indeterminate:n,color:r,size:i}=t,o={root:["root",n&&"indeterminate",`color${Jt(r)}`,`size${Jt(i)}`]},s=Un(o,DTe,e);return de({},e,s)},FTe=Kt(Rre,{shouldForwardProp:t=>ec(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.indeterminate&&e.indeterminate,e[`size${Jt(n.size)}`],n.color!=="default"&&e[`color${Jt(n.color)}`]]}})(({theme:t,ownerState:e})=>de({color:(t.vars||t).palette.text.secondary},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${e.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Zi(e.color==="default"?t.palette.action.active:t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${aD.checked}, &.${aD.indeterminate}`]:{color:(t.vars||t).palette[e.color].main},[`&.${aD.disabled}`]:{color:(t.vars||t).palette.action.disabled}})),BTe=z.jsx(OTe,{}),jTe=z.jsx(kTe,{}),$Te=z.jsx(LTe,{}),hG=V.forwardRef(function(e,n){var r,i;const o=Wn({props:e,name:"MuiCheckbox"}),{checkedIcon:s=BTe,color:a="primary",icon:l=jTe,indeterminate:d=!1,indeterminateIcon:h=$Te,inputProps:p,size:g="medium",className:v}=o,x=an(o,NTe),b=d?h:l,w=d?h:s,S=de({},o,{color:a,indeterminate:d,size:g}),C=zTe(S);return z.jsx(FTe,de({type:"checkbox",inputProps:de({"data-indeterminate":d},p),icon:V.cloneElement(b,{fontSize:(r=b.props.fontSize)!=null?r:g}),checkedIcon:V.cloneElement(w,{fontSize:(i=w.props.fontSize)!=null?i:g}),ownerState:S,ref:n,className:Wt(C.root,v)},x,{classes:C}))}),s_=u1e({createStyledComponent:Kt("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${Jt(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),useThemeProps:t=>Wn({props:t,name:"MuiContainer"})}),UTe=(t,e)=>de({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},e&&!t.vars&&{colorScheme:t.palette.mode}),VTe=t=>de({color:(t.vars||t).palette.text.primary},t.typography.body1,{backgroundColor:(t.vars||t).palette.background.default,"@media print":{backgroundColor:(t.vars||t).palette.common.white}}),HTe=(t,e=!1)=>{var n;const r={};e&&t.colorSchemes&&Object.entries(t.colorSchemes).forEach(([s,a])=>{var l;r[t.getColorSchemeSelector(s).replace(/\s*&/,"")]={colorScheme:(l=a.palette)==null?void 0:l.mode}});let i=de({html:UTe(t,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:t.typography.fontWeightBold},body:de({margin:0},VTe(t),{"&::backdrop":{backgroundColor:(t.vars||t).palette.background.default}})},r);const o=(n=t.components)==null||(n=n.MuiCssBaseline)==null?void 0:n.styleOverrides;return o&&(i=[i,o]),i};function WTe(t){const e=Wn({props:t,name:"MuiCssBaseline"}),{children:n,enableColorScheme:r=!1}=e;return z.jsxs(V.Fragment,{children:[z.jsx(Sre,{styles:i=>HTe(i,r)}),n]})}function GTe(t){return jn("MuiModal",t)}$n("MuiModal",["root","hidden","backdrop"]);const qTe=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],XTe=t=>{const{open:e,exited:n,classes:r}=t;return Un({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},GTe,r)},YTe=Kt("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(({theme:t,ownerState:e})=>de({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),KTe=Kt(SEe,{name:"MuiModal",slot:"Backdrop",overridesResolver:(t,e)=>e.backdrop})({zIndex:-1}),ZTe=V.forwardRef(function(e,n){var r,i,o,s,a,l;const d=Wn({name:"MuiModal",props:e}),{BackdropComponent:h=KTe,BackdropProps:p,className:g,closeAfterTransition:v=!1,children:x,container:b,component:w,components:S={},componentsProps:C={},disableAutoFocus:A=!1,disableEnforceFocus:P=!1,disableEscapeKeyDown:k=!1,disablePortal:F=!1,disableRestoreFocus:B=!1,disableScrollLock:W=!1,hideBackdrop:J=!1,keepMounted:H=!1,onBackdropClick:Y,open:le,slotProps:pe,slots:re}=d,me=an(d,qTe),he=de({},d,{closeAfterTransition:v,disableAutoFocus:A,disableEnforceFocus:P,disableEscapeKeyDown:k,disablePortal:F,disableRestoreFocus:B,disableScrollLock:W,hideBackdrop:J,keepMounted:H}),{getRootProps:we,getBackdropProps:ee,getTransitionProps:ye,portalRef:be,isTopModal:Le,exited:je,hasTransition:dt}=S2e(de({},he,{rootRef:n})),Be=de({},he,{exited:je}),ot=XTe(Be),at={};if(x.props.tabIndex===void 0&&(at.tabIndex="-1"),dt){const{onEnter:et,onExited:Ke}=ye();at.onEnter=et,at.onExited=Ke}const It=(r=(i=re==null?void 0:re.root)!=null?i:S.Root)!=null?r:YTe,Lt=(o=(s=re==null?void 0:re.backdrop)!=null?s:S.Backdrop)!=null?o:h,lt=(a=pe==null?void 0:pe.root)!=null?a:C.root,Je=(l=pe==null?void 0:pe.backdrop)!=null?l:C.backdrop,Qe=Pc({elementType:It,externalSlotProps:lt,externalForwardedProps:me,getSlotProps:we,additionalProps:{ref:n,as:w},ownerState:Be,className:Wt(g,lt==null?void 0:lt.className,ot==null?void 0:ot.root,!Be.open&&Be.exited&&(ot==null?void 0:ot.hidden))}),ge=Pc({elementType:Lt,externalSlotProps:Je,additionalProps:p,getSlotProps:et=>ee(de({},et,{onClick:Ke=>{Y&&Y(Ke),et!=null&&et.onClick&&et.onClick(Ke)}})),className:Wt(Je==null?void 0:Je.className,p==null?void 0:p.className,ot==null?void 0:ot.backdrop),ownerState:Be});return!H&&!le&&(!dt||je)?null:z.jsx(cre,{ref:be,container:b,disablePortal:F,children:z.jsxs(It,de({},Qe,{children:[!J&&h?z.jsx(Lt,de({},ge)):null,z.jsx(f2e,{disableEnforceFocus:P,disableAutoFocus:A,disableRestoreFocus:B,isEnabled:Le,open:le,children:V.cloneElement(x,at)})]}))})});function JTe(t){return jn("MuiDivider",t)}const QTe=$n("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),fG=QTe,eCe=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],tCe=t=>{const{absolute:e,children:n,classes:r,flexItem:i,light:o,orientation:s,textAlign:a,variant:l}=t;return Un({root:["root",e&&"absolute",l,o&&"light",s==="vertical"&&"vertical",i&&"flexItem",n&&"withChildren",n&&s==="vertical"&&"withChildrenVertical",a==="right"&&s!=="vertical"&&"textAlignRight",a==="left"&&s!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",s==="vertical"&&"wrapperVertical"]},JTe,r)},nCe=Kt("div",{name:"MuiDivider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.absolute&&e.absolute,e[n.variant],n.light&&e.light,n.orientation==="vertical"&&e.vertical,n.flexItem&&e.flexItem,n.children&&e.withChildren,n.children&&n.orientation==="vertical"&&e.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&e.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&e.textAlignLeft]}})(({theme:t,ownerState:e})=>de({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin"},e.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},e.light&&{borderColor:t.vars?`rgba(${t.vars.palette.dividerChannel} / 0.08)`:Zi(t.palette.divider,.08)},e.variant==="inset"&&{marginLeft:72},e.variant==="middle"&&e.orientation==="horizontal"&&{marginLeft:t.spacing(2),marginRight:t.spacing(2)},e.variant==="middle"&&e.orientation==="vertical"&&{marginTop:t.spacing(1),marginBottom:t.spacing(1)},e.orientation==="vertical"&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},e.flexItem&&{alignSelf:"stretch",height:"auto"}),({ownerState:t})=>de({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}}),({theme:t,ownerState:e})=>de({},e.children&&e.orientation!=="vertical"&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(t.vars||t).palette.divider}`}}),({theme:t,ownerState:e})=>de({},e.children&&e.orientation==="vertical"&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(t.vars||t).palette.divider}`}}),({ownerState:t})=>de({},t.textAlign==="right"&&t.orientation!=="vertical"&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},t.textAlign==="left"&&t.orientation!=="vertical"&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),rCe=Kt("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.wrapper,n.orientation==="vertical"&&e.wrapperVertical]}})(({theme:t,ownerState:e})=>de({display:"inline-block",paddingLeft:`calc(${t.spacing(1)} * 1.2)`,paddingRight:`calc(${t.spacing(1)} * 1.2)`},e.orientation==="vertical"&&{paddingTop:`calc(${t.spacing(1)} * 1.2)`,paddingBottom:`calc(${t.spacing(1)} * 1.2)`})),Py=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiDivider"}),{absolute:i=!1,children:o,className:s,component:a=o?"div":"hr",flexItem:l=!1,light:d=!1,orientation:h="horizontal",role:p=a!=="hr"?"separator":void 0,textAlign:g="center",variant:v="fullWidth"}=r,x=an(r,eCe),b=de({},r,{absolute:i,component:a,flexItem:l,light:d,orientation:h,role:p,textAlign:g,variant:v}),w=tCe(b);return z.jsx(nCe,de({as:a,className:Wt(w.root,s),role:p,ref:n,ownerState:b},x,{children:o?z.jsx(rCe,{className:w.wrapper,ownerState:b,children:o}):null}))});Py.muiSkipListHighlight=!0;const iCe=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],oCe=t=>{const{classes:e,disableUnderline:n}=t,i=Un({root:["root",!n&&"underline"],input:["input"]},oEe,e);return de({},e,i)},sCe=Kt(Nk,{shouldForwardProp:t=>ec(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...Lk(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{var n;const r=t.palette.mode==="light",i=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",o=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return de({position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:o,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:o}},[`&.${Sv.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:o},[`&.${Sv.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:a}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n=(t.vars||t).palette[e.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Sv.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Sv.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Sv.disabled}, .${Sv.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${Sv.disabled}:before`]:{borderBottomStyle:"dotted"}},e.startAdornment&&{paddingLeft:12},e.endAdornment&&{paddingRight:12},e.multiline&&de({padding:"25px 12px 8px"},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9}))}),aCe=Kt(zk,{name:"MuiFilledInput",slot:"Input",overridesResolver:Dk})(({theme:t,ownerState:e})=>de({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9},e.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),w$=V.forwardRef(function(e,n){var r,i,o,s;const a=Wn({props:e,name:"MuiFilledInput"}),{components:l={},componentsProps:d,fullWidth:h=!1,inputComponent:p="input",multiline:g=!1,slotProps:v,slots:x={},type:b="text"}=a,w=an(a,iCe),S=de({},a,{fullWidth:h,inputComponent:p,multiline:g,type:b}),C=oCe(a),A={root:{ownerState:S},input:{ownerState:S}},P=v??d?za(A,v??d):A,k=(r=(i=x.root)!=null?i:l.Root)!=null?r:sCe,F=(o=(s=x.input)!=null?s:l.Input)!=null?o:aCe;return z.jsx(b$,de({slots:{root:k,input:F},componentsProps:P,fullWidth:h,inputComponent:p,multiline:g,ref:n,type:b},w,{classes:C}))});w$.muiName="Input";function lCe(t){return jn("MuiFormControl",t)}$n("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const cCe=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],uCe=t=>{const{classes:e,margin:n,fullWidth:r}=t,i={root:["root",n!=="none"&&`margin${Jt(n)}`,r&&"fullWidth"]};return Un(i,lCe,e)},dCe=Kt("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:t},e)=>de({},e.root,e[`margin${Jt(t.margin)}`],t.fullWidth&&e.fullWidth)})(({ownerState:t})=>de({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},t.margin==="normal"&&{marginTop:16,marginBottom:8},t.margin==="dense"&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})),NE=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiFormControl"}),{children:i,className:o,color:s="primary",component:a="div",disabled:l=!1,error:d=!1,focused:h,fullWidth:p=!1,hiddenLabel:g=!1,margin:v="none",required:x=!1,size:b="medium",variant:w="outlined"}=r,S=an(r,cCe),C=de({},r,{color:s,component:a,disabled:l,error:d,fullWidth:p,hiddenLabel:g,margin:v,required:x,size:b,variant:w}),A=uCe(C),[P,k]=V.useState(()=>{let pe=!1;return i&&V.Children.forEach(i,re=>{if(!h2(re,["Input","Select"]))return;const me=h2(re,["Select"])?re.props.input:re;me&&ZMe(me.props)&&(pe=!0)}),pe}),[F,B]=V.useState(()=>{let pe=!1;return i&&V.Children.forEach(i,re=>{h2(re,["Input","Select"])&&(uI(re.props,!0)||uI(re.props.inputProps,!0))&&(pe=!0)}),pe}),[W,J]=V.useState(!1);l&&W&&J(!1);const H=h!==void 0&&!l?h:W;let Y;const le=V.useMemo(()=>({adornedStart:P,setAdornedStart:k,color:s,disabled:l,error:d,filled:F,focused:H,fullWidth:p,hiddenLabel:g,size:b,onBlur:()=>{J(!1)},onEmpty:()=>{B(!1)},onFilled:()=>{B(!0)},onFocus:()=>{J(!0)},registerEffect:Y,required:x,variant:w}),[P,s,l,d,F,H,p,g,Y,x,b,w]);return z.jsx(Ok.Provider,{value:le,children:z.jsx(dCe,de({as:a,ownerState:C,className:Wt(A.root,o),ref:n},S,{children:i}))})}),hCe=v1e({createStyledComponent:Kt("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root}),useThemeProps:t=>Wn({props:t,name:"MuiStack"})});function fCe(t){return jn("MuiFormControlLabel",t)}const YS=$n("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),pCe=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],mCe=t=>{const{classes:e,disabled:n,labelPlacement:r,error:i,required:o}=t,s={root:["root",n&&"disabled",`labelPlacement${Jt(r)}`,i&&"error",o&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]};return Un(s,fCe,e)},gCe=Kt("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${YS.label}`]:e.label},e.root,e[`labelPlacement${Jt(n.labelPlacement)}`]]}})(({theme:t,ownerState:e})=>de({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${YS.disabled}`]:{cursor:"default"}},e.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},e.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},e.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${YS.label}`]:{[`&.${YS.disabled}`]:{color:(t.vars||t).palette.text.disabled}}})),yCe=Kt("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})(({theme:t})=>({[`&.${YS.error}`]:{color:(t.vars||t).palette.error.main}})),pG=V.forwardRef(function(e,n){var r,i;const o=Wn({props:e,name:"MuiFormControlLabel"}),{className:s,componentsProps:a={},control:l,disabled:d,disableTypography:h,label:p,labelPlacement:g="end",required:v,slotProps:x={}}=o,b=an(o,pCe),w=Im(),S=(r=d??l.props.disabled)!=null?r:w==null?void 0:w.disabled,C=v??l.props.required,A={disabled:S,required:C};["checked","name","onChange","value","inputRef"].forEach(J=>{typeof l.props[J]>"u"&&typeof o[J]<"u"&&(A[J]=o[J])});const P=o_({props:o,muiFormControl:w,states:["error"]}),k=de({},o,{disabled:S,labelPlacement:g,required:C,error:P.error}),F=mCe(k),B=(i=x.typography)!=null?i:a.typography;let W=p;return W!=null&&W.type!==yn&&!h&&(W=z.jsx(yn,de({component:"span"},B,{className:Wt(F.label,B==null?void 0:B.className),children:W}))),z.jsxs(gCe,de({className:Wt(F.root,s),ownerState:k,ref:n},b,{children:[V.cloneElement(l,A),C?z.jsxs(hCe,{display:"block",children:[W,z.jsxs(yCe,{ownerState:k,"aria-hidden":!0,className:F.asterisk,children:[" ","*"]})]}):W]}))});function vCe(t){return jn("MuiFormHelperText",t)}const mG=$n("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var gG;const _Ce=["children","className","component","disabled","error","filled","focused","margin","required","variant"],xCe=t=>{const{classes:e,contained:n,size:r,disabled:i,error:o,filled:s,focused:a,required:l}=t,d={root:["root",i&&"disabled",o&&"error",r&&`size${Jt(r)}`,n&&"contained",a&&"focused",s&&"filled",l&&"required"]};return Un(d,vCe,e)},bCe=Kt("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e[`size${Jt(n.size)}`],n.contained&&e.contained,n.filled&&e.filled]}})(({theme:t,ownerState:e})=>de({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${mG.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${mG.error}`]:{color:(t.vars||t).palette.error.main}},e.size==="small"&&{marginTop:4},e.contained&&{marginLeft:14,marginRight:14})),wCe=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiFormHelperText"}),{children:i,className:o,component:s="p"}=r,a=an(r,_Ce),l=Im(),d=o_({props:r,muiFormControl:l,states:["variant","size","disabled","error","filled","focused","required"]}),h=de({},r,{component:s,contained:d.variant==="filled"||d.variant==="outlined",variant:d.variant,size:d.size,disabled:d.disabled,error:d.error,filled:d.filled,focused:d.focused,required:d.required}),p=xCe(h);return z.jsx(bCe,de({as:s,ownerState:h,className:Wt(p.root,o),ref:n},a,{children:i===" "?gG||(gG=z.jsx("span",{className:"notranslate",children:"​"})):i}))});function SCe(t){return jn("MuiFormLabel",t)}const g2=$n("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),MCe=["children","className","color","component","disabled","error","filled","focused","required"],ECe=t=>{const{classes:e,color:n,focused:r,disabled:i,error:o,filled:s,required:a}=t,l={root:["root",`color${Jt(n)}`,i&&"disabled",o&&"error",s&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",o&&"error"]};return Un(l,SCe,e)},TCe=Kt("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:t},e)=>de({},e.root,t.color==="secondary"&&e.colorSecondary,t.filled&&e.filled)})(({theme:t,ownerState:e})=>de({color:(t.vars||t).palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${g2.focused}`]:{color:(t.vars||t).palette[e.color].main},[`&.${g2.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${g2.error}`]:{color:(t.vars||t).palette.error.main}})),CCe=Kt("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})(({theme:t})=>({[`&.${g2.error}`]:{color:(t.vars||t).palette.error.main}})),ACe=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiFormLabel"}),{children:i,className:o,component:s="label"}=r,a=an(r,MCe),l=Im(),d=o_({props:r,muiFormControl:l,states:["color","required","focused","disabled","error","filled"]}),h=de({},r,{color:d.color||"primary",component:s,disabled:d.disabled,error:d.error,filled:d.filled,focused:d.focused,required:d.required}),p=ECe(h);return z.jsxs(TCe,de({as:s,ownerState:h,className:Wt(p.root,o),ref:n},a,{children:[i,d.required&&z.jsxs(CCe,{ownerState:h,"aria-hidden":!0,className:p.asterisk,children:[" ","*"]})]}))}),yG=V.createContext();function PCe(t){return jn("MuiGrid",t)}const ICe=[0,1,2,3,4,5,6,7,8,9,10],RCe=["column-reverse","column","row-reverse","row"],kCe=["nowrap","wrap-reverse","wrap"],oS=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],lM=$n("MuiGrid",["root","container","item","zeroMinWidth",...ICe.map(t=>`spacing-xs-${t}`),...RCe.map(t=>`direction-xs-${t}`),...kCe.map(t=>`wrap-xs-${t}`),...oS.map(t=>`grid-xs-${t}`),...oS.map(t=>`grid-sm-${t}`),...oS.map(t=>`grid-md-${t}`),...oS.map(t=>`grid-lg-${t}`),...oS.map(t=>`grid-xl-${t}`)]),OCe=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function bb(t){const e=parseFloat(t);return`${e}${String(t).replace(String(e),"")||"px"}`}function LCe({theme:t,ownerState:e}){let n;return t.breakpoints.keys.reduce((r,i)=>{let o={};if(e[i]&&(n=e[i]),!n)return r;if(n===!0)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(n==="auto")o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const s=x0({values:e.columns,breakpoints:t.breakpoints.values}),a=typeof s=="object"?s[i]:s;if(a==null)return r;const l=`${Math.round(n/a*1e8)/1e6}%`;let d={};if(e.container&&e.item&&e.columnSpacing!==0){const h=t.spacing(e.columnSpacing);if(h!=="0px"){const p=`calc(${l} + ${bb(h)})`;d={flexBasis:p,maxWidth:p}}}o=de({flexBasis:l,flexGrow:0,maxWidth:l},d)}return t.breakpoints.values[i]===0?Object.assign(r,o):r[t.breakpoints.up(i)]=o,r},{})}function DCe({theme:t,ownerState:e}){const n=x0({values:e.direction,breakpoints:t.breakpoints.values});return Ac({theme:t},n,r=>{const i={flexDirection:r};return r.indexOf("column")===0&&(i[`& > .${lM.item}`]={maxWidth:"none"}),i})}function kre({breakpoints:t,values:e}){let n="";Object.keys(e).forEach(i=>{n===""&&e[i]!==0&&(n=i)});const r=Object.keys(t).sort((i,o)=>t[i]-t[o]);return r.slice(0,r.indexOf(n))}function NCe({theme:t,ownerState:e}){const{container:n,rowSpacing:r}=e;let i={};if(n&&r!==0){const o=x0({values:r,breakpoints:t.breakpoints.values});let s;typeof o=="object"&&(s=kre({breakpoints:t.breakpoints.values,values:o})),i=Ac({theme:t},o,(a,l)=>{var d;const h=t.spacing(a);return h!=="0px"?{marginTop:`-${bb(h)}`,[`& > .${lM.item}`]:{paddingTop:bb(h)}}:(d=s)!=null&&d.includes(l)?{}:{marginTop:0,[`& > .${lM.item}`]:{paddingTop:0}}})}return i}function zCe({theme:t,ownerState:e}){const{container:n,columnSpacing:r}=e;let i={};if(n&&r!==0){const o=x0({values:r,breakpoints:t.breakpoints.values});let s;typeof o=="object"&&(s=kre({breakpoints:t.breakpoints.values,values:o})),i=Ac({theme:t},o,(a,l)=>{var d;const h=t.spacing(a);return h!=="0px"?{width:`calc(100% + ${bb(h)})`,marginLeft:`-${bb(h)}`,[`& > .${lM.item}`]:{paddingLeft:bb(h)}}:(d=s)!=null&&d.includes(l)?{}:{width:"100%",marginLeft:0,[`& > .${lM.item}`]:{paddingLeft:0}}})}return i}function FCe(t,e,n={}){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[n[`spacing-xs-${String(t)}`]];const r=[];return e.forEach(i=>{const o=t[i];Number(o)>0&&r.push(n[`spacing-${i}-${String(o)}`])}),r}const BCe=Kt("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{container:r,direction:i,item:o,spacing:s,wrap:a,zeroMinWidth:l,breakpoints:d}=n;let h=[];r&&(h=FCe(s,d,e));const p=[];return d.forEach(g=>{const v=n[g];v&&p.push(e[`grid-${g}-${String(v)}`])}),[e.root,r&&e.container,o&&e.item,l&&e.zeroMinWidth,...h,i!=="row"&&e[`direction-xs-${String(i)}`],a!=="wrap"&&e[`wrap-xs-${String(a)}`],...p]}})(({ownerState:t})=>de({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},t.wrap!=="wrap"&&{flexWrap:t.wrap}),DCe,NCe,zCe,LCe);function jCe(t,e){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[`spacing-xs-${String(t)}`];const n=[];return e.forEach(r=>{const i=t[r];if(Number(i)>0){const o=`spacing-${r}-${String(i)}`;n.push(o)}}),n}const $Ce=t=>{const{classes:e,container:n,direction:r,item:i,spacing:o,wrap:s,zeroMinWidth:a,breakpoints:l}=t;let d=[];n&&(d=jCe(o,l));const h=[];l.forEach(g=>{const v=t[g];v&&h.push(`grid-${g}-${String(v)}`)});const p={root:["root",n&&"container",i&&"item",a&&"zeroMinWidth",...d,r!=="row"&&`direction-xs-${String(r)}`,s!=="wrap"&&`wrap-xs-${String(s)}`,...h]};return Un(p,PCe,e)},Hg=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiGrid"}),{breakpoints:i}=Od(),o=PE(r),{className:s,columns:a,columnSpacing:l,component:d="div",container:h=!1,direction:p="row",item:g=!1,rowSpacing:v,spacing:x=0,wrap:b="wrap",zeroMinWidth:w=!1}=o,S=an(o,OCe),C=v||x,A=l||x,P=V.useContext(yG),k=h?a||12:P,F={},B=de({},S);i.keys.forEach(H=>{S[H]!=null&&(F[H]=S[H],delete B[H])});const W=de({},o,{columns:k,container:h,direction:p,item:g,rowSpacing:C,columnSpacing:A,wrap:b,zeroMinWidth:w,spacing:x},F,{breakpoints:i.keys}),J=$Ce(W);return z.jsx(yG.Provider,{value:k,children:z.jsx(BCe,de({ownerState:W,className:Wt(J.root,s),as:d,ref:n},B))})}),UCe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function XF(t){return`scale(${t}, ${t**2})`}const VCe={entering:{opacity:1,transform:XF(1)},entered:{opacity:1,transform:"none"}},lD=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),cM=V.forwardRef(function(e,n){const{addEndListener:r,appear:i=!0,children:o,easing:s,in:a,onEnter:l,onEntered:d,onEntering:h,onExit:p,onExited:g,onExiting:v,style:x,timeout:b="auto",TransitionComponent:w=Dh}=e,S=an(e,UCe),C=ny(),A=V.useRef(),P=Od(),k=V.useRef(null),F=Po(k,o.ref,n),B=me=>he=>{if(me){const we=k.current;he===void 0?me(we):me(we,he)}},W=B(h),J=B((me,he)=>{nre(me);const{duration:we,delay:ee,easing:ye}=qb({style:x,timeout:b,easing:s},{mode:"enter"});let be;b==="auto"?(be=P.transitions.getAutoHeightDuration(me.clientHeight),A.current=be):be=we,me.style.transition=[P.transitions.create("opacity",{duration:be,delay:ee}),P.transitions.create("transform",{duration:lD?be:be*.666,delay:ee,easing:ye})].join(","),l&&l(me,he)}),H=B(d),Y=B(v),le=B(me=>{const{duration:he,delay:we,easing:ee}=qb({style:x,timeout:b,easing:s},{mode:"exit"});let ye;b==="auto"?(ye=P.transitions.getAutoHeightDuration(me.clientHeight),A.current=ye):ye=he,me.style.transition=[P.transitions.create("opacity",{duration:ye,delay:we}),P.transitions.create("transform",{duration:lD?ye:ye*.666,delay:lD?we:we||ye*.333,easing:ee})].join(","),me.style.opacity=0,me.style.transform=XF(.75),p&&p(me)}),pe=B(g),re=me=>{b==="auto"&&C.start(A.current||0,me),r&&r(k.current,me)};return z.jsx(w,de({appear:i,in:a,nodeRef:k,onEnter:J,onEntered:H,onEntering:W,onExit:le,onExited:pe,onExiting:Y,addEndListener:re,timeout:b==="auto"?null:b},S,{children:(me,he)=>V.cloneElement(o,de({style:de({opacity:0,transform:XF(.75),visibility:me==="exited"&&!a?"hidden":void 0},VCe[me],x,o.props.style),ref:F},he))}))});cM.muiSupportAuto=!0;function HCe(t){return jn("MuiImageList",t)}$n("MuiImageList",["root","masonry","quilted","standard","woven"]);const Ore=V.createContext({}),WCe=["children","className","cols","component","rowHeight","gap","style","variant"],GCe=t=>{const{classes:e,variant:n}=t;return Un({root:["root",n]},HCe,e)},qCe=Kt("ul",{name:"MuiImageList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant]]}})(({ownerState:t})=>de({display:"grid",overflowY:"auto",listStyle:"none",padding:0,WebkitOverflowScrolling:"touch"},t.variant==="masonry"&&{display:"block"})),XCe=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiImageList"}),{children:i,className:o,cols:s=2,component:a="ul",rowHeight:l="auto",gap:d=4,style:h,variant:p="standard"}=r,g=an(r,WCe),v=V.useMemo(()=>({rowHeight:l,gap:d,variant:p}),[l,d,p]);V.useEffect(()=>{},[]);const x=de(p==="masonry"?{columnCount:s,columnGap:d}:{gridTemplateColumns:`repeat(${s}, 1fr)`,gap:d},h),b=de({},r,{component:a,gap:d,rowHeight:l,variant:p}),w=GCe(b);return z.jsx(qCe,de({as:a,className:Wt(w.root,w[p],o),ref:n,style:x,ownerState:b},g,{children:z.jsx(Ore.Provider,{value:v,children:i})}))});function YCe(t){return jn("MuiImageListItem",t)}const vG=$n("MuiImageListItem",["root","img","standard","woven","masonry","quilted"]),KCe=["children","className","cols","component","rows","style"],ZCe=t=>{const{classes:e,variant:n}=t;return Un({root:["root",n],img:["img"]},YCe,e)},JCe=Kt("li",{name:"MuiImageListItem",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${vG.img}`]:e.img},e.root,e[n.variant]]}})(({ownerState:t})=>de({display:"block",position:"relative"},t.variant==="standard"&&{display:"flex",flexDirection:"column"},t.variant==="woven"&&{height:"100%",alignSelf:"center","&:nth-of-type(even)":{height:"70%"}},{[`& .${vG.img}`]:de({objectFit:"cover",width:"100%",height:"100%",display:"block"},t.variant==="standard"&&{height:"auto",flexGrow:1})})),QCe=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiImageListItem"}),{children:i,className:o,cols:s=1,component:a="li",rows:l=1,style:d}=r,h=an(r,KCe),{rowHeight:p="auto",gap:g,variant:v}=V.useContext(Ore);let x="auto";v==="woven"?x=void 0:p!=="auto"&&(x=p*l+g*(l-1));const b=de({},r,{cols:s,component:a,gap:g,rowHeight:p,rows:l,variant:v}),w=ZCe(b);return z.jsx(JCe,de({as:a,className:Wt(w.root,w[v],o),ref:n,style:de({height:x,gridColumnEnd:v!=="masonry"?`span ${s}`:void 0,gridRowEnd:v!=="masonry"?`span ${l}`:void 0,marginBottom:v==="masonry"?g:void 0,breakInside:v==="masonry"?"avoid":void 0},d),ownerState:b},h,{children:V.Children.map(i,S=>V.isValidElement(S)?S.type==="img"||h2(S,["Image"])?V.cloneElement(S,{className:Wt(w.img,S.props.className)}):S:null)}))}),eAe=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],tAe=t=>{const{classes:e,disableUnderline:n}=t,i=Un({root:["root",!n&&"underline"],input:["input"]},rEe,e);return de({},e,i)},nAe=Kt(Nk,{shouldForwardProp:t=>ec(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...Lk(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{let r=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(r=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),de({position:"relative"},e.formControl&&{"label + &":{marginTop:16}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[e.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${iS.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${iS.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${iS.disabled}, .${iS.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${iS.disabled}:before`]:{borderBottomStyle:"dotted"}})}),rAe=Kt(zk,{name:"MuiInput",slot:"Input",overridesResolver:Dk})({}),S$=V.forwardRef(function(e,n){var r,i,o,s;const a=Wn({props:e,name:"MuiInput"}),{disableUnderline:l,components:d={},componentsProps:h,fullWidth:p=!1,inputComponent:g="input",multiline:v=!1,slotProps:x,slots:b={},type:w="text"}=a,S=an(a,eAe),C=tAe(a),P={root:{ownerState:{disableUnderline:l}}},k=x??h?za(x??h,P):P,F=(r=(i=b.root)!=null?i:d.Root)!=null?r:nAe,B=(o=(s=b.input)!=null?s:d.Input)!=null?o:rAe;return z.jsx(b$,de({slots:{root:F,input:B},slotProps:k,fullWidth:p,inputComponent:g,multiline:v,ref:n,type:w},S,{classes:C}))});S$.muiName="Input";function iAe(t){return jn("MuiInputAdornment",t)}const _G=$n("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var xG;const oAe=["children","className","component","disablePointerEvents","disableTypography","position","variant"],sAe=(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${Jt(n.position)}`],n.disablePointerEvents===!0&&e.disablePointerEvents,e[n.variant]]},aAe=t=>{const{classes:e,disablePointerEvents:n,hiddenLabel:r,position:i,size:o,variant:s}=t,a={root:["root",n&&"disablePointerEvents",i&&`position${Jt(i)}`,s,r&&"hiddenLabel",o&&`size${Jt(o)}`]};return Un(a,iAe,e)},lAe=Kt("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:sAe})(({theme:t,ownerState:e})=>de({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},e.variant==="filled"&&{[`&.${_G.positionStart}&:not(.${_G.hiddenLabel})`]:{marginTop:16}},e.position==="start"&&{marginRight:8},e.position==="end"&&{marginLeft:8},e.disablePointerEvents===!0&&{pointerEvents:"none"})),cAe=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiInputAdornment"}),{children:i,className:o,component:s="div",disablePointerEvents:a=!1,disableTypography:l=!1,position:d,variant:h}=r,p=an(r,oAe),g=Im()||{};let v=h;h&&g.variant,g&&!v&&(v=g.variant);const x=de({},r,{hiddenLabel:g.hiddenLabel,size:g.size,disablePointerEvents:a,position:d,variant:v}),b=aAe(x);return z.jsx(Ok.Provider,{value:null,children:z.jsx(lAe,de({as:s,ownerState:x,className:Wt(b.root,o),ref:n},p,{children:typeof i=="string"&&!l?z.jsx(yn,{color:"text.secondary",children:i}):z.jsxs(V.Fragment,{children:[d==="start"?xG||(xG=z.jsx("span",{className:"notranslate",children:"​"})):null,i]})}))})});function uAe(t){return jn("MuiInputLabel",t)}$n("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const dAe=["disableAnimation","margin","shrink","variant","className"],hAe=t=>{const{classes:e,formControl:n,size:r,shrink:i,disableAnimation:o,variant:s,required:a}=t,l={root:["root",n&&"formControl",!o&&"animated",i&&"shrink",r&&r!=="normal"&&`size${Jt(r)}`,s],asterisk:[a&&"asterisk"]},d=Un(l,uAe,e);return de({},e,d)},fAe=Kt(ACe,{shouldForwardProp:t=>ec(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${g2.asterisk}`]:e.asterisk},e.root,n.formControl&&e.formControl,n.size==="small"&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})(({theme:t,ownerState:e})=>de({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},e.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},e.size==="small"&&{transform:"translate(0, 17px) scale(1)"},e.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!e.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},e.variant==="filled"&&de({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},e.shrink&&de({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},e.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),e.variant==="outlined"&&de({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},e.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),zE=V.forwardRef(function(e,n){const r=Wn({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,shrink:o,className:s}=r,a=an(r,dAe),l=Im();let d=o;typeof d>"u"&&l&&(d=l.filled||l.focused||l.adornedStart);const h=o_({props:r,muiFormControl:l,states:["size","variant","required","focused"]}),p=de({},r,{disableAnimation:i,formControl:l,shrink:d,size:h.size,variant:h.variant,required:h.required,focused:h.focused}),g=hAe(p);return z.jsx(fAe,de({"data-shrink":d,ownerState:p,ref:n,className:Wt(g.root,s)},a,{classes:g}))});function pAe(t){return jn("MuiLinearProgress",t)}$n("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const mAe=["className","color","value","valueBuffer","variant"];let $1=t=>t,bG,wG,SG,MG,EG,TG;const YF=4,gAe=i_(bG||(bG=$1`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),yAe=i_(wG||(wG=$1`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),vAe=i_(SG||(SG=$1`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),_Ae=t=>{const{classes:e,variant:n,color:r}=t,i={root:["root",`color${Jt(r)}`,n],dashed:["dashed",`dashedColor${Jt(r)}`],bar1:["bar",`barColor${Jt(r)}`,(n==="indeterminate"||n==="query")&&"bar1Indeterminate",n==="determinate"&&"bar1Determinate",n==="buffer"&&"bar1Buffer"],bar2:["bar",n!=="buffer"&&`barColor${Jt(r)}`,n==="buffer"&&`color${Jt(r)}`,(n==="indeterminate"||n==="query")&&"bar2Indeterminate",n==="buffer"&&"bar2Buffer"]};return Un(i,pAe,e)},M$=(t,e)=>e==="inherit"?"currentColor":t.vars?t.vars.palette.LinearProgress[`${e}Bg`]:t.palette.mode==="light"?Gb(t.palette[e].main,.62):Wb(t.palette[e].main,.5),xAe=Kt("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${Jt(n.color)}`],e[n.variant]]}})(({ownerState:t,theme:e})=>de({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:M$(e,t.color)},t.color==="inherit"&&t.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},t.variant==="buffer"&&{backgroundColor:"transparent"},t.variant==="query"&&{transform:"rotate(180deg)"})),bAe=Kt("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.dashed,e[`dashedColor${Jt(n.color)}`]]}})(({ownerState:t,theme:e})=>{const n=M$(e,t.color);return de({position:"absolute",marginTop:0,height:"100%",width:"100%"},t.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},TE(MG||(MG=$1`
    animation: ${0} 3s infinite linear;
  `),vAe)),wAe=Kt("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e[`barColor${Jt(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar1Indeterminate,n.variant==="determinate"&&e.bar1Determinate,n.variant==="buffer"&&e.bar1Buffer]}})(({ownerState:t,theme:e})=>de({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:t.color==="inherit"?"currentColor":(e.vars||e).palette[t.color].main},t.variant==="determinate"&&{transition:`transform .${YF}s linear`},t.variant==="buffer"&&{zIndex:1,transition:`transform .${YF}s linear`}),({ownerState:t})=>(t.variant==="indeterminate"||t.variant==="query")&&TE(EG||(EG=$1`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),gAe)),SAe=Kt("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e[`barColor${Jt(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar2Indeterminate,n.variant==="buffer"&&e.bar2Buffer]}})(({ownerState:t,theme:e})=>de({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},t.variant!=="buffer"&&{backgroundColor:t.color==="inherit"?"currentColor":(e.vars||e).palette[t.color].main},t.color==="inherit"&&{opacity:.3},t.variant==="buffer"&&{backgroundColor:M$(e,t.color),transition:`transform .${YF}s linear`}),({ownerState:t})=>(t.variant==="indeterminate"||t.variant==="query")&&TE(TG||(TG=$1`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),yAe)),MAe=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiLinearProgress"}),{className:i,color:o="primary",value:s,valueBuffer:a,variant:l="indeterminate"}=r,d=an(r,mAe),h=de({},r,{color:o,variant:l}),p=_Ae(h),g=Od(),v={},x={bar1:{},bar2:{}};if((l==="determinate"||l==="buffer")&&s!==void 0){v["aria-valuenow"]=Math.round(s),v["aria-valuemin"]=0,v["aria-valuemax"]=100;let b=s-100;g.direction==="rtl"&&(b=-b),x.bar1.transform=`translateX(${b}%)`}if(l==="buffer"&&a!==void 0){let b=(a||0)-100;g.direction==="rtl"&&(b=-b),x.bar2.transform=`translateX(${b}%)`}return z.jsxs(xAe,de({className:Wt(p.root,i),ownerState:h,role:"progressbar"},v,{ref:n},d,{children:[l==="buffer"?z.jsx(bAe,{className:p.dashed,ownerState:h}):null,z.jsx(wAe,{className:p.bar1,ownerState:h,style:x.bar1}),l==="determinate"?null:z.jsx(SAe,{className:p.bar2,ownerState:h,style:x.bar2})]}))});function EAe(t){return jn("MuiLink",t)}const TAe=$n("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),Lre={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},CAe=t=>Lre[t]||t,AAe=({theme:t,ownerState:e})=>{const n=CAe(e.color),r=Vb(t,`palette.${n}`,!1)||e.color,i=Vb(t,`palette.${n}Channel`);return"vars"in t&&i?`rgba(${i} / 0.4)`:Zi(r,.4)},PAe=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],IAe=t=>{const{classes:e,component:n,focusVisible:r,underline:i}=t,o={root:["root",`underline${Jt(i)}`,n==="button"&&"button",r&&"focusVisible"]};return Un(o,EAe,e)},RAe=Kt(yn,{name:"MuiLink",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`underline${Jt(n.underline)}`],n.component==="button"&&e.button]}})(({theme:t,ownerState:e})=>de({},e.underline==="none"&&{textDecoration:"none"},e.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},e.underline==="always"&&de({textDecoration:"underline"},e.color!=="inherit"&&{textDecorationColor:AAe({theme:t,ownerState:e})},{"&:hover":{textDecorationColor:"inherit"}}),e.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${TAe.focusVisible}`]:{outline:"auto"}})),kAe=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiLink"}),{className:i,color:o="primary",component:s="a",onBlur:a,onFocus:l,TypographyClasses:d,underline:h="always",variant:p="inherit",sx:g}=r,v=an(r,PAe),{isFocusVisibleRef:x,onBlur:b,onFocus:w,ref:S}=Pk(),[C,A]=V.useState(!1),P=Po(n,S),k=J=>{b(J),x.current===!1&&A(!1),a&&a(J)},F=J=>{w(J),x.current===!0&&A(!0),l&&l(J)},B=de({},r,{color:o,component:s,focusVisible:C,underline:h,variant:p}),W=IAe(B);return z.jsx(RAe,de({color:o,className:Wt(W.root,i),classes:d,component:s,onBlur:k,onFocus:F,ref:P,ownerState:B,variant:p,sx:[...Object.keys(Lre).includes(o)?[]:[{color:o}],...Array.isArray(g)?g:[g]]},v))}),V0=V.createContext({});function OAe(t){return jn("MuiList",t)}$n("MuiList",["root","padding","dense","subheader"]);const LAe=["children","className","component","dense","disablePadding","subheader"],DAe=t=>{const{classes:e,disablePadding:n,dense:r,subheader:i}=t;return Un({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},OAe,e)},NAe=Kt("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})(({ownerState:t})=>de({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})),zAe=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiList"}),{children:i,className:o,component:s="ul",dense:a=!1,disablePadding:l=!1,subheader:d}=r,h=an(r,LAe),p=V.useMemo(()=>({dense:a}),[a]),g=de({},r,{component:s,dense:a,disablePadding:l}),v=DAe(g);return z.jsx(V0.Provider,{value:p,children:z.jsxs(NAe,de({as:s,className:Wt(v.root,o),ref:n,ownerState:g},h,{children:[d,i]}))})});function FAe(t){return jn("MuiListItemButton",t)}const sS=$n("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),BAe=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],jAe=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters]},$Ae=t=>{const{alignItems:e,classes:n,dense:r,disabled:i,disableGutters:o,divider:s,selected:a}=t,d=Un({root:["root",r&&"dense",!o&&"gutters",s&&"divider",i&&"disabled",e==="flex-start"&&"alignItemsFlexStart",a&&"selected"]},FAe,n);return de({},n,d)},UAe=Kt(Pm,{shouldForwardProp:t=>ec(t)||t==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:jAe})(({theme:t,ownerState:e})=>de({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${sS.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Zi(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${sS.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Zi(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${sS.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Zi(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Zi(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${sS.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${sS.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},e.alignItems==="flex-start"&&{alignItems:"flex-start"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.dense&&{paddingTop:4,paddingBottom:4})),VAe=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiListItemButton"}),{alignItems:i="center",autoFocus:o=!1,component:s="div",children:a,dense:l=!1,disableGutters:d=!1,divider:h=!1,focusVisibleClassName:p,selected:g=!1,className:v}=r,x=an(r,BAe),b=V.useContext(V0),w=V.useMemo(()=>({dense:l||b.dense||!1,alignItems:i,disableGutters:d}),[i,b.dense,l,d]),S=V.useRef(null);wu(()=>{o&&S.current&&S.current.focus()},[o]);const C=de({},r,{alignItems:i,dense:w.dense,disableGutters:d,divider:h,selected:g}),A=$Ae(C),P=Po(S,n);return z.jsx(V0.Provider,{value:w,children:z.jsx(UAe,de({ref:P,href:x.href||x.to,component:(x.href||x.to)&&s==="div"?"button":s,focusVisibleClassName:Wt(A.focusVisible,p),ownerState:C,className:Wt(A.root,v)},x,{classes:A,children:a}))})});function HAe(t){return jn("MuiListItemAvatar",t)}$n("MuiListItemAvatar",["root","alignItemsFlexStart"]);const WAe=["className"],GAe=t=>{const{alignItems:e,classes:n}=t;return Un({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},HAe,n)},qAe=Kt("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(({ownerState:t})=>de({minWidth:56,flexShrink:0},t.alignItems==="flex-start"&&{marginTop:8})),XAe=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiListItemAvatar"}),{className:i}=r,o=an(r,WAe),s=V.useContext(V0),a=de({},r,{alignItems:s.alignItems}),l=GAe(a);return z.jsx(qAe,de({className:Wt(l.root,i),ownerState:a,ref:n},o))}),CG=$n("MuiListItemIcon",["root","alignItemsFlexStart"]);function YAe(t){return jn("MuiListItemText",t)}const dI=$n("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),KAe=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],ZAe=t=>{const{classes:e,inset:n,primary:r,secondary:i,dense:o}=t;return Un({root:["root",n&&"inset",o&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},YAe,e)},JAe=Kt("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${dI.primary}`]:e.primary},{[`& .${dI.secondary}`]:e.secondary},e.root,n.inset&&e.inset,n.primary&&n.secondary&&e.multiline,n.dense&&e.dense]}})(({ownerState:t})=>de({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},t.primary&&t.secondary&&{marginTop:6,marginBottom:6},t.inset&&{paddingLeft:56})),QAe=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiListItemText"}),{children:i,className:o,disableTypography:s=!1,inset:a=!1,primary:l,primaryTypographyProps:d,secondary:h,secondaryTypographyProps:p}=r,g=an(r,KAe),{dense:v}=V.useContext(V0);let x=l??i,b=h;const w=de({},r,{disableTypography:s,inset:a,primary:!!x,secondary:!!b,dense:v}),S=ZAe(w);return x!=null&&x.type!==yn&&!s&&(x=z.jsx(yn,de({variant:v?"body2":"body1",className:S.primary,component:d!=null&&d.variant?void 0:"span",display:"block"},d,{children:x}))),b!=null&&b.type!==yn&&!s&&(b=z.jsx(yn,de({variant:"body2",className:S.secondary,color:"text.secondary",display:"block"},p,{children:b}))),z.jsxs(JAe,de({className:Wt(S.root,o),ownerState:w,ref:n},g,{children:[x,b]}))}),ePe=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function cD(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function AG(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function Dre(t,e){if(e===void 0)return!0;let n=t.innerText;return n===void 0&&(n=t.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.indexOf(e.keys.join(""))===0}function aS(t,e,n,r,i,o){let s=!1,a=i(t,e,e?n:!1);for(;a;){if(a===t.firstChild){if(s)return!1;s=!0}const l=r?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!Dre(a,o)||l)a=i(t,a,n);else return a.focus(),!0}return!1}const tPe=V.forwardRef(function(e,n){const{actions:r,autoFocus:i=!1,autoFocusItem:o=!1,children:s,className:a,disabledItemsFocusable:l=!1,disableListWrap:d=!1,onKeyDown:h,variant:p="selectedMenu"}=e,g=an(e,ePe),v=V.useRef(null),x=V.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});wu(()=>{i&&v.current.focus()},[i]),V.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(A,P)=>{const k=!v.current.style.width;if(A.clientHeight<v.current.clientHeight&&k){const F=`${jne(Ms(A))}px`;v.current.style[P.direction==="rtl"?"paddingLeft":"paddingRight"]=F,v.current.style.width=`calc(100% + ${F})`}return v.current}}),[]);const b=A=>{const P=v.current,k=A.key,F=Ms(P).activeElement;if(k==="ArrowDown")A.preventDefault(),aS(P,F,d,l,cD);else if(k==="ArrowUp")A.preventDefault(),aS(P,F,d,l,AG);else if(k==="Home")A.preventDefault(),aS(P,null,d,l,cD);else if(k==="End")A.preventDefault(),aS(P,null,d,l,AG);else if(k.length===1){const B=x.current,W=k.toLowerCase(),J=performance.now();B.keys.length>0&&(J-B.lastTime>500?(B.keys=[],B.repeating=!0,B.previousKeyMatched=!0):B.repeating&&W!==B.keys[0]&&(B.repeating=!1)),B.lastTime=J,B.keys.push(W);const H=F&&!B.repeating&&Dre(F,B);B.previousKeyMatched&&(H||aS(P,F,!1,l,cD,B))?A.preventDefault():B.previousKeyMatched=!1}h&&h(A)},w=Po(v,n);let S=-1;V.Children.forEach(s,(A,P)=>{if(!V.isValidElement(A)){S===P&&(S+=1,S>=s.length&&(S=-1));return}A.props.disabled||(p==="selectedMenu"&&A.props.selected||S===-1)&&(S=P),S===P&&(A.props.disabled||A.props.muiSkipListHighlight||A.type.muiSkipListHighlight)&&(S+=1,S>=s.length&&(S=-1))});const C=V.Children.map(s,(A,P)=>{if(P===S){const k={};return o&&(k.autoFocus=!0),A.props.tabIndex===void 0&&p==="selectedMenu"&&(k.tabIndex=0),V.cloneElement(A,k)}return A});return z.jsx(zAe,de({role:"menu",ref:w,className:a,onKeyDown:b,tabIndex:i?0:-1},g,{children:C}))});function nPe(t){return jn("MuiPopover",t)}$n("MuiPopover",["root","paper"]);const rPe=["onEntering"],iPe=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],oPe=["slotProps"];function PG(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.height/2:e==="bottom"&&(n=t.height),n}function IG(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.width/2:e==="right"&&(n=t.width),n}function RG(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function uD(t){return typeof t=="function"?t():t}const sPe=t=>{const{classes:e}=t;return Un({root:["root"],paper:["paper"]},nPe,e)},aPe=Kt(ZTe,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Nre=Kt(jo,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),lPe=V.forwardRef(function(e,n){var r,i,o;const s=Wn({props:e,name:"MuiPopover"}),{action:a,anchorEl:l,anchorOrigin:d={vertical:"top",horizontal:"left"},anchorPosition:h,anchorReference:p="anchorEl",children:g,className:v,container:x,elevation:b=8,marginThreshold:w=16,open:S,PaperProps:C={},slots:A,slotProps:P,transformOrigin:k={vertical:"top",horizontal:"left"},TransitionComponent:F=cM,transitionDuration:B="auto",TransitionProps:{onEntering:W}={},disableScrollLock:J=!1}=s,H=an(s.TransitionProps,rPe),Y=an(s,iPe),le=(r=P==null?void 0:P.paper)!=null?r:C,pe=V.useRef(),re=Po(pe,le.ref),me=de({},s,{anchorOrigin:d,anchorReference:p,elevation:b,marginThreshold:w,externalPaperSlotProps:le,transformOrigin:k,TransitionComponent:F,transitionDuration:B,TransitionProps:H}),he=sPe(me),we=V.useCallback(()=>{if(p==="anchorPosition")return h;const et=uD(l),Tt=(et&&et.nodeType===1?et:Ms(pe.current).body).getBoundingClientRect();return{top:Tt.top+PG(Tt,d.vertical),left:Tt.left+IG(Tt,d.horizontal)}},[l,d.horizontal,d.vertical,h,p]),ee=V.useCallback(et=>({vertical:PG(et,k.vertical),horizontal:IG(et,k.horizontal)}),[k.horizontal,k.vertical]),ye=V.useCallback(et=>{const Ke={width:et.offsetWidth,height:et.offsetHeight},Tt=ee(Ke);if(p==="none")return{top:null,left:null,transformOrigin:RG(Tt)};const ke=we();let Vt=ke.top-Tt.vertical,zt=ke.left-Tt.horizontal;const $t=Vt+Ke.height,Qt=zt+Ke.width,Ie=Wf(uD(l)),Me=Ie.innerHeight-w,wt=Ie.innerWidth-w;if(w!==null&&Vt<w){const St=Vt-w;Vt-=St,Tt.vertical+=St}else if(w!==null&&$t>Me){const St=$t-Me;Vt-=St,Tt.vertical+=St}if(w!==null&&zt<w){const St=zt-w;zt-=St,Tt.horizontal+=St}else if(Qt>wt){const St=Qt-wt;zt-=St,Tt.horizontal+=St}return{top:`${Math.round(Vt)}px`,left:`${Math.round(zt)}px`,transformOrigin:RG(Tt)}},[l,p,we,ee,w]),[be,Le]=V.useState(S),je=V.useCallback(()=>{const et=pe.current;if(!et)return;const Ke=ye(et);Ke.top!==null&&(et.style.top=Ke.top),Ke.left!==null&&(et.style.left=Ke.left),et.style.transformOrigin=Ke.transformOrigin,Le(!0)},[ye]);V.useEffect(()=>(J&&window.addEventListener("scroll",je),()=>window.removeEventListener("scroll",je)),[l,J,je]);const dt=(et,Ke)=>{W&&W(et,Ke),je()},Be=()=>{Le(!1)};V.useEffect(()=>{S&&je()}),V.useImperativeHandle(a,()=>S?{updatePosition:()=>{je()}}:null,[S,je]),V.useEffect(()=>{if(!S)return;const et=IE(()=>{je()}),Ke=Wf(l);return Ke.addEventListener("resize",et),()=>{et.clear(),Ke.removeEventListener("resize",et)}},[l,S,je]);let ot=B;B==="auto"&&!F.muiSupportAuto&&(ot=void 0);const at=x||(l?Ms(uD(l)).body:void 0),It=(i=A==null?void 0:A.root)!=null?i:aPe,Lt=(o=A==null?void 0:A.paper)!=null?o:Nre,lt=Pc({elementType:Lt,externalSlotProps:de({},le,{style:be?le.style:de({},le.style,{opacity:0})}),additionalProps:{elevation:b,ref:re},ownerState:me,className:Wt(he.paper,le==null?void 0:le.className)}),Je=Pc({elementType:It,externalSlotProps:(P==null?void 0:P.root)||{},externalForwardedProps:Y,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:at,open:S},ownerState:me,className:Wt(he.root,v)}),{slotProps:Qe}=Je,ge=an(Je,oPe);return z.jsx(It,de({},ge,!sI(It)&&{slotProps:Qe,disableScrollLock:J},{children:z.jsx(F,de({appear:!0,in:S,onEntering:dt,onExited:Be,timeout:ot},H,{children:z.jsx(Lt,de({},lt,{children:g}))}))}))});function cPe(t){return jn("MuiMenu",t)}$n("MuiMenu",["root","paper","list"]);const uPe=["onEntering"],dPe=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],hPe={vertical:"top",horizontal:"right"},fPe={vertical:"top",horizontal:"left"},pPe=t=>{const{classes:e}=t;return Un({root:["root"],paper:["paper"],list:["list"]},cPe,e)},mPe=Kt(lPe,{shouldForwardProp:t=>ec(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),gPe=Kt(Nre,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),yPe=Kt(tPe,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),E$=V.forwardRef(function(e,n){var r,i;const o=Wn({props:e,name:"MuiMenu"}),{autoFocus:s=!0,children:a,className:l,disableAutoFocusItem:d=!1,MenuListProps:h={},onClose:p,open:g,PaperProps:v={},PopoverClasses:x,transitionDuration:b="auto",TransitionProps:{onEntering:w}={},variant:S="selectedMenu",slots:C={},slotProps:A={}}=o,P=an(o.TransitionProps,uPe),k=an(o,dPe),F=Od(),B=F.direction==="rtl",W=de({},o,{autoFocus:s,disableAutoFocusItem:d,MenuListProps:h,onEntering:w,PaperProps:v,transitionDuration:b,TransitionProps:P,variant:S}),J=pPe(W),H=s&&!d&&g,Y=V.useRef(null),le=(ye,be)=>{Y.current&&Y.current.adjustStyleForScrollbar(ye,F),w&&w(ye,be)},pe=ye=>{ye.key==="Tab"&&(ye.preventDefault(),p&&p(ye,"tabKeyDown"))};let re=-1;V.Children.map(a,(ye,be)=>{V.isValidElement(ye)&&(ye.props.disabled||(S==="selectedMenu"&&ye.props.selected||re===-1)&&(re=be))});const me=(r=C.paper)!=null?r:gPe,he=(i=A.paper)!=null?i:v,we=Pc({elementType:C.root,externalSlotProps:A.root,ownerState:W,className:[J.root,l]}),ee=Pc({elementType:me,externalSlotProps:he,ownerState:W,className:J.paper});return z.jsx(mPe,de({onClose:p,anchorOrigin:{vertical:"bottom",horizontal:B?"right":"left"},transformOrigin:B?hPe:fPe,slots:{paper:me,root:C.root},slotProps:{root:we,paper:ee},open:g,ref:n,transitionDuration:b,TransitionProps:de({onEntering:le},P),ownerState:W},k,{classes:x,children:z.jsx(yPe,de({onKeyDown:pe,actions:Y,autoFocus:s&&(re===-1||d),autoFocusItem:H,variant:S},h,{className:Wt(J.list,h.className),children:a}))}))});function vPe(t){return jn("MuiMenuItem",t)}const lS=$n("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),_Pe=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],xPe=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.divider&&e.divider,!n.disableGutters&&e.gutters]},bPe=t=>{const{disabled:e,dense:n,divider:r,disableGutters:i,selected:o,classes:s}=t,l=Un({root:["root",n&&"dense",e&&"disabled",!i&&"gutters",r&&"divider",o&&"selected"]},vPe,s);return de({},s,l)},wPe=Kt(Pm,{shouldForwardProp:t=>ec(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:xPe})(({theme:t,ownerState:e})=>de({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${lS.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Zi(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${lS.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Zi(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${lS.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Zi(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Zi(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${lS.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${lS.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${fG.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${fG.inset}`]:{marginLeft:52},[`& .${dI.root}`]:{marginTop:0,marginBottom:0},[`& .${dI.inset}`]:{paddingLeft:36},[`& .${CG.root}`]:{minWidth:36}},!e.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},e.dense&&de({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{[`& .${CG.root} svg`]:{fontSize:"1.25rem"}}))),fu=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:o="li",dense:s=!1,divider:a=!1,disableGutters:l=!1,focusVisibleClassName:d,role:h="menuitem",tabIndex:p,className:g}=r,v=an(r,_Pe),x=V.useContext(V0),b=V.useMemo(()=>({dense:s||x.dense||!1,disableGutters:l}),[x.dense,s,l]),w=V.useRef(null);wu(()=>{i&&w.current&&w.current.focus()},[i]);const S=de({},r,{dense:b.dense,divider:a,disableGutters:l}),C=bPe(r),A=Po(w,n);let P;return r.disabled||(P=p!==void 0?p:-1),z.jsx(V0.Provider,{value:b,children:z.jsx(wPe,de({ref:A,role:h,tabIndex:P,component:o,focusVisibleClassName:Wt(C.focusVisible,d),className:Wt(C.root,g)},v,{ownerState:S,classes:C}))})});function SPe(t){return jn("MuiNativeSelect",t)}const T$=$n("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),MPe=["className","disabled","error","IconComponent","inputRef","variant"],EPe=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:o,error:s}=t,a={select:["select",n,r&&"disabled",i&&"multiple",s&&"error"],icon:["icon",`icon${Jt(n)}`,o&&"iconOpen",r&&"disabled"]};return Un(a,SPe,e)},zre=({ownerState:t,theme:e})=>de({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":de({},e.vars?{backgroundColor:`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:e.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${T$.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},t.variant==="filled"&&{"&&&":{paddingRight:32}},t.variant==="outlined"&&{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}),TPe=Kt("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:ec,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{[`&.${T$.multiple}`]:e.multiple}]}})(zre),Fre=({ownerState:t,theme:e})=>de({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${T$.disabled}`]:{color:(e.vars||e).palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},t.variant==="filled"&&{right:7},t.variant==="outlined"&&{right:7}),CPe=Kt("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${Jt(n.variant)}`],n.open&&e.iconOpen]}})(Fre),APe=V.forwardRef(function(e,n){const{className:r,disabled:i,error:o,IconComponent:s,inputRef:a,variant:l="standard"}=e,d=an(e,MPe),h=de({},e,{disabled:i,variant:l,error:o}),p=EPe(h);return z.jsxs(V.Fragment,{children:[z.jsx(TPe,de({ownerState:h,className:Wt(p.select,r),disabled:i,ref:a||n},d)),e.multiple?null:z.jsx(CPe,{as:s,ownerState:h,className:p.icon})]})});var kG;const PPe=["children","classes","className","label","notched"],IPe=Kt("fieldset",{shouldForwardProp:ec})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),RPe=Kt("legend",{shouldForwardProp:ec})(({ownerState:t,theme:e})=>de({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},t.withLabel&&de({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})})));function kPe(t){const{className:e,label:n,notched:r}=t,i=an(t,PPe),o=n!=null&&n!=="",s=de({},t,{notched:r,withLabel:o});return z.jsx(IPe,de({"aria-hidden":!0,className:e,ownerState:s},i,{children:z.jsx(RPe,{ownerState:s,children:o?z.jsx("span",{children:n}):kG||(kG=z.jsx("span",{className:"notranslate",children:"​"}))})}))}const OPe=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],LPe=t=>{const{classes:e}=t,r=Un({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},iEe,e);return de({},e,r)},DPe=Kt(Nk,{shouldForwardProp:t=>ec(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Lk})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return de({position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${Eg.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${Eg.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${Eg.focused} .${Eg.notchedOutline}`]:{borderColor:(t.vars||t).palette[e.color].main,borderWidth:2},[`&.${Eg.error} .${Eg.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${Eg.disabled} .${Eg.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}},e.startAdornment&&{paddingLeft:14},e.endAdornment&&{paddingRight:14},e.multiline&&de({padding:"16.5px 14px"},e.size==="small"&&{padding:"8.5px 14px"}))}),NPe=Kt(kPe,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(t,e)=>e.notchedOutline})(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),zPe=Kt(zk,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Dk})(({theme:t,ownerState:e})=>de({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{padding:"8.5px 14px"},e.multiline&&{padding:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0})),Bk=V.forwardRef(function(e,n){var r,i,o,s,a;const l=Wn({props:e,name:"MuiOutlinedInput"}),{components:d={},fullWidth:h=!1,inputComponent:p="input",label:g,multiline:v=!1,notched:x,slots:b={},type:w="text"}=l,S=an(l,OPe),C=LPe(l),A=Im(),P=o_({props:l,muiFormControl:A,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),k=de({},l,{color:P.color||"primary",disabled:P.disabled,error:P.error,focused:P.focused,formControl:A,fullWidth:h,hiddenLabel:P.hiddenLabel,multiline:v,size:P.size,type:w}),F=(r=(i=b.root)!=null?i:d.Root)!=null?r:DPe,B=(o=(s=b.input)!=null?s:d.Input)!=null?o:zPe;return z.jsx(b$,de({slots:{root:F,input:B},renderSuffix:W=>z.jsx(NPe,{ownerState:k,className:C.notchedOutline,label:g!=null&&g!==""&&P.required?a||(a=z.jsxs(V.Fragment,{children:[g," ","*"]})):g,notched:typeof x<"u"?x:!!(W.startAdornment||W.filled||W.focused)}),fullWidth:h,inputComponent:p,multiline:v,ref:n,type:w},S,{classes:de({},C,{notchedOutline:null})}))});Bk.muiName="Input";function FPe(t){return jn("MuiSelect",t)}const cS=$n("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var OG;const BPe=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],jPe=Kt("div",{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`&.${cS.select}`]:e.select},{[`&.${cS.select}`]:e[n.variant]},{[`&.${cS.error}`]:e.error},{[`&.${cS.multiple}`]:e.multiple}]}})(zre,{[`&.${cS.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),$Pe=Kt("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${Jt(n.variant)}`],n.open&&e.iconOpen]}})(Fre),UPe=Kt("input",{shouldForwardProp:t=>bwe(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(t,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function LG(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}function VPe(t){return t==null||typeof t=="string"&&!t.trim()}const HPe=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:o,error:s}=t,a={select:["select",n,r&&"disabled",i&&"multiple",s&&"error"],icon:["icon",`icon${Jt(n)}`,o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return Un(a,FPe,e)},WPe=V.forwardRef(function(e,n){var r;const{"aria-describedby":i,"aria-label":o,autoFocus:s,autoWidth:a,children:l,className:d,defaultOpen:h,defaultValue:p,disabled:g,displayEmpty:v,error:x=!1,IconComponent:b,inputRef:w,labelId:S,MenuProps:C={},multiple:A,name:P,onBlur:k,onChange:F,onClose:B,onFocus:W,onOpen:J,open:H,readOnly:Y,renderValue:le,SelectDisplayProps:pe={},tabIndex:re,value:me,variant:he="standard"}=e,we=an(e,BPe),[ee,ye]=Hb({controlled:me,default:p,name:"Select"}),[be,Le]=Hb({controlled:H,default:h,name:"Select"}),je=V.useRef(null),dt=V.useRef(null),[Be,ot]=V.useState(null),{current:at}=V.useRef(H!=null),[It,Lt]=V.useState(),lt=Po(n,w),Je=V.useCallback(Et=>{dt.current=Et,Et&&ot(Et)},[]),Qe=Be==null?void 0:Be.parentNode;V.useImperativeHandle(lt,()=>({focus:()=>{dt.current.focus()},node:je.current,value:ee}),[ee]),V.useEffect(()=>{h&&be&&Be&&!at&&(Lt(a?null:Qe.clientWidth),dt.current.focus())},[Be,a]),V.useEffect(()=>{s&&dt.current.focus()},[s]),V.useEffect(()=>{if(!S)return;const Et=Ms(dt.current).getElementById(S);if(Et){const qt=()=>{getSelection().isCollapsed&&dt.current.focus()};return Et.addEventListener("click",qt),()=>{Et.removeEventListener("click",qt)}}},[S]);const ge=(Et,qt)=>{Et?J&&J(qt):B&&B(qt),at||(Lt(a?null:Qe.clientWidth),Le(Et))},et=Et=>{Et.button===0&&(Et.preventDefault(),dt.current.focus(),ge(!0,Et))},Ke=Et=>{ge(!1,Et)},Tt=V.Children.toArray(l),ke=Et=>{const qt=Tt.find(ht=>ht.props.value===Et.target.value);qt!==void 0&&(ye(qt.props.value),F&&F(Et,qt))},Vt=Et=>qt=>{let ht;if(qt.currentTarget.hasAttribute("tabindex")){if(A){ht=Array.isArray(ee)?ee.slice():[];const Ne=ee.indexOf(Et.props.value);Ne===-1?ht.push(Et.props.value):ht.splice(Ne,1)}else ht=Et.props.value;if(Et.props.onClick&&Et.props.onClick(qt),ee!==ht&&(ye(ht),F)){const Ne=qt.nativeEvent||qt,pt=new Ne.constructor(Ne.type,Ne);Object.defineProperty(pt,"target",{writable:!0,value:{value:ht,name:P}}),F(pt,Et)}A||ge(!1,qt)}},zt=Et=>{Y||[" ","ArrowUp","ArrowDown","Enter"].indexOf(Et.key)!==-1&&(Et.preventDefault(),ge(!0,Et))},$t=Be!==null&&be,Qt=Et=>{!$t&&k&&(Object.defineProperty(Et,"target",{writable:!0,value:{value:ee,name:P}}),k(Et))};delete we["aria-invalid"];let Ie,Me;const wt=[];let St=!1;(uI({value:ee})||v)&&(le?Ie=le(ee):St=!0);const Bt=Tt.map(Et=>{if(!V.isValidElement(Et))return null;let qt;if(A){if(!Array.isArray(ee))throw new Error(B0(2));qt=ee.some(ht=>LG(ht,Et.props.value)),qt&&St&&wt.push(Et.props.children)}else qt=LG(ee,Et.props.value),qt&&St&&(Me=Et.props.children);return V.cloneElement(Et,{"aria-selected":qt?"true":"false",onClick:Vt(Et),onKeyUp:ht=>{ht.key===" "&&ht.preventDefault(),Et.props.onKeyUp&&Et.props.onKeyUp(ht)},role:"option",selected:qt,value:void 0,"data-value":Et.props.value})});St&&(A?wt.length===0?Ie=null:Ie=wt.reduce((Et,qt,ht)=>(Et.push(qt),ht<wt.length-1&&Et.push(", "),Et),[]):Ie=Me);let jt=It;!a&&at&&Be&&(jt=Qe.clientWidth);let Rn;typeof re<"u"?Rn=re:Rn=g?null:0;const ft=pe.id||(P?`mui-component-select-${P}`:void 0),Rt=de({},e,{variant:he,value:ee,open:$t,error:x}),Xt=HPe(Rt),Tn=de({},C.PaperProps,(r=C.slotProps)==null?void 0:r.paper),en=Ck();return z.jsxs(V.Fragment,{children:[z.jsx(jPe,de({ref:Je,tabIndex:Rn,role:"combobox","aria-controls":en,"aria-disabled":g?"true":void 0,"aria-expanded":$t?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[S,ft].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:zt,onMouseDown:g||Y?null:et,onBlur:Qt,onFocus:W},pe,{ownerState:Rt,className:Wt(pe.className,Xt.select,d),id:ft,children:VPe(Ie)?OG||(OG=z.jsx("span",{className:"notranslate",children:"​"})):Ie})),z.jsx(UPe,de({"aria-invalid":x,value:Array.isArray(ee)?ee.join(","):ee,name:P,ref:je,"aria-hidden":!0,onChange:ke,tabIndex:-1,disabled:g,className:Xt.nativeInput,autoFocus:s,ownerState:Rt},we)),z.jsx($Pe,{as:b,className:Xt.icon,ownerState:Rt}),z.jsx(E$,de({id:`menu-${P||""}`,anchorEl:Qe,open:$t,onClose:Ke,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},C,{MenuListProps:de({"aria-labelledby":S,role:"listbox","aria-multiselectable":A?"true":void 0,disableListWrap:!0,id:en},C.MenuListProps),slotProps:de({},C.slotProps,{paper:de({},Tn,{style:de({minWidth:jt},Tn!=null?Tn.style:null)})}),children:Bt}))]})}),GPe=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],qPe=["root"],XPe=t=>{const{classes:e}=t;return e},C$={name:"MuiSelect",overridesResolver:(t,e)=>e.root,shouldForwardProp:t=>ec(t)&&t!=="variant",slot:"Root"},YPe=Kt(S$,C$)(""),KPe=Kt(Bk,C$)(""),ZPe=Kt(w$,C$)(""),U1=V.forwardRef(function(e,n){const r=Wn({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:o,classes:s={},className:a,defaultOpen:l=!1,displayEmpty:d=!1,IconComponent:h=sEe,id:p,input:g,inputProps:v,label:x,labelId:b,MenuProps:w,multiple:S=!1,native:C=!1,onClose:A,onOpen:P,open:k,renderValue:F,SelectDisplayProps:B,variant:W="outlined"}=r,J=an(r,GPe),H=C?APe:WPe,Y=Im(),le=o_({props:r,muiFormControl:Y,states:["variant","error"]}),pe=le.variant||W,re=de({},r,{variant:pe,classes:s}),me=XPe(re),he=an(me,qPe),we=g||{standard:z.jsx(YPe,{ownerState:re}),outlined:z.jsx(KPe,{label:x,ownerState:re}),filled:z.jsx(ZPe,{ownerState:re})}[pe],ee=Po(n,we.ref);return z.jsx(V.Fragment,{children:V.cloneElement(we,de({inputComponent:H,inputProps:de({children:o,error:le.error,IconComponent:h,variant:pe,type:void 0,multiple:S},C?{id:p}:{autoWidth:i,defaultOpen:l,displayEmpty:d,labelId:b,MenuProps:w,onClose:A,onOpen:P,open:k,renderValue:F,SelectDisplayProps:de({id:p},B)},v,{classes:v?za(he,v.classes):he},g?g.props.inputProps:{})},(S&&C||d)&&pe==="outlined"?{notched:!0}:{},{ref:ee,className:Wt(we.props.className,a,me.root)},!g&&{variant:pe},J))})});U1.muiName="Select";function JPe(t){return jn("MuiSnackbarContent",t)}$n("MuiSnackbarContent",["root","message","action"]);const QPe=["action","className","message","role"],eIe=t=>{const{classes:e}=t;return Un({root:["root"],action:["action"],message:["message"]},JPe,e)},tIe=Kt(jo,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>{const e=t.palette.mode==="light"?.8:.98,n=w1e(t.palette.background.default,e);return de({},t.typography.body2,{color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(n),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),nIe=Kt("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(t,e)=>e.message})({padding:"8px 0"}),rIe=Kt("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(t,e)=>e.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),iIe=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiSnackbarContent"}),{action:i,className:o,message:s,role:a="alert"}=r,l=an(r,QPe),d=r,h=eIe(d);return z.jsxs(tIe,de({role:a,square:!0,elevation:6,className:Wt(h.root,o),ownerState:d,ref:n},l,{children:[z.jsx(nIe,{className:h.message,ownerState:d,children:s}),i?z.jsx(rIe,{className:h.action,ownerState:d,children:i}):null]}))});function oIe(t){return jn("MuiSnackbar",t)}$n("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const sIe=["onEnter","onExited"],aIe=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],lIe=t=>{const{classes:e,anchorOrigin:n}=t,r={root:["root",`anchorOrigin${Jt(n.vertical)}${Jt(n.horizontal)}`]};return Un(r,oIe,e)},DG=Kt("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`anchorOrigin${Jt(n.anchorOrigin.vertical)}${Jt(n.anchorOrigin.horizontal)}`]]}})(({theme:t,ownerState:e})=>{const n={left:"50%",right:"auto",transform:"translateX(-50%)"};return de({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},e.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},e.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},e.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[t.breakpoints.up("sm")]:de({},e.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},e.anchorOrigin.horizontal==="center"&&n,e.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},e.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),cIe=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiSnackbar"}),i=Od(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{action:s,anchorOrigin:{vertical:a,horizontal:l}={vertical:"bottom",horizontal:"left"},autoHideDuration:d=null,children:h,className:p,ClickAwayListenerProps:g,ContentProps:v,disableWindowBlurListener:x=!1,message:b,open:w,TransitionComponent:S=cM,transitionDuration:C=o,TransitionProps:{onEnter:A,onExited:P}={}}=r,k=an(r.TransitionProps,sIe),F=an(r,aIe),B=de({},r,{anchorOrigin:{vertical:a,horizontal:l},autoHideDuration:d,disableWindowBlurListener:x,TransitionComponent:S,transitionDuration:C}),W=lIe(B),{getRootProps:J,onClickAway:H}=BMe(de({},B)),[Y,le]=V.useState(!0),pe=Pc({elementType:DG,getSlotProps:J,externalForwardedProps:F,ownerState:B,additionalProps:{ref:n},className:[W.root,p]}),re=he=>{le(!0),P&&P(he)},me=(he,we)=>{le(!1),A&&A(he,we)};return!w&&Y?null:z.jsx(s2e,de({onClickAway:H},g,{children:z.jsx(DG,de({},pe,{children:z.jsx(S,de({appear:!0,in:w,timeout:C,direction:a==="top"?"down":"up",onEnter:me,onExited:re},k,{children:h||z.jsx(iIe,de({message:b,action:s},v))}))}))}))});function uIe(t){return jn("MuiTooltip",t)}const ry=$n("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),dIe=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function hIe(t){return Math.round(t*1e5)/1e5}const fIe=t=>{const{classes:e,disableInteractive:n,arrow:r,touch:i,placement:o}=t,s={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch",`tooltipPlacement${Jt(o.split("-")[0])}`],arrow:["arrow"]};return Un(s,uIe,e)},pIe=Kt(wre,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.popper,!n.disableInteractive&&e.popperInteractive,n.arrow&&e.popperArrow,!n.open&&e.popperClose]}})(({theme:t,ownerState:e,open:n})=>de({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none"},!e.disableInteractive&&{pointerEvents:"auto"},!n&&{pointerEvents:"none"},e.arrow&&{[`&[data-popper-placement*="bottom"] .${ry.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${ry.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${ry.arrow}`]:de({},e.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${ry.arrow}`]:de({},e.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),mIe=Kt("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.tooltip,n.touch&&e.touch,n.arrow&&e.tooltipArrow,e[`tooltipPlacement${Jt(n.placement.split("-")[0])}`]]}})(({theme:t,ownerState:e})=>de({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:Zi(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium},e.arrow&&{position:"relative",margin:0},e.touch&&{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${hIe(16/14)}em`,fontWeight:t.typography.fontWeightRegular},{[`.${ry.popper}[data-popper-placement*="left"] &`]:de({transformOrigin:"right center"},e.isRtl?de({marginLeft:"14px"},e.touch&&{marginLeft:"24px"}):de({marginRight:"14px"},e.touch&&{marginRight:"24px"})),[`.${ry.popper}[data-popper-placement*="right"] &`]:de({transformOrigin:"left center"},e.isRtl?de({marginRight:"14px"},e.touch&&{marginRight:"24px"}):de({marginLeft:"14px"},e.touch&&{marginLeft:"24px"})),[`.${ry.popper}[data-popper-placement*="top"] &`]:de({transformOrigin:"center bottom",marginBottom:"14px"},e.touch&&{marginBottom:"24px"}),[`.${ry.popper}[data-popper-placement*="bottom"] &`]:de({transformOrigin:"center top",marginTop:"14px"},e.touch&&{marginTop:"24px"})})),gIe=Kt("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(t,e)=>e.arrow})(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:Zi(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let mC=!1;const NG=new RE;let uS={x:0,y:0};function gC(t,e){return n=>{e&&e(n),t(n)}}const Yg=V.forwardRef(function(e,n){var r,i,o,s,a,l,d,h,p,g,v,x,b,w,S,C,A,P,k;const F=Wn({props:e,name:"MuiTooltip"}),{arrow:B=!1,children:W,components:J={},componentsProps:H={},describeChild:Y=!1,disableFocusListener:le=!1,disableHoverListener:pe=!1,disableInteractive:re=!1,disableTouchListener:me=!1,enterDelay:he=100,enterNextDelay:we=0,enterTouchDelay:ee=700,followCursor:ye=!1,id:be,leaveDelay:Le=0,leaveTouchDelay:je=1500,onClose:dt,onOpen:Be,open:ot,placement:at="bottom",PopperComponent:It,PopperProps:Lt={},slotProps:lt={},slots:Je={},title:Qe,TransitionComponent:ge=cM,TransitionProps:et}=F,Ke=an(F,dIe),Tt=V.isValidElement(W)?W:z.jsx("span",{children:W}),ke=Od(),Vt=ke.direction==="rtl",[zt,$t]=V.useState(),[Qt,Ie]=V.useState(null),Me=V.useRef(!1),wt=re||ye,St=ny(),Bt=ny(),jt=ny(),Rn=ny(),[ft,Rt]=Hb({controlled:ot,default:!1,name:"Tooltip",state:"open"});let Xt=ft;const Tn=Ck(be),en=V.useRef(),Et=ql(()=>{en.current!==void 0&&(document.body.style.WebkitUserSelect=en.current,en.current=void 0),Rn.clear()});V.useEffect(()=>Et,[Et]);const qt=ut=>{NG.clear(),mC=!0,Rt(!0),Be&&!Xt&&Be(ut)},ht=ql(ut=>{NG.start(800+Le,()=>{mC=!1}),Rt(!1),dt&&Xt&&dt(ut),St.start(ke.transitions.duration.shortest,()=>{Me.current=!1})}),Ne=ut=>{Me.current&&ut.type!=="touchstart"||(zt&&zt.removeAttribute("title"),Bt.clear(),jt.clear(),he||mC&&we?Bt.start(mC?we:he,()=>{qt(ut)}):qt(ut))},pt=ut=>{Bt.clear(),jt.start(Le,()=>{ht(ut)})},{isFocusVisibleRef:Te,onBlur:xt,onFocus:tn,ref:Xe}=Pk(),[,Yt]=V.useState(!1),ve=ut=>{xt(ut),Te.current===!1&&(Yt(!1),pt(ut))},ie=ut=>{zt||$t(ut.currentTarget),tn(ut),Te.current===!0&&(Yt(!0),Ne(ut))},se=ut=>{Me.current=!0;const vt=Tt.props;vt.onTouchStart&&vt.onTouchStart(ut)},Se=ut=>{se(ut),jt.clear(),St.clear(),Et(),en.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Rn.start(ee,()=>{document.body.style.WebkitUserSelect=en.current,Ne(ut)})},De=ut=>{Tt.props.onTouchEnd&&Tt.props.onTouchEnd(ut),Et(),jt.start(je,()=>{ht(ut)})};V.useEffect(()=>{if(!Xt)return;function ut(vt){(vt.key==="Escape"||vt.key==="Esc")&&ht(vt)}return document.addEventListener("keydown",ut),()=>{document.removeEventListener("keydown",ut)}},[ht,Xt]);const We=Po(Tt.ref,Xe,$t,n);!Qe&&Qe!==0&&(Xt=!1);const Ze=V.useRef(),tt=ut=>{const vt=Tt.props;vt.onMouseMove&&vt.onMouseMove(ut),uS={x:ut.clientX,y:ut.clientY},Ze.current&&Ze.current.update()},Ve={},At=typeof Qe=="string";Y?(Ve.title=!Xt&&At&&!pe?Qe:null,Ve["aria-describedby"]=Xt?Tn:null):(Ve["aria-label"]=At?Qe:null,Ve["aria-labelledby"]=Xt&&!At?Tn:null);const Dt=de({},Ve,Ke,Tt.props,{className:Wt(Ke.className,Tt.props.className),onTouchStart:se,ref:We},ye?{onMouseMove:tt}:{}),Ct={};me||(Dt.onTouchStart=Se,Dt.onTouchEnd=De),pe||(Dt.onMouseOver=gC(Ne,Dt.onMouseOver),Dt.onMouseLeave=gC(pt,Dt.onMouseLeave),wt||(Ct.onMouseOver=Ne,Ct.onMouseLeave=pt)),le||(Dt.onFocus=gC(ie,Dt.onFocus),Dt.onBlur=gC(ve,Dt.onBlur),wt||(Ct.onFocus=ie,Ct.onBlur=ve));const ln=V.useMemo(()=>{var ut;let vt=[{name:"arrow",enabled:!!Qt,options:{element:Qt,padding:4}}];return(ut=Lt.popperOptions)!=null&&ut.modifiers&&(vt=vt.concat(Lt.popperOptions.modifiers)),de({},Lt.popperOptions,{modifiers:vt})},[Qt,Lt]),Sn=de({},F,{isRtl:Vt,arrow:B,disableInteractive:wt,placement:at,PopperComponentProp:It,touch:Me.current}),zn=fIe(Sn),rr=(r=(i=Je.popper)!=null?i:J.Popper)!=null?r:pIe,Cr=(o=(s=(a=Je.transition)!=null?a:J.Transition)!=null?s:ge)!=null?o:cM,ir=(l=(d=Je.tooltip)!=null?d:J.Tooltip)!=null?l:mIe,Yr=(h=(p=Je.arrow)!=null?p:J.Arrow)!=null?h:gIe,Ti=Kx(rr,de({},Lt,(g=lt.popper)!=null?g:H.popper,{className:Wt(zn.popper,Lt==null?void 0:Lt.className,(v=(x=lt.popper)!=null?x:H.popper)==null?void 0:v.className)}),Sn),Re=Kx(Cr,de({},et,(b=lt.transition)!=null?b:H.transition),Sn),st=Kx(ir,de({},(w=lt.tooltip)!=null?w:H.tooltip,{className:Wt(zn.tooltip,(S=(C=lt.tooltip)!=null?C:H.tooltip)==null?void 0:S.className)}),Sn),Mt=Kx(Yr,de({},(A=lt.arrow)!=null?A:H.arrow,{className:Wt(zn.arrow,(P=(k=lt.arrow)!=null?k:H.arrow)==null?void 0:P.className)}),Sn);return z.jsxs(V.Fragment,{children:[V.cloneElement(Tt,Dt),z.jsx(rr,de({as:It??wre,placement:at,anchorEl:ye?{getBoundingClientRect:()=>({top:uS.y,left:uS.x,right:uS.x,bottom:uS.y,width:0,height:0})}:zt,popperRef:Ze,open:zt?Xt:!1,id:Tn,transition:!0},Ct,Ti,{popperOptions:ln,children:({TransitionProps:ut})=>z.jsx(Cr,de({timeout:ke.transitions.duration.shorter},ut,Re,{children:z.jsxs(ir,de({},st,{children:[Qe,B?z.jsx(Yr,de({},Mt,{ref:Ie})):null]}))}))}))]})});function yIe(t){return jn("MuiSwitch",t)}const $l=$n("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),vIe=["className","color","edge","size","sx"],_Ie=t=>{const{classes:e,edge:n,size:r,color:i,checked:o,disabled:s}=t,a={root:["root",n&&`edge${Jt(n)}`,`size${Jt(r)}`],switchBase:["switchBase",`color${Jt(i)}`,o&&"checked",s&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=Un(a,yIe,e);return de({},e,l)},xIe=Kt("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.edge&&e[`edge${Jt(n.edge)}`],e[`size${Jt(n.size)}`]]}})(({ownerState:t})=>de({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},t.edge==="start"&&{marginLeft:-8},t.edge==="end"&&{marginRight:-8},t.size==="small"&&{width:40,height:24,padding:7,[`& .${$l.thumb}`]:{width:16,height:16},[`& .${$l.switchBase}`]:{padding:4,[`&.${$l.checked}`]:{transform:"translateX(16px)"}}})),bIe=Kt(Rre,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.switchBase,{[`& .${$l.input}`]:e.input},n.color!=="default"&&e[`color${Jt(n.color)}`]]}})(({theme:t})=>({position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:`${t.palette.mode==="light"?t.palette.common.white:t.palette.grey[300]}`,transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),[`&.${$l.checked}`]:{transform:"translateX(20px)"},[`&.${$l.disabled}`]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:`${t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[600]}`},[`&.${$l.checked} + .${$l.track}`]:{opacity:.5},[`&.${$l.disabled} + .${$l.track}`]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:`${t.palette.mode==="light"?.12:.2}`},[`& .${$l.input}`]:{left:"-100%",width:"300%"}}),({theme:t,ownerState:e})=>de({"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Zi(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${$l.checked}`]:{color:(t.vars||t).palette[e.color].main,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Zi(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${$l.disabled}`]:{color:t.vars?t.vars.palette.Switch[`${e.color}DisabledColor`]:`${t.palette.mode==="light"?Gb(t.palette[e.color].main,.62):Wb(t.palette[e.color].main,.55)}`}},[`&.${$l.checked} + .${$l.track}`]:{backgroundColor:(t.vars||t).palette[e.color].main}})),wIe=Kt("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(t,e)=>e.track})(({theme:t})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:`${t.palette.mode==="light"?t.palette.common.black:t.palette.common.white}`,opacity:t.vars?t.vars.opacity.switchTrack:`${t.palette.mode==="light"?.38:.3}`})),SIe=Kt("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(t,e)=>e.thumb})(({theme:t})=>({boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),Bre=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiSwitch"}),{className:i,color:o="primary",edge:s=!1,size:a="medium",sx:l}=r,d=an(r,vIe),h=de({},r,{color:o,edge:s,size:a}),p=_Ie(h),g=z.jsx(SIe,{className:p.thumb,ownerState:h});return z.jsxs(xIe,{className:Wt(p.root,i),sx:l,ownerState:h,children:[z.jsx(bIe,de({type:"checkbox",icon:g,checkedIcon:g,ref:n,ownerState:h},d,{classes:de({},p,{root:p.switchBase})})),z.jsx(wIe,{className:p.track,ownerState:h})]})});function MIe(t){return jn("MuiTab",t)}const Mv=$n("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),EIe=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],TIe=t=>{const{classes:e,textColor:n,fullWidth:r,wrapped:i,icon:o,label:s,selected:a,disabled:l}=t,d={root:["root",o&&s&&"labelIcon",`textColor${Jt(n)}`,r&&"fullWidth",i&&"wrapped",a&&"selected",l&&"disabled"],iconWrapper:["iconWrapper"]};return Un(d,MIe,e)},CIe=Kt(Pm,{name:"MuiTab",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.label&&n.icon&&e.labelIcon,e[`textColor${Jt(n.textColor)}`],n.fullWidth&&e.fullWidth,n.wrapped&&e.wrapped]}})(({theme:t,ownerState:e})=>de({},t.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},e.label&&{flexDirection:e.iconPosition==="top"||e.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},e.icon&&e.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${Mv.iconWrapper}`]:de({},e.iconPosition==="top"&&{marginBottom:6},e.iconPosition==="bottom"&&{marginTop:6},e.iconPosition==="start"&&{marginRight:t.spacing(1)},e.iconPosition==="end"&&{marginLeft:t.spacing(1)})},e.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${Mv.selected}`]:{opacity:1},[`&.${Mv.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.textColor==="primary"&&{color:(t.vars||t).palette.text.secondary,[`&.${Mv.selected}`]:{color:(t.vars||t).palette.primary.main},[`&.${Mv.disabled}`]:{color:(t.vars||t).palette.text.disabled}},e.textColor==="secondary"&&{color:(t.vars||t).palette.text.secondary,[`&.${Mv.selected}`]:{color:(t.vars||t).palette.secondary.main},[`&.${Mv.disabled}`]:{color:(t.vars||t).palette.text.disabled}},e.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},e.wrapped&&{fontSize:t.typography.pxToRem(12)})),o0=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiTab"}),{className:i,disabled:o=!1,disableFocusRipple:s=!1,fullWidth:a,icon:l,iconPosition:d="top",indicator:h,label:p,onChange:g,onClick:v,onFocus:x,selected:b,selectionFollowsFocus:w,textColor:S="inherit",value:C,wrapped:A=!1}=r,P=an(r,EIe),k=de({},r,{disabled:o,disableFocusRipple:s,selected:b,icon:!!l,iconPosition:d,label:!!p,fullWidth:a,textColor:S,wrapped:A}),F=TIe(k),B=l&&p&&V.isValidElement(l)?V.cloneElement(l,{className:Wt(F.iconWrapper,l.props.className)}):l,W=H=>{!b&&g&&g(H,C),v&&v(H)},J=H=>{w&&!b&&g&&g(H,C),x&&x(H)};return z.jsxs(CIe,de({focusRipple:!s,className:Wt(F.root,i),ref:n,role:"tab","aria-selected":b,disabled:o,onClick:W,onFocus:J,ownerState:k,tabIndex:b?0:-1},P,{children:[d==="top"||d==="start"?z.jsxs(V.Fragment,{children:[B,p]}):z.jsxs(V.Fragment,{children:[p,B]}),h]}))}),jre=V.createContext();function AIe(t){return jn("MuiTable",t)}$n("MuiTable",["root","stickyHeader"]);const PIe=["className","component","padding","size","stickyHeader"],IIe=t=>{const{classes:e,stickyHeader:n}=t;return Un({root:["root",n&&"stickyHeader"]},AIe,e)},RIe=Kt("table",{name:"MuiTable",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.stickyHeader&&e.stickyHeader]}})(({theme:t,ownerState:e})=>de({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":de({},t.typography.body2,{padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},e.stickyHeader&&{borderCollapse:"separate"})),zG="table",jk=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiTable"}),{className:i,component:o=zG,padding:s="normal",size:a="medium",stickyHeader:l=!1}=r,d=an(r,PIe),h=de({},r,{component:o,padding:s,size:a,stickyHeader:l}),p=IIe(h),g=V.useMemo(()=>({padding:s,size:a,stickyHeader:l}),[s,a,l]);return z.jsx(jre.Provider,{value:g,children:z.jsx(RIe,de({as:o,role:o===zG?null:"table",ref:n,className:Wt(p.root,i),ownerState:h},d))})}),$k=V.createContext();function kIe(t){return jn("MuiTableBody",t)}$n("MuiTableBody",["root"]);const OIe=["className","component"],LIe=t=>{const{classes:e}=t;return Un({root:["root"]},kIe,e)},DIe=Kt("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"table-row-group"}),NIe={variant:"body"},FG="tbody",Uk=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiTableBody"}),{className:i,component:o=FG}=r,s=an(r,OIe),a=de({},r,{component:o}),l=LIe(a);return z.jsx($k.Provider,{value:NIe,children:z.jsx(DIe,de({className:Wt(l.root,i),as:o,ref:n,role:o===FG?null:"rowgroup",ownerState:a},s))})});function zIe(t){return jn("MuiTableCell",t)}const FIe=$n("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),BIe=["align","className","component","padding","scope","size","sortDirection","variant"],jIe=t=>{const{classes:e,variant:n,align:r,padding:i,size:o,stickyHeader:s}=t,a={root:["root",n,s&&"stickyHeader",r!=="inherit"&&`align${Jt(r)}`,i!=="normal"&&`padding${Jt(i)}`,`size${Jt(o)}`]};return Un(a,zIe,e)},$Ie=Kt("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`size${Jt(n.size)}`],n.padding!=="normal"&&e[`padding${Jt(n.padding)}`],n.align!=="inherit"&&e[`align${Jt(n.align)}`],n.stickyHeader&&e.stickyHeader]}})(({theme:t,ownerState:e})=>de({},t.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?`1px solid ${t.vars.palette.TableCell.border}`:`1px solid
    ${t.palette.mode==="light"?Gb(Zi(t.palette.divider,1),.88):Wb(Zi(t.palette.divider,1),.68)}`,textAlign:"left",padding:16},e.variant==="head"&&{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium},e.variant==="body"&&{color:(t.vars||t).palette.text.primary},e.variant==="footer"&&{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)},e.size==="small"&&{padding:"6px 16px",[`&.${FIe.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},e.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},e.padding==="none"&&{padding:0},e.align==="left"&&{textAlign:"left"},e.align==="center"&&{textAlign:"center"},e.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},e.align==="justify"&&{textAlign:"justify"},e.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default})),Lo=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiTableCell"}),{align:i="inherit",className:o,component:s,padding:a,scope:l,size:d,sortDirection:h,variant:p}=r,g=an(r,BIe),v=V.useContext(jre),x=V.useContext($k),b=x&&x.variant==="head";let w;s?w=s:w=b?"th":"td";let S=l;w==="td"?S=void 0:!S&&b&&(S="col");const C=p||x&&x.variant,A=de({},r,{align:i,component:w,padding:a||(v&&v.padding?v.padding:"normal"),size:d||(v&&v.size?v.size:"medium"),sortDirection:h,stickyHeader:C==="head"&&v&&v.stickyHeader,variant:C}),P=jIe(A);let k=null;return h&&(k=h==="asc"?"ascending":"descending"),z.jsx($Ie,de({as:w,ref:n,className:Wt(P.root,o),"aria-sort":k,scope:S,ownerState:A},g))});function UIe(t){return jn("MuiTableHead",t)}$n("MuiTableHead",["root"]);const VIe=["className","component"],HIe=t=>{const{classes:e}=t;return Un({root:["root"]},UIe,e)},WIe=Kt("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"table-header-group"}),GIe={variant:"head"},BG="thead",A$=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiTableHead"}),{className:i,component:o=BG}=r,s=an(r,VIe),a=de({},r,{component:o}),l=HIe(a);return z.jsx($k.Provider,{value:GIe,children:z.jsx(WIe,de({as:o,className:Wt(l.root,i),ref:n,role:o===BG?null:"rowgroup",ownerState:a},s))})});function qIe(t){return jn("MuiToolbar",t)}$n("MuiToolbar",["root","gutters","regular","dense"]);const XIe=["className","component","disableGutters","variant"],YIe=t=>{const{classes:e,disableGutters:n,variant:r}=t;return Un({root:["root",!n&&"gutters",r]},qIe,e)},KIe=Kt("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableGutters&&e.gutters,e[n.variant]]}})(({theme:t,ownerState:e})=>de({position:"relative",display:"flex",alignItems:"center"},!e.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},e.variant==="dense"&&{minHeight:48}),({theme:t,ownerState:e})=>e.variant==="regular"&&t.mixins.toolbar),Rm=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiToolbar"}),{className:i,component:o="div",disableGutters:s=!1,variant:a="regular"}=r,l=an(r,XIe),d=de({},r,{component:o,disableGutters:s,variant:a}),h=YIe(d);return z.jsx(KIe,de({as:o,className:Wt(h.root,i),ref:n,ownerState:d},l))}),ZIe=ja(z.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),JIe=ja(z.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function QIe(t){return jn("MuiTableRow",t)}const jG=$n("MuiTableRow",["root","selected","hover","head","footer"]),eRe=["className","component","hover","selected"],tRe=t=>{const{classes:e,selected:n,hover:r,head:i,footer:o}=t;return Un({root:["root",n&&"selected",r&&"hover",i&&"head",o&&"footer"]},QIe,e)},nRe=Kt("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.head&&e.head,n.footer&&e.footer]}})(({theme:t})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${jG.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${jG.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Zi(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Zi(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}})),$G="tr",yy=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiTableRow"}),{className:i,component:o=$G,hover:s=!1,selected:a=!1}=r,l=an(r,eRe),d=V.useContext($k),h=de({},r,{component:o,hover:s,selected:a,head:d&&d.variant==="head",footer:d&&d.variant==="footer"}),p=tRe(h);return z.jsx(nRe,de({as:o,ref:n,className:Wt(p.root,i),role:o===$G?null:"row",ownerState:h},l))});function rRe(t){return(1+Math.sin(Math.PI*t-Math.PI/2))/2}function iRe(t,e,n,r={},i=()=>{}){const{ease:o=rRe,duration:s=300}=r;let a=null;const l=e[t];let d=!1;const h=()=>{d=!0},p=g=>{if(d){i(new Error("Animation cancelled"));return}a===null&&(a=g);const v=Math.min(1,(g-a)/s);if(e[t]=o(v)*(n-l)+l,v>=1){requestAnimationFrame(()=>{i(null)});return}requestAnimationFrame(p)};return l===n?(i(new Error("Element already at target position")),h):(requestAnimationFrame(p),h)}const oRe=["onChange"],sRe={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function aRe(t){const{onChange:e}=t,n=an(t,oRe),r=V.useRef(),i=V.useRef(null),o=()=>{r.current=i.current.offsetHeight-i.current.clientHeight};return wu(()=>{const s=IE(()=>{const l=r.current;o(),l!==r.current&&e(r.current)}),a=Wf(i.current);return a.addEventListener("resize",s),()=>{s.clear(),a.removeEventListener("resize",s)}},[e]),V.useEffect(()=>{o(),e(r.current)},[e]),z.jsx("div",de({style:sRe,ref:i},n))}function lRe(t){return jn("MuiTabScrollButton",t)}const cRe=$n("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),uRe=["className","slots","slotProps","direction","orientation","disabled"],dRe=t=>{const{classes:e,orientation:n,disabled:r}=t;return Un({root:["root",n,r&&"disabled"]},lRe,e)},hRe=Kt(Pm,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.orientation&&e[n.orientation]]}})(({ownerState:t})=>de({width:40,flexShrink:0,opacity:.8,[`&.${cRe.disabled}`]:{opacity:0}},t.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${t.isRtl?-90:90}deg)`}})),fRe=V.forwardRef(function(e,n){var r,i;const o=Wn({props:e,name:"MuiTabScrollButton"}),{className:s,slots:a={},slotProps:l={},direction:d}=o,h=an(o,uRe),g=Od().direction==="rtl",v=de({isRtl:g},o),x=dRe(v),b=(r=a.StartScrollButtonIcon)!=null?r:ZIe,w=(i=a.EndScrollButtonIcon)!=null?i:JIe,S=Pc({elementType:b,externalSlotProps:l.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:v}),C=Pc({elementType:w,externalSlotProps:l.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:v});return z.jsx(hRe,de({component:"div",className:Wt(x.root,s),ref:n,role:null,ownerState:v,tabIndex:null},h,{children:d==="left"?z.jsx(b,de({},S)):z.jsx(w,de({},C))}))});function pRe(t){return jn("MuiTabs",t)}const dD=$n("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),mRe=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],UG=(t,e)=>t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t.firstChild,VG=(t,e)=>t===e?t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t.lastChild,yC=(t,e,n)=>{let r=!1,i=n(t,e);for(;i;){if(i===t.firstChild){if(r)return;r=!0}const o=i.disabled||i.getAttribute("aria-disabled")==="true";if(!i.hasAttribute("tabindex")||o)i=n(t,i);else{i.focus();return}}},gRe=t=>{const{vertical:e,fixed:n,hideScrollbar:r,scrollableX:i,scrollableY:o,centered:s,scrollButtonsHideMobile:a,classes:l}=t;return Un({root:["root",e&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",i&&"scrollableX",o&&"scrollableY"],flexContainer:["flexContainer",e&&"flexContainerVertical",s&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",a&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]},pRe,l)},yRe=Kt("div",{name:"MuiTabs",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${dD.scrollButtons}`]:e.scrollButtons},{[`& .${dD.scrollButtons}`]:n.scrollButtonsHideMobile&&e.scrollButtonsHideMobile},e.root,n.vertical&&e.vertical]}})(({ownerState:t,theme:e})=>de({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},t.vertical&&{flexDirection:"column"},t.scrollButtonsHideMobile&&{[`& .${dD.scrollButtons}`]:{[e.breakpoints.down("sm")]:{display:"none"}}})),vRe=Kt("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.scroller,n.fixed&&e.fixed,n.hideScrollbar&&e.hideScrollbar,n.scrollableX&&e.scrollableX,n.scrollableY&&e.scrollableY]}})(({ownerState:t})=>de({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},t.fixed&&{overflowX:"hidden",width:"100%"},t.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},t.scrollableX&&{overflowX:"auto",overflowY:"hidden"},t.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),_Re=Kt("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.flexContainer,n.vertical&&e.flexContainerVertical,n.centered&&e.centered]}})(({ownerState:t})=>de({display:"flex"},t.vertical&&{flexDirection:"column"},t.centered&&{justifyContent:"center"})),xRe=Kt("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(t,e)=>e.indicator})(({ownerState:t,theme:e})=>de({position:"absolute",height:2,bottom:0,width:"100%",transition:e.transitions.create()},t.indicatorColor==="primary"&&{backgroundColor:(e.vars||e).palette.primary.main},t.indicatorColor==="secondary"&&{backgroundColor:(e.vars||e).palette.secondary.main},t.vertical&&{height:"100%",width:2,right:0})),bRe=Kt(aRe)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),HG={},$re=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiTabs"}),i=Od(),o=i.direction==="rtl",{"aria-label":s,"aria-labelledby":a,action:l,centered:d=!1,children:h,className:p,component:g="div",allowScrollButtonsMobile:v=!1,indicatorColor:x="primary",onChange:b,orientation:w="horizontal",ScrollButtonComponent:S=fRe,scrollButtons:C="auto",selectionFollowsFocus:A,slots:P={},slotProps:k={},TabIndicatorProps:F={},TabScrollButtonProps:B={},textColor:W="primary",value:J,variant:H="standard",visibleScrollbar:Y=!1}=r,le=an(r,mRe),pe=H==="scrollable",re=w==="vertical",me=re?"scrollTop":"scrollLeft",he=re?"top":"left",we=re?"bottom":"right",ee=re?"clientHeight":"clientWidth",ye=re?"height":"width",be=de({},r,{component:g,allowScrollButtonsMobile:v,indicatorColor:x,orientation:w,vertical:re,scrollButtons:C,textColor:W,variant:H,visibleScrollbar:Y,fixed:!pe,hideScrollbar:pe&&!Y,scrollableX:pe&&!re,scrollableY:pe&&re,centered:d&&!pe,scrollButtonsHideMobile:!v}),Le=gRe(be),je=Pc({elementType:P.StartScrollButtonIcon,externalSlotProps:k.startScrollButtonIcon,ownerState:be}),dt=Pc({elementType:P.EndScrollButtonIcon,externalSlotProps:k.endScrollButtonIcon,ownerState:be}),[Be,ot]=V.useState(!1),[at,It]=V.useState(HG),[Lt,lt]=V.useState(!1),[Je,Qe]=V.useState(!1),[ge,et]=V.useState(!1),[Ke,Tt]=V.useState({overflow:"hidden",scrollbarWidth:0}),ke=new Map,Vt=V.useRef(null),zt=V.useRef(null),$t=()=>{const ht=Vt.current;let Ne;if(ht){const Te=ht.getBoundingClientRect();Ne={clientWidth:ht.clientWidth,scrollLeft:ht.scrollLeft,scrollTop:ht.scrollTop,scrollLeftNormalized:Zbe(ht,i.direction),scrollWidth:ht.scrollWidth,top:Te.top,bottom:Te.bottom,left:Te.left,right:Te.right}}let pt;if(ht&&J!==!1){const Te=zt.current.children;if(Te.length>0){const xt=Te[ke.get(J)];pt=xt?xt.getBoundingClientRect():null}}return{tabsMeta:Ne,tabMeta:pt}},Qt=ql(()=>{const{tabsMeta:ht,tabMeta:Ne}=$t();let pt=0,Te;if(re)Te="top",Ne&&ht&&(pt=Ne.top-ht.top+ht.scrollTop);else if(Te=o?"right":"left",Ne&&ht){const tn=o?ht.scrollLeftNormalized+ht.clientWidth-ht.scrollWidth:ht.scrollLeft;pt=(o?-1:1)*(Ne[Te]-ht[Te]+tn)}const xt={[Te]:pt,[ye]:Ne?Ne[ye]:0};if(isNaN(at[Te])||isNaN(at[ye]))It(xt);else{const tn=Math.abs(at[Te]-xt[Te]),Xe=Math.abs(at[ye]-xt[ye]);(tn>=1||Xe>=1)&&It(xt)}}),Ie=(ht,{animation:Ne=!0}={})=>{Ne?iRe(me,Vt.current,ht,{duration:i.transitions.duration.standard}):Vt.current[me]=ht},Me=ht=>{let Ne=Vt.current[me];re?Ne+=ht:(Ne+=ht*(o?-1:1),Ne*=o&&$ne()==="reverse"?-1:1),Ie(Ne)},wt=()=>{const ht=Vt.current[ee];let Ne=0;const pt=Array.from(zt.current.children);for(let Te=0;Te<pt.length;Te+=1){const xt=pt[Te];if(Ne+xt[ee]>ht){Te===0&&(Ne=ht);break}Ne+=xt[ee]}return Ne},St=()=>{Me(-1*wt())},Bt=()=>{Me(wt())},jt=V.useCallback(ht=>{Tt({overflow:null,scrollbarWidth:ht})},[]),Rn=()=>{const ht={};ht.scrollbarSizeListener=pe?z.jsx(bRe,{onChange:jt,className:Wt(Le.scrollableX,Le.hideScrollbar)}):null;const pt=pe&&(C==="auto"&&(Lt||Je)||C===!0);return ht.scrollButtonStart=pt?z.jsx(S,de({slots:{StartScrollButtonIcon:P.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:je},orientation:w,direction:o?"right":"left",onClick:St,disabled:!Lt},B,{className:Wt(Le.scrollButtons,B.className)})):null,ht.scrollButtonEnd=pt?z.jsx(S,de({slots:{EndScrollButtonIcon:P.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:dt},orientation:w,direction:o?"left":"right",onClick:Bt,disabled:!Je},B,{className:Wt(Le.scrollButtons,B.className)})):null,ht},ft=ql(ht=>{const{tabsMeta:Ne,tabMeta:pt}=$t();if(!(!pt||!Ne)){if(pt[he]<Ne[he]){const Te=Ne[me]+(pt[he]-Ne[he]);Ie(Te,{animation:ht})}else if(pt[we]>Ne[we]){const Te=Ne[me]+(pt[we]-Ne[we]);Ie(Te,{animation:ht})}}}),Rt=ql(()=>{pe&&C!==!1&&et(!ge)});V.useEffect(()=>{const ht=IE(()=>{Vt.current&&Qt()});let Ne;const pt=tn=>{tn.forEach(Xe=>{Xe.removedNodes.forEach(Yt=>{var ve;(ve=Ne)==null||ve.unobserve(Yt)}),Xe.addedNodes.forEach(Yt=>{var ve;(ve=Ne)==null||ve.observe(Yt)})}),ht(),Rt()},Te=Wf(Vt.current);Te.addEventListener("resize",ht);let xt;return typeof ResizeObserver<"u"&&(Ne=new ResizeObserver(ht),Array.from(zt.current.children).forEach(tn=>{Ne.observe(tn)})),typeof MutationObserver<"u"&&(xt=new MutationObserver(pt),xt.observe(zt.current,{childList:!0})),()=>{var tn,Xe;ht.clear(),Te.removeEventListener("resize",ht),(tn=xt)==null||tn.disconnect(),(Xe=Ne)==null||Xe.disconnect()}},[Qt,Rt]),V.useEffect(()=>{const ht=Array.from(zt.current.children),Ne=ht.length;if(typeof IntersectionObserver<"u"&&Ne>0&&pe&&C!==!1){const pt=ht[0],Te=ht[Ne-1],xt={root:Vt.current,threshold:.99},tn=ie=>{lt(!ie[0].isIntersecting)},Xe=new IntersectionObserver(tn,xt);Xe.observe(pt);const Yt=ie=>{Qe(!ie[0].isIntersecting)},ve=new IntersectionObserver(Yt,xt);return ve.observe(Te),()=>{Xe.disconnect(),ve.disconnect()}}},[pe,C,ge,h==null?void 0:h.length]),V.useEffect(()=>{ot(!0)},[]),V.useEffect(()=>{Qt()}),V.useEffect(()=>{ft(HG!==at)},[ft,at]),V.useImperativeHandle(l,()=>({updateIndicator:Qt,updateScrollButtons:Rt}),[Qt,Rt]);const Xt=z.jsx(xRe,de({},F,{className:Wt(Le.indicator,F.className),ownerState:be,style:de({},at,F.style)}));let Tn=0;const en=V.Children.map(h,ht=>{if(!V.isValidElement(ht))return null;const Ne=ht.props.value===void 0?Tn:ht.props.value;ke.set(Ne,Tn);const pt=Ne===J;return Tn+=1,V.cloneElement(ht,de({fullWidth:H==="fullWidth",indicator:pt&&!Be&&Xt,selected:pt,selectionFollowsFocus:A,onChange:b,textColor:W,value:Ne},Tn===1&&J===!1&&!ht.props.tabIndex?{tabIndex:0}:{}))}),Et=ht=>{const Ne=zt.current,pt=Ms(Ne).activeElement;if(pt.getAttribute("role")!=="tab")return;let xt=w==="horizontal"?"ArrowLeft":"ArrowUp",tn=w==="horizontal"?"ArrowRight":"ArrowDown";switch(w==="horizontal"&&o&&(xt="ArrowRight",tn="ArrowLeft"),ht.key){case xt:ht.preventDefault(),yC(Ne,pt,VG);break;case tn:ht.preventDefault(),yC(Ne,pt,UG);break;case"Home":ht.preventDefault(),yC(Ne,null,UG);break;case"End":ht.preventDefault(),yC(Ne,null,VG);break}},qt=Rn();return z.jsxs(yRe,de({className:Wt(Le.root,p),ownerState:be,ref:n,as:g},le,{children:[qt.scrollButtonStart,qt.scrollbarSizeListener,z.jsxs(vRe,{className:Le.scroller,ownerState:be,style:{overflow:Ke.overflow,[re?`margin${o?"Left":"Right"}`:"marginBottom"]:Y?void 0:-Ke.scrollbarWidth},ref:Vt,children:[z.jsx(_Re,{"aria-label":s,"aria-labelledby":a,"aria-orientation":w==="vertical"?"vertical":null,className:Le.flexContainer,ownerState:be,onKeyDown:Et,ref:zt,role:"tablist",children:en}),Be&&Xt]}),qt.scrollButtonEnd]}))});function wRe(t){return jn("MuiTextField",t)}$n("MuiTextField",["root"]);const SRe=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],MRe={standard:S$,filled:w$,outlined:Bk},ERe=t=>{const{classes:e}=t;return Un({root:["root"]},wRe,e)},TRe=Kt(NE,{name:"MuiTextField",slot:"Root",overridesResolver:(t,e)=>e.root})({}),bi=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:o=!1,children:s,className:a,color:l="primary",defaultValue:d,disabled:h=!1,error:p=!1,FormHelperTextProps:g,fullWidth:v=!1,helperText:x,id:b,InputLabelProps:w,inputProps:S,InputProps:C,inputRef:A,label:P,maxRows:k,minRows:F,multiline:B=!1,name:W,onBlur:J,onChange:H,onFocus:Y,placeholder:le,required:pe=!1,rows:re,select:me=!1,SelectProps:he,type:we,value:ee,variant:ye="outlined"}=r,be=an(r,SRe),Le=de({},r,{autoFocus:o,color:l,disabled:h,error:p,fullWidth:v,multiline:B,required:pe,select:me,variant:ye}),je=ERe(Le),dt={};ye==="outlined"&&(w&&typeof w.shrink<"u"&&(dt.notched=w.shrink),dt.label=P),me&&((!he||!he.native)&&(dt.id=void 0),dt["aria-describedby"]=void 0);const Be=Ck(b),ot=x&&Be?`${Be}-helper-text`:void 0,at=P&&Be?`${Be}-label`:void 0,It=MRe[ye],Lt=z.jsx(It,de({"aria-describedby":ot,autoComplete:i,autoFocus:o,defaultValue:d,fullWidth:v,multiline:B,name:W,rows:re,maxRows:k,minRows:F,type:we,value:ee,id:Be,inputRef:A,onBlur:J,onChange:H,onFocus:Y,placeholder:le,inputProps:S},dt,C));return z.jsxs(TRe,de({className:Wt(je.root,a),disabled:h,error:p,fullWidth:v,ref:n,required:pe,color:l,variant:ye,ownerState:Le},be,{children:[P!=null&&P!==""&&z.jsx(zE,de({htmlFor:Be,id:at},w,{children:P})),me?z.jsx(U1,de({"aria-describedby":ot,id:Be,labelId:at,value:ee,input:Lt},he,{children:s})):Lt,x&&z.jsx(wCe,de({id:ot},g,{children:x}))]}))}),Vy=(t,e)=>{const n=Ql(),r=V.useRef();V.useEffect(()=>(t().then(i=>r.current=i).catch(i=>n(Yte.push(i.message))),()=>{const i=r.current;i&&i()}),[...e,n])},Ure=t=>{const e=Ql();return(...n)=>{t(...n).catch(r=>e(Yte.push(r.message)))}};var WG=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},FE=(typeof window>"u"?"undefined":WG(window))==="object"&&(typeof document>"u"?"undefined":WG(document))==="object"&&document.nodeType===9;function CRe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i1e(r.key),r)}}function Vre(t,e,n){return e&&CRe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}var ARe={}.constructor;function KF(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(KF);if(t.constructor!==ARe)return t;var e={};for(var n in t)e[n]=KF(t[n]);return e}function P$(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,i=KF(e),o=r.plugins.onCreateRule(t,i,n);return o||(t[0],null)}var GG=function(e,n){for(var r="",i=0;i<e.length&&e[i]!=="!important";i++)r&&(r+=n),r+=e[i];return r},w0=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=GG(e[r]," ");else n=GG(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function V1(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function dS(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function uM(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var i=n,o=i.indent,s=o===void 0?0:o,a=e.fallbacks;n.format===!1&&(s=-1/0);var l=V1(n),d=l.linebreak,h=l.space;if(t&&s++,a)if(Array.isArray(a))for(var p=0;p<a.length;p++){var g=a[p];for(var v in g){var x=g[v];x!=null&&(r&&(r+=d),r+=dS(v+":"+h+w0(x)+";",s))}}else for(var b in a){var w=a[b];w!=null&&(r&&(r+=d),r+=dS(b+":"+h+w0(w)+";",s))}for(var S in e){var C=e[S];C!=null&&S!=="fallbacks"&&(r&&(r+=d),r+=dS(S+":"+h+w0(C)+";",s))}return!r&&!n.allowEmpty||!t?r:(s--,r&&(r=""+d+r+d),dS(""+t+h+"{"+r,s)+dS("}",s))}var PRe=/([[\].#*$><+~=|^:(),"'`\s])/g,qG=typeof CSS<"u"&&CSS.escape,I$=function(t){return qG?qG(t):t.replace(PRe,"\\$1")},Hre=function(){function t(n,r,i){this.type="style",this.isProcessed=!1;var o=i.sheet,s=i.Renderer;this.key=n,this.options=i,this.style=r,o?this.renderer=o.renderer:s&&(this.renderer=new s)}var e=t.prototype;return e.prop=function(r,i,o){if(i===void 0)return this.style[r];var s=o?o.force:!1;if(!s&&this.style[r]===i)return this;var a=i;(!o||o.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(i,r,this));var l=a==null||a===!1,d=r in this.style;if(l&&!d&&!s)return this;var h=l&&d;if(h?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return h?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var p=this.options.sheet;return p&&p.attached,this},t}(),ZF=function(t){OE(e,t);function e(r,i,o){var s;s=t.call(this,r,i,o)||this;var a=o.selector,l=o.scoped,d=o.sheet,h=o.generateId;return a?s.selectorText=a:l!==!1&&(s.id=h(oM(oM(s)),d),s.selectorText="."+I$(s.id)),s}var n=e.prototype;return n.applyTo=function(i){var o=this.renderer;if(o){var s=this.toJSON();for(var a in s)o.setProperty(i,a,s[a])}return this},n.toJSON=function(){var i={};for(var o in this.style){var s=this.style[o];typeof s!="object"?i[o]=s:Array.isArray(s)&&(i[o]=w0(s))}return i},n.toString=function(i){var o=this.options.sheet,s=o?o.options.link:!1,a=s?de({},i,{allowEmpty:!0}):i;return uM(this.selectorText,this.style,a)},Vre(e,[{key:"selector",set:function(i){if(i!==this.selectorText){this.selectorText=i;var o=this.renderer,s=this.renderable;if(!(!s||!o)){var a=o.setSelector(s,i);a||o.replaceRule(s,this)}}},get:function(){return this.selectorText}}]),e}(Hre),IRe={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new ZF(e,n,r)}},hD={indent:1,children:!0},RRe=/@([\w-]+)/,kRe=function(){function t(n,r,i){this.type="conditional",this.isProcessed=!1,this.key=n;var o=n.match(RRe);this.at=o?o[1]:"unknown",this.query=i.name||"@"+this.at,this.options=i,this.rules=new Vk(de({},i,{parent:this}));for(var s in r)this.rules.add(s,r[s]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,i,o){var s=this.rules.add(r,i,o);return s?(this.options.jss.plugins.onProcessRule(s),s):null},e.replaceRule=function(r,i,o){var s=this.rules.replace(r,i,o);return s&&this.options.jss.plugins.onProcessRule(s),s},e.toString=function(r){r===void 0&&(r=hD);var i=V1(r),o=i.linebreak;if(r.indent==null&&(r.indent=hD.indent),r.children==null&&(r.children=hD.children),r.children===!1)return this.query+" {}";var s=this.rules.toString(r);return s?this.query+" {"+o+s+o+"}":""},t}(),ORe=/@container|@media|@supports\s+/,LRe={onCreateRule:function(e,n,r){return ORe.test(e)?new kRe(e,n,r):null}},fD={indent:1,children:!0},DRe=/@keyframes\s+([\w-]+)/,JF=function(){function t(n,r,i){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var o=n.match(DRe);o&&o[1]?this.name=o[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=i;var s=i.scoped,a=i.sheet,l=i.generateId;this.id=s===!1?this.name:I$(l(this,a)),this.rules=new Vk(de({},i,{parent:this}));for(var d in r)this.rules.add(d,r[d],de({},i,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=fD);var i=V1(r),o=i.linebreak;if(r.indent==null&&(r.indent=fD.indent),r.children==null&&(r.children=fD.children),r.children===!1)return this.at+" "+this.id+" {}";var s=this.rules.toString(r);return s&&(s=""+o+s+o),this.at+" "+this.id+" {"+s+"}"},t}(),NRe=/@keyframes\s+/,zRe=/\$([\w-]+)/g,QF=function(e,n){return typeof e=="string"?e.replace(zRe,function(r,i){return i in n?n[i]:r}):e},XG=function(e,n,r){var i=e[n],o=QF(i,r);o!==i&&(e[n]=o)},FRe={onCreateRule:function(e,n,r){return typeof e=="string"&&NRe.test(e)?new JF(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&XG(e,"animation-name",r.keyframes),"animation"in e&&XG(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var i=r.options.sheet;if(!i)return e;switch(n){case"animation":return QF(e,i.keyframes);case"animation-name":return QF(e,i.keyframes);default:return e}}},BRe=function(t){OE(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(i){var o=this.options.sheet,s=o?o.options.link:!1,a=s?de({},i,{allowEmpty:!0}):i;return uM(this.key,this.style,a)},e}(Hre),jRe={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new BRe(e,n,r):null}},$Re=function(){function t(n,r,i){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=i}var e=t.prototype;return e.toString=function(r){var i=V1(r),o=i.linebreak;if(Array.isArray(this.style)){for(var s="",a=0;a<this.style.length;a++)s+=uM(this.at,this.style[a]),this.style[a+1]&&(s+=o);return s}return uM(this.at,this.style,r)},t}(),URe=/@font-face/,VRe={onCreateRule:function(e,n,r){return URe.test(e)?new $Re(e,n,r):null}},HRe=function(){function t(n,r,i){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=i}var e=t.prototype;return e.toString=function(r){return uM(this.key,this.style,r)},t}(),WRe={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new HRe(e,n,r):null}},GRe=function(){function t(n,r,i){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=i}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var i="",o=0;o<this.value.length;o++)i+=this.key+" "+this.value[o]+";",this.value[o+1]&&(i+=`
`);return i}return this.key+" "+this.value+";"},t}(),qRe={"@charset":!0,"@import":!0,"@namespace":!0},XRe={onCreateRule:function(e,n,r){return e in qRe?new GRe(e,n,r):null}},YG=[IRe,LRe,FRe,jRe,VRe,WRe,XRe],YRe={process:!0},KG={force:!0,process:!0},Vk=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,i,o){var s=this.options,a=s.parent,l=s.sheet,d=s.jss,h=s.Renderer,p=s.generateId,g=s.scoped,v=de({classes:this.classes,parent:a,sheet:l,jss:d,Renderer:h,generateId:p,scoped:g,name:r,keyframes:this.keyframes,selector:void 0},o),x=r;r in this.raw&&(x=r+"-d"+this.counter++),this.raw[x]=i,x in this.classes&&(v.selector="."+I$(this.classes[x]));var b=P$(x,i,v);if(!b)return null;this.register(b);var w=v.index===void 0?this.index.length:v.index;return this.index.splice(w,0,b),b},e.replace=function(r,i,o){var s=this.get(r),a=this.index.indexOf(s);s&&this.remove(s);var l=o;return a!==-1&&(l=de({},o,{index:a})),this.add(r,i,l)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof ZF?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof JF&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof ZF?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof JF&&delete this.keyframes[r.name]},e.update=function(){var r,i,o;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],o=arguments.length<=2?void 0:arguments[2]):(i=arguments.length<=0?void 0:arguments[0],o=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),i,o);else for(var s=0;s<this.index.length;s++)this.updateOne(this.index[s],i,o)},e.updateOne=function(r,i,o){o===void 0&&(o=YRe);var s=this.options,a=s.jss.plugins,l=s.sheet;if(r.rules instanceof t){r.rules.update(i,o);return}var d=r.style;if(a.onUpdate(i,r,l,o),o.process&&d&&d!==r.style){a.onProcessStyle(r.style,r,l);for(var h in r.style){var p=r.style[h],g=d[h];p!==g&&r.prop(h,p,KG)}for(var v in d){var x=r.style[v],b=d[v];x==null&&x!==b&&r.prop(v,null,KG)}}},e.toString=function(r){for(var i="",o=this.options.sheet,s=o?o.options.link:!1,a=V1(r),l=a.linebreak,d=0;d<this.index.length;d++){var h=this.index[d],p=h.toString(r);!p&&!s||(i&&(i+=l),i+=p)}return i},t}(),Wre=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=de({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new Vk(this.options);for(var i in n)this.rules.add(i,n[i]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,i,o){var s=this.queue;this.attached&&!s&&(this.queue=[]);var a=this.rules.add(r,i,o);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(s?s.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,i,o){var s=this.rules.get(r);if(!s)return this.addRule(r,i,o);var a=this.rules.replace(r,i,o);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?s.renderable&&this.renderer.replaceRule(s.renderable,a):this.renderer.deleteRule(s)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,i){var o=[];for(var s in r){var a=this.addRule(s,r[s],i);a&&o.push(a)}return o},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var i=typeof r=="object"?r:this.rules.get(r);return!i||this.attached&&!i.renderable?!1:(this.rules.remove(i),this.attached&&i.renderable&&this.renderer?this.renderer.deleteRule(i.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,i,o){return this.rules.updateOne(r,i,o),this},e.toString=function(r){return this.rules.toString(r)},t}(),KRe=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,i,o){for(var s=0;s<this.registry.onCreateRule.length;s++){var a=this.registry.onCreateRule[s](r,i,o);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var i=r.options.sheet,o=0;o<this.registry.onProcessRule.length;o++)this.registry.onProcessRule[o](r,i);r.style&&this.onProcessStyle(r.style,r,i),r.isProcessed=!0}},e.onProcessStyle=function(r,i,o){for(var s=0;s<this.registry.onProcessStyle.length;s++)i.style=this.registry.onProcessStyle[s](i.style,i,o)},e.onProcessSheet=function(r){for(var i=0;i<this.registry.onProcessSheet.length;i++)this.registry.onProcessSheet[i](r)},e.onUpdate=function(r,i,o,s){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,i,o,s)},e.onChangeValue=function(r,i,o){for(var s=r,a=0;a<this.registry.onChangeValue.length;a++)s=this.registry.onChangeValue[a](s,i,o);return s},e.use=function(r,i){i===void 0&&(i={queue:"external"});var o=this.plugins[i.queue];o.indexOf(r)===-1&&(o.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(s,a){for(var l in a)l in s&&s[l].push(a[l]);return s},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),ZRe=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var i=this.registry,o=r.options.index;if(i.indexOf(r)===-1){if(i.length===0||o>=this.index){i.push(r);return}for(var s=0;s<i.length;s++)if(i[s].options.index>o){i.splice(s,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var i=this.registry.indexOf(r);this.registry.splice(i,1)},e.toString=function(r){for(var i=r===void 0?{}:r,o=i.attached,s=an(i,["attached"]),a=V1(s),l=a.linebreak,d="",h=0;h<this.registry.length;h++){var p=this.registry[h];o!=null&&p.attached!==o||(d&&(d+=l),d+=p.toString(s))}return d},Vre(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),y2=new ZRe,eB=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),tB="2f1acc6c3a606b082e5eef5e54414ffb";eB[tB]==null&&(eB[tB]=0);var ZG=eB[tB]++,JG=function(e){e===void 0&&(e={});var n=0,r=function(o,s){n+=1;var a="",l="";return s&&(s.options.classNamePrefix&&(l=s.options.classNamePrefix),s.options.jss.id!=null&&(a=String(s.options.jss.id))),e.minify?""+(l||"c")+ZG+a+n:l+o.key+"-"+ZG+(a?"-"+a:"")+"-"+n};return r},Gre=function(e){var n;return function(){return n||(n=e()),n}},JRe=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},QRe=function(e,n,r){try{var i=r;if(Array.isArray(r)&&(i=w0(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,i);else{var o=i?i.indexOf("!important"):-1,s=o>-1?i.substr(0,o-1):i;e.style.setProperty(n,s,o>-1?"important":"")}}catch{return!1}return!0},eke=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},tke=function(e,n){return e.selectorText=n,e.selectorText===n},qre=Gre(function(){return document.querySelector("head")});function nke(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function rke(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function ike(t){for(var e=qre(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function oke(t){var e=y2.registry;if(e.length>0){var n=nke(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=rke(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var i=ike(r);if(i)return{parent:i.parentNode,node:i.nextSibling}}return!1}function ske(t,e){var n=e.insertionPoint,r=oke(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var i=n,o=i.parentNode;o&&o.insertBefore(t,i.nextSibling);return}qre().appendChild(t)}var ake=Gre(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),QG=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},e7=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},lke=function(){var e=document.createElement("style");return e.textContent=`
`,e},cke=function(){function t(n){this.getPropertyValue=JRe,this.setProperty=QRe,this.removeProperty=eke,this.setSelector=tke,this.hasInsertedRules=!1,this.cssRules=[],n&&y2.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},i=r.media,o=r.meta,s=r.element;this.element=s||lke(),this.element.setAttribute("data-jss",""),i&&this.element.setAttribute("media",i),o&&this.element.setAttribute("data-meta",o);var a=ake();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){ske(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,i){for(var o=0;o<r.index.length;o++)this.insertRule(r.index[o],o,i)},e.insertRule=function(r,i,o){if(o===void 0&&(o=this.element.sheet),r.rules){var s=r,a=o;if(r.type==="conditional"||r.type==="keyframes"){var l=e7(o,i);if(a=QG(o,s.toString({children:!1}),l),a===!1)return!1;this.refCssRule(r,l,a)}return this.insertRules(s.rules,a),a}var d=r.toString();if(!d)return!1;var h=e7(o,i),p=QG(o,d,h);return p===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,h,p),p)},e.refCssRule=function(r,i,o){r.renderable=o,r.options.parent instanceof Wre&&this.cssRules.splice(i,0,o)},e.deleteRule=function(r){var i=this.element.sheet,o=this.indexOf(r);return o===-1?!1:(i.deleteRule(o),this.cssRules.splice(o,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,i){var o=this.indexOf(r);return o===-1?!1:(this.element.sheet.deleteRule(o),this.cssRules.splice(o,1),this.insertRule(i,o))},e.getRules=function(){return this.element.sheet.cssRules},t}(),uke=0,dke=function(){function t(n){this.id=uke++,this.version="10.10.0",this.plugins=new KRe,this.options={id:{minify:!1},createGenerateId:JG,Renderer:FE?cke:null,plugins:[]},this.generateId=JG({minify:!1});for(var r=0;r<YG.length;r++)this.plugins.use(YG[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=de({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,i){i===void 0&&(i={});var o=i,s=o.index;typeof s!="number"&&(s=y2.index===0?0:y2.index+1);var a=new Wre(r,de({},i,{jss:this,generateId:i.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:s}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),y2.remove(r),this},e.createRule=function(r,i,o){if(i===void 0&&(i={}),o===void 0&&(o={}),typeof r=="object")return this.createRule(void 0,r,i);var s=de({},o,{name:r,jss:this,Renderer:this.options.Renderer});s.generateId||(s.generateId=this.generateId),s.classes||(s.classes={}),s.keyframes||(s.keyframes={});var a=P$(r,i,s);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return o.forEach(function(a){r.plugins.use(a)}),this},t}(),Xre=function(e){return new dke(e)},R$=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function Yre(t){var e=null;for(var n in t){var r=t[n],i=typeof r;if(i==="function")e||(e={}),e[n]=r;else if(i==="object"&&r!==null&&!Array.isArray(r)){var o=Yre(r);o&&(e||(e={}),e[n]=o)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */Xre();function Kre(t={}){const{baseClasses:e,newClasses:n,Component:r}=t;if(!n)return e;const i=de({},e);return Object.keys(n).forEach(o=>{n[o]&&(i[o]=`${e[o]} ${n[o]}`)}),i}const Jx={set:(t,e,n,r)=>{let i=t.get(e);i||(i=new Map,t.set(e,i)),i.set(n,r)},get:(t,e,n)=>{const r=t.get(e);return r?r.get(n):void 0},delete:(t,e,n)=>{t.get(e).delete(n)}};function Zre(){var t;const e=o$();return(t=e==null?void 0:e.$$material)!=null?t:e}const hke=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];function fke(t={}){const{disableGlobal:e=!1,productionPrefix:n="jss",seed:r=""}=t,i=r===""?"":`${r}-`;let o=0;const s=()=>(o+=1,o);return(a,l)=>{const d=l.options.name;if(d&&d.indexOf("Mui")===0&&!l.options.link&&!e){if(hke.indexOf(a.key)!==-1)return`Mui-${a.key}`;const h=`${i}${d}-${a.key}`;return!l.options.theme[Hne]||r!==""?h:`${h}-${s()}`}return`${i}${n}${s()}`}}var Jre=Date.now(),pD="fnValues"+Jre,mD="fnStyle"+ ++Jre,pke=function(){return{onCreateRule:function(n,r,i){if(typeof r!="function")return null;var o=P$(n,{},i);return o[mD]=r,o},onProcessStyle:function(n,r){if(pD in r||mD in r)return n;var i={};for(var o in n){var s=n[o];typeof s=="function"&&(delete n[o],i[o]=s)}return r[pD]=i,n},onUpdate:function(n,r,i,o){var s=r,a=s[mD];a&&(s.style=a(n)||{});var l=s[pD];if(l)for(var d in l)s.prop(d,l[d](n),o)}}},vy="@global",nB="@global ",mke=function(){function t(n,r,i){this.type="global",this.at=vy,this.isProcessed=!1,this.key=n,this.options=i,this.rules=new Vk(de({},i,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,i,o){var s=this.rules.add(r,i,o);return s&&this.options.jss.plugins.onProcessRule(s),s},e.replaceRule=function(r,i,o){var s=this.rules.replace(r,i,o);return s&&this.options.jss.plugins.onProcessRule(s),s},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),gke=function(){function t(n,r,i){this.type="global",this.at=vy,this.isProcessed=!1,this.key=n,this.options=i;var o=n.substr(nB.length);this.rule=i.jss.createRule(o,r,de({},i,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),yke=/\s*,\s*/g;function Qre(t,e){for(var n=t.split(yke),r="",i=0;i<n.length;i++)r+=e+" "+n[i].trim(),n[i+1]&&(r+=", ");return r}function vke(t,e){var n=t.options,r=t.style,i=r?r[vy]:null;if(i){for(var o in i)e.addRule(o,i[o],de({},n,{selector:Qre(o,t.selector)}));delete r[vy]}}function _ke(t,e){var n=t.options,r=t.style;for(var i in r)if(!(i[0]!=="@"||i.substr(0,vy.length)!==vy)){var o=Qre(i.substr(vy.length),t.selector);e.addRule(o,r[i],de({},n,{selector:o})),delete r[i]}}function xke(){function t(n,r,i){if(!n)return null;if(n===vy)return new mke(n,r,i);if(n[0]==="@"&&n.substr(0,nB.length)===nB)return new gke(n,r,i);var o=i.parent;return o&&(o.type==="global"||o.options.parent&&o.options.parent.type==="global")&&(i.scoped=!1),!i.selector&&i.scoped===!1&&(i.selector=n),null}function e(n,r){n.type!=="style"||!r||(vke(n,r),_ke(n,r))}return{onCreateRule:t,onProcessRule:e}}var t7=/\s*,\s*/g,bke=/&/g,wke=/\$([\w-]+)/g;function Ske(){function t(i,o){return function(s,a){var l=i.getRule(a)||o&&o.getRule(a);return l?l.selector:a}}function e(i,o){for(var s=o.split(t7),a=i.split(t7),l="",d=0;d<s.length;d++)for(var h=s[d],p=0;p<a.length;p++){var g=a[p];l&&(l+=", "),l+=g.indexOf("&")!==-1?g.replace(bke,h):h+" "+g}return l}function n(i,o,s){if(s)return de({},s,{index:s.index+1});var a=i.options.nestingLevel;a=a===void 0?1:a+1;var l=de({},i.options,{nestingLevel:a,index:o.indexOf(i)+1});return delete l.name,l}function r(i,o,s){if(o.type!=="style")return i;var a=o,l=a.options.parent,d,h;for(var p in i){var g=p.indexOf("&")!==-1,v=p[0]==="@";if(!(!g&&!v)){if(d=n(a,l,d),g){var x=e(p,a.selector);h||(h=t(l,s)),x=x.replace(wke,h);var b=a.key+"-"+p;"replaceRule"in l?l.replaceRule(b,i[p],de({},d,{selector:x})):l.addRule(b,i[p],de({},d,{selector:x}))}else v&&l.addRule(p,{},d).addRule(a.key,i[p],{selector:a.selector});delete i[p]}}return i}return{onProcessStyle:r}}var Mke=/[A-Z]/g,Eke=/^ms-/,gD={};function Tke(t){return"-"+t.toLowerCase()}function eie(t){if(gD.hasOwnProperty(t))return gD[t];var e=t.replace(Mke,Tke);return gD[t]=Eke.test(e)?"-"+e:e}function hI(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:eie(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(hI):e.fallbacks=hI(t.fallbacks)),e}function Cke(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=hI(n[r]);return n}return hI(n)}function e(n,r,i){if(r.indexOf("--")===0)return n;var o=eie(r);return r===o?n:(i.prop(o,n),null)}return{onProcessStyle:t,onChangeValue:e}}var Zt=R$&&CSS?CSS.px:"px",vC=R$&&CSS?CSS.ms:"ms",Z_=R$&&CSS?CSS.percent:"%",Ake={"animation-delay":vC,"animation-duration":vC,"background-position":Zt,"background-position-x":Zt,"background-position-y":Zt,"background-size":Zt,border:Zt,"border-bottom":Zt,"border-bottom-left-radius":Zt,"border-bottom-right-radius":Zt,"border-bottom-width":Zt,"border-left":Zt,"border-left-width":Zt,"border-radius":Zt,"border-right":Zt,"border-right-width":Zt,"border-top":Zt,"border-top-left-radius":Zt,"border-top-right-radius":Zt,"border-top-width":Zt,"border-width":Zt,"border-block":Zt,"border-block-end":Zt,"border-block-end-width":Zt,"border-block-start":Zt,"border-block-start-width":Zt,"border-block-width":Zt,"border-inline":Zt,"border-inline-end":Zt,"border-inline-end-width":Zt,"border-inline-start":Zt,"border-inline-start-width":Zt,"border-inline-width":Zt,"border-start-start-radius":Zt,"border-start-end-radius":Zt,"border-end-start-radius":Zt,"border-end-end-radius":Zt,margin:Zt,"margin-bottom":Zt,"margin-left":Zt,"margin-right":Zt,"margin-top":Zt,"margin-block":Zt,"margin-block-end":Zt,"margin-block-start":Zt,"margin-inline":Zt,"margin-inline-end":Zt,"margin-inline-start":Zt,padding:Zt,"padding-bottom":Zt,"padding-left":Zt,"padding-right":Zt,"padding-top":Zt,"padding-block":Zt,"padding-block-end":Zt,"padding-block-start":Zt,"padding-inline":Zt,"padding-inline-end":Zt,"padding-inline-start":Zt,"mask-position-x":Zt,"mask-position-y":Zt,"mask-size":Zt,height:Zt,width:Zt,"min-height":Zt,"max-height":Zt,"min-width":Zt,"max-width":Zt,bottom:Zt,left:Zt,top:Zt,right:Zt,inset:Zt,"inset-block":Zt,"inset-block-end":Zt,"inset-block-start":Zt,"inset-inline":Zt,"inset-inline-end":Zt,"inset-inline-start":Zt,"box-shadow":Zt,"text-shadow":Zt,"column-gap":Zt,"column-rule":Zt,"column-rule-width":Zt,"column-width":Zt,"font-size":Zt,"font-size-delta":Zt,"letter-spacing":Zt,"text-decoration-thickness":Zt,"text-indent":Zt,"text-stroke":Zt,"text-stroke-width":Zt,"word-spacing":Zt,motion:Zt,"motion-offset":Zt,outline:Zt,"outline-offset":Zt,"outline-width":Zt,perspective:Zt,"perspective-origin-x":Z_,"perspective-origin-y":Z_,"transform-origin":Z_,"transform-origin-x":Z_,"transform-origin-y":Z_,"transform-origin-z":Z_,"transition-delay":vC,"transition-duration":vC,"vertical-align":Zt,"flex-basis":Zt,"shape-margin":Zt,size:Zt,gap:Zt,grid:Zt,"grid-gap":Zt,"row-gap":Zt,"grid-row-gap":Zt,"grid-column-gap":Zt,"grid-template-rows":Zt,"grid-template-columns":Zt,"grid-auto-rows":Zt,"grid-auto-columns":Zt,"box-shadow-x":Zt,"box-shadow-y":Zt,"box-shadow-blur":Zt,"box-shadow-spread":Zt,"font-line-height":Zt,"text-shadow-x":Zt,"text-shadow-y":Zt,"text-shadow-blur":Zt};function tie(t){var e=/(-[a-z])/g,n=function(s){return s[1].toUpperCase()},r={};for(var i in t)r[i]=t[i],r[i.replace(e,n)]=t[i];return r}var Pke=tie(Ake);function v2(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=v2(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var i in e)e[i]=v2(i,e[i],n);else for(var o in e)e[o]=v2(t+"-"+o,e[o],n);else if(typeof e=="number"&&isNaN(e)===!1){var s=n[t]||Pke[t];return s&&!(e===0&&s===Zt)?typeof s=="function"?s(e).toString():""+e+s:e.toString()}return e}function Ike(t){t===void 0&&(t={});var e=tie(t);function n(i,o){if(o.type!=="style")return i;for(var s in i)i[s]=v2(s,i[s],e);return i}function r(i,o){return v2(o,i,e)}return{onProcessStyle:n,onChangeValue:r}}function rB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Rke(t){if(Array.isArray(t))return rB(t)}function kke(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Oke(t,e){if(t){if(typeof t=="string")return rB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rB(t,e)}}function Lke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dke(t){return Rke(t)||kke(t)||Oke(t)||Lke()}var KS="",iB="",nie="",rie="",Nke=FE&&"ontouchstart"in document.documentElement;if(FE){var yD={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},zke=document.createElement("p"),vD=zke.style,Fke="Transform";for(var _D in yD)if(_D+Fke in vD){KS=_D,iB=yD[_D];break}KS==="Webkit"&&"msHyphens"in vD&&(KS="ms",iB=yD.ms,rie="edge"),KS==="Webkit"&&"-apple-trailing-word"in vD&&(nie="apple")}var Or={js:KS,css:iB,vendor:nie,browser:rie,isTouch:Nke};function Bke(t){return t[1]==="-"||Or.js==="ms"?t:"@"+Or.css+"keyframes"+t.substr(10)}var jke={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:Or.js==="ms"?"-webkit-"+e:Or.css+e}},$ke={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:Or.js==="Webkit"?Or.css+"print-"+e:e}},Uke=/[-\s]+(.)?/g;function Vke(t,e){return e?e.toUpperCase():""}function k$(t){return t.replace(Uke,Vke)}function Iy(t){return k$("-"+t)}var Hke={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(Or.js==="Webkit"){var r="mask-image";if(k$(r)in n)return e;if(Or.js+Iy(r)in n)return Or.css+e}return e}},Wke={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:Or.vendor==="apple"&&!Or.isTouch?Or.css+e:e}},Gke={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:Or.css+e}},qke={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:Or.css+e}},Xke={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:Or.js==="Webkit"||Or.js==="ms"&&Or.browser!=="edge"?Or.css+e:e}},Yke={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:Or.js==="Moz"||Or.js==="ms"||Or.vendor==="apple"?Or.css+e:e}},Kke={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(Or.js==="Webkit"){var r="WebkitColumn"+Iy(e);return r in n?Or.css+"column-"+e:!1}if(Or.js==="Moz"){var i="page"+Iy(e);return i in n?"page-"+e:!1}return!1}},Zke={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(Or.js==="Moz")return e;var r=e.replace("-inline","");return Or.js+Iy(r)in n?Or.css+r:!1}},Jke={supportedProperty:function(e,n){return k$(e)in n?e:!1}},Qke={supportedProperty:function(e,n){var r=Iy(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:Or.js+r in n?Or.css+e:Or.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},eOe={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:Or.js==="ms"?""+Or.css+e:e}},tOe={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:Or.js==="ms"?Or.css+"scroll-chaining":e}},nOe={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},rOe={supportedProperty:function(e,n){var r=nOe[e];return r&&Or.js+Iy(r)in n?Or.css+r:!1}},iie={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},iOe=Object.keys(iie),oOe=function(e){return Or.css+e},sOe={supportedProperty:function(e,n,r){var i=r.multiple;if(iOe.indexOf(e)>-1){var o=iie[e];if(!Array.isArray(o))return Or.js+Iy(o)in n?Or.css+o:!1;if(!i)return!1;for(var s=0;s<o.length;s++)if(!(Or.js+Iy(o[0])in n))return!1;return o.map(oOe)}return!1}},oie=[jke,$ke,Hke,Wke,Gke,qke,Xke,Yke,Kke,Zke,Jke,Qke,eOe,tOe,rOe,sOe],n7=oie.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),aOe=oie.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,Dke(e.noPrefill)),t},[]),ZS,Jv={};if(FE){ZS=document.createElement("p");var xD=window.getComputedStyle(document.documentElement,"");for(var bD in xD)isNaN(bD)||(Jv[xD[bD]]=xD[bD]);aOe.forEach(function(t){return delete Jv[t]})}function oB(t,e){if(e===void 0&&(e={}),!ZS)return t;if(Jv[t]!=null)return Jv[t];(t==="transition"||t==="transform")&&(e[t]=t in ZS.style);for(var n=0;n<n7.length&&(Jv[t]=n7[n](t,ZS.style,e),!Jv[t]);n++);try{ZS.style[t]=""}catch{return!1}return Jv[t]}var J_={},lOe={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},cOe=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,jg;function uOe(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?oB(e):", "+oB(n);return r||e||n}FE&&(jg=document.createElement("p"));function r7(t,e){var n=e;if(!jg||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(J_[r]!=null)return J_[r];try{jg.style[t]=n}catch{return J_[r]=!1,!1}if(lOe[t])n=n.replace(cOe,uOe);else if(jg.style[t]===""&&(n=Or.css+n,n==="-ms-flex"&&(jg.style[t]="-ms-flexbox"),jg.style[t]=n,jg.style[t]===""))return J_[r]=!1,!1;return jg.style[t]="",J_[r]=n,J_[r]}function dOe(){function t(i){if(i.type==="keyframes"){var o=i;o.at=Bke(o.at)}}function e(i){for(var o in i){var s=i[o];if(o==="fallbacks"&&Array.isArray(s)){i[o]=s.map(e);continue}var a=!1,l=oB(o);l&&l!==o&&(a=!0);var d=!1,h=r7(l,w0(s));h&&h!==s&&(d=!0),(a||d)&&(a&&delete i[o],i[l||o]=h||s)}return i}function n(i,o){return o.type!=="style"?i:e(i)}function r(i,o){return r7(o,w0(i))||i}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function hOe(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var i={},o=Object.keys(n).sort(t),s=0;s<o.length;s++)i[o[s]]=n[o[s]];return i}}}function fOe(){return{plugins:[pke(),xke(),Ske(),Cke(),Ike(),typeof window>"u"?null:dOe(),hOe()]}}const pOe=Xre(fOe()),mOe=fke(),gOe=new Map,yOe={disableGeneration:!1,generateClassName:mOe,jss:pOe,sheetsCache:null,sheetsManager:gOe,sheetsRegistry:null},vOe=V.createContext(yOe);let i7=-1e9;function _Oe(){return i7+=1,i7}const xOe=["variant"];function o7(t){return t.length===0}function bOe(t){const{variant:e}=t,n=an(t,xOe);let r=e||"";return Object.keys(n).sort().forEach(i=>{i==="color"?r+=o7(r)?t[i]:Jt(t[i]):r+=`${o7(r)?i:Jt(i)}${Jt(t[i].toString())}`}),r}const wOe={};function SOe(t){const e=typeof t=="function";return{create:(n,r)=>{let i;try{i=e?t(n):t}catch(l){throw l}if(!r||!n.components||!n.components[r]||!n.components[r].styleOverrides&&!n.components[r].variants)return i;const o=n.components[r].styleOverrides||{},s=n.components[r].variants||[],a=de({},i);return Object.keys(o).forEach(l=>{a[l]=za(a[l]||{},o[l])}),s.forEach(l=>{const d=bOe(l.props);a[d]=za(a[d]||{},l.style)}),a},options:{}}}const MOe=["name","classNamePrefix","Component","defaultTheme"];function EOe({state:t,stylesOptions:e},n,r){if(e.disableGeneration)return n||{};t.cacheClasses||(t.cacheClasses={value:null,lastProp:null,lastJSS:{}});let i=!1;return t.classes!==t.cacheClasses.lastJSS&&(t.cacheClasses.lastJSS=t.classes,i=!0),n!==t.cacheClasses.lastProp&&(t.cacheClasses.lastProp=n,i=!0),i&&(t.cacheClasses.value=Kre({baseClasses:t.cacheClasses.lastJSS,newClasses:n,Component:r})),t.cacheClasses.value}function TOe({state:t,theme:e,stylesOptions:n,stylesCreator:r,name:i},o){if(n.disableGeneration)return;let s=Jx.get(n.sheetsManager,r,e);s||(s={refs:0,staticSheet:null,dynamicStyles:null},Jx.set(n.sheetsManager,r,e,s));const a=de({},r.options,n,{theme:e,flip:typeof n.flip=="boolean"?n.flip:e.direction==="rtl"});a.generateId=a.serverGenerateClassName||a.generateClassName;const l=n.sheetsRegistry;if(s.refs===0){let d;n.sheetsCache&&(d=Jx.get(n.sheetsCache,r,e));const h=r.create(e,i);d||(d=n.jss.createStyleSheet(h,de({link:!1},a)),d.attach(),n.sheetsCache&&Jx.set(n.sheetsCache,r,e,d)),l&&l.add(d),s.staticSheet=d,s.dynamicStyles=Yre(h)}if(s.dynamicStyles){const d=n.jss.createStyleSheet(s.dynamicStyles,de({link:!0},a));d.update(o),d.attach(),t.dynamicSheet=d,t.classes=Kre({baseClasses:s.staticSheet.classes,newClasses:d.classes}),l&&l.add(d)}else t.classes=s.staticSheet.classes;s.refs+=1}function COe({state:t},e){t.dynamicSheet&&t.dynamicSheet.update(e)}function AOe({state:t,theme:e,stylesOptions:n,stylesCreator:r}){if(n.disableGeneration)return;const i=Jx.get(n.sheetsManager,r,e);i.refs-=1;const o=n.sheetsRegistry;i.refs===0&&(Jx.delete(n.sheetsManager,r,e),n.jss.removeStyleSheet(i.staticSheet),o&&o.remove(i.staticSheet)),t.dynamicSheet&&(n.jss.removeStyleSheet(t.dynamicSheet),o&&o.remove(t.dynamicSheet))}function POe(t,e){const n=V.useRef([]);let r;const i=V.useMemo(()=>({}),e);n.current!==i&&(n.current=i,r=t()),V.useEffect(()=>()=>{r&&r()},[i])}function Wr(t,e={}){const{name:n,classNamePrefix:r,Component:i,defaultTheme:o=wOe}=e,s=an(e,MOe),a=SOe(t),l=n||r||"makeStyles";return a.options={index:_Oe(),name:n,meta:l,classNamePrefix:l},(h={})=>{const p=Zre()||o,g=de({},V.useContext(vOe),s),v=V.useRef(),x=V.useRef();return POe(()=>{const w={name:n,state:{},stylesCreator:a,stylesOptions:g,theme:p};return TOe(w,h),x.current=!1,v.current=w,()=>{AOe(w)}},[p,a]),V.useEffect(()=>{x.current&&COe(v.current,h),x.current=!0}),EOe(v.current,h.classes,i)}}const IOe="/assets/alarm-DM0YUa2r.mp3";function sie(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=sie(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function a_(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=sie(t))&&(r&&(r+=" "),r+=e);return r}let ROe={data:""},kOe=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||ROe,OOe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,LOe=/\/\*[^]*?\*\/|  +/g,s7=/\n+/g,Qv=(t,e)=>{let n="",r="",i="";for(let o in t){let s=t[o];o[0]=="@"?o[1]=="i"?n=o+" "+s+";":r+=o[1]=="f"?Qv(s,o):o+"{"+Qv(s,o[1]=="k"?"":e)+"}":typeof s=="object"?r+=Qv(s,e?e.replace(/([^,])+/g,a=>o.replace(/(^:.*)|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):o):s!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Qv.p?Qv.p(o,s):o+":"+s+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Lp={},aie=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+aie(t[n]);return e}return t},DOe=(t,e,n,r,i)=>{let o=aie(t),s=Lp[o]||(Lp[o]=(l=>{let d=0,h=11;for(;d<l.length;)h=101*h+l.charCodeAt(d++)>>>0;return"go"+h})(o));if(!Lp[s]){let l=o!==t?t:(d=>{let h,p,g=[{}];for(;h=OOe.exec(d.replace(LOe,""));)h[4]?g.shift():h[3]?(p=h[3].replace(s7," ").trim(),g.unshift(g[0][p]=g[0][p]||{})):g[0][h[1]]=h[2].replace(s7," ").trim();return g[0]})(t);Lp[s]=Qv(i?{["@keyframes "+s]:l}:l,n?"":"."+s)}let a=n&&Lp.g?Lp.g:null;return n&&(Lp.g=Lp[s]),((l,d,h,p)=>{p?d.data=d.data.replace(p,l):d.data.indexOf(l)===-1&&(d.data=h?l+d.data:d.data+l)})(Lp[s],e,r,a),s},NOe=(t,e,n)=>t.reduce((r,i,o)=>{let s=e[o];if(s&&s.call){let a=s(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;s=l?"."+l:a&&typeof a=="object"?a.props?"":Qv(a,""):a===!1?"":a}return r+i+(s??"")},"");function O$(t){let e=this||{},n=t.call?t(e.p):t;return DOe(n.unshift?n.raw?NOe(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,kOe(e.target),e.g,e.o,e.k)}O$.bind({g:1});O$.bind({k:1});function zOe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lie(t,e,n){return e&&zOe(t.prototype,e),t}function Yi(){return Yi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yi.apply(this,arguments)}function cie(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function BE(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function a7(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var l7=function(){return""},FOe=Ye.createContext({enqueueSnackbar:l7,closeSnackbar:l7}),Gv={downXs:"@media (max-width:599.95px)",upSm:"@media (min-width:600px)"},c7=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},L$=function(e){return""+c7(e.vertical)+c7(e.horizontal)},_C=function(e){return!!e||e===0},xC="unmounted",Q_="exited",ex="entering",hS="entered",u7="exiting",D$=function(t){cie(e,t);function e(r){var i;i=t.call(this,r)||this;var o=r.appear,s;return i.appearStatus=null,r.in?o?(s=Q_,i.appearStatus=ex):s=hS:r.unmountOnExit||r.mountOnEnter?s=xC:s=Q_,i.state={status:s},i.nextCallback=null,i}e.getDerivedStateFromProps=function(i,o){var s=i.in;return s&&o.status===xC?{status:Q_}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var o=null;if(i!==this.props){var s=this.state.status;this.props.in?s!==ex&&s!==hS&&(o=ex):(s===ex||s===hS)&&(o=u7)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,o=i,s=i;return i!=null&&typeof i!="number"&&typeof i!="string"&&(s=i.exit,o=i.enter),{exit:s,enter:o}},n.updateStatus=function(i,o){i===void 0&&(i=!1),o!==null?(this.cancelNextCallback(),o===ex?this.performEnter(i):this.performExit()):this.props.unmountOnExit&&this.state.status===Q_&&this.setState({status:xC})},n.performEnter=function(i){var o=this,s=this.props.enter,a=i,l=this.getTimeouts();if(!i&&!s){this.safeSetState({status:hS},function(){o.props.onEntered&&o.props.onEntered(o.node,a)});return}this.props.onEnter&&this.props.onEnter(this.node,a),this.safeSetState({status:ex},function(){o.props.onEntering&&o.props.onEntering(o.node,a),o.onTransitionEnd(l.enter,function(){o.safeSetState({status:hS},function(){o.props.onEntered&&o.props.onEntered(o.node,a)})})})},n.performExit=function(){var i=this,o=this.props.exit,s=this.getTimeouts();if(!o){this.safeSetState({status:Q_},function(){i.props.onExited&&i.props.onExited(i.node)});return}this.props.onExit&&this.props.onExit(this.node),this.safeSetState({status:u7},function(){i.props.onExiting&&i.props.onExiting(i.node),i.onTransitionEnd(s.exit,function(){i.safeSetState({status:Q_},function(){i.props.onExited&&i.props.onExited(i.node)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&this.nextCallback.cancel&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},n.setNextCallback=function(i){var o=this,s=!0;return this.nextCallback=function(){s&&(s=!1,o.nextCallback=null,i())},this.nextCallback.cancel=function(){s=!1},this.nextCallback},n.onTransitionEnd=function(i,o){this.setNextCallback(o);var s=i==null&&!this.props.addEndListener;if(!this.node||s){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(this.node,this.nextCallback),i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===xC)return null;var o=this.props,s=o.children,a=BE(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return s(i,a)},lie(e,[{key:"node",get:function(){var i,o=(i=this.props.nodeRef)===null||i===void 0?void 0:i.current;if(!o)throw new Error("notistack - Custom snackbar is not refForwarding");return o}}]),e}(Ye.Component);function tx(){}D$.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:tx,onEntering:tx,onEntered:tx,onExit:tx,onExiting:tx,onExited:tx};function d7(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function sB(t,e){return V.useMemo(function(){return t==null&&e==null?null:function(n){d7(t,n),d7(e,n)}},[t,e])}function fI(t){var e=t.timeout,n=t.style,r=n===void 0?{}:n,i=t.mode;return{duration:typeof e=="object"?e[i]||0:e,easing:r.transitionTimingFunction,delay:r.transitionDelay}}var aB={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},uie=function(e){e.scrollTop=e.scrollTop},h7=function(e){return Math.round(e)+"ms"};function Qx(t,e){t===void 0&&(t=["all"]);var n=e||{},r=n.duration,i=r===void 0?300:r,o=n.easing,s=o===void 0?aB.easeInOut:o,a=n.delay,l=a===void 0?0:a,d=Array.isArray(t)?t:[t];return d.map(function(h){var p=typeof i=="string"?i:h7(i),g=typeof l=="string"?l:h7(l);return h+" "+p+" "+s+" "+g}).join(",")}function BOe(t){return t&&t.ownerDocument||document}function die(t){var e=BOe(t);return e.defaultView||window}function jOe(t,e){e===void 0&&(e=166);var n;function r(){for(var i=this,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];var l=function(){t.apply(i,s)};clearTimeout(n),n=setTimeout(l,e)}return r.clear=function(){clearTimeout(n)},r}function $Oe(t,e){var n=e.getBoundingClientRect(),r=die(e),i;if(e.fakeTransform)i=e.fakeTransform;else{var o=r.getComputedStyle(e);i=o.getPropertyValue("-webkit-transform")||o.getPropertyValue("transform")}var s=0,a=0;if(i&&i!=="none"&&typeof i=="string"){var l=i.split("(")[1].split(")")[0].split(",");s=parseInt(l[4],10),a=parseInt(l[5],10)}switch(t){case"left":return"translateX("+(r.innerWidth+s-n.left)+"px)";case"right":return"translateX(-"+(n.left+n.width-s)+"px)";case"up":return"translateY("+(r.innerHeight+a-n.top)+"px)";default:return"translateY(-"+(n.top+n.height-a)+"px)"}}function bC(t,e){if(e){var n=$Oe(t,e);n&&(e.style.webkitTransform=n,e.style.transform=n)}}var hie=V.forwardRef(function(t,e){var n=t.children,r=t.direction,i=r===void 0?"down":r,o=t.in,s=t.style,a=t.timeout,l=a===void 0?0:a,d=t.onEnter,h=t.onEntered,p=t.onExit,g=t.onExited,v=BE(t,["children","direction","in","style","timeout","onEnter","onEntered","onExit","onExited"]),x=V.useRef(null),b=sB(n.ref,x),w=sB(b,e),S=function(B,W){bC(i,B),uie(B),d&&d(B,W)},C=function(B){var W=(s==null?void 0:s.transitionTimingFunction)||aB.easeOut,J=fI({timeout:l,mode:"enter",style:Yi({},s,{transitionTimingFunction:W})});B.style.webkitTransition=Qx("-webkit-transform",J),B.style.transition=Qx("transform",J),B.style.webkitTransform="none",B.style.transform="none"},A=function(B){var W=(s==null?void 0:s.transitionTimingFunction)||aB.sharp,J=fI({timeout:l,mode:"exit",style:Yi({},s,{transitionTimingFunction:W})});B.style.webkitTransition=Qx("-webkit-transform",J),B.style.transition=Qx("transform",J),bC(i,B),p&&p(B)},P=function(B){B.style.webkitTransition="",B.style.transition="",g&&g(B)},k=V.useCallback(function(){x.current&&bC(i,x.current)},[i]);return V.useEffect(function(){if(!(o||i==="down"||i==="right")){var F=jOe(function(){x.current&&bC(i,x.current)}),B=die(x.current);return B.addEventListener("resize",F),function(){F.clear(),B.removeEventListener("resize",F)}}},[i,o]),V.useEffect(function(){o||k()},[o,k]),V.createElement(D$,Object.assign({appear:!0,nodeRef:x,onEnter:S,onEntered:h,onEntering:C,onExit:A,onExited:P,in:o,timeout:l},v),function(F,B){return V.cloneElement(n,Yi({ref:w,style:Yi({visibility:F==="exited"&&!o?"hidden":void 0},s,{},n.props.style)},B))})});hie.displayName="Slide";var Hk=function(e){return Ye.createElement("svg",Object.assign({viewBox:"0 0 24 24",focusable:"false",style:{fontSize:20,marginInlineEnd:8,userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0}},e))},UOe=function(){return Ye.createElement(Hk,null,Ye.createElement("path",{d:`M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41
        10.59L10 14.17L17.59 6.58L19 8L10 17Z`}))},VOe=function(){return Ye.createElement(Hk,null,Ye.createElement("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"}))},HOe=function(){return Ye.createElement(Hk,null,Ye.createElement("path",{d:`M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,
        6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,
        13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z`}))},WOe=function(){return Ye.createElement(Hk,null,Ye.createElement("path",{d:`M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,
        0 22,12A10,10 0 0,0 12,2Z`}))},GOe={default:void 0,success:Ye.createElement(UOe,null),warning:Ye.createElement(VOe,null),error:Ye.createElement(HOe,null),info:Ye.createElement(WOe,null)},S0={maxSnack:3,persist:!1,hideIconVariant:!1,disableWindowBlurListener:!1,variant:"default",autoHideDuration:5e3,iconVariant:GOe,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:hie,transitionDuration:{enter:225,exit:195}},qOe=function(e,n){var r=function(o){return typeof o=="number"||o===null};return r(e)?e:r(n)?n:S0.autoHideDuration},XOe=function(e,n){var r=function(o,s){return s.some(function(a){return typeof o===a})};return r(e,["string","number"])?e:r(e,["object"])?Yi({},S0.transitionDuration,{},r(n,["object"])&&n,{},e):r(n,["string","number"])?n:r(n,["object"])?Yi({},S0.transitionDuration,{},n):S0.transitionDuration},YOe=function(e,n){return function(r,i){return i===void 0&&(i=!1),i?Yi({},S0[r],{},n[r],{},e[r]):r==="autoHideDuration"?qOe(e.autoHideDuration,n.autoHideDuration):r==="transitionDuration"?XOe(e.transitionDuration,n.transitionDuration):e[r]||n[r]||S0[r]}};function jE(t){return Object.entries(t).reduce(function(e,n){var r,i=n[0],o=n[1];return Yi({},e,(r={},r[i]=O$(o),r))},{})}var Qb={SnackbarContainer:"notistack-SnackbarContainer",Snackbar:"notistack-Snackbar",CollapseWrapper:"notistack-CollapseWrapper",MuiContent:"notistack-MuiContent",MuiContentVariant:function(e){return"notistack-MuiContent-"+e}},f7=jE({root:{height:0},entered:{height:"auto"}}),wD="0px",SD=175,fie=V.forwardRef(function(t,e){var n=t.children,r=t.in,i=t.onExited,o=V.useRef(null),s=V.useRef(null),a=sB(e,s),l=function(){return o.current?o.current.clientHeight:0},d=function(b){b.style.height=wD},h=function(b){var w=l(),S=fI({timeout:SD,mode:"enter"}),C=S.duration,A=S.easing;b.style.transitionDuration=typeof C=="string"?C:C+"ms",b.style.height=w+"px",b.style.transitionTimingFunction=A||""},p=function(b){b.style.height="auto"},g=function(b){b.style.height=l()+"px"},v=function(b){uie(b);var w=fI({timeout:SD,mode:"exit"}),S=w.duration,C=w.easing;b.style.transitionDuration=typeof S=="string"?S:S+"ms",b.style.height=wD,b.style.transitionTimingFunction=C||""};return V.createElement(D$,{in:r,unmountOnExit:!0,onEnter:d,onEntered:p,onEntering:h,onExit:g,onExited:i,onExiting:v,nodeRef:s,timeout:SD},function(x,b){return V.createElement("div",Object.assign({ref:a,className:a_(f7.root,x==="entered"&&f7.entered),style:Yi({pointerEvents:"all",overflow:"hidden",minHeight:wD,transition:Qx("height")},x==="entered"&&{overflow:"visible"},{},x==="exited"&&!r&&{visibility:"hidden"})},b),V.createElement("div",{ref:o,className:Qb.CollapseWrapper,style:{display:"flex",width:"100%"}},n))})});fie.displayName="Collapse";var p7={right:"left",left:"right",bottom:"up",top:"down"},KOe=function(e){return e.horizontal!=="center"?p7[e.horizontal]:p7[e.vertical]},ZOe=function(e){return"anchorOrigin"+L$(e)},JOe=function(e){e===void 0&&(e={});var n={containerRoot:!0,containerAnchorOriginTopCenter:!0,containerAnchorOriginBottomCenter:!0,containerAnchorOriginTopRight:!0,containerAnchorOriginBottomRight:!0,containerAnchorOriginTopLeft:!0,containerAnchorOriginBottomLeft:!0};return Object.keys(e).filter(function(r){return!n[r]}).reduce(function(r,i){var o;return Yi({},r,(o={},o[i]=e[i],o))},{})},QOe=function(){};function _2(t,e){return t.reduce(function(n,r){return r==null?n:function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];var l=[].concat(s);e&&l.indexOf(e)===-1&&l.push(e),n.apply(this,l),r.apply(this,l)}},QOe)}var eLe=typeof window<"u"?V.useLayoutEffect:V.useEffect;function m7(t){var e=V.useRef(t);return eLe(function(){e.current=t}),V.useCallback(function(){return e.current.apply(void 0,arguments)},[])}var pie=V.forwardRef(function(t,e){var n=t.children,r=t.className,i=t.autoHideDuration,o=t.disableWindowBlurListener,s=o===void 0?!1:o,a=t.onClose,l=t.id,d=t.open,h=t.SnackbarProps,p=h===void 0?{}:h,g=V.useRef(),v=m7(function(){a&&a.apply(void 0,arguments)}),x=m7(function(A){!a||A==null||(g.current&&clearTimeout(g.current),g.current=setTimeout(function(){v(null,"timeout",l)},A))});V.useEffect(function(){return d&&x(i),function(){g.current&&clearTimeout(g.current)}},[d,i,x]);var b=function(){g.current&&clearTimeout(g.current)},w=V.useCallback(function(){i!=null&&x(i*.5)},[i,x]),S=function(P){p.onMouseEnter&&p.onMouseEnter(P),b()},C=function(P){p.onMouseLeave&&p.onMouseLeave(P),w()};return V.useEffect(function(){if(!s&&d)return window.addEventListener("focus",w),window.addEventListener("blur",b),function(){window.removeEventListener("focus",w),window.removeEventListener("blur",b)}},[s,w,d]),V.createElement("div",Object.assign({ref:e},p,{className:a_(Qb.Snackbar,r),onMouseEnter:S,onMouseLeave:C}),n)});pie.displayName="Snackbar";var MD,tLe=jE({root:(MD={display:"flex",flexWrap:"wrap",flexGrow:1},MD[Gv.upSm]={flexGrow:"initial",minWidth:"288px"},MD)}),mie=V.forwardRef(function(t,e){var n=t.className,r=BE(t,["className"]);return Ye.createElement("div",Object.assign({ref:e,className:a_(tLe.root,n)},r))});mie.displayName="SnackbarContent";var fS=jE({root:{backgroundColor:"#313131",fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em",color:"#fff",alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"},lessPadding:{paddingLeft:8*2.5+"px"},default:{backgroundColor:"#313131"},success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},warning:{backgroundColor:"#ff9800"},info:{backgroundColor:"#2196f3"},message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:"16px",marginRight:"-8px"}}),g7="notistack-snackbar",gie=V.forwardRef(function(t,e){var n=t.id,r=t.message,i=t.action,o=t.iconVariant,s=t.variant,a=t.hideIconVariant,l=t.style,d=t.className,h=o[s],p=i;return typeof p=="function"&&(p=p(n)),Ye.createElement(mie,{ref:e,role:"alert","aria-describedby":g7,style:l,className:a_(Qb.MuiContent,Qb.MuiContentVariant(s),fS.root,fS[s],d,!a&&h&&fS.lessPadding)},Ye.createElement("div",{id:g7,className:fS.message},a?null:h,r),p&&Ye.createElement("div",{className:fS.action},p))});gie.displayName="MaterialDesignContent";var nLe=V.memo(gie),rLe=jE({wrappedRoot:{width:"100%",position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0,minWidth:"288px"}}),iLe=function(e){var n=V.useRef(),r=V.useState(!0),i=r[0],o=r[1],s=_2([e.snack.onClose,e.onClose]),a=function(){e.snack.requestClose&&s(null,"instructed",e.snack.id)},l=V.useCallback(function(){n.current=setTimeout(function(){o(function(J){return!J})},125)},[]);V.useEffect(function(){return function(){n.current&&clearTimeout(n.current)}},[]);var d=e.snack,h=e.classes,p=e.Component,g=p===void 0?nLe:p,v=V.useMemo(function(){return JOe(h)},[h]),x=d.open,b=d.SnackbarProps,w=d.TransitionComponent,S=d.TransitionProps,C=d.transitionDuration,A=d.disableWindowBlurListener,P=d.content,k=BE(d,["open","SnackbarProps","TransitionComponent","TransitionProps","transitionDuration","disableWindowBlurListener","content","entered","requestClose","onEnter","onEntered","onExit","onExited"]),F=Yi({direction:KOe(k.anchorOrigin),timeout:C},S),B=P;typeof B=="function"&&(B=B(k.id,k.message));var W=["onEnter","onEntered","onExit","onExited"].reduce(function(J,H){var Y;return Yi({},J,(Y={},Y[H]=_2([e.snack[H],e[H]],k.id),Y))},{});return Ye.createElement(fie,{in:i,onExited:W.onExited},Ye.createElement(pie,{open:x,id:k.id,disableWindowBlurListener:A,autoHideDuration:k.autoHideDuration,className:a_(rLe.wrappedRoot,v.root,v[ZOe(k.anchorOrigin)]),SnackbarProps:b,onClose:s},Ye.createElement(w,Object.assign({},F,{appear:!0,in:x,onExit:W.onExit,onExited:l,onEnter:W.onEnter,onEntered:_2([W.onEntered,a],k.id)}),B||Ye.createElement(g,Object.assign({},k)))))},pS,ED,wC,SC,TD,Dp={view:{default:20,dense:4},snackbar:{default:6,dense:2}},y7="."+Qb.CollapseWrapper,CD=16,MC=jE({root:(pS={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:1400,height:"auto",width:"auto",transition:Qx(["top","right","bottom","left","max-width"],{duration:300,easing:"ease"}),pointerEvents:"none"},pS[y7]={padding:Dp.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},pS.maxWidth="calc(100% - "+Dp.view.default*2+"px)",pS[Gv.downXs]={width:"100%",maxWidth:"calc(100% - "+CD*2+"px)"},pS),rootDense:(ED={},ED[y7]={padding:Dp.snackbar.dense+"px 0px"},ED),top:{top:Dp.view.default-Dp.snackbar.default+"px",flexDirection:"column"},bottom:{bottom:Dp.view.default-Dp.snackbar.default+"px",flexDirection:"column-reverse"},left:(wC={left:Dp.view.default+"px"},wC[Gv.upSm]={alignItems:"flex-start"},wC[Gv.downXs]={left:CD+"px"},wC),right:(SC={right:Dp.view.default+"px"},SC[Gv.upSm]={alignItems:"flex-end"},SC[Gv.downXs]={right:CD+"px"},SC),center:(TD={left:"50%",transform:"translateX(-50%)"},TD[Gv.upSm]={alignItems:"center"},TD)}),oLe=function(e){var n=e.classes,r=n===void 0?{}:n,i=e.anchorOrigin,o=e.dense,s=e.children,a=a_(Qb.SnackbarContainer,MC[i.vertical],MC[i.horizontal],MC.root,r.containerRoot,r["containerAnchorOrigin"+L$(i)],o&&MC.rootDense);return Ye.createElement("div",{className:a},s)},sLe=V.memo(oLe),v7=function(e){var n=typeof e=="string"||V.isValidElement(e);return!n},yie,aLe=function(t){cie(e,t);function e(r){var i;return i=t.call(this,r)||this,i.enqueueSnackbar=function(o,s){if(s===void 0&&(s={}),o==null)throw new Error("enqueueSnackbar called with invalid argument");var a=v7(o)?o:s,l=v7(o)?o.message:o,d=a.key,h=a.preventDuplicate,p=BE(a,["key","preventDuplicate"]),g=_C(d),v=g?d:new Date().getTime()+Math.random(),x=YOe(p,i.props),b=Yi({id:v},p,{message:l,open:!0,entered:!1,requestClose:!1,persist:x("persist"),action:x("action"),content:x("content"),variant:x("variant"),anchorOrigin:x("anchorOrigin"),disableWindowBlurListener:x("disableWindowBlurListener"),autoHideDuration:x("autoHideDuration"),hideIconVariant:x("hideIconVariant"),TransitionComponent:x("TransitionComponent"),transitionDuration:x("transitionDuration"),TransitionProps:x("TransitionProps",!0),iconVariant:x("iconVariant",!0),style:x("style",!0),SnackbarProps:x("SnackbarProps",!0),className:a_(i.props.className,p.className)});return b.persist&&(b.autoHideDuration=void 0),i.setState(function(w){if(h===void 0&&i.props.preventDuplicate||h){var S=function(k){return g?k.id===v:k.message===l},C=w.queue.findIndex(S)>-1,A=w.snacks.findIndex(S)>-1;if(C||A)return w}return i.handleDisplaySnack(Yi({},w,{queue:[].concat(w.queue,[b])}))}),v},i.handleDisplaySnack=function(o){var s=o.snacks;return s.length>=i.maxSnack?i.handleDismissOldest(o):i.processQueue(o)},i.processQueue=function(o){var s=o.queue,a=o.snacks;return s.length>0?Yi({},o,{snacks:[].concat(a,[s[0]]),queue:s.slice(1,s.length)}):o},i.handleDismissOldest=function(o){if(o.snacks.some(function(h){return!h.open||h.requestClose}))return o;var s=!1,a=!1,l=o.snacks.reduce(function(h,p){return h+(p.open&&p.persist?1:0)},0);l===i.maxSnack&&(a=!0);var d=o.snacks.map(function(h){return!s&&(!h.persist||a)?(s=!0,h.entered?(h.onClose&&h.onClose(null,"maxsnack",h.id),i.props.onClose&&i.props.onClose(null,"maxsnack",h.id),Yi({},h,{open:!1})):Yi({},h,{requestClose:!0})):Yi({},h)});return Yi({},o,{snacks:d})},i.handleEnteredSnack=function(o,s,a){if(!_C(a))throw new Error("handleEnteredSnack Cannot be called with undefined key");i.setState(function(l){var d=l.snacks;return{snacks:d.map(function(h){return h.id===a?Yi({},h,{entered:!0}):Yi({},h)})}})},i.handleCloseSnack=function(o,s,a){i.props.onClose&&i.props.onClose(o,s,a);var l=a===void 0;i.setState(function(d){var h=d.snacks,p=d.queue;return{snacks:h.map(function(g){return!l&&g.id!==a?Yi({},g):g.entered?Yi({},g,{open:!1}):Yi({},g,{requestClose:!0})}),queue:p.filter(function(g){return g.id!==a})}})},i.closeSnackbar=function(o){var s=i.state.snacks.find(function(a){return a.id===o});_C(o)&&s&&s.onClose&&s.onClose(null,"instructed",o),i.handleCloseSnack(null,"instructed",o)},i.handleExitedSnack=function(o,s){if(!_C(s))throw new Error("handleExitedSnack Cannot be called with undefined key");i.setState(function(a){var l=i.processQueue(Yi({},a,{snacks:a.snacks.filter(function(d){return d.id!==s})}));return l.queue.length===0?l:i.handleDismissOldest(l)})},yie=i.enqueueSnackbar,i.closeSnackbar,i.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:i.enqueueSnackbar.bind(a7(i)),closeSnackbar:i.closeSnackbar.bind(a7(i))}},i}var n=e.prototype;return n.render=function(){var i=this,o=this.state.contextValue,s=this.props,a=s.domRoot,l=s.children,d=s.dense,h=d===void 0?!1:d,p=s.Components,g=p===void 0?{}:p,v=s.classes,x=this.state.snacks.reduce(function(w,S){var C,A=L$(S.anchorOrigin),P=w[A]||[];return Yi({},w,(C={},C[A]=[].concat(P,[S]),C))},{}),b=Object.keys(x).map(function(w){var S=x[w],C=S[0];return Ye.createElement(sLe,{key:w,dense:h,anchorOrigin:C.anchorOrigin,classes:v},S.map(function(A){return Ye.createElement(iLe,{key:A.id,snack:A,classes:v,Component:g[A.variant],onClose:i.handleCloseSnack,onEnter:i.props.onEnter,onExit:i.props.onExit,onExited:_2([i.handleExitedSnack,i.props.onExited],A.id),onEntered:_2([i.handleEnteredSnack,i.props.onEntered],A.id)})}))});return Ye.createElement(FOe.Provider,{value:o},l,a?k1.createPortal(b,a):b)},lie(e,[{key:"maxSnack",get:function(){return this.props.maxSnack||S0.maxSnack}}]),e}(V.Component);const _7=4e3,lLe=()=>{const t=Ql();nr(d=>d.devices.items);const e=V.useRef(),[n,r]=V.useState(!0),[i,o]=V.useState([]),[s,a]=V.useState([]),l=()=>{const d=window.location.protocol==="https:"?"wss:":"ws:",h=new WebSocket(`${d}//${window.location.host}/api/socket`);console.log(`${d}//${window.location.host}/api/socket`),e.current=h,console.log("funcion web socket"),h.onopen=()=>{t(gh.updateSocket(!0)),console.log("funcion web socket open")},h.onclose=async p=>{if(console.log("funcion web socket close"),t(gh.updateSocket(!1)),p.code!==_7){try{const g=await fetch("/api/devices");g.ok&&t(ou.update(await g.json()));const v=await fetch("/api/positions");v.ok&&t(K3.updatePositions(await v.json())),g.status===401||v.status}catch{}setTimeout(()=>l(),6e4)}},h.onmessage=p=>{const g=JSON.parse(p.data);g.devices&&(g.devices.length>0?t(ou.update(g.devices)):t(ou.clear())),g.positions&&t(K3.updatePositions(g.positions)),g.camera&&t(K3.updateCamera(g.camera)),g.server&&(g.server.rosState==="connect"?t(gh.updateServerROS(!0)):t(gh.updateServerROS(!1))),g.mission&&(console.log("data mission"),console.log(g.mission),t(Af.updateMission(g.mission))),g.events&&(console.log("add data events -------"),t(U0e.add(g.events)),o(g.events),console.log(g.events)),g.markers&&(console.log("add markers"),t(gh.updateMarker(g.markers))),g.planning&&(console.log("add planning "),t(gh.updatePlanning(g.planning)))}};return Vy(async()=>{if(n){r(!1);const d=await fetch("/api/devices",{method:"GET"});if(d.ok)t(ou.refresh(await d.json()));else throw Error(await d.text());return console.log("Socket first connection"),l(),()=>{const h=e.current;h&&h.close(_7)}}return null},[]),V.useEffect(()=>{console.log("set notifications"),console.log(i);let d=[];i.map(h=>{let p=!0;s.map(g=>{g.id==h.id&&(p=!1)}),p&&d.push({id:h.id,type:h.type,message:h.attributes.message,show:!0})}),console.log("aux console log"),console.log(d),d.length>0&&a(d),d.forEach(h=>{h.type==="error"&&new Audio(IOe).play()})},[i]),V.useEffect(()=>{console.log("notifications"),console.log(s);for(let d=0;d<s.length;d+=1)yie(s[d].message,{variant:s[d].type,autoHideDuration:3e3,persist:!1,onClose:()=>o(i.filter(h=>h.id!==s[d].id))})},[s]),z.jsx(z.Fragment,{children:z.jsx(aLe,{preventDuplicate:!0,maxSnack:6,autoHideDuration:5e3,anchorOrigin:{vertical:"bottom",horizontal:"right"}})})},cLe=Gve()(lLe),uLe=Wr(()=>({page:{flexGrow:1,overflow:"auto"},menu:{zIndex:4}})),dLe=()=>{const t=uLe();return Od(),z.jsxs(z.Fragment,{children:[z.jsx(cLe,{}),z.jsx("div",{className:t.page,children:z.jsx($ye,{})})]})},hLe=()=>{const{search:t}=qR();return V.useMemo(()=>new URLSearchParams(t),[t])};var vie={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.6.0/LICENSE.txt
 */(function(t,e){(function(n,r){t.exports=r()})(zx,function(){var n={},r={};function i(s,a,l){if(r[s]=l,s==="index"){var d="var sharedModule = {}; ("+r.shared+")(sharedModule); ("+r.worker+")(sharedModule);",h={};return r.shared(h),r.index(n,h),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([d],{type:"text/javascript"}))),n}}i("shared",["exports"],function(s){function a(f,u,m,_){return new(m||(m=Promise))(function(R,O){function N(Z){try{G(_.next(Z))}catch(ne){O(ne)}}function $(Z){try{G(_.throw(Z))}catch(ne){O(ne)}}function G(Z){var ne;Z.done?R(Z.value):(ne=Z.value,ne instanceof m?ne:new m(function(oe){oe(ne)})).then(N,$)}G((_=_.apply(f,u||[])).next())})}function l(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}typeof SuppressedError=="function"&&SuppressedError;var d=h;function h(f,u){this.x=f,this.y=u}h.prototype={clone:function(){return new h(this.x,this.y)},add:function(f){return this.clone()._add(f)},sub:function(f){return this.clone()._sub(f)},multByPoint:function(f){return this.clone()._multByPoint(f)},divByPoint:function(f){return this.clone()._divByPoint(f)},mult:function(f){return this.clone()._mult(f)},div:function(f){return this.clone()._div(f)},rotate:function(f){return this.clone()._rotate(f)},rotateAround:function(f,u){return this.clone()._rotateAround(f,u)},matMult:function(f){return this.clone()._matMult(f)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(f){return this.x===f.x&&this.y===f.y},dist:function(f){return Math.sqrt(this.distSqr(f))},distSqr:function(f){var u=f.x-this.x,m=f.y-this.y;return u*u+m*m},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(f){return Math.atan2(this.y-f.y,this.x-f.x)},angleWith:function(f){return this.angleWithSep(f.x,f.y)},angleWithSep:function(f,u){return Math.atan2(this.x*u-this.y*f,this.x*f+this.y*u)},_matMult:function(f){var u=f[2]*this.x+f[3]*this.y;return this.x=f[0]*this.x+f[1]*this.y,this.y=u,this},_add:function(f){return this.x+=f.x,this.y+=f.y,this},_sub:function(f){return this.x-=f.x,this.y-=f.y,this},_mult:function(f){return this.x*=f,this.y*=f,this},_div:function(f){return this.x/=f,this.y/=f,this},_multByPoint:function(f){return this.x*=f.x,this.y*=f.y,this},_divByPoint:function(f){return this.x/=f.x,this.y/=f.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var f=this.y;return this.y=this.x,this.x=-f,this},_rotate:function(f){var u=Math.cos(f),m=Math.sin(f),_=m*this.x+u*this.y;return this.x=u*this.x-m*this.y,this.y=_,this},_rotateAround:function(f,u){var m=Math.cos(f),_=Math.sin(f),R=u.y+_*(this.x-u.x)+m*(this.y-u.y);return this.x=u.x+m*(this.x-u.x)-_*(this.y-u.y),this.y=R,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},h.convert=function(f){return f instanceof h?f:Array.isArray(f)?new h(f[0],f[1]):f};var p=l(d),g=v;function v(f,u,m,_){this.cx=3*f,this.bx=3*(m-f)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(_-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=f,this.p1y=u,this.p2x=m,this.p2y=_}v.prototype={sampleCurveX:function(f){return((this.ax*f+this.bx)*f+this.cx)*f},sampleCurveY:function(f){return((this.ay*f+this.by)*f+this.cy)*f},sampleCurveDerivativeX:function(f){return(3*this.ax*f+2*this.bx)*f+this.cx},solveCurveX:function(f,u){if(u===void 0&&(u=1e-6),f<0)return 0;if(f>1)return 1;for(var m=f,_=0;_<8;_++){var R=this.sampleCurveX(m)-f;if(Math.abs(R)<u)return m;var O=this.sampleCurveDerivativeX(m);if(Math.abs(O)<1e-6)break;m-=R/O}var N=0,$=1;for(m=f,_=0;_<20&&(R=this.sampleCurveX(m),!(Math.abs(R-f)<u));_++)f>R?N=m:$=m,m=.5*($-N)+N;return m},solve:function(f,u){return this.sampleCurveY(this.solveCurveX(f,u))}};var x=l(g);let b,w;function S(){return b==null&&(b=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),b}function C(){if(w==null&&(w=!1,S())){const u=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(u){for(let _=0;_<5*5;_++){const R=4*_;u.fillStyle=`rgb(${R},${R+1},${R+2})`,u.fillRect(_%5,Math.floor(_/5),1,1)}const m=u.getImageData(0,0,5,5).data;for(let _=0;_<5*5*4;_++)if(_%4!=3&&m[_]!==_){w=!0;break}}}return w||!1}function A(f,u,m,_){const R=new x(f,u,m,_);return O=>R.solve(O)}const P=A(.25,.1,.25,1);function k(f,u,m){return Math.min(m,Math.max(u,f))}function F(f,u,m){const _=m-u,R=((f-u)%_+_)%_+u;return R===u?m:R}function B(f,...u){for(const m of u)for(const _ in m)f[_]=m[_];return f}let W=1;function J(f,u,m){const _={};for(const R in f)_[R]=u.call(this,f[R],R,f);return _}function H(f,u,m){const _={};for(const R in f)u.call(this,f[R],R,f)&&(_[R]=f[R]);return _}function Y(f){return Array.isArray(f)?f.map(Y):typeof f=="object"&&f?J(f,Y):f}const le={};function pe(f){le[f]||(typeof console<"u"&&console.warn(f),le[f]=!0)}function re(f,u,m){return(m.y-f.y)*(u.x-f.x)>(u.y-f.y)*(m.x-f.x)}function me(f){return typeof WorkerGlobalScope<"u"&&f!==void 0&&f instanceof WorkerGlobalScope}let he=null;function we(f){return typeof ImageBitmap<"u"&&f instanceof ImageBitmap}const ee="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ye(f,u,m,_,R){return a(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const O=new VideoFrame(f,{timestamp:0});try{const N=O==null?void 0:O.format;if(!N||!N.startsWith("BGR")&&!N.startsWith("RGB"))throw new Error(`Unrecognized format ${N}`);const $=N.startsWith("BGR"),G=new Uint8ClampedArray(_*R*4);if(yield O.copyTo(G,function(Z,ne,oe,fe,_e){const Ce=4*Math.max(-ne,0),Ae=(Math.max(0,oe)-oe)*fe*4+Ce,Ue=4*fe,qe=Math.max(0,ne),bt=Math.max(0,oe);return{rect:{x:qe,y:bt,width:Math.min(Z.width,ne+fe)-qe,height:Math.min(Z.height,oe+_e)-bt},layout:[{offset:Ae,stride:Ue}]}}(f,u,m,_,R)),$)for(let Z=0;Z<G.length;Z+=4){const ne=G[Z];G[Z]=G[Z+2],G[Z+2]=ne}return G}finally{O.close()}})}let be,Le;const je="AbortError";function dt(){return new Error(je)}const Be={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ot(f){return Be.REGISTERED_PROTOCOLS[f.substring(0,f.indexOf("://"))]}const at="global-dispatcher";class It extends Error{constructor(u,m,_,R){super(`AJAXError: ${m} (${u}): ${_}`),this.status=u,this.statusText=m,this.url=_,this.body=R}}const Lt=()=>me(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,lt=function(f,u){if(/:\/\//.test(f.url)&&!/^https?:|^file:/.test(f.url)){const _=ot(f.url);if(_)return _(f,u);if(me(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,targetMapId:at},u)}if(!(/^file:/.test(m=f.url)||/^file:/.test(Lt())&&!/^\w+:/.test(m))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(_,R){return a(this,void 0,void 0,function*(){const O=new Request(_.url,{method:_.method||"GET",body:_.body,credentials:_.credentials,headers:_.headers,cache:_.cache,referrer:Lt(),signal:R.signal});_.type!=="json"||O.headers.has("Accept")||O.headers.set("Accept","application/json");const N=yield fetch(O);if(!N.ok){const Z=yield N.blob();throw new It(N.status,N.statusText,_.url,Z)}let $;$=_.type==="arrayBuffer"||_.type==="image"?N.arrayBuffer():_.type==="json"?N.json():N.text();const G=yield $;if(R.signal.aborted)throw dt();return{data:G,cacheControl:N.headers.get("Cache-Control"),expires:N.headers.get("Expires")}})}(f,u);if(me(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,mustQueue:!0,targetMapId:at},u)}var m;return function(_,R){return new Promise((O,N)=>{var $;const G=new XMLHttpRequest;G.open(_.method||"GET",_.url,!0),_.type!=="arrayBuffer"&&_.type!=="image"||(G.responseType="arraybuffer");for(const Z in _.headers)G.setRequestHeader(Z,_.headers[Z]);_.type==="json"&&(G.responseType="text",!(($=_.headers)===null||$===void 0)&&$.Accept||G.setRequestHeader("Accept","application/json")),G.withCredentials=_.credentials==="include",G.onerror=()=>{N(new Error(G.statusText))},G.onload=()=>{if(!R.signal.aborted)if((G.status>=200&&G.status<300||G.status===0)&&G.response!==null){let Z=G.response;if(_.type==="json")try{Z=JSON.parse(G.response)}catch(ne){return void N(ne)}O({data:Z,cacheControl:G.getResponseHeader("Cache-Control"),expires:G.getResponseHeader("Expires")})}else{const Z=new Blob([G.response],{type:G.getResponseHeader("Content-Type")});N(new It(G.status,G.statusText,_.url,Z))}},R.signal.addEventListener("abort",()=>{G.abort(),N(dt())}),G.send(_.body)})}(f,u)};function Je(f){if(!f||f.indexOf("://")<=0||f.indexOf("data:image/")===0||f.indexOf("blob:")===0)return!0;const u=new URL(f),m=window.location;return u.protocol===m.protocol&&u.host===m.host}function Qe(f,u,m){m[f]&&m[f].indexOf(u)!==-1||(m[f]=m[f]||[],m[f].push(u))}function ge(f,u,m){if(m&&m[f]){const _=m[f].indexOf(u);_!==-1&&m[f].splice(_,1)}}class et{constructor(u,m={}){B(this,m),this.type=u}}class Ke extends et{constructor(u,m={}){super("error",B({error:u},m))}}class Tt{on(u,m){return this._listeners=this._listeners||{},Qe(u,m,this._listeners),this}off(u,m){return ge(u,m,this._listeners),ge(u,m,this._oneTimeListeners),this}once(u,m){return m?(this._oneTimeListeners=this._oneTimeListeners||{},Qe(u,m,this._oneTimeListeners),this):new Promise(_=>this.once(u,_))}fire(u,m){typeof u=="string"&&(u=new et(u,m||{}));const _=u.type;if(this.listens(_)){u.target=this;const R=this._listeners&&this._listeners[_]?this._listeners[_].slice():[];for(const $ of R)$.call(this,u);const O=this._oneTimeListeners&&this._oneTimeListeners[_]?this._oneTimeListeners[_].slice():[];for(const $ of O)ge(_,$,this._oneTimeListeners),$.call(this,u);const N=this._eventedParent;N&&(B(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),N.fire(u))}else u instanceof Ke&&console.error(u.error);return this}listens(u){return this._listeners&&this._listeners[u]&&this._listeners[u].length>0||this._oneTimeListeners&&this._oneTimeListeners[u]&&this._oneTimeListeners[u].length>0||this._eventedParent&&this._eventedParent.listens(u)}setEventedParent(u,m){return this._eventedParent=u,this._eventedParentData=m,this}}var ke={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Vt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function zt(f,u){const m={};for(const _ in f)_!=="ref"&&(m[_]=f[_]);return Vt.forEach(_=>{_ in u&&(m[_]=u[_])}),m}function $t(f,u){if(Array.isArray(f)){if(!Array.isArray(u)||f.length!==u.length)return!1;for(let m=0;m<f.length;m++)if(!$t(f[m],u[m]))return!1;return!0}if(typeof f=="object"&&f!==null&&u!==null){if(typeof u!="object"||Object.keys(f).length!==Object.keys(u).length)return!1;for(const m in f)if(!$t(f[m],u[m]))return!1;return!0}return f===u}function Qt(f,u){f.push(u)}function Ie(f,u,m){Qt(m,{command:"addSource",args:[f,u[f]]})}function Me(f,u,m){Qt(u,{command:"removeSource",args:[f]}),m[f]=!0}function wt(f,u,m,_){Me(f,m,_),Ie(f,u,m)}function St(f,u,m){let _;for(_ in f[m])if(Object.prototype.hasOwnProperty.call(f[m],_)&&_!=="data"&&!$t(f[m][_],u[m][_]))return!1;for(_ in u[m])if(Object.prototype.hasOwnProperty.call(u[m],_)&&_!=="data"&&!$t(f[m][_],u[m][_]))return!1;return!0}function Bt(f,u,m,_,R,O){f=f||{},u=u||{};for(const N in f)Object.prototype.hasOwnProperty.call(f,N)&&($t(f[N],u[N])||m.push({command:O,args:[_,N,u[N],R]}));for(const N in u)Object.prototype.hasOwnProperty.call(u,N)&&!Object.prototype.hasOwnProperty.call(f,N)&&($t(f[N],u[N])||m.push({command:O,args:[_,N,u[N],R]}))}function jt(f){return f.id}function Rn(f,u){return f[u.id]=u,f}class ft{constructor(u,m,_,R){this.message=(u?`${u}: `:"")+_,R&&(this.identifier=R),m!=null&&m.__line__&&(this.line=m.__line__)}}function Rt(f,...u){for(const m of u)for(const _ in m)f[_]=m[_];return f}class Xt extends Error{constructor(u,m){super(m),this.message=m,this.key=u}}class Tn{constructor(u,m=[]){this.parent=u,this.bindings={};for(const[_,R]of m)this.bindings[_]=R}concat(u){return new Tn(this,u)}get(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw new Error(`${u} not found in scope.`)}has(u){return!!this.bindings[u]||!!this.parent&&this.parent.has(u)}}const en={kind:"null"},Et={kind:"number"},qt={kind:"string"},ht={kind:"boolean"},Ne={kind:"color"},pt={kind:"object"},Te={kind:"value"},xt={kind:"collator"},tn={kind:"formatted"},Xe={kind:"padding"},Yt={kind:"resolvedImage"},ve={kind:"variableAnchorOffsetCollection"};function ie(f,u){return{kind:"array",itemType:f,N:u}}function se(f){if(f.kind==="array"){const u=se(f.itemType);return typeof f.N=="number"?`array<${u}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${u}>`}return f.kind}const Se=[en,Et,qt,ht,Ne,tn,pt,ie(Te),Xe,Yt,ve];function De(f,u){if(u.kind==="error")return null;if(f.kind==="array"){if(u.kind==="array"&&(u.N===0&&u.itemType.kind==="value"||!De(f.itemType,u.itemType))&&(typeof f.N!="number"||f.N===u.N))return null}else{if(f.kind===u.kind)return null;if(f.kind==="value"){for(const m of Se)if(!De(m,u))return null}}return`Expected ${se(f)} but found ${se(u)} instead.`}function We(f,u){return u.some(m=>m.kind===f.kind)}function Ze(f,u){return u.some(m=>m==="null"?f===null:m==="array"?Array.isArray(f):m==="object"?f&&!Array.isArray(f)&&typeof f=="object":m===typeof f)}function tt(f,u){return f.kind==="array"&&u.kind==="array"?f.itemType.kind===u.itemType.kind&&typeof f.N=="number":f.kind===u.kind}const Ve=.96422,At=.82521,Dt=4/29,Ct=6/29,ln=3*Ct*Ct,Sn=Ct*Ct*Ct,zn=Math.PI/180,rr=180/Math.PI;function Cr(f){return(f%=360)<0&&(f+=360),f}function ir([f,u,m,_]){let R,O;const N=Ti((.2225045*(f=Yr(f))+.7168786*(u=Yr(u))+.0606169*(m=Yr(m)))/1);f===u&&u===m?R=O=N:(R=Ti((.4360747*f+.3850649*u+.1430804*m)/Ve),O=Ti((.0139322*f+.0971045*u+.7141733*m)/At));const $=116*N-16;return[$<0?0:$,500*(R-N),200*(N-O),_]}function Yr(f){return f<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function Ti(f){return f>Sn?Math.pow(f,1/3):f/ln+Dt}function Re([f,u,m,_]){let R=(f+16)/116,O=isNaN(u)?R:R+u/500,N=isNaN(m)?R:R-m/200;return R=1*Mt(R),O=Ve*Mt(O),N=At*Mt(N),[st(3.1338561*O-1.6168667*R-.4906146*N),st(-.9787684*O+1.9161415*R+.033454*N),st(.0719453*O-.2289914*R+1.4052427*N),_]}function st(f){return(f=f<=.00304?12.92*f:1.055*Math.pow(f,1/2.4)-.055)<0?0:f>1?1:f}function Mt(f){return f>Ct?f*f*f:ln*(f-Dt)}function ut(f){return parseInt(f.padEnd(2,f),16)/255}function vt(f,u){return mn(u?f/100:f,0,1)}function mn(f,u,m){return Math.min(Math.max(u,f),m)}function kn(f){return!f.some(Number.isNaN)}const tr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class bn{constructor(u,m,_,R=1,O=!0){this.r=u,this.g=m,this.b=_,this.a=R,O||(this.r*=R,this.g*=R,this.b*=R,R||this.overwriteGetter("rgb",[u,m,_,R]))}static parse(u){if(u instanceof bn)return u;if(typeof u!="string")return;const m=function(_){if((_=_.toLowerCase().trim())==="transparent")return[0,0,0,0];const R=tr[_];if(R){const[N,$,G]=R;return[N/255,$/255,G/255,1]}if(_.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(_)){const N=_.length<6?1:2;let $=1;return[ut(_.slice($,$+=N)),ut(_.slice($,$+=N)),ut(_.slice($,$+=N)),ut(_.slice($,$+N)||"ff")]}if(_.startsWith("rgb")){const N=_.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(N){const[$,G,Z,ne,oe,fe,_e,Ce,Ae,Ue,qe,bt]=N,rt=[ne||" ",_e||" ",Ue].join("");if(rt==="  "||rt==="  /"||rt===",,"||rt===",,,"){const gt=[Z,fe,Ae].join(""),Ot=gt==="%%%"?100:gt===""?255:0;if(Ot){const rn=[mn(+G/Ot,0,1),mn(+oe/Ot,0,1),mn(+Ce/Ot,0,1),qe?vt(+qe,bt):1];if(kn(rn))return rn}}return}}const O=_.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(O){const[N,$,G,Z,ne,oe,fe,_e,Ce]=O,Ae=[G||" ",ne||" ",fe].join("");if(Ae==="  "||Ae==="  /"||Ae===",,"||Ae===",,,"){const Ue=[+$,mn(+Z,0,100),mn(+oe,0,100),_e?vt(+_e,Ce):1];if(kn(Ue))return function([qe,bt,rt,gt]){function Ot(rn){const wn=(rn+qe/30)%12,er=bt*Math.min(rt,1-rt);return rt-er*Math.max(-1,Math.min(wn-3,9-wn,1))}return qe=Cr(qe),bt/=100,rt/=100,[Ot(0),Ot(8),Ot(4),gt]}(Ue)}}}(u);return m?new bn(...m,!1):void 0}get rgb(){const{r:u,g:m,b:_,a:R}=this,O=R||1/0;return this.overwriteGetter("rgb",[u/O,m/O,_/O,R])}get hcl(){return this.overwriteGetter("hcl",function(u){const[m,_,R,O]=ir(u),N=Math.sqrt(_*_+R*R);return[Math.round(1e4*N)?Cr(Math.atan2(R,_)*rr):NaN,N,m,O]}(this.rgb))}get lab(){return this.overwriteGetter("lab",ir(this.rgb))}overwriteGetter(u,m){return Object.defineProperty(this,u,{value:m}),m}toString(){const[u,m,_,R]=this.rgb;return`rgba(${[u,m,_].map(O=>Math.round(255*O)).join(",")},${R})`}}bn.black=new bn(0,0,0,1),bn.white=new bn(1,1,1,1),bn.transparent=new bn(0,0,0,0),bn.red=new bn(1,0,0,1);class mr{constructor(u,m,_){this.sensitivity=u?m?"variant":"case":m?"accent":"base",this.locale=_,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(u,m){return this.collator.compare(u,m)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class pr{constructor(u,m,_,R,O){this.text=u,this.image=m,this.scale=_,this.fontStack=R,this.textColor=O}}class Zn{constructor(u){this.sections=u}static fromString(u){return new Zn([new pr(u,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(u=>u.text.length!==0||u.image&&u.image.name.length!==0)}static factory(u){return u instanceof Zn?u:Zn.fromString(u)}toString(){return this.sections.length===0?"":this.sections.map(u=>u.text).join("")}}class $r{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof $r)return u;if(typeof u=="number")return new $r([u,u,u,u]);if(Array.isArray(u)&&!(u.length<1||u.length>4)){for(const m of u)if(typeof m!="number")return;switch(u.length){case 1:u=[u[0],u[0],u[0],u[0]];break;case 2:u=[u[0],u[1],u[0],u[1]];break;case 3:u=[u[0],u[1],u[2],u[1]]}return new $r(u)}}toString(){return JSON.stringify(this.values)}}const Jo=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Lr{constructor(u){this.values=u.slice()}static parse(u){if(u instanceof Lr)return u;if(Array.isArray(u)&&!(u.length<1)&&u.length%2==0){for(let m=0;m<u.length;m+=2){const _=u[m],R=u[m+1];if(typeof _!="string"||!Jo.has(_)||!Array.isArray(R)||R.length!==2||typeof R[0]!="number"||typeof R[1]!="number")return}return new Lr(u)}}toString(){return JSON.stringify(this.values)}}class Gr{constructor(u){this.name=u.name,this.available=u.available}toString(){return this.name}static fromString(u){return u?new Gr({name:u,available:!1}):null}}function sr(f,u,m,_){return typeof f=="number"&&f>=0&&f<=255&&typeof u=="number"&&u>=0&&u<=255&&typeof m=="number"&&m>=0&&m<=255?_===void 0||typeof _=="number"&&_>=0&&_<=1?null:`Invalid rgba value [${[f,u,m,_].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof _=="number"?[f,u,m,_]:[f,u,m]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function On(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof bn||f instanceof mr||f instanceof Zn||f instanceof $r||f instanceof Lr||f instanceof Gr)return!0;if(Array.isArray(f)){for(const u of f)if(!On(u))return!1;return!0}if(typeof f=="object"){for(const u in f)if(!On(f[u]))return!1;return!0}return!1}function ti(f){if(f===null)return en;if(typeof f=="string")return qt;if(typeof f=="boolean")return ht;if(typeof f=="number")return Et;if(f instanceof bn)return Ne;if(f instanceof mr)return xt;if(f instanceof Zn)return tn;if(f instanceof $r)return Xe;if(f instanceof Lr)return ve;if(f instanceof Gr)return Yt;if(Array.isArray(f)){const u=f.length;let m;for(const _ of f){const R=ti(_);if(m){if(m===R)continue;m=Te;break}m=R}return ie(m||Te,u)}return pt}function fr(f){const u=typeof f;return f===null?"":u==="string"||u==="number"||u==="boolean"?String(f):f instanceof bn||f instanceof Zn||f instanceof $r||f instanceof Lr||f instanceof Gr?f.toString():JSON.stringify(f)}class _i{constructor(u,m){this.type=u,this.value=m}static parse(u,m){if(u.length!==2)return m.error(`'literal' expression requires exactly one argument, but found ${u.length-1} instead.`);if(!On(u[1]))return m.error("invalid value");const _=u[1];let R=ti(_);const O=m.expectedType;return R.kind!=="array"||R.N!==0||!O||O.kind!=="array"||typeof O.N=="number"&&O.N!==0||(R=O),new _i(R,_)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class si{constructor(u){this.name="ExpressionEvaluationError",this.message=u}toJSON(){return this.message}}const As={string:qt,number:Et,boolean:ht,object:pt};class fi{constructor(u,m){this.type=u,this.args=m}static parse(u,m){if(u.length<2)return m.error("Expected at least one argument.");let _,R=1;const O=u[0];if(O==="array"){let $,G;if(u.length>2){const Z=u[1];if(typeof Z!="string"||!(Z in As)||Z==="object")return m.error('The item type argument of "array" must be one of string, number, boolean',1);$=As[Z],R++}else $=Te;if(u.length>3){if(u[2]!==null&&(typeof u[2]!="number"||u[2]<0||u[2]!==Math.floor(u[2])))return m.error('The length argument to "array" must be a positive integer literal',2);G=u[2],R++}_=ie($,G)}else{if(!As[O])throw new Error(`Types doesn't contain name = ${O}`);_=As[O]}const N=[];for(;R<u.length;R++){const $=m.parse(u[R],R,Te);if(!$)return null;N.push($)}return new fi(_,N)}evaluate(u){for(let m=0;m<this.args.length;m++){const _=this.args[m].evaluate(u);if(!De(this.type,ti(_)))return _;if(m===this.args.length-1)throw new si(`Expected value to be of type ${se(this.type)}, but found ${se(ti(_))} instead.`)}throw new Error}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const Bi={"to-boolean":ht,"to-color":Ne,"to-number":Et,"to-string":qt};class Qo{constructor(u,m){this.type=u,this.args=m}static parse(u,m){if(u.length<2)return m.error("Expected at least one argument.");const _=u[0];if(!Bi[_])throw new Error(`Can't parse ${_} as it is not part of the known types`);if((_==="to-boolean"||_==="to-string")&&u.length!==2)return m.error("Expected one argument.");const R=Bi[_],O=[];for(let N=1;N<u.length;N++){const $=m.parse(u[N],N,Te);if(!$)return null;O.push($)}return new Qo(R,O)}evaluate(u){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(u);case"color":{let m,_;for(const R of this.args){if(m=R.evaluate(u),_=null,m instanceof bn)return m;if(typeof m=="string"){const O=u.parseColor(m);if(O)return O}else if(Array.isArray(m)&&(_=m.length<3||m.length>4?`Invalid rbga value ${JSON.stringify(m)}: expected an array containing either three or four numeric values.`:sr(m[0],m[1],m[2],m[3]),!_))return new bn(m[0]/255,m[1]/255,m[2]/255,m[3])}throw new si(_||`Could not parse color from value '${typeof m=="string"?m:JSON.stringify(m)}'`)}case"padding":{let m;for(const _ of this.args){m=_.evaluate(u);const R=$r.parse(m);if(R)return R}throw new si(`Could not parse padding from value '${typeof m=="string"?m:JSON.stringify(m)}'`)}case"variableAnchorOffsetCollection":{let m;for(const _ of this.args){m=_.evaluate(u);const R=Lr.parse(m);if(R)return R}throw new si(`Could not parse variableAnchorOffsetCollection from value '${typeof m=="string"?m:JSON.stringify(m)}'`)}case"number":{let m=null;for(const _ of this.args){if(m=_.evaluate(u),m===null)return 0;const R=Number(m);if(!isNaN(R))return R}throw new si(`Could not convert ${JSON.stringify(m)} to number.`)}case"formatted":return Zn.fromString(fr(this.args[0].evaluate(u)));case"resolvedImage":return Gr.fromString(fr(this.args[0].evaluate(u)));default:return fr(this.args[0].evaluate(u))}}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}const ku=["Unknown","Point","LineString","Polygon"];class so{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ku[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(u){let m=this._parseColorCache[u];return m||(m=this._parseColorCache[u]=bn.parse(u)),m}}class ma{constructor(u,m,_=[],R,O=new Tn,N=[]){this.registry=u,this.path=_,this.key=_.map($=>`[${$}]`).join(""),this.scope=O,this.errors=N,this.expectedType=R,this._isConstant=m}parse(u,m,_,R,O={}){return m?this.concat(m,_,R)._parse(u,O):this._parse(u,O)}_parse(u,m){function _(R,O,N){return N==="assert"?new fi(O,[R]):N==="coerce"?new Qo(O,[R]):R}if(u!==null&&typeof u!="string"&&typeof u!="boolean"&&typeof u!="number"||(u=["literal",u]),Array.isArray(u)){if(u.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const R=u[0];if(typeof R!="string")return this.error(`Expression name must be a string, but found ${typeof R} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const O=this.registry[R];if(O){let N=O.parse(u,this);if(!N)return null;if(this.expectedType){const $=this.expectedType,G=N.type;if($.kind!=="string"&&$.kind!=="number"&&$.kind!=="boolean"&&$.kind!=="object"&&$.kind!=="array"||G.kind!=="value")if($.kind!=="color"&&$.kind!=="formatted"&&$.kind!=="resolvedImage"||G.kind!=="value"&&G.kind!=="string")if($.kind!=="padding"||G.kind!=="value"&&G.kind!=="number"&&G.kind!=="array")if($.kind!=="variableAnchorOffsetCollection"||G.kind!=="value"&&G.kind!=="array"){if(this.checkSubtype($,G))return null}else N=_(N,$,m.typeAnnotation||"coerce");else N=_(N,$,m.typeAnnotation||"coerce");else N=_(N,$,m.typeAnnotation||"coerce");else N=_(N,$,m.typeAnnotation||"assert")}if(!(N instanceof _i)&&N.type.kind!=="resolvedImage"&&this._isConstant(N)){const $=new so;try{N=new _i(N.type,N.evaluate($))}catch(G){return this.error(G.message),null}}return N}return this.error(`Unknown expression "${R}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(u===void 0?"'undefined' value invalid. Use null instead.":typeof u=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof u} instead.`)}concat(u,m,_){const R=typeof u=="number"?this.path.concat(u):this.path,O=_?this.scope.concat(_):this.scope;return new ma(this.registry,this._isConstant,R,m||null,O,this.errors)}error(u,...m){const _=`${this.key}${m.map(R=>`[${R}]`).join("")}`;this.errors.push(new Xt(_,u))}checkSubtype(u,m){const _=De(u,m);return _&&this.error(_),_}}class _r{constructor(u,m){this.type=m.type,this.bindings=[].concat(u),this.result=m}evaluate(u){return this.result.evaluate(u)}eachChild(u){for(const m of this.bindings)u(m[1]);u(this.result)}static parse(u,m){if(u.length<4)return m.error(`Expected at least 3 arguments, but found ${u.length-1} instead.`);const _=[];for(let O=1;O<u.length-1;O+=2){const N=u[O];if(typeof N!="string")return m.error(`Expected string, but found ${typeof N} instead.`,O);if(/[^a-zA-Z0-9_]/.test(N))return m.error("Variable names must contain only alphanumeric characters or '_'.",O);const $=m.parse(u[O+1],O+1);if(!$)return null;_.push([N,$])}const R=m.parse(u[u.length-1],u.length-1,m.expectedType,_);return R?new _r(_,R):null}outputDefined(){return this.result.outputDefined()}}class zd{constructor(u,m){this.type=m.type,this.name=u,this.boundExpression=m}static parse(u,m){if(u.length!==2||typeof u[1]!="string")return m.error("'var' expression requires exactly one string literal argument.");const _=u[1];return m.scope.has(_)?new zd(_,m.scope.get(_)):m.error(`Unknown variable "${_}". Make sure "${_}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(u){return this.boundExpression.evaluate(u)}eachChild(){}outputDefined(){return!1}}class ev{constructor(u,m,_){this.type=u,this.index=m,this.input=_}static parse(u,m){if(u.length!==3)return m.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const _=m.parse(u[1],1,Et),R=m.parse(u[2],2,ie(m.expectedType||Te));return _&&R?new ev(R.type.itemType,_,R):null}evaluate(u){const m=this.index.evaluate(u),_=this.input.evaluate(u);if(m<0)throw new si(`Array index out of bounds: ${m} < 0.`);if(m>=_.length)throw new si(`Array index out of bounds: ${m} > ${_.length-1}.`);if(m!==Math.floor(m))throw new si(`Array index must be an integer, but found ${m} instead.`);return _[m]}eachChild(u){u(this.index),u(this.input)}outputDefined(){return!1}}class ip{constructor(u,m){this.type=ht,this.needle=u,this.haystack=m}static parse(u,m){if(u.length!==3)return m.error(`Expected 2 arguments, but found ${u.length-1} instead.`);const _=m.parse(u[1],1,Te),R=m.parse(u[2],2,Te);return _&&R?We(_.type,[ht,qt,Et,en,Te])?new ip(_,R):m.error(`Expected first argument to be of type boolean, string, number or null, but found ${se(_.type)} instead`):null}evaluate(u){const m=this.needle.evaluate(u),_=this.haystack.evaluate(u);if(!_)return!1;if(!Ze(m,["boolean","string","number","null"]))throw new si(`Expected first argument to be of type boolean, string, number or null, but found ${se(ti(m))} instead.`);if(!Ze(_,["string","array"]))throw new si(`Expected second argument to be of type array or string, but found ${se(ti(_))} instead.`);return _.indexOf(m)>=0}eachChild(u){u(this.needle),u(this.haystack)}outputDefined(){return!0}}class Fd{constructor(u,m,_){this.type=Et,this.needle=u,this.haystack=m,this.fromIndex=_}static parse(u,m){if(u.length<=2||u.length>=5)return m.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const _=m.parse(u[1],1,Te),R=m.parse(u[2],2,Te);if(!_||!R)return null;if(!We(_.type,[ht,qt,Et,en,Te]))return m.error(`Expected first argument to be of type boolean, string, number or null, but found ${se(_.type)} instead`);if(u.length===4){const O=m.parse(u[3],3,Et);return O?new Fd(_,R,O):null}return new Fd(_,R)}evaluate(u){const m=this.needle.evaluate(u),_=this.haystack.evaluate(u);if(!Ze(m,["boolean","string","number","null"]))throw new si(`Expected first argument to be of type boolean, string, number or null, but found ${se(ti(m))} instead.`);let R;if(this.fromIndex&&(R=this.fromIndex.evaluate(u)),Ze(_,["string"])){const O=_.indexOf(m,R);return O===-1?-1:[..._.slice(0,O)].length}if(Ze(_,["array"]))return _.indexOf(m,R);throw new si(`Expected second argument to be of type array or string, but found ${se(ti(_))} instead.`)}eachChild(u){u(this.needle),u(this.haystack),this.fromIndex&&u(this.fromIndex)}outputDefined(){return!1}}class Bd{constructor(u,m,_,R,O,N){this.inputType=u,this.type=m,this.input=_,this.cases=R,this.outputs=O,this.otherwise=N}static parse(u,m){if(u.length<5)return m.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if(u.length%2!=1)return m.error("Expected an even number of arguments.");let _,R;m.expectedType&&m.expectedType.kind!=="value"&&(R=m.expectedType);const O={},N=[];for(let Z=2;Z<u.length-1;Z+=2){let ne=u[Z];const oe=u[Z+1];Array.isArray(ne)||(ne=[ne]);const fe=m.concat(Z);if(ne.length===0)return fe.error("Expected at least one branch label.");for(const Ce of ne){if(typeof Ce!="number"&&typeof Ce!="string")return fe.error("Branch labels must be numbers or strings.");if(typeof Ce=="number"&&Math.abs(Ce)>Number.MAX_SAFE_INTEGER)return fe.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ce=="number"&&Math.floor(Ce)!==Ce)return fe.error("Numeric branch labels must be integer values.");if(_){if(fe.checkSubtype(_,ti(Ce)))return null}else _=ti(Ce);if(O[String(Ce)]!==void 0)return fe.error("Branch labels must be unique.");O[String(Ce)]=N.length}const _e=m.parse(oe,Z,R);if(!_e)return null;R=R||_e.type,N.push(_e)}const $=m.parse(u[1],1,Te);if(!$)return null;const G=m.parse(u[u.length-1],u.length-1,R);return G?$.type.kind!=="value"&&m.concat(1).checkSubtype(_,$.type)?null:new Bd(_,R,$,O,N,G):null}evaluate(u){const m=this.input.evaluate(u);return(ti(m)===this.inputType&&this.outputs[this.cases[m]]||this.otherwise).evaluate(u)}eachChild(u){u(this.input),this.outputs.forEach(u),u(this.otherwise)}outputDefined(){return this.outputs.every(u=>u.outputDefined())&&this.otherwise.outputDefined()}}class Ou{constructor(u,m,_){this.type=u,this.branches=m,this.otherwise=_}static parse(u,m){if(u.length<4)return m.error(`Expected at least 3 arguments, but found only ${u.length-1}.`);if(u.length%2!=0)return m.error("Expected an odd number of arguments.");let _;m.expectedType&&m.expectedType.kind!=="value"&&(_=m.expectedType);const R=[];for(let N=1;N<u.length-1;N+=2){const $=m.parse(u[N],N,ht);if(!$)return null;const G=m.parse(u[N+1],N+1,_);if(!G)return null;R.push([$,G]),_=_||G.type}const O=m.parse(u[u.length-1],u.length-1,_);if(!O)return null;if(!_)throw new Error("Can't infer output type");return new Ou(_,R,O)}evaluate(u){for(const[m,_]of this.branches)if(m.evaluate(u))return _.evaluate(u);return this.otherwise.evaluate(u)}eachChild(u){for(const[m,_]of this.branches)u(m),u(_);u(this.otherwise)}outputDefined(){return this.branches.every(([u,m])=>m.outputDefined())&&this.otherwise.outputDefined()}}class jd{constructor(u,m,_,R){this.type=u,this.input=m,this.beginIndex=_,this.endIndex=R}static parse(u,m){if(u.length<=2||u.length>=5)return m.error(`Expected 3 or 4 arguments, but found ${u.length-1} instead.`);const _=m.parse(u[1],1,Te),R=m.parse(u[2],2,Et);if(!_||!R)return null;if(!We(_.type,[ie(Te),qt,Te]))return m.error(`Expected first argument to be of type array or string, but found ${se(_.type)} instead`);if(u.length===4){const O=m.parse(u[3],3,Et);return O?new jd(_.type,_,R,O):null}return new jd(_.type,_,R)}evaluate(u){const m=this.input.evaluate(u),_=this.beginIndex.evaluate(u);let R;if(this.endIndex&&(R=this.endIndex.evaluate(u)),Ze(m,["string"]))return[...m].slice(_,R).join("");if(Ze(m,["array"]))return m.slice(_,R);throw new si(`Expected first argument to be of type array or string, but found ${se(ti(m))} instead.`)}eachChild(u){u(this.input),u(this.beginIndex),this.endIndex&&u(this.endIndex)}outputDefined(){return!1}}function op(f,u){const m=f.length-1;let _,R,O=0,N=m,$=0;for(;O<=N;)if($=Math.floor((O+N)/2),_=f[$],R=f[$+1],_<=u){if($===m||u<R)return $;O=$+1}else{if(!(_>u))throw new si("Input is not a number.");N=$-1}return 0}class Wh{constructor(u,m,_){this.type=u,this.input=m,this.labels=[],this.outputs=[];for(const[R,O]of _)this.labels.push(R),this.outputs.push(O)}static parse(u,m){if(u.length-1<4)return m.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return m.error("Expected an even number of arguments.");const _=m.parse(u[1],1,Et);if(!_)return null;const R=[];let O=null;m.expectedType&&m.expectedType.kind!=="value"&&(O=m.expectedType);for(let N=1;N<u.length;N+=2){const $=N===1?-1/0:u[N],G=u[N+1],Z=N,ne=N+1;if(typeof $!="number")return m.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Z);if(R.length&&R[R.length-1][0]>=$)return m.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Z);const oe=m.parse(G,ne,O);if(!oe)return null;O=O||oe.type,R.push([$,oe])}return new Wh(O,_,R)}evaluate(u){const m=this.labels,_=this.outputs;if(m.length===1)return _[0].evaluate(u);const R=this.input.evaluate(u);if(R<=m[0])return _[0].evaluate(u);const O=m.length;return R>=m[O-1]?_[O-1].evaluate(u):_[op(m,R)].evaluate(u)}eachChild(u){u(this.input);for(const m of this.outputs)u(m)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function tv(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var nv=Gh;function Gh(f,u,m,_){this.cx=3*f,this.bx=3*(m-f)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(_-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=f,this.p1y=u,this.p2x=m,this.p2y=_}Gh.prototype={sampleCurveX:function(f){return((this.ax*f+this.bx)*f+this.cx)*f},sampleCurveY:function(f){return((this.ay*f+this.by)*f+this.cy)*f},sampleCurveDerivativeX:function(f){return(3*this.ax*f+2*this.bx)*f+this.cx},solveCurveX:function(f,u){if(u===void 0&&(u=1e-6),f<0)return 0;if(f>1)return 1;for(var m=f,_=0;_<8;_++){var R=this.sampleCurveX(m)-f;if(Math.abs(R)<u)return m;var O=this.sampleCurveDerivativeX(m);if(Math.abs(O)<1e-6)break;m-=R/O}var N=0,$=1;for(m=f,_=0;_<20&&(R=this.sampleCurveX(m),!(Math.abs(R-f)<u));_++)f>R?N=m:$=m,m=.5*($-N)+N;return m},solve:function(f,u){return this.sampleCurveY(this.solveCurveX(f,u))}};var xw=tv(nv);function nc(f,u,m){return f+m*(u-f)}function Fr(f,u,m){return f.map((_,R)=>nc(_,u[R],m))}const Ws={number:nc,color:function(f,u,m,_="rgb"){switch(_){case"rgb":{const[R,O,N,$]=Fr(f.rgb,u.rgb,m);return new bn(R,O,N,$,!1)}case"hcl":{const[R,O,N,$]=f.hcl,[G,Z,ne,oe]=u.hcl;let fe,_e;if(isNaN(R)||isNaN(G))isNaN(R)?isNaN(G)?fe=NaN:(fe=G,N!==1&&N!==0||(_e=Z)):(fe=R,ne!==1&&ne!==0||(_e=O));else{let bt=G-R;G>R&&bt>180?bt-=360:G<R&&R-G>180&&(bt+=360),fe=R+m*bt}const[Ce,Ae,Ue,qe]=function([bt,rt,gt,Ot]){return bt=isNaN(bt)?0:bt*zn,Re([gt,Math.cos(bt)*rt,Math.sin(bt)*rt,Ot])}([fe,_e??nc(O,Z,m),nc(N,ne,m),nc($,oe,m)]);return new bn(Ce,Ae,Ue,qe,!1)}case"lab":{const[R,O,N,$]=Re(Fr(f.lab,u.lab,m));return new bn(R,O,N,$,!1)}}},array:Fr,padding:function(f,u,m){return new $r(Fr(f.values,u.values,m))},variableAnchorOffsetCollection:function(f,u,m){const _=f.values,R=u.values;if(_.length!==R.length)throw new si(`Cannot interpolate values of different length. from: ${f.toString()}, to: ${u.toString()}`);const O=[];for(let N=0;N<_.length;N+=2){if(_[N]!==R[N])throw new si(`Cannot interpolate values containing mismatched anchors. from[${N}]: ${_[N]}, to[${N}]: ${R[N]}`);O.push(_[N]);const[$,G]=_[N+1],[Z,ne]=R[N+1];O.push([nc($,Z,m),nc(G,ne,m)])}return new Lr(O)}};class Ps{constructor(u,m,_,R,O){this.type=u,this.operator=m,this.interpolation=_,this.input=R,this.labels=[],this.outputs=[];for(const[N,$]of O)this.labels.push(N),this.outputs.push($)}static interpolationFactor(u,m,_,R){let O=0;if(u.name==="exponential")O=qh(m,u.base,_,R);else if(u.name==="linear")O=qh(m,1,_,R);else if(u.name==="cubic-bezier"){const N=u.controlPoints;O=new xw(N[0],N[1],N[2],N[3]).solve(qh(m,1,_,R))}return O}static parse(u,m){let[_,R,O,...N]=u;if(!Array.isArray(R)||R.length===0)return m.error("Expected an interpolation type expression.",1);if(R[0]==="linear")R={name:"linear"};else if(R[0]==="exponential"){const Z=R[1];if(typeof Z!="number")return m.error("Exponential interpolation requires a numeric base.",1,1);R={name:"exponential",base:Z}}else{if(R[0]!=="cubic-bezier")return m.error(`Unknown interpolation type ${String(R[0])}`,1,0);{const Z=R.slice(1);if(Z.length!==4||Z.some(ne=>typeof ne!="number"||ne<0||ne>1))return m.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);R={name:"cubic-bezier",controlPoints:Z}}}if(u.length-1<4)return m.error(`Expected at least 4 arguments, but found only ${u.length-1}.`);if((u.length-1)%2!=0)return m.error("Expected an even number of arguments.");if(O=m.parse(O,2,Et),!O)return null;const $=[];let G=null;_==="interpolate-hcl"||_==="interpolate-lab"?G=Ne:m.expectedType&&m.expectedType.kind!=="value"&&(G=m.expectedType);for(let Z=0;Z<N.length;Z+=2){const ne=N[Z],oe=N[Z+1],fe=Z+3,_e=Z+4;if(typeof ne!="number")return m.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',fe);if($.length&&$[$.length-1][0]>=ne)return m.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',fe);const Ce=m.parse(oe,_e,G);if(!Ce)return null;G=G||Ce.type,$.push([ne,Ce])}return tt(G,Et)||tt(G,Ne)||tt(G,Xe)||tt(G,ve)||tt(G,ie(Et))?new Ps(G,_,R,O,$):m.error(`Type ${se(G)} is not interpolatable.`)}evaluate(u){const m=this.labels,_=this.outputs;if(m.length===1)return _[0].evaluate(u);const R=this.input.evaluate(u);if(R<=m[0])return _[0].evaluate(u);const O=m.length;if(R>=m[O-1])return _[O-1].evaluate(u);const N=op(m,R),$=Ps.interpolationFactor(this.interpolation,R,m[N],m[N+1]),G=_[N].evaluate(u),Z=_[N+1].evaluate(u);switch(this.operator){case"interpolate":return Ws[this.type.kind](G,Z,$);case"interpolate-hcl":return Ws.color(G,Z,$,"hcl");case"interpolate-lab":return Ws.color(G,Z,$,"lab")}}eachChild(u){u(this.input);for(const m of this.outputs)u(m)}outputDefined(){return this.outputs.every(u=>u.outputDefined())}}function qh(f,u,m,_){const R=_-m,O=f-m;return R===0?0:u===1?O/R:(Math.pow(u,O)-1)/(Math.pow(u,R)-1)}class zm{constructor(u,m){this.type=u,this.args=m}static parse(u,m){if(u.length<2)return m.error("Expectected at least one argument.");let _=null;const R=m.expectedType;R&&R.kind!=="value"&&(_=R);const O=[];for(const $ of u.slice(1)){const G=m.parse($,1+O.length,_,void 0,{typeAnnotation:"omit"});if(!G)return null;_=_||G.type,O.push(G)}if(!_)throw new Error("No output type");const N=R&&O.some($=>De(R,$.type));return new zm(N?Te:_,O)}evaluate(u){let m,_=null,R=0;for(const O of this.args)if(R++,_=O.evaluate(u),_&&_ instanceof Gr&&!_.available&&(m||(m=_.name),_=null,R===this.args.length&&(_=m)),_!==null)break;return _}eachChild(u){this.args.forEach(u)}outputDefined(){return this.args.every(u=>u.outputDefined())}}function __(f,u){return f==="=="||f==="!="?u.kind==="boolean"||u.kind==="string"||u.kind==="number"||u.kind==="null"||u.kind==="value":u.kind==="string"||u.kind==="number"||u.kind==="value"}function Ro(f,u,m,_){return _.compare(u,m)===0}function Rc(f,u,m){const _=f!=="=="&&f!=="!=";return class _ie{constructor(O,N,$){this.type=ht,this.lhs=O,this.rhs=N,this.collator=$,this.hasUntypedArgument=O.type.kind==="value"||N.type.kind==="value"}static parse(O,N){if(O.length!==3&&O.length!==4)return N.error("Expected two or three arguments.");const $=O[0];let G=N.parse(O[1],1,Te);if(!G)return null;if(!__($,G.type))return N.concat(1).error(`"${$}" comparisons are not supported for type '${se(G.type)}'.`);let Z=N.parse(O[2],2,Te);if(!Z)return null;if(!__($,Z.type))return N.concat(2).error(`"${$}" comparisons are not supported for type '${se(Z.type)}'.`);if(G.type.kind!==Z.type.kind&&G.type.kind!=="value"&&Z.type.kind!=="value")return N.error(`Cannot compare types '${se(G.type)}' and '${se(Z.type)}'.`);_&&(G.type.kind==="value"&&Z.type.kind!=="value"?G=new fi(Z.type,[G]):G.type.kind!=="value"&&Z.type.kind==="value"&&(Z=new fi(G.type,[Z])));let ne=null;if(O.length===4){if(G.type.kind!=="string"&&Z.type.kind!=="string"&&G.type.kind!=="value"&&Z.type.kind!=="value")return N.error("Cannot use collator to compare non-string types.");if(ne=N.parse(O[3],3,xt),!ne)return null}return new _ie(G,Z,ne)}evaluate(O){const N=this.lhs.evaluate(O),$=this.rhs.evaluate(O);if(_&&this.hasUntypedArgument){const G=ti(N),Z=ti($);if(G.kind!==Z.kind||G.kind!=="string"&&G.kind!=="number")throw new si(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${G.kind}, ${Z.kind}) instead.`)}if(this.collator&&!_&&this.hasUntypedArgument){const G=ti(N),Z=ti($);if(G.kind!=="string"||Z.kind!=="string")return u(O,N,$)}return this.collator?m(O,N,$,this.collator.evaluate(O)):u(O,N,$)}eachChild(O){O(this.lhs),O(this.rhs),this.collator&&O(this.collator)}outputDefined(){return!0}}}const x_=Rc("==",function(f,u,m){return u===m},Ro),rv=Rc("!=",function(f,u,m){return u!==m},function(f,u,m,_){return!Ro(0,u,m,_)}),bw=Rc("<",function(f,u,m){return u<m},function(f,u,m,_){return _.compare(u,m)<0}),sp=Rc(">",function(f,u,m){return u>m},function(f,u,m,_){return _.compare(u,m)>0}),Ml=Rc("<=",function(f,u,m){return u<=m},function(f,u,m,_){return _.compare(u,m)<=0}),ww=Rc(">=",function(f,u,m){return u>=m},function(f,u,m,_){return _.compare(u,m)>=0});class Fm{constructor(u,m,_){this.type=xt,this.locale=_,this.caseSensitive=u,this.diacriticSensitive=m}static parse(u,m){if(u.length!==2)return m.error("Expected one argument.");const _=u[1];if(typeof _!="object"||Array.isArray(_))return m.error("Collator options argument must be an object.");const R=m.parse(_["case-sensitive"]!==void 0&&_["case-sensitive"],1,ht);if(!R)return null;const O=m.parse(_["diacritic-sensitive"]!==void 0&&_["diacritic-sensitive"],1,ht);if(!O)return null;let N=null;return _.locale&&(N=m.parse(_.locale,1,qt),!N)?null:new Fm(R,O,N)}evaluate(u){return new mr(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)}eachChild(u){u(this.caseSensitive),u(this.diacriticSensitive),this.locale&&u(this.locale)}outputDefined(){return!1}}class Ua{constructor(u,m,_,R,O){this.type=qt,this.number=u,this.locale=m,this.currency=_,this.minFractionDigits=R,this.maxFractionDigits=O}static parse(u,m){if(u.length!==3)return m.error("Expected two arguments.");const _=m.parse(u[1],1,Et);if(!_)return null;const R=u[2];if(typeof R!="object"||Array.isArray(R))return m.error("NumberFormat options argument must be an object.");let O=null;if(R.locale&&(O=m.parse(R.locale,1,qt),!O))return null;let N=null;if(R.currency&&(N=m.parse(R.currency,1,qt),!N))return null;let $=null;if(R["min-fraction-digits"]&&($=m.parse(R["min-fraction-digits"],1,Et),!$))return null;let G=null;return R["max-fraction-digits"]&&(G=m.parse(R["max-fraction-digits"],1,Et),!G)?null:new Ua(_,O,N,$,G)}evaluate(u){return new Intl.NumberFormat(this.locale?this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0}).format(this.number.evaluate(u))}eachChild(u){u(this.number),this.locale&&u(this.locale),this.currency&&u(this.currency),this.minFractionDigits&&u(this.minFractionDigits),this.maxFractionDigits&&u(this.maxFractionDigits)}outputDefined(){return!1}}class Va{constructor(u){this.type=tn,this.sections=u}static parse(u,m){if(u.length<2)return m.error("Expected at least one argument.");const _=u[1];if(!Array.isArray(_)&&typeof _=="object")return m.error("First argument must be an image or text section.");const R=[];let O=!1;for(let N=1;N<=u.length-1;++N){const $=u[N];if(O&&typeof $=="object"&&!Array.isArray($)){O=!1;let G=null;if($["font-scale"]&&(G=m.parse($["font-scale"],1,Et),!G))return null;let Z=null;if($["text-font"]&&(Z=m.parse($["text-font"],1,ie(qt)),!Z))return null;let ne=null;if($["text-color"]&&(ne=m.parse($["text-color"],1,Ne),!ne))return null;const oe=R[R.length-1];oe.scale=G,oe.font=Z,oe.textColor=ne}else{const G=m.parse(u[N],1,Te);if(!G)return null;const Z=G.type.kind;if(Z!=="string"&&Z!=="value"&&Z!=="null"&&Z!=="resolvedImage")return m.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");O=!0,R.push({content:G,scale:null,font:null,textColor:null})}}return new Va(R)}evaluate(u){return new Zn(this.sections.map(m=>{const _=m.content.evaluate(u);return ti(_)===Yt?new pr("",_,null,null,null):new pr(fr(_),null,m.scale?m.scale.evaluate(u):null,m.font?m.font.evaluate(u).join(","):null,m.textColor?m.textColor.evaluate(u):null)}))}eachChild(u){for(const m of this.sections)u(m.content),m.scale&&u(m.scale),m.font&&u(m.font),m.textColor&&u(m.textColor)}outputDefined(){return!1}}class Xh{constructor(u){this.type=Yt,this.input=u}static parse(u,m){if(u.length!==2)return m.error("Expected two arguments.");const _=m.parse(u[1],1,qt);return _?new Xh(_):m.error("No image name provided.")}evaluate(u){const m=this.input.evaluate(u),_=Gr.fromString(m);return _&&u.availableImages&&(_.available=u.availableImages.indexOf(m)>-1),_}eachChild(u){u(this.input)}outputDefined(){return!1}}class ap{constructor(u){this.type=Et,this.input=u}static parse(u,m){if(u.length!==2)return m.error(`Expected 1 argument, but found ${u.length-1} instead.`);const _=m.parse(u[1],1);return _?_.type.kind!=="array"&&_.type.kind!=="string"&&_.type.kind!=="value"?m.error(`Expected argument of type string or array, but found ${se(_.type)} instead.`):new ap(_):null}evaluate(u){const m=this.input.evaluate(u);if(typeof m=="string")return[...m].length;if(Array.isArray(m))return m.length;throw new si(`Expected value to be of type string or array, but found ${se(ti(m))} instead.`)}eachChild(u){u(this.input)}outputDefined(){return!1}}const El=8192;function iv(f,u){const m=(180+f[0])/360,_=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,R=Math.pow(2,u.z);return[Math.round(m*R*El),Math.round(_*R*El)]}function Is(f,u){const m=Math.pow(2,u.z);return[(R=(f[0]/El+u.x)/m,360*R-180),(_=(f[1]/El+u.y)/m,360/Math.PI*Math.atan(Math.exp((180-360*_)*Math.PI/180))-90)];var _,R}function Br(f,u){f[0]=Math.min(f[0],u[0]),f[1]=Math.min(f[1],u[1]),f[2]=Math.max(f[2],u[0]),f[3]=Math.max(f[3],u[1])}function Lu(f,u){return!(f[0]<=u[0]||f[2]>=u[2]||f[1]<=u[1]||f[3]>=u[3])}function Sw(f,u,m){const _=f[0]-u[0],R=f[1]-u[1],O=f[0]-m[0],N=f[1]-m[1];return _*N-O*R==0&&_*O<=0&&R*N<=0}function Gs(f,u,m,_){return(R=[_[0]-m[0],_[1]-m[1]])[0]*(O=[u[0]-f[0],u[1]-f[1]])[1]-R[1]*O[0]!=0&&!(!sv(f,u,m,_)||!sv(m,_,f,u));var R,O}function Bm(f,u,m){for(const _ of m)for(let R=0;R<_.length-1;++R)if(Gs(f,u,_[R],_[R+1]))return!0;return!1}function kc(f,u,m=!1){let _=!1;for(const $ of u)for(let G=0;G<$.length-1;G++){if(Sw(f,$[G],$[G+1]))return m;(O=$[G])[1]>(R=f)[1]!=(N=$[G+1])[1]>R[1]&&R[0]<(N[0]-O[0])*(R[1]-O[1])/(N[1]-O[1])+O[0]&&(_=!_)}var R,O,N;return _}function Yh(f,u){for(const m of u)if(kc(f,m))return!0;return!1}function jm(f,u){for(const m of f)if(!kc(m,u))return!1;for(let m=0;m<f.length-1;++m)if(Bm(f[m],f[m+1],u))return!1;return!0}function ov(f,u){for(const m of u)if(jm(f,m))return!0;return!1}function sv(f,u,m,_){const R=_[0]-m[0],O=_[1]-m[1],N=(f[0]-m[0])*O-R*(f[1]-m[1]),$=(u[0]-m[0])*O-R*(u[1]-m[1]);return N>0&&$<0||N<0&&$>0}function lp(f,u,m){const _=[];for(let R=0;R<f.length;R++){const O=[];for(let N=0;N<f[R].length;N++){const $=iv(f[R][N],m);Br(u,$),O.push($)}_.push(O)}return _}function $m(f,u,m){const _=[];for(let R=0;R<f.length;R++){const O=lp(f[R],u,m);_.push(O)}return _}function $d(f,u,m,_){if(f[0]<m[0]||f[0]>m[2]){const R=.5*_;let O=f[0]-m[0]>R?-_:m[0]-f[0]>R?_:0;O===0&&(O=f[0]-m[2]>R?-_:m[2]-f[0]>R?_:0),f[0]+=O}Br(u,f)}function ga(f,u,m,_){const R=Math.pow(2,_.z)*El,O=[_.x*El,_.y*El],N=[];for(const $ of f)for(const G of $){const Z=[G.x+O[0],G.y+O[1]];$d(Z,u,m,R),N.push(Z)}return N}function Tl(f,u,m,_){const R=Math.pow(2,_.z)*El,O=[_.x*El,_.y*El],N=[];for(const G of f){const Z=[];for(const ne of G){const oe=[ne.x+O[0],ne.y+O[1]];Br(u,oe),Z.push(oe)}N.push(Z)}if(u[2]-u[0]<=R/2){($=u)[0]=$[1]=1/0,$[2]=$[3]=-1/0;for(const G of N)for(const Z of G)$d(Z,u,m,R)}var $;return N}class qs{constructor(u,m){this.type=ht,this.geojson=u,this.geometries=m}static parse(u,m){if(u.length!==2)return m.error(`'within' expression requires exactly one argument, but found ${u.length-1} instead.`);if(On(u[1])){const _=u[1];if(_.type==="FeatureCollection"){const R=[];for(const O of _.features){const{type:N,coordinates:$}=O.geometry;N==="Polygon"&&R.push($),N==="MultiPolygon"&&R.push(...$)}if(R.length)return new qs(_,{type:"MultiPolygon",coordinates:R})}else if(_.type==="Feature"){const R=_.geometry.type;if(R==="Polygon"||R==="MultiPolygon")return new qs(_,_.geometry)}else if(_.type==="Polygon"||_.type==="MultiPolygon")return new qs(_,_)}return m.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(m,_){const R=[1/0,1/0,-1/0,-1/0],O=[1/0,1/0,-1/0,-1/0],N=m.canonicalID();if(_.type==="Polygon"){const $=lp(_.coordinates,O,N),G=ga(m.geometry(),R,O,N);if(!Lu(R,O))return!1;for(const Z of G)if(!kc(Z,$))return!1}if(_.type==="MultiPolygon"){const $=$m(_.coordinates,O,N),G=ga(m.geometry(),R,O,N);if(!Lu(R,O))return!1;for(const Z of G)if(!Yh(Z,$))return!1}return!0}(u,this.geometries);if(u.geometryType()==="LineString")return function(m,_){const R=[1/0,1/0,-1/0,-1/0],O=[1/0,1/0,-1/0,-1/0],N=m.canonicalID();if(_.type==="Polygon"){const $=lp(_.coordinates,O,N),G=Tl(m.geometry(),R,O,N);if(!Lu(R,O))return!1;for(const Z of G)if(!jm(Z,$))return!1}if(_.type==="MultiPolygon"){const $=$m(_.coordinates,O,N),G=Tl(m.geometry(),R,O,N);if(!Lu(R,O))return!1;for(const Z of G)if(!ov(Z,$))return!1}return!0}(u,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Um=class{constructor(f=[],u=(m,_)=>m<_?-1:m>_?1:0){if(this.data=f,this.length=this.data.length,this.compare=u,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(f){this.data.push(f),this._up(this.length++)}pop(){if(this.length===0)return;const f=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),f}peek(){return this.data[0]}_up(f){const{data:u,compare:m}=this,_=u[f];for(;f>0;){const R=f-1>>1,O=u[R];if(m(_,O)>=0)break;u[f]=O,f=R}u[f]=_}_down(f){const{data:u,compare:m}=this,_=this.length>>1,R=u[f];for(;f<_;){let O=1+(f<<1);const N=O+1;if(N<this.length&&m(u[N],u[O])<0&&(O=N),m(u[O],R)>=0)break;u[f]=u[O],f=O}u[f]=R}};function b_(f,u,m,_,R){rc(f,u,m,_||f.length-1,R||Vm)}function rc(f,u,m,_,R){for(;_>m;){if(_-m>600){var O=_-m+1,N=u-m+1,$=Math.log(O),G=.5*Math.exp(2*$/3),Z=.5*Math.sqrt($*G*(O-G)/O)*(N-O/2<0?-1:1);rc(f,u,Math.max(m,Math.floor(u-N*G/O+Z)),Math.min(_,Math.floor(u+(O-N)*G/O+Z)),R)}var ne=f[u],oe=m,fe=_;for(Ha(f,m,u),R(f[_],ne)>0&&Ha(f,m,_);oe<fe;){for(Ha(f,oe,fe),oe++,fe--;R(f[oe],ne)<0;)oe++;for(;R(f[fe],ne)>0;)fe--}R(f[m],ne)===0?Ha(f,m,fe):Ha(f,++fe,_),fe<=u&&(m=fe+1),u<=fe&&(_=fe-1)}}function Ha(f,u,m){var _=f[u];f[u]=f[m],f[m]=_}function Vm(f,u){return f<u?-1:f>u?1:0}function cp(f,u){if(f.length<=1)return[f];const m=[];let _,R;for(const O of f){const N=w_(O);N!==0&&(O.area=Math.abs(N),R===void 0&&(R=N<0),R===N<0?(_&&m.push(_),_=[O]):_.push(O))}if(_&&m.push(_),u>1)for(let O=0;O<m.length;O++)m[O].length<=u||(b_(m[O],u,1,m[O].length-1,Hm),m[O]=m[O].slice(0,u));return m}function Hm(f,u){return u.area-f.area}function w_(f){let u=0;for(let m,_,R=0,O=f.length,N=O-1;R<O;N=R++)m=f[R],_=f[N],u+=(_.x-m.x)*(m.y+_.y);return u}const av=1/298.257223563,Wm=av*(2-av),up=Math.PI/180;class Gm{constructor(u){const m=6378.137*up*1e3,_=Math.cos(u*up),R=1/(1-Wm*(1-_*_)),O=Math.sqrt(R);this.kx=m*O*_,this.ky=m*O*R*(1-Wm)}distance(u,m){const _=this.wrap(u[0]-m[0])*this.kx,R=(u[1]-m[1])*this.ky;return Math.sqrt(_*_+R*R)}pointOnLine(u,m){let _,R,O,N,$=1/0;for(let G=0;G<u.length-1;G++){let Z=u[G][0],ne=u[G][1],oe=this.wrap(u[G+1][0]-Z)*this.kx,fe=(u[G+1][1]-ne)*this.ky,_e=0;oe===0&&fe===0||(_e=(this.wrap(m[0]-Z)*this.kx*oe+(m[1]-ne)*this.ky*fe)/(oe*oe+fe*fe),_e>1?(Z=u[G+1][0],ne=u[G+1][1]):_e>0&&(Z+=oe/this.kx*_e,ne+=fe/this.ky*_e)),oe=this.wrap(m[0]-Z)*this.kx,fe=(m[1]-ne)*this.ky;const Ce=oe*oe+fe*fe;Ce<$&&($=Ce,_=Z,R=ne,O=G,N=_e)}return{point:[_,R],index:O,t:Math.max(0,Math.min(1,N))}}wrap(u){for(;u<-180;)u+=360;for(;u>180;)u-=360;return u}}function lv(f,u){return u[0]-f[0]}function dp(f){return f[1]-f[0]+1}function Cl(f,u){return f[1]>=f[0]&&f[1]<u}function Du(f,u){if(f[0]>f[1])return[null,null];const m=dp(f);if(u){if(m===2)return[f,null];const R=Math.floor(m/2);return[[f[0],f[0]+R],[f[0]+R,f[1]]]}if(m===1)return[f,null];const _=Math.floor(m/2)-1;return[[f[0],f[0]+_],[f[0]+_+1,f[1]]]}function ic(f,u){if(!Cl(u,f.length))return[1/0,1/0,-1/0,-1/0];const m=[1/0,1/0,-1/0,-1/0];for(let _=u[0];_<=u[1];++_)Br(m,f[_]);return m}function Kh(f){const u=[1/0,1/0,-1/0,-1/0];for(const m of f)for(const _ of m)Br(u,_);return u}function hp(f){return f[0]!==-1/0&&f[1]!==-1/0&&f[2]!==1/0&&f[3]!==1/0}function Xs(f,u,m){if(!hp(f)||!hp(u))return NaN;let _=0,R=0;return f[2]<u[0]&&(_=u[0]-f[2]),f[0]>u[2]&&(_=f[0]-u[2]),f[1]>u[3]&&(R=f[1]-u[3]),f[3]<u[1]&&(R=u[1]-f[3]),m.distance([0,0],[_,R])}function Uo(f,u,m){const _=m.pointOnLine(u,f);return m.distance(f,_.point)}function pi(f,u,m,_,R){const O=Math.min(Uo(f,[m,_],R),Uo(u,[m,_],R)),N=Math.min(Uo(m,[f,u],R),Uo(_,[f,u],R));return Math.min(O,N)}function Oc(f,u,m,_,R){if(!Cl(u,f.length)||!Cl(_,m.length))return 1/0;let O=1/0;for(let N=u[0];N<u[1];++N){const $=f[N],G=f[N+1];for(let Z=_[0];Z<_[1];++Z){const ne=m[Z],oe=m[Z+1];if(Gs($,G,ne,oe))return 0;O=Math.min(O,pi($,G,ne,oe,R))}}return O}function gr(f,u,m,_,R){if(!Cl(u,f.length)||!Cl(_,m.length))return NaN;let O=1/0;for(let N=u[0];N<=u[1];++N)for(let $=_[0];$<=_[1];++$)if(O=Math.min(O,R.distance(f[N],m[$])),O===0)return O;return O}function Lc(f,u,m){if(kc(f,u,!0))return 0;let _=1/0;for(const R of u){const O=R[0],N=R[R.length-1];if(O!==N&&(_=Math.min(_,Uo(f,[N,O],m)),_===0))return _;const $=m.pointOnLine(R,f);if(_=Math.min(_,m.distance(f,$.point)),_===0)return _}return _}function zi(f,u,m,_){if(!Cl(u,f.length))return NaN;for(let O=u[0];O<=u[1];++O)if(kc(f[O],m,!0))return 0;let R=1/0;for(let O=u[0];O<u[1];++O){const N=f[O],$=f[O+1];for(const G of m)for(let Z=0,ne=G.length,oe=ne-1;Z<ne;oe=Z++){const fe=G[oe],_e=G[Z];if(Gs(N,$,fe,_e))return 0;R=Math.min(R,pi(N,$,fe,_e,_))}}return R}function mi(f,u){for(const m of f)for(const _ of m)if(kc(_,u,!0))return!0;return!1}function Zh(f,u,m,_=1/0){const R=Kh(f),O=Kh(u);if(_!==1/0&&Xs(R,O,m)>=_)return _;if(Lu(R,O)){if(mi(f,u))return 0}else if(mi(u,f))return 0;let N=1/0;for(const $ of f)for(let G=0,Z=$.length,ne=Z-1;G<Z;ne=G++){const oe=$[ne],fe=$[G];for(const _e of u)for(let Ce=0,Ae=_e.length,Ue=Ae-1;Ce<Ae;Ue=Ce++){const qe=_e[Ue],bt=_e[Ce];if(Gs(oe,fe,qe,bt))return 0;N=Math.min(N,pi(oe,fe,qe,bt,m))}}return N}function Rs(f,u,m,_,R,O){if(!O)return;const N=Xs(ic(_,O),R,m);N<u&&f.push([N,O,[0,0]])}function es(f,u,m,_,R,O,N){if(!O||!N)return;const $=Xs(ic(_,O),ic(R,N),m);$<u&&f.push([$,O,N])}function Ci(f,u,m,_,R=1/0){let O=Math.min(_.distance(f[0],m[0][0]),R);if(O===0)return O;const N=new Um([[0,[0,f.length-1],[0,0]]],lv),$=Kh(m);for(;N.length>0;){const G=N.pop();if(G[0]>=O)continue;const Z=G[1],ne=u?50:100;if(dp(Z)<=ne){if(!Cl(Z,f.length))return NaN;if(u){const oe=zi(f,Z,m,_);if(isNaN(oe)||oe===0)return oe;O=Math.min(O,oe)}else for(let oe=Z[0];oe<=Z[1];++oe){const fe=Lc(f[oe],m,_);if(O=Math.min(O,fe),O===0)return 0}}else{const oe=Du(Z,u);Rs(N,O,_,f,$,oe[0]),Rs(N,O,_,f,$,oe[1])}}return O}function Nu(f,u,m,_,R,O=1/0){let N=Math.min(O,R.distance(f[0],m[0]));if(N===0)return N;const $=new Um([[0,[0,f.length-1],[0,m.length-1]]],lv);for(;$.length>0;){const G=$.pop();if(G[0]>=N)continue;const Z=G[1],ne=G[2],oe=u?50:100,fe=_?50:100;if(dp(Z)<=oe&&dp(ne)<=fe){if(!Cl(Z,f.length)&&Cl(ne,m.length))return NaN;let _e;if(u&&_)_e=Oc(f,Z,m,ne,R),N=Math.min(N,_e);else if(u&&!_){const Ce=f.slice(Z[0],Z[1]+1);for(let Ae=ne[0];Ae<=ne[1];++Ae)if(_e=Uo(m[Ae],Ce,R),N=Math.min(N,_e),N===0)return N}else if(!u&&_){const Ce=m.slice(ne[0],ne[1]+1);for(let Ae=Z[0];Ae<=Z[1];++Ae)if(_e=Uo(f[Ae],Ce,R),N=Math.min(N,_e),N===0)return N}else _e=gr(f,Z,m,ne,R),N=Math.min(N,_e)}else{const _e=Du(Z,u),Ce=Du(ne,_);es($,N,R,f,m,_e[0],Ce[0]),es($,N,R,f,m,_e[0],Ce[1]),es($,N,R,f,m,_e[1],Ce[0]),es($,N,R,f,m,_e[1],Ce[1])}}return N}function ya(f){return f.type==="MultiPolygon"?f.coordinates.map(u=>({type:"Polygon",coordinates:u})):f.type==="MultiLineString"?f.coordinates.map(u=>({type:"LineString",coordinates:u})):f.type==="MultiPoint"?f.coordinates.map(u=>({type:"Point",coordinates:u})):[f]}class zu{constructor(u,m){this.type=Et,this.geojson=u,this.geometries=m}static parse(u,m){if(u.length!==2)return m.error(`'distance' expression requires exactly one argument, but found ${u.length-1} instead.`);if(On(u[1])){const _=u[1];if(_.type==="FeatureCollection")return new zu(_,_.features.map(R=>ya(R.geometry)).flat());if(_.type==="Feature")return new zu(_,ya(_.geometry));if("type"in _&&"coordinates"in _)return new zu(_,ya(_))}return m.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(u){if(u.geometry()!=null&&u.canonicalID()!=null){if(u.geometryType()==="Point")return function(m,_){const R=m.geometry(),O=R.flat().map(G=>Is([G.x,G.y],m.canonical));if(R.length===0)return NaN;const N=new Gm(O[0][1]);let $=1/0;for(const G of _){switch(G.type){case"Point":$=Math.min($,Nu(O,!1,[G.coordinates],!1,N,$));break;case"LineString":$=Math.min($,Nu(O,!1,G.coordinates,!0,N,$));break;case"Polygon":$=Math.min($,Ci(O,!1,G.coordinates,N,$))}if($===0)return $}return $}(u,this.geometries);if(u.geometryType()==="LineString")return function(m,_){const R=m.geometry(),O=R.flat().map(G=>Is([G.x,G.y],m.canonical));if(R.length===0)return NaN;const N=new Gm(O[0][1]);let $=1/0;for(const G of _){switch(G.type){case"Point":$=Math.min($,Nu(O,!0,[G.coordinates],!1,N,$));break;case"LineString":$=Math.min($,Nu(O,!0,G.coordinates,!0,N,$));break;case"Polygon":$=Math.min($,Ci(O,!0,G.coordinates,N,$))}if($===0)return $}return $}(u,this.geometries);if(u.geometryType()==="Polygon")return function(m,_){const R=m.geometry();if(R.length===0||R[0].length===0)return NaN;const O=cp(R,0).map(G=>G.map(Z=>Z.map(ne=>Is([ne.x,ne.y],m.canonical)))),N=new Gm(O[0][0][0][1]);let $=1/0;for(const G of _)for(const Z of O){switch(G.type){case"Point":$=Math.min($,Ci([G.coordinates],!1,Z,N,$));break;case"LineString":$=Math.min($,Ci(G.coordinates,!0,Z,N,$));break;case"Polygon":$=Math.min($,Zh(Z,G.coordinates,N,$))}if($===0)return $}return $}(u,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Fu={"==":x_,"!=":rv,">":sp,"<":bw,">=":ww,"<=":Ml,array:fi,at:ev,boolean:fi,case:Ou,coalesce:zm,collator:Fm,format:Va,image:Xh,in:ip,"index-of":Fd,interpolate:Ps,"interpolate-hcl":Ps,"interpolate-lab":Ps,length:ap,let:_r,literal:_i,match:Bd,number:fi,"number-format":Ua,object:fi,slice:jd,step:Wh,string:fi,"to-boolean":Qo,"to-color":Qo,"to-number":Qo,"to-string":Qo,var:zd,within:qs,distance:zu};class ks{constructor(u,m,_,R){this.name=u,this.type=m,this._evaluate=_,this.args=R}evaluate(u){return this._evaluate(u,this.args)}eachChild(u){this.args.forEach(u)}outputDefined(){return!1}static parse(u,m){const _=u[0],R=ks.definitions[_];if(!R)return m.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0);const O=Array.isArray(R)?R[0]:R.type,N=Array.isArray(R)?[[R[1],R[2]]]:R.overloads,$=N.filter(([Z])=>!Array.isArray(Z)||Z.length===u.length-1);let G=null;for(const[Z,ne]of $){G=new ma(m.registry,Jh,m.path,null,m.scope);const oe=[];let fe=!1;for(let _e=1;_e<u.length;_e++){const Ce=u[_e],Ae=Array.isArray(Z)?Z[_e-1]:Z.type,Ue=G.parse(Ce,1+oe.length,Ae);if(!Ue){fe=!0;break}oe.push(Ue)}if(!fe)if(Array.isArray(Z)&&Z.length!==oe.length)G.error(`Expected ${Z.length} arguments, but found ${oe.length} instead.`);else{for(let _e=0;_e<oe.length;_e++){const Ce=Array.isArray(Z)?Z[_e]:Z.type,Ae=oe[_e];G.concat(_e+1).checkSubtype(Ce,Ae.type)}if(G.errors.length===0)return new ks(_,O,ne,oe)}}if($.length===1)m.errors.push(...G.errors);else{const Z=($.length?$:N).map(([oe])=>{return fe=oe,Array.isArray(fe)?`(${fe.map(se).join(", ")})`:`(${se(fe.type)}...)`;var fe}).join(" | "),ne=[];for(let oe=1;oe<u.length;oe++){const fe=m.parse(u[oe],1+ne.length);if(!fe)return null;ne.push(se(fe.type))}m.error(`Expected arguments of type ${Z}, but found (${ne.join(", ")}) instead.`)}return null}static register(u,m){ks.definitions=m;for(const _ in m)u[_]=ks}}function fp(f,[u,m,_,R]){u=u.evaluate(f),m=m.evaluate(f),_=_.evaluate(f);const O=R?R.evaluate(f):1,N=sr(u,m,_,O);if(N)throw new si(N);return new bn(u/255,m/255,_/255,O,!1)}function qm(f,u){return f in u}function Dc(f,u){const m=u[f];return m===void 0?null:m}function Wa(f){return{type:f}}function Jh(f){if(f instanceof zd)return Jh(f.boundExpression);if(f instanceof ks&&f.name==="error"||f instanceof Fm||f instanceof qs||f instanceof zu)return!1;const u=f instanceof Qo||f instanceof fi;let m=!0;return f.eachChild(_=>{m=u?m&&Jh(_):m&&_ instanceof _i}),!!m&&Bu(f)&&pp(f,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Bu(f){if(f instanceof ks&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof qs||f instanceof zu)return!1;let u=!0;return f.eachChild(m=>{u&&!Bu(m)&&(u=!1)}),u}function ju(f){if(f instanceof ks&&f.name==="feature-state")return!1;let u=!0;return f.eachChild(m=>{u&&!ju(m)&&(u=!1)}),u}function pp(f,u){if(f instanceof ks&&u.indexOf(f.name)>=0)return!1;let m=!0;return f.eachChild(_=>{m&&!pp(_,u)&&(m=!1)}),m}function cv(f){return{result:"success",value:f}}function Al(f){return{result:"error",value:f}}function Ud(f){return f["property-type"]==="data-driven"||f["property-type"]==="cross-faded-data-driven"}function Vd(f){return!!f.expression&&f.expression.parameters.indexOf("zoom")>-1}function Os(f){return!!f.expression&&f.expression.interpolated}function Mr(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}function Nc(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)}function Pl(f){return f}function mp(f,u){const m=u.type==="color",_=f.stops&&typeof f.stops[0][0]=="object",R=_||!(_||f.property!==void 0),O=f.type||(Os(u)?"exponential":"interval");if(m||u.type==="padding"){const ne=m?bn.parse:$r.parse;(f=Rt({},f)).stops&&(f.stops=f.stops.map(oe=>[oe[0],ne(oe[1])])),f.default=ne(f.default?f.default:u.default)}if(f.colorSpace&&(N=f.colorSpace)!=="rgb"&&N!=="hcl"&&N!=="lab")throw new Error(`Unknown color space: "${f.colorSpace}"`);var N;let $,G,Z;if(O==="exponential")$=Ai;else if(O==="interval")$=Qh;else if(O==="categorical"){$=Xm,G=Object.create(null);for(const ne of f.stops)G[ne[0]]=ne[1];Z=typeof f.stops[0][0]}else{if(O!=="identity")throw new Error(`Unknown function type "${O}"`);$=gp}if(_){const ne={},oe=[];for(let Ce=0;Ce<f.stops.length;Ce++){const Ae=f.stops[Ce],Ue=Ae[0].zoom;ne[Ue]===void 0&&(ne[Ue]={zoom:Ue,type:f.type,property:f.property,default:f.default,stops:[]},oe.push(Ue)),ne[Ue].stops.push([Ae[0].value,Ae[1]])}const fe=[];for(const Ce of oe)fe.push([ne[Ce].zoom,mp(ne[Ce],u)]);const _e={name:"linear"};return{kind:"composite",interpolationType:_e,interpolationFactor:Ps.interpolationFactor.bind(void 0,_e),zoomStops:fe.map(Ce=>Ce[0]),evaluate:({zoom:Ce},Ae)=>Ai({stops:fe,base:f.base},u,Ce).evaluate(Ce,Ae)}}if(R){const ne=O==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:ne,interpolationFactor:Ps.interpolationFactor.bind(void 0,ne),zoomStops:f.stops.map(oe=>oe[0]),evaluate:({zoom:oe})=>$(f,u,oe,G,Z)}}return{kind:"source",evaluate(ne,oe){const fe=oe&&oe.properties?oe.properties[f.property]:void 0;return fe===void 0?oc(f.default,u.default):$(f,u,fe,G,Z)}}}function oc(f,u,m){return f!==void 0?f:u!==void 0?u:m!==void 0?m:void 0}function Xm(f,u,m,_,R){return oc(typeof m===R?_[m]:void 0,f.default,u.default)}function Qh(f,u,m){if(Mr(m)!=="number")return oc(f.default,u.default);const _=f.stops.length;if(_===1||m<=f.stops[0][0])return f.stops[0][1];if(m>=f.stops[_-1][0])return f.stops[_-1][1];const R=op(f.stops.map(O=>O[0]),m);return f.stops[R][1]}function Ai(f,u,m){const _=f.base!==void 0?f.base:1;if(Mr(m)!=="number")return oc(f.default,u.default);const R=f.stops.length;if(R===1||m<=f.stops[0][0])return f.stops[0][1];if(m>=f.stops[R-1][0])return f.stops[R-1][1];const O=op(f.stops.map(ne=>ne[0]),m),N=function(ne,oe,fe,_e){const Ce=_e-fe,Ae=ne-fe;return Ce===0?0:oe===1?Ae/Ce:(Math.pow(oe,Ae)-1)/(Math.pow(oe,Ce)-1)}(m,_,f.stops[O][0],f.stops[O+1][0]),$=f.stops[O][1],G=f.stops[O+1][1],Z=Ws[u.type]||Pl;return typeof $.evaluate=="function"?{evaluate(...ne){const oe=$.evaluate.apply(void 0,ne),fe=G.evaluate.apply(void 0,ne);if(oe!==void 0&&fe!==void 0)return Z(oe,fe,N,f.colorSpace)}}:Z($,G,N,f.colorSpace)}function gp(f,u,m){switch(u.type){case"color":m=bn.parse(m);break;case"formatted":m=Zn.fromString(m.toString());break;case"resolvedImage":m=Gr.fromString(m.toString());break;case"padding":m=$r.parse(m);break;default:Mr(m)===u.type||u.type==="enum"&&u.values[m]||(m=void 0)}return oc(m,f.default,u.default)}ks.register(Fu,{error:[{kind:"error"},[qt],(f,[u])=>{throw new si(u.evaluate(f))}],typeof:[qt,[Te],(f,[u])=>se(ti(u.evaluate(f)))],"to-rgba":[ie(Et,4),[Ne],(f,[u])=>{const[m,_,R,O]=u.evaluate(f).rgb;return[255*m,255*_,255*R,O]}],rgb:[Ne,[Et,Et,Et],fp],rgba:[Ne,[Et,Et,Et,Et],fp],has:{type:ht,overloads:[[[qt],(f,[u])=>qm(u.evaluate(f),f.properties())],[[qt,pt],(f,[u,m])=>qm(u.evaluate(f),m.evaluate(f))]]},get:{type:Te,overloads:[[[qt],(f,[u])=>Dc(u.evaluate(f),f.properties())],[[qt,pt],(f,[u,m])=>Dc(u.evaluate(f),m.evaluate(f))]]},"feature-state":[Te,[qt],(f,[u])=>Dc(u.evaluate(f),f.featureState||{})],properties:[pt,[],f=>f.properties()],"geometry-type":[qt,[],f=>f.geometryType()],id:[Te,[],f=>f.id()],zoom:[Et,[],f=>f.globals.zoom],"heatmap-density":[Et,[],f=>f.globals.heatmapDensity||0],"line-progress":[Et,[],f=>f.globals.lineProgress||0],accumulated:[Te,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[Et,Wa(Et),(f,u)=>{let m=0;for(const _ of u)m+=_.evaluate(f);return m}],"*":[Et,Wa(Et),(f,u)=>{let m=1;for(const _ of u)m*=_.evaluate(f);return m}],"-":{type:Et,overloads:[[[Et,Et],(f,[u,m])=>u.evaluate(f)-m.evaluate(f)],[[Et],(f,[u])=>-u.evaluate(f)]]},"/":[Et,[Et,Et],(f,[u,m])=>u.evaluate(f)/m.evaluate(f)],"%":[Et,[Et,Et],(f,[u,m])=>u.evaluate(f)%m.evaluate(f)],ln2:[Et,[],()=>Math.LN2],pi:[Et,[],()=>Math.PI],e:[Et,[],()=>Math.E],"^":[Et,[Et,Et],(f,[u,m])=>Math.pow(u.evaluate(f),m.evaluate(f))],sqrt:[Et,[Et],(f,[u])=>Math.sqrt(u.evaluate(f))],log10:[Et,[Et],(f,[u])=>Math.log(u.evaluate(f))/Math.LN10],ln:[Et,[Et],(f,[u])=>Math.log(u.evaluate(f))],log2:[Et,[Et],(f,[u])=>Math.log(u.evaluate(f))/Math.LN2],sin:[Et,[Et],(f,[u])=>Math.sin(u.evaluate(f))],cos:[Et,[Et],(f,[u])=>Math.cos(u.evaluate(f))],tan:[Et,[Et],(f,[u])=>Math.tan(u.evaluate(f))],asin:[Et,[Et],(f,[u])=>Math.asin(u.evaluate(f))],acos:[Et,[Et],(f,[u])=>Math.acos(u.evaluate(f))],atan:[Et,[Et],(f,[u])=>Math.atan(u.evaluate(f))],min:[Et,Wa(Et),(f,u)=>Math.min(...u.map(m=>m.evaluate(f)))],max:[Et,Wa(Et),(f,u)=>Math.max(...u.map(m=>m.evaluate(f)))],abs:[Et,[Et],(f,[u])=>Math.abs(u.evaluate(f))],round:[Et,[Et],(f,[u])=>{const m=u.evaluate(f);return m<0?-Math.round(-m):Math.round(m)}],floor:[Et,[Et],(f,[u])=>Math.floor(u.evaluate(f))],ceil:[Et,[Et],(f,[u])=>Math.ceil(u.evaluate(f))],"filter-==":[ht,[qt,Te],(f,[u,m])=>f.properties()[u.value]===m.value],"filter-id-==":[ht,[Te],(f,[u])=>f.id()===u.value],"filter-type-==":[ht,[qt],(f,[u])=>f.geometryType()===u.value],"filter-<":[ht,[qt,Te],(f,[u,m])=>{const _=f.properties()[u.value],R=m.value;return typeof _==typeof R&&_<R}],"filter-id-<":[ht,[Te],(f,[u])=>{const m=f.id(),_=u.value;return typeof m==typeof _&&m<_}],"filter->":[ht,[qt,Te],(f,[u,m])=>{const _=f.properties()[u.value],R=m.value;return typeof _==typeof R&&_>R}],"filter-id->":[ht,[Te],(f,[u])=>{const m=f.id(),_=u.value;return typeof m==typeof _&&m>_}],"filter-<=":[ht,[qt,Te],(f,[u,m])=>{const _=f.properties()[u.value],R=m.value;return typeof _==typeof R&&_<=R}],"filter-id-<=":[ht,[Te],(f,[u])=>{const m=f.id(),_=u.value;return typeof m==typeof _&&m<=_}],"filter->=":[ht,[qt,Te],(f,[u,m])=>{const _=f.properties()[u.value],R=m.value;return typeof _==typeof R&&_>=R}],"filter-id->=":[ht,[Te],(f,[u])=>{const m=f.id(),_=u.value;return typeof m==typeof _&&m>=_}],"filter-has":[ht,[Te],(f,[u])=>u.value in f.properties()],"filter-has-id":[ht,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[ht,[ie(qt)],(f,[u])=>u.value.indexOf(f.geometryType())>=0],"filter-id-in":[ht,[ie(Te)],(f,[u])=>u.value.indexOf(f.id())>=0],"filter-in-small":[ht,[qt,ie(Te)],(f,[u,m])=>m.value.indexOf(f.properties()[u.value])>=0],"filter-in-large":[ht,[qt,ie(Te)],(f,[u,m])=>function(_,R,O,N){for(;O<=N;){const $=O+N>>1;if(R[$]===_)return!0;R[$]>_?N=$-1:O=$+1}return!1}(f.properties()[u.value],m.value,0,m.value.length-1)],all:{type:ht,overloads:[[[ht,ht],(f,[u,m])=>u.evaluate(f)&&m.evaluate(f)],[Wa(ht),(f,u)=>{for(const m of u)if(!m.evaluate(f))return!1;return!0}]]},any:{type:ht,overloads:[[[ht,ht],(f,[u,m])=>u.evaluate(f)||m.evaluate(f)],[Wa(ht),(f,u)=>{for(const m of u)if(m.evaluate(f))return!0;return!1}]]},"!":[ht,[ht],(f,[u])=>!u.evaluate(f)],"is-supported-script":[ht,[qt],(f,[u])=>{const m=f.globals&&f.globals.isSupportedScript;return!m||m(u.evaluate(f))}],upcase:[qt,[qt],(f,[u])=>u.evaluate(f).toUpperCase()],downcase:[qt,[qt],(f,[u])=>u.evaluate(f).toLowerCase()],concat:[qt,Wa(Te),(f,u)=>u.map(m=>fr(m.evaluate(f))).join("")],"resolved-locale":[qt,[xt],(f,[u])=>u.evaluate(f).resolvedLocale()]});class Hd{constructor(u,m){var _;this.expression=u,this._warningHistory={},this._evaluator=new so,this._defaultValue=m?(_=m).type==="color"&&Nc(_.default)?new bn(0,0,0,0):_.type==="color"?bn.parse(_.default)||null:_.type==="padding"?$r.parse(_.default)||null:_.type==="variableAnchorOffsetCollection"?Lr.parse(_.default)||null:_.default===void 0?null:_.default:null,this._enumValues=m&&m.type==="enum"?m.values:null}evaluateWithoutErrorHandling(u,m,_,R,O,N){return this._evaluator.globals=u,this._evaluator.feature=m,this._evaluator.featureState=_,this._evaluator.canonical=R,this._evaluator.availableImages=O||null,this._evaluator.formattedSection=N,this.expression.evaluate(this._evaluator)}evaluate(u,m,_,R,O,N){this._evaluator.globals=u,this._evaluator.feature=m||null,this._evaluator.featureState=_||null,this._evaluator.canonical=R,this._evaluator.availableImages=O||null,this._evaluator.formattedSection=N||null;try{const $=this.expression.evaluate(this._evaluator);if($==null||typeof $=="number"&&$!=$)return this._defaultValue;if(this._enumValues&&!($ in this._enumValues))throw new si(`Expected value to be one of ${Object.keys(this._enumValues).map(G=>JSON.stringify(G)).join(", ")}, but found ${JSON.stringify($)} instead.`);return $}catch($){return this._warningHistory[$.message]||(this._warningHistory[$.message]=!0,typeof console<"u"&&console.warn($.message)),this._defaultValue}}}function Wd(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in Fu}function $u(f,u){const m=new ma(Fu,Jh,[],u?function(R){const O={color:Ne,string:qt,number:Et,enum:qt,boolean:ht,formatted:tn,padding:Xe,resolvedImage:Yt,variableAnchorOffsetCollection:ve};return R.type==="array"?ie(O[R.value]||Te,R.length):O[R.type]}(u):void 0),_=m.parse(f,void 0,void 0,void 0,u&&u.type==="string"?{typeAnnotation:"coerce"}:void 0);return _?cv(new Hd(_,u)):Al(m.errors)}class ts{constructor(u,m){this.kind=u,this._styleExpression=m,this.isStateDependent=u!=="constant"&&!ju(m.expression)}evaluateWithoutErrorHandling(u,m,_,R,O,N){return this._styleExpression.evaluateWithoutErrorHandling(u,m,_,R,O,N)}evaluate(u,m,_,R,O,N){return this._styleExpression.evaluate(u,m,_,R,O,N)}}class Uu{constructor(u,m,_,R){this.kind=u,this.zoomStops=_,this._styleExpression=m,this.isStateDependent=u!=="camera"&&!ju(m.expression),this.interpolationType=R}evaluateWithoutErrorHandling(u,m,_,R,O,N){return this._styleExpression.evaluateWithoutErrorHandling(u,m,_,R,O,N)}evaluate(u,m,_,R,O,N){return this._styleExpression.evaluate(u,m,_,R,O,N)}interpolationFactor(u,m,_){return this.interpolationType?Ps.interpolationFactor(this.interpolationType,u,m,_):0}}function Qi(f,u){const m=$u(f,u);if(m.result==="error")return m;const _=m.value.expression,R=Bu(_);if(!R&&!Ud(u))return Al([new Xt("","data expressions not supported")]);const O=pp(_,["zoom"]);if(!O&&!Vd(u))return Al([new Xt("","zoom expressions not supported")]);const N=ao(_);return N||O?N instanceof Xt?Al([N]):N instanceof Ps&&!Os(u)?Al([new Xt("",'"interpolate" expressions cannot be used with this property')]):cv(N?new Uu(R?"camera":"composite",m.value,N.labels,N instanceof Ps?N.interpolation:void 0):new ts(R?"constant":"source",m.value)):Al([new Xt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ko{constructor(u,m){this._parameters=u,this._specification=m,Rt(this,mp(this._parameters,this._specification))}static deserialize(u){return new ko(u._parameters,u._specification)}static serialize(u){return{_parameters:u._parameters,_specification:u._specification}}}function ao(f){let u=null;if(f instanceof _r)u=ao(f.result);else if(f instanceof zm){for(const m of f.args)if(u=ao(m),u)break}else(f instanceof Wh||f instanceof Ps)&&f.input instanceof ks&&f.input.name==="zoom"&&(u=f);return u instanceof Xt||f.eachChild(m=>{const _=ao(m);_ instanceof Xt?u=_:!u&&_?u=new Xt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):u&&_&&u!==_&&(u=new Xt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),u}function ef(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(const u of f.slice(1))if(!ef(u)&&typeof u!="boolean")return!1;return!0;default:return!0}}const Vu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function sc(f){if(f==null)return{filter:()=>!0,needGeometry:!1};ef(f)||(f=Gd(f));const u=$u(f,Vu);if(u.result==="error")throw new Error(u.value.map(m=>`${m.key}: ${m.message}`).join(", "));return{filter:(m,_,R)=>u.value.evaluate(m,_,{},R),needGeometry:lo(f)}}function va(f,u){return f<u?-1:f>u?1:0}function lo(f){if(!Array.isArray(f))return!1;if(f[0]==="within"||f[0]==="distance")return!0;for(let u=1;u<f.length;u++)if(lo(f[u]))return!0;return!1}function Gd(f){if(!f)return!0;const u=f[0];return f.length<=1?u!=="any":u==="=="?yp(f[1],f[2],"=="):u==="!="?Ks(yp(f[1],f[2],"==")):u==="<"||u===">"||u==="<="||u===">="?yp(f[1],f[2],u):u==="any"?(m=f.slice(1),["any"].concat(m.map(Gd))):u==="all"?["all"].concat(f.slice(1).map(Gd)):u==="none"?["all"].concat(f.slice(1).map(Gd).map(Ks)):u==="in"?Ym(f[1],f.slice(2)):u==="!in"?Ks(Ym(f[1],f.slice(2))):u==="has"?Ys(f[1]):u!=="!has"||Ks(Ys(f[1]));var m}function yp(f,u,m){switch(f){case"$type":return[`filter-type-${m}`,u];case"$id":return[`filter-id-${m}`,u];default:return[`filter-${m}`,f,u]}}function Ym(f,u){if(u.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",u]];case"$id":return["filter-id-in",["literal",u]];default:return u.length>200&&!u.some(m=>typeof m!=typeof u[0])?["filter-in-large",f,["literal",u.sort(va)]]:["filter-in-small",f,["literal",u]]}}function Ys(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function Ks(f){return["!",f]}function Il(f){const u=typeof f;if(u==="number"||u==="boolean"||u==="string"||f==null)return JSON.stringify(f);if(Array.isArray(f)){let R="[";for(const O of f)R+=`${Il(O)},`;return`${R}]`}const m=Object.keys(f).sort();let _="{";for(let R=0;R<m.length;R++)_+=`${JSON.stringify(m[R])}:${Il(f[m[R]])},`;return`${_}}`}function Km(f){let u="";for(const m of Vt)u+=`/${Il(f[m])}`;return u}function qd(f){const u=f.value;return u?[new ft(f.key,u,"constants have been deprecated as of v8")]:[]}function eo(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function Ga(f){if(Array.isArray(f))return f.map(Ga);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){const u={};for(const m in f)u[m]=Ga(f[m]);return u}return eo(f)}function _a(f){const u=f.key,m=f.value,_=f.valueSpec||{},R=f.objectElementValidators||{},O=f.style,N=f.styleSpec,$=f.validateSpec;let G=[];const Z=Mr(m);if(Z!=="object")return[new ft(u,m,`object expected, ${Z} found`)];for(const ne in m){const oe=ne.split(".")[0],fe=_[oe]||_["*"];let _e;if(R[oe])_e=R[oe];else if(_[oe])_e=$;else if(R["*"])_e=R["*"];else{if(!_["*"]){G.push(new ft(u,m[ne],`unknown property "${ne}"`));continue}_e=$}G=G.concat(_e({key:(u&&`${u}.`)+ne,value:m[ne],valueSpec:fe,style:O,styleSpec:N,object:m,objectKey:ne,validateSpec:$},m))}for(const ne in _)R[ne]||_[ne].required&&_[ne].default===void 0&&m[ne]===void 0&&G.push(new ft(u,m,`missing required property "${ne}"`));return G}function tf(f){const u=f.value,m=f.valueSpec,_=f.style,R=f.styleSpec,O=f.key,N=f.arrayElementValidator||f.validateSpec;if(Mr(u)!=="array")return[new ft(O,u,`array expected, ${Mr(u)} found`)];if(m.length&&u.length!==m.length)return[new ft(O,u,`array length ${m.length} expected, length ${u.length} found`)];if(m["min-length"]&&u.length<m["min-length"])return[new ft(O,u,`array length at least ${m["min-length"]} expected, length ${u.length} found`)];let $={type:m.value,values:m.values};R.$version<7&&($.function=m.function),Mr(m.value)==="object"&&($=m.value);let G=[];for(let Z=0;Z<u.length;Z++)G=G.concat(N({array:u,arrayIndex:Z,value:u[Z],valueSpec:$,validateSpec:f.validateSpec,style:_,styleSpec:R,key:`${O}[${Z}]`}));return G}function vp(f){const u=f.key,m=f.value,_=f.valueSpec;let R=Mr(m);return R==="number"&&m!=m&&(R="NaN"),R!=="number"?[new ft(u,m,`number expected, ${R} found`)]:"minimum"in _&&m<_.minimum?[new ft(u,m,`${m} is less than the minimum value ${_.minimum}`)]:"maximum"in _&&m>_.maximum?[new ft(u,m,`${m} is greater than the maximum value ${_.maximum}`)]:[]}function _p(f){const u=f.valueSpec,m=eo(f.value.type);let _,R,O,N={};const $=m!=="categorical"&&f.value.property===void 0,G=!$,Z=Mr(f.value.stops)==="array"&&Mr(f.value.stops[0])==="array"&&Mr(f.value.stops[0][0])==="object",ne=_a({key:f.key,value:f.value,valueSpec:f.styleSpec.function,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(_e){if(m==="identity")return[new ft(_e.key,_e.value,'identity function may not have a "stops" property')];let Ce=[];const Ae=_e.value;return Ce=Ce.concat(tf({key:_e.key,value:Ae,valueSpec:_e.valueSpec,validateSpec:_e.validateSpec,style:_e.style,styleSpec:_e.styleSpec,arrayElementValidator:oe})),Mr(Ae)==="array"&&Ae.length===0&&Ce.push(new ft(_e.key,Ae,"array must have at least one stop")),Ce},default:function(_e){return _e.validateSpec({key:_e.key,value:_e.value,valueSpec:u,validateSpec:_e.validateSpec,style:_e.style,styleSpec:_e.styleSpec})}}});return m==="identity"&&$&&ne.push(new ft(f.key,f.value,'missing required property "property"')),m==="identity"||f.value.stops||ne.push(new ft(f.key,f.value,'missing required property "stops"')),m==="exponential"&&f.valueSpec.expression&&!Os(f.valueSpec)&&ne.push(new ft(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(G&&!Ud(f.valueSpec)?ne.push(new ft(f.key,f.value,"property functions not supported")):$&&!Vd(f.valueSpec)&&ne.push(new ft(f.key,f.value,"zoom functions not supported"))),m!=="categorical"&&!Z||f.value.property!==void 0||ne.push(new ft(f.key,f.value,'"property" property is required')),ne;function oe(_e){let Ce=[];const Ae=_e.value,Ue=_e.key;if(Mr(Ae)!=="array")return[new ft(Ue,Ae,`array expected, ${Mr(Ae)} found`)];if(Ae.length!==2)return[new ft(Ue,Ae,`array length 2 expected, length ${Ae.length} found`)];if(Z){if(Mr(Ae[0])!=="object")return[new ft(Ue,Ae,`object expected, ${Mr(Ae[0])} found`)];if(Ae[0].zoom===void 0)return[new ft(Ue,Ae,"object stop key must have zoom")];if(Ae[0].value===void 0)return[new ft(Ue,Ae,"object stop key must have value")];if(O&&O>eo(Ae[0].zoom))return[new ft(Ue,Ae[0].zoom,"stop zoom values must appear in ascending order")];eo(Ae[0].zoom)!==O&&(O=eo(Ae[0].zoom),R=void 0,N={}),Ce=Ce.concat(_a({key:`${Ue}[0]`,value:Ae[0],valueSpec:{zoom:{}},validateSpec:_e.validateSpec,style:_e.style,styleSpec:_e.styleSpec,objectElementValidators:{zoom:vp,value:fe}}))}else Ce=Ce.concat(fe({key:`${Ue}[0]`,value:Ae[0],valueSpec:{},validateSpec:_e.validateSpec,style:_e.style,styleSpec:_e.styleSpec},Ae));return Wd(Ga(Ae[1]))?Ce.concat([new ft(`${Ue}[1]`,Ae[1],"expressions are not allowed in function stops.")]):Ce.concat(_e.validateSpec({key:`${Ue}[1]`,value:Ae[1],valueSpec:u,validateSpec:_e.validateSpec,style:_e.style,styleSpec:_e.styleSpec}))}function fe(_e,Ce){const Ae=Mr(_e.value),Ue=eo(_e.value),qe=_e.value!==null?_e.value:Ce;if(_){if(Ae!==_)return[new ft(_e.key,qe,`${Ae} stop domain type must match previous stop domain type ${_}`)]}else _=Ae;if(Ae!=="number"&&Ae!=="string"&&Ae!=="boolean")return[new ft(_e.key,qe,"stop domain value must be a number, string, or boolean")];if(Ae!=="number"&&m!=="categorical"){let bt=`number expected, ${Ae} found`;return Ud(u)&&m===void 0&&(bt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ft(_e.key,qe,bt)]}return m!=="categorical"||Ae!=="number"||isFinite(Ue)&&Math.floor(Ue)===Ue?m!=="categorical"&&Ae==="number"&&R!==void 0&&Ue<R?[new ft(_e.key,qe,"stop domain values must appear in ascending order")]:(R=Ue,m==="categorical"&&Ue in N?[new ft(_e.key,qe,"stop domain values must be unique")]:(N[Ue]=!0,[])):[new ft(_e.key,qe,`integer expected, found ${Ue}`)]}}function zc(f){const u=(f.expressionContext==="property"?Qi:$u)(Ga(f.value),f.valueSpec);if(u.result==="error")return u.value.map(_=>new ft(`${f.key}${_.key}`,f.value,_.message));const m=u.value.expression||u.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!m.outputDefined())return[new ft(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!ju(m))return[new ft(f.key,f.value,'"feature-state" data expressions are not supported with layout properties.')];if(f.expressionContext==="filter"&&!ju(m))return[new ft(f.key,f.value,'"feature-state" data expressions are not supported with filters.')];if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!pp(m,["zoom","feature-state"]))return[new ft(f.key,f.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(f.expressionContext==="cluster-initial"&&!Bu(m))return[new ft(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ac(f){const u=f.key,m=f.value,_=f.valueSpec,R=[];return Array.isArray(_.values)?_.values.indexOf(eo(m))===-1&&R.push(new ft(u,m,`expected one of [${_.values.join(", ")}], ${JSON.stringify(m)} found`)):Object.keys(_.values).indexOf(eo(m))===-1&&R.push(new ft(u,m,`expected one of [${Object.keys(_.values).join(", ")}], ${JSON.stringify(m)} found`)),R}function Zm(f){return ef(Ga(f.value))?zc(Rt({},f,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Xd(f)}function Xd(f){const u=f.value,m=f.key;if(Mr(u)!=="array")return[new ft(m,u,`array expected, ${Mr(u)} found`)];const _=f.styleSpec;let R,O=[];if(u.length<1)return[new ft(m,u,"filter array must have at least 1 element")];switch(O=O.concat(ac({key:`${m}[0]`,value:u[0],valueSpec:_.filter_operator,style:f.style,styleSpec:f.styleSpec})),eo(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&eo(u[1])==="$type"&&O.push(new ft(m,u,`"$type" cannot be use with operator "${u[0]}"`));case"==":case"!=":u.length!==3&&O.push(new ft(m,u,`filter array for operator "${u[0]}" must have 3 elements`));case"in":case"!in":u.length>=2&&(R=Mr(u[1]),R!=="string"&&O.push(new ft(`${m}[1]`,u[1],`string expected, ${R} found`)));for(let N=2;N<u.length;N++)R=Mr(u[N]),eo(u[1])==="$type"?O=O.concat(ac({key:`${m}[${N}]`,value:u[N],valueSpec:_.geometry_type,style:f.style,styleSpec:f.styleSpec})):R!=="string"&&R!=="number"&&R!=="boolean"&&O.push(new ft(`${m}[${N}]`,u[N],`string, number, or boolean expected, ${R} found`));break;case"any":case"all":case"none":for(let N=1;N<u.length;N++)O=O.concat(Xd({key:`${m}[${N}]`,value:u[N],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":R=Mr(u[1]),u.length!==2?O.push(new ft(m,u,`filter array for "${u[0]}" operator must have 2 elements`)):R!=="string"&&O.push(new ft(`${m}[1]`,u[1],`string expected, ${R} found`))}return O}function Hu(f,u){const m=f.key,_=f.validateSpec,R=f.style,O=f.styleSpec,N=f.value,$=f.objectKey,G=O[`${u}_${f.layerType}`];if(!G)return[];const Z=$.match(/^(.*)-transition$/);if(u==="paint"&&Z&&G[Z[1]]&&G[Z[1]].transition)return _({key:m,value:N,valueSpec:O.transition,style:R,styleSpec:O});const ne=f.valueSpec||G[$];if(!ne)return[new ft(m,N,`unknown property "${$}"`)];let oe;if(Mr(N)==="string"&&Ud(ne)&&!ne.tokens&&(oe=/^{([^}]+)}$/.exec(N)))return[new ft(m,N,`"${$}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(oe[1])} }\`.`)];const fe=[];return f.layerType==="symbol"&&($==="text-field"&&R&&!R.glyphs&&fe.push(new ft(m,N,'use of "text-field" requires a style "glyphs" property')),$==="text-font"&&Nc(Ga(N))&&eo(N.type)==="identity"&&fe.push(new ft(m,N,'"text-font" does not support identity functions'))),fe.concat(_({key:f.key,value:N,valueSpec:ne,style:R,styleSpec:O,expressionContext:"property",propertyType:u,propertyKey:$}))}function xp(f){return Hu(f,"paint")}function Yd(f){return Hu(f,"layout")}function Jm(f){let u=[];const m=f.value,_=f.key,R=f.style,O=f.styleSpec;m.type||m.ref||u.push(new ft(_,m,'either "type" or "ref" is required'));let N=eo(m.type);const $=eo(m.ref);if(m.id){const G=eo(m.id);for(let Z=0;Z<f.arrayIndex;Z++){const ne=R.layers[Z];eo(ne.id)===G&&u.push(new ft(_,m.id,`duplicate layer id "${m.id}", previously used at line ${ne.id.__line__}`))}}if("ref"in m){let G;["type","source","source-layer","filter","layout"].forEach(Z=>{Z in m&&u.push(new ft(_,m[Z],`"${Z}" is prohibited for ref layers`))}),R.layers.forEach(Z=>{eo(Z.id)===$&&(G=Z)}),G?G.ref?u.push(new ft(_,m.ref,"ref cannot reference another ref layer")):N=eo(G.type):u.push(new ft(_,m.ref,`ref layer "${$}" not found`))}else if(N!=="background")if(m.source){const G=R.sources&&R.sources[m.source],Z=G&&eo(G.type);G?Z==="vector"&&N==="raster"?u.push(new ft(_,m.source,`layer "${m.id}" requires a raster source`)):Z!=="raster-dem"&&N==="hillshade"?u.push(new ft(_,m.source,`layer "${m.id}" requires a raster-dem source`)):Z==="raster"&&N!=="raster"?u.push(new ft(_,m.source,`layer "${m.id}" requires a vector source`)):Z!=="vector"||m["source-layer"]?Z==="raster-dem"&&N!=="hillshade"?u.push(new ft(_,m.source,"raster-dem source can only be used with layer type 'hillshade'.")):N!=="line"||!m.paint||!m.paint["line-gradient"]||Z==="geojson"&&G.lineMetrics||u.push(new ft(_,m,`layer "${m.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):u.push(new ft(_,m,`layer "${m.id}" must specify a "source-layer"`)):u.push(new ft(_,m.source,`source "${m.source}" not found`))}else u.push(new ft(_,m,'missing required property "source"'));return u=u.concat(_a({key:_,value:m,valueSpec:O.layer,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*":()=>[],type:()=>f.validateSpec({key:`${_}.type`,value:m.type,valueSpec:O.layer.type,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,object:m,objectKey:"type"}),filter:Zm,layout:G=>_a({layer:m,key:G.key,value:G.value,style:G.style,styleSpec:G.styleSpec,validateSpec:G.validateSpec,objectElementValidators:{"*":Z=>Yd(Rt({layerType:N},Z))}}),paint:G=>_a({layer:m,key:G.key,value:G.value,style:G.style,styleSpec:G.styleSpec,validateSpec:G.validateSpec,objectElementValidators:{"*":Z=>xp(Rt({layerType:N},Z))}})}})),u}function Fc(f){const u=f.value,m=f.key,_=Mr(u);return _!=="string"?[new ft(m,u,`string expected, ${_} found`)]:[]}const bp={promoteId:function({key:f,value:u}){if(Mr(u)==="string")return Fc({key:f,value:u});{const m=[];for(const _ in u)m.push(...Fc({key:`${f}.${_}`,value:u[_]}));return m}}};function Qm(f){const u=f.value,m=f.key,_=f.styleSpec,R=f.style,O=f.validateSpec;if(!u.type)return[new ft(m,u,'"type" is required')];const N=eo(u.type);let $;switch(N){case"vector":case"raster":return $=_a({key:m,value:u,valueSpec:_[`source_${N.replace("-","_")}`],style:f.style,styleSpec:_,objectElementValidators:bp,validateSpec:O}),$;case"raster-dem":return $=function(G){var Z;const ne=(Z=G.sourceName)!==null&&Z!==void 0?Z:"",oe=G.value,fe=G.styleSpec,_e=fe.source_raster_dem,Ce=G.style;let Ae=[];const Ue=Mr(oe);if(oe===void 0)return Ae;if(Ue!=="object")return Ae.push(new ft("source_raster_dem",oe,`object expected, ${Ue} found`)),Ae;const qe=eo(oe.encoding)==="custom",bt=["redFactor","greenFactor","blueFactor","baseShift"],rt=G.value.encoding?`"${G.value.encoding}"`:"Default";for(const gt in oe)!qe&&bt.includes(gt)?Ae.push(new ft(gt,oe[gt],`In "${ne}": "${gt}" is only valid when "encoding" is set to "custom". ${rt} encoding found`)):_e[gt]?Ae=Ae.concat(G.validateSpec({key:gt,value:oe[gt],valueSpec:_e[gt],validateSpec:G.validateSpec,style:Ce,styleSpec:fe})):Ae.push(new ft(gt,oe[gt],`unknown property "${gt}"`));return Ae}({sourceName:m,value:u,style:f.style,styleSpec:_,validateSpec:O}),$;case"geojson":if($=_a({key:m,value:u,valueSpec:_.source_geojson,style:R,styleSpec:_,validateSpec:O,objectElementValidators:bp}),u.cluster)for(const G in u.clusterProperties){const[Z,ne]=u.clusterProperties[G],oe=typeof Z=="string"?[Z,["accumulated"],["get",G]]:Z;$.push(...zc({key:`${m}.${G}.map`,value:ne,validateSpec:O,expressionContext:"cluster-map"})),$.push(...zc({key:`${m}.${G}.reduce`,value:oe,validateSpec:O,expressionContext:"cluster-reduce"}))}return $;case"video":return _a({key:m,value:u,valueSpec:_.source_video,style:R,validateSpec:O,styleSpec:_});case"image":return _a({key:m,value:u,valueSpec:_.source_image,style:R,validateSpec:O,styleSpec:_});case"canvas":return[new ft(m,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ac({key:`${m}.type`,value:u.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:R,validateSpec:O,styleSpec:_})}}function eg(f){const u=f.value,m=f.styleSpec,_=m.light,R=f.style;let O=[];const N=Mr(u);if(u===void 0)return O;if(N!=="object")return O=O.concat([new ft("light",u,`object expected, ${N} found`)]),O;for(const $ in u){const G=$.match(/^(.*)-transition$/);O=O.concat(G&&_[G[1]]&&_[G[1]].transition?f.validateSpec({key:$,value:u[$],valueSpec:m.transition,validateSpec:f.validateSpec,style:R,styleSpec:m}):_[$]?f.validateSpec({key:$,value:u[$],valueSpec:_[$],validateSpec:f.validateSpec,style:R,styleSpec:m}):[new ft($,u[$],`unknown property "${$}"`)])}return O}function tg(f){const u=f.value,m=f.styleSpec,_=m.sky,R=f.style,O=Mr(u);if(u===void 0)return[];if(O!=="object")return[new ft("sky",u,`object expected, ${O} found`)];let N=[];for(const $ in u)N=N.concat(_[$]?f.validateSpec({key:$,value:u[$],valueSpec:_[$],style:R,styleSpec:m}):[new ft($,u[$],`unknown property "${$}"`)]);return N}function uv(f){const u=f.value,m=f.styleSpec,_=m.terrain,R=f.style;let O=[];const N=Mr(u);if(u===void 0)return O;if(N!=="object")return O=O.concat([new ft("terrain",u,`object expected, ${N} found`)]),O;for(const $ in u)O=O.concat(_[$]?f.validateSpec({key:$,value:u[$],valueSpec:_[$],validateSpec:f.validateSpec,style:R,styleSpec:m}):[new ft($,u[$],`unknown property "${$}"`)]);return O}function dv(f){let u=[];const m=f.value,_=f.key;if(Array.isArray(m)){const R=[],O=[];for(const N in m)m[N].id&&R.includes(m[N].id)&&u.push(new ft(_,m,`all the sprites' ids must be unique, but ${m[N].id} is duplicated`)),R.push(m[N].id),m[N].url&&O.includes(m[N].url)&&u.push(new ft(_,m,`all the sprites' URLs must be unique, but ${m[N].url} is duplicated`)),O.push(m[N].url),u=u.concat(_a({key:`${_}[${N}]`,value:m[N],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:f.validateSpec}));return u}return Fc({key:_,value:m})}const ng={"*":()=>[],array:tf,boolean:function(f){const u=f.value,m=f.key,_=Mr(u);return _!=="boolean"?[new ft(m,u,`boolean expected, ${_} found`)]:[]},number:vp,color:function(f){const u=f.key,m=f.value,_=Mr(m);return _!=="string"?[new ft(u,m,`color expected, ${_} found`)]:bn.parse(String(m))?[]:[new ft(u,m,`color expected, "${m}" found`)]},constants:qd,enum:ac,filter:Zm,function:_p,layer:Jm,object:_a,source:Qm,light:eg,sky:tg,terrain:uv,projection:function(f){const u=f.value,m=f.styleSpec,_=m.projection,R=f.style,O=Mr(u);if(u===void 0)return[];if(O!=="object")return[new ft("projection",u,`object expected, ${O} found`)];let N=[];for(const $ in u)N=N.concat(_[$]?f.validateSpec({key:$,value:u[$],valueSpec:_[$],style:R,styleSpec:m}):[new ft($,u[$],`unknown property "${$}"`)]);return N},string:Fc,formatted:function(f){return Fc(f).length===0?[]:zc(f)},resolvedImage:function(f){return Fc(f).length===0?[]:zc(f)},padding:function(f){const u=f.key,m=f.value;if(Mr(m)==="array"){if(m.length<1||m.length>4)return[new ft(u,m,`padding requires 1 to 4 values; ${m.length} values found`)];const _={type:"number"};let R=[];for(let O=0;O<m.length;O++)R=R.concat(f.validateSpec({key:`${u}[${O}]`,value:m[O],validateSpec:f.validateSpec,valueSpec:_}));return R}return vp({key:u,value:m,valueSpec:{}})},variableAnchorOffsetCollection:function(f){const u=f.key,m=f.value,_=Mr(m),R=f.styleSpec;if(_!=="array"||m.length<1||m.length%2!=0)return[new ft(u,m,"variableAnchorOffsetCollection requires a non-empty array of even length")];let O=[];for(let N=0;N<m.length;N+=2)O=O.concat(ac({key:`${u}[${N}]`,value:m[N],valueSpec:R.layout_symbol["text-anchor"]})),O=O.concat(tf({key:`${u}[${N+1}]`,value:m[N+1],valueSpec:{length:2,value:"number"},validateSpec:f.validateSpec,style:f.style,styleSpec:R}));return O},sprite:dv};function nf(f){const u=f.value,m=f.valueSpec,_=f.styleSpec;return f.validateSpec=nf,m.expression&&Nc(eo(u))?_p(f):m.expression&&Wd(Ga(u))?zc(f):m.type&&ng[m.type]?ng[m.type](f):_a(Rt({},f,{valueSpec:m.type?_[m.type]:m}))}function S_(f){const u=f.value,m=f.key,_=Fc(f);return _.length||(u.indexOf("{fontstack}")===-1&&_.push(new ft(m,u,'"glyphs" url must include a "{fontstack}" token')),u.indexOf("{range}")===-1&&_.push(new ft(m,u,'"glyphs" url must include a "{range}" token'))),_}function qa(f,u=ke){let m=[];return m=m.concat(nf({key:"",value:f,valueSpec:u.$root,styleSpec:u,style:f,validateSpec:nf,objectElementValidators:{glyphs:S_,"*":()=>[]}})),f.constants&&(m=m.concat(qd({key:"constants",value:f.constants,style:f,styleSpec:u,validateSpec:nf}))),rg(m)}function Xa(f){return function(u){return f({...u,validateSpec:nf})}}function rg(f){return[].concat(f).sort((u,m)=>u.line-m.line)}function Ya(f){return function(...u){return rg(f.apply(this,u))}}qa.source=Ya(Xa(Qm)),qa.sprite=Ya(Xa(dv)),qa.glyphs=Ya(Xa(S_)),qa.light=Ya(Xa(eg)),qa.sky=Ya(Xa(tg)),qa.terrain=Ya(Xa(uv)),qa.layer=Ya(Xa(Jm)),qa.filter=Ya(Xa(Zm)),qa.paintProperty=Ya(Xa(xp)),qa.layoutProperty=Ya(Xa(Yd));const lc=qa,ig=lc.light,Mw=lc.sky,hv=lc.paintProperty,fv=lc.layoutProperty;function og(f,u){let m=!1;if(u&&u.length)for(const _ of u)f.fire(new Ke(new Error(_.message))),m=!0;return m}class rf{constructor(u,m,_){const R=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;const N=new Int32Array(this.arrayBuffer);u=N[0],this.d=(m=N[1])+2*(_=N[2]);for(let G=0;G<this.d*this.d;G++){const Z=N[3+G],ne=N[3+G+1];R.push(Z===ne?null:N.subarray(Z,ne))}const $=N[3+R.length+1];this.keys=N.subarray(N[3+R.length],$),this.bboxes=N.subarray($),this.insert=this._insertReadonly}else{this.d=m+2*_;for(let N=0;N<this.d*this.d;N++)R.push([]);this.keys=[],this.bboxes=[]}this.n=m,this.extent=u,this.padding=_,this.scale=m/u,this.uid=0;const O=_/m*u;this.min=-O,this.max=u+O}insert(u,m,_,R,O){this._forEachCell(m,_,R,O,this._insertCell,this.uid++,void 0,void 0),this.keys.push(u),this.bboxes.push(m),this.bboxes.push(_),this.bboxes.push(R),this.bboxes.push(O)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(u,m,_,R,O,N){this.cells[O].push(N)}query(u,m,_,R,O){const N=this.min,$=this.max;if(u<=N&&m<=N&&$<=_&&$<=R&&!O)return Array.prototype.slice.call(this.keys);{const G=[];return this._forEachCell(u,m,_,R,this._queryCell,G,{},O),G}}_queryCell(u,m,_,R,O,N,$,G){const Z=this.cells[O];if(Z!==null){const ne=this.keys,oe=this.bboxes;for(let fe=0;fe<Z.length;fe++){const _e=Z[fe];if($[_e]===void 0){const Ce=4*_e;(G?G(oe[Ce+0],oe[Ce+1],oe[Ce+2],oe[Ce+3]):u<=oe[Ce+2]&&m<=oe[Ce+3]&&_>=oe[Ce+0]&&R>=oe[Ce+1])?($[_e]=!0,N.push(ne[_e])):$[_e]=!1}}}}_forEachCell(u,m,_,R,O,N,$,G){const Z=this._convertToCellCoord(u),ne=this._convertToCellCoord(m),oe=this._convertToCellCoord(_),fe=this._convertToCellCoord(R);for(let _e=Z;_e<=oe;_e++)for(let Ce=ne;Ce<=fe;Ce++){const Ae=this.d*Ce+_e;if((!G||G(this._convertFromCellCoord(_e),this._convertFromCellCoord(Ce),this._convertFromCellCoord(_e+1),this._convertFromCellCoord(Ce+1)))&&O.call(this,u,m,_,R,Ae,N,$,G))return}}_convertFromCellCoord(u){return(u-this.padding)/this.scale}_convertToCellCoord(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const u=this.cells,m=3+this.cells.length+1+1;let _=0;for(let N=0;N<this.cells.length;N++)_+=this.cells[N].length;const R=new Int32Array(m+_+this.keys.length+this.bboxes.length);R[0]=this.extent,R[1]=this.n,R[2]=this.padding;let O=m;for(let N=0;N<u.length;N++){const $=u[N];R[3+N]=O,R.set($,O),O+=$.length}return R[3+u.length]=O,R.set(this.keys,O),O+=this.keys.length,R[3+u.length+1]=O,R.set(this.bboxes,O),O+=this.bboxes.length,R.buffer}static serialize(u,m){const _=u.toArrayBuffer();return m&&m.push(_),{buffer:_}}static deserialize(u){return new rf(u.buffer)}}const Rl={};function Mn(f,u,m={}){if(Rl[f])throw new Error(`${f} is already registered.`);Object.defineProperty(u,"_classRegistryKey",{value:f,writeable:!1}),Rl[f]={klass:u,omit:m.omit||[],shallow:m.shallow||[]}}Mn("Object",Object),Mn("TransferableGridIndex",rf),Mn("Color",bn),Mn("Error",Error),Mn("AJAXError",It),Mn("ResolvedImage",Gr),Mn("StylePropertyFunction",ko),Mn("StyleExpression",Hd,{omit:["_evaluator"]}),Mn("ZoomDependentExpression",Uu),Mn("ZoomConstantExpression",ts),Mn("CompoundExpression",ks,{omit:["_evaluate"]});for(const f in Fu)Fu[f]._classRegistryKey||Mn(`Expression_${f}`,Fu[f]);function pv(f){return f&&typeof ArrayBuffer<"u"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function sg(f){return f.$name||f.constructor._classRegistryKey}function mv(f){return!function(u){if(u===null||typeof u!="object")return!1;const m=sg(u);return!(!m||m==="Object")}(f)&&(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||f instanceof Error||pv(f)||we(f)||ArrayBuffer.isView(f)||f instanceof ImageData)}function Zs(f,u){if(mv(f))return(pv(f)||we(f))&&u&&u.push(f),ArrayBuffer.isView(f)&&u&&u.push(f.buffer),f instanceof ImageData&&u&&u.push(f.data.buffer),f;if(Array.isArray(f)){const O=[];for(const N of f)O.push(Zs(N,u));return O}if(typeof f!="object")throw new Error("can't serialize object of type "+typeof f);const m=sg(f);if(!m)throw new Error(`can't serialize object of unregistered class ${f.constructor.name}`);if(!Rl[m])throw new Error(`${m} is not registered.`);const{klass:_}=Rl[m],R=_.serialize?_.serialize(f,u):{};if(_.serialize){if(u&&R===u[u.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const O in f){if(!f.hasOwnProperty(O)||Rl[m].omit.indexOf(O)>=0)continue;const N=f[O];R[O]=Rl[m].shallow.indexOf(O)>=0?N:Zs(N,u)}f instanceof Error&&(R.message=f.message)}if(R.$name)throw new Error("$name property is reserved for worker serialization logic.");return m!=="Object"&&(R.$name=m),R}function of(f){if(mv(f))return f;if(Array.isArray(f))return f.map(of);if(typeof f!="object")throw new Error("can't deserialize object of type "+typeof f);const u=sg(f)||"Object";if(!Rl[u])throw new Error(`can't deserialize unregistered class ${u}`);const{klass:m}=Rl[u];if(!m)throw new Error(`can't deserialize unregistered class ${u}`);if(m.deserialize)return m.deserialize(f);const _=Object.create(m.prototype);for(const R of Object.keys(f)){if(R==="$name")continue;const O=f[R];_[R]=Rl[u].shallow.indexOf(R)>=0?O:of(O)}return _}class kl{constructor(){this.first=!0}update(u,m){const _=Math.floor(u);return this.first?(this.first=!1,this.lastIntegerZoom=_,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=_,!0):(this.lastFloorZoom>_?(this.lastIntegerZoom=_+1,this.lastIntegerZoomTime=m):this.lastFloorZoom<_&&(this.lastIntegerZoom=_,this.lastIntegerZoomTime=m),u!==this.lastZoom&&(this.lastZoom=u,this.lastFloorZoom=_,!0))}}const wr={"Latin-1 Supplement":f=>f>=128&&f<=255,"Hangul Jamo":f=>f>=4352&&f<=4607,Khmer:f=>f>=6016&&f<=6143,"General Punctuation":f=>f>=8192&&f<=8303,"Letterlike Symbols":f=>f>=8448&&f<=8527,"Number Forms":f=>f>=8528&&f<=8591,"Miscellaneous Technical":f=>f>=8960&&f<=9215,"Control Pictures":f=>f>=9216&&f<=9279,"Optical Character Recognition":f=>f>=9280&&f<=9311,"Enclosed Alphanumerics":f=>f>=9312&&f<=9471,"Geometric Shapes":f=>f>=9632&&f<=9727,"Miscellaneous Symbols":f=>f>=9728&&f<=9983,"Miscellaneous Symbols and Arrows":f=>f>=11008&&f<=11263,"Ideographic Description Characters":f=>f>=12272&&f<=12287,"CJK Symbols and Punctuation":f=>f>=12288&&f<=12351,Katakana:f=>f>=12448&&f<=12543,Kanbun:f=>f>=12688&&f<=12703,"CJK Strokes":f=>f>=12736&&f<=12783,"Enclosed CJK Letters and Months":f=>f>=12800&&f<=13055,"CJK Compatibility":f=>f>=13056&&f<=13311,"Yijing Hexagram Symbols":f=>f>=19904&&f<=19967,"Private Use Area":f=>f>=57344&&f<=63743,"Vertical Forms":f=>f>=65040&&f<=65055,"CJK Compatibility Forms":f=>f>=65072&&f<=65103,"Small Form Variants":f=>f>=65104&&f<=65135,"Halfwidth and Fullwidth Forms":f=>f>=65280&&f<=65519};function sf(f){for(const u of f)if(Bc(u.charCodeAt(0)))return!0;return!1}function ag(f){for(const u of f)if(!ms(u.charCodeAt(0)))return!1;return!0}function lg(f){const u=f.map(m=>{try{return new RegExp(`\\p{sc=${m}}`,"u").source}catch{return null}}).filter(m=>m);return new RegExp(u.join("|"),"u")}const af=lg(["Arab","Dupl","Mong","Ougr","Syrc"]);function ms(f){return!af.test(String.fromCodePoint(f))}const M_=lg(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Bc(f){return!(f!==746&&f!==747&&(f<4352||!(wr["CJK Compatibility Forms"](f)&&!(f>=65097&&f<=65103)||wr["CJK Compatibility"](f)||wr["CJK Strokes"](f)||!(!wr["CJK Symbols and Punctuation"](f)||f>=12296&&f<=12305||f>=12308&&f<=12319||f===12336)||wr["Enclosed CJK Letters and Months"](f)||wr["Ideographic Description Characters"](f)||wr.Kanbun(f)||wr.Katakana(f)&&f!==12540||!(!wr["Halfwidth and Fullwidth Forms"](f)||f===65288||f===65289||f===65293||f>=65306&&f<=65310||f===65339||f===65341||f===65343||f>=65371&&f<=65503||f===65507||f>=65512&&f<=65519)||!(!wr["Small Form Variants"](f)||f>=65112&&f<=65118||f>=65123&&f<=65126)||wr["Vertical Forms"](f)||wr["Yijing Hexagram Symbols"](f)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(f))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(f))||M_.test(String.fromCodePoint(f)))))}function Ls(f){return!(Bc(f)||function(u){return!!(wr["Latin-1 Supplement"](u)&&(u===167||u===169||u===174||u===177||u===188||u===189||u===190||u===215||u===247)||wr["General Punctuation"](u)&&(u===8214||u===8224||u===8225||u===8240||u===8241||u===8251||u===8252||u===8258||u===8263||u===8264||u===8265||u===8273)||wr["Letterlike Symbols"](u)||wr["Number Forms"](u)||wr["Miscellaneous Technical"](u)&&(u>=8960&&u<=8967||u>=8972&&u<=8991||u>=8996&&u<=9e3||u===9003||u>=9085&&u<=9114||u>=9150&&u<=9165||u===9167||u>=9169&&u<=9179||u>=9186&&u<=9215)||wr["Control Pictures"](u)&&u!==9251||wr["Optical Character Recognition"](u)||wr["Enclosed Alphanumerics"](u)||wr["Geometric Shapes"](u)||wr["Miscellaneous Symbols"](u)&&!(u>=9754&&u<=9759)||wr["Miscellaneous Symbols and Arrows"](u)&&(u>=11026&&u<=11055||u>=11088&&u<=11097||u>=11192&&u<=11243)||wr["CJK Symbols and Punctuation"](u)||wr.Katakana(u)||wr["Private Use Area"](u)||wr["CJK Compatibility Forms"](u)||wr["Small Form Variants"](u)||wr["Halfwidth and Fullwidth Forms"](u)||u===8734||u===8756||u===8757||u>=9984&&u<=10087||u>=10102&&u<=10131||u===65532||u===65533)}(f))}const ns=lg(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function cg(f){return ns.test(String.fromCodePoint(f))}function ug(f,u){return!(!u&&cg(f)||f>=2304&&f<=3583||f>=3840&&f<=4255||wr.Khmer(f))}function E_(f){for(const u of f)if(cg(u.charCodeAt(0)))return!0;return!1}const Ol=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(f){this.pluginStatus=f.pluginStatus,this.pluginURL=f.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(f){this.applyArabicShaping=f.applyArabicShaping,this.processBidirectionalText=f.processBidirectionalText,this.processStyledBidirectionalText=f.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class ai{constructor(u,m){this.zoom=u,m?(this.now=m.now,this.fadeDuration=m.fadeDuration,this.zoomHistory=m.zoomHistory,this.transition=m.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new kl,this.transition={})}isSupportedScript(u){return function(m,_){for(const R of m)if(!ug(R.charCodeAt(0),_))return!1;return!0}(u,Ol.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const u=this.zoom,m=u-Math.floor(u),_=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:m+(1-m)*_}:{fromScale:.5,toScale:1,t:1-(1-_)*m}}}class lf{constructor(u,m){this.property=u,this.value=m,this.expression=function(_,R){if(Nc(_))return new ko(_,R);if(Wd(_)){const O=Qi(_,R);if(O.result==="error")throw new Error(O.value.map(N=>`${N.key}: ${N.message}`).join(", "));return O.value}{let O=_;return R.type==="color"&&typeof _=="string"?O=bn.parse(_):R.type!=="padding"||typeof _!="number"&&!Array.isArray(_)?R.type==="variableAnchorOffsetCollection"&&Array.isArray(_)&&(O=Lr.parse(_)):O=$r.parse(_),{kind:"constant",evaluate:()=>O}}}(m===void 0?u.specification.default:m,u.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(u,m,_){return this.property.possiblyEvaluate(this,u,m,_)}}class wp{constructor(u){this.property=u,this.value=new lf(u,void 0)}transitioned(u,m){return new gv(this.property,this.value,m,B({},u.transition,this.transition),u.now)}untransitioned(){return new gv(this.property,this.value,null,{},0)}}class Wu{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitionablePropertyValues)}getValue(u){return Y(this._values[u].value.value)}setValue(u,m){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new wp(this._values[u].property)),this._values[u].value=new lf(this._values[u].property,m===null?void 0:Y(m))}getTransition(u){return Y(this._values[u].transition)}setTransition(u,m){Object.prototype.hasOwnProperty.call(this._values,u)||(this._values[u]=new wp(this._values[u].property)),this._values[u].transition=Y(m)||void 0}serialize(){const u={};for(const m of Object.keys(this._values)){const _=this.getValue(m);_!==void 0&&(u[m]=_);const R=this.getTransition(m);R!==void 0&&(u[`${m}-transition`]=R)}return u}transitioned(u,m){const _=new yv(this._properties);for(const R of Object.keys(this._values))_._values[R]=this._values[R].transitioned(u,m._values[R]);return _}untransitioned(){const u=new yv(this._properties);for(const m of Object.keys(this._values))u._values[m]=this._values[m].untransitioned();return u}}class gv{constructor(u,m,_,R,O){this.property=u,this.value=m,this.begin=O+R.delay||0,this.end=this.begin+R.duration||0,u.specification.transition&&(R.delay||R.duration)&&(this.prior=_)}possiblyEvaluate(u,m,_){const R=u.now||0,O=this.value.possiblyEvaluate(u,m,_),N=this.prior;if(N){if(R>this.end)return this.prior=null,O;if(this.value.isDataDriven())return this.prior=null,O;if(R<this.begin)return N.possiblyEvaluate(u,m,_);{const $=(R-this.begin)/(this.end-this.begin);return this.property.interpolate(N.possiblyEvaluate(u,m,_),O,function(G){if(G<=0)return 0;if(G>=1)return 1;const Z=G*G,ne=Z*G;return 4*(G<.5?ne:3*(G-Z)+ne-.75)}($))}}return O}}class yv{constructor(u){this._properties=u,this._values=Object.create(u.defaultTransitioningPropertyValues)}possiblyEvaluate(u,m,_){const R=new L(this._properties);for(const O of Object.keys(this._values))R._values[O]=this._values[O].possiblyEvaluate(u,m,_);return R}hasTransition(){for(const u of Object.keys(this._values))if(this._values[u].prior)return!0;return!1}}class Sp{constructor(u){this._properties=u,this._values=Object.create(u.defaultPropertyValues)}hasValue(u){return this._values[u].value!==void 0}getValue(u){return Y(this._values[u].value)}setValue(u,m){this._values[u]=new lf(this._values[u].property,m===null?void 0:Y(m))}serialize(){const u={};for(const m of Object.keys(this._values)){const _=this.getValue(m);_!==void 0&&(u[m]=_)}return u}possiblyEvaluate(u,m,_){const R=new L(this._properties);for(const O of Object.keys(this._values))R._values[O]=this._values[O].possiblyEvaluate(u,m,_);return R}}class xa{constructor(u,m,_){this.property=u,this.value=m,this.parameters=_}isConstant(){return this.value.kind==="constant"}constantOr(u){return this.value.kind==="constant"?this.value.value:u}evaluate(u,m,_,R){return this.property.evaluate(this.value,this.parameters,u,m,_,R)}}class L{constructor(u){this._properties=u,this._values=Object.create(u.defaultPossiblyEvaluatedValues)}get(u){return this._values[u]}}class c{constructor(u){this.specification=u}possiblyEvaluate(u,m){if(u.isDataDriven())throw new Error("Value should not be data driven");return u.expression.evaluate(m)}interpolate(u,m,_){const R=Ws[this.specification.type];return R?R(u,m,_):u}}class y{constructor(u,m){this.specification=u,this.overrides=m}possiblyEvaluate(u,m,_,R){return new xa(this,u.expression.kind==="constant"||u.expression.kind==="camera"?{kind:"constant",value:u.expression.evaluate(m,null,{},_,R)}:u.expression,m)}interpolate(u,m,_){if(u.value.kind!=="constant"||m.value.kind!=="constant")return u;if(u.value.value===void 0||m.value.value===void 0)return new xa(this,{kind:"constant",value:void 0},u.parameters);const R=Ws[this.specification.type];if(R){const O=R(u.value.value,m.value.value,_);return new xa(this,{kind:"constant",value:O},u.parameters)}return u}evaluate(u,m,_,R,O,N){return u.kind==="constant"?u.value:u.evaluate(m,_,R,O,N)}}class T extends y{possiblyEvaluate(u,m,_,R){if(u.value===void 0)return new xa(this,{kind:"constant",value:void 0},m);if(u.expression.kind==="constant"){const O=u.expression.evaluate(m,null,{},_,R),N=u.property.specification.type==="resolvedImage"&&typeof O!="string"?O.name:O,$=this._calculate(N,N,N,m);return new xa(this,{kind:"constant",value:$},m)}if(u.expression.kind==="camera"){const O=this._calculate(u.expression.evaluate({zoom:m.zoom-1}),u.expression.evaluate({zoom:m.zoom}),u.expression.evaluate({zoom:m.zoom+1}),m);return new xa(this,{kind:"constant",value:O},m)}return new xa(this,u.expression,m)}evaluate(u,m,_,R,O,N){if(u.kind==="source"){const $=u.evaluate(m,_,R,O,N);return this._calculate($,$,$,m)}return u.kind==="composite"?this._calculate(u.evaluate({zoom:Math.floor(m.zoom)-1},_,R),u.evaluate({zoom:Math.floor(m.zoom)},_,R),u.evaluate({zoom:Math.floor(m.zoom)+1},_,R),m):u.value}_calculate(u,m,_,R){return R.zoom>R.zoomHistory.lastIntegerZoom?{from:u,to:m}:{from:_,to:m}}interpolate(u){return u}}class I{constructor(u){this.specification=u}possiblyEvaluate(u,m,_,R){if(u.value!==void 0){if(u.expression.kind==="constant"){const O=u.expression.evaluate(m,null,{},_,R);return this._calculate(O,O,O,m)}return this._calculate(u.expression.evaluate(new ai(Math.floor(m.zoom-1),m)),u.expression.evaluate(new ai(Math.floor(m.zoom),m)),u.expression.evaluate(new ai(Math.floor(m.zoom+1),m)),m)}}_calculate(u,m,_,R){return R.zoom>R.zoomHistory.lastIntegerZoom?{from:u,to:m}:{from:_,to:m}}interpolate(u){return u}}class D{constructor(u){this.specification=u}possiblyEvaluate(u,m,_,R){return!!u.expression.evaluate(m,null,{},_,R)}interpolate(){return!1}}class U{constructor(u){this.properties=u,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const m in u){const _=u[m];_.specification.overridable&&this.overridableProperties.push(m);const R=this.defaultPropertyValues[m]=new lf(_,void 0),O=this.defaultTransitionablePropertyValues[m]=new wp(_);this.defaultTransitioningPropertyValues[m]=O.untransitioned(),this.defaultPossiblyEvaluatedValues[m]=R.possiblyEvaluate({})}}}Mn("DataDrivenProperty",y),Mn("DataConstantProperty",c),Mn("CrossFadedDataDrivenProperty",T),Mn("CrossFadedProperty",I),Mn("ColorRampProperty",D);const q="-transition";class K extends Tt{constructor(u,m){if(super(),this.id=u.id,this.type=u.type,this._featureFilter={filter:()=>!0,needGeometry:!1},u.type!=="custom"&&(this.metadata=u.metadata,this.minzoom=u.minzoom,this.maxzoom=u.maxzoom,u.type!=="background"&&(this.source=u.source,this.sourceLayer=u["source-layer"],this.filter=u.filter),m.layout&&(this._unevaluatedLayout=new Sp(m.layout)),m.paint)){this._transitionablePaint=new Wu(m.paint);for(const _ in u.paint)this.setPaintProperty(_,u.paint[_],{validate:!1});for(const _ in u.layout)this.setLayoutProperty(_,u.layout[_],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new L(m.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(u){return u==="visibility"?this.visibility:this._unevaluatedLayout.getValue(u)}setLayoutProperty(u,m,_={}){m!=null&&this._validate(fv,`layers.${this.id}.layout.${u}`,u,m,_)||(u!=="visibility"?this._unevaluatedLayout.setValue(u,m):this.visibility=m)}getPaintProperty(u){return u.endsWith(q)?this._transitionablePaint.getTransition(u.slice(0,-11)):this._transitionablePaint.getValue(u)}setPaintProperty(u,m,_={}){if(m!=null&&this._validate(hv,`layers.${this.id}.paint.${u}`,u,m,_))return!1;if(u.endsWith(q))return this._transitionablePaint.setTransition(u.slice(0,-11),m||void 0),!1;{const R=this._transitionablePaint._values[u],O=R.property.specification["property-type"]==="cross-faded-data-driven",N=R.value.isDataDriven(),$=R.value;this._transitionablePaint.setValue(u,m),this._handleSpecialPaintPropertyUpdate(u);const G=this._transitionablePaint._values[u].value;return G.isDataDriven()||N||O||this._handleOverridablePaintPropertyUpdate(u,$,G)}}_handleSpecialPaintPropertyUpdate(u){}_handleOverridablePaintPropertyUpdate(u,m,_){return!1}isHidden(u){return!!(this.minzoom&&u<this.minzoom)||!!(this.maxzoom&&u>=this.maxzoom)||this.visibility==="none"}updateTransitions(u){this._transitioningPaint=this._transitionablePaint.transitioned(u,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(u,m){u.getCrossfadeParameters&&(this._crossfadeParameters=u.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(u,void 0,m)),this.paint=this._transitioningPaint.possiblyEvaluate(u,void 0,m)}serialize(){const u={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(u.layout=u.layout||{},u.layout.visibility=this.visibility),H(u,(m,_)=>!(m===void 0||_==="layout"&&!Object.keys(m).length||_==="paint"&&!Object.keys(m).length))}_validate(u,m,_,R,O={}){return(!O||O.validate!==!1)&&og(this,u.call(lc,{key:m,layerType:this.type,objectKey:_,value:R,styleSpec:ke,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const u in this.paint._values){const m=this.paint.get(u);if(m instanceof xa&&Ud(m.property.specification)&&(m.value.kind==="source"||m.value.kind==="composite")&&m.value.isStateDependent)return!0}return!1}}const te={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ce{constructor(u,m){this._structArray=u,this._pos1=m*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ae{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(u,m){return u._trim(),m&&(u.isTransferred=!0,m.push(u.arrayBuffer)),{length:u.length,arrayBuffer:u.arrayBuffer}}static deserialize(u){const m=Object.create(this.prototype);return m.arrayBuffer=u.arrayBuffer,m.length=u.length,m.capacity=u.arrayBuffer.byteLength/m.bytesPerElement,m._refreshViews(),m}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(u){this.reserve(u),this.length=u}reserve(u){if(u>this.capacity){this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const m=this.uint8;this._refreshViews(),m&&this.uint8.set(m)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function xe(f,u=1){let m=0,_=0;return{members:f.map(R=>{const O=te[R.type].BYTES_PER_ELEMENT,N=m=Pe(m,Math.max(u,O)),$=R.components||1;return _=Math.max(_,O),m+=O*$,{name:R.name,type:R.type,components:$,offset:N}}),size:Pe(m,Math.max(_,u)),alignment:u}}function Pe(f,u){return Math.ceil(f/u)*u}class Ee extends ae{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,m){const _=this.length;return this.resize(_+1),this.emplace(_,u,m)}emplace(u,m,_){const R=2*u;return this.int16[R+0]=m,this.int16[R+1]=_,u}}Ee.prototype.bytesPerElement=4,Mn("StructArrayLayout2i4",Ee);class $e extends ae{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,m,_){const R=this.length;return this.resize(R+1),this.emplace(R,u,m,_)}emplace(u,m,_,R){const O=3*u;return this.int16[O+0]=m,this.int16[O+1]=_,this.int16[O+2]=R,u}}$e.prototype.bytesPerElement=6,Mn("StructArrayLayout3i6",$e);class ze extends ae{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,m,_,R){const O=this.length;return this.resize(O+1),this.emplace(O,u,m,_,R)}emplace(u,m,_,R,O){const N=4*u;return this.int16[N+0]=m,this.int16[N+1]=_,this.int16[N+2]=R,this.int16[N+3]=O,u}}ze.prototype.bytesPerElement=8,Mn("StructArrayLayout4i8",ze);class Ge extends ae{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,m,_,R,O,N){const $=this.length;return this.resize($+1),this.emplace($,u,m,_,R,O,N)}emplace(u,m,_,R,O,N,$){const G=6*u;return this.int16[G+0]=m,this.int16[G+1]=_,this.int16[G+2]=R,this.int16[G+3]=O,this.int16[G+4]=N,this.int16[G+5]=$,u}}Ge.prototype.bytesPerElement=12,Mn("StructArrayLayout2i4i12",Ge);class nt extends ae{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,m,_,R,O,N){const $=this.length;return this.resize($+1),this.emplace($,u,m,_,R,O,N)}emplace(u,m,_,R,O,N,$){const G=4*u,Z=8*u;return this.int16[G+0]=m,this.int16[G+1]=_,this.uint8[Z+4]=R,this.uint8[Z+5]=O,this.uint8[Z+6]=N,this.uint8[Z+7]=$,u}}nt.prototype.bytesPerElement=8,Mn("StructArrayLayout2i4ub8",nt);class Fe extends ae{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,m){const _=this.length;return this.resize(_+1),this.emplace(_,u,m)}emplace(u,m,_){const R=2*u;return this.float32[R+0]=m,this.float32[R+1]=_,u}}Fe.prototype.bytesPerElement=8,Mn("StructArrayLayout2f8",Fe);class ct extends ae{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,m,_,R,O,N,$,G,Z,ne){const oe=this.length;return this.resize(oe+1),this.emplace(oe,u,m,_,R,O,N,$,G,Z,ne)}emplace(u,m,_,R,O,N,$,G,Z,ne,oe){const fe=10*u;return this.uint16[fe+0]=m,this.uint16[fe+1]=_,this.uint16[fe+2]=R,this.uint16[fe+3]=O,this.uint16[fe+4]=N,this.uint16[fe+5]=$,this.uint16[fe+6]=G,this.uint16[fe+7]=Z,this.uint16[fe+8]=ne,this.uint16[fe+9]=oe,u}}ct.prototype.bytesPerElement=20,Mn("StructArrayLayout10ui20",ct);class yt extends ae{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,m,_,R,O,N,$,G,Z,ne,oe,fe){const _e=this.length;return this.resize(_e+1),this.emplace(_e,u,m,_,R,O,N,$,G,Z,ne,oe,fe)}emplace(u,m,_,R,O,N,$,G,Z,ne,oe,fe,_e){const Ce=12*u;return this.int16[Ce+0]=m,this.int16[Ce+1]=_,this.int16[Ce+2]=R,this.int16[Ce+3]=O,this.uint16[Ce+4]=N,this.uint16[Ce+5]=$,this.uint16[Ce+6]=G,this.uint16[Ce+7]=Z,this.int16[Ce+8]=ne,this.int16[Ce+9]=oe,this.int16[Ce+10]=fe,this.int16[Ce+11]=_e,u}}yt.prototype.bytesPerElement=24,Mn("StructArrayLayout4i4ui4i24",yt);class Pt extends ae{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,m,_){const R=this.length;return this.resize(R+1),this.emplace(R,u,m,_)}emplace(u,m,_,R){const O=3*u;return this.float32[O+0]=m,this.float32[O+1]=_,this.float32[O+2]=R,u}}Pt.prototype.bytesPerElement=12,Mn("StructArrayLayout3f12",Pt);class Gt extends ae{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(u){const m=this.length;return this.resize(m+1),this.emplace(m,u)}emplace(u,m){return this.uint32[1*u+0]=m,u}}Gt.prototype.bytesPerElement=4,Mn("StructArrayLayout1ul4",Gt);class on extends ae{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,m,_,R,O,N,$,G,Z){const ne=this.length;return this.resize(ne+1),this.emplace(ne,u,m,_,R,O,N,$,G,Z)}emplace(u,m,_,R,O,N,$,G,Z,ne){const oe=10*u,fe=5*u;return this.int16[oe+0]=m,this.int16[oe+1]=_,this.int16[oe+2]=R,this.int16[oe+3]=O,this.int16[oe+4]=N,this.int16[oe+5]=$,this.uint32[fe+3]=G,this.uint16[oe+8]=Z,this.uint16[oe+9]=ne,u}}on.prototype.bytesPerElement=20,Mn("StructArrayLayout6i1ul2ui20",on);class vn extends ae{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,m,_,R,O,N){const $=this.length;return this.resize($+1),this.emplace($,u,m,_,R,O,N)}emplace(u,m,_,R,O,N,$){const G=6*u;return this.int16[G+0]=m,this.int16[G+1]=_,this.int16[G+2]=R,this.int16[G+3]=O,this.int16[G+4]=N,this.int16[G+5]=$,u}}vn.prototype.bytesPerElement=12,Mn("StructArrayLayout2i2i2i12",vn);class _n extends ae{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,m,_,R,O){const N=this.length;return this.resize(N+1),this.emplace(N,u,m,_,R,O)}emplace(u,m,_,R,O,N){const $=4*u,G=8*u;return this.float32[$+0]=m,this.float32[$+1]=_,this.float32[$+2]=R,this.int16[G+6]=O,this.int16[G+7]=N,u}}_n.prototype.bytesPerElement=16,Mn("StructArrayLayout2f1f2i16",_n);class sn extends ae{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(u,m,_,R,O,N){const $=this.length;return this.resize($+1),this.emplace($,u,m,_,R,O,N)}emplace(u,m,_,R,O,N,$){const G=16*u,Z=4*u,ne=8*u;return this.uint8[G+0]=m,this.uint8[G+1]=_,this.float32[Z+1]=R,this.float32[Z+2]=O,this.int16[ne+6]=N,this.int16[ne+7]=$,u}}sn.prototype.bytesPerElement=16,Mn("StructArrayLayout2ub2f2i16",sn);class cn extends ae{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,m,_){const R=this.length;return this.resize(R+1),this.emplace(R,u,m,_)}emplace(u,m,_,R){const O=3*u;return this.uint16[O+0]=m,this.uint16[O+1]=_,this.uint16[O+2]=R,u}}cn.prototype.bytesPerElement=6,Mn("StructArrayLayout3ui6",cn);class Cn extends ae{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,m,_,R,O,N,$,G,Z,ne,oe,fe,_e,Ce,Ae,Ue,qe){const bt=this.length;return this.resize(bt+1),this.emplace(bt,u,m,_,R,O,N,$,G,Z,ne,oe,fe,_e,Ce,Ae,Ue,qe)}emplace(u,m,_,R,O,N,$,G,Z,ne,oe,fe,_e,Ce,Ae,Ue,qe,bt){const rt=24*u,gt=12*u,Ot=48*u;return this.int16[rt+0]=m,this.int16[rt+1]=_,this.uint16[rt+2]=R,this.uint16[rt+3]=O,this.uint32[gt+2]=N,this.uint32[gt+3]=$,this.uint32[gt+4]=G,this.uint16[rt+10]=Z,this.uint16[rt+11]=ne,this.uint16[rt+12]=oe,this.float32[gt+7]=fe,this.float32[gt+8]=_e,this.uint8[Ot+36]=Ce,this.uint8[Ot+37]=Ae,this.uint8[Ot+38]=Ue,this.uint32[gt+10]=qe,this.int16[rt+22]=bt,u}}Cn.prototype.bytesPerElement=48,Mn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Cn);class ar extends ae{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,m,_,R,O,N,$,G,Z,ne,oe,fe,_e,Ce,Ae,Ue,qe,bt,rt,gt,Ot,rn,wn,er,xn,gn,Bn,Ln){const An=this.length;return this.resize(An+1),this.emplace(An,u,m,_,R,O,N,$,G,Z,ne,oe,fe,_e,Ce,Ae,Ue,qe,bt,rt,gt,Ot,rn,wn,er,xn,gn,Bn,Ln)}emplace(u,m,_,R,O,N,$,G,Z,ne,oe,fe,_e,Ce,Ae,Ue,qe,bt,rt,gt,Ot,rn,wn,er,xn,gn,Bn,Ln,An){const Ht=32*u,Hn=16*u;return this.int16[Ht+0]=m,this.int16[Ht+1]=_,this.int16[Ht+2]=R,this.int16[Ht+3]=O,this.int16[Ht+4]=N,this.int16[Ht+5]=$,this.int16[Ht+6]=G,this.int16[Ht+7]=Z,this.uint16[Ht+8]=ne,this.uint16[Ht+9]=oe,this.uint16[Ht+10]=fe,this.uint16[Ht+11]=_e,this.uint16[Ht+12]=Ce,this.uint16[Ht+13]=Ae,this.uint16[Ht+14]=Ue,this.uint16[Ht+15]=qe,this.uint16[Ht+16]=bt,this.uint16[Ht+17]=rt,this.uint16[Ht+18]=gt,this.uint16[Ht+19]=Ot,this.uint16[Ht+20]=rn,this.uint16[Ht+21]=wn,this.uint16[Ht+22]=er,this.uint32[Hn+12]=xn,this.float32[Hn+13]=gn,this.float32[Hn+14]=Bn,this.uint16[Ht+30]=Ln,this.uint16[Ht+31]=An,u}}ar.prototype.bytesPerElement=64,Mn("StructArrayLayout8i15ui1ul2f2ui64",ar);class un extends ae{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u){const m=this.length;return this.resize(m+1),this.emplace(m,u)}emplace(u,m){return this.float32[1*u+0]=m,u}}un.prototype.bytesPerElement=4,Mn("StructArrayLayout1f4",un);class pn extends ae{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,m,_){const R=this.length;return this.resize(R+1),this.emplace(R,u,m,_)}emplace(u,m,_,R){const O=3*u;return this.uint16[6*u+0]=m,this.float32[O+1]=_,this.float32[O+2]=R,u}}pn.prototype.bytesPerElement=12,Mn("StructArrayLayout1ui2f12",pn);class or extends ae{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,m,_){const R=this.length;return this.resize(R+1),this.emplace(R,u,m,_)}emplace(u,m,_,R){const O=4*u;return this.uint32[2*u+0]=m,this.uint16[O+2]=_,this.uint16[O+3]=R,u}}or.prototype.bytesPerElement=8,Mn("StructArrayLayout1ul2ui8",or);class Pi extends ae{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u,m){const _=this.length;return this.resize(_+1),this.emplace(_,u,m)}emplace(u,m,_){const R=2*u;return this.uint16[R+0]=m,this.uint16[R+1]=_,u}}Pi.prototype.bytesPerElement=4,Mn("StructArrayLayout2ui4",Pi);class yr extends ae{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(u){const m=this.length;return this.resize(m+1),this.emplace(m,u)}emplace(u,m){return this.uint16[1*u+0]=m,u}}yr.prototype.bytesPerElement=2,Mn("StructArrayLayout1ui2",yr);class Er extends ae{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(u,m,_,R){const O=this.length;return this.resize(O+1),this.emplace(O,u,m,_,R)}emplace(u,m,_,R,O){const N=4*u;return this.float32[N+0]=m,this.float32[N+1]=_,this.float32[N+2]=R,this.float32[N+3]=O,u}}Er.prototype.bytesPerElement=16,Mn("StructArrayLayout4f16",Er);class Ii extends ce{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new p(this.anchorPointX,this.anchorPointY)}}Ii.prototype.size=20;class rs extends on{get(u){return new Ii(this,u)}}Mn("CollisionBoxArray",rs);class Js extends ce{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(u){this._structArray.uint8[this._pos1+37]=u}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(u){this._structArray.uint8[this._pos1+38]=u}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(u){this._structArray.uint32[this._pos4+10]=u}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Js.prototype.size=48;class gi extends Cn{get(u){return new Js(this,u)}}Mn("PlacedSymbolArray",gi);class is extends ce{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(u){this._structArray.uint32[this._pos4+12]=u}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}is.prototype.size=64;class Vo extends ar{get(u){return new is(this,u)}}Mn("SymbolInstanceArray",Vo);class Oo extends un{getoffsetX(u){return this.float32[1*u+0]}}Mn("GlyphOffsetArray",Oo);class wo extends $e{getx(u){return this.int16[3*u+0]}gety(u){return this.int16[3*u+1]}gettileUnitDistanceFromAnchor(u){return this.int16[3*u+2]}}Mn("SymbolLineVertexArray",wo);class ba extends ce{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ba.prototype.size=12;class jc extends pn{get(u){return new ba(this,u)}}Mn("TextAnchorOffsetArray",jc);class Kd extends ce{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Kd.prototype.size=8;class Gu extends or{get(u){return new Kd(this,u)}}Mn("FeatureIndexArray",Gu);class cc extends Ee{}class dg extends Ee{}class cf extends Ee{}class Qs extends Ge{}class ni extends nt{}class vr extends Fe{}class li extends ct{}class Vr extends yt{}class Kr extends Pt{}class ji extends Gt{}class xi extends vn{}class qi extends sn{}class Ka extends cn{}class uc extends Pi{}const hg=xe([{name:"a_pos",components:2,type:"Int16"}],4),{members:vv}=hg;class co{constructor(u=[]){this.segments=u}prepareSegment(u,m,_,R){let O=this.segments[this.segments.length-1];return u>co.MAX_VERTEX_ARRAY_LENGTH&&pe(`Max vertices per segment is ${co.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${u}`),(!O||O.vertexLength+u>co.MAX_VERTEX_ARRAY_LENGTH||O.sortKey!==R)&&(O={vertexOffset:m.length,primitiveOffset:_.length,vertexLength:0,primitiveLength:0},R!==void 0&&(O.sortKey=R),this.segments.push(O)),O}get(){return this.segments}destroy(){for(const u of this.segments)for(const m in u.vaos)u.vaos[m].destroy()}static simpleSegment(u,m,_,R){return new co([{vertexOffset:u,primitiveOffset:m,vertexLength:_,primitiveLength:R,vaos:{},sortKey:0}])}}function uo(f,u){return 256*(f=k(Math.floor(f),0,255))+k(Math.floor(u),0,255)}co.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Mn("SegmentVector",co);const Zd=xe([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Jd={exports:{}},qu={exports:{}};qu.exports=function(f,u){var m,_,R,O,N,$,G,Z;for(_=f.length-(m=3&f.length),R=u,N=3432918353,$=461845907,Z=0;Z<_;)G=255&f.charCodeAt(Z)|(255&f.charCodeAt(++Z))<<8|(255&f.charCodeAt(++Z))<<16|(255&f.charCodeAt(++Z))<<24,++Z,R=27492+(65535&(O=5*(65535&(R=(R^=G=(65535&(G=(G=(65535&G)*N+(((G>>>16)*N&65535)<<16)&4294967295)<<15|G>>>17))*$+(((G>>>16)*$&65535)<<16)&4294967295)<<13|R>>>19))+((5*(R>>>16)&65535)<<16)&4294967295))+((58964+(O>>>16)&65535)<<16);switch(G=0,m){case 3:G^=(255&f.charCodeAt(Z+2))<<16;case 2:G^=(255&f.charCodeAt(Z+1))<<8;case 1:R^=G=(65535&(G=(G=(65535&(G^=255&f.charCodeAt(Z)))*N+(((G>>>16)*N&65535)<<16)&4294967295)<<15|G>>>17))*$+(((G>>>16)*$&65535)<<16)&4294967295}return R^=f.length,R=2246822507*(65535&(R^=R>>>16))+((2246822507*(R>>>16)&65535)<<16)&4294967295,R=3266489909*(65535&(R^=R>>>13))+((3266489909*(R>>>16)&65535)<<16)&4294967295,(R^=R>>>16)>>>0};var uf=qu.exports,Mp={exports:{}};Mp.exports=function(f,u){for(var m,_=f.length,R=u^_,O=0;_>=4;)m=1540483477*(65535&(m=255&f.charCodeAt(O)|(255&f.charCodeAt(++O))<<8|(255&f.charCodeAt(++O))<<16|(255&f.charCodeAt(++O))<<24))+((1540483477*(m>>>16)&65535)<<16),R=1540483477*(65535&R)+((1540483477*(R>>>16)&65535)<<16)^(m=1540483477*(65535&(m^=m>>>24))+((1540483477*(m>>>16)&65535)<<16)),_-=4,++O;switch(_){case 3:R^=(255&f.charCodeAt(O+2))<<16;case 2:R^=(255&f.charCodeAt(O+1))<<8;case 1:R=1540483477*(65535&(R^=255&f.charCodeAt(O)))+((1540483477*(R>>>16)&65535)<<16)}return R=1540483477*(65535&(R^=R>>>13))+((1540483477*(R>>>16)&65535)<<16),(R^=R>>>15)>>>0};var Ll=uf,T_=Mp.exports;Jd.exports=Ll,Jd.exports.murmur3=Ll,Jd.exports.murmur2=T_;var Xu=l(Jd.exports);class Ep{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(u,m,_,R){this.ids.push(fg(u)),this.positions.push(m,_,R)}getPositions(u){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const m=fg(u);let _=0,R=this.ids.length-1;for(;_<R;){const N=_+R>>1;this.ids[N]>=m?R=N:_=N+1}const O=[];for(;this.ids[_]===m;)O.push({index:this.positions[3*_],start:this.positions[3*_+1],end:this.positions[3*_+2]}),_++;return O}static serialize(u,m){const _=new Float64Array(u.ids),R=new Uint32Array(u.positions);return _v(_,R,0,_.length-1),m&&m.push(_.buffer,R.buffer),{ids:_,positions:R}}static deserialize(u){const m=new Ep;return m.ids=u.ids,m.positions=u.positions,m.indexed=!0,m}}function fg(f){const u=+f;return!isNaN(u)&&u<=Number.MAX_SAFE_INTEGER?u:Xu(String(f))}function _v(f,u,m,_){for(;m<_;){const R=f[m+_>>1];let O=m-1,N=_+1;for(;;){do O++;while(f[O]<R);do N--;while(f[N]>R);if(O>=N)break;Tp(f,O,N),Tp(u,3*O,3*N),Tp(u,3*O+1,3*N+1),Tp(u,3*O+2,3*N+2)}N-m<_-N?(_v(f,u,m,N),m=N+1):(_v(f,u,N+1,_),_=N)}}function Tp(f,u,m){const _=f[u];f[u]=f[m],f[m]=_}Mn("FeaturePositionMap",Ep);class Yu{constructor(u,m){this.gl=u.gl,this.location=m}}class gs extends Yu{constructor(u,m){super(u,m),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class Qd extends Yu{constructor(u,m){super(u,m),this.current=[0,0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3]))}}class Dl extends Yu{constructor(u,m){super(u,m),this.current=bn.transparent}set(u){u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a))}}const C_=new Float32Array(16);function ea(f){return[uo(255*f.r,255*f.g),uo(255*f.b,255*f.a)]}class pg{constructor(u,m,_){this.value=u,this.uniformNames=m.map(R=>`u_${R}`),this.type=_}setUniform(u,m,_){u.set(_.constantOr(this.value))}getBinding(u,m,_){return this.type==="color"?new Dl(u,m):new gs(u,m)}}class df{constructor(u,m){this.uniformNames=m.map(_=>`u_${_}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(u,m){this.pixelRatioFrom=m.pixelRatio,this.pixelRatioTo=u.pixelRatio,this.patternFrom=m.tlbr,this.patternTo=u.tlbr}setUniform(u,m,_,R){const O=R==="u_pattern_to"?this.patternTo:R==="u_pattern_from"?this.patternFrom:R==="u_pixel_ratio_to"?this.pixelRatioTo:R==="u_pixel_ratio_from"?this.pixelRatioFrom:null;O&&u.set(O)}getBinding(u,m,_){return _.substr(0,9)==="u_pattern"?new Qd(u,m):new gs(u,m)}}class $c{constructor(u,m,_,R){this.expression=u,this.type=_,this.maxValue=0,this.paintVertexAttributes=m.map(O=>({name:`a_${O}`,type:"Float32",components:_==="color"?2:1,offset:0})),this.paintVertexArray=new R}populatePaintArray(u,m,_,R,O){const N=this.paintVertexArray.length,$=this.expression.evaluate(new ai(0),m,{},R,[],O);this.paintVertexArray.resize(u),this._setPaintValue(N,u,$)}updatePaintArray(u,m,_,R){const O=this.expression.evaluate({zoom:0},_,R);this._setPaintValue(u,m,O)}_setPaintValue(u,m,_){if(this.type==="color"){const R=ea(_);for(let O=u;O<m;O++)this.paintVertexArray.emplace(O,R[0],R[1])}else{for(let R=u;R<m;R++)this.paintVertexArray.emplace(R,_);this.maxValue=Math.max(this.maxValue,Math.abs(_))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Uc{constructor(u,m,_,R,O,N){this.expression=u,this.uniformNames=m.map($=>`u_${$}_t`),this.type=_,this.useIntegerZoom=R,this.zoom=O,this.maxValue=0,this.paintVertexAttributes=m.map($=>({name:`a_${$}`,type:"Float32",components:_==="color"?4:2,offset:0})),this.paintVertexArray=new N}populatePaintArray(u,m,_,R,O){const N=this.expression.evaluate(new ai(this.zoom),m,{},R,[],O),$=this.expression.evaluate(new ai(this.zoom+1),m,{},R,[],O),G=this.paintVertexArray.length;this.paintVertexArray.resize(u),this._setPaintValue(G,u,N,$)}updatePaintArray(u,m,_,R){const O=this.expression.evaluate({zoom:this.zoom},_,R),N=this.expression.evaluate({zoom:this.zoom+1},_,R);this._setPaintValue(u,m,O,N)}_setPaintValue(u,m,_,R){if(this.type==="color"){const O=ea(_),N=ea(R);for(let $=u;$<m;$++)this.paintVertexArray.emplace($,O[0],O[1],N[0],N[1])}else{for(let O=u;O<m;O++)this.paintVertexArray.emplace(O,_,R);this.maxValue=Math.max(this.maxValue,Math.abs(_),Math.abs(R))}}upload(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(u,m){const _=this.useIntegerZoom?Math.floor(m.zoom):m.zoom,R=k(this.expression.interpolationFactor(_,this.zoom,this.zoom+1),0,1);u.set(R)}getBinding(u,m,_){return new gs(u,m)}}class wa{constructor(u,m,_,R,O,N){this.expression=u,this.type=m,this.useIntegerZoom=_,this.zoom=R,this.layerId=N,this.zoomInPaintVertexArray=new O,this.zoomOutPaintVertexArray=new O}populatePaintArray(u,m,_){const R=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(u),this.zoomOutPaintVertexArray.resize(u),this._setPaintValues(R,u,m.patterns&&m.patterns[this.layerId],_)}updatePaintArray(u,m,_,R,O){this._setPaintValues(u,m,_.patterns&&_.patterns[this.layerId],O)}_setPaintValues(u,m,_,R){if(!R||!_)return;const{min:O,mid:N,max:$}=_,G=R[O],Z=R[N],ne=R[$];if(G&&Z&&ne)for(let oe=u;oe<m;oe++)this.zoomInPaintVertexArray.emplace(oe,Z.tl[0],Z.tl[1],Z.br[0],Z.br[1],G.tl[0],G.tl[1],G.br[0],G.br[1],Z.pixelRatio,G.pixelRatio),this.zoomOutPaintVertexArray.emplace(oe,Z.tl[0],Z.tl[1],Z.br[0],Z.br[1],ne.tl[0],ne.tl[1],ne.br[0],ne.br[1],Z.pixelRatio,ne.pixelRatio)}upload(u){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,Zd.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,Zd.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Ew{constructor(u,m,_){this.binders={},this._buffers=[];const R=[];for(const O in u.paint._values){if(!_(O))continue;const N=u.paint.get(O);if(!(N instanceof xa&&Ud(N.property.specification)))continue;const $=Tw(O,u.type),G=N.value,Z=N.property.specification.type,ne=N.property.useIntegerZoom,oe=N.property.specification["property-type"],fe=oe==="cross-faded"||oe==="cross-faded-data-driven";if(G.kind==="constant")this.binders[O]=fe?new df(G.value,$):new pg(G.value,$,Z),R.push(`/u_${O}`);else if(G.kind==="source"||fe){const _e=ff(O,Z,"source");this.binders[O]=fe?new wa(G,Z,ne,m,_e,u.id):new $c(G,$,Z,_e),R.push(`/a_${O}`)}else{const _e=ff(O,Z,"composite");this.binders[O]=new Uc(G,$,Z,ne,m,_e),R.push(`/z_${O}`)}}this.cacheKey=R.sort().join("")}getMaxValue(u){const m=this.binders[u];return m instanceof $c||m instanceof Uc?m.maxValue:0}populatePaintArrays(u,m,_,R,O){for(const N in this.binders){const $=this.binders[N];($ instanceof $c||$ instanceof Uc||$ instanceof wa)&&$.populatePaintArray(u,m,_,R,O)}}setConstantPatternPositions(u,m){for(const _ in this.binders){const R=this.binders[_];R instanceof df&&R.setConstantPatternPositions(u,m)}}updatePaintArrays(u,m,_,R,O){let N=!1;for(const $ in u){const G=m.getPositions($);for(const Z of G){const ne=_.feature(Z.index);for(const oe in this.binders){const fe=this.binders[oe];if((fe instanceof $c||fe instanceof Uc||fe instanceof wa)&&fe.expression.isStateDependent===!0){const _e=R.paint.get(oe);fe.expression=_e.value,fe.updatePaintArray(Z.start,Z.end,ne,u[$],O),N=!0}}}}return N}defines(){const u=[];for(const m in this.binders){const _=this.binders[m];(_ instanceof pg||_ instanceof df)&&u.push(..._.uniformNames.map(R=>`#define HAS_UNIFORM_${R}`))}return u}getBinderAttributes(){const u=[];for(const m in this.binders){const _=this.binders[m];if(_ instanceof $c||_ instanceof Uc)for(let R=0;R<_.paintVertexAttributes.length;R++)u.push(_.paintVertexAttributes[R].name);else if(_ instanceof wa)for(let R=0;R<Zd.members.length;R++)u.push(Zd.members[R].name)}return u}getBinderUniforms(){const u=[];for(const m in this.binders){const _=this.binders[m];if(_ instanceof pg||_ instanceof df||_ instanceof Uc)for(const R of _.uniformNames)u.push(R)}return u}getPaintVertexBuffers(){return this._buffers}getUniforms(u,m){const _=[];for(const R in this.binders){const O=this.binders[R];if(O instanceof pg||O instanceof df||O instanceof Uc){for(const N of O.uniformNames)if(m[N]){const $=O.getBinding(u,m[N],N);_.push({name:N,property:R,binding:$})}}}return _}setUniforms(u,m,_,R){for(const{name:O,property:N,binding:$}of m)this.binders[N].setUniform($,R,_.get(N),O)}updatePaintBuffers(u){this._buffers=[];for(const m in this.binders){const _=this.binders[m];if(u&&_ instanceof wa){const R=u.fromScale===2?_.zoomInPaintVertexBuffer:_.zoomOutPaintVertexBuffer;R&&this._buffers.push(R)}else(_ instanceof $c||_ instanceof Uc)&&_.paintVertexBuffer&&this._buffers.push(_.paintVertexBuffer)}}upload(u){for(const m in this.binders){const _=this.binders[m];(_ instanceof $c||_ instanceof Uc||_ instanceof wa)&&_.upload(u)}this.updatePaintBuffers()}destroy(){for(const u in this.binders){const m=this.binders[u];(m instanceof $c||m instanceof Uc||m instanceof wa)&&m.destroy()}}}class hf{constructor(u,m,_=()=>!0){this.programConfigurations={};for(const R of u)this.programConfigurations[R.id]=new Ew(R,m,_);this.needsUpload=!1,this._featureMap=new Ep,this._bufferOffset=0}populatePaintArrays(u,m,_,R,O,N){for(const $ in this.programConfigurations)this.programConfigurations[$].populatePaintArrays(u,m,R,O,N);m.id!==void 0&&this._featureMap.add(m.id,_,this._bufferOffset,u),this._bufferOffset=u,this.needsUpload=!0}updatePaintArrays(u,m,_,R){for(const O of _)this.needsUpload=this.programConfigurations[O.id].updatePaintArrays(u,this._featureMap,m,O,R)||this.needsUpload}get(u){return this.programConfigurations[u]}upload(u){if(this.needsUpload){for(const m in this.programConfigurations)this.programConfigurations[m].upload(u);this.needsUpload=!1}}destroy(){for(const u in this.programConfigurations)this.programConfigurations[u].destroy()}}function Tw(f,u){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[f]||[f.replace(`${u}-`,"").replace(/-/g,"_")]}function ff(f,u,m){const _={color:{source:Fe,composite:Er},number:{source:un,composite:Fe}},R=function(O){return{"line-pattern":{source:li,composite:li},"fill-pattern":{source:li,composite:li},"fill-extrusion-pattern":{source:li,composite:li}}[O]}(f);return R&&R[m]||_[u][m]}Mn("ConstantBinder",pg),Mn("CrossFadedConstantBinder",df),Mn("SourceExpressionBinder",$c),Mn("CrossFadedCompositeBinder",wa),Mn("CompositeExpressionBinder",Uc),Mn("ProgramConfiguration",Ew,{omit:["_buffers"]}),Mn("ProgramConfigurationSet",hf);const ho=8192,A_=Math.pow(2,14)-1,P_=-A_-1;function Ku(f){const u=ho/f.extent,m=f.loadGeometry();for(let _=0;_<m.length;_++){const R=m[_];for(let O=0;O<R.length;O++){const N=R[O],$=Math.round(N.x*u),G=Math.round(N.y*u);N.x=k($,P_,A_),N.y=k(G,P_,A_),($<N.x||$>N.x+1||G<N.y||G>N.y+1)&&pe("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return m}function Cp(f,u){return{type:f.type,id:f.id,properties:f.properties,geometry:u?Ku(f):[]}}function I_(f,u,m,_,R){f.emplaceBack(2*u+(_+1)/2,2*m+(R+1)/2)}class R_{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(m=>m.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new dg,this.indexArray=new Ka,this.segments=new co,this.programConfigurations=new hf(u.layers,u.zoom),this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id)}populate(u,m,_){const R=this.layers[0],O=[];let N=null,$=!1;R.type==="circle"&&(N=R.layout.get("circle-sort-key"),$=!N.isConstant());for(const{feature:G,id:Z,index:ne,sourceLayerIndex:oe}of u){const fe=this.layers[0]._featureFilter.needGeometry,_e=Cp(G,fe);if(!this.layers[0]._featureFilter.filter(new ai(this.zoom),_e,_))continue;const Ce=$?N.evaluate(_e,{},_):void 0,Ae={id:Z,properties:G.properties,type:G.type,sourceLayerIndex:oe,index:ne,geometry:fe?_e.geometry:Ku(G),patterns:{},sortKey:Ce};O.push(Ae)}$&&O.sort((G,Z)=>G.sortKey-Z.sortKey);for(const G of O){const{geometry:Z,index:ne,sourceLayerIndex:oe}=G,fe=u[ne].feature;this.addFeature(G,Z,ne,_),m.featureIndex.insert(fe,Z,ne,oe,this.index)}}update(u,m,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,m,this.stateDependentLayers,_)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,vv),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(u,m,_,R){for(const O of m)for(const N of O){const $=N.x,G=N.y;if($<0||$>=ho||G<0||G>=ho)continue;const Z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,u.sortKey),ne=Z.vertexLength;I_(this.layoutVertexArray,$,G,-1,-1),I_(this.layoutVertexArray,$,G,1,-1),I_(this.layoutVertexArray,$,G,1,1),I_(this.layoutVertexArray,$,G,-1,1),this.indexArray.emplaceBack(ne,ne+1,ne+2),this.indexArray.emplaceBack(ne,ne+3,ne+2),Z.vertexLength+=4,Z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,_,{},R)}}function Cw(f,u){for(let m=0;m<f.length;m++)if(mg(u,f[m]))return!0;for(let m=0;m<u.length;m++)if(mg(f,u[m]))return!0;return!!k_(f,u)}function Ap(f,u,m){return!!mg(f,u)||!!Aw(u,f,m)}function xT(f,u){if(f.length===1)return bT(u,f[0]);for(let m=0;m<u.length;m++){const _=u[m];for(let R=0;R<_.length;R++)if(mg(f,_[R]))return!0}for(let m=0;m<f.length;m++)if(bT(u,f[m]))return!0;for(let m=0;m<u.length;m++)if(k_(f,u[m]))return!0;return!1}function Pp(f,u,m){if(f.length>1){if(k_(f,u))return!0;for(let _=0;_<u.length;_++)if(Aw(u[_],f,m))return!0}for(let _=0;_<f.length;_++)if(Aw(f[_],u,m))return!0;return!1}function k_(f,u){if(f.length===0||u.length===0)return!1;for(let m=0;m<f.length-1;m++){const _=f[m],R=f[m+1];for(let O=0;O<u.length-1;O++)if(Za(_,R,u[O],u[O+1]))return!0}return!1}function Za(f,u,m,_){return re(f,m,_)!==re(u,m,_)&&re(f,u,m)!==re(f,u,_)}function Aw(f,u,m){const _=m*m;if(u.length===1)return f.distSqr(u[0])<_;for(let R=1;R<u.length;R++)if(Pw(f,u[R-1],u[R])<_)return!0;return!1}function Pw(f,u,m){const _=u.distSqr(m);if(_===0)return f.distSqr(u);const R=((f.x-u.x)*(m.x-u.x)+(f.y-u.y)*(m.y-u.y))/_;return f.distSqr(R<0?u:R>1?m:m.sub(u)._mult(R)._add(u))}function bT(f,u){let m,_,R,O=!1;for(let N=0;N<f.length;N++){m=f[N];for(let $=0,G=m.length-1;$<m.length;G=$++)_=m[$],R=m[G],_.y>u.y!=R.y>u.y&&u.x<(R.x-_.x)*(u.y-_.y)/(R.y-_.y)+_.x&&(O=!O)}return O}function mg(f,u){let m=!1;for(let _=0,R=f.length-1;_<f.length;R=_++){const O=f[_],N=f[R];O.y>u.y!=N.y>u.y&&u.x<(N.x-O.x)*(u.y-O.y)/(N.y-O.y)+O.x&&(m=!m)}return m}function wT(f,u,m){const _=m[0],R=m[2];if(f.x<_.x&&u.x<_.x||f.x>R.x&&u.x>R.x||f.y<_.y&&u.y<_.y||f.y>R.y&&u.y>R.y)return!1;const O=re(f,u,m[0]);return O!==re(f,u,m[1])||O!==re(f,u,m[2])||O!==re(f,u,m[3])}function gg(f,u,m){const _=u.paint.get(f).value;return _.kind==="constant"?_.value:m.programConfigurations.get(u.id).getMaxValue(f)}function O_(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function Sa(f,u,m,_,R){if(!u[0]&&!u[1])return f;const O=p.convert(u)._mult(R);m==="viewport"&&O._rotate(-_);const N=[];for(let $=0;$<f.length;$++)N.push(f[$].sub(O));return N}let L_,ST;Mn("CircleBucket",R_,{omit:["layers"]});var pf={get paint(){return ST=ST||new U({"circle-radius":new y(ke.paint_circle["circle-radius"]),"circle-color":new y(ke.paint_circle["circle-color"]),"circle-blur":new y(ke.paint_circle["circle-blur"]),"circle-opacity":new y(ke.paint_circle["circle-opacity"]),"circle-translate":new c(ke.paint_circle["circle-translate"]),"circle-translate-anchor":new c(ke.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new c(ke.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new c(ke.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new y(ke.paint_circle["circle-stroke-width"]),"circle-stroke-color":new y(ke.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new y(ke.paint_circle["circle-stroke-opacity"])})},get layout(){return L_=L_||new U({"circle-sort-key":new y(ke.layout_circle["circle-sort-key"])})}},os=1e-6,dc=typeof Float32Array<"u"?Float32Array:Array;function yg(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function D_(f,u,m){var _=u[0],R=u[1],O=u[2],N=u[3],$=u[4],G=u[5],Z=u[6],ne=u[7],oe=u[8],fe=u[9],_e=u[10],Ce=u[11],Ae=u[12],Ue=u[13],qe=u[14],bt=u[15],rt=m[0],gt=m[1],Ot=m[2],rn=m[3];return f[0]=rt*_+gt*$+Ot*oe+rn*Ae,f[1]=rt*R+gt*G+Ot*fe+rn*Ue,f[2]=rt*O+gt*Z+Ot*_e+rn*qe,f[3]=rt*N+gt*ne+Ot*Ce+rn*bt,f[4]=(rt=m[4])*_+(gt=m[5])*$+(Ot=m[6])*oe+(rn=m[7])*Ae,f[5]=rt*R+gt*G+Ot*fe+rn*Ue,f[6]=rt*O+gt*Z+Ot*_e+rn*qe,f[7]=rt*N+gt*ne+Ot*Ce+rn*bt,f[8]=(rt=m[8])*_+(gt=m[9])*$+(Ot=m[10])*oe+(rn=m[11])*Ae,f[9]=rt*R+gt*G+Ot*fe+rn*Ue,f[10]=rt*O+gt*Z+Ot*_e+rn*qe,f[11]=rt*N+gt*ne+Ot*Ce+rn*bt,f[12]=(rt=m[12])*_+(gt=m[13])*$+(Ot=m[14])*oe+(rn=m[15])*Ae,f[13]=rt*R+gt*G+Ot*fe+rn*Ue,f[14]=rt*O+gt*Z+Ot*_e+rn*qe,f[15]=rt*N+gt*ne+Ot*Ce+rn*bt,f}Math.hypot||(Math.hypot=function(){for(var f=0,u=arguments.length;u--;)f+=arguments[u]*arguments[u];return Math.sqrt(f)});var Ip,BL=D_;function xv(f,u,m){var _=u[0],R=u[1],O=u[2],N=u[3];return f[0]=m[0]*_+m[4]*R+m[8]*O+m[12]*N,f[1]=m[1]*_+m[5]*R+m[9]*O+m[13]*N,f[2]=m[2]*_+m[6]*R+m[10]*O+m[14]*N,f[3]=m[3]*_+m[7]*R+m[11]*O+m[15]*N,f}Ip=new dc(4),dc!=Float32Array&&(Ip[0]=0,Ip[1]=0,Ip[2]=0,Ip[3]=0);class MT extends K{constructor(u){super(u,pf)}createBucket(u){return new R_(u)}queryRadius(u){const m=u;return gg("circle-radius",this,m)+gg("circle-stroke-width",this,m)+O_(this.paint.get("circle-translate"))}queryIntersectsFeature(u,m,_,R,O,N,$,G){const Z=Sa(u,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),N.angle,$),ne=this.paint.get("circle-radius").evaluate(m,_)+this.paint.get("circle-stroke-width").evaluate(m,_),oe=this.paint.get("circle-pitch-alignment")==="map",fe=oe?Z:function(Ce,Ae){return Ce.map(Ue=>Iw(Ue,Ae))}(Z,G),_e=oe?ne*$:ne;for(const Ce of R)for(const Ae of Ce){const Ue=oe?Ae:Iw(Ae,G);let qe=_e;const bt=xv([],[Ae.x,Ae.y,0,1],G);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?qe*=bt[3]/N.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(qe*=N.cameraToCenterDistance/bt[3]),Ap(fe,Ue,qe))return!0}return!1}}function Iw(f,u){const m=xv([],[f.x,f.y,0,1],u);return new p(m[0]/m[3],m[1]/m[3])}class Rw extends R_{}let N_;Mn("HeatmapBucket",Rw,{omit:["layers"]});var jL={get paint(){return N_=N_||new U({"heatmap-radius":new y(ke.paint_heatmap["heatmap-radius"]),"heatmap-weight":new y(ke.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new c(ke.paint_heatmap["heatmap-intensity"]),"heatmap-color":new D(ke.paint_heatmap["heatmap-color"]),"heatmap-opacity":new c(ke.paint_heatmap["heatmap-opacity"])})}};function kw(f,{width:u,height:m},_,R){if(R){if(R instanceof Uint8ClampedArray)R=new Uint8Array(R.buffer);else if(R.length!==u*m*_)throw new RangeError(`mismatched image size. expected: ${R.length} but got: ${u*m*_}`)}else R=new Uint8Array(u*m*_);return f.width=u,f.height=m,f.data=R,f}function M(f,{width:u,height:m},_){if(u===f.width&&m===f.height)return;const R=kw({},{width:u,height:m},_);E(f,R,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,u),height:Math.min(f.height,m)},_),f.width=u,f.height=m,f.data=R.data}function E(f,u,m,_,R,O){if(R.width===0||R.height===0)return u;if(R.width>f.width||R.height>f.height||m.x>f.width-R.width||m.y>f.height-R.height)throw new RangeError("out of range source coordinates for image copy");if(R.width>u.width||R.height>u.height||_.x>u.width-R.width||_.y>u.height-R.height)throw new RangeError("out of range destination coordinates for image copy");const N=f.data,$=u.data;if(N===$)throw new Error("srcData equals dstData, so image is already copied");for(let G=0;G<R.height;G++){const Z=((m.y+G)*f.width+m.x)*O,ne=((_.y+G)*u.width+_.x)*O;for(let oe=0;oe<R.width*O;oe++)$[ne+oe]=N[Z+oe]}return u}class j{constructor(u,m){kw(this,u,1,m)}resize(u){M(this,u,1)}clone(){return new j({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,m,_,R,O){E(u,m,_,R,O,1)}}class X{constructor(u,m){kw(this,u,4,m)}resize(u){M(this,u,4)}replace(u,m){m?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u}clone(){return new X({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(u,m,_,R,O){E(u,m,_,R,O,4)}}function Q(f){const u={},m=f.resolution||256,_=f.clips?f.clips.length:1,R=f.image||new X({width:m,height:_});if(Math.log(m)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${m}`);const O=(N,$,G)=>{u[f.evaluationKey]=G;const Z=f.expression.evaluate(u);R.data[N+$+0]=Math.floor(255*Z.r/Z.a),R.data[N+$+1]=Math.floor(255*Z.g/Z.a),R.data[N+$+2]=Math.floor(255*Z.b/Z.a),R.data[N+$+3]=Math.floor(255*Z.a)};if(f.clips)for(let N=0,$=0;N<_;++N,$+=4*m)for(let G=0,Z=0;G<m;G++,Z+=4){const ne=G/(m-1),{start:oe,end:fe}=f.clips[N];O($,Z,oe*(1-ne)+fe*ne)}else for(let N=0,$=0;N<m;N++,$+=4)O(0,$,N/(m-1));return R}Mn("AlphaImage",j),Mn("RGBAImage",X);class ue extends K{createBucket(u){return new Rw(u)}constructor(u){super(u,jL),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(u){u==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Q({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let He;var mt={get paint(){return He=He||new U({"hillshade-illumination-direction":new c(ke.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new c(ke.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new c(ke.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new c(ke.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new c(ke.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new c(ke.paint_hillshade["hillshade-accent-color"])})}};class Ut extends K{constructor(u){super(u,mt)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const fn=xe([{name:"a_pos",components:2,type:"Int16"}],4),{members:Vn}=fn;function Sr(f,u,m=2){const _=u&&u.length,R=_?u[0]*m:f.length;let O=cr(f,0,R,m,!0);const N=[];if(!O||O.next===O.prev)return N;let $,G,Z;if(_&&(O=function(ne,oe,fe,_e){const Ce=[];for(let Ae=0,Ue=oe.length;Ae<Ue;Ae++){const qe=cr(ne,oe[Ae]*_e,Ae<Ue-1?oe[Ae+1]*_e:ne.length,_e,!1);qe===qe.next&&(qe.steiner=!0),Ce.push(Tr(qe))}Ce.sort(Nt);for(let Ae=0;Ae<Ce.length;Ae++)fe=Dn(Ce[Ae],fe);return fe}(f,u,O,m)),f.length>80*m){$=1/0,G=1/0;let ne=-1/0,oe=-1/0;for(let fe=m;fe<R;fe+=m){const _e=f[fe],Ce=f[fe+1];_e<$&&($=_e),Ce<G&&(G=Ce),_e>ne&&(ne=_e),Ce>oe&&(oe=Ce)}Z=Math.max(ne-$,oe-G),Z=Z!==0?32767/Z:0}return Kn(O,N,m,$,G,Z,0),N}function cr(f,u,m,_,R){let O;if(R===function(N,$,G,Z){let ne=0;for(let oe=$,fe=G-Z;oe<G;oe+=Z)ne+=(N[fe]-N[oe])*(N[oe+1]+N[fe+1]),fe=oe;return ne}(f,u,m,_)>0)for(let N=u;N<m;N+=_)O=pV(N/_|0,f[N],f[N+1],O);else for(let N=m-_;N>=u;N-=_)O=pV(N/_|0,f[N],f[N+1],O);return O&&Vc(O,O.next)&&(Lw(O),O=O.next),O}function ri(f,u){if(!f)return f;u||(u=f);let m,_=f;do if(m=!1,_.steiner||!Vc(_,_.next)&&lr(_.prev,_,_.next)!==0)_=_.next;else{if(Lw(_),_=u=_.prev,_===_.next)break;m=!0}while(m||_!==u);return u}function Kn(f,u,m,_,R,O,N){if(!f)return;!N&&O&&function(G,Z,ne,oe){let fe=G;do fe.z===0&&(fe.z=Ar(fe.x,fe.y,Z,ne,oe)),fe.prevZ=fe.prev,fe.nextZ=fe.next,fe=fe.next;while(fe!==G);fe.prevZ.nextZ=null,fe.prevZ=null,function(_e){let Ce,Ae=1;do{let Ue,qe=_e;_e=null;let bt=null;for(Ce=0;qe;){Ce++;let rt=qe,gt=0;for(let rn=0;rn<Ae&&(gt++,rt=rt.nextZ,rt);rn++);let Ot=Ae;for(;gt>0||Ot>0&&rt;)gt!==0&&(Ot===0||!rt||qe.z<=rt.z)?(Ue=qe,qe=qe.nextZ,gt--):(Ue=rt,rt=rt.nextZ,Ot--),bt?bt.nextZ=Ue:_e=Ue,Ue.prevZ=bt,bt=Ue;qe=rt}bt.nextZ=null,Ae*=2}while(Ce>1)}(fe)}(f,_,R,O);let $=f;for(;f.prev!==f.next;){const G=f.prev,Z=f.next;if(O?hc(f,_,R,O):ta(f))u.push(G.i,f.i,Z.i),Lw(f),f=Z.next,$=Z.next;else if((f=Z)===$){N?N===1?Kn(f=kt(ri(f),u),u,m,_,R,O,2):N===2&&_t(f,u,m,_,R,O):Kn(ri(f),u,m,_,R,O,1);break}}}function ta(f){const u=f.prev,m=f,_=f.next;if(lr(u,m,_)>=0)return!1;const R=u.x,O=m.x,N=_.x,$=u.y,G=m.y,Z=_.y,ne=R<O?R<N?R:N:O<N?O:N,oe=$<G?$<Z?$:Z:G<Z?G:Z,fe=R>O?R>N?R:N:O>N?O:N,_e=$>G?$>Z?$:Z:G>Z?G:Z;let Ce=_.next;for(;Ce!==u;){if(Ce.x>=ne&&Ce.x<=fe&&Ce.y>=oe&&Ce.y<=_e&&Ur(R,$,O,G,N,Z,Ce.x,Ce.y)&&lr(Ce.prev,Ce,Ce.next)>=0)return!1;Ce=Ce.next}return!0}function hc(f,u,m,_){const R=f.prev,O=f,N=f.next;if(lr(R,O,N)>=0)return!1;const $=R.x,G=O.x,Z=N.x,ne=R.y,oe=O.y,fe=N.y,_e=$<G?$<Z?$:Z:G<Z?G:Z,Ce=ne<oe?ne<fe?ne:fe:oe<fe?oe:fe,Ae=$>G?$>Z?$:Z:G>Z?G:Z,Ue=ne>oe?ne>fe?ne:fe:oe>fe?oe:fe,qe=Ar(_e,Ce,u,m,_),bt=Ar(Ae,Ue,u,m,_);let rt=f.prevZ,gt=f.nextZ;for(;rt&&rt.z>=qe&&gt&&gt.z<=bt;){if(rt.x>=_e&&rt.x<=Ae&&rt.y>=Ce&&rt.y<=Ue&&rt!==R&&rt!==N&&Ur($,ne,G,oe,Z,fe,rt.x,rt.y)&&lr(rt.prev,rt,rt.next)>=0||(rt=rt.prevZ,gt.x>=_e&&gt.x<=Ae&&gt.y>=Ce&&gt.y<=Ue&&gt!==R&&gt!==N&&Ur($,ne,G,oe,Z,fe,gt.x,gt.y)&&lr(gt.prev,gt,gt.next)>=0))return!1;gt=gt.nextZ}for(;rt&&rt.z>=qe;){if(rt.x>=_e&&rt.x<=Ae&&rt.y>=Ce&&rt.y<=Ue&&rt!==R&&rt!==N&&Ur($,ne,G,oe,Z,fe,rt.x,rt.y)&&lr(rt.prev,rt,rt.next)>=0)return!1;rt=rt.prevZ}for(;gt&&gt.z<=bt;){if(gt.x>=_e&&gt.x<=Ae&&gt.y>=Ce&&gt.y<=Ue&&gt!==R&&gt!==N&&Ur($,ne,G,oe,Z,fe,gt.x,gt.y)&&lr(gt.prev,gt,gt.next)>=0)return!1;gt=gt.nextZ}return!0}function kt(f,u){let m=f;do{const _=m.prev,R=m.next.next;!Vc(_,R)&&ET(_,m,m.next,R)&&Ow(_,R)&&Ow(R,_)&&(u.push(_.i,m.i,R.i),Lw(m),Lw(m.next),m=f=R),m=m.next}while(m!==f);return ri(m)}function _t(f,u,m,_,R,O){let N=f;do{let $=N.next.next;for(;$!==N.prev;){if(N.i!==$.i&&ys(N,$)){let G=fV(N,$);return N=ri(N,N.next),G=ri(G,G.next),Kn(N,u,m,_,R,O,0),void Kn(G,u,m,_,R,O,0)}$=$.next}N=N.next}while(N!==f)}function Nt(f,u){return f.x-u.x}function Dn(f,u){const m=function(R,O){let N=O;const $=R.x,G=R.y;let Z,ne=-1/0;do{if(G<=N.y&&G>=N.next.y&&N.next.y!==N.y){const Ae=N.x+(G-N.y)*(N.next.x-N.x)/(N.next.y-N.y);if(Ae<=$&&Ae>ne&&(ne=Ae,Z=N.x<N.next.x?N:N.next,Ae===$))return Z}N=N.next}while(N!==O);if(!Z)return null;const oe=Z,fe=Z.x,_e=Z.y;let Ce=1/0;N=Z;do{if($>=N.x&&N.x>=fe&&$!==N.x&&Ur(G<_e?$:ne,G,fe,_e,G<_e?ne:$,G,N.x,N.y)){const Ae=Math.abs(G-N.y)/($-N.x);Ow(N,R)&&(Ae<Ce||Ae===Ce&&(N.x>Z.x||N.x===Z.x&&Qn(Z,N)))&&(Z=N,Ce=Ae)}N=N.next}while(N!==oe);return Z}(f,u);if(!m)return u;const _=fV(m,f);return ri(_,_.next),ri(m,m.next)}function Qn(f,u){return lr(f.prev,f,u.prev)<0&&lr(u.next,f,f.next)<0}function Ar(f,u,m,_,R){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-m)*R|0)|f<<8))|f<<4))|f<<2))|f<<1))|(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-_)*R|0)|u<<8))|u<<4))|u<<2))|u<<1))<<1}function Tr(f){let u=f,m=f;do(u.x<m.x||u.x===m.x&&u.y<m.y)&&(m=u),u=u.next;while(u!==f);return m}function Ur(f,u,m,_,R,O,N,$){return(R-N)*(u-$)>=(f-N)*(O-$)&&(f-N)*(_-$)>=(m-N)*(u-$)&&(m-N)*(O-$)>=(R-N)*(_-$)}function ys(f,u){return f.next.i!==u.i&&f.prev.i!==u.i&&!function(m,_){let R=m;do{if(R.i!==m.i&&R.next.i!==m.i&&R.i!==_.i&&R.next.i!==_.i&&ET(R,R.next,m,_))return!0;R=R.next}while(R!==m);return!1}(f,u)&&(Ow(f,u)&&Ow(u,f)&&function(m,_){let R=m,O=!1;const N=(m.x+_.x)/2,$=(m.y+_.y)/2;do R.y>$!=R.next.y>$&&R.next.y!==R.y&&N<(R.next.x-R.x)*($-R.y)/(R.next.y-R.y)+R.x&&(O=!O),R=R.next;while(R!==m);return O}(f,u)&&(lr(f.prev,f,u.prev)||lr(f,u.prev,u))||Vc(f,u)&&lr(f.prev,f,f.next)>0&&lr(u.prev,u,u.next)>0)}function lr(f,u,m){return(u.y-f.y)*(m.x-u.x)-(u.x-f.x)*(m.y-u.y)}function Vc(f,u){return f.x===u.x&&f.y===u.y}function ET(f,u,m,_){const R=CT(lr(f,u,m)),O=CT(lr(f,u,_)),N=CT(lr(m,_,f)),$=CT(lr(m,_,u));return R!==O&&N!==$||!(R!==0||!TT(f,m,u))||!(O!==0||!TT(f,_,u))||!(N!==0||!TT(m,f,_))||!($!==0||!TT(m,u,_))}function TT(f,u,m){return u.x<=Math.max(f.x,m.x)&&u.x>=Math.min(f.x,m.x)&&u.y<=Math.max(f.y,m.y)&&u.y>=Math.min(f.y,m.y)}function CT(f){return f>0?1:f<0?-1:0}function Ow(f,u){return lr(f.prev,f,f.next)<0?lr(f,u,f.next)>=0&&lr(f,f.prev,u)>=0:lr(f,u,f.prev)<0||lr(f,f.next,u)<0}function fV(f,u){const m=$L(f.i,f.x,f.y),_=$L(u.i,u.x,u.y),R=f.next,O=u.prev;return f.next=u,u.prev=f,m.next=R,R.prev=m,_.next=m,m.prev=_,O.next=_,_.prev=O,_}function pV(f,u,m,_){const R=$L(f,u,m);return _?(R.next=_.next,R.prev=_,_.next.prev=R,_.next=R):(R.prev=R,R.next=R),R}function Lw(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function $L(f,u,m){return{i:f,x:u,y:m,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function UL(f,u,m){const _=m.patternDependencies;let R=!1;for(const O of u){const N=O.paint.get(`${f}-pattern`);N.isConstant()||(R=!0);const $=N.constantOr(null);$&&(R=!0,_[$.to]=!0,_[$.from]=!0)}return R}function VL(f,u,m,_,R){const O=R.patternDependencies;for(const N of u){const $=N.paint.get(`${f}-pattern`).value;if($.kind!=="constant"){let G=$.evaluate({zoom:_-1},m,{},R.availableImages),Z=$.evaluate({zoom:_},m,{},R.availableImages),ne=$.evaluate({zoom:_+1},m,{},R.availableImages);G=G&&G.name?G.name:G,Z=Z&&Z.name?Z.name:Z,ne=ne&&ne.name?ne.name:ne,O[G]=!0,O[Z]=!0,O[ne]=!0,m.patterns[N.id]={min:G,mid:Z,max:ne}}}return m}class HL{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(m=>m.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new cf,this.indexArray=new Ka,this.indexArray2=new uc,this.programConfigurations=new hf(u.layers,u.zoom),this.segments=new co,this.segments2=new co,this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id)}populate(u,m,_){this.hasPattern=UL("fill",this.layers,m);const R=this.layers[0].layout.get("fill-sort-key"),O=!R.isConstant(),N=[];for(const{feature:$,id:G,index:Z,sourceLayerIndex:ne}of u){const oe=this.layers[0]._featureFilter.needGeometry,fe=Cp($,oe);if(!this.layers[0]._featureFilter.filter(new ai(this.zoom),fe,_))continue;const _e=O?R.evaluate(fe,{},_,m.availableImages):void 0,Ce={id:G,properties:$.properties,type:$.type,sourceLayerIndex:ne,index:Z,geometry:oe?fe.geometry:Ku($),patterns:{},sortKey:_e};N.push(Ce)}O&&N.sort(($,G)=>$.sortKey-G.sortKey);for(const $ of N){const{geometry:G,index:Z,sourceLayerIndex:ne}=$;if(this.hasPattern){const oe=VL("fill",this.layers,$,this.zoom,m);this.patternFeatures.push(oe)}else this.addFeature($,G,Z,_,{});m.featureIndex.insert(u[Z].feature,G,Z,ne,this.index)}}update(u,m,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,m,this.stateDependentLayers,_)}addFeatures(u,m,_){for(const R of this.patternFeatures)this.addFeature(R,R.geometry,R.index,m,_)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Vn),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.indexBuffer2=u.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(u,m,_,R,O){for(const N of cp(m,500)){let $=0;for(const _e of N)$+=_e.length;const G=this.segments.prepareSegment($,this.layoutVertexArray,this.indexArray),Z=G.vertexLength,ne=[],oe=[];for(const _e of N){if(_e.length===0)continue;_e!==N[0]&&oe.push(ne.length/2);const Ce=this.segments2.prepareSegment(_e.length,this.layoutVertexArray,this.indexArray2),Ae=Ce.vertexLength;this.layoutVertexArray.emplaceBack(_e[0].x,_e[0].y),this.indexArray2.emplaceBack(Ae+_e.length-1,Ae),ne.push(_e[0].x),ne.push(_e[0].y);for(let Ue=1;Ue<_e.length;Ue++)this.layoutVertexArray.emplaceBack(_e[Ue].x,_e[Ue].y),this.indexArray2.emplaceBack(Ae+Ue-1,Ae+Ue),ne.push(_e[Ue].x),ne.push(_e[Ue].y);Ce.vertexLength+=_e.length,Ce.primitiveLength+=_e.length}const fe=Sr(ne,oe);for(let _e=0;_e<fe.length;_e+=3)this.indexArray.emplaceBack(Z+fe[_e],Z+fe[_e+1],Z+fe[_e+2]);G.vertexLength+=$,G.primitiveLength+=fe.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,_,O,R)}}let mV,gV;Mn("FillBucket",HL,{omit:["layers","patternFeatures"]});var ife={get paint(){return gV=gV||new U({"fill-antialias":new c(ke.paint_fill["fill-antialias"]),"fill-opacity":new y(ke.paint_fill["fill-opacity"]),"fill-color":new y(ke.paint_fill["fill-color"]),"fill-outline-color":new y(ke.paint_fill["fill-outline-color"]),"fill-translate":new c(ke.paint_fill["fill-translate"]),"fill-translate-anchor":new c(ke.paint_fill["fill-translate-anchor"]),"fill-pattern":new T(ke.paint_fill["fill-pattern"])})},get layout(){return mV=mV||new U({"fill-sort-key":new y(ke.layout_fill["fill-sort-key"])})}};class ofe extends K{constructor(u){super(u,ife)}recalculate(u,m){super.recalculate(u,m);const _=this.paint._values["fill-outline-color"];_.value.kind==="constant"&&_.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(u){return new HL(u)}queryRadius(){return O_(this.paint.get("fill-translate"))}queryIntersectsFeature(u,m,_,R,O,N,$){return xT(Sa(u,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),N.angle,$),R)}isTileClipped(){return!0}}const sfe=xe([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),afe=xe([{name:"a_centroid",components:2,type:"Int16"}],4),{members:lfe}=sfe;var vg={},cfe=d,yV=z_;function z_(f,u,m,_,R){this.properties={},this.extent=m,this.type=0,this._pbf=f,this._geometry=-1,this._keys=_,this._values=R,f.readFields(ufe,this,u)}function ufe(f,u,m){f==1?u.id=m.readVarint():f==2?function(_,R){for(var O=_.readVarint()+_.pos;_.pos<O;){var N=R._keys[_.readVarint()],$=R._values[_.readVarint()];R.properties[N]=$}}(m,u):f==3?u.type=m.readVarint():f==4&&(u._geometry=m.pos)}function dfe(f){for(var u,m,_=0,R=0,O=f.length,N=O-1;R<O;N=R++)_+=((m=f[N]).x-(u=f[R]).x)*(u.y+m.y);return _}z_.types=["Unknown","Point","LineString","Polygon"],z_.prototype.loadGeometry=function(){var f=this._pbf;f.pos=this._geometry;for(var u,m=f.readVarint()+f.pos,_=1,R=0,O=0,N=0,$=[];f.pos<m;){if(R<=0){var G=f.readVarint();_=7&G,R=G>>3}if(R--,_===1||_===2)O+=f.readSVarint(),N+=f.readSVarint(),_===1&&(u&&$.push(u),u=[]),u.push(new cfe(O,N));else{if(_!==7)throw new Error("unknown command "+_);u&&u.push(u[0].clone())}}return u&&$.push(u),$},z_.prototype.bbox=function(){var f=this._pbf;f.pos=this._geometry;for(var u=f.readVarint()+f.pos,m=1,_=0,R=0,O=0,N=1/0,$=-1/0,G=1/0,Z=-1/0;f.pos<u;){if(_<=0){var ne=f.readVarint();m=7&ne,_=ne>>3}if(_--,m===1||m===2)(R+=f.readSVarint())<N&&(N=R),R>$&&($=R),(O+=f.readSVarint())<G&&(G=O),O>Z&&(Z=O);else if(m!==7)throw new Error("unknown command "+m)}return[N,G,$,Z]},z_.prototype.toGeoJSON=function(f,u,m){var _,R,O=this.extent*Math.pow(2,m),N=this.extent*f,$=this.extent*u,G=this.loadGeometry(),Z=z_.types[this.type];function ne(_e){for(var Ce=0;Ce<_e.length;Ce++){var Ae=_e[Ce];_e[Ce]=[360*(Ae.x+N)/O-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ae.y+$)/O)*Math.PI/180))-90]}}switch(this.type){case 1:var oe=[];for(_=0;_<G.length;_++)oe[_]=G[_][0];ne(G=oe);break;case 2:for(_=0;_<G.length;_++)ne(G[_]);break;case 3:for(G=function(_e){var Ce=_e.length;if(Ce<=1)return[_e];for(var Ae,Ue,qe=[],bt=0;bt<Ce;bt++){var rt=dfe(_e[bt]);rt!==0&&(Ue===void 0&&(Ue=rt<0),Ue===rt<0?(Ae&&qe.push(Ae),Ae=[_e[bt]]):Ae.push(_e[bt]))}return Ae&&qe.push(Ae),qe}(G),_=0;_<G.length;_++)for(R=0;R<G[_].length;R++)ne(G[_][R])}G.length===1?G=G[0]:Z="Multi"+Z;var fe={type:"Feature",geometry:{type:Z,coordinates:G},properties:this.properties};return"id"in this&&(fe.id=this.id),fe};var hfe=yV,vV=_V;function _V(f,u){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=f,this._keys=[],this._values=[],this._features=[],f.readFields(ffe,this,u),this.length=this._features.length}function ffe(f,u,m){f===15?u.version=m.readVarint():f===1?u.name=m.readString():f===5?u.extent=m.readVarint():f===2?u._features.push(m.pos):f===3?u._keys.push(m.readString()):f===4&&u._values.push(function(_){for(var R=null,O=_.readVarint()+_.pos;_.pos<O;){var N=_.readVarint()>>3;R=N===1?_.readString():N===2?_.readFloat():N===3?_.readDouble():N===4?_.readVarint64():N===5?_.readVarint():N===6?_.readSVarint():N===7?_.readBoolean():null}return R}(m))}_V.prototype.feature=function(f){if(f<0||f>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[f];var u=this._pbf.readVarint()+this._pbf.pos;return new hfe(this._pbf,u,this.extent,this._keys,this._values)};var pfe=vV;function mfe(f,u,m){if(f===3){var _=new pfe(m,m.readVarint()+m.pos);_.length&&(u[_.name]=_)}}vg.VectorTile=function(f,u){this.layers=f.readFields(mfe,{},u)},vg.VectorTileFeature=yV,vg.VectorTileLayer=vV;const gfe=vg.VectorTileFeature.types,WL=Math.pow(2,13);function Dw(f,u,m,_,R,O,N,$){f.emplaceBack(u,m,2*Math.floor(_*WL)+N,R*WL*2,O*WL*2,Math.round($))}class GL{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(m=>m.id),this.index=u.index,this.hasPattern=!1,this.layoutVertexArray=new Qs,this.centroidVertexArray=new cc,this.indexArray=new Ka,this.programConfigurations=new hf(u.layers,u.zoom),this.segments=new co,this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id)}populate(u,m,_){this.features=[],this.hasPattern=UL("fill-extrusion",this.layers,m);for(const{feature:R,id:O,index:N,sourceLayerIndex:$}of u){const G=this.layers[0]._featureFilter.needGeometry,Z=Cp(R,G);if(!this.layers[0]._featureFilter.filter(new ai(this.zoom),Z,_))continue;const ne={id:O,sourceLayerIndex:$,index:N,geometry:G?Z.geometry:Ku(R),properties:R.properties,type:R.type,patterns:{}};this.hasPattern?this.features.push(VL("fill-extrusion",this.layers,ne,this.zoom,m)):this.addFeature(ne,ne.geometry,N,_,{}),m.featureIndex.insert(R,ne.geometry,N,$,this.index,!0)}}addFeatures(u,m,_){for(const R of this.features){const{geometry:O}=R;this.addFeature(R,O,R.index,m,_)}}update(u,m,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,m,this.stateDependentLayers,_)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,lfe),this.centroidVertexBuffer=u.createVertexBuffer(this.centroidVertexArray,afe.members,!0),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(u,m,_,R,O){for(const N of cp(m,500)){const $={x:0,y:0,vertexCount:0};let G=0;for(const Ce of N)G+=Ce.length;let Z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Ce of N){if(Ce.length===0||vfe(Ce))continue;let Ae=0;for(let Ue=0;Ue<Ce.length;Ue++){const qe=Ce[Ue];if(Ue>=1){const bt=Ce[Ue-1];if(!yfe(qe,bt)){Z.vertexLength+4>co.MAX_VERTEX_ARRAY_LENGTH&&(Z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const rt=qe.sub(bt)._perp()._unit(),gt=bt.dist(qe);Ae+gt>32768&&(Ae=0),Dw(this.layoutVertexArray,qe.x,qe.y,rt.x,rt.y,0,0,Ae),Dw(this.layoutVertexArray,qe.x,qe.y,rt.x,rt.y,0,1,Ae),$.x+=2*qe.x,$.y+=2*qe.y,$.vertexCount+=2,Ae+=gt,Dw(this.layoutVertexArray,bt.x,bt.y,rt.x,rt.y,0,0,Ae),Dw(this.layoutVertexArray,bt.x,bt.y,rt.x,rt.y,0,1,Ae),$.x+=2*bt.x,$.y+=2*bt.y,$.vertexCount+=2;const Ot=Z.vertexLength;this.indexArray.emplaceBack(Ot,Ot+2,Ot+1),this.indexArray.emplaceBack(Ot+1,Ot+2,Ot+3),Z.vertexLength+=4,Z.primitiveLength+=2}}}}if(Z.vertexLength+G>co.MAX_VERTEX_ARRAY_LENGTH&&(Z=this.segments.prepareSegment(G,this.layoutVertexArray,this.indexArray)),gfe[u.type]!=="Polygon")continue;const ne=[],oe=[],fe=Z.vertexLength;for(const Ce of N)if(Ce.length!==0){Ce!==N[0]&&oe.push(ne.length/2);for(let Ae=0;Ae<Ce.length;Ae++){const Ue=Ce[Ae];Dw(this.layoutVertexArray,Ue.x,Ue.y,0,0,1,1,0),$.x+=Ue.x,$.y+=Ue.y,$.vertexCount+=1,ne.push(Ue.x),ne.push(Ue.y)}}const _e=Sr(ne,oe);for(let Ce=0;Ce<_e.length;Ce+=3)this.indexArray.emplaceBack(fe+_e[Ce],fe+_e[Ce+2],fe+_e[Ce+1]);Z.primitiveLength+=_e.length/3,Z.vertexLength+=G;for(let Ce=0;Ce<$.vertexCount;Ce++){const Ae=Math.floor($.x/$.vertexCount),Ue=Math.floor($.y/$.vertexCount);this.centroidVertexArray.emplaceBack(Ae,Ue)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,_,O,R)}}function yfe(f,u){return f.x===u.x&&(f.x<0||f.x>ho)||f.y===u.y&&(f.y<0||f.y>ho)}function vfe(f){return f.every(u=>u.x<0)||f.every(u=>u.x>ho)||f.every(u=>u.y<0)||f.every(u=>u.y>ho)}let xV;Mn("FillExtrusionBucket",GL,{omit:["layers","features"]});var _fe={get paint(){return xV=xV||new U({"fill-extrusion-opacity":new c(ke["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new y(ke["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new c(ke["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new c(ke["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new T(ke["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new y(ke["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new y(ke["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new c(ke["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class xfe extends K{constructor(u){super(u,_fe)}createBucket(u){return new GL(u)}queryRadius(){return O_(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(u,m,_,R,O,N,$,G){const Z=Sa(u,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),N.angle,$),ne=this.paint.get("fill-extrusion-height").evaluate(m,_),oe=this.paint.get("fill-extrusion-base").evaluate(m,_),fe=function(Ce,Ae,Ue,qe){const bt=[];for(const rt of Ce){const gt=[rt.x,rt.y,0,1];xv(gt,gt,Ae),bt.push(new p(gt[0]/gt[3],gt[1]/gt[3]))}return bt}(Z,G),_e=function(Ce,Ae,Ue,qe){const bt=[],rt=[],gt=qe[8]*Ae,Ot=qe[9]*Ae,rn=qe[10]*Ae,wn=qe[11]*Ae,er=qe[8]*Ue,xn=qe[9]*Ue,gn=qe[10]*Ue,Bn=qe[11]*Ue;for(const Ln of Ce){const An=[],Ht=[];for(const Hn of Ln){const Fn=Hn.x,dr=Hn.y,Fi=qe[0]*Fn+qe[4]*dr+qe[12],ki=qe[1]*Fn+qe[5]*dr+qe[13],vs=qe[2]*Fn+qe[6]*dr+qe[14],Zu=qe[3]*Fn+qe[7]*dr+qe[15],ra=vs+rn,_s=Zu+wn,Ja=Fi+er,Qa=ki+xn,el=vs+gn,So=Zu+Bn,xs=new p((Fi+gt)/_s,(ki+Ot)/_s);xs.z=ra/_s,An.push(xs);const Ma=new p(Ja/So,Qa/So);Ma.z=el/So,Ht.push(Ma)}bt.push(An),rt.push(Ht)}return[bt,rt]}(R,oe,ne,G);return function(Ce,Ae,Ue){let qe=1/0;xT(Ue,Ae)&&(qe=bV(Ue,Ae[0]));for(let bt=0;bt<Ae.length;bt++){const rt=Ae[bt],gt=Ce[bt];for(let Ot=0;Ot<rt.length-1;Ot++){const rn=rt[Ot],wn=[rn,rt[Ot+1],gt[Ot+1],gt[Ot],rn];Cw(Ue,wn)&&(qe=Math.min(qe,bV(Ue,wn)))}}return qe!==1/0&&qe}(_e[0],_e[1],fe)}}function Nw(f,u){return f.x*u.x+f.y*u.y}function bV(f,u){if(f.length===1){let m=0;const _=u[m++];let R;for(;!R||_.equals(R);)if(R=u[m++],!R)return 1/0;for(;m<u.length;m++){const O=u[m],N=f[0],$=R.sub(_),G=O.sub(_),Z=N.sub(_),ne=Nw($,$),oe=Nw($,G),fe=Nw(G,G),_e=Nw(Z,$),Ce=Nw(Z,G),Ae=ne*fe-oe*oe,Ue=(fe*_e-oe*Ce)/Ae,qe=(ne*Ce-oe*_e)/Ae,bt=_.z*(1-Ue-qe)+R.z*Ue+O.z*qe;if(isFinite(bt))return bt}return 1/0}{let m=1/0;for(const _ of u)m=Math.min(m,_.z);return m}}const bfe=xe([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:wfe}=bfe,Sfe=xe([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Mfe}=Sfe,Efe=vg.VectorTileFeature.types,Tfe=Math.cos(Math.PI/180*37.5),wV=Math.pow(2,14)/.5;class qL{constructor(u){this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(m=>m.id),this.index=u.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(m=>{this.gradients[m.id]={}}),this.layoutVertexArray=new ni,this.layoutVertexArray2=new vr,this.indexArray=new Ka,this.programConfigurations=new hf(u.layers,u.zoom),this.segments=new co,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id)}populate(u,m,_){this.hasPattern=UL("line",this.layers,m);const R=this.layers[0].layout.get("line-sort-key"),O=!R.isConstant(),N=[];for(const{feature:$,id:G,index:Z,sourceLayerIndex:ne}of u){const oe=this.layers[0]._featureFilter.needGeometry,fe=Cp($,oe);if(!this.layers[0]._featureFilter.filter(new ai(this.zoom),fe,_))continue;const _e=O?R.evaluate(fe,{},_):void 0,Ce={id:G,properties:$.properties,type:$.type,sourceLayerIndex:ne,index:Z,geometry:oe?fe.geometry:Ku($),patterns:{},sortKey:_e};N.push(Ce)}O&&N.sort(($,G)=>$.sortKey-G.sortKey);for(const $ of N){const{geometry:G,index:Z,sourceLayerIndex:ne}=$;if(this.hasPattern){const oe=VL("line",this.layers,$,this.zoom,m);this.patternFeatures.push(oe)}else this.addFeature($,G,Z,_,{});m.featureIndex.insert(u[Z].feature,G,Z,ne,this.index)}}update(u,m,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,m,this.stateDependentLayers,_)}addFeatures(u,m,_){for(const R of this.patternFeatures)this.addFeature(R,R.geometry,R.index,m,_)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(u){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=u.createVertexBuffer(this.layoutVertexArray2,Mfe)),this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,wfe),this.indexBuffer=u.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(u),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(u){if(u.properties&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(u.properties,"mapbox_clip_end"))return{start:+u.properties.mapbox_clip_start,end:+u.properties.mapbox_clip_end}}addFeature(u,m,_,R,O){const N=this.layers[0].layout,$=N.get("line-join").evaluate(u,{}),G=N.get("line-cap"),Z=N.get("line-miter-limit"),ne=N.get("line-round-limit");this.lineClips=this.lineFeatureClips(u);for(const oe of m)this.addLine(oe,u,$,G,Z,ne);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,_,O,R)}addLine(u,m,_,R,O,N){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let qe=0;qe<u.length-1;qe++)this.totalDistance+=u[qe].dist(u[qe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const $=Efe[m.type]==="Polygon";let G=u.length;for(;G>=2&&u[G-1].equals(u[G-2]);)G--;let Z=0;for(;Z<G-1&&u[Z].equals(u[Z+1]);)Z++;if(G<($?3:2))return;_==="bevel"&&(O=1.05);const ne=this.overscaling<=16?15*ho/(512*this.overscaling):0,oe=this.segments.prepareSegment(10*G,this.layoutVertexArray,this.indexArray);let fe,_e,Ce,Ae,Ue;this.e1=this.e2=-1,$&&(fe=u[G-2],Ue=u[Z].sub(fe)._unit()._perp());for(let qe=Z;qe<G;qe++){if(Ce=qe===G-1?$?u[Z+1]:void 0:u[qe+1],Ce&&u[qe].equals(Ce))continue;Ue&&(Ae=Ue),fe&&(_e=fe),fe=u[qe],Ue=Ce?Ce.sub(fe)._unit()._perp():Ae,Ae=Ae||Ue;let bt=Ae.add(Ue);bt.x===0&&bt.y===0||bt._unit();const rt=Ae.x*Ue.x+Ae.y*Ue.y,gt=bt.x*Ue.x+bt.y*Ue.y,Ot=gt!==0?1/gt:1/0,rn=2*Math.sqrt(2-2*gt),wn=gt<Tfe&&_e&&Ce,er=Ae.x*Ue.y-Ae.y*Ue.x>0;if(wn&&qe>Z){const Bn=fe.dist(_e);if(Bn>2*ne){const Ln=fe.sub(fe.sub(_e)._mult(ne/Bn)._round());this.updateDistance(_e,Ln),this.addCurrentVertex(Ln,Ae,0,0,oe),_e=Ln}}const xn=_e&&Ce;let gn=xn?_:$?"butt":R;if(xn&&gn==="round"&&(Ot<N?gn="miter":Ot<=2&&(gn="fakeround")),gn==="miter"&&Ot>O&&(gn="bevel"),gn==="bevel"&&(Ot>2&&(gn="flipbevel"),Ot<O&&(gn="miter")),_e&&this.updateDistance(_e,fe),gn==="miter")bt._mult(Ot),this.addCurrentVertex(fe,bt,0,0,oe);else if(gn==="flipbevel"){if(Ot>100)bt=Ue.mult(-1);else{const Bn=Ot*Ae.add(Ue).mag()/Ae.sub(Ue).mag();bt._perp()._mult(Bn*(er?-1:1))}this.addCurrentVertex(fe,bt,0,0,oe),this.addCurrentVertex(fe,bt.mult(-1),0,0,oe)}else if(gn==="bevel"||gn==="fakeround"){const Bn=-Math.sqrt(Ot*Ot-1),Ln=er?Bn:0,An=er?0:Bn;if(_e&&this.addCurrentVertex(fe,Ae,Ln,An,oe),gn==="fakeround"){const Ht=Math.round(180*rn/Math.PI/20);for(let Hn=1;Hn<Ht;Hn++){let Fn=Hn/Ht;if(Fn!==.5){const Fi=Fn-.5;Fn+=Fn*Fi*(Fn-1)*((1.0904+rt*(rt*(3.55645-1.43519*rt)-3.2452))*Fi*Fi+(.848013+rt*(.215638*rt-1.06021)))}const dr=Ue.sub(Ae)._mult(Fn)._add(Ae)._unit()._mult(er?-1:1);this.addHalfVertex(fe,dr.x,dr.y,!1,er,0,oe)}}Ce&&this.addCurrentVertex(fe,Ue,-Ln,-An,oe)}else if(gn==="butt")this.addCurrentVertex(fe,bt,0,0,oe);else if(gn==="square"){const Bn=_e?1:-1;this.addCurrentVertex(fe,bt,Bn,Bn,oe)}else gn==="round"&&(_e&&(this.addCurrentVertex(fe,Ae,0,0,oe),this.addCurrentVertex(fe,Ae,1,1,oe,!0)),Ce&&(this.addCurrentVertex(fe,Ue,-1,-1,oe,!0),this.addCurrentVertex(fe,Ue,0,0,oe)));if(wn&&qe<G-1){const Bn=fe.dist(Ce);if(Bn>2*ne){const Ln=fe.add(Ce.sub(fe)._mult(ne/Bn)._round());this.updateDistance(fe,Ln),this.addCurrentVertex(Ln,Ue,0,0,oe),fe=Ln}}}}addCurrentVertex(u,m,_,R,O,N=!1){const $=m.y*R-m.x,G=-m.y-m.x*R;this.addHalfVertex(u,m.x+m.y*_,m.y-m.x*_,N,!1,_,O),this.addHalfVertex(u,$,G,N,!0,-R,O),this.distance>wV/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(u,m,_,R,O,N))}addHalfVertex({x:u,y:m},_,R,O,N,$,G){const Z=.5*(this.lineClips?this.scaledDistance*(wV-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((u<<1)+(O?1:0),(m<<1)+(N?1:0),Math.round(63*_)+128,Math.round(63*R)+128,1+($===0?0:$<0?-1:1)|(63&Z)<<2,Z>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ne=G.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ne),G.primitiveLength++),N?this.e2=ne:this.e1=ne}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(u,m){this.distance+=u.dist(m),this.updateScaledDistance()}}let SV,MV;Mn("LineBucket",qL,{omit:["layers","patternFeatures"]});var EV={get paint(){return MV=MV||new U({"line-opacity":new y(ke.paint_line["line-opacity"]),"line-color":new y(ke.paint_line["line-color"]),"line-translate":new c(ke.paint_line["line-translate"]),"line-translate-anchor":new c(ke.paint_line["line-translate-anchor"]),"line-width":new y(ke.paint_line["line-width"]),"line-gap-width":new y(ke.paint_line["line-gap-width"]),"line-offset":new y(ke.paint_line["line-offset"]),"line-blur":new y(ke.paint_line["line-blur"]),"line-dasharray":new I(ke.paint_line["line-dasharray"]),"line-pattern":new T(ke.paint_line["line-pattern"]),"line-gradient":new D(ke.paint_line["line-gradient"])})},get layout(){return SV=SV||new U({"line-cap":new c(ke.layout_line["line-cap"]),"line-join":new y(ke.layout_line["line-join"]),"line-miter-limit":new c(ke.layout_line["line-miter-limit"]),"line-round-limit":new c(ke.layout_line["line-round-limit"]),"line-sort-key":new y(ke.layout_line["line-sort-key"])})}};class Cfe extends y{possiblyEvaluate(u,m){return m=new ai(Math.floor(m.zoom),{now:m.now,fadeDuration:m.fadeDuration,zoomHistory:m.zoomHistory,transition:m.transition}),super.possiblyEvaluate(u,m)}evaluate(u,m,_,R){return m=B({},m,{zoom:Math.floor(m.zoom)}),super.evaluate(u,m,_,R)}}let AT;class Afe extends K{constructor(u){super(u,EV),this.gradientVersion=0,AT||(AT=new Cfe(EV.paint.properties["line-width"].specification),AT.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(u){if(u==="line-gradient"){const m=this.gradientExpression();this.stepInterpolant=!!function(_){return _._styleExpression!==void 0}(m)&&m._styleExpression.expression instanceof Wh,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(u,m){super.recalculate(u,m),this.paint._values["line-floorwidth"]=AT.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,u)}createBucket(u){return new qL(u)}queryRadius(u){const m=u,_=TV(gg("line-width",this,m),gg("line-gap-width",this,m)),R=gg("line-offset",this,m);return _/2+Math.abs(R)+O_(this.paint.get("line-translate"))}queryIntersectsFeature(u,m,_,R,O,N,$){const G=Sa(u,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),N.angle,$),Z=$/2*TV(this.paint.get("line-width").evaluate(m,_),this.paint.get("line-gap-width").evaluate(m,_)),ne=this.paint.get("line-offset").evaluate(m,_);return ne&&(R=function(oe,fe){const _e=[];for(let Ce=0;Ce<oe.length;Ce++){const Ae=oe[Ce],Ue=[];for(let qe=0;qe<Ae.length;qe++){const bt=Ae[qe-1],rt=Ae[qe],gt=Ae[qe+1],Ot=qe===0?new p(0,0):rt.sub(bt)._unit()._perp(),rn=qe===Ae.length-1?new p(0,0):gt.sub(rt)._unit()._perp(),wn=Ot._add(rn)._unit(),er=wn.x*rn.x+wn.y*rn.y;er!==0&&wn._mult(1/er),Ue.push(wn._mult(fe)._add(rt))}_e.push(Ue)}return _e}(R,ne*$)),function(oe,fe,_e){for(let Ce=0;Ce<fe.length;Ce++){const Ae=fe[Ce];if(oe.length>=3){for(let Ue=0;Ue<Ae.length;Ue++)if(mg(oe,Ae[Ue]))return!0}if(Pp(oe,Ae,_e))return!0}return!1}(G,R,Z)}isTileClipped(){return!0}}function TV(f,u){return u>0?u+2*f:f}const Pfe=xe([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Ife=xe([{name:"a_projected_pos",components:3,type:"Float32"}],4);xe([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Rfe=xe([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);xe([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const CV=xe([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),kfe=xe([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Ofe(f,u,m){return f.sections.forEach(_=>{_.text=function(R,O,N){const $=O.layout.get("text-transform").evaluate(N,{});return $==="uppercase"?R=R.toLocaleUpperCase():$==="lowercase"&&(R=R.toLocaleLowerCase()),Ol.applyArabicShaping&&(R=Ol.applyArabicShaping(R)),R}(_.text,u,m)}),f}xe([{name:"triangle",components:3,type:"Uint16"}]),xe([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),xe([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),xe([{type:"Float32",name:"offsetX"}]),xe([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),xe([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const zw={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var ss=24,AV=Ri,PV=function(f,u,m,_,R){var O,N,$=8*R-_-1,G=(1<<$)-1,Z=G>>1,ne=-7,oe=R-1,fe=-1,_e=f[u+oe];for(oe+=fe,O=_e&(1<<-ne)-1,_e>>=-ne,ne+=$;ne>0;O=256*O+f[u+oe],oe+=fe,ne-=8);for(N=O&(1<<-ne)-1,O>>=-ne,ne+=_;ne>0;N=256*N+f[u+oe],oe+=fe,ne-=8);if(O===0)O=1-Z;else{if(O===G)return N?NaN:1/0*(_e?-1:1);N+=Math.pow(2,_),O-=Z}return(_e?-1:1)*N*Math.pow(2,O-_)},IV=function(f,u,m,_,R,O){var N,$,G,Z=8*O-R-1,ne=(1<<Z)-1,oe=ne>>1,fe=R===23?Math.pow(2,-24)-Math.pow(2,-77):0,_e=0,Ce=1,Ae=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?($=isNaN(u)?1:0,N=ne):(N=Math.floor(Math.log(u)/Math.LN2),u*(G=Math.pow(2,-N))<1&&(N--,G*=2),(u+=N+oe>=1?fe/G:fe*Math.pow(2,1-oe))*G>=2&&(N++,G/=2),N+oe>=ne?($=0,N=ne):N+oe>=1?($=(u*G-1)*Math.pow(2,R),N+=oe):($=u*Math.pow(2,oe-1)*Math.pow(2,R),N=0));R>=8;f[m+_e]=255&$,_e+=Ce,$/=256,R-=8);for(N=N<<R|$,Z+=R;Z>0;f[m+_e]=255&N,_e+=Ce,N/=256,Z-=8);f[m+_e-Ce]|=128*Ae};function Ri(f){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(f)?f:new Uint8Array(f||0),this.pos=0,this.type=0,this.length=this.buf.length}Ri.Varint=0,Ri.Fixed64=1,Ri.Bytes=2,Ri.Fixed32=5;var XL=4294967296,RV=1/XL,kV=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function Rp(f){return f.type===Ri.Bytes?f.readVarint()+f.pos:f.pos+1}function F_(f,u,m){return m?4294967296*u+(f>>>0):4294967296*(u>>>0)+(f>>>0)}function OV(f,u,m){var _=u<=16383?1:u<=2097151?2:u<=268435455?3:Math.floor(Math.log(u)/(7*Math.LN2));m.realloc(_);for(var R=m.pos-1;R>=f;R--)m.buf[R+_]=m.buf[R]}function Lfe(f,u){for(var m=0;m<f.length;m++)u.writeVarint(f[m])}function Dfe(f,u){for(var m=0;m<f.length;m++)u.writeSVarint(f[m])}function Nfe(f,u){for(var m=0;m<f.length;m++)u.writeFloat(f[m])}function zfe(f,u){for(var m=0;m<f.length;m++)u.writeDouble(f[m])}function Ffe(f,u){for(var m=0;m<f.length;m++)u.writeBoolean(f[m])}function Bfe(f,u){for(var m=0;m<f.length;m++)u.writeFixed32(f[m])}function jfe(f,u){for(var m=0;m<f.length;m++)u.writeSFixed32(f[m])}function $fe(f,u){for(var m=0;m<f.length;m++)u.writeFixed64(f[m])}function Ufe(f,u){for(var m=0;m<f.length;m++)u.writeSFixed64(f[m])}function PT(f,u){return(f[u]|f[u+1]<<8|f[u+2]<<16)+16777216*f[u+3]}function B_(f,u,m){f[m]=u,f[m+1]=u>>>8,f[m+2]=u>>>16,f[m+3]=u>>>24}function LV(f,u){return(f[u]|f[u+1]<<8|f[u+2]<<16)+(f[u+3]<<24)}Ri.prototype={destroy:function(){this.buf=null},readFields:function(f,u,m){for(m=m||this.length;this.pos<m;){var _=this.readVarint(),R=_>>3,O=this.pos;this.type=7&_,f(R,u,this),this.pos===O&&this.skip(_)}return u},readMessage:function(f,u){return this.readFields(f,u,this.readVarint()+this.pos)},readFixed32:function(){var f=PT(this.buf,this.pos);return this.pos+=4,f},readSFixed32:function(){var f=LV(this.buf,this.pos);return this.pos+=4,f},readFixed64:function(){var f=PT(this.buf,this.pos)+PT(this.buf,this.pos+4)*XL;return this.pos+=8,f},readSFixed64:function(){var f=PT(this.buf,this.pos)+LV(this.buf,this.pos+4)*XL;return this.pos+=8,f},readFloat:function(){var f=PV(this.buf,this.pos,!0,23,4);return this.pos+=4,f},readDouble:function(){var f=PV(this.buf,this.pos,!0,52,8);return this.pos+=8,f},readVarint:function(f){var u,m,_=this.buf;return u=127&(m=_[this.pos++]),m<128?u:(u|=(127&(m=_[this.pos++]))<<7,m<128?u:(u|=(127&(m=_[this.pos++]))<<14,m<128?u:(u|=(127&(m=_[this.pos++]))<<21,m<128?u:function(R,O,N){var $,G,Z=N.buf;if($=(112&(G=Z[N.pos++]))>>4,G<128||($|=(127&(G=Z[N.pos++]))<<3,G<128)||($|=(127&(G=Z[N.pos++]))<<10,G<128)||($|=(127&(G=Z[N.pos++]))<<17,G<128)||($|=(127&(G=Z[N.pos++]))<<24,G<128)||($|=(1&(G=Z[N.pos++]))<<31,G<128))return F_(R,$,O);throw new Error("Expected varint not more than 10 bytes")}(u|=(15&(m=_[this.pos]))<<28,f,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var f=this.readVarint();return f%2==1?(f+1)/-2:f/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var f=this.readVarint()+this.pos,u=this.pos;return this.pos=f,f-u>=12&&kV?function(m,_,R){return kV.decode(m.subarray(_,R))}(this.buf,u,f):function(m,_,R){for(var O="",N=_;N<R;){var $,G,Z,ne=m[N],oe=null,fe=ne>239?4:ne>223?3:ne>191?2:1;if(N+fe>R)break;fe===1?ne<128&&(oe=ne):fe===2?(192&($=m[N+1]))==128&&(oe=(31&ne)<<6|63&$)<=127&&(oe=null):fe===3?(G=m[N+2],(192&($=m[N+1]))==128&&(192&G)==128&&((oe=(15&ne)<<12|(63&$)<<6|63&G)<=2047||oe>=55296&&oe<=57343)&&(oe=null)):fe===4&&(G=m[N+2],Z=m[N+3],(192&($=m[N+1]))==128&&(192&G)==128&&(192&Z)==128&&((oe=(15&ne)<<18|(63&$)<<12|(63&G)<<6|63&Z)<=65535||oe>=1114112)&&(oe=null)),oe===null?(oe=65533,fe=1):oe>65535&&(oe-=65536,O+=String.fromCharCode(oe>>>10&1023|55296),oe=56320|1023&oe),O+=String.fromCharCode(oe),N+=fe}return O}(this.buf,u,f)},readBytes:function(){var f=this.readVarint()+this.pos,u=this.buf.subarray(this.pos,f);return this.pos=f,u},readPackedVarint:function(f,u){if(this.type!==Ri.Bytes)return f.push(this.readVarint(u));var m=Rp(this);for(f=f||[];this.pos<m;)f.push(this.readVarint(u));return f},readPackedSVarint:function(f){if(this.type!==Ri.Bytes)return f.push(this.readSVarint());var u=Rp(this);for(f=f||[];this.pos<u;)f.push(this.readSVarint());return f},readPackedBoolean:function(f){if(this.type!==Ri.Bytes)return f.push(this.readBoolean());var u=Rp(this);for(f=f||[];this.pos<u;)f.push(this.readBoolean());return f},readPackedFloat:function(f){if(this.type!==Ri.Bytes)return f.push(this.readFloat());var u=Rp(this);for(f=f||[];this.pos<u;)f.push(this.readFloat());return f},readPackedDouble:function(f){if(this.type!==Ri.Bytes)return f.push(this.readDouble());var u=Rp(this);for(f=f||[];this.pos<u;)f.push(this.readDouble());return f},readPackedFixed32:function(f){if(this.type!==Ri.Bytes)return f.push(this.readFixed32());var u=Rp(this);for(f=f||[];this.pos<u;)f.push(this.readFixed32());return f},readPackedSFixed32:function(f){if(this.type!==Ri.Bytes)return f.push(this.readSFixed32());var u=Rp(this);for(f=f||[];this.pos<u;)f.push(this.readSFixed32());return f},readPackedFixed64:function(f){if(this.type!==Ri.Bytes)return f.push(this.readFixed64());var u=Rp(this);for(f=f||[];this.pos<u;)f.push(this.readFixed64());return f},readPackedSFixed64:function(f){if(this.type!==Ri.Bytes)return f.push(this.readSFixed64());var u=Rp(this);for(f=f||[];this.pos<u;)f.push(this.readSFixed64());return f},skip:function(f){var u=7&f;if(u===Ri.Varint)for(;this.buf[this.pos++]>127;);else if(u===Ri.Bytes)this.pos=this.readVarint()+this.pos;else if(u===Ri.Fixed32)this.pos+=4;else{if(u!==Ri.Fixed64)throw new Error("Unimplemented type: "+u);this.pos+=8}},writeTag:function(f,u){this.writeVarint(f<<3|u)},realloc:function(f){for(var u=this.length||16;u<this.pos+f;)u*=2;if(u!==this.length){var m=new Uint8Array(u);m.set(this.buf),this.buf=m,this.length=u}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(f){this.realloc(4),B_(this.buf,f,this.pos),this.pos+=4},writeSFixed32:function(f){this.realloc(4),B_(this.buf,f,this.pos),this.pos+=4},writeFixed64:function(f){this.realloc(8),B_(this.buf,-1&f,this.pos),B_(this.buf,Math.floor(f*RV),this.pos+4),this.pos+=8},writeSFixed64:function(f){this.realloc(8),B_(this.buf,-1&f,this.pos),B_(this.buf,Math.floor(f*RV),this.pos+4),this.pos+=8},writeVarint:function(f){(f=+f||0)>268435455||f<0?function(u,m){var _,R;if(u>=0?(_=u%4294967296|0,R=u/4294967296|0):(R=~(-u/4294967296),4294967295^(_=~(-u%4294967296))?_=_+1|0:(_=0,R=R+1|0)),u>=18446744073709552e3||u<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");m.realloc(10),function(O,N,$){$.buf[$.pos++]=127&O|128,O>>>=7,$.buf[$.pos++]=127&O|128,O>>>=7,$.buf[$.pos++]=127&O|128,O>>>=7,$.buf[$.pos++]=127&O|128,$.buf[$.pos]=127&(O>>>=7)}(_,0,m),function(O,N){var $=(7&O)<<4;N.buf[N.pos++]|=$|((O>>>=3)?128:0),O&&(N.buf[N.pos++]=127&O|((O>>>=7)?128:0),O&&(N.buf[N.pos++]=127&O|((O>>>=7)?128:0),O&&(N.buf[N.pos++]=127&O|((O>>>=7)?128:0),O&&(N.buf[N.pos++]=127&O|((O>>>=7)?128:0),O&&(N.buf[N.pos++]=127&O)))))}(R,m)}(f,this):(this.realloc(4),this.buf[this.pos++]=127&f|(f>127?128:0),f<=127||(this.buf[this.pos++]=127&(f>>>=7)|(f>127?128:0),f<=127||(this.buf[this.pos++]=127&(f>>>=7)|(f>127?128:0),f<=127||(this.buf[this.pos++]=f>>>7&127))))},writeSVarint:function(f){this.writeVarint(f<0?2*-f-1:2*f)},writeBoolean:function(f){this.writeVarint(!!f)},writeString:function(f){f=String(f),this.realloc(4*f.length),this.pos++;var u=this.pos;this.pos=function(_,R,O){for(var N,$,G=0;G<R.length;G++){if((N=R.charCodeAt(G))>55295&&N<57344){if(!$){N>56319||G+1===R.length?(_[O++]=239,_[O++]=191,_[O++]=189):$=N;continue}if(N<56320){_[O++]=239,_[O++]=191,_[O++]=189,$=N;continue}N=$-55296<<10|N-56320|65536,$=null}else $&&(_[O++]=239,_[O++]=191,_[O++]=189,$=null);N<128?_[O++]=N:(N<2048?_[O++]=N>>6|192:(N<65536?_[O++]=N>>12|224:(_[O++]=N>>18|240,_[O++]=N>>12&63|128),_[O++]=N>>6&63|128),_[O++]=63&N|128)}return O}(this.buf,f,this.pos);var m=this.pos-u;m>=128&&OV(u,m,this),this.pos=u-1,this.writeVarint(m),this.pos+=m},writeFloat:function(f){this.realloc(4),IV(this.buf,f,this.pos,!0,23,4),this.pos+=4},writeDouble:function(f){this.realloc(8),IV(this.buf,f,this.pos,!0,52,8),this.pos+=8},writeBytes:function(f){var u=f.length;this.writeVarint(u),this.realloc(u);for(var m=0;m<u;m++)this.buf[this.pos++]=f[m]},writeRawMessage:function(f,u){this.pos++;var m=this.pos;f(u,this);var _=this.pos-m;_>=128&&OV(m,_,this),this.pos=m-1,this.writeVarint(_),this.pos+=_},writeMessage:function(f,u,m){this.writeTag(f,Ri.Bytes),this.writeRawMessage(u,m)},writePackedVarint:function(f,u){u.length&&this.writeMessage(f,Lfe,u)},writePackedSVarint:function(f,u){u.length&&this.writeMessage(f,Dfe,u)},writePackedBoolean:function(f,u){u.length&&this.writeMessage(f,Ffe,u)},writePackedFloat:function(f,u){u.length&&this.writeMessage(f,Nfe,u)},writePackedDouble:function(f,u){u.length&&this.writeMessage(f,zfe,u)},writePackedFixed32:function(f,u){u.length&&this.writeMessage(f,Bfe,u)},writePackedSFixed32:function(f,u){u.length&&this.writeMessage(f,jfe,u)},writePackedFixed64:function(f,u){u.length&&this.writeMessage(f,$fe,u)},writePackedSFixed64:function(f,u){u.length&&this.writeMessage(f,Ufe,u)},writeBytesField:function(f,u){this.writeTag(f,Ri.Bytes),this.writeBytes(u)},writeFixed32Field:function(f,u){this.writeTag(f,Ri.Fixed32),this.writeFixed32(u)},writeSFixed32Field:function(f,u){this.writeTag(f,Ri.Fixed32),this.writeSFixed32(u)},writeFixed64Field:function(f,u){this.writeTag(f,Ri.Fixed64),this.writeFixed64(u)},writeSFixed64Field:function(f,u){this.writeTag(f,Ri.Fixed64),this.writeSFixed64(u)},writeVarintField:function(f,u){this.writeTag(f,Ri.Varint),this.writeVarint(u)},writeSVarintField:function(f,u){this.writeTag(f,Ri.Varint),this.writeSVarint(u)},writeStringField:function(f,u){this.writeTag(f,Ri.Bytes),this.writeString(u)},writeFloatField:function(f,u){this.writeTag(f,Ri.Fixed32),this.writeFloat(u)},writeDoubleField:function(f,u){this.writeTag(f,Ri.Fixed64),this.writeDouble(u)},writeBooleanField:function(f,u){this.writeVarintField(f,!!u)}};var YL=l(AV);const KL=3;function Vfe(f,u,m){f===1&&m.readMessage(Hfe,u)}function Hfe(f,u,m){if(f===3){const{id:_,bitmap:R,width:O,height:N,left:$,top:G,advance:Z}=m.readMessage(Wfe,{});u.push({id:_,bitmap:new j({width:O+2*KL,height:N+2*KL},R),metrics:{width:O,height:N,left:$,top:G,advance:Z}})}}function Wfe(f,u,m){f===1?u.id=m.readVarint():f===2?u.bitmap=m.readBytes():f===3?u.width=m.readVarint():f===4?u.height=m.readVarint():f===5?u.left=m.readSVarint():f===6?u.top=m.readSVarint():f===7&&(u.advance=m.readVarint())}const DV=KL;function NV(f){let u=0,m=0;for(const N of f)u+=N.w*N.h,m=Math.max(m,N.w);f.sort((N,$)=>$.h-N.h);const _=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(u/.95)),m),h:1/0}];let R=0,O=0;for(const N of f)for(let $=_.length-1;$>=0;$--){const G=_[$];if(!(N.w>G.w||N.h>G.h)){if(N.x=G.x,N.y=G.y,O=Math.max(O,N.y+N.h),R=Math.max(R,N.x+N.w),N.w===G.w&&N.h===G.h){const Z=_.pop();$<_.length&&(_[$]=Z)}else N.h===G.h?(G.x+=N.w,G.w-=N.w):N.w===G.w?(G.y+=N.h,G.h-=N.h):(_.push({x:G.x+N.w,y:G.y,w:G.w-N.w,h:N.h}),G.y+=N.h,G.h-=N.h);break}}return{w:R,h:O,fill:u/(R*O)||0}}const Nl=1;class ZL{constructor(u,{pixelRatio:m,version:_,stretchX:R,stretchY:O,content:N,textFitWidth:$,textFitHeight:G}){this.paddedRect=u,this.pixelRatio=m,this.stretchX=R,this.stretchY=O,this.content=N,this.version=_,this.textFitWidth=$,this.textFitHeight=G}get tl(){return[this.paddedRect.x+Nl,this.paddedRect.y+Nl]}get br(){return[this.paddedRect.x+this.paddedRect.w-Nl,this.paddedRect.y+this.paddedRect.h-Nl]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Nl)/this.pixelRatio,(this.paddedRect.h-2*Nl)/this.pixelRatio]}}class zV{constructor(u,m){const _={},R={};this.haveRenderCallbacks=[];const O=[];this.addImages(u,_,O),this.addImages(m,R,O);const{w:N,h:$}=NV(O),G=new X({width:N||1,height:$||1});for(const Z in u){const ne=u[Z],oe=_[Z].paddedRect;X.copy(ne.data,G,{x:0,y:0},{x:oe.x+Nl,y:oe.y+Nl},ne.data)}for(const Z in m){const ne=m[Z],oe=R[Z].paddedRect,fe=oe.x+Nl,_e=oe.y+Nl,Ce=ne.data.width,Ae=ne.data.height;X.copy(ne.data,G,{x:0,y:0},{x:fe,y:_e},ne.data),X.copy(ne.data,G,{x:0,y:Ae-1},{x:fe,y:_e-1},{width:Ce,height:1}),X.copy(ne.data,G,{x:0,y:0},{x:fe,y:_e+Ae},{width:Ce,height:1}),X.copy(ne.data,G,{x:Ce-1,y:0},{x:fe-1,y:_e},{width:1,height:Ae}),X.copy(ne.data,G,{x:0,y:0},{x:fe+Ce,y:_e},{width:1,height:Ae})}this.image=G,this.iconPositions=_,this.patternPositions=R}addImages(u,m,_){for(const R in u){const O=u[R],N={x:0,y:0,w:O.data.width+2*Nl,h:O.data.height+2*Nl};_.push(N),m[R]=new ZL(N,O),O.hasRenderCallback&&this.haveRenderCallbacks.push(R)}}patchUpdatedImages(u,m){u.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const _ in u.updatedImages)this.patchUpdatedImage(this.iconPositions[_],u.getImage(_),m),this.patchUpdatedImage(this.patternPositions[_],u.getImage(_),m)}patchUpdatedImage(u,m,_){if(!u||!m||u.version===m.version)return;u.version=m.version;const[R,O]=u.tl;_.update(m.data,void 0,{x:R,y:O})}}var _g;Mn("ImagePosition",ZL),Mn("ImageAtlas",zV),s.ah=void 0,(_g=s.ah||(s.ah={}))[_g.none=0]="none",_g[_g.horizontal=1]="horizontal",_g[_g.vertical=2]="vertical",_g[_g.horizontalOnly=3]="horizontalOnly";const Fw=-17;class Bw{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(u,m){const _=new Bw;return _.scale=u||1,_.fontStack=m,_}static forImage(u){const m=new Bw;return m.imageName=u,m}}class j_{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(u,m){const _=new j_;for(let R=0;R<u.sections.length;R++){const O=u.sections[R];O.image?_.addImageSection(O):_.addTextSection(O,m)}return _}length(){return this.text.length}getSection(u){return this.sections[this.sectionIndex[u]]}getSectionIndex(u){return this.sectionIndex[u]}getCharCode(u){return this.text.charCodeAt(u)}verticalizePunctuation(){this.text=function(u){let m="";for(let _=0;_<u.length;_++){const R=u.charCodeAt(_+1)||null,O=u.charCodeAt(_-1)||null;m+=R&&Ls(R)&&!zw[u[_+1]]||O&&Ls(O)&&!zw[u[_-1]]||!zw[u[_]]?u[_]:zw[u[_]]}return m}(this.text)}trim(){let u=0;for(let _=0;_<this.text.length&&RT[this.text.charCodeAt(_)];_++)u++;let m=this.text.length;for(let _=this.text.length-1;_>=0&&_>=u&&RT[this.text.charCodeAt(_)];_--)m--;this.text=this.text.substring(u,m),this.sectionIndex=this.sectionIndex.slice(u,m)}substring(u,m){const _=new j_;return _.text=this.text.substring(u,m),_.sectionIndex=this.sectionIndex.slice(u,m),_.sections=this.sections,_}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((u,m)=>Math.max(u,this.sections[m].scale),0)}addTextSection(u,m){this.text+=u.text,this.sections.push(Bw.forText(u.scale,u.fontStack||m));const _=this.sections.length-1;for(let R=0;R<u.text.length;++R)this.sectionIndex.push(_)}addImageSection(u){const m=u.image?u.image.name:"";if(m.length===0)return void pe("Can't add FormattedSection with an empty image.");const _=this.getNextImageSectionCharCode();_?(this.text+=String.fromCharCode(_),this.sections.push(Bw.forImage(m)),this.sectionIndex.push(this.sections.length-1)):pe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function IT(f,u,m,_,R,O,N,$,G,Z,ne,oe,fe,_e,Ce){const Ae=j_.fromFeature(f,R);let Ue;oe===s.ah.vertical&&Ae.verticalizePunctuation();const{processBidirectionalText:qe,processStyledBidirectionalText:bt}=Ol;if(qe&&Ae.sections.length===1){Ue=[];const Ot=qe(Ae.toString(),JL(Ae,Z,O,u,_,_e));for(const rn of Ot){const wn=new j_;wn.text=rn,wn.sections=Ae.sections;for(let er=0;er<rn.length;er++)wn.sectionIndex.push(0);Ue.push(wn)}}else if(bt){Ue=[];const Ot=bt(Ae.text,Ae.sectionIndex,JL(Ae,Z,O,u,_,_e));for(const rn of Ot){const wn=new j_;wn.text=rn[0],wn.sectionIndex=rn[1],wn.sections=Ae.sections,Ue.push(wn)}}else Ue=function(Ot,rn){const wn=[],er=Ot.text;let xn=0;for(const gn of rn)wn.push(Ot.substring(xn,gn)),xn=gn;return xn<er.length&&wn.push(Ot.substring(xn,er.length)),wn}(Ae,JL(Ae,Z,O,u,_,_e));const rt=[],gt={positionedLines:rt,text:Ae.toString(),top:ne[1],bottom:ne[1],left:ne[0],right:ne[0],writingMode:oe,iconsInText:!1,verticalizable:!1};return function(Ot,rn,wn,er,xn,gn,Bn,Ln,An,Ht,Hn,Fn){let dr=0,Fi=Fw,ki=0,vs=0;const Zu=Ln==="right"?1:Ln==="left"?0:.5;let ra=0;for(const So of xn){So.trim();const xs=So.getMaxScale(),Ma=(xs-1)*ss,ia={positionedGlyphs:[],lineOffset:0};Ot.positionedLines[ra]=ia;const tl=ia.positionedGlyphs;let oa=0;if(!So.length()){Fi+=gn,++ra;continue}for(let zl=0;zl<So.length();zl++){const Zr=So.getSection(zl),$i=So.getSectionIndex(zl),Xi=So.getCharCode(zl);let fc=0,fo=null,H_=null,gf=null,yf=ss;const Ju=!(An===s.ah.horizontal||!Hn&&!Bc(Xi)||Hn&&(RT[Xi]||(_s=Xi,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(_s)))));if(Zr.imageName){const Gc=er[Zr.imageName];if(!Gc)continue;gf=Zr.imageName,Ot.iconsInText=Ot.iconsInText||!0,H_=Gc.paddedRect;const Ds=Gc.displaySize;Zr.scale=Zr.scale*ss/Fn,fo={width:Ds[0],height:Ds[1],left:Nl,top:-DV,advance:Ju?Ds[1]:Ds[0]},fc=Ma+(ss-Ds[1]*Zr.scale),yf=fo.advance;const kp=Ju?Ds[0]*Zr.scale-ss*xs:Ds[1]*Zr.scale-ss*xs;kp>0&&kp>oa&&(oa=kp)}else{const Gc=wn[Zr.fontStack],Ds=Gc&&Gc[Xi];if(Ds&&Ds.rect)H_=Ds.rect,fo=Ds.metrics;else{const kp=rn[Zr.fontStack],Ww=kp&&kp[Xi];if(!Ww)continue;fo=Ww.metrics}fc=(xs-Zr.scale)*ss}Ju?(Ot.verticalizable=!0,tl.push({glyph:Xi,imageName:gf,x:dr,y:Fi+fc,vertical:Ju,scale:Zr.scale,fontStack:Zr.fontStack,sectionIndex:$i,metrics:fo,rect:H_}),dr+=yf*Zr.scale+Ht):(tl.push({glyph:Xi,imageName:gf,x:dr,y:Fi+fc,vertical:Ju,scale:Zr.scale,fontStack:Zr.fontStack,sectionIndex:$i,metrics:fo,rect:H_}),dr+=fo.advance*Zr.scale+Ht)}tl.length!==0&&(ki=Math.max(dr-Ht,ki),Yfe(tl,0,tl.length-1,Zu,oa)),dr=0;const Wc=gn*xs+oa;ia.lineOffset=Math.max(oa,Ma),Fi+=Wc,vs=Math.max(Wc,vs),++ra}var _s;const Ja=Fi-Fw,{horizontalAlign:Qa,verticalAlign:el}=QL(Bn);(function(So,xs,Ma,ia,tl,oa,Wc,zl,Zr){const $i=(xs-Ma)*tl;let Xi=0;Xi=oa!==Wc?-zl*ia-Fw:(-ia*Zr+.5)*Wc;for(const fc of So)for(const fo of fc.positionedGlyphs)fo.x+=$i,fo.y+=Xi})(Ot.positionedLines,Zu,Qa,el,ki,vs,gn,Ja,xn.length),Ot.top+=-el*Ja,Ot.bottom=Ot.top+Ja,Ot.left+=-Qa*ki,Ot.right=Ot.left+ki}(gt,u,m,_,Ue,N,$,G,oe,Z,fe,Ce),!function(Ot){for(const rn of Ot)if(rn.positionedGlyphs.length!==0)return!1;return!0}(rt)&&gt}const RT={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Gfe={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},qfe={40:!0};function FV(f,u,m,_,R,O){if(u.imageName){const N=_[u.imageName];return N?N.displaySize[0]*u.scale*ss/O+R:0}{const N=m[u.fontStack],$=N&&N[f];return $?$.metrics.advance*u.scale+R:0}}function BV(f,u,m,_){const R=Math.pow(f-u,2);return _?f<u?R/2:2*R:R+Math.abs(m)*m}function Xfe(f,u,m){let _=0;return f===10&&(_-=1e4),m&&(_+=150),f!==40&&f!==65288||(_+=50),u!==41&&u!==65289||(_+=50),_}function jV(f,u,m,_,R,O){let N=null,$=BV(u,m,R,O);for(const G of _){const Z=BV(u-G.x,m,R,O)+G.badness;Z<=$&&(N=G,$=Z)}return{index:f,x:u,priorBreak:N,badness:$}}function $V(f){return f?$V(f.priorBreak).concat(f.index):[]}function JL(f,u,m,_,R,O){if(!f)return[];const N=[],$=function(oe,fe,_e,Ce,Ae,Ue){let qe=0;for(let bt=0;bt<oe.length();bt++){const rt=oe.getSection(bt);qe+=FV(oe.getCharCode(bt),rt,Ce,Ae,fe,Ue)}return qe/Math.max(1,Math.ceil(qe/_e))}(f,u,m,_,R,O),G=f.text.indexOf("​")>=0;let Z=0;for(let oe=0;oe<f.length();oe++){const fe=f.getSection(oe),_e=f.getCharCode(oe);if(RT[_e]||(Z+=FV(_e,fe,_,R,u,O)),oe<f.length()-1){const Ce=!((ne=_e)<11904)&&(!!wr["CJK Compatibility Forms"](ne)||!!wr["CJK Compatibility"](ne)||!!wr["CJK Strokes"](ne)||!!wr["CJK Symbols and Punctuation"](ne)||!!wr["Enclosed CJK Letters and Months"](ne)||!!wr["Halfwidth and Fullwidth Forms"](ne)||!!wr["Ideographic Description Characters"](ne)||!!wr["Vertical Forms"](ne)||M_.test(String.fromCodePoint(ne)));(Gfe[_e]||Ce||fe.imageName||oe!==f.length()-2&&qfe[f.getCharCode(oe+1)])&&N.push(jV(oe+1,Z,$,N,Xfe(_e,f.getCharCode(oe+1),Ce&&G),!1))}}var ne;return $V(jV(f.length(),Z,$,N,0,!0))}function QL(f){let u=.5,m=.5;switch(f){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":m=1;break;case"top":case"top-right":case"top-left":m=0}return{horizontalAlign:u,verticalAlign:m}}function Yfe(f,u,m,_,R){if(!_&&!R)return;const O=f[m],N=(f[m].x+O.metrics.advance*O.scale)*_;for(let $=u;$<=m;$++)f[$].x-=N,f[$].y+=R}function Kfe(f,u,m){const{horizontalAlign:_,verticalAlign:R}=QL(m),O=u[0]-f.displaySize[0]*_,N=u[1]-f.displaySize[1]*R;return{image:f,top:N,bottom:N+f.displaySize[1],left:O,right:O+f.displaySize[0]}}function UV(f){var u,m;let _=f.left,R=f.top,O=f.right-_,N=f.bottom-R;const $=(u=f.image.textFitWidth)!==null&&u!==void 0?u:"stretchOrShrink",G=(m=f.image.textFitHeight)!==null&&m!==void 0?m:"stretchOrShrink",Z=(f.image.content[2]-f.image.content[0])/(f.image.content[3]-f.image.content[1]);if(G==="proportional"){if($==="stretchOnly"&&O/N<Z||$==="proportional"){const ne=Math.ceil(N*Z);_*=ne/O,O=ne}}else if($==="proportional"&&G==="stretchOnly"&&Z!==0&&O/N>Z){const ne=Math.ceil(O/Z);R*=ne/N,N=ne}return{x1:_,y1:R,x2:_+O,y2:R+N}}function VV(f,u,m,_,R,O){const N=f.image;let $;if(N.content){const Ue=N.content,qe=N.pixelRatio||1;$=[Ue[0]/qe,Ue[1]/qe,N.displaySize[0]-Ue[2]/qe,N.displaySize[1]-Ue[3]/qe]}const G=u.left*O,Z=u.right*O;let ne,oe,fe,_e;m==="width"||m==="both"?(_e=R[0]+G-_[3],oe=R[0]+Z+_[1]):(_e=R[0]+(G+Z-N.displaySize[0])/2,oe=_e+N.displaySize[0]);const Ce=u.top*O,Ae=u.bottom*O;return m==="height"||m==="both"?(ne=R[1]+Ce-_[0],fe=R[1]+Ae+_[2]):(ne=R[1]+(Ce+Ae-N.displaySize[1])/2,fe=ne+N.displaySize[1]),{image:N,top:ne,right:oe,bottom:fe,left:_e,collisionPadding:$}}const jw=255,mf=128,xg=jw*mf;function HV(f,u){const{expression:m}=u;if(m.kind==="constant")return{kind:"constant",layoutSize:m.evaluate(new ai(f+1))};if(m.kind==="source")return{kind:"source"};{const{zoomStops:_,interpolationType:R}=m;let O=0;for(;O<_.length&&_[O]<=f;)O++;O=Math.max(0,O-1);let N=O;for(;N<_.length&&_[N]<f+1;)N++;N=Math.min(_.length-1,N);const $=_[O],G=_[N];return m.kind==="composite"?{kind:"composite",minZoom:$,maxZoom:G,interpolationType:R}:{kind:"camera",minZoom:$,maxZoom:G,minSize:m.evaluate(new ai($)),maxSize:m.evaluate(new ai(G)),interpolationType:R}}}function e3(f,u,m){let _="never";const R=f.get(u);return R?_=R:f.get(m)&&(_="always"),_}const Zfe=vg.VectorTileFeature.types,Jfe=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function kT(f,u,m,_,R,O,N,$,G,Z,ne,oe,fe){const _e=$?Math.min(xg,Math.round($[0])):0,Ce=$?Math.min(xg,Math.round($[1])):0;f.emplaceBack(u,m,Math.round(32*_),Math.round(32*R),O,N,(_e<<1)+(G?1:0),Ce,16*Z,16*ne,256*oe,256*fe)}function t3(f,u,m){f.emplaceBack(u.x,u.y,m),f.emplaceBack(u.x,u.y,m),f.emplaceBack(u.x,u.y,m),f.emplaceBack(u.x,u.y,m)}function Qfe(f){for(const u of f.sections)if(E_(u.text))return!0;return!1}class n3{constructor(u){this.layoutVertexArray=new Vr,this.indexArray=new Ka,this.programConfigurations=u,this.segments=new co,this.dynamicLayoutVertexArray=new Kr,this.opacityVertexArray=new ji,this.hasVisibleVertices=!1,this.placedSymbolArray=new gi}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(u,m,_,R){this.isEmpty()||(_&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Pfe.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,m),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,Ife.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,Jfe,!0),this.opacityVertexBuffer.itemSize=1),(_||R)&&this.programConfigurations.upload(u))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Mn("SymbolBuffers",n3);class r3{constructor(u,m,_){this.layoutVertexArray=new u,this.layoutAttributes=m,this.indexArray=new _,this.segments=new co,this.collisionVertexArray=new qi}upload(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=u.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,Rfe.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Mn("CollisionBuffers",r3);class $_{constructor(u){this.collisionBoxArray=u.collisionBoxArray,this.zoom=u.zoom,this.overscaling=u.overscaling,this.layers=u.layers,this.layerIds=this.layers.map(N=>N.id),this.index=u.index,this.pixelRatio=u.pixelRatio,this.sourceLayerIndex=u.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=yg([]),this.placementViewportMatrix=yg([]);const m=this.layers[0]._unevaluatedLayout._values;this.textSizeData=HV(this.zoom,m["text-size"]),this.iconSizeData=HV(this.zoom,m["icon-size"]);const _=this.layers[0].layout,R=_.get("symbol-sort-key"),O=_.get("symbol-z-order");this.canOverlap=e3(_,"text-overlap","text-allow-overlap")!=="never"||e3(_,"icon-overlap","icon-allow-overlap")!=="never"||_.get("text-ignore-placement")||_.get("icon-ignore-placement"),this.sortFeaturesByKey=O!=="viewport-y"&&!R.isConstant(),this.sortFeaturesByY=(O==="viewport-y"||O==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,_.get("symbol-placement")==="point"&&(this.writingModes=_.get("text-writing-mode").map(N=>s.ah[N])),this.stateDependentLayerIds=this.layers.filter(N=>N.isStateDependent()).map(N=>N.id),this.sourceID=u.sourceID}createArrays(){this.text=new n3(new hf(this.layers,this.zoom,u=>/^text/.test(u))),this.icon=new n3(new hf(this.layers,this.zoom,u=>/^icon/.test(u))),this.glyphOffsetArray=new Oo,this.lineVertexArray=new wo,this.symbolInstances=new Vo,this.textAnchorOffsets=new jc}calculateGlyphDependencies(u,m,_,R,O){for(let N=0;N<u.length;N++)if(m[u.charCodeAt(N)]=!0,(_||R)&&O){const $=zw[u.charAt(N)];$&&(m[$.charCodeAt(0)]=!0)}}populate(u,m,_){const R=this.layers[0],O=R.layout,N=O.get("text-font"),$=O.get("text-field"),G=O.get("icon-image"),Z=($.value.kind!=="constant"||$.value.value instanceof Zn&&!$.value.value.isEmpty()||$.value.value.toString().length>0)&&(N.value.kind!=="constant"||N.value.value.length>0),ne=G.value.kind!=="constant"||!!G.value.value||Object.keys(G.parameters).length>0,oe=O.get("symbol-sort-key");if(this.features=[],!Z&&!ne)return;const fe=m.iconDependencies,_e=m.glyphDependencies,Ce=m.availableImages,Ae=new ai(this.zoom);for(const{feature:Ue,id:qe,index:bt,sourceLayerIndex:rt}of u){const gt=R._featureFilter.needGeometry,Ot=Cp(Ue,gt);if(!R._featureFilter.filter(Ae,Ot,_))continue;let rn,wn;if(gt||(Ot.geometry=Ku(Ue)),Z){const xn=R.getValueAndResolveTokens("text-field",Ot,_,Ce),gn=Zn.factory(xn),Bn=this.hasRTLText=this.hasRTLText||Qfe(gn);(!Bn||Ol.getRTLTextPluginStatus()==="unavailable"||Bn&&Ol.isParsed())&&(rn=Ofe(gn,R,Ot))}if(ne){const xn=R.getValueAndResolveTokens("icon-image",Ot,_,Ce);wn=xn instanceof Gr?xn:Gr.fromString(xn)}if(!rn&&!wn)continue;const er=this.sortFeaturesByKey?oe.evaluate(Ot,{},_):void 0;if(this.features.push({id:qe,text:rn,icon:wn,index:bt,sourceLayerIndex:rt,geometry:Ot.geometry,properties:Ue.properties,type:Zfe[Ue.type],sortKey:er}),wn&&(fe[wn.name]=!0),rn){const xn=N.evaluate(Ot,{},_).join(","),gn=O.get("text-rotation-alignment")!=="viewport"&&O.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(s.ah.vertical)>=0;for(const Bn of rn.sections)if(Bn.image)fe[Bn.image.name]=!0;else{const Ln=sf(rn.toString()),An=Bn.fontStack||xn,Ht=_e[An]=_e[An]||{};this.calculateGlyphDependencies(Bn.text,Ht,gn,this.allowVerticalPlacement,Ln)}}}O.get("symbol-placement")==="line"&&(this.features=function(Ue){const qe={},bt={},rt=[];let gt=0;function Ot(xn){rt.push(Ue[xn]),gt++}function rn(xn,gn,Bn){const Ln=bt[xn];return delete bt[xn],bt[gn]=Ln,rt[Ln].geometry[0].pop(),rt[Ln].geometry[0]=rt[Ln].geometry[0].concat(Bn[0]),Ln}function wn(xn,gn,Bn){const Ln=qe[gn];return delete qe[gn],qe[xn]=Ln,rt[Ln].geometry[0].shift(),rt[Ln].geometry[0]=Bn[0].concat(rt[Ln].geometry[0]),Ln}function er(xn,gn,Bn){const Ln=Bn?gn[0][gn[0].length-1]:gn[0][0];return`${xn}:${Ln.x}:${Ln.y}`}for(let xn=0;xn<Ue.length;xn++){const gn=Ue[xn],Bn=gn.geometry,Ln=gn.text?gn.text.toString():null;if(!Ln){Ot(xn);continue}const An=er(Ln,Bn),Ht=er(Ln,Bn,!0);if(An in bt&&Ht in qe&&bt[An]!==qe[Ht]){const Hn=wn(An,Ht,Bn),Fn=rn(An,Ht,rt[Hn].geometry);delete qe[An],delete bt[Ht],bt[er(Ln,rt[Fn].geometry,!0)]=Fn,rt[Hn].geometry=null}else An in bt?rn(An,Ht,Bn):Ht in qe?wn(An,Ht,Bn):(Ot(xn),qe[An]=gt-1,bt[Ht]=gt-1)}return rt.filter(xn=>xn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ue,qe)=>Ue.sortKey-qe.sortKey)}update(u,m,_){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,m,this.layers,_),this.icon.programConfigurations.updatePaintArrays(u,m,this.layers,_))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u)),this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(u,m){const _=this.lineVertexArray.length;if(u.segment!==void 0){let R=u.dist(m[u.segment+1]),O=u.dist(m[u.segment]);const N={};for(let $=u.segment+1;$<m.length;$++)N[$]={x:m[$].x,y:m[$].y,tileUnitDistanceFromAnchor:R},$<m.length-1&&(R+=m[$+1].dist(m[$]));for(let $=u.segment||0;$>=0;$--)N[$]={x:m[$].x,y:m[$].y,tileUnitDistanceFromAnchor:O},$>0&&(O+=m[$-1].dist(m[$]));for(let $=0;$<m.length;$++){const G=N[$];this.lineVertexArray.emplaceBack(G.x,G.y,G.tileUnitDistanceFromAnchor)}}return{lineStartIndex:_,lineLength:this.lineVertexArray.length-_}}addSymbols(u,m,_,R,O,N,$,G,Z,ne,oe,fe){const _e=u.indexArray,Ce=u.layoutVertexArray,Ae=u.segments.prepareSegment(4*m.length,Ce,_e,this.canOverlap?N.sortKey:void 0),Ue=this.glyphOffsetArray.length,qe=Ae.vertexLength,bt=this.allowVerticalPlacement&&$===s.ah.vertical?Math.PI/2:0,rt=N.text&&N.text.sections;for(let gt=0;gt<m.length;gt++){const{tl:Ot,tr:rn,bl:wn,br:er,tex:xn,pixelOffsetTL:gn,pixelOffsetBR:Bn,minFontScaleX:Ln,minFontScaleY:An,glyphOffset:Ht,isSDF:Hn,sectionIndex:Fn}=m[gt],dr=Ae.vertexLength,Fi=Ht[1];kT(Ce,G.x,G.y,Ot.x,Fi+Ot.y,xn.x,xn.y,_,Hn,gn.x,gn.y,Ln,An),kT(Ce,G.x,G.y,rn.x,Fi+rn.y,xn.x+xn.w,xn.y,_,Hn,Bn.x,gn.y,Ln,An),kT(Ce,G.x,G.y,wn.x,Fi+wn.y,xn.x,xn.y+xn.h,_,Hn,gn.x,Bn.y,Ln,An),kT(Ce,G.x,G.y,er.x,Fi+er.y,xn.x+xn.w,xn.y+xn.h,_,Hn,Bn.x,Bn.y,Ln,An),t3(u.dynamicLayoutVertexArray,G,bt),_e.emplaceBack(dr,dr+1,dr+2),_e.emplaceBack(dr+1,dr+2,dr+3),Ae.vertexLength+=4,Ae.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ht[0]),gt!==m.length-1&&Fn===m[gt+1].sectionIndex||u.programConfigurations.populatePaintArrays(Ce.length,N,N.index,{},fe,rt&&rt[Fn])}u.placedSymbolArray.emplaceBack(G.x,G.y,Ue,this.glyphOffsetArray.length-Ue,qe,Z,ne,G.segment,_?_[0]:0,_?_[1]:0,R[0],R[1],$,0,!1,0,oe)}_addCollisionDebugVertex(u,m,_,R,O,N){return m.emplaceBack(0,0),u.emplaceBack(_.x,_.y,R,O,Math.round(N.x),Math.round(N.y))}addCollisionDebugVertices(u,m,_,R,O,N,$){const G=O.segments.prepareSegment(4,O.layoutVertexArray,O.indexArray),Z=G.vertexLength,ne=O.layoutVertexArray,oe=O.collisionVertexArray,fe=$.anchorX,_e=$.anchorY;this._addCollisionDebugVertex(ne,oe,N,fe,_e,new p(u,m)),this._addCollisionDebugVertex(ne,oe,N,fe,_e,new p(_,m)),this._addCollisionDebugVertex(ne,oe,N,fe,_e,new p(_,R)),this._addCollisionDebugVertex(ne,oe,N,fe,_e,new p(u,R)),G.vertexLength+=4;const Ce=O.indexArray;Ce.emplaceBack(Z,Z+1),Ce.emplaceBack(Z+1,Z+2),Ce.emplaceBack(Z+2,Z+3),Ce.emplaceBack(Z+3,Z),G.primitiveLength+=4}addDebugCollisionBoxes(u,m,_,R){for(let O=u;O<m;O++){const N=this.collisionBoxArray.get(O);this.addCollisionDebugVertices(N.x1,N.y1,N.x2,N.y2,R?this.textCollisionBox:this.iconCollisionBox,N.anchorPoint,_)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new r3(xi,CV.members,uc),this.iconCollisionBox=new r3(xi,CV.members,uc);for(let u=0;u<this.symbolInstances.length;u++){const m=this.symbolInstances.get(u);this.addDebugCollisionBoxes(m.textBoxStartIndex,m.textBoxEndIndex,m,!0),this.addDebugCollisionBoxes(m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m,!0),this.addDebugCollisionBoxes(m.iconBoxStartIndex,m.iconBoxEndIndex,m,!1),this.addDebugCollisionBoxes(m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex,m,!1)}}_deserializeCollisionBoxesForSymbol(u,m,_,R,O,N,$,G,Z){const ne={};for(let oe=m;oe<_;oe++){const fe=u.get(oe);ne.textBox={x1:fe.x1,y1:fe.y1,x2:fe.x2,y2:fe.y2,anchorPointX:fe.anchorPointX,anchorPointY:fe.anchorPointY},ne.textFeatureIndex=fe.featureIndex;break}for(let oe=R;oe<O;oe++){const fe=u.get(oe);ne.verticalTextBox={x1:fe.x1,y1:fe.y1,x2:fe.x2,y2:fe.y2,anchorPointX:fe.anchorPointX,anchorPointY:fe.anchorPointY},ne.verticalTextFeatureIndex=fe.featureIndex;break}for(let oe=N;oe<$;oe++){const fe=u.get(oe);ne.iconBox={x1:fe.x1,y1:fe.y1,x2:fe.x2,y2:fe.y2,anchorPointX:fe.anchorPointX,anchorPointY:fe.anchorPointY},ne.iconFeatureIndex=fe.featureIndex;break}for(let oe=G;oe<Z;oe++){const fe=u.get(oe);ne.verticalIconBox={x1:fe.x1,y1:fe.y1,x2:fe.x2,y2:fe.y2,anchorPointX:fe.anchorPointX,anchorPointY:fe.anchorPointY},ne.verticalIconFeatureIndex=fe.featureIndex;break}return ne}deserializeCollisionBoxes(u){this.collisionArrays=[];for(let m=0;m<this.symbolInstances.length;m++){const _=this.symbolInstances.get(m);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,_.textBoxStartIndex,_.textBoxEndIndex,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_.iconBoxStartIndex,_.iconBoxEndIndex,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(u,m){const _=u.placedSymbolArray.get(m),R=_.vertexStartIndex+4*_.numGlyphs;for(let O=_.vertexStartIndex;O<R;O+=4)u.indexArray.emplaceBack(O,O+1,O+2),u.indexArray.emplaceBack(O+1,O+2,O+3)}getSortedSymbolIndexes(u){if(this.sortedAngle===u&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const m=Math.sin(u),_=Math.cos(u),R=[],O=[],N=[];for(let $=0;$<this.symbolInstances.length;++$){N.push($);const G=this.symbolInstances.get($);R.push(0|Math.round(m*G.anchorX+_*G.anchorY)),O.push(G.featureIndex)}return N.sort(($,G)=>R[$]-R[G]||O[G]-O[$]),N}addToSortKeyRanges(u,m){const _=this.sortKeyRanges[this.sortKeyRanges.length-1];_&&_.sortKey===m?_.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:m,symbolInstanceStart:u,symbolInstanceEnd:u+1})}sortFeatures(u){if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u),this.sortedAngle=u,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const m of this.symbolInstanceIndexes){const _=this.symbolInstances.get(m);this.featureSortOrder.push(_.featureIndex),[_.rightJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.leftJustifiedTextSymbolIndex].forEach((R,O,N)=>{R>=0&&N.indexOf(R)===O&&this.addIndicesForPlacedSymbol(this.text,R)}),_.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,_.verticalPlacedTextSymbolIndex),_.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,_.placedIconSymbolIndex),_.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,_.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let WV,GV;Mn("SymbolBucket",$_,{omit:["layers","collisionBoxArray","features","compareText"]}),$_.MAX_GLYPHS=65535,$_.addDynamicAttributes=t3;var i3={get paint(){return GV=GV||new U({"icon-opacity":new y(ke.paint_symbol["icon-opacity"]),"icon-color":new y(ke.paint_symbol["icon-color"]),"icon-halo-color":new y(ke.paint_symbol["icon-halo-color"]),"icon-halo-width":new y(ke.paint_symbol["icon-halo-width"]),"icon-halo-blur":new y(ke.paint_symbol["icon-halo-blur"]),"icon-translate":new c(ke.paint_symbol["icon-translate"]),"icon-translate-anchor":new c(ke.paint_symbol["icon-translate-anchor"]),"text-opacity":new y(ke.paint_symbol["text-opacity"]),"text-color":new y(ke.paint_symbol["text-color"],{runtimeType:Ne,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new y(ke.paint_symbol["text-halo-color"]),"text-halo-width":new y(ke.paint_symbol["text-halo-width"]),"text-halo-blur":new y(ke.paint_symbol["text-halo-blur"]),"text-translate":new c(ke.paint_symbol["text-translate"]),"text-translate-anchor":new c(ke.paint_symbol["text-translate-anchor"])})},get layout(){return WV=WV||new U({"symbol-placement":new c(ke.layout_symbol["symbol-placement"]),"symbol-spacing":new c(ke.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new c(ke.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new y(ke.layout_symbol["symbol-sort-key"]),"symbol-z-order":new c(ke.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new c(ke.layout_symbol["icon-allow-overlap"]),"icon-overlap":new c(ke.layout_symbol["icon-overlap"]),"icon-ignore-placement":new c(ke.layout_symbol["icon-ignore-placement"]),"icon-optional":new c(ke.layout_symbol["icon-optional"]),"icon-rotation-alignment":new c(ke.layout_symbol["icon-rotation-alignment"]),"icon-size":new y(ke.layout_symbol["icon-size"]),"icon-text-fit":new c(ke.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new c(ke.layout_symbol["icon-text-fit-padding"]),"icon-image":new y(ke.layout_symbol["icon-image"]),"icon-rotate":new y(ke.layout_symbol["icon-rotate"]),"icon-padding":new y(ke.layout_symbol["icon-padding"]),"icon-keep-upright":new c(ke.layout_symbol["icon-keep-upright"]),"icon-offset":new y(ke.layout_symbol["icon-offset"]),"icon-anchor":new y(ke.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new c(ke.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new c(ke.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new c(ke.layout_symbol["text-rotation-alignment"]),"text-field":new y(ke.layout_symbol["text-field"]),"text-font":new y(ke.layout_symbol["text-font"]),"text-size":new y(ke.layout_symbol["text-size"]),"text-max-width":new y(ke.layout_symbol["text-max-width"]),"text-line-height":new c(ke.layout_symbol["text-line-height"]),"text-letter-spacing":new y(ke.layout_symbol["text-letter-spacing"]),"text-justify":new y(ke.layout_symbol["text-justify"]),"text-radial-offset":new y(ke.layout_symbol["text-radial-offset"]),"text-variable-anchor":new c(ke.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new y(ke.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new y(ke.layout_symbol["text-anchor"]),"text-max-angle":new c(ke.layout_symbol["text-max-angle"]),"text-writing-mode":new c(ke.layout_symbol["text-writing-mode"]),"text-rotate":new y(ke.layout_symbol["text-rotate"]),"text-padding":new c(ke.layout_symbol["text-padding"]),"text-keep-upright":new c(ke.layout_symbol["text-keep-upright"]),"text-transform":new y(ke.layout_symbol["text-transform"]),"text-offset":new y(ke.layout_symbol["text-offset"]),"text-allow-overlap":new c(ke.layout_symbol["text-allow-overlap"]),"text-overlap":new c(ke.layout_symbol["text-overlap"]),"text-ignore-placement":new c(ke.layout_symbol["text-ignore-placement"]),"text-optional":new c(ke.layout_symbol["text-optional"])})}};class qV{constructor(u){if(u.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=u.property.overrides?u.property.overrides.runtimeType:en,this.defaultValue=u}evaluate(u){if(u.formattedSection){const m=this.defaultValue.property.overrides;if(m&&m.hasOverride(u.formattedSection))return m.getOverride(u.formattedSection)}return u.feature&&u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default}eachChild(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Mn("FormatSectionOverride",qV,{omit:["defaultValue"]});class OT extends K{constructor(u){super(u,i3)}recalculate(u,m){if(super.recalculate(u,m),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const _=this.layout.get("text-writing-mode");if(_){const R=[];for(const O of _)R.indexOf(O)<0&&R.push(O);this.layout._values["text-writing-mode"]=R}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(u,m,_,R){const O=this.layout.get(u).evaluate(m,{},_,R),N=this._unevaluatedLayout._values[u];return N.isDataDriven()||Wd(N.value)||!O?O:function($,G){return G.replace(/{([^{}]+)}/g,(Z,ne)=>$&&ne in $?String($[ne]):"")}(m.properties,O)}createBucket(u){return new $_(u)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const u of i3.paint.overridableProperties){if(!OT.hasPaintOverride(this.layout,u))continue;const m=this.paint.get(u),_=new qV(m),R=new Hd(_,m.property.specification);let O=null;O=m.value.kind==="constant"||m.value.kind==="source"?new ts("source",R):new Uu("composite",R,m.value.zoomStops),this.paint._values[u]=new xa(m.property,O,m.parameters)}}_handleOverridablePaintPropertyUpdate(u,m,_){return!(!this.layout||m.isDataDriven()||_.isDataDriven())&&OT.hasPaintOverride(this.layout,u)}static hasPaintOverride(u,m){const _=u.get("text-field"),R=i3.paint.properties[m];let O=!1;const N=$=>{for(const G of $)if(R.overrides&&R.overrides.hasOverride(G))return void(O=!0)};if(_.value.kind==="constant"&&_.value.value instanceof Zn)N(_.value.value.sections);else if(_.value.kind==="source"){const $=Z=>{O||(Z instanceof _i&&ti(Z.value)===tn?N(Z.value.sections):Z instanceof Va?N(Z.sections):Z.eachChild($))},G=_.value;G._styleExpression&&$(G._styleExpression.expression)}return O}}let XV;var epe={get paint(){return XV=XV||new U({"background-color":new c(ke.paint_background["background-color"]),"background-pattern":new I(ke.paint_background["background-pattern"]),"background-opacity":new c(ke.paint_background["background-opacity"])})}};class tpe extends K{constructor(u){super(u,epe)}}let YV;var npe={get paint(){return YV=YV||new U({"raster-opacity":new c(ke.paint_raster["raster-opacity"]),"raster-hue-rotate":new c(ke.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new c(ke.paint_raster["raster-brightness-min"]),"raster-brightness-max":new c(ke.paint_raster["raster-brightness-max"]),"raster-saturation":new c(ke.paint_raster["raster-saturation"]),"raster-contrast":new c(ke.paint_raster["raster-contrast"]),"raster-resampling":new c(ke.paint_raster["raster-resampling"]),"raster-fade-duration":new c(ke.paint_raster["raster-fade-duration"])})}};class rpe extends K{constructor(u){super(u,npe)}}class ipe extends K{constructor(u){super(u,{}),this.onAdd=m=>{this.implementation.onAdd&&this.implementation.onAdd(m,m.painter.context.gl)},this.onRemove=m=>{this.implementation.onRemove&&this.implementation.onRemove(m,m.painter.context.gl)},this.implementation=u}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class ope{constructor(u){this._methodToThrottle=u,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const o3=63710088e-1;class bg{constructor(u,m){if(isNaN(u)||isNaN(m))throw new Error(`Invalid LngLat object: (${u}, ${m})`);if(this.lng=+u,this.lat=+m,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new bg(F(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(u){const m=Math.PI/180,_=this.lat*m,R=u.lat*m,O=Math.sin(_)*Math.sin(R)+Math.cos(_)*Math.cos(R)*Math.cos((u.lng-this.lng)*m);return o3*Math.acos(Math.min(O,1))}static convert(u){if(u instanceof bg)return u;if(Array.isArray(u)&&(u.length===2||u.length===3))return new bg(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&typeof u=="object"&&u!==null)return new bg(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const KV=2*Math.PI*o3;function ZV(f){return KV*Math.cos(f*Math.PI/180)}function JV(f){return(180+f)/360}function QV(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function eH(f,u){return f/ZV(u)}function s3(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}class $w{constructor(u,m,_=0){this.x=+u,this.y=+m,this.z=+_}static fromLngLat(u,m=0){const _=bg.convert(u);return new $w(JV(_.lng),QV(_.lat),eH(m,_.lat))}toLngLat(){return new bg(360*this.x-180,s3(this.y))}toAltitude(){return this.z*ZV(s3(this.y))}meterInMercatorCoordinateUnits(){return 1/KV*(u=s3(this.y),1/Math.cos(u*Math.PI/180));var u}}function tH(f,u,m){var _=2*Math.PI*6378137/256/Math.pow(2,m);return[f*_-2*Math.PI*6378137/2,u*_-2*Math.PI*6378137/2]}class a3{constructor(u,m,_){if(!function(R,O,N){return!(R<0||R>25||N<0||N>=Math.pow(2,R)||O<0||O>=Math.pow(2,R))}(u,m,_))throw new Error(`x=${m}, y=${_}, z=${u} outside of bounds. 0<=x<${Math.pow(2,u)}, 0<=y<${Math.pow(2,u)} 0<=z<=25 `);this.z=u,this.x=m,this.y=_,this.key=Uw(0,u,u,m,_)}equals(u){return this.z===u.z&&this.x===u.x&&this.y===u.y}url(u,m,_){const R=(N=this.y,$=this.z,G=tH(256*(O=this.x),256*(N=Math.pow(2,$)-N-1),$),Z=tH(256*(O+1),256*(N+1),$),G[0]+","+G[1]+","+Z[0]+","+Z[1]);var O,N,$,G,Z;const ne=function(oe,fe,_e){let Ce,Ae="";for(let Ue=oe;Ue>0;Ue--)Ce=1<<Ue-1,Ae+=(fe&Ce?1:0)+(_e&Ce?2:0);return Ae}(this.z,this.x,this.y);return u[(this.x+this.y)%u.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(_==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,m>1?"@2x":"").replace(/{quadkey}/g,ne).replace(/{bbox-epsg-3857}/g,R)}isChildOf(u){const m=this.z-u.z;return m>0&&u.x===this.x>>m&&u.y===this.y>>m}getTilePoint(u){const m=Math.pow(2,this.z);return new p((u.x*m-this.x)*ho,(u.y*m-this.y)*ho)}toString(){return`${this.z}/${this.x}/${this.y}`}}class nH{constructor(u,m){this.wrap=u,this.canonical=m,this.key=Uw(u,m.z,m.z,m.x,m.y)}}class Hc{constructor(u,m,_,R,O){if(u<_)throw new Error(`overscaledZ should be >= z; overscaledZ = ${u}; z = ${_}`);this.overscaledZ=u,this.wrap=m,this.canonical=new a3(_,+R,+O),this.key=Uw(m,u,_,R,O)}clone(){return new Hc(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)}scaledTo(u){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-u;return u>this.canonical.z?new Hc(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Hc(u,this.wrap,u,this.canonical.x>>m,this.canonical.y>>m)}calculateScaledKey(u,m){if(u>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${u}; overscaledZ = ${this.overscaledZ}`);const _=this.canonical.z-u;return u>this.canonical.z?Uw(this.wrap*+m,u,this.canonical.z,this.canonical.x,this.canonical.y):Uw(this.wrap*+m,u,u,this.canonical.x>>_,this.canonical.y>>_)}isChildOf(u){if(u.wrap!==this.wrap)return!1;const m=this.canonical.z-u.canonical.z;return u.overscaledZ===0||u.overscaledZ<this.overscaledZ&&u.canonical.x===this.canonical.x>>m&&u.canonical.y===this.canonical.y>>m}children(u){if(this.overscaledZ>=u)return[new Hc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const m=this.canonical.z+1,_=2*this.canonical.x,R=2*this.canonical.y;return[new Hc(m,this.wrap,m,_,R),new Hc(m,this.wrap,m,_+1,R),new Hc(m,this.wrap,m,_,R+1),new Hc(m,this.wrap,m,_+1,R+1)]}isLessThan(u){return this.wrap<u.wrap||!(this.wrap>u.wrap)&&(this.overscaledZ<u.overscaledZ||!(this.overscaledZ>u.overscaledZ)&&(this.canonical.x<u.canonical.x||!(this.canonical.x>u.canonical.x)&&this.canonical.y<u.canonical.y))}wrapped(){return new Hc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(u){return new Hc(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new nH(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(u){return this.canonical.getTilePoint(new $w(u.x-this.wrap,u.y))}}function Uw(f,u,m,_,R){(f*=2)<0&&(f=-1*f-1);const O=1<<m;return(O*O*f+O*R+_).toString(36)+m.toString(36)+u.toString(36)}Mn("CanonicalTileID",a3),Mn("OverscaledTileID",Hc,{omit:["posMatrix"]});class rH{constructor(u,m,_,R=1,O=1,N=1,$=0){if(this.uid=u,m.height!==m.width)throw new RangeError("DEM tiles must be square");if(_&&!["mapbox","terrarium","custom"].includes(_))return void pe(`"${_}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=m.height;const G=this.dim=m.height-2;switch(this.data=new Uint32Array(m.data.buffer),_){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=R,this.greenFactor=O,this.blueFactor=N,this.baseShift=$;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let Z=0;Z<G;Z++)this.data[this._idx(-1,Z)]=this.data[this._idx(0,Z)],this.data[this._idx(G,Z)]=this.data[this._idx(G-1,Z)],this.data[this._idx(Z,-1)]=this.data[this._idx(Z,0)],this.data[this._idx(Z,G)]=this.data[this._idx(Z,G-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(G,-1)]=this.data[this._idx(G-1,0)],this.data[this._idx(-1,G)]=this.data[this._idx(0,G-1)],this.data[this._idx(G,G)]=this.data[this._idx(G-1,G-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let Z=0;Z<G;Z++)for(let ne=0;ne<G;ne++){const oe=this.get(Z,ne);oe>this.max&&(this.max=oe),oe<this.min&&(this.min=oe)}}get(u,m){const _=new Uint8Array(this.data.buffer),R=4*this._idx(u,m);return this.unpack(_[R],_[R+1],_[R+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(u,m){if(u<-1||u>=this.dim+1||m<-1||m>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(m+1)*this.stride+(u+1)}unpack(u,m,_){return u*this.redFactor+m*this.greenFactor+_*this.blueFactor-this.baseShift}getPixels(){return new X({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(u,m,_){if(this.dim!==u.dim)throw new Error("dem dimension mismatch");let R=m*this.dim,O=m*this.dim+this.dim,N=_*this.dim,$=_*this.dim+this.dim;switch(m){case-1:R=O-1;break;case 1:O=R+1}switch(_){case-1:N=$-1;break;case 1:$=N+1}const G=-m*this.dim,Z=-_*this.dim;for(let ne=N;ne<$;ne++)for(let oe=R;oe<O;oe++)this.data[this._idx(oe,ne)]=u.data[this._idx(oe+G,ne+Z)]}}Mn("DEMData",rH);class iH{constructor(u){this._stringToNumber={},this._numberToString=[];for(let m=0;m<u.length;m++){const _=u[m];this._stringToNumber[_]=m,this._numberToString[m]=_}}encode(u){return this._stringToNumber[u]}decode(u){if(u>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${u} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[u]}}class oH{constructor(u,m,_,R,O){this.type="Feature",this._vectorTileFeature=u,u._z=m,u._x=_,u._y=R,this.properties=u.properties,this.id=O}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(u){this._geometry=u}toJSON(){const u={geometry:this.geometry};for(const m in this)m!=="_geometry"&&m!=="_vectorTileFeature"&&(u[m]=this[m]);return u}}class sH{constructor(u,m){this.tileID=u,this.x=u.canonical.x,this.y=u.canonical.y,this.z=u.canonical.z,this.grid=new rf(ho,16,0),this.grid3D=new rf(ho,16,0),this.featureIndexArray=new Gu,this.promoteId=m}insert(u,m,_,R,O,N){const $=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(_,R,O);const G=N?this.grid3D:this.grid;for(let Z=0;Z<m.length;Z++){const ne=m[Z],oe=[1/0,1/0,-1/0,-1/0];for(let fe=0;fe<ne.length;fe++){const _e=ne[fe];oe[0]=Math.min(oe[0],_e.x),oe[1]=Math.min(oe[1],_e.y),oe[2]=Math.max(oe[2],_e.x),oe[3]=Math.max(oe[3],_e.y)}oe[0]<ho&&oe[1]<ho&&oe[2]>=0&&oe[3]>=0&&G.insert($,oe[0],oe[1],oe[2],oe[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new vg.VectorTile(new YL(this.rawTileData)).layers,this.sourceLayerCoder=new iH(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(u,m,_,R){this.loadVTLayers();const O=u.params||{},N=ho/u.tileSize/u.scale,$=sc(O.filter),G=u.queryGeometry,Z=u.queryPadding*N,ne=lH(G),oe=this.grid.query(ne.minX-Z,ne.minY-Z,ne.maxX+Z,ne.maxY+Z),fe=lH(u.cameraQueryGeometry),_e=this.grid3D.query(fe.minX-Z,fe.minY-Z,fe.maxX+Z,fe.maxY+Z,(Ue,qe,bt,rt)=>function(gt,Ot,rn,wn,er){for(const gn of gt)if(Ot<=gn.x&&rn<=gn.y&&wn>=gn.x&&er>=gn.y)return!0;const xn=[new p(Ot,rn),new p(Ot,er),new p(wn,er),new p(wn,rn)];if(gt.length>2){for(const gn of xn)if(mg(gt,gn))return!0}for(let gn=0;gn<gt.length-1;gn++)if(wT(gt[gn],gt[gn+1],xn))return!0;return!1}(u.cameraQueryGeometry,Ue-Z,qe-Z,bt+Z,rt+Z));for(const Ue of _e)oe.push(Ue);oe.sort(spe);const Ce={};let Ae;for(let Ue=0;Ue<oe.length;Ue++){const qe=oe[Ue];if(qe===Ae)continue;Ae=qe;const bt=this.featureIndexArray.get(qe);let rt=null;this.loadMatchingFeature(Ce,bt.bucketIndex,bt.sourceLayerIndex,bt.featureIndex,$,O.layers,O.availableImages,m,_,R,(gt,Ot,rn)=>(rt||(rt=Ku(gt)),Ot.queryIntersectsFeature(G,gt,rn,rt,this.z,u.transform,N,u.pixelPosMatrix)))}return Ce}loadMatchingFeature(u,m,_,R,O,N,$,G,Z,ne,oe){const fe=this.bucketLayerIDs[m];if(N&&!function(Ue,qe){for(let bt=0;bt<Ue.length;bt++)if(qe.indexOf(Ue[bt])>=0)return!0;return!1}(N,fe))return;const _e=this.sourceLayerCoder.decode(_),Ce=this.vtLayers[_e].feature(R);if(O.needGeometry){const Ue=Cp(Ce,!0);if(!O.filter(new ai(this.tileID.overscaledZ),Ue,this.tileID.canonical))return}else if(!O.filter(new ai(this.tileID.overscaledZ),Ce))return;const Ae=this.getId(Ce,_e);for(let Ue=0;Ue<fe.length;Ue++){const qe=fe[Ue];if(N&&N.indexOf(qe)<0)continue;const bt=G[qe];if(!bt)continue;let rt={};Ae&&ne&&(rt=ne.getState(bt.sourceLayer||"_geojsonTileLayer",Ae));const gt=B({},Z[qe]);gt.paint=aH(gt.paint,bt.paint,Ce,rt,$),gt.layout=aH(gt.layout,bt.layout,Ce,rt,$);const Ot=!oe||oe(Ce,bt,rt);if(!Ot)continue;const rn=new oH(Ce,this.z,this.x,this.y,Ae);rn.layer=gt;let wn=u[qe];wn===void 0&&(wn=u[qe]=[]),wn.push({featureIndex:R,feature:rn,intersectionZ:Ot})}}lookupSymbolFeatures(u,m,_,R,O,N,$,G){const Z={};this.loadVTLayers();const ne=sc(O);for(const oe of u)this.loadMatchingFeature(Z,_,R,oe,ne,N,$,G,m);return Z}hasLayer(u){for(const m of this.bucketLayerIDs)for(const _ of m)if(u===_)return!0;return!1}getId(u,m){let _=u.id;return this.promoteId&&(_=u.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[m]],typeof _=="boolean"&&(_=Number(_))),_}}function aH(f,u,m,_,R){return J(f,(O,N)=>{const $=u instanceof L?u.get(N):null;return $&&$.evaluate?$.evaluate(m,_,R):$})}function lH(f){let u=1/0,m=1/0,_=-1/0,R=-1/0;for(const O of f)u=Math.min(u,O.x),m=Math.min(m,O.y),_=Math.max(_,O.x),R=Math.max(R,O.y);return{minX:u,minY:m,maxX:_,maxY:R}}function spe(f,u){return u-f}function cH(f,u,m,_,R){const O=[];for(let N=0;N<f.length;N++){const $=f[N];let G;for(let Z=0;Z<$.length-1;Z++){let ne=$[Z],oe=$[Z+1];ne.x<u&&oe.x<u||(ne.x<u?ne=new p(u,ne.y+(u-ne.x)/(oe.x-ne.x)*(oe.y-ne.y))._round():oe.x<u&&(oe=new p(u,ne.y+(u-ne.x)/(oe.x-ne.x)*(oe.y-ne.y))._round()),ne.y<m&&oe.y<m||(ne.y<m?ne=new p(ne.x+(m-ne.y)/(oe.y-ne.y)*(oe.x-ne.x),m)._round():oe.y<m&&(oe=new p(ne.x+(m-ne.y)/(oe.y-ne.y)*(oe.x-ne.x),m)._round()),ne.x>=_&&oe.x>=_||(ne.x>=_?ne=new p(_,ne.y+(_-ne.x)/(oe.x-ne.x)*(oe.y-ne.y))._round():oe.x>=_&&(oe=new p(_,ne.y+(_-ne.x)/(oe.x-ne.x)*(oe.y-ne.y))._round()),ne.y>=R&&oe.y>=R||(ne.y>=R?ne=new p(ne.x+(R-ne.y)/(oe.y-ne.y)*(oe.x-ne.x),R)._round():oe.y>=R&&(oe=new p(ne.x+(R-ne.y)/(oe.y-ne.y)*(oe.x-ne.x),R)._round()),G&&ne.equals(G[G.length-1])||(G=[ne],O.push(G)),G.push(oe)))))}}return O}Mn("FeatureIndex",sH,{omit:["rawTileData","sourceLayerCoder"]});class wg extends p{constructor(u,m,_,R){super(u,m),this.angle=_,R!==void 0&&(this.segment=R)}clone(){return new wg(this.x,this.y,this.angle,this.segment)}}function uH(f,u,m,_,R){if(u.segment===void 0||m===0)return!0;let O=u,N=u.segment+1,$=0;for(;$>-m/2;){if(N--,N<0)return!1;$-=f[N].dist(O),O=f[N]}$+=f[N].dist(f[N+1]),N++;const G=[];let Z=0;for(;$<m/2;){const ne=f[N],oe=f[N+1];if(!oe)return!1;let fe=f[N-1].angleTo(ne)-ne.angleTo(oe);for(fe=Math.abs((fe+3*Math.PI)%(2*Math.PI)-Math.PI),G.push({distance:$,angleDelta:fe}),Z+=fe;$-G[0].distance>_;)Z-=G.shift().angleDelta;if(Z>R)return!1;N++,$+=ne.dist(oe)}return!0}function dH(f){let u=0;for(let m=0;m<f.length-1;m++)u+=f[m].dist(f[m+1]);return u}function hH(f,u,m){return f?.6*u*m:0}function fH(f,u){return Math.max(f?f.right-f.left:0,u?u.right-u.left:0)}function ape(f,u,m,_,R,O){const N=hH(m,R,O),$=fH(m,_)*O;let G=0;const Z=dH(f)/2;for(let ne=0;ne<f.length-1;ne++){const oe=f[ne],fe=f[ne+1],_e=oe.dist(fe);if(G+_e>Z){const Ce=(Z-G)/_e,Ae=Ws.number(oe.x,fe.x,Ce),Ue=Ws.number(oe.y,fe.y,Ce),qe=new wg(Ae,Ue,fe.angleTo(oe),ne);return qe._round(),!N||uH(f,qe,$,N,u)?qe:void 0}G+=_e}}function lpe(f,u,m,_,R,O,N,$,G){const Z=hH(_,O,N),ne=fH(_,R),oe=ne*N,fe=f[0].x===0||f[0].x===G||f[0].y===0||f[0].y===G;return u-oe<u/4&&(u=oe+u/4),pH(f,fe?u/2*$%u:(ne/2+2*O)*N*$%u,u,Z,m,oe,fe,!1,G)}function pH(f,u,m,_,R,O,N,$,G){const Z=O/2,ne=dH(f);let oe=0,fe=u-m,_e=[];for(let Ce=0;Ce<f.length-1;Ce++){const Ae=f[Ce],Ue=f[Ce+1],qe=Ae.dist(Ue),bt=Ue.angleTo(Ae);for(;fe+m<oe+qe;){fe+=m;const rt=(fe-oe)/qe,gt=Ws.number(Ae.x,Ue.x,rt),Ot=Ws.number(Ae.y,Ue.y,rt);if(gt>=0&&gt<G&&Ot>=0&&Ot<G&&fe-Z>=0&&fe+Z<=ne){const rn=new wg(gt,Ot,bt,Ce);rn._round(),_&&!uH(f,rn,O,_,R)||_e.push(rn)}}oe+=qe}return $||_e.length||N||(_e=pH(f,oe/2,m,_,R,O,N,!0,G)),_e}Mn("Anchor",wg);const U_=Nl;function mH(f,u,m,_){const R=[],O=f.image,N=O.pixelRatio,$=O.paddedRect.w-2*U_,G=O.paddedRect.h-2*U_;let Z={x1:f.left,y1:f.top,x2:f.right,y2:f.bottom};const ne=O.stretchX||[[0,$]],oe=O.stretchY||[[0,G]],fe=(Ht,Hn)=>Ht+Hn[1]-Hn[0],_e=ne.reduce(fe,0),Ce=oe.reduce(fe,0),Ae=$-_e,Ue=G-Ce;let qe=0,bt=_e,rt=0,gt=Ce,Ot=0,rn=Ae,wn=0,er=Ue;if(O.content&&_){const Ht=O.content,Hn=Ht[2]-Ht[0],Fn=Ht[3]-Ht[1];(O.textFitWidth||O.textFitHeight)&&(Z=UV(f)),qe=LT(ne,0,Ht[0]),rt=LT(oe,0,Ht[1]),bt=LT(ne,Ht[0],Ht[2]),gt=LT(oe,Ht[1],Ht[3]),Ot=Ht[0]-qe,wn=Ht[1]-rt,rn=Hn-bt,er=Fn-gt}const xn=Z.x1,gn=Z.y1,Bn=Z.x2-xn,Ln=Z.y2-gn,An=(Ht,Hn,Fn,dr)=>{const Fi=DT(Ht.stretch-qe,bt,Bn,xn),ki=NT(Ht.fixed-Ot,rn,Ht.stretch,_e),vs=DT(Hn.stretch-rt,gt,Ln,gn),Zu=NT(Hn.fixed-wn,er,Hn.stretch,Ce),ra=DT(Fn.stretch-qe,bt,Bn,xn),_s=NT(Fn.fixed-Ot,rn,Fn.stretch,_e),Ja=DT(dr.stretch-rt,gt,Ln,gn),Qa=NT(dr.fixed-wn,er,dr.stretch,Ce),el=new p(Fi,vs),So=new p(ra,vs),xs=new p(ra,Ja),Ma=new p(Fi,Ja),ia=new p(ki/N,Zu/N),tl=new p(_s/N,Qa/N),oa=u*Math.PI/180;if(oa){const Zr=Math.sin(oa),$i=Math.cos(oa),Xi=[$i,-Zr,Zr,$i];el._matMult(Xi),So._matMult(Xi),Ma._matMult(Xi),xs._matMult(Xi)}const Wc=Ht.stretch+Ht.fixed,zl=Hn.stretch+Hn.fixed;return{tl:el,tr:So,bl:Ma,br:xs,tex:{x:O.paddedRect.x+U_+Wc,y:O.paddedRect.y+U_+zl,w:Fn.stretch+Fn.fixed-Wc,h:dr.stretch+dr.fixed-zl},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ia,pixelOffsetBR:tl,minFontScaleX:rn/N/Bn,minFontScaleY:er/N/Ln,isSDF:m}};if(_&&(O.stretchX||O.stretchY)){const Ht=gH(ne,Ae,_e),Hn=gH(oe,Ue,Ce);for(let Fn=0;Fn<Ht.length-1;Fn++){const dr=Ht[Fn],Fi=Ht[Fn+1];for(let ki=0;ki<Hn.length-1;ki++)R.push(An(dr,Hn[ki],Fi,Hn[ki+1]))}}else R.push(An({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:$+1},{fixed:0,stretch:G+1}));return R}function LT(f,u,m){let _=0;for(const R of f)_+=Math.max(u,Math.min(m,R[1]))-Math.max(u,Math.min(m,R[0]));return _}function gH(f,u,m){const _=[{fixed:-U_,stretch:0}];for(const[R,O]of f){const N=_[_.length-1];_.push({fixed:R-N.stretch,stretch:N.stretch}),_.push({fixed:R-N.stretch,stretch:N.stretch+(O-R)})}return _.push({fixed:u+U_,stretch:m}),_}function DT(f,u,m,_){return f/u*m+_}function NT(f,u,m,_){return f-u*m/_}class zT{constructor(u,m,_,R,O,N,$,G,Z,ne){var oe;if(this.boxStartIndex=u.length,Z){let fe=N.top,_e=N.bottom;const Ce=N.collisionPadding;Ce&&(fe-=Ce[1],_e+=Ce[3]);let Ae=_e-fe;Ae>0&&(Ae=Math.max(10,Ae),this.circleDiameter=Ae)}else{const fe=!((oe=N.image)===null||oe===void 0)&&oe.content&&(N.image.textFitWidth||N.image.textFitHeight)?UV(N):{x1:N.left,y1:N.top,x2:N.right,y2:N.bottom};fe.y1=fe.y1*$-G[0],fe.y2=fe.y2*$+G[2],fe.x1=fe.x1*$-G[3],fe.x2=fe.x2*$+G[1];const _e=N.collisionPadding;if(_e&&(fe.x1-=_e[0]*$,fe.y1-=_e[1]*$,fe.x2+=_e[2]*$,fe.y2+=_e[3]*$),ne){const Ce=new p(fe.x1,fe.y1),Ae=new p(fe.x2,fe.y1),Ue=new p(fe.x1,fe.y2),qe=new p(fe.x2,fe.y2),bt=ne*Math.PI/180;Ce._rotate(bt),Ae._rotate(bt),Ue._rotate(bt),qe._rotate(bt),fe.x1=Math.min(Ce.x,Ae.x,Ue.x,qe.x),fe.x2=Math.max(Ce.x,Ae.x,Ue.x,qe.x),fe.y1=Math.min(Ce.y,Ae.y,Ue.y,qe.y),fe.y2=Math.max(Ce.y,Ae.y,Ue.y,qe.y)}u.emplaceBack(m.x,m.y,fe.x1,fe.y1,fe.x2,fe.y2,_,R,O)}this.boxEndIndex=u.length}}class cpe{constructor(u=[],m=(_,R)=>_<R?-1:_>R?1:0){if(this.data=u,this.length=this.data.length,this.compare=m,this.length>0)for(let _=(this.length>>1)-1;_>=0;_--)this._down(_)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],m=this.data.pop();return--this.length>0&&(this.data[0]=m,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:m,compare:_}=this,R=m[u];for(;u>0;){const O=u-1>>1,N=m[O];if(_(R,N)>=0)break;m[u]=N,u=O}m[u]=R}_down(u){const{data:m,compare:_}=this,R=this.length>>1,O=m[u];for(;u<R;){let N=1+(u<<1);const $=N+1;if($<this.length&&_(m[$],m[N])<0&&(N=$),_(m[N],O)>=0)break;m[u]=m[N],u=N}m[u]=O}}function upe(f,u=1,m=!1){let _=1/0,R=1/0,O=-1/0,N=-1/0;const $=f[0];for(let _e=0;_e<$.length;_e++){const Ce=$[_e];(!_e||Ce.x<_)&&(_=Ce.x),(!_e||Ce.y<R)&&(R=Ce.y),(!_e||Ce.x>O)&&(O=Ce.x),(!_e||Ce.y>N)&&(N=Ce.y)}const G=Math.min(O-_,N-R);let Z=G/2;const ne=new cpe([],dpe);if(G===0)return new p(_,R);for(let _e=_;_e<O;_e+=G)for(let Ce=R;Ce<N;Ce+=G)ne.push(new V_(_e+Z,Ce+Z,Z,f));let oe=function(_e){let Ce=0,Ae=0,Ue=0;const qe=_e[0];for(let bt=0,rt=qe.length,gt=rt-1;bt<rt;gt=bt++){const Ot=qe[bt],rn=qe[gt],wn=Ot.x*rn.y-rn.x*Ot.y;Ae+=(Ot.x+rn.x)*wn,Ue+=(Ot.y+rn.y)*wn,Ce+=3*wn}return new V_(Ae/Ce,Ue/Ce,0,_e)}(f),fe=ne.length;for(;ne.length;){const _e=ne.pop();(_e.d>oe.d||!oe.d)&&(oe=_e,m&&console.log("found best %d after %d probes",Math.round(1e4*_e.d)/1e4,fe)),_e.max-oe.d<=u||(Z=_e.h/2,ne.push(new V_(_e.p.x-Z,_e.p.y-Z,Z,f)),ne.push(new V_(_e.p.x+Z,_e.p.y-Z,Z,f)),ne.push(new V_(_e.p.x-Z,_e.p.y+Z,Z,f)),ne.push(new V_(_e.p.x+Z,_e.p.y+Z,Z,f)),fe+=4)}return m&&(console.log(`num probes: ${fe}`),console.log(`best distance: ${oe.d}`)),oe.p}function dpe(f,u){return u.max-f.max}function V_(f,u,m,_){this.p=new p(f,u),this.h=m,this.d=function(R,O){let N=!1,$=1/0;for(let G=0;G<O.length;G++){const Z=O[G];for(let ne=0,oe=Z.length,fe=oe-1;ne<oe;fe=ne++){const _e=Z[ne],Ce=Z[fe];_e.y>R.y!=Ce.y>R.y&&R.x<(Ce.x-_e.x)*(R.y-_e.y)/(Ce.y-_e.y)+_e.x&&(N=!N),$=Math.min($,Pw(R,_e,Ce))}}return(N?1:-1)*Math.sqrt($)}(this.p,_),this.max=this.d+this.h*Math.SQRT2}var na;s.aq=void 0,(na=s.aq||(s.aq={}))[na.center=1]="center",na[na.left=2]="left",na[na.right=3]="right",na[na.top=4]="top",na[na.bottom=5]="bottom",na[na["top-left"]=6]="top-left",na[na["top-right"]=7]="top-right",na[na["bottom-left"]=8]="bottom-left",na[na["bottom-right"]=9]="bottom-right";const Sg=7,l3=Number.POSITIVE_INFINITY;function yH(f,u){return u[1]!==l3?function(m,_,R){let O=0,N=0;switch(_=Math.abs(_),R=Math.abs(R),m){case"top-right":case"top-left":case"top":N=R-Sg;break;case"bottom-right":case"bottom-left":case"bottom":N=-R+Sg}switch(m){case"top-right":case"bottom-right":case"right":O=-_;break;case"top-left":case"bottom-left":case"left":O=_}return[O,N]}(f,u[0],u[1]):function(m,_){let R=0,O=0;_<0&&(_=0);const N=_/Math.SQRT2;switch(m){case"top-right":case"top-left":O=N-Sg;break;case"bottom-right":case"bottom-left":O=-N+Sg;break;case"bottom":O=-_+Sg;break;case"top":O=_-Sg}switch(m){case"top-right":case"bottom-right":R=-N;break;case"top-left":case"bottom-left":R=N;break;case"left":R=_;break;case"right":R=-_}return[R,O]}(f,u[0])}function vH(f,u,m){var _;const R=f.layout,O=(_=R.get("text-variable-anchor-offset"))===null||_===void 0?void 0:_.evaluate(u,{},m);if(O){const $=O.values,G=[];for(let Z=0;Z<$.length;Z+=2){const ne=G[Z]=$[Z],oe=$[Z+1].map(fe=>fe*ss);ne.startsWith("top")?oe[1]-=Sg:ne.startsWith("bottom")&&(oe[1]+=Sg),G[Z+1]=oe}return new Lr(G)}const N=R.get("text-variable-anchor");if(N){let $;$=f._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[R.get("text-radial-offset").evaluate(u,{},m)*ss,l3]:R.get("text-offset").evaluate(u,{},m).map(Z=>Z*ss);const G=[];for(const Z of N)G.push(Z,yH(Z,$));return new Lr(G)}return null}function c3(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function hpe(f,u,m,_,R,O,N,$,G,Z,ne){let oe=O.textMaxSize.evaluate(u,{});oe===void 0&&(oe=N);const fe=f.layers[0].layout,_e=fe.get("icon-offset").evaluate(u,{},ne),Ce=xH(m.horizontal),Ae=N/24,Ue=f.tilePixelRatio*Ae,qe=f.tilePixelRatio*oe/24,bt=f.tilePixelRatio*$,rt=f.tilePixelRatio*fe.get("symbol-spacing"),gt=fe.get("text-padding")*f.tilePixelRatio,Ot=function(Ht,Hn,Fn,dr=1){const Fi=Ht.get("icon-padding").evaluate(Hn,{},Fn),ki=Fi&&Fi.values;return[ki[0]*dr,ki[1]*dr,ki[2]*dr,ki[3]*dr]}(fe,u,ne,f.tilePixelRatio),rn=fe.get("text-max-angle")/180*Math.PI,wn=fe.get("text-rotation-alignment")!=="viewport"&&fe.get("symbol-placement")!=="point",er=fe.get("icon-rotation-alignment")==="map"&&fe.get("symbol-placement")!=="point",xn=fe.get("symbol-placement"),gn=rt/2,Bn=fe.get("icon-text-fit");let Ln;_&&Bn!=="none"&&(f.allowVerticalPlacement&&m.vertical&&(Ln=VV(_,m.vertical,Bn,fe.get("icon-text-fit-padding"),_e,Ae)),Ce&&(_=VV(_,Ce,Bn,fe.get("icon-text-fit-padding"),_e,Ae)));const An=(Ht,Hn)=>{Hn.x<0||Hn.x>=ho||Hn.y<0||Hn.y>=ho||function(Fn,dr,Fi,ki,vs,Zu,ra,_s,Ja,Qa,el,So,xs,Ma,ia,tl,oa,Wc,zl,Zr,$i,Xi,fc,fo,H_){const gf=Fn.addToLineVertexArray(dr,Fi);let yf,Ju,Gc,Ds,kp=0,Ww=0,MH=0,EH=0,y3=-1,v3=-1;const Op={};let TH=Xu("");if(Fn.allowVerticalPlacement&&ki.vertical){const Ea=_s.layout.get("text-rotate").evaluate($i,{},fo)+90;Gc=new zT(Ja,dr,Qa,el,So,ki.vertical,xs,Ma,ia,Ea),ra&&(Ds=new zT(Ja,dr,Qa,el,So,ra,oa,Wc,ia,Ea))}if(vs){const Ea=_s.layout.get("icon-rotate").evaluate($i,{}),qc=_s.layout.get("icon-text-fit")!=="none",bv=mH(vs,Ea,fc,qc),th=ra?mH(ra,Ea,fc,qc):void 0;Ju=new zT(Ja,dr,Qa,el,So,vs,oa,Wc,!1,Ea),kp=4*bv.length;const wv=Fn.iconSizeData;let vf=null;wv.kind==="source"?(vf=[mf*_s.layout.get("icon-size").evaluate($i,{})],vf[0]>xg&&pe(`${Fn.layerIds[0]}: Value for "icon-size" is >= ${jw}. Reduce your "icon-size".`)):wv.kind==="composite"&&(vf=[mf*Xi.compositeIconSizes[0].evaluate($i,{},fo),mf*Xi.compositeIconSizes[1].evaluate($i,{},fo)],(vf[0]>xg||vf[1]>xg)&&pe(`${Fn.layerIds[0]}: Value for "icon-size" is >= ${jw}. Reduce your "icon-size".`)),Fn.addSymbols(Fn.icon,bv,vf,Zr,zl,$i,s.ah.none,dr,gf.lineStartIndex,gf.lineLength,-1,fo),y3=Fn.icon.placedSymbolArray.length-1,th&&(Ww=4*th.length,Fn.addSymbols(Fn.icon,th,vf,Zr,zl,$i,s.ah.vertical,dr,gf.lineStartIndex,gf.lineLength,-1,fo),v3=Fn.icon.placedSymbolArray.length-1)}const CH=Object.keys(ki.horizontal);for(const Ea of CH){const qc=ki.horizontal[Ea];if(!yf){TH=Xu(qc.text);const th=_s.layout.get("text-rotate").evaluate($i,{},fo);yf=new zT(Ja,dr,Qa,el,So,qc,xs,Ma,ia,th)}const bv=qc.positionedLines.length===1;if(MH+=_H(Fn,dr,qc,Zu,_s,ia,$i,tl,gf,ki.vertical?s.ah.horizontal:s.ah.horizontalOnly,bv?CH:[Ea],Op,y3,Xi,fo),bv)break}ki.vertical&&(EH+=_H(Fn,dr,ki.vertical,Zu,_s,ia,$i,tl,gf,s.ah.vertical,["vertical"],Op,v3,Xi,fo));const mpe=yf?yf.boxStartIndex:Fn.collisionBoxArray.length,gpe=yf?yf.boxEndIndex:Fn.collisionBoxArray.length,ype=Gc?Gc.boxStartIndex:Fn.collisionBoxArray.length,vpe=Gc?Gc.boxEndIndex:Fn.collisionBoxArray.length,_pe=Ju?Ju.boxStartIndex:Fn.collisionBoxArray.length,xpe=Ju?Ju.boxEndIndex:Fn.collisionBoxArray.length,bpe=Ds?Ds.boxStartIndex:Fn.collisionBoxArray.length,wpe=Ds?Ds.boxEndIndex:Fn.collisionBoxArray.length;let eh=-1;const BT=(Ea,qc)=>Ea&&Ea.circleDiameter?Math.max(Ea.circleDiameter,qc):qc;eh=BT(yf,eh),eh=BT(Gc,eh),eh=BT(Ju,eh),eh=BT(Ds,eh);const AH=eh>-1?1:0;AH&&(eh*=H_/ss),Fn.glyphOffsetArray.length>=$_.MAX_GLYPHS&&pe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),$i.sortKey!==void 0&&Fn.addToSortKeyRanges(Fn.symbolInstances.length,$i.sortKey);const Spe=vH(_s,$i,fo),[Mpe,Epe]=function(Ea,qc){const bv=Ea.length,th=qc==null?void 0:qc.values;if((th==null?void 0:th.length)>0)for(let wv=0;wv<th.length;wv+=2){const vf=th[wv+1];Ea.emplaceBack(s.aq[th[wv]],vf[0],vf[1])}return[bv,Ea.length]}(Fn.textAnchorOffsets,Spe);Fn.symbolInstances.emplaceBack(dr.x,dr.y,Op.right>=0?Op.right:-1,Op.center>=0?Op.center:-1,Op.left>=0?Op.left:-1,Op.vertical||-1,y3,v3,TH,mpe,gpe,ype,vpe,_pe,xpe,bpe,wpe,Qa,MH,EH,kp,Ww,AH,0,xs,eh,Mpe,Epe)}(f,Hn,Ht,m,_,R,Ln,f.layers[0],f.collisionBoxArray,u.index,u.sourceLayerIndex,f.index,Ue,[gt,gt,gt,gt],wn,G,bt,Ot,er,_e,u,O,Z,ne,N)};if(xn==="line")for(const Ht of cH(u.geometry,0,0,ho,ho)){const Hn=lpe(Ht,rt,rn,m.vertical||Ce,_,24,qe,f.overscaling,ho);for(const Fn of Hn)Ce&&fpe(f,Ce.text,gn,Fn)||An(Ht,Fn)}else if(xn==="line-center"){for(const Ht of u.geometry)if(Ht.length>1){const Hn=ape(Ht,rn,m.vertical||Ce,_,24,qe);Hn&&An(Ht,Hn)}}else if(u.type==="Polygon")for(const Ht of cp(u.geometry,0)){const Hn=upe(Ht,16);An(Ht[0],new wg(Hn.x,Hn.y,0))}else if(u.type==="LineString")for(const Ht of u.geometry)An(Ht,new wg(Ht[0].x,Ht[0].y,0));else if(u.type==="Point")for(const Ht of u.geometry)for(const Hn of Ht)An([Hn],new wg(Hn.x,Hn.y,0))}function _H(f,u,m,_,R,O,N,$,G,Z,ne,oe,fe,_e,Ce){const Ae=function(bt,rt,gt,Ot,rn,wn,er,xn){const gn=Ot.layout.get("text-rotate").evaluate(wn,{})*Math.PI/180,Bn=[];for(const Ln of rt.positionedLines)for(const An of Ln.positionedGlyphs){if(!An.rect)continue;const Ht=An.rect||{};let Hn=DV+1,Fn=!0,dr=1,Fi=0;const ki=(rn||xn)&&An.vertical,vs=An.metrics.advance*An.scale/2;if(xn&&rt.verticalizable&&(Fi=Ln.lineOffset/2-(An.imageName?-(ss-An.metrics.width*An.scale)/2:(An.scale-1)*ss)),An.imageName){const Zr=er[An.imageName];Fn=Zr.sdf,dr=Zr.pixelRatio,Hn=Nl/dr}const Zu=rn?[An.x+vs,An.y]:[0,0];let ra=rn?[0,0]:[An.x+vs+gt[0],An.y+gt[1]-Fi],_s=[0,0];ki&&(_s=ra,ra=[0,0]);const Ja=An.metrics.isDoubleResolution?2:1,Qa=(An.metrics.left-Hn)*An.scale-vs+ra[0],el=(-An.metrics.top-Hn)*An.scale+ra[1],So=Qa+Ht.w/Ja*An.scale/dr,xs=el+Ht.h/Ja*An.scale/dr,Ma=new p(Qa,el),ia=new p(So,el),tl=new p(Qa,xs),oa=new p(So,xs);if(ki){const Zr=new p(-vs,vs-Fw),$i=-Math.PI/2,Xi=ss/2-vs,fc=new p(5-Fw-Xi,-(An.imageName?Xi:0)),fo=new p(..._s);Ma._rotateAround($i,Zr)._add(fc)._add(fo),ia._rotateAround($i,Zr)._add(fc)._add(fo),tl._rotateAround($i,Zr)._add(fc)._add(fo),oa._rotateAround($i,Zr)._add(fc)._add(fo)}if(gn){const Zr=Math.sin(gn),$i=Math.cos(gn),Xi=[$i,-Zr,Zr,$i];Ma._matMult(Xi),ia._matMult(Xi),tl._matMult(Xi),oa._matMult(Xi)}const Wc=new p(0,0),zl=new p(0,0);Bn.push({tl:Ma,tr:ia,bl:tl,br:oa,tex:Ht,writingMode:rt.writingMode,glyphOffset:Zu,sectionIndex:An.sectionIndex,isSDF:Fn,pixelOffsetTL:Wc,pixelOffsetBR:zl,minFontScaleX:0,minFontScaleY:0})}return Bn}(0,m,$,R,O,N,_,f.allowVerticalPlacement),Ue=f.textSizeData;let qe=null;Ue.kind==="source"?(qe=[mf*R.layout.get("text-size").evaluate(N,{})],qe[0]>xg&&pe(`${f.layerIds[0]}: Value for "text-size" is >= ${jw}. Reduce your "text-size".`)):Ue.kind==="composite"&&(qe=[mf*_e.compositeTextSizes[0].evaluate(N,{},Ce),mf*_e.compositeTextSizes[1].evaluate(N,{},Ce)],(qe[0]>xg||qe[1]>xg)&&pe(`${f.layerIds[0]}: Value for "text-size" is >= ${jw}. Reduce your "text-size".`)),f.addSymbols(f.text,Ae,qe,$,O,N,Z,u,G.lineStartIndex,G.lineLength,fe,Ce);for(const bt of ne)oe[bt]=f.text.placedSymbolArray.length-1;return 4*Ae.length}function xH(f){for(const u in f)return f[u];return null}function fpe(f,u,m,_){const R=f.compareText;if(u in R){const O=R[u];for(let N=O.length-1;N>=0;N--)if(_.dist(O[N])<m)return!0}else R[u]=[];return R[u].push(_),!1}const bH=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class u3{static from(u){if(!(u instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[m,_]=new Uint8Array(u,0,2);if(m!==219)throw new Error("Data does not appear to be in a KDBush format.");const R=_>>4;if(R!==1)throw new Error(`Got v${R} data when expected v1.`);const O=bH[15&_];if(!O)throw new Error("Unrecognized array type.");const[N]=new Uint16Array(u,2,1),[$]=new Uint32Array(u,4,1);return new u3($,N,O,u)}constructor(u,m=64,_=Float64Array,R){if(isNaN(u)||u<0)throw new Error(`Unpexpected numItems value: ${u}.`);this.numItems=+u,this.nodeSize=Math.min(Math.max(+m,2),65535),this.ArrayType=_,this.IndexArrayType=u<65536?Uint16Array:Uint32Array;const O=bH.indexOf(this.ArrayType),N=2*u*this.ArrayType.BYTES_PER_ELEMENT,$=u*this.IndexArrayType.BYTES_PER_ELEMENT,G=(8-$%8)%8;if(O<0)throw new Error(`Unexpected typed array class: ${_}.`);R&&R instanceof ArrayBuffer?(this.data=R,this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+$+G,2*u),this._pos=2*u,this._finished=!0):(this.data=new ArrayBuffer(8+N+$+G),this.ids=new this.IndexArrayType(this.data,8,u),this.coords=new this.ArrayType(this.data,8+$+G,2*u),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+O]),new Uint16Array(this.data,2,1)[0]=m,new Uint32Array(this.data,4,1)[0]=u)}add(u,m){const _=this._pos>>1;return this.ids[_]=_,this.coords[this._pos++]=u,this.coords[this._pos++]=m,_}finish(){const u=this._pos>>1;if(u!==this.numItems)throw new Error(`Added ${u} items when expected ${this.numItems}.`);return d3(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(u,m,_,R){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:O,coords:N,nodeSize:$}=this,G=[0,O.length-1,0],Z=[];for(;G.length;){const ne=G.pop()||0,oe=G.pop()||0,fe=G.pop()||0;if(oe-fe<=$){for(let Ue=fe;Ue<=oe;Ue++){const qe=N[2*Ue],bt=N[2*Ue+1];qe>=u&&qe<=_&&bt>=m&&bt<=R&&Z.push(O[Ue])}continue}const _e=fe+oe>>1,Ce=N[2*_e],Ae=N[2*_e+1];Ce>=u&&Ce<=_&&Ae>=m&&Ae<=R&&Z.push(O[_e]),(ne===0?u<=Ce:m<=Ae)&&(G.push(fe),G.push(_e-1),G.push(1-ne)),(ne===0?_>=Ce:R>=Ae)&&(G.push(_e+1),G.push(oe),G.push(1-ne))}return Z}within(u,m,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:R,coords:O,nodeSize:N}=this,$=[0,R.length-1,0],G=[],Z=_*_;for(;$.length;){const ne=$.pop()||0,oe=$.pop()||0,fe=$.pop()||0;if(oe-fe<=N){for(let Ue=fe;Ue<=oe;Ue++)SH(O[2*Ue],O[2*Ue+1],u,m)<=Z&&G.push(R[Ue]);continue}const _e=fe+oe>>1,Ce=O[2*_e],Ae=O[2*_e+1];SH(Ce,Ae,u,m)<=Z&&G.push(R[_e]),(ne===0?u-_<=Ce:m-_<=Ae)&&($.push(fe),$.push(_e-1),$.push(1-ne)),(ne===0?u+_>=Ce:m+_>=Ae)&&($.push(_e+1),$.push(oe),$.push(1-ne))}return G}}function d3(f,u,m,_,R,O){if(R-_<=m)return;const N=_+R>>1;wH(f,u,N,_,R,O),d3(f,u,m,_,N-1,1-O),d3(f,u,m,N+1,R,1-O)}function wH(f,u,m,_,R,O){for(;R>_;){if(R-_>600){const Z=R-_+1,ne=m-_+1,oe=Math.log(Z),fe=.5*Math.exp(2*oe/3),_e=.5*Math.sqrt(oe*fe*(Z-fe)/Z)*(ne-Z/2<0?-1:1);wH(f,u,m,Math.max(_,Math.floor(m-ne*fe/Z+_e)),Math.min(R,Math.floor(m+(Z-ne)*fe/Z+_e)),O)}const N=u[2*m+O];let $=_,G=R;for(Vw(f,u,_,m),u[2*R+O]>N&&Vw(f,u,_,R);$<G;){for(Vw(f,u,$,G),$++,G--;u[2*$+O]<N;)$++;for(;u[2*G+O]>N;)G--}u[2*_+O]===N?Vw(f,u,_,G):(G++,Vw(f,u,G,R)),G<=m&&(_=G+1),m<=G&&(R=G-1)}}function Vw(f,u,m,_){h3(f,m,_),h3(u,2*m,2*_),h3(u,2*m+1,2*_+1)}function h3(f,u,m){const _=f[u];f[u]=f[m],f[m]=_}function SH(f,u,m,_){const R=f-m,O=u-_;return R*R+O*O}var f3;s.bf=void 0,(f3=s.bf||(s.bf={})).create="create",f3.load="load",f3.fullLoad="fullLoad";let FT=null,Hw=[];const p3=1e3/60,m3="loadTime",g3="fullLoadTime",ppe={mark(f){performance.mark(f)},frame(f){const u=f;FT!=null&&Hw.push(u-FT),FT=u},clearMetrics(){FT=null,Hw=[],performance.clearMeasures(m3),performance.clearMeasures(g3);for(const f in s.bf)performance.clearMarks(s.bf[f])},getPerformanceMetrics(){performance.measure(m3,s.bf.create,s.bf.load),performance.measure(g3,s.bf.create,s.bf.fullLoad);const f=performance.getEntriesByName(m3)[0].duration,u=performance.getEntriesByName(g3)[0].duration,m=Hw.length,_=1/(Hw.reduce((O,N)=>O+N,0)/m/1e3),R=Hw.filter(O=>O>p3).reduce((O,N)=>O+(N-p3)/p3,0);return{loadTime:f,fullLoadTime:u,fps:_,percentDroppedFrames:R/(m+R)*100,totalFrames:m}}};s.$=class extends ze{},s.A=dc,s.B=Mw,s.C=function(f){if(he==null){const u=f.navigator?f.navigator.userAgent:null;he=!!f.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return he},s.D=c,s.E=Tt,s.F=class{constructor(f,u){this.target=f,this.mapId=u,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new ope(()=>this.process()),this.subscription=function(m,_,R,O){return m.addEventListener(_,R,!1),{unsubscribe:()=>{m.removeEventListener(_,R,!1)}}}(this.target,"message",m=>this.receive(m)),this.globalScope=me(self)?f:window}registerMessageHandler(f,u){this.messageHandlers[f]=u}sendAsync(f,u){return new Promise((m,_)=>{const R=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[R]={resolve:m,reject:_},u&&u.signal.addEventListener("abort",()=>{delete this.resolveRejects[R];const $={id:R,type:"<cancel>",origin:location.origin,targetMapId:f.targetMapId,sourceMapId:this.mapId};this.target.postMessage($)},{once:!0});const O=[],N=Object.assign(Object.assign({},f),{id:R,sourceMapId:this.mapId,origin:location.origin,data:Zs(f.data,O)});this.target.postMessage(N,{transfer:O})})}receive(f){const u=f.data,m=u.id;if(!(u.origin!=="file://"&&location.origin!=="file://"&&u.origin!=="resource://android"&&location.origin!=="resource://android"&&u.origin!==location.origin||u.targetMapId&&this.mapId!==u.targetMapId)){if(u.type==="<cancel>"){delete this.tasks[m];const _=this.abortControllers[m];return delete this.abortControllers[m],void(_&&_.abort())}if(me(self)||u.mustQueue)return this.tasks[m]=u,this.taskQueue.push(m),void this.invoker.trigger();this.processTask(m,u)}}process(){if(this.taskQueue.length===0)return;const f=this.taskQueue.shift(),u=this.tasks[f];delete this.tasks[f],this.taskQueue.length>0&&this.invoker.trigger(),u&&this.processTask(f,u)}processTask(f,u){return a(this,void 0,void 0,function*(){if(u.type==="<response>"){const R=this.resolveRejects[f];return delete this.resolveRejects[f],R?void(u.error?R.reject(of(u.error)):R.resolve(of(u.data))):void 0}if(!this.messageHandlers[u.type])return void this.completeTask(f,new Error(`Could not find a registered handler for ${u.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const m=of(u.data),_=new AbortController;this.abortControllers[f]=_;try{const R=yield this.messageHandlers[u.type](u.sourceMapId,m,_);this.completeTask(f,null,R)}catch(R){this.completeTask(f,R)}})}completeTask(f,u,m){const _=[];delete this.abortControllers[f];const R={id:f,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:u?Zs(u):null,data:Zs(m,_)};this.target.postMessage(R,{transfer:_})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},s.G=at,s.H=function(){var f=new dc(16);return dc!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},s.I=ZL,s.J=function(f,u,m){var _,R,O,N,$,G,Z,ne,oe,fe,_e,Ce,Ae=m[0],Ue=m[1],qe=m[2];return u===f?(f[12]=u[0]*Ae+u[4]*Ue+u[8]*qe+u[12],f[13]=u[1]*Ae+u[5]*Ue+u[9]*qe+u[13],f[14]=u[2]*Ae+u[6]*Ue+u[10]*qe+u[14],f[15]=u[3]*Ae+u[7]*Ue+u[11]*qe+u[15]):(R=u[1],O=u[2],N=u[3],$=u[4],G=u[5],Z=u[6],ne=u[7],oe=u[8],fe=u[9],_e=u[10],Ce=u[11],f[0]=_=u[0],f[1]=R,f[2]=O,f[3]=N,f[4]=$,f[5]=G,f[6]=Z,f[7]=ne,f[8]=oe,f[9]=fe,f[10]=_e,f[11]=Ce,f[12]=_*Ae+$*Ue+oe*qe+u[12],f[13]=R*Ae+G*Ue+fe*qe+u[13],f[14]=O*Ae+Z*Ue+_e*qe+u[14],f[15]=N*Ae+ne*Ue+Ce*qe+u[15]),f},s.K=function(f,u,m){var _=m[0],R=m[1],O=m[2];return f[0]=u[0]*_,f[1]=u[1]*_,f[2]=u[2]*_,f[3]=u[3]*_,f[4]=u[4]*R,f[5]=u[5]*R,f[6]=u[6]*R,f[7]=u[7]*R,f[8]=u[8]*O,f[9]=u[9]*O,f[10]=u[10]*O,f[11]=u[11]*O,f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},s.L=D_,s.M=function(f,u){const m={};for(let _=0;_<u.length;_++){const R=u[_];R in f&&(m[R]=f[R])}return m},s.N=bg,s.O=JV,s.P=p,s.Q=QV,s.R=X,s.S=Hc,s.T=Wu,s.U=S,s.V=C,s.W=ye,s.X=ho,s.Y=xe,s.Z=$w,s._=a,s.a=Be,s.a$=function(f,u){return f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[4]=u[4],f[5]=u[5],f[6]=u[6],f[7]=u[7],f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15],f},s.a0=co,s.a1=a3,s.a2=ft,s.a3=f=>{const u=window.document.createElement("video");return u.muted=!0,new Promise(m=>{u.onloadstart=()=>{m(u)};for(const _ of f){const R=window.document.createElement("source");Je(_)||(u.crossOrigin="Anonymous"),R.src=_,u.appendChild(R)}})},s.a4=function(){return W++},s.a5=rs,s.a6=$_,s.a7=sc,s.a8=Cp,s.a9=oH,s.aA=function(f){if(f.type==="custom")return new ipe(f);switch(f.type){case"background":return new tpe(f);case"circle":return new MT(f);case"fill":return new ofe(f);case"fill-extrusion":return new xfe(f);case"heatmap":return new ue(f);case"hillshade":return new Ut(f);case"line":return new Afe(f);case"raster":return new rpe(f);case"symbol":return new OT(f)}},s.aB=Y,s.aC=function(f,u){if(!f)return[{command:"setStyle",args:[u]}];let m=[];try{if(!$t(f.version,u.version))return[{command:"setStyle",args:[u]}];$t(f.center,u.center)||m.push({command:"setCenter",args:[u.center]}),$t(f.zoom,u.zoom)||m.push({command:"setZoom",args:[u.zoom]}),$t(f.bearing,u.bearing)||m.push({command:"setBearing",args:[u.bearing]}),$t(f.pitch,u.pitch)||m.push({command:"setPitch",args:[u.pitch]}),$t(f.sprite,u.sprite)||m.push({command:"setSprite",args:[u.sprite]}),$t(f.glyphs,u.glyphs)||m.push({command:"setGlyphs",args:[u.glyphs]}),$t(f.transition,u.transition)||m.push({command:"setTransition",args:[u.transition]}),$t(f.light,u.light)||m.push({command:"setLight",args:[u.light]}),$t(f.terrain,u.terrain)||m.push({command:"setTerrain",args:[u.terrain]}),$t(f.sky,u.sky)||m.push({command:"setSky",args:[u.sky]}),$t(f.projection,u.projection)||m.push({command:"setProjection",args:[u.projection]});const _={},R=[];(function(N,$,G,Z){let ne;for(ne in $=$||{},N=N||{})Object.prototype.hasOwnProperty.call(N,ne)&&(Object.prototype.hasOwnProperty.call($,ne)||Me(ne,G,Z));for(ne in $)Object.prototype.hasOwnProperty.call($,ne)&&(Object.prototype.hasOwnProperty.call(N,ne)?$t(N[ne],$[ne])||(N[ne].type==="geojson"&&$[ne].type==="geojson"&&St(N,$,ne)?Qt(G,{command:"setGeoJSONSourceData",args:[ne,$[ne].data]}):wt(ne,$,G,Z)):Ie(ne,$,G))})(f.sources,u.sources,R,_);const O=[];f.layers&&f.layers.forEach(N=>{"source"in N&&_[N.source]?m.push({command:"removeLayer",args:[N.id]}):O.push(N)}),m=m.concat(R),function(N,$,G){$=$||[];const Z=(N=N||[]).map(jt),ne=$.map(jt),oe=N.reduce(Rn,{}),fe=$.reduce(Rn,{}),_e=Z.slice(),Ce=Object.create(null);let Ae,Ue,qe,bt,rt;for(let gt=0,Ot=0;gt<Z.length;gt++)Ae=Z[gt],Object.prototype.hasOwnProperty.call(fe,Ae)?Ot++:(Qt(G,{command:"removeLayer",args:[Ae]}),_e.splice(_e.indexOf(Ae,Ot),1));for(let gt=0,Ot=0;gt<ne.length;gt++)Ae=ne[ne.length-1-gt],_e[_e.length-1-gt]!==Ae&&(Object.prototype.hasOwnProperty.call(oe,Ae)?(Qt(G,{command:"removeLayer",args:[Ae]}),_e.splice(_e.lastIndexOf(Ae,_e.length-Ot),1)):Ot++,bt=_e[_e.length-gt],Qt(G,{command:"addLayer",args:[fe[Ae],bt]}),_e.splice(_e.length-gt,0,Ae),Ce[Ae]=!0);for(let gt=0;gt<ne.length;gt++)if(Ae=ne[gt],Ue=oe[Ae],qe=fe[Ae],!Ce[Ae]&&!$t(Ue,qe))if($t(Ue.source,qe.source)&&$t(Ue["source-layer"],qe["source-layer"])&&$t(Ue.type,qe.type)){for(rt in Bt(Ue.layout,qe.layout,G,Ae,null,"setLayoutProperty"),Bt(Ue.paint,qe.paint,G,Ae,null,"setPaintProperty"),$t(Ue.filter,qe.filter)||Qt(G,{command:"setFilter",args:[Ae,qe.filter]}),$t(Ue.minzoom,qe.minzoom)&&$t(Ue.maxzoom,qe.maxzoom)||Qt(G,{command:"setLayerZoomRange",args:[Ae,qe.minzoom,qe.maxzoom]}),Ue)Object.prototype.hasOwnProperty.call(Ue,rt)&&rt!=="layout"&&rt!=="paint"&&rt!=="filter"&&rt!=="metadata"&&rt!=="minzoom"&&rt!=="maxzoom"&&(rt.indexOf("paint.")===0?Bt(Ue[rt],qe[rt],G,Ae,rt.slice(6),"setPaintProperty"):$t(Ue[rt],qe[rt])||Qt(G,{command:"setLayerProperty",args:[Ae,rt,qe[rt]]}));for(rt in qe)Object.prototype.hasOwnProperty.call(qe,rt)&&!Object.prototype.hasOwnProperty.call(Ue,rt)&&rt!=="layout"&&rt!=="paint"&&rt!=="filter"&&rt!=="metadata"&&rt!=="minzoom"&&rt!=="maxzoom"&&(rt.indexOf("paint.")===0?Bt(Ue[rt],qe[rt],G,Ae,rt.slice(6),"setPaintProperty"):$t(Ue[rt],qe[rt])||Qt(G,{command:"setLayerProperty",args:[Ae,rt,qe[rt]]}))}else Qt(G,{command:"removeLayer",args:[Ae]}),bt=_e[_e.lastIndexOf(Ae)+1],Qt(G,{command:"addLayer",args:[qe,bt]})}(O,u.layers,m)}catch(_){console.warn("Unable to compute style diff:",_),m=[{command:"setStyle",args:[u]}]}return m},s.aD=function(f){const u=[],m=f.id;return m===void 0&&u.push({message:`layers.${m}: missing required property "id"`}),f.render===void 0&&u.push({message:`layers.${m}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&u.push({message:`layers.${m}: property "renderingMode" must be either "2d" or "3d"`}),u},s.aE=function f(u,m){if(Array.isArray(u)){if(!Array.isArray(m)||u.length!==m.length)return!1;for(let _=0;_<u.length;_++)if(!f(u[_],m[_]))return!1;return!0}if(typeof u=="object"&&u!==null&&m!==null){if(typeof m!="object"||Object.keys(u).length!==Object.keys(m).length)return!1;for(const _ in u)if(!f(u[_],m[_]))return!1;return!0}return u===m},s.aF=J,s.aG=H,s.aH=class extends Yu{constructor(f,u){super(f,u),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}},s.aI=gs,s.aJ=class extends Yu{constructor(f,u){super(f,u),this.current=C_}set(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let u=1;u<16;u++)if(f[u]!==this.current[u]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}},s.aK=Qd,s.aL=Dl,s.aM=bn,s.aN=class extends Yu{constructor(f,u){super(f,u),this.current=[0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))}},s.aO=class extends Yu{constructor(f,u){super(f,u),this.current=[0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))}},s.aP=function(f,u,m,_,R,O,N){var $=1/(u-m),G=1/(_-R),Z=1/(O-N);return f[0]=-2*$,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*G,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*Z,f[11]=0,f[12]=(u+m)*$,f[13]=(R+_)*G,f[14]=(N+O)*Z,f[15]=1,f},s.aQ=BL,s.aR=class extends _n{},s.aS=kfe,s.aT=class extends cn{},s.aU=function(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))},s.aV=Q,s.aW=cc,s.aX=Ka,s.aY=class extends yr{},s.aZ=function(f,u){return f[0]===u[0]&&f[1]===u[1]&&f[2]===u[2]&&f[3]===u[3]&&f[4]===u[4]&&f[5]===u[5]&&f[6]===u[6]&&f[7]===u[7]&&f[8]===u[8]&&f[9]===u[9]&&f[10]===u[10]&&f[11]===u[11]&&f[12]===u[12]&&f[13]===u[13]&&f[14]===u[14]&&f[15]===u[15]},s.a_=function(f,u){var m=f[0],_=f[1],R=f[2],O=f[3],N=f[4],$=f[5],G=f[6],Z=f[7],ne=f[8],oe=f[9],fe=f[10],_e=f[11],Ce=f[12],Ae=f[13],Ue=f[14],qe=f[15],bt=u[0],rt=u[1],gt=u[2],Ot=u[3],rn=u[4],wn=u[5],er=u[6],xn=u[7],gn=u[8],Bn=u[9],Ln=u[10],An=u[11],Ht=u[12],Hn=u[13],Fn=u[14],dr=u[15];return Math.abs(m-bt)<=os*Math.max(1,Math.abs(m),Math.abs(bt))&&Math.abs(_-rt)<=os*Math.max(1,Math.abs(_),Math.abs(rt))&&Math.abs(R-gt)<=os*Math.max(1,Math.abs(R),Math.abs(gt))&&Math.abs(O-Ot)<=os*Math.max(1,Math.abs(O),Math.abs(Ot))&&Math.abs(N-rn)<=os*Math.max(1,Math.abs(N),Math.abs(rn))&&Math.abs($-wn)<=os*Math.max(1,Math.abs($),Math.abs(wn))&&Math.abs(G-er)<=os*Math.max(1,Math.abs(G),Math.abs(er))&&Math.abs(Z-xn)<=os*Math.max(1,Math.abs(Z),Math.abs(xn))&&Math.abs(ne-gn)<=os*Math.max(1,Math.abs(ne),Math.abs(gn))&&Math.abs(oe-Bn)<=os*Math.max(1,Math.abs(oe),Math.abs(Bn))&&Math.abs(fe-Ln)<=os*Math.max(1,Math.abs(fe),Math.abs(Ln))&&Math.abs(_e-An)<=os*Math.max(1,Math.abs(_e),Math.abs(An))&&Math.abs(Ce-Ht)<=os*Math.max(1,Math.abs(Ce),Math.abs(Ht))&&Math.abs(Ae-Hn)<=os*Math.max(1,Math.abs(Ae),Math.abs(Hn))&&Math.abs(Ue-Fn)<=os*Math.max(1,Math.abs(Ue),Math.abs(Fn))&&Math.abs(qe-dr)<=os*Math.max(1,Math.abs(qe),Math.abs(dr))},s.aa=function(f){const u={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(m,_,R,O)=>{const N=R||O;return u[_]=!N||N.toLowerCase(),""}),u["max-age"]){const m=parseInt(u["max-age"],10);isNaN(m)?delete u["max-age"]:u["max-age"]=m}return u},s.ab=function(f,u){const m=[];for(const _ in f)_ in u||m.push(_);return m},s.ac=k,s.ad=function(f,u,m){var _=Math.sin(m),R=Math.cos(m),O=u[0],N=u[1],$=u[2],G=u[3],Z=u[4],ne=u[5],oe=u[6],fe=u[7];return u!==f&&(f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[0]=O*R+Z*_,f[1]=N*R+ne*_,f[2]=$*R+oe*_,f[3]=G*R+fe*_,f[4]=Z*R-O*_,f[5]=ne*R-N*_,f[6]=oe*R-$*_,f[7]=fe*R-G*_,f},s.ae=function(f){var u=new dc(16);return u[0]=f[0],u[1]=f[1],u[2]=f[2],u[3]=f[3],u[4]=f[4],u[5]=f[5],u[6]=f[6],u[7]=f[7],u[8]=f[8],u[9]=f[9],u[10]=f[10],u[11]=f[11],u[12]=f[12],u[13]=f[13],u[14]=f[14],u[15]=f[15],u},s.af=xv,s.ag=function(f,u){let m=0,_=0;if(f.kind==="constant")_=f.layoutSize;else if(f.kind!=="source"){const{interpolationType:R,minZoom:O,maxZoom:N}=f,$=R?k(Ps.interpolationFactor(R,u,O,N),0,1):0;f.kind==="camera"?_=Ws.number(f.minSize,f.maxSize,$):m=$}return{uSizeT:m,uSize:_}},s.ai=function(f,{uSize:u,uSizeT:m},{lowerSize:_,upperSize:R}){return f.kind==="source"?_/mf:f.kind==="composite"?Ws.number(_/mf,R/mf,m):u},s.aj=t3,s.ak=function(f,u,m,_){const R=u.y-f.y,O=u.x-f.x,N=_.y-m.y,$=_.x-m.x,G=N*O-$*R;if(G===0)return null;const Z=($*(f.y-m.y)-N*(f.x-m.x))/G;return new p(f.x+Z*O,f.y+Z*R)},s.al=cH,s.am=Cw,s.an=yg,s.ao=function(f){let u=1/0,m=1/0,_=-1/0,R=-1/0;for(const O of f)u=Math.min(u,O.x),m=Math.min(m,O.y),_=Math.max(_,O.x),R=Math.max(R,O.y);return[u,m,_,R]},s.ap=ss,s.ar=e3,s.as=function(f,u){var m=u[0],_=u[1],R=u[2],O=u[3],N=u[4],$=u[5],G=u[6],Z=u[7],ne=u[8],oe=u[9],fe=u[10],_e=u[11],Ce=u[12],Ae=u[13],Ue=u[14],qe=u[15],bt=m*$-_*N,rt=m*G-R*N,gt=m*Z-O*N,Ot=_*G-R*$,rn=_*Z-O*$,wn=R*Z-O*G,er=ne*Ae-oe*Ce,xn=ne*Ue-fe*Ce,gn=ne*qe-_e*Ce,Bn=oe*Ue-fe*Ae,Ln=oe*qe-_e*Ae,An=fe*qe-_e*Ue,Ht=bt*An-rt*Ln+gt*Bn+Ot*gn-rn*xn+wn*er;return Ht?(f[0]=($*An-G*Ln+Z*Bn)*(Ht=1/Ht),f[1]=(R*Ln-_*An-O*Bn)*Ht,f[2]=(Ae*wn-Ue*rn+qe*Ot)*Ht,f[3]=(fe*rn-oe*wn-_e*Ot)*Ht,f[4]=(G*gn-N*An-Z*xn)*Ht,f[5]=(m*An-R*gn+O*xn)*Ht,f[6]=(Ue*gt-Ce*wn-qe*rt)*Ht,f[7]=(ne*wn-fe*gt+_e*rt)*Ht,f[8]=(N*Ln-$*gn+Z*er)*Ht,f[9]=(_*gn-m*Ln-O*er)*Ht,f[10]=(Ce*rn-Ae*gt+qe*bt)*Ht,f[11]=(oe*gt-ne*rn-_e*bt)*Ht,f[12]=($*xn-N*Bn-G*er)*Ht,f[13]=(m*Bn-_*xn+R*er)*Ht,f[14]=(Ae*rt-Ce*Ot-Ue*bt)*Ht,f[15]=(ne*Ot-oe*rt+fe*bt)*Ht,f):null},s.at=c3,s.au=QL,s.av=u3,s.aw=function(){const f={},u=ke.$version;for(const m in ke.$root){const _=ke.$root[m];if(_.required){let R=null;R=m==="version"?u:_.type==="array"?[]:{},R!=null&&(f[m]=R)}}return f},s.ax=kl,s.ay=Lt,s.az=function(f){f=f.slice();const u=Object.create(null);for(let m=0;m<f.length;m++)u[f[m].id]=f[m];for(let m=0;m<f.length;m++)"ref"in f[m]&&(f[m]=zt(f[m],u[f[m].ref]));return f},s.b=we,s.b0=function(f,u,m){return f[0]=u[0]*m[0],f[1]=u[1]*m[1],f[2]=u[2]*m[2],f[3]=u[3]*m[3],f},s.b1=function(f,u){return f[0]*u[0]+f[1]*u[1]+f[2]*u[2]+f[3]*u[3]},s.b2=F,s.b3=nH,s.b4=eH,s.b5=function(f,u,m,_,R){var O,N=1/Math.tan(u/2);return f[0]=N/m,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=N,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,R!=null&&R!==1/0?(f[10]=(R+_)*(O=1/(_-R)),f[14]=2*R*_*O):(f[10]=-1,f[14]=-2*_),f},s.b6=function(f,u,m){var _=Math.sin(m),R=Math.cos(m),O=u[4],N=u[5],$=u[6],G=u[7],Z=u[8],ne=u[9],oe=u[10],fe=u[11];return u!==f&&(f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]),f[4]=O*R+Z*_,f[5]=N*R+ne*_,f[6]=$*R+oe*_,f[7]=G*R+fe*_,f[8]=Z*R-O*_,f[9]=ne*R-N*_,f[10]=oe*R-$*_,f[11]=fe*R-G*_,f},s.b7=A,s.b8=P,s.b9=function(f){return f*Math.PI/180},s.bA=function(f){return f.message===je},s.bB=$u,s.bC=Ol,s.ba=function(f,u){const{x:m,y:_}=$w.fromLngLat(u);return!(f<0||f>25||_<0||_>=1||m<0||m>=1)},s.bb=function(f,u){return f[0]=u[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=u[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=u[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},s.bc=class extends $e{},s.bd=o3,s.be=ppe,s.bg=It,s.bh=function(f,u){Be.REGISTERED_PROTOCOLS[f]=u},s.bi=function(f){delete Be.REGISTERED_PROTOCOLS[f]},s.bj=function(f,u){const m={};for(let R=0;R<f.length;R++){const O=u&&u[f[R].id]||Km(f[R]);u&&(u[f[R].id]=O);let N=m[O];N||(N=m[O]=[]),N.push(f[R])}const _=[];for(const R in m)_.push(m[R]);return _},s.bk=Mn,s.bl=iH,s.bm=sH,s.bn=zV,s.bo=function(f){f.bucket.createArrays(),f.bucket.tilePixelRatio=ho/(512*f.bucket.overscaling),f.bucket.compareText={},f.bucket.iconsNeedLinear=!1;const u=f.bucket.layers[0],m=u.layout,_=u._unevaluatedLayout._values,R={layoutIconSize:_["icon-size"].possiblyEvaluate(new ai(f.bucket.zoom+1),f.canonical),layoutTextSize:_["text-size"].possiblyEvaluate(new ai(f.bucket.zoom+1),f.canonical),textMaxSize:_["text-size"].possiblyEvaluate(new ai(18))};if(f.bucket.textSizeData.kind==="composite"){const{minZoom:Z,maxZoom:ne}=f.bucket.textSizeData;R.compositeTextSizes=[_["text-size"].possiblyEvaluate(new ai(Z),f.canonical),_["text-size"].possiblyEvaluate(new ai(ne),f.canonical)]}if(f.bucket.iconSizeData.kind==="composite"){const{minZoom:Z,maxZoom:ne}=f.bucket.iconSizeData;R.compositeIconSizes=[_["icon-size"].possiblyEvaluate(new ai(Z),f.canonical),_["icon-size"].possiblyEvaluate(new ai(ne),f.canonical)]}const O=m.get("text-line-height")*ss,N=m.get("text-rotation-alignment")!=="viewport"&&m.get("symbol-placement")!=="point",$=m.get("text-keep-upright"),G=m.get("text-size");for(const Z of f.bucket.features){const ne=m.get("text-font").evaluate(Z,{},f.canonical).join(","),oe=G.evaluate(Z,{},f.canonical),fe=R.layoutTextSize.evaluate(Z,{},f.canonical),_e=R.layoutIconSize.evaluate(Z,{},f.canonical),Ce={horizontal:{},vertical:void 0},Ae=Z.text;let Ue,qe=[0,0];if(Ae){const gt=Ae.toString(),Ot=m.get("text-letter-spacing").evaluate(Z,{},f.canonical)*ss,rn=ag(gt)?Ot:0,wn=m.get("text-anchor").evaluate(Z,{},f.canonical),er=vH(u,Z,f.canonical);if(!er){const Ln=m.get("text-radial-offset").evaluate(Z,{},f.canonical);qe=Ln?yH(wn,[Ln*ss,l3]):m.get("text-offset").evaluate(Z,{},f.canonical).map(An=>An*ss)}let xn=N?"center":m.get("text-justify").evaluate(Z,{},f.canonical);const gn=m.get("symbol-placement")==="point"?m.get("text-max-width").evaluate(Z,{},f.canonical)*ss:1/0,Bn=()=>{f.bucket.allowVerticalPlacement&&sf(gt)&&(Ce.vertical=IT(Ae,f.glyphMap,f.glyphPositions,f.imagePositions,ne,gn,O,wn,"left",rn,qe,s.ah.vertical,!0,fe,oe))};if(!N&&er){const Ln=new Set;if(xn==="auto")for(let Ht=0;Ht<er.values.length;Ht+=2)Ln.add(c3(er.values[Ht]));else Ln.add(xn);let An=!1;for(const Ht of Ln)if(!Ce.horizontal[Ht])if(An)Ce.horizontal[Ht]=Ce.horizontal[0];else{const Hn=IT(Ae,f.glyphMap,f.glyphPositions,f.imagePositions,ne,gn,O,"center",Ht,rn,qe,s.ah.horizontal,!1,fe,oe);Hn&&(Ce.horizontal[Ht]=Hn,An=Hn.positionedLines.length===1)}Bn()}else{xn==="auto"&&(xn=c3(wn));const Ln=IT(Ae,f.glyphMap,f.glyphPositions,f.imagePositions,ne,gn,O,wn,xn,rn,qe,s.ah.horizontal,!1,fe,oe);Ln&&(Ce.horizontal[xn]=Ln),Bn(),sf(gt)&&N&&$&&(Ce.vertical=IT(Ae,f.glyphMap,f.glyphPositions,f.imagePositions,ne,gn,O,wn,xn,rn,qe,s.ah.vertical,!1,fe,oe))}}let bt=!1;if(Z.icon&&Z.icon.name){const gt=f.imageMap[Z.icon.name];gt&&(Ue=Kfe(f.imagePositions[Z.icon.name],m.get("icon-offset").evaluate(Z,{},f.canonical),m.get("icon-anchor").evaluate(Z,{},f.canonical)),bt=!!gt.sdf,f.bucket.sdfIcons===void 0?f.bucket.sdfIcons=bt:f.bucket.sdfIcons!==bt&&pe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(gt.pixelRatio!==f.bucket.pixelRatio||m.get("icon-rotate").constantOr(1)!==0)&&(f.bucket.iconsNeedLinear=!0))}const rt=xH(Ce.horizontal)||Ce.vertical;f.bucket.iconsInText=!!rt&&rt.iconsInText,(rt||Ue)&&hpe(f.bucket,Z,Ce,Ue,f.imageMap,R,fe,_e,qe,bt,f.canonical)}f.showCollisionBoxes&&f.bucket.generateCollisionDebugBuffers()},s.bp=qL,s.bq=HL,s.br=GL,s.bs=vg,s.bt=YL,s.bu=class{constructor(f){this._marks={start:[f.url,"start"].join("#"),end:[f.url,"end"].join("#"),measure:f.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let f=performance.getEntriesByName(this._marks.measure);return f.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),f=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),f}},s.bv=function(f,u,m,_,R){return a(this,void 0,void 0,function*(){if(C())try{return yield ye(f,u,m,_,R)}catch{}return function(O,N,$,G,Z){const ne=O.width,oe=O.height;be&&Le||(be=new OffscreenCanvas(ne,oe),Le=be.getContext("2d",{willReadFrequently:!0})),be.width=ne,be.height=oe,Le.drawImage(O,0,0,ne,oe);const fe=Le.getImageData(N,$,G,Z);return Le.clearRect(0,0,ne,oe),fe.data}(f,u,m,_,R)})},s.bw=rH,s.bx=l,s.by=d,s.bz=AV,s.c=dt,s.d=f=>a(void 0,void 0,void 0,function*(){if(f.byteLength===0)return createImageBitmap(new ImageData(1,1));const u=new Blob([new Uint8Array(f)],{type:"image/png"});try{return createImageBitmap(u)}catch(m){throw new Error(`Could not load image because of ${m.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),s.e=B,s.f=f=>new Promise((u,m)=>{const _=new Image;_.onload=()=>{u(_),URL.revokeObjectURL(_.src),_.onload=null,window.requestAnimationFrame(()=>{_.src=ee})},_.onerror=()=>m(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const R=new Blob([new Uint8Array(f)],{type:"image/png"});_.src=f.byteLength?URL.createObjectURL(R):ee}),s.g=ot,s.h=(f,u)=>lt(B(f,{type:"json"}),u),s.i=me,s.j=Ke,s.k=et,s.l=(f,u)=>lt(B(f,{type:"arrayBuffer"}),u),s.m=lt,s.n=function(f){return new YL(f).readFields(Vfe,[])},s.o=j,s.p=NV,s.q=U,s.r=ig,s.s=Je,s.t=og,s.u=lc,s.v=ke,s.w=pe,s.x=function([f,u,m]){return u+=90,u*=Math.PI/180,m*=Math.PI/180,{x:f*Math.cos(u)*Math.sin(m),y:f*Math.sin(u)*Math.sin(m),z:f*Math.cos(m)}},s.y=Ws,s.z=ai}),i("worker",["./shared"],function(s){class a{constructor(ie){this.keyCache={},ie&&this.replace(ie)}replace(ie){this._layerConfigs={},this._layers={},this.update(ie,[])}update(ie,se){for(const De of ie){this._layerConfigs[De.id]=De;const We=this._layers[De.id]=s.aA(De);We._featureFilter=s.a7(We.filter),this.keyCache[De.id]&&delete this.keyCache[De.id]}for(const De of se)delete this.keyCache[De],delete this._layerConfigs[De],delete this._layers[De];this.familiesBySource={};const Se=s.bj(Object.values(this._layerConfigs),this.keyCache);for(const De of Se){const We=De.map(Ct=>this._layers[Ct.id]),Ze=We[0];if(Ze.visibility==="none")continue;const tt=Ze.source||"";let Ve=this.familiesBySource[tt];Ve||(Ve=this.familiesBySource[tt]={});const At=Ze.sourceLayer||"_geojsonTileLayer";let Dt=Ve[At];Dt||(Dt=Ve[At]=[]),Dt.push(We)}}}class l{constructor(ie){const se={},Se=[];for(const tt in ie){const Ve=ie[tt],At=se[tt]={};for(const Dt in Ve){const Ct=Ve[+Dt];if(!Ct||Ct.bitmap.width===0||Ct.bitmap.height===0)continue;const ln={x:0,y:0,w:Ct.bitmap.width+2,h:Ct.bitmap.height+2};Se.push(ln),At[Dt]={rect:ln,metrics:Ct.metrics}}}const{w:De,h:We}=s.p(Se),Ze=new s.o({width:De||1,height:We||1});for(const tt in ie){const Ve=ie[tt];for(const At in Ve){const Dt=Ve[+At];if(!Dt||Dt.bitmap.width===0||Dt.bitmap.height===0)continue;const Ct=se[tt][At].rect;s.o.copy(Dt.bitmap,Ze,{x:0,y:0},{x:Ct.x+1,y:Ct.y+1},Dt.bitmap)}}this.image=Ze,this.positions=se}}s.bk("GlyphAtlas",l);class d{constructor(ie){this.tileID=new s.S(ie.tileID.overscaledZ,ie.tileID.wrap,ie.tileID.canonical.z,ie.tileID.canonical.x,ie.tileID.canonical.y),this.uid=ie.uid,this.zoom=ie.zoom,this.pixelRatio=ie.pixelRatio,this.tileSize=ie.tileSize,this.source=ie.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ie.showCollisionBoxes,this.collectResourceTiming=!!ie.collectResourceTiming,this.returnDependencies=!!ie.returnDependencies,this.promoteId=ie.promoteId,this.inFlightDependencies=[]}parse(ie,se,Se,De){return s._(this,void 0,void 0,function*(){this.status="parsing",this.data=ie,this.collisionBoxArray=new s.a5;const We=new s.bl(Object.keys(ie.layers).sort()),Ze=new s.bm(this.tileID,this.promoteId);Ze.bucketLayerIDs=[];const tt={},Ve={featureIndex:Ze,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Se},At=se.familiesBySource[this.source];for(const st in At){const Mt=ie.layers[st];if(!Mt)continue;Mt.version===1&&s.w(`Vector tile source "${this.source}" layer "${st}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ut=We.encode(st),vt=[];for(let mn=0;mn<Mt.length;mn++){const kn=Mt.feature(mn),tr=Ze.getId(kn,st);vt.push({feature:kn,id:tr,index:mn,sourceLayerIndex:ut})}for(const mn of At[st]){const kn=mn[0];kn.source!==this.source&&s.w(`layer.source = ${kn.source} does not equal this.source = ${this.source}`),kn.minzoom&&this.zoom<Math.floor(kn.minzoom)||kn.maxzoom&&this.zoom>=kn.maxzoom||kn.visibility!=="none"&&(h(mn,this.zoom,Se),(tt[kn.id]=kn.createBucket({index:Ze.bucketLayerIDs.length,layers:mn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ut,sourceID:this.source})).populate(vt,Ve,this.tileID.canonical),Ze.bucketLayerIDs.push(mn.map(tr=>tr.id)))}}const Dt=s.aF(Ve.glyphDependencies,st=>Object.keys(st).map(Number));this.inFlightDependencies.forEach(st=>st==null?void 0:st.abort()),this.inFlightDependencies=[];let Ct=Promise.resolve({});if(Object.keys(Dt).length){const st=new AbortController;this.inFlightDependencies.push(st),Ct=De.sendAsync({type:"GG",data:{stacks:Dt,source:this.source,tileID:this.tileID,type:"glyphs"}},st)}const ln=Object.keys(Ve.iconDependencies);let Sn=Promise.resolve({});if(ln.length){const st=new AbortController;this.inFlightDependencies.push(st),Sn=De.sendAsync({type:"GI",data:{icons:ln,source:this.source,tileID:this.tileID,type:"icons"}},st)}const zn=Object.keys(Ve.patternDependencies);let rr=Promise.resolve({});if(zn.length){const st=new AbortController;this.inFlightDependencies.push(st),rr=De.sendAsync({type:"GI",data:{icons:zn,source:this.source,tileID:this.tileID,type:"patterns"}},st)}const[Cr,ir,Yr]=yield Promise.all([Ct,Sn,rr]),Ti=new l(Cr),Re=new s.bn(ir,Yr);for(const st in tt){const Mt=tt[st];Mt instanceof s.a6?(h(Mt.layers,this.zoom,Se),s.bo({bucket:Mt,glyphMap:Cr,glyphPositions:Ti.positions,imageMap:ir,imagePositions:Re.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Mt.hasPattern&&(Mt instanceof s.bp||Mt instanceof s.bq||Mt instanceof s.br)&&(h(Mt.layers,this.zoom,Se),Mt.addFeatures(Ve,this.tileID.canonical,Re.patternPositions))}return this.status="done",{buckets:Object.values(tt).filter(st=>!st.isEmpty()),featureIndex:Ze,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ti.image,imageAtlas:Re,glyphMap:this.returnDependencies?Cr:null,iconMap:this.returnDependencies?ir:null,glyphPositions:this.returnDependencies?Ti.positions:null}})}}function h(ve,ie,se){const Se=new s.z(ie);for(const De of ve)De.recalculate(Se,se)}class p{constructor(ie,se,Se){this.actor=ie,this.layerIndex=se,this.availableImages=Se,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ie,se){return s._(this,void 0,void 0,function*(){const Se=yield s.l(ie.request,se);try{return{vectorTile:new s.bs.VectorTile(new s.bt(Se.data)),rawData:Se.data,cacheControl:Se.cacheControl,expires:Se.expires}}catch(De){const We=new Uint8Array(Se.data);let Ze=`Unable to parse the tile at ${ie.request.url}, `;throw Ze+=We[0]===31&&We[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${De.message}`,new Error(Ze)}})}loadTile(ie){return s._(this,void 0,void 0,function*(){const se=ie.uid,Se=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new s.bu(ie.request),De=new d(ie);this.loading[se]=De;const We=new AbortController;De.abort=We;try{const Ze=yield this.loadVectorTile(ie,We);if(delete this.loading[se],!Ze)return null;const tt=Ze.rawData,Ve={};Ze.expires&&(Ve.expires=Ze.expires),Ze.cacheControl&&(Ve.cacheControl=Ze.cacheControl);const At={};if(Se){const Ct=Se.finish();Ct&&(At.resourceTiming=JSON.parse(JSON.stringify(Ct)))}De.vectorTile=Ze.vectorTile;const Dt=De.parse(Ze.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[se]=De,this.fetching[se]={rawTileData:tt,cacheControl:Ve,resourceTiming:At};try{const Ct=yield Dt;return s.e({rawTileData:tt.slice(0)},Ct,Ve,At)}finally{delete this.fetching[se]}}catch(Ze){throw delete this.loading[se],De.status="done",this.loaded[se]=De,Ze}})}reloadTile(ie){return s._(this,void 0,void 0,function*(){const se=ie.uid;if(!this.loaded||!this.loaded[se])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Se=this.loaded[se];if(Se.showCollisionBoxes=ie.showCollisionBoxes,Se.status==="parsing"){const De=yield Se.parse(Se.vectorTile,this.layerIndex,this.availableImages,this.actor);let We;if(this.fetching[se]){const{rawTileData:Ze,cacheControl:tt,resourceTiming:Ve}=this.fetching[se];delete this.fetching[se],We=s.e({rawTileData:Ze.slice(0)},De,tt,Ve)}else We=De;return We}if(Se.status==="done"&&Se.vectorTile)return Se.parse(Se.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(ie){return s._(this,void 0,void 0,function*(){const se=this.loading,Se=ie.uid;se&&se[Se]&&se[Se].abort&&(se[Se].abort.abort(),delete se[Se])})}removeTile(ie){return s._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ie.uid]&&delete this.loaded[ie.uid]})}}class g{constructor(){this.loaded={}}loadTile(ie){return s._(this,void 0,void 0,function*(){const{uid:se,encoding:Se,rawImageData:De,redFactor:We,greenFactor:Ze,blueFactor:tt,baseShift:Ve}=ie,At=De.width+2,Dt=De.height+2,Ct=s.b(De)?new s.R({width:At,height:Dt},yield s.bv(De,-1,-1,At,Dt)):De,ln=new s.bw(se,Ct,Se,We,Ze,tt,Ve);return this.loaded=this.loaded||{},this.loaded[se]=ln,ln})}removeTile(ie){const se=this.loaded,Se=ie.uid;se&&se[Se]&&delete se[Se]}}function v(ve,ie){if(ve.length!==0){x(ve[0],ie);for(var se=1;se<ve.length;se++)x(ve[se],!ie)}}function x(ve,ie){for(var se=0,Se=0,De=0,We=ve.length,Ze=We-1;De<We;Ze=De++){var tt=(ve[De][0]-ve[Ze][0])*(ve[Ze][1]+ve[De][1]),Ve=se+tt;Se+=Math.abs(se)>=Math.abs(tt)?se-Ve+tt:tt-Ve+se,se=Ve}se+Se>=0!=!!ie&&ve.reverse()}var b=s.bx(function ve(ie,se){var Se,De=ie&&ie.type;if(De==="FeatureCollection")for(Se=0;Se<ie.features.length;Se++)ve(ie.features[Se],se);else if(De==="GeometryCollection")for(Se=0;Se<ie.geometries.length;Se++)ve(ie.geometries[Se],se);else if(De==="Feature")ve(ie.geometry,se);else if(De==="Polygon")v(ie.coordinates,se);else if(De==="MultiPolygon")for(Se=0;Se<ie.coordinates.length;Se++)v(ie.coordinates[Se],se);return ie});const w=s.bs.VectorTileFeature.prototype.toGeoJSON;var S={exports:{}},C=s.by,A=s.bs.VectorTileFeature,P=k;function k(ve,ie){this.options=ie||{},this.features=ve,this.length=ve.length}function F(ve,ie){this.id=typeof ve.id=="number"?ve.id:void 0,this.type=ve.type,this.rawGeometry=ve.type===1?[ve.geometry]:ve.geometry,this.properties=ve.tags,this.extent=ie||4096}k.prototype.feature=function(ve){return new F(this.features[ve],this.options.extent)},F.prototype.loadGeometry=function(){var ve=this.rawGeometry;this.geometry=[];for(var ie=0;ie<ve.length;ie++){for(var se=ve[ie],Se=[],De=0;De<se.length;De++)Se.push(new C(se[De][0],se[De][1]));this.geometry.push(Se)}return this.geometry},F.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ve=this.geometry,ie=1/0,se=-1/0,Se=1/0,De=-1/0,We=0;We<ve.length;We++)for(var Ze=ve[We],tt=0;tt<Ze.length;tt++){var Ve=Ze[tt];ie=Math.min(ie,Ve.x),se=Math.max(se,Ve.x),Se=Math.min(Se,Ve.y),De=Math.max(De,Ve.y)}return[ie,Se,se,De]},F.prototype.toGeoJSON=A.prototype.toGeoJSON;var B=s.bz,W=P;function J(ve){var ie=new B;return function(se,Se){for(var De in se.layers)Se.writeMessage(3,H,se.layers[De])}(ve,ie),ie.finish()}function H(ve,ie){var se;ie.writeVarintField(15,ve.version||1),ie.writeStringField(1,ve.name||""),ie.writeVarintField(5,ve.extent||4096);var Se={keys:[],values:[],keycache:{},valuecache:{}};for(se=0;se<ve.length;se++)Se.feature=ve.feature(se),ie.writeMessage(2,Y,Se);var De=Se.keys;for(se=0;se<De.length;se++)ie.writeStringField(3,De[se]);var We=Se.values;for(se=0;se<We.length;se++)ie.writeMessage(4,he,We[se])}function Y(ve,ie){var se=ve.feature;se.id!==void 0&&ie.writeVarintField(1,se.id),ie.writeMessage(2,le,ve),ie.writeVarintField(3,se.type),ie.writeMessage(4,me,se)}function le(ve,ie){var se=ve.feature,Se=ve.keys,De=ve.values,We=ve.keycache,Ze=ve.valuecache;for(var tt in se.properties){var Ve=se.properties[tt],At=We[tt];if(Ve!==null){At===void 0&&(Se.push(tt),We[tt]=At=Se.length-1),ie.writeVarint(At);var Dt=typeof Ve;Dt!=="string"&&Dt!=="boolean"&&Dt!=="number"&&(Ve=JSON.stringify(Ve));var Ct=Dt+":"+Ve,ln=Ze[Ct];ln===void 0&&(De.push(Ve),Ze[Ct]=ln=De.length-1),ie.writeVarint(ln)}}}function pe(ve,ie){return(ie<<3)+(7&ve)}function re(ve){return ve<<1^ve>>31}function me(ve,ie){for(var se=ve.loadGeometry(),Se=ve.type,De=0,We=0,Ze=se.length,tt=0;tt<Ze;tt++){var Ve=se[tt],At=1;Se===1&&(At=Ve.length),ie.writeVarint(pe(1,At));for(var Dt=Se===3?Ve.length-1:Ve.length,Ct=0;Ct<Dt;Ct++){Ct===1&&Se!==1&&ie.writeVarint(pe(2,Dt-1));var ln=Ve[Ct].x-De,Sn=Ve[Ct].y-We;ie.writeVarint(re(ln)),ie.writeVarint(re(Sn)),De+=ln,We+=Sn}Se===3&&ie.writeVarint(pe(7,1))}}function he(ve,ie){var se=typeof ve;se==="string"?ie.writeStringField(1,ve):se==="boolean"?ie.writeBooleanField(7,ve):se==="number"&&(ve%1!=0?ie.writeDoubleField(3,ve):ve<0?ie.writeSVarintField(6,ve):ie.writeVarintField(5,ve))}S.exports=J,S.exports.fromVectorTileJs=J,S.exports.fromGeojsonVt=function(ve,ie){ie=ie||{};var se={};for(var Se in ve)se[Se]=new W(ve[Se].features,ie),se[Se].name=Se,se[Se].version=ie.version,se[Se].extent=ie.extent;return J({layers:se})},S.exports.GeoJSONWrapper=W;var we=s.bx(S.exports);const ee={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ve=>ve},ye=Math.fround||(be=new Float32Array(1),ve=>(be[0]=+ve,be[0]));var be;const Le=3,je=5,dt=6;class Be{constructor(ie){this.options=Object.assign(Object.create(ee),ie),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ie){const{log:se,minZoom:Se,maxZoom:De}=this.options;se&&console.time("total time");const We=`prepare ${ie.length} points`;se&&console.time(We),this.points=ie;const Ze=[];for(let Ve=0;Ve<ie.length;Ve++){const At=ie[Ve];if(!At.geometry)continue;const[Dt,Ct]=At.geometry.coordinates,ln=ye(It(Dt)),Sn=ye(Lt(Ct));Ze.push(ln,Sn,1/0,Ve,-1,1),this.options.reduce&&Ze.push(0)}let tt=this.trees[De+1]=this._createTree(Ze);se&&console.timeEnd(We);for(let Ve=De;Ve>=Se;Ve--){const At=+Date.now();tt=this.trees[Ve]=this._createTree(this._cluster(tt,Ve)),se&&console.log("z%d: %d clusters in %dms",Ve,tt.numItems,+Date.now()-At)}return se&&console.timeEnd("total time"),this}getClusters(ie,se){let Se=((ie[0]+180)%360+360)%360-180;const De=Math.max(-90,Math.min(90,ie[1]));let We=ie[2]===180?180:((ie[2]+180)%360+360)%360-180;const Ze=Math.max(-90,Math.min(90,ie[3]));if(ie[2]-ie[0]>=360)Se=-180,We=180;else if(Se>We){const Ct=this.getClusters([Se,De,180,Ze],se),ln=this.getClusters([-180,De,We,Ze],se);return Ct.concat(ln)}const tt=this.trees[this._limitZoom(se)],Ve=tt.range(It(Se),Lt(Ze),It(We),Lt(De)),At=tt.data,Dt=[];for(const Ct of Ve){const ln=this.stride*Ct;Dt.push(At[ln+je]>1?ot(At,ln,this.clusterProps):this.points[At[ln+Le]])}return Dt}getChildren(ie){const se=this._getOriginId(ie),Se=this._getOriginZoom(ie),De="No cluster with the specified id.",We=this.trees[Se];if(!We)throw new Error(De);const Ze=We.data;if(se*this.stride>=Ze.length)throw new Error(De);const tt=this.options.radius/(this.options.extent*Math.pow(2,Se-1)),Ve=We.within(Ze[se*this.stride],Ze[se*this.stride+1],tt),At=[];for(const Dt of Ve){const Ct=Dt*this.stride;Ze[Ct+4]===ie&&At.push(Ze[Ct+je]>1?ot(Ze,Ct,this.clusterProps):this.points[Ze[Ct+Le]])}if(At.length===0)throw new Error(De);return At}getLeaves(ie,se,Se){const De=[];return this._appendLeaves(De,ie,se=se||10,Se=Se||0,0),De}getTile(ie,se,Se){const De=this.trees[this._limitZoom(ie)],We=Math.pow(2,ie),{extent:Ze,radius:tt}=this.options,Ve=tt/Ze,At=(Se-Ve)/We,Dt=(Se+1+Ve)/We,Ct={features:[]};return this._addTileFeatures(De.range((se-Ve)/We,At,(se+1+Ve)/We,Dt),De.data,se,Se,We,Ct),se===0&&this._addTileFeatures(De.range(1-Ve/We,At,1,Dt),De.data,We,Se,We,Ct),se===We-1&&this._addTileFeatures(De.range(0,At,Ve/We,Dt),De.data,-1,Se,We,Ct),Ct.features.length?Ct:null}getClusterExpansionZoom(ie){let se=this._getOriginZoom(ie)-1;for(;se<=this.options.maxZoom;){const Se=this.getChildren(ie);if(se++,Se.length!==1)break;ie=Se[0].properties.cluster_id}return se}_appendLeaves(ie,se,Se,De,We){const Ze=this.getChildren(se);for(const tt of Ze){const Ve=tt.properties;if(Ve&&Ve.cluster?We+Ve.point_count<=De?We+=Ve.point_count:We=this._appendLeaves(ie,Ve.cluster_id,Se,De,We):We<De?We++:ie.push(tt),ie.length===Se)break}return We}_createTree(ie){const se=new s.av(ie.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Se=0;Se<ie.length;Se+=this.stride)se.add(ie[Se],ie[Se+1]);return se.finish(),se.data=ie,se}_addTileFeatures(ie,se,Se,De,We,Ze){for(const tt of ie){const Ve=tt*this.stride,At=se[Ve+je]>1;let Dt,Ct,ln;if(At)Dt=at(se,Ve,this.clusterProps),Ct=se[Ve],ln=se[Ve+1];else{const rr=this.points[se[Ve+Le]];Dt=rr.properties;const[Cr,ir]=rr.geometry.coordinates;Ct=It(Cr),ln=Lt(ir)}const Sn={type:1,geometry:[[Math.round(this.options.extent*(Ct*We-Se)),Math.round(this.options.extent*(ln*We-De))]],tags:Dt};let zn;zn=At||this.options.generateId?se[Ve+Le]:this.points[se[Ve+Le]].id,zn!==void 0&&(Sn.id=zn),Ze.features.push(Sn)}}_limitZoom(ie){return Math.max(this.options.minZoom,Math.min(Math.floor(+ie),this.options.maxZoom+1))}_cluster(ie,se){const{radius:Se,extent:De,reduce:We,minPoints:Ze}=this.options,tt=Se/(De*Math.pow(2,se)),Ve=ie.data,At=[],Dt=this.stride;for(let Ct=0;Ct<Ve.length;Ct+=Dt){if(Ve[Ct+2]<=se)continue;Ve[Ct+2]=se;const ln=Ve[Ct],Sn=Ve[Ct+1],zn=ie.within(Ve[Ct],Ve[Ct+1],tt),rr=Ve[Ct+je];let Cr=rr;for(const ir of zn){const Yr=ir*Dt;Ve[Yr+2]>se&&(Cr+=Ve[Yr+je])}if(Cr>rr&&Cr>=Ze){let ir,Yr=ln*rr,Ti=Sn*rr,Re=-1;const st=((Ct/Dt|0)<<5)+(se+1)+this.points.length;for(const Mt of zn){const ut=Mt*Dt;if(Ve[ut+2]<=se)continue;Ve[ut+2]=se;const vt=Ve[ut+je];Yr+=Ve[ut]*vt,Ti+=Ve[ut+1]*vt,Ve[ut+4]=st,We&&(ir||(ir=this._map(Ve,Ct,!0),Re=this.clusterProps.length,this.clusterProps.push(ir)),We(ir,this._map(Ve,ut)))}Ve[Ct+4]=st,At.push(Yr/Cr,Ti/Cr,1/0,st,-1,Cr),We&&At.push(Re)}else{for(let ir=0;ir<Dt;ir++)At.push(Ve[Ct+ir]);if(Cr>1)for(const ir of zn){const Yr=ir*Dt;if(!(Ve[Yr+2]<=se)){Ve[Yr+2]=se;for(let Ti=0;Ti<Dt;Ti++)At.push(Ve[Yr+Ti])}}}}return At}_getOriginId(ie){return ie-this.points.length>>5}_getOriginZoom(ie){return(ie-this.points.length)%32}_map(ie,se,Se){if(ie[se+je]>1){const Ze=this.clusterProps[ie[se+dt]];return Se?Object.assign({},Ze):Ze}const De=this.points[ie[se+Le]].properties,We=this.options.map(De);return Se&&We===De?Object.assign({},We):We}}function ot(ve,ie,se){return{type:"Feature",id:ve[ie+Le],properties:at(ve,ie,se),geometry:{type:"Point",coordinates:[(Se=ve[ie],360*(Se-.5)),lt(ve[ie+1])]}};var Se}function at(ve,ie,se){const Se=ve[ie+je],De=Se>=1e4?`${Math.round(Se/1e3)}k`:Se>=1e3?Math.round(Se/100)/10+"k":Se,We=ve[ie+dt],Ze=We===-1?{}:Object.assign({},se[We]);return Object.assign(Ze,{cluster:!0,cluster_id:ve[ie+Le],point_count:Se,point_count_abbreviated:De})}function It(ve){return ve/360+.5}function Lt(ve){const ie=Math.sin(ve*Math.PI/180),se=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return se<0?0:se>1?1:se}function lt(ve){const ie=(180-360*ve)*Math.PI/180;return 360*Math.atan(Math.exp(ie))/Math.PI-90}function Je(ve,ie,se,Se){let De=Se;const We=ie+(se-ie>>1);let Ze,tt=se-ie;const Ve=ve[ie],At=ve[ie+1],Dt=ve[se],Ct=ve[se+1];for(let ln=ie+3;ln<se;ln+=3){const Sn=Qe(ve[ln],ve[ln+1],Ve,At,Dt,Ct);if(Sn>De)Ze=ln,De=Sn;else if(Sn===De){const zn=Math.abs(ln-We);zn<tt&&(Ze=ln,tt=zn)}}De>Se&&(Ze-ie>3&&Je(ve,ie,Ze,Se),ve[Ze+2]=De,se-Ze>3&&Je(ve,Ze,se,Se))}function Qe(ve,ie,se,Se,De,We){let Ze=De-se,tt=We-Se;if(Ze!==0||tt!==0){const Ve=((ve-se)*Ze+(ie-Se)*tt)/(Ze*Ze+tt*tt);Ve>1?(se=De,Se=We):Ve>0&&(se+=Ze*Ve,Se+=tt*Ve)}return Ze=ve-se,tt=ie-Se,Ze*Ze+tt*tt}function ge(ve,ie,se,Se){const De={id:ve??null,type:ie,geometry:se,tags:Se,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ie==="Point"||ie==="MultiPoint"||ie==="LineString")et(De,se);else if(ie==="Polygon")et(De,se[0]);else if(ie==="MultiLineString")for(const We of se)et(De,We);else if(ie==="MultiPolygon")for(const We of se)et(De,We[0]);return De}function et(ve,ie){for(let se=0;se<ie.length;se+=3)ve.minX=Math.min(ve.minX,ie[se]),ve.minY=Math.min(ve.minY,ie[se+1]),ve.maxX=Math.max(ve.maxX,ie[se]),ve.maxY=Math.max(ve.maxY,ie[se+1])}function Ke(ve,ie,se,Se){if(!ie.geometry)return;const De=ie.geometry.coordinates;if(De&&De.length===0)return;const We=ie.geometry.type,Ze=Math.pow(se.tolerance/((1<<se.maxZoom)*se.extent),2);let tt=[],Ve=ie.id;if(se.promoteId?Ve=ie.properties[se.promoteId]:se.generateId&&(Ve=Se||0),We==="Point")Tt(De,tt);else if(We==="MultiPoint")for(const At of De)Tt(At,tt);else if(We==="LineString")ke(De,tt,Ze,!1);else if(We==="MultiLineString"){if(se.lineMetrics){for(const At of De)tt=[],ke(At,tt,Ze,!1),ve.push(ge(Ve,"LineString",tt,ie.properties));return}Vt(De,tt,Ze,!1)}else if(We==="Polygon")Vt(De,tt,Ze,!0);else{if(We!=="MultiPolygon"){if(We==="GeometryCollection"){for(const At of ie.geometry.geometries)Ke(ve,{id:Ve,geometry:At,properties:ie.properties},se,Se);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const At of De){const Dt=[];Vt(At,Dt,Ze,!0),tt.push(Dt)}}ve.push(ge(Ve,We,tt,ie.properties))}function Tt(ve,ie){ie.push(zt(ve[0]),$t(ve[1]),0)}function ke(ve,ie,se,Se){let De,We,Ze=0;for(let Ve=0;Ve<ve.length;Ve++){const At=zt(ve[Ve][0]),Dt=$t(ve[Ve][1]);ie.push(At,Dt,0),Ve>0&&(Ze+=Se?(De*Dt-At*We)/2:Math.sqrt(Math.pow(At-De,2)+Math.pow(Dt-We,2))),De=At,We=Dt}const tt=ie.length-3;ie[2]=1,Je(ie,0,tt,se),ie[tt+2]=1,ie.size=Math.abs(Ze),ie.start=0,ie.end=ie.size}function Vt(ve,ie,se,Se){for(let De=0;De<ve.length;De++){const We=[];ke(ve[De],We,se,Se),ie.push(We)}}function zt(ve){return ve/360+.5}function $t(ve){const ie=Math.sin(ve*Math.PI/180),se=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return se<0?0:se>1?1:se}function Qt(ve,ie,se,Se,De,We,Ze,tt){if(Se/=ie,We>=(se/=ie)&&Ze<Se)return ve;if(Ze<se||We>=Se)return null;const Ve=[];for(const At of ve){const Dt=At.geometry;let Ct=At.type;const ln=De===0?At.minX:At.minY,Sn=De===0?At.maxX:At.maxY;if(ln>=se&&Sn<Se){Ve.push(At);continue}if(Sn<se||ln>=Se)continue;let zn=[];if(Ct==="Point"||Ct==="MultiPoint")Ie(Dt,zn,se,Se,De);else if(Ct==="LineString")Me(Dt,zn,se,Se,De,!1,tt.lineMetrics);else if(Ct==="MultiLineString")St(Dt,zn,se,Se,De,!1);else if(Ct==="Polygon")St(Dt,zn,se,Se,De,!0);else if(Ct==="MultiPolygon")for(const rr of Dt){const Cr=[];St(rr,Cr,se,Se,De,!0),Cr.length&&zn.push(Cr)}if(zn.length){if(tt.lineMetrics&&Ct==="LineString"){for(const rr of zn)Ve.push(ge(At.id,Ct,rr,At.tags));continue}Ct!=="LineString"&&Ct!=="MultiLineString"||(zn.length===1?(Ct="LineString",zn=zn[0]):Ct="MultiLineString"),Ct!=="Point"&&Ct!=="MultiPoint"||(Ct=zn.length===3?"Point":"MultiPoint"),Ve.push(ge(At.id,Ct,zn,At.tags))}}return Ve.length?Ve:null}function Ie(ve,ie,se,Se,De){for(let We=0;We<ve.length;We+=3){const Ze=ve[We+De];Ze>=se&&Ze<=Se&&Bt(ie,ve[We],ve[We+1],ve[We+2])}}function Me(ve,ie,se,Se,De,We,Ze){let tt=wt(ve);const Ve=De===0?jt:Rn;let At,Dt,Ct=ve.start;for(let Cr=0;Cr<ve.length-3;Cr+=3){const ir=ve[Cr],Yr=ve[Cr+1],Ti=ve[Cr+2],Re=ve[Cr+3],st=ve[Cr+4],Mt=De===0?ir:Yr,ut=De===0?Re:st;let vt=!1;Ze&&(At=Math.sqrt(Math.pow(ir-Re,2)+Math.pow(Yr-st,2))),Mt<se?ut>se&&(Dt=Ve(tt,ir,Yr,Re,st,se),Ze&&(tt.start=Ct+At*Dt)):Mt>Se?ut<Se&&(Dt=Ve(tt,ir,Yr,Re,st,Se),Ze&&(tt.start=Ct+At*Dt)):Bt(tt,ir,Yr,Ti),ut<se&&Mt>=se&&(Dt=Ve(tt,ir,Yr,Re,st,se),vt=!0),ut>Se&&Mt<=Se&&(Dt=Ve(tt,ir,Yr,Re,st,Se),vt=!0),!We&&vt&&(Ze&&(tt.end=Ct+At*Dt),ie.push(tt),tt=wt(ve)),Ze&&(Ct+=At)}let ln=ve.length-3;const Sn=ve[ln],zn=ve[ln+1],rr=De===0?Sn:zn;rr>=se&&rr<=Se&&Bt(tt,Sn,zn,ve[ln+2]),ln=tt.length-3,We&&ln>=3&&(tt[ln]!==tt[0]||tt[ln+1]!==tt[1])&&Bt(tt,tt[0],tt[1],tt[2]),tt.length&&ie.push(tt)}function wt(ve){const ie=[];return ie.size=ve.size,ie.start=ve.start,ie.end=ve.end,ie}function St(ve,ie,se,Se,De,We){for(const Ze of ve)Me(Ze,ie,se,Se,De,We,!1)}function Bt(ve,ie,se,Se){ve.push(ie,se,Se)}function jt(ve,ie,se,Se,De,We){const Ze=(We-ie)/(Se-ie);return Bt(ve,We,se+(De-se)*Ze,1),Ze}function Rn(ve,ie,se,Se,De,We){const Ze=(We-se)/(De-se);return Bt(ve,ie+(Se-ie)*Ze,We,1),Ze}function ft(ve,ie){const se=[];for(let Se=0;Se<ve.length;Se++){const De=ve[Se],We=De.type;let Ze;if(We==="Point"||We==="MultiPoint"||We==="LineString")Ze=Rt(De.geometry,ie);else if(We==="MultiLineString"||We==="Polygon"){Ze=[];for(const tt of De.geometry)Ze.push(Rt(tt,ie))}else if(We==="MultiPolygon"){Ze=[];for(const tt of De.geometry){const Ve=[];for(const At of tt)Ve.push(Rt(At,ie));Ze.push(Ve)}}se.push(ge(De.id,We,Ze,De.tags))}return se}function Rt(ve,ie){const se=[];se.size=ve.size,ve.start!==void 0&&(se.start=ve.start,se.end=ve.end);for(let Se=0;Se<ve.length;Se+=3)se.push(ve[Se]+ie,ve[Se+1],ve[Se+2]);return se}function Xt(ve,ie){if(ve.transformed)return ve;const se=1<<ve.z,Se=ve.x,De=ve.y;for(const We of ve.features){const Ze=We.geometry,tt=We.type;if(We.geometry=[],tt===1)for(let Ve=0;Ve<Ze.length;Ve+=2)We.geometry.push(Tn(Ze[Ve],Ze[Ve+1],ie,se,Se,De));else for(let Ve=0;Ve<Ze.length;Ve++){const At=[];for(let Dt=0;Dt<Ze[Ve].length;Dt+=2)At.push(Tn(Ze[Ve][Dt],Ze[Ve][Dt+1],ie,se,Se,De));We.geometry.push(At)}}return ve.transformed=!0,ve}function Tn(ve,ie,se,Se,De,We){return[Math.round(se*(ve*Se-De)),Math.round(se*(ie*Se-We))]}function en(ve,ie,se,Se,De){const We=ie===De.maxZoom?0:De.tolerance/((1<<ie)*De.extent),Ze={features:[],numPoints:0,numSimplified:0,numFeatures:ve.length,source:null,x:se,y:Se,z:ie,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const tt of ve)Et(Ze,tt,We,De);return Ze}function Et(ve,ie,se,Se){const De=ie.geometry,We=ie.type,Ze=[];if(ve.minX=Math.min(ve.minX,ie.minX),ve.minY=Math.min(ve.minY,ie.minY),ve.maxX=Math.max(ve.maxX,ie.maxX),ve.maxY=Math.max(ve.maxY,ie.maxY),We==="Point"||We==="MultiPoint")for(let tt=0;tt<De.length;tt+=3)Ze.push(De[tt],De[tt+1]),ve.numPoints++,ve.numSimplified++;else if(We==="LineString")qt(Ze,De,ve,se,!1,!1);else if(We==="MultiLineString"||We==="Polygon")for(let tt=0;tt<De.length;tt++)qt(Ze,De[tt],ve,se,We==="Polygon",tt===0);else if(We==="MultiPolygon")for(let tt=0;tt<De.length;tt++){const Ve=De[tt];for(let At=0;At<Ve.length;At++)qt(Ze,Ve[At],ve,se,!0,At===0)}if(Ze.length){let tt=ie.tags||null;if(We==="LineString"&&Se.lineMetrics){tt={};for(const At in ie.tags)tt[At]=ie.tags[At];tt.mapbox_clip_start=De.start/De.size,tt.mapbox_clip_end=De.end/De.size}const Ve={geometry:Ze,type:We==="Polygon"||We==="MultiPolygon"?3:We==="LineString"||We==="MultiLineString"?2:1,tags:tt};ie.id!==null&&(Ve.id=ie.id),ve.features.push(Ve)}}function qt(ve,ie,se,Se,De,We){const Ze=Se*Se;if(Se>0&&ie.size<(De?Ze:Se))return void(se.numPoints+=ie.length/3);const tt=[];for(let Ve=0;Ve<ie.length;Ve+=3)(Se===0||ie[Ve+2]>Ze)&&(se.numSimplified++,tt.push(ie[Ve],ie[Ve+1])),se.numPoints++;De&&function(Ve,At){let Dt=0;for(let Ct=0,ln=Ve.length,Sn=ln-2;Ct<ln;Sn=Ct,Ct+=2)Dt+=(Ve[Ct]-Ve[Sn])*(Ve[Ct+1]+Ve[Sn+1]);if(Dt>0===At)for(let Ct=0,ln=Ve.length;Ct<ln/2;Ct+=2){const Sn=Ve[Ct],zn=Ve[Ct+1];Ve[Ct]=Ve[ln-2-Ct],Ve[Ct+1]=Ve[ln-1-Ct],Ve[ln-2-Ct]=Sn,Ve[ln-1-Ct]=zn}}(tt,We),ve.push(tt)}const ht={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Ne{constructor(ie,se){const Se=(se=this.options=function(We,Ze){for(const tt in Ze)We[tt]=Ze[tt];return We}(Object.create(ht),se)).debug;if(Se&&console.time("preprocess data"),se.maxZoom<0||se.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(se.promoteId&&se.generateId)throw new Error("promoteId and generateId cannot be used together.");let De=function(We,Ze){const tt=[];if(We.type==="FeatureCollection")for(let Ve=0;Ve<We.features.length;Ve++)Ke(tt,We.features[Ve],Ze,Ve);else Ke(tt,We.type==="Feature"?We:{geometry:We},Ze);return tt}(ie,se);this.tiles={},this.tileCoords=[],Se&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",se.indexMaxZoom,se.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),De=function(We,Ze){const tt=Ze.buffer/Ze.extent;let Ve=We;const At=Qt(We,1,-1-tt,tt,0,-1,2,Ze),Dt=Qt(We,1,1-tt,2+tt,0,-1,2,Ze);return(At||Dt)&&(Ve=Qt(We,1,-tt,1+tt,0,-1,2,Ze)||[],At&&(Ve=ft(At,1).concat(Ve)),Dt&&(Ve=Ve.concat(ft(Dt,-1)))),Ve}(De,se),De.length&&this.splitTile(De,0,0,0),Se&&(De.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ie,se,Se,De,We,Ze,tt){const Ve=[ie,se,Se,De],At=this.options,Dt=At.debug;for(;Ve.length;){De=Ve.pop(),Se=Ve.pop(),se=Ve.pop(),ie=Ve.pop();const Ct=1<<se,ln=pt(se,Se,De);let Sn=this.tiles[ln];if(!Sn&&(Dt>1&&console.time("creation"),Sn=this.tiles[ln]=en(ie,se,Se,De,At),this.tileCoords.push({z:se,x:Se,y:De}),Dt)){Dt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",se,Se,De,Sn.numFeatures,Sn.numPoints,Sn.numSimplified),console.timeEnd("creation"));const vt=`z${se}`;this.stats[vt]=(this.stats[vt]||0)+1,this.total++}if(Sn.source=ie,We==null){if(se===At.indexMaxZoom||Sn.numPoints<=At.indexMaxPoints)continue}else{if(se===At.maxZoom||se===We)continue;if(We!=null){const vt=We-se;if(Se!==Ze>>vt||De!==tt>>vt)continue}}if(Sn.source=null,ie.length===0)continue;Dt>1&&console.time("clipping");const zn=.5*At.buffer/At.extent,rr=.5-zn,Cr=.5+zn,ir=1+zn;let Yr=null,Ti=null,Re=null,st=null,Mt=Qt(ie,Ct,Se-zn,Se+Cr,0,Sn.minX,Sn.maxX,At),ut=Qt(ie,Ct,Se+rr,Se+ir,0,Sn.minX,Sn.maxX,At);ie=null,Mt&&(Yr=Qt(Mt,Ct,De-zn,De+Cr,1,Sn.minY,Sn.maxY,At),Ti=Qt(Mt,Ct,De+rr,De+ir,1,Sn.minY,Sn.maxY,At),Mt=null),ut&&(Re=Qt(ut,Ct,De-zn,De+Cr,1,Sn.minY,Sn.maxY,At),st=Qt(ut,Ct,De+rr,De+ir,1,Sn.minY,Sn.maxY,At),ut=null),Dt>1&&console.timeEnd("clipping"),Ve.push(Yr||[],se+1,2*Se,2*De),Ve.push(Ti||[],se+1,2*Se,2*De+1),Ve.push(Re||[],se+1,2*Se+1,2*De),Ve.push(st||[],se+1,2*Se+1,2*De+1)}}getTile(ie,se,Se){ie=+ie,se=+se,Se=+Se;const De=this.options,{extent:We,debug:Ze}=De;if(ie<0||ie>24)return null;const tt=1<<ie,Ve=pt(ie,se=se+tt&tt-1,Se);if(this.tiles[Ve])return Xt(this.tiles[Ve],We);Ze>1&&console.log("drilling down to z%d-%d-%d",ie,se,Se);let At,Dt=ie,Ct=se,ln=Se;for(;!At&&Dt>0;)Dt--,Ct>>=1,ln>>=1,At=this.tiles[pt(Dt,Ct,ln)];return At&&At.source?(Ze>1&&(console.log("found parent tile z%d-%d-%d",Dt,Ct,ln),console.time("drilling down")),this.splitTile(At.source,Dt,Ct,ln,ie,se,Se),Ze>1&&console.timeEnd("drilling down"),this.tiles[Ve]?Xt(this.tiles[Ve],We):null):null}}function pt(ve,ie,se){return 32*((1<<ve)*se+ie)+ve}function Te(ve,ie){return ie?ve.properties[ie]:ve.id}function xt(ve,ie){if(ve==null)return!0;if(ve.type==="Feature")return Te(ve,ie)!=null;if(ve.type==="FeatureCollection"){const se=new Set;for(const Se of ve.features){const De=Te(Se,ie);if(De==null||se.has(De))return!1;se.add(De)}return!0}return!1}function tn(ve,ie){const se=new Map;if(ve!=null)if(ve.type==="Feature")se.set(Te(ve,ie),ve);else for(const Se of ve.features)se.set(Te(Se,ie),Se);return se}class Xe extends p{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ie,se){return s._(this,void 0,void 0,function*(){const Se=ie.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const De=this._geoJSONIndex.getTile(Se.z,Se.x,Se.y);if(!De)return null;const We=new class{constructor(tt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.X,this.length=tt.length,this._features=tt}feature(tt){return new class{constructor(Ve){this._feature=Ve,this.extent=s.X,this.type=Ve.type,this.properties=Ve.tags,"id"in Ve&&!isNaN(Ve.id)&&(this.id=parseInt(Ve.id,10))}loadGeometry(){if(this._feature.type===1){const Ve=[];for(const At of this._feature.geometry)Ve.push([new s.P(At[0],At[1])]);return Ve}{const Ve=[];for(const At of this._feature.geometry){const Dt=[];for(const Ct of At)Dt.push(new s.P(Ct[0],Ct[1]));Ve.push(Dt)}return Ve}}toGeoJSON(Ve,At,Dt){return w.call(this,Ve,At,Dt)}}(this._features[tt])}}(De.features);let Ze=we(We);return Ze.byteOffset===0&&Ze.byteLength===Ze.buffer.byteLength||(Ze=new Uint8Array(Ze)),{vectorTile:We,rawData:Ze.buffer}})}loadData(ie){return s._(this,void 0,void 0,function*(){var se;(se=this._pendingRequest)===null||se===void 0||se.abort();const Se=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new s.bu(ie.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ie,this._pendingRequest),this._geoJSONIndex=ie.cluster?new Be(function({superclusterOptions:Ze,clusterProperties:tt}){if(!tt||!Ze)return Ze;const Ve={},At={},Dt={accumulated:null,zoom:0},Ct={properties:null},ln=Object.keys(tt);for(const Sn of ln){const[zn,rr]=tt[Sn],Cr=s.bB(rr),ir=s.bB(typeof zn=="string"?[zn,["accumulated"],["get",Sn]]:zn);Ve[Sn]=Cr.value,At[Sn]=ir.value}return Ze.map=Sn=>{Ct.properties=Sn;const zn={};for(const rr of ln)zn[rr]=Ve[rr].evaluate(Dt,Ct);return zn},Ze.reduce=(Sn,zn)=>{Ct.properties=zn;for(const rr of ln)Dt.accumulated=Sn[rr],Sn[rr]=At[rr].evaluate(Dt,Ct)},Ze}(ie)).load((yield this._pendingData).features):(De=yield this._pendingData,new Ne(De,ie.geojsonVtOptions)),this.loaded={};const We={};if(Se){const Ze=Se.finish();Ze&&(We.resourceTiming={},We.resourceTiming[ie.source]=JSON.parse(JSON.stringify(Ze)))}return We}catch(We){if(delete this._pendingRequest,s.bA(We))return{abandoned:!0};throw We}var De})}getData(){return s._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ie){const se=this.loaded;return se&&se[ie.uid]?super.reloadTile(ie):this.loadTile(ie)}loadAndProcessGeoJSON(ie,se){return s._(this,void 0,void 0,function*(){let Se=yield this.loadGeoJSON(ie,se);if(delete this._pendingRequest,typeof Se!="object")throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`);if(b(Se,!0),ie.filter){const De=s.bB(ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(De.result==="error")throw new Error(De.value.map(Ze=>`${Ze.key}: ${Ze.message}`).join(", "));Se={type:"FeatureCollection",features:Se.features.filter(Ze=>De.value.evaluate({zoom:0},Ze))}}return Se})}loadGeoJSON(ie,se){return s._(this,void 0,void 0,function*(){const{promoteId:Se}=ie;if(ie.request){const De=yield s.h(ie.request,se);return this._dataUpdateable=xt(De.data,Se)?tn(De.data,Se):void 0,De.data}if(typeof ie.data=="string")try{const De=JSON.parse(ie.data);return this._dataUpdateable=xt(De,Se)?tn(De,Se):void 0,De}catch{throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`)}if(!ie.dataDiff)throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ie.source}`);return function(De,We,Ze){var tt,Ve,At,Dt;if(We.removeAll&&De.clear(),We.remove)for(const Ct of We.remove)De.delete(Ct);if(We.add)for(const Ct of We.add){const ln=Te(Ct,Ze);ln!=null&&De.set(ln,Ct)}if(We.update)for(const Ct of We.update){let ln=De.get(Ct.id);if(ln==null)continue;const Sn=!Ct.removeAllProperties&&(((tt=Ct.removeProperties)===null||tt===void 0?void 0:tt.length)>0||((Ve=Ct.addOrUpdateProperties)===null||Ve===void 0?void 0:Ve.length)>0);if((Ct.newGeometry||Ct.removeAllProperties||Sn)&&(ln=Object.assign({},ln),De.set(Ct.id,ln),Sn&&(ln.properties=Object.assign({},ln.properties))),Ct.newGeometry&&(ln.geometry=Ct.newGeometry),Ct.removeAllProperties)ln.properties={};else if(((At=Ct.removeProperties)===null||At===void 0?void 0:At.length)>0)for(const zn of Ct.removeProperties)Object.prototype.hasOwnProperty.call(ln.properties,zn)&&delete ln.properties[zn];if(((Dt=Ct.addOrUpdateProperties)===null||Dt===void 0?void 0:Dt.length)>0)for(const{key:zn,value:rr}of Ct.addOrUpdateProperties)ln.properties[zn]=rr}}(this._dataUpdateable,ie.dataDiff,Se),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ie){return s._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ie){return this._geoJSONIndex.getClusterExpansionZoom(ie.clusterId)}getClusterChildren(ie){return this._geoJSONIndex.getChildren(ie.clusterId)}getClusterLeaves(ie){return this._geoJSONIndex.getLeaves(ie.clusterId,ie.limit,ie.offset)}}class Yt{constructor(ie){this.self=ie,this.actor=new s.F(ie),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(se,Se)=>{if(this.externalWorkerSourceTypes[se])throw new Error(`Worker source with name "${se}" already registered.`);this.externalWorkerSourceTypes[se]=Se},this.self.addProtocol=s.bh,this.self.removeProtocol=s.bi,this.self.registerRTLTextPlugin=se=>{if(s.bC.isParsed())throw new Error("RTL text plugin already registered.");s.bC.setMethods(se)},this.actor.registerMessageHandler("LDT",(se,Se)=>this._getDEMWorkerSource(se,Se.source).loadTile(Se)),this.actor.registerMessageHandler("RDT",(se,Se)=>s._(this,void 0,void 0,function*(){this._getDEMWorkerSource(se,Se.source).removeTile(Se)})),this.actor.registerMessageHandler("GCEZ",(se,Se)=>s._(this,void 0,void 0,function*(){return this._getWorkerSource(se,Se.type,Se.source).getClusterExpansionZoom(Se)})),this.actor.registerMessageHandler("GCC",(se,Se)=>s._(this,void 0,void 0,function*(){return this._getWorkerSource(se,Se.type,Se.source).getClusterChildren(Se)})),this.actor.registerMessageHandler("GCL",(se,Se)=>s._(this,void 0,void 0,function*(){return this._getWorkerSource(se,Se.type,Se.source).getClusterLeaves(Se)})),this.actor.registerMessageHandler("LD",(se,Se)=>this._getWorkerSource(se,Se.type,Se.source).loadData(Se)),this.actor.registerMessageHandler("GD",(se,Se)=>this._getWorkerSource(se,Se.type,Se.source).getData()),this.actor.registerMessageHandler("LT",(se,Se)=>this._getWorkerSource(se,Se.type,Se.source).loadTile(Se)),this.actor.registerMessageHandler("RT",(se,Se)=>this._getWorkerSource(se,Se.type,Se.source).reloadTile(Se)),this.actor.registerMessageHandler("AT",(se,Se)=>this._getWorkerSource(se,Se.type,Se.source).abortTile(Se)),this.actor.registerMessageHandler("RMT",(se,Se)=>this._getWorkerSource(se,Se.type,Se.source).removeTile(Se)),this.actor.registerMessageHandler("RS",(se,Se)=>s._(this,void 0,void 0,function*(){if(!this.workerSources[se]||!this.workerSources[se][Se.type]||!this.workerSources[se][Se.type][Se.source])return;const De=this.workerSources[se][Se.type][Se.source];delete this.workerSources[se][Se.type][Se.source],De.removeSource!==void 0&&De.removeSource(Se)})),this.actor.registerMessageHandler("RM",se=>s._(this,void 0,void 0,function*(){delete this.layerIndexes[se],delete this.availableImages[se],delete this.workerSources[se],delete this.demWorkerSources[se]})),this.actor.registerMessageHandler("SR",(se,Se)=>s._(this,void 0,void 0,function*(){this.referrer=Se})),this.actor.registerMessageHandler("SRPS",(se,Se)=>this._syncRTLPluginState(se,Se)),this.actor.registerMessageHandler("IS",(se,Se)=>s._(this,void 0,void 0,function*(){this.self.importScripts(Se)})),this.actor.registerMessageHandler("SI",(se,Se)=>this._setImages(se,Se)),this.actor.registerMessageHandler("UL",(se,Se)=>s._(this,void 0,void 0,function*(){this._getLayerIndex(se).update(Se.layers,Se.removedIds)})),this.actor.registerMessageHandler("SL",(se,Se)=>s._(this,void 0,void 0,function*(){this._getLayerIndex(se).replace(Se)}))}_setImages(ie,se){return s._(this,void 0,void 0,function*(){this.availableImages[ie]=se;for(const Se in this.workerSources[ie]){const De=this.workerSources[ie][Se];for(const We in De)De[We].availableImages=se}})}_syncRTLPluginState(ie,se){return s._(this,void 0,void 0,function*(){if(s.bC.isParsed())return s.bC.getState();if(se.pluginStatus!=="loading")return s.bC.setState(se),se;const Se=se.pluginURL;if(this.self.importScripts(Se),s.bC.isParsed()){const De={pluginStatus:"loaded",pluginURL:Se};return s.bC.setState(De),De}throw s.bC.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${Se}`)})}_getAvailableImages(ie){let se=this.availableImages[ie];return se||(se=[]),se}_getLayerIndex(ie){let se=this.layerIndexes[ie];return se||(se=this.layerIndexes[ie]=new a),se}_getWorkerSource(ie,se,Se){if(this.workerSources[ie]||(this.workerSources[ie]={}),this.workerSources[ie][se]||(this.workerSources[ie][se]={}),!this.workerSources[ie][se][Se]){const De={sendAsync:(We,Ze)=>(We.targetMapId=ie,this.actor.sendAsync(We,Ze))};switch(se){case"vector":this.workerSources[ie][se][Se]=new p(De,this._getLayerIndex(ie),this._getAvailableImages(ie));break;case"geojson":this.workerSources[ie][se][Se]=new Xe(De,this._getLayerIndex(ie),this._getAvailableImages(ie));break;default:this.workerSources[ie][se][Se]=new this.externalWorkerSourceTypes[se](De,this._getLayerIndex(ie),this._getAvailableImages(ie))}}return this.workerSources[ie][se][Se]}_getDEMWorkerSource(ie,se){return this.demWorkerSources[ie]||(this.demWorkerSources[ie]={}),this.demWorkerSources[ie][se]||(this.demWorkerSources[ie][se]=new g),this.demWorkerSources[ie][se]}}return s.i(self)&&(self.worker=new Yt(self)),Yt}),i("index",["exports","./shared"],function(s,a){var l="4.6.0";let d,h;const p={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:L=>new Promise((c,y)=>{const T=requestAnimationFrame(c);L.signal.addEventListener("abort",()=>{cancelAnimationFrame(T),y(a.c())})}),getImageData(L,c=0){return this.getImageCanvasContext(L).getImageData(-c,-c,L.width+2*c,L.height+2*c)},getImageCanvasContext(L){const c=window.document.createElement("canvas"),y=c.getContext("2d",{willReadFrequently:!0});if(!y)throw new Error("failed to create canvas 2d context");return c.width=L.width,c.height=L.height,y.drawImage(L,0,0,L.width,L.height),y},resolveURL:L=>(d||(d=document.createElement("a")),d.href=L,d.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(h==null&&(h=matchMedia("(prefers-reduced-motion: reduce)")),h.matches)}};class g{static testProp(c){if(!g.docStyle)return c[0];for(let y=0;y<c.length;y++)if(c[y]in g.docStyle)return c[y];return c[0]}static create(c,y,T){const I=window.document.createElement(c);return y!==void 0&&(I.className=y),T&&T.appendChild(I),I}static createNS(c,y){return window.document.createElementNS(c,y)}static disableDrag(){g.docStyle&&g.selectProp&&(g.userSelect=g.docStyle[g.selectProp],g.docStyle[g.selectProp]="none")}static enableDrag(){g.docStyle&&g.selectProp&&(g.docStyle[g.selectProp]=g.userSelect)}static setTransform(c,y){c.style[g.transformProp]=y}static addEventListener(c,y,T,I={}){c.addEventListener(y,T,"passive"in I?I:I.capture)}static removeEventListener(c,y,T,I={}){c.removeEventListener(y,T,"passive"in I?I:I.capture)}static suppressClickInternal(c){c.preventDefault(),c.stopPropagation(),window.removeEventListener("click",g.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",g.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",g.suppressClickInternal,!0)},0)}static getScale(c){const y=c.getBoundingClientRect();return{x:y.width/c.offsetWidth||1,y:y.height/c.offsetHeight||1,boundingClientRect:y}}static getPoint(c,y,T){const I=y.boundingClientRect;return new a.P((T.clientX-I.left)/y.x-c.clientLeft,(T.clientY-I.top)/y.y-c.clientTop)}static mousePos(c,y){const T=g.getScale(c);return g.getPoint(c,T,y)}static touchPos(c,y){const T=[],I=g.getScale(c);for(let D=0;D<y.length;D++)T.push(g.getPoint(c,I,y[D]));return T}static mouseButton(c){return c.button}static remove(c){c.parentNode&&c.parentNode.removeChild(c)}}g.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,g.selectProp=g.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),g.transformProp=g.testProp(["transform","WebkitTransform"]);const v={supported:!1,testSupport:function(L){!w&&b&&(S?C(L):x=L)}};let x,b,w=!1,S=!1;function C(L){const c=L.createTexture();L.bindTexture(L.TEXTURE_2D,c);try{if(L.texImage2D(L.TEXTURE_2D,0,L.RGBA,L.RGBA,L.UNSIGNED_BYTE,b),L.isContextLost())return;v.supported=!0}catch{}L.deleteTexture(c),w=!0}var A;typeof document<"u"&&(b=document.createElement("img"),b.onload=()=>{x&&C(x),x=null,S=!0},b.onerror=()=>{w=!0,x=null},b.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(L){let c,y,T,I;L.resetRequestQueue=()=>{c=[],y=0,T=0,I={}},L.addThrottleControl=K=>{const te=T++;return I[te]=K,te},L.removeThrottleControl=K=>{delete I[K],U()},L.getImage=(K,te,ce=!0)=>new Promise((ae,xe)=>{v.supported&&(K.headers||(K.headers={}),K.headers.accept="image/webp,*/*"),a.e(K,{type:"image"}),c.push({abortController:te,requestParameters:K,supportImageRefresh:ce,state:"queued",onError:Pe=>{xe(Pe)},onSuccess:Pe=>{ae(Pe)}}),U()});const D=K=>a._(this,void 0,void 0,function*(){K.state="running";const{requestParameters:te,supportImageRefresh:ce,onError:ae,onSuccess:xe,abortController:Pe}=K,Ee=ce===!1&&!a.i(self)&&!a.g(te.url)&&(!te.headers||Object.keys(te.headers).reduce((Ge,nt)=>Ge&&nt==="accept",!0));y++;const $e=Ee?q(te,Pe):a.m(te,Pe);try{const Ge=yield $e;delete K.abortController,K.state="completed",Ge.data instanceof HTMLImageElement||a.b(Ge.data)?xe(Ge):Ge.data&&xe({data:yield(ze=Ge.data,typeof createImageBitmap=="function"?a.d(ze):a.f(ze)),cacheControl:Ge.cacheControl,expires:Ge.expires})}catch(Ge){delete K.abortController,ae(Ge)}finally{y--,U()}var ze}),U=()=>{const K=(()=>{for(const te of Object.keys(I))if(I[te]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let te=y;te<K&&c.length>0;te++){const ce=c.shift();ce.abortController.signal.aborted?te--:D(ce)}},q=(K,te)=>new Promise((ce,ae)=>{const xe=new Image,Pe=K.url,Ee=K.credentials;Ee&&Ee==="include"?xe.crossOrigin="use-credentials":(Ee&&Ee==="same-origin"||!a.s(Pe))&&(xe.crossOrigin="anonymous"),te.signal.addEventListener("abort",()=>{xe.src="",ae(a.c())}),xe.fetchPriority="high",xe.onload=()=>{xe.onerror=xe.onload=null,ce({data:xe})},xe.onerror=()=>{xe.onerror=xe.onload=null,te.signal.aborted||ae(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},xe.src=Pe})}(A||(A={})),A.resetRequestQueue();class P{constructor(c){this._transformRequestFn=c}transformRequest(c,y){return this._transformRequestFn&&this._transformRequestFn(c,y)||{url:c}}setTransformRequest(c){this._transformRequestFn=c}}function k(L){var c=new a.A(3);return c[0]=L[0],c[1]=L[1],c[2]=L[2],c}var F,B=function(L,c,y){return L[0]=c[0]-y[0],L[1]=c[1]-y[1],L[2]=c[2]-y[2],L};F=new a.A(3),a.A!=Float32Array&&(F[0]=0,F[1]=0,F[2]=0);var W=function(L){var c=L[0],y=L[1];return c*c+y*y};function J(L){const c=[];if(typeof L=="string")c.push({id:"default",url:L});else if(L&&L.length>0){const y=[];for(const{id:T,url:I}of L){const D=`${T}${I}`;y.indexOf(D)===-1&&(y.push(D),c.push({id:T,url:I}))}}return c}function H(L,c,y){const T=L.split("?");return T[0]+=`${c}${y}`,T.join("?")}(function(){var L=new a.A(2);a.A!=Float32Array&&(L[0]=0,L[1]=0)})();class Y{constructor(c,y,T,I){this.context=c,this.format=T,this.texture=c.gl.createTexture(),this.update(y,I)}update(c,y,T){const{width:I,height:D}=c,U=!(this.size&&this.size[0]===I&&this.size[1]===D||T),{context:q}=this,{gl:K}=q;if(this.useMipmap=!!(y&&y.useMipmap),K.bindTexture(K.TEXTURE_2D,this.texture),q.pixelStoreUnpackFlipY.set(!1),q.pixelStoreUnpack.set(1),q.pixelStoreUnpackPremultiplyAlpha.set(this.format===K.RGBA&&(!y||y.premultiply!==!1)),U)this.size=[I,D],c instanceof HTMLImageElement||c instanceof HTMLCanvasElement||c instanceof HTMLVideoElement||c instanceof ImageData||a.b(c)?K.texImage2D(K.TEXTURE_2D,0,this.format,this.format,K.UNSIGNED_BYTE,c):K.texImage2D(K.TEXTURE_2D,0,this.format,I,D,0,this.format,K.UNSIGNED_BYTE,c.data);else{const{x:te,y:ce}=T||{x:0,y:0};c instanceof HTMLImageElement||c instanceof HTMLCanvasElement||c instanceof HTMLVideoElement||c instanceof ImageData||a.b(c)?K.texSubImage2D(K.TEXTURE_2D,0,te,ce,K.RGBA,K.UNSIGNED_BYTE,c):K.texSubImage2D(K.TEXTURE_2D,0,te,ce,I,D,K.RGBA,K.UNSIGNED_BYTE,c.data)}this.useMipmap&&this.isSizePowerOfTwo()&&K.generateMipmap(K.TEXTURE_2D)}bind(c,y,T){const{context:I}=this,{gl:D}=I;D.bindTexture(D.TEXTURE_2D,this.texture),T!==D.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(T=D.LINEAR),c!==this.filter&&(D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MAG_FILTER,c),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MIN_FILTER,T||c),this.filter=c),y!==this.wrap&&(D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_S,y),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_T,y),this.wrap=y)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:c}=this.context;c.deleteTexture(this.texture),this.texture=null}}function le(L){const{userImage:c}=L;return!!(c&&c.render&&c.render())&&(L.data.replace(new Uint8Array(c.data.buffer)),!0)}class pe extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(c){if(this.loaded!==c&&(this.loaded=c,c)){for(const{ids:y,promiseResolve:T}of this.requestors)T(this._getImagesForIds(y));this.requestors=[]}}getImage(c){const y=this.images[c];if(y&&!y.data&&y.spriteData){const T=y.spriteData;y.data=new a.R({width:T.width,height:T.height},T.context.getImageData(T.x,T.y,T.width,T.height).data),y.spriteData=null}return y}addImage(c,y){if(this.images[c])throw new Error(`Image id ${c} already exist, use updateImage instead`);this._validate(c,y)&&(this.images[c]=y)}_validate(c,y){let T=!0;const I=y.data||y.spriteData;return this._validateStretch(y.stretchX,I&&I.width)||(this.fire(new a.j(new Error(`Image "${c}" has invalid "stretchX" value`))),T=!1),this._validateStretch(y.stretchY,I&&I.height)||(this.fire(new a.j(new Error(`Image "${c}" has invalid "stretchY" value`))),T=!1),this._validateContent(y.content,y)||(this.fire(new a.j(new Error(`Image "${c}" has invalid "content" value`))),T=!1),T}_validateStretch(c,y){if(!c)return!0;let T=0;for(const I of c){if(I[0]<T||I[1]<I[0]||y<I[1])return!1;T=I[1]}return!0}_validateContent(c,y){if(!c)return!0;if(c.length!==4)return!1;const T=y.spriteData,I=T&&T.width||y.data.width,D=T&&T.height||y.data.height;return!(c[0]<0||I<c[0]||c[1]<0||D<c[1]||c[2]<0||I<c[2]||c[3]<0||D<c[3]||c[2]<c[0]||c[3]<c[1])}updateImage(c,y,T=!0){const I=this.getImage(c);if(T&&(I.data.width!==y.data.width||I.data.height!==y.data.height))throw new Error(`size mismatch between old image (${I.data.width}x${I.data.height}) and new image (${y.data.width}x${y.data.height}).`);y.version=I.version+1,this.images[c]=y,this.updatedImages[c]=!0}removeImage(c){const y=this.images[c];delete this.images[c],delete this.patterns[c],y.userImage&&y.userImage.onRemove&&y.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(c){return new Promise((y,T)=>{let I=!0;if(!this.isLoaded())for(const D of c)this.images[D]||(I=!1);this.isLoaded()||I?y(this._getImagesForIds(c)):this.requestors.push({ids:c,promiseResolve:y})})}_getImagesForIds(c){const y={};for(const T of c){let I=this.getImage(T);I||(this.fire(new a.k("styleimagemissing",{id:T})),I=this.getImage(T)),I?y[T]={data:I.data.clone(),pixelRatio:I.pixelRatio,sdf:I.sdf,version:I.version,stretchX:I.stretchX,stretchY:I.stretchY,content:I.content,textFitWidth:I.textFitWidth,textFitHeight:I.textFitHeight,hasRenderCallback:!!(I.userImage&&I.userImage.render)}:a.w(`Image "${T}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return y}getPixelSize(){const{width:c,height:y}=this.atlasImage;return{width:c,height:y}}getPattern(c){const y=this.patterns[c],T=this.getImage(c);if(!T)return null;if(y&&y.position.version===T.version)return y.position;if(y)y.position.version=T.version;else{const I={w:T.data.width+2,h:T.data.height+2,x:0,y:0},D=new a.I(I,T);this.patterns[c]={bin:I,position:D}}return this._updatePatternAtlas(),this.patterns[c].position}bind(c){const y=c.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Y(c,this.atlasImage,y.RGBA),this.atlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE)}_updatePatternAtlas(){const c=[];for(const D in this.patterns)c.push(this.patterns[D].bin);const{w:y,h:T}=a.p(c),I=this.atlasImage;I.resize({width:y||1,height:T||1});for(const D in this.patterns){const{bin:U}=this.patterns[D],q=U.x+1,K=U.y+1,te=this.getImage(D).data,ce=te.width,ae=te.height;a.R.copy(te,I,{x:0,y:0},{x:q,y:K},{width:ce,height:ae}),a.R.copy(te,I,{x:0,y:ae-1},{x:q,y:K-1},{width:ce,height:1}),a.R.copy(te,I,{x:0,y:0},{x:q,y:K+ae},{width:ce,height:1}),a.R.copy(te,I,{x:ce-1,y:0},{x:q-1,y:K},{width:1,height:ae}),a.R.copy(te,I,{x:0,y:0},{x:q+ce,y:K},{width:1,height:ae})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(c){for(const y of c){if(this.callbackDispatchedThisFrame[y])continue;this.callbackDispatchedThisFrame[y]=!0;const T=this.getImage(y);T||a.w(`Image with ID: "${y}" was not found`),le(T)&&this.updateImage(y,T)}}}const re=1e20;function me(L,c,y,T,I,D,U,q,K){for(let te=c;te<c+T;te++)he(L,y*D+te,D,I,U,q,K);for(let te=y;te<y+I;te++)he(L,te*D+c,1,T,U,q,K)}function he(L,c,y,T,I,D,U){D[0]=0,U[0]=-re,U[1]=re,I[0]=L[c];for(let q=1,K=0,te=0;q<T;q++){I[q]=L[c+q*y];const ce=q*q;do{const ae=D[K];te=(I[q]-I[ae]+ce-ae*ae)/(q-ae)/2}while(te<=U[K]&&--K>-1);K++,D[K]=q,U[K]=te,U[K+1]=re}for(let q=0,K=0;q<T;q++){for(;U[K+1]<q;)K++;const te=D[K],ce=q-te;L[c+q*y]=I[te]+ce*ce}}class we{constructor(c,y){this.requestManager=c,this.localIdeographFontFamily=y,this.entries={}}setURL(c){this.url=c}getGlyphs(c){return a._(this,void 0,void 0,function*(){const y=[];for(const D in c)for(const U of c[D])y.push(this._getAndCacheGlyphsPromise(D,U));const T=yield Promise.all(y),I={};for(const{stack:D,id:U,glyph:q}of T)I[D]||(I[D]={}),I[D][U]=q&&{id:q.id,bitmap:q.bitmap.clone(),metrics:q.metrics};return I})}_getAndCacheGlyphsPromise(c,y){return a._(this,void 0,void 0,function*(){let T=this.entries[c];T||(T=this.entries[c]={glyphs:{},requests:{},ranges:{}});let I=T.glyphs[y];if(I!==void 0)return{stack:c,id:y,glyph:I};if(I=this._tinySDF(T,c,y),I)return T.glyphs[y]=I,{stack:c,id:y,glyph:I};const D=Math.floor(y/256);if(256*D>65535)throw new Error("glyphs > 65535 not supported");if(T.ranges[D])return{stack:c,id:y,glyph:I};if(!this.url)throw new Error("glyphsUrl is not set");if(!T.requests[D]){const q=we.loadGlyphRange(c,D,this.url,this.requestManager);T.requests[D]=q}const U=yield T.requests[D];for(const q in U)this._doesCharSupportLocalGlyph(+q)||(T.glyphs[+q]=U[+q]);return T.ranges[D]=!0,{stack:c,id:y,glyph:U[y]||null}})}_doesCharSupportLocalGlyph(c){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(c))}_tinySDF(c,y,T){const I=this.localIdeographFontFamily;if(!I||!this._doesCharSupportLocalGlyph(T))return;let D=c.tinySDF;if(!D){let q="400";/bold/i.test(y)?q="900":/medium/i.test(y)?q="500":/light/i.test(y)&&(q="200"),D=c.tinySDF=new we.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:I,fontWeight:q})}const U=D.draw(String.fromCharCode(T));return{id:T,bitmap:new a.o({width:U.width||60,height:U.height||60},U.data),metrics:{width:U.glyphWidth/2||24,height:U.glyphHeight/2||24,left:U.glyphLeft/2+.5||0,top:U.glyphTop/2-27.5||-8,advance:U.glyphAdvance/2||24,isDoubleResolution:!0}}}}we.loadGlyphRange=function(L,c,y,T){return a._(this,void 0,void 0,function*(){const I=256*c,D=I+255,U=T.transformRequest(y.replace("{fontstack}",L).replace("{range}",`${I}-${D}`),"Glyphs"),q=yield a.l(U,new AbortController);if(!q||!q.data)throw new Error(`Could not load glyph range. range: ${c}, ${I}-${D}`);const K={};for(const te of a.n(q.data))K[te.id]=te;return K})},we.TinySDF=class{constructor({fontSize:L=24,buffer:c=3,radius:y=8,cutoff:T=.25,fontFamily:I="sans-serif",fontWeight:D="normal",fontStyle:U="normal"}={}){this.buffer=c,this.cutoff=T,this.radius=y;const q=this.size=L+4*c,K=this._createCanvas(q),te=this.ctx=K.getContext("2d",{willReadFrequently:!0});te.font=`${U} ${D} ${L}px ${I}`,te.textBaseline="alphabetic",te.textAlign="left",te.fillStyle="black",this.gridOuter=new Float64Array(q*q),this.gridInner=new Float64Array(q*q),this.f=new Float64Array(q),this.z=new Float64Array(q+1),this.v=new Uint16Array(q)}_createCanvas(L){const c=document.createElement("canvas");return c.width=c.height=L,c}draw(L){const{width:c,actualBoundingBoxAscent:y,actualBoundingBoxDescent:T,actualBoundingBoxLeft:I,actualBoundingBoxRight:D}=this.ctx.measureText(L),U=Math.ceil(y),q=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(D-I))),K=Math.min(this.size-this.buffer,U+Math.ceil(T)),te=q+2*this.buffer,ce=K+2*this.buffer,ae=Math.max(te*ce,0),xe=new Uint8ClampedArray(ae),Pe={data:xe,width:te,height:ce,glyphWidth:q,glyphHeight:K,glyphTop:U,glyphLeft:0,glyphAdvance:c};if(q===0||K===0)return Pe;const{ctx:Ee,buffer:$e,gridInner:ze,gridOuter:Ge}=this;Ee.clearRect($e,$e,q,K),Ee.fillText(L,$e,$e+U);const nt=Ee.getImageData($e,$e,q,K);Ge.fill(re,0,ae),ze.fill(0,0,ae);for(let Fe=0;Fe<K;Fe++)for(let ct=0;ct<q;ct++){const yt=nt.data[4*(Fe*q+ct)+3]/255;if(yt===0)continue;const Pt=(Fe+$e)*te+ct+$e;if(yt===1)Ge[Pt]=0,ze[Pt]=re;else{const Gt=.5-yt;Ge[Pt]=Gt>0?Gt*Gt:0,ze[Pt]=Gt<0?Gt*Gt:0}}me(Ge,0,0,te,ce,te,this.f,this.v,this.z),me(ze,$e,$e,q,K,te,this.f,this.v,this.z);for(let Fe=0;Fe<ae;Fe++){const ct=Math.sqrt(Ge[Fe])-Math.sqrt(ze[Fe]);xe[Fe]=Math.round(255-255*(ct/this.radius+this.cutoff))}return Pe}};class ee{constructor(){this.specification=a.v.light.position}possiblyEvaluate(c,y){return a.x(c.expression.evaluate(y))}interpolate(c,y,T){return{x:a.y.number(c.x,y.x,T),y:a.y.number(c.y,y.y,T),z:a.y.number(c.z,y.z,T)}}}let ye;class be extends a.E{constructor(c){super(),ye=ye||new a.q({anchor:new a.D(a.v.light.anchor),position:new ee,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.T(ye),this.setLight(c),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(c,y={}){if(!this._validate(a.r,c,y))for(const T in c){const I=c[T];T.endsWith("-transition")?this._transitionable.setTransition(T.slice(0,-11),I):this._transitionable.setValue(T,I)}}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,y,T){return(!T||T.validate!==!1)&&a.t(this,c.call(a.u,{value:y,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}const Le=new a.q({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class je extends a.E{constructor(c){super(),this._transitionable=new a.T(Le),this.setSky(c),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.z(0))}setSky(c,y={}){if(!this._validate(a.B,c,y)){c||(c={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent"});for(const T in c){const I=c[T];T.endsWith("-transition")?this._transitionable.setTransition(T.slice(0,-11),I):this._transitionable.setValue(T,I)}}}getSky(){return this._transitionable.serialize()}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,y,T={}){return(T==null?void 0:T.validate)!==!1&&a.t(this,c.call(a.u,a.e({value:y,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(c){return c<60?0:c<70?(c-60)/10:1}}class dt{constructor(c,y){this.width=c,this.height=y,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(c,y){const T=c.join(",")+String(y);return this.dashEntry[T]||(this.dashEntry[T]=this.addDash(c,y)),this.dashEntry[T]}getDashRanges(c,y,T){const I=[];let D=c.length%2==1?-c[c.length-1]*T:0,U=c[0]*T,q=!0;I.push({left:D,right:U,isDash:q,zeroLength:c[0]===0});let K=c[0];for(let te=1;te<c.length;te++){q=!q;const ce=c[te];D=K*T,K+=ce,U=K*T,I.push({left:D,right:U,isDash:q,zeroLength:ce===0})}return I}addRoundDash(c,y,T){const I=y/2;for(let D=-T;D<=T;D++){const U=this.width*(this.nextRow+T+D);let q=0,K=c[q];for(let te=0;te<this.width;te++){te/K.right>1&&(K=c[++q]);const ce=Math.abs(te-K.left),ae=Math.abs(te-K.right),xe=Math.min(ce,ae);let Pe;const Ee=D/T*(I+1);if(K.isDash){const $e=I-Math.abs(Ee);Pe=Math.sqrt(xe*xe+$e*$e)}else Pe=I-Math.sqrt(xe*xe+Ee*Ee);this.data[U+te]=Math.max(0,Math.min(255,Pe+128))}}}addRegularDash(c){for(let q=c.length-1;q>=0;--q){const K=c[q],te=c[q+1];K.zeroLength?c.splice(q,1):te&&te.isDash===K.isDash&&(te.left=K.left,c.splice(q,1))}const y=c[0],T=c[c.length-1];y.isDash===T.isDash&&(y.left=T.left-this.width,T.right=y.right+this.width);const I=this.width*this.nextRow;let D=0,U=c[D];for(let q=0;q<this.width;q++){q/U.right>1&&(U=c[++D]);const K=Math.abs(q-U.left),te=Math.abs(q-U.right),ce=Math.min(K,te);this.data[I+q]=Math.max(0,Math.min(255,(U.isDash?ce:-ce)+128))}}addDash(c,y){const T=y?7:0,I=2*T+1;if(this.nextRow+I>this.height)return a.w("LineAtlas out of space"),null;let D=0;for(let q=0;q<c.length;q++)D+=c[q];if(D!==0){const q=this.width/D,K=this.getDashRanges(c,this.width,q);y?this.addRoundDash(K,q,T):this.addRegularDash(K)}const U={y:(this.nextRow+T+.5)/this.height,height:2*T/this.height,width:D};return this.nextRow+=I,this.dirty=!0,U}bind(c){const y=c.gl;this.texture?(y.bindTexture(y.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,y.texSubImage2D(y.TEXTURE_2D,0,0,0,this.width,this.height,y.ALPHA,y.UNSIGNED_BYTE,this.data))):(this.texture=y.createTexture(),y.bindTexture(y.TEXTURE_2D,this.texture),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.REPEAT),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.REPEAT),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR),y.texImage2D(y.TEXTURE_2D,0,y.ALPHA,this.width,this.height,0,y.ALPHA,y.UNSIGNED_BYTE,this.data))}}const Be="maplibre_preloaded_worker_pool";class ot{constructor(){this.active={}}acquire(c){if(!this.workers)for(this.workers=[];this.workers.length<ot.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[c]=!0,this.workers.slice()}release(c){delete this.active[c],this.numActive()===0&&(this.workers.forEach(y=>{y.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Be]}numActive(){return Object.keys(this.active).length}}const at=Math.floor(p.hardwareConcurrency/2);let It,Lt;function lt(){return It||(It=new ot),It}ot.workerCount=a.C(globalThis)?Math.max(Math.min(at,3),1):1;class Je{constructor(c,y){this.workerPool=c,this.actors=[],this.currentActor=0,this.id=y;const T=this.workerPool.acquire(y);for(let I=0;I<T.length;I++){const D=new a.F(T[I],y);D.name=`Worker ${I}`,this.actors.push(D)}if(!this.actors.length)throw new Error("No actors found")}broadcast(c,y){const T=[];for(const I of this.actors)T.push(I.sendAsync({type:c,data:y}));return Promise.all(T)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(c=!0){this.actors.forEach(y=>{y.remove()}),this.actors=[],c&&this.workerPool.release(this.id)}registerMessageHandler(c,y){for(const T of this.actors)T.registerMessageHandler(c,y)}}function Qe(){return Lt||(Lt=new Je(lt(),a.G),Lt.registerMessageHandler("GR",(L,c,y)=>a.m(c,y))),Lt}function ge(L,c){const y=a.H();return a.J(y,y,[1,1,0]),a.K(y,y,[.5*L.width,.5*L.height,1]),a.L(y,y,L.calculatePosMatrix(c.toUnwrapped()))}function et(L,c,y,T,I,D){const U=function(ae,xe,Pe){if(ae)for(const Ee of ae){const $e=xe[Ee];if($e&&$e.source===Pe&&$e.type==="fill-extrusion")return!0}else for(const Ee in xe){const $e=xe[Ee];if($e.source===Pe&&$e.type==="fill-extrusion")return!0}return!1}(I&&I.layers,c,L.id),q=D.maxPitchScaleFactor(),K=L.tilesIn(T,q,U);K.sort(Ke);const te=[];for(const ae of K)te.push({wrappedTileID:ae.tileID.wrapped().key,queryResults:ae.tile.queryRenderedFeatures(c,y,L._state,ae.queryGeometry,ae.cameraQueryGeometry,ae.scale,I,D,q,ge(L.transform,ae.tileID))});const ce=function(ae){const xe={},Pe={};for(const Ee of ae){const $e=Ee.queryResults,ze=Ee.wrappedTileID,Ge=Pe[ze]=Pe[ze]||{};for(const nt in $e){const Fe=$e[nt],ct=Ge[nt]=Ge[nt]||{},yt=xe[nt]=xe[nt]||[];for(const Pt of Fe)ct[Pt.featureIndex]||(ct[Pt.featureIndex]=!0,yt.push(Pt))}}return xe}(te);for(const ae in ce)ce[ae].forEach(xe=>{const Pe=xe.feature,Ee=L.getFeatureState(Pe.layer["source-layer"],Pe.id);Pe.source=Pe.layer.source,Pe.layer["source-layer"]&&(Pe.sourceLayer=Pe.layer["source-layer"]),Pe.state=Ee});return ce}function Ke(L,c){const y=L.tileID,T=c.tileID;return y.overscaledZ-T.overscaledZ||y.canonical.y-T.canonical.y||y.wrap-T.wrap||y.canonical.x-T.canonical.x}function Tt(L,c,y){return a._(this,void 0,void 0,function*(){let T=L;if(L.url?T=(yield a.h(c.transformRequest(L.url,"Source"),y)).data:yield p.frameAsync(y),!T)return null;const I=a.M(a.e(T,L),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in T&&T.vector_layers&&(I.vectorLayerIds=T.vector_layers.map(D=>D.id)),I})}class ke{constructor(c,y){c&&(y?this.setSouthWest(c).setNorthEast(y):Array.isArray(c)&&(c.length===4?this.setSouthWest([c[0],c[1]]).setNorthEast([c[2],c[3]]):this.setSouthWest(c[0]).setNorthEast(c[1])))}setNorthEast(c){return this._ne=c instanceof a.N?new a.N(c.lng,c.lat):a.N.convert(c),this}setSouthWest(c){return this._sw=c instanceof a.N?new a.N(c.lng,c.lat):a.N.convert(c),this}extend(c){const y=this._sw,T=this._ne;let I,D;if(c instanceof a.N)I=c,D=c;else{if(!(c instanceof ke))return Array.isArray(c)?c.length===4||c.every(Array.isArray)?this.extend(ke.convert(c)):this.extend(a.N.convert(c)):c&&("lng"in c||"lon"in c)&&"lat"in c?this.extend(a.N.convert(c)):this;if(I=c._sw,D=c._ne,!I||!D)return this}return y||T?(y.lng=Math.min(I.lng,y.lng),y.lat=Math.min(I.lat,y.lat),T.lng=Math.max(D.lng,T.lng),T.lat=Math.max(D.lat,T.lat)):(this._sw=new a.N(I.lng,I.lat),this._ne=new a.N(D.lng,D.lat)),this}getCenter(){return new a.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.N(this.getWest(),this.getNorth())}getSouthEast(){return new a.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(c){const{lng:y,lat:T}=a.N.convert(c);let I=this._sw.lng<=y&&y<=this._ne.lng;return this._sw.lng>this._ne.lng&&(I=this._sw.lng>=y&&y>=this._ne.lng),this._sw.lat<=T&&T<=this._ne.lat&&I}static convert(c){return c instanceof ke?c:c&&new ke(c)}static fromLngLat(c,y=0){const T=360*y/40075017,I=T/Math.cos(Math.PI/180*c.lat);return new ke(new a.N(c.lng-I,c.lat-T),new a.N(c.lng+I,c.lat+T))}}class Vt{constructor(c,y,T){this.bounds=ke.convert(this.validateBounds(c)),this.minzoom=y||0,this.maxzoom=T||24}validateBounds(c){return Array.isArray(c)&&c.length===4?[Math.max(-180,c[0]),Math.max(-90,c[1]),Math.min(180,c[2]),Math.min(90,c[3])]:[-180,-90,180,90]}contains(c){const y=Math.pow(2,c.z),T=Math.floor(a.O(this.bounds.getWest())*y),I=Math.floor(a.Q(this.bounds.getNorth())*y),D=Math.ceil(a.O(this.bounds.getEast())*y),U=Math.ceil(a.Q(this.bounds.getSouth())*y);return c.x>=T&&c.x<D&&c.y>=I&&c.y<U}}class zt extends a.E{constructor(c,y,T,I){if(super(),this.id=c,this.dispatcher=T,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.M(y,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},y),this._collectResourceTiming=y.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(I)}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield Tt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),c&&(a.e(this,c),c.bounds&&(this.tileBounds=new Vt(c.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}catch(c){this._tileJSONRequest=null,this.fire(new a.j(c))}})}loaded(){return this._loaded}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}onAdd(c){this.map=c,this.load()}setSourceProperty(c){this._tileJSONRequest&&this._tileJSONRequest.abort(),c(),this.load()}setTiles(c){return this.setSourceProperty(()=>{this._options.tiles=c}),this}setUrl(c){return this.setSourceProperty(()=>{this.url=c,this._options.url=c}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(c){return a._(this,void 0,void 0,function*(){const y=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),T={request:this.map._requestManager.transformRequest(y,"Tile"),uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,tileSize:this.tileSize*c.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};T.request.collectResourceTiming=this._collectResourceTiming;let I="RT";if(c.actor&&c.state!=="expired"){if(c.state==="loading")return new Promise((D,U)=>{c.reloadPromise={resolve:D,reject:U}})}else c.actor=this.dispatcher.getActor(),I="LT";c.abortController=new AbortController;try{const D=yield c.actor.sendAsync({type:I,data:T},c.abortController);if(delete c.abortController,c.aborted)return;this._afterTileLoadWorkerResponse(c,D)}catch(D){if(delete c.abortController,c.aborted)return;if(D&&D.status!==404)throw D;this._afterTileLoadWorkerResponse(c,null)}})}_afterTileLoadWorkerResponse(c,y){if(y&&y.resourceTiming&&(c.resourceTiming=y.resourceTiming),y&&this.map._refreshExpiredTiles&&c.setExpiryData(y),c.loadVectorData(y,this.map.painter),c.reloadPromise){const T=c.reloadPromise;c.reloadPromise=null,this.loadTile(c).then(T.resolve).catch(T.reject)}}abortTile(c){return a._(this,void 0,void 0,function*(){c.abortController&&(c.abortController.abort(),delete c.abortController),c.actor&&(yield c.actor.sendAsync({type:"AT",data:{uid:c.uid,type:this.type,source:this.id}}))})}unloadTile(c){return a._(this,void 0,void 0,function*(){c.unloadVectorData(),c.actor&&(yield c.actor.sendAsync({type:"RMT",data:{uid:c.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class $t extends a.E{constructor(c,y,T,I){super(),this.id=c,this.dispatcher=T,this.setEventedParent(I),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},y),a.e(this,a.M(y,["url","scheme","tileSize"]))}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield Tt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(a.e(this,c),c.bounds&&(this.tileBounds=new Vt(c.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}catch(c){this._tileJSONRequest=null,this.fire(new a.j(c))}})}loaded(){return this._loaded}onAdd(c){this.map=c,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(c){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),c(),this.load()}setTiles(c){return this.setSourceProperty(()=>{this._options.tiles=c}),this}setUrl(c){return this.setSourceProperty(()=>{this.url=c,this._options.url=c}),this}serialize(){return a.e({},this._options)}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}loadTile(c){return a._(this,void 0,void 0,function*(){const y=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);c.abortController=new AbortController;try{const T=yield A.getImage(this.map._requestManager.transformRequest(y,"Tile"),c.abortController,this.map._refreshExpiredTiles);if(delete c.abortController,c.aborted)return void(c.state="unloaded");if(T&&T.data){this.map._refreshExpiredTiles&&T.cacheControl&&T.expires&&c.setExpiryData({cacheControl:T.cacheControl,expires:T.expires});const I=this.map.painter.context,D=I.gl,U=T.data;c.texture=this.map.painter.getTileTexture(U.width),c.texture?c.texture.update(U,{useMipmap:!0}):(c.texture=new Y(I,U,D.RGBA,{useMipmap:!0}),c.texture.bind(D.LINEAR,D.CLAMP_TO_EDGE,D.LINEAR_MIPMAP_NEAREST)),c.state="loaded"}}catch(T){if(delete c.abortController,c.aborted)c.state="unloaded";else if(T)throw c.state="errored",T}})}abortTile(c){return a._(this,void 0,void 0,function*(){c.abortController&&(c.abortController.abort(),delete c.abortController)})}unloadTile(c){return a._(this,void 0,void 0,function*(){c.texture&&this.map.painter.saveTileTexture(c.texture)})}hasTransition(){return!1}}class Qt extends $t{constructor(c,y,T,I){super(c,y,T,I),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},y),this.encoding=y.encoding||"mapbox",this.redFactor=y.redFactor,this.greenFactor=y.greenFactor,this.blueFactor=y.blueFactor,this.baseShift=y.baseShift}loadTile(c){return a._(this,void 0,void 0,function*(){const y=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),T=this.map._requestManager.transformRequest(y,"Tile");c.neighboringTiles=this._getNeighboringTiles(c.tileID),c.abortController=new AbortController;try{const I=yield A.getImage(T,c.abortController,this.map._refreshExpiredTiles);if(delete c.abortController,c.aborted)return void(c.state="unloaded");if(I&&I.data){const D=I.data;this.map._refreshExpiredTiles&&I.cacheControl&&I.expires&&c.setExpiryData({cacheControl:I.cacheControl,expires:I.expires});const U=a.b(D)&&a.U()?D:yield this.readImageNow(D),q={type:this.type,uid:c.uid,source:this.id,rawImageData:U,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!c.actor||c.state==="expired"){c.actor=this.dispatcher.getActor();const K=yield c.actor.sendAsync({type:"LDT",data:q});c.dem=K,c.needsHillshadePrepare=!0,c.needsTerrainPrepare=!0,c.state="loaded"}}}catch(I){if(delete c.abortController,c.aborted)c.state="unloaded";else if(I)throw c.state="errored",I}})}readImageNow(c){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&a.V()){const y=c.width+2,T=c.height+2;try{return new a.R({width:y,height:T},yield a.W(c,-1,-1,y,T))}catch{}}return p.getImageData(c,1)})}_getNeighboringTiles(c){const y=c.canonical,T=Math.pow(2,y.z),I=(y.x-1+T)%T,D=y.x===0?c.wrap-1:c.wrap,U=(y.x+1+T)%T,q=y.x+1===T?c.wrap+1:c.wrap,K={};return K[new a.S(c.overscaledZ,D,y.z,I,y.y).key]={backfilled:!1},K[new a.S(c.overscaledZ,q,y.z,U,y.y).key]={backfilled:!1},y.y>0&&(K[new a.S(c.overscaledZ,D,y.z,I,y.y-1).key]={backfilled:!1},K[new a.S(c.overscaledZ,c.wrap,y.z,y.x,y.y-1).key]={backfilled:!1},K[new a.S(c.overscaledZ,q,y.z,U,y.y-1).key]={backfilled:!1}),y.y+1<T&&(K[new a.S(c.overscaledZ,D,y.z,I,y.y+1).key]={backfilled:!1},K[new a.S(c.overscaledZ,c.wrap,y.z,y.x,y.y+1).key]={backfilled:!1},K[new a.S(c.overscaledZ,q,y.z,U,y.y+1).key]={backfilled:!1}),K}unloadTile(c){return a._(this,void 0,void 0,function*(){c.demTexture&&this.map.painter.saveTileTexture(c.demTexture),c.fbo&&(c.fbo.destroy(),delete c.fbo),c.dem&&delete c.dem,delete c.neighboringTiles,c.state="unloaded",c.actor&&(yield c.actor.sendAsync({type:"RDT",data:{type:this.type,uid:c.uid,source:this.id}}))})}}class Ie extends a.E{constructor(c,y,T,I){super(),this.id=c,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=T.getActor(),this.setEventedParent(I),this._data=y.data,this._options=a.e({},y),this._collectResourceTiming=y.collectResourceTiming,y.maxzoom!==void 0&&(this.maxzoom=y.maxzoom),y.type&&(this.type=y.type),y.attribution&&(this.attribution=y.attribution),this.promoteId=y.promoteId;const D=a.X/this.tileSize;this.workerOptions=a.e({source:this.id,cluster:y.cluster||!1,geojsonVtOptions:{buffer:(y.buffer!==void 0?y.buffer:128)*D,tolerance:(y.tolerance!==void 0?y.tolerance:.375)*D,extent:a.X,maxZoom:this.maxzoom,lineMetrics:y.lineMetrics||!1,generateId:y.generateId||!1},superclusterOptions:{maxZoom:y.clusterMaxZoom!==void 0?y.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,y.clusterMinPoints||2),extent:a.X,radius:(y.clusterRadius||50)*D,log:!1,generateId:y.generateId||!1},clusterProperties:y.clusterProperties,filter:y.filter},y.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return a._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(c){this.map=c,this.load()}setData(c){return this._data=c,this._updateWorkerData(),this}updateData(c){return this._updateWorkerData(c),this}getData(){return a._(this,void 0,void 0,function*(){const c=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:c})})}setClusterOptions(c){return this.workerOptions.cluster=c.cluster,c&&(c.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=c.clusterRadius),c.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=c.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(c){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:c,source:this.id}})}getClusterChildren(c){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:c,source:this.id}})}getClusterLeaves(c,y,T){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:c,limit:y,offset:T}})}_updateWorkerData(c){return a._(this,void 0,void 0,function*(){const y=a.e({type:this.type},this.workerOptions);c?y.dataDiff=c:typeof this._data=="string"?(y.request=this.map._requestManager.transformRequest(p.resolveURL(this._data),"Source"),y.request.collectResourceTiming=this._collectResourceTiming):y.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.k("dataloading",{dataType:"source"}));try{const T=yield this.actor.sendAsync({type:"LD",data:y});if(this._pendingLoads--,this._removed||T.abandoned)return void this.fire(new a.k("dataabort",{dataType:"source"}));let I=null;T.resourceTiming&&T.resourceTiming[this.id]&&(I=T.resourceTiming[this.id].slice(0));const D={dataType:"source"};this._collectResourceTiming&&I&&I.length>0&&a.e(D,{resourceTiming:I}),this.fire(new a.k("data",Object.assign(Object.assign({},D),{sourceDataType:"metadata"}))),this.fire(new a.k("data",Object.assign(Object.assign({},D),{sourceDataType:"content"})))}catch(T){if(this._pendingLoads--,this._removed)return void this.fire(new a.k("dataabort",{dataType:"source"}));this.fire(new a.j(T))}})}loaded(){return this._pendingLoads===0}loadTile(c){return a._(this,void 0,void 0,function*(){const y=c.actor?"RT":"LT";c.actor=this.actor;const T={type:this.type,uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};c.abortController=new AbortController;const I=yield this.actor.sendAsync({type:y,data:T},c.abortController);delete c.abortController,c.unloadVectorData(),c.aborted||c.loadVectorData(I,this.map.painter,y==="RT")})}abortTile(c){return a._(this,void 0,void 0,function*(){c.abortController&&(c.abortController.abort(),delete c.abortController),c.aborted=!0})}unloadTile(c){return a._(this,void 0,void 0,function*(){c.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:c.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Me=a.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class wt extends a.E{constructor(c,y,T,I){super(),this.id=c,this.dispatcher=T,this.coordinates=y.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(I),this.options=y}load(c){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const y=yield A.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,y&&y.data&&(this.image=y.data,c&&(this.coordinates=c),this._finishLoading())}catch(y){this._request=null,this._loaded=!0,this.fire(new a.j(y))}})}loaded(){return this._loaded}updateImage(c){return c.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=c.url,this.load(c.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(c){this.map=c,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(c){this.coordinates=c;const y=c.map(a.Z.fromLngLat);this.tileID=function(I){let D=1/0,U=1/0,q=-1/0,K=-1/0;for(const xe of I)D=Math.min(D,xe.x),U=Math.min(U,xe.y),q=Math.max(q,xe.x),K=Math.max(K,xe.y);const te=Math.max(q-D,K-U),ce=Math.max(0,Math.floor(-Math.log(te)/Math.LN2)),ae=Math.pow(2,ce);return new a.a1(ce,Math.floor((D+q)/2*ae),Math.floor((U+K)/2*ae))}(y),this.minzoom=this.maxzoom=this.tileID.z;const T=y.map(I=>this.tileID.getTilePoint(I)._round());return this._boundsArray=new a.$,this._boundsArray.emplaceBack(T[0].x,T[0].y,0,0),this._boundsArray.emplaceBack(T[1].x,T[1].y,a.X,0),this._boundsArray.emplaceBack(T[3].x,T[3].y,0,a.X),this._boundsArray.emplaceBack(T[2].x,T[2].y,a.X,a.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const c=this.map.painter.context,y=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,Me.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Y(c,this.image,y.RGBA),this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE));let T=!1;for(const I in this.tiles){const D=this.tiles[I];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,T=!0)}T&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(c){return a._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(c.tileID.canonical)?(this.tiles[String(c.tileID.wrap)]=c,c.buckets={}):c.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class St extends wt{constructor(c,y,T,I){super(c,y,T,I),this.roundZoom=!0,this.type="video",this.options=y}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1;const c=this.options;this.urls=[];for(const y of c.urls)this.urls.push(this.map._requestManager.transformRequest(y,"Source").url);try{const y=yield a.a3(this.urls);if(this._loaded=!0,!y)return;this.video=y,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(y){this.fire(new a.j(y))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(c){if(this.video){const y=this.video.seekable;c<y.start(0)||c>y.end(0)?this.fire(new a.j(new a.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${y.start(0)} and ${y.end(0)}-second mark.`))):this.video.currentTime=c}}getVideo(){return this.video}onAdd(c){this.map||(this.map=c,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const c=this.map.painter.context,y=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,Me.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE),y.texSubImage2D(y.TEXTURE_2D,0,0,0,y.RGBA,y.UNSIGNED_BYTE,this.video)):(this.texture=new Y(c,this.video,y.RGBA),this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE));let T=!1;for(const I in this.tiles){const D=this.tiles[I];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,T=!0)}T&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Bt extends wt{constructor(c,y,T,I){super(c,y,T,I),y.coordinates?Array.isArray(y.coordinates)&&y.coordinates.length===4&&!y.coordinates.some(D=>!Array.isArray(D)||D.length!==2||D.some(U=>typeof U!="number"))||this.fire(new a.j(new a.a2(`sources.${c}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.j(new a.a2(`sources.${c}`,null,'missing required property "coordinates"'))),y.animate&&typeof y.animate!="boolean"&&this.fire(new a.j(new a.a2(`sources.${c}`,null,'optional "animate" property must be a boolean value'))),y.canvas?typeof y.canvas=="string"||y.canvas instanceof HTMLCanvasElement||this.fire(new a.j(new a.a2(`sources.${c}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.j(new a.a2(`sources.${c}`,null,'missing required property "canvas"'))),this.options=y,this.animate=y.animate===void 0||y.animate}load(){return a._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(c){this.map=c,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let c=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,c=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,c=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const y=this.map.painter.context,T=y.gl;this.boundsBuffer||(this.boundsBuffer=y.createVertexBuffer(this._boundsArray,Me.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture?(c||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Y(y,this.canvas,T.RGBA,{premultiply:!0});let I=!1;for(const D in this.tiles){const U=this.tiles[D];U.state!=="loaded"&&(U.state="loaded",U.texture=this.texture,I=!0)}I&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const c of[this.canvas.width,this.canvas.height])if(isNaN(c)||c<=0)return!0;return!1}}const jt={},Rn=L=>{switch(L){case"geojson":return Ie;case"image":return wt;case"raster":return $t;case"raster-dem":return Qt;case"vector":return zt;case"video":return St;case"canvas":return Bt}return jt[L]},ft="RTLPluginLoaded";class Rt extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Qe()}_syncState(c){return this.status=c,this.dispatcher.broadcast("SRPS",{pluginStatus:c,pluginURL:this.url}).catch(y=>{throw this.status="error",y})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(c){return a._(this,arguments,void 0,function*(y,T=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=p.resolveURL(y),!this.url)throw new Error(`requested url ${y} is invalid`);if(this.status==="unavailable"){if(!T)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return a._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.k(ft))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Xt=null;function Tn(){return Xt||(Xt=new Rt),Xt}class en{constructor(c,y){this.timeAdded=0,this.fadeEndTime=0,this.tileID=c,this.uid=a.a4(),this.uses=0,this.tileSize=y,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(c){const y=c+this.timeAdded;y<this.fadeEndTime||(this.fadeEndTime=y)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(c){this.demTexture&&c.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(c,y,T){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",c){c.featureIndex&&(this.latestFeatureIndex=c.featureIndex,c.rawTileData?(this.latestRawTileData=c.rawTileData,this.latestFeatureIndex.rawTileData=c.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=c.collisionBoxArray,this.buckets=function(I,D){const U={};if(!D)return U;for(const q of I){const K=q.layerIds.map(te=>D.getLayer(te)).filter(Boolean);if(K.length!==0){q.layers=K,q.stateDependentLayerIds&&(q.stateDependentLayers=q.stateDependentLayerIds.map(te=>K.filter(ce=>ce.id===te)[0]));for(const te of K)U[te.id]=q}}return U}(c.buckets,y.style),this.hasSymbolBuckets=!1;for(const I in this.buckets){const D=this.buckets[I];if(D instanceof a.a6){if(this.hasSymbolBuckets=!0,!T)break;D.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const I in this.buckets){const D=this.buckets[I];if(D instanceof a.a6&&D.hasRTLText){this.hasRTLText=!0,Tn().lazyLoad();break}}this.queryPadding=0;for(const I in this.buckets){const D=this.buckets[I];this.queryPadding=Math.max(this.queryPadding,y.style.getLayer(I).queryRadius(D))}c.imageAtlas&&(this.imageAtlas=c.imageAtlas),c.glyphAtlasImage&&(this.glyphAtlasImage=c.glyphAtlasImage)}else this.collisionBoxArray=new a.a5}unloadVectorData(){for(const c in this.buckets)this.buckets[c].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(c){return this.buckets[c.id]}upload(c){for(const T in this.buckets){const I=this.buckets[T];I.uploadPending()&&I.upload(c)}const y=c.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Y(c,this.imageAtlas.image,y.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Y(c,this.glyphAtlasImage,y.ALPHA),this.glyphAtlasImage=null)}prepare(c){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(c,this.imageAtlasTexture)}queryRenderedFeatures(c,y,T,I,D,U,q,K,te,ce){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:I,cameraQueryGeometry:D,scale:U,tileSize:this.tileSize,pixelPosMatrix:ce,transform:K,params:q,queryPadding:this.queryPadding*te},c,y,T):{}}querySourceFeatures(c,y){const T=this.latestFeatureIndex;if(!T||!T.rawTileData)return;const I=T.loadVTLayers(),D=y&&y.sourceLayer?y.sourceLayer:"",U=I._geojsonTileLayer||I[D];if(!U)return;const q=a.a7(y&&y.filter),{z:K,x:te,y:ce}=this.tileID.canonical,ae={z:K,x:te,y:ce};for(let xe=0;xe<U.length;xe++){const Pe=U.feature(xe);if(q.needGeometry){const ze=a.a8(Pe,!0);if(!q.filter(new a.z(this.tileID.overscaledZ),ze,this.tileID.canonical))continue}else if(!q.filter(new a.z(this.tileID.overscaledZ),Pe))continue;const Ee=T.getId(Pe,D),$e=new a.a9(Pe,K,te,ce,Ee);$e.tile=ae,c.push($e)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(c){const y=this.expirationTime;if(c.cacheControl){const T=a.aa(c.cacheControl);T["max-age"]&&(this.expirationTime=Date.now()+1e3*T["max-age"])}else c.expires&&(this.expirationTime=new Date(c.expires).getTime());if(this.expirationTime){const T=Date.now();let I=!1;if(this.expirationTime>T)I=!1;else if(y)if(this.expirationTime<y)I=!0;else{const D=this.expirationTime-y;D?this.expirationTime=T+Math.max(D,3e4):I=!0}else I=!0;I?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(c,y){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(c).length===0)return;const T=this.latestFeatureIndex.loadVTLayers();for(const I in this.buckets){if(!y.style.hasLayer(I))continue;const D=this.buckets[I],U=D.layers[0].sourceLayer||"_geojsonTileLayer",q=T[U],K=c[U];if(!q||!K||Object.keys(K).length===0)continue;D.update(K,q,this.imageAtlas&&this.imageAtlas.patternPositions||{});const te=y&&y.style&&y.style.getLayer(I);te&&(this.queryPadding=Math.max(this.queryPadding,te.queryRadius(D)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<p.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(c){this.symbolFadeHoldUntil=p.now()+c}setDependencies(c,y){const T={};for(const I of y)T[I]=!0;this.dependencies[c]=T}hasDependency(c,y){for(const T of c){const I=this.dependencies[T];if(I){for(const D of y)if(I[D])return!0}}return!1}}class Et{constructor(c,y){this.max=c,this.onRemove=y,this.reset()}reset(){for(const c in this.data)for(const y of this.data[c])y.timeout&&clearTimeout(y.timeout),this.onRemove(y.value);return this.data={},this.order=[],this}add(c,y,T){const I=c.wrapped().key;this.data[I]===void 0&&(this.data[I]=[]);const D={value:y,timeout:void 0};if(T!==void 0&&(D.timeout=setTimeout(()=>{this.remove(c,D)},T)),this.data[I].push(D),this.order.push(I),this.order.length>this.max){const U=this._getAndRemoveByKey(this.order[0]);U&&this.onRemove(U)}return this}has(c){return c.wrapped().key in this.data}getAndRemove(c){return this.has(c)?this._getAndRemoveByKey(c.wrapped().key):null}_getAndRemoveByKey(c){const y=this.data[c].shift();return y.timeout&&clearTimeout(y.timeout),this.data[c].length===0&&delete this.data[c],this.order.splice(this.order.indexOf(c),1),y.value}getByKey(c){const y=this.data[c];return y?y[0].value:null}get(c){return this.has(c)?this.data[c.wrapped().key][0].value:null}remove(c,y){if(!this.has(c))return this;const T=c.wrapped().key,I=y===void 0?0:this.data[T].indexOf(y),D=this.data[T][I];return this.data[T].splice(I,1),D.timeout&&clearTimeout(D.timeout),this.data[T].length===0&&delete this.data[T],this.onRemove(D.value),this.order.splice(this.order.indexOf(T),1),this}setMaxSize(c){for(this.max=c;this.order.length>this.max;){const y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this}filter(c){const y=[];for(const T in this.data)for(const I of this.data[T])c(I.value)||y.push(I);for(const T of y)this.remove(T.value.tileID,T)}}class qt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(c,y,T){const I=String(y);if(this.stateChanges[c]=this.stateChanges[c]||{},this.stateChanges[c][I]=this.stateChanges[c][I]||{},a.e(this.stateChanges[c][I],T),this.deletedStates[c]===null){this.deletedStates[c]={};for(const D in this.state[c])D!==I&&(this.deletedStates[c][D]=null)}else if(this.deletedStates[c]&&this.deletedStates[c][I]===null){this.deletedStates[c][I]={};for(const D in this.state[c][I])T[D]||(this.deletedStates[c][I][D]=null)}else for(const D in T)this.deletedStates[c]&&this.deletedStates[c][I]&&this.deletedStates[c][I][D]===null&&delete this.deletedStates[c][I][D]}removeFeatureState(c,y,T){if(this.deletedStates[c]===null)return;const I=String(y);if(this.deletedStates[c]=this.deletedStates[c]||{},T&&y!==void 0)this.deletedStates[c][I]!==null&&(this.deletedStates[c][I]=this.deletedStates[c][I]||{},this.deletedStates[c][I][T]=null);else if(y!==void 0)if(this.stateChanges[c]&&this.stateChanges[c][I])for(T in this.deletedStates[c][I]={},this.stateChanges[c][I])this.deletedStates[c][I][T]=null;else this.deletedStates[c][I]=null;else this.deletedStates[c]=null}getState(c,y){const T=String(y),I=a.e({},(this.state[c]||{})[T],(this.stateChanges[c]||{})[T]);if(this.deletedStates[c]===null)return{};if(this.deletedStates[c]){const D=this.deletedStates[c][y];if(D===null)return{};for(const U in D)delete I[U]}return I}initializeTileState(c,y){c.setFeatureState(this.state,y)}coalesceChanges(c,y){const T={};for(const I in this.stateChanges){this.state[I]=this.state[I]||{};const D={};for(const U in this.stateChanges[I])this.state[I][U]||(this.state[I][U]={}),a.e(this.state[I][U],this.stateChanges[I][U]),D[U]=this.state[I][U];T[I]=D}for(const I in this.deletedStates){this.state[I]=this.state[I]||{};const D={};if(this.deletedStates[I]===null)for(const U in this.state[I])D[U]={},this.state[I][U]={};else for(const U in this.deletedStates[I]){if(this.deletedStates[I][U]===null)this.state[I][U]={};else for(const q of Object.keys(this.deletedStates[I][U]))delete this.state[I][U][q];D[U]=this.state[I][U]}T[I]=T[I]||{},a.e(T[I],D)}if(this.stateChanges={},this.deletedStates={},Object.keys(T).length!==0)for(const I in c)c[I].setFeatureState(T,y)}}class ht extends a.E{constructor(c,y,T){super(),this.id=c,this.dispatcher=T,this.on("data",I=>this._dataHandler(I)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((I,D,U,q)=>{const K=new(Rn(D.type))(I,D,U,q);if(K.id!==I)throw new Error(`Expected Source id to be ${I} instead of ${K.id}`);return K})(c,y,T,this),this._tiles={},this._cache=new Et(0,I=>this._unloadTile(I)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new qt,this._didEmitContent=!1,this._updated=!1}onAdd(c){this.map=c,this._maxTileCacheSize=c?c._maxTileCacheSize:null,this._maxTileCacheZoomLevels=c?c._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(c)}onRemove(c){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(c)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const c in this._tiles){const y=this._tiles[c];if(y.state!=="loaded"&&y.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const c=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,c&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(c,y,T){return a._(this,void 0,void 0,function*(){try{yield this._source.loadTile(c),this._tileLoaded(c,y,T)}catch(I){c.state="errored",I.status!==404?this._source.fire(new a.j(I,{tile:c})):this.update(this.transform,this.terrain)}})}_unloadTile(c){this._source.unloadTile&&this._source.unloadTile(c)}_abortTile(c){this._source.abortTile&&this._source.abortTile(c),this._source.fire(new a.k("dataabort",{tile:c,coord:c.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(c){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const y in this._tiles){const T=this._tiles[y];T.upload(c),T.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(c=>c.tileID).sort(Ne).map(c=>c.key)}getRenderableIds(c){const y=[];for(const T in this._tiles)this._isIdRenderable(T,c)&&y.push(this._tiles[T]);return c?y.sort((T,I)=>{const D=T.tileID,U=I.tileID,q=new a.P(D.canonical.x,D.canonical.y)._rotate(this.transform.angle),K=new a.P(U.canonical.x,U.canonical.y)._rotate(this.transform.angle);return D.overscaledZ-U.overscaledZ||K.y-q.y||K.x-q.x}).map(T=>T.tileID.key):y.map(T=>T.tileID).sort(Ne).map(T=>T.key)}hasRenderableParent(c){const y=this.findLoadedParent(c,0);return!!y&&this._isIdRenderable(y.tileID.key)}_isIdRenderable(c,y){return this._tiles[c]&&this._tiles[c].hasData()&&!this._coveredTiles[c]&&(y||!this._tiles[c].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const c in this._tiles)this._tiles[c].state!=="errored"&&this._reloadTile(c,"reloading")}}_reloadTile(c,y){return a._(this,void 0,void 0,function*(){const T=this._tiles[c];T&&(T.state!=="loading"&&(T.state=y),yield this._loadTile(T,c,y))})}_tileLoaded(c,y,T){c.timeAdded=p.now(),T==="expired"&&(c.refreshedUponExpiration=!0),this._setTileReloadTimer(y,c),this.getSource().type==="raster-dem"&&c.dem&&this._backfillDEM(c),this._state.initializeTileState(c,this.map?this.map.painter:null),c.aborted||this._source.fire(new a.k("data",{dataType:"source",tile:c,coord:c.tileID}))}_backfillDEM(c){const y=this.getRenderableIds();for(let I=0;I<y.length;I++){const D=y[I];if(c.neighboringTiles&&c.neighboringTiles[D]){const U=this.getTileByID(D);T(c,U),T(U,c)}}function T(I,D){I.needsHillshadePrepare=!0,I.needsTerrainPrepare=!0;let U=D.tileID.canonical.x-I.tileID.canonical.x;const q=D.tileID.canonical.y-I.tileID.canonical.y,K=Math.pow(2,I.tileID.canonical.z),te=D.tileID.key;U===0&&q===0||Math.abs(q)>1||(Math.abs(U)>1&&(Math.abs(U+K)===1?U+=K:Math.abs(U-K)===1&&(U-=K)),D.dem&&I.dem&&(I.dem.backfillBorder(D.dem,U,q),I.neighboringTiles&&I.neighboringTiles[te]&&(I.neighboringTiles[te].backfilled=!0)))}}getTile(c){return this.getTileByID(c.key)}getTileByID(c){return this._tiles[c]}_retainLoadedChildren(c,y,T,I){for(const D in this._tiles){let U=this._tiles[D];if(I[D]||!U.hasData()||U.tileID.overscaledZ<=y||U.tileID.overscaledZ>T)continue;let q=U.tileID;for(;U&&U.tileID.overscaledZ>y+1;){const te=U.tileID.scaledTo(U.tileID.overscaledZ-1);U=this._tiles[te.key],U&&U.hasData()&&(q=te)}let K=q;for(;K.overscaledZ>y;)if(K=K.scaledTo(K.overscaledZ-1),c[K.key]){I[q.key]=q;break}}}findLoadedParent(c,y){if(c.key in this._loadedParentTiles){const T=this._loadedParentTiles[c.key];return T&&T.tileID.overscaledZ>=y?T:null}for(let T=c.overscaledZ-1;T>=y;T--){const I=c.scaledTo(T),D=this._getLoadedTile(I);if(D)return D}}findLoadedSibling(c){return this._getLoadedTile(c)}_getLoadedTile(c){const y=this._tiles[c.key];return y&&y.hasData()?y:this._cache.getByKey(c.wrapped().key)}updateCacheSize(c){const y=Math.ceil(c.width/this._source.tileSize)+1,T=Math.ceil(c.height/this._source.tileSize)+1,I=Math.floor(y*T*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),D=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,I):I;this._cache.setMaxSize(D)}handleWrapJump(c){const y=Math.round((c-(this._prevLng===void 0?c:this._prevLng))/360);if(this._prevLng=c,y){const T={};for(const I in this._tiles){const D=this._tiles[I];D.tileID=D.tileID.unwrapTo(D.tileID.wrap+y),T[D.tileID.key]=D}this._tiles=T;for(const I in this._timers)clearTimeout(this._timers[I]),delete this._timers[I];for(const I in this._tiles)this._setTileReloadTimer(I,this._tiles[I])}}_updateCoveredAndRetainedTiles(c,y,T,I,D,U){const q={},K={},te=Object.keys(c),ce=p.now();for(const ae of te){const xe=c[ae],Pe=this._tiles[ae];if(!Pe||Pe.fadeEndTime!==0&&Pe.fadeEndTime<=ce)continue;const Ee=this.findLoadedParent(xe,y),$e=this.findLoadedSibling(xe),ze=Ee||$e||null;ze&&(this._addTile(ze.tileID),q[ze.tileID.key]=ze.tileID),K[ae]=xe}this._retainLoadedChildren(K,I,T,c);for(const ae in q)c[ae]||(this._coveredTiles[ae]=!0,c[ae]=q[ae]);if(U){const ae={},xe={};for(const Pe of D)this._tiles[Pe.key].hasData()?ae[Pe.key]=Pe:xe[Pe.key]=Pe;for(const Pe in xe){const Ee=xe[Pe].children(this._source.maxzoom);this._tiles[Ee[0].key]&&this._tiles[Ee[1].key]&&this._tiles[Ee[2].key]&&this._tiles[Ee[3].key]&&(ae[Ee[0].key]=c[Ee[0].key]=Ee[0],ae[Ee[1].key]=c[Ee[1].key]=Ee[1],ae[Ee[2].key]=c[Ee[2].key]=Ee[2],ae[Ee[3].key]=c[Ee[3].key]=Ee[3],delete xe[Pe])}for(const Pe in xe){const Ee=xe[Pe],$e=this.findLoadedParent(Ee,this._source.minzoom),ze=this.findLoadedSibling(Ee),Ge=$e||ze||null;if(Ge){ae[Ge.tileID.key]=c[Ge.tileID.key]=Ge.tileID;for(const nt in ae)ae[nt].isChildOf(Ge.tileID)&&delete ae[nt]}}for(const Pe in this._tiles)ae[Pe]||(this._coveredTiles[Pe]=!0)}}update(c,y){if(!this._sourceLoaded||this._paused)return;let T;this.transform=c,this.terrain=y,this.updateCacheSize(c),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?T=c.getVisibleUnwrappedCoordinates(this._source.tileID).map(ce=>new a.S(ce.canonical.z,ce.wrap,ce.canonical.z,ce.canonical.x,ce.canonical.y)):(T=c.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:y}),this._source.hasTile&&(T=T.filter(ce=>this._source.hasTile(ce)))):T=[];const I=c.coveringZoomLevel(this._source),D=Math.max(I-ht.maxOverzooming,this._source.minzoom),U=Math.max(I+ht.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const ce={};for(const ae of T)if(ae.canonical.z>this._source.minzoom){const xe=ae.scaledTo(ae.canonical.z-1);ce[xe.key]=xe;const Pe=ae.scaledTo(Math.max(this._source.minzoom,Math.min(ae.canonical.z,5)));ce[Pe.key]=Pe}T=T.concat(Object.values(ce))}const q=T.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,q&&this.fire(new a.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const K=this._updateRetainedTiles(T,I);pt(this._source.type)&&this._updateCoveredAndRetainedTiles(K,D,U,I,T,y);for(const ce in K)this._tiles[ce].clearFadeHold();const te=a.ab(this._tiles,K);for(const ce of te){const ae=this._tiles[ce];ae.hasSymbolBuckets&&!ae.holdingForFade()?ae.setHoldDuration(this.map._fadeDuration):ae.hasSymbolBuckets&&!ae.symbolFadeFinished()||this._removeTile(ce)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const c in this._tiles)this._tiles[c].holdingForFade()&&this._removeTile(c)}_updateRetainedTiles(c,y){var T;const I={},D={},U=Math.max(y-ht.maxOverzooming,this._source.minzoom),q=Math.max(y+ht.maxUnderzooming,this._source.minzoom),K={};for(const te of c){const ce=this._addTile(te);I[te.key]=te,ce.hasData()||y<this._source.maxzoom&&(K[te.key]=te)}this._retainLoadedChildren(K,y,q,I);for(const te of c){let ce=this._tiles[te.key];if(ce.hasData())continue;if(y+1>this._source.maxzoom){const xe=te.children(this._source.maxzoom)[0],Pe=this.getTile(xe);if(Pe&&Pe.hasData()){I[xe.key]=xe;continue}}else{const xe=te.children(this._source.maxzoom);if(I[xe[0].key]&&I[xe[1].key]&&I[xe[2].key]&&I[xe[3].key])continue}let ae=ce.wasRequested();for(let xe=te.overscaledZ-1;xe>=U;--xe){const Pe=te.scaledTo(xe);if(D[Pe.key])break;if(D[Pe.key]=!0,ce=this.getTile(Pe),!ce&&ae&&(ce=this._addTile(Pe)),ce){const Ee=ce.hasData();if((Ee||!(!((T=this.map)===null||T===void 0)&&T.cancelPendingTileRequestsWhileZooming)||ae)&&(I[Pe.key]=Pe),ae=ce.wasRequested(),Ee)break}}}return I}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const c in this._tiles){const y=[];let T,I=this._tiles[c].tileID;for(;I.overscaledZ>0;){if(I.key in this._loadedParentTiles){T=this._loadedParentTiles[I.key];break}y.push(I.key);const D=I.scaledTo(I.overscaledZ-1);if(T=this._getLoadedTile(D),T)break;I=D}for(const D of y)this._loadedParentTiles[D]=T}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const c in this._tiles){const y=this._tiles[c].tileID,T=this._getLoadedTile(y);this._loadedSiblingTiles[y.key]=T}}_addTile(c){let y=this._tiles[c.key];if(y)return y;y=this._cache.getAndRemove(c),y&&(this._setTileReloadTimer(c.key,y),y.tileID=c,this._state.initializeTileState(y,this.map?this.map.painter:null),this._cacheTimers[c.key]&&(clearTimeout(this._cacheTimers[c.key]),delete this._cacheTimers[c.key],this._setTileReloadTimer(c.key,y)));const T=y;return y||(y=new en(c,this._source.tileSize*c.overscaleFactor()),this._loadTile(y,c.key,y.state)),y.uses++,this._tiles[c.key]=y,T||this._source.fire(new a.k("dataloading",{tile:y,coord:y.tileID,dataType:"source"})),y}_setTileReloadTimer(c,y){c in this._timers&&(clearTimeout(this._timers[c]),delete this._timers[c]);const T=y.getExpiryTimeout();T&&(this._timers[c]=setTimeout(()=>{this._reloadTile(c,"expired"),delete this._timers[c]},T))}_removeTile(c){const y=this._tiles[c];y&&(y.uses--,delete this._tiles[c],this._timers[c]&&(clearTimeout(this._timers[c]),delete this._timers[c]),y.uses>0||(y.hasData()&&y.state!=="reloading"?this._cache.add(y.tileID,y,y.getExpiryTimeout()):(y.aborted=!0,this._abortTile(y),this._unloadTile(y))))}_dataHandler(c){const y=c.sourceDataType;c.dataType==="source"&&y==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&c.dataType==="source"&&y==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const c in this._tiles)this._removeTile(c);this._cache.reset()}tilesIn(c,y,T){const I=[],D=this.transform;if(!D)return I;const U=T?D.getCameraQueryGeometry(c):c,q=c.map(Ee=>D.pointCoordinate(Ee,this.terrain)),K=U.map(Ee=>D.pointCoordinate(Ee,this.terrain)),te=this.getIds();let ce=1/0,ae=1/0,xe=-1/0,Pe=-1/0;for(const Ee of K)ce=Math.min(ce,Ee.x),ae=Math.min(ae,Ee.y),xe=Math.max(xe,Ee.x),Pe=Math.max(Pe,Ee.y);for(let Ee=0;Ee<te.length;Ee++){const $e=this._tiles[te[Ee]];if($e.holdingForFade())continue;const ze=$e.tileID,Ge=Math.pow(2,D.zoom-$e.tileID.overscaledZ),nt=y*$e.queryPadding*a.X/$e.tileSize/Ge,Fe=[ze.getTilePoint(new a.Z(ce,ae)),ze.getTilePoint(new a.Z(xe,Pe))];if(Fe[0].x-nt<a.X&&Fe[0].y-nt<a.X&&Fe[1].x+nt>=0&&Fe[1].y+nt>=0){const ct=q.map(Pt=>ze.getTilePoint(Pt)),yt=K.map(Pt=>ze.getTilePoint(Pt));I.push({tile:$e,tileID:ze,queryGeometry:ct,cameraQueryGeometry:yt,scale:Ge})}}return I}getVisibleCoordinates(c){const y=this.getRenderableIds(c).map(T=>this._tiles[T].tileID);for(const T of y)T.posMatrix=this.transform.calculatePosMatrix(T.toUnwrapped());return y}hasTransition(){if(this._source.hasTransition())return!0;if(pt(this._source.type)){const c=p.now();for(const y in this._tiles)if(this._tiles[y].fadeEndTime>=c)return!0}return!1}setFeatureState(c,y,T){this._state.updateState(c=c||"_geojsonTileLayer",y,T)}removeFeatureState(c,y,T){this._state.removeFeatureState(c=c||"_geojsonTileLayer",y,T)}getFeatureState(c,y){return this._state.getState(c=c||"_geojsonTileLayer",y)}setDependencies(c,y,T){const I=this._tiles[c];I&&I.setDependencies(y,T)}reloadTilesForDependencies(c,y){for(const T in this._tiles)this._tiles[T].hasDependency(c,y)&&this._reloadTile(T,"reloading");this._cache.filter(T=>!T.hasDependency(c,y))}}function Ne(L,c){const y=Math.abs(2*L.wrap)-+(L.wrap<0),T=Math.abs(2*c.wrap)-+(c.wrap<0);return L.overscaledZ-c.overscaledZ||T-y||c.canonical.y-L.canonical.y||c.canonical.x-L.canonical.x}function pt(L){return L==="raster"||L==="image"||L==="video"}ht.maxOverzooming=10,ht.maxUnderzooming=3;class Te{constructor(c,y){this.reset(c,y)}reset(c,y){this.points=c||[],this._distances=[0];for(let T=1;T<this.points.length;T++)this._distances[T]=this._distances[T-1]+this.points[T].dist(this.points[T-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(y||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(c){if(this.points.length===1)return this.points[0];c=a.ac(c,0,1);let y=1,T=this._distances[y];const I=c*this.paddedLength+this.padding;for(;T<I&&y<this._distances.length;)T=this._distances[++y];const D=y-1,U=this._distances[D],q=T-U,K=q>0?(I-U)/q:0;return this.points[D].mult(1-K).add(this.points[y].mult(K))}}function xt(L,c){let y=!0;return L==="always"||L!=="never"&&c!=="never"||(y=!1),y}class tn{constructor(c,y,T){const I=this.boxCells=[],D=this.circleCells=[];this.xCellCount=Math.ceil(c/T),this.yCellCount=Math.ceil(y/T);for(let U=0;U<this.xCellCount*this.yCellCount;U++)I.push([]),D.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=c,this.height=y,this.xScale=this.xCellCount/c,this.yScale=this.yCellCount/y,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(c,y,T,I,D){this._forEachCell(y,T,I,D,this._insertBoxCell,this.boxUid++),this.boxKeys.push(c),this.bboxes.push(y),this.bboxes.push(T),this.bboxes.push(I),this.bboxes.push(D)}insertCircle(c,y,T,I){this._forEachCell(y-I,T-I,y+I,T+I,this._insertCircleCell,this.circleUid++),this.circleKeys.push(c),this.circles.push(y),this.circles.push(T),this.circles.push(I)}_insertBoxCell(c,y,T,I,D,U){this.boxCells[D].push(U)}_insertCircleCell(c,y,T,I,D,U){this.circleCells[D].push(U)}_query(c,y,T,I,D,U,q){if(T<0||c>this.width||I<0||y>this.height)return[];const K=[];if(c<=0&&y<=0&&this.width<=T&&this.height<=I){if(D)return[{key:null,x1:c,y1:y,x2:T,y2:I}];for(let te=0;te<this.boxKeys.length;te++)K.push({key:this.boxKeys[te],x1:this.bboxes[4*te],y1:this.bboxes[4*te+1],x2:this.bboxes[4*te+2],y2:this.bboxes[4*te+3]});for(let te=0;te<this.circleKeys.length;te++){const ce=this.circles[3*te],ae=this.circles[3*te+1],xe=this.circles[3*te+2];K.push({key:this.circleKeys[te],x1:ce-xe,y1:ae-xe,x2:ce+xe,y2:ae+xe})}}else this._forEachCell(c,y,T,I,this._queryCell,K,{hitTest:D,overlapMode:U,seenUids:{box:{},circle:{}}},q);return K}query(c,y,T,I){return this._query(c,y,T,I,!1,null)}hitTest(c,y,T,I,D,U){return this._query(c,y,T,I,!0,D,U).length>0}hitTestCircle(c,y,T,I,D){const U=c-T,q=c+T,K=y-T,te=y+T;if(q<0||U>this.width||te<0||K>this.height)return!1;const ce=[];return this._forEachCell(U,K,q,te,this._queryCellCircle,ce,{hitTest:!0,overlapMode:I,circle:{x:c,y,radius:T},seenUids:{box:{},circle:{}}},D),ce.length>0}_queryCell(c,y,T,I,D,U,q,K){const{seenUids:te,hitTest:ce,overlapMode:ae}=q,xe=this.boxCells[D];if(xe!==null){const Ee=this.bboxes;for(const $e of xe)if(!te.box[$e]){te.box[$e]=!0;const ze=4*$e,Ge=this.boxKeys[$e];if(c<=Ee[ze+2]&&y<=Ee[ze+3]&&T>=Ee[ze+0]&&I>=Ee[ze+1]&&(!K||K(Ge))&&(!ce||!xt(ae,Ge.overlapMode))&&(U.push({key:Ge,x1:Ee[ze],y1:Ee[ze+1],x2:Ee[ze+2],y2:Ee[ze+3]}),ce))return!0}}const Pe=this.circleCells[D];if(Pe!==null){const Ee=this.circles;for(const $e of Pe)if(!te.circle[$e]){te.circle[$e]=!0;const ze=3*$e,Ge=this.circleKeys[$e];if(this._circleAndRectCollide(Ee[ze],Ee[ze+1],Ee[ze+2],c,y,T,I)&&(!K||K(Ge))&&(!ce||!xt(ae,Ge.overlapMode))){const nt=Ee[ze],Fe=Ee[ze+1],ct=Ee[ze+2];if(U.push({key:Ge,x1:nt-ct,y1:Fe-ct,x2:nt+ct,y2:Fe+ct}),ce)return!0}}}return!1}_queryCellCircle(c,y,T,I,D,U,q,K){const{circle:te,seenUids:ce,overlapMode:ae}=q,xe=this.boxCells[D];if(xe!==null){const Ee=this.bboxes;for(const $e of xe)if(!ce.box[$e]){ce.box[$e]=!0;const ze=4*$e,Ge=this.boxKeys[$e];if(this._circleAndRectCollide(te.x,te.y,te.radius,Ee[ze+0],Ee[ze+1],Ee[ze+2],Ee[ze+3])&&(!K||K(Ge))&&!xt(ae,Ge.overlapMode))return U.push(!0),!0}}const Pe=this.circleCells[D];if(Pe!==null){const Ee=this.circles;for(const $e of Pe)if(!ce.circle[$e]){ce.circle[$e]=!0;const ze=3*$e,Ge=this.circleKeys[$e];if(this._circlesCollide(Ee[ze],Ee[ze+1],Ee[ze+2],te.x,te.y,te.radius)&&(!K||K(Ge))&&!xt(ae,Ge.overlapMode))return U.push(!0),!0}}}_forEachCell(c,y,T,I,D,U,q,K){const te=this._convertToXCellCoord(c),ce=this._convertToYCellCoord(y),ae=this._convertToXCellCoord(T),xe=this._convertToYCellCoord(I);for(let Pe=te;Pe<=ae;Pe++)for(let Ee=ce;Ee<=xe;Ee++)if(D.call(this,c,y,T,I,this.xCellCount*Ee+Pe,U,q,K))return}_convertToXCellCoord(c){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(c*this.xScale)))}_convertToYCellCoord(c){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(c*this.yScale)))}_circlesCollide(c,y,T,I,D,U){const q=I-c,K=D-y,te=T+U;return te*te>q*q+K*K}_circleAndRectCollide(c,y,T,I,D,U,q){const K=(U-I)/2,te=Math.abs(c-(I+K));if(te>K+T)return!1;const ce=(q-D)/2,ae=Math.abs(y-(D+ce));if(ae>ce+T)return!1;if(te<=K||ae<=ce)return!0;const xe=te-K,Pe=ae-ce;return xe*xe+Pe*Pe<=T*T}}function Xe(L,c,y,T,I){const D=a.H();return c?(a.K(D,D,[1/I,1/I,1]),y||a.ad(D,D,T.angle)):a.L(D,T.labelPlaneMatrix,L),D}function Yt(L,c,y,T,I){if(c){const D=a.ae(L);return a.K(D,D,[I,I,1]),y||a.ad(D,D,-T.angle),D}return T.glCoordMatrix}function ve(L,c,y){let T;y?(T=[L.x,L.y,y(L.x,L.y),1],a.af(T,T,c)):(T=[L.x,L.y,0,1],function(D,U,q){const K=U[0],te=U[1];D[0]=q[0]*K+q[4]*te+q[12],D[1]=q[1]*K+q[5]*te+q[13],D[3]=q[3]*K+q[7]*te+q[15]}(T,T,c));const I=T[3];return{point:new a.P(T[0]/I,T[1]/I),signedDistanceFromCamera:I,isOccluded:!1}}function ie(L,c){return .5+L/c*.5}function se(L,c){return L.x>=-c[0]&&L.x<=c[0]&&L.y>=-c[1]&&L.y<=c[1]}function Se(L,c,y,T,I,D,U,q,K,te,ce,ae,xe,Pe,Ee){const $e=T?L.textSizeData:L.iconSizeData,ze=a.ag($e,y.transform.zoom),Ge=[256/y.width*2+1,256/y.height*2+1],nt=T?L.text.dynamicLayoutVertexArray:L.icon.dynamicLayoutVertexArray;nt.clear();const Fe=L.lineVertexArray,ct=T?L.text.placedSymbolArray:L.icon.placedSymbolArray,yt=y.transform.width/y.transform.height;let Pt=!1;for(let Gt=0;Gt<ct.length;Gt++){const on=ct.get(Gt);if(on.hidden||on.writingMode===a.ah.vertical&&!Pt){zn(on.numGlyphs,nt);continue}Pt=!1;const vn=ve(new a.P(on.anchorX,on.anchorY),c,Ee);if(!se(vn.point,Ge)){zn(on.numGlyphs,nt);continue}const _n=ie(y.transform.cameraToCenterDistance,vn.signedDistanceFromCamera),sn=a.ai($e,ze,on),cn=U?sn/_n:sn*_n,Cn={getElevation:Ee,labelPlaneMatrix:I,lineVertexArray:Fe,pitchWithMap:U,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:te,tileAnchorPoint:new a.P(on.anchorX,on.anchorY),unwrappedTileID:ce,width:ae,height:xe,translation:Pe},ar=Ze(Cn,on,cn,!1,q,c,D,L.glyphOffsetArray,nt,yt,K);Pt=ar.useVertical,(ar.notEnoughRoom||Pt||ar.needsFlipping&&Ze(Cn,on,cn,!0,q,c,D,L.glyphOffsetArray,nt,yt,K).notEnoughRoom)&&zn(on.numGlyphs,nt)}T?L.text.dynamicLayoutVertexBuffer.updateData(nt):L.icon.dynamicLayoutVertexBuffer.updateData(nt)}function De(L,c,y,T,I,D,U,q){const K=D.glyphStartIndex+D.numGlyphs,te=D.lineStartIndex,ce=D.lineStartIndex+D.lineLength,ae=c.getoffsetX(D.glyphStartIndex),xe=c.getoffsetX(K-1),Pe=ln(L*ae,y,T,I,D.segment,te,ce,q,U);if(!Pe)return null;const Ee=ln(L*xe,y,T,I,D.segment,te,ce,q,U);return Ee?q.projectionCache.anyProjectionOccluded?null:{first:Pe,last:Ee}:null}function We(L,c,y,T){return L===a.ah.horizontal&&Math.abs(y.y-c.y)>Math.abs(y.x-c.x)*T?{useVertical:!0}:(L===a.ah.vertical?c.y<y.y:c.x>y.x)?{needsFlipping:!0}:null}function Ze(L,c,y,T,I,D,U,q,K,te,ce){const ae=y/24,xe=c.lineOffsetX*ae,Pe=c.lineOffsetY*ae;let Ee;if(c.numGlyphs>1){const $e=c.glyphStartIndex+c.numGlyphs,ze=c.lineStartIndex,Ge=c.lineStartIndex+c.lineLength,nt=De(ae,q,xe,Pe,T,c,ce,L);if(!nt)return{notEnoughRoom:!0};const Fe=ve(nt.first.point,U,L.getElevation).point,ct=ve(nt.last.point,U,L.getElevation).point;if(I&&!T){const yt=We(c.writingMode,Fe,ct,te);if(yt)return yt}Ee=[nt.first];for(let yt=c.glyphStartIndex+1;yt<$e-1;yt++)Ee.push(ln(ae*q.getoffsetX(yt),xe,Pe,T,c.segment,ze,Ge,L,ce));Ee.push(nt.last)}else{if(I&&!T){const ze=ve(L.tileAnchorPoint,D,L.getElevation).point,Ge=c.lineStartIndex+c.segment+1,nt=new a.P(L.lineVertexArray.getx(Ge),L.lineVertexArray.gety(Ge)),Fe=ve(nt,D,L.getElevation),ct=Fe.signedDistanceFromCamera>0?Fe.point:function(Pt,Gt,on,vn,_n,sn){return tt(Pt,Gt,on,1,_n,sn)}(L.tileAnchorPoint,nt,ze,0,D,L),yt=We(c.writingMode,ze,ct,te);if(yt)return yt}const $e=ln(ae*q.getoffsetX(c.glyphStartIndex),xe,Pe,T,c.segment,c.lineStartIndex,c.lineStartIndex+c.lineLength,L,ce);if(!$e||L.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Ee=[$e]}for(const $e of Ee)a.aj(K,$e.point,$e.angle);return{}}function tt(L,c,y,T,I,D){const U=L.add(L.sub(c)._unit()),q=I!==void 0?ve(U,I,D.getElevation).point:At(U.x,U.y,D).point,K=y.sub(q);return y.add(K._mult(T/K.mag()))}function Ve(L,c,y){const T=c.projectionCache;if(T.projections[L])return T.projections[L];const I=new a.P(c.lineVertexArray.getx(L),c.lineVertexArray.gety(L)),D=At(I.x,I.y,c);if(D.signedDistanceFromCamera>0)return T.projections[L]=D.point,T.anyProjectionOccluded=T.anyProjectionOccluded||D.isOccluded,D.point;const U=L-y.direction;return function(q,K,te,ce,ae){return tt(q,K,te,ce,void 0,ae)}(y.distanceFromAnchor===0?c.tileAnchorPoint:new a.P(c.lineVertexArray.getx(U),c.lineVertexArray.gety(U)),I,y.previousVertex,y.absOffsetX-y.distanceFromAnchor+1,c)}function At(L,c,y){const T=L+y.translation[0],I=c+y.translation[1];let D;return!y.pitchWithMap&&y.projection.useSpecialProjectionForSymbols?(D=y.projection.projectTileCoordinates(T,I,y.unwrappedTileID,y.getElevation),D.point.x=(.5*D.point.x+.5)*y.width,D.point.y=(.5*-D.point.y+.5)*y.height):(D=ve(new a.P(T,I),y.labelPlaneMatrix,y.getElevation),D.isOccluded=!1),D}function Dt(L,c,y){return L._unit()._perp()._mult(c*y)}function Ct(L,c,y,T,I,D,U,q,K){if(q.projectionCache.offsets[L])return q.projectionCache.offsets[L];const te=y.add(c);if(L+K.direction<T||L+K.direction>=I)return q.projectionCache.offsets[L]=te,te;const ce=Ve(L+K.direction,q,K),ae=Dt(ce.sub(y),U,K.direction),xe=y.add(ae),Pe=ce.add(ae);return q.projectionCache.offsets[L]=a.ak(D,te,xe,Pe)||te,q.projectionCache.offsets[L]}function ln(L,c,y,T,I,D,U,q,K){const te=T?L-c:L+c;let ce=te>0?1:-1,ae=0;T&&(ce*=-1,ae=Math.PI),ce<0&&(ae+=Math.PI);let xe,Pe=ce>0?D+I:D+I+1;q.projectionCache.cachedAnchorPoint?xe=q.projectionCache.cachedAnchorPoint:(xe=At(q.tileAnchorPoint.x,q.tileAnchorPoint.y,q).point,q.projectionCache.cachedAnchorPoint=xe);let Ee,$e,ze=xe,Ge=xe,nt=0,Fe=0;const ct=Math.abs(te),yt=[];let Pt;for(;nt+Fe<=ct;){if(Pe+=ce,Pe<D||Pe>=U)return null;nt+=Fe,Ge=ze,$e=Ee;const vn={absOffsetX:ct,direction:ce,distanceFromAnchor:nt,previousVertex:Ge};if(ze=Ve(Pe,q,vn),y===0)yt.push(Ge),Pt=ze.sub(Ge);else{let _n;const sn=ze.sub(Ge);_n=sn.mag()===0?Dt(Ve(Pe+ce,q,vn).sub(ze),y,ce):Dt(sn,y,ce),$e||($e=Ge.add(_n)),Ee=Ct(Pe,_n,ze,D,U,$e,y,q,vn),yt.push($e),Pt=Ee.sub($e)}Fe=Pt.mag()}const Gt=Pt._mult((ct-nt)/Fe)._add($e||Ge),on=ae+Math.atan2(ze.y-Ge.y,ze.x-Ge.x);return yt.push(Gt),{point:Gt,angle:K?on:0,path:yt}}const Sn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function zn(L,c){for(let y=0;y<L;y++){const T=c.length;c.resize(T+4),c.float32.set(Sn,3*T)}}const rr=100;class Cr{constructor(c,y,T=new tn(c.width+200,c.height+200,25),I=new tn(c.width+200,c.height+200,25)){this.transform=c,this.mapProjection=y,this.grid=T,this.ignoredGrid=I,this.pitchFactor=Math.cos(c._pitch)*c.cameraToCenterDistance,this.screenRightBoundary=c.width+rr,this.screenBottomBoundary=c.height+rr,this.gridRightBoundary=c.width+200,this.gridBottomBoundary=c.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(c,y,T,I,D,U,q,K,te,ce,ae){const xe=c.anchorPointX+K[0],Pe=c.anchorPointY+K[1],Ee=this.projectAndGetPerspectiveRatio(I,xe,Pe,D,ce),$e=this._projectCollisionBox(c,T,I,D,U,q,K,Ee,ce,ae),[ze,Ge,nt,Fe]=$e.box;return this.mapProjection.useSpecialProjectionForSymbols&&(U?$e.allPointsOccluded:this.mapProjection.isOccluded(xe,Pe,D))||Ee.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(ze,Ge,nt,Fe)||y!=="always"&&this.grid.hitTest(ze,Ge,nt,Fe,y,te)?{box:[ze,Ge,nt,Fe],placeable:!1,offscreen:!1}:{box:[ze,Ge,nt,Fe],placeable:!0,offscreen:this.isOffscreen(ze,Ge,nt,Fe)}}placeCollisionCircles(c,y,T,I,D,U,q,K,te,ce,ae,xe,Pe,Ee,$e,ze){const Ge=[],nt=new a.P(y.anchorX,y.anchorY),Fe=this.getPerspectiveRatio(U,nt.x,nt.y,q,ze),ct=(ae?D/Fe:D*Fe)/a.ap,yt={getElevation:ze,labelPlaneMatrix:K,lineVertexArray:T,pitchWithMap:ae,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:nt,unwrappedTileID:q,width:this.transform.width,height:this.transform.height,translation:$e},Pt=De(ct,I,y.lineOffsetX*ct,y.lineOffsetY*ct,!1,y,!1,yt);let Gt=!1,on=!1,vn=!0;if(Pt){const _n=.5*Pe*Fe+Ee,sn=new a.P(-100,-100),cn=new a.P(this.screenRightBoundary,this.screenBottomBoundary),Cn=new Te,ar=Pt.first,un=Pt.last;let pn=[];for(let yr=ar.path.length-1;yr>=1;yr--)pn.push(ar.path[yr]);for(let yr=1;yr<un.path.length;yr++)pn.push(un.path[yr]);const or=2.5*_n;if(te){const yr=this.projectPathToScreenSpace(pn,yt,te);pn=yr.some(Er=>Er.signedDistanceFromCamera<=0)?[]:yr.map(Er=>Er.point)}let Pi=[];if(pn.length>0){const yr=pn[0].clone(),Er=pn[0].clone();for(let Ii=1;Ii<pn.length;Ii++)yr.x=Math.min(yr.x,pn[Ii].x),yr.y=Math.min(yr.y,pn[Ii].y),Er.x=Math.max(Er.x,pn[Ii].x),Er.y=Math.max(Er.y,pn[Ii].y);Pi=yr.x>=sn.x&&Er.x<=cn.x&&yr.y>=sn.y&&Er.y<=cn.y?[pn]:Er.x<sn.x||yr.x>cn.x||Er.y<sn.y||yr.y>cn.y?[]:a.al([pn],sn.x,sn.y,cn.x,cn.y)}for(const yr of Pi){Cn.reset(yr,.25*_n);let Er=0;Er=Cn.length<=.5*_n?1:Math.ceil(Cn.paddedLength/or)+1;for(let Ii=0;Ii<Er;Ii++){const rs=Ii/Math.max(Er-1,1),Js=Cn.lerp(rs),gi=Js.x+rr,is=Js.y+rr;Ge.push(gi,is,_n,0);const Vo=gi-_n,Oo=is-_n,wo=gi+_n,ba=is+_n;if(vn=vn&&this.isOffscreen(Vo,Oo,wo,ba),on=on||this.isInsideGrid(Vo,Oo,wo,ba),c!=="always"&&this.grid.hitTestCircle(gi,is,_n,c,xe)&&(Gt=!0,!ce))return{circles:[],offscreen:!1,collisionDetected:Gt}}}}return{circles:!ce&&Gt||!on||Fe<this.perspectiveRatioCutoff?[]:Ge,offscreen:vn,collisionDetected:Gt}}projectPathToScreenSpace(c,y,T){return c.map(I=>ve(I,T,y.getElevation))}queryRenderedSymbols(c){if(c.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const y=[];let T=1/0,I=1/0,D=-1/0,U=-1/0;for(const ce of c){const ae=new a.P(ce.x+rr,ce.y+rr);T=Math.min(T,ae.x),I=Math.min(I,ae.y),D=Math.max(D,ae.x),U=Math.max(U,ae.y),y.push(ae)}const q=this.grid.query(T,I,D,U).concat(this.ignoredGrid.query(T,I,D,U)),K={},te={};for(const ce of q){const ae=ce.key;if(K[ae.bucketInstanceId]===void 0&&(K[ae.bucketInstanceId]={}),K[ae.bucketInstanceId][ae.featureIndex])continue;const xe=[new a.P(ce.x1,ce.y1),new a.P(ce.x2,ce.y1),new a.P(ce.x2,ce.y2),new a.P(ce.x1,ce.y2)];a.am(y,xe)&&(K[ae.bucketInstanceId][ae.featureIndex]=!0,te[ae.bucketInstanceId]===void 0&&(te[ae.bucketInstanceId]=[]),te[ae.bucketInstanceId].push(ae.featureIndex))}return te}insertCollisionBox(c,y,T,I,D,U){(T?this.ignoredGrid:this.grid).insert({bucketInstanceId:I,featureIndex:D,collisionGroupID:U,overlapMode:y},c[0],c[1],c[2],c[3])}insertCollisionCircles(c,y,T,I,D,U){const q=T?this.ignoredGrid:this.grid,K={bucketInstanceId:I,featureIndex:D,collisionGroupID:U,overlapMode:y};for(let te=0;te<c.length;te+=4)q.insertCircle(K,c[te],c[te+1],c[te+2])}projectAndGetPerspectiveRatio(c,y,T,I,D){const U=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(y,T,I,D):ve(new a.P(y,T),c,D);return{point:new a.P((U.point.x+1)/2*this.transform.width+rr,(1-U.point.y)/2*this.transform.height+rr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/U.signedDistanceFromCamera*.5,isOccluded:U.isOccluded,signedDistanceFromCamera:U.signedDistanceFromCamera}}getPerspectiveRatio(c,y,T,I,D){const U=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(y,T,I,D):ve(new a.P(y,T),c,D);return .5+this.transform.cameraToCenterDistance/U.signedDistanceFromCamera*.5}isOffscreen(c,y,T,I){return T<rr||c>=this.screenRightBoundary||I<rr||y>this.screenBottomBoundary}isInsideGrid(c,y,T,I){return T>=0&&c<this.gridRightBoundary&&I>=0&&y<this.gridBottomBoundary}getViewportMatrix(){const c=a.an([]);return a.J(c,c,[-100,-100,0]),c}_projectCollisionBox(c,y,T,I,D,U,q,K,te,ce){const ae=y*K.perspectiveRatio;let xe=new a.P(1,0),Pe=new a.P(0,1);const Ee=new a.P(c.anchorPointX+q[0],c.anchorPointY+q[1]);if(U&&!D){const _n=this.projectAndGetPerspectiveRatio(T,Ee.x+1,Ee.y,I,te).point.sub(K.point).unit(),sn=Math.atan(_n.y/_n.x)+(_n.x<0?Math.PI:0),cn=Math.sin(sn),Cn=Math.cos(sn);xe=new a.P(Cn,cn),Pe=new a.P(-cn,Cn)}else if(!U&&D){const _n=-this.transform.angle,sn=Math.sin(_n),cn=Math.cos(_n);xe=new a.P(cn,sn),Pe=new a.P(-sn,cn)}let $e=K.point,ze=ae;if(D){$e=Ee;const _n=this.transform.zoom-Math.floor(this.transform.zoom);ze=Math.pow(2,-_n),ze*=this.mapProjection.getPitchedTextCorrection(this.transform,Ee,I),ce||(ze*=a.ac(.5+K.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}ce&&($e=$e.add(xe.mult(ce.x*ze)).add(Pe.mult(ce.y*ze)));const Ge=c.x1*ze,nt=c.x2*ze,Fe=(Ge+nt)/2,ct=c.y1*ze,yt=c.y2*ze,Pt=(ct+yt)/2,Gt=[{offsetX:Ge,offsetY:ct},{offsetX:Fe,offsetY:ct},{offsetX:nt,offsetY:ct},{offsetX:nt,offsetY:Pt},{offsetX:nt,offsetY:yt},{offsetX:Fe,offsetY:yt},{offsetX:Ge,offsetY:yt},{offsetX:Ge,offsetY:Pt}];let on=[];for(const{offsetX:_n,offsetY:sn}of Gt)on.push(new a.P($e.x+xe.x*_n+Pe.x*sn,$e.y+xe.y*_n+Pe.y*sn));let vn=!1;if(D){const _n=on.map(sn=>this.projectAndGetPerspectiveRatio(T,sn.x,sn.y,I,te));vn=_n.some(sn=>!sn.isOccluded),on=_n.map(sn=>sn.point)}else vn=!0;return{box:a.ao(on),allPointsOccluded:!vn}}}function ir(L,c,y){return c*(a.X/(L.tileSize*Math.pow(2,y-L.tileID.overscaledZ)))}class Yr{constructor(c,y,T,I){this.opacity=c?Math.max(0,Math.min(1,c.opacity+(c.placed?y:-y))):I&&T?1:0,this.placed=T}isHidden(){return this.opacity===0&&!this.placed}}class Ti{constructor(c,y,T,I,D){this.text=new Yr(c?c.text:null,y,T,D),this.icon=new Yr(c?c.icon:null,y,I,D)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Re{constructor(c,y,T){this.text=c,this.icon=y,this.skipFade=T}}class st{constructor(){this.invProjMatrix=a.H(),this.viewportMatrix=a.H(),this.circles=[]}}class Mt{constructor(c,y,T,I,D){this.bucketInstanceId=c,this.featureIndex=y,this.sourceLayerIndex=T,this.bucketIndex=I,this.tileID=D}}class ut{constructor(c){this.crossSourceCollisions=c,this.maxGroupID=0,this.collisionGroups={}}get(c){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[c]){const y=++this.maxGroupID;this.collisionGroups[c]={ID:y,predicate:T=>T.collisionGroupID===y}}return this.collisionGroups[c]}}function vt(L,c,y,T,I){const{horizontalAlign:D,verticalAlign:U}=a.au(L);return new a.P(-(D-.5)*c+T[0]*I,-(U-.5)*y+T[1]*I)}class mn{constructor(c,y,T,I,D,U){this.transform=c.clone(),this.terrain=T,this.collisionIndex=new Cr(this.transform,y),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=I,this.retainedQueryData={},this.collisionGroups=new ut(D),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=U,U&&(U.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(c){const y=this.terrain;return y?(T,I)=>y.getElevation(c,T,I):null}getBucketParts(c,y,T,I){const D=T.getBucket(y),U=T.latestFeatureIndex;if(!D||!U||y.id!==D.layerIds[0])return;const q=T.collisionBoxArray,K=D.layers[0].layout,te=D.layers[0].paint,ce=Math.pow(2,this.transform.zoom-T.tileID.overscaledZ),ae=T.tileSize/a.X,xe=T.tileID.toUnwrapped(),Pe=this.transform.calculatePosMatrix(xe),Ee=K.get("text-pitch-alignment")==="map",$e=K.get("text-rotation-alignment")==="map",ze=ir(T,1,this.transform.zoom),Ge=this.collisionIndex.mapProjection.translatePosition(this.transform,T,te.get("text-translate"),te.get("text-translate-anchor")),nt=this.collisionIndex.mapProjection.translatePosition(this.transform,T,te.get("icon-translate"),te.get("icon-translate-anchor")),Fe=Xe(Pe,Ee,$e,this.transform,ze);let ct=null;if(Ee){const Pt=Yt(Pe,Ee,$e,this.transform,ze);ct=a.L([],this.transform.labelPlaneMatrix,Pt)}this.retainedQueryData[D.bucketInstanceId]=new Mt(D.bucketInstanceId,U,D.sourceLayerIndex,D.index,T.tileID);const yt={bucket:D,layout:K,translationText:Ge,translationIcon:nt,posMatrix:Pe,unwrappedTileID:xe,textLabelPlaneMatrix:Fe,labelToScreenMatrix:ct,scale:ce,textPixelRatio:ae,holdingForFade:T.holdingForFade(),collisionBoxArray:q,partiallyEvaluatedTextSize:a.ag(D.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(D.sourceID)};if(I)for(const Pt of D.sortKeyRanges){const{sortKey:Gt,symbolInstanceStart:on,symbolInstanceEnd:vn}=Pt;c.push({sortKey:Gt,symbolInstanceStart:on,symbolInstanceEnd:vn,parameters:yt})}else c.push({symbolInstanceStart:0,symbolInstanceEnd:D.symbolInstances.length,parameters:yt})}attemptAnchorPlacement(c,y,T,I,D,U,q,K,te,ce,ae,xe,Pe,Ee,$e,ze,Ge,nt,Fe){const ct=a.aq[c.textAnchor],yt=[c.textOffset0,c.textOffset1],Pt=vt(ct,T,I,yt,D),Gt=this.collisionIndex.placeCollisionBox(y,xe,K,te,ce,q,U,ze,ae.predicate,Fe,Pt);if((!nt||this.collisionIndex.placeCollisionBox(nt,xe,K,te,ce,q,U,Ge,ae.predicate,Fe,Pt).placeable)&&Gt.placeable){let on;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Pe.crossTileID]&&this.prevPlacement.placements[Pe.crossTileID]&&this.prevPlacement.placements[Pe.crossTileID].text&&(on=this.prevPlacement.variableOffsets[Pe.crossTileID].anchor),Pe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Pe.crossTileID]={textOffset:yt,width:T,height:I,anchor:ct,textBoxScale:D,prevAnchor:on},this.markUsedJustification(Ee,ct,Pe,$e),Ee.allowVerticalPlacement&&(this.markUsedOrientation(Ee,$e,Pe),this.placedOrientations[Pe.crossTileID]=$e),{shift:Pt,placedGlyphBoxes:Gt}}}placeLayerBucketPart(c,y,T){const{bucket:I,layout:D,translationText:U,translationIcon:q,posMatrix:K,unwrappedTileID:te,textLabelPlaneMatrix:ce,labelToScreenMatrix:ae,textPixelRatio:xe,holdingForFade:Pe,collisionBoxArray:Ee,partiallyEvaluatedTextSize:$e,collisionGroup:ze}=c.parameters,Ge=D.get("text-optional"),nt=D.get("icon-optional"),Fe=a.ar(D,"text-overlap","text-allow-overlap"),ct=Fe==="always",yt=a.ar(D,"icon-overlap","icon-allow-overlap"),Pt=yt==="always",Gt=D.get("text-rotation-alignment")==="map",on=D.get("text-pitch-alignment")==="map",vn=D.get("icon-text-fit")!=="none",_n=D.get("symbol-z-order")==="viewport-y",sn=ct&&(Pt||!I.hasIconData()||nt),cn=Pt&&(ct||!I.hasTextData()||Ge);!I.collisionArrays&&Ee&&I.deserializeCollisionBoxes(Ee);const Cn=this._getTerrainElevationFunc(this.retainedQueryData[I.bucketInstanceId].tileID),ar=(un,pn,or)=>{var Pi,yr;if(y[un.crossTileID])return;if(Pe)return void(this.placements[un.crossTileID]=new Re(!1,!1,!1));let Er=!1,Ii=!1,rs=!0,Js=null,gi={box:null,placeable:!1,offscreen:null},is={box:null,placeable:!1,offscreen:null},Vo=null,Oo=null,wo=null,ba=0,jc=0,Kd=0;pn.textFeatureIndex?ba=pn.textFeatureIndex:un.useRuntimeCollisionCircles&&(ba=un.featureIndex),pn.verticalTextFeatureIndex&&(jc=pn.verticalTextFeatureIndex);const Gu=pn.textBox;if(Gu){const Qs=Vr=>{let Kr=a.ah.horizontal;if(I.allowVerticalPlacement&&!Vr&&this.prevPlacement){const ji=this.prevPlacement.placedOrientations[un.crossTileID];ji&&(this.placedOrientations[un.crossTileID]=ji,Kr=ji,this.markUsedOrientation(I,Kr,un))}return Kr},ni=(Vr,Kr)=>{if(I.allowVerticalPlacement&&un.numVerticalGlyphVertices>0&&pn.verticalTextBox){for(const ji of I.writingModes)if(ji===a.ah.vertical?(gi=Kr(),is=gi):gi=Vr(),gi&&gi.placeable)break}else gi=Vr()},vr=un.textAnchorOffsetStartIndex,li=un.textAnchorOffsetEndIndex;if(li===vr){const Vr=(Kr,ji)=>{const xi=this.collisionIndex.placeCollisionBox(Kr,Fe,xe,K,te,on,Gt,U,ze.predicate,Cn);return xi&&xi.placeable&&(this.markUsedOrientation(I,ji,un),this.placedOrientations[un.crossTileID]=ji),xi};ni(()=>Vr(Gu,a.ah.horizontal),()=>{const Kr=pn.verticalTextBox;return I.allowVerticalPlacement&&un.numVerticalGlyphVertices>0&&Kr?Vr(Kr,a.ah.vertical):{box:null,offscreen:null}}),Qs(gi&&gi.placeable)}else{let Vr=a.aq[(yr=(Pi=this.prevPlacement)===null||Pi===void 0?void 0:Pi.variableOffsets[un.crossTileID])===null||yr===void 0?void 0:yr.anchor];const Kr=(xi,qi,Ka)=>{const uc=xi.x2-xi.x1,hg=xi.y2-xi.y1,vv=un.textBoxScale,co=vn&&yt==="never"?qi:null;let uo=null,Zd=Fe==="never"?1:2,Jd="never";Vr&&Zd++;for(let qu=0;qu<Zd;qu++){for(let uf=vr;uf<li;uf++){const Mp=I.textAnchorOffsets.get(uf);if(Vr&&Mp.textAnchor!==Vr)continue;const Ll=this.attemptAnchorPlacement(Mp,xi,uc,hg,vv,Gt,on,xe,K,te,ze,Jd,un,I,Ka,U,q,co,Cn);if(Ll&&(uo=Ll.placedGlyphBoxes,uo&&uo.placeable))return Er=!0,Js=Ll.shift,uo}Vr?Vr=null:Jd=Fe}return T&&!uo&&(uo={box:this.collisionIndex.placeCollisionBox(Gu,"always",xe,K,te,on,Gt,U,ze.predicate,Cn,new a.P(0,0)).box,offscreen:!1,placeable:!1}),uo};ni(()=>Kr(Gu,pn.iconBox,a.ah.horizontal),()=>{const xi=pn.verticalTextBox;return I.allowVerticalPlacement&&(!gi||!gi.placeable)&&un.numVerticalGlyphVertices>0&&xi?Kr(xi,pn.verticalIconBox,a.ah.vertical):{box:null,occluded:!0,offscreen:null}}),gi&&(Er=gi.placeable,rs=gi.offscreen);const ji=Qs(gi&&gi.placeable);if(!Er&&this.prevPlacement){const xi=this.prevPlacement.variableOffsets[un.crossTileID];xi&&(this.variableOffsets[un.crossTileID]=xi,this.markUsedJustification(I,xi.anchor,un,ji))}}}if(Vo=gi,Er=Vo&&Vo.placeable,rs=Vo&&Vo.offscreen,un.useRuntimeCollisionCircles){const Qs=I.text.placedSymbolArray.get(un.centerJustifiedTextSymbolIndex),ni=a.ai(I.textSizeData,$e,Qs),vr=D.get("text-padding");Oo=this.collisionIndex.placeCollisionCircles(Fe,Qs,I.lineVertexArray,I.glyphOffsetArray,ni,K,te,ce,ae,T,on,ze.predicate,un.collisionCircleDiameter,vr,U,Cn),Oo.circles.length&&Oo.collisionDetected&&!T&&a.w("Collisions detected, but collision boxes are not shown"),Er=ct||Oo.circles.length>0&&!Oo.collisionDetected,rs=rs&&Oo.offscreen}if(pn.iconFeatureIndex&&(Kd=pn.iconFeatureIndex),pn.iconBox){const Qs=ni=>this.collisionIndex.placeCollisionBox(ni,yt,xe,K,te,on,Gt,q,ze.predicate,Cn,vn&&Js?Js:void 0);is&&is.placeable&&pn.verticalIconBox?(wo=Qs(pn.verticalIconBox),Ii=wo.placeable):(wo=Qs(pn.iconBox),Ii=wo.placeable),rs=rs&&wo.offscreen}const cc=Ge||un.numHorizontalGlyphVertices===0&&un.numVerticalGlyphVertices===0,dg=nt||un.numIconVertices===0;cc||dg?dg?cc||(Ii=Ii&&Er):Er=Ii&&Er:Ii=Er=Ii&&Er;const cf=Ii&&wo.placeable;if(Er&&Vo.placeable&&this.collisionIndex.insertCollisionBox(Vo.box,Fe,D.get("text-ignore-placement"),I.bucketInstanceId,is&&is.placeable&&jc?jc:ba,ze.ID),cf&&this.collisionIndex.insertCollisionBox(wo.box,yt,D.get("icon-ignore-placement"),I.bucketInstanceId,Kd,ze.ID),Oo&&Er&&this.collisionIndex.insertCollisionCircles(Oo.circles,Fe,D.get("text-ignore-placement"),I.bucketInstanceId,ba,ze.ID),T&&this.storeCollisionData(I.bucketInstanceId,or,pn,Vo,wo,Oo),un.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(I.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[un.crossTileID]=new Re(Er||sn,Ii||cn,rs||I.justReloaded),y[un.crossTileID]=!0};if(_n){if(c.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const un=I.getSortedSymbolIndexes(this.transform.angle);for(let pn=un.length-1;pn>=0;--pn){const or=un[pn];ar(I.symbolInstances.get(or),I.collisionArrays[or],or)}}else for(let un=c.symbolInstanceStart;un<c.symbolInstanceEnd;un++)ar(I.symbolInstances.get(un),I.collisionArrays[un],un);if(T&&I.bucketInstanceId in this.collisionCircleArrays){const un=this.collisionCircleArrays[I.bucketInstanceId];a.as(un.invProjMatrix,K),un.viewportMatrix=this.collisionIndex.getViewportMatrix()}I.justReloaded=!1}storeCollisionData(c,y,T,I,D,U){if(T.textBox||T.iconBox){let q,K;this.collisionBoxArrays.has(c)?q=this.collisionBoxArrays.get(c):(q=new Map,this.collisionBoxArrays.set(c,q)),q.has(y)?K=q.get(y):(K={text:null,icon:null},q.set(y,K)),T.textBox&&(K.text=I.box),T.iconBox&&(K.icon=D.box)}if(U){let q=this.collisionCircleArrays[c];q===void 0&&(q=this.collisionCircleArrays[c]=new st);for(let K=0;K<U.circles.length;K+=4)q.circles.push(U.circles[K+0]),q.circles.push(U.circles[K+1]),q.circles.push(U.circles[K+2]),q.circles.push(U.collisionDetected?1:0)}}markUsedJustification(c,y,T,I){let D;D=I===a.ah.vertical?T.verticalPlacedTextSymbolIndex:{left:T.leftJustifiedTextSymbolIndex,center:T.centerJustifiedTextSymbolIndex,right:T.rightJustifiedTextSymbolIndex}[a.at(y)];const U=[T.leftJustifiedTextSymbolIndex,T.centerJustifiedTextSymbolIndex,T.rightJustifiedTextSymbolIndex,T.verticalPlacedTextSymbolIndex];for(const q of U)q>=0&&(c.text.placedSymbolArray.get(q).crossTileID=D>=0&&q!==D?0:T.crossTileID)}markUsedOrientation(c,y,T){const I=y===a.ah.horizontal||y===a.ah.horizontalOnly?y:0,D=y===a.ah.vertical?y:0,U=[T.leftJustifiedTextSymbolIndex,T.centerJustifiedTextSymbolIndex,T.rightJustifiedTextSymbolIndex];for(const q of U)c.text.placedSymbolArray.get(q).placedOrientation=I;T.verticalPlacedTextSymbolIndex&&(c.text.placedSymbolArray.get(T.verticalPlacedTextSymbolIndex).placedOrientation=D)}commit(c){this.commitTime=c,this.zoomAtLastRecencyCheck=this.transform.zoom;const y=this.prevPlacement;let T=!1;this.prevZoomAdjustment=y?y.zoomAdjustment(this.transform.zoom):0;const I=y?y.symbolFadeChange(c):1,D=y?y.opacities:{},U=y?y.variableOffsets:{},q=y?y.placedOrientations:{};for(const K in this.placements){const te=this.placements[K],ce=D[K];ce?(this.opacities[K]=new Ti(ce,I,te.text,te.icon),T=T||te.text!==ce.text.placed||te.icon!==ce.icon.placed):(this.opacities[K]=new Ti(null,I,te.text,te.icon,te.skipFade),T=T||te.text||te.icon)}for(const K in D){const te=D[K];if(!this.opacities[K]){const ce=new Ti(te,I,!1,!1);ce.isHidden()||(this.opacities[K]=ce,T=T||te.text.placed||te.icon.placed)}}for(const K in U)this.variableOffsets[K]||!this.opacities[K]||this.opacities[K].isHidden()||(this.variableOffsets[K]=U[K]);for(const K in q)this.placedOrientations[K]||!this.opacities[K]||this.opacities[K].isHidden()||(this.placedOrientations[K]=q[K]);if(y&&y.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");T?this.lastPlacementChangeTime=c:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=y?y.lastPlacementChangeTime:c)}updateLayerOpacities(c,y){const T={};for(const I of y){const D=I.getBucket(c);D&&I.latestFeatureIndex&&c.id===D.layerIds[0]&&this.updateBucketOpacities(D,I.tileID,T,I.collisionBoxArray)}}updateBucketOpacities(c,y,T,I){c.hasTextData()&&(c.text.opacityVertexArray.clear(),c.text.hasVisibleVertices=!1),c.hasIconData()&&(c.icon.opacityVertexArray.clear(),c.icon.hasVisibleVertices=!1),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexArray.clear(),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexArray.clear();const D=c.layers[0],U=D.layout,q=new Ti(null,0,!1,!1,!0),K=U.get("text-allow-overlap"),te=U.get("icon-allow-overlap"),ce=D._unevaluatedLayout.hasValue("text-variable-anchor")||D._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ae=U.get("text-rotation-alignment")==="map",xe=U.get("text-pitch-alignment")==="map",Pe=U.get("icon-text-fit")!=="none",Ee=new Ti(null,0,K&&(te||!c.hasIconData()||U.get("icon-optional")),te&&(K||!c.hasTextData()||U.get("text-optional")),!0);!c.collisionArrays&&I&&(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData())&&c.deserializeCollisionBoxes(I);const $e=(Ge,nt,Fe)=>{for(let ct=0;ct<nt/4;ct++)Ge.opacityVertexArray.emplaceBack(Fe);Ge.hasVisibleVertices=Ge.hasVisibleVertices||Fe!==Gr},ze=this.collisionBoxArrays.get(c.bucketInstanceId);for(let Ge=0;Ge<c.symbolInstances.length;Ge++){const nt=c.symbolInstances.get(Ge),{numHorizontalGlyphVertices:Fe,numVerticalGlyphVertices:ct,crossTileID:yt}=nt;let Pt=this.opacities[yt];T[yt]?Pt=q:Pt||(Pt=Ee,this.opacities[yt]=Pt),T[yt]=!0;const Gt=nt.numIconVertices>0,on=this.placedOrientations[nt.crossTileID],vn=on===a.ah.vertical,_n=on===a.ah.horizontal||on===a.ah.horizontalOnly;if(Fe>0||ct>0){const cn=Lr(Pt.text);$e(c.text,Fe,vn?Gr:cn),$e(c.text,ct,_n?Gr:cn);const Cn=Pt.text.isHidden();[nt.rightJustifiedTextSymbolIndex,nt.centerJustifiedTextSymbolIndex,nt.leftJustifiedTextSymbolIndex].forEach(pn=>{pn>=0&&(c.text.placedSymbolArray.get(pn).hidden=Cn||vn?1:0)}),nt.verticalPlacedTextSymbolIndex>=0&&(c.text.placedSymbolArray.get(nt.verticalPlacedTextSymbolIndex).hidden=Cn||_n?1:0);const ar=this.variableOffsets[nt.crossTileID];ar&&this.markUsedJustification(c,ar.anchor,nt,on);const un=this.placedOrientations[nt.crossTileID];un&&(this.markUsedJustification(c,"left",nt,un),this.markUsedOrientation(c,un,nt))}if(Gt){const cn=Lr(Pt.icon),Cn=!(Pe&&nt.verticalPlacedIconSymbolIndex&&vn);nt.placedIconSymbolIndex>=0&&($e(c.icon,nt.numIconVertices,Cn?cn:Gr),c.icon.placedSymbolArray.get(nt.placedIconSymbolIndex).hidden=Pt.icon.isHidden()),nt.verticalPlacedIconSymbolIndex>=0&&($e(c.icon,nt.numVerticalIconVertices,Cn?Gr:cn),c.icon.placedSymbolArray.get(nt.verticalPlacedIconSymbolIndex).hidden=Pt.icon.isHidden())}const sn=ze&&ze.has(Ge)?ze.get(Ge):{text:null,icon:null};if(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData()){const cn=c.collisionArrays[Ge];if(cn){let Cn=new a.P(0,0);if(cn.textBox||cn.verticalTextBox){let ar=!0;if(ce){const un=this.variableOffsets[yt];un?(Cn=vt(un.anchor,un.width,un.height,un.textOffset,un.textBoxScale),ae&&Cn._rotate(xe?this.transform.angle:-this.transform.angle)):ar=!1}if(cn.textBox||cn.verticalTextBox){let un;cn.textBox&&(un=vn),cn.verticalTextBox&&(un=_n),kn(c.textCollisionBox.collisionVertexArray,Pt.text.placed,!ar||un,sn.text,Cn.x,Cn.y)}}if(cn.iconBox||cn.verticalIconBox){const ar=!!(!_n&&cn.verticalIconBox);let un;cn.iconBox&&(un=ar),cn.verticalIconBox&&(un=!ar),kn(c.iconCollisionBox.collisionVertexArray,Pt.icon.placed,un,sn.icon,Pe?Cn.x:0,Pe?Cn.y:0)}}}}if(c.sortFeatures(this.transform.angle),this.retainedQueryData[c.bucketInstanceId]&&(this.retainedQueryData[c.bucketInstanceId].featureSortOrder=c.featureSortOrder),c.hasTextData()&&c.text.opacityVertexBuffer&&c.text.opacityVertexBuffer.updateData(c.text.opacityVertexArray),c.hasIconData()&&c.icon.opacityVertexBuffer&&c.icon.opacityVertexBuffer.updateData(c.icon.opacityVertexArray),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexBuffer&&c.iconCollisionBox.collisionVertexBuffer.updateData(c.iconCollisionBox.collisionVertexArray),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexBuffer&&c.textCollisionBox.collisionVertexBuffer.updateData(c.textCollisionBox.collisionVertexArray),c.text.opacityVertexArray.length!==c.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${c.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${c.text.layoutVertexArray.length}) / 4`);if(c.icon.opacityVertexArray.length!==c.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${c.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${c.icon.layoutVertexArray.length}) / 4`);if(c.bucketInstanceId in this.collisionCircleArrays){const Ge=this.collisionCircleArrays[c.bucketInstanceId];c.placementInvProjMatrix=Ge.invProjMatrix,c.placementViewportMatrix=Ge.viewportMatrix,c.collisionCircleArray=Ge.circles,delete this.collisionCircleArrays[c.bucketInstanceId]}}symbolFadeChange(c){return this.fadeDuration===0?1:(c-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(c){return Math.max(0,(this.transform.zoom-c)/1.5)}hasTransitions(c){return this.stale||c-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(c,y){const T=this.zoomAtLastRecencyCheck===y?1-this.zoomAdjustment(y):1;return this.zoomAtLastRecencyCheck=y,this.commitTime+this.fadeDuration*T>c}setStale(){this.stale=!0}}function kn(L,c,y,T,I,D){T&&T.length!==0||(T=[0,0,0,0]);const U=T[0]-rr,q=T[1]-rr,K=T[2]-rr,te=T[3]-rr;L.emplaceBack(c?1:0,y?1:0,I||0,D||0,U,q),L.emplaceBack(c?1:0,y?1:0,I||0,D||0,K,q),L.emplaceBack(c?1:0,y?1:0,I||0,D||0,K,te),L.emplaceBack(c?1:0,y?1:0,I||0,D||0,U,te)}const tr=Math.pow(2,25),bn=Math.pow(2,24),mr=Math.pow(2,17),pr=Math.pow(2,16),Zn=Math.pow(2,9),$r=Math.pow(2,8),Jo=Math.pow(2,1);function Lr(L){if(L.opacity===0&&!L.placed)return 0;if(L.opacity===1&&L.placed)return 4294967295;const c=L.placed?1:0,y=Math.floor(127*L.opacity);return y*tr+c*bn+y*mr+c*pr+y*Zn+c*$r+y*Jo+c}const Gr=0;function sr(){return{isOccluded:(L,c,y)=>!1,getPitchedTextCorrection:(L,c,y)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(L,c,y,T){throw new Error("Not implemented.")},translatePosition:(L,c,y,T)=>function(I,D,U,q,K=!1){if(!U[0]&&!U[1])return[0,0];const te=K?q==="map"?I.angle:0:q==="viewport"?-I.angle:0;if(te){const ce=Math.sin(te),ae=Math.cos(te);U=[U[0]*ae-U[1]*ce,U[0]*ce+U[1]*ae]}return[K?U[0]:ir(D,U[0],I.zoom),K?U[1]:ir(D,U[1],I.zoom)]}(L,c,y,T),getCircleRadiusCorrection:L=>1}}class On{constructor(c){this._sortAcrossTiles=c.layout.get("symbol-z-order")!=="viewport-y"&&!c.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(c,y,T,I,D){const U=this._bucketParts;for(;this._currentTileIndex<c.length;)if(y.getBucketParts(U,I,c[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,D())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,U.sort((q,K)=>q.sortKey-K.sortKey));this._currentPartIndex<U.length;)if(y.placeLayerBucketPart(U[this._currentPartIndex],this._seenCrossTileIDs,T),this._currentPartIndex++,D())return!0;return!1}}class ti{constructor(c,y,T,I,D,U,q,K){this.placement=new mn(c,sr(),y,U,q,K),this._currentPlacementIndex=T.length-1,this._forceFullPlacement=I,this._showCollisionBoxes=D,this._done=!1}isDone(){return this._done}continuePlacement(c,y,T){const I=p.now(),D=()=>!this._forceFullPlacement&&p.now()-I>2;for(;this._currentPlacementIndex>=0;){const U=y[c[this._currentPlacementIndex]],q=this.placement.collisionIndex.transform.zoom;if(U.type==="symbol"&&(!U.minzoom||U.minzoom<=q)&&(!U.maxzoom||U.maxzoom>q)){if(this._inProgressLayer||(this._inProgressLayer=new On(U)),this._inProgressLayer.continuePlacement(T[U.source],this.placement,this._showCollisionBoxes,U,D))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(c){return this.placement.commit(c),this.placement}}const fr=512/a.X/2;class _i{constructor(c,y,T){this.tileID=c,this.bucketInstanceId=T,this._symbolsByKey={};const I=new Map;for(let D=0;D<y.length;D++){const U=y.get(D),q=U.key,K=I.get(q);K?K.push(U):I.set(q,[U])}for(const[D,U]of I){const q={positions:U.map(K=>({x:Math.floor(K.anchorX*fr),y:Math.floor(K.anchorY*fr)})),crossTileIDs:U.map(K=>K.crossTileID)};if(q.positions.length>128){const K=new a.av(q.positions.length,16,Uint16Array);for(const{x:te,y:ce}of q.positions)K.add(te,ce);K.finish(),delete q.positions,q.index=K}this._symbolsByKey[D]=q}}getScaledCoordinates(c,y){const{x:T,y:I,z:D}=this.tileID.canonical,{x:U,y:q,z:K}=y.canonical,te=fr/Math.pow(2,K-D),ce=(q*a.X+c.anchorY)*te,ae=I*a.X*fr;return{x:Math.floor((U*a.X+c.anchorX)*te-T*a.X*fr),y:Math.floor(ce-ae)}}findMatches(c,y,T){const I=this.tileID.canonical.z<y.canonical.z?1:Math.pow(2,this.tileID.canonical.z-y.canonical.z);for(let D=0;D<c.length;D++){const U=c.get(D);if(U.crossTileID)continue;const q=this._symbolsByKey[U.key];if(!q)continue;const K=this.getScaledCoordinates(U,y);if(q.index){const te=q.index.range(K.x-I,K.y-I,K.x+I,K.y+I).sort();for(const ce of te){const ae=q.crossTileIDs[ce];if(!T[ae]){T[ae]=!0,U.crossTileID=ae;break}}}else if(q.positions)for(let te=0;te<q.positions.length;te++){const ce=q.positions[te],ae=q.crossTileIDs[te];if(Math.abs(ce.x-K.x)<=I&&Math.abs(ce.y-K.y)<=I&&!T[ae]){T[ae]=!0,U.crossTileID=ae;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:c})=>c)}}class si{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class As{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(c){const y=Math.round((c-this.lng)/360);if(y!==0)for(const T in this.indexes){const I=this.indexes[T],D={};for(const U in I){const q=I[U];q.tileID=q.tileID.unwrapTo(q.tileID.wrap+y),D[q.tileID.key]=q}this.indexes[T]=D}this.lng=c}addBucket(c,y,T){if(this.indexes[c.overscaledZ]&&this.indexes[c.overscaledZ][c.key]){if(this.indexes[c.overscaledZ][c.key].bucketInstanceId===y.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(c.overscaledZ,this.indexes[c.overscaledZ][c.key])}for(let D=0;D<y.symbolInstances.length;D++)y.symbolInstances.get(D).crossTileID=0;this.usedCrossTileIDs[c.overscaledZ]||(this.usedCrossTileIDs[c.overscaledZ]={});const I=this.usedCrossTileIDs[c.overscaledZ];for(const D in this.indexes){const U=this.indexes[D];if(Number(D)>c.overscaledZ)for(const q in U){const K=U[q];K.tileID.isChildOf(c)&&K.findMatches(y.symbolInstances,c,I)}else{const q=U[c.scaledTo(Number(D)).key];q&&q.findMatches(y.symbolInstances,c,I)}}for(let D=0;D<y.symbolInstances.length;D++){const U=y.symbolInstances.get(D);U.crossTileID||(U.crossTileID=T.generate(),I[U.crossTileID]=!0)}return this.indexes[c.overscaledZ]===void 0&&(this.indexes[c.overscaledZ]={}),this.indexes[c.overscaledZ][c.key]=new _i(c,y.symbolInstances,y.bucketInstanceId),!0}removeBucketCrossTileIDs(c,y){for(const T of y.getCrossTileIDsLists())for(const I of T)delete this.usedCrossTileIDs[c][I]}removeStaleBuckets(c){let y=!1;for(const T in this.indexes){const I=this.indexes[T];for(const D in I)c[I[D].bucketInstanceId]||(this.removeBucketCrossTileIDs(T,I[D]),delete I[D],y=!0)}return y}}class fi{constructor(){this.layerIndexes={},this.crossTileIDs=new si,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(c,y,T){let I=this.layerIndexes[c.id];I===void 0&&(I=this.layerIndexes[c.id]=new As);let D=!1;const U={};I.handleWrapJump(T);for(const q of y){const K=q.getBucket(c);K&&c.id===K.layerIds[0]&&(K.bucketInstanceId||(K.bucketInstanceId=++this.maxBucketInstanceId),I.addBucket(q.tileID,K,this.crossTileIDs)&&(D=!0),U[K.bucketInstanceId]=!0)}return I.removeStaleBuckets(U)&&(D=!0),D}pruneUnusedLayers(c){const y={};c.forEach(T=>{y[T]=!0});for(const T in this.layerIndexes)y[T]||delete this.layerIndexes[T]}}const Bi=(L,c)=>a.t(L,c&&c.filter(y=>y.identifier!=="source.canvas")),Qo=a.aw();class ku extends a.E{constructor(c,y={}){super(),this._rtlPluginLoaded=()=>{for(const T in this.sourceCaches){const I=this.sourceCaches[T].getSource().type;I!=="vector"&&I!=="geojson"||this.sourceCaches[T].reload()}},this.map=c,this.dispatcher=new Je(lt(),c._getMapId()),this.dispatcher.registerMessageHandler("GG",(T,I)=>this.getGlyphs(T,I)),this.dispatcher.registerMessageHandler("GI",(T,I)=>this.getImages(T,I)),this.imageManager=new pe,this.imageManager.setEventedParent(this),this.glyphManager=new we(c._requestManager,y.localIdeographFontFamily),this.lineAtlas=new dt(256,512),this.crossTileSymbolIndex=new fi,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",a.ay()),Tn().on(ft,this._rtlPluginLoaded),this.on("data",T=>{if(T.dataType!=="source"||T.sourceDataType!=="metadata")return;const I=this.sourceCaches[T.sourceId];if(!I)return;const D=I.getSource();if(D&&D.vectorLayerIds)for(const U in this._layers){const q=this._layers[U];q.source===D.id&&this._validateLayer(q)}})}loadURL(c,y={},T){this.fire(new a.k("dataloading",{dataType:"style"})),y.validate=typeof y.validate!="boolean"||y.validate;const I=this.map._requestManager.transformRequest(c,"Style");this._loadStyleRequest=new AbortController;const D=this._loadStyleRequest;a.h(I,this._loadStyleRequest).then(U=>{this._loadStyleRequest=null,this._load(U.data,y,T)}).catch(U=>{this._loadStyleRequest=null,U&&!D.signal.aborted&&this.fire(new a.j(U))})}loadJSON(c,y={},T){this.fire(new a.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,p.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,y.validate=y.validate!==!1,this._load(c,y,T)}).catch(()=>{})}loadEmpty(){this.fire(new a.k("dataloading",{dataType:"style"})),this._load(Qo,{validate:!1})}_load(c,y,T){var I;const D=y.transformStyle?y.transformStyle(T,c):c;if(!y.validate||!Bi(this,a.u(D))){this._loaded=!0,this.stylesheet=D;for(const U in D.sources)this.addSource(U,D.sources[U],{validate:!1});D.sprite?this._loadSprite(D.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(D.glyphs),this._createLayers(),this.light=new be(this.stylesheet.light),this.sky=new je(this.stylesheet.sky),this.map.setTerrain((I=this.stylesheet.terrain)!==null&&I!==void 0?I:null),this.fire(new a.k("data",{dataType:"style"})),this.fire(new a.k("style.load"))}}_createLayers(){const c=a.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",c),this._order=c.map(y=>y.id),this._layers={},this._serializedLayers=null;for(const y of c){const T=a.aA(y);T.setEventedParent(this,{layer:{id:y.id}}),this._layers[y.id]=T}}_loadSprite(c,y=!1,T=void 0){let I;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(D,U,q,K){return a._(this,void 0,void 0,function*(){const te=J(D),ce=q>1?"@2x":"",ae={},xe={};for(const{id:Pe,url:Ee}of te){const $e=U.transformRequest(H(Ee,ce,".json"),"SpriteJSON");ae[Pe]=a.h($e,K);const ze=U.transformRequest(H(Ee,ce,".png"),"SpriteImage");xe[Pe]=A.getImage(ze,K)}return yield Promise.all([...Object.values(ae),...Object.values(xe)]),function(Pe,Ee){return a._(this,void 0,void 0,function*(){const $e={};for(const ze in Pe){$e[ze]={};const Ge=p.getImageCanvasContext((yield Ee[ze]).data),nt=(yield Pe[ze]).data;for(const Fe in nt){const{width:ct,height:yt,x:Pt,y:Gt,sdf:on,pixelRatio:vn,stretchX:_n,stretchY:sn,content:cn,textFitWidth:Cn,textFitHeight:ar}=nt[Fe];$e[ze][Fe]={data:null,pixelRatio:vn,sdf:on,stretchX:_n,stretchY:sn,content:cn,textFitWidth:Cn,textFitHeight:ar,spriteData:{width:ct,height:yt,x:Pt,y:Gt,context:Ge}}}}return $e})}(ae,xe)})}(c,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(D=>{if(this._spriteRequest=null,D)for(const U in D){this._spritesImagesIds[U]=[];const q=this._spritesImagesIds[U]?this._spritesImagesIds[U].filter(K=>!(K in D)):[];for(const K of q)this.imageManager.removeImage(K),this._changedImages[K]=!0;for(const K in D[U]){const te=U==="default"?K:`${U}:${K}`;this._spritesImagesIds[U].push(te),te in this.imageManager.images?this.imageManager.updateImage(te,D[U][K],!1):this.imageManager.addImage(te,D[U][K]),y&&(this._changedImages[te]=!0)}}}).catch(D=>{this._spriteRequest=null,I=D,this.fire(new a.j(I))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),y&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"})),T&&T(I)})}_unloadSprite(){for(const c of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(c),this._changedImages[c]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}_validateLayer(c){const y=this.sourceCaches[c.source];if(!y)return;const T=c.sourceLayer;if(!T)return;const I=y.getSource();(I.type==="geojson"||I.vectorLayerIds&&I.vectorLayerIds.indexOf(T)===-1)&&this.fire(new a.j(new Error(`Source layer "${T}" does not exist on source "${I.id}" as specified by style layer "${c.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const c in this.sourceCaches)if(!this.sourceCaches[c].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(c,y=!1){const T=this._serializedAllLayers();if(!c||c.length===0)return Object.values(y?a.aB(T):T);const I=[];for(const D of c)if(T[D]){const U=y?a.aB(T[D]):T[D];I.push(U)}return I}_serializedAllLayers(){let c=this._serializedLayers;if(c)return c;c=this._serializedLayers={};const y=Object.keys(this._layers);for(const T of y){const I=this._layers[T];I.type!=="custom"&&(c[T]=I.serialize())}return c}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const c in this.sourceCaches)if(this.sourceCaches[c].hasTransition())return!0;for(const c in this._layers)if(this._layers[c].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(c){if(!this._loaded)return;const y=this._changed;if(y){const I=Object.keys(this._updatedLayers),D=Object.keys(this._removedLayers);(I.length||D.length)&&this._updateWorkerLayers(I,D);for(const U in this._updatedSources){const q=this._updatedSources[U];if(q==="reload")this._reloadSource(U);else{if(q!=="clear")throw new Error(`Invalid action ${q}`);this._clearSource(U)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const U in this._updatedPaintProps)this._layers[U].updateTransitions(c);this.light.updateTransitions(c),this.sky.updateTransitions(c),this._resetUpdates()}const T={};for(const I in this.sourceCaches){const D=this.sourceCaches[I];T[I]=D.used,D.used=!1}for(const I of this._order){const D=this._layers[I];D.recalculate(c,this._availableImages),!D.isHidden(c.zoom)&&D.source&&(this.sourceCaches[D.source].used=!0)}for(const I in T){const D=this.sourceCaches[I];!!T[I]!=!!D.used&&D.fire(new a.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:I}))}this.light.recalculate(c),this.sky.recalculate(c),this.z=c.zoom,y&&this.fire(new a.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const c=Object.keys(this._changedImages);if(c.length){for(const y in this.sourceCaches)this.sourceCaches[y].reloadTilesForDependencies(["icons","patterns"],c);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(c,y){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(c,!1),removedIds:y})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(c,y={}){var T;this._checkLoaded();const I=this.serialize();if(c=y.transformStyle?y.transformStyle(I,c):c,((T=y.validate)===null||T===void 0||T)&&Bi(this,a.u(c)))return!1;(c=a.aB(c)).layers=a.az(c.layers);const D=a.aC(I,c),U=this._getOperationsToPerform(D);if(U.unimplemented.length>0)throw new Error(`Unimplemented: ${U.unimplemented.join(", ")}.`);if(U.operations.length===0)return!1;for(const q of U.operations)q();return this.stylesheet=c,this._serializedLayers=null,!0}_getOperationsToPerform(c){const y=[],T=[];for(const I of c)switch(I.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":y.push(()=>this.addLayer.apply(this,I.args));break;case"removeLayer":y.push(()=>this.removeLayer.apply(this,I.args));break;case"setPaintProperty":y.push(()=>this.setPaintProperty.apply(this,I.args));break;case"setLayoutProperty":y.push(()=>this.setLayoutProperty.apply(this,I.args));break;case"setFilter":y.push(()=>this.setFilter.apply(this,I.args));break;case"addSource":y.push(()=>this.addSource.apply(this,I.args));break;case"removeSource":y.push(()=>this.removeSource.apply(this,I.args));break;case"setLayerZoomRange":y.push(()=>this.setLayerZoomRange.apply(this,I.args));break;case"setLight":y.push(()=>this.setLight.apply(this,I.args));break;case"setGeoJSONSourceData":y.push(()=>this.setGeoJSONSourceData.apply(this,I.args));break;case"setGlyphs":y.push(()=>this.setGlyphs.apply(this,I.args));break;case"setSprite":y.push(()=>this.setSprite.apply(this,I.args));break;case"setSky":y.push(()=>this.setSky.apply(this,I.args));break;case"setTerrain":y.push(()=>this.map.setTerrain.apply(this,I.args));break;case"setTransition":y.push(()=>{});break;default:T.push(I.command)}return{operations:y,unimplemented:T}}addImage(c,y){if(this.getImage(c))return this.fire(new a.j(new Error(`An image named "${c}" already exists.`)));this.imageManager.addImage(c,y),this._afterImageUpdated(c)}updateImage(c,y){this.imageManager.updateImage(c,y)}getImage(c){return this.imageManager.getImage(c)}removeImage(c){if(!this.getImage(c))return this.fire(new a.j(new Error(`An image named "${c}" does not exist.`)));this.imageManager.removeImage(c),this._afterImageUpdated(c)}_afterImageUpdated(c){this._availableImages=this.imageManager.listImages(),this._changedImages[c]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(c,y,T={}){if(this._checkLoaded(),this.sourceCaches[c]!==void 0)throw new Error(`Source "${c}" already exists.`);if(!y.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(y).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(y.type)>=0&&this._validate(a.u.source,`sources.${c}`,y,null,T))return;this.map&&this.map._collectResourceTiming&&(y.collectResourceTiming=!0);const I=this.sourceCaches[c]=new ht(c,y,this.dispatcher);I.style=this,I.setEventedParent(this,()=>({isSourceLoaded:I.loaded(),source:I.serialize(),sourceId:c})),I.onAdd(this.map),this._changed=!0}removeSource(c){if(this._checkLoaded(),this.sourceCaches[c]===void 0)throw new Error("There is no source with this ID");for(const T in this._layers)if(this._layers[T].source===c)return this.fire(new a.j(new Error(`Source "${c}" cannot be removed while layer "${T}" is using it.`)));const y=this.sourceCaches[c];delete this.sourceCaches[c],delete this._updatedSources[c],y.fire(new a.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:c})),y.setEventedParent(null),y.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(c,y){if(this._checkLoaded(),this.sourceCaches[c]===void 0)throw new Error(`There is no source with this ID=${c}`);const T=this.sourceCaches[c].getSource();if(T.type!=="geojson")throw new Error(`geojsonSource.type is ${T.type}, which is !== 'geojson`);T.setData(y),this._changed=!0}getSource(c){return this.sourceCaches[c]&&this.sourceCaches[c].getSource()}addLayer(c,y,T={}){this._checkLoaded();const I=c.id;if(this.getLayer(I))return void this.fire(new a.j(new Error(`Layer "${I}" already exists on this map.`)));let D;if(c.type==="custom"){if(Bi(this,a.aD(c)))return;D=a.aA(c)}else{if("source"in c&&typeof c.source=="object"&&(this.addSource(I,c.source),c=a.aB(c),c=a.e(c,{source:I})),this._validate(a.u.layer,`layers.${I}`,c,{arrayIndex:-1},T))return;D=a.aA(c),this._validateLayer(D),D.setEventedParent(this,{layer:{id:I}})}const U=y?this._order.indexOf(y):this._order.length;if(y&&U===-1)this.fire(new a.j(new Error(`Cannot add layer "${I}" before non-existing layer "${y}".`)));else{if(this._order.splice(U,0,I),this._layerOrderChanged=!0,this._layers[I]=D,this._removedLayers[I]&&D.source&&D.type!=="custom"){const q=this._removedLayers[I];delete this._removedLayers[I],q.type!==D.type?this._updatedSources[D.source]="clear":(this._updatedSources[D.source]="reload",this.sourceCaches[D.source].pause())}this._updateLayer(D),D.onAdd&&D.onAdd(this.map)}}moveLayer(c,y){if(this._checkLoaded(),this._changed=!0,!this._layers[c])return void this.fire(new a.j(new Error(`The layer '${c}' does not exist in the map's style and cannot be moved.`)));if(c===y)return;const T=this._order.indexOf(c);this._order.splice(T,1);const I=y?this._order.indexOf(y):this._order.length;y&&I===-1?this.fire(new a.j(new Error(`Cannot move layer "${c}" before non-existing layer "${y}".`))):(this._order.splice(I,0,c),this._layerOrderChanged=!0)}removeLayer(c){this._checkLoaded();const y=this._layers[c];if(!y)return void this.fire(new a.j(new Error(`Cannot remove non-existing layer "${c}".`)));y.setEventedParent(null);const T=this._order.indexOf(c);this._order.splice(T,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[c]=y,delete this._layers[c],this._serializedLayers&&delete this._serializedLayers[c],delete this._updatedLayers[c],delete this._updatedPaintProps[c],y.onRemove&&y.onRemove(this.map)}getLayer(c){return this._layers[c]}getLayersOrder(){return[...this._order]}hasLayer(c){return c in this._layers}setLayerZoomRange(c,y,T){this._checkLoaded();const I=this.getLayer(c);I?I.minzoom===y&&I.maxzoom===T||(y!=null&&(I.minzoom=y),T!=null&&(I.maxzoom=T),this._updateLayer(I)):this.fire(new a.j(new Error(`Cannot set the zoom range of non-existing layer "${c}".`)))}setFilter(c,y,T={}){this._checkLoaded();const I=this.getLayer(c);if(I){if(!a.aE(I.filter,y))return y==null?(I.filter=void 0,void this._updateLayer(I)):void(this._validate(a.u.filter,`layers.${I.id}.filter`,y,null,T)||(I.filter=a.aB(y),this._updateLayer(I)))}else this.fire(new a.j(new Error(`Cannot filter non-existing layer "${c}".`)))}getFilter(c){return a.aB(this.getLayer(c).filter)}setLayoutProperty(c,y,T,I={}){this._checkLoaded();const D=this.getLayer(c);D?a.aE(D.getLayoutProperty(y),T)||(D.setLayoutProperty(y,T,I),this._updateLayer(D)):this.fire(new a.j(new Error(`Cannot style non-existing layer "${c}".`)))}getLayoutProperty(c,y){const T=this.getLayer(c);if(T)return T.getLayoutProperty(y);this.fire(new a.j(new Error(`Cannot get style of non-existing layer "${c}".`)))}setPaintProperty(c,y,T,I={}){this._checkLoaded();const D=this.getLayer(c);D?a.aE(D.getPaintProperty(y),T)||(D.setPaintProperty(y,T,I)&&this._updateLayer(D),this._changed=!0,this._updatedPaintProps[c]=!0,this._serializedLayers=null):this.fire(new a.j(new Error(`Cannot style non-existing layer "${c}".`)))}getPaintProperty(c,y){return this.getLayer(c).getPaintProperty(y)}setFeatureState(c,y){this._checkLoaded();const T=c.source,I=c.sourceLayer,D=this.sourceCaches[T];if(D===void 0)return void this.fire(new a.j(new Error(`The source '${T}' does not exist in the map's style.`)));const U=D.getSource().type;U==="geojson"&&I?this.fire(new a.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):U!=="vector"||I?(c.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),D.setFeatureState(I,c.id,y)):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(c,y){this._checkLoaded();const T=c.source,I=this.sourceCaches[T];if(I===void 0)return void this.fire(new a.j(new Error(`The source '${T}' does not exist in the map's style.`)));const D=I.getSource().type,U=D==="vector"?c.sourceLayer:void 0;D!=="vector"||U?y&&typeof c.id!="string"&&typeof c.id!="number"?this.fire(new a.j(new Error("A feature id is required to remove its specific state property."))):I.removeFeatureState(U,c.id,y):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(c){this._checkLoaded();const y=c.source,T=c.sourceLayer,I=this.sourceCaches[y];if(I!==void 0)return I.getSource().type!=="vector"||T?(c.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),I.getFeatureState(T,c.id)):void this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.j(new Error(`The source '${y}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const c=a.aF(this.sourceCaches,D=>D.serialize()),y=this._serializeByIds(this._order,!0),T=this.map.getTerrain()||void 0,I=this.stylesheet;return a.aG({version:I.version,name:I.name,metadata:I.metadata,light:I.light,sky:I.sky,center:I.center,zoom:I.zoom,bearing:I.bearing,pitch:I.pitch,sprite:I.sprite,glyphs:I.glyphs,transition:I.transition,sources:c,layers:y,terrain:T},D=>D!==void 0)}_updateLayer(c){this._updatedLayers[c.id]=!0,c.source&&!this._updatedSources[c.source]&&this.sourceCaches[c.source].getSource().type!=="raster"&&(this._updatedSources[c.source]="reload",this.sourceCaches[c.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(c){const y=U=>this._layers[U].type==="fill-extrusion",T={},I=[];for(let U=this._order.length-1;U>=0;U--){const q=this._order[U];if(y(q)){T[q]=U;for(const K of c){const te=K[q];if(te)for(const ce of te)I.push(ce)}}}I.sort((U,q)=>q.intersectionZ-U.intersectionZ);const D=[];for(let U=this._order.length-1;U>=0;U--){const q=this._order[U];if(y(q))for(let K=I.length-1;K>=0;K--){const te=I[K].feature;if(T[te.layer.id]<U)break;D.push(te),I.pop()}else for(const K of c){const te=K[q];if(te)for(const ce of te)D.push(ce.feature)}}return D}queryRenderedFeatures(c,y,T){y&&y.filter&&this._validate(a.u.filter,"queryRenderedFeatures.filter",y.filter,null,y);const I={};if(y&&y.layers){if(!Array.isArray(y.layers))return this.fire(new a.j(new Error("parameters.layers must be an Array."))),[];for(const q of y.layers){const K=this._layers[q];if(!K)return this.fire(new a.j(new Error(`The layer '${q}' does not exist in the map's style and cannot be queried for features.`))),[];I[K.source]=!0}}const D=[];y.availableImages=this._availableImages;const U=this._serializedAllLayers();for(const q in this.sourceCaches)y.layers&&!I[q]||D.push(et(this.sourceCaches[q],this._layers,U,c,y,T));return this.placement&&D.push(function(q,K,te,ce,ae,xe,Pe){const Ee={},$e=xe.queryRenderedSymbols(ce),ze=[];for(const Ge of Object.keys($e).map(Number))ze.push(Pe[Ge]);ze.sort(Ke);for(const Ge of ze){const nt=Ge.featureIndex.lookupSymbolFeatures($e[Ge.bucketInstanceId],K,Ge.bucketIndex,Ge.sourceLayerIndex,ae.filter,ae.layers,ae.availableImages,q);for(const Fe in nt){const ct=Ee[Fe]=Ee[Fe]||[],yt=nt[Fe];yt.sort((Pt,Gt)=>{const on=Ge.featureSortOrder;if(on){const vn=on.indexOf(Pt.featureIndex);return on.indexOf(Gt.featureIndex)-vn}return Gt.featureIndex-Pt.featureIndex});for(const Pt of yt)ct.push(Pt)}}for(const Ge in Ee)Ee[Ge].forEach(nt=>{const Fe=nt.feature,ct=te[q[Ge].source].getFeatureState(Fe.layer["source-layer"],Fe.id);Fe.source=Fe.layer.source,Fe.layer["source-layer"]&&(Fe.sourceLayer=Fe.layer["source-layer"]),Fe.state=ct});return Ee}(this._layers,U,this.sourceCaches,c,y,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(D)}querySourceFeatures(c,y){y&&y.filter&&this._validate(a.u.filter,"querySourceFeatures.filter",y.filter,null,y);const T=this.sourceCaches[c];return T?function(I,D){const U=I.getRenderableIds().map(te=>I.getTileByID(te)),q=[],K={};for(let te=0;te<U.length;te++){const ce=U[te],ae=ce.tileID.canonical.key;K[ae]||(K[ae]=!0,ce.querySourceFeatures(q,D))}return q}(T,y):[]}getLight(){return this.light.getLight()}setLight(c,y={}){this._checkLoaded();const T=this.light.getLight();let I=!1;for(const U in c)if(!a.aE(c[U],T[U])){I=!0;break}if(!I)return;const D={now:p.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(c,y),this.light.updateTransitions(D)}getSky(){var c;return(c=this.stylesheet)===null||c===void 0?void 0:c.sky}setSky(c,y={}){const T=this.getSky();let I=!1;if(!c&&!T)return;if(c&&!T)I=!0;else if(!c&&T)I=!0;else for(const U in c)if(!a.aE(c[U],T[U])){I=!0;break}if(!I)return;const D={now:p.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=c,this.sky.setSky(c,y),this.sky.updateTransitions(D)}_validate(c,y,T,I,D={}){return(!D||D.validate!==!1)&&Bi(this,c.call(a.u,a.e({key:y,style:this.serialize(),value:T,styleSpec:a.v},I)))}_remove(c=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Tn().off(ft,this._rtlPluginLoaded);for(const y in this._layers)this._layers[y].setEventedParent(null);for(const y in this.sourceCaches){const T=this.sourceCaches[y];T.setEventedParent(null),T.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),c&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(c)}_clearSource(c){this.sourceCaches[c].clearTiles()}_reloadSource(c){this.sourceCaches[c].resume(),this.sourceCaches[c].reload()}_updateSources(c){for(const y in this.sourceCaches)this.sourceCaches[y].update(c,this.map.terrain)}_generateCollisionBoxes(){for(const c in this.sourceCaches)this._reloadSource(c)}_updatePlacement(c,y,T,I,D=!1){let U=!1,q=!1;const K={};for(const te of this._order){const ce=this._layers[te];if(ce.type!=="symbol")continue;if(!K[ce.source]){const xe=this.sourceCaches[ce.source];K[ce.source]=xe.getRenderableIds(!0).map(Pe=>xe.getTileByID(Pe)).sort((Pe,Ee)=>Ee.tileID.overscaledZ-Pe.tileID.overscaledZ||(Pe.tileID.isLessThan(Ee.tileID)?-1:1))}const ae=this.crossTileSymbolIndex.addLayer(ce,K[ce.source],c.center.lng);U=U||ae}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((D=D||this._layerOrderChanged||T===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(p.now(),c.zoom))&&(this.pauseablePlacement=new ti(c,this.map.terrain,this._order,D,y,T,I,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,K),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(p.now()),q=!0),U&&this.pauseablePlacement.placement.setStale()),q||U)for(const te of this._order){const ce=this._layers[te];ce.type==="symbol"&&this.placement.updateLayerOpacities(ce,K[ce.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(p.now())}_releaseSymbolFadeTiles(){for(const c in this.sourceCaches)this.sourceCaches[c].releaseSymbolFadeTiles()}getImages(c,y){return a._(this,void 0,void 0,function*(){const T=yield this.imageManager.getImages(y.icons);this._updateTilesForChangedImages();const I=this.sourceCaches[y.source];return I&&I.setDependencies(y.tileID.key,y.type,y.icons),T})}getGlyphs(c,y){return a._(this,void 0,void 0,function*(){const T=yield this.glyphManager.getGlyphs(y.stacks),I=this.sourceCaches[y.source];return I&&I.setDependencies(y.tileID.key,y.type,[""]),T})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(c,y={}){this._checkLoaded(),c&&this._validate(a.u.glyphs,"glyphs",c,null,y)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=c,this.glyphManager.entries={},this.glyphManager.setURL(c))}addSprite(c,y,T={},I){this._checkLoaded();const D=[{id:c,url:y}],U=[...J(this.stylesheet.sprite),...D];this._validate(a.u.sprite,"sprite",U,null,T)||(this.stylesheet.sprite=U,this._loadSprite(D,!0,I))}removeSprite(c){this._checkLoaded();const y=J(this.stylesheet.sprite);if(y.find(T=>T.id===c)){if(this._spritesImagesIds[c])for(const T of this._spritesImagesIds[c])this.imageManager.removeImage(T),this._changedImages[T]=!0;y.splice(y.findIndex(T=>T.id===c),1),this.stylesheet.sprite=y.length>0?y:void 0,delete this._spritesImagesIds[c],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}else this.fire(new a.j(new Error(`Sprite "${c}" doesn't exists on this map.`)))}getSprite(){return J(this.stylesheet.sprite)}setSprite(c,y={},T){this._checkLoaded(),c&&this._validate(a.u.sprite,"sprite",c,null,y)||(this.stylesheet.sprite=c,c?this._loadSprite(c,!0,T):(this._unloadSprite(),T&&T(null)))}}var so=a.Y([{name:"a_pos",type:"Int16",components:2}]);const ma={prelude:_r(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:_r(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:_r(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:_r(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:_r("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:_r(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:_r(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:_r("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:_r("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:_r("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:_r(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:_r(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:_r(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:_r(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:_r(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:_r(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:_r(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:_r(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:_r(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:_r(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:_r(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:_r(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:_r(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:_r(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:_r(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:_r(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:_r("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:_r("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:_r("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:_r("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function _r(L,c){const y=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,T=c.match(/attribute ([\w]+) ([\w]+)/g),I=L.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),D=c.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),U=D?D.concat(I):I,q={};return{fragmentSource:L=L.replace(y,(K,te,ce,ae,xe)=>(q[xe]=!0,te==="define"?`
#ifndef HAS_UNIFORM_u_${xe}
varying ${ce} ${ae} ${xe};
#else
uniform ${ce} ${ae} u_${xe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${xe}
    ${ce} ${ae} ${xe} = u_${xe};
#endif
`)),vertexSource:c=c.replace(y,(K,te,ce,ae,xe)=>{const Pe=ae==="float"?"vec2":"vec4",Ee=xe.match(/color/)?"color":Pe;return q[xe]?te==="define"?`
#ifndef HAS_UNIFORM_u_${xe}
uniform lowp float u_${xe}_t;
attribute ${ce} ${Pe} a_${xe};
varying ${ce} ${ae} ${xe};
#else
uniform ${ce} ${ae} u_${xe};
#endif
`:Ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${xe}
    ${xe} = a_${xe};
#else
    ${ce} ${ae} ${xe} = u_${xe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${xe}
    ${xe} = unpack_mix_${Ee}(a_${xe}, u_${xe}_t);
#else
    ${ce} ${ae} ${xe} = u_${xe};
#endif
`:te==="define"?`
#ifndef HAS_UNIFORM_u_${xe}
uniform lowp float u_${xe}_t;
attribute ${ce} ${Pe} a_${xe};
#else
uniform ${ce} ${ae} u_${xe};
#endif
`:Ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${xe}
    ${ce} ${ae} ${xe} = a_${xe};
#else
    ${ce} ${ae} ${xe} = u_${xe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${xe}
    ${ce} ${ae} ${xe} = unpack_mix_${Ee}(a_${xe}, u_${xe}_t);
#else
    ${ce} ${ae} ${xe} = u_${xe};
#endif
`}),staticAttributes:T,staticUniforms:U}}class zd{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(c,y,T,I,D,U,q,K,te){this.context=c;let ce=this.boundPaintVertexBuffers.length!==I.length;for(let ae=0;!ce&&ae<I.length;ae++)this.boundPaintVertexBuffers[ae]!==I[ae]&&(ce=!0);!this.vao||this.boundProgram!==y||this.boundLayoutVertexBuffer!==T||ce||this.boundIndexBuffer!==D||this.boundVertexOffset!==U||this.boundDynamicVertexBuffer!==q||this.boundDynamicVertexBuffer2!==K||this.boundDynamicVertexBuffer3!==te?this.freshBind(y,T,I,D,U,q,K,te):(c.bindVertexArray.set(this.vao),q&&q.bind(),D&&D.dynamicDraw&&D.bind(),K&&K.bind(),te&&te.bind())}freshBind(c,y,T,I,D,U,q,K){const te=c.numAttributes,ce=this.context,ae=ce.gl;this.vao&&this.destroy(),this.vao=ce.createVertexArray(),ce.bindVertexArray.set(this.vao),this.boundProgram=c,this.boundLayoutVertexBuffer=y,this.boundPaintVertexBuffers=T,this.boundIndexBuffer=I,this.boundVertexOffset=D,this.boundDynamicVertexBuffer=U,this.boundDynamicVertexBuffer2=q,this.boundDynamicVertexBuffer3=K,y.enableAttributes(ae,c);for(const xe of T)xe.enableAttributes(ae,c);U&&U.enableAttributes(ae,c),q&&q.enableAttributes(ae,c),K&&K.enableAttributes(ae,c),y.bind(),y.setVertexAttribPointers(ae,c,D);for(const xe of T)xe.bind(),xe.setVertexAttribPointers(ae,c,D);U&&(U.bind(),U.setVertexAttribPointers(ae,c,D)),I&&I.bind(),q&&(q.bind(),q.setVertexAttribPointers(ae,c,D)),K&&(K.bind(),K.setVertexAttribPointers(ae,c,D)),ce.currentNumAttributes=te}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const ev=(L,c,y,T,I)=>({u_matrix:L,u_texture:0,u_ele_delta:c,u_fog_matrix:y,u_fog_color:T?T.properties.get("fog-color"):a.aM.white,u_fog_ground_blend:T?T.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:T?T.calculateFogBlendOpacity(I):0,u_horizon_color:T?T.properties.get("horizon-color"):a.aM.white,u_horizon_fog_blend:T?T.properties.get("horizon-fog-blend"):1});function ip(L){const c=[];for(let y=0;y<L.length;y++){if(L[y]===null)continue;const T=L[y].split(" ");c.push(T.pop())}return c}class Fd{constructor(c,y,T,I,D,U){const q=c.gl;this.program=q.createProgram();const K=ip(y.staticAttributes),te=T?T.getBinderAttributes():[],ce=K.concat(te),ae=ma.prelude.staticUniforms?ip(ma.prelude.staticUniforms):[],xe=y.staticUniforms?ip(y.staticUniforms):[],Pe=T?T.getBinderUniforms():[],Ee=ae.concat(xe).concat(Pe),$e=[];for(const Pt of Ee)$e.indexOf(Pt)<0&&$e.push(Pt);const ze=T?T.defines():[];D&&ze.push("#define OVERDRAW_INSPECTOR;"),U&&ze.push("#define TERRAIN3D;");const Ge=ze.concat(ma.prelude.fragmentSource,y.fragmentSource).join(`
`),nt=ze.concat(ma.prelude.vertexSource,y.vertexSource).join(`
`),Fe=q.createShader(q.FRAGMENT_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);if(q.shaderSource(Fe,Ge),q.compileShader(Fe),!q.getShaderParameter(Fe,q.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${q.getShaderInfoLog(Fe)}`);q.attachShader(this.program,Fe);const ct=q.createShader(q.VERTEX_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);if(q.shaderSource(ct,nt),q.compileShader(ct),!q.getShaderParameter(ct,q.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${q.getShaderInfoLog(ct)}`);q.attachShader(this.program,ct),this.attributes={};const yt={};this.numAttributes=ce.length;for(let Pt=0;Pt<this.numAttributes;Pt++)ce[Pt]&&(q.bindAttribLocation(this.program,Pt,ce[Pt]),this.attributes[ce[Pt]]=Pt);if(q.linkProgram(this.program),!q.getProgramParameter(this.program,q.LINK_STATUS))throw new Error(`Program failed to link: ${q.getProgramInfoLog(this.program)}`);q.deleteShader(ct),q.deleteShader(Fe);for(let Pt=0;Pt<$e.length;Pt++){const Gt=$e[Pt];if(Gt&&!yt[Gt]){const on=q.getUniformLocation(this.program,Gt);on&&(yt[Gt]=on)}}this.fixedUniforms=I(c,yt),this.terrainUniforms=((Pt,Gt)=>({u_depth:new a.aH(Pt,Gt.u_depth),u_terrain:new a.aH(Pt,Gt.u_terrain),u_terrain_dim:new a.aI(Pt,Gt.u_terrain_dim),u_terrain_matrix:new a.aJ(Pt,Gt.u_terrain_matrix),u_terrain_unpack:new a.aK(Pt,Gt.u_terrain_unpack),u_terrain_exaggeration:new a.aI(Pt,Gt.u_terrain_exaggeration)}))(c,yt),this.binderUniforms=T?T.getUniforms(c,yt):[]}draw(c,y,T,I,D,U,q,K,te,ce,ae,xe,Pe,Ee,$e,ze,Ge,nt){const Fe=c.gl;if(this.failedToCreate)return;if(c.program.set(this.program),c.setDepthMode(T),c.setStencilMode(I),c.setColorMode(D),c.setCullFace(U),K){c.activeTexture.set(Fe.TEXTURE2),Fe.bindTexture(Fe.TEXTURE_2D,K.depthTexture),c.activeTexture.set(Fe.TEXTURE3),Fe.bindTexture(Fe.TEXTURE_2D,K.texture);for(const yt in this.terrainUniforms)this.terrainUniforms[yt].set(K[yt])}for(const yt in this.fixedUniforms)this.fixedUniforms[yt].set(q[yt]);$e&&$e.setUniforms(c,this.binderUniforms,Pe,{zoom:Ee});let ct=0;switch(y){case Fe.LINES:ct=2;break;case Fe.TRIANGLES:ct=3;break;case Fe.LINE_STRIP:ct=1}for(const yt of xe.get()){const Pt=yt.vaos||(yt.vaos={});(Pt[te]||(Pt[te]=new zd)).bind(c,this,ce,$e?$e.getPaintVertexBuffers():[],ae,yt.vertexOffset,ze,Ge,nt),Fe.drawElements(y,yt.primitiveLength*ct,Fe.UNSIGNED_SHORT,yt.primitiveOffset*ct*2)}}}function Bd(L,c,y){const T=1/ir(y,1,c.transform.tileZoom),I=Math.pow(2,y.tileID.overscaledZ),D=y.tileSize*Math.pow(2,c.transform.tileZoom)/I,U=D*(y.tileID.canonical.x+y.tileID.wrap*I),q=D*y.tileID.canonical.y;return{u_image:0,u_texsize:y.imageAtlasTexture.size,u_scale:[T,L.fromScale,L.toScale],u_fade:L.t,u_pixel_coord_upper:[U>>16,q>>16],u_pixel_coord_lower:[65535&U,65535&q]}}const Ou=(L,c,y,T)=>{const I=c.style.light,D=I.properties.get("position"),U=[D.x,D.y,D.z],q=function(){var te=new a.A(9);return a.A!=Float32Array&&(te[1]=0,te[2]=0,te[3]=0,te[5]=0,te[6]=0,te[7]=0),te[0]=1,te[4]=1,te[8]=1,te}();I.properties.get("anchor")==="viewport"&&function(te,ce){var ae=Math.sin(ce),xe=Math.cos(ce);te[0]=xe,te[1]=ae,te[2]=0,te[3]=-ae,te[4]=xe,te[5]=0,te[6]=0,te[7]=0,te[8]=1}(q,-c.transform.angle),function(te,ce,ae){var xe=ce[0],Pe=ce[1],Ee=ce[2];te[0]=xe*ae[0]+Pe*ae[3]+Ee*ae[6],te[1]=xe*ae[1]+Pe*ae[4]+Ee*ae[7],te[2]=xe*ae[2]+Pe*ae[5]+Ee*ae[8]}(U,U,q);const K=I.properties.get("color");return{u_matrix:L,u_lightpos:U,u_lightintensity:I.properties.get("intensity"),u_lightcolor:[K.r,K.g,K.b],u_vertical_gradient:+y,u_opacity:T}},jd=(L,c,y,T,I,D,U)=>a.e(Ou(L,c,y,T),Bd(D,c,U),{u_height_factor:-Math.pow(2,I.overscaledZ)/U.tileSize/8}),op=L=>({u_matrix:L}),Wh=(L,c,y,T)=>a.e(op(L),Bd(y,c,T)),tv=(L,c)=>({u_matrix:L,u_world:c}),nv=(L,c,y,T,I)=>a.e(Wh(L,c,y,T),{u_world:I}),Gh=(L,c,y,T)=>{const I=L.transform;let D,U;if(T.paint.get("circle-pitch-alignment")==="map"){const q=ir(y,1,I.zoom);D=!0,U=[q,q]}else D=!1,U=I.pixelsToGLUnits;return{u_camera_to_center_distance:I.cameraToCenterDistance,u_scale_with_map:+(T.paint.get("circle-pitch-scale")==="map"),u_matrix:L.translatePosMatrix(c.posMatrix,y,T.paint.get("circle-translate"),T.paint.get("circle-translate-anchor")),u_pitch_with_map:+D,u_device_pixel_ratio:L.pixelRatio,u_extrude_scale:U}},xw=(L,c,y)=>({u_matrix:L,u_inv_matrix:c,u_camera_to_center_distance:y.cameraToCenterDistance,u_viewport_size:[y.width,y.height]}),nc=(L,c,y=1)=>({u_matrix:L,u_color:c,u_overlay:0,u_overlay_scale:y}),Fr=L=>({u_matrix:L}),Ws=(L,c,y,T)=>({u_matrix:L,u_extrude_scale:ir(c,1,y),u_intensity:T});function Ps(L,c){const y=Math.pow(2,c.canonical.z),T=c.canonical.y;return[new a.Z(0,T/y).toLngLat().lat,new a.Z(0,(T+1)/y).toLngLat().lat]}const qh=(L,c,y,T)=>{const I=L.transform;return{u_matrix:x_(L,c,y,T),u_ratio:1/ir(c,1,I.zoom),u_device_pixel_ratio:L.pixelRatio,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]]}},zm=(L,c,y,T,I)=>a.e(qh(L,c,y,I),{u_image:0,u_image_height:T}),__=(L,c,y,T,I)=>{const D=L.transform,U=Rc(c,D);return{u_matrix:x_(L,c,y,I),u_texsize:c.imageAtlasTexture.size,u_ratio:1/ir(c,1,D.zoom),u_device_pixel_ratio:L.pixelRatio,u_image:0,u_scale:[U,T.fromScale,T.toScale],u_fade:T.t,u_units_to_pixels:[1/D.pixelsToGLUnits[0],1/D.pixelsToGLUnits[1]]}},Ro=(L,c,y,T,I,D)=>{const U=L.lineAtlas,q=Rc(c,L.transform),K=y.layout.get("line-cap")==="round",te=U.getDash(T.from,K),ce=U.getDash(T.to,K),ae=te.width*I.fromScale,xe=ce.width*I.toScale;return a.e(qh(L,c,y,D),{u_patternscale_a:[q/ae,-te.height/2],u_patternscale_b:[q/xe,-ce.height/2],u_sdfgamma:U.width/(256*Math.min(ae,xe)*L.pixelRatio)/2,u_image:0,u_tex_y_a:te.y,u_tex_y_b:ce.y,u_mix:I.t})};function Rc(L,c){return 1/ir(L,1,c.tileZoom)}function x_(L,c,y,T){return L.translatePosMatrix(T?T.posMatrix:c.tileID.posMatrix,c,y.paint.get("line-translate"),y.paint.get("line-translate-anchor"))}const rv=(L,c,y,T,I)=>{return{u_matrix:L,u_tl_parent:c,u_scale_parent:y,u_buffer_scale:1,u_fade_t:T.mix,u_opacity:T.opacity*I.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:I.paint.get("raster-brightness-min"),u_brightness_high:I.paint.get("raster-brightness-max"),u_saturation_factor:(U=I.paint.get("raster-saturation"),U>0?1-1/(1.001-U):-U),u_contrast_factor:(D=I.paint.get("raster-contrast"),D>0?1/(1-D):1+D),u_spin_weights:bw(I.paint.get("raster-hue-rotate"))};var D,U};function bw(L){L*=Math.PI/180;const c=Math.sin(L),y=Math.cos(L);return[(2*y+1)/3,(-Math.sqrt(3)*c-y+1)/3,(Math.sqrt(3)*c-y+1)/3]}const sp=(L,c,y,T,I,D,U,q,K,te,ce,ae,xe,Pe)=>{const Ee=U.transform;return{u_is_size_zoom_constant:+(L==="constant"||L==="source"),u_is_size_feature_constant:+(L==="constant"||L==="camera"),u_size_t:c?c.uSizeT:0,u_size:c?c.uSize:0,u_camera_to_center_distance:Ee.cameraToCenterDistance,u_pitch:Ee.pitch/360*2*Math.PI,u_rotate_symbol:+y,u_aspect_ratio:Ee.width/Ee.height,u_fade_change:U.options.fadeDuration?U.symbolFadeChange:1,u_matrix:q,u_label_plane_matrix:K,u_coord_matrix:te,u_is_text:+ae,u_pitch_with_map:+T,u_is_along_line:I,u_is_variable_anchor:D,u_texsize:xe,u_texture:0,u_translation:ce,u_pitched_scale:Pe}},Ml=(L,c,y,T,I,D,U,q,K,te,ce,ae,xe,Pe,Ee)=>{const $e=U.transform;return a.e(sp(L,c,y,T,I,D,U,q,K,te,ce,ae,xe,Ee),{u_gamma_scale:T?Math.cos($e._pitch)*$e.cameraToCenterDistance:1,u_device_pixel_ratio:U.pixelRatio,u_is_halo:+Pe})},ww=(L,c,y,T,I,D,U,q,K,te,ce,ae,xe,Pe)=>a.e(Ml(L,c,y,T,I,D,U,q,K,te,ce,!0,ae,!0,Pe),{u_texsize_icon:xe,u_texture_icon:1}),Fm=(L,c,y)=>({u_matrix:L,u_opacity:c,u_color:y}),Ua=(L,c,y,T,I,D)=>a.e(function(U,q,K,te){const ce=K.imageManager.getPattern(U.from.toString()),ae=K.imageManager.getPattern(U.to.toString()),{width:xe,height:Pe}=K.imageManager.getPixelSize(),Ee=Math.pow(2,te.tileID.overscaledZ),$e=te.tileSize*Math.pow(2,K.transform.tileZoom)/Ee,ze=$e*(te.tileID.canonical.x+te.tileID.wrap*Ee),Ge=$e*te.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ce.tl,u_pattern_br_a:ce.br,u_pattern_tl_b:ae.tl,u_pattern_br_b:ae.br,u_texsize:[xe,Pe],u_mix:q.t,u_pattern_size_a:ce.displaySize,u_pattern_size_b:ae.displaySize,u_scale_a:q.fromScale,u_scale_b:q.toScale,u_tile_units_to_pixels:1/ir(te,1,K.transform.tileZoom),u_pixel_coord_upper:[ze>>16,Ge>>16],u_pixel_coord_lower:[65535&ze,65535&Ge]}}(T,D,y,I),{u_matrix:L,u_opacity:c}),Va={fillExtrusion:(L,c)=>({u_matrix:new a.aJ(L,c.u_matrix),u_lightpos:new a.aN(L,c.u_lightpos),u_lightintensity:new a.aI(L,c.u_lightintensity),u_lightcolor:new a.aN(L,c.u_lightcolor),u_vertical_gradient:new a.aI(L,c.u_vertical_gradient),u_opacity:new a.aI(L,c.u_opacity)}),fillExtrusionPattern:(L,c)=>({u_matrix:new a.aJ(L,c.u_matrix),u_lightpos:new a.aN(L,c.u_lightpos),u_lightintensity:new a.aI(L,c.u_lightintensity),u_lightcolor:new a.aN(L,c.u_lightcolor),u_vertical_gradient:new a.aI(L,c.u_vertical_gradient),u_height_factor:new a.aI(L,c.u_height_factor),u_image:new a.aH(L,c.u_image),u_texsize:new a.aO(L,c.u_texsize),u_pixel_coord_upper:new a.aO(L,c.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(L,c.u_pixel_coord_lower),u_scale:new a.aN(L,c.u_scale),u_fade:new a.aI(L,c.u_fade),u_opacity:new a.aI(L,c.u_opacity)}),fill:(L,c)=>({u_matrix:new a.aJ(L,c.u_matrix)}),fillPattern:(L,c)=>({u_matrix:new a.aJ(L,c.u_matrix),u_image:new a.aH(L,c.u_image),u_texsize:new a.aO(L,c.u_texsize),u_pixel_coord_upper:new a.aO(L,c.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(L,c.u_pixel_coord_lower),u_scale:new a.aN(L,c.u_scale),u_fade:new a.aI(L,c.u_fade)}),fillOutline:(L,c)=>({u_matrix:new a.aJ(L,c.u_matrix),u_world:new a.aO(L,c.u_world)}),fillOutlinePattern:(L,c)=>({u_matrix:new a.aJ(L,c.u_matrix),u_world:new a.aO(L,c.u_world),u_image:new a.aH(L,c.u_image),u_texsize:new a.aO(L,c.u_texsize),u_pixel_coord_upper:new a.aO(L,c.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(L,c.u_pixel_coord_lower),u_scale:new a.aN(L,c.u_scale),u_fade:new a.aI(L,c.u_fade)}),circle:(L,c)=>({u_camera_to_center_distance:new a.aI(L,c.u_camera_to_center_distance),u_scale_with_map:new a.aH(L,c.u_scale_with_map),u_pitch_with_map:new a.aH(L,c.u_pitch_with_map),u_extrude_scale:new a.aO(L,c.u_extrude_scale),u_device_pixel_ratio:new a.aI(L,c.u_device_pixel_ratio),u_matrix:new a.aJ(L,c.u_matrix)}),collisionBox:(L,c)=>({u_matrix:new a.aJ(L,c.u_matrix),u_pixel_extrude_scale:new a.aO(L,c.u_pixel_extrude_scale)}),collisionCircle:(L,c)=>({u_matrix:new a.aJ(L,c.u_matrix),u_inv_matrix:new a.aJ(L,c.u_inv_matrix),u_camera_to_center_distance:new a.aI(L,c.u_camera_to_center_distance),u_viewport_size:new a.aO(L,c.u_viewport_size)}),debug:(L,c)=>({u_color:new a.aL(L,c.u_color),u_matrix:new a.aJ(L,c.u_matrix),u_overlay:new a.aH(L,c.u_overlay),u_overlay_scale:new a.aI(L,c.u_overlay_scale)}),clippingMask:(L,c)=>({u_matrix:new a.aJ(L,c.u_matrix)}),heatmap:(L,c)=>({u_extrude_scale:new a.aI(L,c.u_extrude_scale),u_intensity:new a.aI(L,c.u_intensity),u_matrix:new a.aJ(L,c.u_matrix)}),heatmapTexture:(L,c)=>({u_matrix:new a.aJ(L,c.u_matrix),u_world:new a.aO(L,c.u_world),u_image:new a.aH(L,c.u_image),u_color_ramp:new a.aH(L,c.u_color_ramp),u_opacity:new a.aI(L,c.u_opacity)}),hillshade:(L,c)=>({u_matrix:new a.aJ(L,c.u_matrix),u_image:new a.aH(L,c.u_image),u_latrange:new a.aO(L,c.u_latrange),u_light:new a.aO(L,c.u_light),u_shadow:new a.aL(L,c.u_shadow),u_highlight:new a.aL(L,c.u_highlight),u_accent:new a.aL(L,c.u_accent)}),hillshadePrepare:(L,c)=>({u_matrix:new a.aJ(L,c.u_matrix),u_image:new a.aH(L,c.u_image),u_dimension:new a.aO(L,c.u_dimension),u_zoom:new a.aI(L,c.u_zoom),u_unpack:new a.aK(L,c.u_unpack)}),line:(L,c)=>({u_matrix:new a.aJ(L,c.u_matrix),u_ratio:new a.aI(L,c.u_ratio),u_device_pixel_ratio:new a.aI(L,c.u_device_pixel_ratio),u_units_to_pixels:new a.aO(L,c.u_units_to_pixels)}),lineGradient:(L,c)=>({u_matrix:new a.aJ(L,c.u_matrix),u_ratio:new a.aI(L,c.u_ratio),u_device_pixel_ratio:new a.aI(L,c.u_device_pixel_ratio),u_units_to_pixels:new a.aO(L,c.u_units_to_pixels),u_image:new a.aH(L,c.u_image),u_image_height:new a.aI(L,c.u_image_height)}),linePattern:(L,c)=>({u_matrix:new a.aJ(L,c.u_matrix),u_texsize:new a.aO(L,c.u_texsize),u_ratio:new a.aI(L,c.u_ratio),u_device_pixel_ratio:new a.aI(L,c.u_device_pixel_ratio),u_image:new a.aH(L,c.u_image),u_units_to_pixels:new a.aO(L,c.u_units_to_pixels),u_scale:new a.aN(L,c.u_scale),u_fade:new a.aI(L,c.u_fade)}),lineSDF:(L,c)=>({u_matrix:new a.aJ(L,c.u_matrix),u_ratio:new a.aI(L,c.u_ratio),u_device_pixel_ratio:new a.aI(L,c.u_device_pixel_ratio),u_units_to_pixels:new a.aO(L,c.u_units_to_pixels),u_patternscale_a:new a.aO(L,c.u_patternscale_a),u_patternscale_b:new a.aO(L,c.u_patternscale_b),u_sdfgamma:new a.aI(L,c.u_sdfgamma),u_image:new a.aH(L,c.u_image),u_tex_y_a:new a.aI(L,c.u_tex_y_a),u_tex_y_b:new a.aI(L,c.u_tex_y_b),u_mix:new a.aI(L,c.u_mix)}),raster:(L,c)=>({u_matrix:new a.aJ(L,c.u_matrix),u_tl_parent:new a.aO(L,c.u_tl_parent),u_scale_parent:new a.aI(L,c.u_scale_parent),u_buffer_scale:new a.aI(L,c.u_buffer_scale),u_fade_t:new a.aI(L,c.u_fade_t),u_opacity:new a.aI(L,c.u_opacity),u_image0:new a.aH(L,c.u_image0),u_image1:new a.aH(L,c.u_image1),u_brightness_low:new a.aI(L,c.u_brightness_low),u_brightness_high:new a.aI(L,c.u_brightness_high),u_saturation_factor:new a.aI(L,c.u_saturation_factor),u_contrast_factor:new a.aI(L,c.u_contrast_factor),u_spin_weights:new a.aN(L,c.u_spin_weights)}),symbolIcon:(L,c)=>({u_is_size_zoom_constant:new a.aH(L,c.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(L,c.u_is_size_feature_constant),u_size_t:new a.aI(L,c.u_size_t),u_size:new a.aI(L,c.u_size),u_camera_to_center_distance:new a.aI(L,c.u_camera_to_center_distance),u_pitch:new a.aI(L,c.u_pitch),u_rotate_symbol:new a.aH(L,c.u_rotate_symbol),u_aspect_ratio:new a.aI(L,c.u_aspect_ratio),u_fade_change:new a.aI(L,c.u_fade_change),u_matrix:new a.aJ(L,c.u_matrix),u_label_plane_matrix:new a.aJ(L,c.u_label_plane_matrix),u_coord_matrix:new a.aJ(L,c.u_coord_matrix),u_is_text:new a.aH(L,c.u_is_text),u_pitch_with_map:new a.aH(L,c.u_pitch_with_map),u_is_along_line:new a.aH(L,c.u_is_along_line),u_is_variable_anchor:new a.aH(L,c.u_is_variable_anchor),u_texsize:new a.aO(L,c.u_texsize),u_texture:new a.aH(L,c.u_texture),u_translation:new a.aO(L,c.u_translation),u_pitched_scale:new a.aI(L,c.u_pitched_scale)}),symbolSDF:(L,c)=>({u_is_size_zoom_constant:new a.aH(L,c.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(L,c.u_is_size_feature_constant),u_size_t:new a.aI(L,c.u_size_t),u_size:new a.aI(L,c.u_size),u_camera_to_center_distance:new a.aI(L,c.u_camera_to_center_distance),u_pitch:new a.aI(L,c.u_pitch),u_rotate_symbol:new a.aH(L,c.u_rotate_symbol),u_aspect_ratio:new a.aI(L,c.u_aspect_ratio),u_fade_change:new a.aI(L,c.u_fade_change),u_matrix:new a.aJ(L,c.u_matrix),u_label_plane_matrix:new a.aJ(L,c.u_label_plane_matrix),u_coord_matrix:new a.aJ(L,c.u_coord_matrix),u_is_text:new a.aH(L,c.u_is_text),u_pitch_with_map:new a.aH(L,c.u_pitch_with_map),u_is_along_line:new a.aH(L,c.u_is_along_line),u_is_variable_anchor:new a.aH(L,c.u_is_variable_anchor),u_texsize:new a.aO(L,c.u_texsize),u_texture:new a.aH(L,c.u_texture),u_gamma_scale:new a.aI(L,c.u_gamma_scale),u_device_pixel_ratio:new a.aI(L,c.u_device_pixel_ratio),u_is_halo:new a.aH(L,c.u_is_halo),u_translation:new a.aO(L,c.u_translation),u_pitched_scale:new a.aI(L,c.u_pitched_scale)}),symbolTextAndIcon:(L,c)=>({u_is_size_zoom_constant:new a.aH(L,c.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(L,c.u_is_size_feature_constant),u_size_t:new a.aI(L,c.u_size_t),u_size:new a.aI(L,c.u_size),u_camera_to_center_distance:new a.aI(L,c.u_camera_to_center_distance),u_pitch:new a.aI(L,c.u_pitch),u_rotate_symbol:new a.aH(L,c.u_rotate_symbol),u_aspect_ratio:new a.aI(L,c.u_aspect_ratio),u_fade_change:new a.aI(L,c.u_fade_change),u_matrix:new a.aJ(L,c.u_matrix),u_label_plane_matrix:new a.aJ(L,c.u_label_plane_matrix),u_coord_matrix:new a.aJ(L,c.u_coord_matrix),u_is_text:new a.aH(L,c.u_is_text),u_pitch_with_map:new a.aH(L,c.u_pitch_with_map),u_is_along_line:new a.aH(L,c.u_is_along_line),u_is_variable_anchor:new a.aH(L,c.u_is_variable_anchor),u_texsize:new a.aO(L,c.u_texsize),u_texsize_icon:new a.aO(L,c.u_texsize_icon),u_texture:new a.aH(L,c.u_texture),u_texture_icon:new a.aH(L,c.u_texture_icon),u_gamma_scale:new a.aI(L,c.u_gamma_scale),u_device_pixel_ratio:new a.aI(L,c.u_device_pixel_ratio),u_is_halo:new a.aH(L,c.u_is_halo),u_translation:new a.aO(L,c.u_translation),u_pitched_scale:new a.aI(L,c.u_pitched_scale)}),background:(L,c)=>({u_matrix:new a.aJ(L,c.u_matrix),u_opacity:new a.aI(L,c.u_opacity),u_color:new a.aL(L,c.u_color)}),backgroundPattern:(L,c)=>({u_matrix:new a.aJ(L,c.u_matrix),u_opacity:new a.aI(L,c.u_opacity),u_image:new a.aH(L,c.u_image),u_pattern_tl_a:new a.aO(L,c.u_pattern_tl_a),u_pattern_br_a:new a.aO(L,c.u_pattern_br_a),u_pattern_tl_b:new a.aO(L,c.u_pattern_tl_b),u_pattern_br_b:new a.aO(L,c.u_pattern_br_b),u_texsize:new a.aO(L,c.u_texsize),u_mix:new a.aI(L,c.u_mix),u_pattern_size_a:new a.aO(L,c.u_pattern_size_a),u_pattern_size_b:new a.aO(L,c.u_pattern_size_b),u_scale_a:new a.aI(L,c.u_scale_a),u_scale_b:new a.aI(L,c.u_scale_b),u_pixel_coord_upper:new a.aO(L,c.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(L,c.u_pixel_coord_lower),u_tile_units_to_pixels:new a.aI(L,c.u_tile_units_to_pixels)}),terrain:(L,c)=>({u_matrix:new a.aJ(L,c.u_matrix),u_texture:new a.aH(L,c.u_texture),u_ele_delta:new a.aI(L,c.u_ele_delta),u_fog_matrix:new a.aJ(L,c.u_fog_matrix),u_fog_color:new a.aL(L,c.u_fog_color),u_fog_ground_blend:new a.aI(L,c.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.aI(L,c.u_fog_ground_blend_opacity),u_horizon_color:new a.aL(L,c.u_horizon_color),u_horizon_fog_blend:new a.aI(L,c.u_horizon_fog_blend)}),terrainDepth:(L,c)=>({u_matrix:new a.aJ(L,c.u_matrix),u_ele_delta:new a.aI(L,c.u_ele_delta)}),terrainCoords:(L,c)=>({u_matrix:new a.aJ(L,c.u_matrix),u_texture:new a.aH(L,c.u_texture),u_terrain_coords_id:new a.aI(L,c.u_terrain_coords_id),u_ele_delta:new a.aI(L,c.u_ele_delta)}),sky:(L,c)=>({u_sky_color:new a.aL(L,c.u_sky_color),u_horizon_color:new a.aL(L,c.u_horizon_color),u_horizon:new a.aI(L,c.u_horizon),u_sky_horizon_blend:new a.aI(L,c.u_sky_horizon_blend)})};class Xh{constructor(c,y,T){this.context=c;const I=c.gl;this.buffer=I.createBuffer(),this.dynamicDraw=!!T,this.context.unbindVAO(),c.bindElementBuffer.set(this.buffer),I.bufferData(I.ELEMENT_ARRAY_BUFFER,y.arrayBuffer,this.dynamicDraw?I.DYNAMIC_DRAW:I.STATIC_DRAW),this.dynamicDraw||delete y.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(c){const y=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),y.bufferSubData(y.ELEMENT_ARRAY_BUFFER,0,c.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ap={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class El{constructor(c,y,T,I){this.length=y.length,this.attributes=T,this.itemSize=y.bytesPerElement,this.dynamicDraw=I,this.context=c;const D=c.gl;this.buffer=D.createBuffer(),c.bindVertexBuffer.set(this.buffer),D.bufferData(D.ARRAY_BUFFER,y.arrayBuffer,this.dynamicDraw?D.DYNAMIC_DRAW:D.STATIC_DRAW),this.dynamicDraw||delete y.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(c){if(c.length!==this.length)throw new Error(`Length of new data is ${c.length}, which doesn't match current length of ${this.length}`);const y=this.context.gl;this.bind(),y.bufferSubData(y.ARRAY_BUFFER,0,c.arrayBuffer)}enableAttributes(c,y){for(let T=0;T<this.attributes.length;T++){const I=y.attributes[this.attributes[T].name];I!==void 0&&c.enableVertexAttribArray(I)}}setVertexAttribPointers(c,y,T){for(let I=0;I<this.attributes.length;I++){const D=this.attributes[I],U=y.attributes[D.name];U!==void 0&&c.vertexAttribPointer(U,D.components,c[ap[D.type]],!1,this.itemSize,D.offset+this.itemSize*(T||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const iv=new WeakMap;function Is(L){var c;if(iv.has(L))return iv.get(L);{const y=(c=L.getParameter(L.VERSION))===null||c===void 0?void 0:c.startsWith("WebGL 2.0");return iv.set(L,y),y}}class Br{constructor(c){this.gl=c.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(c){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Lu extends Br{getDefault(){return a.aM.transparent}set(c){const y=this.current;(c.r!==y.r||c.g!==y.g||c.b!==y.b||c.a!==y.a||this.dirty)&&(this.gl.clearColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class Sw extends Br{getDefault(){return 1}set(c){(c!==this.current||this.dirty)&&(this.gl.clearDepth(c),this.current=c,this.dirty=!1)}}class Gs extends Br{getDefault(){return 0}set(c){(c!==this.current||this.dirty)&&(this.gl.clearStencil(c),this.current=c,this.dirty=!1)}}class Bm extends Br{getDefault(){return[!0,!0,!0,!0]}set(c){const y=this.current;(c[0]!==y[0]||c[1]!==y[1]||c[2]!==y[2]||c[3]!==y[3]||this.dirty)&&(this.gl.colorMask(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class kc extends Br{getDefault(){return!0}set(c){(c!==this.current||this.dirty)&&(this.gl.depthMask(c),this.current=c,this.dirty=!1)}}class Yh extends Br{getDefault(){return 255}set(c){(c!==this.current||this.dirty)&&(this.gl.stencilMask(c),this.current=c,this.dirty=!1)}}class jm extends Br{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(c){const y=this.current;(c.func!==y.func||c.ref!==y.ref||c.mask!==y.mask||this.dirty)&&(this.gl.stencilFunc(c.func,c.ref,c.mask),this.current=c,this.dirty=!1)}}class ov extends Br{getDefault(){const c=this.gl;return[c.KEEP,c.KEEP,c.KEEP]}set(c){const y=this.current;(c[0]!==y[0]||c[1]!==y[1]||c[2]!==y[2]||this.dirty)&&(this.gl.stencilOp(c[0],c[1],c[2]),this.current=c,this.dirty=!1)}}class sv extends Br{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const y=this.gl;c?y.enable(y.STENCIL_TEST):y.disable(y.STENCIL_TEST),this.current=c,this.dirty=!1}}class lp extends Br{getDefault(){return[0,1]}set(c){const y=this.current;(c[0]!==y[0]||c[1]!==y[1]||this.dirty)&&(this.gl.depthRange(c[0],c[1]),this.current=c,this.dirty=!1)}}class $m extends Br{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const y=this.gl;c?y.enable(y.DEPTH_TEST):y.disable(y.DEPTH_TEST),this.current=c,this.dirty=!1}}class $d extends Br{getDefault(){return this.gl.LESS}set(c){(c!==this.current||this.dirty)&&(this.gl.depthFunc(c),this.current=c,this.dirty=!1)}}class ga extends Br{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const y=this.gl;c?y.enable(y.BLEND):y.disable(y.BLEND),this.current=c,this.dirty=!1}}class Tl extends Br{getDefault(){const c=this.gl;return[c.ONE,c.ZERO]}set(c){const y=this.current;(c[0]!==y[0]||c[1]!==y[1]||this.dirty)&&(this.gl.blendFunc(c[0],c[1]),this.current=c,this.dirty=!1)}}class qs extends Br{getDefault(){return a.aM.transparent}set(c){const y=this.current;(c.r!==y.r||c.g!==y.g||c.b!==y.b||c.a!==y.a||this.dirty)&&(this.gl.blendColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class Um extends Br{getDefault(){return this.gl.FUNC_ADD}set(c){(c!==this.current||this.dirty)&&(this.gl.blendEquation(c),this.current=c,this.dirty=!1)}}class b_ extends Br{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const y=this.gl;c?y.enable(y.CULL_FACE):y.disable(y.CULL_FACE),this.current=c,this.dirty=!1}}class rc extends Br{getDefault(){return this.gl.BACK}set(c){(c!==this.current||this.dirty)&&(this.gl.cullFace(c),this.current=c,this.dirty=!1)}}class Ha extends Br{getDefault(){return this.gl.CCW}set(c){(c!==this.current||this.dirty)&&(this.gl.frontFace(c),this.current=c,this.dirty=!1)}}class Vm extends Br{getDefault(){return null}set(c){(c!==this.current||this.dirty)&&(this.gl.useProgram(c),this.current=c,this.dirty=!1)}}class cp extends Br{getDefault(){return this.gl.TEXTURE0}set(c){(c!==this.current||this.dirty)&&(this.gl.activeTexture(c),this.current=c,this.dirty=!1)}}class Hm extends Br{getDefault(){const c=this.gl;return[0,0,c.drawingBufferWidth,c.drawingBufferHeight]}set(c){const y=this.current;(c[0]!==y[0]||c[1]!==y[1]||c[2]!==y[2]||c[3]!==y[3]||this.dirty)&&(this.gl.viewport(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class w_ extends Br{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const y=this.gl;y.bindFramebuffer(y.FRAMEBUFFER,c),this.current=c,this.dirty=!1}}class av extends Br{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const y=this.gl;y.bindRenderbuffer(y.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class Wm extends Br{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const y=this.gl;y.bindTexture(y.TEXTURE_2D,c),this.current=c,this.dirty=!1}}class up extends Br{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const y=this.gl;y.bindBuffer(y.ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class Gm extends Br{getDefault(){return null}set(c){const y=this.gl;y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class lv extends Br{getDefault(){return null}set(c){var y;if(c===this.current&&!this.dirty)return;const T=this.gl;Is(T)?T.bindVertexArray(c):(y=T.getExtension("OES_vertex_array_object"))===null||y===void 0||y.bindVertexArrayOES(c),this.current=c,this.dirty=!1}}class dp extends Br{getDefault(){return 4}set(c){if(c===this.current&&!this.dirty)return;const y=this.gl;y.pixelStorei(y.UNPACK_ALIGNMENT,c),this.current=c,this.dirty=!1}}class Cl extends Br{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const y=this.gl;y.pixelStorei(y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),this.current=c,this.dirty=!1}}class Du extends Br{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const y=this.gl;y.pixelStorei(y.UNPACK_FLIP_Y_WEBGL,c),this.current=c,this.dirty=!1}}class ic extends Br{constructor(c,y){super(c),this.context=c,this.parent=y}getDefault(){return null}}class Kh extends ic{setDirty(){this.dirty=!0}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const y=this.gl;y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}}class hp extends ic{set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const y=this.gl;y.framebufferRenderbuffer(y.FRAMEBUFFER,y.DEPTH_ATTACHMENT,y.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class Xs extends ic{set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const y=this.gl;y.framebufferRenderbuffer(y.FRAMEBUFFER,y.DEPTH_STENCIL_ATTACHMENT,y.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class Uo{constructor(c,y,T,I,D){this.context=c,this.width=y,this.height=T;const U=c.gl,q=this.framebuffer=U.createFramebuffer();if(this.colorAttachment=new Kh(c,q),I)this.depthAttachment=D?new Xs(c,q):new hp(c,q);else if(D)throw new Error("Stencil cannot be set without depth");if(U.checkFramebufferStatus(U.FRAMEBUFFER)!==U.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const c=this.context.gl,y=this.colorAttachment.get();if(y&&c.deleteTexture(y),this.depthAttachment){const T=this.depthAttachment.get();T&&c.deleteRenderbuffer(T)}c.deleteFramebuffer(this.framebuffer)}}class pi{constructor(c,y,T){this.blendFunction=c,this.blendColor=y,this.mask=T}}pi.Replace=[1,0],pi.disabled=new pi(pi.Replace,a.aM.transparent,[!1,!1,!1,!1]),pi.unblended=new pi(pi.Replace,a.aM.transparent,[!0,!0,!0,!0]),pi.alphaBlended=new pi([1,771],a.aM.transparent,[!0,!0,!0,!0]);class Oc{constructor(c){var y,T;if(this.gl=c,this.clearColor=new Lu(this),this.clearDepth=new Sw(this),this.clearStencil=new Gs(this),this.colorMask=new Bm(this),this.depthMask=new kc(this),this.stencilMask=new Yh(this),this.stencilFunc=new jm(this),this.stencilOp=new ov(this),this.stencilTest=new sv(this),this.depthRange=new lp(this),this.depthTest=new $m(this),this.depthFunc=new $d(this),this.blend=new ga(this),this.blendFunc=new Tl(this),this.blendColor=new qs(this),this.blendEquation=new Um(this),this.cullFace=new b_(this),this.cullFaceSide=new rc(this),this.frontFace=new Ha(this),this.program=new Vm(this),this.activeTexture=new cp(this),this.viewport=new Hm(this),this.bindFramebuffer=new w_(this),this.bindRenderbuffer=new av(this),this.bindTexture=new Wm(this),this.bindVertexBuffer=new up(this),this.bindElementBuffer=new Gm(this),this.bindVertexArray=new lv(this),this.pixelStoreUnpack=new dp(this),this.pixelStoreUnpackPremultiplyAlpha=new Cl(this),this.pixelStoreUnpackFlipY=new Du(this),this.extTextureFilterAnisotropic=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=c.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE),Is(c)){this.HALF_FLOAT=c.HALF_FLOAT;const I=c.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(y=c.RGBA16F)!==null&&y!==void 0?y:I==null?void 0:I.RGBA16F_EXT,this.RGB16F=(T=c.RGB16F)!==null&&T!==void 0?T:I==null?void 0:I.RGB16F_EXT,c.getExtension("EXT_color_buffer_float")}else{c.getExtension("EXT_color_buffer_half_float"),c.getExtension("OES_texture_half_float_linear");const I=c.getExtension("OES_texture_half_float");this.HALF_FLOAT=I==null?void 0:I.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(c,y){return new Xh(this,c,y)}createVertexBuffer(c,y,T){return new El(this,c,y,T)}createRenderbuffer(c,y,T){const I=this.gl,D=I.createRenderbuffer();return this.bindRenderbuffer.set(D),I.renderbufferStorage(I.RENDERBUFFER,c,y,T),this.bindRenderbuffer.set(null),D}createFramebuffer(c,y,T,I){return new Uo(this,c,y,T,I)}clear({color:c,depth:y,stencil:T}){const I=this.gl;let D=0;c&&(D|=I.COLOR_BUFFER_BIT,this.clearColor.set(c),this.colorMask.set([!0,!0,!0,!0])),y!==void 0&&(D|=I.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(y),this.depthMask.set(!0)),T!==void 0&&(D|=I.STENCIL_BUFFER_BIT,this.clearStencil.set(T),this.stencilMask.set(255)),I.clear(D)}setCullFace(c){c.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(c.mode),this.frontFace.set(c.frontFace))}setDepthMode(c){c.func!==this.gl.ALWAYS||c.mask?(this.depthTest.set(!0),this.depthFunc.set(c.func),this.depthMask.set(c.mask),this.depthRange.set(c.range)):this.depthTest.set(!1)}setStencilMode(c){c.test.func!==this.gl.ALWAYS||c.mask?(this.stencilTest.set(!0),this.stencilMask.set(c.mask),this.stencilOp.set([c.fail,c.depthFail,c.pass]),this.stencilFunc.set({func:c.test.func,ref:c.ref,mask:c.test.mask})):this.stencilTest.set(!1)}setColorMode(c){a.aE(c.blendFunction,pi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(c.blendFunction),this.blendColor.set(c.blendColor)),this.colorMask.set(c.mask)}createVertexArray(){var c;return Is(this.gl)?this.gl.createVertexArray():(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.createVertexArrayOES()}deleteVertexArray(c){var y;return Is(this.gl)?this.gl.deleteVertexArray(c):(y=this.gl.getExtension("OES_vertex_array_object"))===null||y===void 0?void 0:y.deleteVertexArrayOES(c)}unbindVAO(){this.bindVertexArray.set(null)}}class gr{constructor(c,y,T){this.func=c,this.mask=y,this.range=T}}gr.ReadOnly=!1,gr.ReadWrite=!0,gr.disabled=new gr(519,gr.ReadOnly,[0,1]);const Lc=7680;class zi{constructor(c,y,T,I,D,U){this.test=c,this.ref=y,this.mask=T,this.fail=I,this.depthFail=D,this.pass=U}}zi.disabled=new zi({func:519,mask:0},0,0,Lc,Lc,Lc);class mi{constructor(c,y,T){this.enable=c,this.mode=y,this.frontFace=T}}let Zh;function Rs(L,c,y,T,I){const D=L.context,U=D.gl,q=L.useProgram("collisionBox"),K=[];let te=0,ce=0;for(let Ge=0;Ge<T.length;Ge++){const nt=T[Ge],Fe=c.getTile(nt).getBucket(y);if(!Fe)continue;const ct=I?Fe.textCollisionBox:Fe.iconCollisionBox,yt=Fe.collisionCircleArray;if(yt.length>0){const Pt=a.H();a.aQ(Pt,Fe.placementInvProjMatrix,L.transform.glCoordMatrix),a.aQ(Pt,Pt,Fe.placementViewportMatrix),K.push({circleArray:yt,circleOffset:ce,transform:nt.posMatrix,invTransform:Pt,coord:nt}),te+=yt.length/4,ce=te}ct&&q.draw(D,U.LINES,gr.disabled,zi.disabled,L.colorModeForRenderPass(),mi.disabled,{u_matrix:nt.posMatrix,u_pixel_extrude_scale:[1/(ae=L.transform).width,1/ae.height]},L.style.map.terrain&&L.style.map.terrain.getTerrainData(nt),y.id,ct.layoutVertexBuffer,ct.indexBuffer,ct.segments,null,L.transform.zoom,null,null,ct.collisionVertexBuffer)}var ae;if(!I||!K.length)return;const xe=L.useProgram("collisionCircle"),Pe=new a.aR;Pe.resize(4*te),Pe._trim();let Ee=0;for(const Ge of K)for(let nt=0;nt<Ge.circleArray.length/4;nt++){const Fe=4*nt,ct=Ge.circleArray[Fe+0],yt=Ge.circleArray[Fe+1],Pt=Ge.circleArray[Fe+2],Gt=Ge.circleArray[Fe+3];Pe.emplace(Ee++,ct,yt,Pt,Gt,0),Pe.emplace(Ee++,ct,yt,Pt,Gt,1),Pe.emplace(Ee++,ct,yt,Pt,Gt,2),Pe.emplace(Ee++,ct,yt,Pt,Gt,3)}(!Zh||Zh.length<2*te)&&(Zh=function(Ge){const nt=2*Ge,Fe=new a.aT;Fe.resize(nt),Fe._trim();for(let ct=0;ct<nt;ct++){const yt=6*ct;Fe.uint16[yt+0]=4*ct+0,Fe.uint16[yt+1]=4*ct+1,Fe.uint16[yt+2]=4*ct+2,Fe.uint16[yt+3]=4*ct+2,Fe.uint16[yt+4]=4*ct+3,Fe.uint16[yt+5]=4*ct+0}return Fe}(te));const $e=D.createIndexBuffer(Zh,!0),ze=D.createVertexBuffer(Pe,a.aS.members,!0);for(const Ge of K){const nt=xw(Ge.transform,Ge.invTransform,L.transform);xe.draw(D,U.TRIANGLES,gr.disabled,zi.disabled,L.colorModeForRenderPass(),mi.disabled,nt,L.style.map.terrain&&L.style.map.terrain.getTerrainData(Ge.coord),y.id,ze,$e,a.a0.simpleSegment(0,2*Ge.circleOffset,Ge.circleArray.length,Ge.circleArray.length/2),null,L.transform.zoom,null,null,null)}ze.destroy(),$e.destroy()}mi.disabled=new mi(!1,1029,2305),mi.backCCW=new mi(!0,1029,2305);const es=a.an(new Float32Array(16));function Ci(L,c,y,T,I,D){const{horizontalAlign:U,verticalAlign:q}=a.au(L);return new a.P((-(U-.5)*c/I+T[0])*D,(-(q-.5)*y/I+T[1])*D)}function Nu(L,c,y,T,I,D){const U=c.tileAnchorPoint.add(new a.P(c.translation[0],c.translation[1]));if(c.pitchWithMap){let q=T.mult(D);return y||(q=q.rotate(-I)),ve(U.add(q),c.labelPlaneMatrix,c.getElevation).point}if(y){const q=At(c.tileAnchorPoint.x+1,c.tileAnchorPoint.y,c).point.sub(L),K=Math.atan(q.y/q.x)+(q.x<0?Math.PI:0);return L.add(T.rotate(K))}return L.add(T)}function ya(L,c,y,T,I,D,U,q,K,te,ce,ae,xe,Pe){const Ee=L.text.placedSymbolArray,$e=L.text.dynamicLayoutVertexArray,ze=L.icon.dynamicLayoutVertexArray,Ge={};$e.clear();for(let nt=0;nt<Ee.length;nt++){const Fe=Ee.get(nt),ct=Fe.hidden||!Fe.crossTileID||L.allowVerticalPlacement&&!Fe.placedOrientation?null:T[Fe.crossTileID];if(ct){const yt=new a.P(Fe.anchorX,Fe.anchorY),Pt={getElevation:Pe,width:I.width,height:I.height,labelPlaneMatrix:D,lineVertexArray:null,pitchWithMap:y,projection:ce,projectionCache:null,tileAnchorPoint:yt,translation:ae,unwrappedTileID:xe},Gt=y?ve(yt,U,Pe):At(yt.x,yt.y,Pt),on=ie(I.cameraToCenterDistance,Gt.signedDistanceFromCamera);let vn=a.ai(L.textSizeData,K,Fe)*on/a.ap;y&&(vn*=L.tilePixelRatio/q);const{width:_n,height:sn,anchor:cn,textOffset:Cn,textBoxScale:ar}=ct,un=Ci(cn,_n,sn,Cn,ar,vn),pn=ce.getPitchedTextCorrection(I,yt.add(new a.P(ae[0],ae[1])),xe),or=Nu(Gt.point,Pt,c,un,I.angle,pn),Pi=L.allowVerticalPlacement&&Fe.placedOrientation===a.ah.vertical?Math.PI/2:0;for(let yr=0;yr<Fe.numGlyphs;yr++)a.aj($e,or,Pi);te&&Fe.associatedIconIndex>=0&&(Ge[Fe.associatedIconIndex]={shiftedAnchor:or,angle:Pi})}else zn(Fe.numGlyphs,$e)}if(te){ze.clear();const nt=L.icon.placedSymbolArray;for(let Fe=0;Fe<nt.length;Fe++){const ct=nt.get(Fe);if(ct.hidden)zn(ct.numGlyphs,ze);else{const yt=Ge[Fe];if(yt)for(let Pt=0;Pt<ct.numGlyphs;Pt++)a.aj(ze,yt.shiftedAnchor,yt.angle);else zn(ct.numGlyphs,ze)}}L.icon.dynamicLayoutVertexBuffer.updateData(ze)}L.text.dynamicLayoutVertexBuffer.updateData($e)}function zu(L,c,y){return y.iconsInText&&c?"symbolTextAndIcon":L?"symbolSDF":"symbolIcon"}function Fu(L,c,y,T,I,D,U,q,K,te,ce,ae){const xe=L.context,Pe=xe.gl,Ee=L.transform,$e=sr(),ze=q==="map",Ge=K==="map",nt=q!=="viewport"&&y.layout.get("symbol-placement")!=="point",Fe=ze&&!Ge&&!nt,ct=!Ge&&nt,yt=!y.layout.get("symbol-sort-key").isConstant();let Pt=!1;const Gt=L.depthModeForSublayer(0,gr.ReadOnly),on=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),vn=[],_n=$e.getCircleRadiusCorrection(Ee);for(const sn of T){const cn=c.getTile(sn),Cn=cn.getBucket(y);if(!Cn)continue;const ar=I?Cn.text:Cn.icon;if(!ar||!ar.segments.get().length||!ar.hasVisibleVertices)continue;const un=ar.programConfigurations.get(y.id),pn=I||Cn.sdfIcons,or=I?Cn.textSizeData:Cn.iconSizeData,Pi=Ge||Ee.pitch!==0,yr=L.useProgram(zu(pn,I,Cn),un),Er=a.ag(or,Ee.zoom),Ii=L.style.map.terrain&&L.style.map.terrain.getTerrainData(sn);let rs,Js,gi,is,Vo=[0,0],Oo=null;if(I)Js=cn.glyphAtlasTexture,gi=Pe.LINEAR,rs=cn.glyphAtlasTexture.size,Cn.iconsInText&&(Vo=cn.imageAtlasTexture.size,Oo=cn.imageAtlasTexture,is=Pi||L.options.rotating||L.options.zooming||or.kind==="composite"||or.kind==="camera"?Pe.LINEAR:Pe.NEAREST);else{const xi=y.layout.get("icon-size").constantOr(0)!==1||Cn.iconsNeedLinear;Js=cn.imageAtlasTexture,gi=pn||L.options.rotating||L.options.zooming||xi||Pi?Pe.LINEAR:Pe.NEAREST,rs=cn.imageAtlasTexture.size}const wo=ir(cn,1,L.transform.zoom),ba=ct?sn.posMatrix:es,jc=Xe(ba,Ge,ze,L.transform,wo),Kd=Yt(ba,Ge,ze,L.transform,wo),Gu=Yt(sn.posMatrix,Ge,ze,L.transform,wo),cc=$e.translatePosition(L.transform,cn,D,U),dg=on&&Cn.hasTextData(),cf=y.layout.get("icon-text-fit")!=="none"&&dg&&Cn.hasIconData();if(nt){const xi=L.style.map.terrain?(Ka,uc)=>L.style.map.terrain.getElevation(sn,Ka,uc):null,qi=y.layout.get("text-rotation-alignment")==="map";Se(Cn,sn.posMatrix,L,I,jc,Gu,Ge,te,qi,$e,sn.toUnwrapped(),Ee.width,Ee.height,cc,xi)}const Qs=sn.posMatrix,ni=I&&on||cf,vr=nt||ni?es:jc,li=Kd,Vr=pn&&y.paint.get(I?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Kr;Kr=pn?Cn.iconsInText?ww(or.kind,Er,Fe,Ge,nt,ni,L,Qs,vr,li,cc,rs,Vo,_n):Ml(or.kind,Er,Fe,Ge,nt,ni,L,Qs,vr,li,cc,I,rs,!0,_n):sp(or.kind,Er,Fe,Ge,nt,ni,L,Qs,vr,li,cc,I,rs,_n);const ji={program:yr,buffers:ar,uniformValues:Kr,atlasTexture:Js,atlasTextureIcon:Oo,atlasInterpolation:gi,atlasInterpolationIcon:is,isSDF:pn,hasHalo:Vr};if(yt&&Cn.canOverlap){Pt=!0;const xi=ar.segments.get();for(const qi of xi)vn.push({segments:new a.a0([qi]),sortKey:qi.sortKey,state:ji,terrainData:Ii})}else vn.push({segments:ar.segments,sortKey:0,state:ji,terrainData:Ii})}Pt&&vn.sort((sn,cn)=>sn.sortKey-cn.sortKey);for(const sn of vn){const cn=sn.state;if(xe.activeTexture.set(Pe.TEXTURE0),cn.atlasTexture.bind(cn.atlasInterpolation,Pe.CLAMP_TO_EDGE),cn.atlasTextureIcon&&(xe.activeTexture.set(Pe.TEXTURE1),cn.atlasTextureIcon&&cn.atlasTextureIcon.bind(cn.atlasInterpolationIcon,Pe.CLAMP_TO_EDGE)),cn.isSDF){const Cn=cn.uniformValues;cn.hasHalo&&(Cn.u_is_halo=1,ks(cn.buffers,sn.segments,y,L,cn.program,Gt,ce,ae,Cn,sn.terrainData)),Cn.u_is_halo=0}ks(cn.buffers,sn.segments,y,L,cn.program,Gt,ce,ae,cn.uniformValues,sn.terrainData)}}function ks(L,c,y,T,I,D,U,q,K,te){const ce=T.context;I.draw(ce,ce.gl.TRIANGLES,D,U,q,mi.disabled,K,te,y.id,L.layoutVertexBuffer,L.indexBuffer,c,y.paint,T.transform.zoom,L.programConfigurations.get(y.id),L.dynamicLayoutVertexBuffer,L.opacityVertexBuffer)}function fp(L,c,y,T,I){if(!y||!T||!T.imageAtlas)return;const D=T.imageAtlas.patternPositions;let U=D[y.to.toString()],q=D[y.from.toString()];if(!U&&q&&(U=q),!q&&U&&(q=U),!U||!q){const K=I.getPaintProperty(c);U=D[K],q=D[K]}U&&q&&L.setConstantPatternPositions(U,q)}function qm(L,c,y,T,I,D,U){const q=L.context.gl,K="fill-pattern",te=y.paint.get(K),ce=te&&te.constantOr(1),ae=y.getCrossfadeParameters();let xe,Pe,Ee,$e,ze;U?(Pe=ce&&!y.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",xe=q.LINES):(Pe=ce?"fillPattern":"fill",xe=q.TRIANGLES);const Ge=te.constantOr(null);for(const nt of T){const Fe=c.getTile(nt);if(ce&&!Fe.patternsLoaded())continue;const ct=Fe.getBucket(y);if(!ct)continue;const yt=ct.programConfigurations.get(y.id),Pt=L.useProgram(Pe,yt),Gt=L.style.map.terrain&&L.style.map.terrain.getTerrainData(nt);ce&&(L.context.activeTexture.set(q.TEXTURE0),Fe.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),yt.updatePaintBuffers(ae)),fp(yt,K,Ge,Fe,y);const on=Gt?nt:null,vn=L.translatePosMatrix(on?on.posMatrix:nt.posMatrix,Fe,y.paint.get("fill-translate"),y.paint.get("fill-translate-anchor"));if(U){$e=ct.indexBuffer2,ze=ct.segments2;const _n=[q.drawingBufferWidth,q.drawingBufferHeight];Ee=Pe==="fillOutlinePattern"&&ce?nv(vn,L,ae,Fe,_n):tv(vn,_n)}else $e=ct.indexBuffer,ze=ct.segments,Ee=ce?Wh(vn,L,ae,Fe):op(vn);Pt.draw(L.context,xe,I,L.stencilModeForClipping(nt),D,mi.disabled,Ee,Gt,y.id,ct.layoutVertexBuffer,$e,ze,y.paint,L.transform.zoom,yt)}}function Dc(L,c,y,T,I,D,U){const q=L.context,K=q.gl,te="fill-extrusion-pattern",ce=y.paint.get(te),ae=ce.constantOr(1),xe=y.getCrossfadeParameters(),Pe=y.paint.get("fill-extrusion-opacity"),Ee=ce.constantOr(null);for(const $e of T){const ze=c.getTile($e),Ge=ze.getBucket(y);if(!Ge)continue;const nt=L.style.map.terrain&&L.style.map.terrain.getTerrainData($e),Fe=Ge.programConfigurations.get(y.id),ct=L.useProgram(ae?"fillExtrusionPattern":"fillExtrusion",Fe);ae&&(L.context.activeTexture.set(K.TEXTURE0),ze.imageAtlasTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE),Fe.updatePaintBuffers(xe)),fp(Fe,te,Ee,ze,y);const yt=L.translatePosMatrix($e.posMatrix,ze,y.paint.get("fill-extrusion-translate"),y.paint.get("fill-extrusion-translate-anchor")),Pt=y.paint.get("fill-extrusion-vertical-gradient"),Gt=ae?jd(yt,L,Pt,Pe,$e,xe,ze):Ou(yt,L,Pt,Pe);ct.draw(q,q.gl.TRIANGLES,I,D,U,mi.backCCW,Gt,nt,y.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,y.paint,L.transform.zoom,Fe,L.style.map.terrain&&Ge.centroidVertexBuffer)}}function Wa(L,c,y,T,I,D,U){const q=L.context,K=q.gl,te=y.fbo;if(!te)return;const ce=L.useProgram("hillshade"),ae=L.style.map.terrain&&L.style.map.terrain.getTerrainData(c);q.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,te.colorAttachment.get()),ce.draw(q,K.TRIANGLES,I,D,U,mi.disabled,((xe,Pe,Ee,$e)=>{const ze=Ee.paint.get("hillshade-shadow-color"),Ge=Ee.paint.get("hillshade-highlight-color"),nt=Ee.paint.get("hillshade-accent-color");let Fe=Ee.paint.get("hillshade-illumination-direction")*(Math.PI/180);Ee.paint.get("hillshade-illumination-anchor")==="viewport"&&(Fe-=xe.transform.angle);const ct=!xe.options.moving;return{u_matrix:$e?$e.posMatrix:xe.transform.calculatePosMatrix(Pe.tileID.toUnwrapped(),ct),u_image:0,u_latrange:Ps(0,Pe.tileID),u_light:[Ee.paint.get("hillshade-exaggeration"),Fe],u_shadow:ze,u_highlight:Ge,u_accent:nt}})(L,y,T,ae?c:null),ae,T.id,L.rasterBoundsBuffer,L.quadTriangleIndexBuffer,L.rasterBoundsSegments)}function Jh(L,c,y,T,I,D){const U=L.context,q=U.gl,K=c.dem;if(K&&K.data){const te=K.dim,ce=K.stride,ae=K.getPixels();if(U.activeTexture.set(q.TEXTURE1),U.pixelStoreUnpackPremultiplyAlpha.set(!1),c.demTexture=c.demTexture||L.getTileTexture(ce),c.demTexture){const Pe=c.demTexture;Pe.update(ae,{premultiply:!1}),Pe.bind(q.NEAREST,q.CLAMP_TO_EDGE)}else c.demTexture=new Y(U,ae,q.RGBA,{premultiply:!1}),c.demTexture.bind(q.NEAREST,q.CLAMP_TO_EDGE);U.activeTexture.set(q.TEXTURE0);let xe=c.fbo;if(!xe){const Pe=new Y(U,{width:te,height:te,data:null},q.RGBA);Pe.bind(q.LINEAR,q.CLAMP_TO_EDGE),xe=c.fbo=U.createFramebuffer(te,te,!0,!1),xe.colorAttachment.set(Pe.texture)}U.bindFramebuffer.set(xe.framebuffer),U.viewport.set([0,0,te,te]),L.useProgram("hillshadePrepare").draw(U,q.TRIANGLES,T,I,D,mi.disabled,((Pe,Ee)=>{const $e=Ee.stride,ze=a.H();return a.aP(ze,0,a.X,-a.X,0,0,1),a.J(ze,ze,[0,-a.X,0]),{u_matrix:ze,u_image:1,u_dimension:[$e,$e],u_zoom:Pe.overscaledZ,u_unpack:Ee.getUnpackVector()}})(c.tileID,K),null,y.id,L.rasterBoundsBuffer,L.quadTriangleIndexBuffer,L.rasterBoundsSegments),c.needsHillshadePrepare=!1}}function Bu(L,c,y,T,I,D){const U=T.paint.get("raster-fade-duration");if(!D&&U>0){const q=p.now(),K=(q-L.timeAdded)/U,te=c?(q-c.timeAdded)/U:-1,ce=y.getSource(),ae=I.coveringZoomLevel({tileSize:ce.tileSize,roundZoom:ce.roundZoom}),xe=!c||Math.abs(c.tileID.overscaledZ-ae)>Math.abs(L.tileID.overscaledZ-ae),Pe=xe&&L.refreshedUponExpiration?1:a.ac(xe?K:1-te,0,1);return L.refreshedUponExpiration&&K>=1&&(L.refreshedUponExpiration=!1),c?{opacity:1,mix:1-Pe}:{opacity:Pe,mix:0}}return{opacity:1,mix:0}}const ju=new a.aM(1,0,0,1),pp=new a.aM(0,1,0,1),cv=new a.aM(0,0,1,1),Al=new a.aM(1,0,1,1),Ud=new a.aM(0,1,1,1);function Vd(L,c,y,T){Mr(L,0,c+y/2,L.transform.width,y,T)}function Os(L,c,y,T){Mr(L,c-y/2,0,y,L.transform.height,T)}function Mr(L,c,y,T,I,D){const U=L.context,q=U.gl;q.enable(q.SCISSOR_TEST),q.scissor(c*L.pixelRatio,y*L.pixelRatio,T*L.pixelRatio,I*L.pixelRatio),U.clear({color:D}),q.disable(q.SCISSOR_TEST)}function Nc(L,c,y){const T=L.context,I=T.gl,D=y.posMatrix,U=L.useProgram("debug"),q=gr.disabled,K=zi.disabled,te=L.colorModeForRenderPass(),ce="$debug",ae=L.style.map.terrain&&L.style.map.terrain.getTerrainData(y);T.activeTexture.set(I.TEXTURE0);const xe=c.getTileByID(y.key).latestRawTileData,Pe=Math.floor((xe&&xe.byteLength||0)/1024),Ee=c.getTile(y).tileSize,$e=512/Math.min(Ee,512)*(y.overscaledZ/L.transform.zoom)*.5;let ze=y.canonical.toString();y.overscaledZ!==y.canonical.z&&(ze+=` => ${y.overscaledZ}`),function(Ge,nt){Ge.initDebugOverlayCanvas();const Fe=Ge.debugOverlayCanvas,ct=Ge.context.gl,yt=Ge.debugOverlayCanvas.getContext("2d");yt.clearRect(0,0,Fe.width,Fe.height),yt.shadowColor="white",yt.shadowBlur=2,yt.lineWidth=1.5,yt.strokeStyle="white",yt.textBaseline="top",yt.font="bold 36px Open Sans, sans-serif",yt.fillText(nt,5,5),yt.strokeText(nt,5,5),Ge.debugOverlayTexture.update(Fe),Ge.debugOverlayTexture.bind(ct.LINEAR,ct.CLAMP_TO_EDGE)}(L,`${ze} ${Pe}kB`),U.draw(T,I.TRIANGLES,q,K,pi.alphaBlended,mi.disabled,nc(D,a.aM.transparent,$e),null,ce,L.debugBuffer,L.quadTriangleIndexBuffer,L.debugSegments),U.draw(T,I.LINE_STRIP,q,K,te,mi.disabled,nc(D,a.aM.red),ae,ce,L.debugBuffer,L.tileBorderIndexBuffer,L.debugSegments)}function Pl(L,c,y){const T=L.context,I=T.gl,D=L.colorModeForRenderPass(),U=new gr(I.LEQUAL,gr.ReadWrite,L.depthRangeFor3D),q=L.useProgram("terrain"),K=c.getTerrainMesh();T.bindFramebuffer.set(null),T.viewport.set([0,0,L.width,L.height]);for(const te of y){const ce=L.renderToTexture.getTexture(te),ae=c.getTerrainData(te.tileID);T.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,ce.texture);const xe=L.transform.calculatePosMatrix(te.tileID.toUnwrapped()),Pe=c.getMeshFrameDelta(L.transform.zoom),Ee=L.transform.calculateFogMatrix(te.tileID.toUnwrapped()),$e=ev(xe,Pe,Ee,L.style.sky,L.transform.pitch);q.draw(T,I.TRIANGLES,U,zi.disabled,D,mi.backCCW,$e,ae,"terrain",K.vertexBuffer,K.indexBuffer,K.segments)}}class mp{constructor(c,y,T){this.vertexBuffer=c,this.indexBuffer=y,this.segments=T}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class oc{constructor(c,y){this.context=new Oc(c),this.transform=y,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=ht.maxUnderzooming+ht.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new fi}resize(c,y,T){if(this.width=Math.floor(c*T),this.height=Math.floor(y*T),this.pixelRatio=T,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const I of this.style._order)this.style._layers[I].resize()}setup(){const c=this.context,y=new a.aW;y.emplaceBack(0,0),y.emplaceBack(a.X,0),y.emplaceBack(0,a.X),y.emplaceBack(a.X,a.X),this.tileExtentBuffer=c.createVertexBuffer(y,so.members),this.tileExtentSegments=a.a0.simpleSegment(0,0,4,2);const T=new a.aW;T.emplaceBack(0,0),T.emplaceBack(a.X,0),T.emplaceBack(0,a.X),T.emplaceBack(a.X,a.X),this.debugBuffer=c.createVertexBuffer(T,so.members),this.debugSegments=a.a0.simpleSegment(0,0,4,5);const I=new a.$;I.emplaceBack(0,0,0,0),I.emplaceBack(a.X,0,a.X,0),I.emplaceBack(0,a.X,0,a.X),I.emplaceBack(a.X,a.X,a.X,a.X),this.rasterBoundsBuffer=c.createVertexBuffer(I,Me.members),this.rasterBoundsSegments=a.a0.simpleSegment(0,0,4,2);const D=new a.aW;D.emplaceBack(0,0),D.emplaceBack(1,0),D.emplaceBack(0,1),D.emplaceBack(1,1),this.viewportBuffer=c.createVertexBuffer(D,so.members),this.viewportSegments=a.a0.simpleSegment(0,0,4,2);const U=new a.aY;U.emplaceBack(0),U.emplaceBack(1),U.emplaceBack(3),U.emplaceBack(2),U.emplaceBack(0),this.tileBorderIndexBuffer=c.createIndexBuffer(U);const q=new a.aX;q.emplaceBack(0,1,2),q.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=c.createIndexBuffer(q);const K=this.context.gl;this.stencilClearMode=new zi({func:K.ALWAYS,mask:0},0,255,K.ZERO,K.ZERO,K.ZERO)}clearStencil(){const c=this.context,y=c.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const T=a.H();a.aP(T,0,this.width,this.height,0,0,1),a.K(T,T,[y.drawingBufferWidth,y.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(c,y.TRIANGLES,gr.disabled,this.stencilClearMode,pi.disabled,mi.disabled,Fr(T),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(c,y){if(this.currentStencilSource===c.source||!c.isTileClipped()||!y||!y.length)return;this.currentStencilSource=c.source;const T=this.context,I=T.gl;this.nextStencilID+y.length>256&&this.clearStencil(),T.setColorMode(pi.disabled),T.setDepthMode(gr.disabled);const D=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const U of y){const q=this._tileClippingMaskIDs[U.key]=this.nextStencilID++,K=this.style.map.terrain&&this.style.map.terrain.getTerrainData(U);D.draw(T,I.TRIANGLES,gr.disabled,new zi({func:I.ALWAYS,mask:0},q,255,I.KEEP,I.KEEP,I.REPLACE),pi.disabled,mi.disabled,Fr(U.posMatrix),K,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const c=this.nextStencilID++,y=this.context.gl;return new zi({func:y.NOTEQUAL,mask:255},c,255,y.KEEP,y.KEEP,y.REPLACE)}stencilModeForClipping(c){const y=this.context.gl;return new zi({func:y.EQUAL,mask:255},this._tileClippingMaskIDs[c.key],0,y.KEEP,y.KEEP,y.REPLACE)}stencilConfigForOverlap(c){const y=this.context.gl,T=c.sort((U,q)=>q.overscaledZ-U.overscaledZ),I=T[T.length-1].overscaledZ,D=T[0].overscaledZ-I+1;if(D>1){this.currentStencilSource=void 0,this.nextStencilID+D>256&&this.clearStencil();const U={};for(let q=0;q<D;q++)U[q+I]=new zi({func:y.GEQUAL,mask:255},q+this.nextStencilID,255,y.KEEP,y.KEEP,y.REPLACE);return this.nextStencilID+=D,[U,T]}return[{[I]:zi.disabled},T]}colorModeForRenderPass(){const c=this.context.gl;return this._showOverdrawInspector?new pi([c.CONSTANT_COLOR,c.ONE],new a.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?pi.unblended:pi.alphaBlended}depthModeForSublayer(c,y,T){if(!this.opaquePassEnabledForLayer())return gr.disabled;const I=1-((1+this.currentLayer)*this.numSublayers+c)*this.depthEpsilon;return new gr(T||this.context.gl.LEQUAL,y,[I,I])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(c,y){this.style=c,this.options=y,this.lineAtlas=c.lineAtlas,this.imageManager=c.imageManager,this.glyphManager=c.glyphManager,this.symbolFadeChange=c.placement.symbolFadeChange(p.now()),this.imageManager.beginFrame();const T=this.style._order,I=this.style.sourceCaches,D={},U={},q={};for(const K in I){const te=I[K];te.used&&te.prepare(this.context),D[K]=te.getVisibleCoordinates(),U[K]=D[K].slice().reverse(),q[K]=te.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let K=0;K<T.length;K++)if(this.style._layers[T[K]].is3D()){this.opaquePassCutoff=K;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const K of T){const te=this.style._layers[K];if(!te.hasOffscreenPass()||te.isHidden(this.transform.zoom))continue;const ce=U[te.source];(te.type==="custom"||ce.length)&&this.renderLayer(this,I[te.source],te,ce)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:y.showOverdrawInspector?a.aM.black:a.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(K,te){const ce=K.context,ae=ce.gl,xe=((Ge,nt,Fe)=>({u_sky_color:Ge.properties.get("sky-color"),u_horizon_color:Ge.properties.get("horizon-color"),u_horizon:(nt.height/2+nt.getHorizon())*Fe,u_sky_horizon_blend:Ge.properties.get("sky-horizon-blend")*nt.height/2*Fe}))(te,K.style.map.transform,K.pixelRatio),Pe=new gr(ae.LEQUAL,gr.ReadWrite,[0,1]),Ee=zi.disabled,$e=K.colorModeForRenderPass(),ze=K.useProgram("sky");if(!te.mesh){const Ge=new a.aW;Ge.emplaceBack(-1,-1),Ge.emplaceBack(1,-1),Ge.emplaceBack(1,1),Ge.emplaceBack(-1,1);const nt=new a.aX;nt.emplaceBack(0,1,2),nt.emplaceBack(0,2,3),te.mesh=new mp(ce.createVertexBuffer(Ge,so.members),ce.createIndexBuffer(nt),a.a0.simpleSegment(0,0,Ge.length,nt.length))}ze.draw(ce,ae.TRIANGLES,Pe,Ee,$e,mi.disabled,xe,void 0,"sky",te.mesh.vertexBuffer,te.mesh.indexBuffer,te.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=y.showOverdrawInspector,this.depthRangeFor3D=[0,1-(c._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=T.length-1;this.currentLayer>=0;this.currentLayer--){const K=this.style._layers[T[this.currentLayer]],te=I[K.source],ce=D[K.source];this._renderTileClippingMasks(K,ce),this.renderLayer(this,te,K,ce)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<T.length;this.currentLayer++){const K=this.style._layers[T[this.currentLayer]],te=I[K.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(K))continue;const ce=(K.type==="symbol"?q:U)[K.source];this._renderTileClippingMasks(K,D[K.source]),this.renderLayer(this,te,K,ce)}if(this.options.showTileBoundaries){const K=function(te,ce){let ae=null;const xe=Object.values(te._layers).flatMap(ze=>ze.source&&!ze.isHidden(ce)?[te.sourceCaches[ze.source]]:[]),Pe=xe.filter(ze=>ze.getSource().type==="vector"),Ee=xe.filter(ze=>ze.getSource().type!=="vector"),$e=ze=>{(!ae||ae.getSource().maxzoom<ze.getSource().maxzoom)&&(ae=ze)};return Pe.forEach(ze=>$e(ze)),ae||Ee.forEach(ze=>$e(ze)),ae}(this.style,this.transform.zoom);K&&function(te,ce,ae){for(let xe=0;xe<ae.length;xe++)Nc(te,ce,ae[xe])}(this,K,K.getVisibleCoordinates())}this.options.showPadding&&function(K){const te=K.transform.padding;Vd(K,K.transform.height-(te.top||0),3,ju),Vd(K,te.bottom||0,3,pp),Os(K,te.left||0,3,cv),Os(K,K.transform.width-(te.right||0),3,Al);const ce=K.transform.centerPoint;(function(ae,xe,Pe,Ee){Mr(ae,xe-1,Pe-10,2,20,Ee),Mr(ae,xe-10,Pe-1,20,2,Ee)})(K,ce.x,K.transform.height-ce.y,Ud)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(c){if(!this.style||!this.style.map||!this.style.map.terrain)return;const y=this.terrainFacilitator.matrix,T=this.transform.modelViewProjectionMatrix;let I=this.terrainFacilitator.dirty;I||(I=c?!a.aZ(y,T):!a.a_(y,T)),I||(I=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),I&&(a.a$(y,T),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(D,U){const q=D.context,K=q.gl,te=pi.unblended,ce=new gr(K.LEQUAL,gr.ReadWrite,[0,1]),ae=U.getTerrainMesh(),xe=U.sourceCache.getRenderableTiles(),Pe=D.useProgram("terrainDepth");q.bindFramebuffer.set(U.getFramebuffer("depth").framebuffer),q.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),q.clear({color:a.aM.transparent,depth:1});for(const Ee of xe){const $e=U.getTerrainData(Ee.tileID),ze={u_matrix:D.transform.calculatePosMatrix(Ee.tileID.toUnwrapped()),u_ele_delta:U.getMeshFrameDelta(D.transform.zoom)};Pe.draw(q,K.TRIANGLES,ce,zi.disabled,te,mi.backCCW,ze,$e,"terrain",ae.vertexBuffer,ae.indexBuffer,ae.segments)}q.bindFramebuffer.set(null),q.viewport.set([0,0,D.width,D.height])}(this,this.style.map.terrain),function(D,U){const q=D.context,K=q.gl,te=pi.unblended,ce=new gr(K.LEQUAL,gr.ReadWrite,[0,1]),ae=U.getTerrainMesh(),xe=U.getCoordsTexture(),Pe=U.sourceCache.getRenderableTiles(),Ee=D.useProgram("terrainCoords");q.bindFramebuffer.set(U.getFramebuffer("coords").framebuffer),q.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),q.clear({color:a.aM.transparent,depth:1}),U.coordsIndex=[];for(const $e of Pe){const ze=U.getTerrainData($e.tileID);q.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,xe.texture);const Ge={u_matrix:D.transform.calculatePosMatrix($e.tileID.toUnwrapped()),u_terrain_coords_id:(255-U.coordsIndex.length)/255,u_texture:0,u_ele_delta:U.getMeshFrameDelta(D.transform.zoom)};Ee.draw(q,K.TRIANGLES,ce,zi.disabled,te,mi.backCCW,Ge,ze,"terrain",ae.vertexBuffer,ae.indexBuffer,ae.segments),U.coordsIndex.push($e.tileID.key)}q.bindFramebuffer.set(null),q.viewport.set([0,0,D.width,D.height])}(this,this.style.map.terrain))}renderLayer(c,y,T,I){if(!T.isHidden(this.transform.zoom)&&(T.type==="background"||T.type==="custom"||(I||[]).length))switch(this.id=T.id,T.type){case"symbol":(function(D,U,q,K,te){if(D.renderPass!=="translucent")return;const ce=zi.disabled,ae=D.colorModeForRenderPass();(q._unevaluatedLayout.hasValue("text-variable-anchor")||q._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(xe,Pe,Ee,$e,ze,Ge,nt,Fe,ct){const yt=Pe.transform,Pt=sr(),Gt=ze==="map",on=Ge==="map";for(const vn of xe){const _n=$e.getTile(vn),sn=_n.getBucket(Ee);if(!sn||!sn.text||!sn.text.segments.get().length)continue;const cn=a.ag(sn.textSizeData,yt.zoom),Cn=ir(_n,1,Pe.transform.zoom),ar=Xe(vn.posMatrix,on,Gt,Pe.transform,Cn),un=Ee.layout.get("icon-text-fit")!=="none"&&sn.hasIconData();if(cn){const pn=Math.pow(2,yt.zoom-_n.tileID.overscaledZ),or=Pe.style.map.terrain?(yr,Er)=>Pe.style.map.terrain.getElevation(vn,yr,Er):null,Pi=Pt.translatePosition(yt,_n,nt,Fe);ya(sn,Gt,on,ct,yt,ar,vn.posMatrix,pn,cn,un,Pt,Pi,vn.toUnwrapped(),or)}}}(K,D,q,U,q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),te),q.paint.get("icon-opacity").constantOr(1)!==0&&Fu(D,U,q,K,!1,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),q.layout.get("icon-rotation-alignment"),q.layout.get("icon-pitch-alignment"),q.layout.get("icon-keep-upright"),ce,ae),q.paint.get("text-opacity").constantOr(1)!==0&&Fu(D,U,q,K,!0,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),q.layout.get("text-keep-upright"),ce,ae),U.map.showCollisionBoxes&&(Rs(D,U,q,K,!0),Rs(D,U,q,K,!1))})(c,y,T,I,this.style.placement.variableOffsets);break;case"circle":(function(D,U,q,K){if(D.renderPass!=="translucent")return;const te=q.paint.get("circle-opacity"),ce=q.paint.get("circle-stroke-width"),ae=q.paint.get("circle-stroke-opacity"),xe=!q.layout.get("circle-sort-key").isConstant();if(te.constantOr(1)===0&&(ce.constantOr(1)===0||ae.constantOr(1)===0))return;const Pe=D.context,Ee=Pe.gl,$e=D.depthModeForSublayer(0,gr.ReadOnly),ze=zi.disabled,Ge=D.colorModeForRenderPass(),nt=[];for(let Fe=0;Fe<K.length;Fe++){const ct=K[Fe],yt=U.getTile(ct),Pt=yt.getBucket(q);if(!Pt)continue;const Gt=Pt.programConfigurations.get(q.id),on=D.useProgram("circle",Gt),vn=Pt.layoutVertexBuffer,_n=Pt.indexBuffer,sn=D.style.map.terrain&&D.style.map.terrain.getTerrainData(ct),cn={programConfiguration:Gt,program:on,layoutVertexBuffer:vn,indexBuffer:_n,uniformValues:Gh(D,ct,yt,q),terrainData:sn};if(xe){const Cn=Pt.segments.get();for(const ar of Cn)nt.push({segments:new a.a0([ar]),sortKey:ar.sortKey,state:cn})}else nt.push({segments:Pt.segments,sortKey:0,state:cn})}xe&&nt.sort((Fe,ct)=>Fe.sortKey-ct.sortKey);for(const Fe of nt){const{programConfiguration:ct,program:yt,layoutVertexBuffer:Pt,indexBuffer:Gt,uniformValues:on,terrainData:vn}=Fe.state;yt.draw(Pe,Ee.TRIANGLES,$e,ze,Ge,mi.disabled,on,vn,q.id,Pt,Gt,Fe.segments,q.paint,D.transform.zoom,ct)}})(c,y,T,I);break;case"heatmap":(function(D,U,q,K){if(q.paint.get("heatmap-opacity")!==0)if(D.renderPass==="offscreen"){const te=D.context,ce=te.gl,ae=zi.disabled,xe=new pi([ce.ONE,ce.ONE],a.aM.transparent,[!0,!0,!0,!0]);(function(Pe,Ee,$e){const ze=Pe.gl;Pe.activeTexture.set(ze.TEXTURE1),Pe.viewport.set([0,0,Ee.width/4,Ee.height/4]);let Ge=$e.heatmapFbo;if(Ge)ze.bindTexture(ze.TEXTURE_2D,Ge.colorAttachment.get()),Pe.bindFramebuffer.set(Ge.framebuffer);else{const nt=ze.createTexture();ze.bindTexture(ze.TEXTURE_2D,nt),ze.texParameteri(ze.TEXTURE_2D,ze.TEXTURE_WRAP_S,ze.CLAMP_TO_EDGE),ze.texParameteri(ze.TEXTURE_2D,ze.TEXTURE_WRAP_T,ze.CLAMP_TO_EDGE),ze.texParameteri(ze.TEXTURE_2D,ze.TEXTURE_MIN_FILTER,ze.LINEAR),ze.texParameteri(ze.TEXTURE_2D,ze.TEXTURE_MAG_FILTER,ze.LINEAR),Ge=$e.heatmapFbo=Pe.createFramebuffer(Ee.width/4,Ee.height/4,!1,!1),function(Fe,ct,yt,Pt){var Gt,on;const vn=Fe.gl,_n=(Gt=Fe.HALF_FLOAT)!==null&&Gt!==void 0?Gt:vn.UNSIGNED_BYTE,sn=(on=Fe.RGBA16F)!==null&&on!==void 0?on:vn.RGBA;vn.texImage2D(vn.TEXTURE_2D,0,sn,ct.width/4,ct.height/4,0,vn.RGBA,_n,null),Pt.colorAttachment.set(yt)}(Pe,Ee,nt,Ge)}})(te,D,q),te.clear({color:a.aM.transparent});for(let Pe=0;Pe<K.length;Pe++){const Ee=K[Pe];if(U.hasRenderableParent(Ee))continue;const $e=U.getTile(Ee),ze=$e.getBucket(q);if(!ze)continue;const Ge=ze.programConfigurations.get(q.id),nt=D.useProgram("heatmap",Ge),{zoom:Fe}=D.transform;nt.draw(te,ce.TRIANGLES,gr.disabled,ae,xe,mi.disabled,Ws(Ee.posMatrix,$e,Fe,q.paint.get("heatmap-intensity")),null,q.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,q.paint,D.transform.zoom,Ge)}te.viewport.set([0,0,D.width,D.height])}else D.renderPass==="translucent"&&(D.context.setColorMode(D.colorModeForRenderPass()),function(te,ce){const ae=te.context,xe=ae.gl,Pe=ce.heatmapFbo;if(!Pe)return;ae.activeTexture.set(xe.TEXTURE0),xe.bindTexture(xe.TEXTURE_2D,Pe.colorAttachment.get()),ae.activeTexture.set(xe.TEXTURE1);let Ee=ce.colorRampTexture;Ee||(Ee=ce.colorRampTexture=new Y(ae,ce.colorRamp,xe.RGBA)),Ee.bind(xe.LINEAR,xe.CLAMP_TO_EDGE),te.useProgram("heatmapTexture").draw(ae,xe.TRIANGLES,gr.disabled,zi.disabled,te.colorModeForRenderPass(),mi.disabled,(($e,ze,Ge,nt)=>{const Fe=a.H();a.aP(Fe,0,$e.width,$e.height,0,0,1);const ct=$e.context.gl;return{u_matrix:Fe,u_world:[ct.drawingBufferWidth,ct.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ze.paint.get("heatmap-opacity")}})(te,ce),null,ce.id,te.viewportBuffer,te.quadTriangleIndexBuffer,te.viewportSegments,ce.paint,te.transform.zoom)}(D,q))})(c,y,T,I);break;case"line":(function(D,U,q,K){if(D.renderPass!=="translucent")return;const te=q.paint.get("line-opacity"),ce=q.paint.get("line-width");if(te.constantOr(1)===0||ce.constantOr(1)===0)return;const ae=D.depthModeForSublayer(0,gr.ReadOnly),xe=D.colorModeForRenderPass(),Pe=q.paint.get("line-dasharray"),Ee=q.paint.get("line-pattern"),$e=Ee.constantOr(1),ze=q.paint.get("line-gradient"),Ge=q.getCrossfadeParameters(),nt=$e?"linePattern":Pe?"lineSDF":ze?"lineGradient":"line",Fe=D.context,ct=Fe.gl;let yt=!0;for(const Pt of K){const Gt=U.getTile(Pt);if($e&&!Gt.patternsLoaded())continue;const on=Gt.getBucket(q);if(!on)continue;const vn=on.programConfigurations.get(q.id),_n=D.context.program.get(),sn=D.useProgram(nt,vn),cn=yt||sn.program!==_n,Cn=D.style.map.terrain&&D.style.map.terrain.getTerrainData(Pt),ar=Ee.constantOr(null);if(ar&&Gt.imageAtlas){const or=Gt.imageAtlas,Pi=or.patternPositions[ar.to.toString()],yr=or.patternPositions[ar.from.toString()];Pi&&yr&&vn.setConstantPatternPositions(Pi,yr)}const un=Cn?Pt:null,pn=$e?__(D,Gt,q,Ge,un):Pe?Ro(D,Gt,q,Pe,Ge,un):ze?zm(D,Gt,q,on.lineClipsArray.length,un):qh(D,Gt,q,un);if($e)Fe.activeTexture.set(ct.TEXTURE0),Gt.imageAtlasTexture.bind(ct.LINEAR,ct.CLAMP_TO_EDGE),vn.updatePaintBuffers(Ge);else if(Pe&&(cn||D.lineAtlas.dirty))Fe.activeTexture.set(ct.TEXTURE0),D.lineAtlas.bind(Fe);else if(ze){const or=on.gradients[q.id];let Pi=or.texture;if(q.gradientVersion!==or.version){let yr=256;if(q.stepInterpolant){const Er=U.getSource().maxzoom,Ii=Pt.canonical.z===Er?Math.ceil(1<<D.transform.maxZoom-Pt.canonical.z):1;yr=a.ac(a.aU(on.maxLineLength/a.X*1024*Ii),256,Fe.maxTextureSize)}or.gradient=a.aV({expression:q.gradientExpression(),evaluationKey:"lineProgress",resolution:yr,image:or.gradient||void 0,clips:on.lineClipsArray}),or.texture?or.texture.update(or.gradient):or.texture=new Y(Fe,or.gradient,ct.RGBA),or.version=q.gradientVersion,Pi=or.texture}Fe.activeTexture.set(ct.TEXTURE0),Pi.bind(q.stepInterpolant?ct.NEAREST:ct.LINEAR,ct.CLAMP_TO_EDGE)}sn.draw(Fe,ct.TRIANGLES,ae,D.stencilModeForClipping(Pt),xe,mi.disabled,pn,Cn,q.id,on.layoutVertexBuffer,on.indexBuffer,on.segments,q.paint,D.transform.zoom,vn,on.layoutVertexBuffer2),yt=!1}})(c,y,T,I);break;case"fill":(function(D,U,q,K){const te=q.paint.get("fill-color"),ce=q.paint.get("fill-opacity");if(ce.constantOr(1)===0)return;const ae=D.colorModeForRenderPass(),xe=q.paint.get("fill-pattern"),Pe=D.opaquePassEnabledForLayer()&&!xe.constantOr(1)&&te.constantOr(a.aM.transparent).a===1&&ce.constantOr(0)===1?"opaque":"translucent";if(D.renderPass===Pe){const Ee=D.depthModeForSublayer(1,D.renderPass==="opaque"?gr.ReadWrite:gr.ReadOnly);qm(D,U,q,K,Ee,ae,!1)}if(D.renderPass==="translucent"&&q.paint.get("fill-antialias")){const Ee=D.depthModeForSublayer(q.getPaintProperty("fill-outline-color")?2:0,gr.ReadOnly);qm(D,U,q,K,Ee,ae,!0)}})(c,y,T,I);break;case"fill-extrusion":(function(D,U,q,K){const te=q.paint.get("fill-extrusion-opacity");if(te!==0&&D.renderPass==="translucent"){const ce=new gr(D.context.gl.LEQUAL,gr.ReadWrite,D.depthRangeFor3D);if(te!==1||q.paint.get("fill-extrusion-pattern").constantOr(1))Dc(D,U,q,K,ce,zi.disabled,pi.disabled),Dc(D,U,q,K,ce,D.stencilModeFor3D(),D.colorModeForRenderPass());else{const ae=D.colorModeForRenderPass();Dc(D,U,q,K,ce,zi.disabled,ae)}}})(c,y,T,I);break;case"hillshade":(function(D,U,q,K){if(D.renderPass!=="offscreen"&&D.renderPass!=="translucent")return;const te=D.context,ce=D.depthModeForSublayer(0,gr.ReadOnly),ae=D.colorModeForRenderPass(),[xe,Pe]=D.renderPass==="translucent"?D.stencilConfigForOverlap(K):[{},K];for(const Ee of Pe){const $e=U.getTile(Ee);$e.needsHillshadePrepare!==void 0&&$e.needsHillshadePrepare&&D.renderPass==="offscreen"?Jh(D,$e,q,ce,zi.disabled,ae):D.renderPass==="translucent"&&Wa(D,Ee,$e,q,ce,xe[Ee.overscaledZ],ae)}te.viewport.set([0,0,D.width,D.height])})(c,y,T,I);break;case"raster":(function(D,U,q,K){if(D.renderPass!=="translucent"||q.paint.get("raster-opacity")===0||!K.length)return;const te=D.context,ce=te.gl,ae=U.getSource(),xe=D.useProgram("raster"),Pe=D.colorModeForRenderPass(),[Ee,$e]=ae instanceof wt?[{},K]:D.stencilConfigForOverlap(K),ze=$e[$e.length-1].overscaledZ,Ge=!D.options.moving;for(const nt of $e){const Fe=D.depthModeForSublayer(nt.overscaledZ-ze,q.paint.get("raster-opacity")===1?gr.ReadWrite:gr.ReadOnly,ce.LESS),ct=U.getTile(nt);ct.registerFadeDuration(q.paint.get("raster-fade-duration"));const yt=U.findLoadedParent(nt,0),Pt=U.findLoadedSibling(nt),Gt=Bu(ct,yt||Pt||null,U,q,D.transform,D.style.map.terrain);let on,vn;const _n=q.paint.get("raster-resampling")==="nearest"?ce.NEAREST:ce.LINEAR;te.activeTexture.set(ce.TEXTURE0),ct.texture.bind(_n,ce.CLAMP_TO_EDGE,ce.LINEAR_MIPMAP_NEAREST),te.activeTexture.set(ce.TEXTURE1),yt?(yt.texture.bind(_n,ce.CLAMP_TO_EDGE,ce.LINEAR_MIPMAP_NEAREST),on=Math.pow(2,yt.tileID.overscaledZ-ct.tileID.overscaledZ),vn=[ct.tileID.canonical.x*on%1,ct.tileID.canonical.y*on%1]):ct.texture.bind(_n,ce.CLAMP_TO_EDGE,ce.LINEAR_MIPMAP_NEAREST),ct.texture.useMipmap&&te.extTextureFilterAnisotropic&&D.transform.pitch>20&&ce.texParameterf(ce.TEXTURE_2D,te.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,te.extTextureFilterAnisotropicMax);const sn=D.style.map.terrain&&D.style.map.terrain.getTerrainData(nt),cn=sn?nt:null,Cn=cn?cn.posMatrix:D.transform.calculatePosMatrix(nt.toUnwrapped(),Ge),ar=rv(Cn,vn||[0,0],on||1,Gt,q);ae instanceof wt?xe.draw(te,ce.TRIANGLES,Fe,zi.disabled,Pe,mi.disabled,ar,sn,q.id,ae.boundsBuffer,D.quadTriangleIndexBuffer,ae.boundsSegments):xe.draw(te,ce.TRIANGLES,Fe,Ee[nt.overscaledZ],Pe,mi.disabled,ar,sn,q.id,D.rasterBoundsBuffer,D.quadTriangleIndexBuffer,D.rasterBoundsSegments)}})(c,y,T,I);break;case"background":(function(D,U,q,K){const te=q.paint.get("background-color"),ce=q.paint.get("background-opacity");if(ce===0)return;const ae=D.context,xe=ae.gl,Pe=D.transform,Ee=Pe.tileSize,$e=q.paint.get("background-pattern");if(D.isPatternMissing($e))return;const ze=!$e&&te.a===1&&ce===1&&D.opaquePassEnabledForLayer()?"opaque":"translucent";if(D.renderPass!==ze)return;const Ge=zi.disabled,nt=D.depthModeForSublayer(0,ze==="opaque"?gr.ReadWrite:gr.ReadOnly),Fe=D.colorModeForRenderPass(),ct=D.useProgram($e?"backgroundPattern":"background"),yt=K||Pe.coveringTiles({tileSize:Ee,terrain:D.style.map.terrain});$e&&(ae.activeTexture.set(xe.TEXTURE0),D.imageManager.bind(D.context));const Pt=q.getCrossfadeParameters();for(const Gt of yt){const on=K?Gt.posMatrix:D.transform.calculatePosMatrix(Gt.toUnwrapped()),vn=$e?Ua(on,ce,D,$e,{tileID:Gt,tileSize:Ee},Pt):Fm(on,ce,te),_n=D.style.map.terrain&&D.style.map.terrain.getTerrainData(Gt);ct.draw(ae,xe.TRIANGLES,nt,Ge,Fe,mi.disabled,vn,_n,q.id,D.tileExtentBuffer,D.quadTriangleIndexBuffer,D.tileExtentSegments)}})(c,0,T,I);break;case"custom":(function(D,U,q){const K=D.context,te=q.implementation;if(D.renderPass==="offscreen"){const ce=te.prerender;ce&&(D.setCustomLayerDefaults(),K.setColorMode(D.colorModeForRenderPass()),ce.call(te,K.gl,D.transform.customLayerMatrix()),K.setDirty(),D.setBaseState())}else if(D.renderPass==="translucent"){D.setCustomLayerDefaults(),K.setColorMode(D.colorModeForRenderPass()),K.setStencilMode(zi.disabled);const ce=te.renderingMode==="3d"?new gr(D.context.gl.LEQUAL,gr.ReadWrite,D.depthRangeFor3D):D.depthModeForSublayer(0,gr.ReadOnly);K.setDepthMode(ce),te.render(K.gl,D.transform.customLayerMatrix(),{farZ:D.transform.farZ,nearZ:D.transform.nearZ,fov:D.transform._fov,modelViewProjectionMatrix:D.transform.modelViewProjectionMatrix,projectionMatrix:D.transform.projectionMatrix}),K.setDirty(),D.setBaseState(),K.bindFramebuffer.set(null)}})(c,0,T)}}translatePosMatrix(c,y,T,I,D){if(!T[0]&&!T[1])return c;const U=D?I==="map"?this.transform.angle:0:I==="viewport"?-this.transform.angle:0;if(U){const te=Math.sin(U),ce=Math.cos(U);T=[T[0]*ce-T[1]*te,T[0]*te+T[1]*ce]}const q=[D?T[0]:ir(y,T[0],this.transform.zoom),D?T[1]:ir(y,T[1],this.transform.zoom),0],K=new Float32Array(16);return a.J(K,c,q),K}saveTileTexture(c){const y=this._tileTextures[c.size[0]];y?y.push(c):this._tileTextures[c.size[0]]=[c]}getTileTexture(c){const y=this._tileTextures[c];return y&&y.length>0?y.pop():null}isPatternMissing(c){if(!c)return!1;if(!c.from||!c.to)return!0;const y=this.imageManager.getPattern(c.from.toString()),T=this.imageManager.getPattern(c.to.toString());return!y||!T}useProgram(c,y){this.cache=this.cache||{};const T=c+(y?y.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[T]||(this.cache[T]=new Fd(this.context,ma[c],y,Va[c],this._showOverdrawInspector,this.style.map.terrain)),this.cache[T]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const c=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(c.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Y(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:c,drawingBufferHeight:y}=this.context.gl;return this.width!==c||this.height!==y}}class Xm{constructor(c,y){this.points=c,this.planes=y}static fromInvProjectionMatrix(c,y,T){const I=Math.pow(2,T),D=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(q=>{const K=1/(q=a.af([],q,c))[3]/y*I;return a.b0(q,q,[K,K,1/q[3],K])}),U=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(q=>{const K=function(xe,Pe){var Ee=Pe[0],$e=Pe[1],ze=Pe[2],Ge=Ee*Ee+$e*$e+ze*ze;return Ge>0&&(Ge=1/Math.sqrt(Ge)),xe[0]=Pe[0]*Ge,xe[1]=Pe[1]*Ge,xe[2]=Pe[2]*Ge,xe}([],function(xe,Pe,Ee){var $e=Pe[0],ze=Pe[1],Ge=Pe[2],nt=Ee[0],Fe=Ee[1],ct=Ee[2];return xe[0]=ze*ct-Ge*Fe,xe[1]=Ge*nt-$e*ct,xe[2]=$e*Fe-ze*nt,xe}([],B([],D[q[0]],D[q[1]]),B([],D[q[2]],D[q[1]]))),te=-((ce=K)[0]*(ae=D[q[1]])[0]+ce[1]*ae[1]+ce[2]*ae[2]);var ce,ae;return K.concat(te)});return new Xm(D,U)}}class Qh{constructor(c,y){this.min=c,this.max=y,this.center=function(T,I,D){return T[0]=.5*I[0],T[1]=.5*I[1],T[2]=.5*I[2],T}([],function(T,I,D){return T[0]=I[0]+D[0],T[1]=I[1]+D[1],T[2]=I[2]+D[2],T}([],this.min,this.max))}quadrant(c){const y=[c%2==0,c<2],T=k(this.min),I=k(this.max);for(let D=0;D<y.length;D++)T[D]=y[D]?this.min[D]:this.center[D],I[D]=y[D]?this.center[D]:this.max[D];return I[2]=this.max[2],new Qh(T,I)}distanceX(c){return Math.max(Math.min(this.max[0],c[0]),this.min[0])-c[0]}distanceY(c){return Math.max(Math.min(this.max[1],c[1]),this.min[1])-c[1]}intersects(c){const y=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let T=!0;for(let I=0;I<c.planes.length;I++){const D=c.planes[I];let U=0;for(let q=0;q<y.length;q++)a.b1(D,y[q])>=0&&U++;if(U===0)return 0;U!==y.length&&(T=!1)}if(T)return 2;for(let I=0;I<3;I++){let D=Number.MAX_VALUE,U=-Number.MAX_VALUE;for(let q=0;q<c.points.length;q++){const K=c.points[q][I]-this.min[I];D=Math.min(D,K),U=Math.max(U,K)}if(U<0||D>this.max[I]-this.min[I])return 0}return 1}}class Ai{constructor(c=0,y=0,T=0,I=0){if(isNaN(c)||c<0||isNaN(y)||y<0||isNaN(T)||T<0||isNaN(I)||I<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=c,this.bottom=y,this.left=T,this.right=I}interpolate(c,y,T){return y.top!=null&&c.top!=null&&(this.top=a.y.number(c.top,y.top,T)),y.bottom!=null&&c.bottom!=null&&(this.bottom=a.y.number(c.bottom,y.bottom,T)),y.left!=null&&c.left!=null&&(this.left=a.y.number(c.left,y.left,T)),y.right!=null&&c.right!=null&&(this.right=a.y.number(c.right,y.right,T)),this}getCenter(c,y){const T=a.ac((this.left+c-this.right)/2,0,c),I=a.ac((this.top+y-this.bottom)/2,0,y);return new a.P(T,I)}equals(c){return this.top===c.top&&this.bottom===c.bottom&&this.left===c.left&&this.right===c.right}clone(){return new Ai(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const gp=85.051129;class Hd{constructor(c,y,T,I,D){this.tileSize=512,this._renderWorldCopies=D===void 0||!!D,this._minZoom=c||0,this._maxZoom=y||22,this._minPitch=T??0,this._maxPitch=I??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ai,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const c=new Hd(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return c.apply(this),c}apply(c){this.tileSize=c.tileSize,this.latRange=c.latRange,this.width=c.width,this.height=c.height,this._center=c._center,this._elevation=c._elevation,this.minElevationForCurrentTile=c.minElevationForCurrentTile,this.zoom=c.zoom,this.angle=c.angle,this._fov=c._fov,this._pitch=c._pitch,this._unmodified=c._unmodified,this._edgeInsets=c._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(c){this._minZoom!==c&&(this._minZoom=c,this.zoom=Math.max(this.zoom,c))}get maxZoom(){return this._maxZoom}set maxZoom(c){this._maxZoom!==c&&(this._maxZoom=c,this.zoom=Math.min(this.zoom,c))}get minPitch(){return this._minPitch}set minPitch(c){this._minPitch!==c&&(this._minPitch=c,this.pitch=Math.max(this.pitch,c))}get maxPitch(){return this._maxPitch}set maxPitch(c){this._maxPitch!==c&&(this._maxPitch=c,this.pitch=Math.min(this.pitch,c))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(c){c===void 0?c=!0:c===null&&(c=!1),this._renderWorldCopies=c}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(c){const y=-a.b2(c,-180,180)*Math.PI/180;this.angle!==y&&(this._unmodified=!1,this.angle=y,this._calcMatrices(),this.rotationMatrix=function(){var T=new a.A(4);return a.A!=Float32Array&&(T[1]=0,T[2]=0),T[0]=1,T[3]=1,T}(),function(T,I,D){var U=I[0],q=I[1],K=I[2],te=I[3],ce=Math.sin(D),ae=Math.cos(D);T[0]=U*ae+K*ce,T[1]=q*ae+te*ce,T[2]=U*-ce+K*ae,T[3]=q*-ce+te*ae}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(c){const y=a.ac(c,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==y&&(this._unmodified=!1,this._pitch=y,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(c){c=Math.max(.01,Math.min(60,c)),this._fov!==c&&(this._unmodified=!1,this._fov=c/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(c){const y=Math.min(Math.max(c,this.minZoom),this.maxZoom);this._zoom!==y&&(this._unmodified=!1,this._zoom=y,this.tileZoom=Math.max(0,Math.floor(y)),this.scale=this.zoomScale(y),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(c){c.lat===this._center.lat&&c.lng===this._center.lng||(this._unmodified=!1,this._center=c,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(c){c!==this._elevation&&(this._elevation=c,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(c){this._edgeInsets.equals(c)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,c,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(c){return this._edgeInsets.equals(c)}interpolatePadding(c,y,T){this._unmodified=!1,this._edgeInsets.interpolate(c,y,T),this._constrain(),this._calcMatrices()}coveringZoomLevel(c){const y=(c.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/c.tileSize));return Math.max(0,y)}getVisibleUnwrappedCoordinates(c){const y=[new a.b3(0,c)];if(this._renderWorldCopies){const T=this.pointCoordinate(new a.P(0,0)),I=this.pointCoordinate(new a.P(this.width,0)),D=this.pointCoordinate(new a.P(this.width,this.height)),U=this.pointCoordinate(new a.P(0,this.height)),q=Math.floor(Math.min(T.x,I.x,D.x,U.x)),K=Math.floor(Math.max(T.x,I.x,D.x,U.x)),te=1;for(let ce=q-te;ce<=K+te;ce++)ce!==0&&y.push(new a.b3(ce,c))}return y}coveringTiles(c){var y,T;let I=this.coveringZoomLevel(c);const D=I;if(c.minzoom!==void 0&&I<c.minzoom)return[];c.maxzoom!==void 0&&I>c.maxzoom&&(I=c.maxzoom);const U=this.pointCoordinate(this.getCameraPoint()),q=a.Z.fromLngLat(this.center),K=Math.pow(2,I),te=[K*U.x,K*U.y,0],ce=[K*q.x,K*q.y,0],ae=Xm.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,I);let xe=c.minzoom||0;!c.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(xe=I);const Pe=c.terrain?2/Math.min(this.tileSize,c.tileSize)*this.tileSize:3,Ee=Fe=>({aabb:new Qh([Fe*K,0,0],[(Fe+1)*K,K,0]),zoom:0,x:0,y:0,wrap:Fe,fullyVisible:!1}),$e=[],ze=[],Ge=I,nt=c.reparseOverscaled?D:I;if(this._renderWorldCopies)for(let Fe=1;Fe<=3;Fe++)$e.push(Ee(-Fe)),$e.push(Ee(Fe));for($e.push(Ee(0));$e.length>0;){const Fe=$e.pop(),ct=Fe.x,yt=Fe.y;let Pt=Fe.fullyVisible;if(!Pt){const sn=Fe.aabb.intersects(ae);if(sn===0)continue;Pt=sn===2}const Gt=c.terrain?te:ce,on=Fe.aabb.distanceX(Gt),vn=Fe.aabb.distanceY(Gt),_n=Math.max(Math.abs(on),Math.abs(vn));if(Fe.zoom===Ge||_n>Pe+(1<<Ge-Fe.zoom)-2&&Fe.zoom>=xe){const sn=Ge-Fe.zoom,cn=te[0]-.5-(ct<<sn),Cn=te[1]-.5-(yt<<sn);ze.push({tileID:new a.S(Fe.zoom===Ge?nt:Fe.zoom,Fe.wrap,Fe.zoom,ct,yt),distanceSq:W([ce[0]-.5-ct,ce[1]-.5-yt]),tileDistanceToCamera:Math.sqrt(cn*cn+Cn*Cn)})}else for(let sn=0;sn<4;sn++){const cn=(ct<<1)+sn%2,Cn=(yt<<1)+(sn>>1),ar=Fe.zoom+1;let un=Fe.aabb.quadrant(sn);if(c.terrain){const pn=new a.S(ar,Fe.wrap,ar,cn,Cn),or=c.terrain.getMinMaxElevation(pn),Pi=(y=or.minElevation)!==null&&y!==void 0?y:this.elevation,yr=(T=or.maxElevation)!==null&&T!==void 0?T:this.elevation;un=new Qh([un.min[0],un.min[1],Pi],[un.max[0],un.max[1],yr])}$e.push({aabb:un,zoom:ar,x:cn,y:Cn,wrap:Fe.wrap,fullyVisible:Pt})}}return ze.sort((Fe,ct)=>Fe.distanceSq-ct.distanceSq).map(Fe=>Fe.tileID)}resize(c,y){this.width=c,this.height=y,this.pixelsToGLUnits=[2/c,-2/y],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(c){return Math.pow(2,c)}scaleZoom(c){return Math.log(c)/Math.LN2}project(c){const y=a.ac(c.lat,-85.051129,gp);return new a.P(a.O(c.lng)*this.worldSize,a.Q(y)*this.worldSize)}unproject(c){return new a.Z(c.x/this.worldSize,c.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(c){const y=this.elevation,T=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,I=this.pointLocation(this.centerPoint,c),D=c.getElevationForLngLatZoom(I,this.tileZoom);if(!(this.elevation-D))return;const U=T+y-D,q=Math.cos(this._pitch)*this.cameraToCenterDistance/U/a.b4(1,I.lat),K=this.scaleZoom(q/this.tileSize);this._elevation=D,this._center=I,this.zoom=K}setLocationAtPoint(c,y){const T=this.pointCoordinate(y),I=this.pointCoordinate(this.centerPoint),D=this.locationCoordinate(c),U=new a.Z(D.x-(T.x-I.x),D.y-(T.y-I.y));this.center=this.coordinateLocation(U),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(c,y){return y?this.coordinatePoint(this.locationCoordinate(c),y.getElevationForLngLatZoom(c,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(c))}pointLocation(c,y){return this.coordinateLocation(this.pointCoordinate(c,y))}locationCoordinate(c){return a.Z.fromLngLat(c)}coordinateLocation(c){return c&&c.toLngLat()}pointCoordinate(c,y){if(y){const xe=y.pointCoordinate(c);if(xe!=null)return xe}const T=[c.x,c.y,0,1],I=[c.x,c.y,1,1];a.af(T,T,this.pixelMatrixInverse),a.af(I,I,this.pixelMatrixInverse);const D=T[3],U=I[3],q=T[1]/D,K=I[1]/U,te=T[2]/D,ce=I[2]/U,ae=te===ce?0:(0-te)/(ce-te);return new a.Z(a.y.number(T[0]/D,I[0]/U,ae)/this.worldSize,a.y.number(q,K,ae)/this.worldSize)}coordinatePoint(c,y=0,T=this.pixelMatrix){const I=[c.x*this.worldSize,c.y*this.worldSize,y,1];return a.af(I,I,T),new a.P(I[0]/I[3],I[1]/I[3])}getBounds(){const c=Math.max(0,this.height/2-this.getHorizon());return new ke().extend(this.pointLocation(new a.P(0,c))).extend(this.pointLocation(new a.P(this.width,c))).extend(this.pointLocation(new a.P(this.width,this.height))).extend(this.pointLocation(new a.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new ke([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(c){c?(this.lngRange=[c.getWest(),c.getEast()],this.latRange=[c.getSouth(),c.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,gp])}calculateTileMatrix(c){const y=c.canonical,T=this.worldSize/this.zoomScale(y.z),I=y.x+Math.pow(2,y.z)*c.wrap,D=a.an(new Float64Array(16));return a.J(D,D,[I*T,y.y*T,0]),a.K(D,D,[T/a.X,T/a.X,1]),D}calculatePosMatrix(c,y=!1){const T=c.key,I=y?this._alignedPosMatrixCache:this._posMatrixCache;if(I[T])return I[T];const D=this.calculateTileMatrix(c);return a.L(D,y?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,D),I[T]=new Float32Array(D),I[T]}calculateFogMatrix(c){const y=c.key,T=this._fogMatrixCache;if(T[y])return T[y];const I=this.calculateTileMatrix(c);return a.L(I,this.fogMatrix,I),T[y]=new Float32Array(I),T[y]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(c,y){y=a.ac(+y,this.minZoom,this.maxZoom);const T={center:new a.N(c.lng,c.lat),zoom:y};let I=this.lngRange;if(!this._renderWorldCopies&&I===null){const Fe=179.9999999999;I=[-Fe,Fe]}const D=this.tileSize*this.zoomScale(T.zoom);let U=0,q=D,K=0,te=D,ce=0,ae=0;const{x:xe,y:Pe}=this.size;if(this.latRange){const Fe=this.latRange;U=a.Q(Fe[1])*D,q=a.Q(Fe[0])*D,q-U<Pe&&(ce=Pe/(q-U))}I&&(K=a.b2(a.O(I[0])*D,0,D),te=a.b2(a.O(I[1])*D,0,D),te<K&&(te+=D),te-K<xe&&(ae=xe/(te-K)));const{x:Ee,y:$e}=this.project.call({worldSize:D},c);let ze,Ge;const nt=Math.max(ae||0,ce||0);if(nt){const Fe=new a.P(ae?(te+K)/2:Ee,ce?(q+U)/2:$e);return T.center=this.unproject.call({worldSize:D},Fe).wrap(),T.zoom+=this.scaleZoom(nt),T}if(this.latRange){const Fe=Pe/2;$e-Fe<U&&(Ge=U+Fe),$e+Fe>q&&(Ge=q-Fe)}if(I){const Fe=(K+te)/2;let ct=Ee;this._renderWorldCopies&&(ct=a.b2(Ee,Fe-D/2,Fe+D/2));const yt=xe/2;ct-yt<K&&(ze=K+yt),ct+yt>te&&(ze=te-yt)}if(ze!==void 0||Ge!==void 0){const Fe=new a.P(ze??Ee,Ge??$e);T.center=this.unproject.call({worldSize:D},Fe).wrap()}return T}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const c=this._unmodified,{center:y,zoom:T}=this.getConstrained(this.center,this.zoom);this.center=y,this.zoom=T,this._unmodified=c,this._constraining=!1}_calcMatrices(){if(!this.height)return;const c=this.centerOffset,y=this.point.x,T=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.b4(1,this.center.lat)*this.worldSize;let I=a.an(new Float64Array(16));a.K(I,I,[this.width/2,-this.height/2,1]),a.J(I,I,[1,-1,0]),this.labelPlaneMatrix=I,I=a.an(new Float64Array(16)),a.K(I,I,[1,-1,1]),a.J(I,I,[-1,-1,0]),a.K(I,I,[2/this.width,2/this.height,1]),this.glCoordMatrix=I;const D=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),U=Math.min(this.elevation,this.minElevationForCurrentTile),q=D-U*this._pixelPerMeter/Math.cos(this._pitch),K=U<0?q:D,te=Math.PI/2+this._pitch,ce=this._fov*(.5+c.y/this.height),ae=Math.sin(ce)*K/Math.sin(a.ac(Math.PI-te-ce,.01,Math.PI-.01)),xe=this.getHorizon(),Pe=2*Math.atan(xe/this.cameraToCenterDistance)*(.5+c.y/(2*xe)),Ee=Math.sin(Pe)*K/Math.sin(a.ac(Math.PI-te-Pe,.01,Math.PI-.01)),$e=Math.min(ae,Ee);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*$e+K),this.nearZ=this.height/50,I=new Float64Array(16),a.b5(I,this._fov,this.width/this.height,this.nearZ,this.farZ),I[8]=2*-c.x/this.width,I[9]=2*c.y/this.height,this.projectionMatrix=a.ae(I),a.K(I,I,[1,-1,1]),a.J(I,I,[0,0,-this.cameraToCenterDistance]),a.b6(I,I,this._pitch),a.ad(I,I,this.angle),a.J(I,I,[-y,-T,0]),this.mercatorMatrix=a.K([],I,[this.worldSize,this.worldSize,this.worldSize]),a.K(I,I,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.L(new Float64Array(16),this.labelPlaneMatrix,I),a.J(I,I,[0,0,-this.elevation]),this.modelViewProjectionMatrix=I,this.invModelViewProjectionMatrix=a.as([],I),this.fogMatrix=new Float64Array(16),a.b5(this.fogMatrix,this._fov,this.width/this.height,D,this.farZ),this.fogMatrix[8]=2*-c.x/this.width,this.fogMatrix[9]=2*c.y/this.height,a.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),a.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b6(this.fogMatrix,this.fogMatrix,this._pitch),a.ad(this.fogMatrix,this.fogMatrix,this.angle),a.J(this.fogMatrix,this.fogMatrix,[-y,-T,0]),a.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),a.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=a.L(new Float64Array(16),this.labelPlaneMatrix,I);const ze=this.width%2/2,Ge=this.height%2/2,nt=Math.cos(this.angle),Fe=Math.sin(this.angle),ct=y-Math.round(y)+nt*ze+Fe*Ge,yt=T-Math.round(T)+nt*Ge+Fe*ze,Pt=new Float64Array(I);if(a.J(Pt,Pt,[ct>.5?ct-1:ct,yt>.5?yt-1:yt,0]),this.alignedModelViewProjectionMatrix=Pt,I=a.as(new Float64Array(16),this.pixelMatrix),!I)throw new Error("failed to invert matrix");this.pixelMatrixInverse=I,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const c=this.pointCoordinate(new a.P(0,0)),y=[c.x*this.worldSize,c.y*this.worldSize,0,1];return a.af(y,y,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const c=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(0,c))}getCameraQueryGeometry(c){const y=this.getCameraPoint();if(c.length===1)return[c[0],y];{let T=y.x,I=y.y,D=y.x,U=y.y;for(const q of c)T=Math.min(T,q.x),I=Math.min(I,q.y),D=Math.max(D,q.x),U=Math.max(U,q.y);return[new a.P(T,I),new a.P(D,I),new a.P(D,U),new a.P(T,U),new a.P(T,I)]}}lngLatToCameraDepth(c,y){const T=this.locationCoordinate(c),I=[T.x*this.worldSize,T.y*this.worldSize,y,1];return a.af(I,I,this.modelViewProjectionMatrix),I[2]/I[3]}}function Wd(L,c){let y,T=!1,I=null,D=null;const U=()=>{I=null,T&&(L.apply(D,y),I=setTimeout(U,c),T=!1)};return(...q)=>(T=!0,D=this,y=q,I||U(),I)}class $u{constructor(c){this._getCurrentHash=()=>{const y=window.location.hash.replace("#","");if(this._hashName){let T;return y.split("&").map(I=>I.split("=")).forEach(I=>{I[0]===this._hashName&&(T=I)}),(T&&T[1]||"").split("/")}return y.split("/")},this._onHashChange=()=>{const y=this._getCurrentHash();if(y.length>=3&&!y.some(T=>isNaN(T))){const T=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(y[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+y[2],+y[1]],zoom:+y[0],bearing:T,pitch:+(y[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const y=window.location.href.replace(/(#.+)?$/,this.getHashString());window.history.replaceState(window.history.state,null,y)},this._removeHash=()=>{const y=this._getCurrentHash();if(y.length===0)return;const T=y.join("/");let I=T;I.split("&").length>0&&(I=I.split("&")[0]),this._hashName&&(I=`${this._hashName}=${T}`);let D=window.location.hash.replace(I,"");D.startsWith("#&")?D=D.slice(0,1)+D.slice(2):D==="#"&&(D="");let U=window.location.href.replace(/(#.+)?$/,D);U=U.replace("&&","&"),window.history.replaceState(window.history.state,null,U)},this._updateHash=Wd(this._updateHashUnthrottled,300),this._hashName=c&&encodeURIComponent(c)}addTo(c){return this._map=c,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(c){const y=this._map.getCenter(),T=Math.round(100*this._map.getZoom())/100,I=Math.ceil((T*Math.LN2+Math.log(512/360/.5))/Math.LN10),D=Math.pow(10,I),U=Math.round(y.lng*D)/D,q=Math.round(y.lat*D)/D,K=this._map.getBearing(),te=this._map.getPitch();let ce="";if(ce+=c?`/${U}/${q}/${T}`:`${T}/${q}/${U}`,(K||te)&&(ce+="/"+Math.round(10*K)/10),te&&(ce+=`/${Math.round(te)}`),this._hashName){const ae=this._hashName;let xe=!1;const Pe=window.location.hash.slice(1).split("&").map(Ee=>{const $e=Ee.split("=")[0];return $e===ae?(xe=!0,`${$e}=${ce}`):Ee}).filter(Ee=>Ee);return xe||Pe.push(`${ae}=${ce}`),`#${Pe.join("&")}`}return`#${ce}`}}const ts={linearity:.3,easing:a.b7(0,0,.3,1)},Uu=a.e({deceleration:2500,maxSpeed:1400},ts),Qi=a.e({deceleration:20,maxSpeed:1400},ts),ko=a.e({deceleration:1e3,maxSpeed:360},ts),ao=a.e({deceleration:1e3,maxSpeed:90},ts);class ef{constructor(c){this._map=c,this.clear()}clear(){this._inertiaBuffer=[]}record(c){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:p.now(),settings:c})}_drainInertiaBuffer(){const c=this._inertiaBuffer,y=p.now();for(;c.length>0&&y-c[0].time>160;)c.shift()}_onMoveEnd(c){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const y={zoom:0,bearing:0,pitch:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:D}of this._inertiaBuffer)y.zoom+=D.zoomDelta||0,y.bearing+=D.bearingDelta||0,y.pitch+=D.pitchDelta||0,D.panDelta&&y.pan._add(D.panDelta),D.around&&(y.around=D.around),D.pinchAround&&(y.pinchAround=D.pinchAround);const T=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,I={};if(y.pan.mag()){const D=sc(y.pan.mag(),T,a.e({},Uu,c||{}));I.offset=y.pan.mult(D.amount/y.pan.mag()),I.center=this._map.transform.center,Vu(I,D)}if(y.zoom){const D=sc(y.zoom,T,Qi);I.zoom=this._map.transform.zoom+D.amount,Vu(I,D)}if(y.bearing){const D=sc(y.bearing,T,ko);I.bearing=this._map.transform.bearing+a.ac(D.amount,-179,179),Vu(I,D)}if(y.pitch){const D=sc(y.pitch,T,ao);I.pitch=this._map.transform.pitch+D.amount,Vu(I,D)}if(I.zoom||I.bearing){const D=y.pinchAround===void 0?y.around:y.pinchAround;I.around=D?this._map.unproject(D):this._map.getCenter()}return this.clear(),a.e(I,{noMoveStart:!0})}}function Vu(L,c){(!L.duration||L.duration<c.duration)&&(L.duration=c.duration,L.easing=c.easing)}function sc(L,c,y){const{maxSpeed:T,linearity:I,deceleration:D}=y,U=a.ac(L*I/(c/1e3),-T,T),q=Math.abs(U)/(D*I);return{easing:y.easing,duration:1e3*q,amount:U*(q/2)}}class va extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,y,T,I={}){const D=g.mousePos(y.getCanvas(),T),U=y.unproject(D);super(c,a.e({point:D,lngLat:U,originalEvent:T},I)),this._defaultPrevented=!1,this.target=y}}class lo extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,y,T){const I=c==="touchend"?T.changedTouches:T.touches,D=g.touchPos(y.getCanvasContainer(),I),U=D.map(K=>y.unproject(K)),q=D.reduce((K,te,ce,ae)=>K.add(te.div(ae.length)),new a.P(0,0));super(c,{points:D,point:q,lngLats:U,lngLat:y.unproject(q),originalEvent:T}),this._defaultPrevented=!1}}class Gd extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,y,T){super(c,{originalEvent:T}),this._defaultPrevented=!1}}class yp{constructor(c,y){this._map=c,this._clickTolerance=y.clickTolerance}reset(){delete this._mousedownPos}wheel(c){return this._firePreventable(new Gd(c.type,this._map,c))}mousedown(c,y){return this._mousedownPos=y,this._firePreventable(new va(c.type,this._map,c))}mouseup(c){this._map.fire(new va(c.type,this._map,c))}click(c,y){this._mousedownPos&&this._mousedownPos.dist(y)>=this._clickTolerance||this._map.fire(new va(c.type,this._map,c))}dblclick(c){return this._firePreventable(new va(c.type,this._map,c))}mouseover(c){this._map.fire(new va(c.type,this._map,c))}mouseout(c){this._map.fire(new va(c.type,this._map,c))}touchstart(c){return this._firePreventable(new lo(c.type,this._map,c))}touchmove(c){this._map.fire(new lo(c.type,this._map,c))}touchend(c){this._map.fire(new lo(c.type,this._map,c))}touchcancel(c){this._map.fire(new lo(c.type,this._map,c))}_firePreventable(c){if(this._map.fire(c),c.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ym{constructor(c){this._map=c}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(c){this._map.fire(new va(c.type,this._map,c))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new va("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(c){this._delayContextMenu?this._contextMenuEvent=c:this._ignoreContextMenu||this._map.fire(new va(c.type,this._map,c)),this._map.listens("contextmenu")&&c.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ys{constructor(c){this._map=c}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(c){return this.transform.pointLocation(a.P.convert(c),this._map.terrain)}}class Ks{constructor(c,y){this._map=c,this._tr=new Ys(c),this._el=c.getCanvasContainer(),this._container=c.getContainer(),this._clickTolerance=y.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(c,y){this.isEnabled()&&c.shiftKey&&c.button===0&&(g.disableDrag(),this._startPos=this._lastPos=y,this._active=!0)}mousemoveWindow(c,y){if(!this._active)return;const T=y;if(this._lastPos.equals(T)||!this._box&&T.dist(this._startPos)<this._clickTolerance)return;const I=this._startPos;this._lastPos=T,this._box||(this._box=g.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",c));const D=Math.min(I.x,T.x),U=Math.max(I.x,T.x),q=Math.min(I.y,T.y),K=Math.max(I.y,T.y);g.setTransform(this._box,`translate(${D}px,${q}px)`),this._box.style.width=U-D+"px",this._box.style.height=K-q+"px"}mouseupWindow(c,y){if(!this._active||c.button!==0)return;const T=this._startPos,I=y;if(this.reset(),g.suppressClick(),T.x!==I.x||T.y!==I.y)return this._map.fire(new a.k("boxzoomend",{originalEvent:c})),{cameraAnimation:D=>D.fitScreenCoordinates(T,I,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",c)}keydown(c){this._active&&c.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",c))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(g.remove(this._box),this._box=null),g.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(c,y){return this._map.fire(new a.k(c,{originalEvent:y}))}}function Il(L,c){if(L.length!==c.length)throw new Error(`The number of touches and points are not equal - touches ${L.length}, points ${c.length}`);const y={};for(let T=0;T<L.length;T++)y[L[T].identifier]=c[T];return y}class Km{constructor(c){this.reset(),this.numTouches=c.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(c,y,T){(this.centroid||T.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=c.timeStamp),T.length===this.numTouches&&(this.centroid=function(I){const D=new a.P(0,0);for(const U of I)D._add(U);return D.div(I.length)}(y),this.touches=Il(T,y)))}touchmove(c,y,T){if(this.aborted||!this.centroid)return;const I=Il(T,y);for(const D in this.touches){const U=I[D];(!U||U.dist(this.touches[D])>30)&&(this.aborted=!0)}}touchend(c,y,T){if((!this.centroid||c.timeStamp-this.startTime>500)&&(this.aborted=!0),T.length===0){const I=!this.aborted&&this.centroid;if(this.reset(),I)return I}}}class qd{constructor(c){this.singleTap=new Km(c),this.numTaps=c.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(c,y,T){this.singleTap.touchstart(c,y,T)}touchmove(c,y,T){this.singleTap.touchmove(c,y,T)}touchend(c,y,T){const I=this.singleTap.touchend(c,y,T);if(I){const D=c.timeStamp-this.lastTime<500,U=!this.lastTap||this.lastTap.dist(I)<30;if(D&&U||this.reset(),this.count++,this.lastTime=c.timeStamp,this.lastTap=I,this.count===this.numTaps)return this.reset(),I}}}class eo{constructor(c){this._tr=new Ys(c),this._zoomIn=new qd({numTouches:1,numTaps:2}),this._zoomOut=new qd({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(c,y,T){this._zoomIn.touchstart(c,y,T),this._zoomOut.touchstart(c,y,T)}touchmove(c,y,T){this._zoomIn.touchmove(c,y,T),this._zoomOut.touchmove(c,y,T)}touchend(c,y,T){const I=this._zoomIn.touchend(c,y,T),D=this._zoomOut.touchend(c,y,T),U=this._tr;return I?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:q=>q.easeTo({duration:300,zoom:U.zoom+1,around:U.unproject(I)},{originalEvent:c})}):D?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:q=>q.easeTo({duration:300,zoom:U.zoom-1,around:U.unproject(D)},{originalEvent:c})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ga{constructor(c){this._enabled=!!c.enable,this._moveStateManager=c.moveStateManager,this._clickTolerance=c.clickTolerance||1,this._moveFunction=c.move,this._activateOnStart=!!c.activateOnStart,c.assignEvents(this),this.reset()}reset(c){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(c)}_move(...c){const y=this._moveFunction(...c);if(y.bearingDelta||y.pitchDelta||y.around||y.panDelta)return this._active=!0,y}dragStart(c,y){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(c)&&(this._moveStateManager.startMove(c),this._lastPoint=y.length?y[0]:y,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(c,y){if(!this.isEnabled())return;const T=this._lastPoint;if(!T)return;if(c.preventDefault(),!this._moveStateManager.isValidMoveEvent(c))return void this.reset(c);const I=y.length?y[0]:y;return!this._moved&&I.dist(T)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=I,this._move(T,I))}dragEnd(c){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(c)&&(this._moved&&g.suppressClick(),this.reset(c))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const _a={0:1,2:2};class tf{constructor(c){this._correctEvent=c.checkCorrectEvent}startMove(c){const y=g.mouseButton(c);this._eventButton=y}endMove(c){delete this._eventButton}isValidStartEvent(c){return this._correctEvent(c)}isValidMoveEvent(c){return!function(y,T){const I=_a[T];return y.buttons===void 0||(y.buttons&I)!==I}(c,this._eventButton)}isValidEndEvent(c){return g.mouseButton(c)===this._eventButton}}class vp{constructor(){this._firstTouch=void 0}_isOneFingerTouch(c){return c.targetTouches.length===1}_isSameTouchEvent(c){return c.targetTouches[0].identifier===this._firstTouch}startMove(c){this._firstTouch=c.targetTouches[0].identifier}endMove(c){delete this._firstTouch}isValidStartEvent(c){return this._isOneFingerTouch(c)}isValidMoveEvent(c){return this._isOneFingerTouch(c)&&this._isSameTouchEvent(c)}isValidEndEvent(c){return this._isOneFingerTouch(c)&&this._isSameTouchEvent(c)}}const _p=L=>{L.mousedown=L.dragStart,L.mousemoveWindow=L.dragMove,L.mouseup=L.dragEnd,L.contextmenu=c=>{c.preventDefault()}},zc=({enable:L,clickTolerance:c,bearingDegreesPerPixelMoved:y=.8})=>{const T=new tf({checkCorrectEvent:I=>g.mouseButton(I)===0&&I.ctrlKey||g.mouseButton(I)===2});return new Ga({clickTolerance:c,move:(I,D)=>({bearingDelta:(D.x-I.x)*y}),moveStateManager:T,enable:L,assignEvents:_p})},ac=({enable:L,clickTolerance:c,pitchDegreesPerPixelMoved:y=-.5})=>{const T=new tf({checkCorrectEvent:I=>g.mouseButton(I)===0&&I.ctrlKey||g.mouseButton(I)===2});return new Ga({clickTolerance:c,move:(I,D)=>({pitchDelta:(D.y-I.y)*y}),moveStateManager:T,enable:L,assignEvents:_p})};class Zm{constructor(c,y){this._clickTolerance=c.clickTolerance||1,this._map=y,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(c){return c<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(c,y,T){return this._calculateTransform(c,y,T)}touchmove(c,y,T){if(this._active){if(!this._shouldBePrevented(T.length))return c.preventDefault(),this._calculateTransform(c,y,T);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",c)}}touchend(c,y,T){this._calculateTransform(c,y,T),this._active&&this._shouldBePrevented(T.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(c,y,T){T.length>0&&(this._active=!0);const I=Il(T,y),D=new a.P(0,0),U=new a.P(0,0);let q=0;for(const te in I){const ce=I[te],ae=this._touches[te];ae&&(D._add(ce),U._add(ce.sub(ae)),q++,I[te]=ce)}if(this._touches=I,this._shouldBePrevented(q)||!U.mag())return;const K=U.div(q);return this._sum._add(K),this._sum.mag()<this._clickTolerance?void 0:{around:D.div(q),panDelta:K}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xd{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(c,y,T){this._firstTwoTouches||T.length<2||(this._firstTwoTouches=[T[0].identifier,T[1].identifier],this._start([y[0],y[1]]))}touchmove(c,y,T){if(!this._firstTwoTouches)return;c.preventDefault();const[I,D]=this._firstTwoTouches,U=Hu(T,y,I),q=Hu(T,y,D);if(!U||!q)return;const K=this._aroundCenter?null:U.add(q).div(2);return this._move([U,q],K,c)}touchend(c,y,T){if(!this._firstTwoTouches)return;const[I,D]=this._firstTwoTouches,U=Hu(T,y,I),q=Hu(T,y,D);U&&q||(this._active&&g.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(c){this._enabled=!0,this._aroundCenter=!!c&&c.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Hu(L,c,y){for(let T=0;T<L.length;T++)if(L[T].identifier===y)return c[T]}function xp(L,c){return Math.log(L/c)/Math.LN2}class Yd extends Xd{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(c){this._startDistance=this._distance=c[0].dist(c[1])}_move(c,y){const T=this._distance;if(this._distance=c[0].dist(c[1]),this._active||!(Math.abs(xp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:xp(this._distance,T),pinchAround:y}}}function Jm(L,c){return 180*L.angleWith(c)/Math.PI}class Fc extends Xd{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(c){this._startVector=this._vector=c[0].sub(c[1]),this._minDiameter=c[0].dist(c[1])}_move(c,y,T){const I=this._vector;if(this._vector=c[0].sub(c[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Jm(this._vector,I),pinchAround:y}}_isBelowThreshold(c){this._minDiameter=Math.min(this._minDiameter,c.mag());const y=25/(Math.PI*this._minDiameter)*360,T=Jm(c,this._startVector);return Math.abs(T)<y}}function bp(L){return Math.abs(L.y)>Math.abs(L.x)}class Qm extends Xd{constructor(c){super(),this._currentTouchCount=0,this._map=c}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(c,y,T){super.touchstart(c,y,T),this._currentTouchCount=T.length}_start(c){this._lastPoints=c,bp(c[0].sub(c[1]))&&(this._valid=!1)}_move(c,y,T){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const I=c[0].sub(this._lastPoints[0]),D=c[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(I,D,T.timeStamp),this._valid?(this._lastPoints=c,this._active=!0,{pitchDelta:(I.y+D.y)/2*-.5}):void 0}gestureBeginsVertically(c,y,T){if(this._valid!==void 0)return this._valid;const I=c.mag()>=2,D=y.mag()>=2;if(!I&&!D)return;if(!I||!D)return this._firstMove===void 0&&(this._firstMove=T),T-this._firstMove<100&&void 0;const U=c.y>0==y.y>0;return bp(c)&&bp(y)&&U}}const eg={panStep:100,bearingStep:15,pitchStep:10};class tg{constructor(c){this._tr=new Ys(c);const y=eg;this._panStep=y.panStep,this._bearingStep=y.bearingStep,this._pitchStep=y.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(c){if(c.altKey||c.ctrlKey||c.metaKey)return;let y=0,T=0,I=0,D=0,U=0;switch(c.keyCode){case 61:case 107:case 171:case 187:y=1;break;case 189:case 109:case 173:y=-1;break;case 37:c.shiftKey?T=-1:(c.preventDefault(),D=-1);break;case 39:c.shiftKey?T=1:(c.preventDefault(),D=1);break;case 38:c.shiftKey?I=1:(c.preventDefault(),U=-1);break;case 40:c.shiftKey?I=-1:(c.preventDefault(),U=1);break;default:return}return this._rotationDisabled&&(T=0,I=0),{cameraAnimation:q=>{const K=this._tr;q.easeTo({duration:300,easeId:"keyboardHandler",easing:uv,zoom:y?Math.round(K.zoom)+y*(c.shiftKey?2:1):K.zoom,bearing:K.bearing+T*this._bearingStep,pitch:K.pitch+I*this._pitchStep,offset:[-D*this._panStep,-U*this._panStep],center:K.center},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function uv(L){return L*(2-L)}const dv=4.000244140625;class ng{constructor(c,y){this._onTimeout=T=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(T)},this._map=c,this._tr=new Ys(c),this._triggerRenderFrame=y,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(c){this._defaultZoomRate=c}setWheelZoomRate(c){this._wheelZoomRate=c}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(c){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!c&&c.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(c){return!!this._map.cooperativeGestures.isEnabled()&&!(c.ctrlKey||this._map.cooperativeGestures.isBypassed(c))}wheel(c){if(!this.isEnabled())return;if(this._shouldBePrevented(c))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",c);let y=c.deltaMode===WheelEvent.DOM_DELTA_LINE?40*c.deltaY:c.deltaY;const T=p.now(),I=T-(this._lastWheelEventTime||0);this._lastWheelEventTime=T,y!==0&&y%dv==0?this._type="wheel":y!==0&&Math.abs(y)<4?this._type="trackpad":I>400?(this._type=null,this._lastValue=y,this._timeout=setTimeout(this._onTimeout,40,c)):this._type||(this._type=Math.abs(I*y)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,y+=this._lastValue)),c.shiftKey&&y&&(y/=4),this._type&&(this._lastWheelEvent=c,this._delta-=y,this._active||this._start(c)),c.preventDefault()}_start(c){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const y=g.mousePos(this._map.getCanvas(),c),T=this._tr;this._around=y.y>T.transform.height/2-T.transform.getHorizon()?a.N.convert(this._aroundCenter?T.center:T.unproject(y)):a.N.convert(T.center),this._aroundPoint=T.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const c=this._tr.transform;if(this._delta!==0){const K=this._type==="wheel"&&Math.abs(this._delta)>dv?this._wheelZoomRate:this._defaultZoomRate;let te=2/(1+Math.exp(-Math.abs(this._delta*K)));this._delta<0&&te!==0&&(te=1/te);const ce=typeof this._targetZoom=="number"?c.zoomScale(this._targetZoom):c.scale;this._targetZoom=Math.min(c.maxZoom,Math.max(c.minZoom,c.scaleZoom(ce*te))),this._type==="wheel"&&(this._startZoom=c.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const y=typeof this._targetZoom=="number"?this._targetZoom:c.zoom,T=this._startZoom,I=this._easing;let D,U=!1;const q=p.now()-this._lastWheelEventTime;if(this._type==="wheel"&&T&&I&&q){const K=Math.min(q/200,1),te=I(K);D=a.y.number(T,y,te),K<1?this._frameId||(this._frameId=!0):U=!0}else D=y,U=!0;return this._active=!0,U&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!U,zoomDelta:D-c.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(c){let y=a.b8;if(this._prevEase){const T=this._prevEase,I=(p.now()-T.start)/T.duration,D=T.easing(I+.01)-T.easing(I),U=.27/Math.sqrt(D*D+1e-4)*.01,q=Math.sqrt(.0729-U*U);y=a.b7(U,q,.25,1)}return this._prevEase={start:p.now(),duration:c,easing:y},y}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class nf{constructor(c,y){this._clickZoom=c,this._tapZoom=y}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class S_{constructor(c){this._tr=new Ys(c),this.reset()}reset(){this._active=!1}dblclick(c,y){return c.preventDefault(),{cameraAnimation:T=>{T.easeTo({duration:300,zoom:this._tr.zoom+(c.shiftKey?-1:1),around:this._tr.unproject(y)},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qa{constructor(){this._tap=new qd({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(c,y,T){if(!this._swipePoint)if(this._tapTime){const I=y[0],D=c.timeStamp-this._tapTime<500,U=this._tapPoint.dist(I)<30;D&&U?T.length>0&&(this._swipePoint=I,this._swipeTouch=T[0].identifier):this.reset()}else this._tap.touchstart(c,y,T)}touchmove(c,y,T){if(this._tapTime){if(this._swipePoint){if(T[0].identifier!==this._swipeTouch)return;const I=y[0],D=I.y-this._swipePoint.y;return this._swipePoint=I,c.preventDefault(),this._active=!0,{zoomDelta:D/128}}}else this._tap.touchmove(c,y,T)}touchend(c,y,T){if(this._tapTime)this._swipePoint&&T.length===0&&this.reset();else{const I=this._tap.touchend(c,y,T);I&&(this._tapTime=c.timeStamp,this._tapPoint=I)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xa{constructor(c,y,T){this._el=c,this._mousePan=y,this._touchPan=T}enable(c){this._inertiaOptions=c||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class rg{constructor(c,y,T){this._pitchWithRotate=c.pitchWithRotate,this._mouseRotate=y,this._mousePitch=T}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Ya{constructor(c,y,T,I){this._el=c,this._touchZoom=y,this._touchRotate=T,this._tapDragZoom=I,this._rotationDisabled=!1,this._enabled=!0}enable(c){this._touchZoom.enable(c),this._rotationDisabled||this._touchRotate.enable(c),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class lc{constructor(c,y){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=c,this._options=y,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const c=this._map.getCanvasContainer();c.classList.add("maplibregl-cooperative-gestures"),this._container=g.create("div","maplibregl-cooperative-gesture-screen",c);let y=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(y=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const T=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),I=document.createElement("div");I.className="maplibregl-desktop-message",I.textContent=y,this._container.appendChild(I);const D=document.createElement("div");D.className="maplibregl-mobile-message",D.textContent=T,this._container.appendChild(D),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(g.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(c){return c[this._bypassKey]}notifyGestureBlocked(c,y){this._enabled&&(this._map.fire(new a.k("cooperativegestureprevented",{gestureType:c,originalEvent:y})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const ig=L=>L.zoom||L.drag||L.pitch||L.rotate;class Mw extends a.k{}function hv(L){return L.panDelta&&L.panDelta.mag()||L.zoomDelta||L.bearingDelta||L.pitchDelta}class fv{constructor(c,y){this.handleWindowEvent=I=>{this.handleEvent(I,`${I.type}Window`)},this.handleEvent=(I,D)=>{if(I.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const U=I.type==="renderFrame"?void 0:I,q={needsRenderFrame:!1},K={},te={},ce=I.touches,ae=ce?this._getMapTouches(ce):void 0,xe=ae?g.touchPos(this._map.getCanvas(),ae):g.mousePos(this._map.getCanvas(),I);for(const{handlerName:$e,handler:ze,allowed:Ge}of this._handlers){if(!ze.isEnabled())continue;let nt;this._blockedByActive(te,Ge,$e)?ze.reset():ze[D||I.type]&&(nt=ze[D||I.type](I,xe,ae),this.mergeHandlerResult(q,K,nt,$e,U),nt&&nt.needsRenderFrame&&this._triggerRenderFrame()),(nt||ze.isActive())&&(te[$e]=ze)}const Pe={};for(const $e in this._previousActiveHandlers)te[$e]||(Pe[$e]=U);this._previousActiveHandlers=te,(Object.keys(Pe).length||hv(q))&&(this._changes.push([q,K,Pe]),this._triggerRenderFrame()),(Object.keys(te).length||hv(q))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ee}=q;Ee&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ee(this._map))},this._map=c,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ef(c),this._bearingSnap=y.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(y);const T=this._el;this._listeners=[[T,"touchstart",{passive:!0}],[T,"touchmove",{passive:!1}],[T,"touchend",void 0],[T,"touchcancel",void 0],[T,"mousedown",void 0],[T,"mousemove",void 0],[T,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[T,"mouseover",void 0],[T,"mouseout",void 0],[T,"dblclick",void 0],[T,"click",void 0],[T,"keydown",{capture:!1}],[T,"keyup",void 0],[T,"wheel",{passive:!1}],[T,"contextmenu",void 0],[window,"blur",void 0]];for(const[I,D,U]of this._listeners)g.addEventListener(I,D,I===document?this.handleWindowEvent:this.handleEvent,U)}destroy(){for(const[c,y,T]of this._listeners)g.removeEventListener(c,y,c===document?this.handleWindowEvent:this.handleEvent,T)}_addDefaultHandlers(c){const y=this._map,T=y.getCanvasContainer();this._add("mapEvent",new yp(y,c));const I=y.boxZoom=new Ks(y,c);this._add("boxZoom",I),c.interactive&&c.boxZoom&&I.enable();const D=y.cooperativeGestures=new lc(y,c.cooperativeGestures);this._add("cooperativeGestures",D),c.cooperativeGestures&&D.enable();const U=new eo(y),q=new S_(y);y.doubleClickZoom=new nf(q,U),this._add("tapZoom",U),this._add("clickZoom",q),c.interactive&&c.doubleClickZoom&&y.doubleClickZoom.enable();const K=new qa;this._add("tapDragZoom",K);const te=y.touchPitch=new Qm(y);this._add("touchPitch",te),c.interactive&&c.touchPitch&&y.touchPitch.enable(c.touchPitch);const ce=zc(c),ae=ac(c);y.dragRotate=new rg(c,ce,ae),this._add("mouseRotate",ce,["mousePitch"]),this._add("mousePitch",ae,["mouseRotate"]),c.interactive&&c.dragRotate&&y.dragRotate.enable();const xe=(({enable:nt,clickTolerance:Fe})=>{const ct=new tf({checkCorrectEvent:yt=>g.mouseButton(yt)===0&&!yt.ctrlKey});return new Ga({clickTolerance:Fe,move:(yt,Pt)=>({around:Pt,panDelta:Pt.sub(yt)}),activateOnStart:!0,moveStateManager:ct,enable:nt,assignEvents:_p})})(c),Pe=new Zm(c,y);y.dragPan=new Xa(T,xe,Pe),this._add("mousePan",xe),this._add("touchPan",Pe,["touchZoom","touchRotate"]),c.interactive&&c.dragPan&&y.dragPan.enable(c.dragPan);const Ee=new Fc,$e=new Yd;y.touchZoomRotate=new Ya(T,$e,Ee,K),this._add("touchRotate",Ee,["touchPan","touchZoom"]),this._add("touchZoom",$e,["touchPan","touchRotate"]),c.interactive&&c.touchZoomRotate&&y.touchZoomRotate.enable(c.touchZoomRotate);const ze=y.scrollZoom=new ng(y,()=>this._triggerRenderFrame());this._add("scrollZoom",ze,["mousePan"]),c.interactive&&c.scrollZoom&&y.scrollZoom.enable(c.scrollZoom);const Ge=y.keyboard=new tg(y);this._add("keyboard",Ge),c.interactive&&c.keyboard&&y.keyboard.enable(),this._add("blockableMapEvent",new Ym(y))}_add(c,y,T){this._handlers.push({handlerName:c,handler:y,allowed:T}),this._handlersById[c]=y}stop(c){if(!this._updatingCamera){for(const{handler:y}of this._handlers)y.reset();this._inertia.clear(),this._fireEvents({},{},c),this._changes=[]}}isActive(){for(const{handler:c}of this._handlers)if(c.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ig(this._eventsInProgress)||this.isZooming()}_blockedByActive(c,y,T){for(const I in c)if(I!==T&&(!y||y.indexOf(I)<0))return!0;return!1}_getMapTouches(c){const y=[];for(const T of c)this._el.contains(T.target)&&y.push(T);return y}mergeHandlerResult(c,y,T,I,D){if(!T)return;a.e(c,T);const U={handlerName:I,originalEvent:T.originalEvent||D};T.zoomDelta!==void 0&&(y.zoom=U),T.panDelta!==void 0&&(y.drag=U),T.pitchDelta!==void 0&&(y.pitch=U),T.bearingDelta!==void 0&&(y.rotate=U)}_applyChanges(){const c={},y={},T={};for(const[I,D,U]of this._changes)I.panDelta&&(c.panDelta=(c.panDelta||new a.P(0,0))._add(I.panDelta)),I.zoomDelta&&(c.zoomDelta=(c.zoomDelta||0)+I.zoomDelta),I.bearingDelta&&(c.bearingDelta=(c.bearingDelta||0)+I.bearingDelta),I.pitchDelta&&(c.pitchDelta=(c.pitchDelta||0)+I.pitchDelta),I.around!==void 0&&(c.around=I.around),I.pinchAround!==void 0&&(c.pinchAround=I.pinchAround),I.noInertia&&(c.noInertia=I.noInertia),a.e(y,D),a.e(T,U);this._updateMapTransform(c,y,T),this._changes=[]}_updateMapTransform(c,y,T){const I=this._map,D=I._getTransformForUpdate(),U=I.terrain;if(!(hv(c)||U&&this._terrainMovement))return this._fireEvents(y,T,!0);let{panDelta:q,zoomDelta:K,bearingDelta:te,pitchDelta:ce,around:ae,pinchAround:xe}=c;xe!==void 0&&(ae=xe),I._stop(!0),ae=ae||I.transform.centerPoint;const Pe=D.pointLocation(q?ae.sub(q):ae);te&&(D.bearing+=te),ce&&(D.pitch+=ce),K&&(D.zoom+=K),U?this._terrainMovement||!y.drag&&!y.zoom?y.drag&&this._terrainMovement?D.center=D.pointLocation(D.centerPoint.sub(q)):D.setLocationAtPoint(Pe,ae):(this._terrainMovement=!0,this._map._elevationFreeze=!0,D.setLocationAtPoint(Pe,ae)):D.setLocationAtPoint(Pe,ae),I._applyUpdatedTransform(D),this._map._update(),c.noInertia||this._inertia.record(c),this._fireEvents(y,T,!0)}_fireEvents(c,y,T){const I=ig(this._eventsInProgress),D=ig(c),U={};for(const ae in c){const{originalEvent:xe}=c[ae];this._eventsInProgress[ae]||(U[`${ae}start`]=xe),this._eventsInProgress[ae]=c[ae]}!I&&D&&this._fireEvent("movestart",D.originalEvent);for(const ae in U)this._fireEvent(ae,U[ae]);D&&this._fireEvent("move",D.originalEvent);for(const ae in c){const{originalEvent:xe}=c[ae];this._fireEvent(ae,xe)}const q={};let K;for(const ae in this._eventsInProgress){const{handlerName:xe,originalEvent:Pe}=this._eventsInProgress[ae];this._handlersById[xe].isActive()||(delete this._eventsInProgress[ae],K=y[xe]||Pe,q[`${ae}end`]=K)}for(const ae in q)this._fireEvent(ae,q[ae]);const te=ig(this._eventsInProgress),ce=(I||D)&&!te;if(ce&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const ae=this._map._getTransformForUpdate();ae.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(ae)}if(T&&ce){this._updatingCamera=!0;const ae=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),xe=Pe=>Pe!==0&&-this._bearingSnap<Pe&&Pe<this._bearingSnap;!ae||!ae.essential&&p.prefersReducedMotion?(this._map.fire(new a.k("moveend",{originalEvent:K})),xe(this._map.getBearing())&&this._map.resetNorth()):(xe(ae.bearing||this._map.getBearing())&&(ae.bearing=0),ae.freezeElevation=!0,this._map.easeTo(ae,{originalEvent:K})),this._updatingCamera=!1}}_fireEvent(c,y){this._map.fire(new a.k(c,y?{originalEvent:y}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(c=>{delete this._frameId,this.handleEvent(new Mw("renderFrame",{timeStamp:c})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class og extends a.E{constructor(c,y){super(),this._renderFrameCallback=()=>{const T=Math.min((p.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(T)),T<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=c,this._bearingSnap=y.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new a.N(this.transform.center.lng,this.transform.center.lat)}setCenter(c,y){return this.jumpTo({center:c},y)}panBy(c,y,T){return c=a.P.convert(c).mult(-1),this.panTo(this.transform.center,a.e({offset:c},y),T)}panTo(c,y,T){return this.easeTo(a.e({center:c},y),T)}getZoom(){return this.transform.zoom}setZoom(c,y){return this.jumpTo({zoom:c},y),this}zoomTo(c,y,T){return this.easeTo(a.e({zoom:c},y),T)}zoomIn(c,y){return this.zoomTo(this.getZoom()+1,c,y),this}zoomOut(c,y){return this.zoomTo(this.getZoom()-1,c,y),this}getBearing(){return this.transform.bearing}setBearing(c,y){return this.jumpTo({bearing:c},y),this}getPadding(){return this.transform.padding}setPadding(c,y){return this.jumpTo({padding:c},y),this}rotateTo(c,y,T){return this.easeTo(a.e({bearing:c},y),T)}resetNorth(c,y){return this.rotateTo(0,a.e({duration:1e3},c),y),this}resetNorthPitch(c,y){return this.easeTo(a.e({bearing:0,pitch:0,duration:1e3},c),y),this}snapToNorth(c,y){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(c,y):this}getPitch(){return this.transform.pitch}setPitch(c,y){return this.jumpTo({pitch:c},y),this}cameraForBounds(c,y){c=ke.convert(c);const T=y&&y.bearing||0;return this._cameraForBoxAndBearing(c.getNorthWest(),c.getSouthEast(),T,y)}_cameraForBoxAndBearing(c,y,T,I){const D={top:0,bottom:0,right:0,left:0};if(typeof(I=a.e({padding:D,offset:[0,0],maxZoom:this.transform.maxZoom},I)).padding=="number"){const sn=I.padding;I.padding={top:sn,bottom:sn,right:sn,left:sn}}I.padding=a.e(D,I.padding);const U=this.transform,q=U.padding,K=new ke(c,y),te=U.project(K.getNorthWest()),ce=U.project(K.getNorthEast()),ae=U.project(K.getSouthEast()),xe=U.project(K.getSouthWest()),Pe=a.b9(-T),Ee=te.rotate(Pe),$e=ce.rotate(Pe),ze=ae.rotate(Pe),Ge=xe.rotate(Pe),nt=new a.P(Math.max(Ee.x,$e.x,Ge.x,ze.x),Math.max(Ee.y,$e.y,Ge.y,ze.y)),Fe=new a.P(Math.min(Ee.x,$e.x,Ge.x,ze.x),Math.min(Ee.y,$e.y,Ge.y,ze.y)),ct=nt.sub(Fe),yt=(U.width-(q.left+q.right+I.padding.left+I.padding.right))/ct.x,Pt=(U.height-(q.top+q.bottom+I.padding.top+I.padding.bottom))/ct.y;if(Pt<0||yt<0)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Gt=Math.min(U.scaleZoom(U.scale*Math.min(yt,Pt)),I.maxZoom),on=a.P.convert(I.offset),vn=new a.P((I.padding.left-I.padding.right)/2,(I.padding.top-I.padding.bottom)/2).rotate(a.b9(T)),_n=on.add(vn).mult(U.scale/U.zoomScale(Gt));return{center:U.unproject(te.add(ae).div(2).sub(_n)),zoom:Gt,bearing:T}}fitBounds(c,y,T){return this._fitInternal(this.cameraForBounds(c,y),y,T)}fitScreenCoordinates(c,y,T,I,D){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.P.convert(c)),this.transform.pointLocation(a.P.convert(y)),T,I),I,D)}_fitInternal(c,y,T){return c?(delete(y=a.e(c,y)).padding,y.linear?this.easeTo(y,T):this.flyTo(y,T)):this}jumpTo(c,y){this.stop();const T=this._getTransformForUpdate();let I=!1,D=!1,U=!1;return"zoom"in c&&T.zoom!==+c.zoom&&(I=!0,T.zoom=+c.zoom),c.center!==void 0&&(T.center=a.N.convert(c.center)),"bearing"in c&&T.bearing!==+c.bearing&&(D=!0,T.bearing=+c.bearing),"pitch"in c&&T.pitch!==+c.pitch&&(U=!0,T.pitch=+c.pitch),c.padding==null||T.isPaddingEqual(c.padding)||(T.padding=c.padding),this._applyUpdatedTransform(T),this.fire(new a.k("movestart",y)).fire(new a.k("move",y)),I&&this.fire(new a.k("zoomstart",y)).fire(new a.k("zoom",y)).fire(new a.k("zoomend",y)),D&&this.fire(new a.k("rotatestart",y)).fire(new a.k("rotate",y)).fire(new a.k("rotateend",y)),U&&this.fire(new a.k("pitchstart",y)).fire(new a.k("pitch",y)).fire(new a.k("pitchend",y)),this.fire(new a.k("moveend",y))}calculateCameraOptionsFromTo(c,y,T,I=0){const D=a.Z.fromLngLat(c,y),U=a.Z.fromLngLat(T,I),q=U.x-D.x,K=U.y-D.y,te=U.z-D.z,ce=Math.hypot(q,K,te);if(ce===0)throw new Error("Can't calculate camera options with same From and To");const ae=Math.hypot(q,K),xe=this.transform.scaleZoom(this.transform.cameraToCenterDistance/ce/this.transform.tileSize),Pe=180*Math.atan2(q,-K)/Math.PI;let Ee=180*Math.acos(ae/ce)/Math.PI;return Ee=te<0?90-Ee:90+Ee,{center:U.toLngLat(),zoom:xe,pitch:Ee,bearing:Pe}}easeTo(c,y){var T;this._stop(!1,c.easeId),((c=a.e({offset:[0,0],duration:500,easing:a.b8},c)).animate===!1||!c.essential&&p.prefersReducedMotion)&&(c.duration=0);const I=this._getTransformForUpdate(),D=I.zoom,U=I.bearing,q=I.pitch,K=I.padding,te="bearing"in c?this._normalizeBearing(c.bearing,U):U,ce="pitch"in c?+c.pitch:q,ae="padding"in c?c.padding:I.padding,xe=a.P.convert(c.offset);let Pe=I.centerPoint.add(xe);const Ee=I.pointLocation(Pe),{center:$e,zoom:ze}=I.getConstrained(a.N.convert(c.center||Ee),(T=c.zoom)!==null&&T!==void 0?T:D);this._normalizeCenter($e,I);const Ge=I.project(Ee),nt=I.project($e).sub(Ge),Fe=I.zoomScale(ze-D);let ct,yt;c.around&&(ct=a.N.convert(c.around),yt=I.locationPoint(ct));const Pt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ze!==D,this._rotating=this._rotating||U!==te,this._pitching=this._pitching||ce!==q,this._padding=!I.isPaddingEqual(ae),this._easeId=c.easeId,this._prepareEase(y,c.noMoveStart,Pt),this.terrain&&this._prepareElevation($e),this._ease(Gt=>{if(this._zooming&&(I.zoom=a.y.number(D,ze,Gt)),this._rotating&&(I.bearing=a.y.number(U,te,Gt)),this._pitching&&(I.pitch=a.y.number(q,ce,Gt)),this._padding&&(I.interpolatePadding(K,ae,Gt),Pe=I.centerPoint.add(xe)),this.terrain&&!c.freezeElevation&&this._updateElevation(Gt),ct)I.setLocationAtPoint(ct,yt);else{const on=I.zoomScale(I.zoom-D),vn=ze>D?Math.min(2,Fe):Math.max(.5,Fe),_n=Math.pow(vn,1-Gt),sn=I.unproject(Ge.add(nt.mult(Gt*_n)).mult(on));I.setLocationAtPoint(I.renderWorldCopies?sn.wrap():sn,Pe)}this._applyUpdatedTransform(I),this._fireMoveEvents(y)},Gt=>{this.terrain&&c.freezeElevation&&this._finalizeElevation(),this._afterEase(y,Gt)},c),this}_prepareEase(c,y,T={}){this._moving=!0,y||T.moving||this.fire(new a.k("movestart",c)),this._zooming&&!T.zooming&&this.fire(new a.k("zoomstart",c)),this._rotating&&!T.rotating&&this.fire(new a.k("rotatestart",c)),this._pitching&&!T.pitching&&this.fire(new a.k("pitchstart",c))}_prepareElevation(c){this._elevationCenter=c,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(c){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const y=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(c<1&&y!==this._elevationTarget){const T=this._elevationTarget-this._elevationStart;this._elevationStart+=c*(T-(y-(T*c+this._elevationStart))/(1-c)),this._elevationTarget=y}this.transform.elevation=a.y.number(this._elevationStart,this._elevationTarget,c)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(c){const y=c.getCameraPosition(),T=this.terrain.getElevationForLngLatZoom(y.lngLat,c.zoom);if(y.altitude<T){const I=this.calculateCameraOptionsFromTo(y.lngLat,T,c.center,c.elevation);return{pitch:I.pitch,zoom:I.zoom}}return{}}_applyUpdatedTransform(c){const y=[];if(this.terrain&&y.push(I=>this._elevateCameraIfInsideTerrain(I)),this.transformCameraUpdate&&y.push(I=>this.transformCameraUpdate(I)),!y.length)return;const T=c.clone();for(const I of y){const D=T.clone(),{center:U,zoom:q,pitch:K,bearing:te,elevation:ce}=I(D);U&&(D.center=U),q!==void 0&&(D.zoom=q),K!==void 0&&(D.pitch=K),te!==void 0&&(D.bearing=te),ce!==void 0&&(D.elevation=ce),T.apply(D)}this.transform.apply(T)}_fireMoveEvents(c){this.fire(new a.k("move",c)),this._zooming&&this.fire(new a.k("zoom",c)),this._rotating&&this.fire(new a.k("rotate",c)),this._pitching&&this.fire(new a.k("pitch",c))}_afterEase(c,y){if(this._easeId&&y&&this._easeId===y)return;delete this._easeId;const T=this._zooming,I=this._rotating,D=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,T&&this.fire(new a.k("zoomend",c)),I&&this.fire(new a.k("rotateend",c)),D&&this.fire(new a.k("pitchend",c)),this.fire(new a.k("moveend",c))}flyTo(c,y){var T;if(!c.essential&&p.prefersReducedMotion){const pn=a.M(c,["center","zoom","bearing","pitch","around"]);return this.jumpTo(pn,y)}this.stop(),c=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.b8},c);const I=this._getTransformForUpdate(),D=I.zoom,U=I.bearing,q=I.pitch,K=I.padding,te="bearing"in c?this._normalizeBearing(c.bearing,U):U,ce="pitch"in c?+c.pitch:q,ae="padding"in c?c.padding:I.padding,xe=a.P.convert(c.offset);let Pe=I.centerPoint.add(xe);const Ee=I.pointLocation(Pe),{center:$e,zoom:ze}=I.getConstrained(a.N.convert(c.center||Ee),(T=c.zoom)!==null&&T!==void 0?T:D);this._normalizeCenter($e,I);const Ge=I.zoomScale(ze-D),nt=I.project(Ee),Fe=I.project($e).sub(nt);let ct=c.curve;const yt=Math.max(I.width,I.height),Pt=yt/Ge,Gt=Fe.mag();if("minZoom"in c){const pn=a.ac(Math.min(c.minZoom,D,ze),I.minZoom,I.maxZoom),or=yt/I.zoomScale(pn-D);ct=Math.sqrt(or/Gt*2)}const on=ct*ct;function vn(pn){const or=(Pt*Pt-yt*yt+(pn?-1:1)*on*on*Gt*Gt)/(2*(pn?Pt:yt)*on*Gt);return Math.log(Math.sqrt(or*or+1)-or)}function _n(pn){return(Math.exp(pn)-Math.exp(-pn))/2}function sn(pn){return(Math.exp(pn)+Math.exp(-pn))/2}const cn=vn(!1);let Cn=function(pn){return sn(cn)/sn(cn+ct*pn)},ar=function(pn){return yt*((sn(cn)*(_n(or=cn+ct*pn)/sn(or))-_n(cn))/on)/Gt;var or},un=(vn(!0)-cn)/ct;if(Math.abs(Gt)<1e-6||!isFinite(un)){if(Math.abs(yt-Pt)<1e-6)return this.easeTo(c,y);const pn=Pt<yt?-1:1;un=Math.abs(Math.log(Pt/yt))/ct,ar=()=>0,Cn=or=>Math.exp(pn*ct*or)}return c.duration="duration"in c?+c.duration:1e3*un/("screenSpeed"in c?+c.screenSpeed/ct:+c.speed),c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0),this._zooming=!0,this._rotating=U!==te,this._pitching=ce!==q,this._padding=!I.isPaddingEqual(ae),this._prepareEase(y,!1),this.terrain&&this._prepareElevation($e),this._ease(pn=>{const or=pn*un,Pi=1/Cn(or);I.zoom=pn===1?ze:D+I.scaleZoom(Pi),this._rotating&&(I.bearing=a.y.number(U,te,pn)),this._pitching&&(I.pitch=a.y.number(q,ce,pn)),this._padding&&(I.interpolatePadding(K,ae,pn),Pe=I.centerPoint.add(xe)),this.terrain&&!c.freezeElevation&&this._updateElevation(pn);const yr=pn===1?$e:I.unproject(nt.add(Fe.mult(ar(or))).mult(Pi));I.setLocationAtPoint(I.renderWorldCopies?yr.wrap():yr,Pe),this._applyUpdatedTransform(I),this._fireMoveEvents(y)},()=>{this.terrain&&c.freezeElevation&&this._finalizeElevation(),this._afterEase(y)},c),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(c,y){var T;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const I=this._onEaseEnd;delete this._onEaseEnd,I.call(this,y)}return c||(T=this.handlers)===null||T===void 0||T.stop(!1),this}_ease(c,y,T){T.animate===!1||T.duration===0?(c(1),y()):(this._easeStart=p.now(),this._easeOptions=T,this._onEaseFrame=c,this._onEaseEnd=y,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(c,y){c=a.b2(c,-180,180);const T=Math.abs(c-y);return Math.abs(c-360-y)<T&&(c-=360),Math.abs(c+360-y)<T&&(c+=360),c}_normalizeCenter(c,y){if(!y.renderWorldCopies||y.lngRange)return;const T=c.lng-y.center.lng;c.lng+=T>180?-360:T<-180?360:0}queryTerrainElevation(c){return this.terrain?this.terrain.getElevationForLngLatZoom(a.N.convert(c),this.transform.tileZoom)-this.transform.elevation:null}}const rf={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Rl{constructor(c=rf){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=y=>{!y||y.sourceDataType!=="metadata"&&y.sourceDataType!=="visibility"&&y.dataType!=="style"&&y.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=c}getDefaultPosition(){return"bottom-right"}onAdd(c){return this._map=c,this._compact=this.options.compact,this._container=g.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=g.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=g.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){g.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(c,y){const T=this._map._getUIString(`AttributionControl.${y}`);c.title=T,c.setAttribute("aria-label",T)}_updateAttributions(){if(!this._map.style)return;let c=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?c=c.concat(this.options.customAttribution.map(I=>typeof I!="string"?"":I)):typeof this.options.customAttribution=="string"&&c.push(this.options.customAttribution)),this._map.style.stylesheet){const I=this._map.style.stylesheet;this.styleOwner=I.owner,this.styleId=I.id}const y=this._map.style.sourceCaches;for(const I in y){const D=y[I];if(D.used||D.usedForTerrain){const U=D.getSource();U.attribution&&c.indexOf(U.attribution)<0&&c.push(U.attribution)}}c=c.filter(I=>String(I).trim()),c.sort((I,D)=>I.length-D.length),c=c.filter((I,D)=>{for(let U=D+1;U<c.length;U++)if(c[U].indexOf(I)>=0)return!1;return!0});const T=c.join(" | ");T!==this._attribHTML&&(this._attribHTML=T,c.length?(this._innerContainer.innerHTML=T,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Mn{constructor(c={}){this._updateCompact=()=>{const y=this._container.children;if(y.length){const T=y[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&T.classList.add("maplibregl-compact"):T.classList.remove("maplibregl-compact")}},this.options=c}getDefaultPosition(){return"bottom-left"}onAdd(c){this._map=c,this._compact=this.options&&this.options.compact,this._container=g.create("div","maplibregl-ctrl");const y=g.create("a","maplibregl-ctrl-logo");return y.target="_blank",y.rel="noopener nofollow",y.href="https://maplibre.org/",y.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),y.setAttribute("rel","noopener nofollow"),this._container.appendChild(y),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){g.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class pv{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(c){const y=++this._id;return this._queue.push({callback:c,id:y,cancelled:!1}),y}remove(c){const y=this._currentlyRunning,T=y?this._queue.concat(y):this._queue;for(const I of T)if(I.id===c)return void(I.cancelled=!0)}run(c=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const y=this._currentlyRunning=this._queue;this._queue=[];for(const T of y)if(!T.cancelled&&(T.callback(c),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var sg=a.Y([{name:"a_pos3d",type:"Int16",components:3}]);class mv extends a.E{constructor(c){super(),this.sourceCache=c,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,c.usedForTerrain=!0,c.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(c,y){this.sourceCache.update(c,y),this._renderableTilesKeys=[];const T={};for(const I of c.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:y}))T[I.key]=!0,this._renderableTilesKeys.push(I.key),this._tiles[I.key]||(I.posMatrix=new Float64Array(16),a.aP(I.posMatrix,0,a.X,0,a.X,0,1),this._tiles[I.key]=new en(I,this.tileSize));for(const I in this._tiles)T[I]||delete this._tiles[I]}freeRtt(c){for(const y in this._tiles){const T=this._tiles[y];(!c||T.tileID.equals(c)||T.tileID.isChildOf(c)||c.isChildOf(T.tileID))&&(T.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(c=>this.getTileByID(c))}getTileByID(c){return this._tiles[c]}getTerrainCoords(c){const y={};for(const T of this._renderableTilesKeys){const I=this._tiles[T].tileID;if(I.canonical.equals(c.canonical)){const D=c.clone();D.posMatrix=new Float64Array(16),a.aP(D.posMatrix,0,a.X,0,a.X,0,1),y[T]=D}else if(I.canonical.isChildOf(c.canonical)){const D=c.clone();D.posMatrix=new Float64Array(16);const U=I.canonical.z-c.canonical.z,q=I.canonical.x-(I.canonical.x>>U<<U),K=I.canonical.y-(I.canonical.y>>U<<U),te=a.X>>U;a.aP(D.posMatrix,0,te,0,te,0,1),a.J(D.posMatrix,D.posMatrix,[-q*te,-K*te,0]),y[T]=D}else if(c.canonical.isChildOf(I.canonical)){const D=c.clone();D.posMatrix=new Float64Array(16);const U=c.canonical.z-I.canonical.z,q=c.canonical.x-(c.canonical.x>>U<<U),K=c.canonical.y-(c.canonical.y>>U<<U),te=a.X>>U;a.aP(D.posMatrix,0,a.X,0,a.X,0,1),a.J(D.posMatrix,D.posMatrix,[q*te,K*te,0]),a.K(D.posMatrix,D.posMatrix,[1/2**U,1/2**U,0]),y[T]=D}}return y}getSourceTile(c,y){const T=this.sourceCache._source;let I=c.overscaledZ-this.deltaZoom;if(I>T.maxzoom&&(I=T.maxzoom),I<T.minzoom)return null;this._sourceTileCache[c.key]||(this._sourceTileCache[c.key]=c.scaledTo(I).key);let D=this.sourceCache.getTileByID(this._sourceTileCache[c.key]);if((!D||!D.dem)&&y)for(;I>=T.minzoom&&(!D||!D.dem);)D=this.sourceCache.getTileByID(c.scaledTo(I--).key);return D}tilesAfterTime(c=Date.now()){return Object.values(this._tiles).filter(y=>y.timeAdded>=c)}}class Zs{constructor(c,y,T){this.painter=c,this.sourceCache=new mv(y),this.options=T,this.exaggeration=typeof T.exaggeration=="number"?T.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(c,y,T,I=a.X){var D;if(!(y>=0&&y<I&&T>=0&&T<I))return 0;const U=this.getTerrainData(c),q=(D=U.tile)===null||D===void 0?void 0:D.dem;if(!q)return 0;const K=function(Ee,$e,ze){var Ge=$e[0],nt=$e[1];return Ee[0]=ze[0]*Ge+ze[4]*nt+ze[12],Ee[1]=ze[1]*Ge+ze[5]*nt+ze[13],Ee}([],[y/I*a.X,T/I*a.X],U.u_terrain_matrix),te=[K[0]*q.dim,K[1]*q.dim],ce=Math.floor(te[0]),ae=Math.floor(te[1]),xe=te[0]-ce,Pe=te[1]-ae;return q.get(ce,ae)*(1-xe)*(1-Pe)+q.get(ce+1,ae)*xe*(1-Pe)+q.get(ce,ae+1)*(1-xe)*Pe+q.get(ce+1,ae+1)*xe*Pe}getElevationForLngLatZoom(c,y){if(!a.ba(y,c.wrap()))return 0;const{tileID:T,mercatorX:I,mercatorY:D}=this._getOverscaledTileIDFromLngLatZoom(c,y);return this.getElevation(T,I%a.X,D%a.X,a.X)}getElevation(c,y,T,I=a.X){return this.getDEMElevation(c,y,T,I)*this.exaggeration}getTerrainData(c){if(!this._emptyDemTexture){const I=this.painter.context,D=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Y(I,D,I.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Y(I,new a.R({width:1,height:1}),I.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(I.gl.NEAREST,I.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.an([])}const y=this.sourceCache.getSourceTile(c,!0);if(y&&y.dem&&(!y.demTexture||y.needsTerrainPrepare)){const I=this.painter.context;y.demTexture=this.painter.getTileTexture(y.dem.stride),y.demTexture?y.demTexture.update(y.dem.getPixels(),{premultiply:!1}):y.demTexture=new Y(I,y.dem.getPixels(),I.gl.RGBA,{premultiply:!1}),y.demTexture.bind(I.gl.NEAREST,I.gl.CLAMP_TO_EDGE),y.needsTerrainPrepare=!1}const T=y&&y+y.tileID.key+c.key;if(T&&!this._demMatrixCache[T]){const I=this.sourceCache.sourceCache._source.maxzoom;let D=c.canonical.z-y.tileID.canonical.z;c.overscaledZ>c.canonical.z&&(c.canonical.z>=I?D=c.canonical.z-I:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const U=c.canonical.x-(c.canonical.x>>D<<D),q=c.canonical.y-(c.canonical.y>>D<<D),K=a.bb(new Float64Array(16),[1/(a.X<<D),1/(a.X<<D),0]);a.J(K,K,[U*a.X,q*a.X,0]),this._demMatrixCache[c.key]={matrix:K,coord:c}}return{u_depth:2,u_terrain:3,u_terrain_dim:y&&y.dem&&y.dem.dim||1,u_terrain_matrix:T?this._demMatrixCache[c.key].matrix:this._emptyDemMatrix,u_terrain_unpack:y&&y.dem&&y.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(y&&y.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:y}}getFramebuffer(c){const y=this.painter,T=y.width/devicePixelRatio,I=y.height/devicePixelRatio;return!this._fbo||this._fbo.width===T&&this._fbo.height===I||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Y(y.context,{width:T,height:I,data:null},y.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(y.context.gl.NEAREST,y.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Y(y.context,{width:T,height:I,data:null},y.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(y.context.gl.NEAREST,y.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=y.context.createFramebuffer(T,I,!0,!1),this._fbo.depthAttachment.set(y.context.createRenderbuffer(y.context.gl.DEPTH_COMPONENT16,T,I))),this._fbo.colorAttachment.set(c==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const c=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const y=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let D=0,U=0;D<this._coordsTextureSize;D++)for(let q=0;q<this._coordsTextureSize;q++,U+=4)y[U+0]=255&q,y[U+1]=255&D,y[U+2]=q>>8<<4|D>>8,y[U+3]=0;const T=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(y.buffer)),I=new Y(c,T,c.gl.RGBA,{premultiply:!1});return I.bind(c.gl.NEAREST,c.gl.CLAMP_TO_EDGE),this._coordsTexture=I,I}pointCoordinate(c){this.painter.maybeDrawDepthAndCoords(!0);const y=new Uint8Array(4),T=this.painter.context,I=T.gl,D=Math.round(c.x*this.painter.pixelRatio/devicePixelRatio),U=Math.round(c.y*this.painter.pixelRatio/devicePixelRatio),q=Math.round(this.painter.height/devicePixelRatio);T.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),I.readPixels(D,q-U-1,1,1,I.RGBA,I.UNSIGNED_BYTE,y),T.bindFramebuffer.set(null);const K=y[0]+(y[2]>>4<<8),te=y[1]+((15&y[2])<<8),ce=this.coordsIndex[255-y[3]],ae=ce&&this.sourceCache.getTileByID(ce);if(!ae)return null;const xe=this._coordsTextureSize,Pe=(1<<ae.tileID.canonical.z)*xe;return new a.Z((ae.tileID.canonical.x*xe+K)/Pe+ae.tileID.wrap,(ae.tileID.canonical.y*xe+te)/Pe,this.getElevation(ae.tileID,K,te,xe))}depthAtPoint(c){const y=new Uint8Array(4),T=this.painter.context,I=T.gl;return T.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),I.readPixels(c.x,this.painter.height/devicePixelRatio-c.y-1,1,1,I.RGBA,I.UNSIGNED_BYTE,y),T.bindFramebuffer.set(null),(y[0]/16777216+y[1]/65536+y[2]/256+y[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const c=this.painter.context,y=new a.bc,T=new a.aX,I=this.meshSize,D=a.X/I,U=I*I;for(let ae=0;ae<=I;ae++)for(let xe=0;xe<=I;xe++)y.emplaceBack(xe*D,ae*D,0);for(let ae=0;ae<U;ae+=I+1)for(let xe=0;xe<I;xe++)T.emplaceBack(xe+ae,I+xe+ae+1,I+xe+ae+2),T.emplaceBack(xe+ae,I+xe+ae+2,xe+ae+1);const q=y.length,K=q+2*(I+1);for(const ae of[0,1])for(let xe=0;xe<=I;xe++)for(const Pe of[0,1])y.emplaceBack(xe*D,ae*a.X,Pe);for(let ae=0;ae<2*I;ae+=2)T.emplaceBack(K+ae,K+ae+1,K+ae+3),T.emplaceBack(K+ae,K+ae+3,K+ae+2),T.emplaceBack(q+ae,q+ae+3,q+ae+1),T.emplaceBack(q+ae,q+ae+2,q+ae+3);const te=y.length,ce=te+2*(I+1);for(const ae of[0,1])for(let xe=0;xe<=I;xe++)for(const Pe of[0,1])y.emplaceBack(ae*a.X,xe*D,Pe);for(let ae=0;ae<2*I;ae+=2)T.emplaceBack(te+ae,te+ae+1,te+ae+3),T.emplaceBack(te+ae,te+ae+3,te+ae+2),T.emplaceBack(ce+ae,ce+ae+3,ce+ae+1),T.emplaceBack(ce+ae,ce+ae+2,ce+ae+3);return this._mesh=new mp(c.createVertexBuffer(y,sg.members),c.createIndexBuffer(T),a.a0.simpleSegment(0,0,y.length,T.length)),this._mesh}getMeshFrameDelta(c){return 2*Math.PI*a.bd/Math.pow(2,c)/5}getMinTileElevationForLngLatZoom(c,y){var T;const{tileID:I}=this._getOverscaledTileIDFromLngLatZoom(c,y);return(T=this.getMinMaxElevation(I).minElevation)!==null&&T!==void 0?T:0}getMinMaxElevation(c){const y=this.getTerrainData(c).tile,T={minElevation:null,maxElevation:null};return y&&y.dem&&(T.minElevation=y.dem.min*this.exaggeration,T.maxElevation=y.dem.max*this.exaggeration),T}_getOverscaledTileIDFromLngLatZoom(c,y){const T=a.Z.fromLngLat(c.wrap()),I=(1<<y)*a.X,D=T.x*I,U=T.y*I,q=Math.floor(D/a.X),K=Math.floor(U/a.X);return{tileID:new a.S(y,0,y,q,K),mercatorX:D,mercatorY:U}}}class of{constructor(c,y,T){this._context=c,this._size=y,this._tileSize=T,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const c of this._objects)c.texture.destroy(),c.fbo.destroy()}_createObject(c){const y=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),T=new Y(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return T.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),y.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),y.colorAttachment.set(T.texture),{id:c,fbo:y,texture:T,stamp:-1,inUse:!1}}getObjectForId(c){return this._objects[c]}useObject(c){c.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(y=>c.id!==y),this._recentlyUsed.push(c.id)}stampObject(c){c.stamp=++this._stamp}getOrCreateFreeObject(){for(const y of this._recentlyUsed)if(!this._objects[y].inUse)return this._objects[y];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const c=this._createObject(this._objects.length);return this._objects.push(c),c}freeObject(c){c.inUse=!1}freeAllObjects(){for(const c of this._objects)this.freeObject(c)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(c=>!c.inUse)===!1}}const kl={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class wr{constructor(c,y){this.painter=c,this.terrain=y,this.pool=new of(c.context,30,y.sourceCache.tileSize*y.qualityFactor)}destruct(){this.pool.destruct()}getTexture(c){return this.pool.getObjectForId(c.rtt[this._stacks.length-1].id).texture}prepareForRender(c,y){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=c._order.filter(T=>!c._layers[T].isHidden(y)),this._coordsDescendingInv={};for(const T in c.sourceCaches){this._coordsDescendingInv[T]={};const I=c.sourceCaches[T].getVisibleCoordinates();for(const D of I){const U=this.terrain.sourceCache.getTerrainCoords(D);for(const q in U)this._coordsDescendingInv[T][q]||(this._coordsDescendingInv[T][q]=[]),this._coordsDescendingInv[T][q].push(U[q])}}this._coordsDescendingInvStr={};for(const T of c._order){const I=c._layers[T],D=I.source;if(kl[I.type]&&!this._coordsDescendingInvStr[D]){this._coordsDescendingInvStr[D]={};for(const U in this._coordsDescendingInv[D])this._coordsDescendingInvStr[D][U]=this._coordsDescendingInv[D][U].map(q=>q.key).sort().join()}}for(const T of this._renderableTiles)for(const I in this._coordsDescendingInvStr){const D=this._coordsDescendingInvStr[I][T.tileID.key];D&&D!==T.rttCoords[I]&&(T.rtt=[])}}renderLayer(c){if(c.isHidden(this.painter.transform.zoom))return!1;const y=c.type,T=this.painter,I=this._renderableLayerIds[this._renderableLayerIds.length-1]===c.id;if(kl[y]&&(this._prevType&&kl[this._prevType]||this._stacks.push([]),this._prevType=y,this._stacks[this._stacks.length-1].push(c.id),!I))return!0;if(kl[this._prevType]||kl[y]&&I){this._prevType=y;const D=this._stacks.length-1,U=this._stacks[D]||[];for(const q of this._renderableTiles){if(this.pool.isFull()&&(Pl(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(q),q.rtt[D]){const te=this.pool.getObjectForId(q.rtt[D].id);if(te.stamp===q.rtt[D].stamp){this.pool.useObject(te);continue}}const K=this.pool.getOrCreateFreeObject();this.pool.useObject(K),this.pool.stampObject(K),q.rtt[D]={id:K.id,stamp:K.stamp},T.context.bindFramebuffer.set(K.fbo.framebuffer),T.context.clear({color:a.aM.transparent,stencil:0}),T.currentStencilSource=void 0;for(let te=0;te<U.length;te++){const ce=T.style._layers[U[te]],ae=ce.source?this._coordsDescendingInv[ce.source][q.tileID.key]:[q.tileID];T.context.viewport.set([0,0,K.fbo.width,K.fbo.height]),T._renderTileClippingMasks(ce,ae),T.renderLayer(T,T.style.sourceCaches[ce.source],ce,ae),ce.source&&(q.rttCoords[ce.source]=this._coordsDescendingInvStr[ce.source][q.tileID.key])}}return Pl(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),kl[y]}return!1}}const sf={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},ag=l,lg={hash:!1,interactive:!0,bearingSnap:7,attributionControl:rf,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},af=L=>{L.touchstart=L.dragStart,L.touchmoveWindow=L.dragMove,L.touchend=L.dragEnd},ms={showCompass:!0,showZoom:!0,visualizePitch:!1};class M_{constructor(c,y,T=!1){this.mousedown=U=>{this.startMouse(a.e({},U,{ctrlKey:!0,preventDefault:()=>U.preventDefault()}),g.mousePos(this.element,U)),g.addEventListener(window,"mousemove",this.mousemove),g.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=U=>{this.moveMouse(U,g.mousePos(this.element,U))},this.mouseup=U=>{this.mouseRotate.dragEnd(U),this.mousePitch&&this.mousePitch.dragEnd(U),this.offTemp()},this.touchstart=U=>{U.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=g.touchPos(this.element,U.targetTouches)[0],this.startTouch(U,this._startPos),g.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.addEventListener(window,"touchend",this.touchend))},this.touchmove=U=>{U.targetTouches.length!==1?this.reset():(this._lastPos=g.touchPos(this.element,U.targetTouches)[0],this.moveTouch(U,this._lastPos))},this.touchend=U=>{U.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const I=c.dragRotate._mouseRotate.getClickTolerance(),D=c.dragRotate._mousePitch.getClickTolerance();this.element=y,this.mouseRotate=zc({clickTolerance:I,enable:!0}),this.touchRotate=(({enable:U,clickTolerance:q,bearingDegreesPerPixelMoved:K=.8})=>{const te=new vp;return new Ga({clickTolerance:q,move:(ce,ae)=>({bearingDelta:(ae.x-ce.x)*K}),moveStateManager:te,enable:U,assignEvents:af})})({clickTolerance:I,enable:!0}),this.map=c,T&&(this.mousePitch=ac({clickTolerance:D,enable:!0}),this.touchPitch=(({enable:U,clickTolerance:q,pitchDegreesPerPixelMoved:K=-.5})=>{const te=new vp;return new Ga({clickTolerance:q,move:(ce,ae)=>({pitchDelta:(ae.y-ce.y)*K}),moveStateManager:te,enable:U,assignEvents:af})})({clickTolerance:D,enable:!0})),g.addEventListener(y,"mousedown",this.mousedown),g.addEventListener(y,"touchstart",this.touchstart,{passive:!1}),g.addEventListener(y,"touchcancel",this.reset)}startMouse(c,y){this.mouseRotate.dragStart(c,y),this.mousePitch&&this.mousePitch.dragStart(c,y),g.disableDrag()}startTouch(c,y){this.touchRotate.dragStart(c,y),this.touchPitch&&this.touchPitch.dragStart(c,y),g.disableDrag()}moveMouse(c,y){const T=this.map,{bearingDelta:I}=this.mouseRotate.dragMove(c,y)||{};if(I&&T.setBearing(T.getBearing()+I),this.mousePitch){const{pitchDelta:D}=this.mousePitch.dragMove(c,y)||{};D&&T.setPitch(T.getPitch()+D)}}moveTouch(c,y){const T=this.map,{bearingDelta:I}=this.touchRotate.dragMove(c,y)||{};if(I&&T.setBearing(T.getBearing()+I),this.touchPitch){const{pitchDelta:D}=this.touchPitch.dragMove(c,y)||{};D&&T.setPitch(T.getPitch()+D)}}off(){const c=this.element;g.removeEventListener(c,"mousedown",this.mousedown),g.removeEventListener(c,"touchstart",this.touchstart,{passive:!1}),g.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.removeEventListener(window,"touchend",this.touchend),g.removeEventListener(c,"touchcancel",this.reset),this.offTemp()}offTemp(){g.enableDrag(),g.removeEventListener(window,"mousemove",this.mousemove),g.removeEventListener(window,"mouseup",this.mouseup),g.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.removeEventListener(window,"touchend",this.touchend)}}let Bc;function Ls(L,c,y){const T=new a.N(L.lng,L.lat);if(L=new a.N(L.lng,L.lat),c){const I=new a.N(L.lng-360,L.lat),D=new a.N(L.lng+360,L.lat),U=y.locationPoint(L).distSqr(c);y.locationPoint(I).distSqr(c)<U?L=I:y.locationPoint(D).distSqr(c)<U&&(L=D)}for(;Math.abs(L.lng-y.center.lng)>180;){const I=y.locationPoint(L);if(I.x>=0&&I.y>=0&&I.x<=y.width&&I.y<=y.height)break;L.lng>y.center.lng?L.lng-=360:L.lng+=360}return L.lng!==T.lng&&y.locationPoint(L).y>y.height/2-y.getHorizon()?L:T}const ns={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function cg(L,c,y){const T=L.classList;for(const I in ns)T.remove(`maplibregl-${y}-anchor-${I}`);T.add(`maplibregl-${y}-anchor-${c}`)}class ug extends a.E{constructor(c){if(super(),this._onKeyPress=y=>{const T=y.code,I=y.charCode||y.keyCode;T!=="Space"&&T!=="Enter"&&I!==32&&I!==13||this.togglePopup()},this._onMapClick=y=>{const T=y.originalEvent.target,I=this._element;this._popup&&(T===I||I.contains(T))&&this.togglePopup()},this._update=y=>{var T;if(!this._map)return;const I=this._map.loaded()&&!this._map.isMoving();((y==null?void 0:y.type)==="terrain"||(y==null?void 0:y.type)==="render"&&!I)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Ls(this._lngLat,this._flatPos,this._map.transform):(T=this._lngLat)===null||T===void 0?void 0:T.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let D="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?D=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(D=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let U="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?U="rotateX(0deg)":this._pitchAlignment==="map"&&(U=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||y&&y.type!=="moveend"||(this._pos=this._pos.round()),g.setTransform(this._element,`${ns[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${U} ${D}`),p.frameAsync(new AbortController).then(()=>{this._updateOpacity(y&&y.type==="moveend")}).catch(()=>{})},this._onMove=y=>{if(!this._isDragging){const T=this._clickTolerance||this._map._clickTolerance;this._isDragging=y.point.dist(this._pointerdownPos)>=T}this._isDragging&&(this._pos=y.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.k("dragstart"))),this.fire(new a.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.k("dragend")),this._state="inactive"},this._addDragHandler=y=>{this._element.contains(y.originalEvent.target)&&(y.preventDefault(),this._positionDelta=y.point.sub(this._pos).add(this._offset),this._pointerdownPos=y.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=c&&c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._scale=c&&c.scale||1,this._draggable=c&&c.draggable||!1,this._clickTolerance=c&&c.clickTolerance||0,this._subpixelPositioning=c&&c.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=c&&c.rotation||0,this._rotationAlignment=c&&c.rotationAlignment||"auto",this._pitchAlignment=c&&c.pitchAlignment&&c.pitchAlignment!=="auto"?c.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(c==null?void 0:c.opacity,c==null?void 0:c.opacityWhenCovered),c&&c.element)this._element=c.element,this._offset=a.P.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0,this._element=g.create("div");const y=g.createNS("http://www.w3.org/2000/svg","svg"),T=41,I=27;y.setAttributeNS(null,"display","block"),y.setAttributeNS(null,"height",`${T}px`),y.setAttributeNS(null,"width",`${I}px`),y.setAttributeNS(null,"viewBox",`0 0 ${I} ${T}`);const D=g.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"stroke","none"),D.setAttributeNS(null,"stroke-width","1"),D.setAttributeNS(null,"fill","none"),D.setAttributeNS(null,"fill-rule","evenodd");const U=g.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"fill-rule","nonzero");const q=g.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"transform","translate(3.0, 29.0)"),q.setAttributeNS(null,"fill","#000000");const K=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ge of K){const nt=g.createNS("http://www.w3.org/2000/svg","ellipse");nt.setAttributeNS(null,"opacity","0.04"),nt.setAttributeNS(null,"cx","10.5"),nt.setAttributeNS(null,"cy","5.80029008"),nt.setAttributeNS(null,"rx",Ge.rx),nt.setAttributeNS(null,"ry",Ge.ry),q.appendChild(nt)}const te=g.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"fill",this._color);const ce=g.createNS("http://www.w3.org/2000/svg","path");ce.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),te.appendChild(ce);const ae=g.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"opacity","0.25"),ae.setAttributeNS(null,"fill","#000000");const xe=g.createNS("http://www.w3.org/2000/svg","path");xe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ae.appendChild(xe);const Pe=g.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Pe.setAttributeNS(null,"fill","#FFFFFF");const Ee=g.createNS("http://www.w3.org/2000/svg","g");Ee.setAttributeNS(null,"transform","translate(8.0, 8.0)");const $e=g.createNS("http://www.w3.org/2000/svg","circle");$e.setAttributeNS(null,"fill","#000000"),$e.setAttributeNS(null,"opacity","0.25"),$e.setAttributeNS(null,"cx","5.5"),$e.setAttributeNS(null,"cy","5.5"),$e.setAttributeNS(null,"r","5.4999962");const ze=g.createNS("http://www.w3.org/2000/svg","circle");ze.setAttributeNS(null,"fill","#FFFFFF"),ze.setAttributeNS(null,"cx","5.5"),ze.setAttributeNS(null,"cy","5.5"),ze.setAttributeNS(null,"r","5.4999962"),Ee.appendChild($e),Ee.appendChild(ze),U.appendChild(q),U.appendChild(te),U.appendChild(ae),U.appendChild(Pe),U.appendChild(Ee),y.appendChild(U),y.setAttributeNS(null,"height",T*this._scale+"px"),y.setAttributeNS(null,"width",I*this._scale+"px"),this._element.appendChild(y),this._offset=a.P.convert(c&&c.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",y=>{y.preventDefault()}),this._element.addEventListener("mousedown",y=>{y.preventDefault()}),cg(this._element,this._anchor,"marker"),c&&c.className)for(const y of c.className.split(" "))this._element.classList.add(y);this._popup=null}addTo(c){return this.remove(),this._map=c,this._element.setAttribute("aria-label",c._getUIString("Marker.Title")),c.getCanvasContainer().appendChild(this._element),c.on("move",this._update),c.on("moveend",this._update),c.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),g.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(c){return this._lngLat=a.N.convert(c),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(c){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),c){if(!("offset"in c.options)){const I=Math.abs(13.5)/Math.SQRT2;c.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[I,-1*(38.1-13.5+I)],"bottom-right":[-I,-1*(38.1-13.5+I)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=c,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(c){return this._subpixelPositioning=c,this}getPopup(){return this._popup}togglePopup(){const c=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:c?(c.isOpen()?c.remove():(c.setLngLat(this._lngLat),c.addTo(this._map)),this):this}_updateOpacity(c=!1){var y,T;if(!(!((y=this._map)===null||y===void 0)&&y.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(c)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const I=this._map,D=I.terrain.depthAtPoint(this._pos),U=I.terrain.getElevationForLngLatZoom(this._lngLat,I.transform.tileZoom);if(I.transform.lngLatToCameraDepth(this._lngLat,U)-D<.006)return void(this._element.style.opacity=this._opacity);const q=-this._offset.y/I.transform._pixelPerMeter,K=Math.sin(I.getPitch()*Math.PI/180)*q,te=I.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),ce=I.transform.lngLatToCameraDepth(this._lngLat,U+K)-te>.006;!((T=this._popup)===null||T===void 0)&&T.isOpen()&&ce&&this._popup.remove(),this._element.style.opacity=ce?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(c){return this._offset=a.P.convert(c),this._update(),this}addClassName(c){this._element.classList.add(c)}removeClassName(c){this._element.classList.remove(c)}toggleClassName(c){return this._element.classList.toggle(c)}setDraggable(c){return this._draggable=!!c,this._map&&(c?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(c){return this._rotation=c||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(c){return this._rotationAlignment=c||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(c){return this._pitchAlignment=c&&c!=="auto"?c:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(c,y){return c===void 0&&y===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),c!==void 0&&(this._opacity=c),y!==void 0&&(this._opacityWhenCovered=y),this._map&&this._updateOpacity(!0),this}}const E_={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ol=0,ai=!1;const lf={maxWidth:100,unit:"metric"};function wp(L,c,y){const T=y&&y.maxWidth||100,I=L._container.clientHeight/2,D=L.unproject([0,I]),U=L.unproject([T,I]),q=D.distanceTo(U);if(y&&y.unit==="imperial"){const K=3.2808*q;K>5280?Wu(c,T,K/5280,L._getUIString("ScaleControl.Miles")):Wu(c,T,K,L._getUIString("ScaleControl.Feet"))}else y&&y.unit==="nautical"?Wu(c,T,q/1852,L._getUIString("ScaleControl.NauticalMiles")):q>=1e3?Wu(c,T,q/1e3,L._getUIString("ScaleControl.Kilometers")):Wu(c,T,q,L._getUIString("ScaleControl.Meters"))}function Wu(L,c,y,T){const I=function(D){const U=Math.pow(10,`${Math.floor(D)}`.length-1);let q=D/U;return q=q>=10?10:q>=5?5:q>=3?3:q>=2?2:q>=1?1:function(K){const te=Math.pow(10,Math.ceil(-Math.log(K)/Math.LN10));return Math.round(K*te)/te}(q),U*q}(y);L.style.width=c*(I/y)+"px",L.innerHTML=`${I}&nbsp;${T}`}const gv={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},yv=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Sp(L){if(L){if(typeof L=="number"){const c=Math.round(Math.abs(L)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,L),"top-left":new a.P(c,c),"top-right":new a.P(-c,c),bottom:new a.P(0,-L),"bottom-left":new a.P(c,-c),"bottom-right":new a.P(-c,-c),left:new a.P(L,0),right:new a.P(-L,0)}}if(L instanceof a.P||Array.isArray(L)){const c=a.P.convert(L);return{center:c,top:c,"top-left":c,"top-right":c,bottom:c,"bottom-left":c,"bottom-right":c,left:c,right:c}}return{center:a.P.convert(L.center||[0,0]),top:a.P.convert(L.top||[0,0]),"top-left":a.P.convert(L["top-left"]||[0,0]),"top-right":a.P.convert(L["top-right"]||[0,0]),bottom:a.P.convert(L.bottom||[0,0]),"bottom-left":a.P.convert(L["bottom-left"]||[0,0]),"bottom-right":a.P.convert(L["bottom-right"]||[0,0]),left:a.P.convert(L.left||[0,0]),right:a.P.convert(L.right||[0,0])}}return Sp(new a.P(0,0))}const xa=l;s.AJAXError=a.bg,s.Evented=a.E,s.LngLat=a.N,s.MercatorCoordinate=a.Z,s.Point=a.P,s.addProtocol=a.bh,s.config=a.a,s.removeProtocol=a.bi,s.AttributionControl=Rl,s.BoxZoomHandler=Ks,s.CanvasSource=Bt,s.CooperativeGesturesHandler=lc,s.DoubleClickZoomHandler=nf,s.DragPanHandler=Xa,s.DragRotateHandler=rg,s.EdgeInsets=Ai,s.FullscreenControl=class extends a.E{constructor(L={}){super(),this._onFullscreenChange=()=>{var c;let y=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((c=y==null?void 0:y.shadowRoot)===null||c===void 0)&&c.fullscreenElement;)y=y.shadowRoot.fullscreenElement;y===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,L&&L.container&&(L.container instanceof HTMLElement?this._container=L.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(L){return this._map=L,this._container||(this._container=this._map.getContainer()),this._controlContainer=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){g.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const L=this._fullscreenButton=g.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);g.create("span","maplibregl-ctrl-icon",L).setAttribute("aria-hidden","true"),L.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const L=this._getTitle();this._fullscreenButton.setAttribute("aria-label",L),this._fullscreenButton.title=L}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},s.GeoJSONSource=Ie,s.GeolocateControl=class extends a.E{constructor(L){super(),this._onSuccess=c=>{if(this._map){if(this._isOutOfMapMaxBounds(c))return this._setErrorState(),this.fire(new a.k("outofmaxbounds",c)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=c,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(c),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(c),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.k("geolocate",c)),this._finish()}},this._updateCamera=c=>{const y=new a.N(c.coords.longitude,c.coords.latitude),T=c.coords.accuracy,I=this._map.getBearing(),D=a.e({bearing:I},this.options.fitBoundsOptions),U=ke.fromLngLat(y,T);this._map.fitBounds(U,D,{geolocateSource:!0})},this._updateMarker=c=>{if(c){const y=new a.N(c.coords.longitude,c.coords.latitude);this._accuracyCircleMarker.setLngLat(y).addTo(this._map),this._userLocationDotMarker.setLngLat(y).addTo(this._map),this._accuracy=c.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=c=>{if(this._map){if(this.options.trackUserLocation)if(c.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const y=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=y,this._geolocateButton.setAttribute("aria-label",y),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(c.code===3&&ai)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.k("error",c)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=g.create("button","maplibregl-ctrl-geolocate",this._container),g.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=c=>{if(this._map){if(c===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const y=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=y,this._geolocateButton.setAttribute("aria-label",y)}else{const y=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=y,this._geolocateButton.setAttribute("aria-label",y)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=g.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new ug({element:this._dotElement}),this._circleElement=g.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ug({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",y=>{y.geolocateSource||this._watchState!=="ACTIVE_LOCK"||y.originalEvent&&y.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.k("trackuserlocationend")),this.fire(new a.k("userlocationlostfocus")))})}},this.options=a.e({},E_,L)}onAdd(L){return this._map=L,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return a._(this,arguments,void 0,function*(c=!1){if(Bc!==void 0&&!c)return Bc;if(window.navigator.permissions===void 0)return Bc=!!window.navigator.geolocation,Bc;try{Bc=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Bc=!!window.navigator.geolocation}return Bc})}().then(c=>this._finishSetupUI(c)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),g.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ol=0,ai=!1}_isOutOfMapMaxBounds(L){const c=this._map.getMaxBounds(),y=L.coords;return c&&(y.longitude<c.getWest()||y.longitude>c.getEast()||y.latitude<c.getSouth()||y.latitude>c.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const L=this._map.getBounds(),c=L.getSouthEast(),y=L.getNorthEast(),T=c.distanceTo(y),I=Math.ceil(this._accuracy/(T/this._map._container.clientHeight)*2);this._circleElement.style.width=`${I}px`,this._circleElement.style.height=`${I}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ol--,ai=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.k("trackuserlocationstart")),this.fire(new a.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let L;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ol++,Ol>1?(L={maximumAge:6e5,timeout:0},ai=!0):(L=this.options.positionOptions,ai=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,L)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},s.Hash=$u,s.ImageSource=wt,s.KeyboardHandler=tg,s.LngLatBounds=ke,s.LogoControl=Mn,s.Map=class extends og{constructor(L){a.be.mark(a.bf.create);const c=Object.assign(Object.assign({},lg),L);if(c.minZoom!=null&&c.maxZoom!=null&&c.minZoom>c.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(c.minPitch!=null&&c.maxPitch!=null&&c.minPitch>c.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(c.minPitch!=null&&c.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(c.maxPitch!=null&&c.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Hd(c.minZoom,c.maxZoom,c.minPitch,c.maxPitch,c.renderWorldCopies),{bearingSnap:c.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new pv,this._controls=[],this._mapId=a.a4(),this._contextLost=y=>{y.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.k("webglcontextlost",{originalEvent:y}))},this._contextRestored=y=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.k("webglcontextrestored",{originalEvent:y}))},this._onMapScroll=y=>{if(y.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=c.interactive,this._maxTileCacheSize=c.maxTileCacheSize,this._maxTileCacheZoomLevels=c.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=c.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=c.preserveDrawingBuffer===!0,this._antialias=c.antialias===!0,this._trackResize=c.trackResize===!0,this._bearingSnap=c.bearingSnap,this._refreshExpiredTiles=c.refreshExpiredTiles===!0,this._fadeDuration=c.fadeDuration,this._crossSourceCollisions=c.crossSourceCollisions===!0,this._collectResourceTiming=c.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},sf),c.locale),this._clickTolerance=c.clickTolerance,this._overridePixelRatio=c.pixelRatio,this._maxCanvasSize=c.maxCanvasSize,this.transformCameraUpdate=c.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=c.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=A.addThrottleControl(()=>this.isMoving()),this._requestManager=new P(c.transformRequest),typeof c.container=="string"){if(this._container=document.getElementById(c.container),!this._container)throw new Error(`Container '${c.container}' not found.`)}else{if(!(c.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=c.container}if(c.maxBounds&&this.setMaxBounds(c.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let y=!1;const T=Wd(I=>{this._trackResize&&!this._removed&&this.resize(I)._update()},50);this._resizeObserver=new ResizeObserver(I=>{y?T(I):y=!0}),this._resizeObserver.observe(this._container)}this.handlers=new fv(this,c),this._hash=c.hash&&new $u(typeof c.hash=="string"&&c.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:c.center,zoom:c.zoom,bearing:c.bearing,pitch:c.pitch}),c.bounds&&(this.resize(),this.fitBounds(c.bounds,a.e({},c.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=c.localIdeographFontFamily,this._validateStyle=c.validateStyle,c.style&&this.setStyle(c.style,{localIdeographFontFamily:c.localIdeographFontFamily}),c.attributionControl&&this.addControl(new Rl(typeof c.attributionControl=="boolean"?void 0:c.attributionControl)),c.maplibreLogo&&this.addControl(new Mn,c.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",y=>{this._update(y.dataType==="style"),this.fire(new a.k(`${y.dataType}data`,y))}),this.on("dataloading",y=>{this.fire(new a.k(`${y.dataType}dataloading`,y))}),this.on("dataabort",y=>{this.fire(new a.k("sourcedataabort",y))})}_getMapId(){return this._mapId}addControl(L,c){if(c===void 0&&(c=L.getDefaultPosition?L.getDefaultPosition():"top-right"),!L||!L.onAdd)return this.fire(new a.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const y=L.onAdd(this);this._controls.push(L);const T=this._controlPositions[c];return c.indexOf("bottom")!==-1?T.insertBefore(y,T.firstChild):T.appendChild(y),this}removeControl(L){if(!L||!L.onRemove)return this.fire(new a.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const c=this._controls.indexOf(L);return c>-1&&this._controls.splice(c,1),L.onRemove(this),this}hasControl(L){return this._controls.indexOf(L)>-1}calculateCameraOptionsFromTo(L,c,y,T){return T==null&&this.terrain&&(T=this.terrain.getElevationForLngLatZoom(y,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(L,c,y,T)}resize(L){var c;const y=this._containerDimensions(),T=y[0],I=y[1],D=this._getClampedPixelRatio(T,I);if(this._resizeCanvas(T,I,D),this.painter.resize(T,I,D),this.painter.overLimit()){const q=this.painter.context.gl;this._maxCanvasSize=[q.drawingBufferWidth,q.drawingBufferHeight];const K=this._getClampedPixelRatio(T,I);this._resizeCanvas(T,I,K),this.painter.resize(T,I,K)}this.transform.resize(T,I),(c=this._requestedCameraState)===null||c===void 0||c.resize(T,I);const U=!this._moving;return U&&(this.stop(),this.fire(new a.k("movestart",L)).fire(new a.k("move",L))),this.fire(new a.k("resize",L)),U&&this.fire(new a.k("moveend",L)),this}_getClampedPixelRatio(L,c){const{0:y,1:T}=this._maxCanvasSize,I=this.getPixelRatio(),D=L*I,U=c*I;return Math.min(D>y?y/D:1,U>T?T/U:1)*I}getPixelRatio(){var L;return(L=this._overridePixelRatio)!==null&&L!==void 0?L:devicePixelRatio}setPixelRatio(L){this._overridePixelRatio=L,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(L){return this.transform.setMaxBounds(ke.convert(L)),this._update()}setMinZoom(L){if((L=L??-2)>=-2&&L<=this.transform.maxZoom)return this.transform.minZoom=L,this._update(),this.getZoom()<L&&this.setZoom(L),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(L){if((L=L??22)>=this.transform.minZoom)return this.transform.maxZoom=L,this._update(),this.getZoom()>L&&this.setZoom(L),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(L){if((L=L??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(L>=0&&L<=this.transform.maxPitch)return this.transform.minPitch=L,this._update(),this.getPitch()<L&&this.setPitch(L),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(L){if((L=L??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(L>=this.transform.minPitch)return this.transform.maxPitch=L,this._update(),this.getPitch()>L&&this.setPitch(L),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(L){return this.transform.renderWorldCopies=L,this._update()}project(L){return this.transform.locationPoint(a.N.convert(L),this.style&&this.terrain)}unproject(L){return this.transform.pointLocation(a.P.convert(L),this.terrain)}isMoving(){var L;return this._moving||((L=this.handlers)===null||L===void 0?void 0:L.isMoving())}isZooming(){var L;return this._zooming||((L=this.handlers)===null||L===void 0?void 0:L.isZooming())}isRotating(){var L;return this._rotating||((L=this.handlers)===null||L===void 0?void 0:L.isRotating())}_createDelegatedListener(L,c,y){if(L==="mouseenter"||L==="mouseover"){let T=!1;return{layer:c,listener:y,delegates:{mousemove:D=>{const U=this.getLayer(c)?this.queryRenderedFeatures(D.point,{layers:[c]}):[];U.length?T||(T=!0,y.call(this,new va(L,this,D.originalEvent,{features:U}))):T=!1},mouseout:()=>{T=!1}}}}if(L==="mouseleave"||L==="mouseout"){let T=!1;return{layer:c,listener:y,delegates:{mousemove:U=>{(this.getLayer(c)?this.queryRenderedFeatures(U.point,{layers:[c]}):[]).length?T=!0:T&&(T=!1,y.call(this,new va(L,this,U.originalEvent)))},mouseout:U=>{T&&(T=!1,y.call(this,new va(L,this,U.originalEvent)))}}}}{const T=I=>{const D=this.getLayer(c)?this.queryRenderedFeatures(I.point,{layers:[c]}):[];D.length&&(I.features=D,y.call(this,I),delete I.features)};return{layer:c,listener:y,delegates:{[L]:T}}}}on(L,c,y){if(y===void 0)return super.on(L,c);const T=this._createDelegatedListener(L,c,y);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[L]=this._delegatedListeners[L]||[],this._delegatedListeners[L].push(T);for(const I in T.delegates)this.on(I,T.delegates[I]);return this}once(L,c,y){if(y===void 0)return super.once(L,c);const T=this._createDelegatedListener(L,c,y);for(const I in T.delegates)this.once(I,T.delegates[I]);return this}off(L,c,y){return y===void 0?super.off(L,c):(this._delegatedListeners&&this._delegatedListeners[L]&&(T=>{const I=this._delegatedListeners[L];for(let D=0;D<I.length;D++){const U=I[D];if(U.layer===c&&U.listener===y){for(const q in U.delegates)this.off(q,U.delegates[q]);return I.splice(D,1),this}}})(),this)}queryRenderedFeatures(L,c){if(!this.style)return[];let y;const T=L instanceof a.P||Array.isArray(L),I=T?L:[[0,0],[this.transform.width,this.transform.height]];if(c=c||(T?{}:L)||{},I instanceof a.P||typeof I[0]=="number")y=[a.P.convert(I)];else{const D=a.P.convert(I[0]),U=a.P.convert(I[1]);y=[D,new a.P(U.x,D.y),U,new a.P(D.x,U.y),D]}return this.style.queryRenderedFeatures(y,c,this.transform)}querySourceFeatures(L,c){return this.style.querySourceFeatures(L,c)}setStyle(L,c){return(c=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},c)).diff!==!1&&c.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&L?(this._diffStyle(L,c),this):(this._localIdeographFontFamily=c.localIdeographFontFamily,this._updateStyle(L,c))}setTransformRequest(L){return this._requestManager.setTransformRequest(L),this}_getUIString(L){const c=this._locale[L];if(c==null)throw new Error(`Missing UI string '${L}'`);return c}_updateStyle(L,c){if(c.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(L,c));const y=this.style&&c.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!L)),L?(this.style=new ku(this,c||{}),this.style.setEventedParent(this,{style:this.style}),typeof L=="string"?this.style.loadURL(L,c,y):this.style.loadJSON(L,c,y),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ku(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(L,c){if(typeof L=="string"){const y=this._requestManager.transformRequest(L,"Style");a.h(y,new AbortController).then(T=>{this._updateDiff(T.data,c)}).catch(T=>{T&&this.fire(new a.j(T))})}else typeof L=="object"&&this._updateDiff(L,c)}_updateDiff(L,c){try{this.style.setState(L,c)&&this._update(!0)}catch(y){a.w(`Unable to perform style diff: ${y.message||y.error||y}.  Rebuilding the style from scratch.`),this._updateStyle(L,c)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(L,c){return this._lazyInitEmptyStyle(),this.style.addSource(L,c),this._update(!0)}isSourceLoaded(L){const c=this.style&&this.style.sourceCaches[L];if(c!==void 0)return c.loaded();this.fire(new a.j(new Error(`There is no source with ID '${L}'`)))}setTerrain(L){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),L){const c=this.style.sourceCaches[L.source];if(!c)throw new Error(`cannot load terrain, because there exists no source with ID: ${L.source}`);this.terrain===null&&c.reload();for(const y in this.style._layers){const T=this.style._layers[y];T.type==="hillshade"&&T.source===L.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Zs(this.painter,c,L),this.painter.renderToTexture=new wr(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=y=>{y.dataType==="style"?this.terrain.sourceCache.freeRtt():y.dataType==="source"&&y.tile&&(y.sourceId!==L.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(y.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new a.k("terrain",{terrain:L})),this}getTerrain(){var L,c;return(c=(L=this.terrain)===null||L===void 0?void 0:L.options)!==null&&c!==void 0?c:null}areTilesLoaded(){const L=this.style&&this.style.sourceCaches;for(const c in L){const y=L[c]._tiles;for(const T in y){const I=y[T];if(I.state!=="loaded"&&I.state!=="errored")return!1}}return!0}removeSource(L){return this.style.removeSource(L),this._update(!0)}getSource(L){return this.style.getSource(L)}addImage(L,c,y={}){const{pixelRatio:T=1,sdf:I=!1,stretchX:D,stretchY:U,content:q,textFitWidth:K,textFitHeight:te}=y;if(this._lazyInitEmptyStyle(),!(c instanceof HTMLImageElement||a.b(c))){if(c.width===void 0||c.height===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:ce,height:ae,data:xe}=c,Pe=c;return this.style.addImage(L,{data:new a.R({width:ce,height:ae},new Uint8Array(xe)),pixelRatio:T,stretchX:D,stretchY:U,content:q,textFitWidth:K,textFitHeight:te,sdf:I,version:0,userImage:Pe}),Pe.onAdd&&Pe.onAdd(this,L),this}}{const{width:ce,height:ae,data:xe}=p.getImageData(c);this.style.addImage(L,{data:new a.R({width:ce,height:ae},xe),pixelRatio:T,stretchX:D,stretchY:U,content:q,textFitWidth:K,textFitHeight:te,sdf:I,version:0})}}updateImage(L,c){const y=this.style.getImage(L);if(!y)return this.fire(new a.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const T=c instanceof HTMLImageElement||a.b(c)?p.getImageData(c):c,{width:I,height:D,data:U}=T;if(I===void 0||D===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(I!==y.data.width||D!==y.data.height)return this.fire(new a.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const q=!(c instanceof HTMLImageElement||a.b(c));return y.data.replace(U,q),this.style.updateImage(L,y),this}getImage(L){return this.style.getImage(L)}hasImage(L){return L?!!this.style.getImage(L):(this.fire(new a.j(new Error("Missing required image id"))),!1)}removeImage(L){this.style.removeImage(L)}loadImage(L){return A.getImage(this._requestManager.transformRequest(L,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(L,c){return this._lazyInitEmptyStyle(),this.style.addLayer(L,c),this._update(!0)}moveLayer(L,c){return this.style.moveLayer(L,c),this._update(!0)}removeLayer(L){return this.style.removeLayer(L),this._update(!0)}getLayer(L){return this.style.getLayer(L)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(L,c,y){return this.style.setLayerZoomRange(L,c,y),this._update(!0)}setFilter(L,c,y={}){return this.style.setFilter(L,c,y),this._update(!0)}getFilter(L){return this.style.getFilter(L)}setPaintProperty(L,c,y,T={}){return this.style.setPaintProperty(L,c,y,T),this._update(!0)}getPaintProperty(L,c){return this.style.getPaintProperty(L,c)}setLayoutProperty(L,c,y,T={}){return this.style.setLayoutProperty(L,c,y,T),this._update(!0)}getLayoutProperty(L,c){return this.style.getLayoutProperty(L,c)}setGlyphs(L,c={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(L,c),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(L,c,y={}){return this._lazyInitEmptyStyle(),this.style.addSprite(L,c,y,T=>{T||this._update(!0)}),this}removeSprite(L){return this._lazyInitEmptyStyle(),this.style.removeSprite(L),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(L,c={}){return this._lazyInitEmptyStyle(),this.style.setSprite(L,c,y=>{y||this._update(!0)}),this}setLight(L,c={}){return this._lazyInitEmptyStyle(),this.style.setLight(L,c),this._update(!0)}getLight(){return this.style.getLight()}setSky(L){return this._lazyInitEmptyStyle(),this.style.setSky(L),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(L,c){return this.style.setFeatureState(L,c),this._update()}removeFeatureState(L,c){return this.style.removeFeatureState(L,c),this._update()}getFeatureState(L){return this.style.getFeatureState(L)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let L=0,c=0;return this._container&&(L=this._container.clientWidth||400,c=this._container.clientHeight||300),[L,c]}_setupContainer(){const L=this._container;L.classList.add("maplibregl-map");const c=this._canvasContainer=g.create("div","maplibregl-canvas-container",L);this._interactive&&c.classList.add("maplibregl-interactive"),this._canvas=g.create("canvas","maplibregl-canvas",c),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const y=this._containerDimensions(),T=this._getClampedPixelRatio(y[0],y[1]);this._resizeCanvas(y[0],y[1],T);const I=this._controlContainer=g.create("div","maplibregl-control-container",L),D=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(U=>{D[U]=g.create("div",`maplibregl-ctrl-${U} `,I)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(L,c,y){this._canvas.width=Math.floor(y*L),this._canvas.height=Math.floor(y*c),this._canvas.style.width=`${L}px`,this._canvas.style.height=`${c}px`}_setupPainter(){const L={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let c=null;this._canvas.addEventListener("webglcontextcreationerror",T=>{c={requestedAttributes:L},T&&(c.statusMessage=T.statusMessage,c.type=T.type)},{once:!0});const y=this._canvas.getContext("webgl2",L)||this._canvas.getContext("webgl",L);if(!y){const T="Failed to initialize WebGL";throw c?(c.message=T,new Error(JSON.stringify(c))):new Error(T)}this.painter=new oc(y,this.transform),v.testSupport(y)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(L){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||L,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(L){return this._update(),this._renderTaskQueue.add(L)}_cancelRenderFrame(L){this._renderTaskQueue.remove(L)}_render(L){const c=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(L),this._removed)return;let y=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const I=this.transform.zoom,D=p.now();this.style.zoomHistory.update(I,D);const U=new a.z(I,{now:D,fadeDuration:c,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),q=U.crossFadingFactor();q===1&&q===this._crossFadingFactor||(y=!0,this._crossFadingFactor=q),this.style.update(U)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,c,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:c,showPadding:this.showPadding}),this.fire(new a.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.be.mark(a.bf.load),this.fire(new a.k("load"))),this.style&&(this.style.hasTransitions()||y)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const T=this._sourcesDirty||this._styleDirty||this._placementDirty;return T||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.k("idle")),!this._loaded||this._fullyLoaded||T||(this._fullyLoaded=!0,a.be.mark(a.bf.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var L;this._hash&&this._hash.remove();for(const y of this._controls)y.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),A.removeThrottleControl(this._imageQueueHandle),(L=this._resizeObserver)===null||L===void 0||L.disconnect();const c=this.painter.context.gl.getExtension("WEBGL_lose_context");c!=null&&c.loseContext&&c.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),g.remove(this._canvasContainer),g.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),a.be.clearMetrics(),this._removed=!0,this.fire(new a.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,p.frameAsync(this._frameRequest).then(L=>{a.be.frame(L),this._frameRequest=null,this._render(L)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(L){this._showTileBoundaries!==L&&(this._showTileBoundaries=L,this._update())}get showPadding(){return!!this._showPadding}set showPadding(L){this._showPadding!==L&&(this._showPadding=L,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(L){this._showCollisionBoxes!==L&&(this._showCollisionBoxes=L,L?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(L){this._showOverdrawInspector!==L&&(this._showOverdrawInspector=L,this._update())}get repaint(){return!!this._repaint}set repaint(L){this._repaint!==L&&(this._repaint=L,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(L){this._vertices=L,this._update()}get version(){return ag}getCameraTargetElevation(){return this.transform.elevation}},s.MapMouseEvent=va,s.MapTouchEvent=lo,s.MapWheelEvent=Gd,s.Marker=ug,s.NavigationControl=class{constructor(L){this._updateZoomButtons=()=>{const c=this._map.getZoom(),y=c===this._map.getMaxZoom(),T=c===this._map.getMinZoom();this._zoomInButton.disabled=y,this._zoomOutButton.disabled=T,this._zoomInButton.setAttribute("aria-disabled",y.toString()),this._zoomOutButton.setAttribute("aria-disabled",T.toString())},this._rotateCompassArrow=()=>{const c=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=c},this._setButtonTitle=(c,y)=>{const T=this._map._getUIString(`NavigationControl.${y}`);c.title=T,c.setAttribute("aria-label",T)},this.options=a.e({},ms,L),this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",c=>c.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",c=>this._map.zoomIn({},{originalEvent:c})),g.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",c=>this._map.zoomOut({},{originalEvent:c})),g.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",c=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:c}):this._map.resetNorth({},{originalEvent:c})}),this._compassIcon=g.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(L){return this._map=L,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new M_(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){g.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(L,c){const y=g.create("button",L,this._container);return y.type="button",y.addEventListener("click",c),y}},s.Popup=class extends a.E{constructor(L){super(),this.remove=()=>(this._content&&g.remove(this._content),this._container&&(g.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.k("close"))),this),this._onMouseUp=c=>{this._update(c.point)},this._onMouseMove=c=>{this._update(c.point)},this._onDrag=c=>{this._update(c.point)},this._update=c=>{var y;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=g.create("div","maplibregl-popup",this._map.getContainer()),this._tip=g.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const q of this.options.className.split(" "))this._container.classList.add(q);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Ls(this._lngLat,this._flatPos,this._map.transform):(y=this._lngLat)===null||y===void 0?void 0:y.wrap(),this._trackPointer&&!c)return;const T=this._flatPos=this._pos=this._trackPointer&&c?c:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&c?c:this._map.transform.locationPoint(this._lngLat));let I=this.options.anchor;const D=Sp(this.options.offset);if(!I){const q=this._container.offsetWidth,K=this._container.offsetHeight;let te;te=T.y+D.bottom.y<K?["top"]:T.y>this._map.transform.height-K?["bottom"]:[],T.x<q/2?te.push("left"):T.x>this._map.transform.width-q/2&&te.push("right"),I=te.length===0?"bottom":te.join("-")}let U=T.add(D[I]);this.options.subpixelPositioning||(U=U.round()),g.setTransform(this._container,`${ns[I]} translate(${U.x}px,${U.y}px)`),cg(this._container,I,"popup")},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(gv),L)}addTo(L){return this._map&&this.remove(),this._map=L,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(L){return this._lngLat=a.N.convert(L),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(L){return this.setDOMContent(document.createTextNode(L))}setHTML(L){const c=document.createDocumentFragment(),y=document.createElement("body");let T;for(y.innerHTML=L;T=y.firstChild,T;)c.appendChild(T);return this.setDOMContent(c)}getMaxWidth(){var L;return(L=this._container)===null||L===void 0?void 0:L.style.maxWidth}setMaxWidth(L){return this.options.maxWidth=L,this._update(),this}setDOMContent(L){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=g.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(L),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(L){return this._container&&this._container.classList.add(L),this}removeClassName(L){return this._container&&this._container.classList.remove(L),this}setOffset(L){return this.options.offset=L,this._update(),this}toggleClassName(L){if(this._container)return this._container.classList.toggle(L)}setSubpixelPositioning(L){this.options.subpixelPositioning=L}_createCloseButton(){this.options.closeButton&&(this._closeButton=g.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const L=this._container.querySelector(yv);L&&L.focus()}},s.RasterDEMTileSource=Qt,s.RasterTileSource=$t,s.ScaleControl=class{constructor(L){this._onMove=()=>{wp(this._map,this._container,this.options)},this.setUnit=c=>{this.options.unit=c,wp(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},lf),L)}getDefaultPosition(){return"bottom-left"}onAdd(L){return this._map=L,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-scale",L.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){g.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},s.ScrollZoomHandler=ng,s.Style=ku,s.TerrainControl=class{constructor(L){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=L}onAdd(L){return this._map=L,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=g.create("button","maplibregl-ctrl-terrain",this._container),g.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){g.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},s.TwoFingersTouchPitchHandler=Qm,s.TwoFingersTouchRotateHandler=Fc,s.TwoFingersTouchZoomHandler=Yd,s.TwoFingersTouchZoomRotateHandler=Ya,s.VectorTileSource=zt,s.VideoSource=St,s.addSourceType=(L,c)=>a._(void 0,void 0,void 0,function*(){if(Rn(L))throw new Error(`A source type called "${L}" already exists.`);((y,T)=>{jt[y]=T})(L,c)}),s.clearPrewarmedResources=function(){const L=It;L&&(L.isPreloaded()&&L.numActive()===1?(L.release(Be),It=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},s.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},s.getRTLTextPluginStatus=function(){return Tn().getRTLTextPluginStatus()},s.getVersion=function(){return xa},s.getWorkerCount=function(){return ot.workerCount},s.getWorkerUrl=function(){return a.a.WORKER_URL},s.importScriptInWorkers=function(L){return Qe().broadcast("IS",L)},s.prewarm=function(){lt().acquire(Be)},s.setMaxParallelImageRequests=function(L){a.a.MAX_PARALLEL_IMAGE_REQUESTS=L},s.setRTLTextPlugin=function(L,c){return Tn().setRTLTextPlugin(L,c)},s.setWorkerCount=function(L){ot.workerCount=L},s.setWorkerUrl=function(L){a.a.WORKER_URL=L}});var o=n;return o})})(vie);var fLe=vie.exports;const ka=Mi(fLe);class pLe{constructor(e,n,r){this.onBeforeSwitch=e,this.onSwitch=n,this.onAfterSwitch=r,this.onDocumentClick=this.onDocumentClick.bind(this),this.styles=[],this.currentStyle=null}getDefaultPosition(){return"top-right"}updateStyles(e,n){this.styles=e;let r=null;for(const o of this.styles)if(o.id===(this.currentStyle||n)){r=o.id;break}for(r||(r=this.styles[0].id);this.mapStyleContainer.firstChild;)this.mapStyleContainer.removeChild(this.mapStyleContainer.firstChild);let i;for(const o of this.styles){const s=document.createElement("button");s.type="button",s.innerText=o.title,s.dataset.id=o.id,s.dataset.style=JSON.stringify(o.style),s.addEventListener("click",a=>{const{target:l}=a;l.classList.contains("active")||this.onSelectStyle(l)}),o.id===r&&(i=s,s.classList.add("active")),this.mapStyleContainer.appendChild(s)}this.currentStyle!==r&&(this.onSelectStyle(i),this.currentStyle=r)}onSelectStyle(e){this.onBeforeSwitch();const n=this.styles.find(i=>i.id===e.dataset.id);this.map.setStyle(n.style,{diff:!1}),this.map.setTransformRequest(n.transformRequest),this.onSwitch(e.dataset.id),this.mapStyleContainer.style.display="none",this.styleButton.style.display="block";const r=this.mapStyleContainer.getElementsByClassName("active");for(;r[0];)r[0].classList.remove("active");e.classList.add("active"),this.currentStyle=e.dataset.id,this.onAfterSwitch()}onAdd(e){return this.map=e,this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("maplibregl-ctrl"),this.controlContainer.classList.add("maplibregl-ctrl-group"),this.mapStyleContainer=document.createElement("div"),this.styleButton=document.createElement("button"),this.styleButton.type="button",this.mapStyleContainer.classList.add("maplibregl-style-list"),this.styleButton.classList.add("maplibregl-ctrl-icon"),this.styleButton.classList.add("maplibregl-style-switcher"),this.styleButton.addEventListener("click",()=>{this.styleButton.style.display="none",this.mapStyleContainer.style.display="block"}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.styleButton),this.controlContainer.appendChild(this.mapStyleContainer),this.controlContainer}onRemove(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.styleButton||(this.styleButton.removeEventListener("click",this.onDocumentClick),this.controlContainer.parentNode.removeChild(this.controlContainer),document.removeEventListener("click",this.onDocumentClick),this.map=void 0)}onDocumentClick(e){this.controlContainer&&!this.controlContainer.contains(e.target)&&this.mapStyleContainer&&this.styleButton&&(this.mapStyleContainer.style.display="none",this.styleButton.style.display="block")}}const iy=(t,e)=>t.hasOwnProperty(e)&&t[e]!==null,zf=(t,e)=>nr(n=>n.session.server.forceSettings?iy(n.session.server,t)?n.session.server[t]:iy(n.session.user,t)?n.session.user[t]:e:iy(n.session.user,t)?n.session.user[t]:iy(n.session.server,t)?n.session.server[t]:e),mLe=(t,e)=>nr(n=>n.session.server.forceSettings?iy(n.session.server.attributes,t)?n.session.server.attributes[t]:iy(n.session.user.attributes,t)?n.session.user.attributes[t]:e:iy(n.session.user.attributes,t)?n.session.user.attributes[t]:iy(n.session.server.attributes,t)?n.session.server.attributes[t]:e),xie=(t,e)=>{window.localStorage.setItem(t,JSON.stringify(e))},sP=(t,e)=>{const[n,r]=V.useState(()=>{const i=window.localStorage.getItem(t);return i?JSON.parse(i):e});return V.useEffect(()=>{n!==e?xie(t,n):window.localStorage.removeItem(t)},[t,n]),[n,r]},il=({tiles:t,minZoom:e,maxZoom:n,attribution:r,glyphs:i})=>{const o={type:"raster",tiles:t,attribution:r,tileSize:256,minzoom:e,maxzoom:n};return Object.keys(o).forEach(s=>o[s]===void 0&&delete o[s]),{version:8,sources:{custom:o},glyphs:i,layers:[{id:"custom",type:"raster",source:"custom"}]}},gLe=()=>{const t="mykey",e="pk.0f147952a41c555a5b70614039fd148b",n="mykey",r="mykey",i="mykey",o="mykey";let s=window.location.origin.slice(0,-5),l=mLe("glyphs",!1)?`${s}:8484/map/fonts/{fontstack}/{range}.pbf`:"https://cdn.traccar.com/map/fonts/{fontstack}/{range}.pbf";const d=`${window.location.hostname}`;return[{id:"osm",title:"mapOsm",style:il({tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],maxZoom:19,attribution:'© <a target="_top" rel="noopener" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',glyphs:l}),available:!0},{id:"locationIqStreets",title:"mapLocationIqStreets",style:`https://tiles.locationiq.com/v3/streets/vector.json?key=${e}`,available:!0},{id:"locationIqDark",title:"mapLocationIqDark",style:`https://tiles.locationiq.com/v3/dark/vector.json?key=${e}`,available:!0},{id:"openTopoMap",title:"mapOpenTopoMap",style:il({tiles:["a","b","c"].map(h=>`https://${h}.tile.opentopomap.org/{z}/{x}/{y}.png`),maxZoom:17,glyphs:l}),available:!0},{id:"carto",title:"mapCarto",style:il({tiles:["a","b","c","d"].map(h=>`https://${h}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}@2x.png`),maxZoom:22,attribution:'© <a target="_top" rel="noopener" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, © <a target="_top" rel="noopener" href="https://carto.com/attribution">CARTO</a>',glyphs:l}),available:!0},{id:"googleRoad",title:"mapGoogleRoad",style:il({tiles:[0,1,2,3].map(h=>`https://mt${h}.google.com/vt/lyrs=m&hl=en&x={x}&y={y}&z={z}&s=Ga`),maxZoom:20,attribution:"© Google",glyphs:l}),available:!0},{id:"googleSatellite",title:"mapGoogleSatellite",style:il({tiles:[0,1,2,3].map(h=>`https://mt${h}.google.com/vt/lyrs=s&hl=en&x={x}&y={y}&z={z}&s=Ga`),maxZoom:20,attribution:"© Google",glyphs:l}),available:!0},{id:"googleHybrid",title:"mapGoogleHybrid",style:il({tiles:[0,1,2,3].map(h=>`https://mt${h}.google.com/vt/lyrs=y&hl=en&x={x}&y={y}&z={z}&s=Ga`),maxZoom:20,attribution:"© Google",glyphs:l}),available:!0},{id:"mapTilerBasic",title:"mapMapTilerBasic",style:`https://api.maptiler.com/maps/basic/style.json?key=${t}`,available:!!t,attribute:"mapTilerKey"},{id:"mapTilerHybrid",title:"mapMapTilerHybrid",style:`https://api.maptiler.com/maps/hybrid/style.json?key=${t}`,available:!!t,attribute:"mapTilerKey"},{id:"bingRoad",title:"mapBingRoad",style:il({tiles:[0,1,2,3].map(h=>`https://t${h}.ssl.ak.dynamic.tiles.virtualearth.net/comp/ch/{quadkey}?mkt=en-US&it=G,L&shading=hill&og=1885&n=z`),maxZoom:21,glyphs:l}),available:!!n,attribute:"bingMapsKey"},{id:"bingAerial",title:"mapBingAerial",style:il({tiles:[0,1,2,3].map(h=>`https://ecn.t${h}.tiles.virtualearth.net/tiles/a{quadkey}.jpeg?g=12327`),maxZoom:19,glyphs:l}),available:!!n,attribute:"bingMapsKey"},{id:"bingHybrid",title:"mapBingHybrid",style:il({tiles:[0,1,2,3].map(h=>`https://t${h}.ssl.ak.dynamic.tiles.virtualearth.net/comp/ch/{quadkey}?mkt=en-US&it=A,G,L&og=1885&n=z`),maxZoom:19,glyphs:l}),available:!!n,attribute:"bingMapsKey"},{id:"tomTomBasic",title:"mapTomTomBasic",style:`https://api.tomtom.com/map/1/style/20.0.0-8/basic_main.json?key=${r}`,available:!!r,attribute:"tomTomKey"},{id:"hereBasic",title:"mapHereBasic",style:`https://assets.vector.hereapi.com/styles/berlin/base/mapbox/tilezen?apikey=${i}`,available:!!i,attribute:"hereKey"},{id:"hereHybrid",title:"mapHereHybrid",style:il({tiles:[1,2,3,4].map(h=>`https://${h}.aerial.maps.ls.hereapi.com/maptile/2.1/maptile/newest/hybrid.day/{z}/{x}/{y}/256/png8?apiKey=${i}`),maxZoom:20,glyphs:l}),available:!!i,attribute:"hereKey"},{id:"hereSatellite",title:"mapHereSatellite",style:il({tiles:[1,2,3,4].map(h=>`https://${h}.aerial.maps.ls.hereapi.com/maptile/2.1/maptile/newest/satellite.day/{z}/{x}/{y}/256/png8?apiKey=${i}`),maxZoom:19,glyphs:l}),available:!!i,attribute:"hereKey"},{id:"autoNavi",title:"mapAutoNavi",style:il({tiles:[1,2,3,4].map(h=>`https://webrd0${h}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}`),minZoom:3,maxZoom:18,glyphs:l}),available:!0},{id:"ordnanceSurvey",title:"mapOrdnanceSurvey",style:"https://api.os.uk/maps/vector/v1/vts/resources/styles?key=EAZ8p83u72FTGiLjLC2MsTAl1ko6XQHC",transformRequest:h=>({url:`${h}&srs=3857`}),available:!0},{id:"mapboxStreets",title:"mapMapboxStreets",style:il({tiles:[`https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/{z}/{x}/{y}?access_token=${o}`],maxZoom:22,glyphs:l}),available:!!o,attribute:"mapboxAccessToken"},{id:"mapboxOutdoors",title:"mapMapboxOutdoors",style:il({tiles:[`https://api.mapbox.com/styles/v1/mapbox/outdoors-v11/tiles/{z}/{x}/{y}?access_token=${o}`],maxZoom:22,glyphs:l}),available:!!o,attribute:"mapboxAccessToken"},{id:"mapboxSatelliteStreet",title:"mapMapboxSatellite",style:il({tiles:[`https://api.mapbox.com/styles/v1/mapbox/satellite-streets-v11/tiles/{z}/{x}/{y}?access_token=${o}`],maxZoom:22,glyphs:l}),available:!!o,attribute:"mapboxAccessToken"},{id:"custom",title:"mapCustom",style:il({tiles:[`http://${d}:8080/tile/{z}/{x}/{y}.png`],maxZoom:19,glyphs:l}),available:!0}]},e1=document.createElement("div");e1.style.width="100%";e1.style.height="100%";e1.style.boxSizing="initial";const it=new ka.Map({container:e1,attributionControl:!1,zoom:14});let N$=!1;const z$=new Set,yLe=t=>{z$.add(t),t(N$)},vLe=t=>{z$.delete(t)},bie=t=>{N$=t,z$.forEach(e=>e(t))},_Le=async()=>{N$||(it.hasImage("background")||Object.entries(Kc).forEach(([t,e])=>{it.addImage(t,e,{pixelRatio:window.devicePixelRatio})}),bie(!0))};it.addControl(new ka.NavigationControl);const wie=new pLe(()=>bie(!1),t=>xie("selectedMapStyle",t),()=>{it.once("styledata",()=>{const t=()=>{it.loaded()?_Le():setTimeout(t,33)};t()})});it.addControl(wie);const Wk=({children:t})=>{const e=V.useRef(null),[n,r]=V.useState(!1),i=gLe(),o="osm,locationIqStreets,carto,custom",[s]=sP("selectedMapStyle",zf("map","osm")),a="my tocken",l=21;return V.useEffect(()=>{it.setMaxZoom(l)},[l]),V.useEffect(()=>{ka.accessToken=a},[a]),V.useEffect(()=>{const d=i.filter(p=>p.available&&o.includes(p.id)),h=d.length?d:i.filter(p=>p.id==="osm");wie.updateStyles(h,s)},[i,s]),V.useEffect(()=>{const d=h=>r(h);return yLe(d),()=>{vLe(d)}},[]),V.useLayoutEffect(()=>{const d=e.current;return d.appendChild(e1),it.resize(),()=>{d.removeChild(e1)}},[e]),z.jsx("div",{style:{position:"relative",width:"100%",height:"100%"},ref:e,children:n&&t})},F$=Symbol.for("yaml.alias"),lB=Symbol.for("yaml.document"),_y=Symbol.for("yaml.map"),Sie=Symbol.for("yaml.pair"),bm=Symbol.for("yaml.scalar"),H1=Symbol.for("yaml.seq"),Pd=Symbol.for("yaml.node.type"),l_=t=>!!t&&typeof t=="object"&&t[Pd]===F$,W1=t=>!!t&&typeof t=="object"&&t[Pd]===lB,G1=t=>!!t&&typeof t=="object"&&t[Pd]===_y,Io=t=>!!t&&typeof t=="object"&&t[Pd]===Sie,oo=t=>!!t&&typeof t=="object"&&t[Pd]===bm,q1=t=>!!t&&typeof t=="object"&&t[Pd]===H1;function zo(t){if(t&&typeof t=="object")switch(t[Pd]){case _y:case H1:return!0}return!1}function hs(t){if(t&&typeof t=="object")switch(t[Pd]){case F$:case _y:case bm:case H1:return!0}return!1}const xLe=t=>(oo(t)||zo(t))&&!!t.anchor,_c=Symbol("break visit"),Mie=Symbol("skip children"),Ff=Symbol("remove node");function Ry(t,e){const n=Eie(e);W1(t)?eb(null,t.contents,n,Object.freeze([t]))===Ff&&(t.contents=null):eb(null,t,n,Object.freeze([]))}Ry.BREAK=_c;Ry.SKIP=Mie;Ry.REMOVE=Ff;function eb(t,e,n,r){const i=Tie(t,e,n,r);if(hs(i)||Io(i))return Cie(t,r,i),eb(t,i,n,r);if(typeof i!="symbol"){if(zo(e)){r=Object.freeze(r.concat(e));for(let o=0;o<e.items.length;++o){const s=eb(o,e.items[o],n,r);if(typeof s=="number")o=s-1;else{if(s===_c)return _c;s===Ff&&(e.items.splice(o,1),o-=1)}}}else if(Io(e)){r=Object.freeze(r.concat(e));const o=eb("key",e.key,n,r);if(o===_c)return _c;o===Ff&&(e.key=null);const s=eb("value",e.value,n,r);if(s===_c)return _c;s===Ff&&(e.value=null)}}return i}async function Gk(t,e){const n=Eie(e);W1(t)?await tb(null,t.contents,n,Object.freeze([t]))===Ff&&(t.contents=null):await tb(null,t,n,Object.freeze([]))}Gk.BREAK=_c;Gk.SKIP=Mie;Gk.REMOVE=Ff;async function tb(t,e,n,r){const i=await Tie(t,e,n,r);if(hs(i)||Io(i))return Cie(t,r,i),tb(t,i,n,r);if(typeof i!="symbol"){if(zo(e)){r=Object.freeze(r.concat(e));for(let o=0;o<e.items.length;++o){const s=await tb(o,e.items[o],n,r);if(typeof s=="number")o=s-1;else{if(s===_c)return _c;s===Ff&&(e.items.splice(o,1),o-=1)}}}else if(Io(e)){r=Object.freeze(r.concat(e));const o=await tb("key",e.key,n,r);if(o===_c)return _c;o===Ff&&(e.key=null);const s=await tb("value",e.value,n,r);if(s===_c)return _c;s===Ff&&(e.value=null)}}return i}function Eie(t){return typeof t=="object"&&(t.Collection||t.Node||t.Value)?Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t):t}function Tie(t,e,n,r){var i,o,s,a,l;if(typeof n=="function")return n(t,e,r);if(G1(e))return(i=n.Map)==null?void 0:i.call(n,t,e,r);if(q1(e))return(o=n.Seq)==null?void 0:o.call(n,t,e,r);if(Io(e))return(s=n.Pair)==null?void 0:s.call(n,t,e,r);if(oo(e))return(a=n.Scalar)==null?void 0:a.call(n,t,e,r);if(l_(e))return(l=n.Alias)==null?void 0:l.call(n,t,e,r)}function Cie(t,e,n){const r=e[e.length-1];if(zo(r))r.items[t]=n;else if(Io(r))t==="key"?r.key=n:r.value=n;else if(W1(r))r.contents=n;else{const i=l_(r)?"alias":"scalar";throw new Error(`Cannot replace node with ${i} parent`)}}const bLe={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},wLe=t=>t.replace(/[!,[\]{}]/g,e=>bLe[e]);class Hl{constructor(e,n){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},Hl.defaultYaml,e),this.tags=Object.assign({},Hl.defaultTags,n)}clone(){const e=new Hl(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new Hl(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Hl.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Hl.defaultTags);break}return e}add(e,n){this.atNextDocument&&(this.yaml={explicit:Hl.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Hl.defaultTags),this.atNextDocument=!1);const r=e.trim().split(/[ \t]+/),i=r.shift();switch(i){case"%TAG":{if(r.length!==2&&(n(0,"%TAG directive should contain exactly two parts"),r.length<2))return!1;const[o,s]=r;return this.tags[o]=s,!0}case"%YAML":{if(this.yaml.explicit=!0,r.length!==1)return n(0,"%YAML directive should contain exactly one part"),!1;const[o]=r;if(o==="1.1"||o==="1.2")return this.yaml.version=o,!0;{const s=/^\d+\.\d+$/.test(o);return n(6,`Unsupported YAML version ${o}`,s),!1}}default:return n(0,`Unknown directive ${i}`,!0),!1}}tagName(e,n){if(e==="!")return"!";if(e[0]!=="!")return n(`Not a valid tag: ${e}`),null;if(e[1]==="<"){const s=e.slice(2,-1);return s==="!"||s==="!!"?(n(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&n("Verbatim tags must end with a >"),s)}const[,r,i]=e.match(/^(.*!)([^!]*)$/s);i||n(`The ${e} tag has no suffix`);const o=this.tags[r];if(o)try{return o+decodeURIComponent(i)}catch(s){return n(String(s)),null}return r==="!"?e:(n(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[n,r]of Object.entries(this.tags))if(e.startsWith(r))return n+wLe(e.substring(r.length));return e[0]==="!"?e:`!<${e}>`}toString(e){const n=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],r=Object.entries(this.tags);let i;if(e&&r.length>0&&hs(e.contents)){const o={};Ry(e.contents,(s,a)=>{hs(a)&&a.tag&&(o[a.tag]=!0)}),i=Object.keys(o)}else i=[];for(const[o,s]of r)o==="!!"&&s==="tag:yaml.org,2002:"||(!e||i.some(a=>a.startsWith(s)))&&n.push(`%TAG ${o} ${s}`);return n.join(`
`)}}Hl.defaultYaml={explicit:!1,version:"1.2"};Hl.defaultTags={"!!":"tag:yaml.org,2002:"};function Aie(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){const n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(n)}return!0}function Pie(t){const e=new Set;return Ry(t,{Value(n,r){r.anchor&&e.add(r.anchor)}}),e}function Iie(t,e){for(let n=1;;++n){const r=`${t}${n}`;if(!e.has(r))return r}}function SLe(t,e){const n=[],r=new Map;let i=null;return{onAnchor:o=>{n.push(o),i||(i=Pie(t));const s=Iie(e,i);return i.add(s),s},setAnchors:()=>{for(const o of n){const s=r.get(o);if(typeof s=="object"&&s.anchor&&(oo(s.node)||zo(s.node)))s.node.anchor=s.anchor;else{const a=new Error("Failed to resolve repeated object (this should not happen)");throw a.source=o,a}}},sourceObjects:r}}function nb(t,e,n,r){if(r&&typeof r=="object")if(Array.isArray(r))for(let i=0,o=r.length;i<o;++i){const s=r[i],a=nb(t,r,String(i),s);a===void 0?delete r[i]:a!==s&&(r[i]=a)}else if(r instanceof Map)for(const i of Array.from(r.keys())){const o=r.get(i),s=nb(t,r,i,o);s===void 0?r.delete(i):s!==o&&r.set(i,s)}else if(r instanceof Set)for(const i of Array.from(r)){const o=nb(t,r,i,i);o===void 0?r.delete(i):o!==i&&(r.delete(i),r.add(o))}else for(const[i,o]of Object.entries(r)){const s=nb(t,r,i,o);s===void 0?delete r[i]:s!==o&&(r[i]=s)}return t.call(e,n,r)}function xd(t,e,n){if(Array.isArray(t))return t.map((r,i)=>xd(r,String(i),n));if(t&&typeof t.toJSON=="function"){if(!n||!xLe(t))return t.toJSON(e,n);const r={aliasCount:0,count:1,res:void 0};n.anchors.set(t,r),n.onCreate=o=>{r.res=o,delete n.onCreate};const i=t.toJSON(e,n);return n.onCreate&&n.onCreate(i),i}return typeof t=="bigint"&&!(n!=null&&n.keep)?Number(t):t}class B${constructor(e){Object.defineProperty(this,Pd,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:n,maxAliasCount:r,onAnchor:i,reviver:o}={}){if(!W1(e))throw new TypeError("A document argument is required");const s={anchors:new Map,doc:e,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},a=xd(this,"",s);if(typeof i=="function")for(const{count:l,res:d}of s.anchors.values())i(d,l);return typeof o=="function"?nb(o,{"":a},"",a):a}}class qk extends B${constructor(e){super(F$),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let n;return Ry(e,{Node:(r,i)=>{if(i===this)return Ry.BREAK;i.anchor===this.source&&(n=i)}}),n}toJSON(e,n){if(!n)return{source:this.source};const{anchors:r,doc:i,maxAliasCount:o}=n,s=this.resolve(i);if(!s){const l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(l)}let a=r.get(s);if(a||(xd(s,null,n),a=r.get(s)),!a||a.res===void 0){const l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(o>=0&&(a.count+=1,a.aliasCount===0&&(a.aliasCount=aP(i,s,r)),a.count*a.aliasCount>o)){const l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return a.res}toString(e,n,r){const i=`*${this.source}`;if(e){if(Aie(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const o=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(o)}if(e.implicitKey)return`${i} `}return i}}function aP(t,e,n){if(l_(e)){const r=e.resolve(t),i=n&&r&&n.get(r);return i?i.count*i.aliasCount:0}else if(zo(e)){let r=0;for(const i of e.items){const o=aP(t,i,n);o>r&&(r=o)}return r}else if(Io(e)){const r=aP(t,e.key,n),i=aP(t,e.value,n);return Math.max(r,i)}return 1}const Rie=t=>!t||typeof t!="function"&&typeof t!="object";class kr extends B${constructor(e){super(bm),this.value=e}toJSON(e,n){return n!=null&&n.keep?this.value:xd(this.value,e,n)}toString(){return String(this.value)}}kr.BLOCK_FOLDED="BLOCK_FOLDED";kr.BLOCK_LITERAL="BLOCK_LITERAL";kr.PLAIN="PLAIN";kr.QUOTE_DOUBLE="QUOTE_DOUBLE";kr.QUOTE_SINGLE="QUOTE_SINGLE";const MLe="tag:yaml.org,2002:";function ELe(t,e,n){if(e){const r=n.filter(o=>o.tag===e),i=r.find(o=>!o.format)??r[0];if(!i)throw new Error(`Tag ${e} not found`);return i}return n.find(r=>{var i;return((i=r.identify)==null?void 0:i.call(r,t))&&!r.format})}function dM(t,e,n){var p,g,v;if(W1(t)&&(t=t.contents),hs(t))return t;if(Io(t)){const x=(g=(p=n.schema[_y]).createNode)==null?void 0:g.call(p,n.schema,null,n);return x.items.push(t),x}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt<"u"&&t instanceof BigInt)&&(t=t.valueOf());const{aliasDuplicateObjects:r,onAnchor:i,onTagObj:o,schema:s,sourceObjects:a}=n;let l;if(r&&t&&typeof t=="object"){if(l=a.get(t),l)return l.anchor||(l.anchor=i(t)),new qk(l.anchor);l={anchor:null,node:null},a.set(t,l)}e!=null&&e.startsWith("!!")&&(e=MLe+e.slice(2));let d=ELe(t,e,s.tags);if(!d){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){const x=new kr(t);return l&&(l.node=x),x}d=t instanceof Map?s[_y]:Symbol.iterator in Object(t)?s[H1]:s[_y]}o&&(o(d),delete n.onTagObj);const h=d!=null&&d.createNode?d.createNode(n.schema,t,n):typeof((v=d==null?void 0:d.nodeClass)==null?void 0:v.from)=="function"?d.nodeClass.from(n.schema,t,n):new kr(t);return e?h.tag=e:d.default||(h.tag=d.tag),l&&(l.node=h),h}function pI(t,e,n){let r=n;for(let i=e.length-1;i>=0;--i){const o=e[i];if(typeof o=="number"&&Number.isInteger(o)&&o>=0){const s=[];s[o]=r,r=s}else r=new Map([[o,r]])}return dM(r,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}const JS=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done;class Xk extends B${constructor(e,n){super(e),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(e){const n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(n.schema=e),n.items=n.items.map(r=>hs(r)||Io(r)?r.clone(e):r),this.range&&(n.range=this.range.slice()),n}addIn(e,n){if(JS(e))this.add(n);else{const[r,...i]=e,o=this.get(r,!0);if(zo(o))o.addIn(i,n);else if(o===void 0&&this.schema)this.set(r,pI(this.schema,i,n));else throw new Error(`Expected YAML collection at ${r}. Remaining path: ${i}`)}}deleteIn(e){const[n,...r]=e;if(r.length===0)return this.delete(n);const i=this.get(n,!0);if(zo(i))return i.deleteIn(r);throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`)}getIn(e,n){const[r,...i]=e,o=this.get(r,!0);return i.length===0?!n&&oo(o)?o.value:o:zo(o)?o.getIn(i,n):void 0}hasAllNullValues(e){return this.items.every(n=>{if(!Io(n))return!1;const r=n.value;return r==null||e&&oo(r)&&r.value==null&&!r.commentBefore&&!r.comment&&!r.tag})}hasIn(e){const[n,...r]=e;if(r.length===0)return this.has(n);const i=this.get(n,!0);return zo(i)?i.hasIn(r):!1}setIn(e,n){const[r,...i]=e;if(i.length===0)this.set(r,n);else{const o=this.get(r,!0);if(zo(o))o.setIn(i,n);else if(o===void 0&&this.schema)this.set(r,pI(this.schema,i,n));else throw new Error(`Expected YAML collection at ${r}. Remaining path: ${i}`)}}}Xk.maxFlowStringSingleLineLength=60;const TLe=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function Jp(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}const oy=(t,e,n)=>t.endsWith(`
`)?Jp(n,e):n.includes(`
`)?`
`+Jp(n,e):(t.endsWith(" ")?"":" ")+n,kie="flow",cB="block",lP="quoted";function Yk(t,e,n="flow",{indentAtStart:r,lineWidth:i=80,minContentWidth:o=20,onFold:s,onOverflow:a}={}){if(!i||i<0)return t;const l=Math.max(1+o,1+i-e.length);if(t.length<=l)return t;const d=[],h={};let p=i-e.length;typeof r=="number"&&(r>i-Math.max(2,o)?d.push(0):p=i-r);let g,v,x=!1,b=-1,w=-1,S=-1;n===cB&&(b=x7(t,b),b!==-1&&(p=b+l));for(let A;A=t[b+=1];){if(n===lP&&A==="\\"){switch(w=b,t[b+1]){case"x":b+=3;break;case"u":b+=5;break;case"U":b+=9;break;default:b+=1}S=b}if(A===`
`)n===cB&&(b=x7(t,b)),p=b+l,g=void 0;else{if(A===" "&&v&&v!==" "&&v!==`
`&&v!=="	"){const P=t[b+1];P&&P!==" "&&P!==`
`&&P!=="	"&&(g=b)}if(b>=p)if(g)d.push(g),p=g+l,g=void 0;else if(n===lP){for(;v===" "||v==="	";)v=A,A=t[b+=1],x=!0;const P=b>S+1?b-2:w-1;if(h[P])return t;d.push(P),h[P]=!0,p=P+l,g=void 0}else x=!0}v=A}if(x&&a&&a(),d.length===0)return t;s&&s();let C=t.slice(0,d[0]);for(let A=0;A<d.length;++A){const P=d[A],k=d[A+1]||t.length;P===0?C=`
${e}${t.slice(0,k)}`:(n===lP&&h[P]&&(C+=`${t[P]}\\`),C+=`
${e}${t.slice(P+1,k)}`)}return C}function x7(t,e){let n=t[e+1];for(;n===" "||n==="	";){do n=t[e+=1];while(n&&n!==`
`);n=t[e+1]}return e}const Kk=(t,e)=>({indentAtStart:e?t.indent.length:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),Zk=t=>/^(%|---|\.\.\.)/m.test(t);function CLe(t,e,n){if(!e||e<0)return!1;const r=e-n,i=t.length;if(i<=r)return!1;for(let o=0,s=0;o<i;++o)if(t[o]===`
`){if(o-s>r)return!0;if(s=o+1,i-s<=r)return!1}return!0}function x2(t,e){const n=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return n;const{implicitKey:r}=e,i=e.options.doubleQuotedMinMultiLineLength,o=e.indent||(Zk(t)?"  ":"");let s="",a=0;for(let l=0,d=n[l];d;d=n[++l])if(d===" "&&n[l+1]==="\\"&&n[l+2]==="n"&&(s+=n.slice(a,l)+"\\ ",l+=1,a=l,d="\\"),d==="\\")switch(n[l+1]){case"u":{s+=n.slice(a,l);const h=n.substr(l+2,4);switch(h){case"0000":s+="\\0";break;case"0007":s+="\\a";break;case"000b":s+="\\v";break;case"001b":s+="\\e";break;case"0085":s+="\\N";break;case"00a0":s+="\\_";break;case"2028":s+="\\L";break;case"2029":s+="\\P";break;default:h.substr(0,2)==="00"?s+="\\x"+h.substr(2):s+=n.substr(l,6)}l+=5,a=l+1}break;case"n":if(r||n[l+2]==='"'||n.length<i)l+=1;else{for(s+=n.slice(a,l)+`

`;n[l+2]==="\\"&&n[l+3]==="n"&&n[l+4]!=='"';)s+=`
`,l+=2;s+=o,n[l+2]===" "&&(s+="\\"),l+=1,a=l+1}break;default:l+=1}return s=a?s+n.slice(a):n,r?s:Yk(s,o,lP,Kk(e,!1))}function uB(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return x2(t,e);const n=e.indent||(Zk(t)?"  ":""),r="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return e.implicitKey?r:Yk(r,n,kie,Kk(e,!1))}function rb(t,e){const{singleQuote:n}=e.options;let r;if(n===!1)r=x2;else{const i=t.includes('"'),o=t.includes("'");i&&!o?r=uB:o&&!i?r=x2:r=n?uB:x2}return r(t,e)}let dB;try{dB=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{dB=/\n+(?!\n|$)/g}function cP({comment:t,type:e,value:n},r,i,o){const{blockQuote:s,commentString:a,lineWidth:l}=r.options;if(!s||/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return rb(n,r);const d=r.indent||(r.forceBlockIndent||Zk(n)?"  ":""),h=s==="literal"?!0:s==="folded"||e===kr.BLOCK_FOLDED?!1:e===kr.BLOCK_LITERAL?!0:!CLe(n,l,d.length);if(!n)return h?`|
`:`>
`;let p,g;for(g=n.length;g>0;--g){const F=n[g-1];if(F!==`
`&&F!=="	"&&F!==" ")break}let v=n.substring(g);const x=v.indexOf(`
`);x===-1?p="-":n===v||x!==v.length-1?(p="+",o&&o()):p="",v&&(n=n.slice(0,-v.length),v[v.length-1]===`
`&&(v=v.slice(0,-1)),v=v.replace(dB,`$&${d}`));let b=!1,w,S=-1;for(w=0;w<n.length;++w){const F=n[w];if(F===" ")b=!0;else if(F===`
`)S=w;else break}let C=n.substring(0,S<w?S+1:w);C&&(n=n.substring(C.length),C=C.replace(/\n+/g,`$&${d}`));let P=(h?"|":">")+(b?d?"2":"1":"")+p;if(t&&(P+=" "+a(t.replace(/ ?[\r\n]+/g," ")),i&&i()),h)return n=n.replace(/\n+/g,`$&${d}`),`${P}
${d}${C}${n}${v}`;n=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${d}`);const k=Yk(`${C}${n}${v}`,d,cB,Kk(r,!0));return`${P}
${d}${k}`}function ALe(t,e,n,r){const{type:i,value:o}=t,{actualString:s,implicitKey:a,indent:l,indentStep:d,inFlow:h}=e;if(a&&o.includes(`
`)||h&&/[[\]{},]/.test(o))return rb(o,e);if(!o||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(o))return a||h||!o.includes(`
`)?rb(o,e):cP(t,e,n,r);if(!a&&!h&&i!==kr.PLAIN&&o.includes(`
`))return cP(t,e,n,r);if(Zk(o)){if(l==="")return e.forceBlockIndent=!0,cP(t,e,n,r);if(a&&l===d)return rb(o,e)}const p=o.replace(/\n+/g,`$&
${l}`);if(s){const g=b=>{var w;return b.default&&b.tag!=="tag:yaml.org,2002:str"&&((w=b.test)==null?void 0:w.test(p))},{compat:v,tags:x}=e.doc.schema;if(x.some(g)||v!=null&&v.some(g))return rb(o,e)}return a?p:Yk(p,l,kie,Kk(e,!1))}function $E(t,e,n,r){const{implicitKey:i,inFlow:o}=e,s=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)});let{type:a}=t;a!==kr.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(s.value)&&(a=kr.QUOTE_DOUBLE);const l=h=>{switch(h){case kr.BLOCK_FOLDED:case kr.BLOCK_LITERAL:return i||o?rb(s.value,e):cP(s,e,n,r);case kr.QUOTE_DOUBLE:return x2(s.value,e);case kr.QUOTE_SINGLE:return uB(s.value,e);case kr.PLAIN:return ALe(s,e,n,r);default:return null}};let d=l(a);if(d===null){const{defaultKeyType:h,defaultStringType:p}=e.options,g=i&&h||p;if(d=l(g),d===null)throw new Error(`Unsupported default string type ${g}`)}return d}function Oie(t,e){const n=Object.assign({blockQuote:!0,commentString:TLe,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e);let r;switch(n.collectionStyle){case"block":r=!1;break;case"flow":r=!0;break;default:r=null}return{anchors:new Set,doc:t,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:r,options:n}}function PLe(t,e){var i;if(e.tag){const o=t.filter(s=>s.tag===e.tag);if(o.length>0)return o.find(s=>s.format===e.format)??o[0]}let n,r;if(oo(e)){r=e.value;const o=t.filter(s=>{var a;return(a=s.identify)==null?void 0:a.call(s,r)});n=o.find(s=>s.format===e.format)??o.find(s=>!s.format)}else r=e,n=t.find(o=>o.nodeClass&&r instanceof o.nodeClass);if(!n){const o=((i=r==null?void 0:r.constructor)==null?void 0:i.name)??typeof r;throw new Error(`Tag not resolved for ${o} value`)}return n}function ILe(t,e,{anchors:n,doc:r}){if(!r.directives)return"";const i=[],o=(oo(t)||zo(t))&&t.anchor;o&&Aie(o)&&(n.add(o),i.push(`&${o}`));const s=t.tag?t.tag:e.default?null:e.tag;return s&&i.push(r.directives.tagString(s)),i.join(" ")}function t1(t,e,n,r){var l;if(Io(t))return t.toString(e,n,r);if(l_(t)){if(e.doc.directives)return t.toString(e);if((l=e.resolvedAliases)!=null&&l.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let i;const o=hs(t)?t:e.doc.createNode(t,{onTagObj:d=>i=d});i||(i=PLe(e.doc.schema.tags,o));const s=ILe(o,i,e);s.length>0&&(e.indentAtStart=(e.indentAtStart??0)+s.length+1);const a=typeof i.stringify=="function"?i.stringify(o,e,n,r):oo(o)?$E(o,e,n,r):o.toString(e,n,r);return s?oo(o)||a[0]==="{"||a[0]==="["?`${s} ${a}`:`${s}
${e.indent}${a}`:a}function RLe({key:t,value:e},n,r,i){const{allNullValues:o,doc:s,indent:a,indentStep:l,options:{commentString:d,indentSeq:h,simpleKeys:p}}=n;let g=hs(t)&&t.comment||null;if(p){if(g)throw new Error("With simple keys, key nodes cannot have comments");if(zo(t)){const B="With simple keys, collection cannot be used as a key value";throw new Error(B)}}let v=!p&&(!t||g&&e==null&&!n.inFlow||zo(t)||(oo(t)?t.type===kr.BLOCK_FOLDED||t.type===kr.BLOCK_LITERAL:typeof t=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!v&&(p||!o),indent:a+l});let x=!1,b=!1,w=t1(t,n,()=>x=!0,()=>b=!0);if(!v&&!n.inFlow&&w.length>1024){if(p)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");v=!0}if(n.inFlow){if(o||e==null)return x&&r&&r(),w===""?"?":v?`? ${w}`:w}else if(o&&!p||e==null&&v)return w=`? ${w}`,g&&!x?w+=oy(w,n.indent,d(g)):b&&i&&i(),w;x&&(g=null),v?(g&&(w+=oy(w,n.indent,d(g))),w=`? ${w}
${a}:`):(w=`${w}:`,g&&(w+=oy(w,n.indent,d(g))));let S,C,A;hs(e)?(S=!!e.spaceBefore,C=e.commentBefore,A=e.comment):(S=!1,C=null,A=null,e&&typeof e=="object"&&(e=s.createNode(e))),n.implicitKey=!1,!v&&!g&&oo(e)&&(n.indentAtStart=w.length+1),b=!1,!h&&l.length>=2&&!n.inFlow&&!v&&q1(e)&&!e.flow&&!e.tag&&!e.anchor&&(n.indent=n.indent.substring(2));let P=!1;const k=t1(e,n,()=>P=!0,()=>b=!0);let F=" ";if(g||S||C){if(F=S?`
`:"",C){const B=d(C);F+=`
${Jp(B,n.indent)}`}k===""&&!n.inFlow?F===`
`&&(F=`

`):F+=`
${n.indent}`}else if(!v&&zo(e)){const B=k[0],W=k.indexOf(`
`),J=W!==-1,H=n.inFlow??e.flow??e.items.length===0;if(J||!H){let Y=!1;if(J&&(B==="&"||B==="!")){let le=k.indexOf(" ");B==="&"&&le!==-1&&le<W&&k[le+1]==="!"&&(le=k.indexOf(" ",le+1)),(le===-1||W<le)&&(Y=!0)}Y||(F=`
${n.indent}`)}}else(k===""||k[0]===`
`)&&(F="");return w+=F+k,n.inFlow?P&&r&&r():A&&!P?w+=oy(w,n.indent,d(A)):b&&i&&i(),w}function Lie(t,e){(t==="debug"||t==="warn")&&(typeof process<"u"&&process.emitWarning?process.emitWarning(e):console.warn(e))}const b7="<<";function Die(t,e,{key:n,value:r}){if(t!=null&&t.doc.schema.merge&&kLe(n))if(r=l_(r)?r.resolve(t.doc):r,q1(r))for(const i of r.items)AD(t,e,i);else if(Array.isArray(r))for(const i of r)AD(t,e,i);else AD(t,e,r);else{const i=xd(n,"",t);if(e instanceof Map)e.set(i,xd(r,i,t));else if(e instanceof Set)e.add(i);else{const o=OLe(n,i,t),s=xd(r,o,t);o in e?Object.defineProperty(e,o,{value:s,writable:!0,enumerable:!0,configurable:!0}):e[o]=s}}return e}const kLe=t=>t===b7||oo(t)&&t.value===b7&&(!t.type||t.type===kr.PLAIN);function AD(t,e,n){const r=t&&l_(n)?n.resolve(t.doc):n;if(!G1(r))throw new Error("Merge sources must be maps or map aliases");const i=r.toJSON(null,t,Map);for(const[o,s]of i)e instanceof Map?e.has(o)||e.set(o,s):e instanceof Set?e.add(o):Object.prototype.hasOwnProperty.call(e,o)||Object.defineProperty(e,o,{value:s,writable:!0,enumerable:!0,configurable:!0});return e}function OLe(t,e,n){if(e===null)return"";if(typeof e!="object")return String(e);if(hs(t)&&(n!=null&&n.doc)){const r=Oie(n.doc,{});r.anchors=new Set;for(const o of n.anchors.keys())r.anchors.add(o.anchor);r.inFlow=!0,r.inStringifyKey=!0;const i=t.toString(r);if(!n.mapKeyWarned){let o=JSON.stringify(i);o.length>40&&(o=o.substring(0,36)+'..."'),Lie(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${o}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return i}return JSON.stringify(e)}function j$(t,e,n){const r=dM(t,void 0,n),i=dM(e,void 0,n);return new vl(r,i)}class vl{constructor(e,n=null){Object.defineProperty(this,Pd,{value:Sie}),this.key=e,this.value=n}clone(e){let{key:n,value:r}=this;return hs(n)&&(n=n.clone(e)),hs(r)&&(r=r.clone(e)),new vl(n,r)}toJSON(e,n){const r=n!=null&&n.mapAsMap?new Map:{};return Die(n,r,this)}toString(e,n,r){return e!=null&&e.doc?RLe(this,e,n,r):JSON.stringify(this)}}function Nie(t,e,n){return(e.inFlow??t.flow?DLe:LLe)(t,e,n)}function LLe({comment:t,items:e},n,{blockItemPrefix:r,flowChars:i,itemIndent:o,onChompKeep:s,onComment:a}){const{indent:l,options:{commentString:d}}=n,h=Object.assign({},n,{indent:o,type:null});let p=!1;const g=[];for(let x=0;x<e.length;++x){const b=e[x];let w=null;if(hs(b))!p&&b.spaceBefore&&g.push(""),mI(n,g,b.commentBefore,p),b.comment&&(w=b.comment);else if(Io(b)){const C=hs(b.key)?b.key:null;C&&(!p&&C.spaceBefore&&g.push(""),mI(n,g,C.commentBefore,p))}p=!1;let S=t1(b,h,()=>w=null,()=>p=!0);w&&(S+=oy(S,o,d(w))),p&&w&&(p=!1),g.push(r+S)}let v;if(g.length===0)v=i.start+i.end;else{v=g[0];for(let x=1;x<g.length;++x){const b=g[x];v+=b?`
${l}${b}`:`
`}}return t?(v+=`
`+Jp(d(t),l),a&&a()):p&&s&&s(),v}function DLe({comment:t,items:e},n,{flowChars:r,itemIndent:i,onComment:o}){const{indent:s,indentStep:a,flowCollectionPadding:l,options:{commentString:d}}=n;i+=a;const h=Object.assign({},n,{indent:i,inFlow:!0,type:null});let p=!1,g=0;const v=[];for(let S=0;S<e.length;++S){const C=e[S];let A=null;if(hs(C))C.spaceBefore&&v.push(""),mI(n,v,C.commentBefore,!1),C.comment&&(A=C.comment);else if(Io(C)){const k=hs(C.key)?C.key:null;k&&(k.spaceBefore&&v.push(""),mI(n,v,k.commentBefore,!1),k.comment&&(p=!0));const F=hs(C.value)?C.value:null;F?(F.comment&&(A=F.comment),F.commentBefore&&(p=!0)):C.value==null&&(k!=null&&k.comment)&&(A=k.comment)}A&&(p=!0);let P=t1(C,h,()=>A=null);S<e.length-1&&(P+=","),A&&(P+=oy(P,i,d(A))),!p&&(v.length>g||P.includes(`
`))&&(p=!0),v.push(P),g=v.length}let x;const{start:b,end:w}=r;if(v.length===0)x=b+w;else if(p||(p=v.reduce((C,A)=>C+A.length+2,2)>Xk.maxFlowStringSingleLineLength),p){x=b;for(const S of v)x+=S?`
${a}${s}${S}`:`
`;x+=`
${s}${w}`}else x=`${b}${l}${v.join(" ")}${l}${w}`;return t&&(x+=oy(x,s,d(t)),o&&o()),x}function mI({indent:t,options:{commentString:e}},n,r,i){if(r&&i&&(r=r.replace(/^\n+/,"")),r){const o=Jp(e(r),t);n.push(o.trimStart())}}function s0(t,e){const n=oo(e)?e.value:e;for(const r of t)if(Io(r)&&(r.key===e||r.key===n||oo(r.key)&&r.key.value===n))return r}class au extends Xk{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(_y,e),this.items=[]}static from(e,n,r){const{keepUndefined:i,replacer:o}=r,s=new this(e),a=(l,d)=>{if(typeof o=="function")d=o.call(n,l,d);else if(Array.isArray(o)&&!o.includes(l))return;(d!==void 0||i)&&s.items.push(j$(l,d,r))};if(n instanceof Map)for(const[l,d]of n)a(l,d);else if(n&&typeof n=="object")for(const l of Object.keys(n))a(l,n[l]);return typeof e.sortMapEntries=="function"&&s.items.sort(e.sortMapEntries),s}add(e,n){var s;let r;Io(e)?r=e:!e||typeof e!="object"||!("key"in e)?r=new vl(e,e==null?void 0:e.value):r=new vl(e.key,e.value);const i=s0(this.items,r.key),o=(s=this.schema)==null?void 0:s.sortMapEntries;if(i){if(!n)throw new Error(`Key ${r.key} already set`);oo(i.value)&&Rie(r.value)?i.value.value=r.value:i.value=r.value}else if(o){const a=this.items.findIndex(l=>o(r,l)<0);a===-1?this.items.push(r):this.items.splice(a,0,r)}else this.items.push(r)}delete(e){const n=s0(this.items,e);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(e,n){const r=s0(this.items,e),i=r==null?void 0:r.value;return(!n&&oo(i)?i.value:i)??void 0}has(e){return!!s0(this.items,e)}set(e,n){this.add(new vl(e,n),!0)}toJSON(e,n,r){const i=r?new r:n!=null&&n.mapAsMap?new Map:{};n!=null&&n.onCreate&&n.onCreate(i);for(const o of this.items)Die(n,i,o);return i}toString(e,n,r){if(!e)return JSON.stringify(this);for(const i of this.items)if(!Io(i))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),Nie(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:r,onComment:n})}}const X1={collection:"map",default:!0,nodeClass:au,tag:"tag:yaml.org,2002:map",resolve(t,e){return G1(t)||e("Expected a mapping for this tag"),t},createNode:(t,e,n)=>au.from(t,e,n)};class ky extends Xk{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(H1,e),this.items=[]}add(e){this.items.push(e)}delete(e){const n=EC(e);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(e,n){const r=EC(e);if(typeof r!="number")return;const i=this.items[r];return!n&&oo(i)?i.value:i}has(e){const n=EC(e);return typeof n=="number"&&n<this.items.length}set(e,n){const r=EC(e);if(typeof r!="number")throw new Error(`Expected a valid index, not ${e}.`);const i=this.items[r];oo(i)&&Rie(n)?i.value=n:this.items[r]=n}toJSON(e,n){const r=[];n!=null&&n.onCreate&&n.onCreate(r);let i=0;for(const o of this.items)r.push(xd(o,String(i++),n));return r}toString(e,n,r){return e?Nie(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:r,onComment:n}):JSON.stringify(this)}static from(e,n,r){const{replacer:i}=r,o=new this(e);if(n&&Symbol.iterator in Object(n)){let s=0;for(let a of n){if(typeof i=="function"){const l=n instanceof Set?a:String(s++);a=i.call(n,l,a)}o.items.push(dM(a,void 0,r))}}return o}}function EC(t){let e=oo(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}const Y1={collection:"seq",default:!0,nodeClass:ky,tag:"tag:yaml.org,2002:seq",resolve(t,e){return q1(t)||e("Expected a sequence for this tag"),t},createNode:(t,e,n)=>ky.from(t,e,n)},Jk={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,n,r){return e=Object.assign({actualString:!0},e),$E(t,e,n,r)}},Qk={identify:t=>t==null,createNode:()=>new kr(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new kr(null),stringify:({source:t},e)=>typeof t=="string"&&Qk.test.test(t)?t:e.options.nullStr},$$={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new kr(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},n){if(t&&$$.test.test(t)){const r=t[0]==="t"||t[0]==="T";if(e===r)return t}return e?n.options.trueStr:n.options.falseStr}};function zh({format:t,minFractionDigits:e,tag:n,value:r}){if(typeof r=="bigint")return String(r);const i=typeof r=="number"?r:Number(r);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let o=JSON.stringify(r);if(!t&&e&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(o)){let s=o.indexOf(".");s<0&&(s=o.length,o+=".");let a=e-(o.length-s-1);for(;a-- >0;)o+="0"}return o}const zie={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:zh},Fie={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():zh(t)}},Bie={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){const e=new kr(parseFloat(t)),n=t.indexOf(".");return n!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-n-1),e},stringify:zh},eO=t=>typeof t=="bigint"||Number.isInteger(t),U$=(t,e,n,{intAsBigInt:r})=>r?BigInt(t):parseInt(t.substring(e),n);function jie(t,e,n){const{value:r}=t;return eO(r)&&r>=0?n+r.toString(e):zh(t)}const $ie={identify:t=>eO(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,n)=>U$(t,2,8,n),stringify:t=>jie(t,8,"0o")},Uie={identify:eO,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,n)=>U$(t,0,10,n),stringify:zh},Vie={identify:t=>eO(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,n)=>U$(t,2,16,n),stringify:t=>jie(t,16,"0x")},NLe=[X1,Y1,Jk,Qk,$$,$ie,Uie,Vie,zie,Fie,Bie];function w7(t){return typeof t=="bigint"||Number.isInteger(t)}const TC=({value:t})=>JSON.stringify(t),zLe=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:TC},{identify:t=>t==null,createNode:()=>new kr(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:TC},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:t=>t==="true",stringify:TC},{identify:w7,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:n})=>n?BigInt(t):parseInt(t,10),stringify:({value:t})=>w7(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:TC}],FLe={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},BLe=[X1,Y1].concat(zLe,FLe),V$={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof Buffer=="function")return Buffer.from(t,"base64");if(typeof atob=="function"){const n=atob(t.replace(/[\n\r]/g,"")),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:n},r,i,o){const s=n;let a;if(typeof Buffer=="function")a=s instanceof Buffer?s.toString("base64"):Buffer.from(s.buffer).toString("base64");else if(typeof btoa=="function"){let l="";for(let d=0;d<s.length;++d)l+=String.fromCharCode(s[d]);a=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e||(e=kr.BLOCK_LITERAL),e!==kr.QUOTE_DOUBLE){const l=Math.max(r.options.lineWidth-r.indent.length,r.options.minContentWidth),d=Math.ceil(a.length/l),h=new Array(d);for(let p=0,g=0;p<d;++p,g+=l)h[p]=a.substr(g,l);a=h.join(e===kr.BLOCK_LITERAL?`
`:" ")}return $E({comment:t,type:e,value:a},r,i,o)}};function Hie(t,e){if(q1(t))for(let n=0;n<t.items.length;++n){let r=t.items[n];if(!Io(r)){if(G1(r)){r.items.length>1&&e("Each pair must have its own sequence indicator");const i=r.items[0]||new vl(new kr(null));if(r.commentBefore&&(i.key.commentBefore=i.key.commentBefore?`${r.commentBefore}
${i.key.commentBefore}`:r.commentBefore),r.comment){const o=i.value??i.key;o.comment=o.comment?`${r.comment}
${o.comment}`:r.comment}r=i}t.items[n]=Io(r)?r:new vl(r)}}else e("Expected a sequence for this tag");return t}function Wie(t,e,n){const{replacer:r}=n,i=new ky(t);i.tag="tag:yaml.org,2002:pairs";let o=0;if(e&&Symbol.iterator in Object(e))for(let s of e){typeof r=="function"&&(s=r.call(e,String(o++),s));let a,l;if(Array.isArray(s))if(s.length===2)a=s[0],l=s[1];else throw new TypeError(`Expected [key, value] tuple: ${s}`);else if(s&&s instanceof Object){const d=Object.keys(s);if(d.length===1)a=d[0],l=s[a];else throw new TypeError(`Expected tuple with one key, not ${d.length} keys`)}else a=s;i.items.push(j$(a,l,n))}return i}const H$={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:Hie,createNode:Wie};class wb extends ky{constructor(){super(),this.add=au.prototype.add.bind(this),this.delete=au.prototype.delete.bind(this),this.get=au.prototype.get.bind(this),this.has=au.prototype.has.bind(this),this.set=au.prototype.set.bind(this),this.tag=wb.tag}toJSON(e,n){if(!n)return super.toJSON(e);const r=new Map;n!=null&&n.onCreate&&n.onCreate(r);for(const i of this.items){let o,s;if(Io(i)?(o=xd(i.key,"",n),s=xd(i.value,o,n)):o=xd(i,"",n),r.has(o))throw new Error("Ordered maps must not include duplicate keys");r.set(o,s)}return r}static from(e,n,r){const i=Wie(e,n,r),o=new this;return o.items=i.items,o}}wb.tag="tag:yaml.org,2002:omap";const W$={collection:"seq",identify:t=>t instanceof Map,nodeClass:wb,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){const n=Hie(t,e),r=[];for(const{key:i}of n.items)oo(i)&&(r.includes(i.value)?e(`Ordered maps must not include duplicate keys: ${i.value}`):r.push(i.value));return Object.assign(new wb,n)},createNode:(t,e,n)=>wb.from(t,e,n)};function Gie({value:t,source:e},n){return e&&(t?qie:Xie).test.test(e)?e:t?n.options.trueStr:n.options.falseStr}const qie={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new kr(!0),stringify:Gie},Xie={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new kr(!1),stringify:Gie},jLe={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:zh},$Le={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():zh(t)}},ULe={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){const e=new kr(parseFloat(t.replace(/_/g,""))),n=t.indexOf(".");if(n!==-1){const r=t.substring(n+1).replace(/_/g,"");r[r.length-1]==="0"&&(e.minFractionDigits=r.length)}return e},stringify:zh},UE=t=>typeof t=="bigint"||Number.isInteger(t);function tO(t,e,n,{intAsBigInt:r}){const i=t[0];if((i==="-"||i==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),r){switch(n){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}const s=BigInt(t);return i==="-"?BigInt(-1)*s:s}const o=parseInt(t,n);return i==="-"?-1*o:o}function G$(t,e,n){const{value:r}=t;if(UE(r)){const i=r.toString(e);return r<0?"-"+n+i.substr(1):n+i}return zh(t)}const VLe={identify:UE,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,n)=>tO(t,2,2,n),stringify:t=>G$(t,2,"0b")},HLe={identify:UE,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,n)=>tO(t,1,8,n),stringify:t=>G$(t,8,"0")},WLe={identify:UE,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,n)=>tO(t,0,10,n),stringify:zh},GLe={identify:UE,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,n)=>tO(t,2,16,n),stringify:t=>G$(t,16,"0x")};class Sb extends au{constructor(e){super(e),this.tag=Sb.tag}add(e){let n;Io(e)?n=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?n=new vl(e.key,null):n=new vl(e,null),s0(this.items,n.key)||this.items.push(n)}get(e,n){const r=s0(this.items,e);return!n&&Io(r)?oo(r.key)?r.key.value:r.key:r}set(e,n){if(typeof n!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);const r=s0(this.items,e);r&&!n?this.items.splice(this.items.indexOf(r),1):!r&&n&&this.items.push(new vl(e))}toJSON(e,n){return super.toJSON(e,n,Set)}toString(e,n,r){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),n,r);throw new Error("Set items must all have null values")}static from(e,n,r){const{replacer:i}=r,o=new this(e);if(n&&Symbol.iterator in Object(n))for(let s of n)typeof i=="function"&&(s=i.call(n,s,s)),o.items.push(j$(s,null,r));return o}}Sb.tag="tag:yaml.org,2002:set";const q$={collection:"map",identify:t=>t instanceof Set,nodeClass:Sb,default:!1,tag:"tag:yaml.org,2002:set",createNode:(t,e,n)=>Sb.from(t,e,n),resolve(t,e){if(G1(t)){if(t.hasAllNullValues(!0))return Object.assign(new Sb,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t}};function X$(t,e){const n=t[0],r=n==="-"||n==="+"?t.substring(1):t,i=s=>e?BigInt(s):Number(s),o=r.replace(/_/g,"").split(":").reduce((s,a)=>s*i(60)+i(a),i(0));return n==="-"?i(-1)*o:o}function Yie(t){let{value:e}=t,n=s=>s;if(typeof e=="bigint")n=s=>BigInt(s);else if(isNaN(e)||!isFinite(e))return zh(t);let r="";e<0&&(r="-",e*=n(-1));const i=n(60),o=[e%i];return e<60?o.unshift(0):(e=(e-o[0])/i,o.unshift(e%i),e>=60&&(e=(e-o[0])/i,o.unshift(e))),r+o.map(s=>String(s).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const Kie={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:n})=>X$(t,n),stringify:Yie},Zie={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>X$(t,!1),stringify:Yie},nO={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){const e=t.match(nO.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,r,i,o,s,a]=e.map(Number),l=e[7]?Number((e[7]+"00").substr(1,3)):0;let d=Date.UTC(n,r-1,i,o||0,s||0,a||0,l);const h=e[8];if(h&&h!=="Z"){let p=X$(h,!1);Math.abs(p)<30&&(p*=60),d-=6e4*p}return new Date(d)},stringify:({value:t})=>t.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")},S7=[X1,Y1,Jk,Qk,qie,Xie,VLe,HLe,WLe,GLe,jLe,$Le,ULe,V$,W$,H$,q$,Kie,Zie,nO],M7=new Map([["core",NLe],["failsafe",[X1,Y1,Jk]],["json",BLe],["yaml11",S7],["yaml-1.1",S7]]),E7={binary:V$,bool:$$,float:Bie,floatExp:Fie,floatNaN:zie,floatTime:Zie,int:Uie,intHex:Vie,intOct:$ie,intTime:Kie,map:X1,null:Qk,omap:W$,pairs:H$,seq:Y1,set:q$,timestamp:nO},qLe={"tag:yaml.org,2002:binary":V$,"tag:yaml.org,2002:omap":W$,"tag:yaml.org,2002:pairs":H$,"tag:yaml.org,2002:set":q$,"tag:yaml.org,2002:timestamp":nO};function PD(t,e){let n=M7.get(e);if(!n)if(Array.isArray(t))n=[];else{const r=Array.from(M7.keys()).filter(i=>i!=="yaml11").map(i=>JSON.stringify(i)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${r} or define customTags array`)}if(Array.isArray(t))for(const r of t)n=n.concat(r);else typeof t=="function"&&(n=t(n.slice()));return n.map(r=>{if(typeof r!="string")return r;const i=E7[r];if(i)return i;const o=Object.keys(E7).map(s=>JSON.stringify(s)).join(", ");throw new Error(`Unknown custom tag "${r}"; use one of ${o}`)})}const XLe=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0;class rO{constructor({compat:e,customTags:n,merge:r,resolveKnownTags:i,schema:o,sortMapEntries:s,toStringDefaults:a}){this.compat=Array.isArray(e)?PD(e,"compat"):e?PD(null,e):null,this.merge=!!r,this.name=typeof o=="string"&&o||"core",this.knownTags=i?qLe:{},this.tags=PD(n,this.name),this.toStringOptions=a??null,Object.defineProperty(this,_y,{value:X1}),Object.defineProperty(this,bm,{value:Jk}),Object.defineProperty(this,H1,{value:Y1}),this.sortMapEntries=typeof s=="function"?s:s===!0?XLe:null}clone(){const e=Object.create(rO.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}function YLe(t,e){var l;const n=[];let r=e.directives===!0;if(e.directives!==!1&&t.directives){const d=t.directives.toString(t);d?(n.push(d),r=!0):t.directives.docStart&&(r=!0)}r&&n.push("---");const i=Oie(t,e),{commentString:o}=i.options;if(t.commentBefore){n.length!==1&&n.unshift("");const d=o(t.commentBefore);n.unshift(Jp(d,""))}let s=!1,a=null;if(t.contents){if(hs(t.contents)){if(t.contents.spaceBefore&&r&&n.push(""),t.contents.commentBefore){const p=o(t.contents.commentBefore);n.push(Jp(p,""))}i.forceBlockIndent=!!t.comment,a=t.contents.comment}const d=a?void 0:()=>s=!0;let h=t1(t.contents,i,()=>a=null,d);a&&(h+=oy(h,"",o(a))),(h[0]==="|"||h[0]===">")&&n[n.length-1]==="---"?n[n.length-1]=`--- ${h}`:n.push(h)}else n.push(t1(t.contents,i));if((l=t.directives)!=null&&l.docEnd)if(t.comment){const d=o(t.comment);d.includes(`
`)?(n.push("..."),n.push(Jp(d,""))):n.push(`... ${d}`)}else n.push("...");else{let d=t.comment;d&&s&&(d=d.replace(/^\n+/,"")),d&&((!s||a)&&n[n.length-1]!==""&&n.push(""),n.push(Jp(o(d),"")))}return n.join(`
`)+`
`}class K1{constructor(e,n,r){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,Pd,{value:lB});let i=null;typeof n=="function"||Array.isArray(n)?i=n:r===void 0&&n&&(r=n,n=void 0);const o=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"},r);this.options=o;let{version:s}=o;r!=null&&r._directives?(this.directives=r._directives.atDocument(),this.directives.yaml.explicit&&(s=this.directives.yaml.version)):this.directives=new Hl({version:s}),this.setSchema(s,r),this.contents=e===void 0?null:this.createNode(e,i,r)}clone(){const e=Object.create(K1.prototype,{[Pd]:{value:lB}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=hs(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){nx(this.contents)&&this.contents.add(e)}addIn(e,n){nx(this.contents)&&this.contents.addIn(e,n)}createAlias(e,n){if(!e.anchor){const r=Pie(this);e.anchor=!n||r.has(n)?Iie(n||"a",r):n}return new qk(e.anchor)}createNode(e,n,r){let i;if(typeof n=="function")e=n.call({"":e},"",e),i=n;else if(Array.isArray(n)){const w=C=>typeof C=="number"||C instanceof String||C instanceof Number,S=n.filter(w).map(String);S.length>0&&(n=n.concat(S)),i=n}else r===void 0&&n&&(r=n,n=void 0);const{aliasDuplicateObjects:o,anchorPrefix:s,flow:a,keepUndefined:l,onTagObj:d,tag:h}=r??{},{onAnchor:p,setAnchors:g,sourceObjects:v}=SLe(this,s||"a"),x={aliasDuplicateObjects:o??!0,keepUndefined:l??!1,onAnchor:p,onTagObj:d,replacer:i,schema:this.schema,sourceObjects:v},b=dM(e,h,x);return a&&zo(b)&&(b.flow=!0),g(),b}createPair(e,n,r={}){const i=this.createNode(e,null,r),o=this.createNode(n,null,r);return new vl(i,o)}delete(e){return nx(this.contents)?this.contents.delete(e):!1}deleteIn(e){return JS(e)?this.contents==null?!1:(this.contents=null,!0):nx(this.contents)?this.contents.deleteIn(e):!1}get(e,n){return zo(this.contents)?this.contents.get(e,n):void 0}getIn(e,n){return JS(e)?!n&&oo(this.contents)?this.contents.value:this.contents:zo(this.contents)?this.contents.getIn(e,n):void 0}has(e){return zo(this.contents)?this.contents.has(e):!1}hasIn(e){return JS(e)?this.contents!==void 0:zo(this.contents)?this.contents.hasIn(e):!1}set(e,n){this.contents==null?this.contents=pI(this.schema,[e],n):nx(this.contents)&&this.contents.set(e,n)}setIn(e,n){JS(e)?this.contents=n:this.contents==null?this.contents=pI(this.schema,Array.from(e),n):nx(this.contents)&&this.contents.setIn(e,n)}setSchema(e,n={}){typeof e=="number"&&(e=String(e));let r;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new Hl({version:"1.1"}),r={merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new Hl({version:e}),r={merge:!1,resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,r=null;break;default:{const i=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${i}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(r)this.schema=new rO(Object.assign(r,n));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:n,mapAsMap:r,maxAliasCount:i,onAnchor:o,reviver:s}={}){const a={anchors:new Map,doc:this,keep:!e,mapAsMap:r===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100},l=xd(this.contents,n??"",a);if(typeof o=="function")for(const{count:d,res:h}of a.anchors.values())o(h,d);return typeof s=="function"?nb(s,{"":l},"",l):l}toJSON(e,n){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:n})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const n=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${n}`)}return YLe(this,e)}}function nx(t){if(zo(t))return!0;throw new Error("Expected a YAML collection as document contents")}class Y$ extends Error{constructor(e,n,r,i){super(),this.name=e,this.code=r,this.message=i,this.pos=n}}class a0 extends Y${constructor(e,n,r){super("YAMLParseError",e,n,r)}}class Jie extends Y${constructor(e,n,r){super("YAMLWarning",e,n,r)}}const gI=(t,e)=>n=>{if(n.pos[0]===-1)return;n.linePos=n.pos.map(a=>e.linePos(a));const{line:r,col:i}=n.linePos[0];n.message+=` at line ${r}, column ${i}`;let o=i-1,s=t.substring(e.lineStarts[r-1],e.lineStarts[r]).replace(/[\n\r]+$/,"");if(o>=60&&s.length>80){const a=Math.min(o-39,s.length-79);s="…"+s.substring(a),o-=a-1}if(s.length>80&&(s=s.substring(0,79)+"…"),r>1&&/^ *$/.test(s.substring(0,o))){let a=t.substring(e.lineStarts[r-2],e.lineStarts[r-1]);a.length>80&&(a=a.substring(0,79)+`…
`),s=a+s}if(/[^ ]/.test(s)){let a=1;const l=n.linePos[1];l&&l.line===r&&l.col>i&&(a=Math.max(1,Math.min(l.col-i,80-o)));const d=" ".repeat(o)+"^".repeat(a);n.message+=`:

${s}
${d}
`}};function n1(t,{flow:e,indicator:n,next:r,offset:i,onError:o,startOnNewline:s}){let a=!1,l=s,d=s,h="",p="",g=!1,v=!1,x=!1,b=null,w=null,S=null,C=null,A=null;for(const F of t)switch(x&&(F.type!=="space"&&F.type!=="newline"&&F.type!=="comma"&&o(F.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),x=!1),F.type){case"space":!e&&l&&n!=="doc-start"&&F.source[0]==="	"&&o(F,"TAB_AS_INDENT","Tabs are not allowed as indentation"),d=!0;break;case"comment":{d||o(F,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const B=F.source.substring(1)||" ";h?h+=p+B:h=B,p="",l=!1;break}case"newline":l?h?h+=F.source:a=!0:p+=F.source,l=!0,g=!0,(b||w)&&(v=!0),d=!0;break;case"anchor":b&&o(F,"MULTIPLE_ANCHORS","A node can have at most one anchor"),F.source.endsWith(":")&&o(F.offset+F.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),b=F,A===null&&(A=F.offset),l=!1,d=!1,x=!0;break;case"tag":{w&&o(F,"MULTIPLE_TAGS","A node can have at most one tag"),w=F,A===null&&(A=F.offset),l=!1,d=!1,x=!0;break}case n:(b||w)&&o(F,"BAD_PROP_ORDER",`Anchors and tags must be after the ${F.source} indicator`),C&&o(F,"UNEXPECTED_TOKEN",`Unexpected ${F.source} in ${e??"collection"}`),C=F,l=!1,d=!1;break;case"comma":if(e){S&&o(F,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),S=F,l=!1,d=!1;break}default:o(F,"UNEXPECTED_TOKEN",`Unexpected ${F.type} token`),l=!1,d=!1}const P=t[t.length-1],k=P?P.offset+P.source.length:i;return x&&r&&r.type!=="space"&&r.type!=="newline"&&r.type!=="comma"&&(r.type!=="scalar"||r.source!=="")&&o(r.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:S,found:C,spaceBefore:a,comment:h,hasNewline:g,hasNewlineAfterProp:v,anchor:b,tag:w,end:k,start:A??k}}function hM(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes(`
`))return!0;if(t.end){for(const e of t.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(const e of t.items){for(const n of e.start)if(n.type==="newline")return!0;if(e.sep){for(const n of e.sep)if(n.type==="newline")return!0}if(hM(e.key)||hM(e.value))return!0}return!1;default:return!0}}function hB(t,e,n){if((e==null?void 0:e.type)==="flow-collection"){const r=e.end[0];r.indent===t&&(r.source==="]"||r.source==="}")&&hM(e)&&n(r,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function Qie(t,e,n){const{uniqueKeys:r}=t.options;if(r===!1)return!1;const i=typeof r=="function"?r:(o,s)=>o===s||oo(o)&&oo(s)&&o.value===s.value&&!(o.value==="<<"&&t.schema.merge);return e.some(o=>i(o.key,n))}const T7="All mapping items must start at the same column";function KLe({composeNode:t,composeEmptyNode:e},n,r,i,o){var h;const s=(o==null?void 0:o.nodeClass)??au,a=new s(n.schema);n.atRoot&&(n.atRoot=!1);let l=r.offset,d=null;for(const p of r.items){const{start:g,key:v,sep:x,value:b}=p,w=n1(g,{indicator:"explicit-key-ind",next:v??(x==null?void 0:x[0]),offset:l,onError:i,startOnNewline:!0}),S=!w.found;if(S){if(v&&(v.type==="block-seq"?i(l,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in v&&v.indent!==r.indent&&i(l,"BAD_INDENT",T7)),!w.anchor&&!w.tag&&!x){d=w.end,w.comment&&(a.comment?a.comment+=`
`+w.comment:a.comment=w.comment);continue}(w.hasNewlineAfterProp||hM(v))&&i(v??g[g.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else((h=w.found)==null?void 0:h.indent)!==r.indent&&i(l,"BAD_INDENT",T7);const C=w.end,A=v?t(n,v,w,i):e(n,C,g,null,w,i);n.schema.compat&&hB(r.indent,v,i),Qie(n,a.items,A)&&i(C,"DUPLICATE_KEY","Map keys must be unique");const P=n1(x??[],{indicator:"map-value-ind",next:b,offset:A.range[2],onError:i,startOnNewline:!v||v.type==="block-scalar"});if(l=P.end,P.found){S&&((b==null?void 0:b.type)==="block-map"&&!P.hasNewline&&i(l,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&w.start<P.found.offset-1024&&i(A.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const k=b?t(n,b,P,i):e(n,l,x,null,P,i);n.schema.compat&&hB(r.indent,b,i),l=k.range[2];const F=new vl(A,k);n.options.keepSourceTokens&&(F.srcToken=p),a.items.push(F)}else{S&&i(A.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),P.comment&&(A.comment?A.comment+=`
`+P.comment:A.comment=P.comment);const k=new vl(A);n.options.keepSourceTokens&&(k.srcToken=p),a.items.push(k)}}return d&&d<l&&i(d,"IMPOSSIBLE","Map comment with trailing content"),a.range=[r.offset,l,d??l],a}function ZLe({composeNode:t,composeEmptyNode:e},n,r,i,o){const s=(o==null?void 0:o.nodeClass)??ky,a=new s(n.schema);n.atRoot&&(n.atRoot=!1);let l=r.offset,d=null;for(const{start:h,value:p}of r.items){const g=n1(h,{indicator:"seq-item-ind",next:p,offset:l,onError:i,startOnNewline:!0});if(!g.found)if(g.anchor||g.tag||p)p&&p.type==="block-seq"?i(g.end,"BAD_INDENT","All sequence items must start at the same column"):i(l,"MISSING_CHAR","Sequence item without - indicator");else{d=g.end,g.comment&&(a.comment=g.comment);continue}const v=p?t(n,p,g,i):e(n,g.end,h,null,g,i);n.schema.compat&&hB(r.indent,p,i),l=v.range[2],a.items.push(v)}return a.range=[r.offset,l,d??l],a}function VE(t,e,n,r){let i="";if(t){let o=!1,s="";for(const a of t){const{source:l,type:d}=a;switch(d){case"space":o=!0;break;case"comment":{n&&!o&&r(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const h=l.substring(1)||" ";i?i+=s+h:i=h,s="";break}case"newline":i&&(s+=l),o=!0;break;default:r(a,"UNEXPECTED_TOKEN",`Unexpected ${d} at node end`)}e+=l.length}}return{comment:i,offset:e}}const ID="Block collections are not allowed within flow collections",RD=t=>t&&(t.type==="block-map"||t.type==="block-seq");function JLe({composeNode:t,composeEmptyNode:e},n,r,i,o){const s=r.start.source==="{",a=s?"flow map":"flow sequence",l=(o==null?void 0:o.nodeClass)??(s?au:ky),d=new l(n.schema);d.flow=!0;const h=n.atRoot;h&&(n.atRoot=!1);let p=r.offset+r.start.source.length;for(let w=0;w<r.items.length;++w){const S=r.items[w],{start:C,key:A,sep:P,value:k}=S,F=n1(C,{flow:a,indicator:"explicit-key-ind",next:A??(P==null?void 0:P[0]),offset:p,onError:i,startOnNewline:!1});if(!F.found){if(!F.anchor&&!F.tag&&!P&&!k){w===0&&F.comma?i(F.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`):w<r.items.length-1&&i(F.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${a}`),F.comment&&(d.comment?d.comment+=`
`+F.comment:d.comment=F.comment),p=F.end;continue}!s&&n.options.strict&&hM(A)&&i(A,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(w===0)F.comma&&i(F.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`);else if(F.comma||i(F.start,"MISSING_CHAR",`Missing , between ${a} items`),F.comment){let B="";e:for(const W of C)switch(W.type){case"comma":case"space":break;case"comment":B=W.source.substring(1);break e;default:break e}if(B){let W=d.items[d.items.length-1];Io(W)&&(W=W.value??W.key),W.comment?W.comment+=`
`+B:W.comment=B,F.comment=F.comment.substring(B.length+1)}}if(!s&&!P&&!F.found){const B=k?t(n,k,F,i):e(n,F.end,P,null,F,i);d.items.push(B),p=B.range[2],RD(k)&&i(B.range,"BLOCK_IN_FLOW",ID)}else{const B=F.end,W=A?t(n,A,F,i):e(n,B,C,null,F,i);RD(A)&&i(W.range,"BLOCK_IN_FLOW",ID);const J=n1(P??[],{flow:a,indicator:"map-value-ind",next:k,offset:W.range[2],onError:i,startOnNewline:!1});if(J.found){if(!s&&!F.found&&n.options.strict){if(P)for(const le of P){if(le===J.found)break;if(le.type==="newline"){i(le,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}F.start<J.found.offset-1024&&i(J.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else k&&("source"in k&&k.source&&k.source[0]===":"?i(k,"MISSING_CHAR",`Missing space after : in ${a}`):i(J.start,"MISSING_CHAR",`Missing , or : between ${a} items`));const H=k?t(n,k,J,i):J.found?e(n,J.end,P,null,J,i):null;H?RD(k)&&i(H.range,"BLOCK_IN_FLOW",ID):J.comment&&(W.comment?W.comment+=`
`+J.comment:W.comment=J.comment);const Y=new vl(W,H);if(n.options.keepSourceTokens&&(Y.srcToken=S),s){const le=d;Qie(n,le.items,W)&&i(B,"DUPLICATE_KEY","Map keys must be unique"),le.items.push(Y)}else{const le=new au(n.schema);le.flow=!0,le.items.push(Y),d.items.push(le)}p=H?H.range[2]:J.end}}const g=s?"}":"]",[v,...x]=r.end;let b=p;if(v&&v.source===g)b=v.offset+v.source.length;else{const w=a[0].toUpperCase()+a.substring(1),S=h?`${w} must end with a ${g}`:`${w} in block collection must be sufficiently indented and end with a ${g}`;i(p,h?"MISSING_CHAR":"BAD_INDENT",S),v&&v.source.length!==1&&x.unshift(v)}if(x.length>0){const w=VE(x,b,n.options.strict,i);w.comment&&(d.comment?d.comment+=`
`+w.comment:d.comment=w.comment),d.range=[r.offset,b,w.offset]}else d.range=[r.offset,b,b];return d}function kD(t,e,n,r,i,o){const s=n.type==="block-map"?KLe(t,e,n,r,o):n.type==="block-seq"?ZLe(t,e,n,r,o):JLe(t,e,n,r,o),a=s.constructor;return i==="!"||i===a.tagName?(s.tag=a.tagName,s):(i&&(s.tag=i),s)}function QLe(t,e,n,r,i){var p;const o=r?e.directives.tagName(r.source,g=>i(r,"TAG_RESOLVE_FAILED",g)):null,s=n.type==="block-map"?"map":n.type==="block-seq"?"seq":n.start.source==="{"?"map":"seq";if(!r||!o||o==="!"||o===au.tagName&&s==="map"||o===ky.tagName&&s==="seq"||!s)return kD(t,e,n,i,o);let a=e.schema.tags.find(g=>g.tag===o&&g.collection===s);if(!a){const g=e.schema.knownTags[o];if(g&&g.collection===s)e.schema.tags.push(Object.assign({},g,{default:!1})),a=g;else return g!=null&&g.collection?i(r,"BAD_COLLECTION_TYPE",`${g.tag} used for ${s} collection, but expects ${g.collection}`,!0):i(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),kD(t,e,n,i,o)}const l=kD(t,e,n,i,o,a),d=((p=a.resolve)==null?void 0:p.call(a,l,g=>i(r,"TAG_RESOLVE_FAILED",g),e.options))??l,h=hs(d)?d:new kr(d);return h.range=l.range,h.tag=o,a!=null&&a.format&&(h.format=a.format),h}function eoe(t,e,n){const r=t.offset,i=e3e(t,e,n);if(!i)return{value:"",type:null,comment:"",range:[r,r,r]};const o=i.mode===">"?kr.BLOCK_FOLDED:kr.BLOCK_LITERAL,s=t.source?t3e(t.source):[];let a=s.length;for(let b=s.length-1;b>=0;--b){const w=s[b][1];if(w===""||w==="\r")a=b;else break}if(a===0){const b=i.chomp==="+"&&s.length>0?`
`.repeat(Math.max(1,s.length-1)):"";let w=r+i.length;return t.source&&(w+=t.source.length),{value:b,type:o,comment:i.comment,range:[r,w,w]}}let l=t.indent+i.indent,d=t.offset+i.length,h=0;for(let b=0;b<a;++b){const[w,S]=s[b];if(S===""||S==="\r")i.indent===0&&w.length>l&&(l=w.length);else{w.length<l&&n(d+w.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),i.indent===0&&(l=w.length),h=b;break}d+=w.length+S.length+1}for(let b=s.length-1;b>=a;--b)s[b][0].length>l&&(a=b+1);let p="",g="",v=!1;for(let b=0;b<h;++b)p+=s[b][0].slice(l)+`
`;for(let b=h;b<a;++b){let[w,S]=s[b];d+=w.length+S.length+1;const C=S[S.length-1]==="\r";if(C&&(S=S.slice(0,-1)),S&&w.length<l){const P=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;n(d-S.length-(C?2:1),"BAD_INDENT",P),w=""}o===kr.BLOCK_LITERAL?(p+=g+w.slice(l)+S,g=`
`):w.length>l||S[0]==="	"?(g===" "?g=`
`:!v&&g===`
`&&(g=`

`),p+=g+w.slice(l)+S,g=`
`,v=!0):S===""?g===`
`?p+=`
`:g=`
`:(p+=g+S,g=" ",v=!1)}switch(i.chomp){case"-":break;case"+":for(let b=a;b<s.length;++b)p+=`
`+s[b][0].slice(l);p[p.length-1]!==`
`&&(p+=`
`);break;default:p+=`
`}const x=r+i.length+t.source.length;return{value:p,type:o,comment:i.comment,range:[r,x,x]}}function e3e({offset:t,props:e},n,r){if(e[0].type!=="block-scalar-header")return r(e[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:i}=e[0],o=i[0];let s=0,a="",l=-1;for(let g=1;g<i.length;++g){const v=i[g];if(!a&&(v==="-"||v==="+"))a=v;else{const x=Number(v);!s&&x?s=x:l===-1&&(l=t+g)}}l!==-1&&r(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let d=!1,h="",p=i.length;for(let g=1;g<e.length;++g){const v=e[g];switch(v.type){case"space":d=!0;case"newline":p+=v.source.length;break;case"comment":n&&!d&&r(v,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),p+=v.source.length,h=v.source.substring(1);break;case"error":r(v,"UNEXPECTED_TOKEN",v.message),p+=v.source.length;break;default:{const x=`Unexpected token in block scalar header: ${v.type}`;r(v,"UNEXPECTED_TOKEN",x);const b=v.source;b&&typeof b=="string"&&(p+=b.length)}}}return{mode:o,indent:s,chomp:a,comment:h,length:p}}function t3e(t){const e=t.split(/\n( *)/),n=e[0],r=n.match(/^( *)/),o=[r!=null&&r[1]?[r[1],n.slice(r[1].length)]:["",n]];for(let s=1;s<e.length;s+=2)o.push([e[s],e[s+1]]);return o}function toe(t,e,n){const{offset:r,type:i,source:o,end:s}=t;let a,l;const d=(g,v,x)=>n(r+g,v,x);switch(i){case"scalar":a=kr.PLAIN,l=n3e(o,d);break;case"single-quoted-scalar":a=kr.QUOTE_SINGLE,l=r3e(o,d);break;case"double-quoted-scalar":a=kr.QUOTE_DOUBLE,l=i3e(o,d);break;default:return n(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[r,r+o.length,r+o.length]}}const h=r+o.length,p=VE(s,h,e,n);return{value:l,type:a,comment:p.comment,range:[r,h,p.offset]}}function n3e(t,e){let n="";switch(t[0]){case"	":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":{n=`block scalar indicator ${t[0]}`;break}case"@":case"`":{n=`reserved character ${t[0]}`;break}}return n&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),noe(t)}function r3e(t,e){return(t[t.length-1]!=="'"||t.length===1)&&e(t.length,"MISSING_CHAR","Missing closing 'quote"),noe(t.slice(1,-1)).replace(/''/g,"'")}function noe(t){let e,n;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),n=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let r=e.exec(t);if(!r)return t;let i=r[1],o=" ",s=e.lastIndex;for(n.lastIndex=s;r=n.exec(t);)r[1]===""?o===`
`?i+=o:o=`
`:(i+=o+r[1],o=" "),s=n.lastIndex;const a=/[ \t]*(.*)/sy;return a.lastIndex=s,r=a.exec(t),i+o+((r==null?void 0:r[1])??"")}function i3e(t,e){let n="";for(let r=1;r<t.length-1;++r){const i=t[r];if(!(i==="\r"&&t[r+1]===`
`))if(i===`
`){const{fold:o,offset:s}=o3e(t,r);n+=o,r=s}else if(i==="\\"){let o=t[++r];const s=s3e[o];if(s)n+=s;else if(o===`
`)for(o=t[r+1];o===" "||o==="	";)o=t[++r+1];else if(o==="\r"&&t[r+1]===`
`)for(o=t[++r+1];o===" "||o==="	";)o=t[++r+1];else if(o==="x"||o==="u"||o==="U"){const a={x:2,u:4,U:8}[o];n+=a3e(t,r+1,a,e),r+=a}else{const a=t.substr(r-1,2);e(r-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),n+=a}}else if(i===" "||i==="	"){const o=r;let s=t[r+1];for(;s===" "||s==="	";)s=t[++r+1];s!==`
`&&!(s==="\r"&&t[r+2]===`
`)&&(n+=r>o?t.slice(o,r+1):i)}else n+=i}return(t[t.length-1]!=='"'||t.length===1)&&e(t.length,"MISSING_CHAR",'Missing closing "quote'),n}function o3e(t,e){let n="",r=t[e+1];for(;(r===" "||r==="	"||r===`
`||r==="\r")&&!(r==="\r"&&t[e+2]!==`
`);)r===`
`&&(n+=`
`),e+=1,r=t[e+1];return n||(n=" "),{fold:n,offset:e}}const s3e={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"",_:" ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function a3e(t,e,n,r){const i=t.substr(e,n),s=i.length===n&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(s)){const a=t.substr(e-2,n+2);return r(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),a}return String.fromCodePoint(s)}function roe(t,e,n,r){const{value:i,type:o,comment:s,range:a}=e.type==="block-scalar"?eoe(e,t.options.strict,r):toe(e,t.options.strict,r),l=n?t.directives.tagName(n.source,p=>r(n,"TAG_RESOLVE_FAILED",p)):null,d=n&&l?l3e(t.schema,i,l,n,r):e.type==="scalar"?c3e(t,i,e,r):t.schema[bm];let h;try{const p=d.resolve(i,g=>r(n??e,"TAG_RESOLVE_FAILED",g),t.options);h=oo(p)?p:new kr(p)}catch(p){const g=p instanceof Error?p.message:String(p);r(n??e,"TAG_RESOLVE_FAILED",g),h=new kr(i)}return h.range=a,h.source=i,o&&(h.type=o),l&&(h.tag=l),d.format&&(h.format=d.format),s&&(h.comment=s),h}function l3e(t,e,n,r,i){var a;if(n==="!")return t[bm];const o=[];for(const l of t.tags)if(!l.collection&&l.tag===n)if(l.default&&l.test)o.push(l);else return l;for(const l of o)if((a=l.test)!=null&&a.test(e))return l;const s=t.knownTags[n];return s&&!s.collection?(t.tags.push(Object.assign({},s,{default:!1,test:void 0})),s):(i(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,n!=="tag:yaml.org,2002:str"),t[bm])}function c3e({directives:t,schema:e},n,r,i){const o=e.tags.find(s=>{var a;return s.default&&((a=s.test)==null?void 0:a.test(n))})||e[bm];if(e.compat){const s=e.compat.find(a=>{var l;return a.default&&((l=a.test)==null?void 0:l.test(n))})??e[bm];if(o.tag!==s.tag){const a=t.tagString(o.tag),l=t.tagString(s.tag),d=`Value may be parsed as either ${a} or ${l}`;i(r,"TAG_RESOLVE_FAILED",d,!0)}}return o}function u3e(t,e,n){if(e){n===null&&(n=e.length);for(let r=n-1;r>=0;--r){let i=e[r];switch(i.type){case"space":case"comment":case"newline":t-=i.source.length;continue}for(i=e[++r];(i==null?void 0:i.type)==="space";)t+=i.source.length,i=e[++r];break}}return t}const d3e={composeNode:ioe,composeEmptyNode:K$};function ioe(t,e,n,r){const{spaceBefore:i,comment:o,anchor:s,tag:a}=n;let l,d=!0;switch(e.type){case"alias":l=h3e(t,e,r),(s||a)&&r(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":l=roe(t,e,a,r),s&&(l.anchor=s.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":l=QLe(d3e,t,e,a,r),s&&(l.anchor=s.source.substring(1));break;default:{const h=e.type==="error"?e.message:`Unsupported token (type: ${e.type})`;r(e,"UNEXPECTED_TOKEN",h),l=K$(t,e.offset,void 0,null,n,r),d=!1}}return s&&l.anchor===""&&r(s,"BAD_ALIAS","Anchor cannot be an empty string"),i&&(l.spaceBefore=!0),o&&(e.type==="scalar"&&e.source===""?l.comment=o:l.commentBefore=o),t.options.keepSourceTokens&&d&&(l.srcToken=e),l}function K$(t,e,n,r,{spaceBefore:i,comment:o,anchor:s,tag:a,end:l},d){const h={type:"scalar",offset:u3e(e,n,r),indent:-1,source:""},p=roe(t,h,a,d);return s&&(p.anchor=s.source.substring(1),p.anchor===""&&d(s,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(p.spaceBefore=!0),o&&(p.comment=o,p.range[2]=l),p}function h3e({options:t},{offset:e,source:n,end:r},i){const o=new qk(n.substring(1));o.source===""&&i(e,"BAD_ALIAS","Alias cannot be an empty string"),o.source.endsWith(":")&&i(e+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const s=e+n.length,a=VE(r,s,t.strict,i);return o.range=[e,s,a.offset],a.comment&&(o.comment=a.comment),o}function f3e(t,e,{offset:n,start:r,value:i,end:o},s){const a=Object.assign({_directives:e},t),l=new K1(void 0,a),d={atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},h=n1(r,{indicator:"doc-start",next:i??(o==null?void 0:o[0]),offset:n,onError:s,startOnNewline:!0});h.found&&(l.directives.docStart=!0,i&&(i.type==="block-map"||i.type==="block-seq")&&!h.hasNewline&&s(h.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=i?ioe(d,i,h,s):K$(d,h.end,r,null,h,s);const p=l.contents.range[2],g=VE(o,p,!1,s);return g.comment&&(l.comment=g.comment),l.range=[n,p,g.offset],l}function mS(t){if(typeof t=="number")return[t,t+1];if(Array.isArray(t))return t.length===2?t:[t[0],t[1]];const{offset:e,source:n}=t;return[e,e+(typeof n=="string"?n.length:1)]}function C7(t){var i;let e="",n=!1,r=!1;for(let o=0;o<t.length;++o){const s=t[o];switch(s[0]){case"#":e+=(e===""?"":r?`

`:`
`)+(s.substring(1)||" "),n=!0,r=!1;break;case"%":((i=t[o+1])==null?void 0:i[0])!=="#"&&(o+=1),n=!1;break;default:n||(r=!0),n=!1}}return{comment:e,afterEmptyLine:r}}class Z${constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(n,r,i,o)=>{const s=mS(n);o?this.warnings.push(new Jie(s,r,i)):this.errors.push(new a0(s,r,i))},this.directives=new Hl({version:e.version||"1.2"}),this.options=e}decorate(e,n){const{comment:r,afterEmptyLine:i}=C7(this.prelude);if(r){const o=e.contents;if(n)e.comment=e.comment?`${e.comment}
${r}`:r;else if(i||e.directives.docStart||!o)e.commentBefore=r;else if(zo(o)&&!o.flow&&o.items.length>0){let s=o.items[0];Io(s)&&(s=s.key);const a=s.commentBefore;s.commentBefore=a?`${r}
${a}`:r}else{const s=o.commentBefore;o.commentBefore=s?`${r}
${s}`:r}}n?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:C7(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,n=!1,r=-1){for(const i of e)yield*this.next(i);yield*this.end(n,r)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(n,r,i)=>{const o=mS(e);o[0]+=n,this.onError(o,"BAD_DIRECTIVE",r,i)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const n=f3e(this.options,this.directives,e,this.onError);this.atDirectives&&!n.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(n,!1),this.doc&&(yield this.doc),this.doc=n,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const n=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,r=new a0(mS(e),"UNEXPECTED_TOKEN",n);this.atDirectives||!this.doc?this.errors.push(r):this.doc.errors.push(r);break}case"doc-end":{if(!this.doc){const r="Unexpected doc-end without preceding document";this.errors.push(new a0(mS(e),"UNEXPECTED_TOKEN",r));break}this.doc.directives.docEnd=!0;const n=VE(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),n.comment){const r=this.doc.comment;this.doc.comment=r?`${r}
${n.comment}`:n.comment}this.doc.range[2]=n.offset;break}default:this.errors.push(new a0(mS(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,n=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const r=Object.assign({_directives:this.directives},this.options),i=new K1(void 0,r);this.atDirectives&&this.onError(n,"MISSING_CHAR","Missing directives-end indicator line"),i.range=[0,n,n],this.decorate(i,!1),yield i}}}function p3e(t,e=!0,n){if(t){const r=(i,o,s)=>{const a=typeof i=="number"?i:Array.isArray(i)?i[0]:i.offset;if(n)n(a,o,s);else throw new a0([a,a+1],o,s)};switch(t.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return toe(t,e,r);case"block-scalar":return eoe(t,e,r)}}return null}function m3e(t,e){const{implicitKey:n=!1,indent:r,inFlow:i=!1,offset:o=-1,type:s="PLAIN"}=e,a=$E({type:s,value:t},{implicitKey:n,indent:r>0?" ".repeat(r):"",inFlow:i,options:{blockQuote:!0,lineWidth:-1}}),l=e.end??[{type:"newline",offset:-1,indent:r,source:`
`}];switch(a[0]){case"|":case">":{const d=a.indexOf(`
`),h=a.substring(0,d),p=a.substring(d+1)+`
`,g=[{type:"block-scalar-header",offset:o,indent:r,source:h}];return ooe(g,l)||g.push({type:"newline",offset:-1,indent:r,source:`
`}),{type:"block-scalar",offset:o,indent:r,props:g,source:p}}case'"':return{type:"double-quoted-scalar",offset:o,indent:r,source:a,end:l};case"'":return{type:"single-quoted-scalar",offset:o,indent:r,source:a,end:l};default:return{type:"scalar",offset:o,indent:r,source:a,end:l}}}function g3e(t,e,n={}){let{afterKey:r=!1,implicitKey:i=!1,inFlow:o=!1,type:s}=n,a="indent"in t?t.indent:null;if(r&&typeof a=="number"&&(a+=2),!s)switch(t.type){case"single-quoted-scalar":s="QUOTE_SINGLE";break;case"double-quoted-scalar":s="QUOTE_DOUBLE";break;case"block-scalar":{const d=t.props[0];if(d.type!=="block-scalar-header")throw new Error("Invalid block scalar header");s=d.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:s="PLAIN"}const l=$E({type:s,value:e},{implicitKey:i||a===null,indent:a!==null&&a>0?" ".repeat(a):"",inFlow:o,options:{blockQuote:!0,lineWidth:-1}});switch(l[0]){case"|":case">":y3e(t,l);break;case'"':OD(t,l,"double-quoted-scalar");break;case"'":OD(t,l,"single-quoted-scalar");break;default:OD(t,l,"scalar")}}function y3e(t,e){const n=e.indexOf(`
`),r=e.substring(0,n),i=e.substring(n+1)+`
`;if(t.type==="block-scalar"){const o=t.props[0];if(o.type!=="block-scalar-header")throw new Error("Invalid block scalar header");o.source=r,t.source=i}else{const{offset:o}=t,s="indent"in t?t.indent:-1,a=[{type:"block-scalar-header",offset:o,indent:s,source:r}];ooe(a,"end"in t?t.end:void 0)||a.push({type:"newline",offset:-1,indent:s,source:`
`});for(const l of Object.keys(t))l!=="type"&&l!=="offset"&&delete t[l];Object.assign(t,{type:"block-scalar",indent:s,props:a,source:i})}}function ooe(t,e){if(e)for(const n of e)switch(n.type){case"space":case"comment":t.push(n);break;case"newline":return t.push(n),!0}return!1}function OD(t,e,n){switch(t.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":t.type=n,t.source=e;break;case"block-scalar":{const r=t.props.slice(1);let i=e.length;t.props[0].type==="block-scalar-header"&&(i-=t.props[0].source.length);for(const o of r)o.offset+=i;delete t.props,Object.assign(t,{type:n,source:e,end:r});break}case"block-map":case"block-seq":{const i={type:"newline",offset:t.offset+e.length,indent:t.indent,source:`
`};delete t.items,Object.assign(t,{type:n,source:e,end:[i]});break}default:{const r="indent"in t?t.indent:-1,i="end"in t&&Array.isArray(t.end)?t.end.filter(o=>o.type==="space"||o.type==="comment"||o.type==="newline"):[];for(const o of Object.keys(t))o!=="type"&&o!=="offset"&&delete t[o];Object.assign(t,{type:n,indent:r,source:e,end:i})}}}const v3e=t=>"type"in t?yI(t):uP(t);function yI(t){switch(t.type){case"block-scalar":{let e="";for(const n of t.props)e+=yI(n);return e+t.source}case"block-map":case"block-seq":{let e="";for(const n of t.items)e+=uP(n);return e}case"flow-collection":{let e=t.start.source;for(const n of t.items)e+=uP(n);for(const n of t.end)e+=n.source;return e}case"document":{let e=uP(t);if(t.end)for(const n of t.end)e+=n.source;return e}default:{let e=t.source;if("end"in t&&t.end)for(const n of t.end)e+=n.source;return e}}}function uP({start:t,key:e,sep:n,value:r}){let i="";for(const o of t)i+=o.source;if(e&&(i+=yI(e)),n)for(const o of n)i+=o.source;return r&&(i+=yI(r)),i}const fB=Symbol("break visit"),_3e=Symbol("skip children"),soe=Symbol("remove item");function H0(t,e){"type"in t&&t.type==="document"&&(t={start:t.start,value:t.value}),aoe(Object.freeze([]),t,e)}H0.BREAK=fB;H0.SKIP=_3e;H0.REMOVE=soe;H0.itemAtPath=(t,e)=>{let n=t;for(const[r,i]of e){const o=n==null?void 0:n[r];if(o&&"items"in o)n=o.items[i];else return}return n};H0.parentCollection=(t,e)=>{const n=H0.itemAtPath(t,e.slice(0,-1)),r=e[e.length-1][0],i=n==null?void 0:n[r];if(i&&"items"in i)return i;throw new Error("Parent collection not found")};function aoe(t,e,n){let r=n(e,t);if(typeof r=="symbol")return r;for(const i of["key","value"]){const o=e[i];if(o&&"items"in o){for(let s=0;s<o.items.length;++s){const a=aoe(Object.freeze(t.concat([[i,s]])),o.items[s],n);if(typeof a=="number")s=a-1;else{if(a===fB)return fB;a===soe&&(o.items.splice(s,1),s-=1)}}typeof r=="function"&&i==="key"&&(r=r(e,t))}}return typeof r=="function"?r(e,t):r}const iO="\uFEFF",oO="",sO="",fM="",x3e=t=>!!t&&"items"in t,b3e=t=>!!t&&(t.type==="scalar"||t.type==="single-quoted-scalar"||t.type==="double-quoted-scalar"||t.type==="block-scalar");function w3e(t){switch(t){case iO:return"<BOM>";case oO:return"<DOC>";case sO:return"<FLOW_END>";case fM:return"<SCALAR>";default:return JSON.stringify(t)}}function loe(t){switch(t){case iO:return"byte-order-mark";case oO:return"doc-mode";case sO:return"flow-error-end";case fM:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}const S3e=Object.freeze(Object.defineProperty({__proto__:null,BOM:iO,DOCUMENT:oO,FLOW_END:sO,SCALAR:fM,createScalarToken:m3e,isCollection:x3e,isScalar:b3e,prettyToken:w3e,resolveAsScalar:p3e,setScalarValue:g3e,stringify:v3e,tokenType:loe,visit:H0},Symbol.toStringTag,{value:"Module"}));function ed(t){switch(t){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const A7="0123456789ABCDEFabcdef".split(""),M3e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split(""),LD=",[]{}".split(""),E3e=` ,[]{}
\r	`.split(""),DD=t=>!t||E3e.includes(t);class coe{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,n=!1){e&&(this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null),this.atEnd=!n;let r=this.next??"stream";for(;r&&(n||this.hasChars(1));)r=yield*this.parseNext(r)}atLineEnd(){let e=this.pos,n=this.buffer[e];for(;n===" "||n==="	";)n=this.buffer[++e];return!n||n==="#"||n===`
`?!0:n==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let n=this.buffer[e];if(this.indentNext>0){let r=0;for(;n===" ";)n=this.buffer[++r+e];if(n==="\r"){const i=this.buffer[r+e+1];if(i===`
`||!i&&!this.atEnd)return e+r+1}return n===`
`||r>=this.indentNext||!n&&!this.atEnd?e+r:-1}if(n==="-"||n==="."){const r=this.buffer.substr(e,3);if((r==="---"||r==="...")&&ed(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===iO&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let n=e.length;const r=e.indexOf("#");if(r!==-1){const o=e[r-1];(o===" "||o==="	")&&(n=r-1)}for(;;){const o=e[n-1];if(o===" "||o==="	")n-=1;else break}const i=(yield*this.pushCount(n))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-i),this.pushNewline(),"stream"}if(this.atLineEnd()){const n=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-n),yield*this.pushNewline(),"stream"}return yield oO,yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const n=this.peek(3);if(n==="---"&&ed(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if(n==="..."&&ed(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!ed(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,n]=this.peek(2);if(!n&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&ed(n)){const r=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=r,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(e===null)return this.setNext("doc");let n=yield*this.pushIndicators();switch(e[n]){case"#":yield*this.pushCount(e.length-n);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(DD),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return n+=yield*this.parseBlockScalarHeader(),n+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-n),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,n,r=-1;do e=yield*this.pushNewline(),e>0?(n=yield*this.pushSpaces(!1),this.indentValue=r=n):n=0,n+=yield*this.pushSpaces(!0);while(e+n>0);const i=this.getLine();if(i===null)return this.setNext("flow");if((r!==-1&&r<this.indentNext&&i[0]!=="#"||r===0&&(i.startsWith("---")||i.startsWith("..."))&&ed(i[3]))&&!(r===this.indentNext-1&&this.flowLevel===1&&(i[0]==="]"||i[0]==="}")))return this.flowLevel=0,yield sO,yield*this.parseLineStart();let o=0;for(;i[o]===",";)o+=yield*this.pushCount(1),o+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(o+=yield*this.pushIndicators(),i[o]){case void 0:return"flow";case"#":return yield*this.pushCount(i.length-o),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(DD),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const s=this.charAt(1);if(this.flowKey||ed(s)||s===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let n=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;n!==-1&&this.buffer[n+1]==="'";)n=this.buffer.indexOf("'",n+2);else for(;n!==-1;){let o=0;for(;this.buffer[n-1-o]==="\\";)o+=1;if(o%2===0)break;n=this.buffer.indexOf('"',n+1)}const r=this.buffer.substring(0,n);let i=r.indexOf(`
`,this.pos);if(i!==-1){for(;i!==-1;){const o=this.continueScalar(i+1);if(o===-1)break;i=r.indexOf(`
`,o)}i!==-1&&(n=i-(r[i-1]==="\r"?2:1))}if(n===-1){if(!this.atEnd)return this.setNext("quoted-scalar");n=this.buffer.length}return yield*this.pushToIndex(n+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const n=this.buffer[++e];if(n==="+")this.blockScalarKeep=!0;else if(n>"0"&&n<="9")this.blockScalarIndent=Number(n)-1;else if(n!=="-")break}return yield*this.pushUntil(n=>ed(n)||n==="#")}*parseBlockScalar(){let e=this.pos-1,n=0,r;e:for(let i=this.pos;r=this.buffer[i];++i)switch(r){case" ":n+=1;break;case`
`:e=i,n=0;break;case"\r":{const o=this.buffer[i+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!r&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=n:this.indentNext+=this.blockScalarIndent;do{const i=this.continueScalar(e+1);if(i===-1)break;e=this.buffer.indexOf(`
`,i)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}if(!this.blockScalarKeep)do{let i=e-1,o=this.buffer[i];o==="\r"&&(o=this.buffer[--i]);const s=i;for(;o===" "||o==="	";)o=this.buffer[--i];if(o===`
`&&i>=this.pos&&i+1+n>s)e=i;else break}while(!0);return yield fM,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let n=this.pos-1,r=this.pos-1,i;for(;i=this.buffer[++r];)if(i===":"){const o=this.buffer[r+1];if(ed(o)||e&&o===",")break;n=r}else if(ed(i)){let o=this.buffer[r+1];if(i==="\r"&&(o===`
`?(r+=1,i=`
`,o=this.buffer[r+1]):n=r),o==="#"||e&&LD.includes(o))break;if(i===`
`){const s=this.continueScalar(r+1);if(s===-1)break;r=Math.max(r,s-2)}}else{if(e&&LD.includes(i))break;n=r}return!i&&!this.atEnd?this.setNext("plain-scalar"):(yield fM,yield*this.pushToIndex(n+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,n){const r=this.buffer.slice(this.pos,e);return r?(yield r,this.pos+=r.length,r.length):(n&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(DD))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0,n=this.charAt(1);if(ed(n)||e&&LD.includes(n))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,n=this.buffer[e];for(;!ed(n)&&n!==">";)n=this.buffer[++e];return yield*this.pushToIndex(n===">"?e+1:e,!1)}else{let e=this.pos+1,n=this.buffer[e];for(;n;)if(M3e.includes(n))n=this.buffer[++e];else if(n==="%"&&A7.includes(this.buffer[e+1])&&A7.includes(this.buffer[e+2]))n=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let n=this.pos-1,r;do r=this.buffer[++n];while(r===" "||e&&r==="	");const i=n-this.pos;return i>0&&(yield this.buffer.substr(this.pos,i),this.pos=n),i}*pushUntil(e){let n=this.pos,r=this.buffer[n];for(;!e(r);)r=this.buffer[++n];return yield*this.pushToIndex(n,!1)}}class uoe{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let n=0,r=this.lineStarts.length;for(;n<r;){const o=n+r>>1;this.lineStarts[o]<e?n=o+1:r=o}if(this.lineStarts[n]===e)return{line:n+1,col:1};if(n===0)return{line:0,col:e};const i=this.lineStarts[n-1];return{line:n,col:e-i+1}}}}function ch(t,e){for(let n=0;n<t.length;++n)if(t[n].type===e)return!0;return!1}function P7(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function doe(t){switch(t==null?void 0:t.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function CC(t){switch(t.type){case"document":return t.start;case"block-map":{const e=t.items[t.items.length-1];return e.sep??e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function rx(t){var n;if(t.length===0)return[];let e=t.length;e:for(;--e>=0;)switch(t[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;((n=t[++e])==null?void 0:n.type)==="space";);return t.splice(e,t.length)}function I7(t){if(t.start.type==="flow-seq-start")for(const e of t.items)e.sep&&!e.value&&!ch(e.start,"explicit-key-ind")&&!ch(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,doe(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}class J${constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new coe,this.onNewLine=e}*parse(e,n=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const r of this.lexer.lex(e,n))yield*this.next(r);n||(yield*this.end())}*next(e){if(this.source=e,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}const n=loe(e);if(n)if(n==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=n,yield*this.step(),n){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{const r=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:r,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if(this.type==="doc-end"&&(!e||e.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){const n=e??this.stack.pop();if(!n)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield n;else{const r=this.peek(1);switch(n.type==="block-scalar"?n.indent="indent"in r?r.indent:0:n.type==="flow-collection"&&r.type==="document"&&(n.indent=0),n.type==="flow-collection"&&I7(n),r.type){case"document":r.value=n;break;case"block-scalar":r.props.push(n);break;case"block-map":{const i=r.items[r.items.length-1];if(i.value){r.items.push({start:[],key:n,sep:[]}),this.onKeyLine=!0;return}else if(i.sep)i.value=n;else{Object.assign(i,{key:n,sep:[]}),this.onKeyLine=!ch(i.start,"explicit-key-ind");return}break}case"block-seq":{const i=r.items[r.items.length-1];i.value?r.items.push({start:[],value:n}):i.value=n;break}case"flow-collection":{const i=r.items[r.items.length-1];!i||i.value?r.items.push({start:[],key:n,sep:[]}):i.sep?i.value=n:Object.assign(i,{key:n,sep:[]});return}default:yield*this.pop(),yield*this.pop(n)}if((r.type==="document"||r.type==="block-map"||r.type==="block-seq")&&(n.type==="block-map"||n.type==="block-seq")){const i=n.items[n.items.length-1];i&&!i.sep&&!i.value&&i.start.length>0&&P7(i.start)===-1&&(n.indent===0||i.start.every(o=>o.type!=="comment"||o.indent<n.indent))&&(r.type==="document"?r.end=i.start:r.items.push({start:i.start}),n.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{P7(e.start)!==-1?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}const n=this.startBlockValue(e);n?this.stack.push(n):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){const n=CC(this.peek(2)),r=rx(n);let i;e.end?(i=e.end,i.push(this.sourceToken),delete e.end):i=[this.sourceToken];const o={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:r,key:e,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=o}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){var r;const n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){const i="end"in n.value?n.value.end:void 0,o=Array.isArray(i)?i[i.length-1]:void 0;(o==null?void 0:o.type)==="comment"?i==null||i.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,e.indent)){const i=e.items[e.items.length-2],o=(r=i==null?void 0:i.value)==null?void 0:r.end;if(Array.isArray(o)){Array.prototype.push.apply(o,n.start),o.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const i=!this.onKeyLine&&this.indent===e.indent&&n.sep;let o=[];if(i&&n.sep&&!n.value){const s=[];for(let a=0;a<n.sep.length;++a){const l=n.sep[a];switch(l.type){case"newline":s.push(a);break;case"space":break;case"comment":l.indent>e.indent&&(s.length=0);break;default:s.length=0}}s.length>=2&&(o=n.sep.splice(s[1]))}switch(this.type){case"anchor":case"tag":i||n.value?(o.push(this.sourceToken),e.items.push({start:o}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!ch(n.start,"explicit-key-ind")?n.start.push(this.sourceToken):i||n.value?(o.push(this.sourceToken),e.items.push({start:o})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}),this.onKeyLine=!0;return;case"map-value-ind":if(ch(n.start,"explicit-key-ind"))if(n.sep)if(n.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(ch(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]});else if(doe(n.key)&&!ch(n.sep,"newline")){const s=rx(n.start),a=n.key,l=n.sep;l.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:a,sep:l}]})}else o.length>0?n.sep=n.sep.concat(o,this.sourceToken):n.sep.push(this.sourceToken);else if(ch(n.start,"newline"))Object.assign(n,{key:null,sep:[this.sourceToken]});else{const s=rx(n.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]})}else n.sep?n.value||i?e.items.push({start:o,key:null,sep:[this.sourceToken]}):ch(n.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const s=this.flowScalar(this.type);i||n.value?(e.items.push({start:o,key:s,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(s):(Object.assign(n,{key:s,sep:[]}),this.onKeyLine=!0);return}default:{const s=this.startBlockValue(e);if(s){i&&s.type!=="block-seq"&&ch(n.start,"explicit-key-ind")&&e.items.push({start:o}),this.stack.push(s);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){var r;const n=e.items[e.items.length-1];switch(this.type){case"newline":if(n.value){const i="end"in n.value?n.value.end:void 0,o=Array.isArray(i)?i[i.length-1]:void 0;(o==null?void 0:o.type)==="comment"?i==null||i.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,e.indent)){const i=e.items[e.items.length-2],o=(r=i==null?void 0:i.value)==null?void 0:r.end;if(Array.isArray(o)){Array.prototype.push.apply(o,n.start),o.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;n.value||ch(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>e.indent){const i=this.startBlockValue(e);if(i){this.stack.push(i);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){const n=e.items[e.items.length-1];if(this.type==="flow-error-end"){let r;do yield*this.pop(),r=this.peek(1);while(r&&r.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!n||n.sep?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return;case"map-value-ind":!n||n.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!n||n.value?e.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const i=this.flowScalar(this.type);!n||n.value?e.items.push({start:[],key:i,sep:[]}):n.sep?this.stack.push(i):Object.assign(n,{key:i,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}const r=this.startBlockValue(e);r?this.stack.push(r):(yield*this.pop(),yield*this.step())}else{const r=this.peek(2);if(r.type==="block-map"&&(this.type==="map-value-ind"&&r.indent===e.indent||this.type==="newline"&&!r.items[r.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&r.type!=="flow-collection"){const i=CC(r),o=rx(i);I7(e);const s=e.end.splice(1,e.end.length);s.push(this.sourceToken);const a={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:o,key:e,sep:s}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const n=CC(e),r=rx(n);return r.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r}]}}case"map-value-ind":{this.onKeyLine=!0;const n=CC(e),r=rx(n);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,n){return this.type!=="comment"||this.indent<=n?!1:e.every(r=>r.type==="newline"||r.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function hoe(t){const e=t.prettyErrors!==!1;return{lineCounter:t.lineCounter||e&&new uoe||null,prettyErrors:e}}function T3e(t,e={}){const{lineCounter:n,prettyErrors:r}=hoe(e),i=new J$(n==null?void 0:n.addNewLine),o=new Z$(e),s=Array.from(o.compose(i.parse(t)));if(r&&n)for(const a of s)a.errors.forEach(gI(t,n)),a.warnings.forEach(gI(t,n));return s.length>0?s:Object.assign([],{empty:!0},o.streamInfo())}function foe(t,e={}){const{lineCounter:n,prettyErrors:r}=hoe(e),i=new J$(n==null?void 0:n.addNewLine),o=new Z$(e);let s=null;for(const a of o.compose(i.parse(t),!0,t.length))if(!s)s=a;else if(s.options.logLevel!=="silent"){s.errors.push(new a0(a.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return r&&n&&(s.errors.forEach(gI(t,n)),s.warnings.forEach(gI(t,n))),s}function C3e(t,e,n){let r;typeof e=="function"?r=e:n===void 0&&e&&typeof e=="object"&&(n=e);const i=foe(t,n);if(!i)return null;if(i.warnings.forEach(o=>Lie(i.options.logLevel,o)),i.errors.length>0){if(i.options.logLevel!=="silent")throw i.errors[0];i.errors=[]}return i.toJS(Object.assign({reviver:r},n))}function A3e(t,e,n){let r=null;if(typeof e=="function"||Array.isArray(e)?r=e:n===void 0&&e&&(n=e),typeof n=="string"&&(n=n.length),typeof n=="number"){const i=Math.round(n);n=i<1?void 0:i>8?{indent:8}:{indent:i}}if(t===void 0){const{keepUndefined:i}=n??e??{};if(!i)return}return new K1(t,r,n).toString(n)}const vI=Object.freeze(Object.defineProperty({__proto__:null,Alias:qk,CST:S3e,Composer:Z$,Document:K1,Lexer:coe,LineCounter:uoe,Pair:vl,Parser:J$,Scalar:kr,Schema:rO,YAMLError:Y$,YAMLMap:au,YAMLParseError:a0,YAMLSeq:ky,YAMLWarning:Jie,isAlias:l_,isCollection:zo,isDocument:W1,isMap:G1,isNode:hs,isPair:Io,isScalar:oo,isSeq:q1,parse:C3e,parseAllDocuments:T3e,parseDocument:foe,stringify:A3e,visit:Ry,visitAsync:Gk},Symbol.toStringTag,{value:"Module"})),Oy=Ye.createContext();var R7="";const Z1=({children:t,notification:e})=>{const n=nr(A=>A.devices.items),r=nr(A=>A.mission),i=nr(A=>A.session.server.rosState),o=Ql(),[s,a]=V.useState(!1),[l,d]=V.useState(!1);V.useState(""),V.useEffect(()=>{a(i)},[i]);const h=async A=>{try{const P=await fetch("/api/rosConnect",{method:"POST",body:new URLSearchParams(`rosState=${encodeURIComponent(s)}`)});if(P.ok){let k=await P.json();k.state==="connect"&&(e("success",k.msg),a(!0)),k.state==="error"&&(a(!1),e("danger",k.msg)),k.state==="disconnect"&&(e("danger",k.msg),a(!1)),console.log(k)}else throw Error(await P.text())}catch{a(!1)}},p=async A=>{console.log(A.name+"-"+A.category);try{const P=await fetch("/api/devices",{method:"POST",body:JSON.stringify(A),headers:{"Content-Type":"application/json"}});if(P.ok){let k=await P.json();k.state==="connect"&&e("success",k.msg),k.state==="error"&&e("danger",k.msg),console.log(k)}else throw Error(await P.text())}catch{}},g=async()=>{try{const A=await fetch("/api/commands/send",{method:"POST",body:JSON.stringify({deviceId:-1,type:"loadMission",attributes:r.route}),headers:{"Content-Type":"application/json"}});if(A.ok){let P=await A.json();P.state==="connect"&&e("success",P.msg),P.state==="error"&&e("danger",P.msg),console.log(P)}else throw Error(await A.text())}catch(A){console.log(A)}},v=async()=>{let A=null,k=r.route.map(F=>F.uav).map(F=>Object.values(n).find(B=>B.name==F).id);console.log("command mission "),k&&k.length>0&&(A=k);try{const F=await fetch("/api/commands/send",{method:"POST",body:JSON.stringify({deviceId:A||-1,type:"commandMission"}),headers:{"Content-Type":"application/json"}});if(F.ok){const B=await F.json();B.state==="connect"&&e("success",B.msg),B.state==="error"&&e("danger",B.msg),console.log(B)}else throw Error(await F.text())}catch(F){console.log(F)}},x=(A,P)=>{if(A.endsWith(".yaml"))R7=vI.parse(P),o(Af.updateMission({...R7,name:A.slice(0,-5)}));else if(A.endsWith(".waypoints")){let F=P.split(`
`).map(J=>J.split("	")),B={uav_n:1,uav_1:{}},W=0;F.forEach(J=>{J[3]=="16"&&(B.uav_1["wp_"+W]=[J[8],J[9],J[10]],W=W+1)}),B.uav_1.wp_n=W,o(Af.updateMission({...B,name:A.slice(0,-10)}))}else if(A.endsWith(".kml")){let F=new DOMParser().parseFromString(P,"text/xml").getElementsByTagName("coordinates"),B=Object.values(F).map(H=>H.textContent.replace("	1","").replace(/(\r\n|\n|\r|\t)/gm,"").split(" ").map(le=>le.split(","))),W={uav_n:B.length},J=1;B.forEach(H=>{console.log(H);let Y=0;W["uav_"+J]={},H.forEach(le=>{le.length==3&&(W["uav_"+J]["wp_"+Y]=[le[1],le[0],le[2]],Y=Y+1)}),W["uav_"+J].wp_n=Y,J=J+1}),console.log(W),o(Af.updateMission({...W,name:A.slice(0,-4)}))}else if(A.endsWith(".plan")){let k=JSON.parse(P),F={uav_n:1,uav_1:{}},B=0;k.mission.items.forEach(W=>{F.uav_1["wp_"+B]=[W.params[4],W.params[5],W.Altitude],B=B+1}),F.uav_1.wp_n=B,o(Af.updateMission({...F,name:A.slice(0,-5)}))}else e("danger","Formato de mission no compatible")},b=()=>{h()};async function w(A){s?p(A):alert(`
Ros no está conectado.

 Por favor conéctelo primero.`)}function S(){g()}function C(){v()}return z.jsx("div",{style:{width:"100%",height:"100%"},children:z.jsx(Oy.Provider,{value:{rosConnect:b,rosState:s,openMision:x,connectAddUav:w,commandMission:C,loadMission:S,confirmMission:l,setconfirmMission:d},children:t})})};var Q$={},ND={};const P3e=Zf(Pwe);var k7;function oi(){return k7||(k7=1,function(t){"use client";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=P3e}(ND)),ND}var I3e=Xr;Object.defineProperty(Q$,"__esModule",{value:!0});var eU=Q$.default=void 0,R3e=I3e(oi()),k3e=z;eU=Q$.default=(0,R3e.default)((0,k3e.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm4 18H6V4h7v5h5zM8 15.01l1.41 1.41L11 14.84V19h2v-4.16l1.59 1.59L16 15.01 12.01 11z"}),"UploadFile");const O3e=Wr(t=>({input:{display:"none"},parent:{alignItems:"center",justifyContent:"center",padding:"6px 16px"}})),poe=({title:t,readFile:e,typefiles:n=".yaml, .plan, .waypoint, .kml"})=>{const r=O3e();return z.jsx("div",{className:r.parent,children:z.jsxs("label",{htmlFor:"upload-gpx",children:[z.jsx("input",{accept:n,id:"upload-gpx",type:"file",className:r.input,onChange:e}),t?z.jsx(yn,{children:t}):z.jsx(hr,{edge:"end",component:"span",onClick:()=>{},children:z.jsx(eU,{})})]})})},moe=({items:t,depthLevel:e})=>{const[n,r]=V.useState(null),i=!!n,o=a=>{r(a.currentTarget)},s=()=>{r(null)};return z.jsxs("div",{children:[z.jsx(jr,{id:"fade-button","aria-controls":i?"fade-menu":void 0,"aria-haspopup":"true","aria-expanded":i?"true":void 0,onClick:o,sx:{color:"#FFFFFF",fontSize:16},style:{textTransform:"none"},children:t.title}),t.submenu&&z.jsx(E$,{id:"fade-menu",MenuListProps:{"aria-labelledby":"fade-button"},anchorEl:n,open:i,onClose:s,TransitionComponent:Mre,children:t.submenu.map((a,l)=>a.input?z.jsx(poe,{title:a.title,readFile:d=>{a.input(d)},typefiles:a.type},"men"+l):z.jsx(fu,{onClick:()=>{s(),a.action&&a.action()},children:a.title},"men"+l))})]})},HE=({SetAddUAVOpen:t,setconfirmMission:e=n=>n})=>{const n=Ql(),r=Jf(),i=V.useContext(Oy),o=zf("latitude"),s=zf("longitude"),a=zf("zoom",10),l=[{title:"ROS",submenu:[{title:"Connect ROS",action:()=>i.rosConnect()},{title:"Show Topics",action:()=>r("/topics")},{title:"Show Services"}]},{title:"Devices",submenu:[{title:"Connect Devices",action:()=>v()},{title:"Load Mission all",action:()=>i.loadMission()},{title:"Command Mission All",action:()=>e(!0)}]},{title:"Mission",submenu:[{title:" Open Mission",input:x=>h(x)},{title:"Clear mission",action:()=>d()},{title:"Edit mission",action:()=>r("/mission")},{title:"Planning",action:()=>r("/planning")}]},{title:"View",submenu:[{title:"Enviroment Features"},{title:"add elements",input:x=>p(x),type:".kml"},{title:"Camera view",action:()=>r("/camera")},{title:"3D view",action:()=>r("/3Dmission")},{title:"Mission test",action:()=>r("/missiontest")}]},{title:"Report",submenu:[{title:"Missions",action:()=>r("/reports/mission")},{title:"events",action:()=>r("/reports/events")}]}],d=()=>{n(Af.clearMission({}))},h=x=>{const b=x.target.files[0];if(!b)return;const w=new FileReader;w.readAsText(b),w.onload=()=>{i.openMision(b.name,w.result)},w.onerror=()=>{console.log("error"),console.log(w.error)}},p=x=>{const b=x.target.files[0];if(!b)return;const w=new FileReader;w.readAsText(b),w.onload=()=>{console.log(w.result);let S=new DOMParser().parseFromString(w.result,"text/xml");console.log(S);let C=S.getElementsByTagName("Point");console.log(C);let A=Object.values(C).map(W=>W.textContent.replace("	1","").replace(/(\r\n|\n|\r|\t)/gm,"").split(","));console.log(A);let P=S.getElementsByTagName("coordinates");console.log(P);const k=Object.values(P).map(W=>W.textContent.replace("	1","").replace(/(\r\n|\n|\r|\t)/gm,"").split(" ")),F=k.map(W=>W.map(J=>J.split(",")));console.log(k),console.log(F);let B=[];if(A.length)return console.log("add markers"),B=A.map((W,J,H)=>({latitude:Number(W[1]),longitude:Number(W[0]),image:"base"})),console.log(B),n(gh.addMarkerBase(B)),null;F.length&&(console.log("add towers markers"),F.map(W=>{console.log(W);const J=[];W.map(H=>(console.log(H),H.length>1&&J.push({latitude:Number(H[1]),longitude:Number(H[0])}),null)),B.push({type:"powerTower",items:J})}),console.log(B),n(gh.addMarkerElement(B)))},w.onerror=()=>{console.log("error"),console.log(w.error)}};function g(){it.easeTo({center:[s,o],zoom:Math.max(it.getZoom(),a),offset:[0,-1/2]})}function v(){t(!0)}return z.jsx(j1,{position:"static",style:{backgroundColor:"#333",height:"52px"},children:z.jsx(s_,{maxWidth:"x",children:z.jsxs(Rm,{disableGutters:!0,children:[z.jsx(jr,{onClick:()=>{g(),r("/")},children:z.jsx(yn,{variant:"h6",noWrap:!0,component:"a",sx:{mr:2,display:{xs:"none",md:"flex"},fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"#FFFFFF",textDecoration:"none"},children:"Management Tool"})}),Ye.Children.toArray(l.map((x,b)=>z.jsx(V.Fragment,{children:z.jsx(moe,{items:x,depthLevel:0})},"s-"+b)))]})})})},L3e=ja(z.jsx("path",{d:"m3.55 18.54 1.41 1.41 1.79-1.8-1.41-1.41zM11 22.45h2V19.5h-2zM4 10.5H1v2h3zm11-4.19V1.5H9v4.81C7.21 7.35 6 9.28 6 11.5c0 3.31 2.69 6 6 6s6-2.69 6-6c0-2.22-1.21-4.15-3-5.19m5 4.19v2h3v-2zm-2.76 7.66 1.79 1.8 1.41-1.41-1.8-1.79z"}),"WbIncandescent"),D3e=ja(z.jsx("path",{d:"m3.55 19.09 1.41 1.41 1.79-1.8-1.41-1.41zM11 20h2v3h-2zM1 11h3v2H1zm12-6.95v3.96l1 .58c1.24.72 2 2.04 2 3.46 0 2.21-1.79 4-4 4s-4-1.79-4-4c0-1.42.77-2.74 2-3.46l1-.58V4.05zm2-2H9v4.81C7.21 7.9 6 9.83 6 12.05c0 3.31 2.69 6 6 6s6-2.69 6-6c0-2.22-1.21-4.15-3-5.19zM20 11h3v2h-3zm-2.76 7.71 1.79 1.8 1.41-1.41-1.8-1.79z"}),"WbIncandescentOutlined"),N3e=ja(z.jsx("path",{d:"m1 9 2 2c4.97-4.97 13.03-4.97 18 0l2-2C16.93 2.93 7.08 2.93 1 9m8 8 3 3 3-3c-1.65-1.66-4.34-1.66-6 0m-4-4 2 2c2.76-2.76 7.24-2.76 10 0l2-2C15.14 9.14 8.87 9.14 5 13"}),"Wifi"),z3e=ja(z.jsx("path",{d:"M22.99 9C19.15 5.16 13.8 3.76 8.84 4.78l2.52 2.52c3.47-.17 6.99 1.05 9.63 3.7zm-4 4c-1.29-1.29-2.84-2.13-4.49-2.56l3.53 3.53zM2 3.05 5.07 6.1C3.6 6.82 2.22 7.78 1 9l1.99 2c1.24-1.24 2.67-2.16 4.2-2.77l2.24 2.24C7.81 10.89 6.27 11.73 5 13v.01L6.99 15c1.36-1.36 3.14-2.04 4.92-2.06L18.98 20l1.27-1.26L3.29 1.79zM9 17l3 3 3-3c-1.65-1.66-4.34-1.66-6 0"}),"WifiOff");var tU={},F3e=Xr;Object.defineProperty(tU,"__esModule",{value:!0});var goe=tU.default=void 0,B3e=F3e(oi()),j3e=z;goe=tU.default=(0,B3e.default)((0,j3e.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home");var nU={},$3e=Xr;Object.defineProperty(nU,"__esModule",{value:!0});var yoe=nU.default=void 0,U3e=$3e(oi()),V3e=z;yoe=nU.default=(0,U3e.default)((0,V3e.jsx)("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8z"}),"Folder");var rU={},H3e=Xr;Object.defineProperty(rU,"__esModule",{value:!0});var voe=rU.default=void 0,W3e=H3e(oi()),G3e=z;voe=rU.default=(0,W3e.default)((0,G3e.jsx)("path",{d:"M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5z"}),"Flight");var iU={},q3e=Xr;Object.defineProperty(iU,"__esModule",{value:!0});var _oe=iU.default=void 0,X3e=q3e(oi()),Y3e=z;_oe=iU.default=(0,X3e.default)((0,Y3e.jsx)("path",{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"}),"FileUpload");var oU={},K3e=Xr;Object.defineProperty(oU,"__esModule",{value:!0});var xoe=oU.default=void 0,Z3e=K3e(oi()),J3e=z;xoe=oU.default=(0,Z3e.default)((0,J3e.jsx)("path",{d:"M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H3V5h10v4h8z"}),"Tab");var sU={},Q3e=Xr;Object.defineProperty(sU,"__esModule",{value:!0});var boe=sU.default=void 0,eDe=Q3e(oi()),tDe=z;boe=sU.default=(0,eDe.default)((0,tDe.jsx)("path",{d:"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11"}),"Reply");var aU={},nDe=Xr;Object.defineProperty(aU,"__esModule",{value:!0});var woe=aU.default=void 0,rDe=nDe(oi()),iDe=z;woe=aU.default=(0,rDe.default)((0,iDe.jsx)("path",{d:"M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5z"}),"CallMade");var lU={},oDe=Xr;Object.defineProperty(lU,"__esModule",{value:!0});var Soe=lU.default=void 0,sDe=oDe(oi()),aDe=z;Soe=lU.default=(0,sDe.default)((0,aDe.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"ModeEdit");var cU={},lDe=Xr;Object.defineProperty(cU,"__esModule",{value:!0});var Moe=cU.default=void 0,cDe=lDe(oi()),uDe=z;Moe=cU.default=(0,cDe.default)((0,uDe.jsx)("path",{d:"m19 8-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4z"}),"Cached");const dDe=Wr(t=>({toolbar:{height:"36px",background:"linear-gradient(#E7E5E7, #D3D1D3)",borderTop:"1px solid rgba(255, 255, 255, .6)"},mediaButton:{width:"auto",color:Lf[700],backgroundColor:"#F9F9F9",boxShadow:"inset 0px -4px 4px 0 rgba(0, 0, 0, 0.1)",maxHeight:"22px",top:"2px",border:"1px solid #C2C0C2",margin:"5px 10px",fontSize:"12px","&:hover":{backgroundColor:Lf[300]}},mediaicon:{color:Lf[700],width:"15px"}})),J1=({SetAddUAVOpen:t})=>{const e=dDe(),n=V.useContext(Oy),[r,i]=V.useState("no load mission"),o=nr(S=>S.mission.name),s=nr(S=>S.mission.home),[a,l]=V.useState(!0),d=zf("latitude"),h=zf("longitude"),p=zf("zoom",10),g=S=>{const C=S.target.files[0];if(!C)return;const A=new FileReader;A.readAsText(C),A.onload=()=>{console.log(A.result),console.log(C.name),n.openMision(C.name,A.result)},A.onerror=()=>{console.log(A.error)}};function v(){it.easeTo({center:[h,d],zoom:Math.max(it.getZoom(),p),offset:[0,-1/2]})}function x(){it.easeTo({center:[s[1],s[0]],zoom:Math.max(it.getZoom(),p),offset:[0,-1/2]})}function b(){t(!0)}const w=()=>{l(!a)};return V.useEffect(()=>{i(o)},[o]),V.useEffect(()=>{x()},[s]),z.jsx("header",{className:e.toolbar,children:z.jsxs("div",{children:[z.jsxs(eTe,{style:{height:"26px",display:"inline",justifyContent:"flex-end"},children:[z.jsx(jr,{onClick:v,className:e.mediaButton,style:{margin:"0px 0px"},children:z.jsx(goe,{fontSize:"small",className:e.mediaicon})}),z.jsxs(jr,{id:"openMission",className:e.mediaButton,style:{margin:"0px 0px"},children:[z.jsx("label",{htmlFor:"openMissionNavbar",style:{padding:0},children:z.jsx(yoe,{fontSize:"small",className:e.mediaicon,style:{position:"relative",top:"3px"}})}),z.jsx("input",{type:"file",multiple:!1,style:{display:"none"},id:"openMissionNavbar",onChange:g})]}),z.jsx(jr,{id:"openAddUav",onClick:b,className:e.mediaButton,style:{margin:"0px 0px"},children:z.jsx(voe,{fontSize:"small",className:e.mediaicon,style:{transform:"rotate(90deg)"}})})]}),z.jsx(Oy.Consumer,{children:({rosState:S})=>z.jsxs(jr,{id:"rosConnect",onClick:n.rosConnect,className:e.mediaButton,children:[S&&"conectado"," ",!S&&"desconectado"," "]})}),z.jsx(jr,{id:"loadMission",size:"small",onClick:b,className:e.mediaButton,children:z.jsx(_oe,{fontSize:"small",className:e.mediaicon})}),z.jsx(jr,{id:"commandMission",onClick:b,className:e.mediaButton,children:"Fly!"}),z.jsxs(jr,{id:"openedmission",onClick:x,className:e.mediaButton,style:{margin:"0px 100px",width:"500px"},children:[" ",r]}),z.jsx(jr,{variant:"filledTonal",onClick:S=>w(),className:e.mediaButton,children:"Status"}),z.jsx(jr,{id:"openTerminal",style:{visibility:!0},className:e.mediaButton,children:z.jsx(xoe,{fontSize:"small",className:e.mediaicon})}),z.jsx(jr,{id:"UndoMission",style:{visibility:!0},className:e.mediaButton,children:z.jsx(boe,{fontSize:"small",className:e.mediaicon})}),z.jsx(jr,{id:"reset",className:e.mediaButton,children:z.jsx(woe,{fontSize:"small",className:e.mediaicon})}),z.jsx(jr,{id:"showManualMode",className:e.mediaButton,children:z.jsx(Soe,{fontSize:"small",className:e.mediaicon})}),z.jsx(jr,{id:"commandManualMission",style:{visibility:!0},className:e.mediaButton,children:z.jsx(Moe,{fontSize:"small",className:e.mediaicon})})]})})};var uU={},hDe=Xr;Object.defineProperty(uU,"__esModule",{value:!0});var Ph=uU.default=void 0,fDe=hDe(oi()),pDe=z;Ph=uU.default=(0,fDe.default)((0,pDe.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");const mDe=Wr(t=>({title:{fontWeight:700,fontSize:"16px",textAlign:"left",marginTop:0,marginBottom:"6px",width:"300px",height:"18px"},mediaButton:{color:"#fff",mixBlendMode:"difference",right:0,top:0},description:{margin:0,textAlign:"left",fontSize:"12px",paddingLeft:"1rem"},toast:{height:"60px",width:"365px",color:"#fff",marginBottom:"1rem"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(.5,1,0,2)},card:{pointerEvents:"auto",height:"60px",width:"365px",color:"#fff",marginBottom:"1rem"},root:{pointerEvents:"none",position:"fixed",zIndex:5,bottom:"1rem",right:"1rem"}})),gDe=({toastlist:t,position:e,setList:n})=>{const r=mDe(),i=V.useCallback(o=>{const s=t.filter(a=>a.id!==o);n(s)},[t,n]);return V.useEffect(()=>{const o=setInterval(()=>{t.length&&i(t[0].id)},3e3);return()=>{clearInterval(o)}},[t,i]),z.jsx("div",{className:r.root,children:t.map((o,s)=>z.jsxs(Nh,{elevation:3,className:r.card,style:{backgroundColor:o.backgroundColor},children:[z.jsxs("div",{className:r.header,children:[z.jsx(yn,{variant:"body2",children:o.title}),z.jsx(hr,{size:"small",onClick:()=>i(o.id),onTouchStart:()=>i(o.id),children:z.jsx(Ph,{fontSize:"small",className:r.mediaButton})})]}),z.jsx("div",{children:z.jsx("p",{className:r.description,children:o.description})})]}))})};var dU={},yDe=Xr;Object.defineProperty(dU,"__esModule",{value:!0});var La=dU.default=void 0,vDe=yDe(oi()),_De=z;La=dU.default=(0,vDe.default)((0,_De.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");const lu=({label:t,fullWidth:e,multiple:n,value:r,emptyValue:i=0,emptyTitle:o=" ",onChange:s,endpoint:a,data:l,keyGetter:d=g=>g.id,titleGetter:h=g=>g.name,getItems:p=g=>g})=>{const[g,v]=V.useState(l);return Vy(async()=>{if(a){const x=await fetch(a);if(x.ok)v(await x.json());else throw Error(await x.text())}},[]),V.useEffect(()=>{typeof g<"u"&&r!==null&&p(g[r]),typeof g<"u"&&i==null&&r==null&&g&&g.length&&g.length>0&&s({target:{value:g[0]}})},[g,r]),g?z.jsxs(NE,{fullWidth:e,children:[z.jsx(zE,{children:t}),r!==null&&z.jsxs(U1,{label:t,multiple:n,value:r,onChange:x=>s(x,g),children:[!n&&i!==null&&z.jsx(fu,{value:i,children:o}),g.map(x=>z.jsx(fu,{value:d(x),children:h(x)},d(x)))]})]}):null};var hU={},xDe=Xr;Object.defineProperty(hU,"__esModule",{value:!0});var Mu=hU.default=void 0,bDe=xDe(oi()),wDe=z;Mu=hU.default=(0,bDe.default)((0,wDe.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");const SDe=Wr(t=>({root:{pointerEvents:"none",position:"fixed",zIndex:6,left:"50%",top:"20%",transform:"translateX(-50%)"},card:{pointerEvents:"auto",display:"block",width:"400px",height:"70vh",transitionDuration:"0.3s",overflowY:"auto"},mediaButton:{color:t.palette.colors.white,mixBlendMode:"difference"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(1,1,0,2)},button:{width:"80%",paddingBottom:"10pt",paddingTop:"10pt"},formControl:{margin:t.spacing(1),gap:t.spacing(2),paddingBottom:"20pt"},inputtext:{paddingBottom:"20px"},details:{display:"flex",flexDirection:"column",gap:"10pt",paddingBottom:"20pt"},title:{display:"block",width:"calc( 100% - 60pt )",paddingLeft:"15pt",paddingTop:"10pt",paddingBottom:"20pt",textAlign:"left"},closeBtn:{display:"flex",right:"5px",height:"35px",position:"absolute"},attributeName:{display:"inline-block",width:"40%",textAlign:"left",verticalAlign:"middle"},attributeValue:{display:"inline-block",width:"58%"},actionValue:{display:"inline-block",width:"40%"}})),MDe=({SetAddUAVOpen:t})=>{const e=SDe(),n=V.useContext(Oy),[r,i]=V.useState({name:"uav_",ip:"10.42.0.42",camera:[]});function o(){t(!1)}function s(){console.log("add uav-"+r.name+"-"+r.category),console.log(r),n.connectAddUav(r),t(!1)}const a=d=>{let h=JSON.parse(JSON.stringify(r.camera));h.splice(d,1),i({...r,camera:h})};function l(){let d=JSON.parse(JSON.stringify(r.camera));d.push({type:"WebRTC",source:""}),i({...r,camera:d})}return z.jsx("div",{className:e.root,children:z.jsxs(Nh,{elevation:3,className:e.card,children:[z.jsx("div",{className:e.closeBtn,children:z.jsx(hr,{size:"small",onClick:o,onTouchStart:o,children:z.jsx(Ph,{fontSize:"small",className:e.mediaButton})})}),z.jsx("b",{children:z.jsx("div",{className:e.title,children:"Add device "})}),z.jsxs(ml,{defaultExpanded:!0,children:[z.jsx(yl,{expandIcon:z.jsx(La,{}),children:z.jsx(yn,{variant:"subtitle1",children:"Datos UAV"})}),z.jsxs(gl,{className:e.details,children:[z.jsx(bi,{required:!0,label:"UAV ID",name:"uavid",value:r.name,onChange:d=>i({...r,name:d.target.value})}),z.jsx(lu,{emptyValue:null,value:r.category?r.category:null,onChange:d=>i({...r,category:d.target.value}),endpoint:"/api/category",keyGetter:d=>d,titleGetter:d=>d,label:"Type UAV "}),r.category&&z.jsx(lu,{emptyValue:null,value:r.protocol?r.protocol:null,onChange:d=>i({...r,protocol:d.target.value}),endpoint:"/api/server/protocol",keyGetter:d=>d,titleGetter:d=>d,label:"Protocol "}),z.jsx(bi,{label:"ip",value:r.ip,onChange:d=>i({...r,ip:d.target.value})})]})]}),r&&z.jsxs(ml,{children:[z.jsx(yl,{expandIcon:z.jsx(La,{}),children:z.jsx(yn,{variant:"subtitle1",children:"Camera"})}),z.jsxs(gl,{className:e.details,children:[r.camera&&r.camera.map((d,h,p)=>z.jsxs(V.Fragment,{children:[z.jsx(yn,{variant:"subtitle1",className:e.attributeName,children:"Camera "+h}),z.jsxs("div",{children:[z.jsxs(NE,{variant:"outlined",children:[z.jsx(zE,{id:"demo-simple-select-outlined-label",children:"CameraType"}),z.jsxs(U1,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:d.type,label:"type",onChange:g=>i({...r,camera:r.camera.map((v,x)=>{let b=JSON.parse(JSON.stringify(v));return h==x&&(b.type=g.target.value),b})}),children:[z.jsx(fu,{value:"WebRTC",children:"WebRTC"}),z.jsx(fu,{value:"WebRTC_env",children:"WebRTCenv"}),z.jsx(fu,{value:"Websocket",children:"Websocket"})]})]}),z.jsx("div",{className:e.actionValue,children:z.jsx(bi,{required:!0,fullWidth:!0,value:d.source,onChange:g=>i({...r,camera:r.camera.map((v,x)=>{let b=JSON.parse(JSON.stringify(v));return h==x&&(b.source=g.target.value),b})})})}),z.jsx(hr,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>a(h),className:e.negative,children:z.jsx(Mu,{})})]}),z.jsx(Py,{})]},"fragment-action-"+h)),z.jsx(jr,{variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:l,children:"Add camera source"})]})]}),z.jsx("div",{style:{paddingBottom:"20pt",paddingTop:"20pt",display:"flex",justifyContent:"center"},children:z.jsx(jr,{className:e.button,variant:"contained",onClick:s,children:"ADD"})})]})})},_I="/assets/placeholder-ipViEH7R.jpg";var fU={},EDe=Xr;Object.defineProperty(fU,"__esModule",{value:!0});var pU=fU.default=void 0,TDe=EDe(oi()),CDe=z;pU=fU.default=(0,TDe.default)((0,CDe.jsx)("path",{d:"m15 3 2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm6 12-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6zm12-6-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6z"}),"ZoomOutMap");const ADe=Wr(t=>({card:{pointerEvents:"auto",width:t.dimensions.popupMaxWidth},card_max:{pointerEvents:"auto",width:"100%"},media:{width:"100%",display:"flex",justifyContent:"flex-end",alignItems:"flex-start"},mediaButton:{color:t.palette.colors.white,mixBlendMode:"difference"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(1,1,0,2)},root:{pointerEvents:"none",position:"fixed",zIndex:6,left:"360px",top:t.spacing(15),transform:"translateX(1%)"},root_max:{pointerEvents:"none",position:"fixed",zIndex:6,left:"51%",top:"5%",transform:"translateX(-50%)",width:"55%"}})),PDe=({deviceId:t,datacamera:e,onClose:n})=>{const r=ADe(),[i,o]=V.useState(_I),s=nr(g=>g.devices.items[t]),[a,l]=V.useState(!1);let d=a?r.card_max:r.card,h=a?r.root_max:r.root;function p(){l(!a)}return V.useEffect(()=>{t!=null&&(e!=null?o("data:image/bgr8;base64,"+e.camera):o(_I))},[e]),z.jsx("div",{className:h,children:s&&z.jsxs(Nh,{elevation:3,className:d,children:[z.jsxs("div",{style:{display:"flex",right:"5px",height:"35px",position:"absolute"},children:[z.jsx(hr,{size:"small",onClick:p,onTouchStart:p,children:z.jsx(pU,{fontSize:"small",className:r.mediaButton})}),z.jsx(hr,{size:"small",onClick:()=>{n(),l(!1)},onTouchStart:n,children:z.jsx(Ph,{fontSize:"small",className:r.mediaButton})})]}),z.jsxs("div",{style:{display:"block",width:"calc( 100% - 60pt )",paddingLeft:"15pt",paddingTop:"10pt",paddingBottom:"10pt",textAlign:"left"},children:["Image "+s.name," "]}),z.jsx("img",{src:i,className:r.media})]})})};var O7=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function IDe(t,e){return!!(t===e||O7(t)&&O7(e))}function RDe(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!IDe(t[n],e[n]))return!1;return!0}function zD(t,e){e===void 0&&(e=RDe);var n,r=[],i,o=!1;function s(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return o&&n===this&&e(a,r)||(i=t.apply(this,a),o=!0,n=this,r=a),i}return s}var kDe=typeof performance=="object"&&typeof performance.now=="function",L7=kDe?function(){return performance.now()}:function(){return Date.now()};function D7(t){cancelAnimationFrame(t.id)}function ODe(t,e){var n=L7();function r(){L7()-n>=e?t.call(null):i.id=requestAnimationFrame(r)}var i={id:requestAnimationFrame(r)};return i}var FD=-1;function N7(t){if(t===void 0&&(t=!1),FD===-1||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(e),FD=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return FD}var ix=null;function z7(t){if(t===void 0&&(t=!1),ix===null||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var r=document.createElement("div"),i=r.style;return i.width="100px",i.height="100px",e.appendChild(r),document.body.appendChild(e),e.scrollLeft>0?ix="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?ix="negative":ix="positive-ascending"),document.body.removeChild(e),ix}return ix}var LDe=150,DDe=function(e,n){return e};function NDe(t){var e,n=t.getItemOffset,r=t.getEstimatedTotalSize,i=t.getItemSize,o=t.getOffsetForIndexAndAlignment,s=t.getStartIndexForOffset,a=t.getStopIndexForStartIndex,l=t.initInstanceProps,d=t.shouldResetStyleCacheOnItemSizeChange,h=t.validateProps;return e=function(p){OE(g,p);function g(x){var b;return b=p.call(this,x)||this,b._instanceProps=l(b.props,oM(b)),b._outerRef=void 0,b._resetIsScrollingTimeoutId=null,b.state={instance:oM(b),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof b.props.initialScrollOffset=="number"?b.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},b._callOnItemsRendered=void 0,b._callOnItemsRendered=zD(function(w,S,C,A){return b.props.onItemsRendered({overscanStartIndex:w,overscanStopIndex:S,visibleStartIndex:C,visibleStopIndex:A})}),b._callOnScroll=void 0,b._callOnScroll=zD(function(w,S,C){return b.props.onScroll({scrollDirection:w,scrollOffset:S,scrollUpdateWasRequested:C})}),b._getItemStyle=void 0,b._getItemStyle=function(w){var S=b.props,C=S.direction,A=S.itemSize,P=S.layout,k=b._getItemStyleCache(d&&A,d&&P,d&&C),F;if(k.hasOwnProperty(w))F=k[w];else{var B=n(b.props,w,b._instanceProps),W=i(b.props,w,b._instanceProps),J=C==="horizontal"||P==="horizontal",H=C==="rtl",Y=J?B:0;k[w]=F={position:"absolute",left:H?void 0:Y,right:H?Y:void 0,top:J?0:B,height:J?"100%":W,width:J?W:"100%"}}return F},b._getItemStyleCache=void 0,b._getItemStyleCache=zD(function(w,S,C){return{}}),b._onScrollHorizontal=function(w){var S=w.currentTarget,C=S.clientWidth,A=S.scrollLeft,P=S.scrollWidth;b.setState(function(k){if(k.scrollOffset===A)return null;var F=b.props.direction,B=A;if(F==="rtl")switch(z7()){case"negative":B=-A;break;case"positive-descending":B=P-C-A;break}return B=Math.max(0,Math.min(B,P-C)),{isScrolling:!0,scrollDirection:k.scrollOffset<B?"forward":"backward",scrollOffset:B,scrollUpdateWasRequested:!1}},b._resetIsScrollingDebounced)},b._onScrollVertical=function(w){var S=w.currentTarget,C=S.clientHeight,A=S.scrollHeight,P=S.scrollTop;b.setState(function(k){if(k.scrollOffset===P)return null;var F=Math.max(0,Math.min(P,A-C));return{isScrolling:!0,scrollDirection:k.scrollOffset<F?"forward":"backward",scrollOffset:F,scrollUpdateWasRequested:!1}},b._resetIsScrollingDebounced)},b._outerRefSetter=function(w){var S=b.props.outerRef;b._outerRef=w,typeof S=="function"?S(w):S!=null&&typeof S=="object"&&S.hasOwnProperty("current")&&(S.current=w)},b._resetIsScrollingDebounced=function(){b._resetIsScrollingTimeoutId!==null&&D7(b._resetIsScrollingTimeoutId),b._resetIsScrollingTimeoutId=ODe(b._resetIsScrolling,LDe)},b._resetIsScrolling=function(){b._resetIsScrollingTimeoutId=null,b.setState({isScrolling:!1},function(){b._getItemStyleCache(-1,null)})},b}g.getDerivedStateFromProps=function(b,w){return zDe(b,w),h(b),null};var v=g.prototype;return v.scrollTo=function(b){b=Math.max(0,b),this.setState(function(w){return w.scrollOffset===b?null:{scrollDirection:w.scrollOffset<b?"forward":"backward",scrollOffset:b,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},v.scrollToItem=function(b,w){w===void 0&&(w="auto");var S=this.props,C=S.itemCount,A=S.layout,P=this.state.scrollOffset;b=Math.max(0,Math.min(b,C-1));var k=0;if(this._outerRef){var F=this._outerRef;A==="vertical"?k=F.scrollWidth>F.clientWidth?N7():0:k=F.scrollHeight>F.clientHeight?N7():0}this.scrollTo(o(this.props,b,w,P,this._instanceProps,k))},v.componentDidMount=function(){var b=this.props,w=b.direction,S=b.initialScrollOffset,C=b.layout;if(typeof S=="number"&&this._outerRef!=null){var A=this._outerRef;w==="horizontal"||C==="horizontal"?A.scrollLeft=S:A.scrollTop=S}this._callPropsCallbacks()},v.componentDidUpdate=function(){var b=this.props,w=b.direction,S=b.layout,C=this.state,A=C.scrollOffset,P=C.scrollUpdateWasRequested;if(P&&this._outerRef!=null){var k=this._outerRef;if(w==="horizontal"||S==="horizontal")if(w==="rtl")switch(z7()){case"negative":k.scrollLeft=-A;break;case"positive-ascending":k.scrollLeft=A;break;default:var F=k.clientWidth,B=k.scrollWidth;k.scrollLeft=B-F-A;break}else k.scrollLeft=A;else k.scrollTop=A}this._callPropsCallbacks()},v.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&D7(this._resetIsScrollingTimeoutId)},v.render=function(){var b=this.props,w=b.children,S=b.className,C=b.direction,A=b.height,P=b.innerRef,k=b.innerElementType,F=b.innerTagName,B=b.itemCount,W=b.itemData,J=b.itemKey,H=J===void 0?DDe:J,Y=b.layout,le=b.outerElementType,pe=b.outerTagName,re=b.style,me=b.useIsScrolling,he=b.width,we=this.state.isScrolling,ee=C==="horizontal"||Y==="horizontal",ye=ee?this._onScrollHorizontal:this._onScrollVertical,be=this._getRangeToRender(),Le=be[0],je=be[1],dt=[];if(B>0)for(var Be=Le;Be<=je;Be++)dt.push(V.createElement(w,{data:W,key:H(Be,W),index:Be,isScrolling:me?we:void 0,style:this._getItemStyle(Be)}));var ot=r(this.props,this._instanceProps);return V.createElement(le||pe||"div",{className:S,onScroll:ye,ref:this._outerRefSetter,style:de({position:"relative",height:A,width:he,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:C},re)},V.createElement(k||F||"div",{children:dt,ref:P,style:{height:ee?"100%":ot,pointerEvents:we?"none":void 0,width:ee?ot:"100%"}}))},v._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var b=this.props.itemCount;if(b>0){var w=this._getRangeToRender(),S=w[0],C=w[1],A=w[2],P=w[3];this._callOnItemsRendered(S,C,A,P)}}if(typeof this.props.onScroll=="function"){var k=this.state,F=k.scrollDirection,B=k.scrollOffset,W=k.scrollUpdateWasRequested;this._callOnScroll(F,B,W)}},v._getRangeToRender=function(){var b=this.props,w=b.itemCount,S=b.overscanCount,C=this.state,A=C.isScrolling,P=C.scrollDirection,k=C.scrollOffset;if(w===0)return[0,0,0,0];var F=s(this.props,k,this._instanceProps),B=a(this.props,F,k,this._instanceProps),W=!A||P==="backward"?Math.max(1,S):1,J=!A||P==="forward"?Math.max(1,S):1;return[Math.max(0,F-W),Math.max(0,Math.min(w-1,B+J)),F,B]},g}(V.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}var zDe=function(e,n){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,n.instance},FDe=NDe({getItemOffset:function(e,n){var r=e.itemSize;return n*r},getItemSize:function(e,n){var r=e.itemSize;return r},getEstimatedTotalSize:function(e){var n=e.itemCount,r=e.itemSize;return r*n},getOffsetForIndexAndAlignment:function(e,n,r,i,o,s){var a=e.direction,l=e.height,d=e.itemCount,h=e.itemSize,p=e.layout,g=e.width,v=a==="horizontal"||p==="horizontal",x=v?g:l,b=Math.max(0,d*h-x),w=Math.min(b,n*h),S=Math.max(0,n*h-x+h+s);switch(r==="smart"&&(i>=S-x&&i<=w+x?r="auto":r="center"),r){case"start":return w;case"end":return S;case"center":{var C=Math.round(S+(w-S)/2);return C<Math.ceil(x/2)?0:C>b+Math.floor(x/2)?b:C}case"auto":default:return i>=S&&i<=w?i:i<S?S:w}},getStartIndexForOffset:function(e,n){var r=e.itemCount,i=e.itemSize;return Math.max(0,Math.min(r-1,Math.floor(n/i)))},getStopIndexForStartIndex:function(e,n,r){var i=e.direction,o=e.height,s=e.itemCount,a=e.itemSize,l=e.layout,d=e.width,h=i==="horizontal"||l==="horizontal",p=n*a,g=h?d:o,v=Math.ceil((g+r-p)/a);return Math.max(0,Math.min(s-1,n+v-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});let bd;typeof window<"u"?bd=window:typeof self<"u"?bd=self:bd=global;let pB=null,mB=null;const F7=20,BD=bd.clearTimeout,B7=bd.setTimeout,jD=bd.cancelAnimationFrame||bd.mozCancelAnimationFrame||bd.webkitCancelAnimationFrame,j7=bd.requestAnimationFrame||bd.mozRequestAnimationFrame||bd.webkitRequestAnimationFrame;jD==null||j7==null?(pB=BD,mB=function(e){return B7(e,F7)}):(pB=function([e,n]){jD(e),BD(n)},mB=function(e){const n=j7(function(){BD(r),e()}),r=B7(function(){jD(n),e()},F7);return[n,r]});function BDe(t){let e,n,r,i,o,s,a;const l=typeof document<"u"&&document.attachEvent;if(!l){s=function(S){const C=S.__resizeTriggers__,A=C.firstElementChild,P=C.lastElementChild,k=A.firstElementChild;P.scrollLeft=P.scrollWidth,P.scrollTop=P.scrollHeight,k.style.width=A.offsetWidth+1+"px",k.style.height=A.offsetHeight+1+"px",A.scrollLeft=A.scrollWidth,A.scrollTop=A.scrollHeight},o=function(S){return S.offsetWidth!==S.__resizeLast__.width||S.offsetHeight!==S.__resizeLast__.height},a=function(S){if(S.target.className&&typeof S.target.className.indexOf=="function"&&S.target.className.indexOf("contract-trigger")<0&&S.target.className.indexOf("expand-trigger")<0)return;const C=this;s(this),this.__resizeRAF__&&pB(this.__resizeRAF__),this.__resizeRAF__=mB(function(){o(C)&&(C.__resizeLast__.width=C.offsetWidth,C.__resizeLast__.height=C.offsetHeight,C.__resizeListeners__.forEach(function(k){k.call(C,S)}))})};let g=!1,v="";r="animationstart";const x="Webkit Moz O ms".split(" ");let b="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),w="";{const S=document.createElement("fakeelement");if(S.style.animationName!==void 0&&(g=!0),g===!1){for(let C=0;C<x.length;C++)if(S.style[x[C]+"AnimationName"]!==void 0){w=x[C],v="-"+w.toLowerCase()+"-",r=b[C],g=!0;break}}}n="resizeanim",e="@"+v+"keyframes "+n+" { from { opacity: 0; } to { opacity: 0; } } ",i=v+"animation: 1ms "+n+"; "}const d=function(g){if(!g.getElementById("detectElementResize")){const v=(e||"")+".resize-triggers { "+(i||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',x=g.head||g.getElementsByTagName("head")[0],b=g.createElement("style");b.id="detectElementResize",b.type="text/css",t!=null&&b.setAttribute("nonce",t),b.styleSheet?b.styleSheet.cssText=v:b.appendChild(g.createTextNode(v)),x.appendChild(b)}};return{addResizeListener:function(g,v){if(l)g.attachEvent("onresize",v);else{if(!g.__resizeTriggers__){const x=g.ownerDocument,b=bd.getComputedStyle(g);b&&b.position==="static"&&(g.style.position="relative"),d(x),g.__resizeLast__={},g.__resizeListeners__=[],(g.__resizeTriggers__=x.createElement("div")).className="resize-triggers";const w=x.createElement("div");w.className="expand-trigger",w.appendChild(x.createElement("div"));const S=x.createElement("div");S.className="contract-trigger",g.__resizeTriggers__.appendChild(w),g.__resizeTriggers__.appendChild(S),g.appendChild(g.__resizeTriggers__),s(g),g.addEventListener("scroll",a,!0),r&&(g.__resizeTriggers__.__animationListener__=function(A){A.animationName===n&&s(g)},g.__resizeTriggers__.addEventListener(r,g.__resizeTriggers__.__animationListener__))}g.__resizeListeners__.push(v)}},removeResizeListener:function(g,v){if(l)g.detachEvent("onresize",v);else if(g.__resizeListeners__.splice(g.__resizeListeners__.indexOf(v),1),!g.__resizeListeners__.length){g.removeEventListener("scroll",a,!0),g.__resizeTriggers__.__animationListener__&&(g.__resizeTriggers__.removeEventListener(r,g.__resizeTriggers__.__animationListener__),g.__resizeTriggers__.__animationListener__=null);try{g.__resizeTriggers__=!g.removeChild(g.__resizeTriggers__)}catch{}}}}}class jDe extends V.Component{constructor(...e){super(...e),this.state={height:this.props.defaultHeight||0,scaledHeight:this.props.defaultHeight||0,scaledWidth:this.props.defaultWidth||0,width:this.props.defaultWidth||0},this._autoSizer=null,this._detectElementResize=null,this._parentNode=null,this._resizeObserver=null,this._timeoutId=null,this._onResize=()=>{this._timeoutId=null;const{disableHeight:n,disableWidth:r,onResize:i}=this.props;if(this._parentNode){var o,s,a,l;const d=window.getComputedStyle(this._parentNode)||{},h=parseFloat((o=d.paddingLeft)!==null&&o!==void 0?o:"0"),p=parseFloat((s=d.paddingRight)!==null&&s!==void 0?s:"0"),g=parseFloat((a=d.paddingTop)!==null&&a!==void 0?a:"0"),v=parseFloat((l=d.paddingBottom)!==null&&l!==void 0?l:"0"),x=this._parentNode.getBoundingClientRect(),b=x.height-g-v,w=x.width-h-p,S=this._parentNode.offsetHeight-g-v,C=this._parentNode.offsetWidth-h-p;(!n&&(this.state.height!==S||this.state.scaledHeight!==b)||!r&&(this.state.width!==C||this.state.scaledWidth!==w))&&(this.setState({height:S,width:C,scaledHeight:b,scaledWidth:w}),typeof i=="function"&&i({height:S,scaledHeight:b,scaledWidth:w,width:C}))}},this._setRef=n=>{this._autoSizer=n}}componentDidMount(){const{nonce:e}=this.props;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._parentNode!=null&&(typeof ResizeObserver<"u"?(this._resizeObserver=new ResizeObserver(()=>{this._timeoutId=setTimeout(this._onResize,0)}),this._resizeObserver.observe(this._parentNode)):(this._detectElementResize=BDe(e),this._detectElementResize.addResizeListener(this._parentNode,this._onResize)),this._onResize()))}componentWillUnmount(){this._parentNode&&(this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize),this._timeoutId!==null&&clearTimeout(this._timeoutId),this._resizeObserver&&(this._resizeObserver.observe(this._parentNode),this._resizeObserver.disconnect()))}render(){const{children:e,defaultHeight:n,defaultWidth:r,disableHeight:i=!1,disableWidth:o=!1,nonce:s,onResize:a,style:l={},tagName:d="div",...h}=this.props,{height:p,scaledHeight:g,scaledWidth:v,width:x}=this.state,b={overflow:"visible"},w={};let S=!1;return i||(p===0&&(S=!0),b.height=0,w.height=p,w.scaledHeight=g),o||(x===0&&(S=!0),b.width=0,w.width=x,w.scaledWidth=v),V.createElement(d,{ref:this._setRef,style:{...b,...l},...h},!S&&e(w))}}var mU={},$De=Xr;Object.defineProperty(mU,"__esModule",{value:!0});var Eoe=mU.default=void 0,UDe=$De(oi()),VDe=z;Eoe=mU.default=(0,UDe.default)((0,VDe.jsx)("path",{d:"M15.67 4H14V2h-4v2H8.33C7.6 4 7 4.6 7 5.33v15.33C7 21.4 7.6 22 8.33 22h7.33c.74 0 1.34-.6 1.34-1.33V5.33C17 4.6 16.4 4 15.67 4"}),"BatteryFull");var gU={},HDe=Xr;Object.defineProperty(gU,"__esModule",{value:!0});var Toe=gU.default=void 0,WDe=HDe(oi()),GDe=z;Toe=gU.default=(0,WDe.default)((0,GDe.jsx)("path",{d:"M15.67 4H14V2h-4v2H8.33C7.6 4 7 4.6 7 5.33v15.33C7 21.4 7.6 22 8.33 22h7.33c.74 0 1.34-.6 1.34-1.33V5.33C17 4.6 16.4 4 15.67 4M11 20v-5.5H9L13 7v5.5h2z"}),"BatteryChargingFull");var yU={},qDe=Xr;Object.defineProperty(yU,"__esModule",{value:!0});var Coe=yU.default=void 0,XDe=KDe(V),YDe=qDe(oi()),$D=z;function Aoe(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(Aoe=function(r){return r?n:e})(t)}function KDe(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=Aoe(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}Coe=yU.default=(0,YDe.default)((0,$D.jsxs)(XDe.Fragment,{children:[(0,$D.jsx)("path",{fillOpacity:".3",d:"M17 5.33C17 4.6 16.4 4 15.67 4H14V2h-4v2H8.33C7.6 4 7 4.6 7 5.33V11h10V5.33z"}),(0,$D.jsx)("path",{d:"M7 11v9.67C7 21.4 7.6 22 8.33 22h7.33c.74 0 1.34-.6 1.34-1.33V11H7z"})]}),"Battery60");var vU={},ZDe=Xr;Object.defineProperty(vU,"__esModule",{value:!0});var Poe=vU.default=void 0,JDe=eNe(V),QDe=ZDe(oi()),UD=z;function Ioe(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(Ioe=function(r){return r?n:e})(t)}function eNe(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=Ioe(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}Poe=vU.default=(0,QDe.default)((0,UD.jsxs)(JDe.Fragment,{children:[(0,UD.jsx)("path",{fillOpacity:".3",d:"M15.67 4H14V2h-4v2H8.33C7.6 4 7 4.6 7 5.33V11h3.87L13 7v4h4V5.33C17 4.6 16.4 4 15.67 4z"}),(0,UD.jsx)("path",{d:"M13 12.5h2L11 20v-5.5H9l1.87-3.5H7v9.67C7 21.4 7.6 22 8.33 22h7.33c.74 0 1.34-.6 1.34-1.33V11h-4v1.5z"})]}),"BatteryCharging60");var _U={},tNe=Xr;Object.defineProperty(_U,"__esModule",{value:!0});var Roe=_U.default=void 0,nNe=iNe(V),rNe=tNe(oi()),VD=z;function koe(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(koe=function(r){return r?n:e})(t)}function iNe(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=koe(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}Roe=_U.default=(0,rNe.default)((0,VD.jsxs)(nNe.Fragment,{children:[(0,VD.jsx)("path",{d:"M7 17v3.67C7 21.4 7.6 22 8.33 22h7.33c.74 0 1.34-.6 1.34-1.33V17H7z"}),(0,VD.jsx)("path",{fillOpacity:".3",d:"M17 5.33C17 4.6 16.4 4 15.67 4H14V2h-4v2H8.33C7.6 4 7 4.6 7 5.33V17h10V5.33z"})]}),"Battery20");var xU={},oNe=Xr;Object.defineProperty(xU,"__esModule",{value:!0});var Ooe=xU.default=void 0,sNe=lNe(V),aNe=oNe(oi()),HD=z;function Loe(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(Loe=function(r){return r?n:e})(t)}function lNe(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=Loe(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}Ooe=xU.default=(0,aNe.default)((0,HD.jsxs)(sNe.Fragment,{children:[(0,HD.jsx)("path",{d:"M11 20v-3H7v3.67C7 21.4 7.6 22 8.33 22h7.33c.74 0 1.34-.6 1.34-1.33V17h-4.4L11 20z"}),(0,HD.jsx)("path",{fillOpacity:".3",d:"M15.67 4H14V2h-4v2H8.33C7.6 4 7 4.6 7 5.33V17h4v-2.5H9L13 7v5.5h2L12.6 17H17V5.33C17 4.6 16.4 4 15.67 4z"})]}),"BatteryCharging20");var bU={},cNe=Xr;Object.defineProperty(bU,"__esModule",{value:!0});var Doe=bU.default=void 0,uNe=cNe(oi()),dNe=z;Doe=bU.default=(0,uNe.default)((0,dNe.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error");//! moment.js
//! version : 2.29.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var Noe;function Nn(){return Noe.apply(null,arguments)}function hNe(t){Noe=t}function Ih(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function M0(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function wi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function wU(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(wi(t,e))return!1;return!0}function yc(t){return t===void 0}function wm(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function WE(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function zoe(t,e){var n=[],r,i=t.length;for(r=0;r<i;++r)n.push(e(t[r],r));return n}function sy(t,e){for(var n in e)wi(e,n)&&(t[n]=e[n]);return wi(e,"toString")&&(t.toString=e.toString),wi(e,"valueOf")&&(t.valueOf=e.valueOf),t}function Qf(t,e,n,r){return ase(t,e,n,r,!0).utc()}function fNe(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function zr(t){return t._pf==null&&(t._pf=fNe()),t._pf}var gB;Array.prototype.some?gB=Array.prototype.some:gB=function(t){var e=Object(this),n=e.length>>>0,r;for(r=0;r<n;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};function SU(t){if(t._isValid==null){var e=zr(t),n=gB.call(e.parsedDateParts,function(i){return i!=null}),r=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict&&(r=r&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=r;else return r}return t._isValid}function aO(t){var e=Qf(NaN);return t!=null?sy(zr(e),t):zr(e).userInvalidated=!0,e}var $7=Nn.momentProperties=[],WD=!1;function MU(t,e){var n,r,i,o=$7.length;if(yc(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),yc(e._i)||(t._i=e._i),yc(e._f)||(t._f=e._f),yc(e._l)||(t._l=e._l),yc(e._strict)||(t._strict=e._strict),yc(e._tzm)||(t._tzm=e._tzm),yc(e._isUTC)||(t._isUTC=e._isUTC),yc(e._offset)||(t._offset=e._offset),yc(e._pf)||(t._pf=zr(e)),yc(e._locale)||(t._locale=e._locale),o>0)for(n=0;n<o;n++)r=$7[n],i=e[r],yc(i)||(t[r]=i);return t}function GE(t){MU(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),WD===!1&&(WD=!0,Nn.updateOffset(this),WD=!1)}function Rh(t){return t instanceof GE||t!=null&&t._isAMomentObject!=null}function Foe(t){Nn.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function Ld(t,e){var n=!0;return sy(function(){if(Nn.deprecationHandler!=null&&Nn.deprecationHandler(null,t),n){var r=[],i,o,s,a=arguments.length;for(o=0;o<a;o++){if(i="",typeof arguments[o]=="object"){i+=`
[`+o+"] ";for(s in arguments[0])wi(arguments[0],s)&&(i+=s+": "+arguments[0][s]+", ");i=i.slice(0,-2)}else i=arguments[o];r.push(i)}Foe(t+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),n=!1}return e.apply(this,arguments)},e)}var U7={};function Boe(t,e){Nn.deprecationHandler!=null&&Nn.deprecationHandler(t,e),U7[t]||(Foe(e),U7[t]=!0)}Nn.suppressDeprecationWarnings=!1;Nn.deprecationHandler=null;function ep(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function pNe(t){var e,n;for(n in t)wi(t,n)&&(e=t[n],ep(e)?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function yB(t,e){var n=sy({},t),r;for(r in e)wi(e,r)&&(M0(t[r])&&M0(e[r])?(n[r]={},sy(n[r],t[r]),sy(n[r],e[r])):e[r]!=null?n[r]=e[r]:delete n[r]);for(r in t)wi(t,r)&&!wi(e,r)&&M0(t[r])&&(n[r]=sy({},n[r]));return n}function EU(t){t!=null&&this.set(t)}var vB;Object.keys?vB=Object.keys:vB=function(t){var e,n=[];for(e in t)wi(t,e)&&n.push(e);return n};var mNe={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function gNe(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return ep(r)?r.call(e,n):r}function qf(t,e,n){var r=""+Math.abs(t),i=e-r.length,o=t>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var TU=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,AC=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,GD={},Mb={};function ur(t,e,n,r){var i=r;typeof r=="string"&&(i=function(){return this[r]()}),t&&(Mb[t]=i),e&&(Mb[e[0]]=function(){return qf(i.apply(this,arguments),e[1],e[2])}),n&&(Mb[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function yNe(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function vNe(t){var e=t.match(TU),n,r;for(n=0,r=e.length;n<r;n++)Mb[e[n]]?e[n]=Mb[e[n]]:e[n]=yNe(e[n]);return function(i){var o="",s;for(s=0;s<r;s++)o+=ep(e[s])?e[s].call(i,t):e[s];return o}}function dP(t,e){return t.isValid()?(e=joe(e,t.localeData()),GD[e]=GD[e]||vNe(e),GD[e](t)):t.localeData().invalidDate()}function joe(t,e){var n=5;function r(i){return e.longDateFormat(i)||i}for(AC.lastIndex=0;n>=0&&AC.test(t);)t=t.replace(AC,r),AC.lastIndex=0,n-=1;return t}var _Ne={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function xNe(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(TU).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[t])}var bNe="Invalid date";function wNe(){return this._invalidDate}var SNe="%d",MNe=/\d{1,2}/;function ENe(t){return this._ordinal.replace("%d",t)}var TNe={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function CNe(t,e,n,r){var i=this._relativeTime[n];return ep(i)?i(t,e,n,r):i.replace(/%d/i,t)}function ANe(t,e){var n=this._relativeTime[t>0?"future":"past"];return ep(n)?n(e):n.replace(/%s/i,e)}var b2={};function wl(t,e){var n=t.toLowerCase();b2[n]=b2[n+"s"]=b2[e]=t}function Dd(t){return typeof t=="string"?b2[t]||b2[t.toLowerCase()]:void 0}function CU(t){var e={},n,r;for(r in t)wi(t,r)&&(n=Dd(r),n&&(e[n]=t[r]));return e}var $oe={};function Sl(t,e){$oe[t]=e}function PNe(t){var e=[],n;for(n in t)wi(t,n)&&e.push({unit:n,priority:$oe[n]});return e.sort(function(r,i){return r.priority-i.priority}),e}function lO(t){return t%4===0&&t%100!==0||t%400===0}function hd(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function Hr(t){var e=+t,n=0;return e!==0&&isFinite(e)&&(n=hd(e)),n}function Q1(t,e){return function(n){return n!=null?(Uoe(this,t,n),Nn.updateOffset(this,e),this):xI(this,t)}}function xI(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function Uoe(t,e,n){t.isValid()&&!isNaN(n)&&(e==="FullYear"&&lO(t.year())&&t.month()===1&&t.date()===29?(n=Hr(n),t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),pO(n,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](n))}function INe(t){return t=Dd(t),ep(this[t])?this[t]():this}function RNe(t,e){if(typeof t=="object"){t=CU(t);var n=PNe(t),r,i=n.length;for(r=0;r<i;r++)this[n[r].unit](t[n[r].unit])}else if(t=Dd(t),ep(this[t]))return this[t](e);return this}var Voe=/\d/,Iu=/\d\d/,Hoe=/\d{3}/,AU=/\d{4}/,cO=/[+-]?\d{6}/,bo=/\d\d?/,Woe=/\d\d\d\d?/,Goe=/\d\d\d\d\d\d?/,uO=/\d{1,3}/,PU=/\d{1,4}/,dO=/[+-]?\d{1,6}/,ew=/\d+/,hO=/[+-]?\d+/,kNe=/Z|[+-]\d\d:?\d\d/gi,fO=/Z|[+-]\d\d(?::?\d\d)?/gi,ONe=/[+-]?\d+(\.\d{1,3})?/,qE=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,bI;bI={};function Gn(t,e,n){bI[t]=ep(e)?e:function(r,i){return r&&n?n:e}}function LNe(t,e){return wi(bI,t)?bI[t](e._strict,e._locale):new RegExp(DNe(t))}function DNe(t){return nu(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,n,r,i,o){return n||r||i||o}))}function nu(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var _B={};function Ji(t,e){var n,r=e,i;for(typeof t=="string"&&(t=[t]),wm(e)&&(r=function(o,s){s[e]=Hr(o)}),i=t.length,n=0;n<i;n++)_B[t[n]]=r}function XE(t,e){Ji(t,function(n,r,i,o){i._w=i._w||{},e(n,i._w,i,o)})}function NNe(t,e,n){e!=null&&wi(_B,t)&&_B[t](e,n._a,n,t)}var _l=0,Qp=1,Cf=2,Bs=3,wh=4,em=5,l0=6,zNe=7,FNe=8;function BNe(t,e){return(t%e+e)%e}var ls;Array.prototype.indexOf?ls=Array.prototype.indexOf:ls=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function pO(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=BNe(e,12);return t+=(e-n)/12,n===1?lO(t)?29:28:31-n%7%2}ur("M",["MM",2],"Mo",function(){return this.month()+1});ur("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});ur("MMMM",0,0,function(t){return this.localeData().months(this,t)});wl("month","M");Sl("month",8);Gn("M",bo);Gn("MM",bo,Iu);Gn("MMM",function(t,e){return e.monthsShortRegex(t)});Gn("MMMM",function(t,e){return e.monthsRegex(t)});Ji(["M","MM"],function(t,e){e[Qp]=Hr(t)-1});Ji(["MMM","MMMM"],function(t,e,n,r){var i=n._locale.monthsParse(t,r,n._strict);i!=null?e[Qp]=i:zr(n).invalidMonth=t});var jNe="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),qoe="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Xoe=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,$Ne=qE,UNe=qE;function VNe(t,e){return t?Ih(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Xoe).test(e)?"format":"standalone"][t.month()]:Ih(this._months)?this._months:this._months.standalone}function HNe(t,e){return t?Ih(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Xoe.test(e)?"format":"standalone"][t.month()]:Ih(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function WNe(t,e,n){var r,i,o,s=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=Qf([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?e==="MMM"?(i=ls.call(this._shortMonthsParse,s),i!==-1?i:null):(i=ls.call(this._longMonthsParse,s),i!==-1?i:null):e==="MMM"?(i=ls.call(this._shortMonthsParse,s),i!==-1?i:(i=ls.call(this._longMonthsParse,s),i!==-1?i:null)):(i=ls.call(this._longMonthsParse,s),i!==-1?i:(i=ls.call(this._shortMonthsParse,s),i!==-1?i:null))}function GNe(t,e,n){var r,i,o;if(this._monthsParseExact)return WNe.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=Qf([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&e==="MMMM"&&this._longMonthsParse[r].test(t))return r;if(n&&e==="MMM"&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}}function Yoe(t,e){var n;if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=Hr(e);else if(e=t.localeData().monthsParse(e),!wm(e))return t}return n=Math.min(t.date(),pO(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function Koe(t){return t!=null?(Yoe(this,t),Nn.updateOffset(this,!0),this):xI(this,"Month")}function qNe(){return pO(this.year(),this.month())}function XNe(t){return this._monthsParseExact?(wi(this,"_monthsRegex")||Zoe.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(wi(this,"_monthsShortRegex")||(this._monthsShortRegex=$Ne),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function YNe(t){return this._monthsParseExact?(wi(this,"_monthsRegex")||Zoe.call(this),t?this._monthsStrictRegex:this._monthsRegex):(wi(this,"_monthsRegex")||(this._monthsRegex=UNe),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function Zoe(){function t(s,a){return a.length-s.length}var e=[],n=[],r=[],i,o;for(i=0;i<12;i++)o=Qf([2e3,i]),e.push(this.monthsShort(o,"")),n.push(this.months(o,"")),r.push(this.months(o,"")),r.push(this.monthsShort(o,""));for(e.sort(t),n.sort(t),r.sort(t),i=0;i<12;i++)e[i]=nu(e[i]),n[i]=nu(n[i]);for(i=0;i<24;i++)r[i]=nu(r[i]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}ur("Y",0,0,function(){var t=this.year();return t<=9999?qf(t,4):"+"+t});ur(0,["YY",2],0,function(){return this.year()%100});ur(0,["YYYY",4],0,"year");ur(0,["YYYYY",5],0,"year");ur(0,["YYYYYY",6,!0],0,"year");wl("year","y");Sl("year",1);Gn("Y",hO);Gn("YY",bo,Iu);Gn("YYYY",PU,AU);Gn("YYYYY",dO,cO);Gn("YYYYYY",dO,cO);Ji(["YYYYY","YYYYYY"],_l);Ji("YYYY",function(t,e){e[_l]=t.length===2?Nn.parseTwoDigitYear(t):Hr(t)});Ji("YY",function(t,e){e[_l]=Nn.parseTwoDigitYear(t)});Ji("Y",function(t,e){e[_l]=parseInt(t,10)});function w2(t){return lO(t)?366:365}Nn.parseTwoDigitYear=function(t){return Hr(t)+(Hr(t)>68?1900:2e3)};var Joe=Q1("FullYear",!0);function KNe(){return lO(this.year())}function ZNe(t,e,n,r,i,o,s){var a;return t<100&&t>=0?(a=new Date(t+400,e,n,r,i,o,s),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,n,r,i,o,s),a}function pM(t){var e,n;return t<100&&t>=0?(n=Array.prototype.slice.call(arguments),n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function wI(t,e,n){var r=7+e-n,i=(7+pM(t,0,r).getUTCDay()-e)%7;return-i+r-1}function Qoe(t,e,n,r,i){var o=(7+n-r)%7,s=wI(t,r,i),a=1+7*(e-1)+o+s,l,d;return a<=0?(l=t-1,d=w2(l)+a):a>w2(t)?(l=t+1,d=a-w2(t)):(l=t,d=a),{year:l,dayOfYear:d}}function mM(t,e,n){var r=wI(t.year(),e,n),i=Math.floor((t.dayOfYear()-r-1)/7)+1,o,s;return i<1?(s=t.year()-1,o=i+lm(s,e,n)):i>lm(t.year(),e,n)?(o=i-lm(t.year(),e,n),s=t.year()+1):(s=t.year(),o=i),{week:o,year:s}}function lm(t,e,n){var r=wI(t,e,n),i=wI(t+1,e,n);return(w2(t)-r+i)/7}ur("w",["ww",2],"wo","week");ur("W",["WW",2],"Wo","isoWeek");wl("week","w");wl("isoWeek","W");Sl("week",5);Sl("isoWeek",5);Gn("w",bo);Gn("ww",bo,Iu);Gn("W",bo);Gn("WW",bo,Iu);XE(["w","ww","W","WW"],function(t,e,n,r){e[r.substr(0,1)]=Hr(t)});function JNe(t){return mM(t,this._week.dow,this._week.doy).week}var QNe={dow:0,doy:6};function eze(){return this._week.dow}function tze(){return this._week.doy}function nze(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function rze(t){var e=mM(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}ur("d",0,"do","day");ur("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});ur("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});ur("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});ur("e",0,0,"weekday");ur("E",0,0,"isoWeekday");wl("day","d");wl("weekday","e");wl("isoWeekday","E");Sl("day",11);Sl("weekday",11);Sl("isoWeekday",11);Gn("d",bo);Gn("e",bo);Gn("E",bo);Gn("dd",function(t,e){return e.weekdaysMinRegex(t)});Gn("ddd",function(t,e){return e.weekdaysShortRegex(t)});Gn("dddd",function(t,e){return e.weekdaysRegex(t)});XE(["dd","ddd","dddd"],function(t,e,n,r){var i=n._locale.weekdaysParse(t,r,n._strict);i!=null?e.d=i:zr(n).invalidWeekday=t});XE(["d","e","E"],function(t,e,n,r){e[r]=Hr(t)});function ize(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function oze(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function IU(t,e){return t.slice(e,7).concat(t.slice(0,e))}var sze="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ese="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),aze="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),lze=qE,cze=qE,uze=qE;function dze(t,e){var n=Ih(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?IU(n,this._week.dow):t?n[t.day()]:n}function hze(t){return t===!0?IU(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function fze(t){return t===!0?IU(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function pze(t,e,n){var r,i,o,s=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=Qf([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?e==="dddd"?(i=ls.call(this._weekdaysParse,s),i!==-1?i:null):e==="ddd"?(i=ls.call(this._shortWeekdaysParse,s),i!==-1?i:null):(i=ls.call(this._minWeekdaysParse,s),i!==-1?i:null):e==="dddd"?(i=ls.call(this._weekdaysParse,s),i!==-1||(i=ls.call(this._shortWeekdaysParse,s),i!==-1)?i:(i=ls.call(this._minWeekdaysParse,s),i!==-1?i:null)):e==="ddd"?(i=ls.call(this._shortWeekdaysParse,s),i!==-1||(i=ls.call(this._weekdaysParse,s),i!==-1)?i:(i=ls.call(this._minWeekdaysParse,s),i!==-1?i:null)):(i=ls.call(this._minWeekdaysParse,s),i!==-1||(i=ls.call(this._weekdaysParse,s),i!==-1)?i:(i=ls.call(this._shortWeekdaysParse,s),i!==-1?i:null))}function mze(t,e,n){var r,i,o;if(this._weekdaysParseExact)return pze.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=Qf([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&e==="dddd"&&this._fullWeekdaysParse[r].test(t))return r;if(n&&e==="ddd"&&this._shortWeekdaysParse[r].test(t))return r;if(n&&e==="dd"&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}}function gze(t){if(!this.isValid())return t!=null?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return t!=null?(t=ize(t,this.localeData()),this.add(t-e,"d")):e}function yze(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function vze(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=oze(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function _ze(t){return this._weekdaysParseExact?(wi(this,"_weekdaysRegex")||RU.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(wi(this,"_weekdaysRegex")||(this._weekdaysRegex=lze),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function xze(t){return this._weekdaysParseExact?(wi(this,"_weekdaysRegex")||RU.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(wi(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=cze),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function bze(t){return this._weekdaysParseExact?(wi(this,"_weekdaysRegex")||RU.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(wi(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=uze),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function RU(){function t(h,p){return p.length-h.length}var e=[],n=[],r=[],i=[],o,s,a,l,d;for(o=0;o<7;o++)s=Qf([2e3,1]).day(o),a=nu(this.weekdaysMin(s,"")),l=nu(this.weekdaysShort(s,"")),d=nu(this.weekdays(s,"")),e.push(a),n.push(l),r.push(d),i.push(a),i.push(l),i.push(d);e.sort(t),n.sort(t),r.sort(t),i.sort(t),this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function kU(){return this.hours()%12||12}function wze(){return this.hours()||24}ur("H",["HH",2],0,"hour");ur("h",["hh",2],0,kU);ur("k",["kk",2],0,wze);ur("hmm",0,0,function(){return""+kU.apply(this)+qf(this.minutes(),2)});ur("hmmss",0,0,function(){return""+kU.apply(this)+qf(this.minutes(),2)+qf(this.seconds(),2)});ur("Hmm",0,0,function(){return""+this.hours()+qf(this.minutes(),2)});ur("Hmmss",0,0,function(){return""+this.hours()+qf(this.minutes(),2)+qf(this.seconds(),2)});function tse(t,e){ur(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}tse("a",!0);tse("A",!1);wl("hour","h");Sl("hour",13);function nse(t,e){return e._meridiemParse}Gn("a",nse);Gn("A",nse);Gn("H",bo);Gn("h",bo);Gn("k",bo);Gn("HH",bo,Iu);Gn("hh",bo,Iu);Gn("kk",bo,Iu);Gn("hmm",Woe);Gn("hmmss",Goe);Gn("Hmm",Woe);Gn("Hmmss",Goe);Ji(["H","HH"],Bs);Ji(["k","kk"],function(t,e,n){var r=Hr(t);e[Bs]=r===24?0:r});Ji(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t});Ji(["h","hh"],function(t,e,n){e[Bs]=Hr(t),zr(n).bigHour=!0});Ji("hmm",function(t,e,n){var r=t.length-2;e[Bs]=Hr(t.substr(0,r)),e[wh]=Hr(t.substr(r)),zr(n).bigHour=!0});Ji("hmmss",function(t,e,n){var r=t.length-4,i=t.length-2;e[Bs]=Hr(t.substr(0,r)),e[wh]=Hr(t.substr(r,2)),e[em]=Hr(t.substr(i)),zr(n).bigHour=!0});Ji("Hmm",function(t,e,n){var r=t.length-2;e[Bs]=Hr(t.substr(0,r)),e[wh]=Hr(t.substr(r))});Ji("Hmmss",function(t,e,n){var r=t.length-4,i=t.length-2;e[Bs]=Hr(t.substr(0,r)),e[wh]=Hr(t.substr(r,2)),e[em]=Hr(t.substr(i))});function Sze(t){return(t+"").toLowerCase().charAt(0)==="p"}var Mze=/[ap]\.?m?\.?/i,Eze=Q1("Hours",!0);function Tze(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}var rse={calendar:mNe,longDateFormat:_Ne,invalidDate:bNe,ordinal:SNe,dayOfMonthOrdinalParse:MNe,relativeTime:TNe,months:jNe,monthsShort:qoe,week:QNe,weekdays:sze,weekdaysMin:aze,weekdaysShort:ese,meridiemParse:Mze},Eo={},gS={},gM;function Cze(t,e){var n,r=Math.min(t.length,e.length);for(n=0;n<r;n+=1)if(t[n]!==e[n])return n;return r}function V7(t){return t&&t.toLowerCase().replace("_","-")}function Aze(t){for(var e=0,n,r,i,o;e<t.length;){for(o=V7(t[e]).split("-"),n=o.length,r=V7(t[e+1]),r=r?r.split("-"):null;n>0;){if(i=mO(o.slice(0,n).join("-")),i)return i;if(r&&r.length>=n&&Cze(o,r)>=n-1)break;n--}e++}return gM}function Pze(t){return t.match("^[^/\\\\]*$")!=null}function mO(t){var e=null,n;if(Eo[t]===void 0&&typeof wP<"u"&&wP&&wP.exports&&Pze(t))try{e=gM._abbr,n=require,n("./locale/"+t),xy(e)}catch{Eo[t]=null}return Eo[t]}function xy(t,e){var n;return t&&(yc(e)?n=km(t):n=OU(t,e),n?gM=n:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),gM._abbr}function OU(t,e){if(e!==null){var n,r=rse;if(e.abbr=t,Eo[t]!=null)Boe("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=Eo[t]._config;else if(e.parentLocale!=null)if(Eo[e.parentLocale]!=null)r=Eo[e.parentLocale]._config;else if(n=mO(e.parentLocale),n!=null)r=n._config;else return gS[e.parentLocale]||(gS[e.parentLocale]=[]),gS[e.parentLocale].push({name:t,config:e}),null;return Eo[t]=new EU(yB(r,e)),gS[t]&&gS[t].forEach(function(i){OU(i.name,i.config)}),xy(t),Eo[t]}else return delete Eo[t],null}function Ize(t,e){if(e!=null){var n,r,i=rse;Eo[t]!=null&&Eo[t].parentLocale!=null?Eo[t].set(yB(Eo[t]._config,e)):(r=mO(t),r!=null&&(i=r._config),e=yB(i,e),r==null&&(e.abbr=t),n=new EU(e),n.parentLocale=Eo[t],Eo[t]=n),xy(t)}else Eo[t]!=null&&(Eo[t].parentLocale!=null?(Eo[t]=Eo[t].parentLocale,t===xy()&&xy(t)):Eo[t]!=null&&delete Eo[t]);return Eo[t]}function km(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return gM;if(!Ih(t)){if(e=mO(t),e)return e;t=[t]}return Aze(t)}function Rze(){return vB(Eo)}function LU(t){var e,n=t._a;return n&&zr(t).overflow===-2&&(e=n[Qp]<0||n[Qp]>11?Qp:n[Cf]<1||n[Cf]>pO(n[_l],n[Qp])?Cf:n[Bs]<0||n[Bs]>24||n[Bs]===24&&(n[wh]!==0||n[em]!==0||n[l0]!==0)?Bs:n[wh]<0||n[wh]>59?wh:n[em]<0||n[em]>59?em:n[l0]<0||n[l0]>999?l0:-1,zr(t)._overflowDayOfYear&&(e<_l||e>Cf)&&(e=Cf),zr(t)._overflowWeeks&&e===-1&&(e=zNe),zr(t)._overflowWeekday&&e===-1&&(e=FNe),zr(t).overflow=e),t}var kze=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Oze=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Lze=/Z|[+-]\d\d(?::?\d\d)?/,PC=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],qD=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Dze=/^\/?Date\((-?\d+)/i,Nze=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,zze={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function ise(t){var e,n,r=t._i,i=kze.exec(r)||Oze.exec(r),o,s,a,l,d=PC.length,h=qD.length;if(i){for(zr(t).iso=!0,e=0,n=d;e<n;e++)if(PC[e][1].exec(i[1])){s=PC[e][0],o=PC[e][2]!==!1;break}if(s==null){t._isValid=!1;return}if(i[3]){for(e=0,n=h;e<n;e++)if(qD[e][1].exec(i[3])){a=(i[2]||" ")+qD[e][0];break}if(a==null){t._isValid=!1;return}}if(!o&&a!=null){t._isValid=!1;return}if(i[4])if(Lze.exec(i[4]))l="Z";else{t._isValid=!1;return}t._f=s+(a||"")+(l||""),NU(t)}else t._isValid=!1}function Fze(t,e,n,r,i,o){var s=[Bze(t),qoe.indexOf(e),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return o&&s.push(parseInt(o,10)),s}function Bze(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function jze(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function $ze(t,e,n){if(t){var r=ese.indexOf(t),i=new Date(e[0],e[1],e[2]).getDay();if(r!==i)return zr(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function Uze(t,e,n){if(t)return zze[t];if(e)return 0;var r=parseInt(n,10),i=r%100,o=(r-i)/100;return o*60+i}function ose(t){var e=Nze.exec(jze(t._i)),n;if(e){if(n=Fze(e[4],e[3],e[2],e[5],e[6],e[7]),!$ze(e[1],n,t))return;t._a=n,t._tzm=Uze(e[8],e[9],e[10]),t._d=pM.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),zr(t).rfc2822=!0}else t._isValid=!1}function Vze(t){var e=Dze.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(ise(t),t._isValid===!1)delete t._isValid;else return;if(ose(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:Nn.createFromInputFallback(t)}Nn.createFromInputFallback=Ld("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function Lx(t,e,n){return t??e??n}function Hze(t){var e=new Date(Nn.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function DU(t){var e,n,r=[],i,o,s;if(!t._d){for(i=Hze(t),t._w&&t._a[Cf]==null&&t._a[Qp]==null&&Wze(t),t._dayOfYear!=null&&(s=Lx(t._a[_l],i[_l]),(t._dayOfYear>w2(s)||t._dayOfYear===0)&&(zr(t)._overflowDayOfYear=!0),n=pM(s,0,t._dayOfYear),t._a[Qp]=n.getUTCMonth(),t._a[Cf]=n.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=r[e]=i[e];for(;e<7;e++)t._a[e]=r[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[Bs]===24&&t._a[wh]===0&&t._a[em]===0&&t._a[l0]===0&&(t._nextDay=!0,t._a[Bs]=0),t._d=(t._useUTC?pM:ZNe).apply(null,r),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Bs]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==o&&(zr(t).weekdayMismatch=!0)}}function Wze(t){var e,n,r,i,o,s,a,l,d;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(o=1,s=4,n=Lx(e.GG,t._a[_l],mM(xo(),1,4).year),r=Lx(e.W,1),i=Lx(e.E,1),(i<1||i>7)&&(l=!0)):(o=t._locale._week.dow,s=t._locale._week.doy,d=mM(xo(),o,s),n=Lx(e.gg,t._a[_l],d.year),r=Lx(e.w,d.week),e.d!=null?(i=e.d,(i<0||i>6)&&(l=!0)):e.e!=null?(i=e.e+o,(e.e<0||e.e>6)&&(l=!0)):i=o),r<1||r>lm(n,o,s)?zr(t)._overflowWeeks=!0:l!=null?zr(t)._overflowWeekday=!0:(a=Qoe(n,r,i,o,s),t._a[_l]=a.year,t._dayOfYear=a.dayOfYear)}Nn.ISO_8601=function(){};Nn.RFC_2822=function(){};function NU(t){if(t._f===Nn.ISO_8601){ise(t);return}if(t._f===Nn.RFC_2822){ose(t);return}t._a=[],zr(t).empty=!0;var e=""+t._i,n,r,i,o,s,a=e.length,l=0,d,h;for(i=joe(t._f,t._locale).match(TU)||[],h=i.length,n=0;n<h;n++)o=i[n],r=(e.match(LNe(o,t))||[])[0],r&&(s=e.substr(0,e.indexOf(r)),s.length>0&&zr(t).unusedInput.push(s),e=e.slice(e.indexOf(r)+r.length),l+=r.length),Mb[o]?(r?zr(t).empty=!1:zr(t).unusedTokens.push(o),NNe(o,r,t)):t._strict&&!r&&zr(t).unusedTokens.push(o);zr(t).charsLeftOver=a-l,e.length>0&&zr(t).unusedInput.push(e),t._a[Bs]<=12&&zr(t).bigHour===!0&&t._a[Bs]>0&&(zr(t).bigHour=void 0),zr(t).parsedDateParts=t._a.slice(0),zr(t).meridiem=t._meridiem,t._a[Bs]=Gze(t._locale,t._a[Bs],t._meridiem),d=zr(t).era,d!==null&&(t._a[_l]=t._locale.erasConvertYear(d,t._a[_l])),DU(t),LU(t)}function Gze(t,e,n){var r;return n==null?e:t.meridiemHour!=null?t.meridiemHour(e,n):(t.isPM!=null&&(r=t.isPM(n),r&&e<12&&(e+=12),!r&&e===12&&(e=0)),e)}function qze(t){var e,n,r,i,o,s,a=!1,l=t._f.length;if(l===0){zr(t).invalidFormat=!0,t._d=new Date(NaN);return}for(i=0;i<l;i++)o=0,s=!1,e=MU({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[i],NU(e),SU(e)&&(s=!0),o+=zr(e).charsLeftOver,o+=zr(e).unusedTokens.length*10,zr(e).score=o,a?o<r&&(r=o,n=e):(r==null||o<r||s)&&(r=o,n=e,s&&(a=!0));sy(t,n||e)}function Xze(t){if(!t._d){var e=CU(t._i),n=e.day===void 0?e.date:e.day;t._a=zoe([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],function(r){return r&&parseInt(r,10)}),DU(t)}}function Yze(t){var e=new GE(LU(sse(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function sse(t){var e=t._i,n=t._f;return t._locale=t._locale||km(t._l),e===null||n===void 0&&e===""?aO({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),Rh(e)?new GE(LU(e)):(WE(e)?t._d=e:Ih(n)?qze(t):n?NU(t):Kze(t),SU(t)||(t._d=null),t))}function Kze(t){var e=t._i;yc(e)?t._d=new Date(Nn.now()):WE(e)?t._d=new Date(e.valueOf()):typeof e=="string"?Vze(t):Ih(e)?(t._a=zoe(e.slice(0),function(n){return parseInt(n,10)}),DU(t)):M0(e)?Xze(t):wm(e)?t._d=new Date(e):Nn.createFromInputFallback(t)}function ase(t,e,n,r,i){var o={};return(e===!0||e===!1)&&(r=e,e=void 0),(n===!0||n===!1)&&(r=n,n=void 0),(M0(t)&&wU(t)||Ih(t)&&t.length===0)&&(t=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=i,o._l=n,o._i=t,o._f=e,o._strict=r,Yze(o)}function xo(t,e,n,r){return ase(t,e,n,r,!1)}var Zze=Ld("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=xo.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:aO()}),Jze=Ld("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=xo.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:aO()});function lse(t,e){var n,r;if(e.length===1&&Ih(e[0])&&(e=e[0]),!e.length)return xo();for(n=e[0],r=1;r<e.length;++r)(!e[r].isValid()||e[r][t](n))&&(n=e[r]);return n}function Qze(){var t=[].slice.call(arguments,0);return lse("isBefore",t)}function eFe(){var t=[].slice.call(arguments,0);return lse("isAfter",t)}var tFe=function(){return Date.now?Date.now():+new Date},yS=["year","quarter","month","week","day","hour","minute","second","millisecond"];function nFe(t){var e,n=!1,r,i=yS.length;for(e in t)if(wi(t,e)&&!(ls.call(yS,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(r=0;r<i;++r)if(t[yS[r]]){if(n)return!1;parseFloat(t[yS[r]])!==Hr(t[yS[r]])&&(n=!0)}return!0}function rFe(){return this._isValid}function iFe(){return Fh(NaN)}function gO(t){var e=CU(t),n=e.year||0,r=e.quarter||0,i=e.month||0,o=e.week||e.isoWeek||0,s=e.day||0,a=e.hour||0,l=e.minute||0,d=e.second||0,h=e.millisecond||0;this._isValid=nFe(e),this._milliseconds=+h+d*1e3+l*6e4+a*1e3*60*60,this._days=+s+o*7,this._months=+i+r*3+n*12,this._data={},this._locale=km(),this._bubble()}function hP(t){return t instanceof gO}function xB(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function oFe(t,e,n){var r=Math.min(t.length,e.length),i=Math.abs(t.length-e.length),o=0,s;for(s=0;s<r;s++)Hr(t[s])!==Hr(e[s])&&o++;return o+i}function cse(t,e){ur(t,0,0,function(){var n=this.utcOffset(),r="+";return n<0&&(n=-n,r="-"),r+qf(~~(n/60),2)+e+qf(~~n%60,2)})}cse("Z",":");cse("ZZ","");Gn("Z",fO);Gn("ZZ",fO);Ji(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=zU(fO,t)});var sFe=/([\+\-]|\d\d)/gi;function zU(t,e){var n=(e||"").match(t),r,i,o;return n===null?null:(r=n[n.length-1]||[],i=(r+"").match(sFe)||["-",0,0],o=+(i[1]*60)+Hr(i[2]),o===0?0:i[0]==="+"?o:-o)}function FU(t,e){var n,r;return e._isUTC?(n=e.clone(),r=(Rh(t)||WE(t)?t.valueOf():xo(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),Nn.updateOffset(n,!1),n):xo(t).local()}function bB(t){return-Math.round(t._d.getTimezoneOffset())}Nn.updateOffset=function(){};function aFe(t,e,n){var r=this._offset||0,i;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=zU(fO,t),t===null)return this}else Math.abs(t)<16&&!n&&(t=t*60);return!this._isUTC&&e&&(i=bB(this)),this._offset=t,this._isUTC=!0,i!=null&&this.add(i,"m"),r!==t&&(!e||this._changeInProgress?hse(this,Fh(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Nn.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:bB(this)}function lFe(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function cFe(t){return this.utcOffset(0,t)}function uFe(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(bB(this),"m")),this}function dFe(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=zU(kNe,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function hFe(t){return this.isValid()?(t=t?xo(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function fFe(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function pFe(){if(!yc(this._isDSTShifted))return this._isDSTShifted;var t={},e;return MU(t,this),t=sse(t),t._a?(e=t._isUTC?Qf(t._a):xo(t._a),this._isDSTShifted=this.isValid()&&oFe(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function mFe(){return this.isValid()?!this._isUTC:!1}function gFe(){return this.isValid()?this._isUTC:!1}function use(){return this.isValid()?this._isUTC&&this._offset===0:!1}var yFe=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,vFe=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Fh(t,e){var n=t,r=null,i,o,s;return hP(t)?n={ms:t._milliseconds,d:t._days,M:t._months}:wm(t)||!isNaN(+t)?(n={},e?n[e]=+t:n.milliseconds=+t):(r=yFe.exec(t))?(i=r[1]==="-"?-1:1,n={y:0,d:Hr(r[Cf])*i,h:Hr(r[Bs])*i,m:Hr(r[wh])*i,s:Hr(r[em])*i,ms:Hr(xB(r[l0]*1e3))*i}):(r=vFe.exec(t))?(i=r[1]==="-"?-1:1,n={y:Ev(r[2],i),M:Ev(r[3],i),w:Ev(r[4],i),d:Ev(r[5],i),h:Ev(r[6],i),m:Ev(r[7],i),s:Ev(r[8],i)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(s=_Fe(xo(n.from),xo(n.to)),n={},n.ms=s.milliseconds,n.M=s.months),o=new gO(n),hP(t)&&wi(t,"_locale")&&(o._locale=t._locale),hP(t)&&wi(t,"_isValid")&&(o._isValid=t._isValid),o}Fh.fn=gO.prototype;Fh.invalid=iFe;function Ev(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function H7(t,e){var n={};return n.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function _Fe(t,e){var n;return t.isValid()&&e.isValid()?(e=FU(e,t),t.isBefore(e)?n=H7(t,e):(n=H7(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function dse(t,e){return function(n,r){var i,o;return r!==null&&!isNaN(+r)&&(Boe(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=r,r=o),i=Fh(n,r),hse(this,i,t),this}}function hse(t,e,n,r){var i=e._milliseconds,o=xB(e._days),s=xB(e._months);t.isValid()&&(r=r??!0,s&&Yoe(t,xI(t,"Month")+s*n),o&&Uoe(t,"Date",xI(t,"Date")+o*n),i&&t._d.setTime(t._d.valueOf()+i*n),r&&Nn.updateOffset(t,o||s))}var xFe=dse(1,"add"),bFe=dse(-1,"subtract");function fse(t){return typeof t=="string"||t instanceof String}function wFe(t){return Rh(t)||WE(t)||fse(t)||wm(t)||MFe(t)||SFe(t)||t===null||t===void 0}function SFe(t){var e=M0(t)&&!wU(t),n=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,o,s=r.length;for(i=0;i<s;i+=1)o=r[i],n=n||wi(t,o);return e&&n}function MFe(t){var e=Ih(t),n=!1;return e&&(n=t.filter(function(r){return!wm(r)&&fse(t)}).length===0),e&&n}function EFe(t){var e=M0(t)&&!wU(t),n=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,o;for(i=0;i<r.length;i+=1)o=r[i],n=n||wi(t,o);return e&&n}function TFe(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function CFe(t,e){arguments.length===1&&(arguments[0]?wFe(arguments[0])?(t=arguments[0],e=void 0):EFe(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||xo(),r=FU(n,this).startOf("day"),i=Nn.calendarFormat(this,r)||"sameElse",o=e&&(ep(e[i])?e[i].call(this,n):e[i]);return this.format(o||this.localeData().calendar(i,this,xo(n)))}function AFe(){return new GE(this)}function PFe(t,e){var n=Rh(t)?t:xo(t);return this.isValid()&&n.isValid()?(e=Dd(e)||"millisecond",e==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf()):!1}function IFe(t,e){var n=Rh(t)?t:xo(t);return this.isValid()&&n.isValid()?(e=Dd(e)||"millisecond",e==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf()):!1}function RFe(t,e,n,r){var i=Rh(t)?t:xo(t),o=Rh(e)?e:xo(e);return this.isValid()&&i.isValid()&&o.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(i,n):!this.isBefore(i,n))&&(r[1]===")"?this.isBefore(o,n):!this.isAfter(o,n))):!1}function kFe(t,e){var n=Rh(t)?t:xo(t),r;return this.isValid()&&n.isValid()?(e=Dd(e)||"millisecond",e==="millisecond"?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(e).valueOf()<=r&&r<=this.clone().endOf(e).valueOf())):!1}function OFe(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function LFe(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function DFe(t,e,n){var r,i,o;if(!this.isValid())return NaN;if(r=FU(t,this),!r.isValid())return NaN;switch(i=(r.utcOffset()-this.utcOffset())*6e4,e=Dd(e),e){case"year":o=fP(this,r)/12;break;case"month":o=fP(this,r);break;case"quarter":o=fP(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:hd(o)}function fP(t,e){if(t.date()<e.date())return-fP(e,t);var n=(e.year()-t.year())*12+(e.month()-t.month()),r=t.clone().add(n,"months"),i,o;return e-r<0?(i=t.clone().add(n-1,"months"),o=(e-r)/(r-i)):(i=t.clone().add(n+1,"months"),o=(e-r)/(i-r)),-(n+o)||0}Nn.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";Nn.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function NFe(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function zFe(t){if(!this.isValid())return null;var e=t!==!0,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?dP(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ep(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",dP(n,"Z")):dP(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function FFe(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",n,r,i,o;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),n="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",o=e+'[")]',this.format(n+r+i+o)}function BFe(t){t||(t=this.isUtc()?Nn.defaultFormatUtc:Nn.defaultFormat);var e=dP(this,t);return this.localeData().postformat(e)}function jFe(t,e){return this.isValid()&&(Rh(t)&&t.isValid()||xo(t).isValid())?Fh({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function $Fe(t){return this.from(xo(),t)}function UFe(t,e){return this.isValid()&&(Rh(t)&&t.isValid()||xo(t).isValid())?Fh({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function VFe(t){return this.to(xo(),t)}function pse(t){var e;return t===void 0?this._locale._abbr:(e=km(t),e!=null&&(this._locale=e),this)}var mse=Ld("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function gse(){return this._locale}var SI=1e3,Eb=60*SI,MI=60*Eb,yse=(365*400+97)*24*MI;function Tb(t,e){return(t%e+e)%e}function vse(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-yse:new Date(t,e,n).valueOf()}function _se(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-yse:Date.UTC(t,e,n)}function HFe(t){var e,n;if(t=Dd(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?_se:vse,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Tb(e+(this._isUTC?0:this.utcOffset()*Eb),MI);break;case"minute":e=this._d.valueOf(),e-=Tb(e,Eb);break;case"second":e=this._d.valueOf(),e-=Tb(e,SI);break}return this._d.setTime(e),Nn.updateOffset(this,!0),this}function WFe(t){var e,n;if(t=Dd(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?_se:vse,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=MI-Tb(e+(this._isUTC?0:this.utcOffset()*Eb),MI)-1;break;case"minute":e=this._d.valueOf(),e+=Eb-Tb(e,Eb)-1;break;case"second":e=this._d.valueOf(),e+=SI-Tb(e,SI)-1;break}return this._d.setTime(e),Nn.updateOffset(this,!0),this}function GFe(){return this._d.valueOf()-(this._offset||0)*6e4}function qFe(){return Math.floor(this.valueOf()/1e3)}function XFe(){return new Date(this.valueOf())}function YFe(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function KFe(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function ZFe(){return this.isValid()?this.toISOString():null}function JFe(){return SU(this)}function QFe(){return sy({},zr(this))}function eBe(){return zr(this).overflow}function tBe(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}ur("N",0,0,"eraAbbr");ur("NN",0,0,"eraAbbr");ur("NNN",0,0,"eraAbbr");ur("NNNN",0,0,"eraName");ur("NNNNN",0,0,"eraNarrow");ur("y",["y",1],"yo","eraYear");ur("y",["yy",2],0,"eraYear");ur("y",["yyy",3],0,"eraYear");ur("y",["yyyy",4],0,"eraYear");Gn("N",BU);Gn("NN",BU);Gn("NNN",BU);Gn("NNNN",hBe);Gn("NNNNN",fBe);Ji(["N","NN","NNN","NNNN","NNNNN"],function(t,e,n,r){var i=n._locale.erasParse(t,r,n._strict);i?zr(n).era=i:zr(n).invalidEra=t});Gn("y",ew);Gn("yy",ew);Gn("yyy",ew);Gn("yyyy",ew);Gn("yo",pBe);Ji(["y","yy","yyy","yyyy"],_l);Ji(["yo"],function(t,e,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[_l]=n._locale.eraYearOrdinalParse(t,i):e[_l]=parseInt(t,10)});function nBe(t,e){var n,r,i,o=this._eras||km("en")._eras;for(n=0,r=o.length;n<r;++n){switch(typeof o[n].since){case"string":i=Nn(o[n].since).startOf("day"),o[n].since=i.valueOf();break}switch(typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":i=Nn(o[n].until).startOf("day").valueOf(),o[n].until=i.valueOf();break}}return o}function rBe(t,e,n){var r,i,o=this.eras(),s,a,l;for(t=t.toUpperCase(),r=0,i=o.length;r<i;++r)if(s=o[r].name.toUpperCase(),a=o[r].abbr.toUpperCase(),l=o[r].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(a===t)return o[r];break;case"NNNN":if(s===t)return o[r];break;case"NNNNN":if(l===t)return o[r];break}else if([s,a,l].indexOf(t)>=0)return o[r]}function iBe(t,e){var n=t.since<=t.until?1:-1;return e===void 0?Nn(t.since).year():Nn(t.since).year()+(e-t.offset)*n}function oBe(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].name;return""}function sBe(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].narrow;return""}function aBe(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].abbr;return""}function lBe(){var t,e,n,r,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=i[t].since<=i[t].until?1:-1,r=this.clone().startOf("day").valueOf(),i[t].since<=r&&r<=i[t].until||i[t].until<=r&&r<=i[t].since)return(this.year()-Nn(i[t].since).year())*n+i[t].offset;return this.year()}function cBe(t){return wi(this,"_erasNameRegex")||jU.call(this),t?this._erasNameRegex:this._erasRegex}function uBe(t){return wi(this,"_erasAbbrRegex")||jU.call(this),t?this._erasAbbrRegex:this._erasRegex}function dBe(t){return wi(this,"_erasNarrowRegex")||jU.call(this),t?this._erasNarrowRegex:this._erasRegex}function BU(t,e){return e.erasAbbrRegex(t)}function hBe(t,e){return e.erasNameRegex(t)}function fBe(t,e){return e.erasNarrowRegex(t)}function pBe(t,e){return e._eraYearOrdinalRegex||ew}function jU(){var t=[],e=[],n=[],r=[],i,o,s=this.eras();for(i=0,o=s.length;i<o;++i)e.push(nu(s[i].name)),t.push(nu(s[i].abbr)),n.push(nu(s[i].narrow)),r.push(nu(s[i].name)),r.push(nu(s[i].abbr)),r.push(nu(s[i].narrow));this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}ur(0,["gg",2],0,function(){return this.weekYear()%100});ur(0,["GG",2],0,function(){return this.isoWeekYear()%100});function yO(t,e){ur(0,[t,t.length],0,e)}yO("gggg","weekYear");yO("ggggg","weekYear");yO("GGGG","isoWeekYear");yO("GGGGG","isoWeekYear");wl("weekYear","gg");wl("isoWeekYear","GG");Sl("weekYear",1);Sl("isoWeekYear",1);Gn("G",hO);Gn("g",hO);Gn("GG",bo,Iu);Gn("gg",bo,Iu);Gn("GGGG",PU,AU);Gn("gggg",PU,AU);Gn("GGGGG",dO,cO);Gn("ggggg",dO,cO);XE(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,r){e[r.substr(0,2)]=Hr(t)});XE(["gg","GG"],function(t,e,n,r){e[r]=Nn.parseTwoDigitYear(t)});function mBe(t){return xse.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function gBe(t){return xse.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function yBe(){return lm(this.year(),1,4)}function vBe(){return lm(this.isoWeekYear(),1,4)}function _Be(){var t=this.localeData()._week;return lm(this.year(),t.dow,t.doy)}function xBe(){var t=this.localeData()._week;return lm(this.weekYear(),t.dow,t.doy)}function xse(t,e,n,r,i){var o;return t==null?mM(this,r,i).year:(o=lm(t,r,i),e>o&&(e=o),bBe.call(this,t,e,n,r,i))}function bBe(t,e,n,r,i){var o=Qoe(t,e,n,r,i),s=pM(o.year,0,o.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}ur("Q",0,"Qo","quarter");wl("quarter","Q");Sl("quarter",7);Gn("Q",Voe);Ji("Q",function(t,e){e[Qp]=(Hr(t)-1)*3});function wBe(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}ur("D",["DD",2],"Do","date");wl("date","D");Sl("date",9);Gn("D",bo);Gn("DD",bo,Iu);Gn("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Ji(["D","DD"],Cf);Ji("Do",function(t,e){e[Cf]=Hr(t.match(bo)[0])});var bse=Q1("Date",!0);ur("DDD",["DDDD",3],"DDDo","dayOfYear");wl("dayOfYear","DDD");Sl("dayOfYear",4);Gn("DDD",uO);Gn("DDDD",Hoe);Ji(["DDD","DDDD"],function(t,e,n){n._dayOfYear=Hr(t)});function SBe(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}ur("m",["mm",2],0,"minute");wl("minute","m");Sl("minute",14);Gn("m",bo);Gn("mm",bo,Iu);Ji(["m","mm"],wh);var MBe=Q1("Minutes",!1);ur("s",["ss",2],0,"second");wl("second","s");Sl("second",15);Gn("s",bo);Gn("ss",bo,Iu);Ji(["s","ss"],em);var EBe=Q1("Seconds",!1);ur("S",0,0,function(){return~~(this.millisecond()/100)});ur(0,["SS",2],0,function(){return~~(this.millisecond()/10)});ur(0,["SSS",3],0,"millisecond");ur(0,["SSSS",4],0,function(){return this.millisecond()*10});ur(0,["SSSSS",5],0,function(){return this.millisecond()*100});ur(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});ur(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});ur(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});ur(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});wl("millisecond","ms");Sl("millisecond",16);Gn("S",uO,Voe);Gn("SS",uO,Iu);Gn("SSS",uO,Hoe);var ay,wse;for(ay="SSSS";ay.length<=9;ay+="S")Gn(ay,ew);function TBe(t,e){e[l0]=Hr(("0."+t)*1e3)}for(ay="S";ay.length<=9;ay+="S")Ji(ay,TBe);wse=Q1("Milliseconds",!1);ur("z",0,0,"zoneAbbr");ur("zz",0,0,"zoneName");function CBe(){return this._isUTC?"UTC":""}function ABe(){return this._isUTC?"Coordinated Universal Time":""}var hn=GE.prototype;hn.add=xFe;hn.calendar=CFe;hn.clone=AFe;hn.diff=DFe;hn.endOf=WFe;hn.format=BFe;hn.from=jFe;hn.fromNow=$Fe;hn.to=UFe;hn.toNow=VFe;hn.get=INe;hn.invalidAt=eBe;hn.isAfter=PFe;hn.isBefore=IFe;hn.isBetween=RFe;hn.isSame=kFe;hn.isSameOrAfter=OFe;hn.isSameOrBefore=LFe;hn.isValid=JFe;hn.lang=mse;hn.locale=pse;hn.localeData=gse;hn.max=Jze;hn.min=Zze;hn.parsingFlags=QFe;hn.set=RNe;hn.startOf=HFe;hn.subtract=bFe;hn.toArray=YFe;hn.toObject=KFe;hn.toDate=XFe;hn.toISOString=zFe;hn.inspect=FFe;typeof Symbol<"u"&&Symbol.for!=null&&(hn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});hn.toJSON=ZFe;hn.toString=NFe;hn.unix=qFe;hn.valueOf=GFe;hn.creationData=tBe;hn.eraName=oBe;hn.eraNarrow=sBe;hn.eraAbbr=aBe;hn.eraYear=lBe;hn.year=Joe;hn.isLeapYear=KNe;hn.weekYear=mBe;hn.isoWeekYear=gBe;hn.quarter=hn.quarters=wBe;hn.month=Koe;hn.daysInMonth=qNe;hn.week=hn.weeks=nze;hn.isoWeek=hn.isoWeeks=rze;hn.weeksInYear=_Be;hn.weeksInWeekYear=xBe;hn.isoWeeksInYear=yBe;hn.isoWeeksInISOWeekYear=vBe;hn.date=bse;hn.day=hn.days=gze;hn.weekday=yze;hn.isoWeekday=vze;hn.dayOfYear=SBe;hn.hour=hn.hours=Eze;hn.minute=hn.minutes=MBe;hn.second=hn.seconds=EBe;hn.millisecond=hn.milliseconds=wse;hn.utcOffset=aFe;hn.utc=cFe;hn.local=uFe;hn.parseZone=dFe;hn.hasAlignedHourOffset=hFe;hn.isDST=fFe;hn.isLocal=mFe;hn.isUtcOffset=gFe;hn.isUtc=use;hn.isUTC=use;hn.zoneAbbr=CBe;hn.zoneName=ABe;hn.dates=Ld("dates accessor is deprecated. Use date instead.",bse);hn.months=Ld("months accessor is deprecated. Use month instead",Koe);hn.years=Ld("years accessor is deprecated. Use year instead",Joe);hn.zone=Ld("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",lFe);hn.isDSTShifted=Ld("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",pFe);function PBe(t){return xo(t*1e3)}function IBe(){return xo.apply(null,arguments).parseZone()}function Sse(t){return t}var Ei=EU.prototype;Ei.calendar=gNe;Ei.longDateFormat=xNe;Ei.invalidDate=wNe;Ei.ordinal=ENe;Ei.preparse=Sse;Ei.postformat=Sse;Ei.relativeTime=CNe;Ei.pastFuture=ANe;Ei.set=pNe;Ei.eras=nBe;Ei.erasParse=rBe;Ei.erasConvertYear=iBe;Ei.erasAbbrRegex=uBe;Ei.erasNameRegex=cBe;Ei.erasNarrowRegex=dBe;Ei.months=VNe;Ei.monthsShort=HNe;Ei.monthsParse=GNe;Ei.monthsRegex=YNe;Ei.monthsShortRegex=XNe;Ei.week=JNe;Ei.firstDayOfYear=tze;Ei.firstDayOfWeek=eze;Ei.weekdays=dze;Ei.weekdaysMin=fze;Ei.weekdaysShort=hze;Ei.weekdaysParse=mze;Ei.weekdaysRegex=_ze;Ei.weekdaysShortRegex=xze;Ei.weekdaysMinRegex=bze;Ei.isPM=Sze;Ei.meridiem=Tze;function EI(t,e,n,r){var i=km(),o=Qf().set(r,e);return i[n](o,t)}function Mse(t,e,n){if(wm(t)&&(e=t,t=void 0),t=t||"",e!=null)return EI(t,e,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=EI(t,r,n,"month");return i}function $U(t,e,n,r){typeof t=="boolean"?(wm(e)&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,wm(e)&&(n=e,e=void 0),e=e||"");var i=km(),o=t?i._week.dow:0,s,a=[];if(n!=null)return EI(e,(n+o)%7,r,"day");for(s=0;s<7;s++)a[s]=EI(e,(s+o)%7,r,"day");return a}function RBe(t,e){return Mse(t,e,"months")}function kBe(t,e){return Mse(t,e,"monthsShort")}function OBe(t,e,n){return $U(t,e,n,"weekdays")}function LBe(t,e,n){return $U(t,e,n,"weekdaysShort")}function DBe(t,e,n){return $U(t,e,n,"weekdaysMin")}xy("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=Hr(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+n}});Nn.lang=Ld("moment.lang is deprecated. Use moment.locale instead.",xy);Nn.langData=Ld("moment.langData is deprecated. Use moment.localeData instead.",km);var Np=Math.abs;function NBe(){var t=this._data;return this._milliseconds=Np(this._milliseconds),this._days=Np(this._days),this._months=Np(this._months),t.milliseconds=Np(t.milliseconds),t.seconds=Np(t.seconds),t.minutes=Np(t.minutes),t.hours=Np(t.hours),t.months=Np(t.months),t.years=Np(t.years),this}function Ese(t,e,n,r){var i=Fh(e,n);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function zBe(t,e){return Ese(this,t,e,1)}function FBe(t,e){return Ese(this,t,e,-1)}function W7(t){return t<0?Math.floor(t):Math.ceil(t)}function BBe(){var t=this._milliseconds,e=this._days,n=this._months,r=this._data,i,o,s,a,l;return t>=0&&e>=0&&n>=0||t<=0&&e<=0&&n<=0||(t+=W7(wB(n)+e)*864e5,e=0,n=0),r.milliseconds=t%1e3,i=hd(t/1e3),r.seconds=i%60,o=hd(i/60),r.minutes=o%60,s=hd(o/60),r.hours=s%24,e+=hd(s/24),l=hd(Tse(e)),n+=l,e-=W7(wB(l)),a=hd(n/12),n%=12,r.days=e,r.months=n,r.years=a,this}function Tse(t){return t*4800/146097}function wB(t){return t*146097/4800}function jBe(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if(t=Dd(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+r/864e5,n=this._months+Tse(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(wB(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return e*24+r/36e5;case"minute":return e*1440+r/6e4;case"second":return e*86400+r/1e3;case"millisecond":return Math.floor(e*864e5)+r;default:throw new Error("Unknown unit "+t)}}function $Be(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+Hr(this._months/12)*31536e6:NaN}function Om(t){return function(){return this.as(t)}}var UBe=Om("ms"),VBe=Om("s"),HBe=Om("m"),WBe=Om("h"),GBe=Om("d"),qBe=Om("w"),XBe=Om("M"),YBe=Om("Q"),KBe=Om("y");function ZBe(){return Fh(this)}function JBe(t){return t=Dd(t),this.isValid()?this[t+"s"]():NaN}function c_(t){return function(){return this.isValid()?this._data[t]:NaN}}var QBe=c_("milliseconds"),e4e=c_("seconds"),t4e=c_("minutes"),n4e=c_("hours"),r4e=c_("days"),i4e=c_("months"),o4e=c_("years");function s4e(){return hd(this.days()/7)}var Hp=Math.round,ib={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function a4e(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}function l4e(t,e,n,r){var i=Fh(t).abs(),o=Hp(i.as("s")),s=Hp(i.as("m")),a=Hp(i.as("h")),l=Hp(i.as("d")),d=Hp(i.as("M")),h=Hp(i.as("w")),p=Hp(i.as("y")),g=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||s<=1&&["m"]||s<n.m&&["mm",s]||a<=1&&["h"]||a<n.h&&["hh",a]||l<=1&&["d"]||l<n.d&&["dd",l];return n.w!=null&&(g=g||h<=1&&["w"]||h<n.w&&["ww",h]),g=g||d<=1&&["M"]||d<n.M&&["MM",d]||p<=1&&["y"]||["yy",p],g[2]=e,g[3]=+t>0,g[4]=r,a4e.apply(null,g)}function c4e(t){return t===void 0?Hp:typeof t=="function"?(Hp=t,!0):!1}function u4e(t,e){return ib[t]===void 0?!1:e===void 0?ib[t]:(ib[t]=e,t==="s"&&(ib.ss=e-1),!0)}function d4e(t,e){if(!this.isValid())return this.localeData().invalidDate();var n=!1,r=ib,i,o;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(n=t),typeof e=="object"&&(r=Object.assign({},ib,e),e.s!=null&&e.ss==null&&(r.ss=e.s-1)),i=this.localeData(),o=l4e(this,!n,r,i),n&&(o=i.pastFuture(+this,o)),i.postformat(o)}var XD=Math.abs;function ox(t){return(t>0)-(t<0)||+t}function vO(){if(!this.isValid())return this.localeData().invalidDate();var t=XD(this._milliseconds)/1e3,e=XD(this._days),n=XD(this._months),r,i,o,s,a=this.asSeconds(),l,d,h,p;return a?(r=hd(t/60),i=hd(r/60),t%=60,r%=60,o=hd(n/12),n%=12,s=t?t.toFixed(3).replace(/\.?0+$/,""):"",l=a<0?"-":"",d=ox(this._months)!==ox(a)?"-":"",h=ox(this._days)!==ox(a)?"-":"",p=ox(this._milliseconds)!==ox(a)?"-":"",l+"P"+(o?d+o+"Y":"")+(n?d+n+"M":"")+(e?h+e+"D":"")+(i||r||t?"T":"")+(i?p+i+"H":"")+(r?p+r+"M":"")+(t?p+s+"S":"")):"P0D"}var hi=gO.prototype;hi.isValid=rFe;hi.abs=NBe;hi.add=zBe;hi.subtract=FBe;hi.as=jBe;hi.asMilliseconds=UBe;hi.asSeconds=VBe;hi.asMinutes=HBe;hi.asHours=WBe;hi.asDays=GBe;hi.asWeeks=qBe;hi.asMonths=XBe;hi.asQuarters=YBe;hi.asYears=KBe;hi.valueOf=$Be;hi._bubble=BBe;hi.clone=ZBe;hi.get=JBe;hi.milliseconds=QBe;hi.seconds=e4e;hi.minutes=t4e;hi.hours=n4e;hi.days=r4e;hi.weeks=s4e;hi.months=i4e;hi.years=o4e;hi.humanize=d4e;hi.toISOString=vO;hi.toString=vO;hi.toJSON=vO;hi.locale=pse;hi.localeData=gse;hi.toIsoString=Ld("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",vO);hi.lang=mse;ur("X",0,0,"unix");ur("x",0,0,"valueOf");Gn("x",hO);Gn("X",ONe);Ji("X",function(t,e,n){n._d=new Date(parseFloat(t)*1e3)});Ji("x",function(t,e,n){n._d=new Date(Hr(t))});//! moment.js
Nn.version="2.29.4";hNe(xo);Nn.fn=hn;Nn.min=Qze;Nn.max=eFe;Nn.now=tFe;Nn.utc=Qf;Nn.unix=PBe;Nn.months=RBe;Nn.isDate=WE;Nn.locale=xy;Nn.invalid=aO;Nn.duration=Fh;Nn.isMoment=Rh;Nn.weekdays=OBe;Nn.parseZone=IBe;Nn.localeData=km;Nn.isDuration=hP;Nn.monthsShort=kBe;Nn.weekdaysMin=DBe;Nn.defineLocale=OU;Nn.updateLocale=Ize;Nn.locales=Rze;Nn.weekdaysShort=LBe;Nn.normalizeUnits=Dd;Nn.relativeTimeRounding=c4e;Nn.relativeTimeThreshold=u4e;Nn.calendarFormat=TFe;Nn.prototype=hn;Nn.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const h4e=t=>{switch(t){case"kmh":return 1.852;case"mph":return 1.15078;case"kn":default:return 1}},f4e=t=>{switch(t){case"kmh":return"Km/h";case"mph":return"sharedMph";case"kn":default:return"m/s"}},p4e=(t,e)=>t*h4e(e),m4e=t=>{switch(t){case"mi":return 621371e-9;case"nmi":return 539957e-9;case"km":default:return .001}},g4e=t=>{switch(t){case"mi":return"Mi";case"nmi":return"Nmi";case"km":default:return"Km"}},y4e=(t,e)=>t*m4e(e),v4e=t=>{switch(t){case"ft":return 3.28084;case"m":default:return 1}},_4e=t=>{switch(t){case"ft":return"sharedFeet";case"m":default:return"sharedMeters"}},x4e=(t,e)=>t*v4e(e),b4e=(t,e)=>t+e.charAt(0).toUpperCase()+e.slice(1),Cse=t=>t?"sharedYes":"sharedNo",w4e=(t,e=1)=>Number(t.toFixed(e)),Ase=t=>`${t}%`,Pse=(t,e,n)=>{if(t){const r=Nn(t);switch(e){case"date":return r.format("YYYY-MM-DD");case"time":return r.format("HH:mm:ss");case"minutes":return r.format("YYYY-MM-DD HH:mm");default:return r.format("YYYY-MM-DD HH:mm:ss")}}return""},Ise=t=>t?b4e("alarm_",t):"",S4e=t=>{const e=["↑","↗","→","↘","↓","↙","←","↖"];let n=(t+22.5)%360;return n<0&&(n+=360),t.toFixed()+e[Math.floor(n/45)]},M4e=(t,e,n)=>`${y4e(t,e).toFixed(2)} ${g4e(e)}`,E4e=(t,e,n)=>`${x4e(t,e).toFixed(2)} ${_4e(e)}`,T4e=(t,e,n)=>`${p4e(t,e).toFixed(2)} ${f4e(e)}`,C4e=(t,e)=>{const n=Math.floor(t/36e5),r=Math.floor(t%36e5/6e4);return`${n} ${e("sharedHourAbbreviation")} ${r} ${e("sharedMinuteAbbreviation")}`},G7=(t,e,n)=>{let r,i,o,s;switch(t==="latitude"?r=e>=0?"N":"S":r=e>=0?"E":"W",n){case"ddm":return e=Math.abs(e),i=Math.floor(e),o=(e-i)*60,`${i}° ${o.toFixed(6)}' ${r}`;case"dms":return e=Math.abs(e),i=Math.floor(e),o=Math.floor((e-i)*60),s=Math.round((e-i-o/60)*3600),`${i}° ${o}' ${s}" ${r}`;default:return`${e.toFixed(6)}°`}},Rse=t=>{switch(t){case"online":return"positive";case"offline":return"negative";case"unknown":default:return"neutral"}},q7="data:image/svg+xml,%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%3e%3ctitle%3eEngine%3c/title%3e%3cpath%20fill='currentColor'%20d='M13.778%206.667v2.222h3.333v2.222h2.222v-2.222h3.333v-2.222h-8.889zM13.778%2013.333c-0.3%200-0.579%200.121-0.79%200.321l-1.888%201.901h-2.878c-0.611%200-1.111%200.5-1.111%201.111v6.667c0%200.611%200.5%201.111%201.111%201.111h1.888l3.056%202.033c0.178%200.122%200.39%200.189%200.612%200.189h5.556c0.244%200%200.477-0.077%200.666-0.221l4.444-3.333c0.278-0.211%200.445-0.545%200.445-0.89v-7.778c0-0.611-0.5-1.111-1.111-1.111h-10zM27.111%2014.444v6.667h2.222v-6.667h-2.222zM17.111%2015.556v3.333h2.222l-3.333%205.556v-3.333h-2.222l3.333-5.556zM2.667%2016.667v5.556h2.222v-5.556h-2.222z'%3e%3c/path%3e%3c/svg%3e",A4e=Wr(t=>({icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},batteryText:{fontSize:"0.75rem",fontWeight:"normal",lineHeight:"0.875rem"},positive:{color:t.palette.colors.positive},medium:{color:t.palette.colors.medium},negative:{color:t.palette.colors.negative},neutral:{color:t.palette.colors.neutral}})),P4e={width:"25px",height:"25px",filter:"brightness(0) invert(1)"},YD={color:yh[500]},X7={color:Fj[700]},KD={color:Gp[500]},I4e={color:Lf[500]},R4e=({data:t,index:e,style:n})=>{const r=A4e(),i=Ql(),o=t[e],s=nr(d=>d.data.positions[o.id]),a=o.name,l=()=>{let d;return o.status==="online"||!o.lastUpdate?d=o.status:d=Nn(o.lastUpdate).fromNow(),z.jsxs(Ye.Fragment,{children:[s&&s.attributes.hasOwnProperty("landed_state")&&z.jsx(yn,{component:"span",sx:{display:"block",fontSize:10},children:s.attributes.landed_state}),z.jsx(yn,{component:"span",style:{fontSize:12},className:r[Rse(o.status)],children:d})]})};return z.jsx("div",{style:n,children:z.jsxs(VAe,{onClick:()=>i(ou.selectId(o.id)),disabled:o.disabled,children:[z.jsx(XAe,{children:z.jsx(gEe,{children:z.jsx("img",{style:P4e,src:eM[eI(o.category)],alt:""})})}),z.jsx(QAe,{primary:a,primaryTypographyProps:{noWrap:!0},secondary:l(),secondaryTypographyProps:{noWrap:!0}}),s&&z.jsxs(z.Fragment,{children:[s.attributes.hasOwnProperty("ignition")&&z.jsx(Yg,{title:`positionIgnition: ${Cse(s.attributes.ignition)}`,children:z.jsx(hr,{size:"small",children:s.attributes.ignition?z.jsx(q7,{width:20,height:20,style:YD}):z.jsx(q7,{width:20,height:20,style:I4e})})}),s.hasOwnProperty("speed")&&z.jsx(Yg,{title:`speed: ${s.speed}`,children:z.jsx(hr,{size:"small",children:z.jsxs("div",{style:{fontSize:"0.9rem"},children:[" V ",Math.round(s.speed),"m/s"]})})}),s.hasOwnProperty("altitude")&&z.jsx(Yg,{title:`altitude: ${Math.round(s.altitude)}`,children:z.jsx(hr,{size:"small",children:z.jsxs("div",{style:{fontSize:"0.9rem"},children:["H ",Math.round(s.altitude),"m"]})})}),s.attributes.hasOwnProperty("batteryLevel")&&z.jsx(Yg,{title:`BatteryLevel: ${Ase(s.attributes.batteryLevel)}`,children:z.jsx(hr,{size:"small",children:s.attributes.batteryLevel>70?s.attributes.charge?z.jsx(Toe,{fontSize:"small",style:YD}):z.jsx(Eoe,{fontSize:"small",style:YD}):s.attributes.batteryLevel>30?s.attributes.charge?z.jsx(Poe,{fontSize:"small",style:X7}):z.jsx(Coe,{fontSize:"small",style:X7}):s.attributes.charge?z.jsx(Ooe,{fontSize:"small",style:KD}):z.jsx(Roe,{fontSize:"small",style:KD})})}),s.attributes.hasOwnProperty("alarm")&&s.attributes.alarm=="threat"&&z.jsx(Yg,{title:`eventAlarm: ${Ise(s.attributes.alarm)}`,children:z.jsx(hr,{size:"small",children:z.jsx(Doe,{fontSize:"small",style:KD})})})]})]},o.id)})},k4e=Wr(t=>({list:{maxHeight:"100%"},listInner:{position:"relative",margin:t.spacing(1.5,0)}})),kse=({devices:t})=>{const e=k4e(),n=Ql(),r=V.useRef(null);r.current&&(r.current.className=e.listInner);const[,i]=V.useState(Date.now());return V.useEffect(()=>{const o=setInterval(()=>i(Date.now()),6e4);return()=>{clearInterval(o)}},[]),Vy(async()=>{const o=await fetch("/api/devices");if(o.ok)n(ou.refresh(await o.json()));else throw Error(await o.text())},[]),z.jsx(jDe,{className:e.list,children:({height:o,width:s})=>z.jsx(FDe,{width:s,height:o,itemCount:t.length,itemData:t,itemSize:72,overscanCount:10,innerRef:r,children:R4e})})};var UU={exports:{}},Ose={};function Lse(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=Lse(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function Y7(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=Lse(t))&&(r&&(r+=" "),r+=e);return r}const O4e=Object.freeze(Object.defineProperty({__proto__:null,clsx:Y7,default:Y7},Symbol.toStringTag,{value:"Module"})),L4e=Zf(O4e);var Zo={},tp={};Object.defineProperty(tp,"__esModule",{value:!0});tp.dontSetMe=B4e;tp.findInArray=D4e;tp.int=F4e;tp.isFunction=N4e;tp.isNum=z4e;function D4e(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function N4e(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function z4e(t){return typeof t=="number"&&!isNaN(t)}function F4e(t){return parseInt(t,10)}function B4e(t,e,n){if(t[e])return new Error("Invalid prop ".concat(e," passed to ").concat(n," - do not set this, set it on the child."))}var u_={};Object.defineProperty(u_,"__esModule",{value:!0});u_.browserPrefixToKey=Nse;u_.browserPrefixToStyle=j4e;u_.default=void 0;u_.getPrefix=Dse;const ZD=["Moz","Webkit","O","ms"];function Dse(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const n=(t=window.document)===null||t===void 0||(t=t.documentElement)===null||t===void 0?void 0:t.style;if(!n||e in n)return"";for(let r=0;r<ZD.length;r++)if(Nse(e,ZD[r])in n)return ZD[r];return""}function Nse(t,e){return e?"".concat(e).concat($4e(t)):t}function j4e(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t}function $4e(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}u_.default=Dse();Object.defineProperty(Zo,"__esModule",{value:!0});Zo.addClassName=Bse;Zo.addEvent=H4e;Zo.addUserSelectStyles=t5e;Zo.createCSSTransform=Z4e;Zo.createSVGTransform=J4e;Zo.getTouch=Q4e;Zo.getTouchIdentifier=e5e;Zo.getTranslation=VU;Zo.innerHeight=X4e;Zo.innerWidth=Y4e;Zo.matchesSelector=Fse;Zo.matchesSelectorAndParentsTo=V4e;Zo.offsetXYFromParent=K4e;Zo.outerHeight=G4e;Zo.outerWidth=q4e;Zo.removeClassName=jse;Zo.removeEvent=W4e;Zo.removeUserSelectStyles=n5e;var yu=tp,K7=U4e(u_);function zse(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(zse=function(r){return r?n:e})(t)}function U4e(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=zse(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}let IC="";function Fse(t,e){return IC||(IC=(0,yu.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,yu.isFunction)(t[n])})),(0,yu.isFunction)(t[IC])?t[IC](e):!1}function V4e(t,e,n){let r=t;do{if(Fse(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function H4e(t,e,n,r){if(!t)return;const i={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,i):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function W4e(t,e,n,r){if(!t)return;const i={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function G4e(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,yu.int)(n.borderTopWidth),e+=(0,yu.int)(n.borderBottomWidth),e}function q4e(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,yu.int)(n.borderLeftWidth),e+=(0,yu.int)(n.borderRightWidth),e}function X4e(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,yu.int)(n.paddingTop),e-=(0,yu.int)(n.paddingBottom),e}function Y4e(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,yu.int)(n.paddingLeft),e-=(0,yu.int)(n.paddingRight),e}function K4e(t,e,n){const i=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),o=(t.clientX+e.scrollLeft-i.left)/n,s=(t.clientY+e.scrollTop-i.top)/n;return{x:o,y:s}}function Z4e(t,e){const n=VU(t,e,"px");return{[(0,K7.browserPrefixToKey)("transform",K7.default)]:n}}function J4e(t,e){return VU(t,e,"")}function VU(t,e,n){let{x:r,y:i}=t,o="translate(".concat(r).concat(n,",").concat(i).concat(n,")");if(e){const s="".concat(typeof e.x=="string"?e.x:e.x+n),a="".concat(typeof e.y=="string"?e.y:e.y+n);o="translate(".concat(s,", ").concat(a,")")+o}return o}function Q4e(t,e){return t.targetTouches&&(0,yu.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,yu.findInArray)(t.changedTouches,n=>e===n.identifier)}function e5e(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function t5e(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&Bse(t.body,"react-draggable-transparent-selection")}function n5e(t){if(t)try{if(t.body&&jse(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function Bse(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function jse(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var np={};Object.defineProperty(np,"__esModule",{value:!0});np.canDragX=o5e;np.canDragY=s5e;np.createCoreData=l5e;np.createDraggableData=c5e;np.getBoundPosition=r5e;np.getControlPosition=a5e;np.snapToGrid=i5e;var Zc=tp,ob=Zo;function r5e(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:u5e(r);const i=HU(t);if(typeof r=="string"){const{ownerDocument:o}=i,s=o.defaultView;let a;if(r==="parent"?a=i.parentNode:a=o.querySelector(r),!(a instanceof s.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const l=a,d=s.getComputedStyle(i),h=s.getComputedStyle(l);r={left:-i.offsetLeft+(0,Zc.int)(h.paddingLeft)+(0,Zc.int)(d.marginLeft),top:-i.offsetTop+(0,Zc.int)(h.paddingTop)+(0,Zc.int)(d.marginTop),right:(0,ob.innerWidth)(l)-(0,ob.outerWidth)(i)-i.offsetLeft+(0,Zc.int)(h.paddingRight)-(0,Zc.int)(d.marginRight),bottom:(0,ob.innerHeight)(l)-(0,ob.outerHeight)(i)-i.offsetTop+(0,Zc.int)(h.paddingBottom)-(0,Zc.int)(d.marginBottom)}}return(0,Zc.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,Zc.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,Zc.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,Zc.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function i5e(t,e,n){const r=Math.round(e/t[0])*t[0],i=Math.round(n/t[1])*t[1];return[r,i]}function o5e(t){return t.props.axis==="both"||t.props.axis==="x"}function s5e(t){return t.props.axis==="both"||t.props.axis==="y"}function a5e(t,e,n){const r=typeof e=="number"?(0,ob.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const i=HU(n),o=n.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,ob.offsetXYFromParent)(r||t,o,n.props.scale)}function l5e(t,e,n){const r=!(0,Zc.isNum)(t.lastX),i=HU(t);return r?{node:i,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:i,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function c5e(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function u5e(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function HU(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var _O={},xO={};Object.defineProperty(xO,"__esModule",{value:!0});xO.default=d5e;function d5e(){}Object.defineProperty(_O,"__esModule",{value:!0});_O.default=void 0;var JD=f5e(V),pc=WU(qj),h5e=WU(k1),ol=Zo,Cg=np,QD=tp,vS=WU(xO);function WU(t){return t&&t.__esModule?t:{default:t}}function $se(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return($se=function(r){return r?n:e})(t)}function f5e(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=$se(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}function Ul(t,e,n){return e=p5e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p5e(t){var e=m5e(t,"string");return typeof e=="symbol"?e:String(e)}function m5e(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const lh={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Ag=lh.mouse,bO=class extends JD.Component{constructor(){super(...arguments),Ul(this,"dragging",!1),Ul(this,"lastX",NaN),Ul(this,"lastY",NaN),Ul(this,"touchIdentifier",null),Ul(this,"mounted",!1),Ul(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,ol.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,ol.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&e.preventDefault();const i=(0,ol.getTouchIdentifier)(e);this.touchIdentifier=i;const o=(0,Cg.getControlPosition)(e,i,this);if(o==null)return;const{x:s,y:a}=o,l=(0,Cg.createCoreData)(this,s,a);(0,vS.default)("DraggableCore: handleDragStart: %j",l),(0,vS.default)("calling",this.props.onStart),!(this.props.onStart(e,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,ol.addUserSelectStyles)(r),this.dragging=!0,this.lastX=s,this.lastY=a,(0,ol.addEvent)(r,Ag.move,this.handleDrag),(0,ol.addEvent)(r,Ag.stop,this.handleDragStop))}),Ul(this,"handleDrag",e=>{const n=(0,Cg.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:i}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,l=i-this.lastY;if([a,l]=(0,Cg.snapToGrid)(this.props.grid,a,l),!a&&!l)return;r=this.lastX+a,i=this.lastY+l}const o=(0,Cg.createCoreData)(this,r,i);if((0,vS.default)("DraggableCore: handleDrag: %j",o),this.props.onDrag(e,o)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=r,this.lastY=i}),Ul(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,Cg.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:i}=n;if(Array.isArray(this.props.grid)){let l=r-this.lastX||0,d=i-this.lastY||0;[l,d]=(0,Cg.snapToGrid)(this.props.grid,l,d),r=this.lastX+l,i=this.lastY+d}const o=(0,Cg.createCoreData)(this,r,i);if(this.props.onStop(e,o)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,ol.removeUserSelectStyles)(a.ownerDocument),(0,vS.default)("DraggableCore: handleDragStop: %j",o),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,vS.default)("DraggableCore: Removing handlers"),(0,ol.removeEvent)(a.ownerDocument,Ag.move,this.handleDrag),(0,ol.removeEvent)(a.ownerDocument,Ag.stop,this.handleDragStop))}),Ul(this,"onMouseDown",e=>(Ag=lh.mouse,this.handleDragStart(e))),Ul(this,"onMouseUp",e=>(Ag=lh.mouse,this.handleDragStop(e))),Ul(this,"onTouchStart",e=>(Ag=lh.touch,this.handleDragStart(e))),Ul(this,"onTouchEnd",e=>(Ag=lh.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,ol.addEvent)(e,lh.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,ol.removeEvent)(n,lh.mouse.move,this.handleDrag),(0,ol.removeEvent)(n,lh.touch.move,this.handleDrag),(0,ol.removeEvent)(n,lh.mouse.stop,this.handleDragStop),(0,ol.removeEvent)(n,lh.touch.stop,this.handleDragStop),(0,ol.removeEvent)(e,lh.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,ol.removeUserSelectStyles)(n)}}findDOMNode(){var e,n;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(n=this.props)===null||n===void 0||(n=n.nodeRef)===null||n===void 0?void 0:n.current:h5e.default.findDOMNode(this)}render(){return JD.cloneElement(JD.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};_O.default=bO;Ul(bO,"displayName","DraggableCore");Ul(bO,"propTypes",{allowAnyClick:pc.default.bool,children:pc.default.node.isRequired,disabled:pc.default.bool,enableUserSelectHack:pc.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:pc.default.arrayOf(pc.default.number),handle:pc.default.string,cancel:pc.default.string,nodeRef:pc.default.object,onStart:pc.default.func,onDrag:pc.default.func,onStop:pc.default.func,onMouseDown:pc.default.func,scale:pc.default.number,className:QD.dontSetMe,style:QD.dontSetMe,transform:QD.dontSetMe});Ul(bO,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),t.default=void 0;var e=g(V),n=h(qj),r=h(k1),i=h(L4e),o=Zo,s=np,a=tp,l=h(_O),d=h(xO);function h(C){return C&&C.__esModule?C:{default:C}}function p(C){if(typeof WeakMap!="function")return null;var A=new WeakMap,P=new WeakMap;return(p=function(k){return k?P:A})(C)}function g(C,A){if(C&&C.__esModule)return C;if(C===null||typeof C!="object"&&typeof C!="function")return{default:C};var P=p(A);if(P&&P.has(C))return P.get(C);var k={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in C)if(B!=="default"&&Object.prototype.hasOwnProperty.call(C,B)){var W=F?Object.getOwnPropertyDescriptor(C,B):null;W&&(W.get||W.set)?Object.defineProperty(k,B,W):k[B]=C[B]}return k.default=C,P&&P.set(C,k),k}function v(){return v=Object.assign?Object.assign.bind():function(C){for(var A=1;A<arguments.length;A++){var P=arguments[A];for(var k in P)Object.prototype.hasOwnProperty.call(P,k)&&(C[k]=P[k])}return C},v.apply(this,arguments)}function x(C,A,P){return A=b(A),A in C?Object.defineProperty(C,A,{value:P,enumerable:!0,configurable:!0,writable:!0}):C[A]=P,C}function b(C){var A=w(C,"string");return typeof A=="symbol"?A:String(A)}function w(C,A){if(typeof C!="object"||C===null)return C;var P=C[Symbol.toPrimitive];if(P!==void 0){var k=P.call(C,A||"default");if(typeof k!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(A==="string"?String:Number)(C)}class S extends e.Component{static getDerivedStateFromProps(A,P){let{position:k}=A,{prevPropsPosition:F}=P;return k&&(!F||k.x!==F.x||k.y!==F.y)?((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:k,prevPropsPosition:F}),{x:k.x,y:k.y,prevPropsPosition:{...k}}):null}constructor(A){super(A),x(this,"onDragStart",(P,k)=>{if((0,d.default)("Draggable: onDragStart: %j",k),this.props.onStart(P,(0,s.createDraggableData)(this,k))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),x(this,"onDrag",(P,k)=>{if(!this.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",k);const F=(0,s.createDraggableData)(this,k),B={x:F.x,y:F.y,slackX:0,slackY:0};if(this.props.bounds){const{x:J,y:H}=B;B.x+=this.state.slackX,B.y+=this.state.slackY;const[Y,le]=(0,s.getBoundPosition)(this,B.x,B.y);B.x=Y,B.y=le,B.slackX=this.state.slackX+(J-B.x),B.slackY=this.state.slackY+(H-B.y),F.x=B.x,F.y=B.y,F.deltaX=B.x-this.state.x,F.deltaY=B.y-this.state.y}if(this.props.onDrag(P,F)===!1)return!1;this.setState(B)}),x(this,"onDragStop",(P,k)=>{if(!this.state.dragging||this.props.onStop(P,(0,s.createDraggableData)(this,k))===!1)return!1;(0,d.default)("Draggable: onDragStop: %j",k);const B={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:J,y:H}=this.props.position;B.x=J,B.y=H}this.setState(B)}),this.state={dragging:!1,dragged:!1,x:A.position?A.position.x:A.defaultPosition.x,y:A.position?A.position.y:A.defaultPosition.y,prevPropsPosition:{...A.position},slackX:0,slackY:0,isElementSVG:!1},A.position&&!(A.onDrag||A.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var A,P;return(A=(P=this.props)===null||P===void 0||(P=P.nodeRef)===null||P===void 0?void 0:P.current)!==null&&A!==void 0?A:r.default.findDOMNode(this)}render(){const{axis:A,bounds:P,children:k,defaultPosition:F,defaultClassName:B,defaultClassNameDragging:W,defaultClassNameDragged:J,position:H,positionOffset:Y,scale:le,...pe}=this.props;let re={},me=null;const we=!!!H||this.state.dragging,ee=H||F,ye={x:(0,s.canDragX)(this)&&we?this.state.x:ee.x,y:(0,s.canDragY)(this)&&we?this.state.y:ee.y};this.state.isElementSVG?me=(0,o.createSVGTransform)(ye,Y):re=(0,o.createCSSTransform)(ye,Y);const be=(0,i.default)(k.props.className||"",B,{[W]:this.state.dragging,[J]:this.state.dragged});return e.createElement(l.default,v({},pe,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(k),{className:be,style:{...k.props.style,...re},transform:me}))}}t.default=S,x(S,"displayName","Draggable"),x(S,"propTypes",{...l.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),x(S,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(Ose);const{default:Use,DraggableCore:g5e}=Ose;UU.exports=Use;UU.exports.default=Use;UU.exports.DraggableCore=g5e;var GU={},y5e=Xr;Object.defineProperty(GU,"__esModule",{value:!0});var wO=GU.default=void 0,v5e=y5e(oi()),_5e=z;wO=GU.default=(0,v5e.default)((0,_5e.jsx)("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8"}),"Replay");var qU={},x5e=Xr;Object.defineProperty(qU,"__esModule",{value:!0});var XU=qU.default=void 0,b5e=x5e(oi()),w5e=z;XU=qU.default=(0,b5e.default)((0,w5e.jsx)("path",{d:"M5 4v2h14V4zm0 10h4v6h6v-6h4l-7-7z"}),"Publish");var YU={},S5e=Xr;Object.defineProperty(YU,"__esModule",{value:!0});var KU=YU.default=void 0,M5e=S5e(oi()),E5e=z;KU=YU.default=(0,M5e.default)((0,E5e.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");var ZU={},T5e=Xr;Object.defineProperty(ZU,"__esModule",{value:!0});var Vse=ZU.default=void 0,C5e=T5e(oi()),A5e=z;Vse=ZU.default=(0,C5e.default)((0,A5e.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M7 13.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m5 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m5 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"Pending");const SB=({position:t,property:e,attribute:n})=>{const r=nr(p=>p.devices.items[t.deviceId]),i=e||n,o=e?t[e]:t.attributes[n],s="m",a="m",l="m/s",d="ddm",h=()=>{switch(i){case"fixTime":case"deviceTime":case"serverTime":return Pse(o,"seconds");case"latitude":return G7("latitude",o,d);case"longitude":return G7("longitude",o,d);case"speed":return T4e(o,l);case"course":return S4e(o);case"altitude":return E4e(o,a);case"batteryLevel":return Ase(o);case"alarm":return Ise(o);case"gimbal":return o.toString();case"obstacle_info":return o.toString();case"odometer":case"distance":case"totalDistance":return M4e(o,s);case"hours":return C4e(o);default:return typeof o=="number"?w4e(o):typeof o=="boolean"?Cse(o):o||""}};switch(i){case"image":case"video":case"audio":return z.jsx(kAe,{href:`/api/media/${r.uniqueId}/${o}`,target:"_blank",children:o});case"totalDistance":case"hours":case"address":case"network":return"";default:return h()}},P5e=Wr(t=>({root:{[t.breakpoints.down("md")]:{bottom:`calc(${t.dimensions.bottomBarHeight}px + ${t.spacing(1)})`}},button:{height:"auto",marginTop:0,marginBottom:0,color:t.palette.colors.negative}})),I5e=({open:t,endpoint:e,itemId:n,onResult:r})=>{const i=P5e(),o=async()=>{(await fetch(`/api/${e}/${n}`,{method:"DELETE"})).ok?(console.log("elemento eliminado"),r(!0)):r(!1)};return z.jsx(cIe,{className:i.root,open:t,autoHideDuration:2750,onClose:()=>r(!1),message:"confirmar para eliminar",action:z.jsx(jr,{size:"small",className:i.button,onClick:o,children:"Eliminar"})})},R5e=()=>V.useMemo(()=>({custom:[{key:"data",name:"commandData",type:"string"}],positionPeriodic:[{key:"frequency",name:"commandFrequency",type:"number"}],setTimezone:[{key:"timezone",name:"commandTimezone",type:"string"}],sendSms:[{key:"phone",name:"commandPhone",type:"string"},{key:"message",name:"commandMessage",type:"string"}],message:[{key:"message",name:"commandMessage",type:"string"}],sendUssd:[{key:"phone",name:"commandPhone",type:"string"}],sosNumber:[{key:"index",name:"commandIndex",type:"number"},{key:"phone",name:"commandPhone",type:"string"}],silenceTime:[{key:"data",name:"commandData",type:"string"}],setPhonebook:[{key:"data",name:"commandData",type:"string"}],voiceMessage:[{key:"data",name:"commandData",type:"string"}],outputControl:[{key:"index",name:"commandIndex",type:"number"},{key:"data",name:"commandData",type:"string"}],voiceMonitoring:[{key:"enable",name:"commandEnable",type:"boolean"}],setAgps:[{key:"enable",name:"commandEnable",type:"boolean"}],setIndicator:[{key:"data",name:"commandData",type:"string"}],configuration:[{key:"data",name:"commandData",type:"string"}],setConnection:[{key:"server",name:"commandServer",type:"string"},{key:"port",name:"commandPort",type:"number"}],setOdometer:[{key:"data",name:"commandData",type:"string"}],modePowerSaving:[{key:"enable",name:"commandEnable",type:"boolean"}],modeDeepSleep:[{key:"enable",name:"commandEnable",type:"boolean"}],alarmGeofence:[{key:"radius",name:"commandRadius",type:"number"}],alarmBattery:[{key:"enable",name:"commandEnable",type:"boolean"}],alarmSos:[{key:"enable",name:"commandEnable",type:"boolean"}],alarmRemove:[{key:"enable",name:"commandEnable",type:"boolean"}],alarmClock:[{key:"data",name:"commandData",type:"string"}],alarmSpeed:[{key:"data",name:"commandData",type:"string"}],alarmFall:[{key:"enable",name:"commandEnable",type:"boolean"}],alarmVibration:[{key:"data",name:"commandData",type:"string"}],SetupCamera:[{key:"type",name:"Type",type:"number"},{key:"enable",name:"Enable",type:"number"}],Gimbal:[{key:"roll",name:"Roll",type:"number"},{key:"pitch",name:"Pitch",type:"number"},{key:"yaw",name:"Yaw",type:"number"}],GimbalPitch:[{key:"pitch",name:"Pitch",type:"number"}],treat:[{key:"enable",name:"commandEnable",type:"boolean"}],setupcamera:[{key:"cameraType",name:"cameraType",type:"number"},{key:"start",name:"start",type:"number"}]}),[]),k5e=({deviceId:t,item:e,setItem:n})=>{const r=nr(a=>a.session.server.textEnabled),i=R5e(),[o,s]=V.useState([]);return V.useEffect(()=>{e&&e.type?s(i[e.type]||[]):s([])},[i,e]),z.jsxs(V.Fragment,{children:[z.jsx(lu,{value:e.type||"",onChange:a=>n({...e,type:a.target.value,attributes:{}}),endpoint:t?`/api/commands/types?${new URLSearchParams({deviceId:t}).toString()}`:"/api/commands/types",keyGetter:a=>a.type,titleGetter:a=>a.type,label:"Command type",getItems:a=>console.log(a)}),o.map(({key:a,name:l,type:d})=>d==="boolean"?z.jsx(pG,{control:z.jsx(hG,{checked:e.attributes[a],onChange:h=>{const p={...e,attributes:{...e.attributes}};p.attributes[a]=h.target.checked,n(p)}}),label:l}):z.jsx(bi,{type:d==="number"?"number":"text",value:e.attributes[a],onChange:h=>{const p={...e,attributes:{...e.attributes}};p.attributes[a]=d==="number"?Number(h.target.value):h.target.value,n(p)},label:l})),r&&z.jsx(pG,{control:z.jsx(hG,{checked:e.textChannel,onChange:a=>n({...e,textChannel:a.target.checked})}),label:"commandSendSms"})]},"sdf")},O5e=Wr(t=>({root:{pointerEvents:"none",position:"fixed",zIndex:6,left:"50%",top:"20%",transform:"translateX(-50%)"},card:{pointerEvents:"auto",width:t.dimensions.popupMaxWidth},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(1,1,0,2)},content:{overflow:"auto",paddingTop:t.spacing(2),paddingBottom:t.spacing(2)},buttons:{marginTop:t.spacing(2),marginBottom:t.spacing(2),display:"flex",justifyContent:"space-evenly","& > *":{flexBasis:"33%"}},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)}})),Hse=({id:t,onClose:e})=>{const n=O5e(),[r,i]=V.useState({}),[o,s]=V.useState(0),a=Ure(async()=>{let d;if(o){const p=await fetch(`/api/commands/${o}`);if(p.ok)d=await p.json();else throw Error(await p.text())}else d=r;d.deviceId=parseInt(t,10);const h=await fetch("/api/commands/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(h.ok)console.log("ok");else throw Error(await h.text());e()}),l=()=>o||r&&r.type;return z.jsx("div",{className:n.root,children:z.jsxs(Nh,{elevation:3,className:n.card,children:[z.jsxs("div",{className:n.header,children:[z.jsx(yn,{variant:"body2",color:"textSecondary",children:"Send Commands"}),z.jsx(hr,{size:"small",onClick:e,onTouchStart:e,children:z.jsx(Ph,{fontSize:"small"})})]}),z.jsxs(s_,{maxWidth:"xs",className:n.container,children:[z.jsxs(ml,{defaultExpanded:!0,children:[z.jsx(yl,{expandIcon:z.jsx(La,{}),children:z.jsx(yn,{variant:"subtitle1",children:"Command"})}),z.jsx(gl,{className:n.details,children:!o&&z.jsx(k5e,{deviceId:t,item:r,setItem:i})})]}),z.jsxs("div",{className:n.buttons,children:[z.jsx(jr,{type:"button",color:"primary",variant:"outlined",onClick:e,children:"Cancel"}),z.jsx(jr,{type:"button",color:"primary",variant:"contained",onClick:a,disabled:!l(),children:"Send"})]})]})]})})},Wse=Wr(t=>({card:{pointerEvents:"auto",width:t.dimensions.popupMaxWidth},media:{height:t.dimensions.popupImageHeight,display:"flex",justifyContent:"flex-end",alignItems:"flex-start"},mediaButton:{color:t.palette.colors.white,mixBlendMode:"difference"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(1,1,0,2)},content:{paddingTop:t.spacing(1),paddingBottom:t.spacing(1)},negative:{color:t.palette.colors.negative},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},table:{"& .MuiTableCell-sizeSmall":{paddingLeft:0,paddingRight:0}},cell:{borderBottom:"none"},actions:{justifyContent:"space-between"},root:({desktopPadding:e})=>({pointerEvents:"none",position:"fixed",zIndex:5,left:"50%",[t.breakpoints.up("md")]:{left:`calc(50% + ${e} / 2)`,bottom:t.spacing(3)},[t.breakpoints.down("md")]:{left:"50%",bottom:`calc(${t.spacing(3)} + ${t.dimensions.bottomBarHeight}px)`},transform:"translateX(-50%)"})})),eN=({name:t,content:e})=>{const n=Wse();return z.jsxs(yy,{children:[z.jsx(Lo,{className:n.card,children:z.jsx(yn,{variant:"body2",children:t})}),z.jsx(Lo,{className:n.cell,children:z.jsx(yn,{variant:"body2",color:"textSecondary",children:e})})]})},L5e=({deviceId:t,position:e,onClose:n,disableActions:r,desktopPadding:i=0})=>{var A;const o=Wse(),s=Jf(),a=Ql(),l=nr(P=>P.devices.items[t]),d=(A=l==null?void 0:l.attributes)==null?void 0:A.deviceImage,h="speed,course,batteryLevel,gimbal,MIC_1,MIC_2,MIC_3,Metano,Alcohol,CO",[p,g]=V.useState(null),[v,x]=V.useState(!1),[b,w]=V.useState(!1),S=async(P,k,F)=>{console.log("send command uavud: "+P+k);try{const B=await fetch("/api/commands/send",{method:"POST",body:JSON.stringify({deviceId:P,type:k,attributes:F}),headers:{"Content-Type":"application/json"}});if(B.ok){const W=await B.json();console.log(W)}else throw console.log("Error1:"+B),Error(await B.text())}catch(B){console.log("Error2:"+B)}},C=async P=>{if(P){const k=await fetch("/api/devices");if(k.ok){let F=await k.json();a(ou.refresh(Object.values(F)))}else throw Error(await k.text())}x(!1)};return z.jsxs(z.Fragment,{children:[z.jsx("div",{className:o.root,children:l&&z.jsxs(Nh,{elevation:3,className:o.card,children:[d?z.jsx(Ire,{className:o.media,image:`/api/media/${l.uniqueId}/${d}`,children:z.jsx(hr,{size:"small",onClick:n,onTouchStart:n,children:z.jsx(Ph,{fontSize:"small",className:o.mediaButton})})}):z.jsxs("div",{className:o.header,children:[z.jsx(yn,{variant:"body2",color:"textSecondary",children:l.name}),z.jsx(hr,{size:"small",onClick:n,onTouchStart:n,children:z.jsx(Ph,{fontSize:"small"})})]}),e&&z.jsx(Fk,{className:o.content,children:z.jsx(jk,{size:"small",classes:{root:o.table},children:z.jsxs(Uk,{children:[e.hasOwnProperty("latitude")&&z.jsx(eN,{name:"Position",content:z.jsx("a",{href:"https://www.google.com/maps?q="+e.latitude+","+e.longitude,target:"_blank",children:"["+e.latitude.toFixed(6)+","+e.longitude.toFixed(6)+"]"})},"latitude"),h.split(",").filter(P=>e.hasOwnProperty(P)||e.attributes.hasOwnProperty(P)).map(P=>z.jsx(eN,{name:P,content:z.jsx(SB,{position:e,property:e.hasOwnProperty(P)?P:null,attribute:e.hasOwnProperty(P)?null:P})},P)),e.attributes.hasOwnProperty("alarm")&&l.category.includes("catec")&&z.jsx(eN,{name:"Alarm "+e.attributes.alarm,content:z.jsxs("div",{style:{width:"100%"},children:[z.jsx(jr,{variant:"contained",size:"small",color:"primary",style:{margin:"1px",display:"inline-block"},onClick:()=>S(l.id,"threat_confirmation"),children:"Validate"}),z.jsx(jr,{variant:"contained",size:"small",color:"secondary",style:{margin:"1px",display:"inline-block"},onClick:()=>S(l.id,"threat_defuse"),children:"Dismiss"})]})},"alarm1")]})})}),z.jsxs(Pre,{classes:{root:o.actions},disableSpacing:!0,children:[z.jsx(hr,{color:"secondary",onClick:P=>g(P.currentTarget),disabled:!e,children:z.jsx(Vse,{})}),z.jsx(hr,{onClick:()=>S(l.id,"SincroniseFiles"),children:z.jsx(wO,{})}),z.jsx(hr,{onClick:()=>w(!0),disabled:r,children:z.jsx(XU,{})}),z.jsx(hr,{onClick:()=>s(`/device/${t}`),children:z.jsx(KU,{})}),z.jsx(hr,{onClick:()=>x(!0),className:o.negative,children:z.jsx(Mu,{})})]})]})}),e&&z.jsxs(E$,{anchorEl:p,open:!!p,onClose:()=>g(null),children:[z.jsx(fu,{onClick:()=>s(`/device/${t}`),children:z.jsx(yn,{color:"secondary",children:"Detalle Dispositivo"})}),z.jsx(fu,{component:"a",target:"_blank",href:`https://www.google.com/maps/search/?api=1&query=${e.latitude}%2C${e.longitude}`,children:"linkGoogleMaps"}),z.jsx(fu,{component:"a",target:"_blank",href:`http://maps.apple.com/?ll=${e.latitude},${e.longitude}`,children:"linkAppleMaps"}),z.jsx(fu,{component:"a",target:"_blank",href:`https://www.google.com/maps/@?api=1&map_action=pano&viewpoint=${e.latitude}%2C${e.longitude}&heading=${e.course}`,children:"linkStreetView"})]}),b&&z.jsx(Hse,{id:t,onClose:()=>w(!1)}),z.jsx(I5e,{open:v,endpoint:"devices",itemId:t,onResult:P=>C(P)})]})};function D5e(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var N5e=`/* add css styles here (optional) */

.styles_ReactSwipeButton__2WML2 {
  float: left;
  width: 100%;
  height: 50px;
  position: relative;
}
.styles_ReactSwipeButton__2WML2,
.styles_ReactSwipeButton__2WML2 * {
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none;   /* Chrome/Safari/Opera */
  -khtml-user-select: none;    /* Konqueror */
  -moz-user-select: none;      /* Firefox */
  -ms-user-select: none;       /* Internet Explorer/Edge */
  user-select: none;           /* Non-prefixed version, currently
                                  not supported by any browser */
}
.styles_rsbContainer__KXpXK{
  float: left;
  width: 100%;
  height: 100%;
  background: #eee;
  border-radius: 50px;
  position: relative;
  /* box-shadow: inset 1px 1px 4px rgba(0,0,0,0.1); */
  overflow: hidden;
}
.styles_rsbContainerUnlocked__1T0vd{
  width: 50%!important;
  margin-left: 25%;
  transition: 0.5s;
  cursor: default;
}
.styles_rsbContainerUnlocked__1T0vd .styles_rsbcSlider__1yYxD{
  left: 100%!important;
  cursor: default;
  pointer-events: none;
}
.styles_rsbContainerUnlocked__1T0vd .styles_rsbcSliderArrow__2D9q4 {
  transition: 0.5s;
  margin-right: -60px;
}
.styles_rsbContainerUnlocked__1T0vd .styles_rsbcSliderCircle__3G0Zs {
  transition: 0.5s;
  margin-right: -60px;
}
.styles_rsbcSlider__1yYxD {
  float: left;
  width: 100%;
  position: absolute;
  height: 50px;
  top:0;
  left: 50px;
  margin-left:-100%;
  background: #333;
  border-radius: 25px;
  z-index: 100;
  /* box-shadow: 1px 1px 5px rgba(0,0,0,0.3); */
  cursor: pointer;
}
.styles_rsbcSliderText__3h08j{
  position: absolute;
  top:0;
  left:0;
  right:0;
  line-height: 50px;
  text-align: center;
  font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
  letter-spacing: 2px;
  color: #fff;
  font-size: 13px;

}
.styles_rsbcSliderArrow__2D9q4{
  float: left;
  position: absolute;
  transform: rotate(45deg);
  border: 2px solid #fff;
  height: 8px;
  width: 8px;
  top:50%;
  right: 22px;
  margin-top: -6px;
  border-left-color: transparent;
  border-bottom-color: transparent;
  transform-origin: center;
  z-index: 10;
}
.styles_rsbcSliderCircle__3G0Zs {
  position: absolute;
  right: 0;
  background: #444;
  top:0;
  height: 50px;
  width: 50px;
  border-radius: 100%;
}
.styles_rsbcText__16wA0 {
  float: left;
  position: absolute;
  top:0;
  left:0;
  right:0;
  height: 50px;
  line-height: 50px;
  text-align: center;
  font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
  letter-spacing: 2px;
  font-size: 13px;
  color: #aaa;
}`,Pg={ReactSwipeButton:"styles_ReactSwipeButton__2WML2",rsbContainer:"styles_rsbContainer__KXpXK",rsbContainerUnlocked:"styles_rsbContainerUnlocked__1T0vd",rsbcSlider:"styles_rsbcSlider__1yYxD",rsbcSliderArrow:"styles_rsbcSliderArrow__2D9q4",rsbcSliderCircle:"styles_rsbcSliderCircle__3G0Zs",rsbcSliderText:"styles_rsbcSliderText__3h08j",rsbcText:"styles_rsbcText__16wA0"};D5e(N5e);var z5e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},F5e=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),B5e=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},Z7=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t},J7=Ye.createRef(),RC=Ye.createRef(),tN="ontouchstart"in document.documentElement,j5e=function(t){B5e(e,t);function e(){var n,r,i,o;z5e(this,e);for(var s=arguments.length,a=Array(s),l=0;l<s;l++)a[l]=arguments[l];return o=(r=(i=Z7(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this].concat(a))),i),i.isDragging=!1,i.sliderLeft=0,i.state={},i.onDrag=function(d){i.unmounted||i.state.unlocked||i.isDragging&&(tN?i.sliderLeft=Math.min(Math.max(0,d.touches[0].clientX-i.startX),i.containerWidth):i.sliderLeft=Math.min(Math.max(0,d.clientX-i.startX),i.containerWidth),i.updateSliderStyle())},i.updateSliderStyle=function(){i.unmounted||i.state.unlocked||(J7.current.style.left=i.sliderLeft+50+"px")},i.stopDrag=function(){i.unmounted||i.state.unlocked||i.isDragging&&(i.isDragging=!1,i.sliderLeft>i.containerWidth*.9?(i.sliderLeft=i.containerWidth,i.onSuccess(),i.props.onSuccess&&i.props.onSuccess()):(i.sliderLeft=0,i.props.onFailure&&i.props.onFailure()),i.updateSliderStyle())},i.startDrag=function(d){i.unmounted||i.state.unlocked||(i.isDragging=!0,tN?i.startX=d.touches[0].clientX:i.startX=d.clientX)},i.onSuccess=function(){RC.current.style.width=RC.current.clientWidth+"px",i.setState({unlocked:!0})},i.getText=function(){return i.state.unlocked?i.props.text_unlocked||"UNLOCKED":i.props.text||"SLIDE"},i.reset=function(){i.unmounted||i.setState({unlocked:!1},function(){i.sliderLeft=0,i.updateSliderStyle()})},r),Z7(i,o)}return F5e(e,[{key:"componentDidMount",value:function(){tN?(document.addEventListener("touchmove",this.onDrag),document.addEventListener("touchend",this.stopDrag)):(document.addEventListener("mousemove",this.onDrag),document.addEventListener("mouseup",this.stopDrag)),this.containerWidth=RC.current.clientWidth-50}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"render",value:function(){return Ye.createElement("div",{className:Pg.ReactSwipeButton},Ye.createElement("div",{className:Pg.rsbContainer+" "+(this.state.unlocked?Pg.rsbContainerUnlocked:""),ref:RC},Ye.createElement("div",{className:Pg.rsbcSlider,ref:J7,onMouseDown:this.startDrag,style:{background:this.props.color},onTouchStart:this.startDrag},Ye.createElement("span",{className:Pg.rsbcSliderText},this.getText()),Ye.createElement("span",{className:Pg.rsbcSliderArrow}),Ye.createElement("span",{className:Pg.rsbcSliderCircle,style:{background:this.props.color}})),Ye.createElement("div",{className:Pg.rsbcText},this.getText())))}}]),e}(V.Component);const $5e=Wr(t=>({card:{pointerEvents:"auto",width:t.dimensions.popupMaxWidth},media:{height:t.dimensions.popupImageHeight,display:"flex",justifyContent:"flex-end",alignItems:"flex-start"},mediaButton:{color:t.palette.colors.white,mixBlendMode:"difference"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(1,1,0,2)},content:{paddingTop:"20px",paddingBottom:"20px"},negative:{color:t.palette.colors.negative},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},table:{"& .MuiTableCell-sizeSmall":{paddingLeft:0,paddingRight:0}},cell:{borderBottom:"none"},actions:{justifyContent:"space-between"},root:{pointerEvents:"none",position:"fixed",zIndex:5,left:"50%",top:"50%",transform:"translate(-50%,-50%)"}})),U5e=({enable:t,onClose:e,onSucces:n})=>{const r=$5e();return z.jsx("div",{className:r.root,children:t&&z.jsxs(Nh,{elevation:5,className:r.card,children:[z.jsxs("div",{className:r.header,children:[z.jsx(yn,{variant:"body2",color:"textSecondary",children:"Confirm mission"}),z.jsx(hr,{size:"small",onClick:e,onTouchStart:e,children:z.jsx(Ph,{fontSize:"small"})})]}),z.jsxs(Fk,{className:r.content,children:[z.jsx(yn,{variant:"body1",color:"textSecondary",children:"Send all devices to command the mission load"}),z.jsx("div",{style:{marginTop:"10px",height:"50px"},children:z.jsx(j5e,{text:"Slide to Command Mission",color:"#7393B3",text_unlocked:"Commanded",onSuccess:n})})]})]})})};var JU={},V5e=Xr;Object.defineProperty(JU,"__esModule",{value:!0});var Gse=JU.default=void 0,H5e=V5e(oi()),W5e=z;Gse=JU.default=(0,H5e.default)((0,W5e.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");var QU={},G5e=Xr;Object.defineProperty(QU,"__esModule",{value:!0});var qse=QU.default=void 0,q5e=G5e(oi()),X5e=z;qse=QU.default=(0,q5e.default)((0,X5e.jsx)("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"}),"ViewList");var e6={},Y5e=Xr;Object.defineProperty(e6,"__esModule",{value:!0});var Xse=e6.default=void 0,K5e=Y5e(oi()),Z5e=z;Xse=e6.default=(0,K5e.default)((0,Z5e.jsx)("path",{d:"M3 17v2h6v-2zM3 5v2h10V5zm10 16v-2h8v-2h-8v-2h-2v6zM7 9v2H3v2h4v2h2V9zm14 4v-2H11v2zm-6-4h2V7h4V5h-4V3h-2z"}),"Tune");const J5e={display:"flex",gap:"10px 10px",height:"30px",borderBottom:"3px solid rgb(212, 212, 212)"},Yse=({SetAddUAVOpen:t})=>z.jsxs(Rm,{style:J5e,children:[z.jsx(hr,{edge:"start",children:z.jsx(qse,{})}),z.jsx(Bk,{placeholder:"device",endAdornment:z.jsx(cAe,{position:"end",children:z.jsx(hr,{size:"small",edge:"end",children:z.jsx(IEe,{color:"info",variant:"dot",children:z.jsx(Xse,{fontSize:"small"})})})}),size:"small",fullWidth:!0}),z.jsx(hr,{edge:"end",onClick:()=>{t(!0)},children:z.jsx(Yg,{children:z.jsx(Gse,{})})})]}),Q5e=Wr(t=>({card:{pointerEvents:"auto"},media:{width:t.dimensions.popupMaxWidth,display:"flex",justifyContent:"flex-end",alignItems:"flex-start",background:"black"},media1:{width:"95vw",height:"90vh",display:"flex",justifyContent:"flex-end",alignItems:"flex-start",background:"black"},gruopBtn:{display:"flex",right:"5px",height:"40px",position:"absolute"},mediaButton:{color:t.palette.colors.white,mixBlendMode:"difference"},tittle:{display:"block",width:"calc( 100% - 60pt )",paddingLeft:"15pt",paddingTop:"10pt",paddingBottom:"10pt",textAlign:"left"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(1,1,0,2)},root:{pointerEvents:"none",position:"fixed",zIndex:6,left:"360px",top:t.spacing(15),transform:"translateX(1%)"},root_max:{pointerEvents:"none",position:"fixed",zIndex:6,left:"51%",top:"5%",transform:"translateX(-50%)"}})),Q7=({deviceId:t,deviceIp:e,camera_src:n,onClose:r})=>{const i=Q5e();nr(x=>x.data.camera[t]);const o=nr(x=>x.devices.items[t]),s="http://"+e+":8889/"+n,[a,l]=V.useState(!1);let d=i.card,h=a?i.root_max:i.root,p=a?i.media1:i.media;function g(){l(!a)}V.useRef();function v(){r(),l(!1)}return V.useEffect(()=>{t&&console.log("device in camera-"+o.name+"-"+e+"+"+n)},[t]),z.jsx("div",{className:h,children:o&&z.jsxs(Nh,{elevation:3,className:d,children:[z.jsxs("div",{className:i.gruopBtn,children:[z.jsx(hr,{size:"small",onClick:g,onTouchStart:g,children:z.jsx(pU,{fontSize:"small",className:i.mediaButton})}),z.jsx(hr,{size:"small",onClick:v,children:z.jsx(Ph,{fontSize:"small",className:i.mediaButton})})]}),z.jsx("div",{className:i.tittle,children:"Image "+o.name}),z.jsx("iframe",{src:s,className:p})]})})},Kse=({filteredDeviceId:t=-1})=>{const e=V.useId(),n=`${e}-points`,r=`${e}-points-clusters`,i=nr(x=>x.mission.route),o=nr(x=>x.devices.items),s=!0,a=.6,l=()=>it.getCanvas().style.cursor="pointer",d=()=>it.getCanvas().style.cursor="",h=(x,b)=>{let w=0,S=0;x[b.routeid].wp[b.id].hasOwnProperty("action")&&x[b.routeid].wp[b.id].action.hasOwnProperty("yaw")?w=x[b.routeid].wp[b.id].action.yaw:x[b.routeid].wp[b.id].hasOwnProperty("yaw")&&(w=x[b.routeid].wp[b.id].yaw),x[b.routeid].wp[b.id].hasOwnProperty("speed")?S=x[b.routeid].wp[b.id].speed:x[b.routeid].attributes&&x[b.routeid].attributes.hasOwnProperty("idle_vel")&&(S=x[b.routeid].attributes.idle_vel),w=Number(w)?Number(w):0,S=Number(S)?Number(S):0;const C=w===0?"background":"backgroundDirection";return{id:b.id,name:x[b.routeid].name,uav:x[b.routeid].uav,latitude:x[b.routeid].wp[b.id].pos[0],longitude:x[b.routeid].wp[b.id].pos[1],altitude:x[b.routeid].wp[b.id].pos[2],yaw:x[b.routeid].wp[b.id].yaw,speed:S,gimbal:x[b.routeid].wp[b.id].gimbal,actions:x[b.routeid].wp[b.id].action,attributes:x[b.routeid].attributes,category:C,rotation:w,color:x[b.routeid].id}},p=x=>{const b=JSON.parse(JSON.stringify(x.features[0].properties)),w=b.attributes?JSON.parse(b.attributes):null,S=b.actions?JSON.parse(b.actions):null;let C=`<div style="color: #FF7A59;text-align: center" ><b>UAV: ${b.uav}</b>
      <span><a href="https://www.google.com/maps?q=${b.latitude},${b.longitude}" target="_blank">
      Point_${b.id}</a></span></div>
          <div><span>Route: ${b.name}</span></div>
          <div style="display:inline"><span> Height: </span><span>${b.altitude.toFixed(1)}m </span></div>`;C=b.hasOwnProperty("speed")?`${C} <div style="display:inline"><span>Speed: </span><span>${b.speed} m/s </span></div>`:C,C=b.hasOwnProperty("yaw")?`${C} <div style="display:inline"><span>Yaw: </span><span>${b.yaw}° </span></div>`:C,C=b.hasOwnProperty("gimbal")?`${C} <div style="display:inline"><span>Gimbal: </span><span>${b.gimbal}° </span></div>`:C;let A="<div><b> Waypoint actions: </b></div>";S&&(A+=Object.keys(S).map(k=>{const F=k==="idle_vel"?"m/s":"";return`<div style="display:inline"><span>${k}: </span><span>${S[k]} ${F} </span></div>`}).join(""));let P="<div><b> Attributes_mission: </b></div>";P+=Object.keys(w).map(k=>{const F=k==="idle_vel"||k==="max_vel"?"m/s":"";return`<div style="display:inline"><span>${k}: </span><span>${w[k]} ${F} </span></div>`}).join(""),new ka.Popup().setLngLat(x.lngLat).setHTML(C+A+P).addTo(it)};V.useEffect(()=>(it.addSource(n,{type:"geojson",data:{type:"FeatureCollection",features:[]},cluster:s,clusterMaxZoom:10,clusterRadius:50}),it.addSource(e,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),it.addLayer({source:e,id:"mission-line",type:"line",paint:{"line-color":["get","color"],"line-width":2}}),it.addLayer({source:e,id:"mission-title",type:"symbol",layout:{"text-field":"{name}","text-font":Ch(it),"text-size":12},paint:{"text-halo-color":"white","text-halo-width":1}}),it.addLayer({id:"mission-points",type:"symbol",source:n,filter:["!has","point_count"],layout:{"icon-image":"{category}-{color}","icon-size":a,"icon-allow-overlap":!0,"text-allow-overlap":!0,"text-field":"{id}","text-font":Ch(it),"text-size":14,"icon-rotate":["get","rotation"],"icon-rotation-alignment":"map"},paint:{"text-color":"white"}}),it.addLayer({id:r,type:"symbol",source:n,filter:["has","point_count"],layout:{"icon-image":"background","icon-size":a,"text-field":"M","text-font":Ch(it),"text-size":14}}),it.on("click","mission-points",p),it.on("mouseenter","mission-points",l),it.on("mouseleave","mission-points",d),()=>{it.off("click","mission-points",p),it.off("mouseenter","mission-points",l),it.off("mouseleave","mission-points",d),it.getLayer("mission-line")&&it.removeLayer("mission-line"),it.getLayer("mission-title")&&it.removeLayer("mission-title"),it.getLayer("mission-points")&&it.removeLayer("mission-points"),it.getLayer("mission-direction")&&it.removeLayer("mission-direction"),it.getLayer(r)&&it.removeLayer(r),it.getSource(e)&&it.removeSource(e),it.getSource(n)&&it.removeSource(n)}),[]);function g(x){let b=x.wp.map(function(w){return[w.pos[1],w.pos[0]]});return{id:x.id,type:"Feature",geometry:{type:"LineString",coordinates:b},properties:{name:x.uav,color:Hf.colors_devices[x.id]}}}function v(x){const b=[];return x.forEach((w,S)=>{w.wp.forEach((C,A)=>{b.push({longitude:C.pos[1],latitude:C.pos[0],id:A,routeid:S})})}),b}return V.useEffect(()=>{const x=i.filter(w=>t<0||w.uav===o[t].name);console.log("mission filtered"),console.log(x);const b=v(x);it.getSource(n).setData({type:"FeatureCollection",features:b.map(w=>({type:"Feature",geometry:{type:"Point",coordinates:[w.longitude,w.latitude]},properties:h(x,w)}))}),it.getSource(e).setData({type:"FeatureCollection",features:x.map(w=>g(w))})},[i]),null},t6=({markers:t,showTitles:e})=>{const n=V.useId();Zre();const r=.4;V.useEffect(()=>(it.addSource(n,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),it.addSource("radar",{type:"image",url:"src/resources/lastimages/bridge_crane_small.png",coordinates:[[-6.245118621908688,36.51849451653334],[-6.244222267288677,36.518611967857595],[-6.243810777829111,36.516684113529166],[-6.244628037686255,36.51660684074257]]}),it.addLayer({id:"radar-layer",type:"raster",source:"radar"}),e?it.addLayer({id:n,type:"symbol",source:n,filter:["!has","point_count"],layout:{"icon-image":"{image}","icon-size":r,"icon-allow-overlap":!0,"text-field":"{title}","text-allow-overlap":!0,"text-anchor":"bottom","text-offset":[0,-2*r],"text-font":Ch(it),"text-size":12},paint:{"text-halo-color":"white","text-halo-width":1}}):it.addLayer({id:n,type:"symbol",source:n,layout:{"icon-image":"{image}","icon-size":r,"icon-allow-overlap":!0}}),()=>{it.getLayer(n)&&it.removeLayer(n),it.getSource(n)&&it.removeSource(n),it.getLayer("radar-layer")&&it.removeLayer("radar-layer"),it.getSource("radar")&&it.removeSource("radar")}),[e]);function i(o){const s=[];return o.elements&&o.elements.forEach((a,l)=>{a.items.forEach((d,h)=>{s.push({...d,image:a.type,title:`${l}-${h}`})})}),o.bases&&o.bases.forEach((a,l)=>{s.push({...a,image:"base",title:l})}),s}return V.useEffect(()=>{var s;let o=i(t);(s=it.getSource(n))==null||s.setData({type:"FeatureCollection",features:o.map(({latitude:a,longitude:l,image:d,title:h})=>({type:"Feature",geometry:{type:"Point",coordinates:[l,a]},properties:{image:d||"default-neutral",title:h||""}}))})},[e,t]),null},n6=({positions:t,onClick:e,showStatus:n,selectedPosition:r,titleField:i})=>{const o=V.useId(),s=`${o}-clusters`,a=`${o}-direction`,l=`${o}-mission`,d=nr(P=>P.devices.items),h=nr(P=>P.mission.route),p=1,g=!0,v="all",x=(P,k,F)=>{const B=P[k.deviceId];let W;switch(v){case"none":W=!1;break;case"all":W=!0;break;default:W=F===k.id;break}let J=h.find(Y=>Y.uav==B.name),H=J?J.id:null;return{id:k.id,deviceId:k.deviceId,name:B.name,fixTime:Pse(k.fixTime,"seconds"),category:eI(B.category),color:n?Rse(B.status):"neutral",rotation:k.course,direction:W,mission:!!J,missionColor:H}},b=()=>it.getCanvas().style.cursor="pointer",w=()=>it.getCanvas().style.cursor="",S=V.useCallback(P=>{!P.defaultPrevented&&e&&e()},[e]),C=V.useCallback(P=>{P.preventDefault();const k=P.features[0];e&&e(k.properties.id,k.properties.deviceId)},[e]),A=V.useCallback(P=>{P.preventDefault();const k=it.queryRenderedFeatures(P.point,{layers:[s]}),F=k[0].properties.cluster_id;it.getSource(o).getClusterExpansionZoom(F,(B,W)=>{B||it.easeTo({center:k[0].geometry.coordinates,zoom:W})})},[s]);return V.useEffect(()=>(it.addSource(o,{type:"geojson",data:{type:"FeatureCollection",features:[]},cluster:g,clusterMaxZoom:14,clusterRadius:50}),it.addLayer({id:o,type:"symbol",source:o,filter:["!has","point_count"],layout:{"icon-image":"{category}-{color}","icon-size":p,"icon-allow-overlap":!0,"text-field":`{${i||"name"}}`,"text-allow-overlap":!0,"text-anchor":"bottom","text-offset":[0,-2*p],"text-font":Ch(it),"text-size":12},paint:{"text-halo-color":"white","text-halo-width":1}}),it.addLayer({id:s,type:"symbol",source:o,filter:["has","point_count"],layout:{"icon-image":"background","icon-size":p,"text-field":"{point_count_abbreviated}","text-font":Ch(it),"text-size":14}}),it.addLayer({id:a,type:"symbol",source:o,filter:["all",["!has","point_count"],["==","direction",!0]],layout:{"icon-image":"direction","icon-size":p,"icon-allow-overlap":!0,"icon-rotate":["get","rotation"],"icon-rotation-alignment":"map"}}),it.addLayer({id:l,type:"symbol",source:o,filter:["all",["!has","point_count"],["==","mission",!0]],layout:{"icon-image":"mission-{missionColor}","icon-size":p}}),it.on("mouseenter",o,b),it.on("mouseleave",o,w),it.on("mouseenter",s,b),it.on("mouseleave",s,w),it.on("click",o,C),it.on("click",s,A),it.on("click",S),()=>{it.off("mouseenter",o,b),it.off("mouseleave",o,w),it.off("mouseenter",s,b),it.off("mouseleave",s,w),it.off("click",o,C),it.off("click",s,A),it.off("click",S),it.getLayer(o)&&it.removeLayer(o),it.getLayer(s)&&it.removeLayer(s),it.getLayer(a)&&it.removeLayer(a),it.getLayer(l)&&it.removeLayer(l),it.getSource(o)&&it.removeSource(o)}),[g,s,a,l,C,A]),V.useEffect(()=>{it.getSource(o).setData({type:"FeatureCollection",features:t.filter(P=>d.hasOwnProperty(P.deviceId)).map(P=>({type:"Feature",geometry:{type:"Point",coordinates:[P.longitude,P.latitude]},properties:x(d,P,r&&r.id)}))})},[d,t,r]),null},eje=t=>{const e=V.useRef();return V.useEffect(()=>{e.current=t}),e.current},tje=()=>{const t=nr(o=>o.devices.selectedId),e=eje(t),n=10,r=!1,i=nr(o=>o.data.positions[t]);return V.useEffect(()=>{(t!==e||r)&&i&&i.hasOwnProperty("latitude")&&it.easeTo({center:[i.longitude,i.latitude],zoom:Math.max(it.getZoom(),n),offset:[0,-300/2]})}),null},SO=()=>{const t="km",e=V.useMemo(()=>new ka.ScaleControl,[]);return V.useEffect(()=>(it.addControl(e,"bottom-right"),()=>it.removeControl(e)),[e]),V.useEffect(()=>{switch(t){case"mi":e.setUnit("imperial");break;case"nmi":e.setUnit("nautical");break;case"km":default:e.setUnit("metric");break}},[e,t]),null},MO=()=>{const t=nr(a=>a.devices.selectedId),e=nr(a=>a.session.positions),n=zf("latitude"),r=zf("longitude"),i=zf("zoom",10),[o,s]=V.useState(!1);return V.useEffect(()=>{if(console.log("default"+n+"kk"+r+o),t)s(!0);else if(!o)if(n&&r)it.jumpTo({center:[r,n],zoom:i}),s(!0);else{const a=Object.values(e).map(l=>[l.longitude,l.latitude]);if(a.length>1){const l=a.reduce((h,p)=>h.extend(p),new ka.LngLatBounds(a[0],a[1])),d=it.getCanvas();it.fitBounds(l,{duration:0,padding:Math.min(d.width,d.height)*.1}),s(!0)}else if(a.length){const[l]=a;it.jumpTo({center:l,zoom:Math.max(it.getZoom(),10)}),s(!0)}}},[t,o,n,r,i,e]),null},Zse=({filteredPositions:t,markers:e=[],selectedPosition:n,filteredMissiondeviceid:r=-1,onEventsClick:i})=>{const o=Ql(),s=V.useCallback((a,l)=>{o(ou.selectId(l))},[o]);return z.jsxs(z.Fragment,{children:[z.jsxs(Wk,{children:[z.jsx(t6,{markers:e}),z.jsx(Kse,{filtereddeviceid:r}),z.jsx(n6,{positions:t,onClick:s,selectedPosition:n,showStatus:!0}),z.jsx(tje,{}),z.jsx(MO,{})]}),z.jsx(SO,{})]})},nje=Wr(t=>({root:{height:"100%"},sidebar:{pointerEvents:"none",display:"flex",flexDirection:"column",[t.breakpoints.up("md")]:{position:"fixed",left:0,top:0,height:`calc(100% - ${t.spacing(3)})`,width:t.dimensions.drawerWidthDesktop,margin:t.spacing(1.5),zIndex:3},[t.breakpoints.down("md")]:{height:"100%",width:"100%"}},header:{pointerEvents:"auto",zIndex:6},footer:{pointerEvents:"auto",zIndex:5},middle:{flex:1,display:"grid"},contentMap:{pointerEvents:"auto",gridArea:"1 / 1"},contentList:{pointerEvents:"auto",gridArea:"1 / 1",zIndex:4},sidebarStyle:{pointerEvents:"none",display:"flex",flexDirection:"column",position:"fixed",left:0,top:"88px",height:"calc(100% - 88px)",width:"360px",margin:"0px",zIndex:3},middleStyle:{flex:1,display:"grid"}})),rje=()=>{const t=nje(),e=Ql(),n=Od(),r=nr(we=>we.devices.items),i=nr(we=>we.data.positions),o=nr(we=>we.data.camera),s=nr(we=>we.devices.selectedId),a=nr(we=>we.session.markers),[l,d]=V.useState([]),[h,p]=V.useState([]),[g,v]=V.useState([]),[x,b]=V.useState(),[w,S]=V.useState(),[C,A]=V.useState(),[P,k]=V.useState(),F=`${window.location.hostname}`,B=l.find(we=>s&&we.deviceId===s),W=g.find(we=>s&&we.deviceId==s);let J=Object.values(r);V.useContext(Oy);const[H,Y]=V.useState(!1),[le,pe]=V.useState(!1),[re,me]=V.useState([]),he=(we,ee)=>{console.log(`${we} - ${ee}`)};return V.useCallback((we,ee)=>{e(ou.selectId(ee))},[e]),V.useEffect(()=>{p(a)},[a]),V.useEffect(()=>{d(Object.values(i))},[i]),V.useEffect(()=>{v(Object.values(o))},[o]),V.useEffect(()=>{s?(b(r[s].ip),r[s].camera.length>0?(S(r[s].camera[0].type),A(r[s].camera[0].source)):S(null),k(r[s].name)):(b(null),S(null))},[s]),z.jsx("div",{className:t.root,children:z.jsxs(Z1,{notification:he,children:[z.jsx(HE,{SetAddUAVOpen:Y,setconfirmMission:pe}),z.jsx(J1,{SetAddUAVOpen:Y}),z.jsx("div",{style:{position:"relative",float:"right",width:"calc(100% - 360px)",height:"calc(100vh - 88px)"},children:z.jsx(Zse,{filteredPositions:l,markers:h,selectedPosition:B})}),z.jsxs("div",{className:t.sidebarStyle,children:[z.jsx(jo,{square:!0,elevation:3,className:t.header,children:z.jsx(Yse,{SetAddUAVOpen:Y})}),z.jsx("div",{className:t.middleStyle,children:z.jsx(jo,{square:!0,className:t.contentList,children:z.jsx(kse,{devices:J})})})]}),H&&z.jsx(MDe,{SetAddUAVOpen:Y}),z.jsx(L5e,{deviceId:s,position:B,onClose:()=>e(ou.selectId(null)),desktopPadding:n.dimensions.drawerWidthDesktop}),z.jsx(Oy.Consumer,{children:({commandMission:we})=>z.jsx(U5e,{enable:le,onClose:()=>pe(!1),onSucces:()=>we()})}),w==="WebRTC"&&z.jsx(Q7,{deviceId:s,deviceIp:F,camera_src:P+"_"+C,onClose:()=>e(ou.selectId(null))}),w==="WebRTC_env"&&z.jsx(Q7,{deviceId:s,deviceIp:x,camera_src:C,onClose:()=>e(ou.selectId(null))}),w==="Websocket"&&z.jsx(PDe,{deviceId:s,datacamera:W,onClose:()=>e(ou.selectId(null))}),z.jsx(gDe,{toastlist:re,position:"buttom-right",setList:me})]})})},r6=Ye.createContext(),EO=({children:t})=>{const[e,n]=V.useState({route_id:-1,wp_id:-1});return z.jsx("div",{style:{width:"100%",height:"100%"},children:z.jsx(r6.Provider,{value:{changeWp:e,setChangeWp:n},children:t})})};class ije{constructor(){this.routes=[],this.selecwp={id:-1}}initroute(e){this.routes=JSON.parse(JSON.stringify(e))}getroute(){return this.routes}setroute(e){this.routes=e}getSelectwp(){return this.selecwp}setSelecwp(e){this.selecwp=e}}const Jse=()=>{const t=V.useId(),e=`${t}-points`,n=`${t}-points-clusters`,r=nr(P=>P.mission.route);nr(P=>P.mission.selectpoint);const i=!0,o=.6,s=Ql(),[a,l]=V.useState(new ije),d=V.useContext(r6);let h=it.getCanvasContainer();const p=()=>it.getCanvas().style.cursor="move",g=()=>it.getCanvas().style.cursor="",v=P=>{let k=P.lngLat;h.style.cursor="grabbing",console.log("on move point"+k.lng+"-"+k.lat);let F=a.getroute(),B=a.getSelectwp();B.id>=0&&(F[B.route_id].wp[B.id].pos[0]=P.lngLat.lat,F[B.route_id].wp[B.id].pos[1]=P.lngLat.lng);let W=A(F);it.getSource(e).setData({type:"FeatureCollection",features:W.map(J=>({type:"Feature",geometry:{type:"Point",coordinates:[J.longitude,J.latitude]},properties:S(F,J)}))}),it.getSource(t).setData({type:"FeatureCollection",features:F.map(J=>C(J))})},x=P=>{let k=P.lngLat;h.style.cursor="";let F=a.getSelectwp();console.log(`Longitude: ${k.lng} Latitude: ${k.lat}`),d.setChangeWp({wp_id:F.id,route_id:F.route_id,lng:P.lngLat.lng,lat:P.lngLat.lat}),a.setSelecwp({id:-1}),it.off("mousemove",v),it.off("touchmove",v)},b=P=>{P.preventDefault(),a.setSelecwp(P.features[0].properties),s(Af.selectpoint(P.features[0].properties)),h.style.cursor="grab",it.on("mousemove",v),it.once("mouseup",x)},w=P=>{P.points.length===1&&(console.log("touch start"),P.preventDefault(),it.on("touchmove",v),it.once("touchend",x))},S=(P,k)=>{let F=0;P[k.routeid].wp[k.id].hasOwnProperty("yaw")&&(F=P[k.routeid].wp[k.id].yaw),P[k.routeid].wp[k.id].hasOwnProperty("action")&&P[k.routeid].wp[k.id].action.hasOwnProperty("yaw")&&(F=P[k.routeid].wp[k.id].action.yaw),F=Number(F)?F:0;let B=F==0?"background":"backgroundDirection";return{id:k.id,route_id:k.routeid,name:P[k.routeid].name,uav:P[k.routeid].uav,latitude:P[k.routeid].wp[k.id].pos[0],longitude:P[k.routeid].wp[k.id].pos[1],altitud:P[k.routeid].wp[k.id].pos[2],yaw:P[k.routeid].wp[k.id].yaw,speed:P[k.routeid].wp[k.id].speed,gimbal:P[k.routeid].wp[k.id].gimbal,actions:P[k.routeid].wp[k.id].action,attributes:P[k.routeid].attributes,category:B,rotation:F,color:P[k.routeid].id}};V.useEffect(()=>(console.log("render"),it.addSource(e,{type:"geojson",data:{type:"FeatureCollection",features:[]},cluster:i,clusterMaxZoom:10,clusterRadius:50}),it.addSource(t,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),it.addLayer({source:t,id:"mission-line",type:"line",paint:{"line-color":["get","color"],"line-width":2}}),it.addLayer({source:t,id:"mission-title",type:"symbol",layout:{"text-field":"{name}","text-font":Ch(it),"text-size":12},paint:{"text-halo-color":"white","text-halo-width":1}}),it.addLayer({id:"mission-points",type:"symbol",source:e,filter:["!has","point_count"],layout:{"icon-image":"{category}-{color}","icon-size":o,"icon-allow-overlap":!0,"text-allow-overlap":!0,"text-field":"{id}","text-font":Ch(it),"text-size":14,"icon-rotate":["get","rotation"],"icon-rotation-alignment":"map"},paint:{"text-color":"white"}}),it.addLayer({id:n,type:"symbol",source:e,filter:["has","point_count"],layout:{"icon-image":"background","icon-size":o,"text-field":"M","text-font":Ch(it),"text-size":14}}),it.on("mouseenter","mission-points",p),it.on("mouseleave","mission-points",g),it.on("mousedown","mission-points",b),it.on("touchstart","mission-points",w),()=>{it.off("mouseenter","mission-points",p),it.off("mouseleave","mission-points",g),it.off("mousedown","mission-points",b),it.off("touchstart","mission-points",w),it.getLayer("mission-line")&&it.removeLayer("mission-line"),it.getLayer("mission-title")&&it.removeLayer("mission-title"),it.getLayer("mission-points")&&it.removeLayer("mission-points"),it.getLayer(n)&&it.removeLayer(n),it.getSource(t)&&it.removeSource(t),it.getSource(e)&&it.removeSource(e)}),[]);function C(P){let k=Object.values(P.wp).map(function(F){return[F.pos[1],F.pos[0]]});return{id:P.id,type:"Feature",geometry:{type:"LineString",coordinates:k},properties:{name:P.uav,color:Hf.colors_devices[P.id]}}}function A(P){let k=[];return P.map((F,B)=>{F.wp.map((W,J)=>{k.push({longitude:W.pos[1],latitude:W.pos[0],id:J,routeid:B})})}),k}return V.useEffect(()=>{console.log("Mapmission upload mission"),a.initroute(r);let P=A(r);it.getSource(e).setData({type:"FeatureCollection",features:P.map(k=>({type:"Feature",geometry:{type:"Point",coordinates:[k.longitude,k.latitude]},properties:S(r,k)}))}),it.getSource(t).setData({type:"FeatureCollection",features:r.map(k=>C(k))})},[r]),null};var i6={},oje=Xr;Object.defineProperty(i6,"__esModule",{value:!0});var Qse=i6.default=void 0,sje=oje(oi()),aje=z;Qse=i6.default=(0,sje.default)((0,aje.jsx)("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward");var o6={},lje=Xr;Object.defineProperty(o6,"__esModule",{value:!0});var eae=o6.default=void 0,cje=lje(oi()),uje=z;eae=o6.default=(0,cje.default)((0,uje.jsx)("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"}),"ArrowDownward");var s6={},dje=Xr;Object.defineProperty(s6,"__esModule",{value:!0});var tae=s6.default=void 0,hje=dje(oi()),fje=z;tae=s6.default=(0,hje.default)((0,fje.jsx)("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7"}),"MyLocation");const pje=Wr(t=>({list:{maxHeight:"100%",overflow:"auto"},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)},attributeName:{display:"inline-block",width:"40%",textAlign:"left",verticalAlign:"middle"},attributeValue:{display:"inline-block",width:"58%"},actionValue:{display:"inline-block",width:"40%"}})),mje=({mission:t,setmission:e,index:n,indexWp:r,waypoint:i,expandWp:o,AddnewWp:s,setExpandWp:a})=>{const l=pje(),[d,h]=V.useState(!1),[p,g]=V.useState(!0),[v,x]=V.useState(0),b=B=>(W,J)=>{a(J?B:!1)};async function w(B,W){let J;const H=await fetch("/api/category/actions/dji_M210_noetic");if(H.ok)J=await H.json();else throw Error(await H.text());let Y=J.find(pe=>pe.id==v),le=JSON.parse(JSON.stringify(t.route));le[B].wp[W].hasOwnProperty("action")||(le[B].wp[W].action={}),Y.param?le[B].wp[W].action[Y.name]=0:le[B].wp[W].action[Y.name]=!0,e({...t,route:le}),g(!0)}const S=(B,W)=>{const J=JSON.parse(JSON.stringify(t.route)),H=J[B].wp[W];J[B].wp.splice(W+1,0,H),e({...t,route:J})},C=(B,W,J)=>{const H=JSON.parse(JSON.stringify(t.route)),Y=H[B].wp[W];H[B].wp.splice(W,1),W+J<0?H[B].wp.push(Y):H[B].wp.splice(W+J,0,Y),e({...t,route:H})},A=(B,W)=>{console.log("remove wp"+B+"-"+W);let J=[...t.route],H=[...t.route[B].wp];H.splice(W,1);let Y={...J[B],wp:H};J[B]=Y,e({...t,route:J})},P=(B,W,J)=>{console.log("remove action"+B+"-"+W+"-"+J);let H=JSON.parse(JSON.stringify(t.route));delete H[B].wp[W].action[J],e({...t,route:H})},k=B=>(W,J)=>{h(J?B:!1)},F=B=>(W,J)=>{g(!1)};return z.jsxs(ml,{expanded:o===`WP${r}`,onChange:b(`WP${r}`),children:[z.jsxs(yl,{expandIcon:z.jsx(La,{}),children:[z.jsx(yn,{sx:{width:"33%",flexShrink:0},children:`WP - ${r}`}),z.jsx(hr,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>C(n,r,1),children:z.jsx(eae,{})}),z.jsx(hr,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>C(n,r,-1),children:z.jsx(Qse,{})}),z.jsx(hr,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>A(n,r),children:z.jsx(Mu,{})})]}),z.jsx(gl,{className:l.details,children:o===`WP${r}`&&z.jsxs(z.Fragment,{children:[z.jsxs(Ko,{component:"form",sx:{"& .MuiTextField-root":{m:1}},children:[z.jsx("div",{children:z.jsx(yn,{variant:"subtitle1",style:{display:"inline"},children:"Position"})}),z.jsx(bi,{required:!0,label:"Latitud ",type:"number",sx:{width:"15ch"},variant:"standard",inputProps:{maxLength:16,step:1e-4},value:i.pos?i.pos[0]:0,onChange:B=>e({...t,route:t.route.map(W=>{let J=JSON.parse(JSON.stringify(W));return W==t.route[n]?J.wp[r].pos[0]=+B.target.value:J=W,J})})}),z.jsx(bi,{required:!0,label:"Longitud ",type:"number",variant:"standard",sx:{width:"15ch"},inputProps:{maxLength:16,step:1e-4},value:i.pos?i.pos[1]:0,onChange:B=>e({...t,route:t.route.map(W=>{let J=JSON.parse(JSON.stringify(W));return W==t.route[n]?J.wp[r].pos[1]=+B.target.value:J=W,J})})}),z.jsx(bi,{required:!0,label:"altura ",type:"number",variant:"standard",sx:{width:"7ch"},value:i.pos?i.pos[2]:0,onChange:B=>e({...t,route:t.route.map(W=>{let J=JSON.parse(JSON.stringify(W));return W==t.route[n]?J.wp[r].pos[2]=+B.target.value:J=W,J})})})]}),z.jsxs(Ko,{component:"form",sx:{"& .MuiTextField-root":{m:1}},children:[z.jsx(bi,{required:!0,label:"Speed ",type:"number",variant:"standard",sx:{width:"13ch"},value:i.speed?i.speed:t.route[n].attributes.idle_vel,onChange:B=>e({...t,route:t.route.map(W=>{let J=JSON.parse(JSON.stringify(W));return t.route[n]?J.wp[r].speed=+B.target.value:J=W,J})})}),z.jsx(bi,{required:!0,label:"YAW ",type:"number",variant:"standard",sx:{width:"13ch"},value:i.yaw?i.yaw:0,onChange:B=>e({...t,route:t.route.map(W=>{let J=JSON.parse(JSON.stringify(W));return W==t.route[n]?J.wp[r].yaw=+B.target.value:J=W,J})})}),z.jsx(bi,{required:!0,label:"Gimbal ",type:"number",variant:"standard",sx:{width:"13ch"},value:i.gimbal?i.gimbal:0,onChange:B=>e({...t,route:t.route.map(W=>{let J=JSON.parse(JSON.stringify(W));return W==t.route[n]?J.wp[r].gimbal=+B.target.value:J=W,J})})})]}),z.jsxs(ml,{expanded:d==="wp "+r,onChange:k("wp "+r),children:[z.jsx(yl,{expandIcon:z.jsx(La,{}),children:z.jsx(yn,{sx:{width:"33%",flexShrink:0},children:"Actions"})}),z.jsxs(gl,{className:l.details,children:[i.action&&Ye.Children.toArray(Object.keys(i.action).map((B,W,J)=>z.jsxs(V.Fragment,{children:[z.jsxs("div",{children:[z.jsx(yn,{variant:"subtitle1",className:l.attributeName,children:B}),z.jsx("div",{className:l.actionValue,children:z.jsx(bi,{required:!0,fullWidth:!0,value:i.action[B]?i.action[B]:0,onChange:H=>e({...t,route:t.route.map(Y=>{let le=JSON.parse(JSON.stringify(Y));return Y==t.route[n]?le.wp[r].action[B]=H.target.value:le=Y,le})})})}),z.jsx(hr,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>P(n,r,B),className:l.negative,children:z.jsx(Mu,{})})]}),z.jsx(Py,{})]},"fragment-action-"+W))),z.jsx(Ko,{textAlign:"center",children:p?z.jsx(jr,{variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:F(),children:"Add new action"}):z.jsxs("div",{children:[z.jsx(yn,{variant:"subtitle1",children:"Tipo de acccion a añadir"}),z.jsx(lu,{emptyValue:null,fullWidth:!0,value:v,onChange:B=>x(B.target.value),endpoint:"/api/category/actions/dji_M210_noetic",keyGetter:B=>B.id,titleGetter:B=>B.description}),z.jsxs("div",{children:[z.jsx(jr,{onClick:()=>g(!0),children:"Cancel"}),z.jsx(jr,{onClick:()=>w(n,r),children:"Add"})]})]})})]})]}),z.jsxs(Ko,{textAlign:"center",children:[z.jsx(jr,{variant:"contained",size:"large",sx:{width:"60%",flexShrink:0},style:{marginTop:"15px"},onClick:()=>s(n,r),children:"Add new Waypoint"}),z.jsx(jr,{variant:"contained",color:"secondary",size:"large",sx:{width:"30%",flexShrink:0},style:{marginTop:"15px"},onClick:()=>S(n,r),children:"Copy"})]})]})})]})},nae=Wr(t=>({list:{maxHeight:"100%",overflow:"auto"},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)},attribute:{display:"inline-block",width:"40%",textAlign:"left",verticalAlign:"middle"},attributeValue:{display:"inline-block",width:"58%"},actionValue:{display:"inline-block",width:"40%"}})),gje=({mission:t,setmission:e,index:n,route:r,expand:i,setExpand:o})=>{const s=nae();return z.jsxs(ml,{expanded:i,onChange:o(!0),children:[z.jsx(yl,{expandIcon:z.jsx(La,{}),children:z.jsx(yn,{sx:{width:"53%",flexShrink:0},children:"Route Attributes"})}),z.jsx(gl,{className:s.details,children:r.attributes&&z.jsxs(V.Fragment,{children:[z.jsxs("div",{children:[z.jsx(yn,{variant:"subtitle1",className:s.attribute,children:"Speed Mode"}),z.jsx("div",{className:s.attributeValue,children:z.jsx(lu,{emptyValue:null,fullWidth:!0,value:r.attributes.mode_speed?r.attributes.mode_speed:0,onChange:a=>e({...t,route:t.route.map(l=>{let d=JSON.parse(JSON.stringify(l));return l===t.route[n]?d.attributes.mode_speed=a.target.value:d=l,d})}),endpoint:"/api/category/atributesparam/dji_M300/mode_speed",keyGetter:a=>a.id,titleGetter:a=>a.name})})]}),z.jsxs("div",{children:[z.jsx(yn,{variant:"subtitle1",className:s.attribute,children:"Speed idle (m/s):"}),z.jsx(bi,{fullWidth:!0,required:!0,type:"number",className:s.attributeValue,value:r.attributes.idle_vel?r.attributes.idle_vel:1.85,onChange:a=>e({...t,route:t.route.map(l=>{let d=JSON.parse(JSON.stringify(l));return l===t.route[n]?d.attributes.idle_vel=+a.target.value:d=l,d})})})]}),z.jsxs("div",{children:[z.jsx(yn,{variant:"subtitle1",className:s.attribute,children:"Speed MAX (m/s):"}),z.jsx(bi,{fullWidth:!0,required:!0,type:"number",className:s.attributeValue,value:r.attributes.max_vel?r.attributes.max_vel:12,onChange:a=>e({...t,route:t.route.map(l=>{let d=JSON.parse(JSON.stringify(l));return l==t.route[n]?d.attributes.max_vel=+a.target.value:d=l,d})})})]}),z.jsxs("div",{children:[z.jsx(yn,{variant:"subtitle1",className:s.attribute,children:"landing mode"}),z.jsx("div",{className:s.attributeValue,children:z.jsx(lu,{emptyValue:null,fullWidth:!0,value:r.attributes.mode_landing?r.attributes.mode_landing:0,onChange:a=>e({...t,route:t.route.map(l=>{let d=JSON.parse(JSON.stringify(l));return l===t.route[n]?d.attributes.mode_landing=a.target.value:d=l,d})}),endpoint:"/api/category/atributesparam/dji_M300/mode_landing",keyGetter:a=>a.id,titleGetter:a=>a.name})})]}),z.jsxs("div",{children:[z.jsx(yn,{variant:"subtitle1",className:s.attribute,children:"Yaw mode"}),z.jsx("div",{className:s.attributeValue,children:z.jsx(lu,{emptyValue:null,fullWidth:!0,value:r.attributes.mode_yaw?r.attributes.mode_yaw:0,onChange:a=>e({...t,route:t.route.map(l=>{let d=JSON.parse(JSON.stringify(l));return l===t.route[n]?d.attributes.mode_yaw=a.target.value:d=l,d})}),endpoint:"/api/category/atributesparam/dji_M300/mode_yaw",keyGetter:a=>a.id,titleGetter:a=>a.name})})]}),z.jsxs("div",{children:[z.jsx(yn,{variant:"subtitle1",className:s.attribute,children:"Gimbal mode"}),z.jsx("div",{className:s.attributeValue,children:z.jsx(lu,{emptyValue:null,fullWidth:!0,value:r.attributes.mode_gimbal?r.attributes.mode_gimbal:0,onChange:a=>e({...t,route:t.route.map(l=>{let d=JSON.parse(JSON.stringify(l));return l===t.route[n]?d.attributes.mode_gimbal=a.target.value:d=l,d})}),endpoint:"/api/category/atributesparam/dji_M300/mode_gimbal",keyGetter:a=>a.id,titleGetter:a=>a.name})})]}),z.jsxs("div",{children:[z.jsx(yn,{variant:"subtitle1",className:s.attribute,children:"Trace mode:"}),z.jsx("div",{className:s.attributeValue,children:z.jsx(lu,{emptyValue:null,fullWidth:!0,value:r.attributes.mode_trace?r.attributes.mode_trace:0,onChange:a=>e({...t,route:t.route.map(l=>{let d=JSON.parse(JSON.stringify(l));return l===t.route[n]?d.attributes.mode_trace=a.target.value:d=l,d})}),endpoint:"/api/category/atributesparam/dji_M300/mode_trace",keyGetter:a=>a.id,titleGetter:a=>a.name})})]})]},"fragment-route-atri-"+r.id)})]})},yje=({mission:t,setmission:e,index:n,route:r,expanded_route:i,setExpanded_route:o,expand_wp:s,setExpand_wp:a})=>{const l=nae(),d=nr(P=>P.devices.items),h=nr(P=>P.data.positions),[p,g]=V.useState(!1),[v,x]=V.useState(null);V.useEffect(()=>{const P=Object.values(d).find(k=>k.name===r.uav);P?(x(P.id),e({...t,route:t.route.map((k,F)=>F==n?{...r,uav_type:P.category}:k)})):x(null)},[r.uav,d]);const b=(P,k)=>{console.log("add new wp"+P);let F=JSON.parse(JSON.stringify(t.route)),B=it.getCenter();k>0&&k<F[P].wp.length&&(B.lat=(F[P].wp[k].pos[0]+F[P].wp[k+1].pos[0])/2,B.lng=(F[P].wp[k].pos[1]+F[P].wp[k+1].pos[1])/2);let W={pos:[B.lat,B.lng,5],action:{}};k<0?F[P].wp.push(W):F[P].wp.splice(k+1,0,W),e({...t,route:F})},w=(P,k)=>{console.log("Record wp"+P);let F=JSON.parse(JSON.stringify(t.route));if(console.log(h[v]),h[v]){let B=h[v].altitude;h[v].attributes.hasOwnProperty("home")&&(B=B-h[v].attributes.home[2],console.log("home"),console.log(h[v].attributes.home[2])),console.log(B);let W={pos:[h[v].latitude,h[v].longitude,B],action:{yaw:0,gimbal:0}};h[v].hasOwnProperty("course"),W.action.yaw=+Number(h[v].course).toFixed(2)<=180?+Number(h[v].course).toFixed(2):-360+ +Number(h[v].course).toFixed(2),h[v].attributes.hasOwnProperty("gimbal"),W.action.gimbal=Number(h[v].attributes.gimbal[0]),F[P].wp.push(W),e({...t,route:F})}},S=P=>{console.log("remove route"+P);let k=JSON.parse(JSON.stringify(t.route));k.splice(P,1),e({...t,route:k})},C=P=>(k,F)=>{o(F?P:!1),g(!1)},A=P=>(k,F)=>{g(F?P:!1)};return z.jsxs(ml,{expanded:i==="Rute "+n,onChange:C("Rute "+n),children:[z.jsxs(yl,{expandIcon:z.jsx(La,{}),children:[z.jsx(yn,{sx:{width:"33%",flexShrink:0,color:Hf.colors_devices[r.id]},children:"Rute "+n}),z.jsx(yn,{sx:{color:"text.secondary"},children:r.name+"- "+r.uav}),z.jsx(hr,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>S(n),children:z.jsx(Mu,{})})]}),z.jsx(gl,{className:l.details,children:i==="Rute "+n&&z.jsxs(V.Fragment,{children:[z.jsx(bi,{required:!0,label:"Route Name",variant:"standard",value:r.name?r.name:"",onChange:P=>e({...t,route:t.route.map(k=>k==t.route[n]?{...r,name:P.target.value}:k)})}),z.jsx(bi,{required:!0,label:"UAV id",variant:"standard",value:r.uav?r.uav:"uav_",onChange:P=>e({...t,route:t.route.map(k=>k==t.route[n]?{...r,uav:P.target.value}:k)})}),z.jsx(lu,{emptyValue:null,value:r.uav_type?r.uav_type:"",onChange:P=>e({...t,route:t.route.map(k=>k==t.route[n]?{...r,uav_type:P.target.value}:k)}),endpoint:"/api/category",keyGetter:P=>P,titleGetter:P=>P,label:"Type UAV mission",style:{display:"inline",width:"200px"}}),z.jsx(gje,{mission:t,setmission:P=>e(P),index:n,route:r,expand:p,setExpand:A}),z.jsx(yn,{variant:"subtitle1",children:"Waypoints"}),Ye.Children.toArray(Object.values(r.wp).map((P,k,F)=>z.jsx(mje,{mission:t,setmission:e,indexWp:k,index:n,waypoint:P,AddnewWp:b,expandWp:s,setExpandWp:a}))),z.jsxs(Ko,{textAlign:"center",children:[z.jsx(jr,{value:n,variant:"contained",size:"large",sx:{width:"60%",flexShrink:0},style:{marginTop:"15px"},onClick:P=>b(P.target.value,-1),children:"Add Waypoint"}),z.jsx(jr,{value:n,variant:"contained",color:"secondary",size:"large",disabled:v==null,sx:{width:"30%",flexShrink:0},style:{marginTop:"15px"},onClick:P=>w(P.target.value),children:"Record"})]})]})})]})},vje=Wr(t=>({list:{maxHeight:"100%",overflow:"auto"},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)},attribute:{display:"inline-block",width:"40%",textAlign:"left",verticalAlign:"middle"},attributeValue:{display:"inline-block",width:"58%"},actionValue:{display:"inline-block",width:"40%"}})),_je=({mission:t,setmission:e,setScrool:n})=>{vje();const r=nr(w=>w.mission),i=nr(w=>w.mission.selectpoint),o=Ql(),[s,a]=V.useState(!1),[l,d]=V.useState(!1),[h,p]=V.useState(!1),[g,v]=V.useState(!0);V.useEffect(()=>{console.log("render Router list")},[]),V.useEffect(()=>{e(r),r.route.length>0?v(!1):v(!0),a(!0)},[r]),V.useEffect(()=>{s&&(console.log("update mission"),o(Af.reloadMission(t.route))),t.route.length>0?v(!1):v(!0)},[t.route]),V.useEffect(()=>{s&&o(Af.reloadName({name:t.name,description:t.description}))},[t.name,t.description]),V.useEffect(()=>{d("Rute "+i.route_id),p("wp "+i.id),n(500+i.route_id*50+i.id*50)},[i]);const x=()=>{e({name:"new Mission",description:"",route:[]}),v(!1),b(),console.log("add new mission")},b=()=>{let w=[...t.route],S=w.length>0?+w.slice(-1)[0].id+1:0,C={max_vel:12,idle_vel:3,mode_yaw:2,mode_gimbal:0,mode_trace:0,mode_landing:2};w.push({name:"",uav:"",id:S,attributes:C,wp:[]}),e({...t,route:w})};return z.jsx(V.Fragment,{children:g?z.jsx(Ko,{textAlign:"center",children:z.jsx(jr,{variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:x,children:"Create New Mission"})}):z.jsx(V.Fragment,{children:z.jsxs(Ko,{style:{display:"flex",gap:"10px",flexDirection:"column",margin:"20px"},children:[z.jsx(bi,{required:!0,label:"Name Mission",variant:"standard",value:t.name?t.name:" ",onChange:w=>e({...t,name:w.target.value})}),z.jsx(bi,{required:!0,label:"Description of mission",variant:"standard",value:t.description?t.description:" ",onChange:w=>e({...t,description:w.target.value})}),Ye.Children.toArray(Object.values(t.route).map((w,S,C)=>z.jsxs(V.Fragment,{children:[z.jsx(yje,{mission:t,setmission:e,index:S,route:w,expanded_route:l,setExpanded_route:d,expand_wp:h,setExpand_wp:p}),S<C.length-1?z.jsx(Py,{}):null]},"fragment-route-"+S))),z.jsx(Ko,{textAlign:"center",children:z.jsx(jr,{variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:b,children:"Add new Route"})})]})})})};var a6={},xje=Xr;Object.defineProperty(a6,"__esModule",{value:!0});var d_=a6.default=void 0,bje=xje(oi()),wje=z;d_=a6.default=(0,bje.default)((0,wje.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack");var l6={},Sje=Xr;Object.defineProperty(l6,"__esModule",{value:!0});var c6=l6.default=void 0,Mje=Sje(oi()),Eje=z;c6=l6.default=(0,Mje.default)((0,Eje.jsx)("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7zm-6 .67 2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"}),"SaveAlt");const Tje=Wr(t=>({toolbar:{display:"flex",gap:"10px 10px",height:"30px",borderBottom:"3px solid rgb(212, 212, 212)"},list:{maxHeight:"calc(100vh - 152px)",overflowY:"auto"},title:{flexGrow:1},fileInput:{display:"none"}})),u6=({SetOpenSave:t})=>{const e=Tje(),n=Jf(),r=V.useContext(Oy),i=V.useRef(null),[o,s]=V.useState(!1),a=V.useContext(r6),l=()=>{s(b=>!b)},[d,h]=V.useState({name:"no mission",description:"",route:[]});V.useEffect(()=>{if(a.changeWp.route_id>=0)if(o){let b=JSON.parse(JSON.stringify(d.route)),w=a.changeWp.lat-b[a.changeWp.route_id].wp[a.changeWp.wp_id].pos[0],S=a.changeWp.lng-b[a.changeWp.route_id].wp[a.changeWp.wp_id].pos[1],C=b[a.changeWp.route_id].wp.map(A=>{let P=A;return P.pos[0]=w+A.pos[0],P.pos[1]=S+A.pos[1],P});b[a.changeWp.route_id].wp=C,h({...d,route:b})}else{let b=JSON.parse(JSON.stringify(d.route));b[a.changeWp.route_id].wp[a.changeWp.wp_id].pos[0]=a.changeWp.lat,b[a.changeWp.route_id].wp[a.changeWp.wp_id].pos[1]=a.changeWp.lng,h({...d,route:b})}},[a.changeWp]);const p=b=>{console.log("scrool"+b),i.current.scroll&&setTimeout(()=>{i.current.scroll(0,b)},1e3)},g=b=>{const w=b.target.files[0];if(!w)return;const S=new FileReader;S.readAsText(w),S.onload=()=>{console.log(S.result),console.log(w.name),r.openMision(w.name,S.result)},S.onerror=()=>{console.log(S.error)}},v=()=>{h({name:"no mission",description:"",route:[]})},x=()=>{console.log("save mission"),t(!0)};return z.jsxs(V.Fragment,{children:[z.jsxs(Rm,{className:e.toolbar,children:[z.jsx(hr,{edge:"start",sx:{mr:2},onClick:()=>n(-1),children:z.jsx(d_,{})}),z.jsx(yn,{variant:"h6",className:e.title,children:"Mission Task"}),z.jsx(yn,{children:"Group Route"}),z.jsx(Bre,{checked:o,onChange:l,name:"checkedA",inputProps:{"aria-label":"secondary checkbox"}}),z.jsx(hr,{onClick:x,children:z.jsx(c6,{})}),z.jsx(hr,{onClick:v,children:z.jsx(Mu,{})}),z.jsxs("label",{htmlFor:"upload-gpx",children:[z.jsx("input",{accept:".yaml, .plan, .waypoint, .kml",id:"upload-gpx",type:"file",className:e.fileInput,onChange:g}),z.jsx(hr,{edge:"end",component:"span",onClick:()=>{},children:z.jsx(eU,{})})]})]}),z.jsx("div",{ref:i,className:e.list,children:z.jsx(_je,{mission:d,setmission:h,setScrool:p})})]})};var Cje=Array.isArray,Ic=Cje,Aje=typeof zx=="object"&&zx&&zx.Object===Object&&zx,rae=Aje,Pje=rae,Ije=typeof self=="object"&&self&&self.Object===Object&&self,Rje=Pje||Ije||Function("return this")(),rp=Rje,kje=rp,Oje=kje.Symbol,YE=Oje,eq=YE,iae=Object.prototype,Lje=iae.hasOwnProperty,Dje=iae.toString,_S=eq?eq.toStringTag:void 0;function Nje(t){var e=Lje.call(t,_S),n=t[_S];try{t[_S]=void 0;var r=!0}catch{}var i=Dje.call(t);return r&&(e?t[_S]=n:delete t[_S]),i}var zje=Nje,Fje=Object.prototype,Bje=Fje.toString;function jje(t){return Bje.call(t)}var $je=jje,tq=YE,Uje=zje,Vje=$je,Hje="[object Null]",Wje="[object Undefined]",nq=tq?tq.toStringTag:void 0;function Gje(t){return t==null?t===void 0?Wje:Hje:nq&&nq in Object(t)?Uje(t):Vje(t)}var Lm=Gje;function qje(t){return t!=null&&typeof t=="object"}var Dm=qje,Xje=Lm,Yje=Dm,Kje="[object Symbol]";function Zje(t){return typeof t=="symbol"||Yje(t)&&Xje(t)==Kje}var tw=Zje,Jje=Ic,Qje=tw,e$e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,t$e=/^\w*$/;function n$e(t,e){if(Jje(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Qje(t)?!0:t$e.test(t)||!e$e.test(t)||e!=null&&t in Object(e)}var d6=n$e;function r$e(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Hy=r$e;const nw=Mi(Hy);var i$e=Lm,o$e=Hy,s$e="[object AsyncFunction]",a$e="[object Function]",l$e="[object GeneratorFunction]",c$e="[object Proxy]";function u$e(t){if(!o$e(t))return!1;var e=i$e(t);return e==a$e||e==l$e||e==s$e||e==c$e}var h6=u$e;const qr=Mi(h6);var d$e=rp,h$e=d$e["__core-js_shared__"],f$e=h$e,nN=f$e,rq=function(){var t=/[^.]+$/.exec(nN&&nN.keys&&nN.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function p$e(t){return!!rq&&rq in t}var m$e=p$e,g$e=Function.prototype,y$e=g$e.toString;function v$e(t){if(t!=null){try{return y$e.call(t)}catch{}try{return t+""}catch{}}return""}var oae=v$e,_$e=h6,x$e=m$e,b$e=Hy,w$e=oae,S$e=/[\\^$.*+?()[\]{}|]/g,M$e=/^\[object .+?Constructor\]$/,E$e=Function.prototype,T$e=Object.prototype,C$e=E$e.toString,A$e=T$e.hasOwnProperty,P$e=RegExp("^"+C$e.call(A$e).replace(S$e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function I$e(t){if(!b$e(t)||x$e(t))return!1;var e=_$e(t)?P$e:M$e;return e.test(w$e(t))}var R$e=I$e;function k$e(t,e){return t==null?void 0:t[e]}var O$e=k$e,L$e=R$e,D$e=O$e;function N$e(t,e){var n=D$e(t,e);return L$e(n)?n:void 0}var h_=N$e,z$e=h_,F$e=z$e(Object,"create"),TO=F$e,iq=TO;function B$e(){this.__data__=iq?iq(null):{},this.size=0}var j$e=B$e;function $$e(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var U$e=$$e,V$e=TO,H$e="__lodash_hash_undefined__",W$e=Object.prototype,G$e=W$e.hasOwnProperty;function q$e(t){var e=this.__data__;if(V$e){var n=e[t];return n===H$e?void 0:n}return G$e.call(e,t)?e[t]:void 0}var X$e=q$e,Y$e=TO,K$e=Object.prototype,Z$e=K$e.hasOwnProperty;function J$e(t){var e=this.__data__;return Y$e?e[t]!==void 0:Z$e.call(e,t)}var Q$e=J$e,eUe=TO,tUe="__lodash_hash_undefined__";function nUe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=eUe&&e===void 0?tUe:e,this}var rUe=nUe,iUe=j$e,oUe=U$e,sUe=X$e,aUe=Q$e,lUe=rUe;function rw(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}rw.prototype.clear=iUe;rw.prototype.delete=oUe;rw.prototype.get=sUe;rw.prototype.has=aUe;rw.prototype.set=lUe;var cUe=rw;function uUe(){this.__data__=[],this.size=0}var dUe=uUe;function hUe(t,e){return t===e||t!==t&&e!==e}var f6=hUe,fUe=f6;function pUe(t,e){for(var n=t.length;n--;)if(fUe(t[n][0],e))return n;return-1}var CO=pUe,mUe=CO,gUe=Array.prototype,yUe=gUe.splice;function vUe(t){var e=this.__data__,n=mUe(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():yUe.call(e,n,1),--this.size,!0}var _Ue=vUe,xUe=CO;function bUe(t){var e=this.__data__,n=xUe(e,t);return n<0?void 0:e[n][1]}var wUe=bUe,SUe=CO;function MUe(t){return SUe(this.__data__,t)>-1}var EUe=MUe,TUe=CO;function CUe(t,e){var n=this.__data__,r=TUe(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var AUe=CUe,PUe=dUe,IUe=_Ue,RUe=wUe,kUe=EUe,OUe=AUe;function iw(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}iw.prototype.clear=PUe;iw.prototype.delete=IUe;iw.prototype.get=RUe;iw.prototype.has=kUe;iw.prototype.set=OUe;var AO=iw,LUe=h_,DUe=rp,NUe=LUe(DUe,"Map"),p6=NUe,oq=cUe,zUe=AO,FUe=p6;function BUe(){this.size=0,this.__data__={hash:new oq,map:new(FUe||zUe),string:new oq}}var jUe=BUe;function $Ue(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var UUe=$Ue,VUe=UUe;function HUe(t,e){var n=t.__data__;return VUe(e)?n[typeof e=="string"?"string":"hash"]:n.map}var PO=HUe,WUe=PO;function GUe(t){var e=WUe(this,t).delete(t);return this.size-=e?1:0,e}var qUe=GUe,XUe=PO;function YUe(t){return XUe(this,t).get(t)}var KUe=YUe,ZUe=PO;function JUe(t){return ZUe(this,t).has(t)}var QUe=JUe,e6e=PO;function t6e(t,e){var n=e6e(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var n6e=t6e,r6e=jUe,i6e=qUe,o6e=KUe,s6e=QUe,a6e=n6e;function ow(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ow.prototype.clear=r6e;ow.prototype.delete=i6e;ow.prototype.get=o6e;ow.prototype.has=s6e;ow.prototype.set=a6e;var m6=ow,sae=m6,l6e="Expected a function";function g6(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(l6e);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(g6.Cache||sae),n}g6.Cache=sae;var aae=g6;const c6e=Mi(aae);var u6e=aae,d6e=500;function h6e(t){var e=u6e(t,function(r){return n.size===d6e&&n.clear(),r}),n=e.cache;return e}var f6e=h6e,p6e=f6e,m6e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,g6e=/\\(\\)?/g,y6e=p6e(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(m6e,function(n,r,i,o){e.push(i?o.replace(g6e,"$1"):r||n)}),e}),v6e=y6e;function _6e(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var y6=_6e,sq=YE,x6e=y6,b6e=Ic,w6e=tw,S6e=1/0,aq=sq?sq.prototype:void 0,lq=aq?aq.toString:void 0;function lae(t){if(typeof t=="string")return t;if(b6e(t))return x6e(t,lae)+"";if(w6e(t))return lq?lq.call(t):"";var e=t+"";return e=="0"&&1/t==-S6e?"-0":e}var M6e=lae,E6e=M6e;function T6e(t){return t==null?"":E6e(t)}var cae=T6e,C6e=Ic,A6e=d6,P6e=v6e,I6e=cae;function R6e(t,e){return C6e(t)?t:A6e(t,e)?[t]:P6e(I6e(t))}var uae=R6e,k6e=tw,O6e=1/0;function L6e(t){if(typeof t=="string"||k6e(t))return t;var e=t+"";return e=="0"&&1/t==-O6e?"-0":e}var IO=L6e,D6e=uae,N6e=IO;function z6e(t,e){e=D6e(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[N6e(e[n++])];return n&&n==r?t:void 0}var v6=z6e,F6e=v6;function B6e(t,e,n){var r=t==null?void 0:F6e(t,e);return r===void 0?n:r}var dae=B6e;const wd=Mi(dae);function j6e(t){return t==null}var $6e=j6e;const Qr=Mi($6e);var U6e=Lm,V6e=Ic,H6e=Dm,W6e="[object String]";function G6e(t){return typeof t=="string"||!V6e(t)&&H6e(t)&&U6e(t)==W6e}var q6e=G6e;const KE=Mi(q6e);var hae={exports:{}},Gi={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fa=typeof Symbol=="function"&&Symbol.for,_6=fa?Symbol.for("react.element"):60103,x6=fa?Symbol.for("react.portal"):60106,RO=fa?Symbol.for("react.fragment"):60107,kO=fa?Symbol.for("react.strict_mode"):60108,OO=fa?Symbol.for("react.profiler"):60114,LO=fa?Symbol.for("react.provider"):60109,DO=fa?Symbol.for("react.context"):60110,b6=fa?Symbol.for("react.async_mode"):60111,NO=fa?Symbol.for("react.concurrent_mode"):60111,zO=fa?Symbol.for("react.forward_ref"):60112,FO=fa?Symbol.for("react.suspense"):60113,X6e=fa?Symbol.for("react.suspense_list"):60120,BO=fa?Symbol.for("react.memo"):60115,jO=fa?Symbol.for("react.lazy"):60116,Y6e=fa?Symbol.for("react.block"):60121,K6e=fa?Symbol.for("react.fundamental"):60117,Z6e=fa?Symbol.for("react.responder"):60118,J6e=fa?Symbol.for("react.scope"):60119;function Ru(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case _6:switch(t=t.type,t){case b6:case NO:case RO:case OO:case kO:case FO:return t;default:switch(t=t&&t.$$typeof,t){case DO:case zO:case jO:case BO:case LO:return t;default:return e}}case x6:return e}}}function fae(t){return Ru(t)===NO}Gi.AsyncMode=b6;Gi.ConcurrentMode=NO;Gi.ContextConsumer=DO;Gi.ContextProvider=LO;Gi.Element=_6;Gi.ForwardRef=zO;Gi.Fragment=RO;Gi.Lazy=jO;Gi.Memo=BO;Gi.Portal=x6;Gi.Profiler=OO;Gi.StrictMode=kO;Gi.Suspense=FO;Gi.isAsyncMode=function(t){return fae(t)||Ru(t)===b6};Gi.isConcurrentMode=fae;Gi.isContextConsumer=function(t){return Ru(t)===DO};Gi.isContextProvider=function(t){return Ru(t)===LO};Gi.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===_6};Gi.isForwardRef=function(t){return Ru(t)===zO};Gi.isFragment=function(t){return Ru(t)===RO};Gi.isLazy=function(t){return Ru(t)===jO};Gi.isMemo=function(t){return Ru(t)===BO};Gi.isPortal=function(t){return Ru(t)===x6};Gi.isProfiler=function(t){return Ru(t)===OO};Gi.isStrictMode=function(t){return Ru(t)===kO};Gi.isSuspense=function(t){return Ru(t)===FO};Gi.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===RO||t===NO||t===OO||t===kO||t===FO||t===X6e||typeof t=="object"&&t!==null&&(t.$$typeof===jO||t.$$typeof===BO||t.$$typeof===LO||t.$$typeof===DO||t.$$typeof===zO||t.$$typeof===K6e||t.$$typeof===Z6e||t.$$typeof===J6e||t.$$typeof===Y6e)};Gi.typeOf=Ru;hae.exports=Gi;var MB=hae.exports,Q6e=Lm,e8e=Dm,t8e="[object Number]";function n8e(t){return typeof t=="number"||e8e(t)&&Q6e(t)==t8e}var pae=n8e;const r8e=Mi(pae);var i8e=pae;function o8e(t){return i8e(t)&&t!=+t}var s8e=o8e;const ZE=Mi(s8e);var Sh=function(e){return e===0?0:e>0?1:-1},c0=function(e){return KE(e)&&e.indexOf("%")===e.length-1},Pn=function(e){return r8e(e)&&!ZE(e)},js=function(e){return Pn(e)||KE(e)},a8e=0,JE=function(e){var n=++a8e;return"".concat(e||"").concat(n)},W0=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Pn(e)&&!KE(e))return r;var o;if(c0(e)){var s=e.indexOf("%");o=n*parseFloat(e.slice(0,s))/100}else o=+e;return ZE(o)&&(o=r),i&&o>n&&(o=n),o},Kg=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},l8e=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},vh=function(e,n){return Pn(e)&&Pn(n)?function(r){return e+r*(n-e)}:function(){return n}};function TI(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):wd(r,e))===n})}function Cb(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function EB(t){"@babel/helpers - typeof";return EB=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EB(t)}var c8e=["viewBox","children"],u8e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],cq=["points","pathLength"],rN={svg:c8e,polygon:cq,polyline:cq},w6=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],CI=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(V.isValidElement(e)&&(r=e.props),!nw(r))return null;var i={};return Object.keys(r).forEach(function(o){w6.includes(o)&&(i[o]=n||function(s){return r[o](r,s)})}),i},d8e=function(e,n,r){return function(i){return e(n,r,i),null}},AI=function(e,n,r){if(!nw(e)||EB(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(o){var s=e[o];w6.includes(o)&&typeof s=="function"&&(i||(i={}),i[o]=d8e(s,n,r))}),i},h8e=["children"],f8e=["children"];function uq(t,e){if(t==null)return{};var n=p8e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function p8e(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function TB(t){"@babel/helpers - typeof";return TB=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TB(t)}var dq={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},cm=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},hq=null,iN=null,S6=function t(e){if(e===hq&&Array.isArray(iN))return iN;var n=[];return V.Children.forEach(e,function(r){Qr(r)||(MB.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),iN=n,hq=e,n};function Sd(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return cm(i)}):r=[cm(e)],S6(t).forEach(function(i){var o=wd(i,"type.displayName")||wd(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}function tu(t,e){var n=Sd(t,e);return n&&n[0]}var fq=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!Pn(r)||r<=0||!Pn(i)||i<=0)},m8e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],g8e=function(e){return e&&e.type&&KE(e.type)&&m8e.indexOf(e.type)>=0},y8e=function(e){return e&&TB(e)==="object"&&"cx"in e&&"cy"in e&&"r"in e},v8e=function(e,n,r,i){var o,s=(o=rN==null?void 0:rN[i])!==null&&o!==void 0?o:[];return!qr(e)&&(i&&s.includes(n)||u8e.includes(n))||r&&w6.includes(n)},ii=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(V.isValidElement(e)&&(i=e.props),!nw(i))return null;var o={};return Object.keys(i).forEach(function(s){var a;v8e((a=i)===null||a===void 0?void 0:a[s],s,n,r)&&(o[s]=i[s])}),o},CB=function t(e,n){if(e===n)return!0;var r=V.Children.count(e);if(r!==V.Children.count(n))return!1;if(r===0)return!0;if(r===1)return pq(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var o=e[i],s=n[i];if(Array.isArray(o)||Array.isArray(s)){if(!t(o,s))return!1}else if(!pq(o,s))return!1}return!0},pq=function(e,n){if(Qr(e)&&Qr(n))return!0;if(!Qr(e)&&!Qr(n)){var r=e.props||{},i=r.children,o=uq(r,h8e),s=n.props||{},a=s.children,l=uq(s,f8e);return i&&a?Cb(o,l)&&CB(i,a):!i&&!a?Cb(o,l):!1}return!1},mq=function(e,n){var r=[],i={};return S6(e).forEach(function(o,s){if(g8e(o))r.push(o);else if(o){var a=cm(o.type),l=n[a]||{},d=l.handler,h=l.once;if(d&&(!h||!i[a])){var p=d(o,a,s);r.push(p),i[a]=!0}}}),r},_8e=function(e){var n=e&&e.type;return n&&dq[n]?dq[n]:null},x8e=function(e,n){return S6(n).indexOf(e)},b8e=["children","width","height","viewBox","className","style","title","desc"];function AB(){return AB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AB.apply(this,arguments)}function w8e(t,e){if(t==null)return{};var n=S8e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function S8e(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function PB(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,o=t.className,s=t.style,a=t.title,l=t.desc,d=w8e(t,b8e),h=i||{width:n,height:r,x:0,y:0},p=Wt("recharts-surface",o);return Ye.createElement("svg",AB({},ii(d,!0,"svg"),{className:p,width:n,height:r,style:s,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height)}),Ye.createElement("title",null,a),Ye.createElement("desc",null,l),e)}var M8e=["children","className"];function IB(){return IB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IB.apply(this,arguments)}function E8e(t,e){if(t==null)return{};var n=T8e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function T8e(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var us=Ye.forwardRef(function(t,e){var n=t.children,r=t.className,i=E8e(t,M8e),o=Wt("recharts-layer",r);return Ye.createElement("g",IB({className:o},ii(i,!0),{ref:e}),n)}),um=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function C8e(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}var A8e=C8e,P8e=A8e;function I8e(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:P8e(t,e,n)}var R8e=I8e,k8e="\\ud800-\\udfff",O8e="\\u0300-\\u036f",L8e="\\ufe20-\\ufe2f",D8e="\\u20d0-\\u20ff",N8e=O8e+L8e+D8e,z8e="\\ufe0e\\ufe0f",F8e="\\u200d",B8e=RegExp("["+F8e+k8e+N8e+z8e+"]");function j8e(t){return B8e.test(t)}var mae=j8e;function $8e(t){return t.split("")}var U8e=$8e,gae="\\ud800-\\udfff",V8e="\\u0300-\\u036f",H8e="\\ufe20-\\ufe2f",W8e="\\u20d0-\\u20ff",G8e=V8e+H8e+W8e,q8e="\\ufe0e\\ufe0f",X8e="["+gae+"]",RB="["+G8e+"]",kB="\\ud83c[\\udffb-\\udfff]",Y8e="(?:"+RB+"|"+kB+")",yae="[^"+gae+"]",vae="(?:\\ud83c[\\udde6-\\uddff]){2}",_ae="[\\ud800-\\udbff][\\udc00-\\udfff]",K8e="\\u200d",xae=Y8e+"?",bae="["+q8e+"]?",Z8e="(?:"+K8e+"(?:"+[yae,vae,_ae].join("|")+")"+bae+xae+")*",J8e=bae+xae+Z8e,Q8e="(?:"+[yae+RB+"?",RB,vae,_ae,X8e].join("|")+")",eVe=RegExp(kB+"(?="+kB+")|"+Q8e+J8e,"g");function tVe(t){return t.match(eVe)||[]}var nVe=tVe,rVe=U8e,iVe=mae,oVe=nVe;function sVe(t){return iVe(t)?oVe(t):rVe(t)}var aVe=sVe,lVe=R8e,cVe=mae,uVe=aVe,dVe=cae;function hVe(t){return function(e){e=dVe(e);var n=cVe(e)?uVe(e):void 0,r=n?n[0]:e.charAt(0),i=n?lVe(n,1).join(""):e.slice(1);return r[t]()+i}}var fVe=hVe,pVe=fVe,mVe=pVe("toUpperCase"),gVe=mVe;const $O=Mi(gVe);function ro(t){return function(){return t}}const wae=Math.cos,PI=Math.sin,Bh=Math.sqrt,II=Math.PI,UO=2*II,OB=Math.PI,LB=2*OB,qv=1e-6,yVe=LB-qv;function Sae(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function vVe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Sae;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let _Ve=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Sae:vVe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=r-e,d=i-n,h=s-e,p=a-n,g=h*h+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>qv)if(!(Math.abs(p*l-d*h)>qv)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let v=r-s,x=i-a,b=l*l+d*d,w=v*v+x*x,S=Math.sqrt(b),C=Math.sqrt(g),A=o*Math.tan((OB-Math.acos((b+g-w)/(2*S*C)))/2),P=A/C,k=A/S;Math.abs(P-1)>qv&&this._append`L${e+P*h},${n+P*p}`,this._append`A${o},${o},0,0,${+(p*v>h*x)},${this._x1=e+k*l},${this._y1=n+k*d}`}}arc(e,n,r,i,o,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),d=e+a,h=n+l,p=1^s,g=s?i-o:o-i;this._x1===null?this._append`M${d},${h}`:(Math.abs(this._x1-d)>qv||Math.abs(this._y1-h)>qv)&&this._append`L${d},${h}`,r&&(g<0&&(g=g%LB+LB),g>yVe?this._append`A${r},${r},0,1,${p},${e-a},${n-l}A${r},${r},0,1,${p},${this._x1=d},${this._y1=h}`:g>qv&&this._append`A${r},${r},0,${+(g>=OB)},${p},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function M6(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new _Ve(e)}function E6(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Mae(t){this._context=t}Mae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function VO(t){return new Mae(t)}function Eae(t){return t[0]}function Tae(t){return t[1]}function Cae(t,e){var n=ro(!0),r=null,i=VO,o=null,s=M6(a);t=typeof t=="function"?t:t===void 0?Eae:ro(t),e=typeof e=="function"?e:e===void 0?Tae:ro(e);function a(l){var d,h=(l=E6(l)).length,p,g=!1,v;for(r==null&&(o=i(v=s())),d=0;d<=h;++d)!(d<h&&n(p=l[d],d,l))===g&&((g=!g)?o.lineStart():o.lineEnd()),g&&o.point(+t(p,d,l),+e(p,d,l));if(v)return o=null,v+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:ro(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:ro(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ro(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),a):r},a}function kC(t,e,n){var r=null,i=ro(!0),o=null,s=VO,a=null,l=M6(d);t=typeof t=="function"?t:t===void 0?Eae:ro(+t),e=typeof e=="function"?e:ro(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Tae:ro(+n);function d(p){var g,v,x,b=(p=E6(p)).length,w,S=!1,C,A=new Array(b),P=new Array(b);for(o==null&&(a=s(C=l())),g=0;g<=b;++g){if(!(g<b&&i(w=p[g],g,p))===S)if(S=!S)v=g,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),x=g-1;x>=v;--x)a.point(A[x],P[x]);a.lineEnd(),a.areaEnd()}S&&(A[g]=+t(w,g,p),P[g]=+e(w,g,p),a.point(r?+r(w,g,p):A[g],n?+n(w,g,p):P[g]))}if(C)return a=null,C+""||null}function h(){return Cae().defined(i).curve(s).context(o)}return d.x=function(p){return arguments.length?(t=typeof p=="function"?p:ro(+p),r=null,d):t},d.x0=function(p){return arguments.length?(t=typeof p=="function"?p:ro(+p),d):t},d.x1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:ro(+p),d):r},d.y=function(p){return arguments.length?(e=typeof p=="function"?p:ro(+p),n=null,d):e},d.y0=function(p){return arguments.length?(e=typeof p=="function"?p:ro(+p),d):e},d.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:ro(+p),d):n},d.lineX0=d.lineY0=function(){return h().x(t).y(e)},d.lineY1=function(){return h().x(t).y(n)},d.lineX1=function(){return h().x(r).y(e)},d.defined=function(p){return arguments.length?(i=typeof p=="function"?p:ro(!!p),d):i},d.curve=function(p){return arguments.length?(s=p,o!=null&&(a=s(o)),d):s},d.context=function(p){return arguments.length?(p==null?o=a=null:a=s(o=p),d):o},d}class Aae{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function xVe(t){return new Aae(t,!0)}function bVe(t){return new Aae(t,!1)}const T6={draw(t,e){const n=Bh(e/II);t.moveTo(n,0),t.arc(0,0,n,0,UO)}},wVe={draw(t,e){const n=Bh(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Pae=Bh(1/3),SVe=Pae*2,MVe={draw(t,e){const n=Bh(e/SVe),r=n*Pae;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},EVe={draw(t,e){const n=Bh(e),r=-n/2;t.rect(r,r,n,n)}},TVe=.8908130915292852,Iae=PI(II/10)/PI(7*II/10),CVe=PI(UO/10)*Iae,AVe=-wae(UO/10)*Iae,PVe={draw(t,e){const n=Bh(e*TVe),r=CVe*n,i=AVe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const s=UO*o/5,a=wae(s),l=PI(s);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*i,l*r+a*i)}t.closePath()}},oN=Bh(3),IVe={draw(t,e){const n=-Bh(e/(oN*3));t.moveTo(0,n*2),t.lineTo(-oN*n,-n),t.lineTo(oN*n,-n),t.closePath()}},td=-.5,nd=Bh(3)/2,DB=1/Bh(12),RVe=(DB/2+1)*3,kVe={draw(t,e){const n=Bh(e/RVe),r=n/2,i=n*DB,o=r,s=n*DB+n,a=-o,l=s;t.moveTo(r,i),t.lineTo(o,s),t.lineTo(a,l),t.lineTo(td*r-nd*i,nd*r+td*i),t.lineTo(td*o-nd*s,nd*o+td*s),t.lineTo(td*a-nd*l,nd*a+td*l),t.lineTo(td*r+nd*i,td*i-nd*r),t.lineTo(td*o+nd*s,td*s-nd*o),t.lineTo(td*a+nd*l,td*l-nd*a),t.closePath()}};function OVe(t,e){let n=null,r=M6(i);t=typeof t=="function"?t:ro(t||T6),e=typeof e=="function"?e:ro(e===void 0?64:+e);function i(){let o;if(n||(n=o=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:ro(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:ro(+o),i):e},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function RI(){}function kI(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Rae(t){this._context=t}Rae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:kI(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:kI(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function LVe(t){return new Rae(t)}function kae(t){this._context=t}kae.prototype={areaStart:RI,areaEnd:RI,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:kI(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function DVe(t){return new kae(t)}function Oae(t){this._context=t}Oae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:kI(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function NVe(t){return new Oae(t)}function Lae(t){this._context=t}Lae.prototype={areaStart:RI,areaEnd:RI,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function zVe(t){return new Lae(t)}function gq(t){return t<0?-1:1}function yq(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(gq(o)+gq(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function vq(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function sN(t,e,n){var r=t._x0,i=t._y0,o=t._x1,s=t._y1,a=(o-r)/3;t._context.bezierCurveTo(r+a,i+a*e,o-a,s-a*n,o,s)}function OI(t){this._context=t}OI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:sN(this,this._t0,vq(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,sN(this,vq(this,n=yq(this,t,e)),n);break;default:sN(this,this._t0,n=yq(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Dae(t){this._context=new Nae(t)}(Dae.prototype=Object.create(OI.prototype)).point=function(t,e){OI.prototype.point.call(this,e,t)};function Nae(t){this._context=t}Nae.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function FVe(t){return new OI(t)}function BVe(t){return new Dae(t)}function zae(t){this._context=t}zae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=_q(t),i=_q(e),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function _q(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function jVe(t){return new zae(t)}function HO(t,e){this._context=t,this._t=e}HO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function $Ve(t){return new HO(t,.5)}function UVe(t){return new HO(t,0)}function VVe(t){return new HO(t,1)}function r1(t,e){if((s=t.length)>1)for(var n=1,r,i,o=t[e[0]],s,a=o.length;n<s;++n)for(i=o,o=t[e[n]],r=0;r<a;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function NB(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function HVe(t,e){return t[e]}function WVe(t){const e=[];return e.key=t,e}function GVe(){var t=ro([]),e=NB,n=r1,r=HVe;function i(o){var s=Array.from(t.apply(this,arguments),WVe),a,l=s.length,d=-1,h;for(const p of o)for(a=0,++d;a<l;++a)(s[a][d]=[0,+r(p,s[a].key,d,o)]).data=p;for(a=0,h=E6(e(s));a<l;++a)s[h[a]].index=a;return n(s,h),s}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:ro(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:ro(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?NB:typeof o=="function"?o:ro(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??r1,i):n},i}function qVe(t,e){if((r=t.length)>0){for(var n,r,i=0,o=t[0].length,s;i<o;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}r1(t,e)}}function XVe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,o=r.length;n<o;++n){for(var s=0,a=0;s<i;++s)a+=t[s][n][1]||0;r[n][1]+=r[n][0]=-a/2}r1(t,e)}}function YVe(t,e){if(!(!((s=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,o,s;r<o;++r){for(var a=0,l=0,d=0;a<s;++a){for(var h=t[e[a]],p=h[r][1]||0,g=h[r-1][1]||0,v=(p-g)/2,x=0;x<a;++x){var b=t[e[x]],w=b[r][1]||0,S=b[r-1][1]||0;v+=w-S}l+=p,d+=v*p}i[r-1][1]+=i[r-1][0]=n,l&&(n-=d/l)}i[r-1][1]+=i[r-1][0]=n,r1(t,e)}}function yM(t){"@babel/helpers - typeof";return yM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yM(t)}var KVe=["type","size","sizeType"];function zB(){return zB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zB.apply(this,arguments)}function xq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xq(Object(n),!0).forEach(function(r){ZVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZVe(t,e,n){return e=JVe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JVe(t){var e=QVe(t,"string");return yM(e)=="symbol"?e:String(e)}function QVe(t,e){if(yM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(yM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eHe(t,e){if(t==null)return{};var n=tHe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tHe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Fae={symbolCircle:T6,symbolCross:wVe,symbolDiamond:MVe,symbolSquare:EVe,symbolStar:PVe,symbolTriangle:IVe,symbolWye:kVe},nHe=Math.PI/180,rHe=function(e){var n="symbol".concat($O(e));return Fae[n]||T6},iHe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*nHe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},oHe=function(e,n){Fae["symbol".concat($O(e))]=n},C6=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,o=i===void 0?64:i,s=e.sizeType,a=s===void 0?"area":s,l=eHe(e,KVe),d=bq(bq({},l),{},{type:r,size:o,sizeType:a}),h=function(){var w=rHe(r),S=OVe().type(w).size(iHe(o,a,r));return S()},p=d.className,g=d.cx,v=d.cy,x=ii(d,!0);return g===+g&&v===+v&&o===+o?Ye.createElement("path",zB({},x,{className:Wt("recharts-symbols",p),transform:"translate(".concat(g,", ").concat(v,")"),d:h()})):null};C6.registerSymbol=oHe;function i1(t){"@babel/helpers - typeof";return i1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i1(t)}function FB(){return FB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FB.apply(this,arguments)}function wq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sHe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wq(Object(n),!0).forEach(function(r){vM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aHe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lHe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jae(r.key),r)}}function cHe(t,e,n){return e&&lHe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function uHe(t,e,n){return e=LI(e),dHe(t,Bae()?Reflect.construct(e,n||[],LI(t).constructor):e.apply(t,n))}function dHe(t,e){if(e&&(i1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hHe(t)}function hHe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bae(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bae=function(){return!!t})()}function LI(t){return LI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},LI(t)}function fHe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BB(t,e)}function BB(t,e){return BB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},BB(t,e)}function vM(t,e,n){return e=jae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jae(t){var e=pHe(t,"string");return i1(e)=="symbol"?e:String(e)}function pHe(t,e){if(i1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(i1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rd=32,A6=function(t){fHe(e,t);function e(){return aHe(this,e),uHe(this,e,arguments)}return cHe(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,o=rd/2,s=rd/6,a=rd/3,l=r.inactive?i:r.color;if(r.type==="plainline")return Ye.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:o,x2:rd,y2:o,className:"recharts-legend-icon"});if(r.type==="line")return Ye.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(o,"h").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*a,",").concat(o,`
            H`).concat(rd,"M").concat(2*a,",").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(a,",").concat(o),className:"recharts-legend-icon"});if(r.type==="rect")return Ye.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(rd/8,"h").concat(rd,"v").concat(rd*3/4,"h").concat(-rd,"z"),className:"recharts-legend-icon"});if(Ye.isValidElement(r.legendIcon)){var d=sHe({},r);return delete d.legendIcon,Ye.cloneElement(r.legendIcon,d)}return Ye.createElement(C6,{fill:l,cx:o,cy:o,size:rd,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,o=i.payload,s=i.iconSize,a=i.layout,l=i.formatter,d=i.inactiveColor,h={x:0,y:0,width:rd,height:rd},p={display:a==="horizontal"?"inline-block":"block",marginRight:10},g={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(v,x){var b=v.formatter||l,w=Wt(vM(vM({"recharts-legend-item":!0},"legend-item-".concat(x),!0),"inactive",v.inactive));if(v.type==="none")return null;var S=qr(v.value)?null:v.value;um(!qr(v.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var C=v.inactive?d:v.color;return Ye.createElement("li",FB({className:w,style:p,key:"legend-item-".concat(x)},AI(r.props,v,x)),Ye.createElement(PB,{width:s,height:s,viewBox:h,style:g},r.renderIcon(v)),Ye.createElement("span",{className:"recharts-legend-item-text",style:{color:C}},b?b(S,v,x):S))})}},{key:"render",value:function(){var r=this.props,i=r.payload,o=r.layout,s=r.align;if(!i||!i.length)return null;var a={padding:0,margin:0,textAlign:o==="horizontal"?s:"left"};return Ye.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}]),e}(V.PureComponent);vM(A6,"displayName","Legend");vM(A6,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var mHe=AO;function gHe(){this.__data__=new mHe,this.size=0}var yHe=gHe;function vHe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var _He=vHe;function xHe(t){return this.__data__.get(t)}var bHe=xHe;function wHe(t){return this.__data__.has(t)}var SHe=wHe,MHe=AO,EHe=p6,THe=m6,CHe=200;function AHe(t,e){var n=this.__data__;if(n instanceof MHe){var r=n.__data__;if(!EHe||r.length<CHe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new THe(r)}return n.set(t,e),this.size=n.size,this}var PHe=AHe,IHe=AO,RHe=yHe,kHe=_He,OHe=bHe,LHe=SHe,DHe=PHe;function sw(t){var e=this.__data__=new IHe(t);this.size=e.size}sw.prototype.clear=RHe;sw.prototype.delete=kHe;sw.prototype.get=OHe;sw.prototype.has=LHe;sw.prototype.set=DHe;var $ae=sw,NHe="__lodash_hash_undefined__";function zHe(t){return this.__data__.set(t,NHe),this}var FHe=zHe;function BHe(t){return this.__data__.has(t)}var jHe=BHe,$He=m6,UHe=FHe,VHe=jHe;function DI(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new $He;++e<n;)this.add(t[e])}DI.prototype.add=DI.prototype.push=UHe;DI.prototype.has=VHe;var Uae=DI;function HHe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Vae=HHe;function WHe(t,e){return t.has(e)}var Hae=WHe,GHe=Uae,qHe=Vae,XHe=Hae,YHe=1,KHe=2;function ZHe(t,e,n,r,i,o){var s=n&YHe,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var d=o.get(t),h=o.get(e);if(d&&h)return d==e&&h==t;var p=-1,g=!0,v=n&KHe?new GHe:void 0;for(o.set(t,e),o.set(e,t);++p<a;){var x=t[p],b=e[p];if(r)var w=s?r(b,x,p,e,t,o):r(x,b,p,t,e,o);if(w!==void 0){if(w)continue;g=!1;break}if(v){if(!qHe(e,function(S,C){if(!XHe(v,C)&&(x===S||i(x,S,n,r,o)))return v.push(C)})){g=!1;break}}else if(!(x===b||i(x,b,n,r,o))){g=!1;break}}return o.delete(t),o.delete(e),g}var Wae=ZHe,JHe=rp,QHe=JHe.Uint8Array,eWe=QHe;function tWe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var nWe=tWe;function rWe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var P6=rWe,Sq=YE,Mq=eWe,iWe=f6,oWe=Wae,sWe=nWe,aWe=P6,lWe=1,cWe=2,uWe="[object Boolean]",dWe="[object Date]",hWe="[object Error]",fWe="[object Map]",pWe="[object Number]",mWe="[object RegExp]",gWe="[object Set]",yWe="[object String]",vWe="[object Symbol]",_We="[object ArrayBuffer]",xWe="[object DataView]",Eq=Sq?Sq.prototype:void 0,aN=Eq?Eq.valueOf:void 0;function bWe(t,e,n,r,i,o,s){switch(n){case xWe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case _We:return!(t.byteLength!=e.byteLength||!o(new Mq(t),new Mq(e)));case uWe:case dWe:case pWe:return iWe(+t,+e);case hWe:return t.name==e.name&&t.message==e.message;case mWe:case yWe:return t==e+"";case fWe:var a=sWe;case gWe:var l=r&lWe;if(a||(a=aWe),t.size!=e.size&&!l)return!1;var d=s.get(t);if(d)return d==e;r|=cWe,s.set(t,e);var h=oWe(a(t),a(e),r,i,o,s);return s.delete(t),h;case vWe:if(aN)return aN.call(t)==aN.call(e)}return!1}var wWe=bWe;function SWe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var Gae=SWe,MWe=Gae,EWe=Ic;function TWe(t,e,n){var r=e(t);return EWe(t)?r:MWe(r,n(t))}var CWe=TWe;function AWe(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}var PWe=AWe;function IWe(){return[]}var RWe=IWe,kWe=PWe,OWe=RWe,LWe=Object.prototype,DWe=LWe.propertyIsEnumerable,Tq=Object.getOwnPropertySymbols,NWe=Tq?function(t){return t==null?[]:(t=Object(t),kWe(Tq(t),function(e){return DWe.call(t,e)}))}:OWe,zWe=NWe;function FWe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var BWe=FWe,jWe=Lm,$We=Dm,UWe="[object Arguments]";function VWe(t){return $We(t)&&jWe(t)==UWe}var HWe=VWe,Cq=HWe,WWe=Dm,qae=Object.prototype,GWe=qae.hasOwnProperty,qWe=qae.propertyIsEnumerable,XWe=Cq(function(){return arguments}())?Cq:function(t){return WWe(t)&&GWe.call(t,"callee")&&!qWe.call(t,"callee")},I6=XWe,NI={exports:{}};function YWe(){return!1}var KWe=YWe;NI.exports;(function(t,e){var n=rp,r=KWe,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,s=o&&o.exports===i,a=s?n.Buffer:void 0,l=a?a.isBuffer:void 0,d=l||r;t.exports=d})(NI,NI.exports);var Xae=NI.exports,ZWe=9007199254740991,JWe=/^(?:0|[1-9]\d*)$/;function QWe(t,e){var n=typeof t;return e=e??ZWe,!!e&&(n=="number"||n!="symbol"&&JWe.test(t))&&t>-1&&t%1==0&&t<e}var R6=QWe,e9e=9007199254740991;function t9e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=e9e}var k6=t9e,n9e=Lm,r9e=k6,i9e=Dm,o9e="[object Arguments]",s9e="[object Array]",a9e="[object Boolean]",l9e="[object Date]",c9e="[object Error]",u9e="[object Function]",d9e="[object Map]",h9e="[object Number]",f9e="[object Object]",p9e="[object RegExp]",m9e="[object Set]",g9e="[object String]",y9e="[object WeakMap]",v9e="[object ArrayBuffer]",_9e="[object DataView]",x9e="[object Float32Array]",b9e="[object Float64Array]",w9e="[object Int8Array]",S9e="[object Int16Array]",M9e="[object Int32Array]",E9e="[object Uint8Array]",T9e="[object Uint8ClampedArray]",C9e="[object Uint16Array]",A9e="[object Uint32Array]",mo={};mo[x9e]=mo[b9e]=mo[w9e]=mo[S9e]=mo[M9e]=mo[E9e]=mo[T9e]=mo[C9e]=mo[A9e]=!0;mo[o9e]=mo[s9e]=mo[v9e]=mo[a9e]=mo[_9e]=mo[l9e]=mo[c9e]=mo[u9e]=mo[d9e]=mo[h9e]=mo[f9e]=mo[p9e]=mo[m9e]=mo[g9e]=mo[y9e]=!1;function P9e(t){return i9e(t)&&r9e(t.length)&&!!mo[n9e(t)]}var I9e=P9e;function R9e(t){return function(e){return t(e)}}var Yae=R9e,zI={exports:{}};zI.exports;(function(t,e){var n=rae,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,s=o&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();t.exports=a})(zI,zI.exports);var k9e=zI.exports,O9e=I9e,L9e=Yae,Aq=k9e,Pq=Aq&&Aq.isTypedArray,D9e=Pq?L9e(Pq):O9e,Kae=D9e,N9e=BWe,z9e=I6,F9e=Ic,B9e=Xae,j9e=R6,$9e=Kae,U9e=Object.prototype,V9e=U9e.hasOwnProperty;function H9e(t,e){var n=F9e(t),r=!n&&z9e(t),i=!n&&!r&&B9e(t),o=!n&&!r&&!i&&$9e(t),s=n||r||i||o,a=s?N9e(t.length,String):[],l=a.length;for(var d in t)(e||V9e.call(t,d))&&!(s&&(d=="length"||i&&(d=="offset"||d=="parent")||o&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||j9e(d,l)))&&a.push(d);return a}var W9e=H9e,G9e=Object.prototype;function q9e(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||G9e;return t===n}var X9e=q9e;function Y9e(t,e){return function(n){return t(e(n))}}var Zae=Y9e,K9e=Zae,Z9e=K9e(Object.keys,Object),J9e=Z9e,Q9e=X9e,eGe=J9e,tGe=Object.prototype,nGe=tGe.hasOwnProperty;function rGe(t){if(!Q9e(t))return eGe(t);var e=[];for(var n in Object(t))nGe.call(t,n)&&n!="constructor"&&e.push(n);return e}var iGe=rGe,oGe=h6,sGe=k6;function aGe(t){return t!=null&&sGe(t.length)&&!oGe(t)}var QE=aGe,lGe=W9e,cGe=iGe,uGe=QE;function dGe(t){return uGe(t)?lGe(t):cGe(t)}var WO=dGe,hGe=CWe,fGe=zWe,pGe=WO;function mGe(t){return hGe(t,pGe,fGe)}var gGe=mGe,Iq=gGe,yGe=1,vGe=Object.prototype,_Ge=vGe.hasOwnProperty;function xGe(t,e,n,r,i,o){var s=n&yGe,a=Iq(t),l=a.length,d=Iq(e),h=d.length;if(l!=h&&!s)return!1;for(var p=l;p--;){var g=a[p];if(!(s?g in e:_Ge.call(e,g)))return!1}var v=o.get(t),x=o.get(e);if(v&&x)return v==e&&x==t;var b=!0;o.set(t,e),o.set(e,t);for(var w=s;++p<l;){g=a[p];var S=t[g],C=e[g];if(r)var A=s?r(C,S,g,e,t,o):r(S,C,g,t,e,o);if(!(A===void 0?S===C||i(S,C,n,r,o):A)){b=!1;break}w||(w=g=="constructor")}if(b&&!w){var P=t.constructor,k=e.constructor;P!=k&&"constructor"in t&&"constructor"in e&&!(typeof P=="function"&&P instanceof P&&typeof k=="function"&&k instanceof k)&&(b=!1)}return o.delete(t),o.delete(e),b}var bGe=xGe,wGe=h_,SGe=rp,MGe=wGe(SGe,"DataView"),EGe=MGe,TGe=h_,CGe=rp,AGe=TGe(CGe,"Promise"),PGe=AGe,IGe=h_,RGe=rp,kGe=IGe(RGe,"Set"),Jae=kGe,OGe=h_,LGe=rp,DGe=OGe(LGe,"WeakMap"),NGe=DGe,jB=EGe,$B=p6,UB=PGe,VB=Jae,HB=NGe,Qae=Lm,aw=oae,Rq="[object Map]",zGe="[object Object]",kq="[object Promise]",Oq="[object Set]",Lq="[object WeakMap]",Dq="[object DataView]",FGe=aw(jB),BGe=aw($B),jGe=aw(UB),$Ge=aw(VB),UGe=aw(HB),Xv=Qae;(jB&&Xv(new jB(new ArrayBuffer(1)))!=Dq||$B&&Xv(new $B)!=Rq||UB&&Xv(UB.resolve())!=kq||VB&&Xv(new VB)!=Oq||HB&&Xv(new HB)!=Lq)&&(Xv=function(t){var e=Qae(t),n=e==zGe?t.constructor:void 0,r=n?aw(n):"";if(r)switch(r){case FGe:return Dq;case BGe:return Rq;case jGe:return kq;case $Ge:return Oq;case UGe:return Lq}return e});var VGe=Xv,lN=$ae,HGe=Wae,WGe=wWe,GGe=bGe,Nq=VGe,zq=Ic,Fq=Xae,qGe=Kae,XGe=1,Bq="[object Arguments]",jq="[object Array]",OC="[object Object]",YGe=Object.prototype,$q=YGe.hasOwnProperty;function KGe(t,e,n,r,i,o){var s=zq(t),a=zq(e),l=s?jq:Nq(t),d=a?jq:Nq(e);l=l==Bq?OC:l,d=d==Bq?OC:d;var h=l==OC,p=d==OC,g=l==d;if(g&&Fq(t)){if(!Fq(e))return!1;s=!0,h=!1}if(g&&!h)return o||(o=new lN),s||qGe(t)?HGe(t,e,n,r,i,o):WGe(t,e,l,n,r,i,o);if(!(n&XGe)){var v=h&&$q.call(t,"__wrapped__"),x=p&&$q.call(e,"__wrapped__");if(v||x){var b=v?t.value():t,w=x?e.value():e;return o||(o=new lN),i(b,w,n,r,o)}}return g?(o||(o=new lN),GGe(t,e,n,r,i,o)):!1}var ZGe=KGe,JGe=ZGe,Uq=Dm;function ele(t,e,n,r,i){return t===e?!0:t==null||e==null||!Uq(t)&&!Uq(e)?t!==t&&e!==e:JGe(t,e,n,r,ele,i)}var O6=ele,QGe=$ae,e7e=O6,t7e=1,n7e=2;function r7e(t,e,n,r){var i=n.length,o=i,s=!r;if(t==null)return!o;for(t=Object(t);i--;){var a=n[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){a=n[i];var l=a[0],d=t[l],h=a[1];if(s&&a[2]){if(d===void 0&&!(l in t))return!1}else{var p=new QGe;if(r)var g=r(d,h,l,t,e,p);if(!(g===void 0?e7e(h,d,t7e|n7e,r,p):g))return!1}}return!0}var i7e=r7e,o7e=Hy;function s7e(t){return t===t&&!o7e(t)}var tle=s7e,a7e=tle,l7e=WO;function c7e(t){for(var e=l7e(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,a7e(i)]}return e}var u7e=c7e;function d7e(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var nle=d7e,h7e=i7e,f7e=u7e,p7e=nle;function m7e(t){var e=f7e(t);return e.length==1&&e[0][2]?p7e(e[0][0],e[0][1]):function(n){return n===t||h7e(n,t,e)}}var g7e=m7e;function y7e(t,e){return t!=null&&e in Object(t)}var v7e=y7e,_7e=uae,x7e=I6,b7e=Ic,w7e=R6,S7e=k6,M7e=IO;function E7e(t,e,n){e=_7e(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var s=M7e(e[r]);if(!(o=t!=null&&n(t,s)))break;t=t[s]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&S7e(i)&&w7e(s,i)&&(b7e(t)||x7e(t)))}var T7e=E7e,C7e=v7e,A7e=T7e;function P7e(t,e){return t!=null&&A7e(t,e,C7e)}var I7e=P7e,R7e=O6,k7e=dae,O7e=I7e,L7e=d6,D7e=tle,N7e=nle,z7e=IO,F7e=1,B7e=2;function j7e(t,e){return L7e(t)&&D7e(e)?N7e(z7e(t),e):function(n){var r=k7e(n,t);return r===void 0&&r===e?O7e(n,t):R7e(e,r,F7e|B7e)}}var $7e=j7e;function U7e(t){return t}var lw=U7e;function V7e(t){return function(e){return e==null?void 0:e[t]}}var H7e=V7e,W7e=v6;function G7e(t){return function(e){return W7e(e,t)}}var q7e=G7e,X7e=H7e,Y7e=q7e,K7e=d6,Z7e=IO;function J7e(t){return K7e(t)?X7e(Z7e(t)):Y7e(t)}var Q7e=J7e,eqe=g7e,tqe=$7e,nqe=lw,rqe=Ic,iqe=Q7e;function oqe(t){return typeof t=="function"?t:t==null?nqe:typeof t=="object"?rqe(t)?tqe(t[0],t[1]):eqe(t):iqe(t)}var Wy=oqe;function sqe(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var rle=sqe;function aqe(t){return t!==t}var lqe=aqe;function cqe(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var uqe=cqe,dqe=rle,hqe=lqe,fqe=uqe;function pqe(t,e,n){return e===e?fqe(t,e,n):dqe(t,hqe,n)}var mqe=pqe,gqe=mqe;function yqe(t,e){var n=t==null?0:t.length;return!!n&&gqe(t,e,0)>-1}var vqe=yqe;function _qe(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var xqe=_qe;function bqe(){}var wqe=bqe,cN=Jae,Sqe=wqe,Mqe=P6,Eqe=1/0,Tqe=cN&&1/Mqe(new cN([,-0]))[1]==Eqe?function(t){return new cN(t)}:Sqe,Cqe=Tqe,Aqe=Uae,Pqe=vqe,Iqe=xqe,Rqe=Hae,kqe=Cqe,Oqe=P6,Lqe=200;function Dqe(t,e,n){var r=-1,i=Pqe,o=t.length,s=!0,a=[],l=a;if(n)s=!1,i=Iqe;else if(o>=Lqe){var d=e?null:kqe(t);if(d)return Oqe(d);s=!1,i=Rqe,l=new Aqe}else l=e?[]:a;e:for(;++r<o;){var h=t[r],p=e?e(h):h;if(h=n||h!==0?h:0,s&&p===p){for(var g=l.length;g--;)if(l[g]===p)continue e;e&&l.push(p),a.push(h)}else i(l,p,n)||(l!==a&&l.push(p),a.push(h))}return a}var Nqe=Dqe,zqe=Wy,Fqe=Nqe;function Bqe(t,e){return t&&t.length?Fqe(t,zqe(e)):[]}var jqe=Bqe;const Vq=Mi(jqe);function ile(t,e,n){return e===!0?Vq(t,n):qr(e)?Vq(t,e):t}function o1(t){"@babel/helpers - typeof";return o1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o1(t)}var $qe=["ref"];function Hq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Hq(Object(n),!0).forEach(function(r){GO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Uqe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ale(r.key),r)}}function Vqe(t,e,n){return e&&Wq(t.prototype,e),n&&Wq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hqe(t,e,n){return e=FI(e),Wqe(t,ole()?Reflect.construct(e,n||[],FI(t).constructor):e.apply(t,n))}function Wqe(t,e){if(e&&(o1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sle(t)}function ole(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ole=function(){return!!t})()}function FI(t){return FI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},FI(t)}function sle(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gqe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WB(t,e)}function WB(t,e){return WB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},WB(t,e)}function GO(t,e,n){return e=ale(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ale(t){var e=qqe(t,"string");return o1(e)=="symbol"?e:String(e)}function qqe(t,e){if(o1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(o1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xqe(t,e){if(t==null)return{};var n=Yqe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Yqe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Kqe(t){return t.value}function Zqe(t,e){if(Ye.isValidElement(t))return Ye.cloneElement(t,e);if(typeof t=="function")return Ye.createElement(t,e);e.ref;var n=Xqe(e,$qe);return Ye.createElement(A6,n)}var Gq=1,s1=function(t){Gqe(e,t);function e(){var n;Uqe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=Hqe(this,e,[].concat(i)),GO(sle(n),"lastBoundingBox",{width:-1,height:-1}),n}return Vqe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>Gq||Math.abs(i.height-this.lastBoundingBox.height)>Gq)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Tv({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,o=i.layout,s=i.align,a=i.verticalAlign,l=i.margin,d=i.chartWidth,h=i.chartHeight,p,g;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&o==="vertical"){var v=this.getBBoxSnapshot();p={left:((d||0)-v.width)/2}}else p=s==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(a==="middle"){var x=this.getBBoxSnapshot();g={top:((h||0)-x.height)/2}}else g=a==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return Tv(Tv({},p),g)}},{key:"render",value:function(){var r=this,i=this.props,o=i.content,s=i.width,a=i.height,l=i.wrapperStyle,d=i.payloadUniqBy,h=i.payload,p=Tv(Tv({position:"absolute",width:s||"auto",height:a||"auto"},this.getDefaultPosition(l)),l);return Ye.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:function(v){r.wrapperNode=v}},Zqe(o,Tv(Tv({},this.props),{},{payload:ile(h,d,Kqe)})))}}],[{key:"getWithHeight",value:function(r,i){var o=r.props.layout;return o==="vertical"&&Pn(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||i}:null}}]),e}(V.PureComponent);GO(s1,"displayName","Legend");GO(s1,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var qq=YE,Jqe=I6,Qqe=Ic,Xq=qq?qq.isConcatSpreadable:void 0;function eXe(t){return Qqe(t)||Jqe(t)||!!(Xq&&t&&t[Xq])}var tXe=eXe,nXe=Gae,rXe=tXe;function lle(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=rXe),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?lle(a,e-1,n,r,i):nXe(i,a):r||(i[i.length]=a)}return i}var cle=lle;function iXe(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var l=s[t?a:++i];if(n(o[l],l,o)===!1)break}return e}}var oXe=iXe,sXe=oXe,aXe=sXe(),lXe=aXe,cXe=lXe,uXe=WO;function dXe(t,e){return t&&cXe(t,e,uXe)}var ule=dXe,hXe=QE;function fXe(t,e){return function(n,r){if(n==null)return n;if(!hXe(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=Object(n);(e?o--:++o<i)&&r(s[o],o,s)!==!1;);return n}}var pXe=fXe,mXe=ule,gXe=pXe,yXe=gXe(mXe),L6=yXe,vXe=L6,_Xe=QE;function xXe(t,e){var n=-1,r=_Xe(t)?Array(t.length):[];return vXe(t,function(i,o,s){r[++n]=e(i,o,s)}),r}var dle=xXe;function bXe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var wXe=bXe,Yq=tw;function SXe(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,o=Yq(t),s=e!==void 0,a=e===null,l=e===e,d=Yq(e);if(!a&&!d&&!o&&t>e||o&&s&&l&&!a&&!d||r&&s&&l||!n&&l||!i)return 1;if(!r&&!o&&!d&&t<e||d&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!l)return-1}return 0}var MXe=SXe,EXe=MXe;function TXe(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;++r<s;){var l=EXe(i[r],o[r]);if(l){if(r>=a)return l;var d=n[r];return l*(d=="desc"?-1:1)}}return t.index-e.index}var CXe=TXe,uN=y6,AXe=v6,PXe=Wy,IXe=dle,RXe=wXe,kXe=Yae,OXe=CXe,LXe=lw,DXe=Ic;function NXe(t,e,n){e.length?e=uN(e,function(o){return DXe(o)?function(s){return AXe(s,o.length===1?o[0]:o)}:o}):e=[LXe];var r=-1;e=uN(e,kXe(PXe));var i=IXe(t,function(o,s,a){var l=uN(e,function(d){return d(o)});return{criteria:l,index:++r,value:o}});return RXe(i,function(o,s){return OXe(o,s,n)})}var zXe=NXe;function FXe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var BXe=FXe,jXe=BXe,Kq=Math.max;function $Xe(t,e,n){return e=Kq(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Kq(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(s),jXe(t,this,a)}}var UXe=$Xe;function VXe(t){return function(){return t}}var HXe=VXe,WXe=h_,GXe=function(){try{var t=WXe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),hle=GXe,qXe=HXe,Zq=hle,XXe=lw,YXe=Zq?function(t,e){return Zq(t,"toString",{configurable:!0,enumerable:!1,value:qXe(e),writable:!0})}:XXe,KXe=YXe,ZXe=800,JXe=16,QXe=Date.now;function eYe(t){var e=0,n=0;return function(){var r=QXe(),i=JXe-(r-n);if(n=r,i>0){if(++e>=ZXe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var tYe=eYe,nYe=KXe,rYe=tYe,iYe=rYe(nYe),oYe=iYe,sYe=lw,aYe=UXe,lYe=oYe;function cYe(t,e){return lYe(aYe(t,e,sYe),t+"")}var uYe=cYe,dYe=f6,hYe=QE,fYe=R6,pYe=Hy;function mYe(t,e,n){if(!pYe(n))return!1;var r=typeof e;return(r=="number"?hYe(n)&&fYe(e,n.length):r=="string"&&e in n)?dYe(n[e],t):!1}var qO=mYe,gYe=cle,yYe=zXe,vYe=uYe,Jq=qO,_Ye=vYe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&Jq(t,e[0],e[1])?e=[]:n>2&&Jq(e[0],e[1],e[2])&&(e=[e[0]]),yYe(t,gYe(e,1),[])}),xYe=_Ye;const D6=Mi(xYe);function _M(t){"@babel/helpers - typeof";return _M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_M(t)}function GB(){return GB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},GB.apply(this,arguments)}function bYe(t,e){return EYe(t)||MYe(t,e)||SYe(t,e)||wYe()}function wYe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SYe(t,e){if(t){if(typeof t=="string")return Qq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qq(t,e)}}function Qq(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function MYe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,d=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(h){d=!0,i=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return a}}function EYe(t){if(Array.isArray(t))return t}function eX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eX(Object(n),!0).forEach(function(r){TYe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TYe(t,e,n){return e=CYe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CYe(t){var e=AYe(t,"string");return _M(e)=="symbol"?e:String(e)}function AYe(t,e){if(_M(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_M(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function PYe(t){return Array.isArray(t)&&js(t[0])&&js(t[1])?t.join(" ~ "):t}var IYe=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,o=i===void 0?{}:i,s=e.itemStyle,a=s===void 0?{}:s,l=e.labelStyle,d=l===void 0?{}:l,h=e.payload,p=e.formatter,g=e.itemSorter,v=e.wrapperClassName,x=e.labelClassName,b=e.label,w=e.labelFormatter,S=e.accessibilityLayer,C=S===void 0?!1:S,A=function(){if(h&&h.length){var le={padding:0,margin:0},pe=(g?D6(h,g):h).map(function(re,me){if(re.type==="none")return null;var he=dN({display:"block",paddingTop:4,paddingBottom:4,color:re.color||"#000"},a),we=re.formatter||p||PYe,ee=re.value,ye=re.name,be=ee,Le=ye;if(we&&be!=null&&Le!=null){var je=we(ee,ye,re,me,h);if(Array.isArray(je)){var dt=bYe(je,2);be=dt[0],Le=dt[1]}else be=je}return Ye.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(me),style:he},js(Le)?Ye.createElement("span",{className:"recharts-tooltip-item-name"},Le):null,js(Le)?Ye.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,Ye.createElement("span",{className:"recharts-tooltip-item-value"},be),Ye.createElement("span",{className:"recharts-tooltip-item-unit"},re.unit||""))});return Ye.createElement("ul",{className:"recharts-tooltip-item-list",style:le},pe)}return null},P=dN({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),k=dN({margin:0},d),F=!Qr(b),B=F?b:"",W=Wt("recharts-default-tooltip",v),J=Wt("recharts-tooltip-label",x);F&&w&&h!==void 0&&h!==null&&(B=w(b,h));var H=C?{role:"status","aria-live":"assertive"}:{};return Ye.createElement("div",GB({className:W,style:P},H),Ye.createElement("p",{className:J,style:k},Ye.isValidElement(B)?B:"".concat(B)),A())};function xM(t){"@babel/helpers - typeof";return xM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xM(t)}function LC(t,e,n){return e=RYe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RYe(t){var e=kYe(t,"string");return xM(e)=="symbol"?e:String(e)}function kYe(t,e){if(xM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(xM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xS="recharts-tooltip-wrapper",OYe={visibility:"hidden"};function LYe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return Wt(xS,LC(LC(LC(LC({},"".concat(xS,"-right"),Pn(n)&&e&&Pn(e.x)&&n>=e.x),"".concat(xS,"-left"),Pn(n)&&e&&Pn(e.x)&&n<e.x),"".concat(xS,"-bottom"),Pn(r)&&e&&Pn(e.y)&&r>=e.y),"".concat(xS,"-top"),Pn(r)&&e&&Pn(e.y)&&r<e.y))}function tX(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,o=t.position,s=t.reverseDirection,a=t.tooltipDimension,l=t.viewBox,d=t.viewBoxDimension;if(o&&Pn(o[r]))return o[r];var h=n[r]-a-i,p=n[r]+i;if(e[r])return s[r]?h:p;if(s[r]){var g=h,v=l[r];return g<v?Math.max(p,l[r]):Math.max(h,l[r])}var x=p+a,b=l[r]+d;return x>b?Math.max(h,l[r]):Math.max(p,l[r])}function DYe(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function NYe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,o=t.reverseDirection,s=t.tooltipBox,a=t.useTranslate3d,l=t.viewBox,d,h,p;return s.height>0&&s.width>0&&n?(h=tX({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),p=tX({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),d=DYe({translateX:h,translateY:p,useTranslate3d:a})):d=OYe,{cssProperties:d,cssClasses:LYe({translateX:h,translateY:p,coordinate:n})}}function a1(t){"@babel/helpers - typeof";return a1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a1(t)}function nX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nX(Object(n),!0).forEach(function(r){YB(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zYe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FYe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ple(r.key),r)}}function BYe(t,e,n){return e&&FYe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jYe(t,e,n){return e=BI(e),$Ye(t,fle()?Reflect.construct(e,n||[],BI(t).constructor):e.apply(t,n))}function $Ye(t,e){if(e&&(a1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qB(t)}function fle(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fle=function(){return!!t})()}function BI(t){return BI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},BI(t)}function qB(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function UYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XB(t,e)}function XB(t,e){return XB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},XB(t,e)}function YB(t,e,n){return e=ple(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ple(t){var e=VYe(t,"string");return a1(e)=="symbol"?e:String(e)}function VYe(t,e){if(a1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(a1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iX=1,HYe=function(t){UYe(e,t);function e(){var n;zYe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=jYe(this,e,[].concat(i)),YB(qB(n),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),YB(qB(n),"handleKeyDown",function(s){if(s.key==="Escape"){var a,l,d,h;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&a!==void 0?a:0,y:(d=(h=n.props.coordinate)===null||h===void 0?void 0:h.y)!==null&&d!==void 0?d:0}})}}),n}return BYe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>iX||Math.abs(r.height-this.state.lastBoundingBox.height)>iX)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,o=i.active,s=i.allowEscapeViewBox,a=i.animationDuration,l=i.animationEasing,d=i.children,h=i.coordinate,p=i.hasPayload,g=i.isAnimationActive,v=i.offset,x=i.position,b=i.reverseDirection,w=i.useTranslate3d,S=i.viewBox,C=i.wrapperStyle,A=NYe({allowEscapeViewBox:s,coordinate:h,offsetTopLeft:v,position:x,reverseDirection:b,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:S}),P=A.cssClasses,k=A.cssProperties,F=rX(rX({transition:g&&o?"transform ".concat(a,"ms ").concat(l):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&p?"visible":"hidden",position:"absolute",top:0,left:0},C);return Ye.createElement("div",{tabIndex:-1,className:P,style:F,ref:function(W){r.wrapperNode=W}},d)}}]),e}(V.PureComponent),WYe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},dm={isSsr:WYe(),get:function(e){return dm[e]},set:function(e,n){if(typeof e=="string")dm[e]=n;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(i){dm[i]=e[i]})}}};function l1(t){"@babel/helpers - typeof";return l1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l1(t)}function oX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oX(Object(n),!0).forEach(function(r){N6(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GYe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qYe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gle(r.key),r)}}function XYe(t,e,n){return e&&qYe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function YYe(t,e,n){return e=jI(e),KYe(t,mle()?Reflect.construct(e,n||[],jI(t).constructor):e.apply(t,n))}function KYe(t,e){if(e&&(l1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZYe(t)}function ZYe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mle(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mle=function(){return!!t})()}function jI(t){return jI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jI(t)}function JYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KB(t,e)}function KB(t,e){return KB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},KB(t,e)}function N6(t,e,n){return e=gle(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gle(t){var e=QYe(t,"string");return l1(e)=="symbol"?e:String(e)}function QYe(t,e){if(l1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(l1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eKe(t){return t.dataKey}function tKe(t,e){return Ye.isValidElement(t)?Ye.cloneElement(t,e):typeof t=="function"?Ye.createElement(t,e):Ye.createElement(IYe,e)}var wf=function(t){JYe(e,t);function e(){return GYe(this,e),YYe(this,e,arguments)}return XYe(e,[{key:"render",value:function(){var r=this,i=this.props,o=i.active,s=i.allowEscapeViewBox,a=i.animationDuration,l=i.animationEasing,d=i.content,h=i.coordinate,p=i.filterNull,g=i.isAnimationActive,v=i.offset,x=i.payload,b=i.payloadUniqBy,w=i.position,S=i.reverseDirection,C=i.useTranslate3d,A=i.viewBox,P=i.wrapperStyle,k=x??[];p&&k.length&&(k=ile(x.filter(function(B){return B.value!=null&&(B.hide!==!0||r.props.includeHidden)}),b,eKe));var F=k.length>0;return Ye.createElement(HYe,{allowEscapeViewBox:s,animationDuration:a,animationEasing:l,isAnimationActive:g,active:o,coordinate:h,hasPayload:F,offset:v,position:w,reverseDirection:S,useTranslate3d:C,viewBox:A,wrapperStyle:P},tKe(d,sX(sX({},this.props),{},{payload:k})))}}]),e}(V.PureComponent);N6(wf,"displayName","Tooltip");N6(wf,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!dm.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var nKe=rp,rKe=function(){return nKe.Date.now()},iKe=rKe,oKe=/\s/;function sKe(t){for(var e=t.length;e--&&oKe.test(t.charAt(e)););return e}var aKe=sKe,lKe=aKe,cKe=/^\s+/;function uKe(t){return t&&t.slice(0,lKe(t)+1).replace(cKe,"")}var dKe=uKe,hKe=dKe,aX=Hy,fKe=tw,lX=NaN,pKe=/^[-+]0x[0-9a-f]+$/i,mKe=/^0b[01]+$/i,gKe=/^0o[0-7]+$/i,yKe=parseInt;function vKe(t){if(typeof t=="number")return t;if(fKe(t))return lX;if(aX(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=aX(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=hKe(t);var n=mKe.test(t);return n||gKe.test(t)?yKe(t.slice(2),n?2:8):pKe.test(t)?lX:+t}var yle=vKe,_Ke=Hy,hN=iKe,cX=yle,xKe="Expected a function",bKe=Math.max,wKe=Math.min;function SKe(t,e,n){var r,i,o,s,a,l,d=0,h=!1,p=!1,g=!0;if(typeof t!="function")throw new TypeError(xKe);e=cX(e)||0,_Ke(n)&&(h=!!n.leading,p="maxWait"in n,o=p?bKe(cX(n.maxWait)||0,e):o,g="trailing"in n?!!n.trailing:g);function v(F){var B=r,W=i;return r=i=void 0,d=F,s=t.apply(W,B),s}function x(F){return d=F,a=setTimeout(S,e),h?v(F):s}function b(F){var B=F-l,W=F-d,J=e-B;return p?wKe(J,o-W):J}function w(F){var B=F-l,W=F-d;return l===void 0||B>=e||B<0||p&&W>=o}function S(){var F=hN();if(w(F))return C(F);a=setTimeout(S,b(F))}function C(F){return a=void 0,g&&r?v(F):(r=i=void 0,s)}function A(){a!==void 0&&clearTimeout(a),d=0,r=l=i=a=void 0}function P(){return a===void 0?s:C(hN())}function k(){var F=hN(),B=w(F);if(r=arguments,i=this,l=F,B){if(a===void 0)return x(l);if(p)return clearTimeout(a),a=setTimeout(S,e),v(l)}return a===void 0&&(a=setTimeout(S,e)),s}return k.cancel=A,k.flush=P,k}var MKe=SKe,EKe=MKe,TKe=Hy,CKe="Expected a function";function AKe(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(CKe);return TKe(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),EKe(t,e,{leading:r,maxWait:e,trailing:i})}var PKe=AKe;const vle=Mi(PKe);function bM(t){"@babel/helpers - typeof";return bM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bM(t)}function uX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function DC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uX(Object(n),!0).forEach(function(r){IKe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IKe(t,e,n){return e=RKe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RKe(t){var e=kKe(t,"string");return bM(e)=="symbol"?e:String(e)}function kKe(t,e){if(bM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(bM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function OKe(t,e){return zKe(t)||NKe(t,e)||DKe(t,e)||LKe()}function LKe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DKe(t,e){if(t){if(typeof t=="string")return dX(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dX(t,e)}}function dX(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function NKe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,d=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(h){d=!0,i=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return a}}function zKe(t){if(Array.isArray(t))return t}var FKe=V.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,o=t.width,s=o===void 0?"100%":o,a=t.height,l=a===void 0?"100%":a,d=t.minWidth,h=d===void 0?0:d,p=t.minHeight,g=t.maxHeight,v=t.children,x=t.debounce,b=x===void 0?0:x,w=t.id,S=t.className,C=t.onResize,A=t.style,P=A===void 0?{}:A,k=V.useRef(null),F=V.useRef();F.current=C,V.useImperativeHandle(e,function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})});var B=V.useState({containerWidth:i.width,containerHeight:i.height}),W=OKe(B,2),J=W[0],H=W[1],Y=V.useCallback(function(pe,re){H(function(me){var he=Math.round(pe),we=Math.round(re);return me.containerWidth===he&&me.containerHeight===we?me:{containerWidth:he,containerHeight:we}})},[]);V.useEffect(function(){var pe=function(ye){var be,Le=ye[0].contentRect,je=Le.width,dt=Le.height;Y(je,dt),(be=F.current)===null||be===void 0||be.call(F,je,dt)};b>0&&(pe=vle(pe,b,{trailing:!0,leading:!1}));var re=new ResizeObserver(pe),me=k.current.getBoundingClientRect(),he=me.width,we=me.height;return Y(he,we),re.observe(k.current),function(){re.disconnect()}},[Y,b]);var le=V.useMemo(function(){var pe=J.containerWidth,re=J.containerHeight;if(pe<0||re<0)return null;um(c0(s)||c0(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,l),um(!n||n>0,"The aspect(%s) must be greater than zero.",n);var me=c0(s)?pe:s,he=c0(l)?re:l;n&&n>0&&(me?he=me/n:he&&(me=he*n),g&&he>g&&(he=g)),um(me>0||he>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,me,he,s,l,h,p,n);var we=!Array.isArray(v)&&MB.isElement(v)&&cm(v.type).endsWith("Chart");return Ye.Children.map(v,function(ee){return MB.isElement(ee)?V.cloneElement(ee,DC({width:me,height:he},we?{style:DC({height:"100%",width:"100%",maxHeight:he,maxWidth:me},ee.props.style)}:{})):ee})},[n,v,l,g,p,h,J,s]);return Ye.createElement("div",{id:w?"".concat(w):void 0,className:Wt("recharts-responsive-container",S),style:DC(DC({},P),{},{width:s,height:l,minWidth:h,minHeight:p,maxHeight:g}),ref:k},le)}),_le=function(e){return null};_le.displayName="Cell";function wM(t){"@babel/helpers - typeof";return wM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wM(t)}function hX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ZB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hX(Object(n),!0).forEach(function(r){BKe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BKe(t,e,n){return e=jKe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jKe(t){var e=$Ke(t,"string");return wM(e)=="symbol"?e:String(e)}function $Ke(t,e){if(wM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(wM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sx={widthCache:{},cacheCount:0},UKe=2e3,VKe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},fX="recharts_measurement_span";function HKe(t){var e=ZB({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var S2=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||dm.isSsr)return{width:0,height:0};var r=HKe(n),i=JSON.stringify({text:e,copyStyle:r});if(sx.widthCache[i])return sx.widthCache[i];try{var o=document.getElementById(fX);o||(o=document.createElement("span"),o.setAttribute("id",fX),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var s=ZB(ZB({},VKe),r);Object.assign(o.style,s),o.textContent="".concat(e);var a=o.getBoundingClientRect(),l={width:a.width,height:a.height};return sx.widthCache[i]=l,++sx.cacheCount>UKe&&(sx.cacheCount=0,sx.widthCache={}),l}catch{return{width:0,height:0}}},WKe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function SM(t){"@babel/helpers - typeof";return SM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SM(t)}function $I(t,e){return YKe(t)||XKe(t,e)||qKe(t,e)||GKe()}function GKe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qKe(t,e){if(t){if(typeof t=="string")return pX(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pX(t,e)}}function pX(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function XKe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,d=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(h){d=!0,i=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return a}}function YKe(t){if(Array.isArray(t))return t}function KKe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,JKe(r.key),r)}}function ZKe(t,e,n){return e&&mX(t.prototype,e),n&&mX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function JKe(t){var e=QKe(t,"string");return SM(e)=="symbol"?e:String(e)}function QKe(t,e){if(SM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(SM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var gX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,yX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,eZe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,tZe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,xle={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},nZe=Object.keys(xle),sb="NaN";function rZe(t,e){return t*xle[e]}var NC=function(){function t(e,n){KKe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!eZe.test(n)&&(this.num=NaN,this.unit=""),nZe.includes(n)&&(this.num=rZe(e,n),this.unit="px")}return ZKe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=tZe.exec(n))!==null&&r!==void 0?r:[],o=$I(i,3),s=o[1],a=o[2];return new t(parseFloat(s),a??"")}}]),t}();function ble(t){if(t.includes(sb))return sb;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=gX.exec(e))!==null&&n!==void 0?n:[],i=$I(r,4),o=i[1],s=i[2],a=i[3],l=NC.parse(o??""),d=NC.parse(a??""),h=s==="*"?l.multiply(d):l.divide(d);if(h.isNaN())return sb;e=e.replace(gX,h.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var p,g=(p=yX.exec(e))!==null&&p!==void 0?p:[],v=$I(g,4),x=v[1],b=v[2],w=v[3],S=NC.parse(x??""),C=NC.parse(w??""),A=b==="+"?S.add(C):S.subtract(C);if(A.isNaN())return sb;e=e.replace(yX,A.toString())}return e}var vX=/\(([^()]*)\)/;function iZe(t){for(var e=t;e.includes("(");){var n=vX.exec(e),r=$I(n,2),i=r[1];e=e.replace(vX,ble(i))}return e}function oZe(t){var e=t.replace(/\s+/g,"");return e=iZe(e),e=ble(e),e}function sZe(t){try{return oZe(t)}catch{return sb}}function fN(t){var e=sZe(t.slice(5,-1));return e===sb?"":e}var aZe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],lZe=["dx","dy","angle","className","breakAll"];function JB(){return JB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JB.apply(this,arguments)}function _X(t,e){if(t==null)return{};var n=cZe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function cZe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function xX(t,e){return fZe(t)||hZe(t,e)||dZe(t,e)||uZe()}function uZe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dZe(t,e){if(t){if(typeof t=="string")return bX(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bX(t,e)}}function bX(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hZe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,d=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(h){d=!0,i=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return a}}function fZe(t){if(Array.isArray(t))return t}var wle=/[ \f\n\r\t\v\u2028\u2029]+/,Sle=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var o=[];Qr(n)||(r?o=n.toString().split(""):o=n.toString().split(wle));var s=o.map(function(l){return{word:l,width:S2(l,i).width}}),a=r?0:S2(" ",i).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}},pZe=function(e,n,r,i,o){var s=e.maxLines,a=e.children,l=e.style,d=e.breakAll,h=Pn(s),p=a,g=function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return me.reduce(function(he,we){var ee=we.word,ye=we.width,be=he[he.length-1];if(be&&(i==null||o||be.width+ye+r<Number(i)))be.words.push(ee),be.width+=ye+r;else{var Le={words:[ee],width:ye};he.push(Le)}return he},[])},v=g(n),x=function(me){return me.reduce(function(he,we){return he.width>we.width?he:we})};if(!h)return v;for(var b="…",w=function(me){var he=p.slice(0,me),we=Sle({breakAll:d,style:l,children:he+b}).wordsWithComputedWidth,ee=g(we),ye=ee.length>s||x(ee).width>Number(i);return[ye,ee]},S=0,C=p.length-1,A=0,P;S<=C&&A<=p.length-1;){var k=Math.floor((S+C)/2),F=k-1,B=w(F),W=xX(B,2),J=W[0],H=W[1],Y=w(k),le=xX(Y,1),pe=le[0];if(!J&&!pe&&(S=k+1),J&&pe&&(C=k-1),!J&&pe){P=H;break}A++}return P||v},wX=function(e){var n=Qr(e)?[]:e.toString().split(wle);return[{words:n}]},mZe=function(e){var n=e.width,r=e.scaleToFit,i=e.children,o=e.style,s=e.breakAll,a=e.maxLines;if((n||r)&&!dm.isSsr){var l,d,h=Sle({breakAll:s,children:i,style:o});if(h){var p=h.wordsWithComputedWidth,g=h.spaceWidth;l=p,d=g}else return wX(i);return pZe({breakAll:s,children:i,maxLines:a,style:o},l,d,n,r)}return wX(i)},SX="#808080",UI=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,s=e.lineHeight,a=s===void 0?"1em":s,l=e.capHeight,d=l===void 0?"0.71em":l,h=e.scaleToFit,p=h===void 0?!1:h,g=e.textAnchor,v=g===void 0?"start":g,x=e.verticalAnchor,b=x===void 0?"end":x,w=e.fill,S=w===void 0?SX:w,C=_X(e,aZe),A=V.useMemo(function(){return mZe({breakAll:C.breakAll,children:C.children,maxLines:C.maxLines,scaleToFit:p,style:C.style,width:C.width})},[C.breakAll,C.children,C.maxLines,p,C.style,C.width]),P=C.dx,k=C.dy,F=C.angle,B=C.className,W=C.breakAll,J=_X(C,lZe);if(!js(r)||!js(o))return null;var H=r+(Pn(P)?P:0),Y=o+(Pn(k)?k:0),le;switch(b){case"start":le=fN("calc(".concat(d,")"));break;case"middle":le=fN("calc(".concat((A.length-1)/2," * -").concat(a," + (").concat(d," / 2))"));break;default:le=fN("calc(".concat(A.length-1," * -").concat(a,")"));break}var pe=[];if(p){var re=A[0].width,me=C.width;pe.push("scale(".concat((Pn(me)?me/re:1)/re,")"))}return F&&pe.push("rotate(".concat(F,", ").concat(H,", ").concat(Y,")")),pe.length&&(J.transform=pe.join(" ")),Ye.createElement("text",JB({},ii(J,!0),{x:H,y:Y,className:Wt("recharts-text",B),textAnchor:v,fill:S.includes("url")?SX:S}),A.map(function(he,we){var ee=he.words.join(W?"":" ");return Ye.createElement("tspan",{x:H,dy:we===0?le:a,key:ee},ee)}))};function by(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function gZe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Mle(t){let e,n,r;t.length!==2?(e=by,n=(a,l)=>by(t(a),l),r=(a,l)=>t(a)-l):(e=t===by||t===gZe?t:yZe,n=t,r=t);function i(a,l,d=0,h=a.length){if(d<h){if(e(l,l)!==0)return h;do{const p=d+h>>>1;n(a[p],l)<0?d=p+1:h=p}while(d<h)}return d}function o(a,l,d=0,h=a.length){if(d<h){if(e(l,l)!==0)return h;do{const p=d+h>>>1;n(a[p],l)<=0?d=p+1:h=p}while(d<h)}return d}function s(a,l,d=0,h=a.length){const p=i(a,l,d,h-1);return p>d&&r(a[p-1],l)>-r(a[p],l)?p-1:p}return{left:i,center:s,right:o}}function yZe(){return 0}function Ele(t){return t===null?NaN:+t}function*vZe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const _Ze=Mle(by),eT=_Ze.right;Mle(Ele).center;class MX extends Map{constructor(e,n=wZe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(EX(this,e))}has(e){return super.has(EX(this,e))}set(e,n){return super.set(xZe(this,e),n)}delete(e){return super.delete(bZe(this,e))}}function EX({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function xZe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function bZe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function wZe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function SZe(t=by){if(t===by)return Tle;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Tle(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const MZe=Math.sqrt(50),EZe=Math.sqrt(10),TZe=Math.sqrt(2);function VI(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=MZe?10:o>=EZe?5:o>=TZe?2:1;let a,l,d;return i<0?(d=Math.pow(10,-i)/s,a=Math.round(t*d),l=Math.round(e*d),a/d<t&&++a,l/d>e&&--l,d=-d):(d=Math.pow(10,i)*s,a=Math.round(t/d),l=Math.round(e/d),a*d<t&&++a,l*d>e&&--l),l<a&&.5<=n&&n<2?VI(t,e,n*2):[a,l,d]}function QB(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,s]=r?VI(e,t,n):VI(t,e,n);if(!(o>=i))return[];const a=o-i+1,l=new Array(a);if(r)if(s<0)for(let d=0;d<a;++d)l[d]=(o-d)/-s;else for(let d=0;d<a;++d)l[d]=(o-d)*s;else if(s<0)for(let d=0;d<a;++d)l[d]=(i+d)/-s;else for(let d=0;d<a;++d)l[d]=(i+d)*s;return l}function e4(t,e,n){return e=+e,t=+t,n=+n,VI(t,e,n)[2]}function CZe(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?e4(e,t,n):e4(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function TX(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function CX(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function Cle(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?Tle:SZe(i);r>n;){if(r-n>600){const l=r-n+1,d=e-n+1,h=Math.log(l),p=.5*Math.exp(2*h/3),g=.5*Math.sqrt(h*p*(l-p)/l)*(d-l/2<0?-1:1),v=Math.max(n,Math.floor(e-d*p/l+g)),x=Math.min(r,Math.floor(e+(l-d)*p/l+g));Cle(t,e,v,x,i)}const o=t[e];let s=n,a=r;for(bS(t,n,e),i(t[r],o)>0&&bS(t,n,r);s<a;){for(bS(t,s,a),++s,--a;i(t[s],o)<0;)++s;for(;i(t[a],o)>0;)--a}i(t[n],o)===0?bS(t,n,a):(++a,bS(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function bS(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function AZe(t,e,n){if(t=Float64Array.from(vZe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return CX(t);if(e>=1)return TX(t);var r,i=(r-1)*e,o=Math.floor(i),s=TX(Cle(t,o).subarray(0,o+1)),a=CX(t.subarray(o+1));return s+(a-s)*(i-o)}}function PZe(t,e,n=Ele){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),s=+n(t[o],o,t),a=+n(t[o+1],o+1,t);return s+(a-s)*(i-o)}}function IZe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function Nd(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Nm(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const t4=Symbol("implicit");function z6(){var t=new MX,e=[],n=[],r=t4;function i(o){let s=t.get(o);if(s===void 0){if(r!==t4)return r;t.set(o,s=e.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new MX;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return z6(e,n).unknown(r)},Nd.apply(i,arguments),i}function MM(){var t=z6().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,s,a=!1,l=0,d=0,h=.5;delete t.unknown;function p(){var g=e().length,v=i<r,x=v?i:r,b=v?r:i;o=(b-x)/Math.max(1,g-l+d*2),a&&(o=Math.floor(o)),x+=(b-x-o*(g-l))*h,s=o*(1-l),a&&(x=Math.round(x),s=Math.round(s));var w=IZe(g).map(function(S){return x+o*S});return n(v?w.reverse():w)}return t.domain=function(g){return arguments.length?(e(g),p()):e()},t.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,p()):[r,i]},t.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,a=!0,p()},t.bandwidth=function(){return s},t.step=function(){return o},t.round=function(g){return arguments.length?(a=!!g,p()):a},t.padding=function(g){return arguments.length?(l=Math.min(1,d=+g),p()):l},t.paddingInner=function(g){return arguments.length?(l=Math.min(1,g),p()):l},t.paddingOuter=function(g){return arguments.length?(d=+g,p()):d},t.align=function(g){return arguments.length?(h=Math.max(0,Math.min(1,g)),p()):h},t.copy=function(){return MM(e(),[r,i]).round(a).paddingInner(l).paddingOuter(d).align(h)},Nd.apply(p(),arguments)}function Ale(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Ale(e())},t}function M2(){return Ale(MM.apply(null,arguments).paddingInner(1))}function F6(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ple(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function tT(){}var EM=.7,HI=1/EM,Ab="\\s*([+-]?\\d+)\\s*",TM="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",RZe=/^#([0-9a-f]{3,8})$/,kZe=new RegExp(`^rgb\\(${Ab},${Ab},${Ab}\\)$`),OZe=new RegExp(`^rgb\\(${Bf},${Bf},${Bf}\\)$`),LZe=new RegExp(`^rgba\\(${Ab},${Ab},${Ab},${TM}\\)$`),DZe=new RegExp(`^rgba\\(${Bf},${Bf},${Bf},${TM}\\)$`),NZe=new RegExp(`^hsl\\(${TM},${Bf},${Bf}\\)$`),zZe=new RegExp(`^hsla\\(${TM},${Bf},${Bf},${TM}\\)$`),AX={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};F6(tT,CM,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:PX,formatHex:PX,formatHex8:FZe,formatHsl:BZe,formatRgb:IX,toString:IX});function PX(){return this.rgb().formatHex()}function FZe(){return this.rgb().formatHex8()}function BZe(){return Ile(this).formatHsl()}function IX(){return this.rgb().formatRgb()}function CM(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=RZe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?RX(e):n===3?new bc(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?zC(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?zC(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=kZe.exec(t))?new bc(e[1],e[2],e[3],1):(e=OZe.exec(t))?new bc(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=LZe.exec(t))?zC(e[1],e[2],e[3],e[4]):(e=DZe.exec(t))?zC(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=NZe.exec(t))?LX(e[1],e[2]/100,e[3]/100,1):(e=zZe.exec(t))?LX(e[1],e[2]/100,e[3]/100,e[4]):AX.hasOwnProperty(t)?RX(AX[t]):t==="transparent"?new bc(NaN,NaN,NaN,0):null}function RX(t){return new bc(t>>16&255,t>>8&255,t&255,1)}function zC(t,e,n,r){return r<=0&&(t=e=n=NaN),new bc(t,e,n,r)}function jZe(t){return t instanceof tT||(t=CM(t)),t?(t=t.rgb(),new bc(t.r,t.g,t.b,t.opacity)):new bc}function n4(t,e,n,r){return arguments.length===1?jZe(t):new bc(t,e,n,r??1)}function bc(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}F6(bc,n4,Ple(tT,{brighter(t){return t=t==null?HI:Math.pow(HI,t),new bc(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?EM:Math.pow(EM,t),new bc(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new bc(E0(this.r),E0(this.g),E0(this.b),WI(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kX,formatHex:kX,formatHex8:$Ze,formatRgb:OX,toString:OX}));function kX(){return`#${u0(this.r)}${u0(this.g)}${u0(this.b)}`}function $Ze(){return`#${u0(this.r)}${u0(this.g)}${u0(this.b)}${u0((isNaN(this.opacity)?1:this.opacity)*255)}`}function OX(){const t=WI(this.opacity);return`${t===1?"rgb(":"rgba("}${E0(this.r)}, ${E0(this.g)}, ${E0(this.b)}${t===1?")":`, ${t})`}`}function WI(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function E0(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function u0(t){return t=E0(t),(t<16?"0":"")+t.toString(16)}function LX(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new bh(t,e,n,r)}function Ile(t){if(t instanceof bh)return new bh(t.h,t.s,t.l,t.opacity);if(t instanceof tT||(t=CM(t)),!t)return new bh;if(t instanceof bh)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new bh(s,a,l,t.opacity)}function UZe(t,e,n,r){return arguments.length===1?Ile(t):new bh(t,e,n,r??1)}function bh(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}F6(bh,UZe,Ple(tT,{brighter(t){return t=t==null?HI:Math.pow(HI,t),new bh(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?EM:Math.pow(EM,t),new bh(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new bc(pN(t>=240?t-240:t+120,i,r),pN(t,i,r),pN(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new bh(DX(this.h),FC(this.s),FC(this.l),WI(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=WI(this.opacity);return`${t===1?"hsl(":"hsla("}${DX(this.h)}, ${FC(this.s)*100}%, ${FC(this.l)*100}%${t===1?")":`, ${t})`}`}}));function DX(t){return t=(t||0)%360,t<0?t+360:t}function FC(t){return Math.max(0,Math.min(1,t||0))}function pN(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const B6=t=>()=>t;function VZe(t,e){return function(n){return t+n*e}}function HZe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function WZe(t){return(t=+t)==1?Rle:function(e,n){return n-e?HZe(e,n,t):B6(isNaN(e)?n:e)}}function Rle(t,e){var n=e-t;return n?VZe(t,n):B6(isNaN(t)?e:t)}const NX=function t(e){var n=WZe(e);function r(i,o){var s=n((i=n4(i)).r,(o=n4(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),d=Rle(i.opacity,o.opacity);return function(h){return i.r=s(h),i.g=a(h),i.b=l(h),i.opacity=d(h),i+""}}return r.gamma=t,r}(1);function GZe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function qZe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function XZe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=cw(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function YZe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function GI(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function KZe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=cw(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var r4=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mN=new RegExp(r4.source,"g");function ZZe(t){return function(){return t}}function JZe(t){return function(e){return t(e)+""}}function QZe(t,e){var n=r4.lastIndex=mN.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(t=t+"",e=e+"";(r=r4.exec(t))&&(i=mN.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:GI(r,i)})),n=mN.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?JZe(l[0].x):ZZe(e):(e=l.length,function(d){for(var h=0,p;h<e;++h)a[(p=l[h]).i]=p.x(d);return a.join("")})}function cw(t,e){var n=typeof e,r;return e==null||n==="boolean"?B6(e):(n==="number"?GI:n==="string"?(r=CM(e))?(e=r,NX):QZe:e instanceof CM?NX:e instanceof Date?YZe:qZe(e)?GZe:Array.isArray(e)?XZe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?KZe:GI)(t,e)}function j6(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function eJe(t,e){e===void 0&&(e=t,t=cw);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function tJe(t){return function(){return t}}function qI(t){return+t}var zX=[0,1];function Xl(t){return t}function i4(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:tJe(isNaN(e)?NaN:.5)}function nJe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function rJe(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=i4(i,r),o=n(s,o)):(r=i4(r,i),o=n(o,s)),function(a){return o(r(a))}}function iJe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=i4(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(a){var l=eT(t,a,1,r)-1;return o[l](i[l](a))}}function nT(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function XO(){var t=zX,e=zX,n=cw,r,i,o,s=Xl,a,l,d;function h(){var g=Math.min(t.length,e.length);return s!==Xl&&(s=nJe(t[0],t[g-1])),a=g>2?iJe:rJe,l=d=null,p}function p(g){return g==null||isNaN(g=+g)?o:(l||(l=a(t.map(r),e,n)))(r(s(g)))}return p.invert=function(g){return s(i((d||(d=a(e,t.map(r),GI)))(g)))},p.domain=function(g){return arguments.length?(t=Array.from(g,qI),h()):t.slice()},p.range=function(g){return arguments.length?(e=Array.from(g),h()):e.slice()},p.rangeRound=function(g){return e=Array.from(g),n=j6,h()},p.clamp=function(g){return arguments.length?(s=g?!0:Xl,h()):s!==Xl},p.interpolate=function(g){return arguments.length?(n=g,h()):n},p.unknown=function(g){return arguments.length?(o=g,p):o},function(g,v){return r=g,i=v,h()}}function $6(){return XO()(Xl,Xl)}function oJe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function XI(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function c1(t){return t=XI(Math.abs(t)),t?t[1]:NaN}function sJe(t,e){return function(n,r){for(var i=n.length,o=[],s=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}function aJe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var lJe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function AM(t){if(!(e=lJe.exec(t)))throw new Error("invalid format: "+t);var e;return new U6({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}AM.prototype=U6.prototype;function U6(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}U6.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function cJe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var kle;function uJe(t,e){var n=XI(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(kle=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+XI(t,Math.max(0,e+o-1))[0]}function FX(t,e){var n=XI(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const BX={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:oJe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>FX(t*100,e),r:FX,s:uJe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function jX(t){return t}var $X=Array.prototype.map,UX=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function dJe(t){var e=t.grouping===void 0||t.thousands===void 0?jX:sJe($X.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?jX:aJe($X.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function d(p){p=AM(p);var g=p.fill,v=p.align,x=p.sign,b=p.symbol,w=p.zero,S=p.width,C=p.comma,A=p.precision,P=p.trim,k=p.type;k==="n"?(C=!0,k="g"):BX[k]||(A===void 0&&(A=12),P=!0,k="g"),(w||g==="0"&&v==="=")&&(w=!0,g="0",v="=");var F=b==="$"?n:b==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",B=b==="$"?r:/[%p]/.test(k)?s:"",W=BX[k],J=/[defgprs%]/.test(k);A=A===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function H(Y){var le=F,pe=B,re,me,he;if(k==="c")pe=W(Y)+pe,Y="";else{Y=+Y;var we=Y<0||1/Y<0;if(Y=isNaN(Y)?l:W(Math.abs(Y),A),P&&(Y=cJe(Y)),we&&+Y==0&&x!=="+"&&(we=!1),le=(we?x==="("?x:a:x==="-"||x==="("?"":x)+le,pe=(k==="s"?UX[8+kle/3]:"")+pe+(we&&x==="("?")":""),J){for(re=-1,me=Y.length;++re<me;)if(he=Y.charCodeAt(re),48>he||he>57){pe=(he===46?i+Y.slice(re+1):Y.slice(re))+pe,Y=Y.slice(0,re);break}}}C&&!w&&(Y=e(Y,1/0));var ee=le.length+Y.length+pe.length,ye=ee<S?new Array(S-ee+1).join(g):"";switch(C&&w&&(Y=e(ye+Y,ye.length?S-pe.length:1/0),ye=""),v){case"<":Y=le+Y+pe+ye;break;case"=":Y=le+ye+Y+pe;break;case"^":Y=ye.slice(0,ee=ye.length>>1)+le+Y+pe+ye.slice(ee);break;default:Y=ye+le+Y+pe;break}return o(Y)}return H.toString=function(){return p+""},H}function h(p,g){var v=d((p=AM(p),p.type="f",p)),x=Math.max(-8,Math.min(8,Math.floor(c1(g)/3)))*3,b=Math.pow(10,-x),w=UX[8+x/3];return function(S){return v(b*S)+w}}return{format:d,formatPrefix:h}}var BC,V6,Ole;hJe({thousands:",",grouping:[3],currency:["$",""]});function hJe(t){return BC=dJe(t),V6=BC.format,Ole=BC.formatPrefix,BC}function fJe(t){return Math.max(0,-c1(Math.abs(t)))}function pJe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(c1(e)/3)))*3-c1(Math.abs(t)))}function mJe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,c1(e)-c1(t))+1}function Lle(t,e,n,r){var i=CZe(t,e,n),o;switch(r=AM(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=pJe(i,s))&&(r.precision=o),Ole(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=mJe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=fJe(i))&&(r.precision=o-(r.type==="%")*2);break}}return V6(r)}function Gy(t){var e=t.domain;return t.ticks=function(n){var r=e();return QB(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Lle(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,s=r[i],a=r[o],l,d,h=10;for(a<s&&(d=s,s=a,a=d,d=i,i=o,o=d);h-- >0;){if(d=e4(s,a,n),d===l)return r[i]=s,r[o]=a,e(r);if(d>0)s=Math.floor(s/d)*d,a=Math.ceil(a/d)*d;else if(d<0)s=Math.ceil(s*d)/d,a=Math.floor(a*d)/d;else break;l=d}return t},t}function YI(){var t=$6();return t.copy=function(){return nT(t,YI())},Nd.apply(t,arguments),Gy(t)}function Dle(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,qI),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return Dle(t).unknown(e)},t=arguments.length?Array.from(t,qI):[0,1],Gy(n)}function Nle(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),t[n]=e.floor(i),t[r]=e.ceil(o),t}function VX(t){return Math.log(t)}function HX(t){return Math.exp(t)}function gJe(t){return-Math.log(-t)}function yJe(t){return-Math.exp(-t)}function vJe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function _Je(t){return t===10?vJe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function xJe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function WX(t){return(e,n)=>-t(-e,n)}function H6(t){const e=t(VX,HX),n=e.domain;let r=10,i,o;function s(){return i=xJe(r),o=_Je(r),n()[0]<0?(i=WX(i),o=WX(o),t(gJe,yJe)):t(VX,HX),e}return e.base=function(a){return arguments.length?(r=+a,s()):r},e.domain=function(a){return arguments.length?(n(a),s()):n()},e.ticks=a=>{const l=n();let d=l[0],h=l[l.length-1];const p=h<d;p&&([d,h]=[h,d]);let g=i(d),v=i(h),x,b;const w=a==null?10:+a;let S=[];if(!(r%1)&&v-g<w){if(g=Math.floor(g),v=Math.ceil(v),d>0){for(;g<=v;++g)for(x=1;x<r;++x)if(b=g<0?x/o(-g):x*o(g),!(b<d)){if(b>h)break;S.push(b)}}else for(;g<=v;++g)for(x=r-1;x>=1;--x)if(b=g>0?x/o(-g):x*o(g),!(b<d)){if(b>h)break;S.push(b)}S.length*2<w&&(S=QB(d,h,w))}else S=QB(g,v,Math.min(v-g,w)).map(o);return p?S.reverse():S},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=AM(l)).precision==null&&(l.trim=!0),l=V6(l)),a===1/0)return l;const d=Math.max(1,r*a/e.ticks().length);return h=>{let p=h/o(Math.round(i(h)));return p*r<r-.5&&(p*=r),p<=d?l(h):""}},e.nice=()=>n(Nle(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),e}function zle(){const t=H6(XO()).domain([1,10]);return t.copy=()=>nT(t,zle()).base(t.base()),Nd.apply(t,arguments),t}function GX(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function qX(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function W6(t){var e=1,n=t(GX(e),qX(e));return n.constant=function(r){return arguments.length?t(GX(e=+r),qX(e)):e},Gy(n)}function Fle(){var t=W6(XO());return t.copy=function(){return nT(t,Fle()).constant(t.constant())},Nd.apply(t,arguments)}function XX(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function bJe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function wJe(t){return t<0?-t*t:t*t}function G6(t){var e=t(Xl,Xl),n=1;function r(){return n===1?t(Xl,Xl):n===.5?t(bJe,wJe):t(XX(n),XX(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Gy(e)}function q6(){var t=G6(XO());return t.copy=function(){return nT(t,q6()).exponent(t.exponent())},Nd.apply(t,arguments),t}function SJe(){return q6.apply(null,arguments).exponent(.5)}function YX(t){return Math.sign(t)*t*t}function MJe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Ble(){var t=$6(),e=[0,1],n=!1,r;function i(o){var s=MJe(t(o));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(o){return t.invert(YX(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,qI)).map(YX)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Ble(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Nd.apply(i,arguments),Gy(i)}function jle(){var t=[],e=[],n=[],r;function i(){var s=0,a=Math.max(1,e.length);for(n=new Array(a-1);++s<a;)n[s-1]=PZe(t,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:e[eT(n,s)]}return o.invertExtent=function(s){var a=e.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},o.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let a of s)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(by),i()},o.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return jle().domain(t).range(e).unknown(r)},Nd.apply(o,arguments)}function $le(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function s(l){return l!=null&&l<=l?i[eT(r,l,0,n)]:o}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return s}return s.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},s.invertExtent=function(l){var d=i.indexOf(l);return d<0?[NaN,NaN]:d<1?[t,r[0]]:d>=n?[r[n-1],e]:[r[d-1],r[d]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return $le().domain([t,e]).range(i).unknown(o)},Nd.apply(Gy(s),arguments)}function Ule(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[eT(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var s=e.indexOf(o);return[t[s-1],t[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return Ule().domain(t).range(e).unknown(n)},Nd.apply(i,arguments)}const gN=new Date,yN=new Date;function Hs(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(e(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const l=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;let d;do l.push(d=new Date(+o)),e(o,a),t(o);while(d<o&&o<s);return l},i.filter=o=>Hs(s=>{if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;e(s,-1),!o(s););else for(;--a>=0;)for(;e(s,1),!o(s););}),n&&(i.count=(o,s)=>(gN.setTime(+o),yN.setTime(+s),t(gN),t(yN),Math.floor(n(gN,yN))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const KI=Hs(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);KI.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Hs(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):KI);KI.range;const tm=1e3,gd=tm*60,nm=gd*60,Sm=nm*24,X6=Sm*7,KX=Sm*30,vN=Sm*365,d0=Hs(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*tm)},(t,e)=>(e-t)/tm,t=>t.getUTCSeconds());d0.range;const Y6=Hs(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*tm)},(t,e)=>{t.setTime(+t+e*gd)},(t,e)=>(e-t)/gd,t=>t.getMinutes());Y6.range;const K6=Hs(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*gd)},(t,e)=>(e-t)/gd,t=>t.getUTCMinutes());K6.range;const Z6=Hs(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*tm-t.getMinutes()*gd)},(t,e)=>{t.setTime(+t+e*nm)},(t,e)=>(e-t)/nm,t=>t.getHours());Z6.range;const J6=Hs(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*nm)},(t,e)=>(e-t)/nm,t=>t.getUTCHours());J6.range;const rT=Hs(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*gd)/Sm,t=>t.getDate()-1);rT.range;const YO=Hs(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Sm,t=>t.getUTCDate()-1);YO.range;const Vle=Hs(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Sm,t=>Math.floor(t/Sm));Vle.range;function f_(t){return Hs(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*gd)/X6)}const KO=f_(0),ZI=f_(1),EJe=f_(2),TJe=f_(3),u1=f_(4),CJe=f_(5),AJe=f_(6);KO.range;ZI.range;EJe.range;TJe.range;u1.range;CJe.range;AJe.range;function p_(t){return Hs(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/X6)}const ZO=p_(0),JI=p_(1),PJe=p_(2),IJe=p_(3),d1=p_(4),RJe=p_(5),kJe=p_(6);ZO.range;JI.range;PJe.range;IJe.range;d1.range;RJe.range;kJe.range;const Q6=Hs(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Q6.range;const e8=Hs(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());e8.range;const Mm=Hs(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Mm.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Hs(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Mm.range;const Em=Hs(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Em.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Hs(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Em.range;function _N(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function OJe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function LJe(t){let e,n,r;t.length!==2?(e=_N,n=(a,l)=>_N(t(a),l),r=(a,l)=>t(a)-l):(e=t===_N||t===OJe?t:DJe,n=t,r=t);function i(a,l,d=0,h=a.length){if(d<h){if(e(l,l)!==0)return h;do{const p=d+h>>>1;n(a[p],l)<0?d=p+1:h=p}while(d<h)}return d}function o(a,l,d=0,h=a.length){if(d<h){if(e(l,l)!==0)return h;do{const p=d+h>>>1;n(a[p],l)<=0?d=p+1:h=p}while(d<h)}return d}function s(a,l,d=0,h=a.length){const p=i(a,l,d,h-1);return p>d&&r(a[p-1],l)>-r(a[p],l)?p-1:p}return{left:i,center:s,right:o}}function DJe(){return 0}const NJe=Math.sqrt(50),zJe=Math.sqrt(10),FJe=Math.sqrt(2);function Hle(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=NJe?10:o>=zJe?5:o>=FJe?2:1;let a,l,d;return i<0?(d=Math.pow(10,-i)/s,a=Math.round(t*d),l=Math.round(e*d),a/d<t&&++a,l/d>e&&--l,d=-d):(d=Math.pow(10,i)*s,a=Math.round(t/d),l=Math.round(e/d),a*d<t&&++a,l*d>e&&--l),l<a&&.5<=n&&n<2?Hle(t,e,n*2):[a,l,d]}function ZX(t,e,n){return e=+e,t=+t,n=+n,Hle(t,e,n)[2]}function JX(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?ZX(e,t,n):ZX(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Wle(t,e,n,r,i,o){const s=[[d0,1,tm],[d0,5,5*tm],[d0,15,15*tm],[d0,30,30*tm],[o,1,gd],[o,5,5*gd],[o,15,15*gd],[o,30,30*gd],[i,1,nm],[i,3,3*nm],[i,6,6*nm],[i,12,12*nm],[r,1,Sm],[r,2,2*Sm],[n,1,X6],[e,1,KX],[e,3,3*KX],[t,1,vN]];function a(d,h,p){const g=h<d;g&&([d,h]=[h,d]);const v=p&&typeof p.range=="function"?p:l(d,h,p),x=v?v.range(d,+h+1):[];return g?x.reverse():x}function l(d,h,p){const g=Math.abs(h-d)/p,v=LJe(([,,w])=>w).right(s,g);if(v===s.length)return t.every(JX(d/vN,h/vN,p));if(v===0)return KI.every(Math.max(JX(d,h,p),1));const[x,b]=s[g/s[v-1][2]<s[v][2]/g?v-1:v];return x.every(b)}return[a,l]}const[BJe,jJe]=Wle(Em,e8,ZO,Vle,J6,K6),[$Je,UJe]=Wle(Mm,Q6,KO,rT,Z6,Y6);function xN(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function bN(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function wS(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function VJe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,s=t.shortDays,a=t.months,l=t.shortMonths,d=SS(i),h=MS(i),p=SS(o),g=MS(o),v=SS(s),x=MS(s),b=SS(a),w=MS(a),S=SS(l),C=MS(l),A={a:we,A:ee,b:ye,B:be,c:null,d:iY,e:iY,f:hQe,g:wQe,G:MQe,H:cQe,I:uQe,j:dQe,L:Gle,m:fQe,M:pQe,p:Le,q:je,Q:aY,s:lY,S:mQe,u:gQe,U:yQe,V:vQe,w:_Qe,W:xQe,x:null,X:null,y:bQe,Y:SQe,Z:EQe,"%":sY},P={a:dt,A:Be,b:ot,B:at,c:null,d:oY,e:oY,f:PQe,g:BQe,G:$Qe,H:TQe,I:CQe,j:AQe,L:Xle,m:IQe,M:RQe,p:It,q:Lt,Q:aY,s:lY,S:kQe,u:OQe,U:LQe,V:DQe,w:NQe,W:zQe,x:null,X:null,y:FQe,Y:jQe,Z:UQe,"%":sY},k={a:H,A:Y,b:le,B:pe,c:re,d:nY,e:nY,f:oQe,g:tY,G:eY,H:rY,I:rY,j:tQe,L:iQe,m:eQe,M:nQe,p:J,q:QJe,Q:aQe,s:lQe,S:rQe,u:XJe,U:YJe,V:KJe,w:qJe,W:ZJe,x:me,X:he,y:tY,Y:eY,Z:JJe,"%":sQe};A.x=F(n,A),A.X=F(r,A),A.c=F(e,A),P.x=F(n,P),P.X=F(r,P),P.c=F(e,P);function F(lt,Je){return function(Qe){var ge=[],et=-1,Ke=0,Tt=lt.length,ke,Vt,zt;for(Qe instanceof Date||(Qe=new Date(+Qe));++et<Tt;)lt.charCodeAt(et)===37&&(ge.push(lt.slice(Ke,et)),(Vt=QX[ke=lt.charAt(++et)])!=null?ke=lt.charAt(++et):Vt=ke==="e"?" ":"0",(zt=Je[ke])&&(ke=zt(Qe,Vt)),ge.push(ke),Ke=et+1);return ge.push(lt.slice(Ke,et)),ge.join("")}}function B(lt,Je){return function(Qe){var ge=wS(1900,void 0,1),et=W(ge,lt,Qe+="",0),Ke,Tt;if(et!=Qe.length)return null;if("Q"in ge)return new Date(ge.Q);if("s"in ge)return new Date(ge.s*1e3+("L"in ge?ge.L:0));if(Je&&!("Z"in ge)&&(ge.Z=0),"p"in ge&&(ge.H=ge.H%12+ge.p*12),ge.m===void 0&&(ge.m="q"in ge?ge.q:0),"V"in ge){if(ge.V<1||ge.V>53)return null;"w"in ge||(ge.w=1),"Z"in ge?(Ke=bN(wS(ge.y,0,1)),Tt=Ke.getUTCDay(),Ke=Tt>4||Tt===0?JI.ceil(Ke):JI(Ke),Ke=YO.offset(Ke,(ge.V-1)*7),ge.y=Ke.getUTCFullYear(),ge.m=Ke.getUTCMonth(),ge.d=Ke.getUTCDate()+(ge.w+6)%7):(Ke=xN(wS(ge.y,0,1)),Tt=Ke.getDay(),Ke=Tt>4||Tt===0?ZI.ceil(Ke):ZI(Ke),Ke=rT.offset(Ke,(ge.V-1)*7),ge.y=Ke.getFullYear(),ge.m=Ke.getMonth(),ge.d=Ke.getDate()+(ge.w+6)%7)}else("W"in ge||"U"in ge)&&("w"in ge||(ge.w="u"in ge?ge.u%7:"W"in ge?1:0),Tt="Z"in ge?bN(wS(ge.y,0,1)).getUTCDay():xN(wS(ge.y,0,1)).getDay(),ge.m=0,ge.d="W"in ge?(ge.w+6)%7+ge.W*7-(Tt+5)%7:ge.w+ge.U*7-(Tt+6)%7);return"Z"in ge?(ge.H+=ge.Z/100|0,ge.M+=ge.Z%100,bN(ge)):xN(ge)}}function W(lt,Je,Qe,ge){for(var et=0,Ke=Je.length,Tt=Qe.length,ke,Vt;et<Ke;){if(ge>=Tt)return-1;if(ke=Je.charCodeAt(et++),ke===37){if(ke=Je.charAt(et++),Vt=k[ke in QX?Je.charAt(et++):ke],!Vt||(ge=Vt(lt,Qe,ge))<0)return-1}else if(ke!=Qe.charCodeAt(ge++))return-1}return ge}function J(lt,Je,Qe){var ge=d.exec(Je.slice(Qe));return ge?(lt.p=h.get(ge[0].toLowerCase()),Qe+ge[0].length):-1}function H(lt,Je,Qe){var ge=v.exec(Je.slice(Qe));return ge?(lt.w=x.get(ge[0].toLowerCase()),Qe+ge[0].length):-1}function Y(lt,Je,Qe){var ge=p.exec(Je.slice(Qe));return ge?(lt.w=g.get(ge[0].toLowerCase()),Qe+ge[0].length):-1}function le(lt,Je,Qe){var ge=S.exec(Je.slice(Qe));return ge?(lt.m=C.get(ge[0].toLowerCase()),Qe+ge[0].length):-1}function pe(lt,Je,Qe){var ge=b.exec(Je.slice(Qe));return ge?(lt.m=w.get(ge[0].toLowerCase()),Qe+ge[0].length):-1}function re(lt,Je,Qe){return W(lt,e,Je,Qe)}function me(lt,Je,Qe){return W(lt,n,Je,Qe)}function he(lt,Je,Qe){return W(lt,r,Je,Qe)}function we(lt){return s[lt.getDay()]}function ee(lt){return o[lt.getDay()]}function ye(lt){return l[lt.getMonth()]}function be(lt){return a[lt.getMonth()]}function Le(lt){return i[+(lt.getHours()>=12)]}function je(lt){return 1+~~(lt.getMonth()/3)}function dt(lt){return s[lt.getUTCDay()]}function Be(lt){return o[lt.getUTCDay()]}function ot(lt){return l[lt.getUTCMonth()]}function at(lt){return a[lt.getUTCMonth()]}function It(lt){return i[+(lt.getUTCHours()>=12)]}function Lt(lt){return 1+~~(lt.getUTCMonth()/3)}return{format:function(lt){var Je=F(lt+="",A);return Je.toString=function(){return lt},Je},parse:function(lt){var Je=B(lt+="",!1);return Je.toString=function(){return lt},Je},utcFormat:function(lt){var Je=F(lt+="",P);return Je.toString=function(){return lt},Je},utcParse:function(lt){var Je=B(lt+="",!0);return Je.toString=function(){return lt},Je}}}var QX={"-":"",_:" ",0:"0"},pa=/^\s*\d+/,HJe=/^%/,WJe=/[\\^$*+?|[\]().{}]/g;function Si(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function GJe(t){return t.replace(WJe,"\\$&")}function SS(t){return new RegExp("^(?:"+t.map(GJe).join("|")+")","i")}function MS(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function qJe(t,e,n){var r=pa.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function XJe(t,e,n){var r=pa.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function YJe(t,e,n){var r=pa.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function KJe(t,e,n){var r=pa.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function ZJe(t,e,n){var r=pa.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function eY(t,e,n){var r=pa.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function tY(t,e,n){var r=pa.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function JJe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function QJe(t,e,n){var r=pa.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function eQe(t,e,n){var r=pa.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function nY(t,e,n){var r=pa.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function tQe(t,e,n){var r=pa.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function rY(t,e,n){var r=pa.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function nQe(t,e,n){var r=pa.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function rQe(t,e,n){var r=pa.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function iQe(t,e,n){var r=pa.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function oQe(t,e,n){var r=pa.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function sQe(t,e,n){var r=HJe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function aQe(t,e,n){var r=pa.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function lQe(t,e,n){var r=pa.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function iY(t,e){return Si(t.getDate(),e,2)}function cQe(t,e){return Si(t.getHours(),e,2)}function uQe(t,e){return Si(t.getHours()%12||12,e,2)}function dQe(t,e){return Si(1+rT.count(Mm(t),t),e,3)}function Gle(t,e){return Si(t.getMilliseconds(),e,3)}function hQe(t,e){return Gle(t,e)+"000"}function fQe(t,e){return Si(t.getMonth()+1,e,2)}function pQe(t,e){return Si(t.getMinutes(),e,2)}function mQe(t,e){return Si(t.getSeconds(),e,2)}function gQe(t){var e=t.getDay();return e===0?7:e}function yQe(t,e){return Si(KO.count(Mm(t)-1,t),e,2)}function qle(t){var e=t.getDay();return e>=4||e===0?u1(t):u1.ceil(t)}function vQe(t,e){return t=qle(t),Si(u1.count(Mm(t),t)+(Mm(t).getDay()===4),e,2)}function _Qe(t){return t.getDay()}function xQe(t,e){return Si(ZI.count(Mm(t)-1,t),e,2)}function bQe(t,e){return Si(t.getFullYear()%100,e,2)}function wQe(t,e){return t=qle(t),Si(t.getFullYear()%100,e,2)}function SQe(t,e){return Si(t.getFullYear()%1e4,e,4)}function MQe(t,e){var n=t.getDay();return t=n>=4||n===0?u1(t):u1.ceil(t),Si(t.getFullYear()%1e4,e,4)}function EQe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Si(e/60|0,"0",2)+Si(e%60,"0",2)}function oY(t,e){return Si(t.getUTCDate(),e,2)}function TQe(t,e){return Si(t.getUTCHours(),e,2)}function CQe(t,e){return Si(t.getUTCHours()%12||12,e,2)}function AQe(t,e){return Si(1+YO.count(Em(t),t),e,3)}function Xle(t,e){return Si(t.getUTCMilliseconds(),e,3)}function PQe(t,e){return Xle(t,e)+"000"}function IQe(t,e){return Si(t.getUTCMonth()+1,e,2)}function RQe(t,e){return Si(t.getUTCMinutes(),e,2)}function kQe(t,e){return Si(t.getUTCSeconds(),e,2)}function OQe(t){var e=t.getUTCDay();return e===0?7:e}function LQe(t,e){return Si(ZO.count(Em(t)-1,t),e,2)}function Yle(t){var e=t.getUTCDay();return e>=4||e===0?d1(t):d1.ceil(t)}function DQe(t,e){return t=Yle(t),Si(d1.count(Em(t),t)+(Em(t).getUTCDay()===4),e,2)}function NQe(t){return t.getUTCDay()}function zQe(t,e){return Si(JI.count(Em(t)-1,t),e,2)}function FQe(t,e){return Si(t.getUTCFullYear()%100,e,2)}function BQe(t,e){return t=Yle(t),Si(t.getUTCFullYear()%100,e,2)}function jQe(t,e){return Si(t.getUTCFullYear()%1e4,e,4)}function $Qe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?d1(t):d1.ceil(t),Si(t.getUTCFullYear()%1e4,e,4)}function UQe(){return"+0000"}function sY(){return"%"}function aY(t){return+t}function lY(t){return Math.floor(+t/1e3)}var ax,Kle,Zle;VQe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function VQe(t){return ax=VJe(t),Kle=ax.format,ax.parse,Zle=ax.utcFormat,ax.utcParse,ax}function HQe(t){return new Date(t)}function WQe(t){return t instanceof Date?+t:+new Date(+t)}function t8(t,e,n,r,i,o,s,a,l,d){var h=$6(),p=h.invert,g=h.domain,v=d(".%L"),x=d(":%S"),b=d("%I:%M"),w=d("%I %p"),S=d("%a %d"),C=d("%b %d"),A=d("%B"),P=d("%Y");function k(F){return(l(F)<F?v:a(F)<F?x:s(F)<F?b:o(F)<F?w:r(F)<F?i(F)<F?S:C:n(F)<F?A:P)(F)}return h.invert=function(F){return new Date(p(F))},h.domain=function(F){return arguments.length?g(Array.from(F,WQe)):g().map(HQe)},h.ticks=function(F){var B=g();return t(B[0],B[B.length-1],F??10)},h.tickFormat=function(F,B){return B==null?k:d(B)},h.nice=function(F){var B=g();return(!F||typeof F.range!="function")&&(F=e(B[0],B[B.length-1],F??10)),F?g(Nle(B,F)):h},h.copy=function(){return nT(h,t8(t,e,n,r,i,o,s,a,l,d))},h}function GQe(){return Nd.apply(t8($Je,UJe,Mm,Q6,KO,rT,Z6,Y6,d0,Kle).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function qQe(){return Nd.apply(t8(BJe,jJe,Em,e8,ZO,YO,J6,K6,d0,Zle).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function JO(){var t=0,e=1,n,r,i,o,s=Xl,a=!1,l;function d(p){return p==null||isNaN(p=+p)?l:s(i===0?.5:(p=(o(p)-n)*i,a?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([t,e]=p,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),d):[t,e]},d.clamp=function(p){return arguments.length?(a=!!p,d):a},d.interpolator=function(p){return arguments.length?(s=p,d):s};function h(p){return function(g){var v,x;return arguments.length?([v,x]=g,s=p(v,x),d):[s(0),s(1)]}}return d.range=h(cw),d.rangeRound=h(j6),d.unknown=function(p){return arguments.length?(l=p,d):l},function(p){return o=p,n=p(t),r=p(e),i=n===r?0:1/(r-n),d}}function qy(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Jle(){var t=Gy(JO()(Xl));return t.copy=function(){return qy(t,Jle())},Nm.apply(t,arguments)}function Qle(){var t=H6(JO()).domain([1,10]);return t.copy=function(){return qy(t,Qle()).base(t.base())},Nm.apply(t,arguments)}function ece(){var t=W6(JO());return t.copy=function(){return qy(t,ece()).constant(t.constant())},Nm.apply(t,arguments)}function n8(){var t=G6(JO());return t.copy=function(){return qy(t,n8()).exponent(t.exponent())},Nm.apply(t,arguments)}function XQe(){return n8.apply(null,arguments).exponent(.5)}function tce(){var t=[],e=Xl;function n(r){if(r!=null&&!isNaN(r=+r))return e((eT(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(by),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>AZe(t,o/r))},n.copy=function(){return tce(e).domain(t)},Nm.apply(n,arguments)}function QO(){var t=0,e=.5,n=1,r=1,i,o,s,a,l,d=Xl,h,p=!1,g;function v(b){return isNaN(b=+b)?g:(b=.5+((b=+h(b))-o)*(r*b<r*o?a:l),d(p?Math.max(0,Math.min(1,b)):b))}v.domain=function(b){return arguments.length?([t,e,n]=b,i=h(t=+t),o=h(e=+e),s=h(n=+n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,v):[t,e,n]},v.clamp=function(b){return arguments.length?(p=!!b,v):p},v.interpolator=function(b){return arguments.length?(d=b,v):d};function x(b){return function(w){var S,C,A;return arguments.length?([S,C,A]=w,d=eJe(b,[S,C,A]),v):[d(0),d(.5),d(1)]}}return v.range=x(cw),v.rangeRound=x(j6),v.unknown=function(b){return arguments.length?(g=b,v):g},function(b){return h=b,i=b(t),o=b(e),s=b(n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,v}}function nce(){var t=Gy(QO()(Xl));return t.copy=function(){return qy(t,nce())},Nm.apply(t,arguments)}function rce(){var t=H6(QO()).domain([.1,1,10]);return t.copy=function(){return qy(t,rce()).base(t.base())},Nm.apply(t,arguments)}function ice(){var t=W6(QO());return t.copy=function(){return qy(t,ice()).constant(t.constant())},Nm.apply(t,arguments)}function r8(){var t=G6(QO());return t.copy=function(){return qy(t,r8()).exponent(t.exponent())},Nm.apply(t,arguments)}function YQe(){return r8.apply(null,arguments).exponent(.5)}const cY=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:MM,scaleDiverging:nce,scaleDivergingLog:rce,scaleDivergingPow:r8,scaleDivergingSqrt:YQe,scaleDivergingSymlog:ice,scaleIdentity:Dle,scaleImplicit:t4,scaleLinear:YI,scaleLog:zle,scaleOrdinal:z6,scalePoint:M2,scalePow:q6,scaleQuantile:jle,scaleQuantize:$le,scaleRadial:Ble,scaleSequential:Jle,scaleSequentialLog:Qle,scaleSequentialPow:n8,scaleSequentialQuantile:tce,scaleSequentialSqrt:XQe,scaleSequentialSymlog:ece,scaleSqrt:SJe,scaleSymlog:Fle,scaleThreshold:Ule,scaleTime:GQe,scaleUtc:qQe,tickFormat:Lle},Symbol.toStringTag,{value:"Module"}));var KQe=tw;function ZQe(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],s=e(o);if(s!=null&&(a===void 0?s===s&&!KQe(s):n(s,a)))var a=s,l=o}return l}var oce=ZQe;function JQe(t,e){return t>e}var QQe=JQe,eet=oce,tet=QQe,net=lw;function ret(t){return t&&t.length?eet(t,net,tet):void 0}var iet=ret;const eL=Mi(iet);function oet(t,e){return t<e}var set=oet,aet=oce,cet=set,uet=lw;function det(t){return t&&t.length?aet(t,uet,cet):void 0}var het=det;const tL=Mi(het);var fet=y6,pet=Wy,met=dle,get=Ic;function yet(t,e){var n=get(t)?fet:met;return n(t,pet(e))}var vet=yet,_et=cle,xet=vet;function bet(t,e){return _et(xet(t,e),1)}var wet=bet;const Met=Mi(wet);var Eet=O6;function Tet(t,e){return Eet(t,e)}var Cet=Tet;const nL=Mi(Cet);var uw=1e9,Aet={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},o8,Ao=!0,Id="[DecimalError] ",T0=Id+"Invalid argument: ",i8=Id+"Exponent out of range: ",dw=Math.floor,Yv=Math.pow,Pet=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,cu,la=1e7,go=7,sce=9007199254740991,QI=dw(sce/go),Xn={};Xn.absoluteValue=Xn.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Xn.comparedTo=Xn.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(r=o.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};Xn.decimalPlaces=Xn.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*go;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Xn.dividedBy=Xn.div=function(t){return hm(this,new this.constructor(t))};Xn.dividedToIntegerBy=Xn.idiv=function(t){var e=this,n=e.constructor;return to(hm(e,new n(t),0,1),n.precision)};Xn.equals=Xn.eq=function(t){return!this.cmp(t)};Xn.exponent=function(){return Es(this)};Xn.greaterThan=Xn.gt=function(t){return this.cmp(t)>0};Xn.greaterThanOrEqualTo=Xn.gte=function(t){return this.cmp(t)>=0};Xn.isInteger=Xn.isint=function(){return this.e>this.d.length-2};Xn.isNegative=Xn.isneg=function(){return this.s<0};Xn.isPositive=Xn.ispos=function(){return this.s>0};Xn.isZero=function(){return this.s===0};Xn.lessThan=Xn.lt=function(t){return this.cmp(t)<0};Xn.lessThanOrEqualTo=Xn.lte=function(t){return this.cmp(t)<1};Xn.logarithm=Xn.log=function(t){var e,n=this,r=n.constructor,i=r.precision,o=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(cu))throw Error(Id+"NaN");if(n.s<1)throw Error(Id+(n.s?"NaN":"-Infinity"));return n.eq(cu)?new r(0):(Ao=!1,e=hm(PM(n,o),PM(t,o),o),Ao=!0,to(e,i))};Xn.minus=Xn.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?cce(e,t):ace(e,(t.s=-t.s,t))};Xn.modulo=Xn.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Id+"NaN");return n.s?(Ao=!1,e=hm(n,t,0,1).times(t),Ao=!0,n.minus(e)):to(new r(n),i)};Xn.naturalExponential=Xn.exp=function(){return lce(this)};Xn.naturalLogarithm=Xn.ln=function(){return PM(this)};Xn.negated=Xn.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Xn.plus=Xn.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?ace(e,t):cce(e,(t.s=-t.s,t))};Xn.precision=Xn.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(T0+t);if(e=Es(i)+1,r=i.d.length-1,n=r*go+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Xn.squareRoot=Xn.sqrt=function(){var t,e,n,r,i,o,s,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(Id+"NaN")}for(t=Es(a),Ao=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=Pf(a.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=dw((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=s=n+3;;)if(o=r,r=o.plus(hm(a,o,s+2)).times(.5),Pf(o.d).slice(0,s)===(e=Pf(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(to(o,n+1,0),o.times(o).eq(a)){r=o;break}}else if(e!="9999")break;s+=4}return Ao=!0,to(r,n)};Xn.times=Xn.mul=function(t){var e,n,r,i,o,s,a,l,d,h=this,p=h.constructor,g=h.d,v=(t=new p(t)).d;if(!h.s||!t.s)return new p(0);for(t.s*=h.s,n=h.e+t.e,l=g.length,d=v.length,l<d&&(o=g,g=v,v=o,s=l,l=d,d=s),o=[],s=l+d,r=s;r--;)o.push(0);for(r=d;--r>=0;){for(e=0,i=l+r;i>r;)a=o[i]+v[r]*g[i-r-1]+e,o[i--]=a%la|0,e=a/la|0;o[i]=(o[i]+e)%la|0}for(;!o[--s];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,Ao?to(t,p.precision):t};Xn.toDecimalPlaces=Xn.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Xf(t,0,uw),e===void 0?e=r.rounding:Xf(e,0,8),to(n,t+Es(n)+1,e))};Xn.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=G0(r,!0):(Xf(t,0,uw),e===void 0?e=i.rounding:Xf(e,0,8),r=to(new i(r),t+1,e),n=G0(r,!0,t+1)),n};Xn.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?G0(i):(Xf(t,0,uw),e===void 0?e=o.rounding:Xf(e,0,8),r=to(new o(i),t+Es(i)+1,e),n=G0(r.abs(),!1,t+Es(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Xn.toInteger=Xn.toint=function(){var t=this,e=t.constructor;return to(new e(t),Es(t)+1,e.rounding)};Xn.toNumber=function(){return+this};Xn.toPower=Xn.pow=function(t){var e,n,r,i,o,s,a=this,l=a.constructor,d=12,h=+(t=new l(t));if(!t.s)return new l(cu);if(a=new l(a),!a.s){if(t.s<1)throw Error(Id+"Infinity");return a}if(a.eq(cu))return a;if(r=l.precision,t.eq(cu))return to(a,r);if(e=t.e,n=t.d.length-1,s=e>=n,o=a.s,s){if((n=h<0?-h:h)<=sce){for(i=new l(cu),e=Math.ceil(r/go+4),Ao=!1;n%2&&(i=i.times(a),dY(i.d,e)),n=dw(n/2),n!==0;)a=a.times(a),dY(a.d,e);return Ao=!0,t.s<0?new l(cu).div(i):to(i,r)}}else if(o<0)throw Error(Id+"NaN");return o=o<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,Ao=!1,i=t.times(PM(a,r+d)),Ao=!0,i=lce(i),i.s=o,i};Xn.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?(n=Es(i),r=G0(i,n<=o.toExpNeg||n>=o.toExpPos)):(Xf(t,1,uw),e===void 0?e=o.rounding:Xf(e,0,8),i=to(new o(i),t,e),n=Es(i),r=G0(i,t<=n||n<=o.toExpNeg,t)),r};Xn.toSignificantDigits=Xn.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Xf(t,1,uw),e===void 0?e=r.rounding:Xf(e,0,8)),to(new r(n),t,e)};Xn.toString=Xn.valueOf=Xn.val=Xn.toJSON=Xn[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Es(t),n=t.constructor;return G0(t,e<=n.toExpNeg||e>=n.toExpPos)};function ace(t,e){var n,r,i,o,s,a,l,d,h=t.constructor,p=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),Ao?to(e,p):e;if(l=t.d,d=e.d,s=t.e,i=e.e,l=l.slice(),o=s-i,o){for(o<0?(r=l,o=-o,a=d.length):(r=d,i=s,a=l.length),s=Math.ceil(p/go),a=s>a?s+1:a+1,o>a&&(o=a,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(a=l.length,o=d.length,a-o<0&&(o=a,r=d,d=l,l=r),n=0;o;)n=(l[--o]=l[o]+d[o]+n)/la|0,l[o]%=la;for(n&&(l.unshift(n),++i),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=i,Ao?to(e,p):e}function Xf(t,e,n){if(t!==~~t||t<e||t>n)throw Error(T0+t)}function Pf(t){var e,n,r,i=t.length-1,o="",s=t[0];if(i>0){for(o+=s,e=1;e<i;e++)r=t[e]+"",n=go-r.length,n&&(o+=Wg(n)),o+=r;s=t[e],r=s+"",n=go-r.length,n&&(o+=Wg(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}var hm=function(){function t(r,i){var o,s=0,a=r.length;for(r=r.slice();a--;)o=r[a]*i+s,r[a]=o%la|0,s=o/la|0;return s&&r.unshift(s),r}function e(r,i,o,s){var a,l;if(o!=s)l=o>s?1:-1;else for(a=l=0;a<o;a++)if(r[a]!=i[a]){l=r[a]>i[a]?1:-1;break}return l}function n(r,i,o){for(var s=0;o--;)r[o]-=s,s=r[o]<i[o]?1:0,r[o]=s*la+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,s){var a,l,d,h,p,g,v,x,b,w,S,C,A,P,k,F,B,W,J=r.constructor,H=r.s==i.s?1:-1,Y=r.d,le=i.d;if(!r.s)return new J(r);if(!i.s)throw Error(Id+"Division by zero");for(l=r.e-i.e,B=le.length,k=Y.length,v=new J(H),x=v.d=[],d=0;le[d]==(Y[d]||0);)++d;if(le[d]>(Y[d]||0)&&--l,o==null?C=o=J.precision:s?C=o+(Es(r)-Es(i))+1:C=o,C<0)return new J(0);if(C=C/go+2|0,d=0,B==1)for(h=0,le=le[0],C++;(d<k||h)&&C--;d++)A=h*la+(Y[d]||0),x[d]=A/le|0,h=A%le|0;else{for(h=la/(le[0]+1)|0,h>1&&(le=t(le,h),Y=t(Y,h),B=le.length,k=Y.length),P=B,b=Y.slice(0,B),w=b.length;w<B;)b[w++]=0;W=le.slice(),W.unshift(0),F=le[0],le[1]>=la/2&&++F;do h=0,a=e(le,b,B,w),a<0?(S=b[0],B!=w&&(S=S*la+(b[1]||0)),h=S/F|0,h>1?(h>=la&&(h=la-1),p=t(le,h),g=p.length,w=b.length,a=e(p,b,g,w),a==1&&(h--,n(p,B<g?W:le,g))):(h==0&&(a=h=1),p=le.slice()),g=p.length,g<w&&p.unshift(0),n(b,p,w),a==-1&&(w=b.length,a=e(le,b,B,w),a<1&&(h++,n(b,B<w?W:le,w))),w=b.length):a===0&&(h++,b=[0]),x[d++]=h,a&&b[0]?b[w++]=Y[P]||0:(b=[Y[P]],w=1);while((P++<k||b[0]!==void 0)&&C--)}return x[0]||x.shift(),v.e=l,to(v,s?o+Es(v)+1:o)}}();function lce(t,e){var n,r,i,o,s,a,l=0,d=0,h=t.constructor,p=h.precision;if(Es(t)>16)throw Error(i8+Es(t));if(!t.s)return new h(cu);for(e==null?(Ao=!1,a=p):a=e,s=new h(.03125);t.abs().gte(.1);)t=t.times(s),d+=5;for(r=Math.log(Yv(2,d))/Math.LN10*2+5|0,a+=r,n=i=o=new h(cu),h.precision=a;;){if(i=to(i.times(t),a),n=n.times(++l),s=o.plus(hm(i,n,a)),Pf(s.d).slice(0,a)===Pf(o.d).slice(0,a)){for(;d--;)o=to(o.times(o),a);return h.precision=p,e==null?(Ao=!0,to(o,p)):o}o=s}}function Es(t){for(var e=t.e*go,n=t.d[0];n>=10;n/=10)e++;return e}function wN(t,e,n){if(e>t.LN10.sd())throw Ao=!0,n&&(t.precision=n),Error(Id+"LN10 precision limit exceeded");return to(new t(t.LN10),e)}function Wg(t){for(var e="";t--;)e+="0";return e}function PM(t,e){var n,r,i,o,s,a,l,d,h,p=1,g=10,v=t,x=v.d,b=v.constructor,w=b.precision;if(v.s<1)throw Error(Id+(v.s?"NaN":"-Infinity"));if(v.eq(cu))return new b(0);if(e==null?(Ao=!1,d=w):d=e,v.eq(10))return e==null&&(Ao=!0),wN(b,d);if(d+=g,b.precision=d,n=Pf(x),r=n.charAt(0),o=Es(v),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)v=v.times(t),n=Pf(v.d),r=n.charAt(0),p++;o=Es(v),r>1?(v=new b("0."+n),o++):v=new b(r+"."+n.slice(1))}else return l=wN(b,d+2,w).times(o+""),v=PM(new b(r+"."+n.slice(1)),d-g).plus(l),b.precision=w,e==null?(Ao=!0,to(v,w)):v;for(a=s=v=hm(v.minus(cu),v.plus(cu),d),h=to(v.times(v),d),i=3;;){if(s=to(s.times(h),d),l=a.plus(hm(s,new b(i),d)),Pf(l.d).slice(0,d)===Pf(a.d).slice(0,d))return a=a.times(2),o!==0&&(a=a.plus(wN(b,d+2,w).times(o+""))),a=hm(a,new b(p),d),b.precision=w,e==null?(Ao=!0,to(a,w)):a;a=l,i+=2}}function uY(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=dw(n/go),t.d=[],r=(n+1)%go,n<0&&(r+=go),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=go;r<i;)t.d.push(+e.slice(r,r+=go));e=e.slice(r),r=go-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Ao&&(t.e>QI||t.e<-QI))throw Error(i8+n)}else t.s=0,t.e=0,t.d=[0];return t}function to(t,e,n){var r,i,o,s,a,l,d,h,p=t.d;for(s=1,o=p[0];o>=10;o/=10)s++;if(r=e-s,r<0)r+=go,i=e,d=p[h=0];else{if(h=Math.ceil((r+1)/go),o=p.length,h>=o)return t;for(d=o=p[h],s=1;o>=10;o/=10)s++;r%=go,i=r-go+s}if(n!==void 0&&(o=Yv(10,s-i-1),a=d/o%10|0,l=e<0||p[h+1]!==void 0||d%o,l=n<4?(a||l)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||l||n==6&&(r>0?i>0?d/Yv(10,s-i):0:p[h-1])%10&1||n==(t.s<0?8:7))),e<1||!p[0])return l?(o=Es(t),p.length=1,e=e-o-1,p[0]=Yv(10,(go-e%go)%go),t.e=dw(-e/go)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(r==0?(p.length=h,o=1,h--):(p.length=h+1,o=Yv(10,go-r),p[h]=i>0?(d/Yv(10,s-i)%Yv(10,i)|0)*o:0),l)for(;;)if(h==0){(p[0]+=o)==la&&(p[0]=1,++t.e);break}else{if(p[h]+=o,p[h]!=la)break;p[h--]=0,o=1}for(r=p.length;p[--r]===0;)p.pop();if(Ao&&(t.e>QI||t.e<-QI))throw Error(i8+Es(t));return t}function cce(t,e){var n,r,i,o,s,a,l,d,h,p,g=t.constructor,v=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),Ao?to(e,v):e;if(l=t.d,p=e.d,r=e.e,d=t.e,l=l.slice(),s=d-r,s){for(h=s<0,h?(n=l,s=-s,a=p.length):(n=p,r=d,a=l.length),i=Math.max(Math.ceil(v/go),a)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=l.length,a=p.length,h=i<a,h&&(a=i),i=0;i<a;i++)if(l[i]!=p[i]){h=l[i]<p[i];break}s=0}for(h&&(n=l,l=p,p=n,e.s=-e.s),a=l.length,i=p.length-a;i>0;--i)l[a++]=0;for(i=p.length;i>s;){if(l[--i]<p[i]){for(o=i;o&&l[--o]===0;)l[o]=la-1;--l[o],l[i]+=la}l[i]-=p[i]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Ao?to(e,v):e):new g(0)}function G0(t,e,n){var r,i=Es(t),o=Pf(t.d),s=o.length;return e?(n&&(r=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+Wg(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+Wg(-i-1)+o,n&&(r=n-s)>0&&(o+=Wg(r))):i>=s?(o+=Wg(i+1-s),n&&(r=n-i-1)>0&&(o=o+"."+Wg(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(o+="."),o+=Wg(r))),t.s<0?"-"+o:o}function dY(t,e){if(t.length>e)return t.length=e,!0}function uce(t){var e,n,r;function i(o){var s=this;if(!(s instanceof i))return new i(o);if(s.constructor=i,o instanceof i){s.s=o.s,s.e=o.e,s.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(T0+o);if(o>0)s.s=1;else if(o<0)o=-o,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(o===~~o&&o<1e7){s.e=0,s.d=[o];return}return uY(s,o.toString())}else if(typeof o!="string")throw Error(T0+o);if(o.charCodeAt(0)===45?(o=o.slice(1),s.s=-1):s.s=1,Pet.test(o))uY(s,o);else throw Error(T0+o)}if(i.prototype=Xn,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=uce,i.config=i.set=Iet,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Iet(t){if(!t||typeof t!="object")throw Error(Id+"Object expected");var e,n,r,i=["precision",1,uw,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(dw(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(T0+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(T0+n+": "+r);return this}var o8=uce(Aet);cu=new o8(1);const Ki=o8;function Ret(t){return Det(t)||Let(t)||Oet(t)||ket()}function ket(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oet(t,e){if(t){if(typeof t=="string")return o4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o4(t,e)}}function Let(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Det(t){if(Array.isArray(t))return o4(t)}function o4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Net=function(e){return e},dce={"@@functional/placeholder":!0},hce=function(e){return e===dce},hY=function(e){return function n(){return arguments.length===0||arguments.length===1&&hce(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},zet=function t(e,n){return e===1?n:hY(function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var s=i.filter(function(a){return a!==dce}).length;return s>=e?n.apply(void 0,i):t(e-s,hY(function(){for(var a=arguments.length,l=new Array(a),d=0;d<a;d++)l[d]=arguments[d];var h=i.map(function(p){return hce(p)?l.shift():p});return n.apply(void 0,Ret(h).concat(l))}))})},rL=function(e){return zet(e.length,e)},s4=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},Fet=rL(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),Bet=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Net;var i=n.reverse(),o=i[0],s=i.slice(1);return function(){return s.reduce(function(a,l){return l(a)},o.apply(void 0,arguments))}},a4=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},fce=function(e){var n=null,r=null;return function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n&&o.every(function(a,l){return a===n[l]})||(n=o,r=e.apply(void 0,o)),r}};function jet(t){var e;return t===0?e=1:e=Math.floor(new Ki(t).abs().log(10).toNumber())+1,e}function $et(t,e,n){for(var r=new Ki(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}var Uet=rL(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),Vet=rL(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),Het=rL(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const iL={rangeStep:$et,getDigitCount:jet,interpolateNumber:Uet,uninterpolateNumber:Vet,uninterpolateTruncation:Het};function l4(t){return qet(t)||Get(t)||pce(t)||Wet()}function Wet(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Get(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function qet(t){if(Array.isArray(t))return c4(t)}function IM(t,e){return Ket(t)||Yet(t,e)||pce(t,e)||Xet()}function Xet(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pce(t,e){if(t){if(typeof t=="string")return c4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c4(t,e)}}function c4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Yet(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,o=void 0;try{for(var s=t[Symbol.iterator](),a;!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw o}}return n}}function Ket(t){if(Array.isArray(t))return t}function mce(t){var e=IM(t,2),n=e[0],r=e[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function gce(t,e,n){if(t.lte(0))return new Ki(0);var r=iL.getDigitCount(t.toNumber()),i=new Ki(10).pow(r),o=t.div(i),s=r!==1?.05:.1,a=new Ki(Math.ceil(o.div(s).toNumber())).add(n).mul(s),l=a.mul(i);return e?l:new Ki(Math.ceil(l))}function Zet(t,e,n){var r=1,i=new Ki(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new Ki(10).pow(iL.getDigitCount(t)-1),i=new Ki(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new Ki(Math.floor(t)))}else t===0?i=new Ki(Math.floor((e-1)/2)):n||(i=new Ki(Math.floor(t)));var s=Math.floor((e-1)/2),a=Bet(Fet(function(l){return i.add(new Ki(l-s).mul(r)).toNumber()}),s4);return a(0,e)}function yce(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Ki(0),tickMin:new Ki(0),tickMax:new Ki(0)};var o=gce(new Ki(e).sub(t).div(n-1),r,i),s;t<=0&&e>=0?s=new Ki(0):(s=new Ki(t).add(e).div(2),s=s.sub(new Ki(s).mod(o)));var a=Math.ceil(s.sub(t).div(o).toNumber()),l=Math.ceil(new Ki(e).sub(s).div(o).toNumber()),d=a+l+1;return d>n?yce(t,e,n,r,i+1):(d<n&&(l=e>0?l+(n-d):l,a=e>0?a:a+(n-d)),{step:o,tickMin:s.sub(new Ki(a).mul(o)),tickMax:s.add(new Ki(l).mul(o))})}function Jet(t){var e=IM(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),a=mce([n,r]),l=IM(a,2),d=l[0],h=l[1];if(d===-1/0||h===1/0){var p=h===1/0?[d].concat(l4(s4(0,i-1).map(function(){return 1/0}))):[].concat(l4(s4(0,i-1).map(function(){return-1/0})),[h]);return n>r?a4(p):p}if(d===h)return Zet(d,i,o);var g=yce(d,h,s,o),v=g.step,x=g.tickMin,b=g.tickMax,w=iL.rangeStep(x,b.add(new Ki(.1).mul(v)),v);return n>r?a4(w):w}function Qet(t,e){var n=IM(t,2),r=n[0],i=n[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=mce([r,i]),a=IM(s,2),l=a[0],d=a[1];if(l===-1/0||d===1/0)return[r,i];if(l===d)return[l];var h=Math.max(e,2),p=gce(new Ki(d).sub(l).div(h-1),o,0),g=[].concat(l4(iL.rangeStep(new Ki(l),new Ki(d).sub(new Ki(.99).mul(p)),p)),[d]);return r>i?a4(g):g}var ett=fce(Jet),ttt=fce(Qet),ntt="Invariant failed";function q0(t,e){throw new Error(ntt)}var rtt=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function eR(){return eR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eR.apply(this,arguments)}function itt(t,e){return ltt(t)||att(t,e)||stt(t,e)||ott()}function ott(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function stt(t,e){if(t){if(typeof t=="string")return fY(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fY(t,e)}}function fY(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function att(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,d=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(h){d=!0,i=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return a}}function ltt(t){if(Array.isArray(t))return t}function ctt(t,e){if(t==null)return{};var n=utt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function utt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function iT(t){var e=t.offset,n=t.layout,r=t.width,i=t.dataKey,o=t.data,s=t.dataPointFormatter,a=t.xAxis,l=t.yAxis,d=ctt(t,rtt),h=ii(d,!1);t.direction==="x"&&a.type!=="number"&&q0();var p=o.map(function(g){var v=s(g,i),x=v.x,b=v.y,w=v.value,S=v.errorVal;if(!S)return null;var C=[],A,P;if(Array.isArray(S)){var k=itt(S,2);A=k[0],P=k[1]}else A=P=S;if(n==="vertical"){var F=a.scale,B=b+e,W=B+r,J=B-r,H=F(w-A),Y=F(w+P);C.push({x1:Y,y1:W,x2:Y,y2:J}),C.push({x1:H,y1:B,x2:Y,y2:B}),C.push({x1:H,y1:W,x2:H,y2:J})}else if(n==="horizontal"){var le=l.scale,pe=x+e,re=pe-r,me=pe+r,he=le(w-A),we=le(w+P);C.push({x1:re,y1:we,x2:me,y2:we}),C.push({x1:pe,y1:he,x2:pe,y2:we}),C.push({x1:re,y1:he,x2:me,y2:he})}return Ye.createElement(us,eR({className:"recharts-errorBar",key:"bar-".concat(C.map(function(ee){return"".concat(ee.x1,"-").concat(ee.x2,"-").concat(ee.y1,"-").concat(ee.y2)}))},h),C.map(function(ee){return Ye.createElement("line",eR({},ee,{key:"line-".concat(ee.x1,"-").concat(ee.x2,"-").concat(ee.y1,"-").concat(ee.y2)}))}))});return Ye.createElement(us,{className:"recharts-errorBars"},p)}iT.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"};iT.displayName="ErrorBar";function RM(t){"@babel/helpers - typeof";return RM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RM(t)}function pY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pY(Object(n),!0).forEach(function(r){dtt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dtt(t,e,n){return e=htt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function htt(t){var e=ftt(t,"string");return RM(e)=="symbol"?e:String(e)}function ftt(t,e){if(RM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(RM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vce=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,s=tu(n,s1);if(!s)return null;var a;return s.props&&s.props.payload?a=s.props&&s.props.payload:o==="children"?a=(r||[]).reduce(function(l,d){var h=d.item,p=d.props,g=p.sectors||p.data||[];return l.concat(g.map(function(v){return{type:s.props.iconType||h.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):a=(r||[]).map(function(l){var d=l.item,h=d.props,p=h.dataKey,g=h.name,v=h.legendType,x=h.hide;return{inactive:x,dataKey:p,type:s.props.iconType||v||"square",color:s8(d),value:g||p,payload:d.props}}),SN(SN(SN({},s.props),s1.getWithHeight(s,i)),{},{payload:a,item:s})};function kM(t){"@babel/helpers - typeof";return kM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kM(t)}function mY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mY(Object(n),!0).forEach(function(r){Pb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pb(t,e,n){return e=ptt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ptt(t){var e=mtt(t,"string");return kM(e)=="symbol"?e:String(e)}function mtt(t,e){if(kM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(kM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gY(t){return _tt(t)||vtt(t)||ytt(t)||gtt()}function gtt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ytt(t,e){if(t){if(typeof t=="string")return u4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u4(t,e)}}function vtt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _tt(t){if(Array.isArray(t))return u4(t)}function u4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Eu(t,e,n){return Qr(t)||Qr(e)?n:js(e)?wd(t,e,n):qr(e)?e(t):n}function E2(t,e,n,r){var i=Met(t,function(a){return Eu(a,e)});if(n==="number"){var o=i.filter(function(a){return Pn(a)||parseFloat(a)});return o.length?[tL(o),eL(o)]:[1/0,-1/0]}var s=r?i.filter(function(a){return!Qr(a)}):i;return s.map(function(a){return js(a)||a instanceof Date?a:""})}var xtt=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=-1,a=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(a<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var l=o.range,d=0;d<a;d++){var h=d>0?i[d-1].coordinate:i[a-1].coordinate,p=i[d].coordinate,g=d>=a-1?i[0].coordinate:i[d+1].coordinate,v=void 0;if(Sh(p-h)!==Sh(g-p)){var x=[];if(Sh(g-p)===Sh(l[1]-l[0])){v=g;var b=p+l[1]-l[0];x[0]=Math.min(b,(b+h)/2),x[1]=Math.max(b,(b+h)/2)}else{v=h;var w=g+l[1]-l[0];x[0]=Math.min(p,(w+p)/2),x[1]=Math.max(p,(w+p)/2)}var S=[Math.min(p,(v+p)/2),Math.max(p,(v+p)/2)];if(e>S[0]&&e<=S[1]||e>=x[0]&&e<=x[1]){s=i[d].index;break}}else{var C=Math.min(h,g),A=Math.max(h,g);if(e>(C+p)/2&&e<=(A+p)/2){s=i[d].index;break}}}else for(var P=0;P<a;P++)if(P===0&&e<=(r[P].coordinate+r[P+1].coordinate)/2||P>0&&P<a-1&&e>(r[P].coordinate+r[P-1].coordinate)/2&&e<=(r[P].coordinate+r[P+1].coordinate)/2||P===a-1&&e>(r[P].coordinate+r[P-1].coordinate)/2){s=r[P].index;break}return s},s8=function(e){var n=e,r=n.type.displayName,i=e.props,o=i.stroke,s=i.fill,a;switch(r){case"Line":a=o;break;case"Area":case"Radar":a=o&&o!=="none"?o:s;break;default:a=s;break}return a},btt=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,o=i===void 0?{}:i;if(!o)return{};for(var s={},a=Object.keys(o),l=0,d=a.length;l<d;l++)for(var h=o[a[l]].stackGroups,p=Object.keys(h),g=0,v=p.length;g<v;g++){var x=h[p[g]],b=x.items,w=x.cateAxisId,S=b.filter(function(k){return cm(k.type).indexOf("Bar")>=0});if(S&&S.length){var C=S[0].props.barSize,A=S[0].props[w];s[A]||(s[A]=[]);var P=Qr(C)?n:C;s[A].push({item:S[0],stackList:S.slice(1),barSize:Qr(P)?void 0:W0(P,r,0)})}}return s},wtt=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,o=e.sizeList,s=o===void 0?[]:o,a=e.maxBarSize,l=s.length;if(l<1)return null;var d=W0(n,i,0,!0),h,p=[];if(s[0].barSize===+s[0].barSize){var g=!1,v=i/l,x=s.reduce(function(P,k){return P+k.barSize||0},0);x+=(l-1)*d,x>=i&&(x-=(l-1)*d,d=0),x>=i&&v>0&&(g=!0,v*=.9,x=l*v);var b=(i-x)/2>>0,w={offset:b-d,size:0};h=s.reduce(function(P,k){var F={item:k.item,position:{offset:w.offset+w.size+d,size:g?v:k.barSize}},B=[].concat(gY(P),[F]);return w=B[B.length-1].position,k.stackList&&k.stackList.length&&k.stackList.forEach(function(W){B.push({item:W,position:w})}),B},p)}else{var S=W0(r,i,0,!0);i-2*S-(l-1)*d<=0&&(d=0);var C=(i-2*S-(l-1)*d)/l;C>1&&(C>>=0);var A=a===+a?Math.min(C,a):C;h=s.reduce(function(P,k,F){var B=[].concat(gY(P),[{item:k.item,position:{offset:S+(C+d)*F+(C-A)/2,size:A}}]);return k.stackList&&k.stackList.length&&k.stackList.forEach(function(W){B.push({item:W,position:B[B.length-1].position})}),B},p)}return h},Stt=function(e,n,r,i){var o=r.children,s=r.width,a=r.margin,l=s-(a.left||0)-(a.right||0),d=vce({children:o,legendWidth:l});if(d){var h=i||{},p=h.width,g=h.height,v=d.align,x=d.verticalAlign,b=d.layout;if((b==="vertical"||b==="horizontal"&&x==="middle")&&v!=="center"&&Pn(e[v]))return fd(fd({},e),{},Pb({},v,e[v]+(p||0)));if((b==="horizontal"||b==="vertical"&&v==="center")&&x!=="middle"&&Pn(e[x]))return fd(fd({},e),{},Pb({},x,e[x]+(g||0)))}return e},Mtt=function(e,n,r){return Qr(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},_ce=function(e,n,r,i,o){var s=n.props.children,a=Sd(s,iT).filter(function(d){return Mtt(i,o,d.props.direction)});if(a&&a.length){var l=a.map(function(d){return d.props.dataKey});return e.reduce(function(d,h){var p=Eu(h,r);if(Qr(p))return d;var g=Array.isArray(p)?[tL(p),eL(p)]:[p,p],v=l.reduce(function(x,b){var w=Eu(h,b,0),S=g[0]-Math.abs(Array.isArray(w)?w[0]:w),C=g[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(S,x[0]),Math.max(C,x[1])]},[1/0,-1/0]);return[Math.min(v[0],d[0]),Math.max(v[1],d[1])]},[1/0,-1/0])}return null},Ett=function(e,n,r,i,o){var s=n.map(function(a){return _ce(e,a,r,o,i)}).filter(function(a){return!Qr(a)});return s&&s.length?s.reduce(function(a,l){return[Math.min(a[0],l[0]),Math.max(a[1],l[1])]},[1/0,-1/0]):null},xce=function(e,n,r,i,o){var s=n.map(function(l){var d=l.props.dataKey;return r==="number"&&d&&_ce(e,l,d,i)||E2(e,d,r,o)});if(r==="number")return s.reduce(function(l,d){return[Math.min(l[0],d[0]),Math.max(l[1],d[1])]},[1/0,-1/0]);var a={};return s.reduce(function(l,d){for(var h=0,p=d.length;h<p;h++)a[d[h]]||(a[d[h]]=!0,l.push(d[h]));return l},[])},bce=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},wce=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var o,s,a=e.map(function(l){return l.coordinate===n&&(o=!0),l.coordinate===r&&(s=!0),l.coordinate});return o||a.push(n),s||a.push(r),a},rm=function(e,n,r){if(!e)return null;var i=e.scale,o=e.duplicateDomain,s=e.type,a=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,d=(n||r)&&s==="category"&&i.bandwidth?i.bandwidth()/l:0;if(d=e.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?Sh(a[0]-a[1])*2*d:d,n&&(e.ticks||e.niceTicks)){var h=(e.ticks||e.niceTicks).map(function(p){var g=o?o.indexOf(p):p;return{coordinate:i(g)+d,value:p,offset:d}});return h.filter(function(p){return!ZE(p.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(p,g){return{coordinate:i(p)+d,value:p,index:g,offset:d}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(p){return{coordinate:i(p)+d,value:p,offset:d}}):i.domain().map(function(p,g){return{coordinate:i(p)+d,value:o?o[p]:p,index:g,offset:d}})},MN=new WeakMap,jC=function(e,n){if(typeof n!="function")return e;MN.has(e)||MN.set(e,new WeakMap);var r=MN.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},Ttt=function(e,n,r){var i=e.scale,o=e.type,s=e.layout,a=e.axisType;if(i==="auto")return s==="radial"&&a==="radiusAxis"?{scale:MM(),realScaleType:"band"}:s==="radial"&&a==="angleAxis"?{scale:YI(),realScaleType:"linear"}:o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:M2(),realScaleType:"point"}:o==="category"?{scale:MM(),realScaleType:"band"}:{scale:YI(),realScaleType:"linear"};if(KE(i)){var l="scale".concat($O(i));return{scale:(cY[l]||M2)(),realScaleType:cY[l]?l:"point"}}return qr(i)?{scale:i}:{scale:M2(),realScaleType:"point"}},yY=1e-4,Ctt=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),o=Math.min(i[0],i[1])-yY,s=Math.max(i[0],i[1])+yY,a=e(n[0]),l=e(n[r-1]);(a<o||a>s||l<o||l>s)&&e.domain([n[0],n[r-1]])}},Att=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},Ptt=function(e,n){if(!n||n.length!==2||!Pn(n[0])||!Pn(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),o=[e[0],e[1]];return(!Pn(e[0])||e[0]<r)&&(o[0]=r),(!Pn(e[1])||e[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<r&&(o[1]=r),o},Itt=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,s=0,a=0;a<n;++a){var l=ZE(e[a][r][1])?e[a][r][0]:e[a][r][1];l>=0?(e[a][r][0]=o,e[a][r][1]=o+l,o=e[a][r][1]):(e[a][r][0]=s,e[a][r][1]=s+l,s=e[a][r][1])}},Rtt=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,s=0;s<n;++s){var a=ZE(e[s][r][1])?e[s][r][0]:e[s][r][1];a>=0?(e[s][r][0]=o,e[s][r][1]=o+a,o=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},ktt={sign:Itt,expand:qVe,none:r1,silhouette:XVe,wiggle:YVe,positive:Rtt},Ott=function(e,n,r){var i=n.map(function(a){return a.props.dataKey}),o=ktt[r],s=GVe().keys(i).value(function(a,l){return+Eu(a,l,0)}).order(NB).offset(o);return s(e)},Ltt=function(e,n,r,i,o,s){if(!e)return null;var a=s?n.reverse():n,l={},d=a.reduce(function(p,g){var v=g.props,x=v.stackId,b=v.hide;if(b)return p;var w=g.props[r],S=p[w]||{hasStack:!1,stackGroups:{}};if(js(x)){var C=S.stackGroups[x]||{numericAxisId:r,cateAxisId:i,items:[]};C.items.push(g),S.hasStack=!0,S.stackGroups[x]=C}else S.stackGroups[JE("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[g]};return fd(fd({},p),{},Pb({},w,S))},l),h={};return Object.keys(d).reduce(function(p,g){var v=d[g];if(v.hasStack){var x={};v.stackGroups=Object.keys(v.stackGroups).reduce(function(b,w){var S=v.stackGroups[w];return fd(fd({},b),{},Pb({},w,{numericAxisId:r,cateAxisId:i,items:S.items,stackedData:Ott(e,S.items,o)}))},x)}return fd(fd({},p),{},Pb({},g,v))},h)},Dtt=function(e,n){var r=n.realScaleType,i=n.type,o=n.tickCount,s=n.originalDomain,a=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(o&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var d=e.domain();if(!d.length)return null;var h=ett(d,o,a);return e.domain([tL(h),eL(h)]),{niceTicks:h}}if(o&&i==="number"){var p=e.domain(),g=ttt(p,o,a);return{niceTicks:g}}return null};function vY(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,o=t.index,s=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Qr(i[e.dataKey])){var a=TI(n,"value",i[e.dataKey]);if(a)return a.coordinate+r/2}return n[o]?n[o].coordinate+r/2:null}var l=Eu(i,Qr(s)?e.dataKey:s);return Qr(l)?null:e.scale(l)}var _Y=function(e){var n=e.axis,r=e.ticks,i=e.offset,o=e.bandSize,s=e.entry,a=e.index;if(n.type==="category")return r[a]?r[a].coordinate+i:null;var l=Eu(s,n.dataKey,n.domain[a]);return Qr(l)?null:n.scale(l)-o/2+i},Ntt=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);return i<=0&&o>=0?0:o<0?o:i}return r[0]},ztt=function(e,n){var r=e.props.stackId;if(js(r)){var i=n[r];if(i){var o=i.items.indexOf(e);return o>=0?i.stackedData[o]:null}}return null},Ftt=function(e){return e.reduce(function(n,r){return[tL(r.concat([n[0]]).filter(Pn)),eL(r.concat([n[1]]).filter(Pn))]},[1/0,-1/0])},Sce=function(e,n,r){return Object.keys(e).reduce(function(i,o){var s=e[o],a=s.stackedData,l=a.reduce(function(d,h){var p=Ftt(h.slice(n,r+1));return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},xY=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,bY=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,d4=function(e,n,r){if(qr(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(Pn(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(xY.test(e[0])){var o=+xY.exec(e[0])[1];i[0]=n[0]-o}else qr(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(Pn(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(bY.test(e[1])){var s=+bY.exec(e[1])[1];i[1]=n[1]+s}else qr(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},tR=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var o=D6(n,function(p){return p.coordinate}),s=1/0,a=1,l=o.length;a<l;a++){var d=o[a],h=o[a-1];s=Math.min((d.coordinate||0)-(h.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},wY=function(e,n,r){return!e||!e.length||nL(e,wd(r,"type.defaultProps.domain"))?n:e},Mce=function(e,n){var r=e.props,i=r.dataKey,o=r.name,s=r.unit,a=r.formatter,l=r.tooltipType,d=r.chartType,h=r.hide;return fd(fd({},ii(e,!1)),{},{dataKey:i,unit:s,formatter:a,name:o||i,color:s8(e),value:Eu(n,i),type:l,payload:n,chartType:d,hide:h})};function OM(t){"@babel/helpers - typeof";return OM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OM(t)}function SY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function MY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SY(Object(n),!0).forEach(function(r){Btt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Btt(t,e,n){return e=jtt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jtt(t){var e=$tt(t,"string");return OM(e)=="symbol"?e:String(e)}function $tt(t,e){if(OM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(OM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nR=Math.PI/180,Utt=function(e){return e*180/Math.PI},Da=function(e,n,r,i){return{x:e+Math.cos(-nR*i)*r,y:n+Math.sin(-nR*i)*r}},Vtt=function(e,n){var r=e.x,i=e.y,o=n.x,s=n.y;return Math.sqrt(Math.pow(r-o,2)+Math.pow(i-s,2))},Htt=function(e,n){var r=e.x,i=e.y,o=n.cx,s=n.cy,a=Vtt({x:r,y:i},{x:o,y:s});if(a<=0)return{radius:a};var l=(r-o)/a,d=Math.acos(l);return i>s&&(d=2*Math.PI-d),{radius:a,angle:Utt(d),angleInRadian:d}},Wtt=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),o=Math.floor(r/360),s=Math.min(i,o);return{startAngle:n-s*360,endAngle:r-s*360}},Gtt=function(e,n){var r=n.startAngle,i=n.endAngle,o=Math.floor(r/360),s=Math.floor(i/360),a=Math.min(o,s);return e+a*360},EY=function(e,n){var r=e.x,i=e.y,o=Htt({x:r,y:i},n),s=o.radius,a=o.angle,l=n.innerRadius,d=n.outerRadius;if(s<l||s>d)return!1;if(s===0)return!0;var h=Wtt(n),p=h.startAngle,g=h.endAngle,v=a,x;if(p<=g){for(;v>g;)v-=360;for(;v<p;)v+=360;x=v>=p&&v<=g}else{for(;v>p;)v-=360;for(;v<g;)v+=360;x=v>=g&&v<=p}return x?MY(MY({},n),{},{radius:s,angle:Gtt(v,n)}):null};function LM(t){"@babel/helpers - typeof";return LM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},LM(t)}var qtt=["offset"];function Xtt(t){return Jtt(t)||Ztt(t)||Ktt(t)||Ytt()}function Ytt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ktt(t,e){if(t){if(typeof t=="string")return h4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h4(t,e)}}function Ztt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Jtt(t){if(Array.isArray(t))return h4(t)}function h4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Qtt(t,e){if(t==null)return{};var n=ent(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ent(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function TY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ns(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TY(Object(n),!0).forEach(function(r){tnt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tnt(t,e,n){return e=nnt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nnt(t){var e=rnt(t,"string");return LM(e)=="symbol"?e:String(e)}function rnt(t,e){if(LM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(LM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DM(){return DM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DM.apply(this,arguments)}var int=function(e){var n=e.value,r=e.formatter,i=Qr(e.children)?n:e.children;return qr(r)?r(i):i},ont=function(e,n){var r=Sh(n-e),i=Math.min(Math.abs(n-e),360);return r*i},snt=function(e,n,r){var i=e.position,o=e.viewBox,s=e.offset,a=e.className,l=o,d=l.cx,h=l.cy,p=l.innerRadius,g=l.outerRadius,v=l.startAngle,x=l.endAngle,b=l.clockWise,w=(p+g)/2,S=ont(v,x),C=S>=0?1:-1,A,P;i==="insideStart"?(A=v+C*s,P=b):i==="insideEnd"?(A=x-C*s,P=!b):i==="end"&&(A=x+C*s,P=b),P=S<=0?P:!P;var k=Da(d,h,w,A),F=Da(d,h,w,A+(P?1:-1)*359),B="M".concat(k.x,",").concat(k.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(P?0:1,`,
    `).concat(F.x,",").concat(F.y),W=Qr(e.id)?JE("recharts-radial-line-"):e.id;return Ye.createElement("text",DM({},r,{dominantBaseline:"central",className:Wt("recharts-radial-bar-label",a)}),Ye.createElement("defs",null,Ye.createElement("path",{id:W,d:B})),Ye.createElement("textPath",{xlinkHref:"#".concat(W)},n))},ant=function(e){var n=e.viewBox,r=e.offset,i=e.position,o=n,s=o.cx,a=o.cy,l=o.innerRadius,d=o.outerRadius,h=o.startAngle,p=o.endAngle,g=(h+p)/2;if(i==="outside"){var v=Da(s,a,d+r,g),x=v.x,b=v.y;return{x,y:b,textAnchor:x>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"end"};var w=(l+d)/2,S=Da(s,a,w,g),C=S.x,A=S.y;return{x:C,y:A,textAnchor:"middle",verticalAnchor:"middle"}},lnt=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,o=e.position,s=n,a=s.x,l=s.y,d=s.width,h=s.height,p=h>=0?1:-1,g=p*i,v=p>0?"end":"start",x=p>0?"start":"end",b=d>=0?1:-1,w=b*i,S=b>0?"end":"start",C=b>0?"start":"end";if(o==="top"){var A={x:a+d/2,y:l-p*i,textAnchor:"middle",verticalAnchor:v};return Ns(Ns({},A),r?{height:Math.max(l-r.y,0),width:d}:{})}if(o==="bottom"){var P={x:a+d/2,y:l+h+g,textAnchor:"middle",verticalAnchor:x};return Ns(Ns({},P),r?{height:Math.max(r.y+r.height-(l+h),0),width:d}:{})}if(o==="left"){var k={x:a-w,y:l+h/2,textAnchor:S,verticalAnchor:"middle"};return Ns(Ns({},k),r?{width:Math.max(k.x-r.x,0),height:h}:{})}if(o==="right"){var F={x:a+d+w,y:l+h/2,textAnchor:C,verticalAnchor:"middle"};return Ns(Ns({},F),r?{width:Math.max(r.x+r.width-F.x,0),height:h}:{})}var B=r?{width:d,height:h}:{};return o==="insideLeft"?Ns({x:a+w,y:l+h/2,textAnchor:C,verticalAnchor:"middle"},B):o==="insideRight"?Ns({x:a+d-w,y:l+h/2,textAnchor:S,verticalAnchor:"middle"},B):o==="insideTop"?Ns({x:a+d/2,y:l+g,textAnchor:"middle",verticalAnchor:x},B):o==="insideBottom"?Ns({x:a+d/2,y:l+h-g,textAnchor:"middle",verticalAnchor:v},B):o==="insideTopLeft"?Ns({x:a+w,y:l+g,textAnchor:C,verticalAnchor:x},B):o==="insideTopRight"?Ns({x:a+d-w,y:l+g,textAnchor:S,verticalAnchor:x},B):o==="insideBottomLeft"?Ns({x:a+w,y:l+h-g,textAnchor:C,verticalAnchor:v},B):o==="insideBottomRight"?Ns({x:a+d-w,y:l+h-g,textAnchor:S,verticalAnchor:v},B):nw(o)&&(Pn(o.x)||c0(o.x))&&(Pn(o.y)||c0(o.y))?Ns({x:a+W0(o.x,d),y:l+W0(o.y,h),textAnchor:"end",verticalAnchor:"end"},B):Ns({x:a+d/2,y:l+h/2,textAnchor:"middle",verticalAnchor:"middle"},B)},cnt=function(e){return"cx"in e&&Pn(e.cx)};function fl(t){var e=t.offset,n=e===void 0?5:e,r=Qtt(t,qtt),i=Ns({offset:n},r),o=i.viewBox,s=i.position,a=i.value,l=i.children,d=i.content,h=i.className,p=h===void 0?"":h,g=i.textBreakAll;if(!o||Qr(a)&&Qr(l)&&!V.isValidElement(d)&&!qr(d))return null;if(V.isValidElement(d))return V.cloneElement(d,i);var v;if(qr(d)){if(v=V.createElement(d,i),V.isValidElement(v))return v}else v=int(i);var x=cnt(o),b=ii(i,!0);if(x&&(s==="insideStart"||s==="insideEnd"||s==="end"))return snt(i,v,b);var w=x?ant(i):lnt(i);return Ye.createElement(UI,DM({className:Wt("recharts-label",p)},b,w,{breakAll:g}),v)}fl.displayName="Label";var Ece=function(e){var n=e.cx,r=e.cy,i=e.angle,o=e.startAngle,s=e.endAngle,a=e.r,l=e.radius,d=e.innerRadius,h=e.outerRadius,p=e.x,g=e.y,v=e.top,x=e.left,b=e.width,w=e.height,S=e.clockWise,C=e.labelViewBox;if(C)return C;if(Pn(b)&&Pn(w)){if(Pn(p)&&Pn(g))return{x:p,y:g,width:b,height:w};if(Pn(v)&&Pn(x))return{x:v,y:x,width:b,height:w}}return Pn(p)&&Pn(g)?{x:p,y:g,width:0,height:0}:Pn(n)&&Pn(r)?{cx:n,cy:r,startAngle:o||i||0,endAngle:s||i||0,innerRadius:d||0,outerRadius:h||l||a||0,clockWise:S}:e.viewBox?e.viewBox:{}},unt=function(e,n){return e?e===!0?Ye.createElement(fl,{key:"label-implicit",viewBox:n}):js(e)?Ye.createElement(fl,{key:"label-implicit",viewBox:n,value:e}):V.isValidElement(e)?e.type===fl?V.cloneElement(e,{key:"label-implicit",viewBox:n}):Ye.createElement(fl,{key:"label-implicit",content:e,viewBox:n}):qr(e)?Ye.createElement(fl,{key:"label-implicit",content:e,viewBox:n}):nw(e)?Ye.createElement(fl,DM({viewBox:n},e,{key:"label-implicit"})):null:null},dnt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,o=Ece(e),s=Sd(i,fl).map(function(l,d){return V.cloneElement(l,{viewBox:n||o,key:"label-".concat(d)})});if(!r)return s;var a=unt(e.label,n||o);return[a].concat(Xtt(s))};fl.parseViewBox=Ece;fl.renderCallByParent=dnt;function hnt(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var fnt=hnt;const pnt=Mi(fnt);function NM(t){"@babel/helpers - typeof";return NM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NM(t)}var mnt=["valueAccessor"],gnt=["data","dataKey","clockWise","id","textBreakAll"];function ynt(t){return bnt(t)||xnt(t)||_nt(t)||vnt()}function vnt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _nt(t,e){if(t){if(typeof t=="string")return f4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f4(t,e)}}function xnt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function bnt(t){if(Array.isArray(t))return f4(t)}function f4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rR(){return rR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rR.apply(this,arguments)}function CY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CY(Object(n),!0).forEach(function(r){wnt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wnt(t,e,n){return e=Snt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Snt(t){var e=Mnt(t,"string");return NM(e)=="symbol"?e:String(e)}function Mnt(t,e){if(NM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(NM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function PY(t,e){if(t==null)return{};var n=Ent(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ent(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Tnt=function(e){return Array.isArray(e.value)?pnt(e.value):e.value};function wy(t){var e=t.valueAccessor,n=e===void 0?Tnt:e,r=PY(t,mnt),i=r.data,o=r.dataKey,s=r.clockWise,a=r.id,l=r.textBreakAll,d=PY(r,gnt);return!i||!i.length?null:Ye.createElement(us,{className:"recharts-label-list"},i.map(function(h,p){var g=Qr(o)?n(h,p):Eu(h&&h.payload,o),v=Qr(a)?{}:{id:"".concat(a,"-").concat(p)};return Ye.createElement(fl,rR({},ii(h,!0),d,v,{parentViewBox:h.parentViewBox,value:g,textBreakAll:l,viewBox:fl.parseViewBox(Qr(s)?h:AY(AY({},h),{},{clockWise:s})),key:"label-".concat(p),index:p}))}))}wy.displayName="LabelList";function Cnt(t,e){return t?t===!0?Ye.createElement(wy,{key:"labelList-implicit",data:e}):Ye.isValidElement(t)||qr(t)?Ye.createElement(wy,{key:"labelList-implicit",data:e,content:t}):nw(t)?Ye.createElement(wy,rR({data:e},t,{key:"labelList-implicit"})):null:null}function Ant(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=Sd(r,wy).map(function(s,a){return V.cloneElement(s,{data:e,key:"labelList-".concat(a)})});if(!n)return i;var o=Cnt(t.label,e);return[o].concat(ynt(i))}wy.renderCallByParent=Ant;function zM(t){"@babel/helpers - typeof";return zM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zM(t)}function p4(){return p4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p4.apply(this,arguments)}function IY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IY(Object(n),!0).forEach(function(r){Pnt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pnt(t,e,n){return e=Int(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Int(t){var e=Rnt(t,"string");return zM(e)=="symbol"?e:String(e)}function Rnt(t,e){if(zM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(zM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var knt=function(e,n){var r=Sh(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},$C=function(e){var n=e.cx,r=e.cy,i=e.radius,o=e.angle,s=e.sign,a=e.isExternal,l=e.cornerRadius,d=e.cornerIsExternal,h=l*(a?1:-1)+i,p=Math.asin(l/h)/nR,g=d?o:o+s*p,v=Da(n,r,h,g),x=Da(n,r,i,g),b=d?o-s*p:o,w=Da(n,r,h*Math.cos(p*nR),b);return{center:v,circleTangency:x,lineTangency:w,theta:p}},Tce=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,s=e.startAngle,a=e.endAngle,l=knt(s,a),d=s+l,h=Da(n,r,o,s),p=Da(n,r,o,d),g="M ".concat(h.x,",").concat(h.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>d),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(i>0){var v=Da(n,r,i,s),x=Da(n,r,i,d);g+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=d),`,
            `).concat(v.x,",").concat(v.y," Z")}else g+="L ".concat(n,",").concat(r," Z");return g},Ont=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,s=e.cornerRadius,a=e.forceCornerRadius,l=e.cornerIsExternal,d=e.startAngle,h=e.endAngle,p=Sh(h-d),g=$C({cx:n,cy:r,radius:o,angle:d,sign:p,cornerRadius:s,cornerIsExternal:l}),v=g.circleTangency,x=g.lineTangency,b=g.theta,w=$C({cx:n,cy:r,radius:o,angle:h,sign:-p,cornerRadius:s,cornerIsExternal:l}),S=w.circleTangency,C=w.lineTangency,A=w.theta,P=l?Math.abs(d-h):Math.abs(d-h)-b-A;if(P<0)return a?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):Tce({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:d,endAngle:h});var k="M ".concat(x.x,",").concat(x.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(P>180),",").concat(+(p<0),",").concat(S.x,",").concat(S.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(C.x,",").concat(C.y,`
  `);if(i>0){var F=$C({cx:n,cy:r,radius:i,angle:d,sign:p,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),B=F.circleTangency,W=F.lineTangency,J=F.theta,H=$C({cx:n,cy:r,radius:i,angle:h,sign:-p,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),Y=H.circleTangency,le=H.lineTangency,pe=H.theta,re=l?Math.abs(d-h):Math.abs(d-h)-J-pe;if(re<0&&s===0)return"".concat(k,"L").concat(n,",").concat(r,"Z");k+="L".concat(le.x,",").concat(le.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(Y.x,",").concat(Y.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(re>180),",").concat(+(p>0),",").concat(B.x,",").concat(B.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(W.x,",").concat(W.y,"Z")}else k+="L".concat(n,",").concat(r,"Z");return k},Lnt={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Cce=function(e){var n=RY(RY({},Lnt),e),r=n.cx,i=n.cy,o=n.innerRadius,s=n.outerRadius,a=n.cornerRadius,l=n.forceCornerRadius,d=n.cornerIsExternal,h=n.startAngle,p=n.endAngle,g=n.className;if(s<o||h===p)return null;var v=Wt("recharts-sector",g),x=s-o,b=W0(a,x,0,!0),w;return b>0&&Math.abs(h-p)<360?w=Ont({cx:r,cy:i,innerRadius:o,outerRadius:s,cornerRadius:Math.min(b,x/2),forceCornerRadius:l,cornerIsExternal:d,startAngle:h,endAngle:p}):w=Tce({cx:r,cy:i,innerRadius:o,outerRadius:s,startAngle:h,endAngle:p}),Ye.createElement("path",p4({},ii(n,!0),{className:v,d:w,role:"img"}))};function FM(t){"@babel/helpers - typeof";return FM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FM(t)}function m4(){return m4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m4.apply(this,arguments)}function kY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function OY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kY(Object(n),!0).forEach(function(r){Dnt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dnt(t,e,n){return e=Nnt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nnt(t){var e=znt(t,"string");return FM(e)=="symbol"?e:String(e)}function znt(t,e){if(FM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(FM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var LY={curveBasisClosed:DVe,curveBasisOpen:NVe,curveBasis:LVe,curveBumpX:xVe,curveBumpY:bVe,curveLinearClosed:zVe,curveLinear:VO,curveMonotoneX:FVe,curveMonotoneY:BVe,curveNatural:jVe,curveStep:$Ve,curveStepAfter:VVe,curveStepBefore:UVe},UC=function(e){return e.x===+e.x&&e.y===+e.y},ES=function(e){return e.x},TS=function(e){return e.y},Fnt=function(e,n){if(qr(e))return e;var r="curve".concat($O(e));return(r==="curveMonotone"||r==="curveBump")&&n?LY["".concat(r).concat(n==="vertical"?"Y":"X")]:LY[r]||VO},Bnt=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,o=i===void 0?[]:i,s=e.baseLine,a=e.layout,l=e.connectNulls,d=l===void 0?!1:l,h=Fnt(r,a),p=d?o.filter(function(b){return UC(b)}):o,g;if(Array.isArray(s)){var v=d?s.filter(function(b){return UC(b)}):s,x=p.map(function(b,w){return OY(OY({},b),{},{base:v[w]})});return a==="vertical"?g=kC().y(TS).x1(ES).x0(function(b){return b.base.x}):g=kC().x(ES).y1(TS).y0(function(b){return b.base.y}),g.defined(UC).curve(h),g(x)}return a==="vertical"&&Pn(s)?g=kC().y(TS).x1(ES).x0(s):Pn(s)?g=kC().x(ES).y1(TS).y0(s):g=Cae().x(ES).y(TS),g.defined(UC).curve(h),g(p)},g4=function(e){var n=e.className,r=e.points,i=e.path,o=e.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?Bnt(e):i;return Ye.createElement("path",m4({},ii(e,!1),CI(e),{className:Wt("recharts-curve",n),d:s,ref:o}))},jnt=Object.getOwnPropertyNames,$nt=Object.getOwnPropertySymbols,Unt=Object.prototype.hasOwnProperty;function DY(t,e){return function(r,i,o){return t(r,i,o)&&e(r,i,o)}}function VC(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var o=i.cache,s=o.get(n),a=o.get(r);if(s&&a)return s===r&&a===n;o.set(n,r),o.set(r,n);var l=t(n,r,i);return o.delete(n),o.delete(r),l}}function NY(t){return jnt(t).concat($nt(t))}var Ace=Object.hasOwn||function(t,e){return Unt.call(t,e)};function hw(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var Pce="_owner",zY=Object.getOwnPropertyDescriptor,FY=Object.keys;function Vnt(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function Hnt(t,e){return hw(t.getTime(),e.getTime())}function BY(t,e,n){if(t.size!==e.size)return!1;for(var r={},i=t.entries(),o=0,s,a;(s=i.next())&&!s.done;){for(var l=e.entries(),d=!1,h=0;(a=l.next())&&!a.done;){var p=s.value,g=p[0],v=p[1],x=a.value,b=x[0],w=x[1];!d&&!r[h]&&(d=n.equals(g,b,o,h,t,e,n)&&n.equals(v,w,g,b,t,e,n))&&(r[h]=!0),h++}if(!d)return!1;o++}return!0}function Wnt(t,e,n){var r=FY(t),i=r.length;if(FY(e).length!==i)return!1;for(var o;i-- >0;)if(o=r[i],o===Pce&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!Ace(e,o)||!n.equals(t[o],e[o],o,o,t,e,n))return!1;return!0}function CS(t,e,n){var r=NY(t),i=r.length;if(NY(e).length!==i)return!1;for(var o,s,a;i-- >0;)if(o=r[i],o===Pce&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!Ace(e,o)||!n.equals(t[o],e[o],o,o,t,e,n)||(s=zY(t,o),a=zY(e,o),(s||a)&&(!s||!a||s.configurable!==a.configurable||s.enumerable!==a.enumerable||s.writable!==a.writable)))return!1;return!0}function Gnt(t,e){return hw(t.valueOf(),e.valueOf())}function qnt(t,e){return t.source===e.source&&t.flags===e.flags}function jY(t,e,n){if(t.size!==e.size)return!1;for(var r={},i=t.values(),o,s;(o=i.next())&&!o.done;){for(var a=e.values(),l=!1,d=0;(s=a.next())&&!s.done;)!l&&!r[d]&&(l=n.equals(o.value,s.value,o.value,s.value,t,e,n))&&(r[d]=!0),d++;if(!l)return!1}return!0}function Xnt(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}var Ynt="[object Arguments]",Knt="[object Boolean]",Znt="[object Date]",Jnt="[object Map]",Qnt="[object Number]",ert="[object Object]",trt="[object RegExp]",nrt="[object Set]",rrt="[object String]",irt=Array.isArray,$Y=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,UY=Object.assign,ort=Object.prototype.toString.call.bind(Object.prototype.toString);function srt(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areMapsEqual,i=t.areObjectsEqual,o=t.arePrimitiveWrappersEqual,s=t.areRegExpsEqual,a=t.areSetsEqual,l=t.areTypedArraysEqual;return function(h,p,g){if(h===p)return!0;if(h==null||p==null||typeof h!="object"||typeof p!="object")return h!==h&&p!==p;var v=h.constructor;if(v!==p.constructor)return!1;if(v===Object)return i(h,p,g);if(irt(h))return e(h,p,g);if($Y!=null&&$Y(h))return l(h,p,g);if(v===Date)return n(h,p,g);if(v===RegExp)return s(h,p,g);if(v===Map)return r(h,p,g);if(v===Set)return a(h,p,g);var x=ort(h);return x===Znt?n(h,p,g):x===trt?s(h,p,g):x===Jnt?r(h,p,g):x===nrt?a(h,p,g):x===ert?typeof h.then!="function"&&typeof p.then!="function"&&i(h,p,g):x===Ynt?i(h,p,g):x===Knt||x===Qnt||x===rrt?o(h,p,g):!1}}function art(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?CS:Vnt,areDatesEqual:Hnt,areMapsEqual:r?DY(BY,CS):BY,areObjectsEqual:r?CS:Wnt,arePrimitiveWrappersEqual:Gnt,areRegExpsEqual:qnt,areSetsEqual:r?DY(jY,CS):jY,areTypedArraysEqual:r?CS:Xnt};if(n&&(i=UY({},i,n(i))),e){var o=VC(i.areArraysEqual),s=VC(i.areMapsEqual),a=VC(i.areObjectsEqual),l=VC(i.areSetsEqual);i=UY({},i,{areArraysEqual:o,areMapsEqual:s,areObjectsEqual:a,areSetsEqual:l})}return i}function lrt(t){return function(e,n,r,i,o,s,a){return t(e,n,a)}}function crt(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,o=t.strict;if(r)return function(l,d){var h=r(),p=h.cache,g=p===void 0?e?new WeakMap:void 0:p,v=h.meta;return n(l,d,{cache:g,equals:i,meta:v,strict:o})};if(e)return function(l,d){return n(l,d,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var s={cache:void 0,equals:i,meta:void 0,strict:o};return function(l,d){return n(l,d,s)}}var urt=Xy();Xy({strict:!0});Xy({circular:!0});Xy({circular:!0,strict:!0});Xy({createInternalComparator:function(){return hw}});Xy({strict:!0,createInternalComparator:function(){return hw}});Xy({circular:!0,createInternalComparator:function(){return hw}});Xy({circular:!0,createInternalComparator:function(){return hw},strict:!0});function Xy(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,o=t.strict,s=o===void 0?!1:o,a=art(t),l=srt(a),d=r?r(l):lrt(l);return crt({circular:n,comparator:l,createState:i,equals:d,strict:s})}function drt(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function VY(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(o){n<0&&(n=o),o-n>e?(t(o),n=-1):drt(i)};requestAnimationFrame(r)}function y4(t){"@babel/helpers - typeof";return y4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y4(t)}function hrt(t){return grt(t)||mrt(t)||prt(t)||frt()}function frt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function prt(t,e){if(t){if(typeof t=="string")return HY(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HY(t,e)}}function HY(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mrt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function grt(t){if(Array.isArray(t))return t}function yrt(){var t={},e=function(){return null},n=!1,r=function i(o){if(!n){if(Array.isArray(o)){if(!o.length)return;var s=o,a=hrt(s),l=a[0],d=a.slice(1);if(typeof l=="number"){VY(i.bind(null,d),l);return}i(l),VY(i.bind(null,d));return}y4(o)==="object"&&(t=o,e(t)),typeof o=="function"&&o()}};return{stop:function(){n=!0},start:function(o){n=!1,r(o)},subscribe:function(o){return e=o,function(){e=function(){return null}}}}}function BM(t){"@babel/helpers - typeof";return BM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BM(t)}function WY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function GY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WY(Object(n),!0).forEach(function(r){Ice(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ice(t,e,n){return e=vrt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vrt(t){var e=_rt(t,"string");return BM(e)==="symbol"?e:String(e)}function _rt(t,e){if(BM(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(BM(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xrt=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(o){return i.includes(o)})})},brt=function(e){return e},wrt=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},T2=function(e,n){return Object.keys(n).reduce(function(r,i){return GY(GY({},r),{},Ice({},i,e(i,n[i])))},{})},qY=function(e,n,r){return e.map(function(i){return"".concat(wrt(i)," ").concat(n,"ms ").concat(r)}).join(",")};function Srt(t,e){return Trt(t)||Ert(t,e)||Rce(t,e)||Mrt()}function Mrt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ert(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,d=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(h){d=!0,i=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return a}}function Trt(t){if(Array.isArray(t))return t}function Crt(t){return Irt(t)||Prt(t)||Rce(t)||Art()}function Art(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rce(t,e){if(t){if(typeof t=="string")return v4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v4(t,e)}}function Prt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Irt(t){if(Array.isArray(t))return v4(t)}function v4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var iR=1e-4,kce=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},Oce=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},XY=function(e,n){return function(r){var i=kce(e,n);return Oce(i,r)}},Rrt=function(e,n){return function(r){var i=kce(e,n),o=[].concat(Crt(i.map(function(s,a){return s*a}).slice(1)),[0]);return Oce(o,r)}},YY=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],o=n[1],s=n[2],a=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,o=0,s=1,a=1;break;case"ease":i=.25,o=.1,s=.25,a=1;break;case"ease-in":i=.42,o=0,s=1,a=1;break;case"ease-out":i=.42,o=0,s=.58,a=1;break;case"ease-in-out":i=0,o=0,s=.58,a=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var d=l[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),h=Srt(d,4);i=h[0],o=h[1],s=h[2],a=h[3]}}}var p=XY(i,s),g=XY(o,a),v=Rrt(i,s),x=function(S){return S>1?1:S<0?0:S},b=function(S){for(var C=S>1?1:S,A=C,P=0;P<8;++P){var k=p(A)-C,F=v(A);if(Math.abs(k-C)<iR||F<iR)return g(A);A=x(A-k/F)}return g(A)};return b.isStepper=!1,b},krt=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,o=i===void 0?8:i,s=e.dt,a=s===void 0?17:s,l=function(h,p,g){var v=-(h-p)*r,x=g*o,b=g+(v-x)*a/1e3,w=g*a/1e3+h;return Math.abs(w-p)<iR&&Math.abs(b)<iR?[p,0]:[w,b]};return l.isStepper=!0,l.dt=a,l},Ort=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return YY(i);case"spring":return krt();default:if(i.split("(")[0]==="cubic-bezier")return YY(i)}return typeof i=="function"?i:null};function jM(t){"@babel/helpers - typeof";return jM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jM(t)}function KY(t){return Nrt(t)||Drt(t)||Lce(t)||Lrt()}function Lrt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Drt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Nrt(t){if(Array.isArray(t))return x4(t)}function ZY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ca(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZY(Object(n),!0).forEach(function(r){_4(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _4(t,e,n){return e=zrt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zrt(t){var e=Frt(t,"string");return jM(e)==="symbol"?e:String(e)}function Frt(t,e){if(jM(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(jM(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Brt(t,e){return Urt(t)||$rt(t,e)||Lce(t,e)||jrt()}function jrt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lce(t,e){if(t){if(typeof t=="string")return x4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x4(t,e)}}function x4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $rt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,d=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(h){d=!0,i=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return a}}function Urt(t){if(Array.isArray(t))return t}var oR=function(e,n,r){return e+(n-e)*r},b4=function(e){var n=e.from,r=e.to;return n!==r},Vrt=function t(e,n,r){var i=T2(function(o,s){if(b4(s)){var a=e(s.from,s.to,s.velocity),l=Brt(a,2),d=l[0],h=l[1];return Ca(Ca({},s),{},{from:d,velocity:h})}return s},n);return r<1?T2(function(o,s){return b4(s)?Ca(Ca({},s),{},{velocity:oR(s.velocity,i[o].velocity,r),from:oR(s.from,i[o].from,r)}):s},n):t(e,i,r-1)};const Hrt=function(t,e,n,r,i){var o=xrt(t,e),s=o.reduce(function(w,S){return Ca(Ca({},w),{},_4({},S,[t[S],e[S]]))},{}),a=o.reduce(function(w,S){return Ca(Ca({},w),{},_4({},S,{from:t[S],velocity:0,to:e[S]}))},{}),l=-1,d,h,p=function(){return null},g=function(){return T2(function(S,C){return C.from},a)},v=function(){return!Object.values(a).filter(b4).length},x=function(S){d||(d=S);var C=S-d,A=C/n.dt;a=Vrt(n,a,A),i(Ca(Ca(Ca({},t),e),g())),d=S,v()||(l=requestAnimationFrame(p))},b=function(S){h||(h=S);var C=(S-h)/r,A=T2(function(k,F){return oR.apply(void 0,KY(F).concat([n(C)]))},s);if(i(Ca(Ca(Ca({},t),e),A)),C<1)l=requestAnimationFrame(p);else{var P=T2(function(k,F){return oR.apply(void 0,KY(F).concat([n(1)]))},s);i(Ca(Ca(Ca({},t),e),P))}};return p=n.isStepper?x:b,function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(l)}}};function h1(t){"@babel/helpers - typeof";return h1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h1(t)}var Wrt=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Grt(t,e){if(t==null)return{};var n=qrt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qrt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function EN(t){return Zrt(t)||Krt(t)||Yrt(t)||Xrt()}function Xrt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yrt(t,e){if(t){if(typeof t=="string")return w4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w4(t,e)}}function Krt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Zrt(t){if(Array.isArray(t))return w4(t)}function w4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function JY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ih(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JY(Object(n),!0).forEach(function(r){QS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QS(t,e,n){return e=Dce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jrt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qrt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Dce(r.key),r)}}function eit(t,e,n){return e&&Qrt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dce(t){var e=tit(t,"string");return h1(e)==="symbol"?e:String(e)}function tit(t,e){if(h1(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(h1(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nit(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S4(t,e)}function S4(t,e){return S4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},S4(t,e)}function rit(t){var e=iit();return function(){var r=sR(t),i;if(e){var o=sR(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return M4(this,i)}}function M4(t,e){if(e&&(h1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E4(t)}function E4(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iit(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function sR(t){return sR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sR(t)}var Tm=function(t){nit(n,t);var e=rit(n);function n(r,i){var o;Jrt(this,n),o=e.call(this,r,i);var s=o.props,a=s.isActive,l=s.attributeName,d=s.from,h=s.to,p=s.steps,g=s.children,v=s.duration;if(o.handleStyleChange=o.handleStyleChange.bind(E4(o)),o.changeStyle=o.changeStyle.bind(E4(o)),!a||v<=0)return o.state={style:{}},typeof g=="function"&&(o.state={style:h}),M4(o);if(p&&p.length)o.state={style:p[0].style};else if(d){if(typeof g=="function")return o.state={style:d},M4(o);o.state={style:l?QS({},l,d):d}}else o.state={style:{}};return o}return eit(n,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,s=i.canBegin;this.mounted=!0,!(!o||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,s=o.isActive,a=o.canBegin,l=o.attributeName,d=o.shouldReAnimate,h=o.to,p=o.from,g=this.state.style;if(a){if(!s){var v={style:l?QS({},l,h):h};this.state&&g&&(l&&g[l]!==h||!l&&g!==h)&&this.setState(v);return}if(!(urt(i.to,h)&&i.canBegin&&i.isActive)){var x=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var b=x||d?p:i.to;if(this.state&&g){var w={style:l?QS({},l,b):b};(l&&g[l]!==b||!l&&g!==b)&&this.setState(w)}this.runAnimation(ih(ih({},this.props),{},{from:b,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,s=i.from,a=i.to,l=i.duration,d=i.easing,h=i.begin,p=i.onAnimationEnd,g=i.onAnimationStart,v=Hrt(s,a,Ort(d),l,this.changeStyle),x=function(){o.stopJSAnimation=v()};this.manager.start([g,h,x,l,p])}},{key:"runStepAnimation",value:function(i){var o=this,s=i.steps,a=i.begin,l=i.onAnimationStart,d=s[0],h=d.style,p=d.duration,g=p===void 0?0:p,v=function(b,w,S){if(S===0)return b;var C=w.duration,A=w.easing,P=A===void 0?"ease":A,k=w.style,F=w.properties,B=w.onAnimationEnd,W=S>0?s[S-1]:w,J=F||Object.keys(k);if(typeof P=="function"||P==="spring")return[].concat(EN(b),[o.runJSAnimation.bind(o,{from:W.style,to:k,duration:C,easing:P}),C]);var H=qY(J,C,P),Y=ih(ih(ih({},W.style),k),{},{transition:H});return[].concat(EN(b),[Y,C,B]).filter(brt)};return this.manager.start([l].concat(EN(s.reduce(v,[h,Math.max(g,a)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=yrt());var o=i.begin,s=i.duration,a=i.attributeName,l=i.to,d=i.easing,h=i.onAnimationStart,p=i.onAnimationEnd,g=i.steps,v=i.children,x=this.manager;if(this.unSubscribe=x.subscribe(this.handleStyleChange),typeof d=="function"||typeof v=="function"||d==="spring"){this.runJSAnimation(i);return}if(g.length>1){this.runStepAnimation(i);return}var b=a?QS({},a,l):l,w=qY(Object.keys(b),s,d);x.start([h,o,ih(ih({},b),{},{transition:w}),s,p])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var a=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=Grt(i,Wrt),d=V.Children.count(o),h=this.state.style;if(typeof o=="function")return o(h);if(!a||d===0||s<=0)return o;var p=function(v){var x=v.props,b=x.style,w=b===void 0?{}:b,S=x.className,C=V.cloneElement(v,ih(ih({},l),{},{style:ih(ih({},w),h),className:S}));return C};return d===1?p(V.Children.only(o)):Ye.createElement("div",null,V.Children.map(o,function(g){return p(g)}))}}]),n}(V.PureComponent);Tm.displayName="Animate";Tm.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Tm.propTypes={from:Nr.oneOfType([Nr.object,Nr.string]),to:Nr.oneOfType([Nr.object,Nr.string]),attributeName:Nr.string,duration:Nr.number,begin:Nr.number,easing:Nr.oneOfType([Nr.string,Nr.func]),steps:Nr.arrayOf(Nr.shape({duration:Nr.number.isRequired,style:Nr.object.isRequired,easing:Nr.oneOfType([Nr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Nr.func]),properties:Nr.arrayOf("string"),onAnimationEnd:Nr.func})),children:Nr.oneOfType([Nr.node,Nr.func]),isActive:Nr.bool,canBegin:Nr.bool,onAnimationEnd:Nr.func,shouldReAnimate:Nr.bool,onAnimationStart:Nr.func,onAnimationReStart:Nr.func};Nr.object,Nr.object,Nr.object,Nr.element;Nr.object,Nr.object,Nr.object,Nr.oneOfType([Nr.array,Nr.element]),Nr.any;function $M(t){"@babel/helpers - typeof";return $M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$M(t)}function aR(){return aR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aR.apply(this,arguments)}function oit(t,e){return cit(t)||lit(t,e)||ait(t,e)||sit()}function sit(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ait(t,e){if(t){if(typeof t=="string")return QY(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QY(t,e)}}function QY(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lit(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,d=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(h){d=!0,i=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return a}}function cit(t){if(Array.isArray(t))return t}function eK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eK(Object(n),!0).forEach(function(r){uit(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uit(t,e,n){return e=dit(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dit(t){var e=hit(t,"string");return $M(e)=="symbol"?e:String(e)}function hit(t,e){if($M(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if($M(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nK=function(e,n,r,i,o){var s=Math.min(Math.abs(r)/2,Math.abs(i)/2),a=i>=0?1:-1,l=r>=0?1:-1,d=i>=0&&r>=0||i<0&&r<0?1:0,h;if(s>0&&o instanceof Array){for(var p=[0,0,0,0],g=0,v=4;g<v;g++)p[g]=o[g]>s?s:o[g];h="M".concat(e,",").concat(n+a*p[0]),p[0]>0&&(h+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(d,",").concat(e+l*p[0],",").concat(n)),h+="L ".concat(e+r-l*p[1],",").concat(n),p[1]>0&&(h+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(d,`,
        `).concat(e+r,",").concat(n+a*p[1])),h+="L ".concat(e+r,",").concat(n+i-a*p[2]),p[2]>0&&(h+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(d,`,
        `).concat(e+r-l*p[2],",").concat(n+i)),h+="L ".concat(e+l*p[3],",").concat(n+i),p[3]>0&&(h+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(n+i-a*p[3])),h+="Z"}else if(s>0&&o===+o&&o>0){var x=Math.min(s,o);h="M ".concat(e,",").concat(n+a*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+l*x,",").concat(n,`
            L `).concat(e+r-l*x,",").concat(n,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r,",").concat(n+a*x,`
            L `).concat(e+r,",").concat(n+i-a*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r-l*x,",").concat(n+i,`
            L `).concat(e+l*x,",").concat(n+i,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e,",").concat(n+i-a*x," Z")}else h="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return h},fit=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,o=n.x,s=n.y,a=n.width,l=n.height;if(Math.abs(a)>0&&Math.abs(l)>0){var d=Math.min(o,o+a),h=Math.max(o,o+a),p=Math.min(s,s+l),g=Math.max(s,s+l);return r>=d&&r<=h&&i>=p&&i<=g}return!1},pit={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},a8=function(e){var n=tK(tK({},pit),e),r=V.useRef(),i=V.useState(-1),o=oit(i,2),s=o[0],a=o[1];V.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var P=r.current.getTotalLength();P&&a(P)}catch{}},[]);var l=n.x,d=n.y,h=n.width,p=n.height,g=n.radius,v=n.className,x=n.animationEasing,b=n.animationDuration,w=n.animationBegin,S=n.isAnimationActive,C=n.isUpdateAnimationActive;if(l!==+l||d!==+d||h!==+h||p!==+p||h===0||p===0)return null;var A=Wt("recharts-rectangle",v);return C?Ye.createElement(Tm,{canBegin:s>0,from:{width:h,height:p,x:l,y:d},to:{width:h,height:p,x:l,y:d},duration:b,animationEasing:x,isActive:C},function(P){var k=P.width,F=P.height,B=P.x,W=P.y;return Ye.createElement(Tm,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:b,isActive:S,easing:x},Ye.createElement("path",aR({},ii(n,!0),{className:A,d:nK(B,W,k,F,g),ref:r})))}):Ye.createElement("path",aR({},ii(n,!0),{className:A,d:nK(l,d,h,p,g)}))};function T4(){return T4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},T4.apply(this,arguments)}var l8=function(e){var n=e.cx,r=e.cy,i=e.r,o=e.className,s=Wt("recharts-dot",o);return n===+n&&r===+r&&i===+i?Ye.createElement("circle",T4({},ii(e,!1),CI(e),{className:s,cx:n,cy:r,r:i})):null};function UM(t){"@babel/helpers - typeof";return UM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UM(t)}var mit=["x","y","top","left","width","height","className"];function C4(){return C4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},C4.apply(this,arguments)}function rK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function git(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rK(Object(n),!0).forEach(function(r){yit(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yit(t,e,n){return e=vit(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vit(t){var e=_it(t,"string");return UM(e)=="symbol"?e:String(e)}function _it(t,e){if(UM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(UM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xit(t,e){if(t==null)return{};var n=bit(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function bit(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var wit=function(e,n,r,i,o,s){return"M".concat(e,",").concat(o,"v").concat(i,"M").concat(s,",").concat(n,"h").concat(r)},Sit=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,s=e.top,a=s===void 0?0:s,l=e.left,d=l===void 0?0:l,h=e.width,p=h===void 0?0:h,g=e.height,v=g===void 0?0:g,x=e.className,b=xit(e,mit),w=git({x:r,y:o,top:a,left:d,width:p,height:v},b);return!Pn(r)||!Pn(o)||!Pn(p)||!Pn(v)||!Pn(a)||!Pn(d)?null:Ye.createElement("path",C4({},ii(w,!0),{className:Wt("recharts-cross",x),d:wit(r,o,p,v,a,d)}))},Mit=Zae,Eit=Mit(Object.getPrototypeOf,Object),Tit=Eit,Cit=Lm,Ait=Tit,Pit=Dm,Iit="[object Object]",Rit=Function.prototype,kit=Object.prototype,Nce=Rit.toString,Oit=kit.hasOwnProperty,Lit=Nce.call(Object);function Dit(t){if(!Pit(t)||Cit(t)!=Iit)return!1;var e=Ait(t);if(e===null)return!0;var n=Oit.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Nce.call(n)==Lit}var Nit=Dit;const zit=Mi(Nit);var Fit=Lm,Bit=Dm,jit="[object Boolean]";function $it(t){return t===!0||t===!1||Bit(t)&&Fit(t)==jit}var Uit=$it;const Vit=Mi(Uit);function VM(t){"@babel/helpers - typeof";return VM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VM(t)}function lR(){return lR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lR.apply(this,arguments)}function Hit(t,e){return Xit(t)||qit(t,e)||Git(t,e)||Wit()}function Wit(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Git(t,e){if(t){if(typeof t=="string")return iK(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iK(t,e)}}function iK(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qit(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,d=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(h){d=!0,i=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return a}}function Xit(t){if(Array.isArray(t))return t}function oK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oK(Object(n),!0).forEach(function(r){Yit(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yit(t,e,n){return e=Kit(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kit(t){var e=Zit(t,"string");return VM(e)=="symbol"?e:String(e)}function Zit(t,e){if(VM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(VM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var aK=function(e,n,r,i,o){var s=r-i,a;return a="M ".concat(e,",").concat(n),a+="L ".concat(e+r,",").concat(n),a+="L ".concat(e+r-s/2,",").concat(n+o),a+="L ".concat(e+r-s/2-i,",").concat(n+o),a+="L ".concat(e,",").concat(n," Z"),a},Jit={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Qit=function(e){var n=sK(sK({},Jit),e),r=V.useRef(),i=V.useState(-1),o=Hit(i,2),s=o[0],a=o[1];V.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var A=r.current.getTotalLength();A&&a(A)}catch{}},[]);var l=n.x,d=n.y,h=n.upperWidth,p=n.lowerWidth,g=n.height,v=n.className,x=n.animationEasing,b=n.animationDuration,w=n.animationBegin,S=n.isUpdateAnimationActive;if(l!==+l||d!==+d||h!==+h||p!==+p||g!==+g||h===0&&p===0||g===0)return null;var C=Wt("recharts-trapezoid",v);return S?Ye.createElement(Tm,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:g,x:l,y:d},to:{upperWidth:h,lowerWidth:p,height:g,x:l,y:d},duration:b,animationEasing:x,isActive:S},function(A){var P=A.upperWidth,k=A.lowerWidth,F=A.height,B=A.x,W=A.y;return Ye.createElement(Tm,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:b,easing:x},Ye.createElement("path",lR({},ii(n,!0),{className:C,d:aK(B,W,P,k,F),ref:r})))}):Ye.createElement("g",null,Ye.createElement("path",lR({},ii(n,!0),{className:C,d:aK(l,d,h,p,g)})))},eot=["option","shapeType","propTransformer","activeClassName","isActive"];function HM(t){"@babel/helpers - typeof";return HM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HM(t)}function tot(t,e){if(t==null)return{};var n=not(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function not(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function lK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lK(Object(n),!0).forEach(function(r){rot(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rot(t,e,n){return e=iot(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iot(t){var e=oot(t,"string");return HM(e)=="symbol"?e:String(e)}function oot(t,e){if(HM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(HM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sot(t,e){return cR(cR({},e),t)}function aot(t,e){return t==="symbols"}function cK(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return Ye.createElement(a8,n);case"trapezoid":return Ye.createElement(Qit,n);case"sector":return Ye.createElement(Cce,n);case"symbols":if(aot(e))return Ye.createElement(C6,n);break;default:return null}}function lot(t){return V.isValidElement(t)?t.props:t}function cot(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?sot:r,o=t.activeClassName,s=o===void 0?"recharts-active-shape":o,a=t.isActive,l=tot(t,eot),d;if(V.isValidElement(e))d=V.cloneElement(e,cR(cR({},l),lot(e)));else if(qr(e))d=e(l);else if(zit(e)&&!Vit(e)){var h=i(e,l);d=Ye.createElement(cK,{shapeType:n,elementProps:h})}else{var p=l;d=Ye.createElement(cK,{shapeType:n,elementProps:p})}return a?Ye.createElement(us,{className:s},d):d}function oL(t,e){return e!=null&&"trapezoids"in t.props}function sL(t,e){return e!=null&&"sectors"in t.props}function WM(t,e){return e!=null&&"points"in t.props}function uot(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,o=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&o}function dot(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function hot(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function fot(t,e){var n;return oL(t,e)?n=uot:sL(t,e)?n=dot:WM(t,e)&&(n=hot),n}function pot(t,e){var n;return oL(t,e)?n="trapezoids":sL(t,e)?n="sectors":WM(t,e)&&(n="points"),n}function mot(t,e){if(oL(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(sL(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return WM(t,e)?e.payload:{}}function got(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=pot(n,e),o=mot(n,e),s=r.filter(function(l,d){var h=nL(o,l),p=n.props[i].filter(function(x){var b=fot(n,e);return b(x,e)}),g=n.props[i].indexOf(p[p.length-1]),v=d===g;return h&&v}),a=r.indexOf(s[s.length-1]);return a}var yot=Math.ceil,vot=Math.max;function _ot(t,e,n,r){for(var i=-1,o=vot(yot((e-t)/(n||1)),0),s=Array(o);o--;)s[r?o:++i]=t,t+=n;return s}var xot=_ot,bot=yle,uK=1/0,wot=17976931348623157e292;function Sot(t){if(!t)return t===0?t:0;if(t=bot(t),t===uK||t===-uK){var e=t<0?-1:1;return e*wot}return t===t?t:0}var zce=Sot,Mot=xot,Eot=qO,TN=zce;function Tot(t){return function(e,n,r){return r&&typeof r!="number"&&Eot(e,n,r)&&(n=r=void 0),e=TN(e),n===void 0?(n=e,e=0):n=TN(n),r=r===void 0?e<n?1:-1:TN(r),Mot(e,n,r,t)}}var Cot=Tot,Aot=Cot,Pot=Aot(),Iot=Pot;const uR=Mi(Iot);function GM(t){"@babel/helpers - typeof";return GM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GM(t)}function dK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dK(Object(n),!0).forEach(function(r){Fce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fce(t,e,n){return e=Rot(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rot(t){var e=kot(t,"string");return GM(e)=="symbol"?e:String(e)}function kot(t,e){if(GM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(GM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Oot=["Webkit","Moz","O","ms"],Lot=function(e,n){var r=e.replace(/(\w)/,function(o){return o.toUpperCase()}),i=Oot.reduce(function(o,s){return hK(hK({},o),{},Fce({},s+r,n))},{});return i[e]=n,i};function f1(t){"@babel/helpers - typeof";return f1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f1(t)}function dR(){return dR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dR.apply(this,arguments)}function fK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function CN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fK(Object(n),!0).forEach(function(r){Qc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pK(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jce(r.key),r)}}function Not(t,e,n){return e&&pK(t.prototype,e),n&&pK(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function zot(t,e,n){return e=hR(e),Fot(t,Bce()?Reflect.construct(e,n||[],hR(t).constructor):e.apply(t,n))}function Fot(t,e){if(e&&(f1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xf(t)}function Bce(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bce=function(){return!!t})()}function hR(t){return hR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hR(t)}function xf(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bot(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A4(t,e)}function A4(t,e){return A4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},A4(t,e)}function Qc(t,e,n){return e=jce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jce(t){var e=jot(t,"string");return f1(e)=="symbol"?e:String(e)}function jot(t,e){if(f1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(f1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $ot=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,o=e.x,s=e.width,a=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,d=M2().domain(uR(0,l)).range([o,o+s-a]),h=d.domain().map(function(p){return d(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(r),endX:d(i),scale:d,scaleValues:h}},mK=function(e){return e.changedTouches&&!!e.changedTouches.length},p1=function(t){Bot(e,t);function e(n){var r;return Dot(this,e),r=zot(this,e,[n]),Qc(xf(r),"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Qc(xf(r),"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Qc(xf(r),"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,o=i.endIndex,s=i.onDragEnd,a=i.startIndex;s==null||s({endIndex:o,startIndex:a})}),r.detachDragEndListener()}),Qc(xf(r),"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Qc(xf(r),"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Qc(xf(r),"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Qc(xf(r),"handleSlideDragStart",function(i){var o=mK(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(xf(r),"startX"),endX:r.handleTravellerDragStart.bind(xf(r),"endX")},r.state={},r}return Not(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,o=r.endX,s=this.state.scaleValues,a=this.props,l=a.gap,d=a.data,h=d.length-1,p=Math.min(i,o),g=Math.max(i,o),v=e.getIndexInRange(s,p),x=e.getIndexInRange(s,g);return{startIndex:v-v%l,endIndex:x===h?h:x-x%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,o=i.data,s=i.tickFormatter,a=i.dataKey,l=Eu(o[r],a,r);return qr(s)?s(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,o=i.slideMoveStartX,s=i.startX,a=i.endX,l=this.props,d=l.x,h=l.width,p=l.travellerWidth,g=l.startIndex,v=l.endIndex,x=l.onChange,b=r.pageX-o;b>0?b=Math.min(b,d+h-p-a,d+h-p-s):b<0&&(b=Math.max(b,d-s,d-a));var w=this.getIndex({startX:s+b,endX:a+b});(w.startIndex!==g||w.endIndex!==v)&&x&&x(w),this.setState({startX:s+b,endX:a+b,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var o=mK(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,o=i.brushMoveStartX,s=i.movingTravellerId,a=i.endX,l=i.startX,d=this.state[s],h=this.props,p=h.x,g=h.width,v=h.travellerWidth,x=h.onChange,b=h.gap,w=h.data,S={startX:this.state.startX,endX:this.state.endX},C=r.pageX-o;C>0?C=Math.min(C,p+g-v-d):C<0&&(C=Math.max(C,p-d)),S[s]=d+C;var A=this.getIndex(S),P=A.startIndex,k=A.endIndex,F=function(){var W=w.length-1;return s==="startX"&&(a>l?P%b===0:k%b===0)||a<l&&k===W||s==="endX"&&(a>l?k%b===0:P%b===0)||a>l&&k===W};this.setState(Qc(Qc({},s,d+C),"brushMoveStartX",r.pageX),function(){x&&F()&&x(A)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var o=this,s=this.state,a=s.scaleValues,l=s.startX,d=s.endX,h=this.state[i],p=a.indexOf(h);if(p!==-1){var g=p+r;if(!(g===-1||g>=a.length)){var v=a[g];i==="startX"&&v>=d||i==="endX"&&v<=l||this.setState(Qc({},i,v),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,o=r.y,s=r.width,a=r.height,l=r.fill,d=r.stroke;return Ye.createElement("rect",{stroke:d,fill:l,x:i,y:o,width:s,height:a})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,o=r.y,s=r.width,a=r.height,l=r.data,d=r.children,h=r.padding,p=V.Children.only(d);return p?Ye.cloneElement(p,{x:i,y:o,width:s,height:a,margin:h,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var o,s,a=this,l=this.props,d=l.y,h=l.travellerWidth,p=l.height,g=l.traveller,v=l.ariaLabel,x=l.data,b=l.startIndex,w=l.endIndex,S=Math.max(r,this.props.x),C=CN(CN({},ii(this.props,!1)),{},{x:S,y:d,width:h,height:p}),A=v||"Min value: ".concat((o=x[b])===null||o===void 0?void 0:o.name,", Max value: ").concat((s=x[w])===null||s===void 0?void 0:s.name);return Ye.createElement(us,{tabIndex:0,role:"slider","aria-label":A,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(k){["ArrowLeft","ArrowRight"].includes(k.key)&&(k.preventDefault(),k.stopPropagation(),a.handleTravellerMoveKeyboard(k.key==="ArrowRight"?1:-1,i))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(g,C))}},{key:"renderSlide",value:function(r,i){var o=this.props,s=o.y,a=o.height,l=o.stroke,d=o.travellerWidth,h=Math.min(r,i)+d,p=Math.max(Math.abs(i-r)-d,0);return Ye.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:h,y:s,width:p,height:a})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,o=r.endIndex,s=r.y,a=r.height,l=r.travellerWidth,d=r.stroke,h=this.state,p=h.startX,g=h.endX,v=5,x={pointerEvents:"none",fill:d};return Ye.createElement(us,{className:"recharts-brush-texts"},Ye.createElement(UI,dR({textAnchor:"end",verticalAnchor:"middle",x:Math.min(p,g)-v,y:s+a/2},x),this.getTextOfTick(i)),Ye.createElement(UI,dR({textAnchor:"start",verticalAnchor:"middle",x:Math.max(p,g)+l+v,y:s+a/2},x),this.getTextOfTick(o)))}},{key:"render",value:function(){var r=this.props,i=r.data,o=r.className,s=r.children,a=r.x,l=r.y,d=r.width,h=r.height,p=r.alwaysShowText,g=this.state,v=g.startX,x=g.endX,b=g.isTextActive,w=g.isSlideMoving,S=g.isTravellerMoving,C=g.isTravellerFocused;if(!i||!i.length||!Pn(a)||!Pn(l)||!Pn(d)||!Pn(h)||d<=0||h<=0)return null;var A=Wt("recharts-brush",o),P=Ye.Children.count(s)===1,k=Lot("userSelect","none");return Ye.createElement(us,{className:A,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:k},this.renderBackground(),P&&this.renderPanorama(),this.renderSlide(v,x),this.renderTravellerLayer(v,"startX"),this.renderTravellerLayer(x,"endX"),(b||w||S||C||p)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,o=r.y,s=r.width,a=r.height,l=r.stroke,d=Math.floor(o+a/2)-1;return Ye.createElement(Ye.Fragment,null,Ye.createElement("rect",{x:i,y:o,width:s,height:a,fill:l,stroke:"none"}),Ye.createElement("line",{x1:i+1,y1:d,x2:i+s-1,y2:d,fill:"none",stroke:"#fff"}),Ye.createElement("line",{x1:i+1,y1:d+2,x2:i+s-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var o;return Ye.isValidElement(r)?o=Ye.cloneElement(r,i):qr(r)?o=r(i):o=e.renderDefaultTraveller(i),o}},{key:"getDerivedStateFromProps",value:function(r,i){var o=r.data,s=r.width,a=r.x,l=r.travellerWidth,d=r.updateId,h=r.startIndex,p=r.endIndex;if(o!==i.prevData||d!==i.prevUpdateId)return CN({prevData:o,prevTravellerWidth:l,prevUpdateId:d,prevX:a,prevWidth:s},o&&o.length?$ot({data:o,width:s,x:a,travellerWidth:l,startIndex:h,endIndex:p}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||a!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([a,a+s-l]);var g=i.scale.domain().map(function(v){return i.scale(v)});return{prevData:o,prevTravellerWidth:l,prevUpdateId:d,prevX:a,prevWidth:s,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:g}}return null}},{key:"getIndexInRange",value:function(r,i){for(var o=r.length,s=0,a=o-1;a-s>1;){var l=Math.floor((s+a)/2);r[l]>i?a=l:s=l}return i>=r[a]?a:s}}]),e}(V.PureComponent);Qc(p1,"displayName","Brush");Qc(p1,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Uot=L6;function Vot(t,e){var n;return Uot(t,function(r,i,o){return n=e(r,i,o),!n}),!!n}var Hot=Vot,Wot=Vae,Got=Wy,qot=Hot,Xot=Ic,Yot=qO;function Kot(t,e,n){var r=Xot(t)?Wot:qot;return n&&Yot(t,e,n)&&(e=void 0),r(t,Got(e))}var Zot=Kot;const Jot=Mi(Zot);var jf=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},gK=hle;function Qot(t,e,n){e=="__proto__"&&gK?gK(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var est=Qot,tst=est,nst=ule,rst=Wy;function ist(t,e){var n={};return e=rst(e),nst(t,function(r,i,o){tst(n,i,e(r,i,o))}),n}var ost=ist;const sst=Mi(ost);function ast(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var lst=ast,cst=L6;function ust(t,e){var n=!0;return cst(t,function(r,i,o){return n=!!e(r,i,o),n}),n}var dst=ust,hst=lst,fst=dst,pst=Wy,mst=Ic,gst=qO;function yst(t,e,n){var r=mst(t)?hst:fst;return n&&gst(t,e,n)&&(e=void 0),r(t,pst(e))}var vst=yst;const $ce=Mi(vst);var _st=["x","y"];function qM(t){"@babel/helpers - typeof";return qM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qM(t)}function P4(){return P4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},P4.apply(this,arguments)}function yK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yK(Object(n),!0).forEach(function(r){xst(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xst(t,e,n){return e=bst(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bst(t){var e=wst(t,"string");return qM(e)=="symbol"?e:String(e)}function wst(t,e){if(qM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sst(t,e){if(t==null)return{};var n=Mst(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Mst(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Est(t,e){var n=t.x,r=t.y,i=Sst(t,_st),o="".concat(n),s=parseInt(o,10),a="".concat(r),l=parseInt(a,10),d="".concat(e.height||i.height),h=parseInt(d,10),p="".concat(e.width||i.width),g=parseInt(p,10);return AS(AS(AS(AS(AS({},e),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:h,width:g,name:e.name,radius:e.radius})}function vK(t){return Ye.createElement(cot,P4({shapeType:"rectangle",propTransformer:Est,activeClassName:"recharts-active-bar"},t))}var Tst=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var o=typeof r=="number";return o?e(r,i):(o||q0(),n)}},Cst=["value","background"],Uce;function m1(t){"@babel/helpers - typeof";return m1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m1(t)}function Ast(t,e){if(t==null)return{};var n=Pst(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Pst(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function fR(){return fR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fR.apply(this,arguments)}function _K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_K(Object(n),!0).forEach(function(r){ly(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_K(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ist(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xK(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Hce(r.key),r)}}function Rst(t,e,n){return e&&xK(t.prototype,e),n&&xK(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function kst(t,e,n){return e=pR(e),Ost(t,Vce()?Reflect.construct(e,n||[],pR(t).constructor):e.apply(t,n))}function Ost(t,e){if(e&&(m1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e2(t)}function Vce(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vce=function(){return!!t})()}function pR(t){return pR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pR(t)}function e2(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lst(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&I4(t,e)}function I4(t,e){return I4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},I4(t,e)}function ly(t,e,n){return e=Hce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hce(t){var e=Dst(t,"string");return m1(e)=="symbol"?e:String(e)}function Dst(t,e){if(m1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(m1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oT=function(t){Lst(e,t);function e(){var n;Ist(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=kst(this,e,[].concat(i)),ly(e2(n),"state",{isAnimationFinished:!1}),ly(e2(n),"id",JE("recharts-bar-")),ly(e2(n),"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),s&&s()}),ly(e2(n),"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),s&&s()}),n}return Rst(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,o=this.props,s=o.shape,a=o.dataKey,l=o.activeIndex,d=o.activeBar,h=ii(this.props,!1);return r&&r.map(function(p,g){var v=g===l,x=v?d:s,b=aa(aa(aa({},h),p),{},{isActive:v,option:x,index:g,dataKey:a,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return Ye.createElement(us,fR({className:"recharts-bar-rectangle"},AI(i.props,p,g),{key:"rectangle-".concat(p==null?void 0:p.x,"-").concat(p==null?void 0:p.y,"-").concat(p==null?void 0:p.value)}),Ye.createElement(vK,b))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,o=i.data,s=i.layout,a=i.isAnimationActive,l=i.animationBegin,d=i.animationDuration,h=i.animationEasing,p=i.animationId,g=this.state.prevData;return Ye.createElement(Tm,{begin:l,duration:d,isActive:a,easing:h,from:{t:0},to:{t:1},key:"bar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var x=v.t,b=o.map(function(w,S){var C=g&&g[S];if(C){var A=vh(C.x,w.x),P=vh(C.y,w.y),k=vh(C.width,w.width),F=vh(C.height,w.height);return aa(aa({},w),{},{x:A(x),y:P(x),width:k(x),height:F(x)})}if(s==="horizontal"){var B=vh(0,w.height),W=B(x);return aa(aa({},w),{},{y:w.y+w.height-W,height:W})}var J=vh(0,w.width),H=J(x);return aa(aa({},w),{},{width:H})});return Ye.createElement(us,null,r.renderRectanglesStatically(b))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,o=r.isAnimationActive,s=this.state.prevData;return o&&i&&i.length&&(!s||!nL(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,o=i.data,s=i.dataKey,a=i.activeIndex,l=ii(this.props.background,!1);return o.map(function(d,h){d.value;var p=d.background,g=Ast(d,Cst);if(!p)return null;var v=aa(aa(aa(aa(aa({},g),{},{fill:"#eee"},p),l),AI(r.props,d,h)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:h,key:"background-bar-".concat(h),className:"recharts-bar-background-rectangle"});return Ye.createElement(vK,fR({option:r.props.background,isActive:h===a},v))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,s=o.data,a=o.xAxis,l=o.yAxis,d=o.layout,h=o.children,p=Sd(h,iT);if(!p)return null;var g=d==="vertical"?s[0].height/2:s[0].width/2,v=function(w,S){var C=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:C,errorVal:Eu(w,S)}},x={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Ye.createElement(us,x,p.map(function(b){return Ye.cloneElement(b,{key:"error-bar-".concat(i,"-").concat(b.props.dataKey),data:s,xAxis:a,yAxis:l,layout:d,offset:g,dataPointFormatter:v})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,o=r.data,s=r.className,a=r.xAxis,l=r.yAxis,d=r.left,h=r.top,p=r.width,g=r.height,v=r.isAnimationActive,x=r.background,b=r.id;if(i||!o||!o.length)return null;var w=this.state.isAnimationFinished,S=Wt("recharts-bar",s),C=a&&a.allowDataOverflow,A=l&&l.allowDataOverflow,P=C||A,k=Qr(b)?this.id:b;return Ye.createElement(us,{className:S},C||A?Ye.createElement("defs",null,Ye.createElement("clipPath",{id:"clipPath-".concat(k)},Ye.createElement("rect",{x:C?d:d-p/2,y:A?h:h-g/2,width:C?p:p*2,height:A?g:g*2}))):null,Ye.createElement(us,{className:"recharts-bar-rectangles",clipPath:P?"url(#clipPath-".concat(k,")"):null},x?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(P,k),(!v||w)&&wy.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}]),e}(V.PureComponent);Uce=oT;ly(oT,"displayName","Bar");ly(oT,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!dm.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ly(oT,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,o=t.xAxis,s=t.yAxis,a=t.xAxisTicks,l=t.yAxisTicks,d=t.stackedData,h=t.dataStartIndex,p=t.displayedData,g=t.offset,v=Att(r,n);if(!v)return null;var x=e.layout,b=n.props,w=b.dataKey,S=b.children,C=b.minPointSize,A=x==="horizontal"?s:o,P=d?A.scale.domain():null,k=Ntt({numericAxis:A}),F=Sd(S,_le),B=p.map(function(W,J){var H,Y,le,pe,re,me;d?H=Ptt(d[h+J],P):(H=Eu(W,w),Array.isArray(H)||(H=[k,H]));var he=Tst(C,Uce.defaultProps.minPointSize)(H[1],J);if(x==="horizontal"){var we,ee=[s.scale(H[0]),s.scale(H[1])],ye=ee[0],be=ee[1];Y=_Y({axis:o,ticks:a,bandSize:i,offset:v.offset,entry:W,index:J}),le=(we=be??ye)!==null&&we!==void 0?we:void 0,pe=v.size;var Le=ye-be;if(re=Number.isNaN(Le)?0:Le,me={x:Y,y:s.y,width:pe,height:s.height},Math.abs(he)>0&&Math.abs(re)<Math.abs(he)){var je=Sh(re||he)*(Math.abs(he)-Math.abs(re));le-=je,re+=je}}else{var dt=[o.scale(H[0]),o.scale(H[1])],Be=dt[0],ot=dt[1];if(Y=Be,le=_Y({axis:s,ticks:l,bandSize:i,offset:v.offset,entry:W,index:J}),pe=ot-Be,re=v.size,me={x:o.x,y:le,width:o.width,height:re},Math.abs(he)>0&&Math.abs(pe)<Math.abs(he)){var at=Sh(pe||he)*(Math.abs(he)-Math.abs(pe));pe+=at}}return aa(aa(aa({},W),{},{x:Y,y:le,width:pe,height:re,value:d?H:H[1],payload:W,background:me},F&&F[J]&&F[J].props),{},{tooltipPayload:[Mce(n,W)],tooltipPosition:{x:Y+pe/2,y:le+re/2}})});return aa({data:B,layout:x},g)});function XM(t){"@babel/helpers - typeof";return XM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XM(t)}function Nst(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bK(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Wce(r.key),r)}}function zst(t,e,n){return e&&bK(t.prototype,e),n&&bK(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function wK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wK(Object(n),!0).forEach(function(r){aL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aL(t,e,n){return e=Wce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wce(t){var e=Fst(t,"string");return XM(e)=="symbol"?e:String(e)}function Fst(t,e){if(XM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(XM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Bst=function(e,n,r,i,o){var s=e.width,a=e.height,l=e.layout,d=e.children,h=Object.keys(n),p={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:a-r.bottom,bottomMirror:a-r.bottom},g=!!tu(d,oT);return h.reduce(function(v,x){var b=n[x],w=b.orientation,S=b.domain,C=b.padding,A=C===void 0?{}:C,P=b.mirror,k=b.reversed,F="".concat(w).concat(P?"Mirror":""),B,W,J,H,Y;if(b.type==="number"&&(b.padding==="gap"||b.padding==="no-gap")){var le=S[1]-S[0],pe=1/0,re=b.categoricalDomain.sort();if(re.forEach(function(Be,ot){ot>0&&(pe=Math.min((Be||0)-(re[ot-1]||0),pe))}),Number.isFinite(pe)){var me=pe/le,he=b.layout==="vertical"?r.height:r.width;if(b.padding==="gap"&&(B=me*he/2),b.padding==="no-gap"){var we=W0(e.barCategoryGap,me*he),ee=me*he/2;B=ee-we-(ee-we)/he*we}}}i==="xAxis"?W=[r.left+(A.left||0)+(B||0),r.left+r.width-(A.right||0)-(B||0)]:i==="yAxis"?W=l==="horizontal"?[r.top+r.height-(A.bottom||0),r.top+(A.top||0)]:[r.top+(A.top||0)+(B||0),r.top+r.height-(A.bottom||0)-(B||0)]:W=b.range,k&&(W=[W[1],W[0]]);var ye=Ttt(b,o,g),be=ye.scale,Le=ye.realScaleType;be.domain(S).range(W),Ctt(be);var je=Dtt(be,fh(fh({},b),{},{realScaleType:Le}));i==="xAxis"?(Y=w==="top"&&!P||w==="bottom"&&P,J=r.left,H=p[F]-Y*b.height):i==="yAxis"&&(Y=w==="left"&&!P||w==="right"&&P,J=p[F]-Y*b.width,H=r.top);var dt=fh(fh(fh({},b),je),{},{realScaleType:Le,x:J,y:H,scale:be,width:i==="xAxis"?r.width:b.width,height:i==="yAxis"?r.height:b.height});return dt.bandSize=tR(dt,je),!b.hide&&i==="xAxis"?p[F]+=(Y?-1:1)*dt.height:b.hide||(p[F]+=(Y?-1:1)*dt.width),fh(fh({},v),{},aL({},x,dt))},{})},Gce=function(e,n){var r=e.x,i=e.y,o=n.x,s=n.y;return{x:Math.min(r,o),y:Math.min(i,s),width:Math.abs(o-r),height:Math.abs(s-i)}},jst=function(e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2;return Gce({x:n,y:r},{x:i,y:o})},qce=function(){function t(e){Nst(this,t),this.scale=e}return zst(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,o=r.position;if(n!==void 0){if(o)switch(o){case"start":return this.scale(n);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+s}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(n)+a}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],o=r[r.length-1];return i<=o?n>=i&&n<=o:n>=o&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}]),t}();aL(qce,"EPS",1e-4);var c8=function(e){var n=Object.keys(e).reduce(function(r,i){return fh(fh({},r),{},aL({},i,qce.create(e[i])))},{});return fh(fh({},n),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=o.bandAware,a=o.position;return sst(i,function(l,d){return n[d].apply(l,{bandAware:s,position:a})})},isInRange:function(i){return $ce(i,function(o,s){return n[s].isInRange(o)})}})};function $st(t){return(t%180+180)%180}var Ust=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=$st(i),s=o*Math.PI/180,a=Math.atan(r/n),l=s>a&&s<Math.PI-a?r/Math.sin(s):n/Math.cos(s);return Math.abs(l)},Vst=Wy,Hst=QE,Wst=WO;function Gst(t){return function(e,n,r){var i=Object(e);if(!Hst(e)){var o=Vst(n);e=Wst(e),n=function(a){return o(i[a],a,i)}}var s=t(e,n,r);return s>-1?i[o?e[s]:s]:void 0}}var qst=Gst,Xst=zce;function Yst(t){var e=Xst(t),n=e%1;return e===e?n?e-n:e:0}var Kst=Yst,Zst=rle,Jst=Wy,Qst=Kst,eat=Math.max;function tat(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:Qst(n);return i<0&&(i=eat(r+i,0)),Zst(t,Jst(e),i)}var nat=tat,rat=qst,iat=nat,oat=rat(iat),sat=oat;const aat=Mi(sat);var lat=c6e(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),u8=V.createContext(void 0),d8=V.createContext(void 0),Xce=V.createContext(void 0),Yce=V.createContext({}),Kce=V.createContext(void 0),Zce=V.createContext(0),Jce=V.createContext(0),SK=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,o=n.offset,s=e.clipPathId,a=e.children,l=e.width,d=e.height,h=lat(o);return Ye.createElement(u8.Provider,{value:r},Ye.createElement(d8.Provider,{value:i},Ye.createElement(Yce.Provider,{value:o},Ye.createElement(Xce.Provider,{value:h},Ye.createElement(Kce.Provider,{value:s},Ye.createElement(Zce.Provider,{value:d},Ye.createElement(Jce.Provider,{value:l},a)))))))},cat=function(){return V.useContext(Kce)},Qce=function(e){var n=V.useContext(u8);n==null&&q0();var r=n[e];return r==null&&q0(),r},uat=function(){var e=V.useContext(u8);return Kg(e)},dat=function(){var e=V.useContext(d8),n=aat(e,function(r){return $ce(r.domain,Number.isFinite)});return n||Kg(e)},eue=function(e){var n=V.useContext(d8);n==null&&q0();var r=n[e];return r==null&&q0(),r},hat=function(){var e=V.useContext(Xce);return e},fat=function(){return V.useContext(Yce)},h8=function(){return V.useContext(Jce)},f8=function(){return V.useContext(Zce)};function YM(t){"@babel/helpers - typeof";return YM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YM(t)}function MK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function EK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MK(Object(n),!0).forEach(function(r){pat(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pat(t,e,n){return e=mat(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mat(t){var e=gat(t,"string");return YM(e)=="symbol"?e:String(e)}function gat(t,e){if(YM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(YM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yat(t,e){return bat(t)||xat(t,e)||_at(t,e)||vat()}function vat(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _at(t,e){if(t){if(typeof t=="string")return TK(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TK(t,e)}}function TK(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xat(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,d=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(h){d=!0,i=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return a}}function bat(t){if(Array.isArray(t))return t}function R4(){return R4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},R4.apply(this,arguments)}var wat=function(e,n){var r;return Ye.isValidElement(e)?r=Ye.cloneElement(e,n):qr(e)?r=e(n):r=Ye.createElement("line",R4({},n,{className:"recharts-reference-line-line"})),r},Sat=function(e,n,r,i,o,s,a,l,d){var h=o.x,p=o.y,g=o.width,v=o.height;if(r){var x=d.y,b=e.y.apply(x,{position:s});if(jf(d,"discard")&&!e.y.isInRange(b))return null;var w=[{x:h+g,y:b},{x:h,y:b}];return l==="left"?w.reverse():w}if(n){var S=d.x,C=e.x.apply(S,{position:s});if(jf(d,"discard")&&!e.x.isInRange(C))return null;var A=[{x:C,y:p+v},{x:C,y:p}];return a==="top"?A.reverse():A}if(i){var P=d.segment,k=P.map(function(F){return e.apply(F,{position:s})});return jf(d,"discard")&&Jot(k,function(F){return!e.isInRange(F)})?null:k}return null};function p8(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,o=t.yAxisId,s=t.shape,a=t.className,l=t.alwaysShow,d=cat(),h=Qce(i),p=eue(o),g=hat();if(!d||!g)return null;um(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var v=c8({x:h.scale,y:p.scale}),x=js(e),b=js(n),w=r&&r.length===2,S=Sat(v,x,b,w,g,t.position,h.orientation,p.orientation,t);if(!S)return null;var C=yat(S,2),A=C[0],P=A.x,k=A.y,F=C[1],B=F.x,W=F.y,J=jf(t,"hidden")?"url(#".concat(d,")"):void 0,H=EK(EK({clipPath:J},ii(t,!0)),{},{x1:P,y1:k,x2:B,y2:W});return Ye.createElement(us,{className:Wt("recharts-reference-line",a)},wat(s,H),fl.renderCallByParent(t,jst({x1:P,y1:k,x2:B,y2:W})))}p8.displayName="ReferenceLine";p8.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"};function KM(t){"@babel/helpers - typeof";return KM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KM(t)}function k4(){return k4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},k4.apply(this,arguments)}function CK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CK(Object(n),!0).forEach(function(r){Mat(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mat(t,e,n){return e=Eat(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Eat(t){var e=Tat(t,"string");return KM(e)=="symbol"?e:String(e)}function Tat(t,e){if(KM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(KM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Cat=function(e){var n=e.x,r=e.y,i=e.xAxis,o=e.yAxis,s=c8({x:i.scale,y:o.scale}),a=s.apply({x:n,y:r},{bandAware:!0});return jf(e,"discard")&&!s.isInRange(a)?null:a};function sT(t){var e=t.x,n=t.y,r=t.r,i=t.alwaysShow,o=t.clipPathId,s=js(e),a=js(n);if(um(i===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!s||!a)return null;var l=Cat(t);if(!l)return null;var d=l.x,h=l.y,p=t.shape,g=t.className,v=jf(t,"hidden")?"url(#".concat(o,")"):void 0,x=AK(AK({clipPath:v},ii(t,!0)),{},{cx:d,cy:h});return Ye.createElement(us,{className:Wt("recharts-reference-dot",g)},sT.renderDot(p,x),fl.renderCallByParent(t,{x:d-r,y:h-r,width:2*r,height:2*r}))}sT.displayName="ReferenceDot";sT.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1};sT.renderDot=function(t,e){var n;return Ye.isValidElement(t)?n=Ye.cloneElement(t,e):qr(t)?n=t(e):n=Ye.createElement(l8,k4({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n};function ZM(t){"@babel/helpers - typeof";return ZM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZM(t)}function O4(){return O4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O4.apply(this,arguments)}function PK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function IK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PK(Object(n),!0).forEach(function(r){Aat(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Aat(t,e,n){return e=Pat(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pat(t){var e=Iat(t,"string");return ZM(e)=="symbol"?e:String(e)}function Iat(t,e){if(ZM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ZM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rat=function(e,n,r,i,o){var s=o.x1,a=o.x2,l=o.y1,d=o.y2,h=o.xAxis,p=o.yAxis;if(!h||!p)return null;var g=c8({x:h.scale,y:p.scale}),v={x:e?g.x.apply(s,{position:"start"}):g.x.rangeMin,y:r?g.y.apply(l,{position:"start"}):g.y.rangeMin},x={x:n?g.x.apply(a,{position:"end"}):g.x.rangeMax,y:i?g.y.apply(d,{position:"end"}):g.y.rangeMax};return jf(o,"discard")&&(!g.isInRange(v)||!g.isInRange(x))?null:Gce(v,x)};function aT(t){var e=t.x1,n=t.x2,r=t.y1,i=t.y2,o=t.className,s=t.alwaysShow,a=t.clipPathId;um(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var l=js(e),d=js(n),h=js(r),p=js(i),g=t.shape;if(!l&&!d&&!h&&!p&&!g)return null;var v=Rat(l,d,h,p,t);if(!v&&!g)return null;var x=jf(t,"hidden")?"url(#".concat(a,")"):void 0;return Ye.createElement(us,{className:Wt("recharts-reference-area",o)},aT.renderRect(g,IK(IK({clipPath:x},ii(t,!0)),v)),fl.renderCallByParent(t,v))}aT.displayName="ReferenceArea";aT.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1};aT.renderRect=function(t,e){var n;return Ye.isValidElement(t)?n=Ye.cloneElement(t,e):qr(t)?n=t(e):n=Ye.createElement(a8,O4({},e,{className:"recharts-reference-area-rect"})),n};function tue(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function kat(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Ust(r,n)}function Oat(t,e,n){var r=n==="width",i=t.x,o=t.y,s=t.width,a=t.height;return e===1?{start:r?i:o,end:r?i+s:o+a}:{start:r?i+s:o+a,end:r?i:o}}function mR(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function Lat(t,e){return tue(t,e+1)}function Dat(t,e,n,r,i){for(var o=(r||[]).slice(),s=e.start,a=e.end,l=0,d=1,h=s,p=function(){var x=r==null?void 0:r[l];if(x===void 0)return{v:tue(r,d)};var b=l,w,S=function(){return w===void 0&&(w=n(x,b)),w},C=x.coordinate,A=l===0||mR(t,C,S,h,a);A||(l=0,h=s,d+=1),A&&(h=C+t*(S()/2+i),l+=d)},g;d<=o.length;)if(g=p(),g)return g.v;return[]}function JM(t){"@babel/helpers - typeof";return JM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JM(t)}function RK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RK(Object(n),!0).forEach(function(r){Nat(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nat(t,e,n){return e=zat(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zat(t){var e=Fat(t,"string");return JM(e)=="symbol"?e:String(e)}function Fat(t,e){if(JM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(JM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bat(t,e,n,r,i){for(var o=(r||[]).slice(),s=o.length,a=e.start,l=e.end,d=function(g){var v=o[g],x,b=function(){return x===void 0&&(x=n(v,g)),x};if(g===s-1){var w=t*(v.coordinate+t*b()/2-l);o[g]=v=dl(dl({},v),{},{tickCoord:w>0?v.coordinate-w*t:v.coordinate})}else o[g]=v=dl(dl({},v),{},{tickCoord:v.coordinate});var S=mR(t,v.tickCoord,b,a,l);S&&(l=v.tickCoord-t*(b()/2+i),o[g]=dl(dl({},v),{},{isShow:!0}))},h=s-1;h>=0;h--)d(h);return o}function jat(t,e,n,r,i,o){var s=(r||[]).slice(),a=s.length,l=e.start,d=e.end;if(o){var h=r[a-1],p=n(h,a-1),g=t*(h.coordinate+t*p/2-d);s[a-1]=h=dl(dl({},h),{},{tickCoord:g>0?h.coordinate-g*t:h.coordinate});var v=mR(t,h.tickCoord,function(){return p},l,d);v&&(d=h.tickCoord-t*(p/2+i),s[a-1]=dl(dl({},h),{},{isShow:!0}))}for(var x=o?a-1:a,b=function(C){var A=s[C],P,k=function(){return P===void 0&&(P=n(A,C)),P};if(C===0){var F=t*(A.coordinate-t*k()/2-l);s[C]=A=dl(dl({},A),{},{tickCoord:F<0?A.coordinate-F*t:A.coordinate})}else s[C]=A=dl(dl({},A),{},{tickCoord:A.coordinate});var B=mR(t,A.tickCoord,k,l,d);B&&(l=A.tickCoord+t*(k()/2+i),s[C]=dl(dl({},A),{},{isShow:!0}))},w=0;w<x;w++)b(w);return s}function m8(t,e,n){var r=t.tick,i=t.ticks,o=t.viewBox,s=t.minTickGap,a=t.orientation,l=t.interval,d=t.tickFormatter,h=t.unit,p=t.angle;if(!i||!i.length||!r)return[];if(Pn(l)||dm.isSsr)return Lat(i,typeof l=="number"&&Pn(l)?l:0);var g=[],v=a==="top"||a==="bottom"?"width":"height",x=h&&v==="width"?S2(h,{fontSize:e,letterSpacing:n}):{width:0,height:0},b=function(A,P){var k=qr(d)?d(A.value,P):A.value;return v==="width"?kat(S2(k,{fontSize:e,letterSpacing:n}),x,p):S2(k,{fontSize:e,letterSpacing:n})[v]},w=i.length>=2?Sh(i[1].coordinate-i[0].coordinate):1,S=Oat(o,w,v);return l==="equidistantPreserveStart"?Dat(w,S,b,i,s):(l==="preserveStart"||l==="preserveStartEnd"?g=jat(w,S,b,i,s,l==="preserveStartEnd"):g=Bat(w,S,b,i,s),g.filter(function(C){return C.isShow}))}var $at=["viewBox"],Uat=["viewBox"],Vat=["ticks"];function g1(t){"@babel/helpers - typeof";return g1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g1(t)}function ab(){return ab=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ab.apply(this,arguments)}function kK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kK(Object(n),!0).forEach(function(r){g8(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function AN(t,e){if(t==null)return{};var n=Hat(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Hat(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Wat(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OK(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rue(r.key),r)}}function Gat(t,e,n){return e&&OK(t.prototype,e),n&&OK(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function qat(t,e,n){return e=gR(e),Xat(t,nue()?Reflect.construct(e,n||[],gR(t).constructor):e.apply(t,n))}function Xat(t,e){if(e&&(g1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yat(t)}function Yat(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nue(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nue=function(){return!!t})()}function gR(t){return gR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gR(t)}function Kat(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&L4(t,e)}function L4(t,e){return L4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},L4(t,e)}function g8(t,e,n){return e=rue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rue(t){var e=Zat(t,"string");return g1(e)=="symbol"?e:String(e)}function Zat(t,e){if(g1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(g1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fw=function(t){Kat(e,t);function e(n){var r;return Wat(this,e),r=qat(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return Gat(e,[{key:"shouldComponentUpdate",value:function(r,i){var o=r.viewBox,s=AN(r,$at),a=this.props,l=a.viewBox,d=AN(a,Uat);return!Cb(o,l)||!Cb(s,d)||!Cb(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.x,s=i.y,a=i.width,l=i.height,d=i.orientation,h=i.tickSize,p=i.mirror,g=i.tickMargin,v,x,b,w,S,C,A=p?-1:1,P=r.tickSize||h,k=Pn(r.tickCoord)?r.tickCoord:r.coordinate;switch(d){case"top":v=x=r.coordinate,w=s+ +!p*l,b=w-A*P,C=b-A*g,S=k;break;case"left":b=w=r.coordinate,x=o+ +!p*a,v=x-A*P,S=v-A*g,C=k;break;case"right":b=w=r.coordinate,x=o+ +p*a,v=x+A*P,S=v+A*g,C=k;break;default:v=x=r.coordinate,w=s+ +p*l,b=w+A*P,C=b+A*g,S=k;break}return{line:{x1:v,y1:b,x2:x,y2:w},tick:{x:S,y:C}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,s;switch(i){case"left":s=o?"start":"end";break;case"right":s=o?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=o?"start":"end";break;default:s=o?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,o=r.y,s=r.width,a=r.height,l=r.orientation,d=r.mirror,h=r.axisLine,p=Fl(Fl(Fl({},ii(this.props,!1)),ii(h,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var g=+(l==="top"&&!d||l==="bottom"&&d);p=Fl(Fl({},p),{},{x1:i,y1:o+g*a,x2:i+s,y2:o+g*a})}else{var v=+(l==="left"&&!d||l==="right"&&d);p=Fl(Fl({},p),{},{x1:i+v*s,y1:o,x2:i+v*s,y2:o+a})}return Ye.createElement("line",ab({},p,{className:Wt("recharts-cartesian-axis-line",wd(h,"className"))}))}},{key:"renderTicks",value:function(r,i,o){var s=this,a=this.props,l=a.tickLine,d=a.stroke,h=a.tick,p=a.tickFormatter,g=a.unit,v=m8(Fl(Fl({},this.props),{},{ticks:r}),i,o),x=this.getTickTextAnchor(),b=this.getTickVerticalAnchor(),w=ii(this.props,!1),S=ii(h,!1),C=Fl(Fl({},w),{},{fill:"none"},ii(l,!1)),A=v.map(function(P,k){var F=s.getTickLineCoord(P),B=F.line,W=F.tick,J=Fl(Fl(Fl(Fl({textAnchor:x,verticalAnchor:b},w),{},{stroke:"none",fill:d},S),W),{},{index:k,payload:P,visibleTicksCount:v.length,tickFormatter:p});return Ye.createElement(us,ab({className:"recharts-cartesian-axis-tick",key:"tick-".concat(P.value,"-").concat(P.coordinate,"-").concat(P.tickCoord)},AI(s.props,P,k)),l&&Ye.createElement("line",ab({},C,B,{className:Wt("recharts-cartesian-axis-tick-line",wd(l,"className"))})),h&&e.renderTickItem(h,J,"".concat(qr(p)?p(P.value,k):P.value).concat(g||"")))});return Ye.createElement("g",{className:"recharts-cartesian-axis-ticks"},A)}},{key:"render",value:function(){var r=this,i=this.props,o=i.axisLine,s=i.width,a=i.height,l=i.ticksGenerator,d=i.className,h=i.hide;if(h)return null;var p=this.props,g=p.ticks,v=AN(p,Vat),x=g;return qr(l)&&(x=g&&g.length>0?l(this.props):l(v)),s<=0||a<=0||!x||!x.length?null:Ye.createElement(us,{className:Wt("recharts-cartesian-axis",d),ref:function(w){r.layerReference=w}},o&&this.renderAxisLine(),this.renderTicks(x,this.state.fontSize,this.state.letterSpacing),fl.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,o){var s;return Ye.isValidElement(r)?s=Ye.cloneElement(r,i):qr(r)?s=r(i):s=Ye.createElement(UI,ab({},i,{className:"recharts-cartesian-axis-tick-value"}),o),s}}]),e}(V.Component);g8(fw,"displayName","CartesianAxis");g8(fw,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Jat=["x1","y1","x2","y2","key"],Qat=["offset"];function X0(t){"@babel/helpers - typeof";return X0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X0(t)}function LK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LK(Object(n),!0).forEach(function(r){elt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function elt(t,e,n){return e=tlt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tlt(t){var e=nlt(t,"string");return X0(e)=="symbol"?e:String(e)}function nlt(t,e){if(X0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(X0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function h0(){return h0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h0.apply(this,arguments)}function DK(t,e){if(t==null)return{};var n=rlt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rlt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var ilt=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,o=e.y,s=e.width,a=e.height;return Ye.createElement("rect",{x:i,y:o,width:s,height:a,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function iue(t,e){var n;if(Ye.isValidElement(t))n=Ye.cloneElement(t,e);else if(qr(t))n=t(e);else{var r=e.x1,i=e.y1,o=e.x2,s=e.y2,a=e.key,l=DK(e,Jat),d=ii(l,!1);d.offset;var h=DK(d,Qat);n=Ye.createElement("line",h0({},h,{x1:r,y1:i,x2:o,y2:s,fill:"none",key:a}))}return n}function olt(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,o=t.horizontalPoints;if(!i||!o||!o.length)return null;var s=o.map(function(a,l){var d=pl(pl({},t),{},{x1:e,y1:a,x2:e+n,y2:a,key:"line-".concat(l),index:l});return iue(i,d)});return Ye.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function slt(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,o=t.verticalPoints;if(!i||!o||!o.length)return null;var s=o.map(function(a,l){var d=pl(pl({},t),{},{x1:a,y1:e,x2:a,y2:e+n,key:"line-".concat(l),index:l});return iue(i,d)});return Ye.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function alt(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,o=t.width,s=t.height,a=t.horizontalPoints,l=t.horizontal,d=l===void 0?!0:l;if(!d||!e||!e.length)return null;var h=a.map(function(g){return Math.round(g+i-i)}).sort(function(g,v){return g-v});i!==h[0]&&h.unshift(0);var p=h.map(function(g,v){var x=!h[v+1],b=x?i+s-g:h[v+1]-g;if(b<=0)return null;var w=v%e.length;return Ye.createElement("rect",{key:"react-".concat(v),y:g,x:r,height:b,width:o,stroke:"none",fill:e[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Ye.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function llt(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,o=t.x,s=t.y,a=t.width,l=t.height,d=t.verticalPoints;if(!n||!r||!r.length)return null;var h=d.map(function(g){return Math.round(g+o-o)}).sort(function(g,v){return g-v});o!==h[0]&&h.unshift(0);var p=h.map(function(g,v){var x=!h[v+1],b=x?o+a-g:h[v+1]-g;if(b<=0)return null;var w=v%r.length;return Ye.createElement("rect",{key:"react-".concat(v),x:g,y:s,width:b,height:l,stroke:"none",fill:r[w],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Ye.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var clt=function(e,n){var r=e.xAxis,i=e.width,o=e.height,s=e.offset;return wce(m8(pl(pl(pl({},fw.defaultProps),r),{},{ticks:rm(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),s.left,s.left+s.width,n)},ult=function(e,n){var r=e.yAxis,i=e.width,o=e.height,s=e.offset;return wce(m8(pl(pl(pl({},fw.defaultProps),r),{},{ticks:rm(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),s.top,s.top+s.height,n)},lx={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function oue(t){var e,n,r,i,o,s,a=h8(),l=f8(),d=fat(),h=pl(pl({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:lx.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:lx.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:lx.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:lx.horizontalFill,vertical:(o=t.vertical)!==null&&o!==void 0?o:lx.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:lx.verticalFill,x:Pn(t.x)?t.x:d.left,y:Pn(t.y)?t.y:d.top,width:Pn(t.width)?t.width:d.width,height:Pn(t.height)?t.height:d.height}),p=h.x,g=h.y,v=h.width,x=h.height,b=h.syncWithTicks,w=h.horizontalValues,S=h.verticalValues,C=uat(),A=dat();if(!Pn(v)||v<=0||!Pn(x)||x<=0||!Pn(p)||p!==+p||!Pn(g)||g!==+g)return null;var P=h.verticalCoordinatesGenerator||clt,k=h.horizontalCoordinatesGenerator||ult,F=h.horizontalPoints,B=h.verticalPoints;if((!F||!F.length)&&qr(k)){var W=w&&w.length,J=k({yAxis:A?pl(pl({},A),{},{ticks:W?w:A.ticks}):void 0,width:a,height:l,offset:d},W?!0:b);um(Array.isArray(J),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(X0(J),"]")),Array.isArray(J)&&(F=J)}if((!B||!B.length)&&qr(P)){var H=S&&S.length,Y=P({xAxis:C?pl(pl({},C),{},{ticks:H?S:C.ticks}):void 0,width:a,height:l,offset:d},H?!0:b);um(Array.isArray(Y),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(X0(Y),"]")),Array.isArray(Y)&&(B=Y)}return Ye.createElement("g",{className:"recharts-cartesian-grid"},Ye.createElement(ilt,{fill:h.fill,fillOpacity:h.fillOpacity,x:h.x,y:h.y,width:h.width,height:h.height}),Ye.createElement(olt,h0({},h,{offset:d,horizontalPoints:F,xAxis:C,yAxis:A})),Ye.createElement(slt,h0({},h,{offset:d,verticalPoints:B,xAxis:C,yAxis:A})),Ye.createElement(alt,h0({},h,{horizontalPoints:F})),Ye.createElement(llt,h0({},h,{verticalPoints:B})))}oue.displayName="CartesianGrid";var dlt=["type","layout","connectNulls","ref"];function y1(t){"@babel/helpers - typeof";return y1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y1(t)}function hlt(t,e){if(t==null)return{};var n=flt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function flt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function C2(){return C2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},C2.apply(this,arguments)}function NK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NK(Object(n),!0).forEach(function(r){ph(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cx(t){return ylt(t)||glt(t)||mlt(t)||plt()}function plt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mlt(t,e){if(t){if(typeof t=="string")return D4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D4(t,e)}}function glt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ylt(t){if(Array.isArray(t))return D4(t)}function D4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vlt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zK(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aue(r.key),r)}}function _lt(t,e,n){return e&&zK(t.prototype,e),n&&zK(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function xlt(t,e,n){return e=yR(e),blt(t,sue()?Reflect.construct(e,n||[],yR(t).constructor):e.apply(t,n))}function blt(t,e){if(e&&(y1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $g(t)}function sue(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sue=function(){return!!t})()}function yR(t){return yR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yR(t)}function $g(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wlt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N4(t,e)}function N4(t,e){return N4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},N4(t,e)}function ph(t,e,n){return e=aue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aue(t){var e=Slt(t,"string");return y1(e)=="symbol"?e:String(e)}function Slt(t,e){if(y1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(y1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var v1=function(t){wlt(e,t);function e(){var n;vlt(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=xlt(this,e,[].concat(i)),ph($g(n),"state",{isAnimationFinished:!0,totalLength:0}),ph($g(n),"generateSimpleStrokeDasharray",function(s,a){return"".concat(a,"px ").concat(s-a,"px")}),ph($g(n),"getStrokeDasharray",function(s,a,l){var d=l.reduce(function(S,C){return S+C});if(!d)return n.generateSimpleStrokeDasharray(a,s);for(var h=Math.floor(s/d),p=s%d,g=a-s,v=[],x=0,b=0;x<l.length;b+=l[x],++x)if(b+l[x]>p){v=[].concat(cx(l.slice(0,x)),[p-b]);break}var w=v.length%2===0?[0,g]:[g];return[].concat(cx(e.repeat(l,h)),cx(v),w).map(function(S){return"".concat(S,"px")}).join(", ")}),ph($g(n),"id",JE("recharts-line-")),ph($g(n),"pathRef",function(s){n.mainCurve=s}),ph($g(n),"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),ph($g(n),"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return _lt(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,s=o.points,a=o.xAxis,l=o.yAxis,d=o.layout,h=o.children,p=Sd(h,iT);if(!p)return null;var g=function(b,w){return{x:b.x,y:b.y,value:b.value,errorVal:Eu(b.payload,w)}},v={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Ye.createElement(us,v,p.map(function(x){return Ye.cloneElement(x,{key:"bar-".concat(x.props.dataKey),data:s,xAxis:a,yAxis:l,layout:d,dataPointFormatter:g})}))}},{key:"renderDots",value:function(r,i,o){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var a=this.props,l=a.dot,d=a.points,h=a.dataKey,p=ii(this.props,!1),g=ii(l,!0),v=d.map(function(b,w){var S=Jc(Jc(Jc({key:"dot-".concat(w),r:3},p),g),{},{value:b.value,dataKey:h,cx:b.x,cy:b.y,index:w,payload:b.payload});return e.renderDotItem(l,S)}),x={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return Ye.createElement(us,C2({className:"recharts-line-dots",key:"dots"},x),v)}},{key:"renderCurveStatically",value:function(r,i,o,s){var a=this.props,l=a.type,d=a.layout,h=a.connectNulls;a.ref;var p=hlt(a,dlt),g=Jc(Jc(Jc({},ii(p,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(o,")"):null,points:r},s),{},{type:l,layout:d,connectNulls:h});return Ye.createElement(g4,C2({},g,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var o=this,s=this.props,a=s.points,l=s.strokeDasharray,d=s.isAnimationActive,h=s.animationBegin,p=s.animationDuration,g=s.animationEasing,v=s.animationId,x=s.animateNewValues,b=s.width,w=s.height,S=this.state,C=S.prevPoints,A=S.totalLength;return Ye.createElement(Tm,{begin:h,duration:p,isActive:d,easing:g,from:{t:0},to:{t:1},key:"line-".concat(v),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(P){var k=P.t;if(C){var F=C.length/a.length,B=a.map(function(le,pe){var re=Math.floor(pe*F);if(C[re]){var me=C[re],he=vh(me.x,le.x),we=vh(me.y,le.y);return Jc(Jc({},le),{},{x:he(k),y:we(k)})}if(x){var ee=vh(b*2,le.x),ye=vh(w/2,le.y);return Jc(Jc({},le),{},{x:ee(k),y:ye(k)})}return Jc(Jc({},le),{},{x:le.x,y:le.y})});return o.renderCurveStatically(B,r,i)}var W=vh(0,A),J=W(k),H;if(l){var Y="".concat(l).split(/[,\s]+/gim).map(function(le){return parseFloat(le)});H=o.getStrokeDasharray(J,A,Y)}else H=o.generateSimpleStrokeDasharray(A,J);return o.renderCurveStatically(a,r,i,{strokeDasharray:H})})}},{key:"renderCurve",value:function(r,i){var o=this.props,s=o.points,a=o.isAnimationActive,l=this.state,d=l.prevPoints,h=l.totalLength;return a&&s&&s.length&&(!d&&h>0||!nL(d,s))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(s,r,i)}},{key:"render",value:function(){var r,i=this.props,o=i.hide,s=i.dot,a=i.points,l=i.className,d=i.xAxis,h=i.yAxis,p=i.top,g=i.left,v=i.width,x=i.height,b=i.isAnimationActive,w=i.id;if(o||!a||!a.length)return null;var S=this.state.isAnimationFinished,C=a.length===1,A=Wt("recharts-line",l),P=d&&d.allowDataOverflow,k=h&&h.allowDataOverflow,F=P||k,B=Qr(w)?this.id:w,W=(r=ii(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},J=W.r,H=J===void 0?3:J,Y=W.strokeWidth,le=Y===void 0?2:Y,pe=y8e(s)?s:{},re=pe.clipDot,me=re===void 0?!0:re,he=H*2+le;return Ye.createElement(us,{className:A},P||k?Ye.createElement("defs",null,Ye.createElement("clipPath",{id:"clipPath-".concat(B)},Ye.createElement("rect",{x:P?g:g-v/2,y:k?p:p-x/2,width:P?v:v*2,height:k?x:x*2})),!me&&Ye.createElement("clipPath",{id:"clipPath-dots-".concat(B)},Ye.createElement("rect",{x:g-he/2,y:p-he/2,width:v+he,height:x+he}))):null,!C&&this.renderCurve(F,B),this.renderErrorBar(F,B),(C||s)&&this.renderDots(F,me,B),(!b||S)&&wy.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var o=r.length%2!==0?[].concat(cx(r),[0]):r,s=[],a=0;a<i;++a)s=[].concat(cx(s),cx(o));return s}},{key:"renderDotItem",value:function(r,i){var o;if(Ye.isValidElement(r))o=Ye.cloneElement(r,i);else if(qr(r))o=r(i);else{var s=Wt("recharts-line-dot",typeof r!="boolean"?r.className:"");o=Ye.createElement(l8,C2({},i,{className:s}))}return o}}]),e}(V.PureComponent);ph(v1,"displayName","Line");ph(v1,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!dm.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});ph(v1,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,s=t.dataKey,a=t.bandSize,l=t.displayedData,d=t.offset,h=e.layout,p=l.map(function(g,v){var x=Eu(g,s);return h==="horizontal"?{x:vY({axis:n,ticks:i,bandSize:a,entry:g,index:v}),y:Qr(x)?null:r.scale(x),value:x,payload:g}:{x:Qr(x)?null:n.scale(x),y:vY({axis:r,ticks:o,bandSize:a,entry:g,index:v}),value:x,payload:g}});return Jc({points:p,layout:h},d)});function z4(){return z4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},z4.apply(this,arguments)}var lL=function(e){var n=e.xAxisId,r=h8(),i=f8(),o=Qce(n);return o==null?null:Ye.createElement(fw,z4({},o,{className:Wt("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(a){return rm(a,!0)}}))};lL.displayName="XAxis";lL.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0};function F4(){return F4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F4.apply(this,arguments)}var cL=function(e){var n=e.yAxisId,r=h8(),i=f8(),o=eue(n);return o==null?null:Ye.createElement(fw,F4({},o,{className:Wt("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(a){return rm(a,!0)}}))};cL.displayName="YAxis";cL.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1};function FK(t){return Clt(t)||Tlt(t)||Elt(t)||Mlt()}function Mlt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Elt(t,e){if(t){if(typeof t=="string")return B4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B4(t,e)}}function Tlt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Clt(t){if(Array.isArray(t))return B4(t)}function B4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var j4=function(e,n,r,i,o){var s=Sd(e,p8),a=Sd(e,sT),l=[].concat(FK(s),FK(a)),d=Sd(e,aT),h="".concat(i,"Id"),p=i[0],g=n;if(l.length&&(g=l.reduce(function(b,w){if(w.props[h]===r&&jf(w.props,"extendDomain")&&Pn(w.props[p])){var S=w.props[p];return[Math.min(b[0],S),Math.max(b[1],S)]}return b},g)),d.length){var v="".concat(p,"1"),x="".concat(p,"2");g=d.reduce(function(b,w){if(w.props[h]===r&&jf(w.props,"extendDomain")&&Pn(w.props[v])&&Pn(w.props[x])){var S=w.props[v],C=w.props[x];return[Math.min(b[0],S,C),Math.max(b[1],S,C)]}return b},g)}return o&&o.length&&(g=o.reduce(function(b,w){return Pn(w)?[Math.min(b[0],w),Math.max(b[1],w)]:b},g)),g},lue={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,d,h){this.fn=l,this.context=d,this.once=h||!1}function o(l,d,h,p,g){if(typeof h!="function")throw new TypeError("The listener must be a function");var v=new i(h,p||l,g),x=n?n+d:d;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],v]:l._events[x].push(v):(l._events[x]=v,l._eventsCount++),l}function s(l,d){--l._eventsCount===0?l._events=new r:delete l._events[d]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var d=[],h,p;if(this._eventsCount===0)return d;for(p in h=this._events)e.call(h,p)&&d.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},a.prototype.listeners=function(d){var h=n?n+d:d,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,v=p.length,x=new Array(v);g<v;g++)x[g]=p[g].fn;return x},a.prototype.listenerCount=function(d){var h=n?n+d:d,p=this._events[h];return p?p.fn?1:p.length:0},a.prototype.emit=function(d,h,p,g,v,x){var b=n?n+d:d;if(!this._events[b])return!1;var w=this._events[b],S=arguments.length,C,A;if(w.fn){switch(w.once&&this.removeListener(d,w.fn,void 0,!0),S){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,h),!0;case 3:return w.fn.call(w.context,h,p),!0;case 4:return w.fn.call(w.context,h,p,g),!0;case 5:return w.fn.call(w.context,h,p,g,v),!0;case 6:return w.fn.call(w.context,h,p,g,v,x),!0}for(A=1,C=new Array(S-1);A<S;A++)C[A-1]=arguments[A];w.fn.apply(w.context,C)}else{var P=w.length,k;for(A=0;A<P;A++)switch(w[A].once&&this.removeListener(d,w[A].fn,void 0,!0),S){case 1:w[A].fn.call(w[A].context);break;case 2:w[A].fn.call(w[A].context,h);break;case 3:w[A].fn.call(w[A].context,h,p);break;case 4:w[A].fn.call(w[A].context,h,p,g);break;default:if(!C)for(k=1,C=new Array(S-1);k<S;k++)C[k-1]=arguments[k];w[A].fn.apply(w[A].context,C)}}return!0},a.prototype.on=function(d,h,p){return o(this,d,h,p,!1)},a.prototype.once=function(d,h,p){return o(this,d,h,p,!0)},a.prototype.removeListener=function(d,h,p,g){var v=n?n+d:d;if(!this._events[v])return this;if(!h)return s(this,v),this;var x=this._events[v];if(x.fn)x.fn===h&&(!g||x.once)&&(!p||x.context===p)&&s(this,v);else{for(var b=0,w=[],S=x.length;b<S;b++)(x[b].fn!==h||g&&!x[b].once||p&&x[b].context!==p)&&w.push(x[b]);w.length?this._events[v]=w.length===1?w[0]:w:s(this,v)}return this},a.prototype.removeAllListeners=function(d){var h;return d?(h=n?n+d:d,this._events[h]&&s(this,h)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(lue);var Alt=lue.exports;const Plt=Mi(Alt);var PN=new Plt,IN="recharts.syncMouseEvents";function QM(t){"@babel/helpers - typeof";return QM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QM(t)}function Ilt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rlt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cue(r.key),r)}}function klt(t,e,n){return e&&Rlt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function RN(t,e,n){return e=cue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cue(t){var e=Olt(t,"string");return QM(e)=="symbol"?e:String(e)}function Olt(t,e){if(QM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(QM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Llt=function(){function t(){Ilt(this,t),RN(this,"activeIndex",0),RN(this,"coordinateList",[]),RN(this,"layout","horizontal")}return klt(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,o=i===void 0?null:i,s=n.container,a=s===void 0?null:s,l=n.layout,d=l===void 0?null:l,h=n.offset,p=h===void 0?null:h,g=n.mouseHandlerCallback,v=g===void 0?null:g;this.coordinateList=(r=o??this.coordinateList)!==null&&r!==void 0?r:[],this.container=a??this.container,this.layout=d??this.layout,this.offset=p??this.offset,this.mouseHandlerCallback=v??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,s=i.y,a=i.height,l=this.coordinateList[this.activeIndex].coordinate,d=((n=window)===null||n===void 0?void 0:n.scrollX)||0,h=((r=window)===null||r===void 0?void 0:r.scrollY)||0,p=o+l+d,g=s+this.offset.top+a/2+h;this.mouseHandlerCallback({pageX:p,pageY:g})}}}]),t}();function Dlt(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&Pn(r)&&Pn(i))return!0}return!1}function Nlt(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function uue(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,o=t.endAngle,s=Da(e,n,r,i),a=Da(e,n,r,o);return{points:[s,a],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}function zlt(t,e,n){var r,i,o,s;if(t==="horizontal")r=e.x,o=r,i=n.top,s=n.top+n.height;else if(t==="vertical")i=e.y,s=i,r=n.left,o=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var a=e.cx,l=e.cy,d=e.innerRadius,h=e.outerRadius,p=e.angle,g=Da(a,l,d,p),v=Da(a,l,h,p);r=g.x,i=g.y,o=v.x,s=v.y}else return uue(e);return[{x:r,y:i},{x:o,y:s}]}function eE(t){"@babel/helpers - typeof";return eE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eE(t)}function BK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function HC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BK(Object(n),!0).forEach(function(r){Flt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Flt(t,e,n){return e=Blt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Blt(t){var e=jlt(t,"string");return eE(e)=="symbol"?e:String(e)}function jlt(t,e){if(eE(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(eE(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $lt(t){var e=t.element,n=t.tooltipEventType,r=t.isActive,i=t.activeCoordinate,o=t.activePayload,s=t.offset,a=t.activeTooltipIndex,l=t.tooltipAxisBandSize,d=t.layout,h=t.chartName;if(!e||!e.props.cursor||!r||!i||h!=="ScatterChart"&&n!=="axis")return null;var p,g=g4;if(h==="ScatterChart")p=i,g=Sit;else if(h==="BarChart")p=Nlt(d,i,s,l),g=a8;else if(d==="radial"){var v=uue(i),x=v.cx,b=v.cy,w=v.radius,S=v.startAngle,C=v.endAngle;p={cx:x,cy:b,startAngle:S,endAngle:C,innerRadius:w,outerRadius:w},g=Cce}else p={points:zlt(d,i,s)},g=g4;var A=HC(HC(HC(HC({stroke:"#ccc",pointerEvents:"none"},s),p),ii(e.props.cursor,!1)),{},{payload:o,payloadIndex:a,className:Wt("recharts-tooltip-cursor",e.props.cursor.className)});return V.isValidElement(e.props.cursor)?V.cloneElement(e.props.cursor,A):V.createElement(g,A)}var Ult=["item"],Vlt=["children","className","width","height","style","compact","title","desc"];function _1(t){"@babel/helpers - typeof";return _1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_1(t)}function A2(){return A2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},A2.apply(this,arguments)}function jK(t,e){return Glt(t)||Wlt(t,e)||hue(t,e)||Hlt()}function Hlt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wlt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,d=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(h){d=!0,i=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return a}}function Glt(t){if(Array.isArray(t))return t}function $K(t,e){if(t==null)return{};var n=qlt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qlt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Xlt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ylt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fue(r.key),r)}}function Klt(t,e,n){return e&&Ylt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Zlt(t,e,n){return e=vR(e),Jlt(t,due()?Reflect.construct(e,n||[],vR(t).constructor):e.apply(t,n))}function Jlt(t,e){if(e&&(_1(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yi(t)}function due(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(due=function(){return!!t})()}function vR(t){return vR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vR(t)}function yi(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qlt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$4(t,e)}function $4(t,e){return $4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},$4(t,e)}function x1(t){return nct(t)||tct(t)||hue(t)||ect()}function ect(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hue(t,e){if(t){if(typeof t=="string")return U4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U4(t,e)}}function tct(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nct(t){if(Array.isArray(t))return U4(t)}function U4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function UK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UK(Object(n),!0).forEach(function(r){xr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xr(t,e,n){return e=fue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fue(t){var e=rct(t,"string");return _1(e)=="symbol"?e:String(e)}function rct(t,e){if(_1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ict={xAxis:["bottom","top"],yAxis:["left","right"]},oct={width:"100%",height:"100%"},pue={x:0,y:0};function WC(t){return t}var sct=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},act=function(e,n,r,i){var o=n.find(function(h){return h&&h.index===r});if(o){if(e==="horizontal")return{x:o.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:o.coordinate};if(e==="centric"){var s=o.coordinate,a=i.radius;return nn(nn(nn({},i),Da(i.cx,i.cy,a,s)),{},{angle:s,radius:a})}var l=o.coordinate,d=i.angle;return nn(nn(nn({},i),Da(i.cx,i.cy,l,d)),{},{angle:d,radius:l})}return pue},uL=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,o=n.dataEndIndex,s=(r??[]).reduce(function(a,l){var d=l.props.data;return d&&d.length?[].concat(x1(a),x1(d)):a},[]);return s.length>0?s:e&&e.length&&Pn(i)&&Pn(o)?e.slice(i,o+1):[]};function mue(t){return t==="number"?[0,"auto"]:void 0}var V4=function(e,n,r,i){var o=e.graphicalItems,s=e.tooltipAxis,a=uL(n,e);return r<0||!o||!o.length||r>=a.length?null:o.reduce(function(l,d){var h,p=(h=d.props.data)!==null&&h!==void 0?h:n;p&&e.dataStartIndex+e.dataEndIndex!==0&&(p=p.slice(e.dataStartIndex,e.dataEndIndex+1));var g;if(s.dataKey&&!s.allowDuplicatedCategory){var v=p===void 0?a:p;g=TI(v,s.dataKey,i)}else g=p&&p[r]||a[r];return g?[].concat(x1(l),[Mce(d,g)]):l},[])},VK=function(e,n,r,i){var o=i||{x:e.chartX,y:e.chartY},s=sct(o,r),a=e.orderedTooltipTicks,l=e.tooltipAxis,d=e.tooltipTicks,h=xtt(s,a,d,l);if(h>=0&&d){var p=d[h]&&d[h].value,g=V4(e,n,h,p),v=act(r,a,h,o);return{activeTooltipIndex:h,activeLabel:p,activePayload:g,activeCoordinate:v}}return null},lct=function(e,n){var r=n.axes,i=n.graphicalItems,o=n.axisType,s=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,d=n.dataEndIndex,h=e.layout,p=e.children,g=e.stackOffset,v=bce(h,o);return r.reduce(function(x,b){var w,S=b.props,C=S.type,A=S.dataKey,P=S.allowDataOverflow,k=S.allowDuplicatedCategory,F=S.scale,B=S.ticks,W=S.includeHidden,J=b.props[s];if(x[J])return x;var H=uL(e.data,{graphicalItems:i.filter(function(je){return je.props[s]===J}),dataStartIndex:l,dataEndIndex:d}),Y=H.length,le,pe,re;Dlt(b.props.domain,P,C)&&(le=d4(b.props.domain,null,P),v&&(C==="number"||F!=="auto")&&(re=E2(H,A,"category")));var me=mue(C);if(!le||le.length===0){var he,we=(he=b.props.domain)!==null&&he!==void 0?he:me;if(A){if(le=E2(H,A,C),C==="category"&&v){var ee=l8e(le);k&&ee?(pe=le,le=uR(0,Y)):k||(le=wY(we,le,b).reduce(function(je,dt){return je.indexOf(dt)>=0?je:[].concat(x1(je),[dt])},[]))}else if(C==="category")k?le=le.filter(function(je){return je!==""&&!Qr(je)}):le=wY(we,le,b).reduce(function(je,dt){return je.indexOf(dt)>=0||dt===""||Qr(dt)?je:[].concat(x1(je),[dt])},[]);else if(C==="number"){var ye=Ett(H,i.filter(function(je){return je.props[s]===J&&(W||!je.props.hide)}),A,o,h);ye&&(le=ye)}v&&(C==="number"||F!=="auto")&&(re=E2(H,A,"category"))}else v?le=uR(0,Y):a&&a[J]&&a[J].hasStack&&C==="number"?le=g==="expand"?[0,1]:Sce(a[J].stackGroups,l,d):le=xce(H,i.filter(function(je){return je.props[s]===J&&(W||!je.props.hide)}),C,h,!0);if(C==="number")le=j4(p,le,J,o,B),we&&(le=d4(we,le,P));else if(C==="category"&&we){var be=we,Le=le.every(function(je){return be.indexOf(je)>=0});Le&&(le=be)}}return nn(nn({},x),{},xr({},J,nn(nn({},b.props),{},{axisType:o,domain:le,categoricalDomain:re,duplicateDomain:pe,originalDomain:(w=b.props.domain)!==null&&w!==void 0?w:me,isCategorical:v,layout:h})))},{})},cct=function(e,n){var r=n.graphicalItems,i=n.Axis,o=n.axisType,s=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,d=n.dataEndIndex,h=e.layout,p=e.children,g=uL(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:d}),v=g.length,x=bce(h,o),b=-1;return r.reduce(function(w,S){var C=S.props[s],A=mue("number");if(!w[C]){b++;var P;return x?P=uR(0,v):a&&a[C]&&a[C].hasStack?(P=Sce(a[C].stackGroups,l,d),P=j4(p,P,C,o)):(P=d4(A,xce(g,r.filter(function(k){return k.props[s]===C&&!k.props.hide}),"number",h),i.defaultProps.allowDataOverflow),P=j4(p,P,C,o)),nn(nn({},w),{},xr({},C,nn(nn({axisType:o},i.defaultProps),{},{hide:!0,orientation:wd(ict,"".concat(o,".").concat(b%2),null),domain:P,originalDomain:A,isCategorical:x,layout:h})))}return w},{})},uct=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,o=n.AxisComp,s=n.graphicalItems,a=n.stackGroups,l=n.dataStartIndex,d=n.dataEndIndex,h=e.children,p="".concat(i,"Id"),g=Sd(h,o),v={};return g&&g.length?v=lct(e,{axes:g,graphicalItems:s,axisType:i,axisIdKey:p,stackGroups:a,dataStartIndex:l,dataEndIndex:d}):s&&s.length&&(v=cct(e,{Axis:o,graphicalItems:s,axisType:i,axisIdKey:p,stackGroups:a,dataStartIndex:l,dataEndIndex:d})),v},dct=function(e){var n=Kg(e),r=rm(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:D6(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:tR(n,r)}},HK=function(e){var n=e.children,r=e.defaultShowTooltip,i=tu(n,p1),o=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},hct=function(e){return!e||!e.length?!1:e.some(function(n){var r=cm(n&&n.type);return r&&r.indexOf("Bar")>=0})},WK=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},fct=function(e,n){var r=e.props,i=e.graphicalItems,o=e.xAxisMap,s=o===void 0?{}:o,a=e.yAxisMap,l=a===void 0?{}:a,d=r.width,h=r.height,p=r.children,g=r.margin||{},v=tu(p,p1),x=tu(p,s1),b=Object.keys(l).reduce(function(k,F){var B=l[F],W=B.orientation;return!B.mirror&&!B.hide?nn(nn({},k),{},xr({},W,k[W]+B.width)):k},{left:g.left||0,right:g.right||0}),w=Object.keys(s).reduce(function(k,F){var B=s[F],W=B.orientation;return!B.mirror&&!B.hide?nn(nn({},k),{},xr({},W,wd(k,"".concat(W))+B.height)):k},{top:g.top||0,bottom:g.bottom||0}),S=nn(nn({},w),b),C=S.bottom;v&&(S.bottom+=v.props.height||p1.defaultProps.height),x&&n&&(S=Stt(S,i,r,n));var A=d-S.left-S.right,P=h-S.top-S.bottom;return nn(nn({brushBottom:C},S),{},{width:Math.max(A,0),height:Math.max(P,0)})},pct=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},mct=function(e){var n,r=e.chartName,i=e.GraphicalChild,o=e.defaultTooltipEventType,s=o===void 0?"axis":o,a=e.validateTooltipEventTypes,l=a===void 0?["axis"]:a,d=e.axisComponents,h=e.legendContent,p=e.formatAxisMap,g=e.defaultProps,v=function(w,S){var C=S.graphicalItems,A=S.stackGroups,P=S.offset,k=S.updateId,F=S.dataStartIndex,B=S.dataEndIndex,W=w.barSize,J=w.layout,H=w.barGap,Y=w.barCategoryGap,le=w.maxBarSize,pe=WK(J),re=pe.numericAxisName,me=pe.cateAxisName,he=hct(C),we=[];return C.forEach(function(ee,ye){var be=uL(w.data,{graphicalItems:[ee],dataStartIndex:F,dataEndIndex:B}),Le=ee.props,je=Le.dataKey,dt=Le.maxBarSize,Be=ee.props["".concat(re,"Id")],ot=ee.props["".concat(me,"Id")],at={},It=d.reduce(function(Qt,Ie){var Me=S["".concat(Ie.axisType,"Map")],wt=ee.props["".concat(Ie.axisType,"Id")];Me&&Me[wt]||Ie.axisType==="zAxis"||q0();var St=Me[wt];return nn(nn({},Qt),{},xr(xr({},Ie.axisType,St),"".concat(Ie.axisType,"Ticks"),rm(St)))},at),Lt=It[me],lt=It["".concat(me,"Ticks")],Je=A&&A[Be]&&A[Be].hasStack&&ztt(ee,A[Be].stackGroups),Qe=cm(ee.type).indexOf("Bar")>=0,ge=tR(Lt,lt),et=[],Ke=he&&btt({barSize:W,stackGroups:A,totalSize:pct(It,me)});if(Qe){var Tt,ke,Vt=Qr(dt)?le:dt,zt=(Tt=(ke=tR(Lt,lt,!0))!==null&&ke!==void 0?ke:Vt)!==null&&Tt!==void 0?Tt:0;et=wtt({barGap:H,barCategoryGap:Y,bandSize:zt!==ge?zt:ge,sizeList:Ke[ot],maxBarSize:Vt}),zt!==ge&&(et=et.map(function(Qt){return nn(nn({},Qt),{},{position:nn(nn({},Qt.position),{},{offset:Qt.position.offset-zt/2})})}))}var $t=ee&&ee.type&&ee.type.getComposedData;$t&&we.push({props:nn(nn({},$t(nn(nn({},It),{},{displayedData:be,props:w,dataKey:je,item:ee,bandSize:ge,barPosition:et,offset:P,stackedData:Je,layout:J,dataStartIndex:F,dataEndIndex:B}))),{},xr(xr(xr({key:ee.key||"item-".concat(ye)},re,It[re]),me,It[me]),"animationId",k)),childIndex:x8e(ee,w.children),item:ee})}),we},x=function(w,S){var C=w.props,A=w.dataStartIndex,P=w.dataEndIndex,k=w.updateId;if(!fq({props:C}))return null;var F=C.children,B=C.layout,W=C.stackOffset,J=C.data,H=C.reverseStackOrder,Y=WK(B),le=Y.numericAxisName,pe=Y.cateAxisName,re=Sd(F,i),me=Ltt(J,re,"".concat(le,"Id"),"".concat(pe,"Id"),W,H),he=d.reduce(function(Le,je){var dt="".concat(je.axisType,"Map");return nn(nn({},Le),{},xr({},dt,uct(C,nn(nn({},je),{},{graphicalItems:re,stackGroups:je.axisType===le&&me,dataStartIndex:A,dataEndIndex:P}))))},{}),we=fct(nn(nn({},he),{},{props:C,graphicalItems:re}),S==null?void 0:S.legendBBox);Object.keys(he).forEach(function(Le){he[Le]=p(C,he[Le],we,Le.replace("Map",""),r)});var ee=he["".concat(pe,"Map")],ye=dct(ee),be=v(C,nn(nn({},he),{},{dataStartIndex:A,dataEndIndex:P,updateId:k,graphicalItems:re,stackGroups:me,offset:we}));return nn(nn({formattedGraphicalItems:be,graphicalItems:re,offset:we,stackGroups:me},ye),he)};return n=function(b){Qlt(w,b);function w(S){var C,A,P;return Xlt(this,w),P=Zlt(this,w,[S]),xr(yi(P),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),xr(yi(P),"accessibilityManager",new Llt),xr(yi(P),"handleLegendBBoxUpdate",function(k){if(k){var F=P.state,B=F.dataStartIndex,W=F.dataEndIndex,J=F.updateId;P.setState(nn({legendBBox:k},x({props:P.props,dataStartIndex:B,dataEndIndex:W,updateId:J},nn(nn({},P.state),{},{legendBBox:k}))))}}),xr(yi(P),"handleReceiveSyncEvent",function(k,F,B){if(P.props.syncId===k){if(B===P.eventEmitterSymbol&&typeof P.props.syncMethod!="function")return;P.applySyncEvent(F)}}),xr(yi(P),"handleBrushChange",function(k){var F=k.startIndex,B=k.endIndex;if(F!==P.state.dataStartIndex||B!==P.state.dataEndIndex){var W=P.state.updateId;P.setState(function(){return nn({dataStartIndex:F,dataEndIndex:B},x({props:P.props,dataStartIndex:F,dataEndIndex:B,updateId:W},P.state))}),P.triggerSyncEvent({dataStartIndex:F,dataEndIndex:B})}}),xr(yi(P),"handleMouseEnter",function(k){var F=P.getMouseInfo(k);if(F){var B=nn(nn({},F),{},{isTooltipActive:!0});P.setState(B),P.triggerSyncEvent(B);var W=P.props.onMouseEnter;qr(W)&&W(B,k)}}),xr(yi(P),"triggeredAfterMouseMove",function(k){var F=P.getMouseInfo(k),B=F?nn(nn({},F),{},{isTooltipActive:!0}):{isTooltipActive:!1};P.setState(B),P.triggerSyncEvent(B);var W=P.props.onMouseMove;qr(W)&&W(B,k)}),xr(yi(P),"handleItemMouseEnter",function(k){P.setState(function(){return{isTooltipActive:!0,activeItem:k,activePayload:k.tooltipPayload,activeCoordinate:k.tooltipPosition||{x:k.cx,y:k.cy}}})}),xr(yi(P),"handleItemMouseLeave",function(){P.setState(function(){return{isTooltipActive:!1}})}),xr(yi(P),"handleMouseMove",function(k){k.persist(),P.throttleTriggeredAfterMouseMove(k)}),xr(yi(P),"handleMouseLeave",function(k){P.throttleTriggeredAfterMouseMove.cancel();var F={isTooltipActive:!1};P.setState(F),P.triggerSyncEvent(F);var B=P.props.onMouseLeave;qr(B)&&B(F,k)}),xr(yi(P),"handleOuterEvent",function(k){var F=_8e(k),B=wd(P.props,"".concat(F));if(F&&qr(B)){var W,J;/.*touch.*/i.test(F)?J=P.getMouseInfo(k.changedTouches[0]):J=P.getMouseInfo(k),B((W=J)!==null&&W!==void 0?W:{},k)}}),xr(yi(P),"handleClick",function(k){var F=P.getMouseInfo(k);if(F){var B=nn(nn({},F),{},{isTooltipActive:!0});P.setState(B),P.triggerSyncEvent(B);var W=P.props.onClick;qr(W)&&W(B,k)}}),xr(yi(P),"handleMouseDown",function(k){var F=P.props.onMouseDown;if(qr(F)){var B=P.getMouseInfo(k);F(B,k)}}),xr(yi(P),"handleMouseUp",function(k){var F=P.props.onMouseUp;if(qr(F)){var B=P.getMouseInfo(k);F(B,k)}}),xr(yi(P),"handleTouchMove",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&P.throttleTriggeredAfterMouseMove(k.changedTouches[0])}),xr(yi(P),"handleTouchStart",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&P.handleMouseDown(k.changedTouches[0])}),xr(yi(P),"handleTouchEnd",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&P.handleMouseUp(k.changedTouches[0])}),xr(yi(P),"triggerSyncEvent",function(k){P.props.syncId!==void 0&&PN.emit(IN,P.props.syncId,k,P.eventEmitterSymbol)}),xr(yi(P),"applySyncEvent",function(k){var F=P.props,B=F.layout,W=F.syncMethod,J=P.state.updateId,H=k.dataStartIndex,Y=k.dataEndIndex;if(k.dataStartIndex!==void 0||k.dataEndIndex!==void 0)P.setState(nn({dataStartIndex:H,dataEndIndex:Y},x({props:P.props,dataStartIndex:H,dataEndIndex:Y,updateId:J},P.state)));else if(k.activeTooltipIndex!==void 0){var le=k.chartX,pe=k.chartY,re=k.activeTooltipIndex,me=P.state,he=me.offset,we=me.tooltipTicks;if(!he)return;if(typeof W=="function")re=W(we,k);else if(W==="value"){re=-1;for(var ee=0;ee<we.length;ee++)if(we[ee].value===k.activeLabel){re=ee;break}}var ye=nn(nn({},he),{},{x:he.left,y:he.top}),be=Math.min(le,ye.x+ye.width),Le=Math.min(pe,ye.y+ye.height),je=we[re]&&we[re].value,dt=V4(P.state,P.props.data,re),Be=we[re]?{x:B==="horizontal"?we[re].coordinate:be,y:B==="horizontal"?Le:we[re].coordinate}:pue;P.setState(nn(nn({},k),{},{activeLabel:je,activeCoordinate:Be,activePayload:dt,activeTooltipIndex:re}))}else P.setState(k)}),xr(yi(P),"renderCursor",function(k){var F,B=P.state,W=B.isTooltipActive,J=B.activeCoordinate,H=B.activePayload,Y=B.offset,le=B.activeTooltipIndex,pe=B.tooltipAxisBandSize,re=P.getTooltipEventType(),me=(F=k.props.active)!==null&&F!==void 0?F:W,he=P.props.layout,we=k.key||"_recharts-cursor";return Ye.createElement($lt,{key:we,activeCoordinate:J,activePayload:H,activeTooltipIndex:le,chartName:r,element:k,isActive:me,layout:he,offset:Y,tooltipAxisBandSize:pe,tooltipEventType:re})}),xr(yi(P),"renderPolarAxis",function(k,F,B){var W=wd(k,"type.axisType"),J=wd(P.state,"".concat(W,"Map")),H=J&&J[k.props["".concat(W,"Id")]];return V.cloneElement(k,nn(nn({},H),{},{className:Wt(W,H.className),key:k.key||"".concat(F,"-").concat(B),ticks:rm(H,!0)}))}),xr(yi(P),"renderPolarGrid",function(k){var F=k.props,B=F.radialLines,W=F.polarAngles,J=F.polarRadius,H=P.state,Y=H.radiusAxisMap,le=H.angleAxisMap,pe=Kg(Y),re=Kg(le),me=re.cx,he=re.cy,we=re.innerRadius,ee=re.outerRadius;return V.cloneElement(k,{polarAngles:Array.isArray(W)?W:rm(re,!0).map(function(ye){return ye.coordinate}),polarRadius:Array.isArray(J)?J:rm(pe,!0).map(function(ye){return ye.coordinate}),cx:me,cy:he,innerRadius:we,outerRadius:ee,key:k.key||"polar-grid",radialLines:B})}),xr(yi(P),"renderLegend",function(){var k=P.state.formattedGraphicalItems,F=P.props,B=F.children,W=F.width,J=F.height,H=P.props.margin||{},Y=W-(H.left||0)-(H.right||0),le=vce({children:B,formattedGraphicalItems:k,legendWidth:Y,legendContent:h});if(!le)return null;var pe=le.item,re=$K(le,Ult);return V.cloneElement(pe,nn(nn({},re),{},{chartWidth:W,chartHeight:J,margin:H,onBBoxUpdate:P.handleLegendBBoxUpdate}))}),xr(yi(P),"renderTooltip",function(){var k,F=P.props,B=F.children,W=F.accessibilityLayer,J=tu(B,wf);if(!J)return null;var H=P.state,Y=H.isTooltipActive,le=H.activeCoordinate,pe=H.activePayload,re=H.activeLabel,me=H.offset,he=(k=J.props.active)!==null&&k!==void 0?k:Y;return V.cloneElement(J,{viewBox:nn(nn({},me),{},{x:me.left,y:me.top}),active:he,label:re,payload:he?pe:[],coordinate:le,accessibilityLayer:W})}),xr(yi(P),"renderBrush",function(k){var F=P.props,B=F.margin,W=F.data,J=P.state,H=J.offset,Y=J.dataStartIndex,le=J.dataEndIndex,pe=J.updateId;return V.cloneElement(k,{key:k.key||"_recharts-brush",onChange:jC(P.handleBrushChange,k.props.onChange),data:W,x:Pn(k.props.x)?k.props.x:H.left,y:Pn(k.props.y)?k.props.y:H.top+H.height+H.brushBottom-(B.bottom||0),width:Pn(k.props.width)?k.props.width:H.width,startIndex:Y,endIndex:le,updateId:"brush-".concat(pe)})}),xr(yi(P),"renderReferenceElement",function(k,F,B){if(!k)return null;var W=yi(P),J=W.clipPathId,H=P.state,Y=H.xAxisMap,le=H.yAxisMap,pe=H.offset,re=k.props,me=re.xAxisId,he=re.yAxisId;return V.cloneElement(k,{key:k.key||"".concat(F,"-").concat(B),xAxis:Y[me],yAxis:le[he],viewBox:{x:pe.left,y:pe.top,width:pe.width,height:pe.height},clipPathId:J})}),xr(yi(P),"renderActivePoints",function(k){var F=k.item,B=k.activePoint,W=k.basePoint,J=k.childIndex,H=k.isRange,Y=[],le=F.props.key,pe=F.item.props,re=pe.activeDot,me=pe.dataKey,he=nn(nn({index:J,dataKey:me,cx:B.x,cy:B.y,r:4,fill:s8(F.item),strokeWidth:2,stroke:"#fff",payload:B.payload,value:B.value,key:"".concat(le,"-activePoint-").concat(J)},ii(re,!1)),CI(re));return Y.push(w.renderActiveDot(re,he)),W?Y.push(w.renderActiveDot(re,nn(nn({},he),{},{cx:W.x,cy:W.y,key:"".concat(le,"-basePoint-").concat(J)}))):H&&Y.push(null),Y}),xr(yi(P),"renderGraphicChild",function(k,F,B){var W=P.filterFormatItem(k,F,B);if(!W)return null;var J=P.getTooltipEventType(),H=P.state,Y=H.isTooltipActive,le=H.tooltipAxis,pe=H.activeTooltipIndex,re=H.activeLabel,me=P.props.children,he=tu(me,wf),we=W.props,ee=we.points,ye=we.isRange,be=we.baseLine,Le=W.item.props,je=Le.activeDot,dt=Le.hide,Be=Le.activeBar,ot=Le.activeShape,at=!!(!dt&&Y&&he&&(je||Be||ot)),It={};J!=="axis"&&he&&he.props.trigger==="click"?It={onClick:jC(P.handleItemMouseEnter,k.props.onClick)}:J!=="axis"&&(It={onMouseLeave:jC(P.handleItemMouseLeave,k.props.onMouseLeave),onMouseEnter:jC(P.handleItemMouseEnter,k.props.onMouseEnter)});var Lt=V.cloneElement(k,nn(nn({},W.props),It));function lt(Ie){return typeof le.dataKey=="function"?le.dataKey(Ie.payload):null}if(at)if(pe>=0){var Je,Qe;if(le.dataKey&&!le.allowDuplicatedCategory){var ge=typeof le.dataKey=="function"?lt:"payload.".concat(le.dataKey.toString());Je=TI(ee,ge,re),Qe=ye&&be&&TI(be,ge,re)}else Je=ee==null?void 0:ee[pe],Qe=ye&&be&&be[pe];if(ot||Be){var et=k.props.activeIndex!==void 0?k.props.activeIndex:pe;return[V.cloneElement(k,nn(nn(nn({},W.props),It),{},{activeIndex:et})),null,null]}if(!Qr(Je))return[Lt].concat(x1(P.renderActivePoints({item:W,activePoint:Je,basePoint:Qe,childIndex:pe,isRange:ye})))}else{var Ke,Tt=(Ke=P.getItemByXY(P.state.activeCoordinate))!==null&&Ke!==void 0?Ke:{graphicalItem:Lt},ke=Tt.graphicalItem,Vt=ke.item,zt=Vt===void 0?k:Vt,$t=ke.childIndex,Qt=nn(nn(nn({},W.props),It),{},{activeIndex:$t});return[V.cloneElement(zt,Qt),null,null]}return ye?[Lt,null,null]:[Lt,null]}),xr(yi(P),"renderCustomized",function(k,F,B){return V.cloneElement(k,nn(nn({key:"recharts-customized-".concat(B)},P.props),P.state))}),xr(yi(P),"renderMap",{CartesianGrid:{handler:WC,once:!0},ReferenceArea:{handler:P.renderReferenceElement},ReferenceLine:{handler:WC},ReferenceDot:{handler:P.renderReferenceElement},XAxis:{handler:WC},YAxis:{handler:WC},Brush:{handler:P.renderBrush,once:!0},Bar:{handler:P.renderGraphicChild},Line:{handler:P.renderGraphicChild},Area:{handler:P.renderGraphicChild},Radar:{handler:P.renderGraphicChild},RadialBar:{handler:P.renderGraphicChild},Scatter:{handler:P.renderGraphicChild},Pie:{handler:P.renderGraphicChild},Funnel:{handler:P.renderGraphicChild},Tooltip:{handler:P.renderCursor,once:!0},PolarGrid:{handler:P.renderPolarGrid,once:!0},PolarAngleAxis:{handler:P.renderPolarAxis},PolarRadiusAxis:{handler:P.renderPolarAxis},Customized:{handler:P.renderCustomized}}),P.clipPathId="".concat((C=S.id)!==null&&C!==void 0?C:JE("recharts"),"-clip"),P.throttleTriggeredAfterMouseMove=vle(P.triggeredAfterMouseMove,(A=S.throttleDelay)!==null&&A!==void 0?A:1e3/60),P.state={},P}return Klt(w,[{key:"componentDidMount",value:function(){var C,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var C=this.props,A=C.children,P=C.data,k=C.height,F=C.layout,B=tu(A,wf);if(B){var W=B.props.defaultIndex;if(!(typeof W!="number"||W<0||W>this.state.tooltipTicks.length)){var J=this.state.tooltipTicks[W]&&this.state.tooltipTicks[W].value,H=V4(this.state,P,W,J),Y=this.state.tooltipTicks[W].coordinate,le=(this.state.offset.top+k)/2,pe=F==="horizontal",re=pe?{x:Y,y:le}:{y:Y,x:le},me=this.state.formattedGraphicalItems.find(function(we){var ee=we.item;return ee.type.name==="Scatter"});me&&(re=nn(nn({},re),me.props.points[W].tooltipPosition),H=me.props.points[W].tooltipPayload);var he={activeTooltipIndex:W,isTooltipActive:!0,activeLabel:J,activePayload:H,activeCoordinate:re};this.setState(he),this.renderCursor(B),this.accessibilityManager.setIndex(W)}}}},{key:"getSnapshotBeforeUpdate",value:function(C,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==C.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==C.margin){var P,k;this.accessibilityManager.setDetails({offset:{left:(P=this.props.margin.left)!==null&&P!==void 0?P:0,top:(k=this.props.margin.top)!==null&&k!==void 0?k:0}})}return null}},{key:"componentDidUpdate",value:function(C){CB([tu(C.children,wf)],[tu(this.props.children,wf)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var C=tu(this.props.children,wf);if(C&&typeof C.props.shared=="boolean"){var A=C.props.shared?"axis":"item";return l.indexOf(A)>=0?A:s}return s}},{key:"getMouseInfo",value:function(C){if(!this.container)return null;var A=this.container,P=A.getBoundingClientRect(),k=WKe(P),F={chartX:Math.round(C.pageX-k.left),chartY:Math.round(C.pageY-k.top)},B=P.width/A.offsetWidth||1,W=this.inRange(F.chartX,F.chartY,B);if(!W)return null;var J=this.state,H=J.xAxisMap,Y=J.yAxisMap,le=this.getTooltipEventType();if(le!=="axis"&&H&&Y){var pe=Kg(H).scale,re=Kg(Y).scale,me=pe&&pe.invert?pe.invert(F.chartX):null,he=re&&re.invert?re.invert(F.chartY):null;return nn(nn({},F),{},{xValue:me,yValue:he})}var we=VK(this.state,this.props.data,this.props.layout,W);return we?nn(nn({},F),we):null}},{key:"inRange",value:function(C,A){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,k=this.props.layout,F=C/P,B=A/P;if(k==="horizontal"||k==="vertical"){var W=this.state.offset,J=F>=W.left&&F<=W.left+W.width&&B>=W.top&&B<=W.top+W.height;return J?{x:F,y:B}:null}var H=this.state,Y=H.angleAxisMap,le=H.radiusAxisMap;if(Y&&le){var pe=Kg(Y);return EY({x:F,y:B},pe)}return null}},{key:"parseEventsOfWrapper",value:function(){var C=this.props.children,A=this.getTooltipEventType(),P=tu(C,wf),k={};P&&A==="axis"&&(P.props.trigger==="click"?k={onClick:this.handleClick}:k={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var F=CI(this.props,this.handleOuterEvent);return nn(nn({},F),k)}},{key:"addListener",value:function(){PN.on(IN,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){PN.removeListener(IN,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(C,A,P){for(var k=this.state.formattedGraphicalItems,F=0,B=k.length;F<B;F++){var W=k[F];if(W.item===C||W.props.key===C.key||A===cm(W.item.type)&&P===W.childIndex)return W}return null}},{key:"renderClipPath",value:function(){var C=this.clipPathId,A=this.state.offset,P=A.left,k=A.top,F=A.height,B=A.width;return Ye.createElement("defs",null,Ye.createElement("clipPath",{id:C},Ye.createElement("rect",{x:P,y:k,height:F,width:B})))}},{key:"getXScales",value:function(){var C=this.state.xAxisMap;return C?Object.entries(C).reduce(function(A,P){var k=jK(P,2),F=k[0],B=k[1];return nn(nn({},A),{},xr({},F,B.scale))},{}):null}},{key:"getYScales",value:function(){var C=this.state.yAxisMap;return C?Object.entries(C).reduce(function(A,P){var k=jK(P,2),F=k[0],B=k[1];return nn(nn({},A),{},xr({},F,B.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(C){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[C])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(C){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[C])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(C){var A=this.state,P=A.formattedGraphicalItems,k=A.activeItem;if(P&&P.length)for(var F=0,B=P.length;F<B;F++){var W=P[F],J=W.props,H=W.item,Y=cm(H.type);if(Y==="Bar"){var le=(J.data||[]).find(function(he){return fit(C,he)});if(le)return{graphicalItem:W,payload:le}}else if(Y==="RadialBar"){var pe=(J.data||[]).find(function(he){return EY(C,he)});if(pe)return{graphicalItem:W,payload:pe}}else if(oL(W,k)||sL(W,k)||WM(W,k)){var re=got({graphicalItem:W,activeTooltipItem:k,itemData:H.props.data}),me=H.props.activeIndex===void 0?re:H.props.activeIndex;return{graphicalItem:nn(nn({},W),{},{childIndex:me}),payload:WM(W,k)?H.props.data[re]:W.props.data[re]}}}return null}},{key:"render",value:function(){var C=this;if(!fq(this))return null;var A=this.props,P=A.children,k=A.className,F=A.width,B=A.height,W=A.style,J=A.compact,H=A.title,Y=A.desc,le=$K(A,Vlt),pe=ii(le,!1);if(J)return Ye.createElement(SK,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ye.createElement(PB,A2({},pe,{width:F,height:B,title:H,desc:Y}),this.renderClipPath(),mq(P,this.renderMap)));if(this.props.accessibilityLayer){var re,me;pe.tabIndex=(re=this.props.tabIndex)!==null&&re!==void 0?re:0,pe.role=(me=this.props.role)!==null&&me!==void 0?me:"application",pe.onKeyDown=function(we){C.accessibilityManager.keyboardEvent(we)},pe.onFocus=function(){C.accessibilityManager.focus()}}var he=this.parseEventsOfWrapper();return Ye.createElement(SK,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ye.createElement("div",A2({className:Wt("recharts-wrapper",k),style:nn({position:"relative",cursor:"default",width:F,height:B},W)},he,{ref:function(ee){C.container=ee}}),Ye.createElement(PB,A2({},pe,{width:F,height:B,title:H,desc:Y,style:oct}),this.renderClipPath(),mq(P,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}]),w}(V.Component),xr(n,"displayName",r),xr(n,"defaultProps",nn({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},g)),xr(n,"getDerivedStateFromProps",function(b,w){var S=b.dataKey,C=b.data,A=b.children,P=b.width,k=b.height,F=b.layout,B=b.stackOffset,W=b.margin,J=w.dataStartIndex,H=w.dataEndIndex;if(w.updateId===void 0){var Y=HK(b);return nn(nn(nn({},Y),{},{updateId:0},x(nn(nn({props:b},Y),{},{updateId:0}),w)),{},{prevDataKey:S,prevData:C,prevWidth:P,prevHeight:k,prevLayout:F,prevStackOffset:B,prevMargin:W,prevChildren:A})}if(S!==w.prevDataKey||C!==w.prevData||P!==w.prevWidth||k!==w.prevHeight||F!==w.prevLayout||B!==w.prevStackOffset||!Cb(W,w.prevMargin)){var le=HK(b),pe={chartX:w.chartX,chartY:w.chartY,isTooltipActive:w.isTooltipActive},re=nn(nn({},VK(w,C,F)),{},{updateId:w.updateId+1}),me=nn(nn(nn({},le),pe),re);return nn(nn(nn({},me),x(nn({props:b},me),w)),{},{prevDataKey:S,prevData:C,prevWidth:P,prevHeight:k,prevLayout:F,prevStackOffset:B,prevMargin:W,prevChildren:A})}if(!CB(A,w.prevChildren)){var he,we,ee,ye,be=tu(A,p1),Le=be&&(he=(we=be.props)===null||we===void 0?void 0:we.startIndex)!==null&&he!==void 0?he:J,je=be&&(ee=(ye=be.props)===null||ye===void 0?void 0:ye.endIndex)!==null&&ee!==void 0?ee:H,dt=Le!==J||je!==H,Be=!Qr(C),ot=Be&&!dt?w.updateId:w.updateId+1;return nn(nn({updateId:ot},x(nn(nn({props:b},w),{},{updateId:ot,dataStartIndex:Le,dataEndIndex:je}),w)),{},{prevChildren:A,dataStartIndex:Le,dataEndIndex:je})}return null}),xr(n,"renderActiveDot",function(b,w){var S;return V.isValidElement(b)?S=V.cloneElement(b,w):qr(b)?S=b(w):S=Ye.createElement(l8,w),Ye.createElement(us,{className:"recharts-active-dot",key:w.key},S)}),n},gct=mct({chartName:"LineChart",GraphicalChild:v1,axisComponents:[{axisType:"xAxis",AxisComp:lL},{axisType:"yAxis",AxisComp:cL}],formatAxisMap:Bst});const yct=Wr(t=>({chart:{flexGrow:1,overflow:"hidden"},content:{height:"100%",flexGrow:1,alignItems:"stretch",display:"flex",flexDirection:"column",overflowY:"auto"}})),dL=()=>{const t=yct(),[e,n]=V.useState([]),[r,i]=V.useState([]),[o,s]=V.useState([]),a=Ye.createRef();a.current=o;const[l,d]=V.useState(-1),h=nr(w=>w.mission.route),[p,g]=V.useState({min:0,max:0,range:10});V.useEffect(()=>{const w=e.map(k=>k.data),S=w.flat().map(k=>k.elevation),C=w.flat().map(k=>k.uavheight?Number(k.uavheight):0),A=Math.min(...S),P=Math.max(...C);g({min:A,max:P,range:P-A})},[e]);const v=w=>{const S=[];return w.length>0&&w.forEach(C=>{const A=[];C.wp.forEach(P=>{A.push([P.pos[0],P.pos[1],P.pos[2]])}),S.push(A)}),S};async function x(){if(console.log("--------------   LLAMANDO A ELEVATION"),h.length>0){let w=JSON.parse(JSON.stringify(h)),S=w.map(P=>P.id),C=v(w);i(C);let A;try{const P=await fetch("/api/map/elevation",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({routes:C})});if(P.ok)A=await P.json();else throw new Error(P.status)}catch(P){console.log("error to call server /api/map/elevation"),console.log(P)}if(A.status){let P=A.elevation.map((k,F)=>({name:"RT"+F,data:k,color:Hf.colors_devices[S[F]]}));d(-1),s(P)}else console.log("command"),console.log(A),console.log("no get elevation of point error to connect to API of  elevation")}}V.useEffect(()=>{console.log("mission Elevation")},[]),V.useEffect(()=>{let w=!1,S=v(h);if(console.log("update elevation"),S.length>r.length)console.log("ruta mayor"),S[+S.length+-1].length>0?w=!0:i(S);else if(S.length<r.length){console.log(" se ha eliminado  una ruta");let C=[],A=[];r.map((P,k)=>{let F=!1;S.map(B=>{JSON.stringify(P)===JSON.stringify(B)&&(F=!0)}),F&&(C.push(P),A.push(a.current[k]))}),s(A),i(C)}else{console.log("ruta de la misma longitud");for(let C=0;C<S.length;C=C+1)if(JSON.stringify(S[C])!=JSON.stringify(r[C])){console.log("latitude longitude no equals");let A=r[C].map(k=>[k[0],k[1]]),P=S[C].map(k=>[k[0],k[1]]);if(JSON.stringify(A)===JSON.stringify(P)){for(let k=0;k<r[C].length;k=k+1)if(r[C][k][2]!==S[C][k][2]){console.log("diferent elevation");let F=JSON.parse(JSON.stringify(a.current));for(let B=0;B<F[C].data.length;B=B+1)F[C].data[B].hasOwnProperty("wp")&&F[C].data[B].wp==k&&(console.log("encontrado elev profile wp"),F[C].data[B].uavheight=+F[C].data[B].uavheight-+F[C].data[B].uav+ +S[C][k][2],F[C].data[B].uav=+S[C][k][2]);console.log(F),s(F)}i(S);break}else{console.log("nuevas posiciones"),w=!0;break}}}w&&x()},[h]),V.useEffect(()=>{l==-1?n(o):n([o[l]])},[l,o]);const b=({active:w,payload:S,label:C})=>{if(w&&S&&S.length){let A=[S[0].payload];return A[0].color=S[0].color,S.map(P=>{let k=!0;A.map(F=>{P.payload.rt==F.rt&&(k=!1)}),P.payload.color=P.color,k&&A.push(P.payload)}),A[0].uavheight?z.jsxs("div",{style:{background:"#FFFFFF"},children:[z.jsx("div",{children:`distancia ${C} m `}),A.map(P=>z.jsxs(V.Fragment,{children:[z.jsx("div",{style:{color:P.color,fontSize:16},children:`Ruta ${P.rt} - wp ${P.wp}`},`tr${P.rt}`),z.jsx("div",{style:{color:P.color,fontSize:16},children:`Terreno:${P.elevation} - UAV: ${P.uavheight}`},`dr${P.rt}`)]},"s-"+P.rt))]}):z.jsxs("div",{style:{background:"#FFFFFF"},children:[z.jsx("div",{children:`distancia ${C} m `}),A.map(P=>z.jsxs(V.Fragment,{children:[z.jsx("div",{style:{color:P.color,fontSize:16},children:`Ruta ${P.rt}`},`tr${P.rt}`),z.jsx("div",{style:{color:P.color,fontSize:16},children:`Terreno:${P.elevation} `},`dr${P.rt}`)]},"s-"+P.rt))]})}return null};return z.jsxs("div",{className:t.content,children:[z.jsxs(Ko,{style:{display:"flex",margin:"10px",alignItems:"center"},children:[z.jsx("a",{style:{marginInline:"20px"},children:"Elevation Profile"}),z.jsxs(NE,{children:[z.jsx(zE,{id:"demo-simple-select-label",children:"Route"}),z.jsxs(U1,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:l,label:"Elevation Profile",onChange:w=>d(w.target.value),children:[z.jsx(fu,{value:-1,children:"All Routes"}),o.map((w,S,C)=>z.jsx(fu,{value:S,children:`Route${S}`},`sel${S}`))]})]})]}),e.length>0&&z.jsx("div",{className:t.chart,children:z.jsx(FKe,{width:"100%",height:"100%",children:z.jsxs(gct,{data:e,margin:{top:10,right:40,left:0,bottom:10},children:[z.jsx(lL,{dataKey:"length",type:"number",domain:["dataMin","dataMax"]}),z.jsx(cL,{type:"number",tickFormatter:w=>w.toFixed(2),domain:[p.min-p.range/5,p.max+p.range/5]}),z.jsx(oue,{strokeDasharray:"3 3"}),z.jsx(wf,{content:z.jsx(b,{})}),z.jsx(s1,{}),e.map((w,S,C)=>z.jsxs(V.Fragment,{children:[z.jsx(v1,{type:"monotone",dataKey:"elevation",data:w.data,name:w.name,stroke:w.color,activeDot:{r:8,onClick:(A,P)=>{console.log(P);let k=`https://www.google.com/maps?q=${P.payload.lat},${P.payload.lng}`;window.open(k,"_blank")}}},w.name),z.jsx(v1,{connectNulls:!0,dataKey:"uavheight",data:w.data,name:w.name+"-v",stroke:w.color,strokeDasharray:"5 5",activeDot:{onClick:(A,P)=>{console.log(P)}}},w.name+"-v")]},"s-"+S))]})})})]})},vct=Wr(t=>({card:{pointerEvents:"auto",width:"500px",height:"180px"},media:{height:t.dimensions.popupImageHeight,display:"flex",justifyContent:"flex-end",alignItems:"flex-start"},mediaButton:{color:t.palette.colors.white,mixBlendMode:"difference"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(1,1,0,2)},content:{paddingTop:"15px",paddingBottom:t.spacing(1)},negative:{color:t.palette.colors.negative},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},table:{"& .MuiTableCell-sizeSmall":{paddingLeft:0,paddingRight:0}},cell:{borderBottom:"none"},actions:{justifyContent:"center"},root:{pointerEvents:"none",position:"fixed",zIndex:6,left:"50%",top:"40%",transform:"translateX(-50%)"}})),y8=({SetOpenSave:t,OpenSave:e})=>{const n=vct(),r=nr(h=>h.mission),[i,o]=V.useState("yaml"),[s,a]=V.useState(r.name),l=async()=>{let h,p="text/plain";if(i=="yaml"){let b={version:"3"};b.name=r.name,b.route=r.route,h=vI.stringify(b)}if(i=="kml"){p="application/xml";let b=`<?xml version="1.0" encoding="UTF-8"?>
`;b+=`<kml>
`,b+=`<Document>
`,r.route.map((S,C,A)=>{b+=`<Style id="sn_ylw-pushpin1${C}">
`,b+=`<LineStyle>
`,b+=`<color>ff${Hf.colors_devices[C].substr(-6)}</color>
`,b+=`<width>3</width>
`,b+=`</LineStyle>
`,b+=`</Style>
`});let w=[];for(const S of r.route)if(S.wp.length){let C=await fetch(`/api/map/elevation?locations=[[${S.wp[0].pos[0]},${S.wp[0].pos[1]}]]`);if(C.ok){let A=await C.json();w.push(A.results[0].elevation)}else w.push(0)}else w.push(0);r.route.map((S,C)=>{b+=`<Placemark>
`,b+=`<name>${S.uav}-${S.name}</name>
`,b+=`<styleUrl>#sn_ylw-pushpin1${C}</styleUrl>
`,b+=`<open>1</open>
`,b+=`<LineString>
`;let A="";S.wp.map(P=>{A=A+P.pos[1]+","+P.pos[0]+","+(+P.pos[2]+ +w[C])+" "}),b+=`<tessellate>1</tessellate>
`,b+=`<altitudeMode>absolute</altitudeMode>
`,b+=`<coordinates>
`,b+=A+`
`,b+=`</coordinates>
`,b+=`</LineString>
`,b+=`</Placemark>
`}),b+=`</Document>
`,b+="</kml>",h=b}if(i=="plan"){p="application/json";let b={fileType:"Plan"};b.geoFence={circles:[],polygons:[],version:2},b.groundStation="QGroundControl",b.mission={},b.mission.cruiseSpeed=r.route[0].attributes.idle_vel,b.mission.firmwareType=12,b.mission.globalPlanAltitudeMode=0,b.mission.hoverSpeed=5,b.mission.items=[],r.route.map((w,S,C)=>{w.wp.map((A,P,k)=>{let F={AMSLAltAboveTerrain:null,Altitude:A.pos[2],AltitudeMode:1,autoContinue:!0,command:16,doJumpId:1,frame:3,params:[0,0,0,null,A.pos[0],A.pos[1],A.pos[2]],type:"SimpleItem"};P==0&&(F.command=84,b.mission.plannedHomePosition=[A.pos[0],A.pos[1],A.pos[2]]),P+1==k.length&&(F.command=84),b.mission.items.push(F)})}),b.mission.vehicleType=20,b.mission.version=2,b.rallyPoints={points:[],version:2},b.version=1,h=JSON.stringify(b)}if(i=="waypoint"){let b=`QGC WPL 110
`;r.route.map(w=>{w.wp.map((S,C,A)=>{C==0?b+=`${C}	1	0	16	0	0	0	0	${S.pos[0]}	${S.pos[1]}	${S.pos[2]}	1
`:b+=`${C}	0	0	16	0	0	0	0	${S.pos[0]}	${S.pos[1]}	${S.pos[2]}	1
`})}),h=b}const g=new Blob([h],{type:p}),v=URL.createObjectURL(g),x=document.createElement("a");x.download=r.name+"."+i,x.href=v,x.click()},d=()=>{t(!1)};return z.jsx("div",{className:n.root,children:z.jsxs(Nh,{elevation:3,className:n.card,children:[z.jsxs("div",{className:n.header,children:[z.jsx(yn,{variant:"body2",color:"textSecondary",children:"Save Mission"}),z.jsx(hr,{size:"small",onClick:d,onTouchStart:d,children:z.jsx(Ph,{fontSize:"small"})})]}),z.jsxs(Fk,{className:n.content,children:[z.jsx(bi,{required:!0,label:"Name Mission",variant:"standard",value:s||" ",onChange:h=>a(h.target.value),style:{width:"300px",marginRight:"5px"}}),z.jsxs(NE,{children:[z.jsx(zE,{children:"Type file mission"}),z.jsx(U1,{label:"Type file mission",value:i,onChange:h=>o(h.target.value),sx:{width:"120px"},children:["yaml","kml","waypoint","plan"].map(h=>z.jsx(fu,{value:h,children:h},h))})]})]}),z.jsx(Pre,{classes:{root:n.actions},disableSpacing:!0,children:z.jsx(jr,{onClick:l,children:"Save Mission"})})]})})},_ct=Wr(t=>({root:{margin:"0",height:"100vh"},sidebarStyle:{display:"flex",flexDirection:"column",position:"fixed",left:0,top:"88px",height:"calc(100% - 95px)",width:"560px",margin:"0px",zIndex:3},middleStyle:{flex:1,display:"grid"},panelElevation:{display:"flex",flexDirection:"column",position:"fixed",right:0,bottom:0,height:"50vh",width:"calc(100% - 560px)",margin:"0px",zIndex:3}})),xct=(t,e)=>{setList([...list,toastProperties])},bct=()=>{const t=_ct(),[e,n]=V.useState(!1),r=nr(d=>d.data.positions),i=nr(d=>d.session.markers),[o,s]=V.useState([]),[a,l]=V.useState([]);return V.useEffect(()=>{s(Object.values(r))},[r]),V.useEffect(()=>{l(i)},[i]),z.jsx("div",{className:t.root,children:z.jsx(EO,{children:z.jsxs(Z1,{notification:xct,children:[z.jsx(HE,{}),z.jsx(J1,{}),z.jsxs("div",{style:{float:"right",width:"calc(100% - 560px)",height:"calc(70vh - 95px)",right:"0px",margin:"auto"},children:[z.jsxs(Wk,{children:[z.jsx(t6,{markers:a}),z.jsx(MO,{}),z.jsx(Jse,{}),z.jsx(n6,{positions:o,onClick:null,selectedPosition:null,showStatus:!0})]}),z.jsx(SO,{})]}),z.jsx("div",{className:t.sidebarStyle,children:z.jsx("div",{className:t.middleStyle,children:z.jsx(jo,{square:!0,children:z.jsx(u6,{SetOpenSave:n})})})}),z.jsx("div",{className:t.panelElevation,children:z.jsx("div",{className:t.middleStyle,children:z.jsx(jo,{square:!0,children:z.jsx(dL,{})})})}),e&&z.jsx(y8,{SetOpenSave:n})]})})})};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const hL="162",ru={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},iu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},gue=0,H4=1,yue=2,wct=3,vue=0,fL=1,P2=2,dh=3,Yf=0,Kl=1,pd=2,fm=0,C0=1,W4=2,G4=3,q4=4,_ue=5,Zg=100,xue=101,bue=102,X4=103,Y4=104,wue=200,Sue=201,Mue=202,Eue=203,_R=204,xR=205,Tue=206,Cue=207,Aue=208,Pue=209,Iue=210,Rue=211,kue=212,Oue=213,Lue=214,Due=0,Nue=1,zue=2,tE=3,Fue=4,Bue=5,jue=6,$ue=7,lT=0,Uue=1,Vue=2,$f=0,Hue=1,Wue=2,Gue=3,v8=4,que=5,Xue=6,Yue=7,K4="attached",Kue="detached",pL=300,Cm=301,Ly=302,nE=303,rE=304,pw=306,Dy=1e3,Oa=1001,b1=1002,Xo=1003,iE=1004,Sct=1004,Jg=1005,Mct=1005,yo=1006,Ib=1007,Ect=1007,yd=1008,Tct=1008,Uf=1009,Zue=1010,Jue=1011,mL=1012,_8=1013,im=1014,uu=1015,w1=1016,x8=1017,b8=1018,Sy=1020,Que=1021,Wl=1023,ede=1024,tde=1025,My=1026,Y0=1027,w8=1028,S8=1029,nde=1030,M8=1031,E8=1033,pP=33776,mP=33777,gP=33778,yP=33779,Z4=35840,J4=35841,Q4=35842,e5=35843,T8=36196,t5=37492,n5=37496,r5=37808,i5=37809,o5=37810,s5=37811,a5=37812,l5=37813,c5=37814,u5=37815,d5=37816,h5=37817,f5=37818,p5=37819,m5=37820,g5=37821,vP=36492,y5=36494,v5=36495,rde=36283,_5=36284,x5=36285,b5=36286,ide=2200,ode=2201,sde=2202,S1=2300,K0=2301,_P=2302,f0=2400,p0=2401,oE=2402,gL=2500,C8=2501,ade=0,A8=1,bR=2,lde=3200,cde=3201,Yy=0,ude=1,Xp="",Ra="srgb",da="srgb-linear",yL="display-p3",cT="display-p3-linear",sE="linear",no="srgb",aE="rec709",lE="p3",Cct=0,Kv=7680,Act=7681,Pct=7682,Ict=7683,Rct=34055,kct=34056,Oct=5386,Lct=512,Dct=513,Nct=514,zct=515,Fct=516,Bct=517,jct=518,w5=519,dde=512,hde=513,fde=514,P8=515,pde=516,mde=517,gde=518,yde=519,cE=35044,$ct=35048,Uct=35040,Vct=35045,Hct=35049,Wct=35041,Gct=35046,qct=35050,Xct=35042,Yct="100",S5="300 es",wR=1035,If=2e3,uE=2001;class jh{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let o=0,s=i.length;o<s;o++)i[o].call(this,e);e.target=null}}}const sl=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let GK=1234567;const A0=Math.PI/180,M1=180/Math.PI;function vu(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(sl[t&255]+sl[t>>8&255]+sl[t>>16&255]+sl[t>>24&255]+"-"+sl[e&255]+sl[e>>8&255]+"-"+sl[e>>16&15|64]+sl[e>>24&255]+"-"+sl[n&63|128]+sl[n>>8&255]+"-"+sl[n>>16&255]+sl[n>>24&255]+sl[r&255]+sl[r>>8&255]+sl[r>>16&255]+sl[r>>24&255]).toLowerCase()}function Yo(t,e,n){return Math.max(e,Math.min(n,t))}function I8(t,e){return(t%e+e)%e}function Kct(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function Zct(t,e,n){return t!==e?(n-t)/(e-t):0}function I2(t,e,n){return(1-n)*t+n*e}function Jct(t,e,n,r){return I2(t,e,1-Math.exp(-n*r))}function Qct(t,e=1){return e-Math.abs(I8(t,e*2)-e)}function eut(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function tut(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function nut(t,e){return t+Math.floor(Math.random()*(e-t+1))}function rut(t,e){return t+Math.random()*(e-t)}function iut(t){return t*(.5-Math.random())}function out(t){t!==void 0&&(GK=t);let e=GK+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function sut(t){return t*A0}function aut(t){return t*M1}function M5(t){return(t&t-1)===0&&t!==0}function lut(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function SR(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function cut(t,e,n,r,i){const o=Math.cos,s=Math.sin,a=o(n/2),l=s(n/2),d=o((e+r)/2),h=s((e+r)/2),p=o((e-r)/2),g=s((e-r)/2),v=o((r-e)/2),x=s((r-e)/2);switch(i){case"XYX":t.set(a*h,l*p,l*g,a*d);break;case"YZY":t.set(l*g,a*h,l*p,a*d);break;case"ZXZ":t.set(l*p,l*g,a*h,a*d);break;case"XZX":t.set(a*h,l*x,l*v,a*d);break;case"YXY":t.set(l*v,a*h,l*x,a*d);break;case"ZYZ":t.set(l*x,l*v,a*h,a*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Gl(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Rr(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const R8={DEG2RAD:A0,RAD2DEG:M1,generateUUID:vu,clamp:Yo,euclideanModulo:I8,mapLinear:Kct,inverseLerp:Zct,lerp:I2,damp:Jct,pingpong:Qct,smoothstep:eut,smootherstep:tut,randInt:nut,randFloat:rut,randFloatSpread:iut,seededRandom:out,degToRad:sut,radToDeg:aut,isPowerOfTwo:M5,ceilPowerOfTwo:lut,floorPowerOfTwo:SR,setQuaternionFromProperEuler:cut,normalize:Rr,denormalize:Gl};class Ft{constructor(e=0,n=0){Ft.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Yo(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),o=this.x-e.x,s=this.y-e.y;return this.x=o*r-s*i+e.x,this.y=o*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ir{constructor(e,n,r,i,o,s,a,l,d){Ir.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,s,a,l,d)}set(e,n,r,i,o,s,a,l,d){const h=this.elements;return h[0]=e,h[1]=i,h[2]=a,h[3]=n,h[4]=o,h[5]=l,h[6]=r,h[7]=s,h[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,s=r[0],a=r[3],l=r[6],d=r[1],h=r[4],p=r[7],g=r[2],v=r[5],x=r[8],b=i[0],w=i[3],S=i[6],C=i[1],A=i[4],P=i[7],k=i[2],F=i[5],B=i[8];return o[0]=s*b+a*C+l*k,o[3]=s*w+a*A+l*F,o[6]=s*S+a*P+l*B,o[1]=d*b+h*C+p*k,o[4]=d*w+h*A+p*F,o[7]=d*S+h*P+p*B,o[2]=g*b+v*C+x*k,o[5]=g*w+v*A+x*F,o[8]=g*S+v*P+x*B,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],d=e[7],h=e[8];return n*s*h-n*a*d-r*o*h+r*a*l+i*o*d-i*s*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],d=e[7],h=e[8],p=h*s-a*d,g=a*l-h*o,v=d*o-s*l,x=n*p+r*g+i*v;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const b=1/x;return e[0]=p*b,e[1]=(i*d-h*r)*b,e[2]=(a*r-i*s)*b,e[3]=g*b,e[4]=(h*n-i*l)*b,e[5]=(i*o-a*n)*b,e[6]=v*b,e[7]=(r*l-d*n)*b,e[8]=(s*n-r*o)*b,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,o,s,a){const l=Math.cos(o),d=Math.sin(o);return this.set(r*l,r*d,-r*(l*s+d*a)+s+e,-i*d,i*l,-i*(-d*s+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(kN.makeScale(e,n)),this}rotate(e){return this.premultiply(kN.makeRotation(-e)),this}translate(e,n){return this.premultiply(kN.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const kN=new Ir;function vde(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const uut={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function lb(t,e){return new uut[t](e)}function dE(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function _de(){const t=dE("canvas");return t.style.display="block",t}const qK={};function xde(t){t in qK||(qK[t]=!0,console.warn(t))}const XK=new Ir().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),YK=new Ir().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),GC={[da]:{transfer:sE,primaries:aE,toReference:t=>t,fromReference:t=>t},[Ra]:{transfer:no,primaries:aE,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[cT]:{transfer:sE,primaries:lE,toReference:t=>t.applyMatrix3(YK),fromReference:t=>t.applyMatrix3(XK)},[yL]:{transfer:no,primaries:lE,toReference:t=>t.convertSRGBToLinear().applyMatrix3(YK),fromReference:t=>t.applyMatrix3(XK).convertLinearToSRGB()}},dut=new Set([da,cT]),Di={enabled:!0,_workingColorSpace:da,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!dut.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=GC[e].toReference,i=GC[n].fromReference;return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return GC[t].primaries},getTransfer:function(t){return t===Xp?sE:GC[t].transfer}};function Rb(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function ON(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let ux;class k8{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{ux===void 0&&(ux=dE("canvas")),ux.width=e.width,ux.height=e.height;const r=ux.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=ux}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=dE("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),o=i.data;for(let s=0;s<o.length;s++)o[s]=Rb(o[s]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Rb(n[r]/255)*255):n[r]=Rb(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let hut=0;class m0{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:hut++}),this.uuid=vu(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let o;if(Array.isArray(i)){o=[];for(let s=0,a=i.length;s<a;s++)i[s].isDataTexture?o.push(LN(i[s].image)):o.push(LN(i[s]))}else o=LN(i);r.url=o}return n||(e.images[this.uuid]=r),r}}function LN(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?k8.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let fut=0;class _o extends jh{constructor(e=_o.DEFAULT_IMAGE,n=_o.DEFAULT_MAPPING,r=Oa,i=Oa,o=yo,s=yd,a=Wl,l=Uf,d=_o.DEFAULT_ANISOTROPY,h=Xp){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:fut++}),this.uuid=vu(),this.name="",this.source=new m0(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=o,this.minFilter=s,this.anisotropy=d,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ft(0,0),this.repeat=new Ft(1,1),this.center=new Ft(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ir,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==pL)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Dy:e.x=e.x-Math.floor(e.x);break;case Oa:e.x=e.x<0?0:1;break;case b1:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Dy:e.y=e.y-Math.floor(e.y);break;case Oa:e.y=e.y<0?0:1;break;case b1:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}_o.DEFAULT_IMAGE=null;_o.DEFAULT_MAPPING=pL;_o.DEFAULT_ANISOTROPY=1;class Ui{constructor(e=0,n=0,r=0,i=1){Ui.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=this.w,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i+s[12]*o,this.y=s[1]*n+s[5]*r+s[9]*i+s[13]*o,this.z=s[2]*n+s[6]*r+s[10]*i+s[14]*o,this.w=s[3]*n+s[7]*r+s[11]*i+s[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,o;const l=e.elements,d=l[0],h=l[4],p=l[8],g=l[1],v=l[5],x=l[9],b=l[2],w=l[6],S=l[10];if(Math.abs(h-g)<.01&&Math.abs(p-b)<.01&&Math.abs(x-w)<.01){if(Math.abs(h+g)<.1&&Math.abs(p+b)<.1&&Math.abs(x+w)<.1&&Math.abs(d+v+S-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const A=(d+1)/2,P=(v+1)/2,k=(S+1)/2,F=(h+g)/4,B=(p+b)/4,W=(x+w)/4;return A>P&&A>k?A<.01?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt(A),i=F/r,o=B/r):P>k?P<.01?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(P),r=F/i,o=W/i):k<.01?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(k),r=B/o,i=W/o),this.set(r,i,o,n),this}let C=Math.sqrt((w-x)*(w-x)+(p-b)*(p-b)+(g-h)*(g-h));return Math.abs(C)<.001&&(C=1),this.x=(w-x)/C,this.y=(p-b)/C,this.z=(g-h)/C,this.w=Math.acos((d+v+S-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class bde extends jh{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Ui(0,0,e,n),this.scissorTest=!1,this.viewport=new Ui(0,0,e,n);const i={width:e,height:n,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:yo,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0,count:1},r);const o=new _o(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);o.flipY=!1,o.generateMipmaps=r.generateMipmaps,o.internalFormat=r.internalFormat,this.textures=[];const s=r.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,o=this.textures.length;i<o;i++)this.textures[i].image.width=e,this.textures[i].image.height=n,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new m0(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class kh extends bde{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class vL extends _o{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Xo,this.minFilter=Xo,this.wrapR=Oa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class put extends kh{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new vL(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class O8 extends _o{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Xo,this.minFilter=Xo,this.wrapR=Oa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class mut extends kh{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new O8(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class Ts{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,o,s,a){let l=r[i+0],d=r[i+1],h=r[i+2],p=r[i+3];const g=o[s+0],v=o[s+1],x=o[s+2],b=o[s+3];if(a===0){e[n+0]=l,e[n+1]=d,e[n+2]=h,e[n+3]=p;return}if(a===1){e[n+0]=g,e[n+1]=v,e[n+2]=x,e[n+3]=b;return}if(p!==b||l!==g||d!==v||h!==x){let w=1-a;const S=l*g+d*v+h*x+p*b,C=S>=0?1:-1,A=1-S*S;if(A>Number.EPSILON){const k=Math.sqrt(A),F=Math.atan2(k,S*C);w=Math.sin(w*F)/k,a=Math.sin(a*F)/k}const P=a*C;if(l=l*w+g*P,d=d*w+v*P,h=h*w+x*P,p=p*w+b*P,w===1-a){const k=1/Math.sqrt(l*l+d*d+h*h+p*p);l*=k,d*=k,h*=k,p*=k}}e[n]=l,e[n+1]=d,e[n+2]=h,e[n+3]=p}static multiplyQuaternionsFlat(e,n,r,i,o,s){const a=r[i],l=r[i+1],d=r[i+2],h=r[i+3],p=o[s],g=o[s+1],v=o[s+2],x=o[s+3];return e[n]=a*x+h*p+l*v-d*g,e[n+1]=l*x+h*g+d*p-a*v,e[n+2]=d*x+h*v+a*g-l*p,e[n+3]=h*x-a*p-l*g-d*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,o=e._z,s=e._order,a=Math.cos,l=Math.sin,d=a(r/2),h=a(i/2),p=a(o/2),g=l(r/2),v=l(i/2),x=l(o/2);switch(s){case"XYZ":this._x=g*h*p+d*v*x,this._y=d*v*p-g*h*x,this._z=d*h*x+g*v*p,this._w=d*h*p-g*v*x;break;case"YXZ":this._x=g*h*p+d*v*x,this._y=d*v*p-g*h*x,this._z=d*h*x-g*v*p,this._w=d*h*p+g*v*x;break;case"ZXY":this._x=g*h*p-d*v*x,this._y=d*v*p+g*h*x,this._z=d*h*x+g*v*p,this._w=d*h*p-g*v*x;break;case"ZYX":this._x=g*h*p-d*v*x,this._y=d*v*p+g*h*x,this._z=d*h*x-g*v*p,this._w=d*h*p+g*v*x;break;case"YZX":this._x=g*h*p+d*v*x,this._y=d*v*p+g*h*x,this._z=d*h*x-g*v*p,this._w=d*h*p-g*v*x;break;case"XZY":this._x=g*h*p-d*v*x,this._y=d*v*p-g*h*x,this._z=d*h*x+g*v*p,this._w=d*h*p+g*v*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],o=n[8],s=n[1],a=n[5],l=n[9],d=n[2],h=n[6],p=n[10],g=r+a+p;if(g>0){const v=.5/Math.sqrt(g+1);this._w=.25/v,this._x=(h-l)*v,this._y=(o-d)*v,this._z=(s-i)*v}else if(r>a&&r>p){const v=2*Math.sqrt(1+r-a-p);this._w=(h-l)/v,this._x=.25*v,this._y=(i+s)/v,this._z=(o+d)/v}else if(a>p){const v=2*Math.sqrt(1+a-r-p);this._w=(o-d)/v,this._x=(i+s)/v,this._y=.25*v,this._z=(l+h)/v}else{const v=2*Math.sqrt(1+p-r-a);this._w=(s-i)/v,this._x=(o+d)/v,this._y=(l+h)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Yo(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,o=e._z,s=e._w,a=n._x,l=n._y,d=n._z,h=n._w;return this._x=r*h+s*a+i*d-o*l,this._y=i*h+s*l+o*a-r*d,this._z=o*h+s*d+r*l-i*a,this._w=s*h-r*a-i*l-o*d,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,o=this._z,s=this._w;let a=s*e._w+r*e._x+i*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=r,this._y=i,this._z=o,this;const l=1-a*a;if(l<=Number.EPSILON){const v=1-n;return this._w=v*s+n*this._w,this._x=v*r+n*this._x,this._y=v*i+n*this._y,this._z=v*o+n*this._z,this.normalize(),this}const d=Math.sqrt(l),h=Math.atan2(d,a),p=Math.sin((1-n)*h)/d,g=Math.sin(n*h)/d;return this._w=s*p+this._w*g,this._x=r*p+this._x*g,this._y=i*p+this._y*g,this._z=o*p+this._z*g,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),o=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),o*Math.sin(n),o*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Oe{constructor(e=0,n=0,r=0){Oe.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(KK.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(KK.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[3]*r+o[6]*i,this.y=o[1]*n+o[4]*r+o[7]*i,this.z=o[2]*n+o[5]*r+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=e.elements,s=1/(o[3]*n+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*n+o[4]*r+o[8]*i+o[12])*s,this.y=(o[1]*n+o[5]*r+o[9]*i+o[13])*s,this.z=(o[2]*n+o[6]*r+o[10]*i+o[14])*s,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,o=e.x,s=e.y,a=e.z,l=e.w,d=2*(s*i-a*r),h=2*(a*n-o*i),p=2*(o*r-s*n);return this.x=n+l*d+s*p-a*h,this.y=r+l*h+a*d-o*p,this.z=i+l*p+o*h-s*d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i,this.y=o[1]*n+o[5]*r+o[9]*i,this.z=o[2]*n+o[6]*r+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,o=e.z,s=n.x,a=n.y,l=n.z;return this.x=i*l-o*a,this.y=o*s-r*l,this.z=r*a-i*s,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return DN.copy(this).projectOnVector(e),this.sub(DN)}reflect(e){return this.sub(DN.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Yo(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const DN=new Oe,KK=new Ts;class xl{constructor(e=new Oe(1/0,1/0,1/0),n=new Oe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(oh.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(oh.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=oh.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const o=r.getAttribute("position");if(n===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)e.isMesh===!0?e.getVertexPosition(s,oh):oh.fromBufferAttribute(o,s),oh.applyMatrix4(e.matrixWorld),this.expandByPoint(oh);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),qC.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),qC.copy(r.boundingBox)),qC.applyMatrix4(e.matrixWorld),this.union(qC)}const i=e.children;for(let o=0,s=i.length;o<s;o++)this.expandByObject(i[o],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,oh),oh.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(PS),XC.subVectors(this.max,PS),dx.subVectors(e.a,PS),hx.subVectors(e.b,PS),fx.subVectors(e.c,PS),Ig.subVectors(hx,dx),Rg.subVectors(fx,hx),Cv.subVectors(dx,fx);let n=[0,-Ig.z,Ig.y,0,-Rg.z,Rg.y,0,-Cv.z,Cv.y,Ig.z,0,-Ig.x,Rg.z,0,-Rg.x,Cv.z,0,-Cv.x,-Ig.y,Ig.x,0,-Rg.y,Rg.x,0,-Cv.y,Cv.x,0];return!NN(n,dx,hx,fx,XC)||(n=[1,0,0,0,1,0,0,0,1],!NN(n,dx,hx,fx,XC))?!1:(YC.crossVectors(Ig,Rg),n=[YC.x,YC.y,YC.z],NN(n,dx,hx,fx,XC))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,oh).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(oh).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(zp[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),zp[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),zp[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),zp[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),zp[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),zp[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),zp[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),zp[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(zp),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const zp=[new Oe,new Oe,new Oe,new Oe,new Oe,new Oe,new Oe,new Oe],oh=new Oe,qC=new xl,dx=new Oe,hx=new Oe,fx=new Oe,Ig=new Oe,Rg=new Oe,Cv=new Oe,PS=new Oe,XC=new Oe,YC=new Oe,Av=new Oe;function NN(t,e,n,r,i){for(let o=0,s=t.length-3;o<=s;o+=3){Av.fromArray(t,o);const a=i.x*Math.abs(Av.x)+i.y*Math.abs(Av.y)+i.z*Math.abs(Av.z),l=e.dot(Av),d=n.dot(Av),h=r.dot(Av);if(Math.max(-Math.max(l,d,h),Math.min(l,d,h))>a)return!1}return!0}const gut=new xl,IS=new Oe,zN=new Oe;class Fa{constructor(e=new Oe,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):gut.setFromPoints(e).getCenter(r);let i=0;for(let o=0,s=e.length;o<s;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;IS.subVectors(e,this.center);const n=IS.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(IS,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(zN.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(IS.copy(e.center).add(zN)),this.expandByPoint(IS.copy(e.center).sub(zN))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Fp=new Oe,FN=new Oe,KC=new Oe,kg=new Oe,BN=new Oe,ZC=new Oe,jN=new Oe;class Ky{constructor(e=new Oe,n=new Oe(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Fp)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Fp.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Fp.copy(this.origin).addScaledVector(this.direction,n),Fp.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){FN.copy(e).add(n).multiplyScalar(.5),KC.copy(n).sub(e).normalize(),kg.copy(this.origin).sub(FN);const o=e.distanceTo(n)*.5,s=-this.direction.dot(KC),a=kg.dot(this.direction),l=-kg.dot(KC),d=kg.lengthSq(),h=Math.abs(1-s*s);let p,g,v,x;if(h>0)if(p=s*l-a,g=s*a-l,x=o*h,p>=0)if(g>=-x)if(g<=x){const b=1/h;p*=b,g*=b,v=p*(p+s*g+2*a)+g*(s*p+g+2*l)+d}else g=o,p=Math.max(0,-(s*g+a)),v=-p*p+g*(g+2*l)+d;else g=-o,p=Math.max(0,-(s*g+a)),v=-p*p+g*(g+2*l)+d;else g<=-x?(p=Math.max(0,-(-s*o+a)),g=p>0?-o:Math.min(Math.max(-o,-l),o),v=-p*p+g*(g+2*l)+d):g<=x?(p=0,g=Math.min(Math.max(-o,-l),o),v=g*(g+2*l)+d):(p=Math.max(0,-(s*o+a)),g=p>0?o:Math.min(Math.max(-o,-l),o),v=-p*p+g*(g+2*l)+d);else g=s>0?-o:o,p=Math.max(0,-(s*g+a)),v=-p*p+g*(g+2*l)+d;return r&&r.copy(this.origin).addScaledVector(this.direction,p),i&&i.copy(FN).addScaledVector(KC,g),v}intersectSphere(e,n){Fp.subVectors(e.center,this.origin);const r=Fp.dot(this.direction),i=Fp.dot(Fp)-r*r,o=e.radius*e.radius;if(i>o)return null;const s=Math.sqrt(o-i),a=r-s,l=r+s;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,o,s,a,l;const d=1/this.direction.x,h=1/this.direction.y,p=1/this.direction.z,g=this.origin;return d>=0?(r=(e.min.x-g.x)*d,i=(e.max.x-g.x)*d):(r=(e.max.x-g.x)*d,i=(e.min.x-g.x)*d),h>=0?(o=(e.min.y-g.y)*h,s=(e.max.y-g.y)*h):(o=(e.max.y-g.y)*h,s=(e.min.y-g.y)*h),r>s||o>i||((o>r||isNaN(r))&&(r=o),(s<i||isNaN(i))&&(i=s),p>=0?(a=(e.min.z-g.z)*p,l=(e.max.z-g.z)*p):(a=(e.max.z-g.z)*p,l=(e.min.z-g.z)*p),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Fp)!==null}intersectTriangle(e,n,r,i,o){BN.subVectors(n,e),ZC.subVectors(r,e),jN.crossVectors(BN,ZC);let s=this.direction.dot(jN),a;if(s>0){if(i)return null;a=1}else if(s<0)a=-1,s=-s;else return null;kg.subVectors(this.origin,e);const l=a*this.direction.dot(ZC.crossVectors(kg,ZC));if(l<0)return null;const d=a*this.direction.dot(BN.cross(kg));if(d<0||l+d>s)return null;const h=-a*kg.dot(jN);return h<0?null:this.at(h/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Yn{constructor(e,n,r,i,o,s,a,l,d,h,p,g,v,x,b,w){Yn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,s,a,l,d,h,p,g,v,x,b,w)}set(e,n,r,i,o,s,a,l,d,h,p,g,v,x,b,w){const S=this.elements;return S[0]=e,S[4]=n,S[8]=r,S[12]=i,S[1]=o,S[5]=s,S[9]=a,S[13]=l,S[2]=d,S[6]=h,S[10]=p,S[14]=g,S[3]=v,S[7]=x,S[11]=b,S[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Yn().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/px.setFromMatrixColumn(e,0).length(),o=1/px.setFromMatrixColumn(e,1).length(),s=1/px.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*s,n[9]=r[9]*s,n[10]=r[10]*s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,o=e.z,s=Math.cos(r),a=Math.sin(r),l=Math.cos(i),d=Math.sin(i),h=Math.cos(o),p=Math.sin(o);if(e.order==="XYZ"){const g=s*h,v=s*p,x=a*h,b=a*p;n[0]=l*h,n[4]=-l*p,n[8]=d,n[1]=v+x*d,n[5]=g-b*d,n[9]=-a*l,n[2]=b-g*d,n[6]=x+v*d,n[10]=s*l}else if(e.order==="YXZ"){const g=l*h,v=l*p,x=d*h,b=d*p;n[0]=g+b*a,n[4]=x*a-v,n[8]=s*d,n[1]=s*p,n[5]=s*h,n[9]=-a,n[2]=v*a-x,n[6]=b+g*a,n[10]=s*l}else if(e.order==="ZXY"){const g=l*h,v=l*p,x=d*h,b=d*p;n[0]=g-b*a,n[4]=-s*p,n[8]=x+v*a,n[1]=v+x*a,n[5]=s*h,n[9]=b-g*a,n[2]=-s*d,n[6]=a,n[10]=s*l}else if(e.order==="ZYX"){const g=s*h,v=s*p,x=a*h,b=a*p;n[0]=l*h,n[4]=x*d-v,n[8]=g*d+b,n[1]=l*p,n[5]=b*d+g,n[9]=v*d-x,n[2]=-d,n[6]=a*l,n[10]=s*l}else if(e.order==="YZX"){const g=s*l,v=s*d,x=a*l,b=a*d;n[0]=l*h,n[4]=b-g*p,n[8]=x*p+v,n[1]=p,n[5]=s*h,n[9]=-a*h,n[2]=-d*h,n[6]=v*p+x,n[10]=g-b*p}else if(e.order==="XZY"){const g=s*l,v=s*d,x=a*l,b=a*d;n[0]=l*h,n[4]=-p,n[8]=d*h,n[1]=g*p+b,n[5]=s*h,n[9]=v*p-x,n[2]=x*p-v,n[6]=a*h,n[10]=b*p+g}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(yut,e,vut)}lookAt(e,n,r){const i=this.elements;return Xc.subVectors(e,n),Xc.lengthSq()===0&&(Xc.z=1),Xc.normalize(),Og.crossVectors(r,Xc),Og.lengthSq()===0&&(Math.abs(r.z)===1?Xc.x+=1e-4:Xc.z+=1e-4,Xc.normalize(),Og.crossVectors(r,Xc)),Og.normalize(),JC.crossVectors(Xc,Og),i[0]=Og.x,i[4]=JC.x,i[8]=Xc.x,i[1]=Og.y,i[5]=JC.y,i[9]=Xc.y,i[2]=Og.z,i[6]=JC.z,i[10]=Xc.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,s=r[0],a=r[4],l=r[8],d=r[12],h=r[1],p=r[5],g=r[9],v=r[13],x=r[2],b=r[6],w=r[10],S=r[14],C=r[3],A=r[7],P=r[11],k=r[15],F=i[0],B=i[4],W=i[8],J=i[12],H=i[1],Y=i[5],le=i[9],pe=i[13],re=i[2],me=i[6],he=i[10],we=i[14],ee=i[3],ye=i[7],be=i[11],Le=i[15];return o[0]=s*F+a*H+l*re+d*ee,o[4]=s*B+a*Y+l*me+d*ye,o[8]=s*W+a*le+l*he+d*be,o[12]=s*J+a*pe+l*we+d*Le,o[1]=h*F+p*H+g*re+v*ee,o[5]=h*B+p*Y+g*me+v*ye,o[9]=h*W+p*le+g*he+v*be,o[13]=h*J+p*pe+g*we+v*Le,o[2]=x*F+b*H+w*re+S*ee,o[6]=x*B+b*Y+w*me+S*ye,o[10]=x*W+b*le+w*he+S*be,o[14]=x*J+b*pe+w*we+S*Le,o[3]=C*F+A*H+P*re+k*ee,o[7]=C*B+A*Y+P*me+k*ye,o[11]=C*W+A*le+P*he+k*be,o[15]=C*J+A*pe+P*we+k*Le,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],o=e[12],s=e[1],a=e[5],l=e[9],d=e[13],h=e[2],p=e[6],g=e[10],v=e[14],x=e[3],b=e[7],w=e[11],S=e[15];return x*(+o*l*p-i*d*p-o*a*g+r*d*g+i*a*v-r*l*v)+b*(+n*l*v-n*d*g+o*s*g-i*s*v+i*d*h-o*l*h)+w*(+n*d*p-n*a*v-o*s*p+r*s*v+o*a*h-r*d*h)+S*(-i*a*h-n*l*p+n*a*g+i*s*p-r*s*g+r*l*h)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],d=e[7],h=e[8],p=e[9],g=e[10],v=e[11],x=e[12],b=e[13],w=e[14],S=e[15],C=p*w*d-b*g*d+b*l*v-a*w*v-p*l*S+a*g*S,A=x*g*d-h*w*d-x*l*v+s*w*v+h*l*S-s*g*S,P=h*b*d-x*p*d+x*a*v-s*b*v-h*a*S+s*p*S,k=x*p*l-h*b*l-x*a*g+s*b*g+h*a*w-s*p*w,F=n*C+r*A+i*P+o*k;if(F===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const B=1/F;return e[0]=C*B,e[1]=(b*g*o-p*w*o-b*i*v+r*w*v+p*i*S-r*g*S)*B,e[2]=(a*w*o-b*l*o+b*i*d-r*w*d-a*i*S+r*l*S)*B,e[3]=(p*l*o-a*g*o-p*i*d+r*g*d+a*i*v-r*l*v)*B,e[4]=A*B,e[5]=(h*w*o-x*g*o+x*i*v-n*w*v-h*i*S+n*g*S)*B,e[6]=(x*l*o-s*w*o-x*i*d+n*w*d+s*i*S-n*l*S)*B,e[7]=(s*g*o-h*l*o+h*i*d-n*g*d-s*i*v+n*l*v)*B,e[8]=P*B,e[9]=(x*p*o-h*b*o-x*r*v+n*b*v+h*r*S-n*p*S)*B,e[10]=(s*b*o-x*a*o+x*r*d-n*b*d-s*r*S+n*a*S)*B,e[11]=(h*a*o-s*p*o-h*r*d+n*p*d+s*r*v-n*a*v)*B,e[12]=k*B,e[13]=(h*b*i-x*p*i+x*r*g-n*b*g-h*r*w+n*p*w)*B,e[14]=(x*a*i-s*b*i-x*r*l+n*b*l+s*r*w-n*a*w)*B,e[15]=(s*p*i-h*a*i+h*r*l-n*p*l-s*r*g+n*a*g)*B,this}scale(e){const n=this.elements,r=e.x,i=e.y,o=e.z;return n[0]*=r,n[4]*=i,n[8]*=o,n[1]*=r,n[5]*=i,n[9]*=o,n[2]*=r,n[6]*=i,n[10]*=o,n[3]*=r,n[7]*=i,n[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),o=1-r,s=e.x,a=e.y,l=e.z,d=o*s,h=o*a;return this.set(d*s+r,d*a-i*l,d*l+i*a,0,d*a+i*l,h*a+r,h*l-i*s,0,d*l-i*a,h*l+i*s,o*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,o,s){return this.set(1,r,o,0,e,1,s,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,o=n._x,s=n._y,a=n._z,l=n._w,d=o+o,h=s+s,p=a+a,g=o*d,v=o*h,x=o*p,b=s*h,w=s*p,S=a*p,C=l*d,A=l*h,P=l*p,k=r.x,F=r.y,B=r.z;return i[0]=(1-(b+S))*k,i[1]=(v+P)*k,i[2]=(x-A)*k,i[3]=0,i[4]=(v-P)*F,i[5]=(1-(g+S))*F,i[6]=(w+C)*F,i[7]=0,i[8]=(x+A)*B,i[9]=(w-C)*B,i[10]=(1-(g+b))*B,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let o=px.set(i[0],i[1],i[2]).length();const s=px.set(i[4],i[5],i[6]).length(),a=px.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],sh.copy(this);const d=1/o,h=1/s,p=1/a;return sh.elements[0]*=d,sh.elements[1]*=d,sh.elements[2]*=d,sh.elements[4]*=h,sh.elements[5]*=h,sh.elements[6]*=h,sh.elements[8]*=p,sh.elements[9]*=p,sh.elements[10]*=p,n.setFromRotationMatrix(sh),r.x=o,r.y=s,r.z=a,this}makePerspective(e,n,r,i,o,s,a=If){const l=this.elements,d=2*o/(n-e),h=2*o/(r-i),p=(n+e)/(n-e),g=(r+i)/(r-i);let v,x;if(a===If)v=-(s+o)/(s-o),x=-2*s*o/(s-o);else if(a===uE)v=-s/(s-o),x=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=d,l[4]=0,l[8]=p,l[12]=0,l[1]=0,l[5]=h,l[9]=g,l[13]=0,l[2]=0,l[6]=0,l[10]=v,l[14]=x,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,o,s,a=If){const l=this.elements,d=1/(n-e),h=1/(r-i),p=1/(s-o),g=(n+e)*d,v=(r+i)*h;let x,b;if(a===If)x=(s+o)*p,b=-2*p;else if(a===uE)x=o*p,b=-1*p;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*d,l[4]=0,l[8]=0,l[12]=-g,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-v,l[2]=0,l[6]=0,l[10]=b,l[14]=-x,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const px=new Oe,sh=new Yn,yut=new Oe(0,0,0),vut=new Oe(1,1,1),Og=new Oe,JC=new Oe,Xc=new Oe,ZK=new Yn,JK=new Ts;class Tu{constructor(e=0,n=0,r=0,i=Tu.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,o=i[0],s=i[4],a=i[8],l=i[1],d=i[5],h=i[9],p=i[2],g=i[6],v=i[10];switch(n){case"XYZ":this._y=Math.asin(Yo(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,v),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(g,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Yo(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,v),this._z=Math.atan2(l,d)):(this._y=Math.atan2(-p,o),this._z=0);break;case"ZXY":this._x=Math.asin(Yo(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-p,v),this._z=Math.atan2(-s,d)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-Yo(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(g,v),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-s,d));break;case"YZX":this._z=Math.asin(Yo(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,d),this._y=Math.atan2(-p,o)):(this._x=0,this._y=Math.atan2(a,v));break;case"XZY":this._z=Math.asin(-Yo(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(g,d),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-h,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return ZK.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ZK,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return JK.setFromEuler(this),this.setFromQuaternion(JK,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Tu.DEFAULT_ORDER="XYZ";class P0{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let _ut=0;const QK=new Oe,mx=new Ts,Bp=new Yn,QC=new Oe,RS=new Oe,xut=new Oe,but=new Ts,eZ=new Oe(1,0,0),tZ=new Oe(0,1,0),nZ=new Oe(0,0,1),wut={type:"added"},Sut={type:"removed"},$N={type:"childadded",child:null},UN={type:"childremoved",child:null};class di extends jh{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_ut++}),this.uuid=vu(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=di.DEFAULT_UP.clone();const e=new Oe,n=new Tu,r=new Ts,i=new Oe(1,1,1);function o(){r.setFromEuler(n,!1)}function s(){n.setFromQuaternion(r,void 0,!1)}n._onChange(o),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Yn},normalMatrix:{value:new Ir}}),this.matrix=new Yn,this.matrixWorld=new Yn,this.matrixAutoUpdate=di.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=di.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new P0,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return mx.setFromAxisAngle(e,n),this.quaternion.multiply(mx),this}rotateOnWorldAxis(e,n){return mx.setFromAxisAngle(e,n),this.quaternion.premultiply(mx),this}rotateX(e){return this.rotateOnAxis(eZ,e)}rotateY(e){return this.rotateOnAxis(tZ,e)}rotateZ(e){return this.rotateOnAxis(nZ,e)}translateOnAxis(e,n){return QK.copy(e).applyQuaternion(this.quaternion),this.position.add(QK.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(eZ,e)}translateY(e){return this.translateOnAxis(tZ,e)}translateZ(e){return this.translateOnAxis(nZ,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Bp.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?QC.copy(e):QC.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),RS.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Bp.lookAt(RS,QC,this.up):Bp.lookAt(QC,RS,this.up),this.quaternion.setFromRotationMatrix(Bp),i&&(Bp.extractRotation(i.matrixWorld),mx.setFromRotationMatrix(Bp),this.quaternion.premultiply(mx.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(wut),$N.child=e,this.dispatchEvent($N),$N.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Sut),UN.child=e,this.dispatchEvent(UN),UN.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Bp.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Bp.multiply(e.parent.matrixWorld)),e.applyMatrix4(Bp),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectByProperty(e,n);if(s!==void 0)return s}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let o=0,s=i.length;o<s;o++)i[o].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(RS,e,xut),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(RS,but,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const o=n[r];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let o=0,s=i.length;o<s;o++){const a=i[o];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function o(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let d=0,h=l.length;d<h;d++){const p=l[d];o(e.shapes,p)}else o(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,d=this.material.length;l<d;l++)a.push(o(e.materials,this.material[l]));i.material=a}else i.material=o(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(o(e.animations,l))}}if(n){const a=s(e.geometries),l=s(e.materials),d=s(e.textures),h=s(e.images),p=s(e.shapes),g=s(e.skeletons),v=s(e.animations),x=s(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),d.length>0&&(r.textures=d),h.length>0&&(r.images=h),p.length>0&&(r.shapes=p),g.length>0&&(r.skeletons=g),v.length>0&&(r.animations=v),x.length>0&&(r.nodes=x)}return r.object=i,r;function s(a){const l=[];for(const d in a){const h=a[d];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}di.DEFAULT_UP=new Oe(0,1,0);di.DEFAULT_MATRIX_AUTO_UPDATE=!0;di.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ah=new Oe,jp=new Oe,VN=new Oe,$p=new Oe,gx=new Oe,yx=new Oe,rZ=new Oe,HN=new Oe,WN=new Oe,GN=new Oe;class du{constructor(e=new Oe,n=new Oe,r=new Oe){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),ah.subVectors(e,n),i.cross(ah);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(e,n,r,i,o){ah.subVectors(i,n),jp.subVectors(r,n),VN.subVectors(e,n);const s=ah.dot(ah),a=ah.dot(jp),l=ah.dot(VN),d=jp.dot(jp),h=jp.dot(VN),p=s*d-a*a;if(p===0)return o.set(0,0,0),null;const g=1/p,v=(d*l-a*h)*g,x=(s*h-a*l)*g;return o.set(1-v-x,x,v)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,$p)===null?!1:$p.x>=0&&$p.y>=0&&$p.x+$p.y<=1}static getInterpolation(e,n,r,i,o,s,a,l){return this.getBarycoord(e,n,r,i,$p)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(o,$p.x),l.addScaledVector(s,$p.y),l.addScaledVector(a,$p.z),l)}static isFrontFacing(e,n,r,i){return ah.subVectors(r,n),jp.subVectors(e,n),ah.cross(jp).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ah.subVectors(this.c,this.b),jp.subVectors(this.a,this.b),ah.cross(jp).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return du.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return du.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,o){return du.getInterpolation(e,this.a,this.b,this.c,n,r,i,o)}containsPoint(e){return du.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return du.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,o=this.c;let s,a;gx.subVectors(i,r),yx.subVectors(o,r),HN.subVectors(e,r);const l=gx.dot(HN),d=yx.dot(HN);if(l<=0&&d<=0)return n.copy(r);WN.subVectors(e,i);const h=gx.dot(WN),p=yx.dot(WN);if(h>=0&&p<=h)return n.copy(i);const g=l*p-h*d;if(g<=0&&l>=0&&h<=0)return s=l/(l-h),n.copy(r).addScaledVector(gx,s);GN.subVectors(e,o);const v=gx.dot(GN),x=yx.dot(GN);if(x>=0&&v<=x)return n.copy(o);const b=v*d-l*x;if(b<=0&&d>=0&&x<=0)return a=d/(d-x),n.copy(r).addScaledVector(yx,a);const w=h*x-v*p;if(w<=0&&p-h>=0&&v-x>=0)return rZ.subVectors(o,i),a=(p-h)/(p-h+(v-x)),n.copy(i).addScaledVector(rZ,a);const S=1/(w+b+g);return s=b*S,a=g*S,n.copy(r).addScaledVector(gx,s).addScaledVector(yx,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const wde={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Lg={h:0,s:0,l:0},eA={h:0,s:0,l:0};function qN(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class In{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Ra){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Di.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=Di.workingColorSpace){return this.r=e,this.g=n,this.b=r,Di.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=Di.workingColorSpace){if(e=I8(e,1),n=Yo(n,0,1),r=Yo(r,0,1),n===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,s=2*r-o;this.r=qN(s,o,e+1/3),this.g=qN(s,o,e),this.b=qN(s,o,e-1/3)}return Di.toWorkingColorSpace(this,i),this}setStyle(e,n=Ra){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const s=i[1],a=i[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,n);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,n);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=i[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,n);if(s===6)return this.setHex(parseInt(o,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Ra){const r=wde[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Rb(e.r),this.g=Rb(e.g),this.b=Rb(e.b),this}copyLinearToSRGB(e){return this.r=ON(e.r),this.g=ON(e.g),this.b=ON(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ra){return Di.fromWorkingColorSpace(al.copy(this),e),Math.round(Yo(al.r*255,0,255))*65536+Math.round(Yo(al.g*255,0,255))*256+Math.round(Yo(al.b*255,0,255))}getHexString(e=Ra){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Di.workingColorSpace){Di.fromWorkingColorSpace(al.copy(this),n);const r=al.r,i=al.g,o=al.b,s=Math.max(r,i,o),a=Math.min(r,i,o);let l,d;const h=(a+s)/2;if(a===s)l=0,d=0;else{const p=s-a;switch(d=h<=.5?p/(s+a):p/(2-s-a),s){case r:l=(i-o)/p+(i<o?6:0);break;case i:l=(o-r)/p+2;break;case o:l=(r-i)/p+4;break}l/=6}return e.h=l,e.s=d,e.l=h,e}getRGB(e,n=Di.workingColorSpace){return Di.fromWorkingColorSpace(al.copy(this),n),e.r=al.r,e.g=al.g,e.b=al.b,e}getStyle(e=Ra){Di.fromWorkingColorSpace(al.copy(this),e);const n=al.r,r=al.g,i=al.b;return e!==Ra?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(Lg),this.setHSL(Lg.h+e,Lg.s+n,Lg.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Lg),e.getHSL(eA);const r=I2(Lg.h,eA.h,n),i=I2(Lg.s,eA.s,n),o=I2(Lg.l,eA.l,n);return this.setHSL(r,i,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,o=e.elements;return this.r=o[0]*n+o[3]*r+o[6]*i,this.g=o[1]*n+o[4]*r+o[7]*i,this.b=o[2]*n+o[5]*r+o[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const al=new In;In.NAMES=wde;let Mut=0;class Cs extends jh{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Mut++}),this.uuid=vu(),this.name="",this.type="Material",this.blending=C0,this.side=Yf,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=_R,this.blendDst=xR,this.blendEquation=Zg,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new In(0,0,0),this.blendAlpha=0,this.depthFunc=tE,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=w5,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Kv,this.stencilZFail=Kv,this.stencilZPass=Kv,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==C0&&(r.blending=this.blending),this.side!==Yf&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==_R&&(r.blendSrc=this.blendSrc),this.blendDst!==xR&&(r.blendDst=this.blendDst),this.blendEquation!==Zg&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==tE&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==w5&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Kv&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Kv&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Kv&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(o){const s=[];for(const a in o){const l=o[a];delete l.metadata,s.push(l)}return s}if(n){const o=i(e.textures),s=i(e.images);o.length>0&&(r.textures=o),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let o=0;o!==i;++o)r[o]=n[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class pu extends Cs{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new In(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Tu,this.combine=lT,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Yp=Eut();function Eut(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const d=l-127;d<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):d<-14?(r[l]=1024>>-d-14,r[l|256]=1024>>-d-14|32768,i[l]=-d-1,i[l|256]=-d-1):d<=15?(r[l]=d+15<<10,r[l|256]=d+15<<10|32768,i[l]=13,i[l|256]=13):d<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const o=new Uint32Array(2048),s=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let d=l<<13,h=0;for(;!(d&8388608);)d<<=1,h-=8388608;d&=-8388609,h+=947912704,o[l]=d|h}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:o,exponentTable:s,offsetTable:a}}function gc(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Yo(t,-65504,65504),Yp.floatView[0]=t;const e=Yp.uint32View[0],n=e>>23&511;return Yp.baseTable[n]+((e&8388607)>>Yp.shiftTable[n])}function t2(t){const e=t>>10;return Yp.uint32View[0]=Yp.mantissaTable[Yp.offsetTable[e]+(t&1023)]+Yp.exponentTable[e],Yp.floatView[0]}const Tut={toHalfFloat:gc,fromHalfFloat:t2},bs=new Oe,tA=new Ft;class Ni{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=cE,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=uu,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return xde("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)tA.fromBufferAttribute(this,n),tA.applyMatrix3(e),this.setXY(n,tA.x,tA.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)bs.fromBufferAttribute(this,n),bs.applyMatrix3(e),this.setXYZ(n,bs.x,bs.y,bs.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)bs.fromBufferAttribute(this,n),bs.applyMatrix4(e),this.setXYZ(n,bs.x,bs.y,bs.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)bs.fromBufferAttribute(this,n),bs.applyNormalMatrix(e),this.setXYZ(n,bs.x,bs.y,bs.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)bs.fromBufferAttribute(this,n),bs.transformDirection(e),this.setXYZ(n,bs.x,bs.y,bs.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=Gl(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Rr(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Gl(n,this.array)),n}setX(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Gl(n,this.array)),n}setY(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Gl(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Gl(n,this.array)),n}setW(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array),i=Rr(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,o){return e*=this.itemSize,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array),i=Rr(i,this.array),o=Rr(o,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==cE&&(e.usage=this.usage),e}}class Cut extends Ni{constructor(e,n,r){super(new Int8Array(e),n,r)}}class Aut extends Ni{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class Put extends Ni{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class Iut extends Ni{constructor(e,n,r){super(new Int16Array(e),n,r)}}class L8 extends Ni{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class Rut extends Ni{constructor(e,n,r){super(new Int32Array(e),n,r)}}class D8 extends Ni{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class kut extends Ni{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=t2(this.array[e*this.itemSize]);return this.normalized&&(n=Gl(n,this.array)),n}setX(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize]=gc(n),this}getY(e){let n=t2(this.array[e*this.itemSize+1]);return this.normalized&&(n=Gl(n,this.array)),n}setY(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize+1]=gc(n),this}getZ(e){let n=t2(this.array[e*this.itemSize+2]);return this.normalized&&(n=Gl(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize+2]=gc(n),this}getW(e){let n=t2(this.array[e*this.itemSize+3]);return this.normalized&&(n=Gl(n,this.array)),n}setW(e,n){return this.normalized&&(n=Rr(n,this.array)),this.array[e*this.itemSize+3]=gc(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array)),this.array[e+0]=gc(n),this.array[e+1]=gc(r),this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array),i=Rr(i,this.array)),this.array[e+0]=gc(n),this.array[e+1]=gc(r),this.array[e+2]=gc(i),this}setXYZW(e,n,r,i,o){return e*=this.itemSize,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array),i=Rr(i,this.array),o=Rr(o,this.array)),this.array[e+0]=gc(n),this.array[e+1]=gc(r),this.array[e+2]=gc(i),this.array[e+3]=gc(o),this}}class Jn extends Ni{constructor(e,n,r){super(new Float32Array(e),n,r)}}let Out=0;const od=new Yn,XN=new di,vx=new Oe,Yc=new xl,kS=new xl,sa=new Oe;class Pr extends jh{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Out++}),this.uuid=vu(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(vde(e)?D8:L8)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new Ir().getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return od.makeRotationFromQuaternion(e),this.applyMatrix4(od),this}rotateX(e){return od.makeRotationX(e),this.applyMatrix4(od),this}rotateY(e){return od.makeRotationY(e),this.applyMatrix4(od),this}rotateZ(e){return od.makeRotationZ(e),this.applyMatrix4(od),this}translate(e,n,r){return od.makeTranslation(e,n,r),this.applyMatrix4(od),this}scale(e,n,r){return od.makeScale(e,n,r),this.applyMatrix4(od),this}lookAt(e){return XN.lookAt(e),XN.updateMatrix(),this.applyMatrix4(XN.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(vx).negate(),this.translate(vx.x,vx.y,vx.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const o=e[r];n.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Jn(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new xl);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Oe(-1/0,-1/0,-1/0),new Oe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const o=n[r];Yc.setFromBufferAttribute(o),this.morphTargetsRelative?(sa.addVectors(this.boundingBox.min,Yc.min),this.boundingBox.expandByPoint(sa),sa.addVectors(this.boundingBox.max,Yc.max),this.boundingBox.expandByPoint(sa)):(this.boundingBox.expandByPoint(Yc.min),this.boundingBox.expandByPoint(Yc.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Fa);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Oe,1/0);return}if(e){const r=this.boundingSphere.center;if(Yc.setFromBufferAttribute(e),n)for(let o=0,s=n.length;o<s;o++){const a=n[o];kS.setFromBufferAttribute(a),this.morphTargetsRelative?(sa.addVectors(Yc.min,kS.min),Yc.expandByPoint(sa),sa.addVectors(Yc.max,kS.max),Yc.expandByPoint(sa)):(Yc.expandByPoint(kS.min),Yc.expandByPoint(kS.max))}Yc.getCenter(r);let i=0;for(let o=0,s=e.count;o<s;o++)sa.fromBufferAttribute(e,o),i=Math.max(i,r.distanceToSquared(sa));if(n)for(let o=0,s=n.length;o<s;o++){const a=n[o],l=this.morphTargetsRelative;for(let d=0,h=a.count;d<h;d++)sa.fromBufferAttribute(a,d),l&&(vx.fromBufferAttribute(e,d),sa.add(vx)),i=Math.max(i,r.distanceToSquared(sa))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,i=n.normal,o=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ni(new Float32Array(4*r.count),4));const s=this.getAttribute("tangent"),a=[],l=[];for(let W=0;W<r.count;W++)a[W]=new Oe,l[W]=new Oe;const d=new Oe,h=new Oe,p=new Oe,g=new Ft,v=new Ft,x=new Ft,b=new Oe,w=new Oe;function S(W,J,H){d.fromBufferAttribute(r,W),h.fromBufferAttribute(r,J),p.fromBufferAttribute(r,H),g.fromBufferAttribute(o,W),v.fromBufferAttribute(o,J),x.fromBufferAttribute(o,H),h.sub(d),p.sub(d),v.sub(g),x.sub(g);const Y=1/(v.x*x.y-x.x*v.y);isFinite(Y)&&(b.copy(h).multiplyScalar(x.y).addScaledVector(p,-v.y).multiplyScalar(Y),w.copy(p).multiplyScalar(v.x).addScaledVector(h,-x.x).multiplyScalar(Y),a[W].add(b),a[J].add(b),a[H].add(b),l[W].add(w),l[J].add(w),l[H].add(w))}let C=this.groups;C.length===0&&(C=[{start:0,count:e.count}]);for(let W=0,J=C.length;W<J;++W){const H=C[W],Y=H.start,le=H.count;for(let pe=Y,re=Y+le;pe<re;pe+=3)S(e.getX(pe+0),e.getX(pe+1),e.getX(pe+2))}const A=new Oe,P=new Oe,k=new Oe,F=new Oe;function B(W){k.fromBufferAttribute(i,W),F.copy(k);const J=a[W];A.copy(J),A.sub(k.multiplyScalar(k.dot(J))).normalize(),P.crossVectors(F,J);const Y=P.dot(l[W])<0?-1:1;s.setXYZW(W,A.x,A.y,A.z,Y)}for(let W=0,J=C.length;W<J;++W){const H=C[W],Y=H.start,le=H.count;for(let pe=Y,re=Y+le;pe<re;pe+=3)B(e.getX(pe+0)),B(e.getX(pe+1)),B(e.getX(pe+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Ni(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let g=0,v=r.count;g<v;g++)r.setXYZ(g,0,0,0);const i=new Oe,o=new Oe,s=new Oe,a=new Oe,l=new Oe,d=new Oe,h=new Oe,p=new Oe;if(e)for(let g=0,v=e.count;g<v;g+=3){const x=e.getX(g+0),b=e.getX(g+1),w=e.getX(g+2);i.fromBufferAttribute(n,x),o.fromBufferAttribute(n,b),s.fromBufferAttribute(n,w),h.subVectors(s,o),p.subVectors(i,o),h.cross(p),a.fromBufferAttribute(r,x),l.fromBufferAttribute(r,b),d.fromBufferAttribute(r,w),a.add(h),l.add(h),d.add(h),r.setXYZ(x,a.x,a.y,a.z),r.setXYZ(b,l.x,l.y,l.z),r.setXYZ(w,d.x,d.y,d.z)}else for(let g=0,v=n.count;g<v;g+=3)i.fromBufferAttribute(n,g+0),o.fromBufferAttribute(n,g+1),s.fromBufferAttribute(n,g+2),h.subVectors(s,o),p.subVectors(i,o),h.cross(p),r.setXYZ(g+0,h.x,h.y,h.z),r.setXYZ(g+1,h.x,h.y,h.z),r.setXYZ(g+2,h.x,h.y,h.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)sa.fromBufferAttribute(e,n),sa.normalize(),e.setXYZ(n,sa.x,sa.y,sa.z)}toNonIndexed(){function e(a,l){const d=a.array,h=a.itemSize,p=a.normalized,g=new d.constructor(l.length*h);let v=0,x=0;for(let b=0,w=l.length;b<w;b++){a.isInterleavedBufferAttribute?v=l[b]*a.data.stride+a.offset:v=l[b]*h;for(let S=0;S<h;S++)g[x++]=d[v++]}return new Ni(g,h,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Pr,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],d=e(l,r);n.setAttribute(a,d)}const o=this.morphAttributes;for(const a in o){const l=[],d=o[a];for(let h=0,p=d.length;h<p;h++){const g=d[h],v=e(g,r);l.push(v)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,l=s.length;a<l;a++){const d=s[a];n.addGroup(d.start,d.count,d.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const d in l)l[d]!==void 0&&(e[d]=l[d]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const d=r[l];e.data.attributes[l]=d.toJSON(e.data)}const i={};let o=!1;for(const l in this.morphAttributes){const d=this.morphAttributes[l],h=[];for(let p=0,g=d.length;p<g;p++){const v=d[p];h.push(v.toJSON(e.data))}h.length>0&&(i[l]=h,o=!0)}o&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const d in i){const h=i[d];this.setAttribute(d,h.clone(n))}const o=e.morphAttributes;for(const d in o){const h=[],p=o[d];for(let g=0,v=p.length;g<v;g++)h.push(p[g].clone(n));this.morphAttributes[d]=h}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let d=0,h=s.length;d<h;d++){const p=s[d];this.addGroup(p.start,p.count,p.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const iZ=new Yn,Pv=new Ky,nA=new Fa,oZ=new Oe,_x=new Oe,xx=new Oe,bx=new Oe,YN=new Oe,rA=new Oe,iA=new Ft,oA=new Ft,sA=new Ft,sZ=new Oe,aZ=new Oe,lZ=new Oe,aA=new Oe,lA=new Oe;class ds extends di{constructor(e=new Pr,n=new pu){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,o=r.morphAttributes.position,s=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(o&&a){rA.set(0,0,0);for(let l=0,d=o.length;l<d;l++){const h=a[l],p=o[l];h!==0&&(YN.fromBufferAttribute(p,e),s?rA.addScaledVector(YN,h):rA.addScaledVector(YN.sub(n),h))}n.add(rA)}return n}raycast(e,n){const r=this.geometry,i=this.material,o=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),nA.copy(r.boundingSphere),nA.applyMatrix4(o),Pv.copy(e.ray).recast(e.near),!(nA.containsPoint(Pv.origin)===!1&&(Pv.intersectSphere(nA,oZ)===null||Pv.origin.distanceToSquared(oZ)>(e.far-e.near)**2))&&(iZ.copy(o).invert(),Pv.copy(e.ray).applyMatrix4(iZ),!(r.boundingBox!==null&&Pv.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,Pv)))}_computeIntersections(e,n,r){let i;const o=this.geometry,s=this.material,a=o.index,l=o.attributes.position,d=o.attributes.uv,h=o.attributes.uv1,p=o.attributes.normal,g=o.groups,v=o.drawRange;if(a!==null)if(Array.isArray(s))for(let x=0,b=g.length;x<b;x++){const w=g[x],S=s[w.materialIndex],C=Math.max(w.start,v.start),A=Math.min(a.count,Math.min(w.start+w.count,v.start+v.count));for(let P=C,k=A;P<k;P+=3){const F=a.getX(P),B=a.getX(P+1),W=a.getX(P+2);i=cA(this,S,e,r,d,h,p,F,B,W),i&&(i.faceIndex=Math.floor(P/3),i.face.materialIndex=w.materialIndex,n.push(i))}}else{const x=Math.max(0,v.start),b=Math.min(a.count,v.start+v.count);for(let w=x,S=b;w<S;w+=3){const C=a.getX(w),A=a.getX(w+1),P=a.getX(w+2);i=cA(this,s,e,r,d,h,p,C,A,P),i&&(i.faceIndex=Math.floor(w/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(s))for(let x=0,b=g.length;x<b;x++){const w=g[x],S=s[w.materialIndex],C=Math.max(w.start,v.start),A=Math.min(l.count,Math.min(w.start+w.count,v.start+v.count));for(let P=C,k=A;P<k;P+=3){const F=P,B=P+1,W=P+2;i=cA(this,S,e,r,d,h,p,F,B,W),i&&(i.faceIndex=Math.floor(P/3),i.face.materialIndex=w.materialIndex,n.push(i))}}else{const x=Math.max(0,v.start),b=Math.min(l.count,v.start+v.count);for(let w=x,S=b;w<S;w+=3){const C=w,A=w+1,P=w+2;i=cA(this,s,e,r,d,h,p,C,A,P),i&&(i.faceIndex=Math.floor(w/3),n.push(i))}}}}function Lut(t,e,n,r,i,o,s,a){let l;if(e.side===Kl?l=r.intersectTriangle(s,o,i,!0,a):l=r.intersectTriangle(i,o,s,e.side===Yf,a),l===null)return null;lA.copy(a),lA.applyMatrix4(t.matrixWorld);const d=n.ray.origin.distanceTo(lA);return d<n.near||d>n.far?null:{distance:d,point:lA.clone(),object:t}}function cA(t,e,n,r,i,o,s,a,l,d){t.getVertexPosition(a,_x),t.getVertexPosition(l,xx),t.getVertexPosition(d,bx);const h=Lut(t,e,n,r,_x,xx,bx,aA);if(h){i&&(iA.fromBufferAttribute(i,a),oA.fromBufferAttribute(i,l),sA.fromBufferAttribute(i,d),h.uv=du.getInterpolation(aA,_x,xx,bx,iA,oA,sA,new Ft)),o&&(iA.fromBufferAttribute(o,a),oA.fromBufferAttribute(o,l),sA.fromBufferAttribute(o,d),h.uv1=du.getInterpolation(aA,_x,xx,bx,iA,oA,sA,new Ft)),s&&(sZ.fromBufferAttribute(s,a),aZ.fromBufferAttribute(s,l),lZ.fromBufferAttribute(s,d),h.normal=du.getInterpolation(aA,_x,xx,bx,sZ,aZ,lZ,new Oe),h.normal.dot(r.direction)>0&&h.normal.multiplyScalar(-1));const p={a,b:l,c:d,normal:new Oe,materialIndex:0};du.getNormal(_x,xx,bx,p.normal),h.face=p}return h}class Zy extends Pr{constructor(e=1,n=1,r=1,i=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:o,depthSegments:s};const a=this;i=Math.floor(i),o=Math.floor(o),s=Math.floor(s);const l=[],d=[],h=[],p=[];let g=0,v=0;x("z","y","x",-1,-1,r,n,e,s,o,0),x("z","y","x",1,-1,r,n,-e,s,o,1),x("x","z","y",1,1,e,r,n,i,s,2),x("x","z","y",1,-1,e,r,-n,i,s,3),x("x","y","z",1,-1,e,n,r,i,o,4),x("x","y","z",-1,-1,e,n,-r,i,o,5),this.setIndex(l),this.setAttribute("position",new Jn(d,3)),this.setAttribute("normal",new Jn(h,3)),this.setAttribute("uv",new Jn(p,2));function x(b,w,S,C,A,P,k,F,B,W,J){const H=P/B,Y=k/W,le=P/2,pe=k/2,re=F/2,me=B+1,he=W+1;let we=0,ee=0;const ye=new Oe;for(let be=0;be<he;be++){const Le=be*Y-pe;for(let je=0;je<me;je++){const dt=je*H-le;ye[b]=dt*C,ye[w]=Le*A,ye[S]=re,d.push(ye.x,ye.y,ye.z),ye[b]=0,ye[w]=0,ye[S]=F>0?1:-1,h.push(ye.x,ye.y,ye.z),p.push(je/B),p.push(1-be/W),we+=1}}for(let be=0;be<W;be++)for(let Le=0;Le<B;Le++){const je=g+Le+me*be,dt=g+Le+me*(be+1),Be=g+(Le+1)+me*(be+1),ot=g+(Le+1)+me*be;l.push(je,dt,ot),l.push(dt,Be,ot),ee+=6}a.addGroup(v,ee,J),v+=ee,g+=we}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zy(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function E1(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function jl(t){const e={};for(let n=0;n<t.length;n++){const r=E1(t[n]);for(const i in r)e[i]=r[i]}return e}function Dut(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function Sde(t){return t.getRenderTarget()===null?t.outputColorSpace:Di.workingColorSpace}const Mde={clone:E1,merge:jl};var Nut=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,zut=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Oh extends Cs{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Nut,this.fragmentShader=zut,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=E1(e.uniforms),this.uniformsGroups=Dut(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?n.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?n.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?n.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?n.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?n.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?n.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?n.uniforms[i]={type:"m4",value:s.toArray()}:n.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class m_ extends di{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Yn,this.projectionMatrix=new Yn,this.projectionMatrixInverse=new Yn,this.coordinateSystem=If}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Dg=new Oe,cZ=new Ft,uZ=new Ft;class No extends m_{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=M1*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(A0*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return M1*2*Math.atan(Math.tan(A0*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){Dg.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Dg.x,Dg.y).multiplyScalar(-e/Dg.z),Dg.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Dg.x,Dg.y).multiplyScalar(-e/Dg.z)}getViewSize(e,n){return this.getViewBounds(e,cZ,uZ),n.subVectors(uZ,cZ)}setViewOffset(e,n,r,i,o,s){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(A0*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,o=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,d=s.fullHeight;o+=s.offsetX*i/l,n-=s.offsetY*r/d,i*=s.width/l,r*=s.height/d}const a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const wx=-90,Sx=1;class Ede extends di{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new No(wx,Sx,e,n);i.layers=this.layers,this.add(i);const o=new No(wx,Sx,e,n);o.layers=this.layers,this.add(o);const s=new No(wx,Sx,e,n);s.layers=this.layers,this.add(s);const a=new No(wx,Sx,e,n);a.layers=this.layers,this.add(a);const l=new No(wx,Sx,e,n);l.layers=this.layers,this.add(l);const d=new No(wx,Sx,e,n);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,o,s,a,l]=n;for(const d of n)this.remove(d);if(e===If)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===uE)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const d of n)this.add(d),d.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,s,a,l,d,h]=this.children,p=e.getRenderTarget(),g=e.getActiveCubeFace(),v=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;const b=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,o),e.setRenderTarget(r,1,i),e.render(n,s),e.setRenderTarget(r,2,i),e.render(n,a),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,d),r.texture.generateMipmaps=b,e.setRenderTarget(r,5,i),e.render(n,h),e.setRenderTarget(p,g,v),e.xr.enabled=x,r.texture.needsPMREMUpdate=!0}}class uT extends _o{constructor(e,n,r,i,o,s,a,l,d,h){e=e!==void 0?e:[],n=n!==void 0?n:Cm,super(e,n,r,i,o,s,a,l,d,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Tde extends kh{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new uT(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:yo}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Zy(5,5,5),o=new Oh({name:"CubemapFromEquirect",uniforms:E1(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Kl,blending:fm});o.uniforms.tEquirect.value=n;const s=new ds(i,o),a=n.minFilter;return n.minFilter===yd&&(n.minFilter=yo),new Ede(1,10,this).update(e,s),n.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,n,r,i){const o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(n,r,i);e.setRenderTarget(o)}}const KN=new Oe,Fut=new Oe,But=new Ir;class Ef{constructor(e=new Oe(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=KN.subVectors(r,n).cross(Fut.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(KN),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:n.copy(e.start).addScaledVector(r,o)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||But.getNormalMatrix(e),i=this.coplanarPoint(KN).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Iv=new Fa,uA=new Oe;class dT{constructor(e=new Ef,n=new Ef,r=new Ef,i=new Ef,o=new Ef,s=new Ef){this.planes=[e,n,r,i,o,s]}set(e,n,r,i,o,s){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(o),a[5].copy(s),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=If){const r=this.planes,i=e.elements,o=i[0],s=i[1],a=i[2],l=i[3],d=i[4],h=i[5],p=i[6],g=i[7],v=i[8],x=i[9],b=i[10],w=i[11],S=i[12],C=i[13],A=i[14],P=i[15];if(r[0].setComponents(l-o,g-d,w-v,P-S).normalize(),r[1].setComponents(l+o,g+d,w+v,P+S).normalize(),r[2].setComponents(l+s,g+h,w+x,P+C).normalize(),r[3].setComponents(l-s,g-h,w-x,P-C).normalize(),r[4].setComponents(l-a,g-p,w-b,P-A).normalize(),n===If)r[5].setComponents(l+a,g+p,w+b,P+A).normalize();else if(n===uE)r[5].setComponents(a,p,b,A).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Iv.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Iv.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Iv)}intersectsSprite(e){return Iv.center.set(0,0,0),Iv.radius=.7071067811865476,Iv.applyMatrix4(e.matrixWorld),this.intersectsSphere(Iv)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let o=0;o<6;o++)if(n[o].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(uA.x=i.normal.x>0?e.max.x:e.min.x,uA.y=i.normal.y>0?e.max.y:e.min.y,uA.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(uA)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Cde(){let t=null,e=!1,n=null,r=null;function i(o,s){n(o,s),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){n=o},setContext:function(o){t=o}}}function jut(t,e){const n=e.isWebGL2,r=new WeakMap;function i(d,h){const p=d.array,g=d.usage,v=p.byteLength,x=t.createBuffer();t.bindBuffer(h,x),t.bufferData(h,p,g),d.onUploadCallback();let b;if(p instanceof Float32Array)b=t.FLOAT;else if(p instanceof Uint16Array)if(d.isFloat16BufferAttribute)if(n)b=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else b=t.UNSIGNED_SHORT;else if(p instanceof Int16Array)b=t.SHORT;else if(p instanceof Uint32Array)b=t.UNSIGNED_INT;else if(p instanceof Int32Array)b=t.INT;else if(p instanceof Int8Array)b=t.BYTE;else if(p instanceof Uint8Array)b=t.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)b=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:x,type:b,bytesPerElement:p.BYTES_PER_ELEMENT,version:d.version,size:v}}function o(d,h,p){const g=h.array,v=h._updateRange,x=h.updateRanges;if(t.bindBuffer(p,d),v.count===-1&&x.length===0&&t.bufferSubData(p,0,g),x.length!==0){for(let b=0,w=x.length;b<w;b++){const S=x[b];n?t.bufferSubData(p,S.start*g.BYTES_PER_ELEMENT,g,S.start,S.count):t.bufferSubData(p,S.start*g.BYTES_PER_ELEMENT,g.subarray(S.start,S.start+S.count))}h.clearUpdateRanges()}v.count!==-1&&(n?t.bufferSubData(p,v.offset*g.BYTES_PER_ELEMENT,g,v.offset,v.count):t.bufferSubData(p,v.offset*g.BYTES_PER_ELEMENT,g.subarray(v.offset,v.offset+v.count)),v.count=-1),h.onUploadCallback()}function s(d){return d.isInterleavedBufferAttribute&&(d=d.data),r.get(d)}function a(d){d.isInterleavedBufferAttribute&&(d=d.data);const h=r.get(d);h&&(t.deleteBuffer(h.buffer),r.delete(d))}function l(d,h){if(d.isGLBufferAttribute){const g=r.get(d);(!g||g.version<d.version)&&r.set(d,{buffer:d.buffer,type:d.type,bytesPerElement:d.elementSize,version:d.version});return}d.isInterleavedBufferAttribute&&(d=d.data);const p=r.get(d);if(p===void 0)r.set(d,i(d,h));else if(p.version<d.version){if(p.size!==d.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");o(p.buffer,d,h),p.version=d.version}}return{get:s,remove:a,update:l}}class mw extends Pr{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const o=e/2,s=n/2,a=Math.floor(r),l=Math.floor(i),d=a+1,h=l+1,p=e/a,g=n/l,v=[],x=[],b=[],w=[];for(let S=0;S<h;S++){const C=S*g-s;for(let A=0;A<d;A++){const P=A*p-o;x.push(P,-C,0),b.push(0,0,1),w.push(A/a),w.push(1-S/l)}}for(let S=0;S<l;S++)for(let C=0;C<a;C++){const A=C+d*S,P=C+d*(S+1),k=C+1+d*(S+1),F=C+1+d*S;v.push(A,P,F),v.push(P,k,F)}this.setIndex(v),this.setAttribute("position",new Jn(x,3)),this.setAttribute("normal",new Jn(b,3)),this.setAttribute("uv",new Jn(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mw(e.width,e.height,e.widthSegments,e.heightSegments)}}var $ut=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Uut=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Vut=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Hut=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Wut=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Gut=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,qut=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Xut=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Yut=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Kut=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,Zut=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Jut=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Qut=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,edt=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,tdt=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,ndt=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,rdt=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,idt=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,odt=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,sdt=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,adt=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,ldt=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,cdt=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,udt=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,ddt=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,hdt=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,fdt=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,pdt=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,mdt=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,gdt=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,ydt="gl_FragColor = linearToOutputTexel( gl_FragColor );",vdt=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,_dt=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,xdt=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,bdt=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,wdt=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Sdt=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Mdt=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Edt=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Tdt=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Cdt=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Adt=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Pdt=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Idt=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Rdt=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,kdt=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Odt=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Ldt=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Ddt=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Ndt=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,zdt=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Fdt=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Bdt=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,jdt=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,$dt=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Udt=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Vdt=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Hdt=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Wdt=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Gdt=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,qdt=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Xdt=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Ydt=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Kdt=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Zdt=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Jdt=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Qdt=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,eht=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,tht=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,nht=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,rht=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
	#endif
	#ifdef MORPHTARGETS_TEXTURE
		#ifndef USE_INSTANCING_MORPH
			uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		#endif
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,iht=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,oht=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,sht=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,aht=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,lht=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,cht=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,uht=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,dht=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,hht=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,fht=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,pht=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,mht=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,ght=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,yht=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,vht=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,_ht=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,xht=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,bht=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,wht=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Sht=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Mht=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Eht=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Tht=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Cht=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Aht=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Pht=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Iht=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Rht=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,kht=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Oht=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Lht=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	float startCompression = 0.8 - 0.04;
	float desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min(color.r, min(color.g, color.b));
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max(color.r, max(color.g, color.b));
	if (peak < startCompression) return color;
	float d = 1. - startCompression;
	float newPeak = 1. - d * d / (peak + d - startCompression);
	color *= newPeak / peak;
	float g = 1. - 1. / (desaturation * (peak - newPeak) + 1.);
	return mix(color, vec3(1, 1, 1), g);
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Dht=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Nht=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,zht=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Fht=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Bht=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,jht=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const $ht=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Uht=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Vht=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Hht=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Wht=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Ght=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,qht=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Xht=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Yht=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Kht=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Zht=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Jht=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Qht=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,eft=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,tft=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,nft=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rft=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ift=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oft=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,sft=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aft=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,lft=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,cft=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,uft=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dft=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,hft=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fft=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pft=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mft=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,gft=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,yft=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,vft=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,_ft=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,xft=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Dr={alphahash_fragment:$ut,alphahash_pars_fragment:Uut,alphamap_fragment:Vut,alphamap_pars_fragment:Hut,alphatest_fragment:Wut,alphatest_pars_fragment:Gut,aomap_fragment:qut,aomap_pars_fragment:Xut,batching_pars_vertex:Yut,batching_vertex:Kut,begin_vertex:Zut,beginnormal_vertex:Jut,bsdfs:Qut,iridescence_fragment:edt,bumpmap_pars_fragment:tdt,clipping_planes_fragment:ndt,clipping_planes_pars_fragment:rdt,clipping_planes_pars_vertex:idt,clipping_planes_vertex:odt,color_fragment:sdt,color_pars_fragment:adt,color_pars_vertex:ldt,color_vertex:cdt,common:udt,cube_uv_reflection_fragment:ddt,defaultnormal_vertex:hdt,displacementmap_pars_vertex:fdt,displacementmap_vertex:pdt,emissivemap_fragment:mdt,emissivemap_pars_fragment:gdt,colorspace_fragment:ydt,colorspace_pars_fragment:vdt,envmap_fragment:_dt,envmap_common_pars_fragment:xdt,envmap_pars_fragment:bdt,envmap_pars_vertex:wdt,envmap_physical_pars_fragment:Ldt,envmap_vertex:Sdt,fog_vertex:Mdt,fog_pars_vertex:Edt,fog_fragment:Tdt,fog_pars_fragment:Cdt,gradientmap_pars_fragment:Adt,lightmap_fragment:Pdt,lightmap_pars_fragment:Idt,lights_lambert_fragment:Rdt,lights_lambert_pars_fragment:kdt,lights_pars_begin:Odt,lights_toon_fragment:Ddt,lights_toon_pars_fragment:Ndt,lights_phong_fragment:zdt,lights_phong_pars_fragment:Fdt,lights_physical_fragment:Bdt,lights_physical_pars_fragment:jdt,lights_fragment_begin:$dt,lights_fragment_maps:Udt,lights_fragment_end:Vdt,logdepthbuf_fragment:Hdt,logdepthbuf_pars_fragment:Wdt,logdepthbuf_pars_vertex:Gdt,logdepthbuf_vertex:qdt,map_fragment:Xdt,map_pars_fragment:Ydt,map_particle_fragment:Kdt,map_particle_pars_fragment:Zdt,metalnessmap_fragment:Jdt,metalnessmap_pars_fragment:Qdt,morphinstance_vertex:eht,morphcolor_vertex:tht,morphnormal_vertex:nht,morphtarget_pars_vertex:rht,morphtarget_vertex:iht,normal_fragment_begin:oht,normal_fragment_maps:sht,normal_pars_fragment:aht,normal_pars_vertex:lht,normal_vertex:cht,normalmap_pars_fragment:uht,clearcoat_normal_fragment_begin:dht,clearcoat_normal_fragment_maps:hht,clearcoat_pars_fragment:fht,iridescence_pars_fragment:pht,opaque_fragment:mht,packing:ght,premultiplied_alpha_fragment:yht,project_vertex:vht,dithering_fragment:_ht,dithering_pars_fragment:xht,roughnessmap_fragment:bht,roughnessmap_pars_fragment:wht,shadowmap_pars_fragment:Sht,shadowmap_pars_vertex:Mht,shadowmap_vertex:Eht,shadowmask_pars_fragment:Tht,skinbase_vertex:Cht,skinning_pars_vertex:Aht,skinning_vertex:Pht,skinnormal_vertex:Iht,specularmap_fragment:Rht,specularmap_pars_fragment:kht,tonemapping_fragment:Oht,tonemapping_pars_fragment:Lht,transmission_fragment:Dht,transmission_pars_fragment:Nht,uv_pars_fragment:zht,uv_pars_vertex:Fht,uv_vertex:Bht,worldpos_vertex:jht,background_vert:$ht,background_frag:Uht,backgroundCube_vert:Vht,backgroundCube_frag:Hht,cube_vert:Wht,cube_frag:Ght,depth_vert:qht,depth_frag:Xht,distanceRGBA_vert:Yht,distanceRGBA_frag:Kht,equirect_vert:Zht,equirect_frag:Jht,linedashed_vert:Qht,linedashed_frag:eft,meshbasic_vert:tft,meshbasic_frag:nft,meshlambert_vert:rft,meshlambert_frag:ift,meshmatcap_vert:oft,meshmatcap_frag:sft,meshnormal_vert:aft,meshnormal_frag:lft,meshphong_vert:cft,meshphong_frag:uft,meshphysical_vert:dft,meshphysical_frag:hft,meshtoon_vert:fft,meshtoon_frag:pft,points_vert:mft,points_frag:gft,shadow_vert:yft,shadow_frag:vft,sprite_vert:_ft,sprite_frag:xft},En={common:{diffuse:{value:new In(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ir},alphaMap:{value:null},alphaMapTransform:{value:new Ir},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ir}},envmap:{envMap:{value:null},envMapRotation:{value:new Ir},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ir}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ir}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ir},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ir},normalScale:{value:new Ft(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ir},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ir}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ir}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ir}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new In(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new In(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ir},alphaTest:{value:0},uvTransform:{value:new Ir}},sprite:{diffuse:{value:new In(16777215)},opacity:{value:1},center:{value:new Ft(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ir},alphaMap:{value:null},alphaMapTransform:{value:new Ir},alphaTest:{value:0}}},_h={basic:{uniforms:jl([En.common,En.specularmap,En.envmap,En.aomap,En.lightmap,En.fog]),vertexShader:Dr.meshbasic_vert,fragmentShader:Dr.meshbasic_frag},lambert:{uniforms:jl([En.common,En.specularmap,En.envmap,En.aomap,En.lightmap,En.emissivemap,En.bumpmap,En.normalmap,En.displacementmap,En.fog,En.lights,{emissive:{value:new In(0)}}]),vertexShader:Dr.meshlambert_vert,fragmentShader:Dr.meshlambert_frag},phong:{uniforms:jl([En.common,En.specularmap,En.envmap,En.aomap,En.lightmap,En.emissivemap,En.bumpmap,En.normalmap,En.displacementmap,En.fog,En.lights,{emissive:{value:new In(0)},specular:{value:new In(1118481)},shininess:{value:30}}]),vertexShader:Dr.meshphong_vert,fragmentShader:Dr.meshphong_frag},standard:{uniforms:jl([En.common,En.envmap,En.aomap,En.lightmap,En.emissivemap,En.bumpmap,En.normalmap,En.displacementmap,En.roughnessmap,En.metalnessmap,En.fog,En.lights,{emissive:{value:new In(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Dr.meshphysical_vert,fragmentShader:Dr.meshphysical_frag},toon:{uniforms:jl([En.common,En.aomap,En.lightmap,En.emissivemap,En.bumpmap,En.normalmap,En.displacementmap,En.gradientmap,En.fog,En.lights,{emissive:{value:new In(0)}}]),vertexShader:Dr.meshtoon_vert,fragmentShader:Dr.meshtoon_frag},matcap:{uniforms:jl([En.common,En.bumpmap,En.normalmap,En.displacementmap,En.fog,{matcap:{value:null}}]),vertexShader:Dr.meshmatcap_vert,fragmentShader:Dr.meshmatcap_frag},points:{uniforms:jl([En.points,En.fog]),vertexShader:Dr.points_vert,fragmentShader:Dr.points_frag},dashed:{uniforms:jl([En.common,En.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Dr.linedashed_vert,fragmentShader:Dr.linedashed_frag},depth:{uniforms:jl([En.common,En.displacementmap]),vertexShader:Dr.depth_vert,fragmentShader:Dr.depth_frag},normal:{uniforms:jl([En.common,En.bumpmap,En.normalmap,En.displacementmap,{opacity:{value:1}}]),vertexShader:Dr.meshnormal_vert,fragmentShader:Dr.meshnormal_frag},sprite:{uniforms:jl([En.sprite,En.fog]),vertexShader:Dr.sprite_vert,fragmentShader:Dr.sprite_frag},background:{uniforms:{uvTransform:{value:new Ir},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Dr.background_vert,fragmentShader:Dr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ir}},vertexShader:Dr.backgroundCube_vert,fragmentShader:Dr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Dr.cube_vert,fragmentShader:Dr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Dr.equirect_vert,fragmentShader:Dr.equirect_frag},distanceRGBA:{uniforms:jl([En.common,En.displacementmap,{referencePosition:{value:new Oe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Dr.distanceRGBA_vert,fragmentShader:Dr.distanceRGBA_frag},shadow:{uniforms:jl([En.lights,En.fog,{color:{value:new In(0)},opacity:{value:1}}]),vertexShader:Dr.shadow_vert,fragmentShader:Dr.shadow_frag}};_h.physical={uniforms:jl([_h.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ir},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ir},clearcoatNormalScale:{value:new Ft(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ir},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ir},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ir},sheen:{value:0},sheenColor:{value:new In(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ir},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ir},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ir},transmissionSamplerSize:{value:new Ft},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ir},attenuationDistance:{value:0},attenuationColor:{value:new In(0)},specularColor:{value:new In(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ir},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ir},anisotropyVector:{value:new Ft},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ir}}]),vertexShader:Dr.meshphysical_vert,fragmentShader:Dr.meshphysical_frag};const dA={r:0,b:0,g:0},Rv=new Tu,bft=new Yn;function wft(t,e,n,r,i,o,s){const a=new In(0);let l=o===!0?0:1,d,h,p=null,g=0,v=null;function x(w,S){let C=!1,A=S.isScene===!0?S.background:null;A&&A.isTexture&&(A=(S.backgroundBlurriness>0?n:e).get(A)),A===null?b(a,l):A&&A.isColor&&(b(A,1),C=!0);const P=t.xr.getEnvironmentBlendMode();P==="additive"?r.buffers.color.setClear(0,0,0,1,s):P==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,s),(t.autoClear||C)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),A&&(A.isCubeTexture||A.mapping===pw)?(h===void 0&&(h=new ds(new Zy(1,1,1),new Oh({name:"BackgroundCubeMaterial",uniforms:E1(_h.backgroundCube.uniforms),vertexShader:_h.backgroundCube.vertexShader,fragmentShader:_h.backgroundCube.fragmentShader,side:Kl,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(k,F,B){this.matrixWorld.copyPosition(B.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(h)),Rv.copy(S.backgroundRotation),Rv.x*=-1,Rv.y*=-1,Rv.z*=-1,A.isCubeTexture&&A.isRenderTargetTexture===!1&&(Rv.y*=-1,Rv.z*=-1),h.material.uniforms.envMap.value=A,h.material.uniforms.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(bft.makeRotationFromEuler(Rv)),h.material.toneMapped=Di.getTransfer(A.colorSpace)!==no,(p!==A||g!==A.version||v!==t.toneMapping)&&(h.material.needsUpdate=!0,p=A,g=A.version,v=t.toneMapping),h.layers.enableAll(),w.unshift(h,h.geometry,h.material,0,0,null)):A&&A.isTexture&&(d===void 0&&(d=new ds(new mw(2,2),new Oh({name:"BackgroundMaterial",uniforms:E1(_h.background.uniforms),vertexShader:_h.background.vertexShader,fragmentShader:_h.background.fragmentShader,side:Yf,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(d)),d.material.uniforms.t2D.value=A,d.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,d.material.toneMapped=Di.getTransfer(A.colorSpace)!==no,A.matrixAutoUpdate===!0&&A.updateMatrix(),d.material.uniforms.uvTransform.value.copy(A.matrix),(p!==A||g!==A.version||v!==t.toneMapping)&&(d.material.needsUpdate=!0,p=A,g=A.version,v=t.toneMapping),d.layers.enableAll(),w.unshift(d,d.geometry,d.material,0,0,null))}function b(w,S){w.getRGB(dA,Sde(t)),r.buffers.color.setClear(dA.r,dA.g,dA.b,S,s)}return{getClearColor:function(){return a},setClearColor:function(w,S=1){a.set(w),l=S,b(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(w){l=w,b(a,l)},render:x}}function Sft(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),s=r.isWebGL2||o!==null,a={},l=w(null);let d=l,h=!1;function p(re,me,he,we,ee){let ye=!1;if(s){const be=b(we,he,me);d!==be&&(d=be,v(d.object)),ye=S(re,we,he,ee),ye&&C(re,we,he,ee)}else{const be=me.wireframe===!0;(d.geometry!==we.id||d.program!==he.id||d.wireframe!==be)&&(d.geometry=we.id,d.program=he.id,d.wireframe=be,ye=!0)}ee!==null&&n.update(ee,t.ELEMENT_ARRAY_BUFFER),(ye||h)&&(h=!1,W(re,me,he,we),ee!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(ee).buffer))}function g(){return r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()}function v(re){return r.isWebGL2?t.bindVertexArray(re):o.bindVertexArrayOES(re)}function x(re){return r.isWebGL2?t.deleteVertexArray(re):o.deleteVertexArrayOES(re)}function b(re,me,he){const we=he.wireframe===!0;let ee=a[re.id];ee===void 0&&(ee={},a[re.id]=ee);let ye=ee[me.id];ye===void 0&&(ye={},ee[me.id]=ye);let be=ye[we];return be===void 0&&(be=w(g()),ye[we]=be),be}function w(re){const me=[],he=[],we=[];for(let ee=0;ee<i;ee++)me[ee]=0,he[ee]=0,we[ee]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:me,enabledAttributes:he,attributeDivisors:we,object:re,attributes:{},index:null}}function S(re,me,he,we){const ee=d.attributes,ye=me.attributes;let be=0;const Le=he.getAttributes();for(const je in Le)if(Le[je].location>=0){const Be=ee[je];let ot=ye[je];if(ot===void 0&&(je==="instanceMatrix"&&re.instanceMatrix&&(ot=re.instanceMatrix),je==="instanceColor"&&re.instanceColor&&(ot=re.instanceColor)),Be===void 0||Be.attribute!==ot||ot&&Be.data!==ot.data)return!0;be++}return d.attributesNum!==be||d.index!==we}function C(re,me,he,we){const ee={},ye=me.attributes;let be=0;const Le=he.getAttributes();for(const je in Le)if(Le[je].location>=0){let Be=ye[je];Be===void 0&&(je==="instanceMatrix"&&re.instanceMatrix&&(Be=re.instanceMatrix),je==="instanceColor"&&re.instanceColor&&(Be=re.instanceColor));const ot={};ot.attribute=Be,Be&&Be.data&&(ot.data=Be.data),ee[je]=ot,be++}d.attributes=ee,d.attributesNum=be,d.index=we}function A(){const re=d.newAttributes;for(let me=0,he=re.length;me<he;me++)re[me]=0}function P(re){k(re,0)}function k(re,me){const he=d.newAttributes,we=d.enabledAttributes,ee=d.attributeDivisors;he[re]=1,we[re]===0&&(t.enableVertexAttribArray(re),we[re]=1),ee[re]!==me&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](re,me),ee[re]=me)}function F(){const re=d.newAttributes,me=d.enabledAttributes;for(let he=0,we=me.length;he<we;he++)me[he]!==re[he]&&(t.disableVertexAttribArray(he),me[he]=0)}function B(re,me,he,we,ee,ye,be){be===!0?t.vertexAttribIPointer(re,me,he,ee,ye):t.vertexAttribPointer(re,me,he,we,ee,ye)}function W(re,me,he,we){if(r.isWebGL2===!1&&(re.isInstancedMesh||we.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;A();const ee=we.attributes,ye=he.getAttributes(),be=me.defaultAttributeValues;for(const Le in ye){const je=ye[Le];if(je.location>=0){let dt=ee[Le];if(dt===void 0&&(Le==="instanceMatrix"&&re.instanceMatrix&&(dt=re.instanceMatrix),Le==="instanceColor"&&re.instanceColor&&(dt=re.instanceColor)),dt!==void 0){const Be=dt.normalized,ot=dt.itemSize,at=n.get(dt);if(at===void 0)continue;const It=at.buffer,Lt=at.type,lt=at.bytesPerElement,Je=r.isWebGL2===!0&&(Lt===t.INT||Lt===t.UNSIGNED_INT||dt.gpuType===_8);if(dt.isInterleavedBufferAttribute){const Qe=dt.data,ge=Qe.stride,et=dt.offset;if(Qe.isInstancedInterleavedBuffer){for(let Ke=0;Ke<je.locationSize;Ke++)k(je.location+Ke,Qe.meshPerAttribute);re.isInstancedMesh!==!0&&we._maxInstanceCount===void 0&&(we._maxInstanceCount=Qe.meshPerAttribute*Qe.count)}else for(let Ke=0;Ke<je.locationSize;Ke++)P(je.location+Ke);t.bindBuffer(t.ARRAY_BUFFER,It);for(let Ke=0;Ke<je.locationSize;Ke++)B(je.location+Ke,ot/je.locationSize,Lt,Be,ge*lt,(et+ot/je.locationSize*Ke)*lt,Je)}else{if(dt.isInstancedBufferAttribute){for(let Qe=0;Qe<je.locationSize;Qe++)k(je.location+Qe,dt.meshPerAttribute);re.isInstancedMesh!==!0&&we._maxInstanceCount===void 0&&(we._maxInstanceCount=dt.meshPerAttribute*dt.count)}else for(let Qe=0;Qe<je.locationSize;Qe++)P(je.location+Qe);t.bindBuffer(t.ARRAY_BUFFER,It);for(let Qe=0;Qe<je.locationSize;Qe++)B(je.location+Qe,ot/je.locationSize,Lt,Be,ot*lt,ot/je.locationSize*Qe*lt,Je)}}else if(be!==void 0){const Be=be[Le];if(Be!==void 0)switch(Be.length){case 2:t.vertexAttrib2fv(je.location,Be);break;case 3:t.vertexAttrib3fv(je.location,Be);break;case 4:t.vertexAttrib4fv(je.location,Be);break;default:t.vertexAttrib1fv(je.location,Be)}}}}F()}function J(){le();for(const re in a){const me=a[re];for(const he in me){const we=me[he];for(const ee in we)x(we[ee].object),delete we[ee];delete me[he]}delete a[re]}}function H(re){if(a[re.id]===void 0)return;const me=a[re.id];for(const he in me){const we=me[he];for(const ee in we)x(we[ee].object),delete we[ee];delete me[he]}delete a[re.id]}function Y(re){for(const me in a){const he=a[me];if(he[re.id]===void 0)continue;const we=he[re.id];for(const ee in we)x(we[ee].object),delete we[ee];delete he[re.id]}}function le(){pe(),h=!0,d!==l&&(d=l,v(d.object))}function pe(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:p,reset:le,resetDefaultState:pe,dispose:J,releaseStatesOfGeometry:H,releaseStatesOfProgram:Y,initAttributes:A,enableAttribute:P,disableUnusedAttributes:F}}function Mft(t,e,n,r){const i=r.isWebGL2;let o;function s(h){o=h}function a(h,p){t.drawArrays(o,h,p),n.update(p,o,1)}function l(h,p,g){if(g===0)return;let v,x;if(i)v=t,x="drawArraysInstanced";else if(v=e.get("ANGLE_instanced_arrays"),x="drawArraysInstancedANGLE",v===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[x](o,h,p,g),n.update(p,o,g)}function d(h,p,g){if(g===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let x=0;x<g;x++)this.render(h[x],p[x]);else{v.multiDrawArraysWEBGL(o,h,0,p,0,g);let x=0;for(let b=0;b<g;b++)x+=p[b];n.update(x,o,1)}}this.setMode=s,this.render=a,this.renderInstances=l,this.renderMultiDraw=d}function Eft(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const B=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(B.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(B){if(B==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";B="mediump"}return B==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let a=n.precision!==void 0?n.precision:"highp";const l=o(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const d=s||e.has("WEBGL_draw_buffers"),h=n.logarithmicDepthBuffer===!0,p=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),g=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=t.getParameter(t.MAX_TEXTURE_SIZE),x=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),b=t.getParameter(t.MAX_VERTEX_ATTRIBS),w=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),S=t.getParameter(t.MAX_VARYING_VECTORS),C=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),A=g>0,P=s||e.has("OES_texture_float"),k=A&&P,F=s?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:s,drawBuffers:d,getMaxAnisotropy:i,getMaxPrecision:o,precision:a,logarithmicDepthBuffer:h,maxTextures:p,maxVertexTextures:g,maxTextureSize:v,maxCubemapSize:x,maxAttributes:b,maxVertexUniforms:w,maxVaryings:S,maxFragmentUniforms:C,vertexTextures:A,floatFragmentTextures:P,floatVertexTextures:k,maxSamples:F}}function Tft(t){const e=this;let n=null,r=0,i=!1,o=!1;const s=new Ef,a=new Ir,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(p,g){const v=p.length!==0||g||r!==0||i;return i=g,r=p.length,v},this.beginShadows=function(){o=!0,h(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(p,g){n=h(p,g,0)},this.setState=function(p,g,v){const x=p.clippingPlanes,b=p.clipIntersection,w=p.clipShadows,S=t.get(p);if(!i||x===null||x.length===0||o&&!w)o?h(null):d();else{const C=o?0:r,A=C*4;let P=S.clippingState||null;l.value=P,P=h(x,g,A,v);for(let k=0;k!==A;++k)P[k]=n[k];S.clippingState=P,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=C}};function d(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function h(p,g,v,x){const b=p!==null?p.length:0;let w=null;if(b!==0){if(w=l.value,x!==!0||w===null){const S=v+b*4,C=g.matrixWorldInverse;a.getNormalMatrix(C),(w===null||w.length<S)&&(w=new Float32Array(S));for(let A=0,P=v;A!==b;++A,P+=4)s.copy(p[A]).applyMatrix4(C,a),s.normal.toArray(w,P),w[P+3]=s.constant}l.value=w,l.needsUpdate=!0}return e.numPlanes=b,e.numIntersection=0,w}}function Cft(t){let e=new WeakMap;function n(s,a){return a===nE?s.mapping=Cm:a===rE&&(s.mapping=Ly),s}function r(s){if(s&&s.isTexture){const a=s.mapping;if(a===nE||a===rE)if(e.has(s)){const l=e.get(s).texture;return n(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const d=new Tde(l.height);return d.fromEquirectangularTexture(t,s),e.set(s,d),s.addEventListener("dispose",i),n(d.texture,s.mapping)}else return null}}return s}function i(s){const a=s.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}class Rf extends m_{constructor(e=-1,n=1,r=1,i=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=r-e,s=r+e,a=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=d*this.view.offsetX,s=o+d*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const cb=4,dZ=[.125,.215,.35,.446,.526,.582],e0=20,ZN=new Rf,hZ=new In;let JN=null,QN=0,ez=0;const Zv=(1+Math.sqrt(5))/2,Mx=1/Zv,fZ=[new Oe(1,1,1),new Oe(-1,1,1),new Oe(1,1,-1),new Oe(-1,1,-1),new Oe(0,Zv,Mx),new Oe(0,Zv,-Mx),new Oe(Mx,0,Zv),new Oe(-Mx,0,Zv),new Oe(Zv,Mx,0),new Oe(-Zv,Mx,0)];class E5{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){JN=this._renderer.getRenderTarget(),QN=this._renderer.getActiveCubeFace(),ez=this._renderer.getActiveMipmapLevel(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,r,i,o),n>0&&this._blur(o,0,0,n),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=gZ(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=mZ(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(JN,QN,ez),e.scissorTest=!1,hA(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Cm||e.mapping===Ly?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),JN=this._renderer.getRenderTarget(),QN=this._renderer.getActiveCubeFace(),ez=this._renderer.getActiveMipmapLevel();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:yo,minFilter:yo,generateMipmaps:!1,type:w1,format:Wl,colorSpace:da,depthBuffer:!1},i=pZ(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=pZ(e,n,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Aft(o)),this._blurMaterial=Pft(o,e,n)}return i}_compileMaterial(e){const n=new ds(this._lodPlanes[0],e);this._renderer.compile(n,ZN)}_sceneToCubeUV(e,n,r,i){const a=new No(90,1,n,r),l=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],h=this._renderer,p=h.autoClear,g=h.toneMapping;h.getClearColor(hZ),h.toneMapping=$f,h.autoClear=!1;const v=new pu({name:"PMREM.Background",side:Kl,depthWrite:!1,depthTest:!1}),x=new ds(new Zy,v);let b=!1;const w=e.background;w?w.isColor&&(v.color.copy(w),e.background=null,b=!0):(v.color.copy(hZ),b=!0);for(let S=0;S<6;S++){const C=S%3;C===0?(a.up.set(0,l[S],0),a.lookAt(d[S],0,0)):C===1?(a.up.set(0,0,l[S]),a.lookAt(0,d[S],0)):(a.up.set(0,l[S],0),a.lookAt(0,0,d[S]));const A=this._cubeSize;hA(i,C*A,S>2?A:0,A,A),h.setRenderTarget(i),b&&h.render(x,a),h.render(e,a)}x.geometry.dispose(),x.material.dispose(),h.toneMapping=g,h.autoClear=p,e.background=w}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===Cm||e.mapping===Ly;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=gZ()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=mZ());const o=i?this._cubemapMaterial:this._equirectMaterial,s=new ds(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=e;const l=this._cubeSize;hA(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(s,ZN)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const o=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),s=fZ[(i-1)%fZ.length];this._blur(e,i-1,i,o,s)}n.autoClear=r}_blur(e,n,r,i,o){const s=this._pingPongRenderTarget;this._halfBlur(e,s,n,r,i,"latitudinal",o),this._halfBlur(s,e,r,r,i,"longitudinal",o)}_halfBlur(e,n,r,i,o,s,a){const l=this._renderer,d=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,p=new ds(this._lodPlanes[i],d),g=d.uniforms,v=this._sizeLods[r]-1,x=isFinite(o)?Math.PI/(2*v):2*Math.PI/(2*e0-1),b=o/x,w=isFinite(o)?1+Math.floor(h*b):e0;w>e0&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${e0}`);const S=[];let C=0;for(let B=0;B<e0;++B){const W=B/b,J=Math.exp(-W*W/2);S.push(J),B===0?C+=J:B<w&&(C+=2*J)}for(let B=0;B<S.length;B++)S[B]=S[B]/C;g.envMap.value=e.texture,g.samples.value=w,g.weights.value=S,g.latitudinal.value=s==="latitudinal",a&&(g.poleAxis.value=a);const{_lodMax:A}=this;g.dTheta.value=x,g.mipInt.value=A-r;const P=this._sizeLods[i],k=3*P*(i>A-cb?i-A+cb:0),F=4*(this._cubeSize-P);hA(n,k,F,3*P,2*P),l.setRenderTarget(n),l.render(p,ZN)}}function Aft(t){const e=[],n=[],r=[];let i=t;const o=t-cb+1+dZ.length;for(let s=0;s<o;s++){const a=Math.pow(2,i);n.push(a);let l=1/a;s>t-cb?l=dZ[s-t+cb-1]:s===0&&(l=0),r.push(l);const d=1/(a-2),h=-d,p=1+d,g=[h,h,p,h,p,p,h,h,p,p,h,p],v=6,x=6,b=3,w=2,S=1,C=new Float32Array(b*x*v),A=new Float32Array(w*x*v),P=new Float32Array(S*x*v);for(let F=0;F<v;F++){const B=F%3*2/3-1,W=F>2?0:-1,J=[B,W,0,B+2/3,W,0,B+2/3,W+1,0,B,W,0,B+2/3,W+1,0,B,W+1,0];C.set(J,b*x*F),A.set(g,w*x*F);const H=[F,F,F,F,F,F];P.set(H,S*x*F)}const k=new Pr;k.setAttribute("position",new Ni(C,b)),k.setAttribute("uv",new Ni(A,w)),k.setAttribute("faceIndex",new Ni(P,S)),e.push(k),i>cb&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function pZ(t,e,n){const r=new kh(t,e,n);return r.texture.mapping=pw,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function hA(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function Pft(t,e,n){const r=new Float32Array(e0),i=new Oe(0,1,0);return new Oh({name:"SphericalGaussianBlur",defines:{n:e0,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:N8(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:fm,depthTest:!1,depthWrite:!1})}function mZ(){return new Oh({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:N8(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:fm,depthTest:!1,depthWrite:!1})}function gZ(){return new Oh({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:N8(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:fm,depthTest:!1,depthWrite:!1})}function N8(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Ift(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const l=a.mapping,d=l===nE||l===rE,h=l===Cm||l===Ly;if(d||h)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let p=e.get(a);return n===null&&(n=new E5(t)),p=d?n.fromEquirectangular(a,p):n.fromCubemap(a,p),e.set(a,p),p.texture}else{if(e.has(a))return e.get(a).texture;{const p=a.image;if(d&&p&&p.height>0||h&&p&&i(p)){n===null&&(n=new E5(t));const g=d?n.fromEquirectangular(a):n.fromCubemap(a);return e.set(a,g),a.addEventListener("dispose",o),g.texture}else return null}}}return a}function i(a){let l=0;const d=6;for(let h=0;h<d;h++)a[h]!==void 0&&l++;return l===d}function o(a){const l=a.target;l.removeEventListener("dispose",o);const d=e.get(l);d!==void 0&&(e.delete(l),d.dispose())}function s(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:s}}function Rft(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function kft(t,e,n,r){const i={},o=new WeakMap;function s(p){const g=p.target;g.index!==null&&e.remove(g.index);for(const x in g.attributes)e.remove(g.attributes[x]);for(const x in g.morphAttributes){const b=g.morphAttributes[x];for(let w=0,S=b.length;w<S;w++)e.remove(b[w])}g.removeEventListener("dispose",s),delete i[g.id];const v=o.get(g);v&&(e.remove(v),o.delete(g)),r.releaseStatesOfGeometry(g),g.isInstancedBufferGeometry===!0&&delete g._maxInstanceCount,n.memory.geometries--}function a(p,g){return i[g.id]===!0||(g.addEventListener("dispose",s),i[g.id]=!0,n.memory.geometries++),g}function l(p){const g=p.attributes;for(const x in g)e.update(g[x],t.ARRAY_BUFFER);const v=p.morphAttributes;for(const x in v){const b=v[x];for(let w=0,S=b.length;w<S;w++)e.update(b[w],t.ARRAY_BUFFER)}}function d(p){const g=[],v=p.index,x=p.attributes.position;let b=0;if(v!==null){const C=v.array;b=v.version;for(let A=0,P=C.length;A<P;A+=3){const k=C[A+0],F=C[A+1],B=C[A+2];g.push(k,F,F,B,B,k)}}else if(x!==void 0){const C=x.array;b=x.version;for(let A=0,P=C.length/3-1;A<P;A+=3){const k=A+0,F=A+1,B=A+2;g.push(k,F,F,B,B,k)}}else return;const w=new(vde(g)?D8:L8)(g,1);w.version=b;const S=o.get(p);S&&e.remove(S),o.set(p,w)}function h(p){const g=o.get(p);if(g){const v=p.index;v!==null&&g.version<v.version&&d(p)}else d(p);return o.get(p)}return{get:a,update:l,getWireframeAttribute:h}}function Oft(t,e,n,r){const i=r.isWebGL2;let o;function s(v){o=v}let a,l;function d(v){a=v.type,l=v.bytesPerElement}function h(v,x){t.drawElements(o,x,a,v*l),n.update(x,o,1)}function p(v,x,b){if(b===0)return;let w,S;if(i)w=t,S="drawElementsInstanced";else if(w=e.get("ANGLE_instanced_arrays"),S="drawElementsInstancedANGLE",w===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}w[S](o,x,a,v*l,b),n.update(x,o,b)}function g(v,x,b){if(b===0)return;const w=e.get("WEBGL_multi_draw");if(w===null)for(let S=0;S<b;S++)this.render(v[S]/l,x[S]);else{w.multiDrawElementsWEBGL(o,x,0,a,v,0,b);let S=0;for(let C=0;C<b;C++)S+=x[C];n.update(S,o,1)}}this.setMode=s,this.setIndex=d,this.render=h,this.renderInstances=p,this.renderMultiDraw=g}function Lft(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,s,a){switch(n.calls++,s){case t.TRIANGLES:n.triangles+=a*(o/3);break;case t.LINES:n.lines+=a*(o/2);break;case t.LINE_STRIP:n.lines+=a*(o-1);break;case t.LINE_LOOP:n.lines+=a*o;break;case t.POINTS:n.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function Dft(t,e){return t[0]-e[0]}function Nft(t,e){return Math.abs(e[1])-Math.abs(t[1])}function zft(t,e,n){const r={},i=new Float32Array(8),o=new WeakMap,s=new Ui,a=[];for(let d=0;d<8;d++)a[d]=[d,0];function l(d,h,p){const g=d.morphTargetInfluences;if(e.isWebGL2===!0){const x=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,b=x!==void 0?x.length:0;let w=o.get(h);if(w===void 0||w.count!==b){let pe=function(){Y.dispose(),o.delete(h),h.removeEventListener("dispose",pe)};var v=pe;w!==void 0&&w.texture.dispose();const S=h.morphAttributes.position!==void 0,C=h.morphAttributes.normal!==void 0,A=h.morphAttributes.color!==void 0,P=h.morphAttributes.position||[],k=h.morphAttributes.normal||[],F=h.morphAttributes.color||[];let B=0;S===!0&&(B=1),C===!0&&(B=2),A===!0&&(B=3);let W=h.attributes.position.count*B,J=1;W>e.maxTextureSize&&(J=Math.ceil(W/e.maxTextureSize),W=e.maxTextureSize);const H=new Float32Array(W*J*4*b),Y=new vL(H,W,J,b);Y.type=uu,Y.needsUpdate=!0;const le=B*4;for(let re=0;re<b;re++){const me=P[re],he=k[re],we=F[re],ee=W*J*4*re;for(let ye=0;ye<me.count;ye++){const be=ye*le;S===!0&&(s.fromBufferAttribute(me,ye),H[ee+be+0]=s.x,H[ee+be+1]=s.y,H[ee+be+2]=s.z,H[ee+be+3]=0),C===!0&&(s.fromBufferAttribute(he,ye),H[ee+be+4]=s.x,H[ee+be+5]=s.y,H[ee+be+6]=s.z,H[ee+be+7]=0),A===!0&&(s.fromBufferAttribute(we,ye),H[ee+be+8]=s.x,H[ee+be+9]=s.y,H[ee+be+10]=s.z,H[ee+be+11]=we.itemSize===4?s.w:1)}}w={count:b,texture:Y,size:new Ft(W,J)},o.set(h,w),h.addEventListener("dispose",pe)}if(d.isInstancedMesh===!0&&d.morphTexture!==null)p.getUniforms().setValue(t,"morphTexture",d.morphTexture,n);else{let S=0;for(let A=0;A<g.length;A++)S+=g[A];const C=h.morphTargetsRelative?1:1-S;p.getUniforms().setValue(t,"morphTargetBaseInfluence",C),p.getUniforms().setValue(t,"morphTargetInfluences",g)}p.getUniforms().setValue(t,"morphTargetsTexture",w.texture,n),p.getUniforms().setValue(t,"morphTargetsTextureSize",w.size)}else{const x=g===void 0?0:g.length;let b=r[h.id];if(b===void 0||b.length!==x){b=[];for(let P=0;P<x;P++)b[P]=[P,0];r[h.id]=b}for(let P=0;P<x;P++){const k=b[P];k[0]=P,k[1]=g[P]}b.sort(Nft);for(let P=0;P<8;P++)P<x&&b[P][1]?(a[P][0]=b[P][0],a[P][1]=b[P][1]):(a[P][0]=Number.MAX_SAFE_INTEGER,a[P][1]=0);a.sort(Dft);const w=h.morphAttributes.position,S=h.morphAttributes.normal;let C=0;for(let P=0;P<8;P++){const k=a[P],F=k[0],B=k[1];F!==Number.MAX_SAFE_INTEGER&&B?(w&&h.getAttribute("morphTarget"+P)!==w[F]&&h.setAttribute("morphTarget"+P,w[F]),S&&h.getAttribute("morphNormal"+P)!==S[F]&&h.setAttribute("morphNormal"+P,S[F]),i[P]=B,C+=B):(w&&h.hasAttribute("morphTarget"+P)===!0&&h.deleteAttribute("morphTarget"+P),S&&h.hasAttribute("morphNormal"+P)===!0&&h.deleteAttribute("morphNormal"+P),i[P]=0)}const A=h.morphTargetsRelative?1:1-C;p.getUniforms().setValue(t,"morphTargetBaseInfluence",A),p.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:l}}function Fft(t,e,n,r){let i=new WeakMap;function o(l){const d=r.render.frame,h=l.geometry,p=e.get(l,h);if(i.get(p)!==d&&(e.update(p),i.set(p,d)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==d&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,d))),l.isSkinnedMesh){const g=l.skeleton;i.get(g)!==d&&(g.update(),i.set(g,d))}return p}function s(){i=new WeakMap}function a(l){const d=l.target;d.removeEventListener("dispose",a),n.remove(d.instanceMatrix),d.instanceColor!==null&&n.remove(d.instanceColor)}return{update:o,dispose:s}}class z8 extends _o{constructor(e,n,r,i,o,s,a,l,d,h){if(h=h!==void 0?h:My,h!==My&&h!==Y0)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&h===My&&(r=im),r===void 0&&h===Y0&&(r=Sy),super(null,i,o,s,a,l,h,r,d),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:Xo,this.minFilter=l!==void 0?l:Xo,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const Ade=new _o,Pde=new z8(1,1);Pde.compareFunction=P8;const Ide=new vL,Rde=new O8,kde=new uT,yZ=[],vZ=[],_Z=new Float32Array(16),xZ=new Float32Array(9),bZ=new Float32Array(4);function gw(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=yZ[i];if(o===void 0&&(o=new Float32Array(i),yZ[i]=o),e!==0){r.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=n,t[s].toArray(o,a)}return o}function Us(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Vs(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function _L(t,e){let n=vZ[e];n===void 0&&(n=new Int32Array(e),vZ[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Bft(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function jft(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Us(n,e))return;t.uniform2fv(this.addr,e),Vs(n,e)}}function $ft(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Us(n,e))return;t.uniform3fv(this.addr,e),Vs(n,e)}}function Uft(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Us(n,e))return;t.uniform4fv(this.addr,e),Vs(n,e)}}function Vft(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Us(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Vs(n,e)}else{if(Us(n,r))return;bZ.set(r),t.uniformMatrix2fv(this.addr,!1,bZ),Vs(n,r)}}function Hft(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Us(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Vs(n,e)}else{if(Us(n,r))return;xZ.set(r),t.uniformMatrix3fv(this.addr,!1,xZ),Vs(n,r)}}function Wft(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Us(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Vs(n,e)}else{if(Us(n,r))return;_Z.set(r),t.uniformMatrix4fv(this.addr,!1,_Z),Vs(n,r)}}function Gft(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function qft(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Us(n,e))return;t.uniform2iv(this.addr,e),Vs(n,e)}}function Xft(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Us(n,e))return;t.uniform3iv(this.addr,e),Vs(n,e)}}function Yft(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Us(n,e))return;t.uniform4iv(this.addr,e),Vs(n,e)}}function Kft(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Zft(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Us(n,e))return;t.uniform2uiv(this.addr,e),Vs(n,e)}}function Jft(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Us(n,e))return;t.uniform3uiv(this.addr,e),Vs(n,e)}}function Qft(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Us(n,e))return;t.uniform4uiv(this.addr,e),Vs(n,e)}}function ept(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);const o=this.type===t.SAMPLER_2D_SHADOW?Pde:Ade;n.setTexture2D(e||o,i)}function tpt(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Rde,i)}function npt(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||kde,i)}function rpt(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Ide,i)}function ipt(t){switch(t){case 5126:return Bft;case 35664:return jft;case 35665:return $ft;case 35666:return Uft;case 35674:return Vft;case 35675:return Hft;case 35676:return Wft;case 5124:case 35670:return Gft;case 35667:case 35671:return qft;case 35668:case 35672:return Xft;case 35669:case 35673:return Yft;case 5125:return Kft;case 36294:return Zft;case 36295:return Jft;case 36296:return Qft;case 35678:case 36198:case 36298:case 36306:case 35682:return ept;case 35679:case 36299:case 36307:return tpt;case 35680:case 36300:case 36308:case 36293:return npt;case 36289:case 36303:case 36311:case 36292:return rpt}}function opt(t,e){t.uniform1fv(this.addr,e)}function spt(t,e){const n=gw(e,this.size,2);t.uniform2fv(this.addr,n)}function apt(t,e){const n=gw(e,this.size,3);t.uniform3fv(this.addr,n)}function lpt(t,e){const n=gw(e,this.size,4);t.uniform4fv(this.addr,n)}function cpt(t,e){const n=gw(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function upt(t,e){const n=gw(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function dpt(t,e){const n=gw(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function hpt(t,e){t.uniform1iv(this.addr,e)}function fpt(t,e){t.uniform2iv(this.addr,e)}function ppt(t,e){t.uniform3iv(this.addr,e)}function mpt(t,e){t.uniform4iv(this.addr,e)}function gpt(t,e){t.uniform1uiv(this.addr,e)}function ypt(t,e){t.uniform2uiv(this.addr,e)}function vpt(t,e){t.uniform3uiv(this.addr,e)}function _pt(t,e){t.uniform4uiv(this.addr,e)}function xpt(t,e,n){const r=this.cache,i=e.length,o=_L(n,i);Us(r,o)||(t.uniform1iv(this.addr,o),Vs(r,o));for(let s=0;s!==i;++s)n.setTexture2D(e[s]||Ade,o[s])}function bpt(t,e,n){const r=this.cache,i=e.length,o=_L(n,i);Us(r,o)||(t.uniform1iv(this.addr,o),Vs(r,o));for(let s=0;s!==i;++s)n.setTexture3D(e[s]||Rde,o[s])}function wpt(t,e,n){const r=this.cache,i=e.length,o=_L(n,i);Us(r,o)||(t.uniform1iv(this.addr,o),Vs(r,o));for(let s=0;s!==i;++s)n.setTextureCube(e[s]||kde,o[s])}function Spt(t,e,n){const r=this.cache,i=e.length,o=_L(n,i);Us(r,o)||(t.uniform1iv(this.addr,o),Vs(r,o));for(let s=0;s!==i;++s)n.setTexture2DArray(e[s]||Ide,o[s])}function Mpt(t){switch(t){case 5126:return opt;case 35664:return spt;case 35665:return apt;case 35666:return lpt;case 35674:return cpt;case 35675:return upt;case 35676:return dpt;case 5124:case 35670:return hpt;case 35667:case 35671:return fpt;case 35668:case 35672:return ppt;case 35669:case 35673:return mpt;case 5125:return gpt;case 36294:return ypt;case 36295:return vpt;case 36296:return _pt;case 35678:case 36198:case 36298:case 36306:case 35682:return xpt;case 35679:case 36299:case 36307:return bpt;case 35680:case 36300:case 36308:case 36293:return wpt;case 36289:case 36303:case 36311:case 36292:return Spt}}class Ept{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=ipt(n.type)}}class Tpt{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=Mpt(n.type)}}class Cpt{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let o=0,s=i.length;o!==s;++o){const a=i[o];a.setValue(e,n[a.id],r)}}}const tz=/(\w+)(\])?(\[|\.)?/g;function wZ(t,e){t.seq.push(e),t.map[e.id]=e}function Apt(t,e,n){const r=t.name,i=r.length;for(tz.lastIndex=0;;){const o=tz.exec(r),s=tz.lastIndex;let a=o[1];const l=o[2]==="]",d=o[3];if(l&&(a=a|0),d===void 0||d==="["&&s+2===i){wZ(n,d===void 0?new Ept(a,t,e):new Tpt(a,t,e));break}else{let p=n.map[a];p===void 0&&(p=new Cpt(a),wZ(n,p)),n=p}}}class xP{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const o=e.getActiveUniform(n,i),s=e.getUniformLocation(n,o.name);Apt(o,s,this)}}setValue(e,n,r,i){const o=this.map[n];o!==void 0&&o.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let o=0,s=n.length;o!==s;++o){const a=n[o],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,o=e.length;i!==o;++i){const s=e[i];s.id in n&&r.push(s)}return r}}function SZ(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const Ppt=37297;let Ipt=0;function Rpt(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let s=i;s<o;s++){const a=s+1;r.push(`${a===e?">":" "} ${a}: ${n[s]}`)}return r.join(`
`)}function kpt(t){const e=Di.getPrimaries(Di.workingColorSpace),n=Di.getPrimaries(t);let r;switch(e===n?r="":e===lE&&n===aE?r="LinearDisplayP3ToLinearSRGB":e===aE&&n===lE&&(r="LinearSRGBToLinearDisplayP3"),t){case da:case cT:return[r,"LinearTransferOETF"];case Ra:case yL:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[r,"LinearTransferOETF"]}}function MZ(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const s=parseInt(o[1]);return n.toUpperCase()+`

`+i+`

`+Rpt(t.getShaderSource(e),s)}else return i}function Opt(t,e){const n=kpt(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function Lpt(t,e){let n;switch(e){case Hue:n="Linear";break;case Wue:n="Reinhard";break;case Gue:n="OptimizedCineon";break;case v8:n="ACESFilmic";break;case Xue:n="AgX";break;case Yue:n="Neutral";break;case que:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Dpt(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.alphaToCoverage||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ub).join(`
`)}function Npt(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(ub).join(`
`)}function zpt(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function Fpt(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const o=t.getActiveAttrib(e,i),s=o.name;let a=1;o.type===t.FLOAT_MAT2&&(a=2),o.type===t.FLOAT_MAT3&&(a=3),o.type===t.FLOAT_MAT4&&(a=4),n[s]={type:o.type,location:t.getAttribLocation(e,s),locationSize:a}}return n}function ub(t){return t!==""}function EZ(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function TZ(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Bpt=/^[ \t]*#include +<([\w\d./]+)>/gm;function T5(t){return t.replace(Bpt,$pt)}const jpt=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function $pt(t,e){let n=Dr[e];if(n===void 0){const r=jpt.get(e);if(r!==void 0)n=Dr[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return T5(n)}const Upt=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function CZ(t){return t.replace(Upt,Vpt)}function Vpt(t,e,n,r){let i="";for(let o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function AZ(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	`;return t.isWebGL2&&(e+=`precision ${t.precision} sampler3D;
		precision ${t.precision} sampler2DArray;
		precision ${t.precision} sampler2DShadow;
		precision ${t.precision} samplerCubeShadow;
		precision ${t.precision} sampler2DArrayShadow;
		precision ${t.precision} isampler2D;
		precision ${t.precision} isampler3D;
		precision ${t.precision} isamplerCube;
		precision ${t.precision} isampler2DArray;
		precision ${t.precision} usampler2D;
		precision ${t.precision} usampler3D;
		precision ${t.precision} usamplerCube;
		precision ${t.precision} usampler2DArray;
		`),t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Hpt(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===fL?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===P2?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===dh&&(e="SHADOWMAP_TYPE_VSM"),e}function Wpt(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Cm:case Ly:e="ENVMAP_TYPE_CUBE";break;case pw:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Gpt(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Ly:e="ENVMAP_MODE_REFRACTION";break}return e}function qpt(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case lT:e="ENVMAP_BLENDING_MULTIPLY";break;case Uue:e="ENVMAP_BLENDING_MIX";break;case Vue:e="ENVMAP_BLENDING_ADD";break}return e}function Xpt(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function Ypt(t,e,n,r){const i=t.getContext(),o=n.defines;let s=n.vertexShader,a=n.fragmentShader;const l=Hpt(n),d=Wpt(n),h=Gpt(n),p=qpt(n),g=Xpt(n),v=n.isWebGL2?"":Dpt(n),x=Npt(n),b=zpt(o),w=i.createProgram();let S,C,A=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(S=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b].filter(ub).join(`
`),S.length>0&&(S+=`
`),C=[v,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b].filter(ub).join(`
`),C.length>0&&(C+=`
`)):(S=[AZ(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ub).join(`
`),C=[v,AZ(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.envMap?"#define "+h:"",n.envMap?"#define "+p:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==$f?"#define TONE_MAPPING":"",n.toneMapping!==$f?Dr.tonemapping_pars_fragment:"",n.toneMapping!==$f?Lpt("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Dr.colorspace_pars_fragment,Opt("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(ub).join(`
`)),s=T5(s),s=EZ(s,n),s=TZ(s,n),a=T5(a),a=EZ(a,n),a=TZ(a,n),s=CZ(s),a=CZ(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(A=`#version 300 es
`,S=[x,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,C=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===S5?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===S5?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+C);const P=A+S+s,k=A+C+a,F=SZ(i,i.VERTEX_SHADER,P),B=SZ(i,i.FRAGMENT_SHADER,k);i.attachShader(w,F),i.attachShader(w,B),n.index0AttributeName!==void 0?i.bindAttribLocation(w,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(w,0,"position"),i.linkProgram(w);function W(le){if(t.debug.checkShaderErrors){const pe=i.getProgramInfoLog(w).trim(),re=i.getShaderInfoLog(F).trim(),me=i.getShaderInfoLog(B).trim();let he=!0,we=!0;if(i.getProgramParameter(w,i.LINK_STATUS)===!1)if(he=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,w,F,B);else{const ee=MZ(i,F,"vertex"),ye=MZ(i,B,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(w,i.VALIDATE_STATUS)+`

Material Name: `+le.name+`
Material Type: `+le.type+`

Program Info Log: `+pe+`
`+ee+`
`+ye)}else pe!==""?console.warn("THREE.WebGLProgram: Program Info Log:",pe):(re===""||me==="")&&(we=!1);we&&(le.diagnostics={runnable:he,programLog:pe,vertexShader:{log:re,prefix:S},fragmentShader:{log:me,prefix:C}})}i.deleteShader(F),i.deleteShader(B),J=new xP(i,w),H=Fpt(i,w)}let J;this.getUniforms=function(){return J===void 0&&W(this),J};let H;this.getAttributes=function(){return H===void 0&&W(this),H};let Y=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return Y===!1&&(Y=i.getProgramParameter(w,Ppt)),Y},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(w),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Ipt++,this.cacheKey=e,this.usedTimes=1,this.program=w,this.vertexShader=F,this.fragmentShader=B,this}let Kpt=0;class Zpt{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),o=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new Jpt(e),n.set(e,r)),r}}class Jpt{constructor(e){this.id=Kpt++,this.code=e,this.usedTimes=0}}function Qpt(t,e,n,r,i,o,s){const a=new P0,l=new Zpt,d=new Set,h=[],p=i.isWebGL2,g=i.logarithmicDepthBuffer,v=i.vertexTextures;let x=i.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(H){return d.add(H),H===0?"uv":`uv${H}`}function S(H,Y,le,pe,re){const me=pe.fog,he=re.geometry,we=H.isMeshStandardMaterial?pe.environment:null,ee=(H.isMeshStandardMaterial?n:e).get(H.envMap||we),ye=ee&&ee.mapping===pw?ee.image.height:null,be=b[H.type];H.precision!==null&&(x=i.getMaxPrecision(H.precision),x!==H.precision&&console.warn("THREE.WebGLProgram.getParameters:",H.precision,"not supported, using",x,"instead."));const Le=he.morphAttributes.position||he.morphAttributes.normal||he.morphAttributes.color,je=Le!==void 0?Le.length:0;let dt=0;he.morphAttributes.position!==void 0&&(dt=1),he.morphAttributes.normal!==void 0&&(dt=2),he.morphAttributes.color!==void 0&&(dt=3);let Be,ot,at,It;if(be){const De=_h[be];Be=De.vertexShader,ot=De.fragmentShader}else Be=H.vertexShader,ot=H.fragmentShader,l.update(H),at=l.getVertexShaderID(H),It=l.getFragmentShaderID(H);const Lt=t.getRenderTarget(),lt=re.isInstancedMesh===!0,Je=re.isBatchedMesh===!0,Qe=!!H.map,ge=!!H.matcap,et=!!ee,Ke=!!H.aoMap,Tt=!!H.lightMap,ke=!!H.bumpMap,Vt=!!H.normalMap,zt=!!H.displacementMap,$t=!!H.emissiveMap,Qt=!!H.metalnessMap,Ie=!!H.roughnessMap,Me=H.anisotropy>0,wt=H.clearcoat>0,St=H.iridescence>0,Bt=H.sheen>0,jt=H.transmission>0,Rn=Me&&!!H.anisotropyMap,ft=wt&&!!H.clearcoatMap,Rt=wt&&!!H.clearcoatNormalMap,Xt=wt&&!!H.clearcoatRoughnessMap,Tn=St&&!!H.iridescenceMap,en=St&&!!H.iridescenceThicknessMap,Et=Bt&&!!H.sheenColorMap,qt=Bt&&!!H.sheenRoughnessMap,ht=!!H.specularMap,Ne=!!H.specularColorMap,pt=!!H.specularIntensityMap,Te=jt&&!!H.transmissionMap,xt=jt&&!!H.thicknessMap,tn=!!H.gradientMap,Xe=!!H.alphaMap,Yt=H.alphaTest>0,ve=!!H.alphaHash,ie=!!H.extensions;let se=$f;H.toneMapped&&(Lt===null||Lt.isXRRenderTarget===!0)&&(se=t.toneMapping);const Se={isWebGL2:p,shaderID:be,shaderType:H.type,shaderName:H.name,vertexShader:Be,fragmentShader:ot,defines:H.defines,customVertexShaderID:at,customFragmentShaderID:It,isRawShaderMaterial:H.isRawShaderMaterial===!0,glslVersion:H.glslVersion,precision:x,batching:Je,instancing:lt,instancingColor:lt&&re.instanceColor!==null,instancingMorph:lt&&re.morphTexture!==null,supportsVertexTextures:v,outputColorSpace:Lt===null?t.outputColorSpace:Lt.isXRRenderTarget===!0?Lt.texture.colorSpace:da,alphaToCoverage:!!H.alphaToCoverage,map:Qe,matcap:ge,envMap:et,envMapMode:et&&ee.mapping,envMapCubeUVHeight:ye,aoMap:Ke,lightMap:Tt,bumpMap:ke,normalMap:Vt,displacementMap:v&&zt,emissiveMap:$t,normalMapObjectSpace:Vt&&H.normalMapType===ude,normalMapTangentSpace:Vt&&H.normalMapType===Yy,metalnessMap:Qt,roughnessMap:Ie,anisotropy:Me,anisotropyMap:Rn,clearcoat:wt,clearcoatMap:ft,clearcoatNormalMap:Rt,clearcoatRoughnessMap:Xt,iridescence:St,iridescenceMap:Tn,iridescenceThicknessMap:en,sheen:Bt,sheenColorMap:Et,sheenRoughnessMap:qt,specularMap:ht,specularColorMap:Ne,specularIntensityMap:pt,transmission:jt,transmissionMap:Te,thicknessMap:xt,gradientMap:tn,opaque:H.transparent===!1&&H.blending===C0&&H.alphaToCoverage===!1,alphaMap:Xe,alphaTest:Yt,alphaHash:ve,combine:H.combine,mapUv:Qe&&w(H.map.channel),aoMapUv:Ke&&w(H.aoMap.channel),lightMapUv:Tt&&w(H.lightMap.channel),bumpMapUv:ke&&w(H.bumpMap.channel),normalMapUv:Vt&&w(H.normalMap.channel),displacementMapUv:zt&&w(H.displacementMap.channel),emissiveMapUv:$t&&w(H.emissiveMap.channel),metalnessMapUv:Qt&&w(H.metalnessMap.channel),roughnessMapUv:Ie&&w(H.roughnessMap.channel),anisotropyMapUv:Rn&&w(H.anisotropyMap.channel),clearcoatMapUv:ft&&w(H.clearcoatMap.channel),clearcoatNormalMapUv:Rt&&w(H.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Xt&&w(H.clearcoatRoughnessMap.channel),iridescenceMapUv:Tn&&w(H.iridescenceMap.channel),iridescenceThicknessMapUv:en&&w(H.iridescenceThicknessMap.channel),sheenColorMapUv:Et&&w(H.sheenColorMap.channel),sheenRoughnessMapUv:qt&&w(H.sheenRoughnessMap.channel),specularMapUv:ht&&w(H.specularMap.channel),specularColorMapUv:Ne&&w(H.specularColorMap.channel),specularIntensityMapUv:pt&&w(H.specularIntensityMap.channel),transmissionMapUv:Te&&w(H.transmissionMap.channel),thicknessMapUv:xt&&w(H.thicknessMap.channel),alphaMapUv:Xe&&w(H.alphaMap.channel),vertexTangents:!!he.attributes.tangent&&(Vt||Me),vertexColors:H.vertexColors,vertexAlphas:H.vertexColors===!0&&!!he.attributes.color&&he.attributes.color.itemSize===4,pointsUvs:re.isPoints===!0&&!!he.attributes.uv&&(Qe||Xe),fog:!!me,useFog:H.fog===!0,fogExp2:!!me&&me.isFogExp2,flatShading:H.flatShading===!0,sizeAttenuation:H.sizeAttenuation===!0,logarithmicDepthBuffer:g,skinning:re.isSkinnedMesh===!0,morphTargets:he.morphAttributes.position!==void 0,morphNormals:he.morphAttributes.normal!==void 0,morphColors:he.morphAttributes.color!==void 0,morphTargetsCount:je,morphTextureStride:dt,numDirLights:Y.directional.length,numPointLights:Y.point.length,numSpotLights:Y.spot.length,numSpotLightMaps:Y.spotLightMap.length,numRectAreaLights:Y.rectArea.length,numHemiLights:Y.hemi.length,numDirLightShadows:Y.directionalShadowMap.length,numPointLightShadows:Y.pointShadowMap.length,numSpotLightShadows:Y.spotShadowMap.length,numSpotLightShadowsWithMaps:Y.numSpotLightShadowsWithMaps,numLightProbes:Y.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:H.dithering,shadowMapEnabled:t.shadowMap.enabled&&le.length>0,shadowMapType:t.shadowMap.type,toneMapping:se,useLegacyLights:t._useLegacyLights,decodeVideoTexture:Qe&&H.map.isVideoTexture===!0&&Di.getTransfer(H.map.colorSpace)===no,premultipliedAlpha:H.premultipliedAlpha,doubleSided:H.side===pd,flipSided:H.side===Kl,useDepthPacking:H.depthPacking>=0,depthPacking:H.depthPacking||0,index0AttributeName:H.index0AttributeName,extensionDerivatives:ie&&H.extensions.derivatives===!0,extensionFragDepth:ie&&H.extensions.fragDepth===!0,extensionDrawBuffers:ie&&H.extensions.drawBuffers===!0,extensionShaderTextureLOD:ie&&H.extensions.shaderTextureLOD===!0,extensionClipCullDistance:ie&&H.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:ie&&H.extensions.multiDraw===!0&&r.has("WEBGL_multi_draw"),rendererExtensionFragDepth:p||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:p||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:p||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:H.customProgramCacheKey()};return Se.vertexUv1s=d.has(1),Se.vertexUv2s=d.has(2),Se.vertexUv3s=d.has(3),d.clear(),Se}function C(H){const Y=[];if(H.shaderID?Y.push(H.shaderID):(Y.push(H.customVertexShaderID),Y.push(H.customFragmentShaderID)),H.defines!==void 0)for(const le in H.defines)Y.push(le),Y.push(H.defines[le]);return H.isRawShaderMaterial===!1&&(A(Y,H),P(Y,H),Y.push(t.outputColorSpace)),Y.push(H.customProgramCacheKey),Y.join()}function A(H,Y){H.push(Y.precision),H.push(Y.outputColorSpace),H.push(Y.envMapMode),H.push(Y.envMapCubeUVHeight),H.push(Y.mapUv),H.push(Y.alphaMapUv),H.push(Y.lightMapUv),H.push(Y.aoMapUv),H.push(Y.bumpMapUv),H.push(Y.normalMapUv),H.push(Y.displacementMapUv),H.push(Y.emissiveMapUv),H.push(Y.metalnessMapUv),H.push(Y.roughnessMapUv),H.push(Y.anisotropyMapUv),H.push(Y.clearcoatMapUv),H.push(Y.clearcoatNormalMapUv),H.push(Y.clearcoatRoughnessMapUv),H.push(Y.iridescenceMapUv),H.push(Y.iridescenceThicknessMapUv),H.push(Y.sheenColorMapUv),H.push(Y.sheenRoughnessMapUv),H.push(Y.specularMapUv),H.push(Y.specularColorMapUv),H.push(Y.specularIntensityMapUv),H.push(Y.transmissionMapUv),H.push(Y.thicknessMapUv),H.push(Y.combine),H.push(Y.fogExp2),H.push(Y.sizeAttenuation),H.push(Y.morphTargetsCount),H.push(Y.morphAttributeCount),H.push(Y.numDirLights),H.push(Y.numPointLights),H.push(Y.numSpotLights),H.push(Y.numSpotLightMaps),H.push(Y.numHemiLights),H.push(Y.numRectAreaLights),H.push(Y.numDirLightShadows),H.push(Y.numPointLightShadows),H.push(Y.numSpotLightShadows),H.push(Y.numSpotLightShadowsWithMaps),H.push(Y.numLightProbes),H.push(Y.shadowMapType),H.push(Y.toneMapping),H.push(Y.numClippingPlanes),H.push(Y.numClipIntersection),H.push(Y.depthPacking)}function P(H,Y){a.disableAll(),Y.isWebGL2&&a.enable(0),Y.supportsVertexTextures&&a.enable(1),Y.instancing&&a.enable(2),Y.instancingColor&&a.enable(3),Y.instancingMorph&&a.enable(4),Y.matcap&&a.enable(5),Y.envMap&&a.enable(6),Y.normalMapObjectSpace&&a.enable(7),Y.normalMapTangentSpace&&a.enable(8),Y.clearcoat&&a.enable(9),Y.iridescence&&a.enable(10),Y.alphaTest&&a.enable(11),Y.vertexColors&&a.enable(12),Y.vertexAlphas&&a.enable(13),Y.vertexUv1s&&a.enable(14),Y.vertexUv2s&&a.enable(15),Y.vertexUv3s&&a.enable(16),Y.vertexTangents&&a.enable(17),Y.anisotropy&&a.enable(18),Y.alphaHash&&a.enable(19),Y.batching&&a.enable(20),H.push(a.mask),a.disableAll(),Y.fog&&a.enable(0),Y.useFog&&a.enable(1),Y.flatShading&&a.enable(2),Y.logarithmicDepthBuffer&&a.enable(3),Y.skinning&&a.enable(4),Y.morphTargets&&a.enable(5),Y.morphNormals&&a.enable(6),Y.morphColors&&a.enable(7),Y.premultipliedAlpha&&a.enable(8),Y.shadowMapEnabled&&a.enable(9),Y.useLegacyLights&&a.enable(10),Y.doubleSided&&a.enable(11),Y.flipSided&&a.enable(12),Y.useDepthPacking&&a.enable(13),Y.dithering&&a.enable(14),Y.transmission&&a.enable(15),Y.sheen&&a.enable(16),Y.opaque&&a.enable(17),Y.pointsUvs&&a.enable(18),Y.decodeVideoTexture&&a.enable(19),Y.alphaToCoverage&&a.enable(20),H.push(a.mask)}function k(H){const Y=b[H.type];let le;if(Y){const pe=_h[Y];le=Mde.clone(pe.uniforms)}else le=H.uniforms;return le}function F(H,Y){let le;for(let pe=0,re=h.length;pe<re;pe++){const me=h[pe];if(me.cacheKey===Y){le=me,++le.usedTimes;break}}return le===void 0&&(le=new Ypt(t,Y,H,o),h.push(le)),le}function B(H){if(--H.usedTimes===0){const Y=h.indexOf(H);h[Y]=h[h.length-1],h.pop(),H.destroy()}}function W(H){l.remove(H)}function J(){l.dispose()}return{getParameters:S,getProgramCacheKey:C,getUniforms:k,acquireProgram:F,releaseProgram:B,releaseShaderCache:W,programs:h,dispose:J}}function emt(){let t=new WeakMap;function e(o){let s=t.get(o);return s===void 0&&(s={},t.set(o,s)),s}function n(o){t.delete(o)}function r(o,s,a){t.get(o)[s]=a}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function tmt(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function PZ(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function IZ(){const t=[];let e=0;const n=[],r=[],i=[];function o(){e=0,n.length=0,r.length=0,i.length=0}function s(p,g,v,x,b,w){let S=t[e];return S===void 0?(S={id:p.id,object:p,geometry:g,material:v,groupOrder:x,renderOrder:p.renderOrder,z:b,group:w},t[e]=S):(S.id=p.id,S.object=p,S.geometry=g,S.material=v,S.groupOrder=x,S.renderOrder=p.renderOrder,S.z=b,S.group=w),e++,S}function a(p,g,v,x,b,w){const S=s(p,g,v,x,b,w);v.transmission>0?r.push(S):v.transparent===!0?i.push(S):n.push(S)}function l(p,g,v,x,b,w){const S=s(p,g,v,x,b,w);v.transmission>0?r.unshift(S):v.transparent===!0?i.unshift(S):n.unshift(S)}function d(p,g){n.length>1&&n.sort(p||tmt),r.length>1&&r.sort(g||PZ),i.length>1&&i.sort(g||PZ)}function h(){for(let p=e,g=t.length;p<g;p++){const v=t[p];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:n,transmissive:r,transparent:i,init:o,push:a,unshift:l,finish:h,sort:d}}function nmt(){let t=new WeakMap;function e(r,i){const o=t.get(r);let s;return o===void 0?(s=new IZ,t.set(r,[s])):i>=o.length?(s=new IZ,o.push(s)):s=o[i],s}function n(){t=new WeakMap}return{get:e,dispose:n}}function rmt(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Oe,color:new In};break;case"SpotLight":n={position:new Oe,direction:new Oe,color:new In,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Oe,color:new In,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Oe,skyColor:new In,groundColor:new In};break;case"RectAreaLight":n={color:new In,position:new Oe,halfWidth:new Oe,halfHeight:new Oe};break}return t[e.id]=n,n}}}function imt(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ft};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ft};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ft,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let omt=0;function smt(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function amt(t,e){const n=new rmt,r=imt(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)i.probe.push(new Oe);const o=new Oe,s=new Yn,a=new Yn;function l(h,p){let g=0,v=0,x=0;for(let le=0;le<9;le++)i.probe[le].set(0,0,0);let b=0,w=0,S=0,C=0,A=0,P=0,k=0,F=0,B=0,W=0,J=0;h.sort(smt);const H=p===!0?Math.PI:1;for(let le=0,pe=h.length;le<pe;le++){const re=h[le],me=re.color,he=re.intensity,we=re.distance,ee=re.shadow&&re.shadow.map?re.shadow.map.texture:null;if(re.isAmbientLight)g+=me.r*he*H,v+=me.g*he*H,x+=me.b*he*H;else if(re.isLightProbe){for(let ye=0;ye<9;ye++)i.probe[ye].addScaledVector(re.sh.coefficients[ye],he);J++}else if(re.isDirectionalLight){const ye=n.get(re);if(ye.color.copy(re.color).multiplyScalar(re.intensity*H),re.castShadow){const be=re.shadow,Le=r.get(re);Le.shadowBias=be.bias,Le.shadowNormalBias=be.normalBias,Le.shadowRadius=be.radius,Le.shadowMapSize=be.mapSize,i.directionalShadow[b]=Le,i.directionalShadowMap[b]=ee,i.directionalShadowMatrix[b]=re.shadow.matrix,P++}i.directional[b]=ye,b++}else if(re.isSpotLight){const ye=n.get(re);ye.position.setFromMatrixPosition(re.matrixWorld),ye.color.copy(me).multiplyScalar(he*H),ye.distance=we,ye.coneCos=Math.cos(re.angle),ye.penumbraCos=Math.cos(re.angle*(1-re.penumbra)),ye.decay=re.decay,i.spot[S]=ye;const be=re.shadow;if(re.map&&(i.spotLightMap[B]=re.map,B++,be.updateMatrices(re),re.castShadow&&W++),i.spotLightMatrix[S]=be.matrix,re.castShadow){const Le=r.get(re);Le.shadowBias=be.bias,Le.shadowNormalBias=be.normalBias,Le.shadowRadius=be.radius,Le.shadowMapSize=be.mapSize,i.spotShadow[S]=Le,i.spotShadowMap[S]=ee,F++}S++}else if(re.isRectAreaLight){const ye=n.get(re);ye.color.copy(me).multiplyScalar(he),ye.halfWidth.set(re.width*.5,0,0),ye.halfHeight.set(0,re.height*.5,0),i.rectArea[C]=ye,C++}else if(re.isPointLight){const ye=n.get(re);if(ye.color.copy(re.color).multiplyScalar(re.intensity*H),ye.distance=re.distance,ye.decay=re.decay,re.castShadow){const be=re.shadow,Le=r.get(re);Le.shadowBias=be.bias,Le.shadowNormalBias=be.normalBias,Le.shadowRadius=be.radius,Le.shadowMapSize=be.mapSize,Le.shadowCameraNear=be.camera.near,Le.shadowCameraFar=be.camera.far,i.pointShadow[w]=Le,i.pointShadowMap[w]=ee,i.pointShadowMatrix[w]=re.shadow.matrix,k++}i.point[w]=ye,w++}else if(re.isHemisphereLight){const ye=n.get(re);ye.skyColor.copy(re.color).multiplyScalar(he*H),ye.groundColor.copy(re.groundColor).multiplyScalar(he*H),i.hemi[A]=ye,A++}}C>0&&(e.isWebGL2?t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=En.LTC_FLOAT_1,i.rectAreaLTC2=En.LTC_FLOAT_2):(i.rectAreaLTC1=En.LTC_HALF_1,i.rectAreaLTC2=En.LTC_HALF_2):t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=En.LTC_FLOAT_1,i.rectAreaLTC2=En.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=En.LTC_HALF_1,i.rectAreaLTC2=En.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=g,i.ambient[1]=v,i.ambient[2]=x;const Y=i.hash;(Y.directionalLength!==b||Y.pointLength!==w||Y.spotLength!==S||Y.rectAreaLength!==C||Y.hemiLength!==A||Y.numDirectionalShadows!==P||Y.numPointShadows!==k||Y.numSpotShadows!==F||Y.numSpotMaps!==B||Y.numLightProbes!==J)&&(i.directional.length=b,i.spot.length=S,i.rectArea.length=C,i.point.length=w,i.hemi.length=A,i.directionalShadow.length=P,i.directionalShadowMap.length=P,i.pointShadow.length=k,i.pointShadowMap.length=k,i.spotShadow.length=F,i.spotShadowMap.length=F,i.directionalShadowMatrix.length=P,i.pointShadowMatrix.length=k,i.spotLightMatrix.length=F+B-W,i.spotLightMap.length=B,i.numSpotLightShadowsWithMaps=W,i.numLightProbes=J,Y.directionalLength=b,Y.pointLength=w,Y.spotLength=S,Y.rectAreaLength=C,Y.hemiLength=A,Y.numDirectionalShadows=P,Y.numPointShadows=k,Y.numSpotShadows=F,Y.numSpotMaps=B,Y.numLightProbes=J,i.version=omt++)}function d(h,p){let g=0,v=0,x=0,b=0,w=0;const S=p.matrixWorldInverse;for(let C=0,A=h.length;C<A;C++){const P=h[C];if(P.isDirectionalLight){const k=i.directional[g];k.direction.setFromMatrixPosition(P.matrixWorld),o.setFromMatrixPosition(P.target.matrixWorld),k.direction.sub(o),k.direction.transformDirection(S),g++}else if(P.isSpotLight){const k=i.spot[x];k.position.setFromMatrixPosition(P.matrixWorld),k.position.applyMatrix4(S),k.direction.setFromMatrixPosition(P.matrixWorld),o.setFromMatrixPosition(P.target.matrixWorld),k.direction.sub(o),k.direction.transformDirection(S),x++}else if(P.isRectAreaLight){const k=i.rectArea[b];k.position.setFromMatrixPosition(P.matrixWorld),k.position.applyMatrix4(S),a.identity(),s.copy(P.matrixWorld),s.premultiply(S),a.extractRotation(s),k.halfWidth.set(P.width*.5,0,0),k.halfHeight.set(0,P.height*.5,0),k.halfWidth.applyMatrix4(a),k.halfHeight.applyMatrix4(a),b++}else if(P.isPointLight){const k=i.point[v];k.position.setFromMatrixPosition(P.matrixWorld),k.position.applyMatrix4(S),v++}else if(P.isHemisphereLight){const k=i.hemi[w];k.direction.setFromMatrixPosition(P.matrixWorld),k.direction.transformDirection(S),w++}}}return{setup:l,setupView:d,state:i}}function RZ(t,e){const n=new amt(t,e),r=[],i=[];function o(){r.length=0,i.length=0}function s(p){r.push(p)}function a(p){i.push(p)}function l(p){n.setup(r,p)}function d(p){n.setupView(r,p)}return{init:o,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:l,setupLightsView:d,pushLight:s,pushShadow:a}}function lmt(t,e){let n=new WeakMap;function r(o,s=0){const a=n.get(o);let l;return a===void 0?(l=new RZ(t,e),n.set(o,[l])):s>=a.length?(l=new RZ(t,e),a.push(l)):l=a[s],l}function i(){n=new WeakMap}return{get:r,dispose:i}}class F8 extends Cs{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=lde,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class B8 extends Cs{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const cmt=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,umt=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function dmt(t,e,n){let r=new dT;const i=new Ft,o=new Ft,s=new Ui,a=new F8({depthPacking:cde}),l=new B8,d={},h=n.maxTextureSize,p={[Yf]:Kl,[Kl]:Yf,[pd]:pd},g=new Oh({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ft},radius:{value:4}},vertexShader:cmt,fragmentShader:umt}),v=g.clone();v.defines.HORIZONTAL_PASS=1;const x=new Pr;x.setAttribute("position",new Ni(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new ds(x,g),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=fL;let S=this.type;this.render=function(F,B,W){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||F.length===0)return;const J=t.getRenderTarget(),H=t.getActiveCubeFace(),Y=t.getActiveMipmapLevel(),le=t.state;le.setBlending(fm),le.buffers.color.setClear(1,1,1,1),le.buffers.depth.setTest(!0),le.setScissorTest(!1);const pe=S!==dh&&this.type===dh,re=S===dh&&this.type!==dh;for(let me=0,he=F.length;me<he;me++){const we=F[me],ee=we.shadow;if(ee===void 0){console.warn("THREE.WebGLShadowMap:",we,"has no shadow.");continue}if(ee.autoUpdate===!1&&ee.needsUpdate===!1)continue;i.copy(ee.mapSize);const ye=ee.getFrameExtents();if(i.multiply(ye),o.copy(ee.mapSize),(i.x>h||i.y>h)&&(i.x>h&&(o.x=Math.floor(h/ye.x),i.x=o.x*ye.x,ee.mapSize.x=o.x),i.y>h&&(o.y=Math.floor(h/ye.y),i.y=o.y*ye.y,ee.mapSize.y=o.y)),ee.map===null||pe===!0||re===!0){const Le=this.type!==dh?{minFilter:Xo,magFilter:Xo}:{};ee.map!==null&&ee.map.dispose(),ee.map=new kh(i.x,i.y,Le),ee.map.texture.name=we.name+".shadowMap",ee.camera.updateProjectionMatrix()}t.setRenderTarget(ee.map),t.clear();const be=ee.getViewportCount();for(let Le=0;Le<be;Le++){const je=ee.getViewport(Le);s.set(o.x*je.x,o.y*je.y,o.x*je.z,o.y*je.w),le.viewport(s),ee.updateMatrices(we,Le),r=ee.getFrustum(),P(B,W,ee.camera,we,this.type)}ee.isPointLightShadow!==!0&&this.type===dh&&C(ee,W),ee.needsUpdate=!1}S=this.type,w.needsUpdate=!1,t.setRenderTarget(J,H,Y)};function C(F,B){const W=e.update(b);g.defines.VSM_SAMPLES!==F.blurSamples&&(g.defines.VSM_SAMPLES=F.blurSamples,v.defines.VSM_SAMPLES=F.blurSamples,g.needsUpdate=!0,v.needsUpdate=!0),F.mapPass===null&&(F.mapPass=new kh(i.x,i.y)),g.uniforms.shadow_pass.value=F.map.texture,g.uniforms.resolution.value=F.mapSize,g.uniforms.radius.value=F.radius,t.setRenderTarget(F.mapPass),t.clear(),t.renderBufferDirect(B,null,W,g,b,null),v.uniforms.shadow_pass.value=F.mapPass.texture,v.uniforms.resolution.value=F.mapSize,v.uniforms.radius.value=F.radius,t.setRenderTarget(F.map),t.clear(),t.renderBufferDirect(B,null,W,v,b,null)}function A(F,B,W,J){let H=null;const Y=W.isPointLight===!0?F.customDistanceMaterial:F.customDepthMaterial;if(Y!==void 0)H=Y;else if(H=W.isPointLight===!0?l:a,t.localClippingEnabled&&B.clipShadows===!0&&Array.isArray(B.clippingPlanes)&&B.clippingPlanes.length!==0||B.displacementMap&&B.displacementScale!==0||B.alphaMap&&B.alphaTest>0||B.map&&B.alphaTest>0){const le=H.uuid,pe=B.uuid;let re=d[le];re===void 0&&(re={},d[le]=re);let me=re[pe];me===void 0&&(me=H.clone(),re[pe]=me,B.addEventListener("dispose",k)),H=me}if(H.visible=B.visible,H.wireframe=B.wireframe,J===dh?H.side=B.shadowSide!==null?B.shadowSide:B.side:H.side=B.shadowSide!==null?B.shadowSide:p[B.side],H.alphaMap=B.alphaMap,H.alphaTest=B.alphaTest,H.map=B.map,H.clipShadows=B.clipShadows,H.clippingPlanes=B.clippingPlanes,H.clipIntersection=B.clipIntersection,H.displacementMap=B.displacementMap,H.displacementScale=B.displacementScale,H.displacementBias=B.displacementBias,H.wireframeLinewidth=B.wireframeLinewidth,H.linewidth=B.linewidth,W.isPointLight===!0&&H.isMeshDistanceMaterial===!0){const le=t.properties.get(H);le.light=W}return H}function P(F,B,W,J,H){if(F.visible===!1)return;if(F.layers.test(B.layers)&&(F.isMesh||F.isLine||F.isPoints)&&(F.castShadow||F.receiveShadow&&H===dh)&&(!F.frustumCulled||r.intersectsObject(F))){F.modelViewMatrix.multiplyMatrices(W.matrixWorldInverse,F.matrixWorld);const pe=e.update(F),re=F.material;if(Array.isArray(re)){const me=pe.groups;for(let he=0,we=me.length;he<we;he++){const ee=me[he],ye=re[ee.materialIndex];if(ye&&ye.visible){const be=A(F,ye,J,H);F.onBeforeShadow(t,F,B,W,pe,be,ee),t.renderBufferDirect(W,null,pe,be,F,ee),F.onAfterShadow(t,F,B,W,pe,be,ee)}}}else if(re.visible){const me=A(F,re,J,H);F.onBeforeShadow(t,F,B,W,pe,me,null),t.renderBufferDirect(W,null,pe,me,F,null),F.onAfterShadow(t,F,B,W,pe,me,null)}}const le=F.children;for(let pe=0,re=le.length;pe<re;pe++)P(le[pe],B,W,J,H)}function k(F){F.target.removeEventListener("dispose",k);for(const W in d){const J=d[W],H=F.target.uuid;H in J&&(J[H].dispose(),delete J[H])}}}function hmt(t,e,n){const r=n.isWebGL2;function i(){let Xe=!1;const Yt=new Ui;let ve=null;const ie=new Ui(0,0,0,0);return{setMask:function(se){ve!==se&&!Xe&&(t.colorMask(se,se,se,se),ve=se)},setLocked:function(se){Xe=se},setClear:function(se,Se,De,We,Ze){Ze===!0&&(se*=We,Se*=We,De*=We),Yt.set(se,Se,De,We),ie.equals(Yt)===!1&&(t.clearColor(se,Se,De,We),ie.copy(Yt))},reset:function(){Xe=!1,ve=null,ie.set(-1,0,0,0)}}}function o(){let Xe=!1,Yt=null,ve=null,ie=null;return{setTest:function(se){se?lt(t.DEPTH_TEST):Je(t.DEPTH_TEST)},setMask:function(se){Yt!==se&&!Xe&&(t.depthMask(se),Yt=se)},setFunc:function(se){if(ve!==se){switch(se){case Due:t.depthFunc(t.NEVER);break;case Nue:t.depthFunc(t.ALWAYS);break;case zue:t.depthFunc(t.LESS);break;case tE:t.depthFunc(t.LEQUAL);break;case Fue:t.depthFunc(t.EQUAL);break;case Bue:t.depthFunc(t.GEQUAL);break;case jue:t.depthFunc(t.GREATER);break;case $ue:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}ve=se}},setLocked:function(se){Xe=se},setClear:function(se){ie!==se&&(t.clearDepth(se),ie=se)},reset:function(){Xe=!1,Yt=null,ve=null,ie=null}}}function s(){let Xe=!1,Yt=null,ve=null,ie=null,se=null,Se=null,De=null,We=null,Ze=null;return{setTest:function(tt){Xe||(tt?lt(t.STENCIL_TEST):Je(t.STENCIL_TEST))},setMask:function(tt){Yt!==tt&&!Xe&&(t.stencilMask(tt),Yt=tt)},setFunc:function(tt,Ve,At){(ve!==tt||ie!==Ve||se!==At)&&(t.stencilFunc(tt,Ve,At),ve=tt,ie=Ve,se=At)},setOp:function(tt,Ve,At){(Se!==tt||De!==Ve||We!==At)&&(t.stencilOp(tt,Ve,At),Se=tt,De=Ve,We=At)},setLocked:function(tt){Xe=tt},setClear:function(tt){Ze!==tt&&(t.clearStencil(tt),Ze=tt)},reset:function(){Xe=!1,Yt=null,ve=null,ie=null,se=null,Se=null,De=null,We=null,Ze=null}}}const a=new i,l=new o,d=new s,h=new WeakMap,p=new WeakMap;let g={},v={},x=new WeakMap,b=[],w=null,S=!1,C=null,A=null,P=null,k=null,F=null,B=null,W=null,J=new In(0,0,0),H=0,Y=!1,le=null,pe=null,re=null,me=null,he=null;const we=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ee=!1,ye=0;const be=t.getParameter(t.VERSION);be.indexOf("WebGL")!==-1?(ye=parseFloat(/^WebGL (\d)/.exec(be)[1]),ee=ye>=1):be.indexOf("OpenGL ES")!==-1&&(ye=parseFloat(/^OpenGL ES (\d)/.exec(be)[1]),ee=ye>=2);let Le=null,je={};const dt=t.getParameter(t.SCISSOR_BOX),Be=t.getParameter(t.VIEWPORT),ot=new Ui().fromArray(dt),at=new Ui().fromArray(Be);function It(Xe,Yt,ve,ie){const se=new Uint8Array(4),Se=t.createTexture();t.bindTexture(Xe,Se),t.texParameteri(Xe,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Xe,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let De=0;De<ve;De++)r&&(Xe===t.TEXTURE_3D||Xe===t.TEXTURE_2D_ARRAY)?t.texImage3D(Yt,0,t.RGBA,1,1,ie,0,t.RGBA,t.UNSIGNED_BYTE,se):t.texImage2D(Yt+De,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,se);return Se}const Lt={};Lt[t.TEXTURE_2D]=It(t.TEXTURE_2D,t.TEXTURE_2D,1),Lt[t.TEXTURE_CUBE_MAP]=It(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(Lt[t.TEXTURE_2D_ARRAY]=It(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),Lt[t.TEXTURE_3D]=It(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),d.setClear(0),lt(t.DEPTH_TEST),l.setFunc(tE),zt(!1),$t(H4),lt(t.CULL_FACE),ke(fm);function lt(Xe){g[Xe]!==!0&&(t.enable(Xe),g[Xe]=!0)}function Je(Xe){g[Xe]!==!1&&(t.disable(Xe),g[Xe]=!1)}function Qe(Xe,Yt){return v[Xe]!==Yt?(t.bindFramebuffer(Xe,Yt),v[Xe]=Yt,r&&(Xe===t.DRAW_FRAMEBUFFER&&(v[t.FRAMEBUFFER]=Yt),Xe===t.FRAMEBUFFER&&(v[t.DRAW_FRAMEBUFFER]=Yt)),!0):!1}function ge(Xe,Yt){let ve=b,ie=!1;if(Xe){ve=x.get(Yt),ve===void 0&&(ve=[],x.set(Yt,ve));const se=Xe.textures;if(ve.length!==se.length||ve[0]!==t.COLOR_ATTACHMENT0){for(let Se=0,De=se.length;Se<De;Se++)ve[Se]=t.COLOR_ATTACHMENT0+Se;ve.length=se.length,ie=!0}}else ve[0]!==t.BACK&&(ve[0]=t.BACK,ie=!0);if(ie)if(n.isWebGL2)t.drawBuffers(ve);else if(e.has("WEBGL_draw_buffers")===!0)e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ve);else throw new Error("THREE.WebGLState: Usage of gl.drawBuffers() require WebGL2 or WEBGL_draw_buffers extension")}function et(Xe){return w!==Xe?(t.useProgram(Xe),w=Xe,!0):!1}const Ke={[Zg]:t.FUNC_ADD,[xue]:t.FUNC_SUBTRACT,[bue]:t.FUNC_REVERSE_SUBTRACT};if(r)Ke[X4]=t.MIN,Ke[Y4]=t.MAX;else{const Xe=e.get("EXT_blend_minmax");Xe!==null&&(Ke[X4]=Xe.MIN_EXT,Ke[Y4]=Xe.MAX_EXT)}const Tt={[wue]:t.ZERO,[Sue]:t.ONE,[Mue]:t.SRC_COLOR,[_R]:t.SRC_ALPHA,[Iue]:t.SRC_ALPHA_SATURATE,[Aue]:t.DST_COLOR,[Tue]:t.DST_ALPHA,[Eue]:t.ONE_MINUS_SRC_COLOR,[xR]:t.ONE_MINUS_SRC_ALPHA,[Pue]:t.ONE_MINUS_DST_COLOR,[Cue]:t.ONE_MINUS_DST_ALPHA,[Rue]:t.CONSTANT_COLOR,[kue]:t.ONE_MINUS_CONSTANT_COLOR,[Oue]:t.CONSTANT_ALPHA,[Lue]:t.ONE_MINUS_CONSTANT_ALPHA};function ke(Xe,Yt,ve,ie,se,Se,De,We,Ze,tt){if(Xe===fm){S===!0&&(Je(t.BLEND),S=!1);return}if(S===!1&&(lt(t.BLEND),S=!0),Xe!==_ue){if(Xe!==C||tt!==Y){if((A!==Zg||F!==Zg)&&(t.blendEquation(t.FUNC_ADD),A=Zg,F=Zg),tt)switch(Xe){case C0:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case W4:t.blendFunc(t.ONE,t.ONE);break;case G4:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case q4:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Xe);break}else switch(Xe){case C0:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case W4:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case G4:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case q4:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Xe);break}P=null,k=null,B=null,W=null,J.set(0,0,0),H=0,C=Xe,Y=tt}return}se=se||Yt,Se=Se||ve,De=De||ie,(Yt!==A||se!==F)&&(t.blendEquationSeparate(Ke[Yt],Ke[se]),A=Yt,F=se),(ve!==P||ie!==k||Se!==B||De!==W)&&(t.blendFuncSeparate(Tt[ve],Tt[ie],Tt[Se],Tt[De]),P=ve,k=ie,B=Se,W=De),(We.equals(J)===!1||Ze!==H)&&(t.blendColor(We.r,We.g,We.b,Ze),J.copy(We),H=Ze),C=Xe,Y=!1}function Vt(Xe,Yt){Xe.side===pd?Je(t.CULL_FACE):lt(t.CULL_FACE);let ve=Xe.side===Kl;Yt&&(ve=!ve),zt(ve),Xe.blending===C0&&Xe.transparent===!1?ke(fm):ke(Xe.blending,Xe.blendEquation,Xe.blendSrc,Xe.blendDst,Xe.blendEquationAlpha,Xe.blendSrcAlpha,Xe.blendDstAlpha,Xe.blendColor,Xe.blendAlpha,Xe.premultipliedAlpha),l.setFunc(Xe.depthFunc),l.setTest(Xe.depthTest),l.setMask(Xe.depthWrite),a.setMask(Xe.colorWrite);const ie=Xe.stencilWrite;d.setTest(ie),ie&&(d.setMask(Xe.stencilWriteMask),d.setFunc(Xe.stencilFunc,Xe.stencilRef,Xe.stencilFuncMask),d.setOp(Xe.stencilFail,Xe.stencilZFail,Xe.stencilZPass)),Ie(Xe.polygonOffset,Xe.polygonOffsetFactor,Xe.polygonOffsetUnits),Xe.alphaToCoverage===!0?lt(t.SAMPLE_ALPHA_TO_COVERAGE):Je(t.SAMPLE_ALPHA_TO_COVERAGE)}function zt(Xe){le!==Xe&&(Xe?t.frontFace(t.CW):t.frontFace(t.CCW),le=Xe)}function $t(Xe){Xe!==gue?(lt(t.CULL_FACE),Xe!==pe&&(Xe===H4?t.cullFace(t.BACK):Xe===yue?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Je(t.CULL_FACE),pe=Xe}function Qt(Xe){Xe!==re&&(ee&&t.lineWidth(Xe),re=Xe)}function Ie(Xe,Yt,ve){Xe?(lt(t.POLYGON_OFFSET_FILL),(me!==Yt||he!==ve)&&(t.polygonOffset(Yt,ve),me=Yt,he=ve)):Je(t.POLYGON_OFFSET_FILL)}function Me(Xe){Xe?lt(t.SCISSOR_TEST):Je(t.SCISSOR_TEST)}function wt(Xe){Xe===void 0&&(Xe=t.TEXTURE0+we-1),Le!==Xe&&(t.activeTexture(Xe),Le=Xe)}function St(Xe,Yt,ve){ve===void 0&&(Le===null?ve=t.TEXTURE0+we-1:ve=Le);let ie=je[ve];ie===void 0&&(ie={type:void 0,texture:void 0},je[ve]=ie),(ie.type!==Xe||ie.texture!==Yt)&&(Le!==ve&&(t.activeTexture(ve),Le=ve),t.bindTexture(Xe,Yt||Lt[Xe]),ie.type=Xe,ie.texture=Yt)}function Bt(){const Xe=je[Le];Xe!==void 0&&Xe.type!==void 0&&(t.bindTexture(Xe.type,null),Xe.type=void 0,Xe.texture=void 0)}function jt(){try{t.compressedTexImage2D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function Rn(){try{t.compressedTexImage3D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function ft(){try{t.texSubImage2D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function Rt(){try{t.texSubImage3D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function Xt(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function Tn(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function en(){try{t.texStorage2D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function Et(){try{t.texStorage3D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function qt(){try{t.texImage2D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function ht(){try{t.texImage3D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function Ne(Xe){ot.equals(Xe)===!1&&(t.scissor(Xe.x,Xe.y,Xe.z,Xe.w),ot.copy(Xe))}function pt(Xe){at.equals(Xe)===!1&&(t.viewport(Xe.x,Xe.y,Xe.z,Xe.w),at.copy(Xe))}function Te(Xe,Yt){let ve=p.get(Yt);ve===void 0&&(ve=new WeakMap,p.set(Yt,ve));let ie=ve.get(Xe);ie===void 0&&(ie=t.getUniformBlockIndex(Yt,Xe.name),ve.set(Xe,ie))}function xt(Xe,Yt){const ie=p.get(Yt).get(Xe);h.get(Yt)!==ie&&(t.uniformBlockBinding(Yt,ie,Xe.__bindingPointIndex),h.set(Yt,ie))}function tn(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),r===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),g={},Le=null,je={},v={},x=new WeakMap,b=[],w=null,S=!1,C=null,A=null,P=null,k=null,F=null,B=null,W=null,J=new In(0,0,0),H=0,Y=!1,le=null,pe=null,re=null,me=null,he=null,ot.set(0,0,t.canvas.width,t.canvas.height),at.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),d.reset()}return{buffers:{color:a,depth:l,stencil:d},enable:lt,disable:Je,bindFramebuffer:Qe,drawBuffers:ge,useProgram:et,setBlending:ke,setMaterial:Vt,setFlipSided:zt,setCullFace:$t,setLineWidth:Qt,setPolygonOffset:Ie,setScissorTest:Me,activeTexture:wt,bindTexture:St,unbindTexture:Bt,compressedTexImage2D:jt,compressedTexImage3D:Rn,texImage2D:qt,texImage3D:ht,updateUBOMapping:Te,uniformBlockBinding:xt,texStorage2D:en,texStorage3D:Et,texSubImage2D:ft,texSubImage3D:Rt,compressedTexSubImage2D:Xt,compressedTexSubImage3D:Tn,scissor:Ne,viewport:pt,reset:tn}}function fmt(t,e,n,r,i,o,s){const a=i.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=new Ft,p=new WeakMap;let g;const v=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(Ie,Me){return x?new OffscreenCanvas(Ie,Me):dE("canvas")}function w(Ie,Me,wt,St){let Bt=1;const jt=Qt(Ie);if((jt.width>St||jt.height>St)&&(Bt=St/Math.max(jt.width,jt.height)),Bt<1||Me===!0)if(typeof HTMLImageElement<"u"&&Ie instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Ie instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Ie instanceof ImageBitmap||typeof VideoFrame<"u"&&Ie instanceof VideoFrame){const Rn=Me?SR:Math.floor,ft=Rn(Bt*jt.width),Rt=Rn(Bt*jt.height);g===void 0&&(g=b(ft,Rt));const Xt=wt?b(ft,Rt):g;return Xt.width=ft,Xt.height=Rt,Xt.getContext("2d").drawImage(Ie,0,0,ft,Rt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+jt.width+"x"+jt.height+") to ("+ft+"x"+Rt+")."),Xt}else return"data"in Ie&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+jt.width+"x"+jt.height+")."),Ie;return Ie}function S(Ie){const Me=Qt(Ie);return M5(Me.width)&&M5(Me.height)}function C(Ie){return a?!1:Ie.wrapS!==Oa||Ie.wrapT!==Oa||Ie.minFilter!==Xo&&Ie.minFilter!==yo}function A(Ie,Me){return Ie.generateMipmaps&&Me&&Ie.minFilter!==Xo&&Ie.minFilter!==yo}function P(Ie){t.generateMipmap(Ie)}function k(Ie,Me,wt,St,Bt=!1){if(a===!1)return Me;if(Ie!==null){if(t[Ie]!==void 0)return t[Ie];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ie+"'")}let jt=Me;if(Me===t.RED&&(wt===t.FLOAT&&(jt=t.R32F),wt===t.HALF_FLOAT&&(jt=t.R16F),wt===t.UNSIGNED_BYTE&&(jt=t.R8)),Me===t.RED_INTEGER&&(wt===t.UNSIGNED_BYTE&&(jt=t.R8UI),wt===t.UNSIGNED_SHORT&&(jt=t.R16UI),wt===t.UNSIGNED_INT&&(jt=t.R32UI),wt===t.BYTE&&(jt=t.R8I),wt===t.SHORT&&(jt=t.R16I),wt===t.INT&&(jt=t.R32I)),Me===t.RG&&(wt===t.FLOAT&&(jt=t.RG32F),wt===t.HALF_FLOAT&&(jt=t.RG16F),wt===t.UNSIGNED_BYTE&&(jt=t.RG8)),Me===t.RG_INTEGER&&(wt===t.UNSIGNED_BYTE&&(jt=t.RG8UI),wt===t.UNSIGNED_SHORT&&(jt=t.RG16UI),wt===t.UNSIGNED_INT&&(jt=t.RG32UI),wt===t.BYTE&&(jt=t.RG8I),wt===t.SHORT&&(jt=t.RG16I),wt===t.INT&&(jt=t.RG32I)),Me===t.RGBA){const Rn=Bt?sE:Di.getTransfer(St);wt===t.FLOAT&&(jt=t.RGBA32F),wt===t.HALF_FLOAT&&(jt=t.RGBA16F),wt===t.UNSIGNED_BYTE&&(jt=Rn===no?t.SRGB8_ALPHA8:t.RGBA8),wt===t.UNSIGNED_SHORT_4_4_4_4&&(jt=t.RGBA4),wt===t.UNSIGNED_SHORT_5_5_5_1&&(jt=t.RGB5_A1)}return(jt===t.R16F||jt===t.R32F||jt===t.RG16F||jt===t.RG32F||jt===t.RGBA16F||jt===t.RGBA32F)&&e.get("EXT_color_buffer_float"),jt}function F(Ie,Me,wt){return A(Ie,wt)===!0||Ie.isFramebufferTexture&&Ie.minFilter!==Xo&&Ie.minFilter!==yo?Math.log2(Math.max(Me.width,Me.height))+1:Ie.mipmaps!==void 0&&Ie.mipmaps.length>0?Ie.mipmaps.length:Ie.isCompressedTexture&&Array.isArray(Ie.image)?Me.mipmaps.length:1}function B(Ie){return Ie===Xo||Ie===iE||Ie===Jg?t.NEAREST:t.LINEAR}function W(Ie){const Me=Ie.target;Me.removeEventListener("dispose",W),H(Me),Me.isVideoTexture&&p.delete(Me)}function J(Ie){const Me=Ie.target;Me.removeEventListener("dispose",J),le(Me)}function H(Ie){const Me=r.get(Ie);if(Me.__webglInit===void 0)return;const wt=Ie.source,St=v.get(wt);if(St){const Bt=St[Me.__cacheKey];Bt.usedTimes--,Bt.usedTimes===0&&Y(Ie),Object.keys(St).length===0&&v.delete(wt)}r.remove(Ie)}function Y(Ie){const Me=r.get(Ie);t.deleteTexture(Me.__webglTexture);const wt=Ie.source,St=v.get(wt);delete St[Me.__cacheKey],s.memory.textures--}function le(Ie){const Me=r.get(Ie);if(Ie.depthTexture&&Ie.depthTexture.dispose(),Ie.isWebGLCubeRenderTarget)for(let St=0;St<6;St++){if(Array.isArray(Me.__webglFramebuffer[St]))for(let Bt=0;Bt<Me.__webglFramebuffer[St].length;Bt++)t.deleteFramebuffer(Me.__webglFramebuffer[St][Bt]);else t.deleteFramebuffer(Me.__webglFramebuffer[St]);Me.__webglDepthbuffer&&t.deleteRenderbuffer(Me.__webglDepthbuffer[St])}else{if(Array.isArray(Me.__webglFramebuffer))for(let St=0;St<Me.__webglFramebuffer.length;St++)t.deleteFramebuffer(Me.__webglFramebuffer[St]);else t.deleteFramebuffer(Me.__webglFramebuffer);if(Me.__webglDepthbuffer&&t.deleteRenderbuffer(Me.__webglDepthbuffer),Me.__webglMultisampledFramebuffer&&t.deleteFramebuffer(Me.__webglMultisampledFramebuffer),Me.__webglColorRenderbuffer)for(let St=0;St<Me.__webglColorRenderbuffer.length;St++)Me.__webglColorRenderbuffer[St]&&t.deleteRenderbuffer(Me.__webglColorRenderbuffer[St]);Me.__webglDepthRenderbuffer&&t.deleteRenderbuffer(Me.__webglDepthRenderbuffer)}const wt=Ie.textures;for(let St=0,Bt=wt.length;St<Bt;St++){const jt=r.get(wt[St]);jt.__webglTexture&&(t.deleteTexture(jt.__webglTexture),s.memory.textures--),r.remove(wt[St])}r.remove(Ie)}let pe=0;function re(){pe=0}function me(){const Ie=pe;return Ie>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Ie+" texture units while this GPU supports only "+i.maxTextures),pe+=1,Ie}function he(Ie){const Me=[];return Me.push(Ie.wrapS),Me.push(Ie.wrapT),Me.push(Ie.wrapR||0),Me.push(Ie.magFilter),Me.push(Ie.minFilter),Me.push(Ie.anisotropy),Me.push(Ie.internalFormat),Me.push(Ie.format),Me.push(Ie.type),Me.push(Ie.generateMipmaps),Me.push(Ie.premultiplyAlpha),Me.push(Ie.flipY),Me.push(Ie.unpackAlignment),Me.push(Ie.colorSpace),Me.join()}function we(Ie,Me){const wt=r.get(Ie);if(Ie.isVideoTexture&&zt(Ie),Ie.isRenderTargetTexture===!1&&Ie.version>0&&wt.__version!==Ie.version){const St=Ie.image;if(St===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(St.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{at(wt,Ie,Me);return}}n.bindTexture(t.TEXTURE_2D,wt.__webglTexture,t.TEXTURE0+Me)}function ee(Ie,Me){const wt=r.get(Ie);if(Ie.version>0&&wt.__version!==Ie.version){at(wt,Ie,Me);return}n.bindTexture(t.TEXTURE_2D_ARRAY,wt.__webglTexture,t.TEXTURE0+Me)}function ye(Ie,Me){const wt=r.get(Ie);if(Ie.version>0&&wt.__version!==Ie.version){at(wt,Ie,Me);return}n.bindTexture(t.TEXTURE_3D,wt.__webglTexture,t.TEXTURE0+Me)}function be(Ie,Me){const wt=r.get(Ie);if(Ie.version>0&&wt.__version!==Ie.version){It(wt,Ie,Me);return}n.bindTexture(t.TEXTURE_CUBE_MAP,wt.__webglTexture,t.TEXTURE0+Me)}const Le={[Dy]:t.REPEAT,[Oa]:t.CLAMP_TO_EDGE,[b1]:t.MIRRORED_REPEAT},je={[Xo]:t.NEAREST,[iE]:t.NEAREST_MIPMAP_NEAREST,[Jg]:t.NEAREST_MIPMAP_LINEAR,[yo]:t.LINEAR,[Ib]:t.LINEAR_MIPMAP_NEAREST,[yd]:t.LINEAR_MIPMAP_LINEAR},dt={[dde]:t.NEVER,[yde]:t.ALWAYS,[hde]:t.LESS,[P8]:t.LEQUAL,[fde]:t.EQUAL,[gde]:t.GEQUAL,[pde]:t.GREATER,[mde]:t.NOTEQUAL};function Be(Ie,Me,wt){if(Me.type===uu&&e.has("OES_texture_float_linear")===!1&&(Me.magFilter===yo||Me.magFilter===Ib||Me.magFilter===Jg||Me.magFilter===yd||Me.minFilter===yo||Me.minFilter===Ib||Me.minFilter===Jg||Me.minFilter===yd)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),wt?(t.texParameteri(Ie,t.TEXTURE_WRAP_S,Le[Me.wrapS]),t.texParameteri(Ie,t.TEXTURE_WRAP_T,Le[Me.wrapT]),(Ie===t.TEXTURE_3D||Ie===t.TEXTURE_2D_ARRAY)&&t.texParameteri(Ie,t.TEXTURE_WRAP_R,Le[Me.wrapR]),t.texParameteri(Ie,t.TEXTURE_MAG_FILTER,je[Me.magFilter]),t.texParameteri(Ie,t.TEXTURE_MIN_FILTER,je[Me.minFilter])):(t.texParameteri(Ie,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(Ie,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(Ie===t.TEXTURE_3D||Ie===t.TEXTURE_2D_ARRAY)&&t.texParameteri(Ie,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(Me.wrapS!==Oa||Me.wrapT!==Oa)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(Ie,t.TEXTURE_MAG_FILTER,B(Me.magFilter)),t.texParameteri(Ie,t.TEXTURE_MIN_FILTER,B(Me.minFilter)),Me.minFilter!==Xo&&Me.minFilter!==yo&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),Me.compareFunction&&(t.texParameteri(Ie,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(Ie,t.TEXTURE_COMPARE_FUNC,dt[Me.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(Me.magFilter===Xo||Me.minFilter!==Jg&&Me.minFilter!==yd||Me.type===uu&&e.has("OES_texture_float_linear")===!1||a===!1&&Me.type===w1&&e.has("OES_texture_half_float_linear")===!1)return;if(Me.anisotropy>1||r.get(Me).__currentAnisotropy){const St=e.get("EXT_texture_filter_anisotropic");t.texParameterf(Ie,St.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Me.anisotropy,i.getMaxAnisotropy())),r.get(Me).__currentAnisotropy=Me.anisotropy}}}function ot(Ie,Me){let wt=!1;Ie.__webglInit===void 0&&(Ie.__webglInit=!0,Me.addEventListener("dispose",W));const St=Me.source;let Bt=v.get(St);Bt===void 0&&(Bt={},v.set(St,Bt));const jt=he(Me);if(jt!==Ie.__cacheKey){Bt[jt]===void 0&&(Bt[jt]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,wt=!0),Bt[jt].usedTimes++;const Rn=Bt[Ie.__cacheKey];Rn!==void 0&&(Bt[Ie.__cacheKey].usedTimes--,Rn.usedTimes===0&&Y(Me)),Ie.__cacheKey=jt,Ie.__webglTexture=Bt[jt].texture}return wt}function at(Ie,Me,wt){let St=t.TEXTURE_2D;(Me.isDataArrayTexture||Me.isCompressedArrayTexture)&&(St=t.TEXTURE_2D_ARRAY),Me.isData3DTexture&&(St=t.TEXTURE_3D);const Bt=ot(Ie,Me),jt=Me.source;n.bindTexture(St,Ie.__webglTexture,t.TEXTURE0+wt);const Rn=r.get(jt);if(jt.version!==Rn.__version||Bt===!0){n.activeTexture(t.TEXTURE0+wt);const ft=Di.getPrimaries(Di.workingColorSpace),Rt=Me.colorSpace===Xp?null:Di.getPrimaries(Me.colorSpace),Xt=Me.colorSpace===Xp||ft===Rt?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,Me.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Me.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,Me.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Xt);const Tn=C(Me)&&S(Me.image)===!1;let en=w(Me.image,Tn,!1,i.maxTextureSize);en=$t(Me,en);const Et=S(en)||a,qt=o.convert(Me.format,Me.colorSpace);let ht=o.convert(Me.type),Ne=k(Me.internalFormat,qt,ht,Me.colorSpace,Me.isVideoTexture);Be(St,Me,Et);let pt;const Te=Me.mipmaps,xt=a&&Me.isVideoTexture!==!0&&Ne!==T8,tn=Rn.__version===void 0||Bt===!0,Xe=jt.dataReady,Yt=F(Me,en,Et);if(Me.isDepthTexture)Ne=t.DEPTH_COMPONENT,a?Me.type===uu?Ne=t.DEPTH_COMPONENT32F:Me.type===im?Ne=t.DEPTH_COMPONENT24:Me.type===Sy?Ne=t.DEPTH24_STENCIL8:Ne=t.DEPTH_COMPONENT16:Me.type===uu&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Me.format===My&&Ne===t.DEPTH_COMPONENT&&Me.type!==mL&&Me.type!==im&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Me.type=im,ht=o.convert(Me.type)),Me.format===Y0&&Ne===t.DEPTH_COMPONENT&&(Ne=t.DEPTH_STENCIL,Me.type!==Sy&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Me.type=Sy,ht=o.convert(Me.type))),tn&&(xt?n.texStorage2D(t.TEXTURE_2D,1,Ne,en.width,en.height):n.texImage2D(t.TEXTURE_2D,0,Ne,en.width,en.height,0,qt,ht,null));else if(Me.isDataTexture)if(Te.length>0&&Et){xt&&tn&&n.texStorage2D(t.TEXTURE_2D,Yt,Ne,Te[0].width,Te[0].height);for(let ve=0,ie=Te.length;ve<ie;ve++)pt=Te[ve],xt?Xe&&n.texSubImage2D(t.TEXTURE_2D,ve,0,0,pt.width,pt.height,qt,ht,pt.data):n.texImage2D(t.TEXTURE_2D,ve,Ne,pt.width,pt.height,0,qt,ht,pt.data);Me.generateMipmaps=!1}else xt?(tn&&n.texStorage2D(t.TEXTURE_2D,Yt,Ne,en.width,en.height),Xe&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,en.width,en.height,qt,ht,en.data)):n.texImage2D(t.TEXTURE_2D,0,Ne,en.width,en.height,0,qt,ht,en.data);else if(Me.isCompressedTexture)if(Me.isCompressedArrayTexture){xt&&tn&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Yt,Ne,Te[0].width,Te[0].height,en.depth);for(let ve=0,ie=Te.length;ve<ie;ve++)pt=Te[ve],Me.format!==Wl?qt!==null?xt?Xe&&n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,ve,0,0,0,pt.width,pt.height,en.depth,qt,pt.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,ve,Ne,pt.width,pt.height,en.depth,0,pt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):xt?Xe&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,ve,0,0,0,pt.width,pt.height,en.depth,qt,ht,pt.data):n.texImage3D(t.TEXTURE_2D_ARRAY,ve,Ne,pt.width,pt.height,en.depth,0,qt,ht,pt.data)}else{xt&&tn&&n.texStorage2D(t.TEXTURE_2D,Yt,Ne,Te[0].width,Te[0].height);for(let ve=0,ie=Te.length;ve<ie;ve++)pt=Te[ve],Me.format!==Wl?qt!==null?xt?Xe&&n.compressedTexSubImage2D(t.TEXTURE_2D,ve,0,0,pt.width,pt.height,qt,pt.data):n.compressedTexImage2D(t.TEXTURE_2D,ve,Ne,pt.width,pt.height,0,pt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):xt?Xe&&n.texSubImage2D(t.TEXTURE_2D,ve,0,0,pt.width,pt.height,qt,ht,pt.data):n.texImage2D(t.TEXTURE_2D,ve,Ne,pt.width,pt.height,0,qt,ht,pt.data)}else if(Me.isDataArrayTexture)xt?(tn&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Yt,Ne,en.width,en.height,en.depth),Xe&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,en.width,en.height,en.depth,qt,ht,en.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,Ne,en.width,en.height,en.depth,0,qt,ht,en.data);else if(Me.isData3DTexture)xt?(tn&&n.texStorage3D(t.TEXTURE_3D,Yt,Ne,en.width,en.height,en.depth),Xe&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,en.width,en.height,en.depth,qt,ht,en.data)):n.texImage3D(t.TEXTURE_3D,0,Ne,en.width,en.height,en.depth,0,qt,ht,en.data);else if(Me.isFramebufferTexture){if(tn)if(xt)n.texStorage2D(t.TEXTURE_2D,Yt,Ne,en.width,en.height);else{let ve=en.width,ie=en.height;for(let se=0;se<Yt;se++)n.texImage2D(t.TEXTURE_2D,se,Ne,ve,ie,0,qt,ht,null),ve>>=1,ie>>=1}}else if(Te.length>0&&Et){if(xt&&tn){const ve=Qt(Te[0]);n.texStorage2D(t.TEXTURE_2D,Yt,Ne,ve.width,ve.height)}for(let ve=0,ie=Te.length;ve<ie;ve++)pt=Te[ve],xt?Xe&&n.texSubImage2D(t.TEXTURE_2D,ve,0,0,qt,ht,pt):n.texImage2D(t.TEXTURE_2D,ve,Ne,qt,ht,pt);Me.generateMipmaps=!1}else if(xt){if(tn){const ve=Qt(en);n.texStorage2D(t.TEXTURE_2D,Yt,Ne,ve.width,ve.height)}Xe&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,qt,ht,en)}else n.texImage2D(t.TEXTURE_2D,0,Ne,qt,ht,en);A(Me,Et)&&P(St),Rn.__version=jt.version,Me.onUpdate&&Me.onUpdate(Me)}Ie.__version=Me.version}function It(Ie,Me,wt){if(Me.image.length!==6)return;const St=ot(Ie,Me),Bt=Me.source;n.bindTexture(t.TEXTURE_CUBE_MAP,Ie.__webglTexture,t.TEXTURE0+wt);const jt=r.get(Bt);if(Bt.version!==jt.__version||St===!0){n.activeTexture(t.TEXTURE0+wt);const Rn=Di.getPrimaries(Di.workingColorSpace),ft=Me.colorSpace===Xp?null:Di.getPrimaries(Me.colorSpace),Rt=Me.colorSpace===Xp||Rn===ft?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,Me.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Me.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,Me.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Rt);const Xt=Me.isCompressedTexture||Me.image[0].isCompressedTexture,Tn=Me.image[0]&&Me.image[0].isDataTexture,en=[];for(let ve=0;ve<6;ve++)!Xt&&!Tn?en[ve]=w(Me.image[ve],!1,!0,i.maxCubemapSize):en[ve]=Tn?Me.image[ve].image:Me.image[ve],en[ve]=$t(Me,en[ve]);const Et=en[0],qt=S(Et)||a,ht=o.convert(Me.format,Me.colorSpace),Ne=o.convert(Me.type),pt=k(Me.internalFormat,ht,Ne,Me.colorSpace),Te=a&&Me.isVideoTexture!==!0,xt=jt.__version===void 0||St===!0,tn=Bt.dataReady;let Xe=F(Me,Et,qt);Be(t.TEXTURE_CUBE_MAP,Me,qt);let Yt;if(Xt){Te&&xt&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Xe,pt,Et.width,Et.height);for(let ve=0;ve<6;ve++){Yt=en[ve].mipmaps;for(let ie=0;ie<Yt.length;ie++){const se=Yt[ie];Me.format!==Wl?ht!==null?Te?tn&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ve,ie,0,0,se.width,se.height,ht,se.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ve,ie,pt,se.width,se.height,0,se.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Te?tn&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ve,ie,0,0,se.width,se.height,ht,Ne,se.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ve,ie,pt,se.width,se.height,0,ht,Ne,se.data)}}}else{if(Yt=Me.mipmaps,Te&&xt){Yt.length>0&&Xe++;const ve=Qt(en[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,Xe,pt,ve.width,ve.height)}for(let ve=0;ve<6;ve++)if(Tn){Te?tn&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,0,0,en[ve].width,en[ve].height,ht,Ne,en[ve].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,pt,en[ve].width,en[ve].height,0,ht,Ne,en[ve].data);for(let ie=0;ie<Yt.length;ie++){const Se=Yt[ie].image[ve].image;Te?tn&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ve,ie+1,0,0,Se.width,Se.height,ht,Ne,Se.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ve,ie+1,pt,Se.width,Se.height,0,ht,Ne,Se.data)}}else{Te?tn&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,0,0,ht,Ne,en[ve]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,pt,ht,Ne,en[ve]);for(let ie=0;ie<Yt.length;ie++){const se=Yt[ie];Te?tn&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ve,ie+1,0,0,ht,Ne,se.image[ve]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ve,ie+1,pt,ht,Ne,se.image[ve])}}}A(Me,qt)&&P(t.TEXTURE_CUBE_MAP),jt.__version=Bt.version,Me.onUpdate&&Me.onUpdate(Me)}Ie.__version=Me.version}function Lt(Ie,Me,wt,St,Bt,jt){const Rn=o.convert(wt.format,wt.colorSpace),ft=o.convert(wt.type),Rt=k(wt.internalFormat,Rn,ft,wt.colorSpace);if(!r.get(Me).__hasExternalTextures){const Tn=Math.max(1,Me.width>>jt),en=Math.max(1,Me.height>>jt);Bt===t.TEXTURE_3D||Bt===t.TEXTURE_2D_ARRAY?n.texImage3D(Bt,jt,Rt,Tn,en,Me.depth,0,Rn,ft,null):n.texImage2D(Bt,jt,Rt,Tn,en,0,Rn,ft,null)}n.bindFramebuffer(t.FRAMEBUFFER,Ie),Vt(Me)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,St,Bt,r.get(wt).__webglTexture,0,ke(Me)):(Bt===t.TEXTURE_2D||Bt>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Bt<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,St,Bt,r.get(wt).__webglTexture,jt),n.bindFramebuffer(t.FRAMEBUFFER,null)}function lt(Ie,Me,wt){if(t.bindRenderbuffer(t.RENDERBUFFER,Ie),Me.depthBuffer&&!Me.stencilBuffer){let St=a===!0?t.DEPTH_COMPONENT24:t.DEPTH_COMPONENT16;if(wt||Vt(Me)){const Bt=Me.depthTexture;Bt&&Bt.isDepthTexture&&(Bt.type===uu?St=t.DEPTH_COMPONENT32F:Bt.type===im&&(St=t.DEPTH_COMPONENT24));const jt=ke(Me);Vt(Me)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,jt,St,Me.width,Me.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,jt,St,Me.width,Me.height)}else t.renderbufferStorage(t.RENDERBUFFER,St,Me.width,Me.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,Ie)}else if(Me.depthBuffer&&Me.stencilBuffer){const St=ke(Me);wt&&Vt(Me)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,St,t.DEPTH24_STENCIL8,Me.width,Me.height):Vt(Me)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,St,t.DEPTH24_STENCIL8,Me.width,Me.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,Me.width,Me.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,Ie)}else{const St=Me.textures;for(let Bt=0;Bt<St.length;Bt++){const jt=St[Bt],Rn=o.convert(jt.format,jt.colorSpace),ft=o.convert(jt.type),Rt=k(jt.internalFormat,Rn,ft,jt.colorSpace),Xt=ke(Me);wt&&Vt(Me)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Xt,Rt,Me.width,Me.height):Vt(Me)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Xt,Rt,Me.width,Me.height):t.renderbufferStorage(t.RENDERBUFFER,Rt,Me.width,Me.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function Je(Ie,Me){if(Me&&Me.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,Ie),!(Me.depthTexture&&Me.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(Me.depthTexture).__webglTexture||Me.depthTexture.image.width!==Me.width||Me.depthTexture.image.height!==Me.height)&&(Me.depthTexture.image.width=Me.width,Me.depthTexture.image.height=Me.height,Me.depthTexture.needsUpdate=!0),we(Me.depthTexture,0);const St=r.get(Me.depthTexture).__webglTexture,Bt=ke(Me);if(Me.depthTexture.format===My)Vt(Me)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,St,0,Bt):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,St,0);else if(Me.depthTexture.format===Y0)Vt(Me)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,St,0,Bt):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,St,0);else throw new Error("Unknown depthTexture format")}function Qe(Ie){const Me=r.get(Ie),wt=Ie.isWebGLCubeRenderTarget===!0;if(Ie.depthTexture&&!Me.__autoAllocateDepthBuffer){if(wt)throw new Error("target.depthTexture not supported in Cube render targets");Je(Me.__webglFramebuffer,Ie)}else if(wt){Me.__webglDepthbuffer=[];for(let St=0;St<6;St++)n.bindFramebuffer(t.FRAMEBUFFER,Me.__webglFramebuffer[St]),Me.__webglDepthbuffer[St]=t.createRenderbuffer(),lt(Me.__webglDepthbuffer[St],Ie,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,Me.__webglFramebuffer),Me.__webglDepthbuffer=t.createRenderbuffer(),lt(Me.__webglDepthbuffer,Ie,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function ge(Ie,Me,wt){const St=r.get(Ie);Me!==void 0&&Lt(St.__webglFramebuffer,Ie,Ie.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),wt!==void 0&&Qe(Ie)}function et(Ie){const Me=Ie.texture,wt=r.get(Ie),St=r.get(Me);Ie.addEventListener("dispose",J);const Bt=Ie.textures,jt=Ie.isWebGLCubeRenderTarget===!0,Rn=Bt.length>1,ft=S(Ie)||a;if(Rn||(St.__webglTexture===void 0&&(St.__webglTexture=t.createTexture()),St.__version=Me.version,s.memory.textures++),jt){wt.__webglFramebuffer=[];for(let Rt=0;Rt<6;Rt++)if(a&&Me.mipmaps&&Me.mipmaps.length>0){wt.__webglFramebuffer[Rt]=[];for(let Xt=0;Xt<Me.mipmaps.length;Xt++)wt.__webglFramebuffer[Rt][Xt]=t.createFramebuffer()}else wt.__webglFramebuffer[Rt]=t.createFramebuffer()}else{if(a&&Me.mipmaps&&Me.mipmaps.length>0){wt.__webglFramebuffer=[];for(let Rt=0;Rt<Me.mipmaps.length;Rt++)wt.__webglFramebuffer[Rt]=t.createFramebuffer()}else wt.__webglFramebuffer=t.createFramebuffer();if(Rn)if(i.drawBuffers)for(let Rt=0,Xt=Bt.length;Rt<Xt;Rt++){const Tn=r.get(Bt[Rt]);Tn.__webglTexture===void 0&&(Tn.__webglTexture=t.createTexture(),s.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&Ie.samples>0&&Vt(Ie)===!1){wt.__webglMultisampledFramebuffer=t.createFramebuffer(),wt.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,wt.__webglMultisampledFramebuffer);for(let Rt=0;Rt<Bt.length;Rt++){const Xt=Bt[Rt];wt.__webglColorRenderbuffer[Rt]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,wt.__webglColorRenderbuffer[Rt]);const Tn=o.convert(Xt.format,Xt.colorSpace),en=o.convert(Xt.type),Et=k(Xt.internalFormat,Tn,en,Xt.colorSpace,Ie.isXRRenderTarget===!0),qt=ke(Ie);t.renderbufferStorageMultisample(t.RENDERBUFFER,qt,Et,Ie.width,Ie.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Rt,t.RENDERBUFFER,wt.__webglColorRenderbuffer[Rt])}t.bindRenderbuffer(t.RENDERBUFFER,null),Ie.depthBuffer&&(wt.__webglDepthRenderbuffer=t.createRenderbuffer(),lt(wt.__webglDepthRenderbuffer,Ie,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(jt){n.bindTexture(t.TEXTURE_CUBE_MAP,St.__webglTexture),Be(t.TEXTURE_CUBE_MAP,Me,ft);for(let Rt=0;Rt<6;Rt++)if(a&&Me.mipmaps&&Me.mipmaps.length>0)for(let Xt=0;Xt<Me.mipmaps.length;Xt++)Lt(wt.__webglFramebuffer[Rt][Xt],Ie,Me,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Rt,Xt);else Lt(wt.__webglFramebuffer[Rt],Ie,Me,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Rt,0);A(Me,ft)&&P(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Rn){for(let Rt=0,Xt=Bt.length;Rt<Xt;Rt++){const Tn=Bt[Rt],en=r.get(Tn);n.bindTexture(t.TEXTURE_2D,en.__webglTexture),Be(t.TEXTURE_2D,Tn,ft),Lt(wt.__webglFramebuffer,Ie,Tn,t.COLOR_ATTACHMENT0+Rt,t.TEXTURE_2D,0),A(Tn,ft)&&P(t.TEXTURE_2D)}n.unbindTexture()}else{let Rt=t.TEXTURE_2D;if((Ie.isWebGL3DRenderTarget||Ie.isWebGLArrayRenderTarget)&&(a?Rt=Ie.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Rt,St.__webglTexture),Be(Rt,Me,ft),a&&Me.mipmaps&&Me.mipmaps.length>0)for(let Xt=0;Xt<Me.mipmaps.length;Xt++)Lt(wt.__webglFramebuffer[Xt],Ie,Me,t.COLOR_ATTACHMENT0,Rt,Xt);else Lt(wt.__webglFramebuffer,Ie,Me,t.COLOR_ATTACHMENT0,Rt,0);A(Me,ft)&&P(Rt),n.unbindTexture()}Ie.depthBuffer&&Qe(Ie)}function Ke(Ie){const Me=S(Ie)||a,wt=Ie.textures;for(let St=0,Bt=wt.length;St<Bt;St++){const jt=wt[St];if(A(jt,Me)){const Rn=Ie.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,ft=r.get(jt).__webglTexture;n.bindTexture(Rn,ft),P(Rn),n.unbindTexture()}}}function Tt(Ie){if(a&&Ie.samples>0&&Vt(Ie)===!1){const Me=Ie.textures,wt=Ie.width,St=Ie.height;let Bt=t.COLOR_BUFFER_BIT;const jt=[],Rn=Ie.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,ft=r.get(Ie),Rt=Me.length>1;if(Rt)for(let Xt=0;Xt<Me.length;Xt++)n.bindFramebuffer(t.FRAMEBUFFER,ft.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Xt,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,ft.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Xt,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,ft.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,ft.__webglFramebuffer);for(let Xt=0;Xt<Me.length;Xt++){jt.push(t.COLOR_ATTACHMENT0+Xt),Ie.depthBuffer&&jt.push(Rn);const Tn=ft.__ignoreDepthValues!==void 0?ft.__ignoreDepthValues:!1;if(Tn===!1&&(Ie.depthBuffer&&(Bt|=t.DEPTH_BUFFER_BIT),Ie.stencilBuffer&&(Bt|=t.STENCIL_BUFFER_BIT)),Rt&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,ft.__webglColorRenderbuffer[Xt]),Tn===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[Rn]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[Rn])),Rt){const en=r.get(Me[Xt]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,en,0)}t.blitFramebuffer(0,0,wt,St,0,0,wt,St,Bt,t.NEAREST),d&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,jt)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),Rt)for(let Xt=0;Xt<Me.length;Xt++){n.bindFramebuffer(t.FRAMEBUFFER,ft.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Xt,t.RENDERBUFFER,ft.__webglColorRenderbuffer[Xt]);const Tn=r.get(Me[Xt]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,ft.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Xt,t.TEXTURE_2D,Tn,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,ft.__webglMultisampledFramebuffer)}}function ke(Ie){return Math.min(i.maxSamples,Ie.samples)}function Vt(Ie){const Me=r.get(Ie);return a&&Ie.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Me.__useRenderToTexture!==!1}function zt(Ie){const Me=s.render.frame;p.get(Ie)!==Me&&(p.set(Ie,Me),Ie.update())}function $t(Ie,Me){const wt=Ie.colorSpace,St=Ie.format,Bt=Ie.type;return Ie.isCompressedTexture===!0||Ie.isVideoTexture===!0||Ie.format===wR||wt!==da&&wt!==Xp&&(Di.getTransfer(wt)===no?a===!1?e.has("EXT_sRGB")===!0&&St===Wl?(Ie.format=wR,Ie.minFilter=yo,Ie.generateMipmaps=!1):Me=k8.sRGBToLinear(Me):(St!==Wl||Bt!==Uf)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",wt)),Me}function Qt(Ie){return typeof HTMLImageElement<"u"&&Ie instanceof HTMLImageElement?(h.width=Ie.naturalWidth||Ie.width,h.height=Ie.naturalHeight||Ie.height):typeof VideoFrame<"u"&&Ie instanceof VideoFrame?(h.width=Ie.displayWidth,h.height=Ie.displayHeight):(h.width=Ie.width,h.height=Ie.height),h}this.allocateTextureUnit=me,this.resetTextureUnits=re,this.setTexture2D=we,this.setTexture2DArray=ee,this.setTexture3D=ye,this.setTextureCube=be,this.rebindTextures=ge,this.setupRenderTarget=et,this.updateRenderTargetMipmap=Ke,this.updateMultisampleRenderTarget=Tt,this.setupDepthRenderbuffer=Qe,this.setupFrameBufferTexture=Lt,this.useMultisampledRTT=Vt}function Ode(t,e,n){const r=n.isWebGL2;function i(o,s=Xp){let a;const l=Di.getTransfer(s);if(o===Uf)return t.UNSIGNED_BYTE;if(o===x8)return t.UNSIGNED_SHORT_4_4_4_4;if(o===b8)return t.UNSIGNED_SHORT_5_5_5_1;if(o===Zue)return t.BYTE;if(o===Jue)return t.SHORT;if(o===mL)return t.UNSIGNED_SHORT;if(o===_8)return t.INT;if(o===im)return t.UNSIGNED_INT;if(o===uu)return t.FLOAT;if(o===w1)return r?t.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(o===Que)return t.ALPHA;if(o===Wl)return t.RGBA;if(o===ede)return t.LUMINANCE;if(o===tde)return t.LUMINANCE_ALPHA;if(o===My)return t.DEPTH_COMPONENT;if(o===Y0)return t.DEPTH_STENCIL;if(o===wR)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(o===w8)return t.RED;if(o===S8)return t.RED_INTEGER;if(o===nde)return t.RG;if(o===M8)return t.RG_INTEGER;if(o===E8)return t.RGBA_INTEGER;if(o===pP||o===mP||o===gP||o===yP)if(l===no)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(o===pP)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===mP)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===gP)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===yP)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(o===pP)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===mP)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===gP)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===yP)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===Z4||o===J4||o===Q4||o===e5)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(o===Z4)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===J4)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===Q4)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===e5)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===T8)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===t5||o===n5)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(o===t5)return l===no?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(o===n5)return l===no?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===r5||o===i5||o===o5||o===s5||o===a5||o===l5||o===c5||o===u5||o===d5||o===h5||o===f5||o===p5||o===m5||o===g5)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(o===r5)return l===no?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===i5)return l===no?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===o5)return l===no?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===s5)return l===no?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===a5)return l===no?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===l5)return l===no?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===c5)return l===no?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===u5)return l===no?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===d5)return l===no?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===h5)return l===no?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===f5)return l===no?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===p5)return l===no?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===m5)return l===no?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===g5)return l===no?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===vP||o===y5||o===v5)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(o===vP)return l===no?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(o===y5)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(o===v5)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(o===rde||o===_5||o===x5||o===b5)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(o===vP)return a.COMPRESSED_RED_RGTC1_EXT;if(o===_5)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===x5)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===b5)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===Sy?r?t.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):t[o]!==void 0?t[o]:null}return{convert:i}}class Lde extends No{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class om extends di{constructor(){super(),this.isGroup=!0,this.type="Group"}}const pmt={type:"move"};class nz{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new om,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new om,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Oe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Oe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new om,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Oe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Oe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,o=null,s=null;const a=this._targetRay,l=this._grip,d=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(d&&e.hand){s=!0;for(const b of e.hand.values()){const w=n.getJointPose(b,r),S=this._getHandJoint(d,b);w!==null&&(S.matrix.fromArray(w.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.matrixWorldNeedsUpdate=!0,S.jointRadius=w.radius),S.visible=w!==null}const h=d.joints["index-finger-tip"],p=d.joints["thumb-tip"],g=h.position.distanceTo(p.position),v=.02,x=.005;d.inputState.pinching&&g>v+x?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&g<=v-x&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(o=n.getPose(e.gripSpace,r),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&o!==null&&(i=o),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(pmt)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=o!==null),d!==null&&(d.visible=s!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new om;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}const mmt=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,gmt=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class ymt{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,r){if(this.texture===null){const i=new _o,o=e.properties.get(i);o.__webglTexture=n.texture,(n.depthNear!=r.depthNear||n.depthFar!=r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=i}}render(e,n){if(this.texture!==null){if(this.mesh===null){const r=n.cameras[0].viewport,i=new Oh({extensions:{fragDepth:!0},vertexShader:mmt,fragmentShader:gmt,uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new ds(new mw(20,20),i)}e.render(this.mesh,n)}}reset(){this.texture=null,this.mesh=null}}class vmt extends jh{constructor(e,n){super();const r=this;let i=null,o=1,s=null,a="local-floor",l=1,d=null,h=null,p=null,g=null,v=null,x=null;const b=new ymt,w=n.getContextAttributes();let S=null,C=null;const A=[],P=[],k=new Ft;let F=null;const B=new No;B.layers.enable(1),B.viewport=new Ui;const W=new No;W.layers.enable(2),W.viewport=new Ui;const J=[B,W],H=new Lde;H.layers.enable(1),H.layers.enable(2);let Y=null,le=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Be){let ot=A[Be];return ot===void 0&&(ot=new nz,A[Be]=ot),ot.getTargetRaySpace()},this.getControllerGrip=function(Be){let ot=A[Be];return ot===void 0&&(ot=new nz,A[Be]=ot),ot.getGripSpace()},this.getHand=function(Be){let ot=A[Be];return ot===void 0&&(ot=new nz,A[Be]=ot),ot.getHandSpace()};function pe(Be){const ot=P.indexOf(Be.inputSource);if(ot===-1)return;const at=A[ot];at!==void 0&&(at.update(Be.inputSource,Be.frame,d||s),at.dispatchEvent({type:Be.type,data:Be.inputSource}))}function re(){i.removeEventListener("select",pe),i.removeEventListener("selectstart",pe),i.removeEventListener("selectend",pe),i.removeEventListener("squeeze",pe),i.removeEventListener("squeezestart",pe),i.removeEventListener("squeezeend",pe),i.removeEventListener("end",re),i.removeEventListener("inputsourceschange",me);for(let Be=0;Be<A.length;Be++){const ot=P[Be];ot!==null&&(P[Be]=null,A[Be].disconnect(ot))}Y=null,le=null,b.reset(),e.setRenderTarget(S),v=null,g=null,p=null,i=null,C=null,dt.stop(),r.isPresenting=!1,e.setPixelRatio(F),e.setSize(k.width,k.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Be){o=Be,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Be){a=Be,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||s},this.setReferenceSpace=function(Be){d=Be},this.getBaseLayer=function(){return g!==null?g:v},this.getBinding=function(){return p},this.getFrame=function(){return x},this.getSession=function(){return i},this.setSession=async function(Be){if(i=Be,i!==null){if(S=e.getRenderTarget(),i.addEventListener("select",pe),i.addEventListener("selectstart",pe),i.addEventListener("selectend",pe),i.addEventListener("squeeze",pe),i.addEventListener("squeezestart",pe),i.addEventListener("squeezeend",pe),i.addEventListener("end",re),i.addEventListener("inputsourceschange",me),w.xrCompatible!==!0&&await n.makeXRCompatible(),F=e.getPixelRatio(),e.getSize(k),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ot={antialias:i.renderState.layers===void 0?w.antialias:!0,alpha:!0,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:o};v=new XRWebGLLayer(i,n,ot),i.updateRenderState({baseLayer:v}),e.setPixelRatio(1),e.setSize(v.framebufferWidth,v.framebufferHeight,!1),C=new kh(v.framebufferWidth,v.framebufferHeight,{format:Wl,type:Uf,colorSpace:e.outputColorSpace,stencilBuffer:w.stencil})}else{let ot=null,at=null,It=null;w.depth&&(It=w.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,ot=w.stencil?Y0:My,at=w.stencil?Sy:im);const Lt={colorFormat:n.RGBA8,depthFormat:It,scaleFactor:o};p=new XRWebGLBinding(i,n),g=p.createProjectionLayer(Lt),i.updateRenderState({layers:[g]}),e.setPixelRatio(1),e.setSize(g.textureWidth,g.textureHeight,!1),C=new kh(g.textureWidth,g.textureHeight,{format:Wl,type:Uf,depthTexture:new z8(g.textureWidth,g.textureHeight,at,void 0,void 0,void 0,void 0,void 0,void 0,ot),stencilBuffer:w.stencil,colorSpace:e.outputColorSpace,samples:w.antialias?4:0});const lt=e.properties.get(C);lt.__ignoreDepthValues=g.ignoreDepthValues}C.isXRRenderTarget=!0,this.setFoveation(l),d=null,s=await i.requestReferenceSpace(a),dt.setContext(i),dt.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function me(Be){for(let ot=0;ot<Be.removed.length;ot++){const at=Be.removed[ot],It=P.indexOf(at);It>=0&&(P[It]=null,A[It].disconnect(at))}for(let ot=0;ot<Be.added.length;ot++){const at=Be.added[ot];let It=P.indexOf(at);if(It===-1){for(let lt=0;lt<A.length;lt++)if(lt>=P.length){P.push(at),It=lt;break}else if(P[lt]===null){P[lt]=at,It=lt;break}if(It===-1)break}const Lt=A[It];Lt&&Lt.connect(at)}}const he=new Oe,we=new Oe;function ee(Be,ot,at){he.setFromMatrixPosition(ot.matrixWorld),we.setFromMatrixPosition(at.matrixWorld);const It=he.distanceTo(we),Lt=ot.projectionMatrix.elements,lt=at.projectionMatrix.elements,Je=Lt[14]/(Lt[10]-1),Qe=Lt[14]/(Lt[10]+1),ge=(Lt[9]+1)/Lt[5],et=(Lt[9]-1)/Lt[5],Ke=(Lt[8]-1)/Lt[0],Tt=(lt[8]+1)/lt[0],ke=Je*Ke,Vt=Je*Tt,zt=It/(-Ke+Tt),$t=zt*-Ke;ot.matrixWorld.decompose(Be.position,Be.quaternion,Be.scale),Be.translateX($t),Be.translateZ(zt),Be.matrixWorld.compose(Be.position,Be.quaternion,Be.scale),Be.matrixWorldInverse.copy(Be.matrixWorld).invert();const Qt=Je+zt,Ie=Qe+zt,Me=ke-$t,wt=Vt+(It-$t),St=ge*Qe/Ie*Qt,Bt=et*Qe/Ie*Qt;Be.projectionMatrix.makePerspective(Me,wt,St,Bt,Qt,Ie),Be.projectionMatrixInverse.copy(Be.projectionMatrix).invert()}function ye(Be,ot){ot===null?Be.matrixWorld.copy(Be.matrix):Be.matrixWorld.multiplyMatrices(ot.matrixWorld,Be.matrix),Be.matrixWorldInverse.copy(Be.matrixWorld).invert()}this.updateCamera=function(Be){if(i===null)return;b.texture!==null&&(Be.near=b.depthNear,Be.far=b.depthFar),H.near=W.near=B.near=Be.near,H.far=W.far=B.far=Be.far,(Y!==H.near||le!==H.far)&&(i.updateRenderState({depthNear:H.near,depthFar:H.far}),Y=H.near,le=H.far,B.near=Y,B.far=le,W.near=Y,W.far=le,B.updateProjectionMatrix(),W.updateProjectionMatrix(),Be.updateProjectionMatrix());const ot=Be.parent,at=H.cameras;ye(H,ot);for(let It=0;It<at.length;It++)ye(at[It],ot);at.length===2?ee(H,B,W):H.projectionMatrix.copy(B.projectionMatrix),be(Be,H,ot)};function be(Be,ot,at){at===null?Be.matrix.copy(ot.matrixWorld):(Be.matrix.copy(at.matrixWorld),Be.matrix.invert(),Be.matrix.multiply(ot.matrixWorld)),Be.matrix.decompose(Be.position,Be.quaternion,Be.scale),Be.updateMatrixWorld(!0),Be.projectionMatrix.copy(ot.projectionMatrix),Be.projectionMatrixInverse.copy(ot.projectionMatrixInverse),Be.isPerspectiveCamera&&(Be.fov=M1*2*Math.atan(1/Be.projectionMatrix.elements[5]),Be.zoom=1)}this.getCamera=function(){return H},this.getFoveation=function(){if(!(g===null&&v===null))return l},this.setFoveation=function(Be){l=Be,g!==null&&(g.fixedFoveation=Be),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=Be)},this.hasDepthSensing=function(){return b.texture!==null};let Le=null;function je(Be,ot){if(h=ot.getViewerPose(d||s),x=ot,h!==null){const at=h.views;v!==null&&(e.setRenderTargetFramebuffer(C,v.framebuffer),e.setRenderTarget(C));let It=!1;at.length!==H.cameras.length&&(H.cameras.length=0,It=!0);for(let lt=0;lt<at.length;lt++){const Je=at[lt];let Qe=null;if(v!==null)Qe=v.getViewport(Je);else{const et=p.getViewSubImage(g,Je);Qe=et.viewport,lt===0&&(e.setRenderTargetTextures(C,et.colorTexture,g.ignoreDepthValues?void 0:et.depthStencilTexture),e.setRenderTarget(C))}let ge=J[lt];ge===void 0&&(ge=new No,ge.layers.enable(lt),ge.viewport=new Ui,J[lt]=ge),ge.matrix.fromArray(Je.transform.matrix),ge.matrix.decompose(ge.position,ge.quaternion,ge.scale),ge.projectionMatrix.fromArray(Je.projectionMatrix),ge.projectionMatrixInverse.copy(ge.projectionMatrix).invert(),ge.viewport.set(Qe.x,Qe.y,Qe.width,Qe.height),lt===0&&(H.matrix.copy(ge.matrix),H.matrix.decompose(H.position,H.quaternion,H.scale)),It===!0&&H.cameras.push(ge)}const Lt=i.enabledFeatures;if(Lt&&Lt.includes("depth-sensing")){const lt=p.getDepthInformation(at[0]);lt&&lt.isValid&&lt.texture&&b.init(e,lt,i.renderState)}}for(let at=0;at<A.length;at++){const It=P[at],Lt=A[at];It!==null&&Lt!==void 0&&Lt.update(It,ot,d||s)}b.render(e,H),Le&&Le(Be,ot),ot.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:ot}),x=null}const dt=new Cde;dt.setAnimationLoop(je),this.setAnimationLoop=function(Be){Le=Be},this.dispose=function(){}}}const kv=new Tu,_mt=new Yn;function xmt(t,e){function n(w,S){w.matrixAutoUpdate===!0&&w.updateMatrix(),S.value.copy(w.matrix)}function r(w,S){S.color.getRGB(w.fogColor.value,Sde(t)),S.isFog?(w.fogNear.value=S.near,w.fogFar.value=S.far):S.isFogExp2&&(w.fogDensity.value=S.density)}function i(w,S,C,A,P){S.isMeshBasicMaterial||S.isMeshLambertMaterial?o(w,S):S.isMeshToonMaterial?(o(w,S),p(w,S)):S.isMeshPhongMaterial?(o(w,S),h(w,S)):S.isMeshStandardMaterial?(o(w,S),g(w,S),S.isMeshPhysicalMaterial&&v(w,S,P)):S.isMeshMatcapMaterial?(o(w,S),x(w,S)):S.isMeshDepthMaterial?o(w,S):S.isMeshDistanceMaterial?(o(w,S),b(w,S)):S.isMeshNormalMaterial?o(w,S):S.isLineBasicMaterial?(s(w,S),S.isLineDashedMaterial&&a(w,S)):S.isPointsMaterial?l(w,S,C,A):S.isSpriteMaterial?d(w,S):S.isShadowMaterial?(w.color.value.copy(S.color),w.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function o(w,S){w.opacity.value=S.opacity,S.color&&w.diffuse.value.copy(S.color),S.emissive&&w.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(w.map.value=S.map,n(S.map,w.mapTransform)),S.alphaMap&&(w.alphaMap.value=S.alphaMap,n(S.alphaMap,w.alphaMapTransform)),S.bumpMap&&(w.bumpMap.value=S.bumpMap,n(S.bumpMap,w.bumpMapTransform),w.bumpScale.value=S.bumpScale,S.side===Kl&&(w.bumpScale.value*=-1)),S.normalMap&&(w.normalMap.value=S.normalMap,n(S.normalMap,w.normalMapTransform),w.normalScale.value.copy(S.normalScale),S.side===Kl&&w.normalScale.value.negate()),S.displacementMap&&(w.displacementMap.value=S.displacementMap,n(S.displacementMap,w.displacementMapTransform),w.displacementScale.value=S.displacementScale,w.displacementBias.value=S.displacementBias),S.emissiveMap&&(w.emissiveMap.value=S.emissiveMap,n(S.emissiveMap,w.emissiveMapTransform)),S.specularMap&&(w.specularMap.value=S.specularMap,n(S.specularMap,w.specularMapTransform)),S.alphaTest>0&&(w.alphaTest.value=S.alphaTest);const C=e.get(S),A=C.envMap,P=C.envMapRotation;if(A&&(w.envMap.value=A,kv.copy(P),kv.x*=-1,kv.y*=-1,kv.z*=-1,A.isCubeTexture&&A.isRenderTargetTexture===!1&&(kv.y*=-1,kv.z*=-1),w.envMapRotation.value.setFromMatrix4(_mt.makeRotationFromEuler(kv)),w.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=S.reflectivity,w.ior.value=S.ior,w.refractionRatio.value=S.refractionRatio),S.lightMap){w.lightMap.value=S.lightMap;const k=t._useLegacyLights===!0?Math.PI:1;w.lightMapIntensity.value=S.lightMapIntensity*k,n(S.lightMap,w.lightMapTransform)}S.aoMap&&(w.aoMap.value=S.aoMap,w.aoMapIntensity.value=S.aoMapIntensity,n(S.aoMap,w.aoMapTransform))}function s(w,S){w.diffuse.value.copy(S.color),w.opacity.value=S.opacity,S.map&&(w.map.value=S.map,n(S.map,w.mapTransform))}function a(w,S){w.dashSize.value=S.dashSize,w.totalSize.value=S.dashSize+S.gapSize,w.scale.value=S.scale}function l(w,S,C,A){w.diffuse.value.copy(S.color),w.opacity.value=S.opacity,w.size.value=S.size*C,w.scale.value=A*.5,S.map&&(w.map.value=S.map,n(S.map,w.uvTransform)),S.alphaMap&&(w.alphaMap.value=S.alphaMap,n(S.alphaMap,w.alphaMapTransform)),S.alphaTest>0&&(w.alphaTest.value=S.alphaTest)}function d(w,S){w.diffuse.value.copy(S.color),w.opacity.value=S.opacity,w.rotation.value=S.rotation,S.map&&(w.map.value=S.map,n(S.map,w.mapTransform)),S.alphaMap&&(w.alphaMap.value=S.alphaMap,n(S.alphaMap,w.alphaMapTransform)),S.alphaTest>0&&(w.alphaTest.value=S.alphaTest)}function h(w,S){w.specular.value.copy(S.specular),w.shininess.value=Math.max(S.shininess,1e-4)}function p(w,S){S.gradientMap&&(w.gradientMap.value=S.gradientMap)}function g(w,S){w.metalness.value=S.metalness,S.metalnessMap&&(w.metalnessMap.value=S.metalnessMap,n(S.metalnessMap,w.metalnessMapTransform)),w.roughness.value=S.roughness,S.roughnessMap&&(w.roughnessMap.value=S.roughnessMap,n(S.roughnessMap,w.roughnessMapTransform)),e.get(S).envMap&&(w.envMapIntensity.value=S.envMapIntensity)}function v(w,S,C){w.ior.value=S.ior,S.sheen>0&&(w.sheenColor.value.copy(S.sheenColor).multiplyScalar(S.sheen),w.sheenRoughness.value=S.sheenRoughness,S.sheenColorMap&&(w.sheenColorMap.value=S.sheenColorMap,n(S.sheenColorMap,w.sheenColorMapTransform)),S.sheenRoughnessMap&&(w.sheenRoughnessMap.value=S.sheenRoughnessMap,n(S.sheenRoughnessMap,w.sheenRoughnessMapTransform))),S.clearcoat>0&&(w.clearcoat.value=S.clearcoat,w.clearcoatRoughness.value=S.clearcoatRoughness,S.clearcoatMap&&(w.clearcoatMap.value=S.clearcoatMap,n(S.clearcoatMap,w.clearcoatMapTransform)),S.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap,n(S.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),S.clearcoatNormalMap&&(w.clearcoatNormalMap.value=S.clearcoatNormalMap,n(S.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),S.side===Kl&&w.clearcoatNormalScale.value.negate())),S.iridescence>0&&(w.iridescence.value=S.iridescence,w.iridescenceIOR.value=S.iridescenceIOR,w.iridescenceThicknessMinimum.value=S.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=S.iridescenceThicknessRange[1],S.iridescenceMap&&(w.iridescenceMap.value=S.iridescenceMap,n(S.iridescenceMap,w.iridescenceMapTransform)),S.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=S.iridescenceThicknessMap,n(S.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),S.transmission>0&&(w.transmission.value=S.transmission,w.transmissionSamplerMap.value=C.texture,w.transmissionSamplerSize.value.set(C.width,C.height),S.transmissionMap&&(w.transmissionMap.value=S.transmissionMap,n(S.transmissionMap,w.transmissionMapTransform)),w.thickness.value=S.thickness,S.thicknessMap&&(w.thicknessMap.value=S.thicknessMap,n(S.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=S.attenuationDistance,w.attenuationColor.value.copy(S.attenuationColor)),S.anisotropy>0&&(w.anisotropyVector.value.set(S.anisotropy*Math.cos(S.anisotropyRotation),S.anisotropy*Math.sin(S.anisotropyRotation)),S.anisotropyMap&&(w.anisotropyMap.value=S.anisotropyMap,n(S.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=S.specularIntensity,w.specularColor.value.copy(S.specularColor),S.specularColorMap&&(w.specularColorMap.value=S.specularColorMap,n(S.specularColorMap,w.specularColorMapTransform)),S.specularIntensityMap&&(w.specularIntensityMap.value=S.specularIntensityMap,n(S.specularIntensityMap,w.specularIntensityMapTransform))}function x(w,S){S.matcap&&(w.matcap.value=S.matcap)}function b(w,S){const C=e.get(S).light;w.referencePosition.value.setFromMatrixPosition(C.matrixWorld),w.nearDistance.value=C.shadow.camera.near,w.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function bmt(t,e,n,r){let i={},o={},s=[];const a=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(C,A){const P=A.program;r.uniformBlockBinding(C,P)}function d(C,A){let P=i[C.id];P===void 0&&(x(C),P=h(C),i[C.id]=P,C.addEventListener("dispose",w));const k=A.program;r.updateUBOMapping(C,k);const F=e.render.frame;o[C.id]!==F&&(g(C),o[C.id]=F)}function h(C){const A=p();C.__bindingPointIndex=A;const P=t.createBuffer(),k=C.__size,F=C.usage;return t.bindBuffer(t.UNIFORM_BUFFER,P),t.bufferData(t.UNIFORM_BUFFER,k,F),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,A,P),P}function p(){for(let C=0;C<a;C++)if(s.indexOf(C)===-1)return s.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function g(C){const A=i[C.id],P=C.uniforms,k=C.__cache;t.bindBuffer(t.UNIFORM_BUFFER,A);for(let F=0,B=P.length;F<B;F++){const W=Array.isArray(P[F])?P[F]:[P[F]];for(let J=0,H=W.length;J<H;J++){const Y=W[J];if(v(Y,F,J,k)===!0){const le=Y.__offset,pe=Array.isArray(Y.value)?Y.value:[Y.value];let re=0;for(let me=0;me<pe.length;me++){const he=pe[me],we=b(he);typeof he=="number"||typeof he=="boolean"?(Y.__data[0]=he,t.bufferSubData(t.UNIFORM_BUFFER,le+re,Y.__data)):he.isMatrix3?(Y.__data[0]=he.elements[0],Y.__data[1]=he.elements[1],Y.__data[2]=he.elements[2],Y.__data[3]=0,Y.__data[4]=he.elements[3],Y.__data[5]=he.elements[4],Y.__data[6]=he.elements[5],Y.__data[7]=0,Y.__data[8]=he.elements[6],Y.__data[9]=he.elements[7],Y.__data[10]=he.elements[8],Y.__data[11]=0):(he.toArray(Y.__data,re),re+=we.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,le,Y.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function v(C,A,P,k){const F=C.value,B=A+"_"+P;if(k[B]===void 0)return typeof F=="number"||typeof F=="boolean"?k[B]=F:k[B]=F.clone(),!0;{const W=k[B];if(typeof F=="number"||typeof F=="boolean"){if(W!==F)return k[B]=F,!0}else if(W.equals(F)===!1)return W.copy(F),!0}return!1}function x(C){const A=C.uniforms;let P=0;const k=16;for(let B=0,W=A.length;B<W;B++){const J=Array.isArray(A[B])?A[B]:[A[B]];for(let H=0,Y=J.length;H<Y;H++){const le=J[H],pe=Array.isArray(le.value)?le.value:[le.value];for(let re=0,me=pe.length;re<me;re++){const he=pe[re],we=b(he),ee=P%k;ee!==0&&k-ee<we.boundary&&(P+=k-ee),le.__data=new Float32Array(we.storage/Float32Array.BYTES_PER_ELEMENT),le.__offset=P,P+=we.storage}}}const F=P%k;return F>0&&(P+=k-F),C.__size=P,C.__cache={},this}function b(C){const A={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(A.boundary=4,A.storage=4):C.isVector2?(A.boundary=8,A.storage=8):C.isVector3||C.isColor?(A.boundary=16,A.storage=12):C.isVector4?(A.boundary=16,A.storage=16):C.isMatrix3?(A.boundary=48,A.storage=48):C.isMatrix4?(A.boundary=64,A.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),A}function w(C){const A=C.target;A.removeEventListener("dispose",w);const P=s.indexOf(A.__bindingPointIndex);s.splice(P,1),t.deleteBuffer(i[A.id]),delete i[A.id],delete o[A.id]}function S(){for(const C in i)t.deleteBuffer(i[C]);s=[],i={},o={}}return{bind:l,update:d,dispose:S}}class hT{constructor(e={}){const{canvas:n=_de(),context:r=null,depth:i=!0,stencil:o=!0,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:d=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:p=!1}=e;this.isWebGLRenderer=!0;let g;r!==null?g=r.getContextAttributes().alpha:g=s;const v=new Uint32Array(4),x=new Int32Array(4);let b=null,w=null;const S=[],C=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ra,this._useLegacyLights=!1,this.toneMapping=$f,this.toneMappingExposure=1;const A=this;let P=!1,k=0,F=0,B=null,W=-1,J=null;const H=new Ui,Y=new Ui;let le=null;const pe=new In(0);let re=0,me=n.width,he=n.height,we=1,ee=null,ye=null;const be=new Ui(0,0,me,he),Le=new Ui(0,0,me,he);let je=!1;const dt=new dT;let Be=!1,ot=!1,at=null;const It=new Yn,Lt=new Ft,lt=new Oe,Je={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Qe(){return B===null?we:1}let ge=r;function et(Re,st){for(let Mt=0;Mt<Re.length;Mt++){const ut=Re[Mt],vt=n.getContext(ut,st);if(vt!==null)return vt}return null}try{const Re={alpha:!0,depth:i,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:d,powerPreference:h,failIfMajorPerformanceCaveat:p};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${hL}`),n.addEventListener("webglcontextlost",tn,!1),n.addEventListener("webglcontextrestored",Xe,!1),n.addEventListener("webglcontextcreationerror",Yt,!1),ge===null){const st=["webgl2","webgl","experimental-webgl"];if(A.isWebGL1Renderer===!0&&st.shift(),ge=et(st,Re),ge===null)throw et(st)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&ge instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),ge.getShaderPrecisionFormat===void 0&&(ge.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Re){throw console.error("THREE.WebGLRenderer: "+Re.message),Re}let Ke,Tt,ke,Vt,zt,$t,Qt,Ie,Me,wt,St,Bt,jt,Rn,ft,Rt,Xt,Tn,en,Et,qt,ht,Ne,pt;function Te(){Ke=new Rft(ge),Tt=new Eft(ge,Ke,e),Ke.init(Tt),ht=new Ode(ge,Ke,Tt),ke=new hmt(ge,Ke,Tt),Vt=new Lft(ge),zt=new emt,$t=new fmt(ge,Ke,ke,zt,Tt,ht,Vt),Qt=new Cft(A),Ie=new Ift(A),Me=new jut(ge,Tt),Ne=new Sft(ge,Ke,Me,Tt),wt=new kft(ge,Me,Vt,Ne),St=new Fft(ge,wt,Me,Vt),en=new zft(ge,Tt,$t),Rt=new Tft(zt),Bt=new Qpt(A,Qt,Ie,Ke,Tt,Ne,Rt),jt=new xmt(A,zt),Rn=new nmt,ft=new lmt(Ke,Tt),Tn=new wft(A,Qt,Ie,ke,St,g,l),Xt=new dmt(A,St,Tt),pt=new bmt(ge,Vt,Tt,ke),Et=new Mft(ge,Ke,Vt,Tt),qt=new Oft(ge,Ke,Vt,Tt),Vt.programs=Bt.programs,A.capabilities=Tt,A.extensions=Ke,A.properties=zt,A.renderLists=Rn,A.shadowMap=Xt,A.state=ke,A.info=Vt}Te();const xt=new vmt(A,ge);this.xr=xt,this.getContext=function(){return ge},this.getContextAttributes=function(){return ge.getContextAttributes()},this.forceContextLoss=function(){const Re=Ke.get("WEBGL_lose_context");Re&&Re.loseContext()},this.forceContextRestore=function(){const Re=Ke.get("WEBGL_lose_context");Re&&Re.restoreContext()},this.getPixelRatio=function(){return we},this.setPixelRatio=function(Re){Re!==void 0&&(we=Re,this.setSize(me,he,!1))},this.getSize=function(Re){return Re.set(me,he)},this.setSize=function(Re,st,Mt=!0){if(xt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}me=Re,he=st,n.width=Math.floor(Re*we),n.height=Math.floor(st*we),Mt===!0&&(n.style.width=Re+"px",n.style.height=st+"px"),this.setViewport(0,0,Re,st)},this.getDrawingBufferSize=function(Re){return Re.set(me*we,he*we).floor()},this.setDrawingBufferSize=function(Re,st,Mt){me=Re,he=st,we=Mt,n.width=Math.floor(Re*Mt),n.height=Math.floor(st*Mt),this.setViewport(0,0,Re,st)},this.getCurrentViewport=function(Re){return Re.copy(H)},this.getViewport=function(Re){return Re.copy(be)},this.setViewport=function(Re,st,Mt,ut){Re.isVector4?be.set(Re.x,Re.y,Re.z,Re.w):be.set(Re,st,Mt,ut),ke.viewport(H.copy(be).multiplyScalar(we).round())},this.getScissor=function(Re){return Re.copy(Le)},this.setScissor=function(Re,st,Mt,ut){Re.isVector4?Le.set(Re.x,Re.y,Re.z,Re.w):Le.set(Re,st,Mt,ut),ke.scissor(Y.copy(Le).multiplyScalar(we).round())},this.getScissorTest=function(){return je},this.setScissorTest=function(Re){ke.setScissorTest(je=Re)},this.setOpaqueSort=function(Re){ee=Re},this.setTransparentSort=function(Re){ye=Re},this.getClearColor=function(Re){return Re.copy(Tn.getClearColor())},this.setClearColor=function(){Tn.setClearColor.apply(Tn,arguments)},this.getClearAlpha=function(){return Tn.getClearAlpha()},this.setClearAlpha=function(){Tn.setClearAlpha.apply(Tn,arguments)},this.clear=function(Re=!0,st=!0,Mt=!0){let ut=0;if(Re){let vt=!1;if(B!==null){const mn=B.texture.format;vt=mn===E8||mn===M8||mn===S8}if(vt){const mn=B.texture.type,kn=mn===Uf||mn===im||mn===mL||mn===Sy||mn===x8||mn===b8,tr=Tn.getClearColor(),bn=Tn.getClearAlpha(),mr=tr.r,pr=tr.g,Zn=tr.b;kn?(v[0]=mr,v[1]=pr,v[2]=Zn,v[3]=bn,ge.clearBufferuiv(ge.COLOR,0,v)):(x[0]=mr,x[1]=pr,x[2]=Zn,x[3]=bn,ge.clearBufferiv(ge.COLOR,0,x))}else ut|=ge.COLOR_BUFFER_BIT}st&&(ut|=ge.DEPTH_BUFFER_BIT),Mt&&(ut|=ge.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ge.clear(ut)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",tn,!1),n.removeEventListener("webglcontextrestored",Xe,!1),n.removeEventListener("webglcontextcreationerror",Yt,!1),Rn.dispose(),ft.dispose(),zt.dispose(),Qt.dispose(),Ie.dispose(),St.dispose(),Ne.dispose(),pt.dispose(),Bt.dispose(),xt.dispose(),xt.removeEventListener("sessionstart",Ze),xt.removeEventListener("sessionend",tt),at&&(at.dispose(),at=null),Ve.stop()};function tn(Re){Re.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),P=!0}function Xe(){console.log("THREE.WebGLRenderer: Context Restored."),P=!1;const Re=Vt.autoReset,st=Xt.enabled,Mt=Xt.autoUpdate,ut=Xt.needsUpdate,vt=Xt.type;Te(),Vt.autoReset=Re,Xt.enabled=st,Xt.autoUpdate=Mt,Xt.needsUpdate=ut,Xt.type=vt}function Yt(Re){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Re.statusMessage)}function ve(Re){const st=Re.target;st.removeEventListener("dispose",ve),ie(st)}function ie(Re){se(Re),zt.remove(Re)}function se(Re){const st=zt.get(Re).programs;st!==void 0&&(st.forEach(function(Mt){Bt.releaseProgram(Mt)}),Re.isShaderMaterial&&Bt.releaseShaderCache(Re))}this.renderBufferDirect=function(Re,st,Mt,ut,vt,mn){st===null&&(st=Je);const kn=vt.isMesh&&vt.matrixWorld.determinant()<0,tr=ir(Re,st,Mt,ut,vt);ke.setMaterial(ut,kn);let bn=Mt.index,mr=1;if(ut.wireframe===!0){if(bn=wt.getWireframeAttribute(Mt),bn===void 0)return;mr=2}const pr=Mt.drawRange,Zn=Mt.attributes.position;let $r=pr.start*mr,Jo=(pr.start+pr.count)*mr;mn!==null&&($r=Math.max($r,mn.start*mr),Jo=Math.min(Jo,(mn.start+mn.count)*mr)),bn!==null?($r=Math.max($r,0),Jo=Math.min(Jo,bn.count)):Zn!=null&&($r=Math.max($r,0),Jo=Math.min(Jo,Zn.count));const Lr=Jo-$r;if(Lr<0||Lr===1/0)return;Ne.setup(vt,ut,tr,Mt,bn);let Gr,sr=Et;if(bn!==null&&(Gr=Me.get(bn),sr=qt,sr.setIndex(Gr)),vt.isMesh)ut.wireframe===!0?(ke.setLineWidth(ut.wireframeLinewidth*Qe()),sr.setMode(ge.LINES)):sr.setMode(ge.TRIANGLES);else if(vt.isLine){let On=ut.linewidth;On===void 0&&(On=1),ke.setLineWidth(On*Qe()),vt.isLineSegments?sr.setMode(ge.LINES):vt.isLineLoop?sr.setMode(ge.LINE_LOOP):sr.setMode(ge.LINE_STRIP)}else vt.isPoints?sr.setMode(ge.POINTS):vt.isSprite&&sr.setMode(ge.TRIANGLES);if(vt.isBatchedMesh)sr.renderMultiDraw(vt._multiDrawStarts,vt._multiDrawCounts,vt._multiDrawCount);else if(vt.isInstancedMesh)sr.renderInstances($r,Lr,vt.count);else if(Mt.isInstancedBufferGeometry){const On=Mt._maxInstanceCount!==void 0?Mt._maxInstanceCount:1/0,ti=Math.min(Mt.instanceCount,On);sr.renderInstances($r,Lr,ti)}else sr.render($r,Lr)};function Se(Re,st,Mt){Re.transparent===!0&&Re.side===pd&&Re.forceSinglePass===!1?(Re.side=Kl,Re.needsUpdate=!0,zn(Re,st,Mt),Re.side=Yf,Re.needsUpdate=!0,zn(Re,st,Mt),Re.side=pd):zn(Re,st,Mt)}this.compile=function(Re,st,Mt=null){Mt===null&&(Mt=Re),w=ft.get(Mt),w.init(),C.push(w),Mt.traverseVisible(function(vt){vt.isLight&&vt.layers.test(st.layers)&&(w.pushLight(vt),vt.castShadow&&w.pushShadow(vt))}),Re!==Mt&&Re.traverseVisible(function(vt){vt.isLight&&vt.layers.test(st.layers)&&(w.pushLight(vt),vt.castShadow&&w.pushShadow(vt))}),w.setupLights(A._useLegacyLights);const ut=new Set;return Re.traverse(function(vt){const mn=vt.material;if(mn)if(Array.isArray(mn))for(let kn=0;kn<mn.length;kn++){const tr=mn[kn];Se(tr,Mt,vt),ut.add(tr)}else Se(mn,Mt,vt),ut.add(mn)}),C.pop(),w=null,ut},this.compileAsync=function(Re,st,Mt=null){const ut=this.compile(Re,st,Mt);return new Promise(vt=>{function mn(){if(ut.forEach(function(kn){zt.get(kn).currentProgram.isReady()&&ut.delete(kn)}),ut.size===0){vt(Re);return}setTimeout(mn,10)}Ke.get("KHR_parallel_shader_compile")!==null?mn():setTimeout(mn,10)})};let De=null;function We(Re){De&&De(Re)}function Ze(){Ve.stop()}function tt(){Ve.start()}const Ve=new Cde;Ve.setAnimationLoop(We),typeof self<"u"&&Ve.setContext(self),this.setAnimationLoop=function(Re){De=Re,xt.setAnimationLoop(Re),Re===null?Ve.stop():Ve.start()},xt.addEventListener("sessionstart",Ze),xt.addEventListener("sessionend",tt),this.render=function(Re,st){if(st!==void 0&&st.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(P===!0)return;Re.matrixWorldAutoUpdate===!0&&Re.updateMatrixWorld(),st.parent===null&&st.matrixWorldAutoUpdate===!0&&st.updateMatrixWorld(),xt.enabled===!0&&xt.isPresenting===!0&&(xt.cameraAutoUpdate===!0&&xt.updateCamera(st),st=xt.getCamera()),Re.isScene===!0&&Re.onBeforeRender(A,Re,st,B),w=ft.get(Re,C.length),w.init(),C.push(w),It.multiplyMatrices(st.projectionMatrix,st.matrixWorldInverse),dt.setFromProjectionMatrix(It),ot=this.localClippingEnabled,Be=Rt.init(this.clippingPlanes,ot),b=Rn.get(Re,S.length),b.init(),S.push(b),At(Re,st,0,A.sortObjects),b.finish(),A.sortObjects===!0&&b.sort(ee,ye),this.info.render.frame++,Be===!0&&Rt.beginShadows();const Mt=w.state.shadowsArray;if(Xt.render(Mt,Re,st),Be===!0&&Rt.endShadows(),this.info.autoReset===!0&&this.info.reset(),(xt.enabled===!1||xt.isPresenting===!1||xt.hasDepthSensing()===!1)&&Tn.render(b,Re),w.setupLights(A._useLegacyLights),st.isArrayCamera){const ut=st.cameras;for(let vt=0,mn=ut.length;vt<mn;vt++){const kn=ut[vt];Dt(b,Re,kn,kn.viewport)}}else Dt(b,Re,st);B!==null&&($t.updateMultisampleRenderTarget(B),$t.updateRenderTargetMipmap(B)),Re.isScene===!0&&Re.onAfterRender(A,Re,st),Ne.resetDefaultState(),W=-1,J=null,C.pop(),C.length>0?w=C[C.length-1]:w=null,S.pop(),S.length>0?b=S[S.length-1]:b=null};function At(Re,st,Mt,ut){if(Re.visible===!1)return;if(Re.layers.test(st.layers)){if(Re.isGroup)Mt=Re.renderOrder;else if(Re.isLOD)Re.autoUpdate===!0&&Re.update(st);else if(Re.isLight)w.pushLight(Re),Re.castShadow&&w.pushShadow(Re);else if(Re.isSprite){if(!Re.frustumCulled||dt.intersectsSprite(Re)){ut&&lt.setFromMatrixPosition(Re.matrixWorld).applyMatrix4(It);const kn=St.update(Re),tr=Re.material;tr.visible&&b.push(Re,kn,tr,Mt,lt.z,null)}}else if((Re.isMesh||Re.isLine||Re.isPoints)&&(!Re.frustumCulled||dt.intersectsObject(Re))){const kn=St.update(Re),tr=Re.material;if(ut&&(Re.boundingSphere!==void 0?(Re.boundingSphere===null&&Re.computeBoundingSphere(),lt.copy(Re.boundingSphere.center)):(kn.boundingSphere===null&&kn.computeBoundingSphere(),lt.copy(kn.boundingSphere.center)),lt.applyMatrix4(Re.matrixWorld).applyMatrix4(It)),Array.isArray(tr)){const bn=kn.groups;for(let mr=0,pr=bn.length;mr<pr;mr++){const Zn=bn[mr],$r=tr[Zn.materialIndex];$r&&$r.visible&&b.push(Re,kn,$r,Mt,lt.z,Zn)}}else tr.visible&&b.push(Re,kn,tr,Mt,lt.z,null)}}const mn=Re.children;for(let kn=0,tr=mn.length;kn<tr;kn++)At(mn[kn],st,Mt,ut)}function Dt(Re,st,Mt,ut){const vt=Re.opaque,mn=Re.transmissive,kn=Re.transparent;w.setupLightsView(Mt),Be===!0&&Rt.setGlobalState(A.clippingPlanes,Mt),mn.length>0&&Ct(vt,mn,st,Mt),ut&&ke.viewport(H.copy(ut)),vt.length>0&&ln(vt,st,Mt),mn.length>0&&ln(mn,st,Mt),kn.length>0&&ln(kn,st,Mt),ke.buffers.depth.setTest(!0),ke.buffers.depth.setMask(!0),ke.buffers.color.setMask(!0),ke.setPolygonOffset(!1)}function Ct(Re,st,Mt,ut){if((Mt.isScene===!0?Mt.overrideMaterial:null)!==null)return;const mn=Tt.isWebGL2;at===null&&(at=new kh(1,1,{generateMipmaps:!0,type:Ke.has("EXT_color_buffer_half_float")?w1:Uf,minFilter:yd,samples:mn?4:0})),A.getDrawingBufferSize(Lt),mn?at.setSize(Lt.x,Lt.y):at.setSize(SR(Lt.x),SR(Lt.y));const kn=A.getRenderTarget();A.setRenderTarget(at),A.getClearColor(pe),re=A.getClearAlpha(),re<1&&A.setClearColor(16777215,.5),A.clear();const tr=A.toneMapping;A.toneMapping=$f,ln(Re,Mt,ut),$t.updateMultisampleRenderTarget(at),$t.updateRenderTargetMipmap(at);let bn=!1;for(let mr=0,pr=st.length;mr<pr;mr++){const Zn=st[mr],$r=Zn.object,Jo=Zn.geometry,Lr=Zn.material,Gr=Zn.group;if(Lr.side===pd&&$r.layers.test(ut.layers)){const sr=Lr.side;Lr.side=Kl,Lr.needsUpdate=!0,Sn($r,Mt,ut,Jo,Lr,Gr),Lr.side=sr,Lr.needsUpdate=!0,bn=!0}}bn===!0&&($t.updateMultisampleRenderTarget(at),$t.updateRenderTargetMipmap(at)),A.setRenderTarget(kn),A.setClearColor(pe,re),A.toneMapping=tr}function ln(Re,st,Mt){const ut=st.isScene===!0?st.overrideMaterial:null;for(let vt=0,mn=Re.length;vt<mn;vt++){const kn=Re[vt],tr=kn.object,bn=kn.geometry,mr=ut===null?kn.material:ut,pr=kn.group;tr.layers.test(Mt.layers)&&Sn(tr,st,Mt,bn,mr,pr)}}function Sn(Re,st,Mt,ut,vt,mn){Re.onBeforeRender(A,st,Mt,ut,vt,mn),Re.modelViewMatrix.multiplyMatrices(Mt.matrixWorldInverse,Re.matrixWorld),Re.normalMatrix.getNormalMatrix(Re.modelViewMatrix),vt.onBeforeRender(A,st,Mt,ut,Re,mn),vt.transparent===!0&&vt.side===pd&&vt.forceSinglePass===!1?(vt.side=Kl,vt.needsUpdate=!0,A.renderBufferDirect(Mt,st,ut,vt,Re,mn),vt.side=Yf,vt.needsUpdate=!0,A.renderBufferDirect(Mt,st,ut,vt,Re,mn),vt.side=pd):A.renderBufferDirect(Mt,st,ut,vt,Re,mn),Re.onAfterRender(A,st,Mt,ut,vt,mn)}function zn(Re,st,Mt){st.isScene!==!0&&(st=Je);const ut=zt.get(Re),vt=w.state.lights,mn=w.state.shadowsArray,kn=vt.state.version,tr=Bt.getParameters(Re,vt.state,mn,st,Mt),bn=Bt.getProgramCacheKey(tr);let mr=ut.programs;ut.environment=Re.isMeshStandardMaterial?st.environment:null,ut.fog=st.fog,ut.envMap=(Re.isMeshStandardMaterial?Ie:Qt).get(Re.envMap||ut.environment),ut.envMapRotation=ut.environment!==null&&Re.envMap===null?st.environmentRotation:Re.envMapRotation,mr===void 0&&(Re.addEventListener("dispose",ve),mr=new Map,ut.programs=mr);let pr=mr.get(bn);if(pr!==void 0){if(ut.currentProgram===pr&&ut.lightsStateVersion===kn)return Cr(Re,tr),pr}else tr.uniforms=Bt.getUniforms(Re),Re.onBuild(Mt,tr,A),Re.onBeforeCompile(tr,A),pr=Bt.acquireProgram(tr,bn),mr.set(bn,pr),ut.uniforms=tr.uniforms;const Zn=ut.uniforms;return(!Re.isShaderMaterial&&!Re.isRawShaderMaterial||Re.clipping===!0)&&(Zn.clippingPlanes=Rt.uniform),Cr(Re,tr),ut.needsLights=Ti(Re),ut.lightsStateVersion=kn,ut.needsLights&&(Zn.ambientLightColor.value=vt.state.ambient,Zn.lightProbe.value=vt.state.probe,Zn.directionalLights.value=vt.state.directional,Zn.directionalLightShadows.value=vt.state.directionalShadow,Zn.spotLights.value=vt.state.spot,Zn.spotLightShadows.value=vt.state.spotShadow,Zn.rectAreaLights.value=vt.state.rectArea,Zn.ltc_1.value=vt.state.rectAreaLTC1,Zn.ltc_2.value=vt.state.rectAreaLTC2,Zn.pointLights.value=vt.state.point,Zn.pointLightShadows.value=vt.state.pointShadow,Zn.hemisphereLights.value=vt.state.hemi,Zn.directionalShadowMap.value=vt.state.directionalShadowMap,Zn.directionalShadowMatrix.value=vt.state.directionalShadowMatrix,Zn.spotShadowMap.value=vt.state.spotShadowMap,Zn.spotLightMatrix.value=vt.state.spotLightMatrix,Zn.spotLightMap.value=vt.state.spotLightMap,Zn.pointShadowMap.value=vt.state.pointShadowMap,Zn.pointShadowMatrix.value=vt.state.pointShadowMatrix),ut.currentProgram=pr,ut.uniformsList=null,pr}function rr(Re){if(Re.uniformsList===null){const st=Re.currentProgram.getUniforms();Re.uniformsList=xP.seqWithValue(st.seq,Re.uniforms)}return Re.uniformsList}function Cr(Re,st){const Mt=zt.get(Re);Mt.outputColorSpace=st.outputColorSpace,Mt.batching=st.batching,Mt.instancing=st.instancing,Mt.instancingColor=st.instancingColor,Mt.instancingMorph=st.instancingMorph,Mt.skinning=st.skinning,Mt.morphTargets=st.morphTargets,Mt.morphNormals=st.morphNormals,Mt.morphColors=st.morphColors,Mt.morphTargetsCount=st.morphTargetsCount,Mt.numClippingPlanes=st.numClippingPlanes,Mt.numIntersection=st.numClipIntersection,Mt.vertexAlphas=st.vertexAlphas,Mt.vertexTangents=st.vertexTangents,Mt.toneMapping=st.toneMapping}function ir(Re,st,Mt,ut,vt){st.isScene!==!0&&(st=Je),$t.resetTextureUnits();const mn=st.fog,kn=ut.isMeshStandardMaterial?st.environment:null,tr=B===null?A.outputColorSpace:B.isXRRenderTarget===!0?B.texture.colorSpace:da,bn=(ut.isMeshStandardMaterial?Ie:Qt).get(ut.envMap||kn),mr=ut.vertexColors===!0&&!!Mt.attributes.color&&Mt.attributes.color.itemSize===4,pr=!!Mt.attributes.tangent&&(!!ut.normalMap||ut.anisotropy>0),Zn=!!Mt.morphAttributes.position,$r=!!Mt.morphAttributes.normal,Jo=!!Mt.morphAttributes.color;let Lr=$f;ut.toneMapped&&(B===null||B.isXRRenderTarget===!0)&&(Lr=A.toneMapping);const Gr=Mt.morphAttributes.position||Mt.morphAttributes.normal||Mt.morphAttributes.color,sr=Gr!==void 0?Gr.length:0,On=zt.get(ut),ti=w.state.lights;if(Be===!0&&(ot===!0||Re!==J)){const so=Re===J&&ut.id===W;Rt.setState(ut,Re,so)}let fr=!1;ut.version===On.__version?(On.needsLights&&On.lightsStateVersion!==ti.state.version||On.outputColorSpace!==tr||vt.isBatchedMesh&&On.batching===!1||!vt.isBatchedMesh&&On.batching===!0||vt.isInstancedMesh&&On.instancing===!1||!vt.isInstancedMesh&&On.instancing===!0||vt.isSkinnedMesh&&On.skinning===!1||!vt.isSkinnedMesh&&On.skinning===!0||vt.isInstancedMesh&&On.instancingColor===!0&&vt.instanceColor===null||vt.isInstancedMesh&&On.instancingColor===!1&&vt.instanceColor!==null||vt.isInstancedMesh&&On.instancingMorph===!0&&vt.morphTexture===null||vt.isInstancedMesh&&On.instancingMorph===!1&&vt.morphTexture!==null||On.envMap!==bn||ut.fog===!0&&On.fog!==mn||On.numClippingPlanes!==void 0&&(On.numClippingPlanes!==Rt.numPlanes||On.numIntersection!==Rt.numIntersection)||On.vertexAlphas!==mr||On.vertexTangents!==pr||On.morphTargets!==Zn||On.morphNormals!==$r||On.morphColors!==Jo||On.toneMapping!==Lr||Tt.isWebGL2===!0&&On.morphTargetsCount!==sr)&&(fr=!0):(fr=!0,On.__version=ut.version);let _i=On.currentProgram;fr===!0&&(_i=zn(ut,st,vt));let si=!1,As=!1,fi=!1;const Bi=_i.getUniforms(),Qo=On.uniforms;if(ke.useProgram(_i.program)&&(si=!0,As=!0,fi=!0),ut.id!==W&&(W=ut.id,As=!0),si||J!==Re){Bi.setValue(ge,"projectionMatrix",Re.projectionMatrix),Bi.setValue(ge,"viewMatrix",Re.matrixWorldInverse);const so=Bi.map.cameraPosition;so!==void 0&&so.setValue(ge,lt.setFromMatrixPosition(Re.matrixWorld)),Tt.logarithmicDepthBuffer&&Bi.setValue(ge,"logDepthBufFC",2/(Math.log(Re.far+1)/Math.LN2)),(ut.isMeshPhongMaterial||ut.isMeshToonMaterial||ut.isMeshLambertMaterial||ut.isMeshBasicMaterial||ut.isMeshStandardMaterial||ut.isShaderMaterial)&&Bi.setValue(ge,"isOrthographic",Re.isOrthographicCamera===!0),J!==Re&&(J=Re,As=!0,fi=!0)}if(vt.isSkinnedMesh){Bi.setOptional(ge,vt,"bindMatrix"),Bi.setOptional(ge,vt,"bindMatrixInverse");const so=vt.skeleton;so&&(Tt.floatVertexTextures?(so.boneTexture===null&&so.computeBoneTexture(),Bi.setValue(ge,"boneTexture",so.boneTexture,$t)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}vt.isBatchedMesh&&(Bi.setOptional(ge,vt,"batchingTexture"),Bi.setValue(ge,"batchingTexture",vt._matricesTexture,$t));const ku=Mt.morphAttributes;if((ku.position!==void 0||ku.normal!==void 0||ku.color!==void 0&&Tt.isWebGL2===!0)&&en.update(vt,Mt,_i),(As||On.receiveShadow!==vt.receiveShadow)&&(On.receiveShadow=vt.receiveShadow,Bi.setValue(ge,"receiveShadow",vt.receiveShadow)),ut.isMeshGouraudMaterial&&ut.envMap!==null&&(Qo.envMap.value=bn,Qo.flipEnvMap.value=bn.isCubeTexture&&bn.isRenderTargetTexture===!1?-1:1),As&&(Bi.setValue(ge,"toneMappingExposure",A.toneMappingExposure),On.needsLights&&Yr(Qo,fi),mn&&ut.fog===!0&&jt.refreshFogUniforms(Qo,mn),jt.refreshMaterialUniforms(Qo,ut,we,he,at),xP.upload(ge,rr(On),Qo,$t)),ut.isShaderMaterial&&ut.uniformsNeedUpdate===!0&&(xP.upload(ge,rr(On),Qo,$t),ut.uniformsNeedUpdate=!1),ut.isSpriteMaterial&&Bi.setValue(ge,"center",vt.center),Bi.setValue(ge,"modelViewMatrix",vt.modelViewMatrix),Bi.setValue(ge,"normalMatrix",vt.normalMatrix),Bi.setValue(ge,"modelMatrix",vt.matrixWorld),ut.isShaderMaterial||ut.isRawShaderMaterial){const so=ut.uniformsGroups;for(let ma=0,_r=so.length;ma<_r;ma++)if(Tt.isWebGL2){const zd=so[ma];pt.update(zd,_i),pt.bind(zd,_i)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return _i}function Yr(Re,st){Re.ambientLightColor.needsUpdate=st,Re.lightProbe.needsUpdate=st,Re.directionalLights.needsUpdate=st,Re.directionalLightShadows.needsUpdate=st,Re.pointLights.needsUpdate=st,Re.pointLightShadows.needsUpdate=st,Re.spotLights.needsUpdate=st,Re.spotLightShadows.needsUpdate=st,Re.rectAreaLights.needsUpdate=st,Re.hemisphereLights.needsUpdate=st}function Ti(Re){return Re.isMeshLambertMaterial||Re.isMeshToonMaterial||Re.isMeshPhongMaterial||Re.isMeshStandardMaterial||Re.isShadowMaterial||Re.isShaderMaterial&&Re.lights===!0}this.getActiveCubeFace=function(){return k},this.getActiveMipmapLevel=function(){return F},this.getRenderTarget=function(){return B},this.setRenderTargetTextures=function(Re,st,Mt){zt.get(Re.texture).__webglTexture=st,zt.get(Re.depthTexture).__webglTexture=Mt;const ut=zt.get(Re);ut.__hasExternalTextures=!0,ut.__autoAllocateDepthBuffer=Mt===void 0,ut.__autoAllocateDepthBuffer||Ke.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ut.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(Re,st){const Mt=zt.get(Re);Mt.__webglFramebuffer=st,Mt.__useDefaultFramebuffer=st===void 0},this.setRenderTarget=function(Re,st=0,Mt=0){B=Re,k=st,F=Mt;let ut=!0,vt=null,mn=!1,kn=!1;if(Re){const bn=zt.get(Re);bn.__useDefaultFramebuffer!==void 0?(ke.bindFramebuffer(ge.FRAMEBUFFER,null),ut=!1):bn.__webglFramebuffer===void 0?$t.setupRenderTarget(Re):bn.__hasExternalTextures&&$t.rebindTextures(Re,zt.get(Re.texture).__webglTexture,zt.get(Re.depthTexture).__webglTexture);const mr=Re.texture;(mr.isData3DTexture||mr.isDataArrayTexture||mr.isCompressedArrayTexture)&&(kn=!0);const pr=zt.get(Re).__webglFramebuffer;Re.isWebGLCubeRenderTarget?(Array.isArray(pr[st])?vt=pr[st][Mt]:vt=pr[st],mn=!0):Tt.isWebGL2&&Re.samples>0&&$t.useMultisampledRTT(Re)===!1?vt=zt.get(Re).__webglMultisampledFramebuffer:Array.isArray(pr)?vt=pr[Mt]:vt=pr,H.copy(Re.viewport),Y.copy(Re.scissor),le=Re.scissorTest}else H.copy(be).multiplyScalar(we).floor(),Y.copy(Le).multiplyScalar(we).floor(),le=je;if(ke.bindFramebuffer(ge.FRAMEBUFFER,vt)&&Tt.drawBuffers&&ut&&ke.drawBuffers(Re,vt),ke.viewport(H),ke.scissor(Y),ke.setScissorTest(le),mn){const bn=zt.get(Re.texture);ge.framebufferTexture2D(ge.FRAMEBUFFER,ge.COLOR_ATTACHMENT0,ge.TEXTURE_CUBE_MAP_POSITIVE_X+st,bn.__webglTexture,Mt)}else if(kn){const bn=zt.get(Re.texture),mr=st||0;ge.framebufferTextureLayer(ge.FRAMEBUFFER,ge.COLOR_ATTACHMENT0,bn.__webglTexture,Mt||0,mr)}W=-1},this.readRenderTargetPixels=function(Re,st,Mt,ut,vt,mn,kn){if(!(Re&&Re.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let tr=zt.get(Re).__webglFramebuffer;if(Re.isWebGLCubeRenderTarget&&kn!==void 0&&(tr=tr[kn]),tr){ke.bindFramebuffer(ge.FRAMEBUFFER,tr);try{const bn=Re.texture,mr=bn.format,pr=bn.type;if(mr!==Wl&&ht.convert(mr)!==ge.getParameter(ge.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Zn=pr===w1&&(Ke.has("EXT_color_buffer_half_float")||Tt.isWebGL2&&Ke.has("EXT_color_buffer_float"));if(pr!==Uf&&ht.convert(pr)!==ge.getParameter(ge.IMPLEMENTATION_COLOR_READ_TYPE)&&!(pr===uu&&(Tt.isWebGL2||Ke.has("OES_texture_float")||Ke.has("WEBGL_color_buffer_float")))&&!Zn){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}st>=0&&st<=Re.width-ut&&Mt>=0&&Mt<=Re.height-vt&&ge.readPixels(st,Mt,ut,vt,ht.convert(mr),ht.convert(pr),mn)}finally{const bn=B!==null?zt.get(B).__webglFramebuffer:null;ke.bindFramebuffer(ge.FRAMEBUFFER,bn)}}},this.copyFramebufferToTexture=function(Re,st,Mt=0){const ut=Math.pow(2,-Mt),vt=Math.floor(st.image.width*ut),mn=Math.floor(st.image.height*ut);$t.setTexture2D(st,0),ge.copyTexSubImage2D(ge.TEXTURE_2D,Mt,0,0,Re.x,Re.y,vt,mn),ke.unbindTexture()},this.copyTextureToTexture=function(Re,st,Mt,ut=0){const vt=st.image.width,mn=st.image.height,kn=ht.convert(Mt.format),tr=ht.convert(Mt.type);$t.setTexture2D(Mt,0),ge.pixelStorei(ge.UNPACK_FLIP_Y_WEBGL,Mt.flipY),ge.pixelStorei(ge.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Mt.premultiplyAlpha),ge.pixelStorei(ge.UNPACK_ALIGNMENT,Mt.unpackAlignment),st.isDataTexture?ge.texSubImage2D(ge.TEXTURE_2D,ut,Re.x,Re.y,vt,mn,kn,tr,st.image.data):st.isCompressedTexture?ge.compressedTexSubImage2D(ge.TEXTURE_2D,ut,Re.x,Re.y,st.mipmaps[0].width,st.mipmaps[0].height,kn,st.mipmaps[0].data):ge.texSubImage2D(ge.TEXTURE_2D,ut,Re.x,Re.y,kn,tr,st.image),ut===0&&Mt.generateMipmaps&&ge.generateMipmap(ge.TEXTURE_2D),ke.unbindTexture()},this.copyTextureToTexture3D=function(Re,st,Mt,ut,vt=0){if(A.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const mn=Math.round(Re.max.x-Re.min.x),kn=Math.round(Re.max.y-Re.min.y),tr=Re.max.z-Re.min.z+1,bn=ht.convert(ut.format),mr=ht.convert(ut.type);let pr;if(ut.isData3DTexture)$t.setTexture3D(ut,0),pr=ge.TEXTURE_3D;else if(ut.isDataArrayTexture||ut.isCompressedArrayTexture)$t.setTexture2DArray(ut,0),pr=ge.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ge.pixelStorei(ge.UNPACK_FLIP_Y_WEBGL,ut.flipY),ge.pixelStorei(ge.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ut.premultiplyAlpha),ge.pixelStorei(ge.UNPACK_ALIGNMENT,ut.unpackAlignment);const Zn=ge.getParameter(ge.UNPACK_ROW_LENGTH),$r=ge.getParameter(ge.UNPACK_IMAGE_HEIGHT),Jo=ge.getParameter(ge.UNPACK_SKIP_PIXELS),Lr=ge.getParameter(ge.UNPACK_SKIP_ROWS),Gr=ge.getParameter(ge.UNPACK_SKIP_IMAGES),sr=Mt.isCompressedTexture?Mt.mipmaps[vt]:Mt.image;ge.pixelStorei(ge.UNPACK_ROW_LENGTH,sr.width),ge.pixelStorei(ge.UNPACK_IMAGE_HEIGHT,sr.height),ge.pixelStorei(ge.UNPACK_SKIP_PIXELS,Re.min.x),ge.pixelStorei(ge.UNPACK_SKIP_ROWS,Re.min.y),ge.pixelStorei(ge.UNPACK_SKIP_IMAGES,Re.min.z),Mt.isDataTexture||Mt.isData3DTexture?ge.texSubImage3D(pr,vt,st.x,st.y,st.z,mn,kn,tr,bn,mr,sr.data):ut.isCompressedArrayTexture?ge.compressedTexSubImage3D(pr,vt,st.x,st.y,st.z,mn,kn,tr,bn,sr.data):ge.texSubImage3D(pr,vt,st.x,st.y,st.z,mn,kn,tr,bn,mr,sr),ge.pixelStorei(ge.UNPACK_ROW_LENGTH,Zn),ge.pixelStorei(ge.UNPACK_IMAGE_HEIGHT,$r),ge.pixelStorei(ge.UNPACK_SKIP_PIXELS,Jo),ge.pixelStorei(ge.UNPACK_SKIP_ROWS,Lr),ge.pixelStorei(ge.UNPACK_SKIP_IMAGES,Gr),vt===0&&ut.generateMipmaps&&ge.generateMipmap(pr),ke.unbindTexture()},this.initTexture=function(Re){Re.isCubeTexture?$t.setTextureCube(Re,0):Re.isData3DTexture?$t.setTexture3D(Re,0):Re.isDataArrayTexture||Re.isCompressedArrayTexture?$t.setTexture2DArray(Re,0):$t.setTexture2D(Re,0),ke.unbindTexture()},this.resetState=function(){k=0,F=0,B=null,ke.reset(),Ne.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return If}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===yL?"display-p3":"srgb",n.unpackColorSpace=Di.workingColorSpace===cT?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class Dde extends hT{}Dde.prototype.isWebGL1Renderer=!0;class xL{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new In(e),this.density=n}clone(){return new xL(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class bL{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new In(e),this.near=n,this.far=r}clone(){return new bL(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class T1 extends di{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Tu,this.environmentRotation=new Tu,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class fT{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=cE,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=vu()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return xde("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,o=this.stride;i<o;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=vu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=vu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Bl=new Oe;class Ny{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)Bl.fromBufferAttribute(this,n),Bl.applyMatrix4(e),this.setXYZ(n,Bl.x,Bl.y,Bl.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Bl.fromBufferAttribute(this,n),Bl.applyNormalMatrix(e),this.setXYZ(n,Bl.x,Bl.y,Bl.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Bl.fromBufferAttribute(this,n),Bl.transformDirection(e),this.setXYZ(n,Bl.x,Bl.y,Bl.z);return this}getComponent(e,n){let r=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(r=Gl(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Rr(r,this.array)),this.data.array[e*this.data.stride+this.offset+n]=r,this}setX(e,n){return this.normalized&&(n=Rr(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Rr(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Rr(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Rr(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=Gl(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=Gl(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=Gl(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=Gl(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array),i=Rr(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,o){return e=e*this.data.stride+this.offset,this.normalized&&(n=Rr(n,this.array),r=Rr(r,this.array),i=Rr(i,this.array),o=Rr(o,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)n.push(this.data.array[i+o])}return new Ni(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ny(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)n.push(this.data.array[i+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class j8 extends Cs{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new In(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Ex;const OS=new Oe,Tx=new Oe,Cx=new Oe,Ax=new Ft,LS=new Ft,Nde=new Yn,fA=new Oe,DS=new Oe,pA=new Oe,kZ=new Ft,rz=new Ft,OZ=new Ft;class zde extends di{constructor(e=new j8){if(super(),this.isSprite=!0,this.type="Sprite",Ex===void 0){Ex=new Pr;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new fT(n,5);Ex.setIndex([0,1,2,0,2,3]),Ex.setAttribute("position",new Ny(r,3,0,!1)),Ex.setAttribute("uv",new Ny(r,2,3,!1))}this.geometry=Ex,this.material=e,this.center=new Ft(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Tx.setFromMatrixScale(this.matrixWorld),Nde.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Cx.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Tx.multiplyScalar(-Cx.z);const r=this.material.rotation;let i,o;r!==0&&(o=Math.cos(r),i=Math.sin(r));const s=this.center;mA(fA.set(-.5,-.5,0),Cx,s,Tx,i,o),mA(DS.set(.5,-.5,0),Cx,s,Tx,i,o),mA(pA.set(.5,.5,0),Cx,s,Tx,i,o),kZ.set(0,0),rz.set(1,0),OZ.set(1,1);let a=e.ray.intersectTriangle(fA,DS,pA,!1,OS);if(a===null&&(mA(DS.set(-.5,.5,0),Cx,s,Tx,i,o),rz.set(0,1),a=e.ray.intersectTriangle(fA,pA,DS,!1,OS),a===null))return;const l=e.ray.origin.distanceTo(OS);l<e.near||l>e.far||n.push({distance:l,point:OS.clone(),uv:du.getInterpolation(OS,fA,DS,pA,kZ,rz,OZ,new Ft),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function mA(t,e,n,r,i,o){Ax.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(LS.x=o*Ax.x-i*Ax.y,LS.y=i*Ax.x+o*Ax.y):LS.copy(Ax),t.copy(e),t.x+=LS.x,t.y+=LS.y,t.applyMatrix4(Nde)}const gA=new Oe,LZ=new Oe;class Fde extends di{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const o=n[r];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const i=this.levels;let o;for(o=0;o<i.length&&!(n<i[o].distance);o++);return i.splice(o,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i;r++){let o=n[r].distance;if(n[r].object.visible&&(o-=o*n[r].hysteresis),e<o)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){gA.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(gA);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){gA.setFromMatrixPosition(e.matrixWorld),LZ.setFromMatrixPosition(this.matrixWorld);const r=gA.distanceTo(LZ)/e.zoom;n[0].object.visible=!0;let i,o;for(i=1,o=n.length;i<o;i++){let s=n[i].distance;if(n[i].object.visible&&(s-=s*n[i].hysteresis),r>=s)n[i-1].object.visible=!1,n[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<o;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,o=r.length;i<o;i++){const s=r[i];n.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return n}}const DZ=new Oe,NZ=new Ui,zZ=new Ui,wmt=new Oe,FZ=new Yn,yA=new Oe,iz=new Fa,BZ=new Yn,oz=new Ky;class $8 extends ds{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=K4,this.bindMatrix=new Yn,this.bindMatrixInverse=new Yn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new xl),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,yA),this.boundingBox.expandByPoint(yA)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Fa),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,yA),this.boundingSphere.expandByPoint(yA)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),iz.copy(this.boundingSphere),iz.applyMatrix4(i),e.ray.intersectsSphere(iz)!==!1&&(BZ.copy(i).invert(),oz.copy(e.ray).applyMatrix4(BZ),!(this.boundingBox!==null&&oz.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,oz)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ui,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===K4?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Kue?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;NZ.fromBufferAttribute(i.attributes.skinIndex,e),zZ.fromBufferAttribute(i.attributes.skinWeight,e),DZ.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let o=0;o<4;o++){const s=zZ.getComponent(o);if(s!==0){const a=NZ.getComponent(o);FZ.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),n.addScaledVector(wmt.copy(DZ).applyMatrix4(FZ),s)}}return n.applyMatrix4(this.bindMatrixInverse)}}class wL extends di{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ey extends _o{constructor(e=null,n=1,r=1,i,o,s,a,l,d=Xo,h=Xo,p,g){super(null,s,a,l,d,h,i,o,p,g),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const jZ=new Yn,Smt=new Yn;class pT{constructor(e=[],n=[]){this.uuid=vu(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Yn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new Yn;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let o=0,s=e.length;o<s;o++){const a=e[o]?e[o].matrixWorld:Smt;jZ.multiplyMatrices(a,n[o]),jZ.toArray(r,o*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new pT(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new Ey(n,e,e,Wl,uu);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const o=e.bones[r];let s=n[o];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new wL),this.bones.push(s),this.boneInverses.push(new Yn().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,o=n.length;i<o;i++){const s=n[i];e.bones.push(s.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Z0 extends Ni{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Px=new Yn,$Z=new Yn,vA=[],UZ=new xl,Mmt=new Yn,NS=new ds,zS=new Fa;class U8 extends ds{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Z0(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,Mmt)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new xl),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,Px),UZ.copy(e.boundingBox).applyMatrix4(Px),this.boundingBox.union(UZ)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Fa),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,Px),zS.copy(e.boundingSphere).applyMatrix4(Px),this.boundingSphere.union(zS)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const r=n.morphTargetInfluences,i=this.morphTexture.source.data.data,o=r.length+1,s=e*o+1;for(let a=0;a<r.length;a++)r[a]=i[s+a]}raycast(e,n){const r=this.matrixWorld,i=this.count;if(NS.geometry=this.geometry,NS.material=this.material,NS.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),zS.copy(this.boundingSphere),zS.applyMatrix4(r),e.ray.intersectsSphere(zS)!==!1))for(let o=0;o<i;o++){this.getMatrixAt(o,Px),$Z.multiplyMatrices(r,Px),NS.matrixWorld=$Z,NS.raycast(e,vA);for(let s=0,a=vA.length;s<a;s++){const l=vA[s];l.instanceId=o,l.object=this,n.push(l)}vA.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Z0(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const r=n.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new Ey(new Float32Array(i*this.count),i,this.count,w8,uu));const o=this.morphTexture.source.data.data;let s=0;for(let d=0;d<r.length;d++)s+=r[d];const a=this.geometry.morphTargetsRelative?1:1-s,l=i*e;o[l]=a,o.set(r,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function Emt(t,e){return t.z-e.z}function Tmt(t,e){return e.z-t.z}class Cmt{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const o=r[this.index];i.push(o),this.index++,o.start=e.start,o.count=e.count,o.z=n}reset(){this.list.length=0,this.index=0}}const Ix="batchId",Ng=new Yn,VZ=new Yn,Amt=new Yn,HZ=new Yn,sz=new dT,_A=new xl,Ov=new Fa,FS=new Oe,az=new Cmt,ll=new ds,xA=[];function Pmt(t,e,n=0){const r=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const i=t.count;for(let o=0;o<i;o++)for(let s=0;s<r;s++)e.setComponent(o+n,s,t.getComponent(o,s))}else e.array.set(t.array,n*r);e.needsUpdate=!0}class Bde extends ds{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,n,r=n*2,i){super(new Pr,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=n,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),r=new Ey(n,e,e,Wl,uu);this._matricesTexture=r}_initializeGeometry(e){const n=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,o=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:d,itemSize:h,normalized:p}=l,g=new d.constructor(r*h),v=new l.constructor(g,h,p);v.setUsage(l.usage),n.setAttribute(a,v)}if(e.getIndex()!==null){const a=r>65536?new Uint32Array(o):new Uint16Array(o);n.setIndex(new Ni(a,1))}const s=i>65536?new Uint32Array(r):new Uint16Array(r);n.setAttribute(Ix,new Ni(s,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Ix))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Ix}"`);const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in n.attributes){if(r===Ix)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),o=n.getAttribute(r);if(i.itemSize!==o.itemSize||i.normalized!==o.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new xl);const e=this._geometryCount,n=this.boundingBox,r=this._active;n.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,Ng),this.getBoundingBoxAt(i,_A).applyMatrix4(Ng),n.union(_A))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Fa);const e=this._geometryCount,n=this.boundingSphere,r=this._active;n.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,Ng),this.getBoundingSphereAt(i,Ov).applyMatrix4(Ng),n.union(Ov))}addGeometry(e,n=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let o=null;const s=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(o=s[s.length-1]),n===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=n,o===null?i.vertexStart=0:i.vertexStart=o.vertexStart+o.vertexCount;const d=e.getIndex(),h=d!==null;if(h&&(r===-1?i.indexCount=d.count:i.indexCount=r,o===null?i.indexStart=0:i.indexStart=o.indexStart+o.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const p=this._visibility,g=this._active,v=this._matricesTexture,x=this._matricesTexture.image.data;p.push(!0),g.push(!0);const b=this._geometryCount;this._geometryCount++,Amt.toArray(x,b*16),v.needsUpdate=!0,s.push(i),a.push({start:h?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new xl,sphereInitialized:!1,sphere:new Fa});const w=this.geometry.getAttribute(Ix);for(let S=0;S<i.vertexCount;S++)w.setX(i.vertexStart+S,b);return w.needsUpdate=!0,this.setGeometryAt(b,e),b}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,i=r.getIndex()!==null,o=r.getIndex(),s=n.getIndex(),a=this._reservedRanges[e];if(i&&s.count>a.indexCount||n.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,d=a.vertexCount;for(const v in r.attributes){if(v===Ix)continue;const x=n.getAttribute(v),b=r.getAttribute(v);Pmt(x,b,l);const w=x.itemSize;for(let S=x.count,C=d;S<C;S++){const A=l+S;for(let P=0;P<w;P++)b.setComponent(A,P,0)}b.needsUpdate=!0}if(i){const v=a.indexStart;for(let x=0;x<s.count;x++)o.setX(v+x,l+s.getX(x));for(let x=s.count,b=a.indexCount;x<b;x++)o.setX(v+x,l);o.needsUpdate=!0}const h=this._bounds[e];n.boundingBox!==null?(h.box.copy(n.boundingBox),h.boxInitialized=!0):h.boxInitialized=!1,n.boundingSphere!==null?(h.sphere.copy(n.boundingSphere),h.sphereInitialized=!0):h.sphereInitialized=!1;const p=this._drawRanges[e],g=n.getAttribute("position");return p.count=i?s.count:g.count,this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._active;return e>=n.length||n[e]===!1?this:(n[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,n){if(this._active[e]===!1)return null;const i=this._bounds[e],o=i.box,s=this.geometry;if(i.boxInitialized===!1){o.makeEmpty();const a=s.index,l=s.attributes.position,d=this._drawRanges[e];for(let h=d.start,p=d.start+d.count;h<p;h++){let g=h;a&&(g=a.getX(g)),o.expandByPoint(FS.fromBufferAttribute(l,g))}i.boxInitialized=!0}return n.copy(o),n}getBoundingSphereAt(e,n){if(this._active[e]===!1)return null;const i=this._bounds[e],o=i.sphere,s=this.geometry;if(i.sphereInitialized===!1){o.makeEmpty(),this.getBoundingBoxAt(e,_A),_A.getCenter(o.center);const a=s.index,l=s.attributes.position,d=this._drawRanges[e];let h=0;for(let p=d.start,g=d.start+d.count;p<g;p++){let v=p;a&&(v=a.getX(v)),FS.fromBufferAttribute(l,v),h=Math.max(h,o.center.distanceToSquared(FS))}o.radius=Math.sqrt(h),i.sphereInitialized=!0}return n.copy(o),n}setMatrixAt(e,n){const r=this._active,i=this._matricesTexture,o=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?this:(n.toArray(o,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,n){const r=this._active,i=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||r[e]===!1?null:n.fromArray(i,e*16)}setVisibleAt(e,n){const r=this._visibility,i=this._active,o=this._geometryCount;return e>=o||i[e]===!1||r[e]===n?this:(r[e]=n,this._visibilityChanged=!0,this)}getVisibleAt(e){const n=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:n[e]}raycast(e,n){const r=this._visibility,i=this._active,o=this._drawRanges,s=this._geometryCount,a=this.matrixWorld,l=this.geometry;ll.material=this.material,ll.geometry.index=l.index,ll.geometry.attributes=l.attributes,ll.geometry.boundingBox===null&&(ll.geometry.boundingBox=new xl),ll.geometry.boundingSphere===null&&(ll.geometry.boundingSphere=new Fa);for(let d=0;d<s;d++){if(!r[d]||!i[d])continue;const h=o[d];ll.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(d,ll.matrixWorld).premultiply(a),this.getBoundingBoxAt(d,ll.geometry.boundingBox),this.getBoundingSphereAt(d,ll.geometry.boundingSphere),ll.raycast(e,xA);for(let p=0,g=xA.length;p<g;p++){const v=xA[p];v.object=this,v.batchId=d,n.push(v)}xA.length=0}ll.material=null,ll.geometry.index=null,ll.geometry.attributes={},ll.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(n=>({...n})),this._reservedRanges=e._reservedRanges.map(n=>({...n})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(n=>({boxInitialized:n.boxInitialized,box:n.box.clone(),sphereInitialized:n.sphereInitialized,sphere:n.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,n,r,i,o){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=i.getIndex(),a=s===null?1:s.array.BYTES_PER_ELEMENT,l=this._active,d=this._visibility,h=this._multiDrawStarts,p=this._multiDrawCounts,g=this._drawRanges,v=this.perObjectFrustumCulled;v&&(HZ.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),sz.setFromProjectionMatrix(HZ,e.coordinateSystem));let x=0;if(this.sortObjects){VZ.copy(this.matrixWorld).invert(),FS.setFromMatrixPosition(r.matrixWorld).applyMatrix4(VZ);for(let S=0,C=d.length;S<C;S++)if(d[S]&&l[S]){this.getMatrixAt(S,Ng),this.getBoundingSphereAt(S,Ov).applyMatrix4(Ng);let A=!1;if(v&&(A=!sz.intersectsSphere(Ov)),!A){const P=FS.distanceTo(Ov.center);az.push(g[S],P)}}const b=az.list,w=this.customSort;w===null?b.sort(o.transparent?Tmt:Emt):w.call(this,b,r);for(let S=0,C=b.length;S<C;S++){const A=b[S];h[x]=A.start*a,p[x]=A.count,x++}az.reset()}else for(let b=0,w=d.length;b<w;b++)if(d[b]&&l[b]){let S=!1;if(v&&(this.getMatrixAt(b,Ng),this.getBoundingSphereAt(b,Ov).applyMatrix4(Ng),S=!sz.intersectsSphere(Ov)),!S){const C=g[b];h[x]=C.start*a,p[x]=C.count,x++}}this._multiDrawCount=x,this._visibilityChanged=!1}onBeforeShadow(e,n,r,i,o,s){this.onBeforeRender(e,null,i,o,s)}}class $a extends Cs{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new In(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const WZ=new Oe,GZ=new Oe,qZ=new Yn,lz=new Ky,bA=new Fa;class Kf extends di{constructor(e=new Pr,n=new $a){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,o=n.count;i<o;i++)WZ.fromBufferAttribute(n,i-1),GZ.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=WZ.distanceTo(GZ);e.setAttribute("lineDistance",new Jn(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,o=e.params.Line.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),bA.copy(r.boundingSphere),bA.applyMatrix4(i),bA.radius+=o,e.ray.intersectsSphere(bA)===!1)return;qZ.copy(i).invert(),lz.copy(e.ray).applyMatrix4(qZ);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,d=new Oe,h=new Oe,p=new Oe,g=new Oe,v=this.isLineSegments?2:1,x=r.index,w=r.attributes.position;if(x!==null){const S=Math.max(0,s.start),C=Math.min(x.count,s.start+s.count);for(let A=S,P=C-1;A<P;A+=v){const k=x.getX(A),F=x.getX(A+1);if(d.fromBufferAttribute(w,k),h.fromBufferAttribute(w,F),lz.distanceSqToSegment(d,h,g,p)>l)continue;g.applyMatrix4(this.matrixWorld);const W=e.ray.origin.distanceTo(g);W<e.near||W>e.far||n.push({distance:W,point:p.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}else{const S=Math.max(0,s.start),C=Math.min(w.count,s.start+s.count);for(let A=S,P=C-1;A<P;A+=v){if(d.fromBufferAttribute(w,A),h.fromBufferAttribute(w,A+1),lz.distanceSqToSegment(d,h,g,p)>l)continue;g.applyMatrix4(this.matrixWorld);const F=e.ray.origin.distanceTo(g);F<e.near||F>e.far||n.push({distance:F,point:p.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}}const XZ=new Oe,YZ=new Oe;class $h extends Kf{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,o=n.count;i<o;i+=2)XZ.fromBufferAttribute(n,i),YZ.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+XZ.distanceTo(YZ);e.setAttribute("lineDistance",new Jn(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class V8 extends Kf{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class SL extends Cs{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new In(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const KZ=new Yn,C5=new Ky,wA=new Fa,SA=new Oe;class H8 extends di{constructor(e=new Pr,n=new SL){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,o=e.params.Points.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),wA.copy(r.boundingSphere),wA.applyMatrix4(i),wA.radius+=o,e.ray.intersectsSphere(wA)===!1)return;KZ.copy(i).invert(),C5.copy(e.ray).applyMatrix4(KZ);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,d=r.index,p=r.attributes.position;if(d!==null){const g=Math.max(0,s.start),v=Math.min(d.count,s.start+s.count);for(let x=g,b=v;x<b;x++){const w=d.getX(x);SA.fromBufferAttribute(p,w),ZZ(SA,w,l,i,e,n,this)}}else{const g=Math.max(0,s.start),v=Math.min(p.count,s.start+s.count);for(let x=g,b=v;x<b;x++)SA.fromBufferAttribute(p,x),ZZ(SA,x,l,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}}function ZZ(t,e,n,r,i,o,s){const a=C5.distanceSqToPoint(t);if(a<n){const l=new Oe;C5.closestPointToPoint(t,l),l.applyMatrix4(r);const d=i.ray.origin.distanceTo(l);if(d<i.near||d>i.far)return;o.push({distance:d,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:s})}}class Imt extends _o{constructor(e,n,r,i,o,s,a,l,d){super(e,n,r,i,o,s,a,l,d),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:yo,this.magFilter=o!==void 0?o:yo,this.generateMipmaps=!1;const h=this;function p(){h.needsUpdate=!0,e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Rmt extends _o{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=Xo,this.minFilter=Xo,this.generateMipmaps=!1,this.needsUpdate=!0}}class ML extends _o{constructor(e,n,r,i,o,s,a,l,d,h,p,g){super(null,s,a,l,d,h,i,o,p,g),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class kmt extends ML{constructor(e,n,r,i,o,s){super(e,n,r,o,s),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Oa}}class Omt extends ML{constructor(e,n,r){super(void 0,e[0].width,e[0].height,n,r,Cm),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Lmt extends _o{constructor(e,n,r,i,o,s,a,l,d){super(e,n,r,i,o,s,a,l,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Uh{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),o=0;n.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),o+=r.distanceTo(i),n.push(o),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const o=r.length;let s;n?s=n:s=e*r[o-1];let a=0,l=o-1,d;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),d=r[i]-s,d<0)a=i+1;else if(d>0)l=i-1;else{l=i;break}if(i=l,r[i]===s)return i/(o-1);const h=r[i],g=r[i+1]-h,v=(s-h)/g;return(i+v)/(o-1)}getTangent(e,n){let i=e-1e-4,o=e+1e-4;i<0&&(i=0),o>1&&(o=1);const s=this.getPoint(i),a=this.getPoint(o),l=n||(s.isVector2?new Ft:new Oe);return l.copy(a).sub(s).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new Oe,i=[],o=[],s=[],a=new Oe,l=new Yn;for(let v=0;v<=e;v++){const x=v/e;i[v]=this.getTangentAt(x,new Oe)}o[0]=new Oe,s[0]=new Oe;let d=Number.MAX_VALUE;const h=Math.abs(i[0].x),p=Math.abs(i[0].y),g=Math.abs(i[0].z);h<=d&&(d=h,r.set(1,0,0)),p<=d&&(d=p,r.set(0,1,0)),g<=d&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),o[0].crossVectors(i[0],a),s[0].crossVectors(i[0],o[0]);for(let v=1;v<=e;v++){if(o[v]=o[v-1].clone(),s[v]=s[v-1].clone(),a.crossVectors(i[v-1],i[v]),a.length()>Number.EPSILON){a.normalize();const x=Math.acos(Yo(i[v-1].dot(i[v]),-1,1));o[v].applyMatrix4(l.makeRotationAxis(a,x))}s[v].crossVectors(i[v],o[v])}if(n===!0){let v=Math.acos(Yo(o[0].dot(o[e]),-1,1));v/=e,i[0].dot(a.crossVectors(o[0],o[e]))>0&&(v=-v);for(let x=1;x<=e;x++)o[x].applyMatrix4(l.makeRotationAxis(i[x],v*x)),s[x].crossVectors(i[x],o[x])}return{tangents:i,normals:o,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class EL extends Uh{constructor(e=0,n=0,r=1,i=1,o=0,s=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=l}getPoint(e,n=new Ft){const r=n,i=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=i;for(;o>i;)o-=i;o<Number.EPSILON&&(s?o=0:o=i),this.aClockwise===!0&&!s&&(o===i?o=-i:o=o-i);const a=this.aStartAngle+e*o;let l=this.aX+this.xRadius*Math.cos(a),d=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),p=Math.sin(this.aRotation),g=l-this.aX,v=d-this.aY;l=g*h-v*p+this.aX,d=g*p+v*h+this.aY}return r.set(l,d)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class jde extends EL{constructor(e,n,r,i,o,s){super(e,n,r,r,i,o,s),this.isArcCurve=!0,this.type="ArcCurve"}}function W8(){let t=0,e=0,n=0,r=0;function i(o,s,a,l){t=o,e=a,n=-3*o+3*s-2*a-l,r=2*o-2*s+a+l}return{initCatmullRom:function(o,s,a,l,d){i(s,a,d*(a-o),d*(l-s))},initNonuniformCatmullRom:function(o,s,a,l,d,h,p){let g=(s-o)/d-(a-o)/(d+h)+(a-s)/h,v=(a-s)/h-(l-s)/(h+p)+(l-a)/p;g*=h,v*=h,i(s,a,g,v)},calc:function(o){const s=o*o,a=s*o;return t+e*o+n*s+r*a}}}const MA=new Oe,cz=new W8,uz=new W8,dz=new W8;class $de extends Uh{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new Oe){const r=n,i=this.points,o=i.length,s=(o-(this.closed?0:1))*e;let a=Math.floor(s),l=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:l===0&&a===o-1&&(a=o-2,l=1);let d,h;this.closed||a>0?d=i[(a-1)%o]:(MA.subVectors(i[0],i[1]).add(i[0]),d=MA);const p=i[a%o],g=i[(a+1)%o];if(this.closed||a+2<o?h=i[(a+2)%o]:(MA.subVectors(i[o-1],i[o-2]).add(i[o-1]),h=MA),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let x=Math.pow(d.distanceToSquared(p),v),b=Math.pow(p.distanceToSquared(g),v),w=Math.pow(g.distanceToSquared(h),v);b<1e-4&&(b=1),x<1e-4&&(x=b),w<1e-4&&(w=b),cz.initNonuniformCatmullRom(d.x,p.x,g.x,h.x,x,b,w),uz.initNonuniformCatmullRom(d.y,p.y,g.y,h.y,x,b,w),dz.initNonuniformCatmullRom(d.z,p.z,g.z,h.z,x,b,w)}else this.curveType==="catmullrom"&&(cz.initCatmullRom(d.x,p.x,g.x,h.x,this.tension),uz.initCatmullRom(d.y,p.y,g.y,h.y,this.tension),dz.initCatmullRom(d.z,p.z,g.z,h.z,this.tension));return r.set(cz.calc(l),uz.calc(l),dz.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new Oe().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function JZ(t,e,n,r,i){const o=(r-e)*.5,s=(i-n)*.5,a=t*t,l=t*a;return(2*n-2*r+o+s)*l+(-3*n+3*r-2*o-s)*a+o*t+n}function Dmt(t,e){const n=1-t;return n*n*e}function Nmt(t,e){return 2*(1-t)*t*e}function zmt(t,e){return t*t*e}function R2(t,e,n,r){return Dmt(t,e)+Nmt(t,n)+zmt(t,r)}function Fmt(t,e){const n=1-t;return n*n*n*e}function Bmt(t,e){const n=1-t;return 3*n*n*t*e}function jmt(t,e){return 3*(1-t)*t*t*e}function $mt(t,e){return t*t*t*e}function k2(t,e,n,r,i){return Fmt(t,e)+Bmt(t,n)+jmt(t,r)+$mt(t,i)}class G8 extends Uh{constructor(e=new Ft,n=new Ft,r=new Ft,i=new Ft){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new Ft){const r=n,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return r.set(k2(e,i.x,o.x,s.x,a.x),k2(e,i.y,o.y,s.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Ude extends Uh{constructor(e=new Oe,n=new Oe,r=new Oe,i=new Oe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new Oe){const r=n,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return r.set(k2(e,i.x,o.x,s.x,a.x),k2(e,i.y,o.y,s.y,a.y),k2(e,i.z,o.z,s.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class q8 extends Uh{constructor(e=new Ft,n=new Ft){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new Ft){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Ft){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Vde extends Uh{constructor(e=new Oe,n=new Oe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new Oe){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Oe){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class X8 extends Uh{constructor(e=new Ft,n=new Ft,r=new Ft){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new Ft){const r=n,i=this.v0,o=this.v1,s=this.v2;return r.set(R2(e,i.x,o.x,s.x),R2(e,i.y,o.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Y8 extends Uh{constructor(e=new Oe,n=new Oe,r=new Oe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new Oe){const r=n,i=this.v0,o=this.v1,s=this.v2;return r.set(R2(e,i.x,o.x,s.x),R2(e,i.y,o.y,s.y),R2(e,i.z,o.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class K8 extends Uh{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new Ft){const r=n,i=this.points,o=(i.length-1)*e,s=Math.floor(o),a=o-s,l=i[s===0?s:s-1],d=i[s],h=i[s>i.length-2?i.length-1:s+1],p=i[s>i.length-3?i.length-1:s+2];return r.set(JZ(a,l.x,d.x,h.x,p.x),JZ(a,l.y,d.y,h.y,p.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new Ft().fromArray(i))}return this}}var MR=Object.freeze({__proto__:null,ArcCurve:jde,CatmullRomCurve3:$de,CubicBezierCurve:G8,CubicBezierCurve3:Ude,EllipseCurve:EL,LineCurve:q8,LineCurve3:Vde,QuadraticBezierCurve:X8,QuadraticBezierCurve3:Y8,SplineCurve:K8});class Hde extends Uh{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new MR[r](n,e))}return this}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let o=0;for(;o<i.length;){if(i[o]>=r){const s=i[o]-r,a=this.curves[o],l=a.getLength(),d=l===0?0:1-s/l;return a.getPointAt(d,n)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,o=this.curves;i<o.length;i++){const s=o[i],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(a);for(let d=0;d<l.length;d++){const h=l[d];r&&r.equals(h)||(n.push(h),r=h)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new MR[i.type]().fromJSON(i))}return this}}class hE extends Hde{constructor(e){super(),this.type="Path",this.currentPoint=new Ft,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new q8(this.currentPoint.clone(),new Ft(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const o=new X8(this.currentPoint.clone(),new Ft(e,n),new Ft(r,i));return this.curves.push(o),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,o,s){const a=new G8(this.currentPoint.clone(),new Ft(e,n),new Ft(r,i),new Ft(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new K8(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,o,s){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,r,i,o,s),this}absarc(e,n,r,i,o,s){return this.absellipse(e,n,r,r,i,o,s),this}ellipse(e,n,r,i,o,s,a,l){const d=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+d,n+h,r,i,o,s,a,l),this}absellipse(e,n,r,i,o,s,a,l){const d=new EL(e,n,r,i,o,s,a,l);if(this.curves.length>0){const p=d.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(d);const h=d.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class mT extends Pr{constructor(e=[new Ft(0,-.5),new Ft(.5,0),new Ft(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=Yo(i,0,Math.PI*2);const o=[],s=[],a=[],l=[],d=[],h=1/n,p=new Oe,g=new Ft,v=new Oe,x=new Oe,b=new Oe;let w=0,S=0;for(let C=0;C<=e.length-1;C++)switch(C){case 0:w=e[C+1].x-e[C].x,S=e[C+1].y-e[C].y,v.x=S*1,v.y=-w,v.z=S*0,b.copy(v),v.normalize(),l.push(v.x,v.y,v.z);break;case e.length-1:l.push(b.x,b.y,b.z);break;default:w=e[C+1].x-e[C].x,S=e[C+1].y-e[C].y,v.x=S*1,v.y=-w,v.z=S*0,x.copy(v),v.x+=b.x,v.y+=b.y,v.z+=b.z,v.normalize(),l.push(v.x,v.y,v.z),b.copy(x)}for(let C=0;C<=n;C++){const A=r+C*h*i,P=Math.sin(A),k=Math.cos(A);for(let F=0;F<=e.length-1;F++){p.x=e[F].x*P,p.y=e[F].y,p.z=e[F].x*k,s.push(p.x,p.y,p.z),g.x=C/n,g.y=F/(e.length-1),a.push(g.x,g.y);const B=l[3*F+0]*P,W=l[3*F+1],J=l[3*F+0]*k;d.push(B,W,J)}}for(let C=0;C<n;C++)for(let A=0;A<e.length-1;A++){const P=A+C*e.length,k=P,F=P+e.length,B=P+e.length+1,W=P+1;o.push(k,F,W),o.push(B,W,F)}this.setIndex(o),this.setAttribute("position",new Jn(s,3)),this.setAttribute("uv",new Jn(a,2)),this.setAttribute("normal",new Jn(d,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mT(e.points,e.segments,e.phiStart,e.phiLength)}}class TL extends mT{constructor(e=1,n=1,r=4,i=8){const o=new hE;o.absarc(0,-n/2,e,Math.PI*1.5,0),o.absarc(0,n/2,e,0,Math.PI*.5),super(o.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:r,radialSegments:i}}static fromJSON(e){return new TL(e.radius,e.length,e.capSegments,e.radialSegments)}}class CL extends Pr{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const o=[],s=[],a=[],l=[],d=new Oe,h=new Ft;s.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let p=0,g=3;p<=n;p++,g+=3){const v=r+p/n*i;d.x=e*Math.cos(v),d.y=e*Math.sin(v),s.push(d.x,d.y,d.z),a.push(0,0,1),h.x=(s[g]/e+1)/2,h.y=(s[g+1]/e+1)/2,l.push(h.x,h.y)}for(let p=1;p<=n;p++)o.push(p,p+1,0);this.setIndex(o),this.setAttribute("position",new Jn(s,3)),this.setAttribute("normal",new Jn(a,3)),this.setAttribute("uv",new Jn(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new CL(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class yw extends Pr{constructor(e=1,n=1,r=1,i=32,o=1,s=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l};const d=this;i=Math.floor(i),o=Math.floor(o);const h=[],p=[],g=[],v=[];let x=0;const b=[],w=r/2;let S=0;C(),s===!1&&(e>0&&A(!0),n>0&&A(!1)),this.setIndex(h),this.setAttribute("position",new Jn(p,3)),this.setAttribute("normal",new Jn(g,3)),this.setAttribute("uv",new Jn(v,2));function C(){const P=new Oe,k=new Oe;let F=0;const B=(n-e)/r;for(let W=0;W<=o;W++){const J=[],H=W/o,Y=H*(n-e)+e;for(let le=0;le<=i;le++){const pe=le/i,re=pe*l+a,me=Math.sin(re),he=Math.cos(re);k.x=Y*me,k.y=-H*r+w,k.z=Y*he,p.push(k.x,k.y,k.z),P.set(me,B,he).normalize(),g.push(P.x,P.y,P.z),v.push(pe,1-H),J.push(x++)}b.push(J)}for(let W=0;W<i;W++)for(let J=0;J<o;J++){const H=b[J][W],Y=b[J+1][W],le=b[J+1][W+1],pe=b[J][W+1];h.push(H,Y,pe),h.push(Y,le,pe),F+=6}d.addGroup(S,F,0),S+=F}function A(P){const k=x,F=new Ft,B=new Oe;let W=0;const J=P===!0?e:n,H=P===!0?1:-1;for(let le=1;le<=i;le++)p.push(0,w*H,0),g.push(0,H,0),v.push(.5,.5),x++;const Y=x;for(let le=0;le<=i;le++){const re=le/i*l+a,me=Math.cos(re),he=Math.sin(re);B.x=J*he,B.y=w*H,B.z=J*me,p.push(B.x,B.y,B.z),g.push(0,H,0),F.x=me*.5+.5,F.y=he*.5*H+.5,v.push(F.x,F.y),x++}for(let le=0;le<i;le++){const pe=k+le,re=Y+le;P===!0?h.push(re,re+1,pe):h.push(re+1,re,pe),W+=3}d.addGroup(S,W,P===!0?1:2),S+=W}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yw(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class AL extends yw{constructor(e=1,n=1,r=32,i=1,o=!1,s=0,a=Math.PI*2){super(0,e,n,r,i,o,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:s,thetaLength:a}}static fromJSON(e){return new AL(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Jy extends Pr{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const o=[],s=[];a(i),d(r),h(),this.setAttribute("position",new Jn(o,3)),this.setAttribute("normal",new Jn(o.slice(),3)),this.setAttribute("uv",new Jn(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(C){const A=new Oe,P=new Oe,k=new Oe;for(let F=0;F<n.length;F+=3)v(n[F+0],A),v(n[F+1],P),v(n[F+2],k),l(A,P,k,C)}function l(C,A,P,k){const F=k+1,B=[];for(let W=0;W<=F;W++){B[W]=[];const J=C.clone().lerp(P,W/F),H=A.clone().lerp(P,W/F),Y=F-W;for(let le=0;le<=Y;le++)le===0&&W===F?B[W][le]=J:B[W][le]=J.clone().lerp(H,le/Y)}for(let W=0;W<F;W++)for(let J=0;J<2*(F-W)-1;J++){const H=Math.floor(J/2);J%2===0?(g(B[W][H+1]),g(B[W+1][H]),g(B[W][H])):(g(B[W][H+1]),g(B[W+1][H+1]),g(B[W+1][H]))}}function d(C){const A=new Oe;for(let P=0;P<o.length;P+=3)A.x=o[P+0],A.y=o[P+1],A.z=o[P+2],A.normalize().multiplyScalar(C),o[P+0]=A.x,o[P+1]=A.y,o[P+2]=A.z}function h(){const C=new Oe;for(let A=0;A<o.length;A+=3){C.x=o[A+0],C.y=o[A+1],C.z=o[A+2];const P=w(C)/2/Math.PI+.5,k=S(C)/Math.PI+.5;s.push(P,1-k)}x(),p()}function p(){for(let C=0;C<s.length;C+=6){const A=s[C+0],P=s[C+2],k=s[C+4],F=Math.max(A,P,k),B=Math.min(A,P,k);F>.9&&B<.1&&(A<.2&&(s[C+0]+=1),P<.2&&(s[C+2]+=1),k<.2&&(s[C+4]+=1))}}function g(C){o.push(C.x,C.y,C.z)}function v(C,A){const P=C*3;A.x=e[P+0],A.y=e[P+1],A.z=e[P+2]}function x(){const C=new Oe,A=new Oe,P=new Oe,k=new Oe,F=new Ft,B=new Ft,W=new Ft;for(let J=0,H=0;J<o.length;J+=9,H+=6){C.set(o[J+0],o[J+1],o[J+2]),A.set(o[J+3],o[J+4],o[J+5]),P.set(o[J+6],o[J+7],o[J+8]),F.set(s[H+0],s[H+1]),B.set(s[H+2],s[H+3]),W.set(s[H+4],s[H+5]),k.copy(C).add(A).add(P).divideScalar(3);const Y=w(k);b(F,H+0,C,Y),b(B,H+2,A,Y),b(W,H+4,P,Y)}}function b(C,A,P,k){k<0&&C.x===1&&(s[A]=C.x-1),P.x===0&&P.z===0&&(s[A]=k/2/Math.PI+.5)}function w(C){return Math.atan2(C.z,-C.x)}function S(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jy(e.vertices,e.indices,e.radius,e.details)}}class gT extends Jy{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,s,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new gT(e.radius,e.detail)}}const EA=new Oe,TA=new Oe,hz=new Oe,CA=new du;class Wde extends Pr{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),o=Math.cos(A0*n),s=e.getIndex(),a=e.getAttribute("position"),l=s?s.count:a.count,d=[0,0,0],h=["a","b","c"],p=new Array(3),g={},v=[];for(let x=0;x<l;x+=3){s?(d[0]=s.getX(x),d[1]=s.getX(x+1),d[2]=s.getX(x+2)):(d[0]=x,d[1]=x+1,d[2]=x+2);const{a:b,b:w,c:S}=CA;if(b.fromBufferAttribute(a,d[0]),w.fromBufferAttribute(a,d[1]),S.fromBufferAttribute(a,d[2]),CA.getNormal(hz),p[0]=`${Math.round(b.x*i)},${Math.round(b.y*i)},${Math.round(b.z*i)}`,p[1]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,p[2]=`${Math.round(S.x*i)},${Math.round(S.y*i)},${Math.round(S.z*i)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let C=0;C<3;C++){const A=(C+1)%3,P=p[C],k=p[A],F=CA[h[C]],B=CA[h[A]],W=`${P}_${k}`,J=`${k}_${P}`;J in g&&g[J]?(hz.dot(g[J].normal)<=o&&(v.push(F.x,F.y,F.z),v.push(B.x,B.y,B.z)),g[J]=null):W in g||(g[W]={index0:d[C],index1:d[A],normal:hz.clone()})}}for(const x in g)if(g[x]){const{index0:b,index1:w}=g[x];EA.fromBufferAttribute(a,b),TA.fromBufferAttribute(a,w),v.push(EA.x,EA.y,EA.z),v.push(TA.x,TA.y,TA.z)}this.setAttribute("position",new Jn(v,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class I0 extends hE{constructor(e){super(e),this.uuid=vu(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new hE().fromJSON(i))}return this}}const Umt={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let o=Gde(t,0,i,n,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,d,h,p,g,v;if(r&&(o=qmt(t,e,o,n)),t.length>80*n){a=d=t[0],l=h=t[1];for(let x=n;x<i;x+=n)p=t[x],g=t[x+1],p<a&&(a=p),g<l&&(l=g),p>d&&(d=p),g>h&&(h=g);v=Math.max(d-a,h-l),v=v!==0?32767/v:0}return fE(o,s,n,a,l,v,0),s}};function Gde(t,e,n,r,i){let o,s;if(i===igt(t,e,n,r)>0)for(o=e;o<n;o+=r)s=QZ(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=QZ(o,t[o],t[o+1],s);return s&&PL(s,s.next)&&(mE(s),s=s.next),s}function J0(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(PL(n,n.next)||Fo(n.prev,n,n.next)===0)){if(mE(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function fE(t,e,n,r,i,o,s){if(!t)return;!s&&o&&Jmt(t,r,i,o);let a=t,l,d;for(;t.prev!==t.next;){if(l=t.prev,d=t.next,o?Hmt(t,r,i,o):Vmt(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(d.i/n|0),mE(t),t=d.next,a=d.next;continue}if(t=d,t===a){s?s===1?(t=Wmt(J0(t),e,n),fE(t,e,n,r,i,o,2)):s===2&&Gmt(t,e,n,r,i,o):fE(J0(t),e,n,r,i,o,1);break}}}function Vmt(t){const e=t.prev,n=t,r=t.next;if(Fo(e,n,r)>=0)return!1;const i=e.x,o=n.x,s=r.x,a=e.y,l=n.y,d=r.y,h=i<o?i<s?i:s:o<s?o:s,p=a<l?a<d?a:d:l<d?l:d,g=i>o?i>s?i:s:o>s?o:s,v=a>l?a>d?a:d:l>d?l:d;let x=r.next;for(;x!==e;){if(x.x>=h&&x.x<=g&&x.y>=p&&x.y<=v&&db(i,a,o,l,s,d,x.x,x.y)&&Fo(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function Hmt(t,e,n,r){const i=t.prev,o=t,s=t.next;if(Fo(i,o,s)>=0)return!1;const a=i.x,l=o.x,d=s.x,h=i.y,p=o.y,g=s.y,v=a<l?a<d?a:d:l<d?l:d,x=h<p?h<g?h:g:p<g?p:g,b=a>l?a>d?a:d:l>d?l:d,w=h>p?h>g?h:g:p>g?p:g,S=A5(v,x,e,n,r),C=A5(b,w,e,n,r);let A=t.prevZ,P=t.nextZ;for(;A&&A.z>=S&&P&&P.z<=C;){if(A.x>=v&&A.x<=b&&A.y>=x&&A.y<=w&&A!==i&&A!==s&&db(a,h,l,p,d,g,A.x,A.y)&&Fo(A.prev,A,A.next)>=0||(A=A.prevZ,P.x>=v&&P.x<=b&&P.y>=x&&P.y<=w&&P!==i&&P!==s&&db(a,h,l,p,d,g,P.x,P.y)&&Fo(P.prev,P,P.next)>=0))return!1;P=P.nextZ}for(;A&&A.z>=S;){if(A.x>=v&&A.x<=b&&A.y>=x&&A.y<=w&&A!==i&&A!==s&&db(a,h,l,p,d,g,A.x,A.y)&&Fo(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;P&&P.z<=C;){if(P.x>=v&&P.x<=b&&P.y>=x&&P.y<=w&&P!==i&&P!==s&&db(a,h,l,p,d,g,P.x,P.y)&&Fo(P.prev,P,P.next)>=0)return!1;P=P.nextZ}return!0}function Wmt(t,e,n){let r=t;do{const i=r.prev,o=r.next.next;!PL(i,o)&&qde(i,r,r.next,o)&&pE(i,o)&&pE(o,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(o.i/n|0),mE(r),mE(r.next),r=t=o),r=r.next}while(r!==t);return J0(r)}function Gmt(t,e,n,r,i,o){let s=t;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&tgt(s,a)){let l=Xde(s,a);s=J0(s,s.next),l=J0(l,l.next),fE(s,e,n,r,i,o,0),fE(l,e,n,r,i,o,0);return}a=a.next}s=s.next}while(s!==t)}function qmt(t,e,n,r){const i=[];let o,s,a,l,d;for(o=0,s=e.length;o<s;o++)a=e[o]*r,l=o<s-1?e[o+1]*r:t.length,d=Gde(t,a,l,r,!1),d===d.next&&(d.steiner=!0),i.push(egt(d));for(i.sort(Xmt),o=0;o<i.length;o++)n=Ymt(i[o],n);return n}function Xmt(t,e){return t.x-e.x}function Ymt(t,e){const n=Kmt(t,e);if(!n)return e;const r=Xde(n,t);return J0(r,r.next),J0(n,n.next)}function Kmt(t,e){let n=e,r=-1/0,i;const o=t.x,s=t.y;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){const g=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(g<=o&&g>r&&(r=g,i=n.x<n.next.x?n:n.next,g===o))return i}n=n.next}while(n!==e);if(!i)return null;const a=i,l=i.x,d=i.y;let h=1/0,p;n=i;do o>=n.x&&n.x>=l&&o!==n.x&&db(s<d?o:r,s,l,d,s<d?r:o,s,n.x,n.y)&&(p=Math.abs(s-n.y)/(o-n.x),pE(n,t)&&(p<h||p===h&&(n.x>i.x||n.x===i.x&&Zmt(i,n)))&&(i=n,h=p)),n=n.next;while(n!==a);return i}function Zmt(t,e){return Fo(t.prev,t,e.prev)<0&&Fo(e.next,t,t.next)<0}function Jmt(t,e,n,r){let i=t;do i.z===0&&(i.z=A5(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,Qmt(i)}function Qmt(t){let e,n,r,i,o,s,a,l,d=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<d&&(a++,r=r.nextZ,!!r);e++);for(l=d;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,d*=2}while(s>1);return t}function A5(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function egt(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function db(t,e,n,r,i,o,s,a){return(i-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(r-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(i-s)*(r-a)}function tgt(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!ngt(t,e)&&(pE(t,e)&&pE(e,t)&&rgt(t,e)&&(Fo(t.prev,t,e.prev)||Fo(t,e.prev,e))||PL(t,e)&&Fo(t.prev,t,t.next)>0&&Fo(e.prev,e,e.next)>0)}function Fo(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function PL(t,e){return t.x===e.x&&t.y===e.y}function qde(t,e,n,r){const i=PA(Fo(t,e,n)),o=PA(Fo(t,e,r)),s=PA(Fo(n,r,t)),a=PA(Fo(n,r,e));return!!(i!==o&&s!==a||i===0&&AA(t,n,e)||o===0&&AA(t,r,e)||s===0&&AA(n,t,r)||a===0&&AA(n,e,r))}function AA(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function PA(t){return t>0?1:t<0?-1:0}function ngt(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&qde(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function pE(t,e){return Fo(t.prev,t,t.next)<0?Fo(t,e,t.next)>=0&&Fo(t,t.prev,e)>=0:Fo(t,e,t.prev)<0||Fo(t,t.next,e)<0}function rgt(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function Xde(t,e){const n=new P5(t.i,t.x,t.y),r=new P5(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function QZ(t,e,n,r){const i=new P5(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function mE(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function P5(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function igt(t,e,n,r){let i=0;for(let o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}class Vf{static area(e){const n=e.length;let r=0;for(let i=n-1,o=0;o<n;i=o++)r+=e[i].x*e[o].y-e[o].x*e[i].y;return r*.5}static isClockWise(e){return Vf.area(e)<0}static triangulateShape(e,n){const r=[],i=[],o=[];eJ(e),tJ(r,e);let s=e.length;n.forEach(eJ);for(let l=0;l<n.length;l++)i.push(s),s+=n[l].length,tJ(r,n[l]);const a=Umt.triangulate(r,i);for(let l=0;l<a.length;l+=3)o.push(a.slice(l,l+3));return o}}function eJ(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function tJ(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class IL extends Pr{constructor(e=new I0([new Ft(.5,.5),new Ft(-.5,.5),new Ft(-.5,-.5),new Ft(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],o=[];for(let a=0,l=e.length;a<l;a++){const d=e[a];s(d)}this.setAttribute("position",new Jn(i,3)),this.setAttribute("uv",new Jn(o,2)),this.computeVertexNormals();function s(a){const l=[],d=n.curveSegments!==void 0?n.curveSegments:12,h=n.steps!==void 0?n.steps:1,p=n.depth!==void 0?n.depth:1;let g=n.bevelEnabled!==void 0?n.bevelEnabled:!0,v=n.bevelThickness!==void 0?n.bevelThickness:.2,x=n.bevelSize!==void 0?n.bevelSize:v-.1,b=n.bevelOffset!==void 0?n.bevelOffset:0,w=n.bevelSegments!==void 0?n.bevelSegments:3;const S=n.extrudePath,C=n.UVGenerator!==void 0?n.UVGenerator:ogt;let A,P=!1,k,F,B,W;S&&(A=S.getSpacedPoints(h),P=!0,g=!1,k=S.computeFrenetFrames(h,!1),F=new Oe,B=new Oe,W=new Oe),g||(w=0,v=0,x=0,b=0);const J=a.extractPoints(d);let H=J.shape;const Y=J.holes;if(!Vf.isClockWise(H)){H=H.reverse();for(let ge=0,et=Y.length;ge<et;ge++){const Ke=Y[ge];Vf.isClockWise(Ke)&&(Y[ge]=Ke.reverse())}}const pe=Vf.triangulateShape(H,Y),re=H;for(let ge=0,et=Y.length;ge<et;ge++){const Ke=Y[ge];H=H.concat(Ke)}function me(ge,et,Ke){return et||console.error("THREE.ExtrudeGeometry: vec does not exist"),ge.clone().addScaledVector(et,Ke)}const he=H.length,we=pe.length;function ee(ge,et,Ke){let Tt,ke,Vt;const zt=ge.x-et.x,$t=ge.y-et.y,Qt=Ke.x-ge.x,Ie=Ke.y-ge.y,Me=zt*zt+$t*$t,wt=zt*Ie-$t*Qt;if(Math.abs(wt)>Number.EPSILON){const St=Math.sqrt(Me),Bt=Math.sqrt(Qt*Qt+Ie*Ie),jt=et.x-$t/St,Rn=et.y+zt/St,ft=Ke.x-Ie/Bt,Rt=Ke.y+Qt/Bt,Xt=((ft-jt)*Ie-(Rt-Rn)*Qt)/(zt*Ie-$t*Qt);Tt=jt+zt*Xt-ge.x,ke=Rn+$t*Xt-ge.y;const Tn=Tt*Tt+ke*ke;if(Tn<=2)return new Ft(Tt,ke);Vt=Math.sqrt(Tn/2)}else{let St=!1;zt>Number.EPSILON?Qt>Number.EPSILON&&(St=!0):zt<-Number.EPSILON?Qt<-Number.EPSILON&&(St=!0):Math.sign($t)===Math.sign(Ie)&&(St=!0),St?(Tt=-$t,ke=zt,Vt=Math.sqrt(Me)):(Tt=zt,ke=$t,Vt=Math.sqrt(Me/2))}return new Ft(Tt/Vt,ke/Vt)}const ye=[];for(let ge=0,et=re.length,Ke=et-1,Tt=ge+1;ge<et;ge++,Ke++,Tt++)Ke===et&&(Ke=0),Tt===et&&(Tt=0),ye[ge]=ee(re[ge],re[Ke],re[Tt]);const be=[];let Le,je=ye.concat();for(let ge=0,et=Y.length;ge<et;ge++){const Ke=Y[ge];Le=[];for(let Tt=0,ke=Ke.length,Vt=ke-1,zt=Tt+1;Tt<ke;Tt++,Vt++,zt++)Vt===ke&&(Vt=0),zt===ke&&(zt=0),Le[Tt]=ee(Ke[Tt],Ke[Vt],Ke[zt]);be.push(Le),je=je.concat(Le)}for(let ge=0;ge<w;ge++){const et=ge/w,Ke=v*Math.cos(et*Math.PI/2),Tt=x*Math.sin(et*Math.PI/2)+b;for(let ke=0,Vt=re.length;ke<Vt;ke++){const zt=me(re[ke],ye[ke],Tt);It(zt.x,zt.y,-Ke)}for(let ke=0,Vt=Y.length;ke<Vt;ke++){const zt=Y[ke];Le=be[ke];for(let $t=0,Qt=zt.length;$t<Qt;$t++){const Ie=me(zt[$t],Le[$t],Tt);It(Ie.x,Ie.y,-Ke)}}}const dt=x+b;for(let ge=0;ge<he;ge++){const et=g?me(H[ge],je[ge],dt):H[ge];P?(B.copy(k.normals[0]).multiplyScalar(et.x),F.copy(k.binormals[0]).multiplyScalar(et.y),W.copy(A[0]).add(B).add(F),It(W.x,W.y,W.z)):It(et.x,et.y,0)}for(let ge=1;ge<=h;ge++)for(let et=0;et<he;et++){const Ke=g?me(H[et],je[et],dt):H[et];P?(B.copy(k.normals[ge]).multiplyScalar(Ke.x),F.copy(k.binormals[ge]).multiplyScalar(Ke.y),W.copy(A[ge]).add(B).add(F),It(W.x,W.y,W.z)):It(Ke.x,Ke.y,p/h*ge)}for(let ge=w-1;ge>=0;ge--){const et=ge/w,Ke=v*Math.cos(et*Math.PI/2),Tt=x*Math.sin(et*Math.PI/2)+b;for(let ke=0,Vt=re.length;ke<Vt;ke++){const zt=me(re[ke],ye[ke],Tt);It(zt.x,zt.y,p+Ke)}for(let ke=0,Vt=Y.length;ke<Vt;ke++){const zt=Y[ke];Le=be[ke];for(let $t=0,Qt=zt.length;$t<Qt;$t++){const Ie=me(zt[$t],Le[$t],Tt);P?It(Ie.x,Ie.y+A[h-1].y,A[h-1].x+Ke):It(Ie.x,Ie.y,p+Ke)}}}Be(),ot();function Be(){const ge=i.length/3;if(g){let et=0,Ke=he*et;for(let Tt=0;Tt<we;Tt++){const ke=pe[Tt];Lt(ke[2]+Ke,ke[1]+Ke,ke[0]+Ke)}et=h+w*2,Ke=he*et;for(let Tt=0;Tt<we;Tt++){const ke=pe[Tt];Lt(ke[0]+Ke,ke[1]+Ke,ke[2]+Ke)}}else{for(let et=0;et<we;et++){const Ke=pe[et];Lt(Ke[2],Ke[1],Ke[0])}for(let et=0;et<we;et++){const Ke=pe[et];Lt(Ke[0]+he*h,Ke[1]+he*h,Ke[2]+he*h)}}r.addGroup(ge,i.length/3-ge,0)}function ot(){const ge=i.length/3;let et=0;at(re,et),et+=re.length;for(let Ke=0,Tt=Y.length;Ke<Tt;Ke++){const ke=Y[Ke];at(ke,et),et+=ke.length}r.addGroup(ge,i.length/3-ge,1)}function at(ge,et){let Ke=ge.length;for(;--Ke>=0;){const Tt=Ke;let ke=Ke-1;ke<0&&(ke=ge.length-1);for(let Vt=0,zt=h+w*2;Vt<zt;Vt++){const $t=he*Vt,Qt=he*(Vt+1),Ie=et+Tt+$t,Me=et+ke+$t,wt=et+ke+Qt,St=et+Tt+Qt;lt(Ie,Me,wt,St)}}}function It(ge,et,Ke){l.push(ge),l.push(et),l.push(Ke)}function Lt(ge,et,Ke){Je(ge),Je(et),Je(Ke);const Tt=i.length/3,ke=C.generateTopUV(r,i,Tt-3,Tt-2,Tt-1);Qe(ke[0]),Qe(ke[1]),Qe(ke[2])}function lt(ge,et,Ke,Tt){Je(ge),Je(et),Je(Tt),Je(et),Je(Ke),Je(Tt);const ke=i.length/3,Vt=C.generateSideWallUV(r,i,ke-6,ke-3,ke-2,ke-1);Qe(Vt[0]),Qe(Vt[1]),Qe(Vt[3]),Qe(Vt[1]),Qe(Vt[2]),Qe(Vt[3])}function Je(ge){i.push(l[ge*3+0]),i.push(l[ge*3+1]),i.push(l[ge*3+2])}function Qe(ge){o.push(ge.x),o.push(ge.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return sgt(n,r,e)}static fromJSON(e,n){const r=[];for(let o=0,s=e.shapes.length;o<s;o++){const a=n[e.shapes[o]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new MR[i.type]().fromJSON(i)),new IL(r,e.options)}}const ogt={generateTopUV:function(t,e,n,r,i){const o=e[n*3],s=e[n*3+1],a=e[r*3],l=e[r*3+1],d=e[i*3],h=e[i*3+1];return[new Ft(o,s),new Ft(a,l),new Ft(d,h)]},generateSideWallUV:function(t,e,n,r,i,o){const s=e[n*3],a=e[n*3+1],l=e[n*3+2],d=e[r*3],h=e[r*3+1],p=e[r*3+2],g=e[i*3],v=e[i*3+1],x=e[i*3+2],b=e[o*3],w=e[o*3+1],S=e[o*3+2];return Math.abs(a-h)<Math.abs(s-d)?[new Ft(s,1-l),new Ft(d,1-p),new Ft(g,1-x),new Ft(b,1-S)]:[new Ft(a,1-l),new Ft(h,1-p),new Ft(v,1-x),new Ft(w,1-S)]}};function sgt(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const o=t[r];n.shapes.push(o.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class RL extends Jy{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,o,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new RL(e.radius,e.detail)}}class yT extends Jy{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new yT(e.radius,e.detail)}}class kL extends Pr{constructor(e=.5,n=1,r=32,i=1,o=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:o,thetaLength:s},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],d=[],h=[];let p=e;const g=(n-e)/i,v=new Oe,x=new Ft;for(let b=0;b<=i;b++){for(let w=0;w<=r;w++){const S=o+w/r*s;v.x=p*Math.cos(S),v.y=p*Math.sin(S),l.push(v.x,v.y,v.z),d.push(0,0,1),x.x=(v.x/n+1)/2,x.y=(v.y/n+1)/2,h.push(x.x,x.y)}p+=g}for(let b=0;b<i;b++){const w=b*(r+1);for(let S=0;S<r;S++){const C=S+w,A=C,P=C+r+1,k=C+r+2,F=C+1;a.push(A,P,F),a.push(P,k,F)}}this.setIndex(a),this.setAttribute("position",new Jn(l,3)),this.setAttribute("normal",new Jn(d,3)),this.setAttribute("uv",new Jn(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kL(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class OL extends Pr{constructor(e=new I0([new Ft(0,.5),new Ft(-.5,-.5),new Ft(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],o=[],s=[];let a=0,l=0;if(Array.isArray(e)===!1)d(e);else for(let h=0;h<e.length;h++)d(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new Jn(i,3)),this.setAttribute("normal",new Jn(o,3)),this.setAttribute("uv",new Jn(s,2));function d(h){const p=i.length/3,g=h.extractPoints(n);let v=g.shape;const x=g.holes;Vf.isClockWise(v)===!1&&(v=v.reverse());for(let w=0,S=x.length;w<S;w++){const C=x[w];Vf.isClockWise(C)===!0&&(x[w]=C.reverse())}const b=Vf.triangulateShape(v,x);for(let w=0,S=x.length;w<S;w++){const C=x[w];v=v.concat(C)}for(let w=0,S=v.length;w<S;w++){const C=v[w];i.push(C.x,C.y,0),o.push(0,0,1),s.push(C.x,C.y)}for(let w=0,S=b.length;w<S;w++){const C=b[w],A=C[0]+p,P=C[1]+p,k=C[2]+p;r.push(A,P,k),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return agt(n,e)}static fromJSON(e,n){const r=[];for(let i=0,o=e.shapes.length;i<o;i++){const s=n[e.shapes[i]];r.push(s)}return new OL(r,e.curveSegments)}}function agt(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class vw extends Pr{constructor(e=1,n=32,r=16,i=0,o=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:o,thetaStart:s,thetaLength:a},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(s+a,Math.PI);let d=0;const h=[],p=new Oe,g=new Oe,v=[],x=[],b=[],w=[];for(let S=0;S<=r;S++){const C=[],A=S/r;let P=0;S===0&&s===0?P=.5/n:S===r&&l===Math.PI&&(P=-.5/n);for(let k=0;k<=n;k++){const F=k/n;p.x=-e*Math.cos(i+F*o)*Math.sin(s+A*a),p.y=e*Math.cos(s+A*a),p.z=e*Math.sin(i+F*o)*Math.sin(s+A*a),x.push(p.x,p.y,p.z),g.copy(p).normalize(),b.push(g.x,g.y,g.z),w.push(F+P,1-A),C.push(d++)}h.push(C)}for(let S=0;S<r;S++)for(let C=0;C<n;C++){const A=h[S][C+1],P=h[S][C],k=h[S+1][C],F=h[S+1][C+1];(S!==0||s>0)&&v.push(A,P,F),(S!==r-1||l<Math.PI)&&v.push(P,k,F)}this.setIndex(v),this.setAttribute("position",new Jn(x,3)),this.setAttribute("normal",new Jn(b,3)),this.setAttribute("uv",new Jn(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vw(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class LL extends Jy{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new LL(e.radius,e.detail)}}class DL extends Pr{constructor(e=1,n=.4,r=12,i=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:o},r=Math.floor(r),i=Math.floor(i);const s=[],a=[],l=[],d=[],h=new Oe,p=new Oe,g=new Oe;for(let v=0;v<=r;v++)for(let x=0;x<=i;x++){const b=x/i*o,w=v/r*Math.PI*2;p.x=(e+n*Math.cos(w))*Math.cos(b),p.y=(e+n*Math.cos(w))*Math.sin(b),p.z=n*Math.sin(w),a.push(p.x,p.y,p.z),h.x=e*Math.cos(b),h.y=e*Math.sin(b),g.subVectors(p,h).normalize(),l.push(g.x,g.y,g.z),d.push(x/i),d.push(v/r)}for(let v=1;v<=r;v++)for(let x=1;x<=i;x++){const b=(i+1)*v+x-1,w=(i+1)*(v-1)+x-1,S=(i+1)*(v-1)+x,C=(i+1)*v+x;s.push(b,w,C),s.push(w,S,C)}this.setIndex(s),this.setAttribute("position",new Jn(a,3)),this.setAttribute("normal",new Jn(l,3)),this.setAttribute("uv",new Jn(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new DL(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class NL extends Pr{constructor(e=1,n=.4,r=64,i=8,o=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:o,q:s},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],d=[],h=[],p=new Oe,g=new Oe,v=new Oe,x=new Oe,b=new Oe,w=new Oe,S=new Oe;for(let A=0;A<=r;++A){const P=A/r*o*Math.PI*2;C(P,o,s,e,v),C(P+.01,o,s,e,x),w.subVectors(x,v),S.addVectors(x,v),b.crossVectors(w,S),S.crossVectors(b,w),b.normalize(),S.normalize();for(let k=0;k<=i;++k){const F=k/i*Math.PI*2,B=-n*Math.cos(F),W=n*Math.sin(F);p.x=v.x+(B*S.x+W*b.x),p.y=v.y+(B*S.y+W*b.y),p.z=v.z+(B*S.z+W*b.z),l.push(p.x,p.y,p.z),g.subVectors(p,v).normalize(),d.push(g.x,g.y,g.z),h.push(A/r),h.push(k/i)}}for(let A=1;A<=r;A++)for(let P=1;P<=i;P++){const k=(i+1)*(A-1)+(P-1),F=(i+1)*A+(P-1),B=(i+1)*A+P,W=(i+1)*(A-1)+P;a.push(k,F,W),a.push(F,B,W)}this.setIndex(a),this.setAttribute("position",new Jn(l,3)),this.setAttribute("normal",new Jn(d,3)),this.setAttribute("uv",new Jn(h,2));function C(A,P,k,F,B){const W=Math.cos(A),J=Math.sin(A),H=k/P*A,Y=Math.cos(H);B.x=F*(2+Y)*.5*W,B.y=F*(2+Y)*J*.5,B.z=F*Math.sin(H)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new NL(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class zL extends Pr{constructor(e=new Y8(new Oe(-1,-1,0),new Oe(-1,1,0),new Oe(1,1,0)),n=64,r=1,i=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:o};const s=e.computeFrenetFrames(n,o);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const a=new Oe,l=new Oe,d=new Ft;let h=new Oe;const p=[],g=[],v=[],x=[];b(),this.setIndex(x),this.setAttribute("position",new Jn(p,3)),this.setAttribute("normal",new Jn(g,3)),this.setAttribute("uv",new Jn(v,2));function b(){for(let A=0;A<n;A++)w(A);w(o===!1?n:0),C(),S()}function w(A){h=e.getPointAt(A/n,h);const P=s.normals[A],k=s.binormals[A];for(let F=0;F<=i;F++){const B=F/i*Math.PI*2,W=Math.sin(B),J=-Math.cos(B);l.x=J*P.x+W*k.x,l.y=J*P.y+W*k.y,l.z=J*P.z+W*k.z,l.normalize(),g.push(l.x,l.y,l.z),a.x=h.x+r*l.x,a.y=h.y+r*l.y,a.z=h.z+r*l.z,p.push(a.x,a.y,a.z)}}function S(){for(let A=1;A<=n;A++)for(let P=1;P<=i;P++){const k=(i+1)*(A-1)+(P-1),F=(i+1)*A+(P-1),B=(i+1)*A+P,W=(i+1)*(A-1)+P;x.push(k,F,W),x.push(F,B,W)}}function C(){for(let A=0;A<=n;A++)for(let P=0;P<=i;P++)d.x=A/n,d.y=P/i,v.push(d.x,d.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new zL(new MR[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Yde extends Pr{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new Oe,o=new Oe;if(e.index!==null){const s=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let d=0,h=l.length;d<h;++d){const p=l[d],g=p.start,v=p.count;for(let x=g,b=g+v;x<b;x+=3)for(let w=0;w<3;w++){const S=a.getX(x+w),C=a.getX(x+(w+1)%3);i.fromBufferAttribute(s,S),o.fromBufferAttribute(s,C),nJ(i,o,r)===!0&&(n.push(i.x,i.y,i.z),n.push(o.x,o.y,o.z))}}}else{const s=e.attributes.position;for(let a=0,l=s.count/3;a<l;a++)for(let d=0;d<3;d++){const h=3*a+d,p=3*a+(d+1)%3;i.fromBufferAttribute(s,h),o.fromBufferAttribute(s,p),nJ(i,o,r)===!0&&(n.push(i.x,i.y,i.z),n.push(o.x,o.y,o.z))}}this.setAttribute("position",new Jn(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function nJ(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var rJ=Object.freeze({__proto__:null,BoxGeometry:Zy,CapsuleGeometry:TL,CircleGeometry:CL,ConeGeometry:AL,CylinderGeometry:yw,DodecahedronGeometry:gT,EdgesGeometry:Wde,ExtrudeGeometry:IL,IcosahedronGeometry:RL,LatheGeometry:mT,OctahedronGeometry:yT,PlaneGeometry:mw,PolyhedronGeometry:Jy,RingGeometry:kL,ShapeGeometry:OL,SphereGeometry:vw,TetrahedronGeometry:LL,TorusGeometry:DL,TorusKnotGeometry:NL,TubeGeometry:zL,WireframeGeometry:Yde});class Kde extends Cs{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new In(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Zde extends Oh{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class vT extends Cs{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new In(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new In(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yy,this.normalScale=new Ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Tu,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Vh extends vT{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ft(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Yo(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new In(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new In(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new In(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Jde extends Cs{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new In(16777215),this.specular=new In(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new In(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yy,this.normalScale=new Ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Tu,this.combine=lT,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Qde extends Cs{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new In(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new In(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yy,this.normalScale=new Ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class ehe extends Cs{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yy,this.normalScale=new Ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class the extends Cs{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new In(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new In(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yy,this.normalScale=new Ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Tu,this.combine=lT,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class nhe extends Cs{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new In(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yy,this.normalScale=new Ft(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class rhe extends $a{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function g0(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function ihe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ohe(t){function e(i,o){return t[i]-t[o]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function I5(t,e,n){const r=t.length,i=new t.constructor(r);for(let o=0,s=0;s!==r;++o){const a=n[o]*e;for(let l=0;l!==e;++l)i[s++]=t[a+l]}return i}function Z8(t,e,n,r){let i=1,o=t[0];for(;o!==void 0&&o[r]===void 0;)o=t[i++];if(o===void 0)return;let s=o[r];if(s!==void 0)if(Array.isArray(s))do s=o[r],s!==void 0&&(e.push(o.time),n.push.apply(n,s)),o=t[i++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[r],s!==void 0&&(e.push(o.time),s.toArray(n,n.length)),o=t[i++];while(o!==void 0);else do s=o[r],s!==void 0&&(e.push(o.time),n.push(s)),o=t[i++];while(o!==void 0)}function lgt(t,e,n,r,i=30){const o=t.clone();o.name=e;const s=[];for(let l=0;l<o.tracks.length;++l){const d=o.tracks[l],h=d.getValueSize(),p=[],g=[];for(let v=0;v<d.times.length;++v){const x=d.times[v]*i;if(!(x<n||x>=r)){p.push(d.times[v]);for(let b=0;b<h;++b)g.push(d.values[v*h+b])}}p.length!==0&&(d.times=g0(p,d.times.constructor),d.values=g0(g,d.values.constructor),s.push(d))}o.tracks=s;let a=1/0;for(let l=0;l<o.tracks.length;++l)a>o.tracks[l].times[0]&&(a=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*a);return o.resetDuration(),o}function cgt(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,o=e/r;for(let s=0;s<i;++s){const a=n.tracks[s],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const d=t.tracks.find(function(S){return S.name===a.name&&S.ValueTypeName===l});if(d===void 0)continue;let h=0;const p=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=p/3);let g=0;const v=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=v/3);const x=a.times.length-1;let b;if(o<=a.times[0]){const S=h,C=p-h;b=a.values.slice(S,C)}else if(o>=a.times[x]){const S=x*p+h,C=S+p-h;b=a.values.slice(S,C)}else{const S=a.createInterpolant(),C=h,A=p-h;S.evaluate(o),b=S.resultBuffer.slice(C,A)}l==="quaternion"&&new Ts().fromArray(b).normalize().conjugate().toArray(b);const w=d.times.length;for(let S=0;S<w;++S){const C=S*v+g;if(l==="quaternion")Ts.multiplyQuaternionsFlat(d.values,C,b,0,d.values,C);else{const A=v-g*2;for(let P=0;P<A;++P)d.values[C+P]-=b[P]}}}return t.blendMode=C8,t}const ugt={convertArray:g0,isTypedArray:ihe,getKeyframeOrder:ohe,sortedArray:I5,flattenJSON:Z8,subclip:lgt,makeClipAdditive:cgt};class _w{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],o=n[r-1];e:{t:{let s;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<o)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(o=i,i=n[++r],e<i)break t}s=n.length;break n}if(!(e>=o)){const a=n[1];e<a&&(r=2,o=a);for(let l=r-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=o,o=n[--r-1],e>=o)break t}s=r,r=0;break n}break e}for(;r<s;){const a=r+s>>>1;e<n[a]?s=a:r=a+1}if(i=n[r],o=n[r-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,o,i)}return this.interpolate_(r,o,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,o=e*i;for(let s=0;s!==i;++s)n[s]=r[o+s];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class she extends _w{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:f0,endingEnd:f0}}intervalChanged_(e,n,r){const i=this.parameterPositions;let o=e-2,s=e+1,a=i[o],l=i[s];if(a===void 0)switch(this.getSettings_().endingStart){case p0:o=e,a=2*n-r;break;case oE:o=i.length-2,a=n+i[o]-i[o+1];break;default:o=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case p0:s=e,l=2*r-n;break;case oE:s=1,l=r+i[1]-i[0];break;default:s=e-1,l=n}const d=(r-n)*.5,h=this.valueSize;this._weightPrev=d/(n-a),this._weightNext=d/(l-r),this._offsetPrev=o*h,this._offsetNext=s*h}interpolate_(e,n,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,d=l-a,h=this._offsetPrev,p=this._offsetNext,g=this._weightPrev,v=this._weightNext,x=(r-n)/(i-n),b=x*x,w=b*x,S=-g*w+2*g*b-g*x,C=(1+g)*w+(-1.5-2*g)*b+(-.5+g)*x+1,A=(-1-v)*w+(1.5+v)*b+.5*x,P=v*w-v*b;for(let k=0;k!==a;++k)o[k]=S*s[h+k]+C*s[d+k]+A*s[l+k]+P*s[p+k];return o}}class J8 extends _w{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,d=l-a,h=(r-n)/(i-n),p=1-h;for(let g=0;g!==a;++g)o[g]=s[d+g]*p+s[l+g]*h;return o}}class ahe extends _w{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Hh{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=g0(n,this.TimeBufferType),this.values=g0(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:g0(e.times,Array),values:g0(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new ahe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new J8(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new she(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case S1:n=this.InterpolantFactoryMethodDiscrete;break;case K0:n=this.InterpolantFactoryMethodLinear;break;case _P:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return S1;case this.InterpolantFactoryMethodLinear:return K0;case this.InterpolantFactoryMethodSmooth:return _P}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let o=0,s=i-1;for(;o!==i&&r[o]<e;)++o;for(;s!==-1&&r[s]>n;)--s;if(++s,o!==0||s!==i){o>=s&&(s=Math.max(s,1),o=s-1);const a=this.getValueSize();this.times=r.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,o=r.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,s),e=!1;break}s=l}if(i!==void 0&&ihe(i))for(let a=0,l=i.length;a!==l;++a){const d=i[a];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,d),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===_P,o=e.length-1;let s=1;for(let a=1;a<o;++a){let l=!1;const d=e[a],h=e[a+1];if(d!==h&&(a!==1||d!==e[0]))if(i)l=!0;else{const p=a*r,g=p-r,v=p+r;for(let x=0;x!==r;++x){const b=n[p+x];if(b!==n[g+x]||b!==n[v+x]){l=!0;break}}}if(l){if(a!==s){e[s]=e[a];const p=a*r,g=s*r;for(let v=0;v!==r;++v)n[g+v]=n[p+v]}++s}}if(o>0){e[s]=e[o];for(let a=o*r,l=s*r,d=0;d!==r;++d)n[l+d]=n[a+d];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=n.slice(0,s*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}Hh.prototype.TimeBufferType=Float32Array;Hh.prototype.ValueBufferType=Float32Array;Hh.prototype.DefaultInterpolation=K0;class g_ extends Hh{}g_.prototype.ValueTypeName="bool";g_.prototype.ValueBufferType=Array;g_.prototype.DefaultInterpolation=S1;g_.prototype.InterpolantFactoryMethodLinear=void 0;g_.prototype.InterpolantFactoryMethodSmooth=void 0;class Q8 extends Hh{}Q8.prototype.ValueTypeName="color";class Q0 extends Hh{}Q0.prototype.ValueTypeName="number";class lhe extends _w{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(r-n)/(i-n);let d=e*a;for(let h=d+a;d!==h;d+=4)Ts.slerpFlat(o,0,s,d-a,s,d,l);return o}}class zy extends Hh{InterpolantFactoryMethodLinear(e){return new lhe(this.times,this.values,this.getValueSize(),e)}}zy.prototype.ValueTypeName="quaternion";zy.prototype.DefaultInterpolation=K0;zy.prototype.InterpolantFactoryMethodSmooth=void 0;class y_ extends Hh{}y_.prototype.ValueTypeName="string";y_.prototype.ValueBufferType=Array;y_.prototype.DefaultInterpolation=S1;y_.prototype.InterpolantFactoryMethodLinear=void 0;y_.prototype.InterpolantFactoryMethodSmooth=void 0;class e_ extends Hh{}e_.prototype.ValueTypeName="vector";class C1{constructor(e,n=-1,r,i=gL){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=vu(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let s=0,a=r.length;s!==a;++s)n.push(hgt(r[s]).scale(i));const o=new this(e.name,e.duration,n,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,s=r.length;o!==s;++o)n.push(Hh.toJSON(r[o]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const o=n.length,s=[];for(let a=0;a<o;a++){let l=[],d=[];l.push((a+o-1)%o,a,(a+1)%o),d.push(0,1,0);const h=ohe(l);l=I5(l,1,h),d=I5(d,1,h),!i&&l[0]===0&&(l.push(o),d.push(d[0])),s.push(new Q0(".morphTargetInfluences["+n[a].name+"]",l,d).scale(1/r))}return new this(e,-1,s)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const d=e[a],h=d.name.match(o);if(h&&h.length>1){const p=h[1];let g=i[p];g||(i[p]=g=[]),g.push(d)}}const s=[];for(const a in i)s.push(this.CreateFromMorphTargetSequence(a,i[a],n,r));return s}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(p,g,v,x,b){if(v.length!==0){const w=[],S=[];Z8(v,w,S,x),w.length!==0&&b.push(new p(g,w,S))}},i=[],o=e.name||"default",s=e.fps||30,a=e.blendMode;let l=e.length||-1;const d=e.hierarchy||[];for(let p=0;p<d.length;p++){const g=d[p].keys;if(!(!g||g.length===0))if(g[0].morphTargets){const v={};let x;for(x=0;x<g.length;x++)if(g[x].morphTargets)for(let b=0;b<g[x].morphTargets.length;b++)v[g[x].morphTargets[b]]=-1;for(const b in v){const w=[],S=[];for(let C=0;C!==g[x].morphTargets.length;++C){const A=g[x];w.push(A.time),S.push(A.morphTarget===b?1:0)}i.push(new Q0(".morphTargetInfluence["+b+"]",w,S))}l=v.length*s}else{const v=".bones["+n[p].name+"]";r(e_,v+".position",g,"pos",i),r(zy,v+".quaternion",g,"rot",i),r(e_,v+".scale",g,"scl",i)}}return i.length===0?null:new this(o,l,i,a)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const o=this.tracks[r];n=Math.max(n,o.times[o.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function dgt(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Q0;case"vector":case"vector2":case"vector3":case"vector4":return e_;case"color":return Q8;case"quaternion":return zy;case"bool":case"boolean":return g_;case"string":return y_}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function hgt(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=dgt(t.type);if(t.times===void 0){const n=[],r=[];Z8(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const sm={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class eV{constructor(e,n,r){const i=this;let o=!1,s=0,a=0,l;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(h){a++,o===!1&&i.onStart!==void 0&&i.onStart(h,s,a),o=!0},this.itemEnd=function(h){s++,i.onProgress!==void 0&&i.onProgress(h,s,a),s===a&&(o=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(h){i.onError!==void 0&&i.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,p){return d.push(h,p),this},this.removeHandler=function(h){const p=d.indexOf(h);return p!==-1&&d.splice(p,2),this},this.getHandler=function(h){for(let p=0,g=d.length;p<g;p+=2){const v=d[p],x=d[p+1];if(v.global&&(v.lastIndex=0),v.test(h))return x}return null}}}const che=new eV;class tc{constructor(e){this.manager=e!==void 0?e:che,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,o){r.load(e,i,n,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}tc.DEFAULT_MATERIAL_NAME="__DEFAULT";const Up={};class fgt extends Error{constructor(e,n){super(e),this.response=n}}class Lh extends tc{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=sm.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(o),this.manager.itemEnd(e)},0),o;if(Up[e]!==void 0){Up[e].push({onLoad:n,onProgress:r,onError:i});return}Up[e]=[],Up[e].push({onLoad:n,onProgress:r,onError:i});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(s).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const h=Up[e],p=d.body.getReader(),g=d.headers.get("Content-Length")||d.headers.get("X-File-Size"),v=g?parseInt(g):0,x=v!==0;let b=0;const w=new ReadableStream({start(S){C();function C(){p.read().then(({done:A,value:P})=>{if(A)S.close();else{b+=P.byteLength;const k=new ProgressEvent("progress",{lengthComputable:x,loaded:b,total:v});for(let F=0,B=h.length;F<B;F++){const W=h[F];W.onProgress&&W.onProgress(k)}S.enqueue(P),C()}})}}});return new Response(w)}else throw new fgt(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(l){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return d.json();default:if(a===void 0)return d.text();{const p=/charset="?([^;"\s]*)"?/i.exec(a),g=p&&p[1]?p[1].toLowerCase():void 0,v=new TextDecoder(g);return d.arrayBuffer().then(x=>v.decode(x))}}}).then(d=>{sm.add(e,d);const h=Up[e];delete Up[e];for(let p=0,g=h.length;p<g;p++){const v=h[p];v.onLoad&&v.onLoad(d)}}).catch(d=>{const h=Up[e];if(h===void 0)throw this.manager.itemError(e),d;delete Up[e];for(let p=0,g=h.length;p<g;p++){const v=h[p];v.onError&&v.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class pgt extends tc{constructor(e){super(e)}load(e,n,r,i){const o=this,s=new Lh(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{n(o.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=C1.parse(e[r]);n.push(i)}return n}}class mgt extends tc{constructor(e){super(e)}load(e,n,r,i){const o=this,s=[],a=new ML,l=new Lh(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(o.withCredentials);let d=0;function h(p){l.load(e[p],function(g){const v=o.parse(g,!0);s[p]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},d+=1,d===6&&(v.mipmapCount===1&&(a.minFilter=yo),a.image=s,a.format=v.format,a.needsUpdate=!0,n&&n(a))},r,i)}if(Array.isArray(e))for(let p=0,g=e.length;p<g;++p)h(p);else l.load(e,function(p){const g=o.parse(p,!0);if(g.isCubemap){const v=g.mipmaps.length/g.mipmapCount;for(let x=0;x<v;x++){s[x]={mipmaps:[]};for(let b=0;b<g.mipmapCount;b++)s[x].mipmaps.push(g.mipmaps[x*g.mipmapCount+b]),s[x].format=g.format,s[x].width=g.width,s[x].height=g.height}a.image=s}else a.image.width=g.width,a.image.height=g.height,a.mipmaps=g.mipmaps;g.mipmapCount===1&&(a.minFilter=yo),a.format=g.format,a.needsUpdate=!0,n&&n(a)},r,i);return a}}class gE extends tc{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=sm.get(e);if(s!==void 0)return o.manager.itemStart(e),setTimeout(function(){n&&n(s),o.manager.itemEnd(e)},0),s;const a=dE("img");function l(){h(),sm.add(e,this),n&&n(this),o.manager.itemEnd(e)}function d(p){h(),i&&i(p),o.manager.itemError(e),o.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",d,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(e),a.src=e,a}}class ggt extends tc{constructor(e){super(e)}load(e,n,r,i){const o=new uT;o.colorSpace=Ra;const s=new gE(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function l(d){s.load(e[d],function(h){o.images[d]=h,a++,a===6&&(o.needsUpdate=!0,n&&n(o))},void 0,i)}for(let d=0;d<e.length;++d)l(d);return o}}class ygt extends tc{constructor(e){super(e)}load(e,n,r,i){const o=this,s=new Ey,a=new Lh(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(o.withCredentials),a.load(e,function(l){let d;try{d=o.parse(l)}catch(h){if(i!==void 0)i(h);else{console.error(h);return}}d.image!==void 0?s.image=d.image:d.data!==void 0&&(s.image.width=d.width,s.image.height=d.height,s.image.data=d.data),s.wrapS=d.wrapS!==void 0?d.wrapS:Oa,s.wrapT=d.wrapT!==void 0?d.wrapT:Oa,s.magFilter=d.magFilter!==void 0?d.magFilter:yo,s.minFilter=d.minFilter!==void 0?d.minFilter:yo,s.anisotropy=d.anisotropy!==void 0?d.anisotropy:1,d.colorSpace!==void 0&&(s.colorSpace=d.colorSpace),d.flipY!==void 0&&(s.flipY=d.flipY),d.format!==void 0&&(s.format=d.format),d.type!==void 0&&(s.type=d.type),d.mipmaps!==void 0&&(s.mipmaps=d.mipmaps,s.minFilter=yd),d.mipmapCount===1&&(s.minFilter=yo),d.generateMipmaps!==void 0&&(s.generateMipmaps=d.generateMipmaps),s.needsUpdate=!0,n&&n(s,d)},r,i),s}}class uhe extends tc{constructor(e){super(e)}load(e,n,r,i){const o=new _o,s=new gE(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a,o.needsUpdate=!0,n!==void 0&&n(o)},r,i),o}}class Qy extends di{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new In(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class dhe extends Qy{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(di.DEFAULT_UP),this.updateMatrix(),this.groundColor=new In(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const fz=new Yn,iJ=new Oe,oJ=new Oe;class tV{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ft(512,512),this.map=null,this.mapPass=null,this.matrix=new Yn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new dT,this._frameExtents=new Ft(1,1),this._viewportCount=1,this._viewports=[new Ui(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;iJ.setFromMatrixPosition(e.matrixWorld),n.position.copy(iJ),oJ.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(oJ),n.updateMatrixWorld(),fz.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(fz),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(fz)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class vgt extends tV{constructor(){super(new No(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=M1*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,o=e.distance||n.far;(r!==n.fov||i!==n.aspect||o!==n.far)&&(n.fov=r,n.aspect=i,n.far=o,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class nV extends Qy{constructor(e,n,r=0,i=Math.PI/3,o=0,s=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(di.DEFAULT_UP),this.updateMatrix(),this.target=new di,this.distance=r,this.angle=i,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new vgt}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const sJ=new Yn,BS=new Oe,pz=new Oe;class _gt extends tV{constructor(){super(new No(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ft(4,2),this._viewportCount=6,this._viewports=[new Ui(2,1,1,1),new Ui(0,1,1,1),new Ui(3,1,1,1),new Ui(1,1,1,1),new Ui(3,0,1,1),new Ui(1,0,1,1)],this._cubeDirections=[new Oe(1,0,0),new Oe(-1,0,0),new Oe(0,0,1),new Oe(0,0,-1),new Oe(0,1,0),new Oe(0,-1,0)],this._cubeUps=[new Oe(0,1,0),new Oe(0,1,0),new Oe(0,1,0),new Oe(0,1,0),new Oe(0,0,1),new Oe(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,o=e.distance||r.far;o!==r.far&&(r.far=o,r.updateProjectionMatrix()),BS.setFromMatrixPosition(e.matrixWorld),r.position.copy(BS),pz.copy(r.position),pz.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(pz),r.updateMatrixWorld(),i.makeTranslation(-BS.x,-BS.y,-BS.z),sJ.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(sJ)}}class rV extends Qy{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new _gt}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class xgt extends tV{constructor(){super(new Rf(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class t_ extends Qy{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(di.DEFAULT_UP),this.updateMatrix(),this.target=new di,this.shadow=new xgt}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class hhe extends Qy{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class fhe extends Qy{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class phe{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Oe)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,o=e.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.282095),n.addScaledVector(s[1],.488603*i),n.addScaledVector(s[2],.488603*o),n.addScaledVector(s[3],.488603*r),n.addScaledVector(s[4],1.092548*(r*i)),n.addScaledVector(s[5],1.092548*(i*o)),n.addScaledVector(s[6],.315392*(3*o*o-1)),n.addScaledVector(s[7],1.092548*(r*o)),n.addScaledVector(s[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,o=e.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.886227),n.addScaledVector(s[1],2*.511664*i),n.addScaledVector(s[2],2*.511664*o),n.addScaledVector(s[3],2*.511664*r),n.addScaledVector(s[4],2*.429043*r*i),n.addScaledVector(s[5],2*.429043*i*o),n.addScaledVector(s[6],.743125*o*o-.247708),n.addScaledVector(s[7],2*.429043*r*o),n.addScaledVector(s[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,o=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*o,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*o,n[6]=.315392*(3*o*o-1),n[7]=1.092548*r*o,n[8]=.546274*(r*r-i*i)}}class mhe extends Qy{constructor(e=new phe,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class FL extends tc{constructor(e){super(e),this.textures={}}load(e,n,r,i){const o=this,s=new Lh(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{n(o.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(o){return n[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),n[o]}const i=FL.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new In().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const o in e.uniforms){const s=e.uniforms[o];switch(i.uniforms[o]={},s.type){case"t":i.uniforms[o].value=r(s.value);break;case"c":i.uniforms[o].value=new In().setHex(s.value);break;case"v2":i.uniforms[o].value=new Ft().fromArray(s.value);break;case"v3":i.uniforms[o].value=new Oe().fromArray(s.value);break;case"v4":i.uniforms[o].value=new Ui().fromArray(s.value);break;case"m3":i.uniforms[o].value=new Ir().fromArray(s.value);break;case"m4":i.uniforms[o].value=new Yn().fromArray(s.value);break;default:i.uniforms[o].value=s.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const o in e.extensions)i.extensions[o]=e.extensions[o];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),i.normalScale=new Ft().fromArray(o)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Ft().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:Kde,SpriteMaterial:j8,RawShaderMaterial:Zde,ShaderMaterial:Oh,PointsMaterial:SL,MeshPhysicalMaterial:Vh,MeshStandardMaterial:vT,MeshPhongMaterial:Jde,MeshToonMaterial:Qde,MeshNormalMaterial:ehe,MeshLambertMaterial:the,MeshDepthMaterial:F8,MeshDistanceMaterial:B8,MeshBasicMaterial:pu,MeshMatcapMaterial:nhe,LineDashedMaterial:rhe,LineBasicMaterial:$a,Material:Cs};return new n[e]}}class Ty{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class ghe extends Pr{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class yhe extends tc{constructor(e){super(e)}load(e,n,r,i){const o=this,s=new Lh(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{n(o.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(v,x){if(n[x]!==void 0)return n[x];const w=v.interleavedBuffers[x],S=o(v,w.buffer),C=lb(w.type,S),A=new fT(C,w.stride);return A.uuid=w.uuid,n[x]=A,A}function o(v,x){if(r[x]!==void 0)return r[x];const w=v.arrayBuffers[x],S=new Uint32Array(w).buffer;return r[x]=S,S}const s=e.isInstancedBufferGeometry?new ghe:new Pr,a=e.data.index;if(a!==void 0){const v=lb(a.type,a.array);s.setIndex(new Ni(v,1))}const l=e.data.attributes;for(const v in l){const x=l[v];let b;if(x.isInterleavedBufferAttribute){const w=i(e.data,x.data);b=new Ny(w,x.itemSize,x.offset,x.normalized)}else{const w=lb(x.type,x.array),S=x.isInstancedBufferAttribute?Z0:Ni;b=new S(w,x.itemSize,x.normalized)}x.name!==void 0&&(b.name=x.name),x.usage!==void 0&&b.setUsage(x.usage),s.setAttribute(v,b)}const d=e.data.morphAttributes;if(d)for(const v in d){const x=d[v],b=[];for(let w=0,S=x.length;w<S;w++){const C=x[w];let A;if(C.isInterleavedBufferAttribute){const P=i(e.data,C.data);A=new Ny(P,C.itemSize,C.offset,C.normalized)}else{const P=lb(C.type,C.array);A=new Ni(P,C.itemSize,C.normalized)}C.name!==void 0&&(A.name=C.name),b.push(A)}s.morphAttributes[v]=b}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let v=0,x=p.length;v!==x;++v){const b=p[v];s.addGroup(b.start,b.count,b.materialIndex)}const g=e.data.boundingSphere;if(g!==void 0){const v=new Oe;g.center!==void 0&&v.fromArray(g.center),s.boundingSphere=new Fa(v,g.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class bgt extends tc{constructor(e){super(e)}load(e,n,r,i){const o=this,s=this.path===""?Ty.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const a=new Lh(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let d=null;try{d=JSON.parse(l)}catch(p){i!==void 0&&i(p),console.error("THREE:ObjectLoader: Can't parse "+e+".",p.message);return}const h=d.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(d,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?Ty.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const o=new Lh(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const s=await o.loadAsync(e,n),a=JSON.parse(s),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,i),s=this.parseImages(e.images,function(){n!==void 0&&n(d)}),a=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,a),d=this.parseObject(e.object,o,l,a,r),h=this.parseSkeletons(e.skeletons,d);if(this.bindSkeletons(d,h),n!==void 0){let p=!1;for(const g in s)if(s[g].data instanceof HTMLImageElement){p=!0;break}p===!1&&n(d)}return d}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),o=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,o),a=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,i,a,s,n),d=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,d),l}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const o=new I0().fromJSON(e[r]);n[o.uuid]=o}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(o){o.isBone&&(i[o.uuid]=o)}),e!==void 0)for(let o=0,s=e.length;o<s;o++){const a=new pT().fromJSON(e[o],i);r[a.uuid]=a}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new yhe;for(let o=0,s=e.length;o<s;o++){let a;const l=e[o];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in rJ?a=rJ[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const o=new FL;o.setTextures(n);for(let s=0,a=e.length;s<a;s++){const l=e[s];r[l.uuid]===void 0&&(r[l.uuid]=o.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],o=C1.parse(i);n[o.uuid]=o}return n}parseImages(e,n){const r=this,i={};let o;function s(l){return r.manager.itemStart(l),o.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const d=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:r.resourcePath+d;return s(h)}else return l.data?{data:lb(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new eV(n);o=new gE(l),o.setCrossOrigin(this.crossOrigin);for(let d=0,h=e.length;d<h;d++){const p=e[d],g=p.url;if(Array.isArray(g)){const v=[];for(let x=0,b=g.length;x<b;x++){const w=g[x],S=a(w);S!==null&&(S instanceof HTMLImageElement?v.push(S):v.push(new Ey(S.data,S.width,S.height)))}i[p.uuid]=new m0(v)}else{const v=a(p.url);i[p.uuid]=new m0(v)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function o(s){if(typeof s=="string"){const a=s,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await i.loadAsync(l)}else return s.data?{data:lb(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){i=new gE(this.manager),i.setCrossOrigin(this.crossOrigin);for(let s=0,a=e.length;s<a;s++){const l=e[s],d=l.url;if(Array.isArray(d)){const h=[];for(let p=0,g=d.length;p<g;p++){const v=d[p],x=await o(v);x!==null&&(x instanceof HTMLImageElement?h.push(x):h.push(new Ey(x.data,x.width,x.height)))}r[l.uuid]=new m0(h)}else{const h=await o(l.url);r[l.uuid]=new m0(h)}}}return r}parseTextures(e,n){function r(o,s){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),s[o])}const i={};if(e!==void 0)for(let o=0,s=e.length;o<s;o++){const a=e[o];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],d=l.data;let h;Array.isArray(d)?(h=new uT,d.length===6&&(h.needsUpdate=!0)):(d&&d.data?h=new Ey:h=new _o,d&&(h.needsUpdate=!0)),h.source=l,h.uuid=a.uuid,a.name!==void 0&&(h.name=a.name),a.mapping!==void 0&&(h.mapping=r(a.mapping,wgt)),a.channel!==void 0&&(h.channel=a.channel),a.offset!==void 0&&h.offset.fromArray(a.offset),a.repeat!==void 0&&h.repeat.fromArray(a.repeat),a.center!==void 0&&h.center.fromArray(a.center),a.rotation!==void 0&&(h.rotation=a.rotation),a.wrap!==void 0&&(h.wrapS=r(a.wrap[0],aJ),h.wrapT=r(a.wrap[1],aJ)),a.format!==void 0&&(h.format=a.format),a.internalFormat!==void 0&&(h.internalFormat=a.internalFormat),a.type!==void 0&&(h.type=a.type),a.colorSpace!==void 0&&(h.colorSpace=a.colorSpace),a.minFilter!==void 0&&(h.minFilter=r(a.minFilter,lJ)),a.magFilter!==void 0&&(h.magFilter=r(a.magFilter,lJ)),a.anisotropy!==void 0&&(h.anisotropy=a.anisotropy),a.flipY!==void 0&&(h.flipY=a.flipY),a.generateMipmaps!==void 0&&(h.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(h.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(h.compareFunction=a.compareFunction),a.userData!==void 0&&(h.userData=a.userData),i[a.uuid]=h}return i}parseObject(e,n,r,i,o){let s;function a(g){return n[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",g),n[g]}function l(g){if(g!==void 0){if(Array.isArray(g)){const v=[];for(let x=0,b=g.length;x<b;x++){const w=g[x];r[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),v.push(r[w])}return v}return r[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),r[g]}}function d(g){return i[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",g),i[g]}let h,p;switch(e.type){case"Scene":s=new T1,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new In(e.background):s.background=d(e.background)),e.environment!==void 0&&(s.environment=d(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new bL(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new xL(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(e.backgroundRotation),e.environmentRotation!==void 0&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new No(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Rf(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new hhe(e.color,e.intensity);break;case"DirectionalLight":s=new t_(e.color,e.intensity);break;case"PointLight":s=new rV(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new fhe(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new nV(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new dhe(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new mhe().fromJSON(e);break;case"SkinnedMesh":h=a(e.geometry),p=l(e.material),s=new $8(h,p),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),p=l(e.material),s=new ds(h,p);break;case"InstancedMesh":h=a(e.geometry),p=l(e.material);const g=e.count,v=e.instanceMatrix,x=e.instanceColor;s=new U8(h,p,g),s.instanceMatrix=new Z0(new Float32Array(v.array),16),x!==void 0&&(s.instanceColor=new Z0(new Float32Array(x.array),x.itemSize));break;case"BatchedMesh":h=a(e.geometry),p=l(e.material),s=new Bde(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,p),s.geometry=h,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._visibility=e.visibility,s._active=e.active,s._bounds=e.bounds.map(b=>{const w=new xl;w.min.fromArray(b.boxMin),w.max.fromArray(b.boxMax);const S=new Fa;return S.radius=b.sphereRadius,S.center.fromArray(b.sphereCenter),{boxInitialized:b.boxInitialized,box:w,sphereInitialized:b.sphereInitialized,sphere:S}}),s._maxGeometryCount=e.maxGeometryCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._geometryCount=e.geometryCount,s._matricesTexture=d(e.matricesTexture.uuid);break;case"LOD":s=new Fde;break;case"Line":s=new Kf(a(e.geometry),l(e.material));break;case"LineLoop":s=new V8(a(e.geometry),l(e.material));break;case"LineSegments":s=new $h(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":s=new H8(a(e.geometry),l(e.material));break;case"Sprite":s=new zde(l(e.material));break;case"Group":s=new om;break;case"Bone":s=new wL;break;default:s=new di}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const g=e.children;for(let v=0;v<g.length;v++)s.add(this.parseObject(g[v],n,r,i,o))}if(e.animations!==void 0){const g=e.animations;for(let v=0;v<g.length;v++){const x=g[v];s.animations.push(o[x])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const g=e.levels;for(let v=0;v<g.length;v++){const x=g[v],b=s.getObjectByProperty("uuid",x.object);b!==void 0&&s.addLevel(b,x.distance,x.hysteresis)}}return s}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const wgt={UVMapping:pL,CubeReflectionMapping:Cm,CubeRefractionMapping:Ly,EquirectangularReflectionMapping:nE,EquirectangularRefractionMapping:rE,CubeUVReflectionMapping:pw},aJ={RepeatWrapping:Dy,ClampToEdgeWrapping:Oa,MirroredRepeatWrapping:b1},lJ={NearestFilter:Xo,NearestMipmapNearestFilter:iE,NearestMipmapLinearFilter:Jg,LinearFilter:yo,LinearMipmapNearestFilter:Ib,LinearMipmapLinearFilter:yd};class vhe extends tc{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=sm.get(e);if(s!==void 0){if(o.manager.itemStart(e),s.then){s.then(d=>{n&&n(d),o.manager.itemEnd(e)}).catch(d=>{i&&i(d)});return}return setTimeout(function(){n&&n(s),o.manager.itemEnd(e)},0),s}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(d){return sm.add(e,d),n&&n(d),o.manager.itemEnd(e),d}).catch(function(d){i&&i(d),sm.remove(e),o.manager.itemError(e),o.manager.itemEnd(e)});sm.add(e,l),o.manager.itemStart(e)}}let IA;class iV{static getContext(){return IA===void 0&&(IA=new(window.AudioContext||window.webkitAudioContext)),IA}static setContext(e){IA=e}}class Sgt extends tc{constructor(e){super(e)}load(e,n,r,i){const o=this,s=new Lh(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{const d=l.slice(0);iV.getContext().decodeAudioData(d,function(p){n(p)}).catch(a)}catch(d){a(d)}},r,i);function a(l){i?i(l):console.error(l),o.manager.itemError(e)}}}const cJ=new Yn,uJ=new Yn,Lv=new Yn;class Mgt{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new No,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new No,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Lv.copy(e.projectionMatrix);const i=n.eyeSep/2,o=i*n.near/n.focus,s=n.near*Math.tan(A0*n.fov*.5)/n.zoom;let a,l;uJ.elements[12]=-i,cJ.elements[12]=i,a=-s*n.aspect+o,l=s*n.aspect+o,Lv.elements[0]=2*n.near/(l-a),Lv.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Lv),a=-s*n.aspect-o,l=s*n.aspect-o,Lv.elements[0]=2*n.near/(l-a),Lv.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Lv)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(uJ),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(cJ)}}class oV{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=dJ(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=dJ();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function dJ(){return(typeof performance>"u"?Date:performance).now()}const Dv=new Oe,hJ=new Ts,Egt=new Oe,Nv=new Oe;class Tgt extends di{constructor(){super(),this.type="AudioListener",this.context=iV.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new oV}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Dv,hJ,Egt),Nv.set(0,0,-1).applyQuaternion(hJ),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Dv.x,i),n.positionY.linearRampToValueAtTime(Dv.y,i),n.positionZ.linearRampToValueAtTime(Dv.z,i),n.forwardX.linearRampToValueAtTime(Nv.x,i),n.forwardY.linearRampToValueAtTime(Nv.y,i),n.forwardZ.linearRampToValueAtTime(Nv.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(Dv.x,Dv.y,Dv.z),n.setOrientation(Nv.x,Nv.y,Nv.z,r.x,r.y,r.z)}}let _he=class extends di{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}};const zv=new Oe,fJ=new Ts,Cgt=new Oe,Fv=new Oe;class Agt extends _he{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(zv,fJ,Cgt),Fv.set(0,0,1).applyQuaternion(fJ);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(zv.x,r),n.positionY.linearRampToValueAtTime(zv.y,r),n.positionZ.linearRampToValueAtTime(zv.z,r),n.orientationX.linearRampToValueAtTime(Fv.x,r),n.orientationY.linearRampToValueAtTime(Fv.y,r),n.orientationZ.linearRampToValueAtTime(Fv.z,r)}else n.setPosition(zv.x,zv.y,zv.z),n.setOrientation(Fv.x,Fv.y,Fv.z)}}class Pgt{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class xhe{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,o,s;switch(n){case"quaternion":i=this._slerp,o=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,o=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,o=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=o,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,o=e*i+i;let s=this.cumulativeWeight;if(s===0){for(let a=0;a!==i;++a)r[o+a]=r[a];s=n}else{s+=n;const a=n/s;this._mixBufferRegion(r,o,0,a,i)}this.cumulativeWeight=s}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,o=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const l=n*this._origIndex;this._mixBufferRegion(r,i,l,1-o,n)}s>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let l=n,d=n+n;l!==d;++l)if(r[l]!==r[l+n]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let o=r,s=i;o!==s;++o)n[o]=n[i+o%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,o){if(i>=.5)for(let s=0;s!==o;++s)e[n+s]=e[r+s]}_slerp(e,n,r,i){Ts.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,o){const s=this._workIndex*o;Ts.multiplyQuaternionsFlat(e,s,e,n,e,r),Ts.slerpFlat(e,n,e,n,e,s,i)}_lerp(e,n,r,i,o){const s=1-i;for(let a=0;a!==o;++a){const l=n+a;e[l]=e[l]*s+e[r+a]*i}}_lerpAdditive(e,n,r,i,o){for(let s=0;s!==o;++s){const a=n+s;e[a]=e[a]+e[r+s]*i}}}const sV="\\[\\]\\.:\\/",Igt=new RegExp("["+sV+"]","g"),aV="[^"+sV+"]",Rgt="[^"+sV.replace("\\.","")+"]",kgt=/((?:WC+[\/:])*)/.source.replace("WC",aV),Ogt=/(WCOD+)?/.source.replace("WCOD",Rgt),Lgt=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",aV),Dgt=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",aV),Ngt=new RegExp("^"+kgt+Ogt+Lgt+Dgt+"$"),zgt=["material","materials","bones","map"];class Fgt{constructor(e,n,r){const i=r||ui.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,o=r.length;i!==o;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class ui{constructor(e,n,r){this.path=n,this.parsedPath=r||ui.parseTrackName(n),this.node=ui.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new ui.Composite(e,n,r):new ui(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Igt,"")}static parseTrackName(e){const n=Ngt.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const o=r.nodeName.substring(i+1);zgt.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(o){for(let s=0;s<o.length;s++){const a=o[s];if(a.name===n||a.uuid===n)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let o=n.propertyIndex;if(e||(e=ui.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let d=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===d){d=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const s=e[i];if(s===void 0){const d=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(o!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=o}else s.fromArray!==void 0&&s.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ui.Composite=Fgt;ui.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ui.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ui.prototype.GetterByBindingType=[ui.prototype._getValue_direct,ui.prototype._getValue_array,ui.prototype._getValue_arrayElement,ui.prototype._getValue_toArray];ui.prototype.SetterByBindingTypeAndVersioning=[[ui.prototype._setValue_direct,ui.prototype._setValue_direct_setNeedsUpdate,ui.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ui.prototype._setValue_array,ui.prototype._setValue_array_setNeedsUpdate,ui.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ui.prototype._setValue_arrayElement,ui.prototype._setValue_arrayElement_setNeedsUpdate,ui.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ui.prototype._setValue_fromArray,ui.prototype._setValue_fromArray_setNeedsUpdate,ui.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Bgt{constructor(){this.isAnimationObjectGroup=!0,this.uuid=vu(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,o=this._bindings,s=o.length;let a,l=e.length,d=this.nCachedObjects_;for(let h=0,p=arguments.length;h!==p;++h){const g=arguments[h],v=g.uuid;let x=n[v];if(x===void 0){x=l++,n[v]=x,e.push(g);for(let b=0,w=s;b!==w;++b)o[b].push(new ui(g,r[b],i[b]))}else if(x<d){a=e[x];const b=--d,w=e[b];n[w.uuid]=x,e[x]=w,n[v]=b,e[b]=g;for(let S=0,C=s;S!==C;++S){const A=o[S],P=A[b];let k=A[x];A[x]=P,k===void 0&&(k=new ui(g,r[S],i[S])),A[b]=k}}else e[x]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let o=this.nCachedObjects_;for(let s=0,a=arguments.length;s!==a;++s){const l=arguments[s],d=l.uuid,h=n[d];if(h!==void 0&&h>=o){const p=o++,g=e[p];n[g.uuid]=h,e[h]=g,n[d]=p,e[p]=l;for(let v=0,x=i;v!==x;++v){const b=r[v],w=b[p],S=b[h];b[h]=w,b[p]=S}}}this.nCachedObjects_=o}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let o=this.nCachedObjects_,s=e.length;for(let a=0,l=arguments.length;a!==l;++a){const d=arguments[a],h=d.uuid,p=n[h];if(p!==void 0)if(delete n[h],p<o){const g=--o,v=e[g],x=--s,b=e[x];n[v.uuid]=p,e[p]=v,n[b.uuid]=g,e[g]=b,e.pop();for(let w=0,S=i;w!==S;++w){const C=r[w],A=C[g],P=C[x];C[p]=A,C[g]=P,C.pop()}}else{const g=--s,v=e[g];g>0&&(n[v.uuid]=p),e[p]=v,e.pop();for(let x=0,b=i;x!==b;++x){const w=r[x];w[p]=w[g],w.pop()}}}this.nCachedObjects_=o}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const o=this._bindings;if(i!==void 0)return o[i];const s=this._paths,a=this._parsedPaths,l=this._objects,d=l.length,h=this.nCachedObjects_,p=new Array(d);i=o.length,r[e]=i,s.push(e),a.push(n),o.push(p);for(let g=h,v=l.length;g!==v;++g){const x=l[g];p[g]=new ui(x,e,n)}return p}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,o=this._parsedPaths,s=this._bindings,a=s.length-1,l=s[a],d=e[a];n[d]=r,s[r]=l,s.pop(),o[r]=o[a],o.pop(),i[r]=i[a],i.pop()}}}class bhe{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const o=n.tracks,s=o.length,a=new Array(s),l={endingStart:f0,endingEnd:f0};for(let d=0;d!==s;++d){const h=o[d].createInterpolant(null);a[d]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ode,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,o=e._clip.duration,s=o/i,a=i/o;e.warp(1,s,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,o=i.time,s=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,d=a.sampleValues;return l[0]=o,l[1]=o+r,d[0]=e/s,d[1]=n/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const l=(e-o)*r;l<0||r===0?n=0:(this._startTime=null,n=r*l)}n*=this._updateTimeScale(e);const s=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case C8:for(let h=0,p=l.length;h!==p;++h)l[h].evaluate(s),d[h].accumulateAdditive(a);break;case gL:default:for(let h=0,p=l.length;h!==p;++h)l[h].evaluate(s),d[h].accumulate(i,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,o=this._loopCount;const s=r===sde;if(e===0)return o===-1?i:s&&(o&1)===1?n-i:i;if(r===ide){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),i>=n||i<0){const a=Math.floor(i/n);i-=n*a,o+=Math.abs(a);const l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const d=e<0;this._setEndings(d,!d,s)}else this._setEndings(!1,!1,s);this._loopCount=o,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(s&&(o&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=p0,i.endingEnd=p0):(e?i.endingStart=this.zeroSlopeAtStart?p0:f0:i.endingStart=oE,n?i.endingEnd=this.zeroSlopeAtEnd?p0:f0:i.endingEnd=oE)}_scheduleFading(e,n,r){const i=this._mixer,o=i.time;let s=this._weightInterpolant;s===null&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,l=s.sampleValues;return a[0]=o,l[0]=n,a[1]=o+e,l[1]=r,this}}const jgt=new Float32Array(1);class $gt extends jh{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,o=i.length,s=e._propertyBindings,a=e._interpolants,l=r.uuid,d=this._bindingsByRootAndName;let h=d[l];h===void 0&&(h={},d[l]=h);for(let p=0;p!==o;++p){const g=i[p],v=g.name;let x=h[v];if(x!==void 0)++x.referenceCount,s[p]=x;else{if(x=s[p],x!==void 0){x._cacheIndex===null&&(++x.referenceCount,this._addInactiveBinding(x,l,v));continue}const b=n&&n._propertyBindings[p].binding.parsedPath;x=new xhe(ui.create(r,v,b),g.ValueTypeName,g.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,l,v),s[p]=x}a[p].resultBuffer=x.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,o=this._actionsByClip[i];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,o=this._actionsByClip;let s=o[n];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[n]=s;else{const a=s.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const o=e._clip.uuid,s=this._actionsByClip,a=s[o],l=a.knownActions,d=l[l.length-1],h=e._byClipCacheIndex;d._byClipCacheIndex=h,l[h]=d,l.pop(),e._byClipCacheIndex=null;const p=a.actionByRoot,g=(e._localRoot||this._root).uuid;delete p[g],l.length===0&&delete s[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,o=this._bindings;let s=i[n];s===void 0&&(s={},i[n]=s),s[r]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,o=r.path,s=this._bindingsByRootAndName,a=s[i],l=n[n.length-1],d=e._cacheIndex;l._cacheIndex=d,n[d]=l,n.pop(),delete a[o],Object.keys(a).length===0&&delete s[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new J8(new Float32Array(2),new Float32Array(2),1,jgt),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,o=n[i];e.__cacheIndex=i,n[i]=e,o.__cacheIndex=r,n[r]=o}clipAction(e,n,r){const i=n||this._root,o=i.uuid;let s=typeof e=="string"?C1.findByName(i,e):e;const a=s!==null?s.uuid:e,l=this._actionsByClip[a];let d=null;if(r===void 0&&(s!==null?r=s.blendMode:r=gL),l!==void 0){const p=l.actionByRoot[o];if(p!==void 0&&p.blendMode===r)return p;d=l.knownActions[0],s===null&&(s=d._clip)}if(s===null)return null;const h=new bhe(this,s,n,r);return this._bindAction(h,d),this._addInactiveAction(h,a,o),h}existingAction(e,n){const r=n||this._root,i=r.uuid,o=typeof e=="string"?C1.findByName(r,e):e,s=o?o.uuid:e,a=this._actionsByClip[s];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,o=Math.sign(e),s=this._accuIndex^=1;for(let d=0;d!==r;++d)n[d]._update(i,e,o,s);const a=this._bindings,l=this._nActiveBindings;for(let d=0;d!==l;++d)a[d].apply(s);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,o=i[r];if(o!==void 0){const s=o.knownActions;for(let a=0,l=s.length;a!==l;++a){const d=s[a];this._deactivateAction(d);const h=d._cacheIndex,p=n[n.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,p._cacheIndex=h,n[h]=p,n.pop(),this._removeInactiveBindingsForAction(d)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const s in r){const a=r[s].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,o=i[n];if(o!==void 0)for(const s in o){const a=o[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class lV{constructor(e){this.value=e}clone(){return new lV(this.value.clone===void 0?this.value:this.value.clone())}}let Ugt=0;class Vgt extends jh{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Ugt++}),this.name="",this.usage=cE,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++){const o=Array.isArray(n[r])?n[r]:[n[r]];for(let s=0;s<o.length;s++)this.uniforms.push(o[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class Hgt extends fT{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class Wgt{constructor(e,n,r,i,o){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const pJ=new Yn;class whe{constructor(e,n,r=0,i=1/0){this.ray=new Ky(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new P0,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return pJ.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(pJ),this}intersectObject(e,n=!0,r=[]){return R5(e,this,r,n),r.sort(mJ),r}intersectObjects(e,n=!0,r=[]){for(let i=0,o=e.length;i<o;i++)R5(e[i],this,r,n);return r.sort(mJ),r}}function mJ(t,e){return t.distance-e.distance}function R5(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let o=0,s=i.length;o<s;o++)R5(i[o],e,n,!0)}}class yE{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Yo(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Ggt{constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}const gJ=new Ft;class qgt{constructor(e=new Ft(1/0,1/0),n=new Ft(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=gJ.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,gJ).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const yJ=new Oe,RA=new Oe;class Xgt{constructor(e=new Oe,n=new Oe){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){yJ.subVectors(e,this.start),RA.subVectors(this.end,this.start);const r=RA.dot(RA);let o=RA.dot(yJ)/r;return n&&(o=Yo(o,0,1)),o}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const vJ=new Oe;class Ygt extends di{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new Pr,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,l=32;s<l;s++,a++){const d=s/l*Math.PI*2,h=a/l*Math.PI*2;i.push(Math.cos(d),Math.sin(d),1,Math.cos(h),Math.sin(h),1)}r.setAttribute("position",new Jn(i,3));const o=new $a({fog:!1,toneMapped:!1});this.cone=new $h(r,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),vJ.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(vJ),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const zg=new Oe,kA=new Yn,mz=new Yn;class Kgt extends $h{constructor(e){const n=She(e),r=new Pr,i=[],o=[],s=new In(0,0,1),a=new In(0,1,0);for(let d=0;d<n.length;d++){const h=n[d];h.parent&&h.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),o.push(s.r,s.g,s.b),o.push(a.r,a.g,a.b))}r.setAttribute("position",new Jn(i,3)),r.setAttribute("color",new Jn(o,3));const l=new $a({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");mz.copy(this.root.matrixWorld).invert();for(let o=0,s=0;o<n.length;o++){const a=n[o];a.parent&&a.parent.isBone&&(kA.multiplyMatrices(mz,a.matrixWorld),zg.setFromMatrixPosition(kA),i.setXYZ(s,zg.x,zg.y,zg.z),kA.multiplyMatrices(mz,a.parent.matrixWorld),zg.setFromMatrixPosition(kA),i.setXYZ(s+1,zg.x,zg.y,zg.z),s+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function She(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,She(t.children[n]));return e}class Zgt extends ds{constructor(e,n,r){const i=new vw(n,4,2),o=new pu({wireframe:!0,fog:!1,toneMapped:!1});super(i,o),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Jgt=new Oe,_J=new In,xJ=new In;class Qgt extends di{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new yT(n);i.rotateY(Math.PI*.5),this.material=new pu({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=i.getAttribute("position"),s=new Float32Array(o.count*3);i.setAttribute("color",new Ni(s,3)),this.add(new ds(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");_J.copy(this.light.color),xJ.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const o=r<i/2?_J:xJ;n.setXYZ(r,o.r,o.g,o.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Jgt.setFromMatrixPosition(this.light.matrixWorld).negate())}}class eyt extends $h{constructor(e=10,n=10,r=4473924,i=8947848){r=new In(r),i=new In(i);const o=n/2,s=e/n,a=e/2,l=[],d=[];for(let g=0,v=0,x=-a;g<=n;g++,x+=s){l.push(-a,0,x,a,0,x),l.push(x,0,-a,x,0,a);const b=g===o?r:i;b.toArray(d,v),v+=3,b.toArray(d,v),v+=3,b.toArray(d,v),v+=3,b.toArray(d,v),v+=3}const h=new Pr;h.setAttribute("position",new Jn(l,3)),h.setAttribute("color",new Jn(d,3));const p=new $a({vertexColors:!0,toneMapped:!1});super(h,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class tyt extends $h{constructor(e=10,n=16,r=8,i=64,o=4473924,s=8947848){o=new In(o),s=new In(s);const a=[],l=[];if(n>1)for(let p=0;p<n;p++){const g=p/n*(Math.PI*2),v=Math.sin(g)*e,x=Math.cos(g)*e;a.push(0,0,0),a.push(v,0,x);const b=p&1?o:s;l.push(b.r,b.g,b.b),l.push(b.r,b.g,b.b)}for(let p=0;p<r;p++){const g=p&1?o:s,v=e-e/r*p;for(let x=0;x<i;x++){let b=x/i*(Math.PI*2),w=Math.sin(b)*v,S=Math.cos(b)*v;a.push(w,0,S),l.push(g.r,g.g,g.b),b=(x+1)/i*(Math.PI*2),w=Math.sin(b)*v,S=Math.cos(b)*v,a.push(w,0,S),l.push(g.r,g.g,g.b)}}const d=new Pr;d.setAttribute("position",new Jn(a,3)),d.setAttribute("color",new Jn(l,3));const h=new $a({vertexColors:!0,toneMapped:!1});super(d,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const bJ=new Oe,OA=new Oe,wJ=new Oe;class nyt extends di{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new Pr;i.setAttribute("position",new Jn([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const o=new $a({fog:!1,toneMapped:!1});this.lightPlane=new Kf(i,o),this.add(this.lightPlane),i=new Pr,i.setAttribute("position",new Jn([0,0,0,0,0,1],3)),this.targetLine=new Kf(i,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),bJ.setFromMatrixPosition(this.light.matrixWorld),OA.setFromMatrixPosition(this.light.target.matrixWorld),wJ.subVectors(OA,bJ),this.lightPlane.lookAt(OA),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(OA),this.targetLine.scale.z=wJ.length()}}const LA=new Oe,Ho=new m_;class ryt extends $h{constructor(e){const n=new Pr,r=new $a({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],o=[],s={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(x,b){l(x),l(b)}function l(x){i.push(0,0,0),o.push(0,0,0),s[x]===void 0&&(s[x]=[]),s[x].push(i.length/3-1)}n.setAttribute("position",new Jn(i,3)),n.setAttribute("color",new Jn(o,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const d=new In(16755200),h=new In(16711680),p=new In(43775),g=new In(16777215),v=new In(3355443);this.setColors(d,h,p,g,v)}setColors(e,n,r,i,o){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,o.r,o.g,o.b),a.setXYZ(41,o.r,o.g,o.b),a.setXYZ(42,o.r,o.g,o.b),a.setXYZ(43,o.r,o.g,o.b),a.setXYZ(44,o.r,o.g,o.b),a.setXYZ(45,o.r,o.g,o.b),a.setXYZ(46,o.r,o.g,o.b),a.setXYZ(47,o.r,o.g,o.b),a.setXYZ(48,o.r,o.g,o.b),a.setXYZ(49,o.r,o.g,o.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;Ho.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),as("c",n,e,Ho,0,0,-1),as("t",n,e,Ho,0,0,1),as("n1",n,e,Ho,-r,-i,-1),as("n2",n,e,Ho,r,-i,-1),as("n3",n,e,Ho,-r,i,-1),as("n4",n,e,Ho,r,i,-1),as("f1",n,e,Ho,-r,-i,1),as("f2",n,e,Ho,r,-i,1),as("f3",n,e,Ho,-r,i,1),as("f4",n,e,Ho,r,i,1),as("u1",n,e,Ho,r*.7,i*1.1,-1),as("u2",n,e,Ho,-r*.7,i*1.1,-1),as("u3",n,e,Ho,0,i*2,-1),as("cf1",n,e,Ho,-r,0,1),as("cf2",n,e,Ho,r,0,1),as("cf3",n,e,Ho,0,-i,1),as("cf4",n,e,Ho,0,i,1),as("cn1",n,e,Ho,-r,0,-1),as("cn2",n,e,Ho,r,0,-1),as("cn3",n,e,Ho,0,-i,-1),as("cn4",n,e,Ho,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function as(t,e,n,r,i,o,s){LA.set(i,o,s).unproject(r);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let d=0,h=a.length;d<h;d++)l.setXYZ(a[d],LA.x,LA.y,LA.z)}}const DA=new xl;class iyt extends $h{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),o=new Pr;o.setIndex(new Ni(r,1)),o.setAttribute("position",new Ni(i,3)),super(o,new $a({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&DA.setFromObject(this.object),DA.isEmpty())return;const n=DA.min,r=DA.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class oyt extends $h{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new Pr;o.setIndex(new Ni(r,1)),o.setAttribute("position",new Jn(i,3)),super(o,new $a({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class syt extends Kf{constructor(e,n=1,r=16776960){const i=r,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new Pr;s.setAttribute("position",new Jn(o,3)),s.computeBoundingSphere(),super(s,new $a({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Pr;l.setAttribute("position",new Jn(a,3)),l.computeBoundingSphere(),this.add(new ds(l,new pu({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const SJ=new Oe;let NA,gz;class ayt extends di{constructor(e=new Oe(0,0,1),n=new Oe(0,0,0),r=1,i=16776960,o=r*.2,s=o*.2){super(),this.type="ArrowHelper",NA===void 0&&(NA=new Pr,NA.setAttribute("position",new Jn([0,0,0,0,1,0],3)),gz=new yw(0,.5,1,5,1),gz.translate(0,-.5,0)),this.position.copy(n),this.line=new Kf(NA,new $a({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ds(gz,new pu({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,o,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{SJ.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(SJ,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class lyt extends $h{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Pr;i.setAttribute("position",new Jn(n,3)),i.setAttribute("color",new Jn(r,3));const o=new $a({vertexColors:!0,toneMapped:!1});super(i,o),this.type="AxesHelper"}setColors(e,n,r){const i=new In,o=this.geometry.attributes.color.array;return i.set(e),i.toArray(o,0),i.toArray(o,3),i.set(n),i.toArray(o,6),i.toArray(o,9),i.set(r),i.toArray(o,12),i.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class cyt{constructor(){this.type="ShapePath",this.color=new In,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new hE,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,o,s){return this.currentPath.bezierCurveTo(e,n,r,i,o,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(S){const C=[];for(let A=0,P=S.length;A<P;A++){const k=S[A],F=new I0;F.curves=k.curves,C.push(F)}return C}function r(S,C){const A=C.length;let P=!1;for(let k=A-1,F=0;F<A;k=F++){let B=C[k],W=C[F],J=W.x-B.x,H=W.y-B.y;if(Math.abs(H)>Number.EPSILON){if(H<0&&(B=C[F],J=-J,W=C[k],H=-H),S.y<B.y||S.y>W.y)continue;if(S.y===B.y){if(S.x===B.x)return!0}else{const Y=H*(S.x-B.x)-J*(S.y-B.y);if(Y===0)return!0;if(Y<0)continue;P=!P}}else{if(S.y!==B.y)continue;if(W.x<=S.x&&S.x<=B.x||B.x<=S.x&&S.x<=W.x)return!0}}return P}const i=Vf.isClockWise,o=this.subPaths;if(o.length===0)return[];let s,a,l;const d=[];if(o.length===1)return a=o[0],l=new I0,l.curves=a.curves,d.push(l),d;let h=!i(o[0].getPoints());h=e?!h:h;const p=[],g=[];let v=[],x=0,b;g[x]=void 0,v[x]=[];for(let S=0,C=o.length;S<C;S++)a=o[S],b=a.getPoints(),s=i(b),s=e?!s:s,s?(!h&&g[x]&&x++,g[x]={s:new I0,p:b},g[x].s.curves=a.curves,h&&x++,v[x]=[]):v[x].push({h:a,p:b[0]});if(!g[0])return n(o);if(g.length>1){let S=!1,C=0;for(let A=0,P=g.length;A<P;A++)p[A]=[];for(let A=0,P=g.length;A<P;A++){const k=v[A];for(let F=0;F<k.length;F++){const B=k[F];let W=!0;for(let J=0;J<g.length;J++)r(B.p,g[J].p)&&(A!==J&&C++,W?(W=!1,p[J].push(B)):S=!0);W&&p[A].push(B)}}C>0&&S===!1&&(v=p)}let w;for(let S=0,C=g.length;S<C;S++){l=g[S].s,d.push(l),w=v[S];for(let A=0,P=w.length;A<P;A++)l.holes.push(w[A].h)}return d}}class uyt extends kh{constructor(e=1,n=1,r=1,i={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,n,{...i,count:r}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:hL}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=hL);const dyt=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:v8,AddEquation:Zg,AddOperation:Vue,AdditiveAnimationBlendMode:C8,AdditiveBlending:W4,AgXToneMapping:Xue,AlphaFormat:Que,AlwaysCompare:yde,AlwaysDepth:Nue,AlwaysStencilFunc:w5,AmbientLight:hhe,AnimationAction:bhe,AnimationClip:C1,AnimationLoader:pgt,AnimationMixer:$gt,AnimationObjectGroup:Bgt,AnimationUtils:ugt,ArcCurve:jde,ArrayCamera:Lde,ArrowHelper:ayt,AttachedBindMode:K4,Audio:_he,AudioAnalyser:Pgt,AudioContext:iV,AudioListener:Tgt,AudioLoader:Sgt,AxesHelper:lyt,BackSide:Kl,BasicDepthPacking:lde,BasicShadowMap:vue,BatchedMesh:Bde,Bone:wL,BooleanKeyframeTrack:g_,Box2:qgt,Box3:xl,Box3Helper:oyt,BoxGeometry:Zy,BoxHelper:iyt,BufferAttribute:Ni,BufferGeometry:Pr,BufferGeometryLoader:yhe,ByteType:Zue,Cache:sm,Camera:m_,CameraHelper:ryt,CanvasTexture:Lmt,CapsuleGeometry:TL,CatmullRomCurve3:$de,CineonToneMapping:Gue,CircleGeometry:CL,ClampToEdgeWrapping:Oa,Clock:oV,Color:In,ColorKeyframeTrack:Q8,ColorManagement:Di,CompressedArrayTexture:kmt,CompressedCubeTexture:Omt,CompressedTexture:ML,CompressedTextureLoader:mgt,ConeGeometry:AL,ConstantAlphaFactor:Oue,ConstantColorFactor:Rue,CubeCamera:Ede,CubeReflectionMapping:Cm,CubeRefractionMapping:Ly,CubeTexture:uT,CubeTextureLoader:ggt,CubeUVReflectionMapping:pw,CubicBezierCurve:G8,CubicBezierCurve3:Ude,CubicInterpolant:she,CullFaceBack:H4,CullFaceFront:yue,CullFaceFrontBack:wct,CullFaceNone:gue,Curve:Uh,CurvePath:Hde,CustomBlending:_ue,CustomToneMapping:que,CylinderGeometry:yw,Cylindrical:Ggt,Data3DTexture:O8,DataArrayTexture:vL,DataTexture:Ey,DataTextureLoader:ygt,DataUtils:Tut,DecrementStencilOp:Ict,DecrementWrapStencilOp:kct,DefaultLoadingManager:che,DepthFormat:My,DepthStencilFormat:Y0,DepthTexture:z8,DetachedBindMode:Kue,DirectionalLight:t_,DirectionalLightHelper:nyt,DiscreteInterpolant:ahe,DisplayP3ColorSpace:yL,DodecahedronGeometry:gT,DoubleSide:pd,DstAlphaFactor:Tue,DstColorFactor:Aue,DynamicCopyUsage:qct,DynamicDrawUsage:$ct,DynamicReadUsage:Hct,EdgesGeometry:Wde,EllipseCurve:EL,EqualCompare:fde,EqualDepth:Fue,EqualStencilFunc:Nct,EquirectangularReflectionMapping:nE,EquirectangularRefractionMapping:rE,Euler:Tu,EventDispatcher:jh,ExtrudeGeometry:IL,FileLoader:Lh,Float16BufferAttribute:kut,Float32BufferAttribute:Jn,FloatType:uu,Fog:bL,FogExp2:xL,FramebufferTexture:Rmt,FrontSide:Yf,Frustum:dT,GLBufferAttribute:Wgt,GLSL1:Yct,GLSL3:S5,GreaterCompare:pde,GreaterDepth:jue,GreaterEqualCompare:gde,GreaterEqualDepth:Bue,GreaterEqualStencilFunc:jct,GreaterStencilFunc:Fct,GridHelper:eyt,Group:om,HalfFloatType:w1,HemisphereLight:dhe,HemisphereLightHelper:Qgt,IcosahedronGeometry:RL,ImageBitmapLoader:vhe,ImageLoader:gE,ImageUtils:k8,IncrementStencilOp:Pct,IncrementWrapStencilOp:Rct,InstancedBufferAttribute:Z0,InstancedBufferGeometry:ghe,InstancedInterleavedBuffer:Hgt,InstancedMesh:U8,Int16BufferAttribute:Iut,Int32BufferAttribute:Rut,Int8BufferAttribute:Cut,IntType:_8,InterleavedBuffer:fT,InterleavedBufferAttribute:Ny,Interpolant:_w,InterpolateDiscrete:S1,InterpolateLinear:K0,InterpolateSmooth:_P,InvertStencilOp:Oct,KeepStencilOp:Kv,KeyframeTrack:Hh,LOD:Fde,LatheGeometry:mT,Layers:P0,LessCompare:hde,LessDepth:zue,LessEqualCompare:P8,LessEqualDepth:tE,LessEqualStencilFunc:zct,LessStencilFunc:Dct,Light:Qy,LightProbe:mhe,Line:Kf,Line3:Xgt,LineBasicMaterial:$a,LineCurve:q8,LineCurve3:Vde,LineDashedMaterial:rhe,LineLoop:V8,LineSegments:$h,LinearDisplayP3ColorSpace:cT,LinearFilter:yo,LinearInterpolant:J8,LinearMipMapLinearFilter:Tct,LinearMipMapNearestFilter:Ect,LinearMipmapLinearFilter:yd,LinearMipmapNearestFilter:Ib,LinearSRGBColorSpace:da,LinearToneMapping:Hue,LinearTransfer:sE,Loader:tc,LoaderUtils:Ty,LoadingManager:eV,LoopOnce:ide,LoopPingPong:sde,LoopRepeat:ode,LuminanceAlphaFormat:tde,LuminanceFormat:ede,MOUSE:ru,Material:Cs,MaterialLoader:FL,MathUtils:R8,Matrix3:Ir,Matrix4:Yn,MaxEquation:Y4,Mesh:ds,MeshBasicMaterial:pu,MeshDepthMaterial:F8,MeshDistanceMaterial:B8,MeshLambertMaterial:the,MeshMatcapMaterial:nhe,MeshNormalMaterial:ehe,MeshPhongMaterial:Jde,MeshPhysicalMaterial:Vh,MeshStandardMaterial:vT,MeshToonMaterial:Qde,MinEquation:X4,MirroredRepeatWrapping:b1,MixOperation:Uue,MultiplyBlending:q4,MultiplyOperation:lT,NearestFilter:Xo,NearestMipMapLinearFilter:Mct,NearestMipMapNearestFilter:Sct,NearestMipmapLinearFilter:Jg,NearestMipmapNearestFilter:iE,NeutralToneMapping:Yue,NeverCompare:dde,NeverDepth:Due,NeverStencilFunc:Lct,NoBlending:fm,NoColorSpace:Xp,NoToneMapping:$f,NormalAnimationBlendMode:gL,NormalBlending:C0,NotEqualCompare:mde,NotEqualDepth:$ue,NotEqualStencilFunc:Bct,NumberKeyframeTrack:Q0,Object3D:di,ObjectLoader:bgt,ObjectSpaceNormalMap:ude,OctahedronGeometry:yT,OneFactor:Sue,OneMinusConstantAlphaFactor:Lue,OneMinusConstantColorFactor:kue,OneMinusDstAlphaFactor:Cue,OneMinusDstColorFactor:Pue,OneMinusSrcAlphaFactor:xR,OneMinusSrcColorFactor:Eue,OrthographicCamera:Rf,P3Primaries:lE,PCFShadowMap:fL,PCFSoftShadowMap:P2,PMREMGenerator:E5,Path:hE,PerspectiveCamera:No,Plane:Ef,PlaneGeometry:mw,PlaneHelper:syt,PointLight:rV,PointLightHelper:Zgt,Points:H8,PointsMaterial:SL,PolarGridHelper:tyt,PolyhedronGeometry:Jy,PositionalAudio:Agt,PropertyBinding:ui,PropertyMixer:xhe,QuadraticBezierCurve:X8,QuadraticBezierCurve3:Y8,Quaternion:Ts,QuaternionKeyframeTrack:zy,QuaternionLinearInterpolant:lhe,RED_GREEN_RGTC2_Format:x5,RED_RGTC1_Format:rde,REVISION:hL,RGBADepthPacking:cde,RGBAFormat:Wl,RGBAIntegerFormat:E8,RGBA_ASTC_10x10_Format:p5,RGBA_ASTC_10x5_Format:d5,RGBA_ASTC_10x6_Format:h5,RGBA_ASTC_10x8_Format:f5,RGBA_ASTC_12x10_Format:m5,RGBA_ASTC_12x12_Format:g5,RGBA_ASTC_4x4_Format:r5,RGBA_ASTC_5x4_Format:i5,RGBA_ASTC_5x5_Format:o5,RGBA_ASTC_6x5_Format:s5,RGBA_ASTC_6x6_Format:a5,RGBA_ASTC_8x5_Format:l5,RGBA_ASTC_8x6_Format:c5,RGBA_ASTC_8x8_Format:u5,RGBA_BPTC_Format:vP,RGBA_ETC2_EAC_Format:n5,RGBA_PVRTC_2BPPV1_Format:e5,RGBA_PVRTC_4BPPV1_Format:Q4,RGBA_S3TC_DXT1_Format:mP,RGBA_S3TC_DXT3_Format:gP,RGBA_S3TC_DXT5_Format:yP,RGB_BPTC_SIGNED_Format:y5,RGB_BPTC_UNSIGNED_Format:v5,RGB_ETC1_Format:T8,RGB_ETC2_Format:t5,RGB_PVRTC_2BPPV1_Format:J4,RGB_PVRTC_4BPPV1_Format:Z4,RGB_S3TC_DXT1_Format:pP,RGFormat:nde,RGIntegerFormat:M8,RawShaderMaterial:Zde,Ray:Ky,Raycaster:whe,Rec709Primaries:aE,RectAreaLight:fhe,RedFormat:w8,RedIntegerFormat:S8,ReinhardToneMapping:Wue,RenderTarget:bde,RepeatWrapping:Dy,ReplaceStencilOp:Act,ReverseSubtractEquation:bue,RingGeometry:kL,SIGNED_RED_GREEN_RGTC2_Format:b5,SIGNED_RED_RGTC1_Format:_5,SRGBColorSpace:Ra,SRGBTransfer:no,Scene:T1,ShaderChunk:Dr,ShaderLib:_h,ShaderMaterial:Oh,ShadowMaterial:Kde,Shape:I0,ShapeGeometry:OL,ShapePath:cyt,ShapeUtils:Vf,ShortType:Jue,Skeleton:pT,SkeletonHelper:Kgt,SkinnedMesh:$8,Source:m0,Sphere:Fa,SphereGeometry:vw,Spherical:yE,SphericalHarmonics3:phe,SplineCurve:K8,SpotLight:nV,SpotLightHelper:Ygt,Sprite:zde,SpriteMaterial:j8,SrcAlphaFactor:_R,SrcAlphaSaturateFactor:Iue,SrcColorFactor:Mue,StaticCopyUsage:Gct,StaticDrawUsage:cE,StaticReadUsage:Vct,StereoCamera:Mgt,StreamCopyUsage:Xct,StreamDrawUsage:Uct,StreamReadUsage:Wct,StringKeyframeTrack:y_,SubtractEquation:xue,SubtractiveBlending:G4,TOUCH:iu,TangentSpaceNormalMap:Yy,TetrahedronGeometry:LL,Texture:_o,TextureLoader:uhe,TorusGeometry:DL,TorusKnotGeometry:NL,Triangle:du,TriangleFanDrawMode:bR,TriangleStripDrawMode:A8,TrianglesDrawMode:ade,TubeGeometry:zL,UVMapping:pL,Uint16BufferAttribute:L8,Uint32BufferAttribute:D8,Uint8BufferAttribute:Aut,Uint8ClampedBufferAttribute:Put,Uniform:lV,UniformsGroup:Vgt,UniformsLib:En,UniformsUtils:Mde,UnsignedByteType:Uf,UnsignedInt248Type:Sy,UnsignedIntType:im,UnsignedShort4444Type:x8,UnsignedShort5551Type:b8,UnsignedShortType:mL,VSMShadowMap:dh,Vector2:Ft,Vector3:Oe,Vector4:Ui,VectorKeyframeTrack:e_,VideoTexture:Imt,WebGL1Renderer:Dde,WebGL3DRenderTarget:mut,WebGLArrayRenderTarget:put,WebGLCoordinateSystem:If,WebGLCubeRenderTarget:Tde,WebGLMultipleRenderTargets:uyt,WebGLRenderTarget:kh,WebGLRenderer:hT,WebGLUtils:Ode,WebGPUCoordinateSystem:uE,WireframeGeometry:Yde,WrapAroundEnding:oE,ZeroCurvatureEnding:f0,ZeroFactor:wue,ZeroSlopeEnding:p0,ZeroStencilOp:Cct,_SRGBAFormat:wR,createCanvasElement:_de},Symbol.toStringTag,{value:"Module"}));function MJ(t,e){if(e===ade)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===bR||e===A8){let n=t.getIndex();if(n===null){const s=[],a=t.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)s.push(l);t.setIndex(s),n=t.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const r=n.count-2,i=[];if(e===bR)for(let s=1;s<=r;s++)i.push(n.getX(0)),i.push(n.getX(s)),i.push(n.getX(s+1));else for(let s=0;s<r;s++)s%2===0?(i.push(n.getX(s)),i.push(n.getX(s+1)),i.push(n.getX(s+2))):(i.push(n.getX(s+2)),i.push(n.getX(s+1)),i.push(n.getX(s)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=t.clone();return o.setIndex(i),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}class hyt extends tc{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new yyt(n)}),this.register(function(n){return new Tyt(n)}),this.register(function(n){return new Cyt(n)}),this.register(function(n){return new Ayt(n)}),this.register(function(n){return new _yt(n)}),this.register(function(n){return new xyt(n)}),this.register(function(n){return new byt(n)}),this.register(function(n){return new wyt(n)}),this.register(function(n){return new gyt(n)}),this.register(function(n){return new Syt(n)}),this.register(function(n){return new vyt(n)}),this.register(function(n){return new Eyt(n)}),this.register(function(n){return new Myt(n)}),this.register(function(n){return new pyt(n)}),this.register(function(n){return new Pyt(n)}),this.register(function(n){return new Iyt(n)})}load(e,n,r,i){const o=this;let s;if(this.resourcePath!=="")s=this.resourcePath;else if(this.path!==""){const d=Ty.extractUrlBase(e);s=Ty.resolveURL(d,this.path)}else s=Ty.extractUrlBase(e);this.manager.itemStart(e);const a=function(d){i?i(d):console.error(d),o.manager.itemError(e),o.manager.itemEnd(e)},l=new Lh(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(d){try{o.parse(d,s,function(h){n(h),o.manager.itemEnd(e)},a)}catch(h){a(h)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,r,i){let o;const s={},a={},l=new TextDecoder;if(typeof e=="string")o=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===Mhe){try{s[Jr.KHR_BINARY_GLTF]=new Ryt(e)}catch(p){i&&i(p);return}o=JSON.parse(s[Jr.KHR_BINARY_GLTF].content)}else o=JSON.parse(l.decode(e));else o=e;if(o.asset===void 0||o.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const d=new Hyt(o,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});d.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const p=this.pluginCallbacks[h](d);p.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[p.name]=p,s[p.name]=!0}if(o.extensionsUsed)for(let h=0;h<o.extensionsUsed.length;++h){const p=o.extensionsUsed[h],g=o.extensionsRequired||[];switch(p){case Jr.KHR_MATERIALS_UNLIT:s[p]=new myt;break;case Jr.KHR_DRACO_MESH_COMPRESSION:s[p]=new kyt(o,this.dracoLoader);break;case Jr.KHR_TEXTURE_TRANSFORM:s[p]=new Oyt;break;case Jr.KHR_MESH_QUANTIZATION:s[p]=new Lyt;break;default:g.indexOf(p)>=0&&a[p]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+p+'".')}}d.setExtensions(s),d.setPlugins(a),d.parse(r,i)}parseAsync(e,n){const r=this;return new Promise(function(i,o){r.parse(e,n,i,o)})}}function fyt(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const Jr={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class pyt{constructor(e){this.parser=e,this.name=Jr.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let r=0,i=n.length;r<i;r++){const o=n[r];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(e){const n=this.parser,r="light:"+e;let i=n.cache.get(r);if(i)return i;const o=n.json,l=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e];let d;const h=new In(16777215);l.color!==void 0&&h.setRGB(l.color[0],l.color[1],l.color[2],da);const p=l.range!==void 0?l.range:0;switch(l.type){case"directional":d=new t_(h),d.target.position.set(0,0,-1),d.add(d.target);break;case"point":d=new rV(h),d.distance=p;break;case"spot":d=new nV(h),d.distance=p,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,d.angle=l.spot.outerConeAngle,d.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,d.target.position.set(0,0,-1),d.add(d.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return d.position.set(0,0,0),d.decay=2,Gg(d,l),l.intensity!==void 0&&(d.intensity=l.intensity),d.name=n.createUniqueName(l.name||"light_"+e),i=Promise.resolve(d),n.cache.add(r,i),i}getDependency(e,n){if(e==="light")return this._loadLight(n)}createNodeAttachment(e){const n=this,r=this.parser,o=r.json.nodes[e],a=(o.extensions&&o.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(n.cache,a,l)})}}class myt{constructor(){this.name=Jr.KHR_MATERIALS_UNLIT}getMaterialType(){return pu}extendParams(e,n,r){const i=[];e.color=new In(1,1,1),e.opacity=1;const o=n.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const s=o.baseColorFactor;e.color.setRGB(s[0],s[1],s[2],da),e.opacity=s[3]}o.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",o.baseColorTexture,Ra))}return Promise.all(i)}}class gyt{constructor(e){this.parser=e,this.name=Jr.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=i.extensions[this.name].emissiveStrength;return o!==void 0&&(n.emissiveIntensity=o),Promise.resolve()}}class yyt{constructor(e){this.parser=e,this.name=Jr.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Vh}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],s=i.extensions[this.name];if(s.clearcoatFactor!==void 0&&(n.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&o.push(r.assignTexture(n,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&o.push(r.assignTexture(n,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(o.push(r.assignTexture(n,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){const a=s.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new Ft(a,a)}return Promise.all(o)}}class vyt{constructor(e){this.parser=e,this.name=Jr.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Vh}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],s=i.extensions[this.name];return s.iridescenceFactor!==void 0&&(n.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&o.push(r.assignTexture(n,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(n.iridescenceIOR=s.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&o.push(r.assignTexture(n,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(o)}}class _yt{constructor(e){this.parser=e,this.name=Jr.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Vh}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[];n.sheenColor=new In(0,0,0),n.sheenRoughness=0,n.sheen=1;const s=i.extensions[this.name];if(s.sheenColorFactor!==void 0){const a=s.sheenColorFactor;n.sheenColor.setRGB(a[0],a[1],a[2],da)}return s.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&o.push(r.assignTexture(n,"sheenColorMap",s.sheenColorTexture,Ra)),s.sheenRoughnessTexture!==void 0&&o.push(r.assignTexture(n,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(o)}}class xyt{constructor(e){this.parser=e,this.name=Jr.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Vh}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],s=i.extensions[this.name];return s.transmissionFactor!==void 0&&(n.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&o.push(r.assignTexture(n,"transmissionMap",s.transmissionTexture)),Promise.all(o)}}class byt{constructor(e){this.parser=e,this.name=Jr.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Vh}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],s=i.extensions[this.name];n.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&o.push(r.assignTexture(n,"thicknessMap",s.thicknessTexture)),n.attenuationDistance=s.attenuationDistance||1/0;const a=s.attenuationColor||[1,1,1];return n.attenuationColor=new In().setRGB(a[0],a[1],a[2],da),Promise.all(o)}}class wyt{constructor(e){this.parser=e,this.name=Jr.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Vh}extendMaterialParams(e,n){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=i.extensions[this.name];return n.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}}class Syt{constructor(e){this.parser=e,this.name=Jr.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Vh}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],s=i.extensions[this.name];n.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&o.push(r.assignTexture(n,"specularIntensityMap",s.specularTexture));const a=s.specularColorFactor||[1,1,1];return n.specularColor=new In().setRGB(a[0],a[1],a[2],da),s.specularColorTexture!==void 0&&o.push(r.assignTexture(n,"specularColorMap",s.specularColorTexture,Ra)),Promise.all(o)}}class Myt{constructor(e){this.parser=e,this.name=Jr.EXT_MATERIALS_BUMP}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Vh}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],s=i.extensions[this.name];return n.bumpScale=s.bumpFactor!==void 0?s.bumpFactor:1,s.bumpTexture!==void 0&&o.push(r.assignTexture(n,"bumpMap",s.bumpTexture)),Promise.all(o)}}class Eyt{constructor(e){this.parser=e,this.name=Jr.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Vh}extendMaterialParams(e,n){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],s=i.extensions[this.name];return s.anisotropyStrength!==void 0&&(n.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(n.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&o.push(r.assignTexture(n,"anisotropyMap",s.anisotropyTexture)),Promise.all(o)}}class Tyt{constructor(e){this.parser=e,this.name=Jr.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const o=i.extensions[this.name],s=n.options.ktx2Loader;if(!s){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,o.source,s)}}class Cyt{constructor(e){this.parser=e,this.name=Jr.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,r=this.parser,i=r.json,o=i.textures[e];if(!o.extensions||!o.extensions[n])return null;const s=o.extensions[n],a=i.images[s.source];let l=r.textureLoader;if(a.uri){const d=r.options.manager.getHandler(a.uri);d!==null&&(l=d)}return this.detectSupport().then(function(d){if(d)return r.loadTextureImage(e,s.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class Ayt{constructor(e){this.parser=e,this.name=Jr.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const n=this.name,r=this.parser,i=r.json,o=i.textures[e];if(!o.extensions||!o.extensions[n])return null;const s=o.extensions[n],a=i.images[s.source];let l=r.textureLoader;if(a.uri){const d=r.options.manager.getHandler(a.uri);d!==null&&(l=d)}return this.detectSupport().then(function(d){if(d)return r.loadTextureImage(e,s.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class Pyt{constructor(e){this.name=Jr.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,r=n.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],o=this.parser.getDependency("buffer",i.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(a){const l=i.byteOffset||0,d=i.byteLength||0,h=i.count,p=i.byteStride,g=new Uint8Array(a,l,d);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(h,p,g,i.mode,i.filter).then(function(v){return v.buffer}):s.ready.then(function(){const v=new ArrayBuffer(h*p);return s.decodeGltfBuffer(new Uint8Array(v),h,p,g,i.mode,i.filter),v})})}else return null}}class Iyt{constructor(e){this.name=Jr.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,r=n.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=n.meshes[r.mesh];for(const d of i.primitives)if(d.mode!==sd.TRIANGLES&&d.mode!==sd.TRIANGLE_STRIP&&d.mode!==sd.TRIANGLE_FAN&&d.mode!==void 0)return null;const s=r.extensions[this.name].attributes,a=[],l={};for(const d in s)a.push(this.parser.getDependency("accessor",s[d]).then(h=>(l[d]=h,l[d])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(d=>{const h=d.pop(),p=h.isGroup?h.children:[h],g=d[0].count,v=[];for(const x of p){const b=new Yn,w=new Oe,S=new Ts,C=new Oe(1,1,1),A=new U8(x.geometry,x.material,g);for(let P=0;P<g;P++)l.TRANSLATION&&w.fromBufferAttribute(l.TRANSLATION,P),l.ROTATION&&S.fromBufferAttribute(l.ROTATION,P),l.SCALE&&C.fromBufferAttribute(l.SCALE,P),A.setMatrixAt(P,b.compose(w,S,C));for(const P in l)if(P==="_COLOR_0"){const k=l[P];A.instanceColor=new Z0(k.array,k.itemSize,k.normalized)}else P!=="TRANSLATION"&&P!=="ROTATION"&&P!=="SCALE"&&x.geometry.setAttribute(P,l[P]);di.prototype.copy.call(A,x),this.parser.assignFinalMaterial(A),v.push(A)}return h.isGroup?(h.clear(),h.add(...v),h):v[0]}))}}const Mhe="glTF",jS=12,EJ={JSON:1313821514,BIN:5130562};class Ryt{constructor(e){this.name=Jr.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,jS),r=new TextDecoder;if(this.header={magic:r.decode(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==Mhe)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-jS,o=new DataView(e,jS);let s=0;for(;s<i;){const a=o.getUint32(s,!0);s+=4;const l=o.getUint32(s,!0);if(s+=4,l===EJ.JSON){const d=new Uint8Array(e,jS+s,a);this.content=r.decode(d)}else if(l===EJ.BIN){const d=jS+s;this.body=e.slice(d,d+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class kyt{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Jr.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const r=this.json,i=this.dracoLoader,o=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,a={},l={},d={};for(const h in s){const p=k5[h]||h.toLowerCase();a[p]=s[h]}for(const h in e.attributes){const p=k5[h]||h.toLowerCase();if(s[h]!==void 0){const g=r.accessors[e.attributes[h]],v=kb[g.componentType];d[p]=v.name,l[p]=g.normalized===!0}}return n.getDependency("bufferView",o).then(function(h){return new Promise(function(p,g){i.decodeDracoFile(h,function(v){for(const x in v.attributes){const b=v.attributes[x],w=l[x];w!==void 0&&(b.normalized=w)}p(v)},a,d,da,g)})})}}class Oyt{constructor(){this.name=Jr.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return(n.texCoord===void 0||n.texCoord===e.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.texCoord!==void 0&&(e.channel=n.texCoord),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class Lyt{constructor(){this.name=Jr.KHR_MESH_QUANTIZATION}}class Ehe extends _w{constructor(e,n,r,i){super(e,n,r,i)}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,o=e*i*3+i;for(let s=0;s!==i;s++)n[s]=r[o+s];return n}interpolate_(e,n,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=a*2,d=a*3,h=i-n,p=(r-n)/h,g=p*p,v=g*p,x=e*d,b=x-d,w=-2*v+3*g,S=v-g,C=1-w,A=S-g+p;for(let P=0;P!==a;P++){const k=s[b+P+a],F=s[b+P+l]*h,B=s[x+P+a],W=s[x+P]*h;o[P]=C*k+A*F+w*B+S*W}return o}}const Dyt=new Ts;class Nyt extends Ehe{interpolate_(e,n,r,i){const o=super.interpolate_(e,n,r,i);return Dyt.fromArray(o).normalize().toArray(o),o}}const sd={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},kb={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},TJ={9728:Xo,9729:yo,9984:iE,9985:Ib,9986:Jg,9987:yd},CJ={33071:Oa,33648:b1,10497:Dy},yz={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},k5={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Fg={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},zyt={CUBICSPLINE:void 0,LINEAR:K0,STEP:S1},vz={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Fyt(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new vT({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Yf})),t.DefaultMaterial}function Bv(t,e,n){for(const r in n.extensions)t[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=n.extensions[r])}function Gg(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Byt(t,e,n){let r=!1,i=!1,o=!1;for(let d=0,h=e.length;d<h;d++){const p=e[d];if(p.POSITION!==void 0&&(r=!0),p.NORMAL!==void 0&&(i=!0),p.COLOR_0!==void 0&&(o=!0),r&&i&&o)break}if(!r&&!i&&!o)return Promise.resolve(t);const s=[],a=[],l=[];for(let d=0,h=e.length;d<h;d++){const p=e[d];if(r){const g=p.POSITION!==void 0?n.getDependency("accessor",p.POSITION):t.attributes.position;s.push(g)}if(i){const g=p.NORMAL!==void 0?n.getDependency("accessor",p.NORMAL):t.attributes.normal;a.push(g)}if(o){const g=p.COLOR_0!==void 0?n.getDependency("accessor",p.COLOR_0):t.attributes.color;l.push(g)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l)]).then(function(d){const h=d[0],p=d[1],g=d[2];return r&&(t.morphAttributes.position=h),i&&(t.morphAttributes.normal=p),o&&(t.morphAttributes.color=g),t.morphTargetsRelative=!0,t})}function jyt(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let n=0,r=e.weights.length;n<r;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let r=0,i=n.length;r<i;r++)t.morphTargetDictionary[n[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function $yt(t){let e;const n=t.extensions&&t.extensions[Jr.KHR_DRACO_MESH_COMPRESSION];if(n?e="draco:"+n.bufferView+":"+n.indices+":"+_z(n.attributes):e=t.indices+":"+_z(t.attributes)+":"+t.mode,t.targets!==void 0)for(let r=0,i=t.targets.length;r<i;r++)e+=":"+_z(t.targets[r]);return e}function _z(t){let e="";const n=Object.keys(t).sort();for(let r=0,i=n.length;r<i;r++)e+=n[r]+":"+t[n[r]]+";";return e}function O5(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Uyt(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Vyt=new Yn;class Hyt{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new fyt,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,o=-1;typeof navigator<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,o=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&o<98?this.textureLoader=new uhe(this.options.manager):this.textureLoader=new vhe(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Lh(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const r=this,i=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(s){const a={scene:s[0][i.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:i.asset,parser:r,userData:{}};return Bv(o,a,i),Gg(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],r=this.json.meshes||[];for(let i=0,o=n.length;i<o;i++){const s=n[i].joints;for(let a=0,l=s.length;a<l;a++)e[s[a]].isBone=!0}for(let i=0,o=e.length;i<o;i++){const s=e[i];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(r[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,r){if(e.refs[n]<=1)return r;const i=r.clone(),o=(s,a)=>{const l=this.associations.get(s);l!=null&&this.associations.set(a,l);for(const[d,h]of s.children.entries())o(h,a.children[d])};return o(r,i),i.name+="_instance_"+e.uses[n]++,i}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let r=0;r<n.length;r++){const i=e(n[r]);if(i)return i}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const r=[];for(let i=0;i<n.length;i++){const o=e(n[i]);o&&r.push(o)}return r}getDependency(e,n){const r=e+":"+n;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(n);break;case"node":i=this._invokeOne(function(o){return o.loadNode&&o.loadNode(n)});break;case"mesh":i=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(n)});break;case"accessor":i=this.loadAccessor(n);break;case"bufferView":i=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(n)});break;case"buffer":i=this.loadBuffer(n);break;case"material":i=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(n)});break;case"texture":i=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(n)});break;case"skin":i=this.loadSkin(n);break;case"animation":i=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(n)});break;case"camera":i=this.loadCamera(n);break;default:if(i=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(e,n)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let n=this.cache.get(e);if(!n){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(i.map(function(o,s){return r.getDependency(e,s)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],r=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[Jr.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(o,s){r.load(Ty.resolveURL(n.uri,i.path),o,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(r){const i=n.byteLength||0,o=n.byteOffset||0;return r.slice(o,o+i)})}loadAccessor(e){const n=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const s=yz[i.type],a=kb[i.componentType],l=i.normalized===!0,d=new a(i.count*s);return Promise.resolve(new Ni(d,s,l))}const o=[];return i.bufferView!==void 0?o.push(this.getDependency("bufferView",i.bufferView)):o.push(null),i.sparse!==void 0&&(o.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(o).then(function(s){const a=s[0],l=yz[i.type],d=kb[i.componentType],h=d.BYTES_PER_ELEMENT,p=h*l,g=i.byteOffset||0,v=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,x=i.normalized===!0;let b,w;if(v&&v!==p){const S=Math.floor(g/v),C="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+S+":"+i.count;let A=n.cache.get(C);A||(b=new d(a,S*v,i.count*v/h),A=new fT(b,v/h),n.cache.add(C,A)),w=new Ny(A,l,g%v/h,x)}else a===null?b=new d(i.count*l):b=new d(a,g,i.count*l),w=new Ni(b,l,x);if(i.sparse!==void 0){const S=yz.SCALAR,C=kb[i.sparse.indices.componentType],A=i.sparse.indices.byteOffset||0,P=i.sparse.values.byteOffset||0,k=new C(s[1],A,i.sparse.count*S),F=new d(s[2],P,i.sparse.count*l);a!==null&&(w=new Ni(w.array.slice(),w.itemSize,w.normalized));for(let B=0,W=k.length;B<W;B++){const J=k[B];if(w.setX(J,F[B*l]),l>=2&&w.setY(J,F[B*l+1]),l>=3&&w.setZ(J,F[B*l+2]),l>=4&&w.setW(J,F[B*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return w})}loadTexture(e){const n=this.json,r=this.options,o=n.textures[e].source,s=n.images[o];let a=this.textureLoader;if(s.uri){const l=r.manager.getHandler(s.uri);l!==null&&(a=l)}return this.loadTextureImage(e,o,a)}loadTextureImage(e,n,r){const i=this,o=this.json,s=o.textures[e],a=o.images[n],l=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[l])return this.textureCache[l];const d=this.loadImageSource(n,r).then(function(h){h.flipY=!1,h.name=s.name||a.name||"",h.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(h.name=a.uri);const g=(o.samplers||{})[s.sampler]||{};return h.magFilter=TJ[g.magFilter]||yo,h.minFilter=TJ[g.minFilter]||yd,h.wrapS=CJ[g.wrapS]||Dy,h.wrapT=CJ[g.wrapT]||Dy,i.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[l]=d,d}loadImageSource(e,n){const r=this,i=this.json,o=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(p=>p.clone());const s=i.images[e],a=self.URL||self.webkitURL;let l=s.uri||"",d=!1;if(s.bufferView!==void 0)l=r.getDependency("bufferView",s.bufferView).then(function(p){d=!0;const g=new Blob([p],{type:s.mimeType});return l=a.createObjectURL(g),l});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(l).then(function(p){return new Promise(function(g,v){let x=g;n.isImageBitmapLoader===!0&&(x=function(b){const w=new _o(b);w.needsUpdate=!0,g(w)}),n.load(Ty.resolveURL(p,o.path),x,void 0,v)})}).then(function(p){return d===!0&&a.revokeObjectURL(l),p.userData.mimeType=s.mimeType||Uyt(s.uri),p}).catch(function(p){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),p});return this.sourceCache[e]=h,h}assignTexture(e,n,r,i){const o=this;return this.getDependency("texture",r.index).then(function(s){if(!s)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(s=s.clone(),s.channel=r.texCoord),o.extensions[Jr.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[Jr.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=o.associations.get(s);s=o.extensions[Jr.KHR_TEXTURE_TRANSFORM].extendTexture(s,a),o.associations.set(s,l)}}return i!==void 0&&(s.colorSpace=i),e[n]=s,s})}assignFinalMaterial(e){const n=e.geometry;let r=e.material;const i=n.attributes.tangent===void 0,o=n.attributes.color!==void 0,s=n.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new SL,Cs.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new $a,Cs.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||o||s){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),o&&(a+="vertex-colors:"),s&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),o&&(l.vertexColors=!0),s&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return vT}loadMaterial(e){const n=this,r=this.json,i=this.extensions,o=r.materials[e];let s;const a={},l=o.extensions||{},d=[];if(l[Jr.KHR_MATERIALS_UNLIT]){const p=i[Jr.KHR_MATERIALS_UNLIT];s=p.getMaterialType(),d.push(p.extendParams(a,o,n))}else{const p=o.pbrMetallicRoughness||{};if(a.color=new In(1,1,1),a.opacity=1,Array.isArray(p.baseColorFactor)){const g=p.baseColorFactor;a.color.setRGB(g[0],g[1],g[2],da),a.opacity=g[3]}p.baseColorTexture!==void 0&&d.push(n.assignTexture(a,"map",p.baseColorTexture,Ra)),a.metalness=p.metallicFactor!==void 0?p.metallicFactor:1,a.roughness=p.roughnessFactor!==void 0?p.roughnessFactor:1,p.metallicRoughnessTexture!==void 0&&(d.push(n.assignTexture(a,"metalnessMap",p.metallicRoughnessTexture)),d.push(n.assignTexture(a,"roughnessMap",p.metallicRoughnessTexture))),s=this._invokeOne(function(g){return g.getMaterialType&&g.getMaterialType(e)}),d.push(Promise.all(this._invokeAll(function(g){return g.extendMaterialParams&&g.extendMaterialParams(e,a)})))}o.doubleSided===!0&&(a.side=pd);const h=o.alphaMode||vz.OPAQUE;if(h===vz.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===vz.MASK&&(a.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&s!==pu&&(d.push(n.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new Ft(1,1),o.normalTexture.scale!==void 0)){const p=o.normalTexture.scale;a.normalScale.set(p,p)}if(o.occlusionTexture!==void 0&&s!==pu&&(d.push(n.assignTexture(a,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&s!==pu){const p=o.emissiveFactor;a.emissive=new In().setRGB(p[0],p[1],p[2],da)}return o.emissiveTexture!==void 0&&s!==pu&&d.push(n.assignTexture(a,"emissiveMap",o.emissiveTexture,Ra)),Promise.all(d).then(function(){const p=new s(a);return o.name&&(p.name=o.name),Gg(p,o),n.associations.set(p,{materials:e}),o.extensions&&Bv(i,p,o),p})}createUniqueName(e){const n=ui.sanitizeNodeName(e||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(e){const n=this,r=this.extensions,i=this.primitiveCache;function o(a){return r[Jr.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,n).then(function(l){return AJ(l,a,n)})}const s=[];for(let a=0,l=e.length;a<l;a++){const d=e[a],h=$yt(d),p=i[h];if(p)s.push(p.promise);else{let g;d.extensions&&d.extensions[Jr.KHR_DRACO_MESH_COMPRESSION]?g=o(d):g=AJ(new Pr,d,n),i[h]={primitive:d,promise:g},s.push(g)}}return Promise.all(s)}loadMesh(e){const n=this,r=this.json,i=this.extensions,o=r.meshes[e],s=o.primitives,a=[];for(let l=0,d=s.length;l<d;l++){const h=s[l].material===void 0?Fyt(this.cache):this.getDependency("material",s[l].material);a.push(h)}return a.push(n.loadGeometries(s)),Promise.all(a).then(function(l){const d=l.slice(0,l.length-1),h=l[l.length-1],p=[];for(let v=0,x=h.length;v<x;v++){const b=h[v],w=s[v];let S;const C=d[v];if(w.mode===sd.TRIANGLES||w.mode===sd.TRIANGLE_STRIP||w.mode===sd.TRIANGLE_FAN||w.mode===void 0)S=o.isSkinnedMesh===!0?new $8(b,C):new ds(b,C),S.isSkinnedMesh===!0&&S.normalizeSkinWeights(),w.mode===sd.TRIANGLE_STRIP?S.geometry=MJ(S.geometry,A8):w.mode===sd.TRIANGLE_FAN&&(S.geometry=MJ(S.geometry,bR));else if(w.mode===sd.LINES)S=new $h(b,C);else if(w.mode===sd.LINE_STRIP)S=new Kf(b,C);else if(w.mode===sd.LINE_LOOP)S=new V8(b,C);else if(w.mode===sd.POINTS)S=new H8(b,C);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+w.mode);Object.keys(S.geometry.morphAttributes).length>0&&jyt(S,o),S.name=n.createUniqueName(o.name||"mesh_"+e),Gg(S,o),w.extensions&&Bv(i,S,w),n.assignFinalMaterial(S),p.push(S)}for(let v=0,x=p.length;v<x;v++)n.associations.set(p[v],{meshes:e,primitives:v});if(p.length===1)return o.extensions&&Bv(i,p[0],o),p[0];const g=new om;o.extensions&&Bv(i,g,o),n.associations.set(g,{meshes:e});for(let v=0,x=p.length;v<x;v++)g.add(p[v]);return g})}loadCamera(e){let n;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?n=new No(R8.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(n=new Rf(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(n.name=this.createUniqueName(r.name)),Gg(n,r),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],r=[];for(let i=0,o=n.joints.length;i<o;i++)r.push(this._loadNodeShallow(n.joints[i]));return n.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",n.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const o=i.pop(),s=i,a=[],l=[];for(let d=0,h=s.length;d<h;d++){const p=s[d];if(p){a.push(p);const g=new Yn;o!==null&&g.fromArray(o.array,d*16),l.push(g)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[d])}return new pT(a,l)})}loadAnimation(e){const n=this.json,r=this,i=n.animations[e],o=i.name?i.name:"animation_"+e,s=[],a=[],l=[],d=[],h=[];for(let p=0,g=i.channels.length;p<g;p++){const v=i.channels[p],x=i.samplers[v.sampler],b=v.target,w=b.node,S=i.parameters!==void 0?i.parameters[x.input]:x.input,C=i.parameters!==void 0?i.parameters[x.output]:x.output;b.node!==void 0&&(s.push(this.getDependency("node",w)),a.push(this.getDependency("accessor",S)),l.push(this.getDependency("accessor",C)),d.push(x),h.push(b))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l),Promise.all(d),Promise.all(h)]).then(function(p){const g=p[0],v=p[1],x=p[2],b=p[3],w=p[4],S=[];for(let C=0,A=g.length;C<A;C++){const P=g[C],k=v[C],F=x[C],B=b[C],W=w[C];if(P===void 0)continue;P.updateMatrix&&P.updateMatrix();const J=r._createAnimationTracks(P,k,F,B,W);if(J)for(let H=0;H<J.length;H++)S.push(J[H])}return new C1(o,void 0,S)})}createNodeMesh(e){const n=this.json,r=this,i=n.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(o){const s=r._getNodeRef(r.meshCache,i.mesh,o);return i.weights!==void 0&&s.traverse(function(a){if(a.isMesh)for(let l=0,d=i.weights.length;l<d;l++)a.morphTargetInfluences[l]=i.weights[l]}),s})}loadNode(e){const n=this.json,r=this,i=n.nodes[e],o=r._loadNodeShallow(e),s=[],a=i.children||[];for(let d=0,h=a.length;d<h;d++)s.push(r.getDependency("node",a[d]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([o,Promise.all(s),l]).then(function(d){const h=d[0],p=d[1],g=d[2];g!==null&&h.traverse(function(v){v.isSkinnedMesh&&v.bind(g,Vyt)});for(let v=0,x=p.length;v<x;v++)h.add(p[v]);return h})}_loadNodeShallow(e){const n=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const o=n.nodes[e],s=o.name?i.createUniqueName(o.name):"",a=[],l=i._invokeOne(function(d){return d.createNodeMesh&&d.createNodeMesh(e)});return l&&a.push(l),o.camera!==void 0&&a.push(i.getDependency("camera",o.camera).then(function(d){return i._getNodeRef(i.cameraCache,o.camera,d)})),i._invokeAll(function(d){return d.createNodeAttachment&&d.createNodeAttachment(e)}).forEach(function(d){a.push(d)}),this.nodeCache[e]=Promise.all(a).then(function(d){let h;if(o.isBone===!0?h=new wL:d.length>1?h=new om:d.length===1?h=d[0]:h=new di,h!==d[0])for(let p=0,g=d.length;p<g;p++)h.add(d[p]);if(o.name&&(h.userData.name=o.name,h.name=s),Gg(h,o),o.extensions&&Bv(r,h,o),o.matrix!==void 0){const p=new Yn;p.fromArray(o.matrix),h.applyMatrix4(p)}else o.translation!==void 0&&h.position.fromArray(o.translation),o.rotation!==void 0&&h.quaternion.fromArray(o.rotation),o.scale!==void 0&&h.scale.fromArray(o.scale);return i.associations.has(h)||i.associations.set(h,{}),i.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){const n=this.extensions,r=this.json.scenes[e],i=this,o=new om;r.name&&(o.name=i.createUniqueName(r.name)),Gg(o,r),r.extensions&&Bv(n,o,r);const s=r.nodes||[],a=[];for(let l=0,d=s.length;l<d;l++)a.push(i.getDependency("node",s[l]));return Promise.all(a).then(function(l){for(let h=0,p=l.length;h<p;h++)o.add(l[h]);const d=h=>{const p=new Map;for(const[g,v]of i.associations)(g instanceof Cs||g instanceof _o)&&p.set(g,v);return h.traverse(g=>{const v=i.associations.get(g);v!=null&&p.set(g,v)}),p};return i.associations=d(o),o})}_createAnimationTracks(e,n,r,i,o){const s=[],a=e.name?e.name:e.uuid,l=[];Fg[o.path]===Fg.weights?e.traverse(function(g){g.morphTargetInfluences&&l.push(g.name?g.name:g.uuid)}):l.push(a);let d;switch(Fg[o.path]){case Fg.weights:d=Q0;break;case Fg.rotation:d=zy;break;case Fg.position:case Fg.scale:d=e_;break;default:switch(r.itemSize){case 1:d=Q0;break;case 2:case 3:default:d=e_;break}break}const h=i.interpolation!==void 0?zyt[i.interpolation]:K0,p=this._getArrayFromAccessor(r);for(let g=0,v=l.length;g<v;g++){const x=new d(l[g]+"."+Fg[o.path],n.array,p,h);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(x),s.push(x)}return s}_getArrayFromAccessor(e){let n=e.array;if(e.normalized){const r=O5(n.constructor),i=new Float32Array(n.length);for(let o=0,s=n.length;o<s;o++)i[o]=n[o]*r;n=i}return n}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(r){const i=this instanceof zy?Nyt:Ehe;return new i(this.times,this.values,this.getValueSize()/3,r)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Wyt(t,e,n){const r=e.attributes,i=new xl;if(r.POSITION!==void 0){const a=n.json.accessors[r.POSITION],l=a.min,d=a.max;if(l!==void 0&&d!==void 0){if(i.set(new Oe(l[0],l[1],l[2]),new Oe(d[0],d[1],d[2])),a.normalized){const h=O5(kb[a.componentType]);i.min.multiplyScalar(h),i.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const o=e.targets;if(o!==void 0){const a=new Oe,l=new Oe;for(let d=0,h=o.length;d<h;d++){const p=o[d];if(p.POSITION!==void 0){const g=n.json.accessors[p.POSITION],v=g.min,x=g.max;if(v!==void 0&&x!==void 0){if(l.setX(Math.max(Math.abs(v[0]),Math.abs(x[0]))),l.setY(Math.max(Math.abs(v[1]),Math.abs(x[1]))),l.setZ(Math.max(Math.abs(v[2]),Math.abs(x[2]))),g.normalized){const b=O5(kb[g.componentType]);l.multiplyScalar(b)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}t.boundingBox=i;const s=new Fa;i.getCenter(s.center),s.radius=i.min.distanceTo(i.max)/2,t.boundingSphere=s}function AJ(t,e,n){const r=e.attributes,i=[];function o(s,a){return n.getDependency("accessor",s).then(function(l){t.setAttribute(a,l)})}for(const s in r){const a=k5[s]||s.toLowerCase();a in t.attributes||i.push(o(r[s],a))}if(e.indices!==void 0&&!t.index){const s=n.getDependency("accessor",e.indices).then(function(a){t.setIndex(a)});i.push(s)}return Di.workingColorSpace!==da&&"COLOR_0"in r&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Di.workingColorSpace}" not supported.`),Gg(t,e),Wyt(t,e,n),Promise.all(i).then(function(){return e.targets!==void 0?Byt(t,e.targets,n):t})}const Gyt=()=>{V.useId();const t=nr(l=>l.mission.route);nr(l=>l.devices.items),V.useState([]);const e=[-6.485616,37.144592],n=0,r=[Math.PI/2,0,0];ka.MercatorCoordinate.fromLngLat(e,n);function i(l,d){const h=l.meterInMercatorCoordinateUnits(),g=(d.x-l.x)/h,x=(d.y-l.y)/h;return{dEastMeter:g,dNorthMeter:x}}function o(){let l=null;return t.map((d,h)=>{d.wp.map((p,g)=>{l==null&&(l=[p.pos[1],p.pos[0]])})}),l==null&&(l=e),l}function s(){let l=[],d=null,h=null,p=[],g=[],v=[];return t.map((x,b)=>{l=[],x.wp.map((w,S)=>{if(d==null){d=[w.pos[1],w.pos[0],0],h=ka.MercatorCoordinate.fromLngLat({lng:w.pos[1],lat:w.pos[0]},0);let P=ka.MercatorCoordinate.fromLngLat({lng:w.pos[1],lat:w.pos[0]},w.pos[2]),k=i(h,P);console.log(h),console.log(P),console.log(k)}let C=ka.MercatorCoordinate.fromLngLat({lng:w.pos[1],lat:w.pos[0]},w.pos[2]),A=i(h,C);l.push([A.dEastMeter,A.dNorthMeter,w.pos[2]-d[2]])}),g.push(l)}),console.log(l),g.map(x=>{let b=[];x.map(w=>{b.push(new Oe(w[0],w[2],w[1]))}),v.push(new Pr().setFromPoints(b))}),l.map(x=>{p.push(new Oe(x[0],x[2],x[1]))}),v}const a={id:"3d-model",type:"custom",renderingMode:"3d",onAdd(l,d){this.camera=new m_,this.scene=new T1;const h=new t_(16777215);h.position.set(0,-70,100).normalize(),this.scene.add(h);const p=new t_(16777215);p.position.set(0,70,100).normalize(),this.scene.add(p),this.map=l;let g=s();for(let v=0;v<g.length;v++){let x=new $a({linewidth:10,color:Hf.colors_devices[v]}),b=new Kf(g[v],x);this.scene.add(b)}this.renderer=new hT({canvas:l.getCanvas(),context:d,antialias:!0}),this.renderer.autoClear=!1},render(l,d){let h=o();const p=new ka.LngLat(h[0],h[1]),g=it.queryTerrainElevation(p)||0,v=ka.MercatorCoordinate.fromLngLat(p,g),x={translateX:v.x,translateY:v.y,translateZ:v.z,rotateX:r[0],rotateY:r[1],rotateZ:r[2],scale:v.meterInMercatorCoordinateUnits()},b=new Yn().makeRotationAxis(new Oe(1,0,0),x.rotateX),w=new Yn().makeRotationAxis(new Oe(0,1,0),x.rotateY),S=new Yn().makeRotationAxis(new Oe(0,0,1),x.rotateZ),C=new Yn().fromArray(d),A=new Yn().makeTranslation(x.translateX,x.translateY,x.translateZ).scale(new Oe(x.scale,-x.scale,x.scale)).multiply(b).multiply(w).multiply(S);this.camera.projectionMatrix=C.multiply(A),this.renderer.resetState(),this.renderer.render(this.scene,this.camera),it.triggerRepaint()}};return V.useEffect(()=>(console.log("style loaded"),it.addLayer(a),()=>{it.getLayer("3d-model")&&it.removeLayer("3d-model")}),[t]),null},qyt=()=>{V.useId();const t=[Math.PI/2,0,0],e={id:"3d-markers",type:"custom",renderingMode:"3d",onAdd(n,r){this.camera=new m_,this.scene=new T1;const i=new t_(16777215);i.position.set(0,-70,100).normalize(),this.scene.add(i);const o=new t_(16777215);o.position.set(0,70,100).normalize(),this.scene.add(o),this.map=n,new hyt().load("https://maplibre.org/maplibre-gl-js/docs/assets/34M_17/34M_17.gltf",a=>{this.scene.add(a.scene)},function(a){console.log(a.loaded/a.total*100+"% loaded")},function(a){console.log("An error happened:",a)}),this.renderer=new hT({canvas:n.getCanvas(),context:r,antialias:!0}),this.renderer.autoClear=!1},render(n,r){let i=[-6.002290500565038,37.41025256189089];const o=new ka.LngLat(i[0],i[1]),s=it.queryTerrainElevation(o)||0,a=ka.MercatorCoordinate.fromLngLat(o,s),l={translateX:a.x,translateY:a.y,translateZ:a.z,rotateX:t[0],rotateY:t[1],rotateZ:t[2],scale:a.meterInMercatorCoordinateUnits()},d=new Yn().makeRotationAxis(new Oe(1,0,0),l.rotateX),h=new Yn().makeRotationAxis(new Oe(0,1,0),l.rotateY),p=new Yn().makeRotationAxis(new Oe(0,0,1),l.rotateZ),g=new Yn().fromArray(r),v=new Yn().makeTranslation(l.translateX,l.translateY,l.translateZ).scale(new Oe(l.scale,-l.scale,l.scale)).multiply(d).multiply(h).multiply(p);this.camera.projectionMatrix=g.multiply(v),this.renderer.resetState(),this.renderer.render(this.scene,this.camera),it.triggerRepaint()}};return V.useEffect(()=>(console.log("3d object load "),it.addLayer(e),()=>{it.getLayer("3d-model")&&it.removeLayer("3d-model")}),[]),null},Xyt=Wr(t=>({root:{margin:"0",height:"100vh"},sidebarStyle:{display:"flex",flexDirection:"column",position:"fixed",left:0,top:"88px",height:"calc(100% - 95px)",width:"560px",margin:"0px",zIndex:3},middleStyle:{flex:1,display:"grid"},panelElevation:{display:"flex",flexDirection:"column",position:"fixed",right:0,bottom:0,height:"50vh",width:"calc(100% - 560px)",margin:"0px",zIndex:3}})),Yyt=(t,e)=>{setList([...list,toastProperties])},Kyt=()=>{const t=Xyt(),[e,n]=V.useState(!1),r=nr(d=>d.data.positions),i=nr(d=>d.session.markers),[o,s]=V.useState([]),[a,l]=V.useState([]);return V.useEffect(()=>{s(Object.values(r))},[r]),V.useEffect(()=>{l(i)},[i]),z.jsx("div",{className:t.root,children:z.jsx(EO,{children:z.jsxs(Z1,{notification:Yyt,children:[z.jsx(HE,{}),z.jsx(J1,{}),z.jsxs("div",{style:{float:"right",width:"calc(100% - 560px)",height:"calc(70vh - 95px)",right:"0px",margin:"auto"},children:[z.jsxs(Wk,{children:[z.jsx(t6,{markers:a}),z.jsx(MO,{}),z.jsx(Jse,{}),z.jsx(Gyt,{}),z.jsx(qyt,{}),z.jsx(n6,{positions:o,onClick:null,selectedPosition:null,showStatus:!0})]}),z.jsx(SO,{})]}),z.jsx("div",{className:t.sidebarStyle,children:z.jsx("div",{className:t.middleStyle,children:z.jsx(jo,{square:!0,children:z.jsx(u6,{SetOpenSave:n})})})}),z.jsx("div",{className:t.panelElevation,children:z.jsx("div",{className:t.middleStyle,children:z.jsx(jo,{square:!0,children:z.jsx(dL,{})})})}),e&&z.jsx(y8,{SetOpenSave:n})]})})})};var cV={},Zyt=Xr;Object.defineProperty(cV,"__esModule",{value:!0});var The=cV.default=void 0,Jyt=Zyt(oi()),Qyt=z;The=cV.default=(0,Jyt.default)((0,Qyt.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"OpenInNew");const evt=Wr(t=>({root:{height:"100%",display:"flex",flexDirection:"column"},content:{overflow:"auto",paddingTop:t.spacing(2),paddingBottom:t.spacing(2)},buttons:{marginTop:t.spacing(2),marginBottom:t.spacing(2),display:"flex",justifyContent:"space-evenly","& > *":{flexBasis:"33%"}},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)}})),tvt=()=>{const t=evt(),e=Jf(),[n,r]=V.useState(null);return Vy(async()=>{const i=await fetch("/api/missions");if(i.ok){const o=await i.json();r(o)}else throw Error(await i.text())},[]),z.jsxs("div",{className:t.root,children:[z.jsx(j1,{position:"sticky",color:"inherit",children:z.jsxs(Rm,{children:[z.jsx(hr,{color:"inherit",edge:"start",sx:{mr:2},onClick:()=>e(-1),children:z.jsx(d_,{})}),z.jsx(yn,{variant:"h6",children:"Missions"})]})}),z.jsx("div",{className:t.content,children:z.jsx(s_,{maxWidth:"sm",children:z.jsx(jo,{children:z.jsxs(jk,{children:[z.jsx(A$,{children:z.jsxs(yy,{children:[z.jsx(Lo,{children:"id"}),z.jsx(Lo,{children:"initTime"}),z.jsx(Lo,{children:"endTime"}),z.jsx(Lo,{children:"status"})]})}),z.jsx(Uk,{children:n&&n.map(i=>z.jsxs(yy,{children:[z.jsx(Lo,{children:i.id}),z.jsx(Lo,{children:i.initTime}),z.jsx(Lo,{children:i.endTime}),z.jsx(Lo,{children:i.status}),z.jsx(Lo,{children:z.jsx(hr,{size:"small",onClick:()=>e(`/reports/mission/${i.id}`),children:z.jsx(The,{fontSize:"small"})})})]},i.id))})]})})})})]})},nvt=()=>z.jsx("div",{children:"ReplayPage"}),rvt=Wr(t=>({root:{position:"relative",width:"200px",height:"200px",backgroundColor:"#F7F9F9",overflow:"hidden",margin:"auto"},box_down:{width:"100%",height:"50%",backgroundColor:"#5D6D7E",position:"absolute",transition:"bottom 0.3s ease-in-out",bottom:0,left:"50%",transform:"translate(-50%, 100%)",borderTop:"6px solid #1B2631 "},box_right:{width:"50%",height:"100%",backgroundColor:"#5D6D7E",position:"absolute",transition:"right 0.3s ease-in-out",top:"50%",right:0,transform:"translate(100%, -50%)",borderLeft:"6px solid #1B2631 "},box_up:{width:"100%",height:"50%",backgroundColor:"#5D6D7E",position:"absolute",transition:"top 0.3s ease-in-out",top:0,left:"50%",transform:"translate(-50%, -100%)",borderBottom:"6px solid #1B2631 "},box_left:{width:"50%",height:"100%",backgroundColor:"#5D6D7E",position:"absolute",transition:"left 0.3s ease-in-out",top:"50%",left:0,transform:"translate(-100%, -50%)",borderRight:"6px solid #1B2631 "},text_right:{position:"absolute",right:"15%",top:"50%"},text_left:{position:"absolute",left:"15%",top:"50%"},text_down:{position:"absolute",right:"50%",bottom:"15%",transform:"translate(50%, 50%)"},text_up:{position:"absolute",right:"50%",top:"15%",transform:"translate(50%, -50%)"},icon:{position:"absolute",width:"25%",height:"25%",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},centerContent:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}})),ER=({device:t,data:e=[10,15,11,0,12,20],sensors:n={down:[0,15],front:[0,15],left:[0,12],back:[0,12],right:[0,12],up:[0,20]},front_view:r=!1,test:i=!1})=>{const o=rvt(),[s,a]=V.useState(0),[l,d]=V.useState(0),[h,p]=V.useState(0),[g,v]=V.useState(0);V.useEffect(()=>{r?(n.hasOwnProperty("down")&&v(40-40*e[0]/n.down[1]),n.hasOwnProperty("left")&&d(40-40*e[2]/n.left[1]),n.hasOwnProperty("right")&&a(40-40*e[4]/n.right[1]),n.hasOwnProperty("up")&&p(40-40*e[5]/n.up[1])):(n.hasOwnProperty("front")&&p(40-40*e[1]/n.front[1]),n.hasOwnProperty("left")&&a(40-40*e[2]/n.left[1]),n.hasOwnProperty("back")&&v(40-40*e[3]/n.down[1]),n.hasOwnProperty("right")&&d(40-50*e[4]/n.right[1]))},[e,t,n]);const x=()=>{a(w=>w-10),d(w=>w-10),p(w=>w-10),v(w=>w-10)},b=()=>{a(w=>w+10),d(w=>w+10),p(w=>w+10),v(w=>w+10)};return z.jsxs("div",{style:{flex:1,margin:"10px"},children:[z.jsxs("div",{className:o.root,children:[z.jsx("div",{className:o.box_left,style:{left:`${s}%`}}),z.jsx("div",{className:o.box_right,style:{right:`${l}%`}}),z.jsx("div",{className:o.box_up,style:{top:`${h}%`}}),z.jsx("div",{className:o.box_down,style:{bottom:`${g}%`}}),!r&&z.jsxs(z.Fragment,{children:[s<50&&z.jsxs("div",{className:o.text_left,children:[" ",`${e[2]}m`]}),l<50&&z.jsxs("div",{className:o.text_right,children:[" ",`${e[4]}m`]}),h<50&&z.jsxs("div",{className:o.text_up,children:[" ",`${e[1]}m`]}),g<50&&z.jsxs("div",{className:o.text_down,children:[" ",`${e[3]}m`]}),z.jsx("img",{className:o.icon,src:eM[eI("dji_M210_melodic")],alt:""})]}),r&&z.jsxs(z.Fragment,{children:[s<50&&z.jsxs("div",{className:o.text_left,children:[" ",`${e[4]}m`]}),l<50&&z.jsxs("div",{className:o.text_right,children:[" ",`${e[2]}m`]}),h<50&&z.jsxs("div",{className:o.text_up,children:[" ",`${e[5]}m`]}),g<50&&z.jsxs("div",{className:o.text_down,children:[" ",`${e[0]}m`]}),z.jsx("img",{className:o.icon,src:l_e[eI("dji_M210_melodic")],alt:""})]})]}),!r&&z.jsx(yn,{align:"center",children:"Top view"}),r&&z.jsx(yn,{align:"center",children:"Front view"}),i&&z.jsxs("div",{children:[z.jsx("button",{onClick:x,children:"Move Left"}),z.jsx("button",{onClick:b,children:"Move Right"})]})]})};var Che={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(zx,function(){var n=1e3,r=6e4,i=36e5,o="millisecond",s="second",a="minute",l="hour",d="day",h="week",p="month",g="quarter",v="year",x="date",b="Invalid Date",w=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,S=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,C={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(re){var me=["th","st","nd","rd"],he=re%100;return"["+re+(me[(he-20)%10]||me[he]||me[0])+"]"}},A=function(re,me,he){var we=String(re);return!we||we.length>=me?re:""+Array(me+1-we.length).join(he)+re},P={s:A,z:function(re){var me=-re.utcOffset(),he=Math.abs(me),we=Math.floor(he/60),ee=he%60;return(me<=0?"+":"-")+A(we,2,"0")+":"+A(ee,2,"0")},m:function re(me,he){if(me.date()<he.date())return-re(he,me);var we=12*(he.year()-me.year())+(he.month()-me.month()),ee=me.clone().add(we,p),ye=he-ee<0,be=me.clone().add(we+(ye?-1:1),p);return+(-(we+(he-ee)/(ye?ee-be:be-ee))||0)},a:function(re){return re<0?Math.ceil(re)||0:Math.floor(re)},p:function(re){return{M:p,y:v,w:h,d,D:x,h:l,m:a,s,ms:o,Q:g}[re]||String(re||"").toLowerCase().replace(/s$/,"")},u:function(re){return re===void 0}},k="en",F={};F[k]=C;var B="$isDayjsObject",W=function(re){return re instanceof le||!(!re||!re[B])},J=function re(me,he,we){var ee;if(!me)return k;if(typeof me=="string"){var ye=me.toLowerCase();F[ye]&&(ee=ye),he&&(F[ye]=he,ee=ye);var be=me.split("-");if(!ee&&be.length>1)return re(be[0])}else{var Le=me.name;F[Le]=me,ee=Le}return!we&&ee&&(k=ee),ee||!we&&k},H=function(re,me){if(W(re))return re.clone();var he=typeof me=="object"?me:{};return he.date=re,he.args=arguments,new le(he)},Y=P;Y.l=J,Y.i=W,Y.w=function(re,me){return H(re,{locale:me.$L,utc:me.$u,x:me.$x,$offset:me.$offset})};var le=function(){function re(he){this.$L=J(he.locale,null,!0),this.parse(he),this.$x=this.$x||he.x||{},this[B]=!0}var me=re.prototype;return me.parse=function(he){this.$d=function(we){var ee=we.date,ye=we.utc;if(ee===null)return new Date(NaN);if(Y.u(ee))return new Date;if(ee instanceof Date)return new Date(ee);if(typeof ee=="string"&&!/Z$/i.test(ee)){var be=ee.match(w);if(be){var Le=be[2]-1||0,je=(be[7]||"0").substring(0,3);return ye?new Date(Date.UTC(be[1],Le,be[3]||1,be[4]||0,be[5]||0,be[6]||0,je)):new Date(be[1],Le,be[3]||1,be[4]||0,be[5]||0,be[6]||0,je)}}return new Date(ee)}(he),this.init()},me.init=function(){var he=this.$d;this.$y=he.getFullYear(),this.$M=he.getMonth(),this.$D=he.getDate(),this.$W=he.getDay(),this.$H=he.getHours(),this.$m=he.getMinutes(),this.$s=he.getSeconds(),this.$ms=he.getMilliseconds()},me.$utils=function(){return Y},me.isValid=function(){return this.$d.toString()!==b},me.isSame=function(he,we){var ee=H(he);return this.startOf(we)<=ee&&ee<=this.endOf(we)},me.isAfter=function(he,we){return H(he)<this.startOf(we)},me.isBefore=function(he,we){return this.endOf(we)<H(he)},me.$g=function(he,we,ee){return Y.u(he)?this[we]:this.set(ee,he)},me.unix=function(){return Math.floor(this.valueOf()/1e3)},me.valueOf=function(){return this.$d.getTime()},me.startOf=function(he,we){var ee=this,ye=!!Y.u(we)||we,be=Y.p(he),Le=function(lt,Je){var Qe=Y.w(ee.$u?Date.UTC(ee.$y,Je,lt):new Date(ee.$y,Je,lt),ee);return ye?Qe:Qe.endOf(d)},je=function(lt,Je){return Y.w(ee.toDate()[lt].apply(ee.toDate("s"),(ye?[0,0,0,0]:[23,59,59,999]).slice(Je)),ee)},dt=this.$W,Be=this.$M,ot=this.$D,at="set"+(this.$u?"UTC":"");switch(be){case v:return ye?Le(1,0):Le(31,11);case p:return ye?Le(1,Be):Le(0,Be+1);case h:var It=this.$locale().weekStart||0,Lt=(dt<It?dt+7:dt)-It;return Le(ye?ot-Lt:ot+(6-Lt),Be);case d:case x:return je(at+"Hours",0);case l:return je(at+"Minutes",1);case a:return je(at+"Seconds",2);case s:return je(at+"Milliseconds",3);default:return this.clone()}},me.endOf=function(he){return this.startOf(he,!1)},me.$set=function(he,we){var ee,ye=Y.p(he),be="set"+(this.$u?"UTC":""),Le=(ee={},ee[d]=be+"Date",ee[x]=be+"Date",ee[p]=be+"Month",ee[v]=be+"FullYear",ee[l]=be+"Hours",ee[a]=be+"Minutes",ee[s]=be+"Seconds",ee[o]=be+"Milliseconds",ee)[ye],je=ye===d?this.$D+(we-this.$W):we;if(ye===p||ye===v){var dt=this.clone().set(x,1);dt.$d[Le](je),dt.init(),this.$d=dt.set(x,Math.min(this.$D,dt.daysInMonth())).$d}else Le&&this.$d[Le](je);return this.init(),this},me.set=function(he,we){return this.clone().$set(he,we)},me.get=function(he){return this[Y.p(he)]()},me.add=function(he,we){var ee,ye=this;he=Number(he);var be=Y.p(we),Le=function(Be){var ot=H(ye);return Y.w(ot.date(ot.date()+Math.round(Be*he)),ye)};if(be===p)return this.set(p,this.$M+he);if(be===v)return this.set(v,this.$y+he);if(be===d)return Le(1);if(be===h)return Le(7);var je=(ee={},ee[a]=r,ee[l]=i,ee[s]=n,ee)[be]||1,dt=this.$d.getTime()+he*je;return Y.w(dt,this)},me.subtract=function(he,we){return this.add(-1*he,we)},me.format=function(he){var we=this,ee=this.$locale();if(!this.isValid())return ee.invalidDate||b;var ye=he||"YYYY-MM-DDTHH:mm:ssZ",be=Y.z(this),Le=this.$H,je=this.$m,dt=this.$M,Be=ee.weekdays,ot=ee.months,at=ee.meridiem,It=function(Je,Qe,ge,et){return Je&&(Je[Qe]||Je(we,ye))||ge[Qe].slice(0,et)},Lt=function(Je){return Y.s(Le%12||12,Je,"0")},lt=at||function(Je,Qe,ge){var et=Je<12?"AM":"PM";return ge?et.toLowerCase():et};return ye.replace(S,function(Je,Qe){return Qe||function(ge){switch(ge){case"YY":return String(we.$y).slice(-2);case"YYYY":return Y.s(we.$y,4,"0");case"M":return dt+1;case"MM":return Y.s(dt+1,2,"0");case"MMM":return It(ee.monthsShort,dt,ot,3);case"MMMM":return It(ot,dt);case"D":return we.$D;case"DD":return Y.s(we.$D,2,"0");case"d":return String(we.$W);case"dd":return It(ee.weekdaysMin,we.$W,Be,2);case"ddd":return It(ee.weekdaysShort,we.$W,Be,3);case"dddd":return Be[we.$W];case"H":return String(Le);case"HH":return Y.s(Le,2,"0");case"h":return Lt(1);case"hh":return Lt(2);case"a":return lt(Le,je,!0);case"A":return lt(Le,je,!1);case"m":return String(je);case"mm":return Y.s(je,2,"0");case"s":return String(we.$s);case"ss":return Y.s(we.$s,2,"0");case"SSS":return Y.s(we.$ms,3,"0");case"Z":return be}return null}(Je)||be.replace(":","")})},me.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},me.diff=function(he,we,ee){var ye,be=this,Le=Y.p(we),je=H(he),dt=(je.utcOffset()-this.utcOffset())*r,Be=this-je,ot=function(){return Y.m(be,je)};switch(Le){case v:ye=ot()/12;break;case p:ye=ot();break;case g:ye=ot()/3;break;case h:ye=(Be-dt)/6048e5;break;case d:ye=(Be-dt)/864e5;break;case l:ye=Be/i;break;case a:ye=Be/r;break;case s:ye=Be/n;break;default:ye=Be}return ee?ye:Y.a(ye)},me.daysInMonth=function(){return this.endOf(p).$D},me.$locale=function(){return F[this.$L]},me.locale=function(he,we){if(!he)return this.$L;var ee=this.clone(),ye=J(he,we,!0);return ye&&(ee.$L=ye),ee},me.clone=function(){return Y.w(this.$d,this)},me.toDate=function(){return new Date(this.valueOf())},me.toJSON=function(){return this.isValid()?this.toISOString():null},me.toISOString=function(){return this.$d.toISOString()},me.toString=function(){return this.$d.toUTCString()},re}(),pe=le.prototype;return H.prototype=pe,[["$ms",o],["$s",s],["$m",a],["$H",l],["$W",d],["$M",p],["$y",v],["$D",x]].forEach(function(re){pe[re[1]]=function(me){return this.$g(me,re[0],re[1])}}),H.extend=function(re,me){return re.$i||(re(me,le,H),re.$i=!0),H},H.locale=J,H.isDayjs=W,H.unix=function(re){return H(1e3*re)},H.en=F[k],H.Ls=F,H.p={},H})})(Che);var ivt=Che.exports;const PJ=Mi(ivt),ovt=(t,e,n,r,i,o,s)=>{const a=nr(l=>l.devices.items);V.useEffect(()=>{const l=Object.values(a).filter(d=>!e.statuses.length||e.statuses.includes(d.status)).filter(d=>{const h=t.toLowerCase();return[d.name,d.uniqueId,d.phone,d.model,d.contact].some(p=>p&&p.toLowerCase().includes(h))});switch(n){case"name":l.sort((d,h)=>d.name.localeCompare(h.name));break;case"lastUpdate":l.sort((d,h)=>{const p=d.lastUpdate?PJ(d.lastUpdate).valueOf():0;return(h.lastUpdate?PJ(h.lastUpdate).valueOf():0)-p});break}o(l),s(r?l.map(d=>i[d.id]).filter(Boolean):Object.values(i))},[t,e,n,r,a,i,o,s])},svt=Wr(t=>({card:{pointerEvents:"auto"},media:{height:"20vw",width:"100%",background:"black"},media1:{width:"100%",height:"100%",display:"flex",justifyContent:"flex-end",alignItems:"flex-start",background:"black"},gruopBtn:{float:"right",height:"40px"},mediaButton:{color:t.palette.colors.white,mixBlendMode:"difference"},tittle:{display:"block",width:"calc( 100% - 60pt )",paddingLeft:"15pt",paddingTop:"10pt",paddingBottom:"10pt",textAlign:"left"},root:{pointerEvents:"none"},root_max:{pointerEvents:"none"}})),TR=({deviceId:t,deviceIp:e="127.0.0.1",camera_src:n="video0",onClose:r})=>{const i=svt(),o=t?nr(h=>h.devices.items[t]):{name:"test"},s="http://"+e+":8889/"+n;V.useState(!1);let a=i.card,l=i.root_max,d=i.media;return V.useRef(),z.jsx("div",{className:l,children:o&&z.jsxs(Nh,{className:a,children:[z.jsx("div",{children:z.jsx("div",{className:i.tittle,children:"Id: "+o.name})}),z.jsx("iframe",{src:s,className:d})]})})},avt=Wr(t=>({card:{pointerEvents:"auto"},media:{width:"100%",height:"20vw",justifyContent:"flex-end",alignItems:"flex-start"},mediaButton:{color:t.palette.colors.white,mixBlendMode:"difference"},tittle:{display:"block",width:"calc( 100% - 60pt )",paddingLeft:"15pt",paddingTop:"10pt",paddingBottom:"10pt",textAlign:"left"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(1,1,0,2)},root:{pointerEvents:"none"},root_max:{pointerEvents:"none"}})),Ahe=({deviceId:t,datacamera:e,onClose:n})=>{const r=avt(),[i,o]=V.useState(_I),s=nr(h=>h.devices.items[t]);V.useState(!1);let a=r.card,l=r.root_max;const d=nr(h=>h.data.camera[t]);return V.useEffect(()=>{t!=null&&(d!=null?o("data:image/bgr8;base64,"+d.camera):o(_I))},[d]),z.jsx("div",{className:l,children:s&&z.jsxs(Nh,{className:a,children:[z.jsx("div",{children:z.jsxs("div",{className:r.tittle,children:["Image "+s.name," "]})}),z.jsx("img",{src:i,className:r.media})]})})};Wr(t=>({root:{height:"100%",display:"flex",flexDirection:"column"},content:{overflow:"auto",paddingTop:t.spacing(2),paddingBottom:t.spacing(2)},buttons:{marginTop:t.spacing(2),marginBottom:t.spacing(2),display:"flex",justifyContent:"space-evenly","& > *":{flexBasis:"33%"}},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)}}));const lvt=Wr(t=>({root:{margin:"0",height:"100vh",display:"flex",flexDirection:"column"},content:{overflow:"auto",paddingTop:t.spacing(2),paddingBottom:t.spacing(2)},buttons:{marginTop:t.spacing(2),marginBottom:t.spacing(2),display:"flex",justifyContent:"space-evenly","& > *":{flexBasis:"33%"}},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)}})),cvt=({device:t,myhostname:e})=>{const n=t.camera&&t.camera.length>0?t.camera[0]:{type:""};return z.jsxs(z.Fragment,{children:[n.type==="WebRTC"&&z.jsx(TR,{deviceId:t.id,deviceIp:e,devicename:t.name,camera_src:t.name+"_"+n.source,onClose:()=>{console.log("cerrar ")}}),n.type==="WebRTC_env"&&z.jsx(TR,{deviceId:t.id,deviceIp:t.ip,devicename:t.name,camera_src:n.source,onClose:()=>{console.log("cerrar ")}}),n.type==="Websocket"&&z.jsx(Ahe,{deviceId:t.id,datacamera:null,onClose:()=>console.log("cerrar ")})]})},uvt=()=>{const t=lvt(),e=Jf(),{id:n}=bte(),[r,i]=Ye.useState(0),[o,s]=V.useState(),[a,l]=V.useState({}),d=nr(pe=>pe.data.positions),h=nr(pe=>pe.devices.items),p=nr(pe=>pe.session.markers);V.useState(0);const[g,v]=V.useState([]),x=`${window.location.hostname}`,[b,w]=V.useState([]),[S,C]=V.useState([]),[A,P]=V.useState(""),[k,F]=sP("filter",{statuses:[],groups:[]}),[B,W]=sP("filterSort",""),[J,H]=sP("filterMap",!1),[Y,le]=V.useState(!1);return ovt(A,k,B,J,d,C,w),V.useEffect(()=>{v(p)},[p]),V.useEffect(()=>{n&&s(d[n])},[n,d]),V.useEffect(()=>{n&&(l(h[n]),console.log(h[n]))},[n]),z.jsxs("div",{className:t.root,children:[z.jsx(j1,{position:"sticky",color:"inherit",children:z.jsxs(Rm,{children:[z.jsx(hr,{color:"inherit",edge:"start",sx:{mr:2},onClick:()=>e(-1),children:z.jsx(d_,{})}),z.jsx(yn,{variant:"h6",children:a.name})]})}),z.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[z.jsxs("div",{style:{flex:1},children:[z.jsx("div",{style:{height:"50vh"},children:z.jsx(Zse,{filteredPositions:b,markers:g,selectedPosition:n,filteredMissiondeviceid:n})}),z.jsx("div",{children:Object.keys(a).length>0&&z.jsx(cvt,{device:a,myhostname:x})})]}),z.jsxs("div",{style:{flex:1,justifyContent:"space-between",display:"flex",flexDirection:"column"},children:[z.jsx("div",{style:{height:"50vh"},className:t.content,children:z.jsx(s_,{maxWidth:"false",children:z.jsx(jo,{children:z.jsxs(jk,{"aria-label":"simple table",children:[z.jsx(A$,{children:z.jsxs(yy,{children:[z.jsx(Lo,{sx:{fontWeight:"bold"},children:"Attributes"}),z.jsx(Lo,{sx:{fontWeight:"bold"},children:"Value"})]})}),z.jsxs(Uk,{children:[o&&Object.getOwnPropertyNames(o).filter(pe=>pe!=="attributes").map(pe=>z.jsxs(yy,{children:[z.jsx(Lo,{children:pe}),z.jsx(Lo,{children:z.jsx(SB,{position:o,property:pe})})]},pe)),o&&Object.getOwnPropertyNames(o.attributes).map(pe=>z.jsxs(yy,{children:[z.jsx(Lo,{children:pe}),z.jsx(Lo,{children:z.jsx(SB,{position:o,attribute:pe})})]},pe))]})]})})})}),z.jsx("div",{style:{padding:"15px",margin:"10px"},children:z.jsxs(jo,{children:[z.jsx(yn,{align:"center",variant:"h5",component:"div",style:{padding:"15px"},children:"Avoidance sensor"}),o&&o.attributes&&z.jsxs("div",{style:{display:"flex",flex:1},children:[z.jsx(ER,{front_view:!0,data:o.attributes.obstacle_info}),z.jsx(ER,{front_view:!1,data:o.attributes.obstacle_info})]})]})}),z.jsx("div",{style:{padding:"15px",marginTop:"auto"},children:z.jsx(jo,{children:z.jsxs(DEe,{showLabels:!0,value:r,onChange:(pe,re)=>{i(re)},children:[z.jsx(fC,{label:"Edit",icon:z.jsx(KU,{})}),z.jsx(fC,{label:"Result",icon:z.jsx(wO,{})}),z.jsx(fC,{label:"Command",icon:z.jsx(XU,{}),onClick:()=>le(!0)}),z.jsx(fC,{label:"Delete",icon:z.jsx(Mu,{})})]})})})]})]}),Y&&z.jsx(Hse,{id:n,onClose:()=>le(!1)})]})},dvt=Wr(()=>({root:{height:"100%"},sidebarStyle:{pointerEvents:"none",display:"flex",flexDirection:"column",position:"fixed",left:0,top:"88px",height:"calc(100% - 88px)",width:"360px",margin:"0px",zIndex:3},middleStyle:{flex:1,display:"grid"},contentListStyle:{pointerEvents:"auto",gridArea:"1 / 1",zIndex:4}})),hvt=(t,e)=>{switch(t){case"success":toastProperties={id:list.length+1,title:"Success",description:e,backgroundColor:"#5cb85c"};break;case"danger":toastProperties={id:list.length+1,title:"Danger",description:e,backgroundColor:"#d9534f"};break;case"info":toastProperties={id:list.length+1,title:"Info",description:e,backgroundColor:"#5bc0de"};break;case"warning":toastProperties={id:list.length+1,title:"Warning",description:e,backgroundColor:"#f0ad4e"};break;default:toastProperties=[]}setList([...list,toastProperties])},fvt=()=>{const[t,e]=V.useState(!1),n=nr(s=>s.devices.items);let r=Object.values(n);const i=`${window.location.hostname}`,o=dvt();return z.jsx("div",{className:o.root,children:z.jsxs(Z1,{notification:hvt,children:[z.jsx(HE,{}),z.jsx(J1,{}),z.jsx("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 90px)"},children:z.jsx(Ko,{component:"div",sx:{overflow:"auto"},style:{backgroundColor:"#000000",width:"calc(100vw - 360px)",height:"calc(100vh - 90px",padding:"20px",float:"right"},children:z.jsx(Hg,{container:!0,spacing:2,justifyContent:"space-around",children:Ye.Children.toArray(Object.values(n).map(s=>z.jsx(V.Fragment,{children:s.camera.map((a,l)=>z.jsxs(Hg,{item:!0,xs:12,sm:6,children:[a.type==="WebRTC"&&z.jsx(TR,{deviceId:s.id,deviceIp:i,devicename:s.name,camera_src:s.name+"_"+a.source,onClose:()=>{console.log("cerrar ")}}),a.type==="WebRTC_env"&&z.jsx(TR,{deviceId:s.id,deviceIp:s.ip,devicename:s.name,camera_src:a.source,onClose:()=>{console.log("cerrar ")}}),a.type==="Websocket"&&z.jsx(Ahe,{deviceId:s.id,datacamera:null,onClose:()=>console.log("cerrar ")})]},"card-"+s.id+"-"+l))},"dev"+s.id)))})})}),z.jsx("div",{className:o.sidebarStyle,children:z.jsx("div",{className:o.middleStyle,children:z.jsxs(jo,{square:!0,className:o.contentListStyle,children:[z.jsx(Yse,{SetAddUAVOpen:e}),z.jsx(kse,{devices:r})]})})})]})})},pvt=Wr(t=>({root:{height:"100%",display:"flex",flexDirection:"column"},content:{overflow:"auto",paddingTop:t.spacing(2),paddingBottom:t.spacing(2)},buttons:{marginTop:t.spacing(2),marginBottom:t.spacing(2),display:"flex",justifyContent:"space-evenly","& > *":{flexBasis:"33%"}},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)}})),IJ=()=>{const t=pvt(),e=Jf(),[n,r]=V.useState([]),[i,o]=V.useState(),s=nr(l=>l.events.items),a=nr(l=>l.devices.items);return V.useEffect(()=>{r(s)},[s]),V.useEffect(()=>{o({...a,"-1":{name:"GCS"}})},[a]),nr(l=>{if(n){const d=l.devices.items[n.deviceId];if(d)return d.name}return null}),z.jsxs("div",{className:t.root,children:[z.jsx(j1,{position:"sticky",color:"inherit",children:z.jsxs(Rm,{children:[z.jsx(hr,{color:"inherit",edge:"start",sx:{mr:2},onClick:()=>e(-1),children:z.jsx(d_,{})}),z.jsx(yn,{variant:"h6",children:"Events"})]})}),z.jsx("div",{className:t.content,children:z.jsx(s_,{maxWidth:"sm",children:z.jsx(jo,{children:z.jsxs(jk,{children:[z.jsx(A$,{children:z.jsxs(yy,{children:[z.jsx(Lo,{children:"UAV"}),z.jsx(Lo,{children:"Fecha"}),z.jsx(Lo,{children:"Valor"})]})}),z.jsx(Uk,{children:n&&n.map(l=>z.jsxs(yy,{children:[z.jsx(Lo,{children:i[l.deviceId].name}),z.jsx(Lo,{children:l.eventTime}),z.jsx(Lo,{children:l.attributes.message})]},l.id))})]})})})})]})},mvt=()=>z.jsxs("div",{children:[z.jsx("h3",{children:"Move the Square"}),z.jsx(ER,{}),z.jsx(Py,{}),z.jsx(ER,{front_view:!0})]}),Phe=V.createContext(null);function gvt(){const[t,e]=V.useState(null);return V.useEffect(()=>{e(`mui-p-${Math.round(Math.random()*1e5)}`)},[]),t}function yvt(t){const{children:e,value:n}=t,r=gvt(),i=V.useMemo(()=>({idPrefix:r,value:n}),[r,n]);return z.jsx(Phe.Provider,{value:i,children:e})}function Ihe(){return V.useContext(Phe)}function Rhe(t,e){const{idPrefix:n}=t;return n===null?null:`${t.idPrefix}-P-${e}`}function khe(t,e){const{idPrefix:n}=t;return n===null?null:`${t.idPrefix}-T-${e}`}const vvt=["children"],_vt=V.forwardRef(function(e,n){const{children:r}=e,i=an(e,vvt),o=Ihe();if(o===null)throw new TypeError("No TabContext provided");const s=V.Children.map(r,a=>V.isValidElement(a)?V.cloneElement(a,{"aria-controls":Rhe(o,a.props.value),id:khe(o,a.props.value)}):null);return z.jsx($re,de({},i,{ref:n,value:o.value,children:s}))});function xvt(t){return jn("MuiTabPanel",t)}$n("MuiTabPanel",["root"]);const bvt=["children","className","value"],wvt=t=>{const{classes:e}=t;return Un({root:["root"]},xvt,e)},Svt=Kt("div",{name:"MuiTabPanel",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({padding:t.spacing(3)})),xz=V.forwardRef(function(e,n){const r=Wn({props:e,name:"MuiTabPanel"}),{children:i,className:o,value:s}=r,a=an(r,bvt),l=de({},r),d=wvt(l),h=Ihe();if(h===null)throw new TypeError("No TabContext provided");const p=Rhe(h,s),g=khe(h,s);return z.jsx(Svt,de({"aria-labelledby":g,className:Wt(d.root,o),hidden:s!==h.value,id:p,ref:n,role:"tabpanel",ownerState:l},a,{children:s===h.value&&i}))}),Mvt=Wr(t=>({list:{maxHeight:"100%",overflow:"auto"},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)},attributeName:{display:"inline-block",width:"40%",textAlign:"left",verticalAlign:"middle"},attribute:{display:"inline-block",width:"58%"},actionValue:{display:"inline-block",width:"40%"}})),Ohe=({markers:t,setMarkers:e,type:n="Base"})=>{const r=Mvt(),[i,o]=V.useState(!1),[s,a]=V.useState(!0),l=v=>(x,b)=>{o(b?v:!1)},d=()=>{let v=it.getCenter(),x=JSON.parse(JSON.stringify(t));x.push({latitude:v.lat,longitude:v.lng}),e(x,{meth:"add",index:-1})},h=v=>{let x=JSON.parse(JSON.stringify(t));x.splice(v,1),e(x,{meth:"del",index:v})},p=(v,x)=>{let b=JSON.parse(JSON.stringify(t));b[v].latitude=x,e(b,{meth:"mod",index:v})},g=(v,x)=>{let b=JSON.parse(JSON.stringify(t));b[v].longitude=x,e(b,{meth:"mod",index:v})};return V.useEffect(()=>{t&&(t.length>0?a(!1):a(!0))},[t]),z.jsx(V.Fragment,{children:s?z.jsx(Ko,{textAlign:"center",children:z.jsx(jr,{variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:d,children:"Create New Base"})}):z.jsxs("div",{className:r.details,children:[Ye.Children.toArray(Object.values(t).map((v,x,b)=>z.jsxs(ml,{expanded:i==="wp "+x,onChange:l("wp "+x),children:[z.jsxs(yl,{expandIcon:z.jsx(La,{}),children:[z.jsx(yn,{sx:{width:"33%",flexShrink:0},children:n+" "+x}),z.jsx(hr,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>h(x),children:z.jsx(Mu,{})})]}),z.jsx(gl,{className:r.details,children:i==="wp "+x&&z.jsx(V.Fragment,{children:z.jsxs(Ko,{component:"form",sx:{"& .MuiTextField-root":{m:1}},children:[z.jsx("div",{children:z.jsx(yn,{variant:"subtitle1",style:{display:"inline"},children:"Position"})}),z.jsx(bi,{required:!0,label:"Latitude ",type:"number",sx:{width:"15ch"},variant:"standard",inputProps:{maxLength:8,step:1e-4},value:v.latitude,onChange:w=>{p(x,w.target.value)}}),z.jsx(bi,{required:!0,label:"Longitud ",type:"number",variant:"standard",sx:{width:"15ch"},inputProps:{maxLength:8,step:1e-4},value:v.longitude,onChange:w=>{g(x,w.target.value)}})]})})})]}))),z.jsx(Ko,{textAlign:"center",children:z.jsxs(jr,{variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:d,children:["Create new ",n]})})]})})},Evt=Wr(t=>({list:{maxHeight:"100%",overflow:"auto"},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)},attributeName:{display:"inline-block",width:"40%",textAlign:"left",verticalAlign:"middle"},attribute:{display:"inline-block",width:"58%"},actionValue:{display:"inline-block",width:"40%"}})),Tvt=({data:t,param:e,setData:n,type:r="Base"})=>{const i=Evt(),[o,s]=V.useState(!1),[a,l]=V.useState(!1),d=p=>(g,v)=>{s(v?p:!1)},h=(p=0,g="mission",v,x)=>{let b=JSON.parse(JSON.stringify(t));b[p][g][v]=Number(x),n(b)};return V.useEffect(()=>{t&&(t.length>0?l(!1):l(!0)),console.log(t),console.log(e)},[t]),z.jsx("div",{children:a?z.jsx(Ko,{textAlign:"center",children:z.jsx(yn,{children:"dont exits base"})}):z.jsx("div",{className:i.details,children:Ye.Children.toArray(Object.values(t).map((p,g,v)=>z.jsxs(ml,{expanded:o===`wp ${g}`,onChange:d(`wp ${g}`),children:[z.jsxs(yl,{expandIcon:z.jsx(La,{}),children:[z.jsx(yn,{sx:{width:"33%",flexShrink:0},children:`${r} ${g}`}),z.jsx(hr,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>console.log("button"),children:z.jsx(tae,{})})]}),z.jsx(gl,{className:i.details,children:o===`wp ${g}`&&z.jsxs(Ko,{component:"form",sx:{"& .MuiTextField-root":{m:1}},children:[z.jsx("div",{children:z.jsx(yn,{variant:"subtitle1",style:{display:"inline"},children:"Device params"})}),z.jsx("div",{children:e.devices&&Ye.Children.toArray(Object.keys(e.devices).map((x,b,w)=>z.jsx("div",{children:x=="id"&&z.jsx(lu,{emptyValue:null,fullWidth:!0,label:"device",value:p.devices[x],endpoint:"/api/devices",keyGetter:S=>S.id,titleGetter:S=>`${S.name} - ${S.category}`,onChange:S=>{h(g,"devices",x,S.target.value)}})})))}),z.jsx("div",{children:z.jsx(yn,{variant:"subtitle1",style:{display:"inline"},children:"Settings"})}),z.jsx("div",{children:e.settings&&Ye.Children.toArray(Object.keys(e.settings).map(x=>z.jsx("div",{children:e.settings[x].name&&z.jsxs(V.Fragment,{children:[z.jsx(yn,{variant:"subtitle1",className:i.attributeName,children:e.settings[x].name}),z.jsx("div",{className:i.actionValue,children:z.jsx(bi,{required:!0,fullWidth:!0,type:"number",value:p.settings[x]?p.settings[x]:e.settings[x].default,onChange:b=>{h(g,"settings",x,b.target.value)}})})]})})))})]})})]})))})})};class Cvt{constructor(){this.markers={},this.select={id:-1}}initMarkers(e){this.markers=JSON.parse(JSON.stringify(e))}getMarkers(){return this.markers}setMarkers(e){this.markers=e}getSelect(){return this.select}setSelect(e){this.select=e}}const Avt=({markers:t,selectMarkers:e=[],showTitles:n,showLines:r,moveMarkers:i,setMarkers:o,SelectItems:s,CreateItems:a,setLocations:l})=>{const d=V.useId(),h=`${d}-lines`,p=`${d}-select`,g=.4,[v,x]=V.useState(new Cvt),b=()=>it.getCanvas().style.cursor="move",w=()=>it.getCanvas().style.cursor="pointer",S=()=>it.getCanvas().style.cursor="",C=H=>{H.hasOwnProperty("features")?H.features[0].properties.type=="element"&&l({...H.features[0].properties,type:"object"}):l({latitude:H.lngLat.lat,longitude:H.lngLat.lng,groupId:0,id:0,type:"point"})},A=H=>{var re;it.getCanvas().style.cursor="grabbing",console.log("on move point"+H.lngLat.lng+"-"+H.lngLat.lat);let Y=v.getMarkers(),le=v.getSelect();console.log(Y),console.log(le),le.id>=0&&(le.type=="base"&&(Y.bases[le.id].latitude=H.lngLat.lat,Y.bases[le.id].longitude=H.lngLat.lng),le.type=="element"&&(Y.elements[le.groupId].items[le.id].latitude=H.lngLat.lat,Y.elements[le.groupId].items[le.id].longitude=H.lngLat.lng));let pe=B(Y);(re=it.getSource(d))==null||re.setData({type:"FeatureCollection",features:pe.map(me=>({type:"Feature",geometry:{type:"Point",coordinates:[me.longitude,me.latitude]},properties:{...me}}))})},P=H=>{let Y=H.lngLat;it.getCanvas().style.cursor="";let le=v.getMarkers(),pe=v.getSelect();console.log(le),console.log(pe),pe.id>=0&&(pe.type=="base"&&(le.bases[pe.id].latitude=H.lngLat.lat,le.bases[pe.id].longitude=H.lngLat.lng),pe.type=="element"&&(le.elements[pe.groupId].items[pe.id].latitude=H.lngLat.lat,le.elements[pe.groupId].items[pe.id].longitude=H.lngLat.lng)),v.getSelect({id:-1}),o(le),console.log(`Longitude: ${Y.lng} Latitude: ${Y.lat}`),it.off("mousemove",A),it.off("touchmove",A)},k=H=>{H.preventDefault(),v.setSelect(H.features[0].properties),it.getCanvas().style.cursor="grab",it.on("mousemove",A),it.once("mouseup",P)},F=H=>{H.points.length===1&&(console.log("touch start"),H.preventDefault(),it.on("touchmove",A),it.once("touchend",P))};V.useEffect(()=>(it.addSource(d,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),it.addSource(h,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),it.addSource(p,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),it.addLayer({id:p,type:"symbol",source:p,filter:["!has","point_count"],layout:{"icon-image":"background-{groupId}","icon-size":g*1.2,"icon-allow-overlap":!0,"text-allow-overlap":!0,"text-field":"{title}","text-font":Ch(it),"text-size":14},paint:{"text-color":"white"}}),r&&it.addLayer({source:h,id:h,type:"line",paint:{"line-color":["get","color"],"line-width":2}}),n?it.addLayer({id:d,type:"symbol",source:d,filter:["!has","point_count"],layout:{"icon-image":"{image}","icon-size":g,"icon-allow-overlap":!0,"text-field":"{title}","text-allow-overlap":!0,"text-anchor":"bottom","text-offset":[0,-2*g],"text-font":Ch(it),"text-size":12},paint:{"text-halo-color":"white","text-halo-width":1}}):it.addLayer({id:d,type:"symbol",source:d,layout:{"icon-image":"{image}","icon-size":g,"icon-allow-overlap":!0}}),s&&(it.on("mouseenter",d,w),it.on("mouseleave",d,S),it.on("click",d,C)),a&&it.on("click",C),i&&(it.on("mouseenter",d,b),it.on("mouseleave",d,S),it.on("mousedown",d,k),it.on("touchstart",d,F)),()=>{it.off("click",C),it.off("click",d,C),it.off("mouseenter",d,w),it.off("mouseenter",d,b),it.off("mouseleave",d,S),it.off("mousedown",d,k),it.off("touchstart",d,F),it.getLayer(d)&&it.removeLayer(d),it.getLayer(p)&&it.removeLayer(p),it.getLayer(h)&&it.removeLayer(h),it.getSource(d)&&it.removeSource(d),it.getSource(h)&&it.removeSource(h),it.getSource(p)&&it.removeSource(p)}),[n,r,i,s,a]);function B(H){const Y=[];return H.elements&&H.elements.forEach((le,pe)=>{le.items.forEach((re,me)=>{Y.push({...re,type:"element",groupId:pe,id:me,image:le.type,title:`${pe}-${me}`})})}),H.bases&&H.bases.forEach((le,pe)=>{Y.push({...le,type:"base",groupId:0,id:pe,image:"base",title:`b-${pe}`})}),Y}function W(H,Y){let le=Object.values(H.items).map(pe=>[pe.longitude,pe.latitude]);return{id:H.id,type:"Feature",geometry:{type:"LineString",coordinates:le},properties:{name:H.name,color:Hf.colors_devices[Y]}}}function J(H){console.log(H);const Y=[];return H.length>0&&H.forEach((le,pe)=>{le.items.forEach((re,me)=>{Y.push({...re,type:"element",groupId:pe,id:me,image:le.type,title:`${pe}-${me}`})})}),Y}return V.useEffect(()=>{var Y;v.initMarkers(t);let H=B(t);(Y=it.getSource(d))==null||Y.setData({type:"FeatureCollection",features:H.map(le=>({type:"Feature",geometry:{type:"Point",coordinates:[le.longitude,le.latitude]},properties:{...le}}))}),it.getSource(h).setData({type:"FeatureCollection",features:t.elements.map((le,pe)=>W(le,pe))})},[t,n,r,i,s,a]),V.useEffect(()=>{let H=J(e);it.getSource(p).setData({type:"FeatureCollection",features:H.map(Y=>({type:"Feature",geometry:{type:"Point",coordinates:[Y.longitude,Y.latitude]},properties:{...Y}}))})},[e,n,r,i,s,a]),null},Pvt=Wr(t=>({list:{maxHeight:"100%",overflow:"auto"},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)},attributeName:{display:"inline-block",width:"40%",textAlign:"left",verticalAlign:"middle"},attributeValue:{display:"inline-block",width:"58%"},actionValue:{display:"inline-block",width:"40%"}})),Ivt=({markers:t,setMarkers:e})=>{const n=Pvt();Ql(),V.useState(!1),V.useState(!1);const[r,i]=V.useState(!1),[o,s]=V.useState(!0),a=(v,x)=>{let b=JSON.parse(JSON.stringify(t));b[v].items=x,e(b)},l=(v,x)=>{let b=JSON.parse(JSON.stringify(t));b[v].name=x,e(b)},d=(v,x)=>{let b=JSON.parse(JSON.stringify(t));b[v].type=x,e(b)},h=v=>{let x=JSON.parse(JSON.stringify(t));x.splice(v,1),e(x)},p=()=>{let v=JSON.parse(JSON.stringify(t));v.push({type:"powerTower",name:"Elements",linea:!0,items:[]}),e(v)},g=v=>(x,b)=>{i(b?v:!1)};return V.useEffect(()=>{t&&(t.length>0?s(!1):s(!0)),console.log(t)},[t]),z.jsx(V.Fragment,{children:o?z.jsx(Ko,{textAlign:"center",children:z.jsx(jr,{variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:p,children:"Create New Group"})}):z.jsxs("div",{className:n.details,children:[Ye.Children.toArray(Object.values(t).map((v,x,b)=>z.jsxs(ml,{expanded:r==="Elements "+x,onChange:g("Elements "+x),children:[z.jsxs(yl,{expandIcon:z.jsx(La,{}),children:[z.jsx(yn,{sx:{width:"33%",flexShrink:0},children:"Group "+x}),z.jsx(hr,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>h(x),children:z.jsx(Mu,{})})]}),z.jsx(gl,{className:n.details,children:r==="Elements "+x&&z.jsxs(V.Fragment,{children:[z.jsx(bi,{required:!0,label:"Name",variant:"standard",value:v.name?v.name:"",onChange:w=>l(w.target.value)}),z.jsx(lu,{emptyValue:null,label:"Type",value:v.type,data:[{id:0,name:"Power Tower",type:"powerTower"},{id:1,name:"wind turbine",type:"windTurbine"},{id:2,name:"Solar Panel",type:"solarPanel"}],onChange:w=>d(x,w.target.value),keyGetter:w=>w.type,titleGetter:w=>w.name,style:{display:"inline",width:"200px"}}),z.jsx(Ohe,{markers:v.items,setMarkers:w=>a(x,w),type:"Element"})]})})]}))),z.jsx(Ko,{textAlign:"center",children:z.jsx(jr,{variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:p,children:"Create List of Elements"})})]})})},Rvt=Wr(t=>({list:{maxHeight:"100%",overflow:"auto"},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)},attributeName:{display:"inline-block",width:"40%",textAlign:"left",verticalAlign:"middle"},attributeValue:{display:"inline-block",width:"58%"},actionValue:{display:"inline-block",width:"40%"}})),kvt=({Data:t,setData:e})=>{const n=Rvt(),[r,i]=V.useState(!1),[o,s]=V.useState(!1),[a,l]=V.useState(!1),d=v=>{let x=JSON.parse(JSON.stringify(t));x.splice(v,1),e(x)},h=(v,x)=>{let b=JSON.parse(JSON.stringify(t));b[v].items.splice(x,1),e(b)},p=v=>(x,b)=>{s(b?v:!1)},g=v=>(x,b)=>{i(b?v:!1)};return V.useEffect(()=>{t&&(t.length>0?l(!0):l(!1))},[t]),z.jsx("div",{children:a&&z.jsx("div",{className:n.details,children:Ye.Children.toArray(Object.values(t).map((v,x,b)=>z.jsxs(ml,{expanded:r===`Elements ${x}`,onChange:g(`Elements ${x}`),children:[z.jsxs(yl,{expandIcon:z.jsx(La,{}),children:[z.jsx(yn,{sx:{width:"33%",flexShrink:0},children:`Group ${x}`}),z.jsx(hr,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>d(x),children:z.jsx(Mu,{})})]}),z.jsx(gl,{className:n.details,children:r===`Elements ${x}`&&z.jsxs(z.Fragment,{children:[z.jsx(bi,{required:!0,label:"Name",variant:"standard",value:v.name?v.name:""}),z.jsx("div",{className:n.details,children:Ye.Children.toArray(Object.values(v.items).map((w,S,C)=>z.jsxs(ml,{expanded:o===`Elements ${S}`,onChange:p(`Elements ${S}`),children:[z.jsxs(yl,{expandIcon:z.jsx(La,{}),children:[w.title?z.jsx(yn,{sx:{width:"33%",flexShrink:0},children:`Element ${w.title}`}):z.jsx(yn,{sx:{width:"33%",flexShrink:0},children:`Element ${S}`}),z.jsx(hr,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>h(x,S),children:z.jsx(Mu,{})})]}),z.jsx(gl,{className:n.details,children:o===`Elements ${S}`&&z.jsxs(Ko,{component:"form",sx:{"& .MuiTextField-root":{m:1}},children:[z.jsx(bi,{disabled:!0,label:"Latitude ",type:"number",sx:{width:"15ch"},variant:"standard",inputProps:{maxLength:8,step:1e-4},value:w.latitude}),z.jsx(bi,{disabled:!0,label:"Longitud ",type:"number",variant:"standard",sx:{width:"15ch"},inputProps:{maxLength:8,step:1e-4},value:w.longitude})]})})]})))})]})})]})))})})},Ovt=Wr(t=>({root:{margin:"0",height:"100vh"},sidebarStyle:{display:"flex",flexDirection:"column",position:"fixed",left:0,top:"88px",height:"calc(100% - 95px)",width:"560px",margin:"0px",zIndex:3},middleStyle:{flex:1,display:"grid"},panelElevation:{display:"flex",flexDirection:"column",position:"fixed",right:0,bottom:0,height:"30vh",width:"calc(100% - 560px)",margin:"0px",zIndex:3},toolbar:{display:"flex",gap:"10px 10px",height:"30px",borderBottom:"3px solid rgb(212, 212, 212)"},list:{maxHeight:"calc(100vh - 152px)",overflowY:"auto",display:"flex",gap:"10px",flexDirection:"column",margin:"20px"},title:{flexGrow:1},fileInput:{display:"none"},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)},panelButton:{width:"80%",flexShrink:0,marginTop:"15px"},mapContainer:{float:"right",width:"calc(100% - 560px)",height:"calc(70vh - 95px)",right:"0px",margin:"auto"}})),Lvt=(t,e)=>{console.log(t+e)},Dvt=()=>{const t=Ovt(),e=Jf(),n=Ql(),[r,i]=V.useState(!0),[o,s]=V.useState(!1),[a,l]=V.useState(!1),[d,h]=V.useState(!1),[p,g]=V.useState(!1),[v,x]=V.useState(100),b=`${window.location.hostname}`,w=nr(Je=>Je.session.markers),S=nr(Je=>Je.session.planning),[C,A]=V.useState(w),[P,k]=V.useState(S),[F,B]=V.useState(-1),[W,J]=V.useState("2"),[H,Y]=V.useState(""),[le,pe]=V.useState(!0),re=Ure(async()=>{console.log("send planning");let Je={};Je.id=P.id,Je.name=P.name,Je.case=P.objetivo.case,Je.meteo=P.meteo,Je.locations=P.loc.map(ke=>{let Vt=ke.items.map(zt=>({latitude:zt.latitude,longitude:zt.longitude}));return{name:ke.name,items:Vt}});let ge=P.bases.map(ke=>ke.devices.id).some((ke,Vt,zt)=>zt.indexOf(ke)!==Vt);if(Y(""),ge)return Y("the device is repeated please change"),null;if(P.loc.length===0)return Y("No elements to inspection"),null;let et=[];const Ke=await fetch("/api/devices");if(Ke.ok)et=await Ke.json();else throw Error(await Ke.text());Je.devices=P.bases.map((ke,Vt)=>{let zt=JSON.parse(JSON.stringify(ke)),$t=et.find(Qt=>Qt.id==ke.devices.id);return delete zt.devices,zt.id=$t.name,zt.category=$t.category,zt.settings.base=Object.values(C.bases[Vt]),zt.settings.landing_mode=2,zt}),console.log(Je);const Tt=await fetch(`http://${b}:8004/mission_request`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Je)});if(Tt.ok){const ke=await Tt.json();console.log(ke),x(0)}else throw Error(await Ke.text());return!0}),me=()=>{console.log("uno")},he=Je=>{let Qe=vI.stringify(Je);const ge=new Blob([Qe],{type:"text/plain"}),et=URL.createObjectURL(ge),Ke=document.createElement("a");Ke.download=`${Je.name}.yaml`,Ke.href=et,Ke.click()},we=async()=>{const Je={};Je.id=P.id,Je.name=P.name,Je.objetivo=P.objetivo.id,Je.meteo=P.meteo,Je.locations=P.loc.map(ge=>{let et=ge.items.map(Ke=>({latitude:Ke.latitude,longitude:Ke.longitude}));return{name:ge.name,items:et}}),console.log(Je);const Qe=await fetch("/api/missions/sendTask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Je)});if(Qe.ok){const ge=await Qe.json();console.log(ge)}else throw Error(await Qe.text())},ee=Je=>{const Qe=Je.target.files[0];if(!Qe)return;const ge=new FileReader;ge.readAsText(Qe),ge.onload=()=>{let et=vI.parse(ge.result);A(Ke=>({...Ke,bases:et.markersbase,elements:et.elements})),et.hasOwnProperty("markersbase")&&delete et.markersbase,et.hasOwnProperty("elements")&&delete et.elements,k(et)},ge.onerror=()=>{console.log(ge.error)}},ye=async Je=>{console.log("Setdefault");const Qe=await fetch("api/planning/setDefault",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Je)});if(Qe.ok)await Qe.json();else throw Error(await Qe.text())},be=Je=>{k({...P,bases:Je})},Le=(Je,Qe)=>{J(Qe),Qe==2||Qe==1?i(!0):i(!1),Qe==1?s(!0):s(!1),Qe==1?l(!0):l(!1)},je=(Je,Qe={})=>{A({...C,bases:Je}),Qe.hasOwnProperty("meth")&&(Qe.meth=="add"&&k(ge=>{let et=JSON.parse(JSON.stringify(ge.bases)),Ke={};return Object.keys(ge.settings).forEach(Tt=>{Ke[Tt]={},Object.keys(ge.settings[Tt]).forEach(ke=>{Ke[Tt][ke]=ge.settings[Tt][ke].default})}),et.push(Ke),{...ge,bases:et}}),Qe.meth=="del"&&k(ge=>{let et=JSON.parse(JSON.stringify(ge.bases));return console.log(et),et.splice(Qe.index,1),{...ge,bases:et}}))},dt=Je=>{console.log(Je),A({...C,elements:Je})},Be=Je=>{A(Je)},ot=Je=>{k({...P,loc:Je})},at=(Je,Qe,ge)=>(ge=="path-object"&&(Je.length==0?Je.push({type:"powerTower",name:"Elements",linea:!0,items:[Qe]}):Je.find(Ke=>Ke.items[0].groupId==Qe.groupId)===void 0?Je.push({type:"powerTower",name:"Elements",linea:!0,items:[Qe]}):Je[+Je.length-1].items.push(Qe)),ge=="object"&&Je.push({type:"powerTower",name:"Elements",linea:!0,items:[Qe]}),ge=="point"&&Je.push({type:"powerTower",name:"Elements",linea:!0,items:[Qe]}),Je),It=Je=>{console.log(Je),k(Qe=>{let ge=JSON.parse(JSON.stringify(Qe.loc));return console.log(Qe.objetivo.type),{...Qe,loc:at(ge,Je,Qe.objetivo.type)}})},Lt=Je=>{console.log("update objetivo"),k(Qe=>{let ge=JSON.parse(JSON.stringify(Qe));return ge.objetivo=Je,Je.type!==Qe.objetivo.type&&(ge.loc=[]),ge})},lt=()=>{pe(Je=>!Je)};return Vy(async()=>{if(console.log("change objetivo"),F!==P.objetivo.id){console.log("are different"),B(P.objetivo.id);const Je=await fetch(`/api/planning/missionparam/${P.objetivo.id}`);if(Je.ok){console.log("response ok");const Qe=await Je.json();if(console.log(Qe),Qe.hasOwnProperty("settings"))if(P.bases.length==0){console.log("settings base lenght  zero");let ge=C.bases.map(()=>{let et={};return Object.keys(Qe).forEach(Ke=>{et[Ke]={},Object.keys(Qe[Ke]).forEach(Tt=>{et[Ke][Tt]=Qe[Ke][Tt].default})}),et});k(et=>{const Ke=JSON.parse(JSON.stringify(et));return Ke.bases=ge,Ke.settings=Qe,Ke})}else{console.log("change basesss");let ge={};Object.keys(Qe.settings).forEach(et=>{ge[et]=Qe.settings[et].default}),console.log(ge),k(et=>{const Ke=JSON.parse(JSON.stringify(et));return Ke.bases=Ke.bases.map(Tt=>({...Tt,settings:ge})),Ke.settings=Qe,console.log(Ke),Ke})}}else throw Error(await Je.text())}else console.log("are equal")},[P.objetivo,F]),V.useEffect(()=>{W==2&&P.objetivo.id!=3?h(!0):h(!1),W==2&&P.objetivo.id==3?g(!0):g(!1)},[W,P.objetivo]),V.useEffect(()=>{A(w)},[w]),V.useEffect(()=>{k(S)},[S]),V.useEffect(()=>{n(gh.updateMarker(C))},[C]),V.useEffect(()=>{n(gh.updatePlanning(P))},[P]),V.useEffect(()=>{const Je=setInterval(()=>{console.log("response Planning"),x(ge=>ge+1)},5e3),Qe=async()=>{const ge=await fetch(`http://${b}:8004/get_plan?IDs=${P.id}`);if(ge.ok){const et=await ge.json();console.log(et),Array.isArray(et.results)&&et.results.length>0&&et.results[0].hasOwnProperty("route")&&(console.log("response to check planning"),x(10),n(Af.updateMission({...et.results[0],version:"3"})))}else throw Error(await ge.text())};return v<4?Qe():clearInterval(Je),()=>clearInterval(Je)},[v]),z.jsx("div",{className:t.root,children:z.jsx(EO,{children:z.jsxs(Z1,{notification:Lvt,children:[z.jsx(HE,{}),z.jsx(J1,{}),z.jsxs("div",{className:t.mapContainer,children:[z.jsxs(Wk,{children:[le&&z.jsx(Kse,{}),z.jsx(Avt,{markers:C,selectMarkers:P.loc,showTitles:r,showLines:o,moveMarkers:a,setMarkers:Be,SelectItems:d,CreateItems:p,setLocations:It}),z.jsx(MO,{})]}),z.jsx(SO,{})]}),z.jsx("div",{className:t.sidebarStyle,children:z.jsx("div",{className:t.middleStyle,children:z.jsxs(jo,{square:!0,children:[z.jsxs(Rm,{className:t.toolbar,children:[z.jsx(hr,{edge:"start",sx:{mr:2},onClick:()=>e(-1),children:z.jsx(d_,{})}),z.jsx(yn,{variant:"h6",className:t.title,children:"Planning"}),z.jsx(yn,{children:"Show Mission"}),z.jsx(Bre,{checked:le,onChange:lt,name:"checkedA",inputProps:{"aria-label":"secondary checkbox"}}),z.jsx(hr,{onClick:()=>{he({...P,markersbase:C.bases,elements:C.elements})},children:z.jsx(c6,{})}),z.jsx(hr,{onClick:me,children:z.jsx(Mu,{})}),z.jsx(poe,{readFile:Je=>{ee(Je)},typefiles:".yaml, .plan, .waypoint, .kml"})]}),z.jsx("div",{className:t.list,children:z.jsxs(yvt,{value:W,children:[z.jsx(Ko,{sx:{borderBottom:1,borderColor:"divider"},children:z.jsxs(_vt,{onChange:Le,"aria-label":"lab API tabs example",children:[z.jsx(o0,{label:"Elements",value:"1"}),z.jsx(o0,{label:"Planning",value:"2"}),z.jsx(o0,{label:"Settings",value:"3"})]})}),z.jsx(xz,{value:"1",children:z.jsxs("div",{className:t.details,children:[z.jsxs(ml,{children:[z.jsx(yl,{expandIcon:z.jsx(La,{}),children:z.jsx(yn,{children:"Base elements"})}),z.jsx(gl,{className:t.details,children:z.jsx(Ohe,{markers:C.bases,setMarkers:je})})]}),z.jsx(Py,{}),z.jsxs(ml,{children:[z.jsx(yl,{expandIcon:z.jsx(La,{}),children:z.jsx(yn,{children:"Interest Elements"})}),z.jsx(gl,{className:t.details,children:z.jsx(Ivt,{markers:C.elements,setMarkers:dt})})]}),z.jsx(Ko,{textAlign:"center",children:z.jsx(jr,{variant:"contained",size:"large",className:t.panelButton,onClick:re,children:"Save Global Markers"})})]})}),z.jsx(xz,{value:"2",children:z.jsxs(Ko,{className:t.details,children:[z.jsx(bi,{required:!0,fullWidth:!0,label:"id",type:"number",variant:"standard",value:P.id?P.id:123,onChange:Je=>k({...P,id:Je.target.value})}),z.jsx(bi,{required:!0,fullWidth:!0,label:"Name Mission",variant:"standard",value:P.name?P.name:" ",onChange:Je=>k({...P,name:Je.target.value})}),z.jsx(lu,{emptyValue:null,fullWidth:!0,label:"objetive",value:P.objetivo.id?P.objetivo.id:1,endpoint:"/api/planning/missionstype",keyGetter:Je=>Je.id,titleGetter:Je=>Je.name,onChange:(Je,Qe)=>{Lt(Qe[Je.target.value])},getItems:Je=>{console.log(Je),k({...P,objetivo:Je})}}),z.jsxs(ml,{children:[z.jsx(yl,{expandIcon:z.jsx(La,{}),children:z.jsx(yn,{children:"Points to inspect "})}),z.jsx(gl,{className:t.details,children:z.jsxs("div",{className:t.details,children:[P.objetivo.hasOwnProperty("description")?z.jsx(yn,{children:P.objetivo.description}):z.jsx(yn,{children:"select doing click in the map"}),z.jsx(kvt,{Data:P.loc,setData:ot})]})})]}),z.jsx(Py,{}),z.jsxs(ml,{children:[z.jsx(yl,{expandIcon:z.jsx(La,{}),children:z.jsx(yn,{children:"Meteo"})}),z.jsxs(gl,{className:t.details,children:[z.jsx(bi,{required:!0,fullWidth:!0,label:"wind speed",type:"number",variant:"standard",value:12}),z.jsx(bi,{required:!0,fullWidth:!0,label:"Wind direction",type:"number",variant:"standard",value:12}),z.jsx(bi,{required:!0,fullWidth:!0,label:"Temperature",type:"number",variant:"standard",value:12}),z.jsx(bi,{required:!0,fullWidth:!0,label:"Humidity",type:"number",variant:"standard",value:12}),z.jsx(bi,{required:!0,fullWidth:!0,label:"Pressure",type:"number",variant:"standard",value:12})]})]})]})}),z.jsx(xz,{value:"3",children:z.jsxs("div",{className:t.details,children:[z.jsx(Tvt,{data:P.bases,param:P.settings,setData:be}),z.jsxs(Ko,{textAlign:"center",children:[z.jsx(jr,{variant:"contained",size:"large",className:t.panelButton,onClick:re,children:"Planning"}),z.jsx(jr,{variant:"contained",size:"large",className:t.panelButton,onClick:we,children:"Planinng with Global Setting"}),z.jsx(jr,{variant:"contained",size:"large",className:t.panelButton,onClick:()=>ye({...P,markersbase:C.bases,elements:C.elements}),children:"Save Global Settings"})]}),z.jsx(yn,{children:H})]})})]})})]})})}),z.jsx("div",{className:t.panelElevation,children:z.jsx("div",{className:t.middleStyle,children:z.jsx(jo,{square:!0,children:z.jsx(dL,{})})})})]})})})};var Lhe={exports:{}},v_={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */v_.ConcurrentRoot=1;v_.ContinuousEventPriority=4;v_.DefaultEventPriority=16;v_.DiscreteEventPriority=1;v_.IdleEventPriority=536870912;v_.LegacyRoot=0;Lhe.exports=v_;var hb=Lhe.exports;function Nvt(t){let e;const n=new Set,r=(d,h)=>{const p=typeof d=="function"?d(e):d;if(p!==e){const g=e;e=h?p:Object.assign({},e,p),n.forEach(v=>v(e,g))}},i=()=>e,o=(d,h=i,p=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let g=h(e);function v(){const x=h(e);if(!p(g,x)){const b=g;d(g=x,b)}}return n.add(v),()=>n.delete(v)},l={setState:r,getState:i,subscribe:(d,h,p)=>h||p?o(d,h,p):(n.add(d),()=>n.delete(d)),destroy:()=>n.clear()};return e=t(r,i,l),l}const zvt=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),RJ=zvt?V.useEffect:V.useLayoutEffect;function Fvt(t){const e=typeof t=="function"?Nvt(t):t,n=(r=e.getState,i=Object.is)=>{const[,o]=V.useReducer(w=>w+1,0),s=e.getState(),a=V.useRef(s),l=V.useRef(r),d=V.useRef(i),h=V.useRef(!1),p=V.useRef();p.current===void 0&&(p.current=r(s));let g,v=!1;(a.current!==s||l.current!==r||d.current!==i||h.current)&&(g=r(s),v=!i(p.current,g)),RJ(()=>{v&&(p.current=g),a.current=s,l.current=r,d.current=i,h.current=!1});const x=V.useRef(s);RJ(()=>{const w=()=>{try{const C=e.getState(),A=l.current(C);d.current(p.current,A)||(a.current=C,p.current=A,o())}catch{h.current=!0,o()}},S=e.subscribe(w);return e.getState()!==x.current&&w(),S},[]);const b=v?g:p.current;return V.useDebugValue(b),b};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}var Dhe={exports:{}},bz={exports:{}},wz={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kJ;function Bvt(){return kJ||(kJ=1,function(t){function e(ee,ye){var be=ee.length;ee.push(ye);e:for(;0<be;){var Le=be-1>>>1,je=ee[Le];if(0<i(je,ye))ee[Le]=ye,ee[be]=je,be=Le;else break e}}function n(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var ye=ee[0],be=ee.pop();if(be!==ye){ee[0]=be;e:for(var Le=0,je=ee.length,dt=je>>>1;Le<dt;){var Be=2*(Le+1)-1,ot=ee[Be],at=Be+1,It=ee[at];if(0>i(ot,be))at<je&&0>i(It,ot)?(ee[Le]=It,ee[at]=be,Le=at):(ee[Le]=ot,ee[Be]=be,Le=Be);else if(at<je&&0>i(It,be))ee[Le]=It,ee[at]=be,Le=at;else break e}}return ye}function i(ee,ye){var be=ee.sortIndex-ye.sortIndex;return be!==0?be:ee.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],d=[],h=1,p=null,g=3,v=!1,x=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(ee){for(var ye=n(d);ye!==null;){if(ye.callback===null)r(d);else if(ye.startTime<=ee)r(d),ye.sortIndex=ye.expirationTime,e(l,ye);else break;ye=n(d)}}function P(ee){if(b=!1,A(ee),!x)if(n(l)!==null)x=!0,he(k);else{var ye=n(d);ye!==null&&we(P,ye.startTime-ee)}}function k(ee,ye){x=!1,b&&(b=!1,S(W),W=-1),v=!0;var be=g;try{for(A(ye),p=n(l);p!==null&&(!(p.expirationTime>ye)||ee&&!Y());){var Le=p.callback;if(typeof Le=="function"){p.callback=null,g=p.priorityLevel;var je=Le(p.expirationTime<=ye);ye=t.unstable_now(),typeof je=="function"?p.callback=je:p===n(l)&&r(l),A(ye)}else r(l);p=n(l)}if(p!==null)var dt=!0;else{var Be=n(d);Be!==null&&we(P,Be.startTime-ye),dt=!1}return dt}finally{p=null,g=be,v=!1}}var F=!1,B=null,W=-1,J=5,H=-1;function Y(){return!(t.unstable_now()-H<J)}function le(){if(B!==null){var ee=t.unstable_now();H=ee;var ye=!0;try{ye=B(!0,ee)}finally{ye?pe():(F=!1,B=null)}}else F=!1}var pe;if(typeof C=="function")pe=function(){C(le)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,me=re.port2;re.port1.onmessage=le,pe=function(){me.postMessage(null)}}else pe=function(){w(le,0)};function he(ee){B=ee,F||(F=!0,pe())}function we(ee,ye){W=w(function(){ee(t.unstable_now())},ye)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_continueExecution=function(){x||v||(x=!0,he(k))},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(ee){switch(g){case 1:case 2:case 3:var ye=3;break;default:ye=g}var be=g;g=ye;try{return ee()}finally{g=be}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ee,ye){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var be=g;g=ee;try{return ye()}finally{g=be}},t.unstable_scheduleCallback=function(ee,ye,be){var Le=t.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Le+be:Le):be=Le,ee){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=be+je,ee={id:h++,callback:ye,priorityLevel:ee,startTime:be,expirationTime:je,sortIndex:-1},be>Le?(ee.sortIndex=be,e(d,ee),n(l)===null&&ee===n(d)&&(b?(S(W),W=-1):b=!0,we(P,be-Le))):(ee.sortIndex=je,e(l,ee),x||v||(x=!0,he(k))),ee},t.unstable_shouldYield=Y,t.unstable_wrapCallback=function(ee){var ye=g;return function(){var be=g;g=ye;try{return ee.apply(this,arguments)}finally{g=be}}}}(wz)),wz}var OJ;function jvt(){return OJ||(OJ=1,bz.exports=Bvt()),bz.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $vt=function(e){var n={},r=V,i=jvt(),o=Object.assign;function s(M){for(var E="https://reactjs.org/docs/error-decoder.html?invariant="+M,j=1;j<arguments.length;j++)E+="&args[]="+encodeURIComponent(arguments[j]);return"Minified React error #"+M+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),d=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),x=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),P=Symbol.for("react.offscreen"),k=Symbol.iterator;function F(M){return M===null||typeof M!="object"?null:(M=k&&M[k]||M["@@iterator"],typeof M=="function"?M:null)}function B(M){if(M==null)return null;if(typeof M=="function")return M.displayName||M.name||null;if(typeof M=="string")return M;switch(M){case h:return"Fragment";case d:return"Portal";case g:return"Profiler";case p:return"StrictMode";case w:return"Suspense";case S:return"SuspenseList"}if(typeof M=="object")switch(M.$$typeof){case x:return(M.displayName||"Context")+".Consumer";case v:return(M._context.displayName||"Context")+".Provider";case b:var E=M.render;return M=M.displayName,M||(M=E.displayName||E.name||"",M=M!==""?"ForwardRef("+M+")":"ForwardRef"),M;case C:return E=M.displayName||null,E!==null?E:B(M.type)||"Memo";case A:E=M._payload,M=M._init;try{return B(M(E))}catch{}}return null}function W(M){var E=M.type;switch(M.tag){case 24:return"Cache";case 9:return(E.displayName||"Context")+".Consumer";case 10:return(E._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return M=E.render,M=M.displayName||M.name||"",E.displayName||(M!==""?"ForwardRef("+M+")":"ForwardRef");case 7:return"Fragment";case 5:return E;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(E);case 8:return E===p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof E=="function")return E.displayName||E.name||null;if(typeof E=="string")return E}return null}function J(M){var E=M,j=M;if(M.alternate)for(;E.return;)E=E.return;else{M=E;do E=M,E.flags&4098&&(j=E.return),M=E.return;while(M)}return E.tag===3?j:null}function H(M){if(J(M)!==M)throw Error(s(188))}function Y(M){var E=M.alternate;if(!E){if(E=J(M),E===null)throw Error(s(188));return E!==M?null:M}for(var j=M,X=E;;){var Q=j.return;if(Q===null)break;var ue=Q.alternate;if(ue===null){if(X=Q.return,X!==null){j=X;continue}break}if(Q.child===ue.child){for(ue=Q.child;ue;){if(ue===j)return H(Q),M;if(ue===X)return H(Q),E;ue=ue.sibling}throw Error(s(188))}if(j.return!==X.return)j=Q,X=ue;else{for(var He=!1,mt=Q.child;mt;){if(mt===j){He=!0,j=Q,X=ue;break}if(mt===X){He=!0,X=Q,j=ue;break}mt=mt.sibling}if(!He){for(mt=ue.child;mt;){if(mt===j){He=!0,j=ue,X=Q;break}if(mt===X){He=!0,X=ue,j=Q;break}mt=mt.sibling}if(!He)throw Error(s(189))}}if(j.alternate!==X)throw Error(s(190))}if(j.tag!==3)throw Error(s(188));return j.stateNode.current===j?M:E}function le(M){return M=Y(M),M!==null?pe(M):null}function pe(M){if(M.tag===5||M.tag===6)return M;for(M=M.child;M!==null;){var E=pe(M);if(E!==null)return E;M=M.sibling}return null}function re(M){if(M.tag===5||M.tag===6)return M;for(M=M.child;M!==null;){if(M.tag!==4){var E=re(M);if(E!==null)return E}M=M.sibling}return null}var me=Array.isArray,he=e.getPublicInstance,we=e.getRootHostContext,ee=e.getChildHostContext,ye=e.prepareForCommit,be=e.resetAfterCommit,Le=e.createInstance,je=e.appendInitialChild,dt=e.finalizeInitialChildren,Be=e.prepareUpdate,ot=e.shouldSetTextContent,at=e.createTextInstance,It=e.scheduleTimeout,Lt=e.cancelTimeout,lt=e.noTimeout,Je=e.isPrimaryRenderer,Qe=e.supportsMutation,ge=e.supportsPersistence,et=e.supportsHydration,Ke=e.getInstanceFromNode,Tt=e.preparePortalMount,ke=e.getCurrentEventPriority,Vt=e.detachDeletedInstance,zt=e.supportsMicrotasks,$t=e.scheduleMicrotask,Qt=e.supportsTestSelectors,Ie=e.findFiberRoot,Me=e.getBoundingRect,wt=e.getTextContent,St=e.isHiddenSubtree,Bt=e.matchAccessibilityRole,jt=e.setFocusIfFocusable,Rn=e.setupIntersectionObserver,ft=e.appendChild,Rt=e.appendChildToContainer,Xt=e.commitTextUpdate,Tn=e.commitMount,en=e.commitUpdate,Et=e.insertBefore,qt=e.insertInContainerBefore,ht=e.removeChild,Ne=e.removeChildFromContainer,pt=e.resetTextContent,Te=e.hideInstance,xt=e.hideTextInstance,tn=e.unhideInstance,Xe=e.unhideTextInstance,Yt=e.clearContainer,ve=e.cloneInstance,ie=e.createContainerChildSet,se=e.appendChildToContainerChildSet,Se=e.finalizeContainerChildren,De=e.replaceContainerChildren,We=e.cloneHiddenInstance,Ze=e.cloneHiddenTextInstance,tt=e.canHydrateInstance,Ve=e.canHydrateTextInstance,At=e.canHydrateSuspenseInstance,Dt=e.isSuspenseInstancePending,Ct=e.isSuspenseInstanceFallback,ln=e.registerSuspenseInstanceRetry,Sn=e.getNextHydratableSibling,zn=e.getFirstHydratableChild,rr=e.getFirstHydratableChildWithinContainer,Cr=e.getFirstHydratableChildWithinSuspenseInstance,ir=e.hydrateInstance,Yr=e.hydrateTextInstance,Ti=e.hydrateSuspenseInstance,Re=e.getNextHydratableInstanceAfterSuspenseInstance,st=e.commitHydratedContainer,Mt=e.commitHydratedSuspenseInstance,ut=e.clearSuspenseBoundary,vt=e.clearSuspenseBoundaryFromContainer,mn=e.shouldDeleteUnhydratedTailInstances,kn=e.didNotMatchHydratedContainerTextInstance,tr=e.didNotMatchHydratedTextInstance,bn;function mr(M){if(bn===void 0)try{throw Error()}catch(j){var E=j.stack.trim().match(/\n( *(at )?)/);bn=E&&E[1]||""}return`
`+bn+M}var pr=!1;function Zn(M,E){if(!M||pr)return"";pr=!0;var j=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(E)if(E=function(){throw Error()},Object.defineProperty(E.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(E,[])}catch(fn){var X=fn}Reflect.construct(M,[],E)}else{try{E.call()}catch(fn){X=fn}M.call(E.prototype)}else{try{throw Error()}catch(fn){X=fn}M()}}catch(fn){if(fn&&X&&typeof fn.stack=="string"){for(var Q=fn.stack.split(`
`),ue=X.stack.split(`
`),He=Q.length-1,mt=ue.length-1;1<=He&&0<=mt&&Q[He]!==ue[mt];)mt--;for(;1<=He&&0<=mt;He--,mt--)if(Q[He]!==ue[mt]){if(He!==1||mt!==1)do if(He--,mt--,0>mt||Q[He]!==ue[mt]){var Ut=`
`+Q[He].replace(" at new "," at ");return M.displayName&&Ut.includes("<anonymous>")&&(Ut=Ut.replace("<anonymous>",M.displayName)),Ut}while(1<=He&&0<=mt);break}}}finally{pr=!1,Error.prepareStackTrace=j}return(M=M?M.displayName||M.name:"")?mr(M):""}var $r=Object.prototype.hasOwnProperty,Jo=[],Lr=-1;function Gr(M){return{current:M}}function sr(M){0>Lr||(M.current=Jo[Lr],Jo[Lr]=null,Lr--)}function On(M,E){Lr++,Jo[Lr]=M.current,M.current=E}var ti={},fr=Gr(ti),_i=Gr(!1),si=ti;function As(M,E){var j=M.type.contextTypes;if(!j)return ti;var X=M.stateNode;if(X&&X.__reactInternalMemoizedUnmaskedChildContext===E)return X.__reactInternalMemoizedMaskedChildContext;var Q={},ue;for(ue in j)Q[ue]=E[ue];return X&&(M=M.stateNode,M.__reactInternalMemoizedUnmaskedChildContext=E,M.__reactInternalMemoizedMaskedChildContext=Q),Q}function fi(M){return M=M.childContextTypes,M!=null}function Bi(){sr(_i),sr(fr)}function Qo(M,E,j){if(fr.current!==ti)throw Error(s(168));On(fr,E),On(_i,j)}function ku(M,E,j){var X=M.stateNode;if(E=E.childContextTypes,typeof X.getChildContext!="function")return j;X=X.getChildContext();for(var Q in X)if(!(Q in E))throw Error(s(108,W(M)||"Unknown",Q));return o({},j,X)}function so(M){return M=(M=M.stateNode)&&M.__reactInternalMemoizedMergedChildContext||ti,si=fr.current,On(fr,M),On(_i,_i.current),!0}function ma(M,E,j){var X=M.stateNode;if(!X)throw Error(s(169));j?(M=ku(M,E,si),X.__reactInternalMemoizedMergedChildContext=M,sr(_i),sr(fr),On(fr,M)):sr(_i),On(_i,j)}var _r=Math.clz32?Math.clz32:ip,zd=Math.log,ev=Math.LN2;function ip(M){return M>>>=0,M===0?32:31-(zd(M)/ev|0)|0}var Fd=64,Bd=4194304;function Ou(M){switch(M&-M){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return M&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return M&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return M}}function jd(M,E){var j=M.pendingLanes;if(j===0)return 0;var X=0,Q=M.suspendedLanes,ue=M.pingedLanes,He=j&268435455;if(He!==0){var mt=He&~Q;mt!==0?X=Ou(mt):(ue&=He,ue!==0&&(X=Ou(ue)))}else He=j&~Q,He!==0?X=Ou(He):ue!==0&&(X=Ou(ue));if(X===0)return 0;if(E!==0&&E!==X&&!(E&Q)&&(Q=X&-X,ue=E&-E,Q>=ue||Q===16&&(ue&4194240)!==0))return E;if(X&4&&(X|=j&16),E=M.entangledLanes,E!==0)for(M=M.entanglements,E&=X;0<E;)j=31-_r(E),Q=1<<j,X|=M[j],E&=~Q;return X}function op(M,E){switch(M){case 1:case 2:case 4:return E+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return E+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wh(M,E){for(var j=M.suspendedLanes,X=M.pingedLanes,Q=M.expirationTimes,ue=M.pendingLanes;0<ue;){var He=31-_r(ue),mt=1<<He,Ut=Q[He];Ut===-1?(!(mt&j)||mt&X)&&(Q[He]=op(mt,E)):Ut<=E&&(M.expiredLanes|=mt),ue&=~mt}}function tv(M){return M=M.pendingLanes&-1073741825,M!==0?M:M&1073741824?1073741824:0}function nv(M){for(var E=[],j=0;31>j;j++)E.push(M);return E}function Gh(M,E,j){M.pendingLanes|=E,E!==536870912&&(M.suspendedLanes=0,M.pingedLanes=0),M=M.eventTimes,E=31-_r(E),M[E]=j}function xw(M,E){var j=M.pendingLanes&~E;M.pendingLanes=E,M.suspendedLanes=0,M.pingedLanes=0,M.expiredLanes&=E,M.mutableReadLanes&=E,M.entangledLanes&=E,E=M.entanglements;var X=M.eventTimes;for(M=M.expirationTimes;0<j;){var Q=31-_r(j),ue=1<<Q;E[Q]=0,X[Q]=-1,M[Q]=-1,j&=~ue}}function nc(M,E){var j=M.entangledLanes|=E;for(M=M.entanglements;j;){var X=31-_r(j),Q=1<<X;Q&E|M[X]&E&&(M[X]|=E),j&=~Q}}var Fr=0;function Ws(M){return M&=-M,1<M?4<M?M&268435455?16:536870912:4:1}var Ps=i.unstable_scheduleCallback,qh=i.unstable_cancelCallback,zm=i.unstable_shouldYield,__=i.unstable_requestPaint,Ro=i.unstable_now,Rc=i.unstable_ImmediatePriority,x_=i.unstable_UserBlockingPriority,rv=i.unstable_NormalPriority,bw=i.unstable_IdlePriority,sp=null,Ml=null;function ww(M){if(Ml&&typeof Ml.onCommitFiberRoot=="function")try{Ml.onCommitFiberRoot(sp,M,void 0,(M.current.flags&128)===128)}catch{}}function Fm(M,E){return M===E&&(M!==0||1/M===1/E)||M!==M&&E!==E}var Ua=typeof Object.is=="function"?Object.is:Fm,Va=null,Xh=!1,ap=!1;function El(M){Va===null?Va=[M]:Va.push(M)}function iv(M){Xh=!0,El(M)}function Is(){if(!ap&&Va!==null){ap=!0;var M=0,E=Fr;try{var j=Va;for(Fr=1;M<j.length;M++){var X=j[M];do X=X(!0);while(X!==null)}Va=null,Xh=!1}catch(Q){throw Va!==null&&(Va=Va.slice(M+1)),Ps(Rc,Is),Q}finally{Fr=E,ap=!1}}return null}var Br=a.ReactCurrentBatchConfig;function Lu(M,E){if(Ua(M,E))return!0;if(typeof M!="object"||M===null||typeof E!="object"||E===null)return!1;var j=Object.keys(M),X=Object.keys(E);if(j.length!==X.length)return!1;for(X=0;X<j.length;X++){var Q=j[X];if(!$r.call(E,Q)||!Ua(M[Q],E[Q]))return!1}return!0}function Sw(M){switch(M.tag){case 5:return mr(M.type);case 16:return mr("Lazy");case 13:return mr("Suspense");case 19:return mr("SuspenseList");case 0:case 2:case 15:return M=Zn(M.type,!1),M;case 11:return M=Zn(M.type.render,!1),M;case 1:return M=Zn(M.type,!0),M;default:return""}}function Gs(M,E){if(M&&M.defaultProps){E=o({},E),M=M.defaultProps;for(var j in M)E[j]===void 0&&(E[j]=M[j]);return E}return E}var Bm=Gr(null),kc=null,Yh=null,jm=null;function ov(){jm=Yh=kc=null}function sv(M,E,j){Je?(On(Bm,E._currentValue),E._currentValue=j):(On(Bm,E._currentValue2),E._currentValue2=j)}function lp(M){var E=Bm.current;sr(Bm),Je?M._currentValue=E:M._currentValue2=E}function $m(M,E,j){for(;M!==null;){var X=M.alternate;if((M.childLanes&E)!==E?(M.childLanes|=E,X!==null&&(X.childLanes|=E)):X!==null&&(X.childLanes&E)!==E&&(X.childLanes|=E),M===j)break;M=M.return}}function $d(M,E){kc=M,jm=Yh=null,M=M.dependencies,M!==null&&M.firstContext!==null&&(M.lanes&E&&(Ls=!0),M.firstContext=null)}function ga(M){var E=Je?M._currentValue:M._currentValue2;if(jm!==M)if(M={context:M,memoizedValue:E,next:null},Yh===null){if(kc===null)throw Error(s(308));Yh=M,kc.dependencies={lanes:0,firstContext:M}}else Yh=Yh.next=M;return E}var Tl=null,qs=!1;function Um(M){M.updateQueue={baseState:M.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function b_(M,E){M=M.updateQueue,E.updateQueue===M&&(E.updateQueue={baseState:M.baseState,firstBaseUpdate:M.firstBaseUpdate,lastBaseUpdate:M.lastBaseUpdate,shared:M.shared,effects:M.effects})}function rc(M,E){return{eventTime:M,lane:E,tag:0,payload:null,callback:null,next:null}}function Ha(M,E){var j=M.updateQueue;j!==null&&(j=j.shared,li!==null&&M.mode&1&&!(vr&2)?(M=j.interleaved,M===null?(E.next=E,Tl===null?Tl=[j]:Tl.push(j)):(E.next=M.next,M.next=E),j.interleaved=E):(M=j.pending,M===null?E.next=E:(E.next=M.next,M.next=E),j.pending=E))}function Vm(M,E,j){if(E=E.updateQueue,E!==null&&(E=E.shared,(j&4194240)!==0)){var X=E.lanes;X&=M.pendingLanes,j|=X,E.lanes=j,nc(M,j)}}function cp(M,E){var j=M.updateQueue,X=M.alternate;if(X!==null&&(X=X.updateQueue,j===X)){var Q=null,ue=null;if(j=j.firstBaseUpdate,j!==null){do{var He={eventTime:j.eventTime,lane:j.lane,tag:j.tag,payload:j.payload,callback:j.callback,next:null};ue===null?Q=ue=He:ue=ue.next=He,j=j.next}while(j!==null);ue===null?Q=ue=E:ue=ue.next=E}else Q=ue=E;j={baseState:X.baseState,firstBaseUpdate:Q,lastBaseUpdate:ue,shared:X.shared,effects:X.effects},M.updateQueue=j;return}M=j.lastBaseUpdate,M===null?j.firstBaseUpdate=E:M.next=E,j.lastBaseUpdate=E}function Hm(M,E,j,X){var Q=M.updateQueue;qs=!1;var ue=Q.firstBaseUpdate,He=Q.lastBaseUpdate,mt=Q.shared.pending;if(mt!==null){Q.shared.pending=null;var Ut=mt,fn=Ut.next;Ut.next=null,He===null?ue=fn:He.next=fn,He=Ut;var Vn=M.alternate;Vn!==null&&(Vn=Vn.updateQueue,mt=Vn.lastBaseUpdate,mt!==He&&(mt===null?Vn.firstBaseUpdate=fn:mt.next=fn,Vn.lastBaseUpdate=Ut))}if(ue!==null){var Sr=Q.baseState;He=0,Vn=fn=Ut=null,mt=ue;do{var cr=mt.lane,ri=mt.eventTime;if((X&cr)===cr){Vn!==null&&(Vn=Vn.next={eventTime:ri,lane:0,tag:mt.tag,payload:mt.payload,callback:mt.callback,next:null});e:{var Kn=M,ta=mt;switch(cr=E,ri=j,ta.tag){case 1:if(Kn=ta.payload,typeof Kn=="function"){Sr=Kn.call(ri,Sr,cr);break e}Sr=Kn;break e;case 3:Kn.flags=Kn.flags&-65537|128;case 0:if(Kn=ta.payload,cr=typeof Kn=="function"?Kn.call(ri,Sr,cr):Kn,cr==null)break e;Sr=o({},Sr,cr);break e;case 2:qs=!0}}mt.callback!==null&&mt.lane!==0&&(M.flags|=64,cr=Q.effects,cr===null?Q.effects=[mt]:cr.push(mt))}else ri={eventTime:ri,lane:cr,tag:mt.tag,payload:mt.payload,callback:mt.callback,next:null},Vn===null?(fn=Vn=ri,Ut=Sr):Vn=Vn.next=ri,He|=cr;if(mt=mt.next,mt===null){if(mt=Q.shared.pending,mt===null)break;cr=mt,mt=cr.next,cr.next=null,Q.lastBaseUpdate=cr,Q.shared.pending=null}}while(!0);if(Vn===null&&(Ut=Sr),Q.baseState=Ut,Q.firstBaseUpdate=fn,Q.lastBaseUpdate=Vn,E=Q.shared.interleaved,E!==null){Q=E;do He|=Q.lane,Q=Q.next;while(Q!==E)}else ue===null&&(Q.shared.lanes=0);uc|=He,M.lanes=He,M.memoizedState=Sr}}function w_(M,E,j){if(M=E.effects,E.effects=null,M!==null)for(E=0;E<M.length;E++){var X=M[E],Q=X.callback;if(Q!==null){if(X.callback=null,X=j,typeof Q!="function")throw Error(s(191,Q));Q.call(X)}}}var av=new r.Component().refs;function Wm(M,E,j,X){E=M.memoizedState,j=j(X,E),j=j==null?E:o({},E,j),M.memoizedState=j,M.lanes===0&&(M.updateQueue.baseState=j)}var up={isMounted:function(M){return(M=M._reactInternals)?J(M)===M:!1},enqueueSetState:function(M,E,j){M=M._reactInternals;var X=gs(),Q=Qd(M),ue=rc(X,Q);ue.payload=E,j!=null&&(ue.callback=j),Ha(M,ue),E=Dl(M,Q,X),E!==null&&Vm(E,M,Q)},enqueueReplaceState:function(M,E,j){M=M._reactInternals;var X=gs(),Q=Qd(M),ue=rc(X,Q);ue.tag=1,ue.payload=E,j!=null&&(ue.callback=j),Ha(M,ue),E=Dl(M,Q,X),E!==null&&Vm(E,M,Q)},enqueueForceUpdate:function(M,E){M=M._reactInternals;var j=gs(),X=Qd(M),Q=rc(j,X);Q.tag=2,E!=null&&(Q.callback=E),Ha(M,Q),E=Dl(M,X,j),E!==null&&Vm(E,M,X)}};function Gm(M,E,j,X,Q,ue,He){return M=M.stateNode,typeof M.shouldComponentUpdate=="function"?M.shouldComponentUpdate(X,ue,He):E.prototype&&E.prototype.isPureReactComponent?!Lu(j,X)||!Lu(Q,ue):!0}function lv(M,E,j){var X=!1,Q=ti,ue=E.contextType;return typeof ue=="object"&&ue!==null?ue=ga(ue):(Q=fi(E)?si:fr.current,X=E.contextTypes,ue=(X=X!=null)?As(M,Q):ti),E=new E(j,ue),M.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=up,M.stateNode=E,E._reactInternals=M,X&&(M=M.stateNode,M.__reactInternalMemoizedUnmaskedChildContext=Q,M.__reactInternalMemoizedMaskedChildContext=ue),E}function dp(M,E,j,X){M=E.state,typeof E.componentWillReceiveProps=="function"&&E.componentWillReceiveProps(j,X),typeof E.UNSAFE_componentWillReceiveProps=="function"&&E.UNSAFE_componentWillReceiveProps(j,X),E.state!==M&&up.enqueueReplaceState(E,E.state,null)}function Cl(M,E,j,X){var Q=M.stateNode;Q.props=j,Q.state=M.memoizedState,Q.refs=av,Um(M);var ue=E.contextType;typeof ue=="object"&&ue!==null?Q.context=ga(ue):(ue=fi(E)?si:fr.current,Q.context=As(M,ue)),Q.state=M.memoizedState,ue=E.getDerivedStateFromProps,typeof ue=="function"&&(Wm(M,E,ue,j),Q.state=M.memoizedState),typeof E.getDerivedStateFromProps=="function"||typeof Q.getSnapshotBeforeUpdate=="function"||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(E=Q.state,typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount(),E!==Q.state&&up.enqueueReplaceState(Q,Q.state,null),Hm(M,j,Q,X),Q.state=M.memoizedState),typeof Q.componentDidMount=="function"&&(M.flags|=4194308)}var Du=[],ic=0,Kh=null,hp=0,Xs=[],Uo=0,pi=null,Oc=1,gr="";function Lc(M,E){Du[ic++]=hp,Du[ic++]=Kh,Kh=M,hp=E}function zi(M,E,j){Xs[Uo++]=Oc,Xs[Uo++]=gr,Xs[Uo++]=pi,pi=M;var X=Oc;M=gr;var Q=32-_r(X)-1;X&=~(1<<Q),j+=1;var ue=32-_r(E)+Q;if(30<ue){var He=Q-Q%5;ue=(X&(1<<He)-1).toString(32),X>>=He,Q-=He,Oc=1<<32-_r(E)+Q|j<<Q|X,gr=ue+M}else Oc=1<<ue|j<<Q|X,gr=M}function mi(M){M.return!==null&&(Lc(M,1),zi(M,1,0))}function Zh(M){for(;M===Kh;)Kh=Du[--ic],Du[ic]=null,hp=Du[--ic],Du[ic]=null;for(;M===pi;)pi=Xs[--Uo],Xs[Uo]=null,gr=Xs[--Uo],Xs[Uo]=null,Oc=Xs[--Uo],Xs[Uo]=null}var Rs=null,es=null,Ci=!1,Nu=!1,ya=null;function zu(M,E){var j=Sa(5,null,null,0);j.elementType="DELETED",j.stateNode=E,j.return=M,E=M.deletions,E===null?(M.deletions=[j],M.flags|=16):E.push(j)}function Fu(M,E){switch(M.tag){case 5:return E=tt(E,M.type,M.pendingProps),E!==null?(M.stateNode=E,Rs=M,es=zn(E),!0):!1;case 6:return E=Ve(E,M.pendingProps),E!==null?(M.stateNode=E,Rs=M,es=null,!0):!1;case 13:if(E=At(E),E!==null){var j=pi!==null?{id:Oc,overflow:gr}:null;return M.memoizedState={dehydrated:E,treeContext:j,retryLane:1073741824},j=Sa(18,null,null,0),j.stateNode=E,j.return=M,M.child=j,Rs=M,es=null,!0}return!1;default:return!1}}function ks(M){return(M.mode&1)!==0&&(M.flags&128)===0}function fp(M){if(Ci){var E=es;if(E){var j=E;if(!Fu(M,E)){if(ks(M))throw Error(s(418));E=Sn(j);var X=Rs;E&&Fu(M,E)?zu(X,j):(M.flags=M.flags&-4097|2,Ci=!1,Rs=M)}}else{if(ks(M))throw Error(s(418));M.flags=M.flags&-4097|2,Ci=!1,Rs=M}}}function qm(M){for(M=M.return;M!==null&&M.tag!==5&&M.tag!==3&&M.tag!==13;)M=M.return;Rs=M}function Dc(M){if(!et||M!==Rs)return!1;if(!Ci)return qm(M),Ci=!0,!1;if(M.tag!==3&&(M.tag!==5||mn(M.type)&&!ot(M.type,M.memoizedProps))){var E=es;if(E){if(ks(M)){for(M=es;M;)M=Sn(M);throw Error(s(418))}for(;E;)zu(M,E),E=Sn(E)}}if(qm(M),M.tag===13){if(!et)throw Error(s(316));if(M=M.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(s(317));es=Re(M)}else es=Rs?Sn(M.stateNode):null;return!0}function Wa(){et&&(es=Rs=null,Nu=Ci=!1)}function Jh(M){ya===null?ya=[M]:ya.push(M)}function Bu(M,E,j){if(M=j.ref,M!==null&&typeof M!="function"&&typeof M!="object"){if(j._owner){if(j=j._owner,j){if(j.tag!==1)throw Error(s(309));var X=j.stateNode}if(!X)throw Error(s(147,M));var Q=X,ue=""+M;return E!==null&&E.ref!==null&&typeof E.ref=="function"&&E.ref._stringRef===ue?E.ref:(E=function(He){var mt=Q.refs;mt===av&&(mt=Q.refs={}),He===null?delete mt[ue]:mt[ue]=He},E._stringRef=ue,E)}if(typeof M!="string")throw Error(s(284));if(!j._owner)throw Error(s(290,M))}return M}function ju(M,E){throw M=Object.prototype.toString.call(E),Error(s(31,M==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":M))}function pp(M){var E=M._init;return E(M._payload)}function cv(M){function E(kt,_t){if(M){var Nt=kt.deletions;Nt===null?(kt.deletions=[_t],kt.flags|=16):Nt.push(_t)}}function j(kt,_t){if(!M)return null;for(;_t!==null;)E(kt,_t),_t=_t.sibling;return null}function X(kt,_t){for(kt=new Map;_t!==null;)_t.key!==null?kt.set(_t.key,_t):kt.set(_t.index,_t),_t=_t.sibling;return kt}function Q(kt,_t){return kt=pf(kt,_t),kt.index=0,kt.sibling=null,kt}function ue(kt,_t,Nt){return kt.index=Nt,M?(Nt=kt.alternate,Nt!==null?(Nt=Nt.index,Nt<_t?(kt.flags|=2,_t):Nt):(kt.flags|=2,_t)):(kt.flags|=1048576,_t)}function He(kt){return M&&kt.alternate===null&&(kt.flags|=2),kt}function mt(kt,_t,Nt,Dn){return _t===null||_t.tag!==6?(_t=D_(Nt,kt.mode,Dn),_t.return=kt,_t):(_t=Q(_t,Nt),_t.return=kt,_t)}function Ut(kt,_t,Nt,Dn){var Qn=Nt.type;return Qn===h?Vn(kt,_t,Nt.props.children,Dn,Nt.key):_t!==null&&(_t.elementType===Qn||typeof Qn=="object"&&Qn!==null&&Qn.$$typeof===A&&pp(Qn)===_t.type)?(Dn=Q(_t,Nt.props),Dn.ref=Bu(kt,_t,Nt),Dn.return=kt,Dn):(Dn=os(Nt.type,Nt.key,Nt.props,null,kt.mode,Dn),Dn.ref=Bu(kt,_t,Nt),Dn.return=kt,Dn)}function fn(kt,_t,Nt,Dn){return _t===null||_t.tag!==4||_t.stateNode.containerInfo!==Nt.containerInfo||_t.stateNode.implementation!==Nt.implementation?(_t=Ip(Nt,kt.mode,Dn),_t.return=kt,_t):(_t=Q(_t,Nt.children||[]),_t.return=kt,_t)}function Vn(kt,_t,Nt,Dn,Qn){return _t===null||_t.tag!==7?(_t=dc(Nt,kt.mode,Dn,Qn),_t.return=kt,_t):(_t=Q(_t,Nt),_t.return=kt,_t)}function Sr(kt,_t,Nt){if(typeof _t=="string"&&_t!==""||typeof _t=="number")return _t=D_(""+_t,kt.mode,Nt),_t.return=kt,_t;if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case l:return Nt=os(_t.type,_t.key,_t.props,null,kt.mode,Nt),Nt.ref=Bu(kt,null,_t),Nt.return=kt,Nt;case d:return _t=Ip(_t,kt.mode,Nt),_t.return=kt,_t;case A:var Dn=_t._init;return Sr(kt,Dn(_t._payload),Nt)}if(me(_t)||F(_t))return _t=dc(_t,kt.mode,Nt,null),_t.return=kt,_t;ju(kt,_t)}return null}function cr(kt,_t,Nt,Dn){var Qn=_t!==null?_t.key:null;if(typeof Nt=="string"&&Nt!==""||typeof Nt=="number")return Qn!==null?null:mt(kt,_t,""+Nt,Dn);if(typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case l:return Nt.key===Qn?Ut(kt,_t,Nt,Dn):null;case d:return Nt.key===Qn?fn(kt,_t,Nt,Dn):null;case A:return Qn=Nt._init,cr(kt,_t,Qn(Nt._payload),Dn)}if(me(Nt)||F(Nt))return Qn!==null?null:Vn(kt,_t,Nt,Dn,null);ju(kt,Nt)}return null}function ri(kt,_t,Nt,Dn,Qn){if(typeof Dn=="string"&&Dn!==""||typeof Dn=="number")return kt=kt.get(Nt)||null,mt(_t,kt,""+Dn,Qn);if(typeof Dn=="object"&&Dn!==null){switch(Dn.$$typeof){case l:return kt=kt.get(Dn.key===null?Nt:Dn.key)||null,Ut(_t,kt,Dn,Qn);case d:return kt=kt.get(Dn.key===null?Nt:Dn.key)||null,fn(_t,kt,Dn,Qn);case A:var Ar=Dn._init;return ri(kt,_t,Nt,Ar(Dn._payload),Qn)}if(me(Dn)||F(Dn))return kt=kt.get(Nt)||null,Vn(_t,kt,Dn,Qn,null);ju(_t,Dn)}return null}function Kn(kt,_t,Nt,Dn){for(var Qn=null,Ar=null,Tr=_t,Ur=_t=0,ys=null;Tr!==null&&Ur<Nt.length;Ur++){Tr.index>Ur?(ys=Tr,Tr=null):ys=Tr.sibling;var lr=cr(kt,Tr,Nt[Ur],Dn);if(lr===null){Tr===null&&(Tr=ys);break}M&&Tr&&lr.alternate===null&&E(kt,Tr),_t=ue(lr,_t,Ur),Ar===null?Qn=lr:Ar.sibling=lr,Ar=lr,Tr=ys}if(Ur===Nt.length)return j(kt,Tr),Ci&&Lc(kt,Ur),Qn;if(Tr===null){for(;Ur<Nt.length;Ur++)Tr=Sr(kt,Nt[Ur],Dn),Tr!==null&&(_t=ue(Tr,_t,Ur),Ar===null?Qn=Tr:Ar.sibling=Tr,Ar=Tr);return Ci&&Lc(kt,Ur),Qn}for(Tr=X(kt,Tr);Ur<Nt.length;Ur++)ys=ri(Tr,kt,Ur,Nt[Ur],Dn),ys!==null&&(M&&ys.alternate!==null&&Tr.delete(ys.key===null?Ur:ys.key),_t=ue(ys,_t,Ur),Ar===null?Qn=ys:Ar.sibling=ys,Ar=ys);return M&&Tr.forEach(function(Vc){return E(kt,Vc)}),Ci&&Lc(kt,Ur),Qn}function ta(kt,_t,Nt,Dn){var Qn=F(Nt);if(typeof Qn!="function")throw Error(s(150));if(Nt=Qn.call(Nt),Nt==null)throw Error(s(151));for(var Ar=Qn=null,Tr=_t,Ur=_t=0,ys=null,lr=Nt.next();Tr!==null&&!lr.done;Ur++,lr=Nt.next()){Tr.index>Ur?(ys=Tr,Tr=null):ys=Tr.sibling;var Vc=cr(kt,Tr,lr.value,Dn);if(Vc===null){Tr===null&&(Tr=ys);break}M&&Tr&&Vc.alternate===null&&E(kt,Tr),_t=ue(Vc,_t,Ur),Ar===null?Qn=Vc:Ar.sibling=Vc,Ar=Vc,Tr=ys}if(lr.done)return j(kt,Tr),Ci&&Lc(kt,Ur),Qn;if(Tr===null){for(;!lr.done;Ur++,lr=Nt.next())lr=Sr(kt,lr.value,Dn),lr!==null&&(_t=ue(lr,_t,Ur),Ar===null?Qn=lr:Ar.sibling=lr,Ar=lr);return Ci&&Lc(kt,Ur),Qn}for(Tr=X(kt,Tr);!lr.done;Ur++,lr=Nt.next())lr=ri(Tr,kt,Ur,lr.value,Dn),lr!==null&&(M&&lr.alternate!==null&&Tr.delete(lr.key===null?Ur:lr.key),_t=ue(lr,_t,Ur),Ar===null?Qn=lr:Ar.sibling=lr,Ar=lr);return M&&Tr.forEach(function(ET){return E(kt,ET)}),Ci&&Lc(kt,Ur),Qn}function hc(kt,_t,Nt,Dn){if(typeof Nt=="object"&&Nt!==null&&Nt.type===h&&Nt.key===null&&(Nt=Nt.props.children),typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case l:e:{for(var Qn=Nt.key,Ar=_t;Ar!==null;){if(Ar.key===Qn){if(Qn=Nt.type,Qn===h){if(Ar.tag===7){j(kt,Ar.sibling),_t=Q(Ar,Nt.props.children),_t.return=kt,kt=_t;break e}}else if(Ar.elementType===Qn||typeof Qn=="object"&&Qn!==null&&Qn.$$typeof===A&&pp(Qn)===Ar.type){j(kt,Ar.sibling),_t=Q(Ar,Nt.props),_t.ref=Bu(kt,Ar,Nt),_t.return=kt,kt=_t;break e}j(kt,Ar);break}else E(kt,Ar);Ar=Ar.sibling}Nt.type===h?(_t=dc(Nt.props.children,kt.mode,Dn,Nt.key),_t.return=kt,kt=_t):(Dn=os(Nt.type,Nt.key,Nt.props,null,kt.mode,Dn),Dn.ref=Bu(kt,_t,Nt),Dn.return=kt,kt=Dn)}return He(kt);case d:e:{for(Ar=Nt.key;_t!==null;){if(_t.key===Ar)if(_t.tag===4&&_t.stateNode.containerInfo===Nt.containerInfo&&_t.stateNode.implementation===Nt.implementation){j(kt,_t.sibling),_t=Q(_t,Nt.children||[]),_t.return=kt,kt=_t;break e}else{j(kt,_t);break}else E(kt,_t);_t=_t.sibling}_t=Ip(Nt,kt.mode,Dn),_t.return=kt,kt=_t}return He(kt);case A:return Ar=Nt._init,hc(kt,_t,Ar(Nt._payload),Dn)}if(me(Nt))return Kn(kt,_t,Nt,Dn);if(F(Nt))return ta(kt,_t,Nt,Dn);ju(kt,Nt)}return typeof Nt=="string"&&Nt!==""||typeof Nt=="number"?(Nt=""+Nt,_t!==null&&_t.tag===6?(j(kt,_t.sibling),_t=Q(_t,Nt),_t.return=kt,kt=_t):(j(kt,_t),_t=D_(Nt,kt.mode,Dn),_t.return=kt,kt=_t),He(kt)):j(kt,_t)}return hc}var Al=cv(!0),Ud=cv(!1),Vd={},Os=Gr(Vd),Mr=Gr(Vd),Nc=Gr(Vd);function Pl(M){if(M===Vd)throw Error(s(174));return M}function mp(M,E){On(Nc,E),On(Mr,M),On(Os,Vd),M=we(E),sr(Os),On(Os,M)}function oc(){sr(Os),sr(Mr),sr(Nc)}function Xm(M){var E=Pl(Nc.current),j=Pl(Os.current);E=ee(j,M.type,E),j!==E&&(On(Mr,M),On(Os,E))}function Qh(M){Mr.current===M&&(sr(Os),sr(Mr))}var Ai=Gr(0);function gp(M){for(var E=M;E!==null;){if(E.tag===13){var j=E.memoizedState;if(j!==null&&(j=j.dehydrated,j===null||Dt(j)||Ct(j)))return E}else if(E.tag===19&&E.memoizedProps.revealOrder!==void 0){if(E.flags&128)return E}else if(E.child!==null){E.child.return=E,E=E.child;continue}if(E===M)break;for(;E.sibling===null;){if(E.return===null||E.return===M)return null;E=E.return}E.sibling.return=E.return,E=E.sibling}return null}var Hd=[];function Wd(){for(var M=0;M<Hd.length;M++){var E=Hd[M];Je?E._workInProgressVersionPrimary=null:E._workInProgressVersionSecondary=null}Hd.length=0}var $u=a.ReactCurrentDispatcher,ts=a.ReactCurrentBatchConfig,Uu=0,Qi=null,ko=null,ao=null,ef=!1,Vu=!1,sc=0,va=0;function lo(){throw Error(s(321))}function Gd(M,E){if(E===null)return!1;for(var j=0;j<E.length&&j<M.length;j++)if(!Ua(M[j],E[j]))return!1;return!0}function yp(M,E,j,X,Q,ue){if(Uu=ue,Qi=E,E.memoizedState=null,E.updateQueue=null,E.lanes=0,$u.current=M===null||M.memoizedState===null?ig:Mw,M=j(X,Q),Vu){ue=0;do{if(Vu=!1,sc=0,25<=ue)throw Error(s(301));ue+=1,ao=ko=null,E.updateQueue=null,$u.current=hv,M=j(X,Q)}while(Vu)}if($u.current=lc,E=ko!==null&&ko.next!==null,Uu=0,ao=ko=Qi=null,ef=!1,E)throw Error(s(300));return M}function Ym(){var M=sc!==0;return sc=0,M}function Ys(){var M={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ao===null?Qi.memoizedState=ao=M:ao=ao.next=M,ao}function Ks(){if(ko===null){var M=Qi.alternate;M=M!==null?M.memoizedState:null}else M=ko.next;var E=ao===null?Qi.memoizedState:ao.next;if(E!==null)ao=E,ko=M;else{if(M===null)throw Error(s(310));ko=M,M={memoizedState:ko.memoizedState,baseState:ko.baseState,baseQueue:ko.baseQueue,queue:ko.queue,next:null},ao===null?Qi.memoizedState=ao=M:ao=ao.next=M}return ao}function Il(M,E){return typeof E=="function"?E(M):E}function Km(M){var E=Ks(),j=E.queue;if(j===null)throw Error(s(311));j.lastRenderedReducer=M;var X=ko,Q=X.baseQueue,ue=j.pending;if(ue!==null){if(Q!==null){var He=Q.next;Q.next=ue.next,ue.next=He}X.baseQueue=Q=ue,j.pending=null}if(Q!==null){ue=Q.next,X=X.baseState;var mt=He=null,Ut=null,fn=ue;do{var Vn=fn.lane;if((Uu&Vn)===Vn)Ut!==null&&(Ut=Ut.next={lane:0,action:fn.action,hasEagerState:fn.hasEagerState,eagerState:fn.eagerState,next:null}),X=fn.hasEagerState?fn.eagerState:M(X,fn.action);else{var Sr={lane:Vn,action:fn.action,hasEagerState:fn.hasEagerState,eagerState:fn.eagerState,next:null};Ut===null?(mt=Ut=Sr,He=X):Ut=Ut.next=Sr,Qi.lanes|=Vn,uc|=Vn}fn=fn.next}while(fn!==null&&fn!==ue);Ut===null?He=X:Ut.next=mt,Ua(X,E.memoizedState)||(Ls=!0),E.memoizedState=X,E.baseState=He,E.baseQueue=Ut,j.lastRenderedState=X}if(M=j.interleaved,M!==null){Q=M;do ue=Q.lane,Qi.lanes|=ue,uc|=ue,Q=Q.next;while(Q!==M)}else Q===null&&(j.lanes=0);return[E.memoizedState,j.dispatch]}function qd(M){var E=Ks(),j=E.queue;if(j===null)throw Error(s(311));j.lastRenderedReducer=M;var X=j.dispatch,Q=j.pending,ue=E.memoizedState;if(Q!==null){j.pending=null;var He=Q=Q.next;do ue=M(ue,He.action),He=He.next;while(He!==Q);Ua(ue,E.memoizedState)||(Ls=!0),E.memoizedState=ue,E.baseQueue===null&&(E.baseState=ue),j.lastRenderedState=ue}return[ue,X]}function eo(){}function Ga(M,E){var j=Qi,X=Ks(),Q=E(),ue=!Ua(X.memoizedState,Q);if(ue&&(X.memoizedState=Q,Ls=!0),X=X.queue,Yd(vp.bind(null,j,X,M),[M]),X.getSnapshot!==E||ue||ao!==null&&ao.memoizedState.tag&1){if(j.flags|=2048,ac(9,tf.bind(null,j,X,Q,E),void 0,null),li===null)throw Error(s(349));Uu&30||_a(j,E,Q)}return Q}function _a(M,E,j){M.flags|=16384,M={getSnapshot:E,value:j},E=Qi.updateQueue,E===null?(E={lastEffect:null,stores:null},Qi.updateQueue=E,E.stores=[M]):(j=E.stores,j===null?E.stores=[M]:j.push(M))}function tf(M,E,j,X){E.value=j,E.getSnapshot=X,_p(E)&&Dl(M,1,-1)}function vp(M,E,j){return j(function(){_p(E)&&Dl(M,1,-1)})}function _p(M){var E=M.getSnapshot;M=M.value;try{var j=E();return!Ua(M,j)}catch{return!0}}function zc(M){var E=Ys();return typeof M=="function"&&(M=M()),E.memoizedState=E.baseState=M,M={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Il,lastRenderedState:M},E.queue=M,M=M.dispatch=S_.bind(null,Qi,M),[E.memoizedState,M]}function ac(M,E,j,X){return M={tag:M,create:E,destroy:j,deps:X,next:null},E=Qi.updateQueue,E===null?(E={lastEffect:null,stores:null},Qi.updateQueue=E,E.lastEffect=M.next=M):(j=E.lastEffect,j===null?E.lastEffect=M.next=M:(X=j.next,j.next=M,M.next=X,E.lastEffect=M)),M}function Zm(){return Ks().memoizedState}function Xd(M,E,j,X){var Q=Ys();Qi.flags|=M,Q.memoizedState=ac(1|E,j,void 0,X===void 0?null:X)}function Hu(M,E,j,X){var Q=Ks();X=X===void 0?null:X;var ue=void 0;if(ko!==null){var He=ko.memoizedState;if(ue=He.destroy,X!==null&&Gd(X,He.deps)){Q.memoizedState=ac(E,j,ue,X);return}}Qi.flags|=M,Q.memoizedState=ac(1|E,j,ue,X)}function xp(M,E){return Xd(8390656,8,M,E)}function Yd(M,E){return Hu(2048,8,M,E)}function Jm(M,E){return Hu(4,2,M,E)}function Fc(M,E){return Hu(4,4,M,E)}function bp(M,E){if(typeof E=="function")return M=M(),E(M),function(){E(null)};if(E!=null)return M=M(),E.current=M,function(){E.current=null}}function Qm(M,E,j){return j=j!=null?j.concat([M]):null,Hu(4,4,bp.bind(null,E,M),j)}function eg(){}function tg(M,E){var j=Ks();E=E===void 0?null:E;var X=j.memoizedState;return X!==null&&E!==null&&Gd(E,X[1])?X[0]:(j.memoizedState=[M,E],M)}function uv(M,E){var j=Ks();E=E===void 0?null:E;var X=j.memoizedState;return X!==null&&E!==null&&Gd(E,X[1])?X[0]:(M=M(),j.memoizedState=[M,E],M)}function dv(M,E){var j=Fr;Fr=j!==0&&4>j?j:4,M(!0);var X=ts.transition;ts.transition={};try{M(!1),E()}finally{Fr=j,ts.transition=X}}function ng(){return Ks().memoizedState}function nf(M,E,j){var X=Qd(M);j={lane:X,action:j,hasEagerState:!1,eagerState:null,next:null},qa(M)?Xa(E,j):(rg(M,E,j),j=gs(),M=Dl(M,X,j),M!==null&&Ya(M,E,X))}function S_(M,E,j){var X=Qd(M),Q={lane:X,action:j,hasEagerState:!1,eagerState:null,next:null};if(qa(M))Xa(E,Q);else{rg(M,E,Q);var ue=M.alternate;if(M.lanes===0&&(ue===null||ue.lanes===0)&&(ue=E.lastRenderedReducer,ue!==null))try{var He=E.lastRenderedState,mt=ue(He,j);if(Q.hasEagerState=!0,Q.eagerState=mt,Ua(mt,He))return}catch{}finally{}j=gs(),M=Dl(M,X,j),M!==null&&Ya(M,E,X)}}function qa(M){var E=M.alternate;return M===Qi||E!==null&&E===Qi}function Xa(M,E){Vu=ef=!0;var j=M.pending;j===null?E.next=E:(E.next=j.next,j.next=E),M.pending=E}function rg(M,E,j){li!==null&&M.mode&1&&!(vr&2)?(M=E.interleaved,M===null?(j.next=j,Tl===null?Tl=[E]:Tl.push(E)):(j.next=M.next,M.next=j),E.interleaved=j):(M=E.pending,M===null?j.next=j:(j.next=M.next,M.next=j),E.pending=j)}function Ya(M,E,j){if(j&4194240){var X=E.lanes;X&=M.pendingLanes,j|=X,E.lanes=j,nc(M,j)}}var lc={readContext:ga,useCallback:lo,useContext:lo,useEffect:lo,useImperativeHandle:lo,useInsertionEffect:lo,useLayoutEffect:lo,useMemo:lo,useReducer:lo,useRef:lo,useState:lo,useDebugValue:lo,useDeferredValue:lo,useTransition:lo,useMutableSource:lo,useSyncExternalStore:lo,useId:lo,unstable_isNewReconciler:!1},ig={readContext:ga,useCallback:function(M,E){return Ys().memoizedState=[M,E===void 0?null:E],M},useContext:ga,useEffect:xp,useImperativeHandle:function(M,E,j){return j=j!=null?j.concat([M]):null,Xd(4194308,4,bp.bind(null,E,M),j)},useLayoutEffect:function(M,E){return Xd(4194308,4,M,E)},useInsertionEffect:function(M,E){return Xd(4,2,M,E)},useMemo:function(M,E){var j=Ys();return E=E===void 0?null:E,M=M(),j.memoizedState=[M,E],M},useReducer:function(M,E,j){var X=Ys();return E=j!==void 0?j(E):E,X.memoizedState=X.baseState=E,M={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:M,lastRenderedState:E},X.queue=M,M=M.dispatch=nf.bind(null,Qi,M),[X.memoizedState,M]},useRef:function(M){var E=Ys();return M={current:M},E.memoizedState=M},useState:zc,useDebugValue:eg,useDeferredValue:function(M){var E=zc(M),j=E[0],X=E[1];return xp(function(){var Q=ts.transition;ts.transition={};try{X(M)}finally{ts.transition=Q}},[M]),j},useTransition:function(){var M=zc(!1),E=M[0];return M=dv.bind(null,M[1]),Ys().memoizedState=M,[E,M]},useMutableSource:function(){},useSyncExternalStore:function(M,E,j){var X=Qi,Q=Ys();if(Ci){if(j===void 0)throw Error(s(407));j=j()}else{if(j=E(),li===null)throw Error(s(349));Uu&30||_a(X,E,j)}Q.memoizedState=j;var ue={value:j,getSnapshot:E};return Q.queue=ue,xp(vp.bind(null,X,ue,M),[M]),X.flags|=2048,ac(9,tf.bind(null,X,ue,j,E),void 0,null),j},useId:function(){var M=Ys(),E=li.identifierPrefix;if(Ci){var j=gr,X=Oc;j=(X&~(1<<32-_r(X)-1)).toString(32)+j,E=":"+E+"R"+j,j=sc++,0<j&&(E+="H"+j.toString(32)),E+=":"}else j=va++,E=":"+E+"r"+j.toString(32)+":";return M.memoizedState=E},unstable_isNewReconciler:!1},Mw={readContext:ga,useCallback:tg,useContext:ga,useEffect:Yd,useImperativeHandle:Qm,useInsertionEffect:Jm,useLayoutEffect:Fc,useMemo:uv,useReducer:Km,useRef:Zm,useState:function(){return Km(Il)},useDebugValue:eg,useDeferredValue:function(M){var E=Km(Il),j=E[0],X=E[1];return Yd(function(){var Q=ts.transition;ts.transition={};try{X(M)}finally{ts.transition=Q}},[M]),j},useTransition:function(){var M=Km(Il)[0],E=Ks().memoizedState;return[M,E]},useMutableSource:eo,useSyncExternalStore:Ga,useId:ng,unstable_isNewReconciler:!1},hv={readContext:ga,useCallback:tg,useContext:ga,useEffect:Yd,useImperativeHandle:Qm,useInsertionEffect:Jm,useLayoutEffect:Fc,useMemo:uv,useReducer:qd,useRef:Zm,useState:function(){return qd(Il)},useDebugValue:eg,useDeferredValue:function(M){var E=qd(Il),j=E[0],X=E[1];return Yd(function(){var Q=ts.transition;ts.transition={};try{X(M)}finally{ts.transition=Q}},[M]),j},useTransition:function(){var M=qd(Il)[0],E=Ks().memoizedState;return[M,E]},useMutableSource:eo,useSyncExternalStore:Ga,useId:ng,unstable_isNewReconciler:!1};function fv(M,E){try{var j="",X=E;do j+=Sw(X),X=X.return;while(X);var Q=j}catch(ue){Q=`
Error generating stack: `+ue.message+`
`+ue.stack}return{value:M,source:E,stack:Q}}function og(M,E){try{console.error(E.value)}catch(j){setTimeout(function(){throw j})}}var rf=typeof WeakMap=="function"?WeakMap:Map;function Rl(M,E,j){j=rc(-1,j),j.tag=3,j.payload={element:null};var X=E.value;return j.callback=function(){uf||(uf=!0,Mp=X),og(M,E)},j}function Mn(M,E,j){j=rc(-1,j),j.tag=3;var X=M.type.getDerivedStateFromError;if(typeof X=="function"){var Q=E.value;j.payload=function(){return X(Q)},j.callback=function(){og(M,E)}}var ue=M.stateNode;return ue!==null&&typeof ue.componentDidCatch=="function"&&(j.callback=function(){og(M,E),typeof X!="function"&&(Ll===null?Ll=new Set([this]):Ll.add(this));var He=E.stack;this.componentDidCatch(E.value,{componentStack:He!==null?He:""})}),j}function pv(M,E,j){var X=M.pingCache;if(X===null){X=M.pingCache=new rf;var Q=new Set;X.set(E,Q)}else Q=X.get(E),Q===void 0&&(Q=new Set,X.set(E,Q));Q.has(j)||(Q.add(j),M=Aw.bind(null,M,E,j),E.then(M,M))}function sg(M){do{var E;if((E=M.tag===13)&&(E=M.memoizedState,E=E!==null?E.dehydrated!==null:!0),E)return M;M=M.return}while(M!==null);return null}function mv(M,E,j,X,Q){return M.mode&1?(M.flags|=65536,M.lanes=Q,M):(M===E?M.flags|=65536:(M.flags|=128,j.flags|=131072,j.flags&=-52805,j.tag===1&&(j.alternate===null?j.tag=17:(E=rc(-1,1),E.tag=2,Ha(j,E))),j.lanes|=1),M)}function Zs(M){M.flags|=4}function of(M,E){if(M!==null&&M.child===E.child)return!0;if(E.flags&16)return!1;for(M=E.child;M!==null;){if(M.flags&12854||M.subtreeFlags&12854)return!1;M=M.sibling}return!0}var kl,wr,sf,ag;if(Qe)kl=function(M,E){for(var j=E.child;j!==null;){if(j.tag===5||j.tag===6)je(M,j.stateNode);else if(j.tag!==4&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===E)break;for(;j.sibling===null;){if(j.return===null||j.return===E)return;j=j.return}j.sibling.return=j.return,j=j.sibling}},wr=function(){},sf=function(M,E,j,X,Q){if(M=M.memoizedProps,M!==X){var ue=E.stateNode,He=Pl(Os.current);j=Be(ue,j,M,X,Q,He),(E.updateQueue=j)&&Zs(E)}},ag=function(M,E,j,X){j!==X&&Zs(E)};else if(ge){kl=function(M,E,j,X){for(var Q=E.child;Q!==null;){if(Q.tag===5){var ue=Q.stateNode;j&&X&&(ue=We(ue,Q.type,Q.memoizedProps,Q)),je(M,ue)}else if(Q.tag===6)ue=Q.stateNode,j&&X&&(ue=Ze(ue,Q.memoizedProps,Q)),je(M,ue);else if(Q.tag!==4){if(Q.tag===22&&Q.memoizedState!==null)ue=Q.child,ue!==null&&(ue.return=Q),kl(M,Q,!0,!0);else if(Q.child!==null){Q.child.return=Q,Q=Q.child;continue}}if(Q===E)break;for(;Q.sibling===null;){if(Q.return===null||Q.return===E)return;Q=Q.return}Q.sibling.return=Q.return,Q=Q.sibling}};var lg=function(M,E,j,X){for(var Q=E.child;Q!==null;){if(Q.tag===5){var ue=Q.stateNode;j&&X&&(ue=We(ue,Q.type,Q.memoizedProps,Q)),se(M,ue)}else if(Q.tag===6)ue=Q.stateNode,j&&X&&(ue=Ze(ue,Q.memoizedProps,Q)),se(M,ue);else if(Q.tag!==4){if(Q.tag===22&&Q.memoizedState!==null)ue=Q.child,ue!==null&&(ue.return=Q),lg(M,Q,!0,!0);else if(Q.child!==null){Q.child.return=Q,Q=Q.child;continue}}if(Q===E)break;for(;Q.sibling===null;){if(Q.return===null||Q.return===E)return;Q=Q.return}Q.sibling.return=Q.return,Q=Q.sibling}};wr=function(M,E){var j=E.stateNode;if(!of(M,E)){M=j.containerInfo;var X=ie(M);lg(X,E,!1,!1),j.pendingChildren=X,Zs(E),Se(M,X)}},sf=function(M,E,j,X,Q){var ue=M.stateNode,He=M.memoizedProps;if((M=of(M,E))&&He===X)E.stateNode=ue;else{var mt=E.stateNode,Ut=Pl(Os.current),fn=null;He!==X&&(fn=Be(mt,j,He,X,Q,Ut)),M&&fn===null?E.stateNode=ue:(ue=ve(ue,fn,j,He,X,E,M,mt),dt(ue,j,X,Q,Ut)&&Zs(E),E.stateNode=ue,M?Zs(E):kl(ue,E,!1,!1))}},ag=function(M,E,j,X){j!==X?(M=Pl(Nc.current),j=Pl(Os.current),E.stateNode=at(X,M,j,E),Zs(E)):E.stateNode=M.stateNode}}else wr=function(){},sf=function(){},ag=function(){};function af(M,E){if(!Ci)switch(M.tailMode){case"hidden":E=M.tail;for(var j=null;E!==null;)E.alternate!==null&&(j=E),E=E.sibling;j===null?M.tail=null:j.sibling=null;break;case"collapsed":j=M.tail;for(var X=null;j!==null;)j.alternate!==null&&(X=j),j=j.sibling;X===null?E||M.tail===null?M.tail=null:M.tail.sibling=null:X.sibling=null}}function ms(M){var E=M.alternate!==null&&M.alternate.child===M.child,j=0,X=0;if(E)for(var Q=M.child;Q!==null;)j|=Q.lanes|Q.childLanes,X|=Q.subtreeFlags&14680064,X|=Q.flags&14680064,Q.return=M,Q=Q.sibling;else for(Q=M.child;Q!==null;)j|=Q.lanes|Q.childLanes,X|=Q.subtreeFlags,X|=Q.flags,Q.return=M,Q=Q.sibling;return M.subtreeFlags|=X,M.childLanes=j,E}function M_(M,E,j){var X=E.pendingProps;switch(Zh(E),E.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ms(E),null;case 1:return fi(E.type)&&Bi(),ms(E),null;case 3:return X=E.stateNode,oc(),sr(_i),sr(fr),Wd(),X.pendingContext&&(X.context=X.pendingContext,X.pendingContext=null),(M===null||M.child===null)&&(Dc(E)?Zs(E):M===null||M.memoizedState.isDehydrated&&!(E.flags&256)||(E.flags|=1024,ya!==null&&($c(ya),ya=null))),wr(M,E),ms(E),null;case 5:Qh(E),j=Pl(Nc.current);var Q=E.type;if(M!==null&&E.stateNode!=null)sf(M,E,Q,X,j),M.ref!==E.ref&&(E.flags|=512,E.flags|=2097152);else{if(!X){if(E.stateNode===null)throw Error(s(166));return ms(E),null}if(M=Pl(Os.current),Dc(E)){if(!et)throw Error(s(175));M=ir(E.stateNode,E.type,E.memoizedProps,j,M,E,!Nu),E.updateQueue=M,M!==null&&Zs(E)}else{var ue=Le(Q,X,j,M,E);kl(ue,E,!1,!1),E.stateNode=ue,dt(ue,Q,X,j,M)&&Zs(E)}E.ref!==null&&(E.flags|=512,E.flags|=2097152)}return ms(E),null;case 6:if(M&&E.stateNode!=null)ag(M,E,M.memoizedProps,X);else{if(typeof X!="string"&&E.stateNode===null)throw Error(s(166));if(M=Pl(Nc.current),j=Pl(Os.current),Dc(E)){if(!et)throw Error(s(176));if(M=E.stateNode,X=E.memoizedProps,(j=Yr(M,X,E,!Nu))&&(Q=Rs,Q!==null))switch(ue=(Q.mode&1)!==0,Q.tag){case 3:kn(Q.stateNode.containerInfo,M,X,ue);break;case 5:tr(Q.type,Q.memoizedProps,Q.stateNode,M,X,ue)}j&&Zs(E)}else E.stateNode=at(X,M,j,E)}return ms(E),null;case 13:if(sr(Ai),X=E.memoizedState,Ci&&es!==null&&E.mode&1&&!(E.flags&128)){for(M=es;M;)M=Sn(M);return Wa(),E.flags|=98560,E}if(X!==null&&X.dehydrated!==null){if(X=Dc(E),M===null){if(!X)throw Error(s(318));if(!et)throw Error(s(344));if(M=E.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(s(317));Ti(M,E)}else Wa(),!(E.flags&128)&&(E.memoizedState=null),E.flags|=4;return ms(E),null}return ya!==null&&($c(ya),ya=null),E.flags&128?(E.lanes=j,E):(X=X!==null,j=!1,M===null?Dc(E):j=M.memoizedState!==null,X&&!j&&(E.child.flags|=8192,E.mode&1&&(M===null||Ai.current&1?qi===0&&(qi=3):P_())),E.updateQueue!==null&&(E.flags|=4),ms(E),null);case 4:return oc(),wr(M,E),M===null&&Tt(E.stateNode.containerInfo),ms(E),null;case 10:return lp(E.type._context),ms(E),null;case 17:return fi(E.type)&&Bi(),ms(E),null;case 19:if(sr(Ai),Q=E.memoizedState,Q===null)return ms(E),null;if(X=(E.flags&128)!==0,ue=Q.rendering,ue===null)if(X)af(Q,!1);else{if(qi!==0||M!==null&&M.flags&128)for(M=E.child;M!==null;){if(ue=gp(M),ue!==null){for(E.flags|=128,af(Q,!1),M=ue.updateQueue,M!==null&&(E.updateQueue=M,E.flags|=4),E.subtreeFlags=0,M=j,X=E.child;X!==null;)j=X,Q=M,j.flags&=14680066,ue=j.alternate,ue===null?(j.childLanes=0,j.lanes=Q,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=ue.childLanes,j.lanes=ue.lanes,j.child=ue.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=ue.memoizedProps,j.memoizedState=ue.memoizedState,j.updateQueue=ue.updateQueue,j.type=ue.type,Q=ue.dependencies,j.dependencies=Q===null?null:{lanes:Q.lanes,firstContext:Q.firstContext}),X=X.sibling;return On(Ai,Ai.current&1|2),E.child}M=M.sibling}Q.tail!==null&&Ro()>Jd&&(E.flags|=128,X=!0,af(Q,!1),E.lanes=4194304)}else{if(!X)if(M=gp(ue),M!==null){if(E.flags|=128,X=!0,M=M.updateQueue,M!==null&&(E.updateQueue=M,E.flags|=4),af(Q,!0),Q.tail===null&&Q.tailMode==="hidden"&&!ue.alternate&&!Ci)return ms(E),null}else 2*Ro()-Q.renderingStartTime>Jd&&j!==1073741824&&(E.flags|=128,X=!0,af(Q,!1),E.lanes=4194304);Q.isBackwards?(ue.sibling=E.child,E.child=ue):(M=Q.last,M!==null?M.sibling=ue:E.child=ue,Q.last=ue)}return Q.tail!==null?(E=Q.tail,Q.rendering=E,Q.tail=E.sibling,Q.renderingStartTime=Ro(),E.sibling=null,M=Ai.current,On(Ai,X?M&1|2:M&1),E):(ms(E),null);case 22:case 23:return Tw(),X=E.memoizedState!==null,M!==null&&M.memoizedState!==null!==X&&(E.flags|=8192),X&&E.mode&1?ji&1073741824&&(ms(E),Qe&&E.subtreeFlags&6&&(E.flags|=8192)):ms(E),null;case 24:return null;case 25:return null}throw Error(s(156,E.tag))}var Bc=a.ReactCurrentOwner,Ls=!1;function ns(M,E,j,X){E.child=M===null?Ud(E,null,j,X):Al(E,M.child,j,X)}function cg(M,E,j,X,Q){j=j.render;var ue=E.ref;return $d(E,Q),X=yp(M,E,j,X,ue,Q),j=Ym(),M!==null&&!Ls?(E.updateQueue=M.updateQueue,E.flags&=-2053,M.lanes&=~Q,K(M,E,Q)):(Ci&&j&&mi(E),E.flags|=1,ns(M,E,X,Q),E.child)}function ug(M,E,j,X,Q){if(M===null){var ue=j.type;return typeof ue=="function"&&!L_(ue)&&ue.defaultProps===void 0&&j.compare===null&&j.defaultProps===void 0?(E.tag=15,E.type=ue,E_(M,E,ue,X,Q)):(M=os(j.type,null,X,E,E.mode,Q),M.ref=E.ref,M.return=E,E.child=M)}if(ue=M.child,!(M.lanes&Q)){var He=ue.memoizedProps;if(j=j.compare,j=j!==null?j:Lu,j(He,X)&&M.ref===E.ref)return K(M,E,Q)}return E.flags|=1,M=pf(ue,X),M.ref=E.ref,M.return=E,E.child=M}function E_(M,E,j,X,Q){if(M!==null&&Lu(M.memoizedProps,X)&&M.ref===E.ref)if(Ls=!1,(M.lanes&Q)!==0)M.flags&131072&&(Ls=!0);else return E.lanes=M.lanes,K(M,E,Q);return lf(M,E,j,X,Q)}function Ol(M,E,j){var X=E.pendingProps,Q=X.children,ue=M!==null?M.memoizedState:null;if(X.mode==="hidden")if(!(E.mode&1))E.memoizedState={baseLanes:0,cachePool:null},On(xi,ji),ji|=j;else if(j&1073741824)E.memoizedState={baseLanes:0,cachePool:null},X=ue!==null?ue.baseLanes:j,On(xi,ji),ji|=X;else return M=ue!==null?ue.baseLanes|j:j,E.lanes=E.childLanes=1073741824,E.memoizedState={baseLanes:M,cachePool:null},E.updateQueue=null,On(xi,ji),ji|=M,null;else ue!==null?(X=ue.baseLanes|j,E.memoizedState=null):X=j,On(xi,ji),ji|=X;return ns(M,E,Q,j),E.child}function ai(M,E){var j=E.ref;(M===null&&j!==null||M!==null&&M.ref!==j)&&(E.flags|=512,E.flags|=2097152)}function lf(M,E,j,X,Q){var ue=fi(j)?si:fr.current;return ue=As(E,ue),$d(E,Q),j=yp(M,E,j,X,ue,Q),X=Ym(),M!==null&&!Ls?(E.updateQueue=M.updateQueue,E.flags&=-2053,M.lanes&=~Q,K(M,E,Q)):(Ci&&X&&mi(E),E.flags|=1,ns(M,E,j,Q),E.child)}function wp(M,E,j,X,Q){if(fi(j)){var ue=!0;so(E)}else ue=!1;if($d(E,Q),E.stateNode===null)M!==null&&(M.alternate=null,E.alternate=null,E.flags|=2),lv(E,j,X),Cl(E,j,X,Q),X=!0;else if(M===null){var He=E.stateNode,mt=E.memoizedProps;He.props=mt;var Ut=He.context,fn=j.contextType;typeof fn=="object"&&fn!==null?fn=ga(fn):(fn=fi(j)?si:fr.current,fn=As(E,fn));var Vn=j.getDerivedStateFromProps,Sr=typeof Vn=="function"||typeof He.getSnapshotBeforeUpdate=="function";Sr||typeof He.UNSAFE_componentWillReceiveProps!="function"&&typeof He.componentWillReceiveProps!="function"||(mt!==X||Ut!==fn)&&dp(E,He,X,fn),qs=!1;var cr=E.memoizedState;He.state=cr,Hm(E,X,He,Q),Ut=E.memoizedState,mt!==X||cr!==Ut||_i.current||qs?(typeof Vn=="function"&&(Wm(E,j,Vn,X),Ut=E.memoizedState),(mt=qs||Gm(E,j,mt,X,cr,Ut,fn))?(Sr||typeof He.UNSAFE_componentWillMount!="function"&&typeof He.componentWillMount!="function"||(typeof He.componentWillMount=="function"&&He.componentWillMount(),typeof He.UNSAFE_componentWillMount=="function"&&He.UNSAFE_componentWillMount()),typeof He.componentDidMount=="function"&&(E.flags|=4194308)):(typeof He.componentDidMount=="function"&&(E.flags|=4194308),E.memoizedProps=X,E.memoizedState=Ut),He.props=X,He.state=Ut,He.context=fn,X=mt):(typeof He.componentDidMount=="function"&&(E.flags|=4194308),X=!1)}else{He=E.stateNode,b_(M,E),mt=E.memoizedProps,fn=E.type===E.elementType?mt:Gs(E.type,mt),He.props=fn,Sr=E.pendingProps,cr=He.context,Ut=j.contextType,typeof Ut=="object"&&Ut!==null?Ut=ga(Ut):(Ut=fi(j)?si:fr.current,Ut=As(E,Ut));var ri=j.getDerivedStateFromProps;(Vn=typeof ri=="function"||typeof He.getSnapshotBeforeUpdate=="function")||typeof He.UNSAFE_componentWillReceiveProps!="function"&&typeof He.componentWillReceiveProps!="function"||(mt!==Sr||cr!==Ut)&&dp(E,He,X,Ut),qs=!1,cr=E.memoizedState,He.state=cr,Hm(E,X,He,Q);var Kn=E.memoizedState;mt!==Sr||cr!==Kn||_i.current||qs?(typeof ri=="function"&&(Wm(E,j,ri,X),Kn=E.memoizedState),(fn=qs||Gm(E,j,fn,X,cr,Kn,Ut)||!1)?(Vn||typeof He.UNSAFE_componentWillUpdate!="function"&&typeof He.componentWillUpdate!="function"||(typeof He.componentWillUpdate=="function"&&He.componentWillUpdate(X,Kn,Ut),typeof He.UNSAFE_componentWillUpdate=="function"&&He.UNSAFE_componentWillUpdate(X,Kn,Ut)),typeof He.componentDidUpdate=="function"&&(E.flags|=4),typeof He.getSnapshotBeforeUpdate=="function"&&(E.flags|=1024)):(typeof He.componentDidUpdate!="function"||mt===M.memoizedProps&&cr===M.memoizedState||(E.flags|=4),typeof He.getSnapshotBeforeUpdate!="function"||mt===M.memoizedProps&&cr===M.memoizedState||(E.flags|=1024),E.memoizedProps=X,E.memoizedState=Kn),He.props=X,He.state=Kn,He.context=Ut,X=fn):(typeof He.componentDidUpdate!="function"||mt===M.memoizedProps&&cr===M.memoizedState||(E.flags|=4),typeof He.getSnapshotBeforeUpdate!="function"||mt===M.memoizedProps&&cr===M.memoizedState||(E.flags|=1024),X=!1)}return Wu(M,E,j,X,ue,Q)}function Wu(M,E,j,X,Q,ue){ai(M,E);var He=(E.flags&128)!==0;if(!X&&!He)return Q&&ma(E,j,!1),K(M,E,ue);X=E.stateNode,Bc.current=E;var mt=He&&typeof j.getDerivedStateFromError!="function"?null:X.render();return E.flags|=1,M!==null&&He?(E.child=Al(E,M.child,null,ue),E.child=Al(E,null,mt,ue)):ns(M,E,mt,ue),E.memoizedState=X.state,Q&&ma(E,j,!0),E.child}function gv(M){var E=M.stateNode;E.pendingContext?Qo(M,E.pendingContext,E.pendingContext!==E.context):E.context&&Qo(M,E.context,!1),mp(M,E.containerInfo)}function yv(M,E,j,X,Q){return Wa(),Jh(Q),E.flags|=256,ns(M,E,j,X),E.child}var Sp={dehydrated:null,treeContext:null,retryLane:0};function xa(M){return{baseLanes:M,cachePool:null}}function L(M,E,j){var X=E.pendingProps,Q=Ai.current,ue=!1,He=(E.flags&128)!==0,mt;if((mt=He)||(mt=M!==null&&M.memoizedState===null?!1:(Q&2)!==0),mt?(ue=!0,E.flags&=-129):(M===null||M.memoizedState!==null)&&(Q|=1),On(Ai,Q&1),M===null)return fp(E),M=E.memoizedState,M!==null&&(M=M.dehydrated,M!==null)?(E.mode&1?Ct(M)?E.lanes=8:E.lanes=1073741824:E.lanes=1,null):(Q=X.children,M=X.fallback,ue?(X=E.mode,ue=E.child,Q={mode:"hidden",children:Q},!(X&1)&&ue!==null?(ue.childLanes=0,ue.pendingProps=Q):ue=yg(Q,X,0,null),M=dc(M,X,j,null),ue.return=E,M.return=E,ue.sibling=M,E.child=ue,E.child.memoizedState=xa(j),E.memoizedState=Sp,M):c(E,Q));if(Q=M.memoizedState,Q!==null){if(mt=Q.dehydrated,mt!==null){if(He)return E.flags&256?(E.flags&=-257,I(M,E,j,Error(s(422)))):E.memoizedState!==null?(E.child=M.child,E.flags|=128,null):(ue=X.fallback,Q=E.mode,X=yg({mode:"visible",children:X.children},Q,0,null),ue=dc(ue,Q,j,null),ue.flags|=2,X.return=E,ue.return=E,X.sibling=ue,E.child=X,E.mode&1&&Al(E,M.child,null,j),E.child.memoizedState=xa(j),E.memoizedState=Sp,ue);if(!(E.mode&1))E=I(M,E,j,null);else if(Ct(mt))E=I(M,E,j,Error(s(419)));else if(X=(j&M.childLanes)!==0,Ls||X){if(X=li,X!==null){switch(j&-j){case 4:ue=2;break;case 16:ue=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ue=32;break;case 536870912:ue=268435456;break;default:ue=0}X=ue&(X.suspendedLanes|j)?0:ue,X!==0&&X!==Q.retryLane&&(Q.retryLane=X,Dl(M,X,-1))}P_(),E=I(M,E,j,Error(s(421)))}else Dt(mt)?(E.flags|=128,E.child=M.child,E=bT.bind(null,M),ln(mt,E),E=null):(j=Q.treeContext,et&&(es=Cr(mt),Rs=E,Ci=!0,ya=null,Nu=!1,j!==null&&(Xs[Uo++]=Oc,Xs[Uo++]=gr,Xs[Uo++]=pi,Oc=j.id,gr=j.overflow,pi=E)),E=c(E,E.pendingProps.children),E.flags|=4096);return E}return ue?(X=T(M,E,X.children,X.fallback,j),ue=E.child,Q=M.child.memoizedState,ue.memoizedState=Q===null?xa(j):{baseLanes:Q.baseLanes|j,cachePool:null},ue.childLanes=M.childLanes&~j,E.memoizedState=Sp,X):(j=y(M,E,X.children,j),E.memoizedState=null,j)}return ue?(X=T(M,E,X.children,X.fallback,j),ue=E.child,Q=M.child.memoizedState,ue.memoizedState=Q===null?xa(j):{baseLanes:Q.baseLanes|j,cachePool:null},ue.childLanes=M.childLanes&~j,E.memoizedState=Sp,X):(j=y(M,E,X.children,j),E.memoizedState=null,j)}function c(M,E){return E=yg({mode:"visible",children:E},M.mode,0,null),E.return=M,M.child=E}function y(M,E,j,X){var Q=M.child;return M=Q.sibling,j=pf(Q,{mode:"visible",children:j}),!(E.mode&1)&&(j.lanes=X),j.return=E,j.sibling=null,M!==null&&(X=E.deletions,X===null?(E.deletions=[M],E.flags|=16):X.push(M)),E.child=j}function T(M,E,j,X,Q){var ue=E.mode;M=M.child;var He=M.sibling,mt={mode:"hidden",children:j};return!(ue&1)&&E.child!==M?(j=E.child,j.childLanes=0,j.pendingProps=mt,E.deletions=null):(j=pf(M,mt),j.subtreeFlags=M.subtreeFlags&14680064),He!==null?X=pf(He,X):(X=dc(X,ue,Q,null),X.flags|=2),X.return=E,j.return=E,j.sibling=X,E.child=j,X}function I(M,E,j,X){return X!==null&&Jh(X),Al(E,M.child,null,j),M=c(E,E.pendingProps.children),M.flags|=2,E.memoizedState=null,M}function D(M,E,j){M.lanes|=E;var X=M.alternate;X!==null&&(X.lanes|=E),$m(M.return,E,j)}function U(M,E,j,X,Q){var ue=M.memoizedState;ue===null?M.memoizedState={isBackwards:E,rendering:null,renderingStartTime:0,last:X,tail:j,tailMode:Q}:(ue.isBackwards=E,ue.rendering=null,ue.renderingStartTime=0,ue.last=X,ue.tail=j,ue.tailMode=Q)}function q(M,E,j){var X=E.pendingProps,Q=X.revealOrder,ue=X.tail;if(ns(M,E,X.children,j),X=Ai.current,X&2)X=X&1|2,E.flags|=128;else{if(M!==null&&M.flags&128)e:for(M=E.child;M!==null;){if(M.tag===13)M.memoizedState!==null&&D(M,j,E);else if(M.tag===19)D(M,j,E);else if(M.child!==null){M.child.return=M,M=M.child;continue}if(M===E)break e;for(;M.sibling===null;){if(M.return===null||M.return===E)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}X&=1}if(On(Ai,X),!(E.mode&1))E.memoizedState=null;else switch(Q){case"forwards":for(j=E.child,Q=null;j!==null;)M=j.alternate,M!==null&&gp(M)===null&&(Q=j),j=j.sibling;j=Q,j===null?(Q=E.child,E.child=null):(Q=j.sibling,j.sibling=null),U(E,!1,Q,j,ue);break;case"backwards":for(j=null,Q=E.child,E.child=null;Q!==null;){if(M=Q.alternate,M!==null&&gp(M)===null){E.child=Q;break}M=Q.sibling,Q.sibling=j,j=Q,Q=M}U(E,!0,j,null,ue);break;case"together":U(E,!1,null,null,void 0);break;default:E.memoizedState=null}return E.child}function K(M,E,j){if(M!==null&&(E.dependencies=M.dependencies),uc|=E.lanes,!(j&E.childLanes))return null;if(M!==null&&E.child!==M.child)throw Error(s(153));if(E.child!==null){for(M=E.child,j=pf(M,M.pendingProps),E.child=j,j.return=E;M.sibling!==null;)M=M.sibling,j=j.sibling=pf(M,M.pendingProps),j.return=E;j.sibling=null}return E.child}function te(M,E,j){switch(E.tag){case 3:gv(E),Wa();break;case 5:Xm(E);break;case 1:fi(E.type)&&so(E);break;case 4:mp(E,E.stateNode.containerInfo);break;case 10:sv(E,E.type._context,E.memoizedProps.value);break;case 13:var X=E.memoizedState;if(X!==null)return X.dehydrated!==null?(On(Ai,Ai.current&1),E.flags|=128,null):j&E.child.childLanes?L(M,E,j):(On(Ai,Ai.current&1),M=K(M,E,j),M!==null?M.sibling:null);On(Ai,Ai.current&1);break;case 19:if(X=(j&E.childLanes)!==0,M.flags&128){if(X)return q(M,E,j);E.flags|=128}var Q=E.memoizedState;if(Q!==null&&(Q.rendering=null,Q.tail=null,Q.lastEffect=null),On(Ai,Ai.current),X)break;return null;case 22:case 23:return E.lanes=0,Ol(M,E,j)}return K(M,E,j)}function ce(M,E){switch(Zh(E),E.tag){case 1:return fi(E.type)&&Bi(),M=E.flags,M&65536?(E.flags=M&-65537|128,E):null;case 3:return oc(),sr(_i),sr(fr),Wd(),M=E.flags,M&65536&&!(M&128)?(E.flags=M&-65537|128,E):null;case 5:return Qh(E),null;case 13:if(sr(Ai),M=E.memoizedState,M!==null&&M.dehydrated!==null){if(E.alternate===null)throw Error(s(340));Wa()}return M=E.flags,M&65536?(E.flags=M&-65537|128,E):null;case 19:return sr(Ai),null;case 4:return oc(),null;case 10:return lp(E.type._context),null;case 22:case 23:return Tw(),null;case 24:return null;default:return null}}var ae=!1,xe=!1,Pe=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function $e(M,E){var j=M.ref;if(j!==null)if(typeof j=="function")try{j(null)}catch(X){Za(M,E,X)}else j.current=null}function ze(M,E,j){try{j()}catch(X){Za(M,E,X)}}var Ge=!1;function nt(M,E){for(ye(M.containerInfo),Ee=E;Ee!==null;)if(M=Ee,E=M.child,(M.subtreeFlags&1028)!==0&&E!==null)E.return=M,Ee=E;else for(;Ee!==null;){M=Ee;try{var j=M.alternate;if(M.flags&1024)switch(M.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var X=j.memoizedProps,Q=j.memoizedState,ue=M.stateNode,He=ue.getSnapshotBeforeUpdate(M.elementType===M.type?X:Gs(M.type,X),Q);ue.__reactInternalSnapshotBeforeUpdate=He}break;case 3:Qe&&Yt(M.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(mt){Za(M,M.return,mt)}if(E=M.sibling,E!==null){E.return=M.return,Ee=E;break}Ee=M.return}return j=Ge,Ge=!1,j}function Fe(M,E,j){var X=E.updateQueue;if(X=X!==null?X.lastEffect:null,X!==null){var Q=X=X.next;do{if((Q.tag&M)===M){var ue=Q.destroy;Q.destroy=void 0,ue!==void 0&&ze(E,j,ue)}Q=Q.next}while(Q!==X)}}function ct(M,E){if(E=E.updateQueue,E=E!==null?E.lastEffect:null,E!==null){var j=E=E.next;do{if((j.tag&M)===M){var X=j.create;j.destroy=X()}j=j.next}while(j!==E)}}function yt(M){var E=M.ref;if(E!==null){var j=M.stateNode;switch(M.tag){case 5:M=he(j);break;default:M=j}typeof E=="function"?E(M):E.current=M}}function Pt(M,E,j){if(Ml&&typeof Ml.onCommitFiberUnmount=="function")try{Ml.onCommitFiberUnmount(sp,E)}catch{}switch(E.tag){case 0:case 11:case 14:case 15:if(M=E.updateQueue,M!==null&&(M=M.lastEffect,M!==null)){var X=M=M.next;do{var Q=X,ue=Q.destroy;Q=Q.tag,ue!==void 0&&(Q&2||Q&4)&&ze(E,j,ue),X=X.next}while(X!==M)}break;case 1:if($e(E,j),M=E.stateNode,typeof M.componentWillUnmount=="function")try{M.props=E.memoizedProps,M.state=E.memoizedState,M.componentWillUnmount()}catch(He){Za(E,j,He)}break;case 5:$e(E,j);break;case 4:Qe?ar(M,E,j):ge&&ge&&(E=E.stateNode.containerInfo,j=ie(E),De(E,j))}}function Gt(M,E,j){for(var X=E;;)if(Pt(M,X,j),X.child===null||Qe&&X.tag===4){if(X===E)break;for(;X.sibling===null;){if(X.return===null||X.return===E)return;X=X.return}X.sibling.return=X.return,X=X.sibling}else X.child.return=X,X=X.child}function on(M){var E=M.alternate;E!==null&&(M.alternate=null,on(E)),M.child=null,M.deletions=null,M.sibling=null,M.tag===5&&(E=M.stateNode,E!==null&&Vt(E)),M.stateNode=null,M.return=null,M.dependencies=null,M.memoizedProps=null,M.memoizedState=null,M.pendingProps=null,M.stateNode=null,M.updateQueue=null}function vn(M){return M.tag===5||M.tag===3||M.tag===4}function _n(M){e:for(;;){for(;M.sibling===null;){if(M.return===null||vn(M.return))return null;M=M.return}for(M.sibling.return=M.return,M=M.sibling;M.tag!==5&&M.tag!==6&&M.tag!==18;){if(M.flags&2||M.child===null||M.tag===4)continue e;M.child.return=M,M=M.child}if(!(M.flags&2))return M.stateNode}}function sn(M){if(Qe){e:{for(var E=M.return;E!==null;){if(vn(E))break e;E=E.return}throw Error(s(160))}var j=E;switch(j.tag){case 5:E=j.stateNode,j.flags&32&&(pt(E),j.flags&=-33),j=_n(M),Cn(M,j,E);break;case 3:case 4:E=j.stateNode.containerInfo,j=_n(M),cn(M,j,E);break;default:throw Error(s(161))}}}function cn(M,E,j){var X=M.tag;if(X===5||X===6)M=M.stateNode,E?qt(j,M,E):Rt(j,M);else if(X!==4&&(M=M.child,M!==null))for(cn(M,E,j),M=M.sibling;M!==null;)cn(M,E,j),M=M.sibling}function Cn(M,E,j){var X=M.tag;if(X===5||X===6)M=M.stateNode,E?Et(j,M,E):ft(j,M);else if(X!==4&&(M=M.child,M!==null))for(Cn(M,E,j),M=M.sibling;M!==null;)Cn(M,E,j),M=M.sibling}function ar(M,E,j){for(var X=E,Q=!1,ue,He;;){if(!Q){Q=X.return;e:for(;;){if(Q===null)throw Error(s(160));switch(ue=Q.stateNode,Q.tag){case 5:He=!1;break e;case 3:ue=ue.containerInfo,He=!0;break e;case 4:ue=ue.containerInfo,He=!0;break e}Q=Q.return}Q=!0}if(X.tag===5||X.tag===6)Gt(M,X,j),He?Ne(ue,X.stateNode):ht(ue,X.stateNode);else if(X.tag===18)He?vt(ue,X.stateNode):ut(ue,X.stateNode);else if(X.tag===4){if(X.child!==null){ue=X.stateNode.containerInfo,He=!0,X.child.return=X,X=X.child;continue}}else if(Pt(M,X,j),X.child!==null){X.child.return=X,X=X.child;continue}if(X===E)break;for(;X.sibling===null;){if(X.return===null||X.return===E)return;X=X.return,X.tag===4&&(Q=!1)}X.sibling.return=X.return,X=X.sibling}}function un(M,E){if(Qe){switch(E.tag){case 0:case 11:case 14:case 15:Fe(3,E,E.return),ct(3,E),Fe(5,E,E.return);return;case 1:return;case 5:var j=E.stateNode;if(j!=null){var X=E.memoizedProps;M=M!==null?M.memoizedProps:X;var Q=E.type,ue=E.updateQueue;E.updateQueue=null,ue!==null&&en(j,ue,Q,M,X,E)}return;case 6:if(E.stateNode===null)throw Error(s(162));j=E.memoizedProps,Xt(E.stateNode,M!==null?M.memoizedProps:j,j);return;case 3:et&&M!==null&&M.memoizedState.isDehydrated&&st(E.stateNode.containerInfo);return;case 12:return;case 13:pn(E);return;case 19:pn(E);return;case 17:return}throw Error(s(163))}switch(E.tag){case 0:case 11:case 14:case 15:Fe(3,E,E.return),ct(3,E),Fe(5,E,E.return);return;case 12:return;case 13:pn(E);return;case 19:pn(E);return;case 3:et&&M!==null&&M.memoizedState.isDehydrated&&st(E.stateNode.containerInfo);break;case 22:case 23:return}e:if(ge){switch(E.tag){case 1:case 5:case 6:break e;case 3:case 4:E=E.stateNode,De(E.containerInfo,E.pendingChildren);break e}throw Error(s(163))}}function pn(M){var E=M.updateQueue;if(E!==null){M.updateQueue=null;var j=M.stateNode;j===null&&(j=M.stateNode=new Pe),E.forEach(function(X){var Q=mg.bind(null,M,X);j.has(X)||(j.add(X),X.then(Q,Q))})}}function or(M,E){for(Ee=E;Ee!==null;){E=Ee;var j=E.deletions;if(j!==null)for(var X=0;X<j.length;X++){var Q=j[X];try{var ue=M;Qe?ar(ue,Q,E):Gt(ue,Q,E);var He=Q.alternate;He!==null&&(He.return=null),Q.return=null}catch(Qn){Za(Q,E,Qn)}}if(j=E.child,E.subtreeFlags&12854&&j!==null)j.return=E,Ee=j;else for(;Ee!==null;){E=Ee;try{var mt=E.flags;if(mt&32&&Qe&&pt(E.stateNode),mt&512){var Ut=E.alternate;if(Ut!==null){var fn=Ut.ref;fn!==null&&(typeof fn=="function"?fn(null):fn.current=null)}}if(mt&8192)switch(E.tag){case 13:if(E.memoizedState!==null){var Vn=E.alternate;(Vn===null||Vn.memoizedState===null)&&(Zd=Ro())}break;case 22:var Sr=E.memoizedState!==null,cr=E.alternate,ri=cr!==null&&cr.memoizedState!==null;if(j=E,Qe){e:if(X=j,Q=Sr,ue=null,Qe)for(var Kn=X;;){if(Kn.tag===5){if(ue===null){ue=Kn;var ta=Kn.stateNode;Q?Te(ta):tn(Kn.stateNode,Kn.memoizedProps)}}else if(Kn.tag===6){if(ue===null){var hc=Kn.stateNode;Q?xt(hc):Xe(hc,Kn.memoizedProps)}}else if((Kn.tag!==22&&Kn.tag!==23||Kn.memoizedState===null||Kn===X)&&Kn.child!==null){Kn.child.return=Kn,Kn=Kn.child;continue}if(Kn===X)break;for(;Kn.sibling===null;){if(Kn.return===null||Kn.return===X)break e;ue===Kn&&(ue=null),Kn=Kn.return}ue===Kn&&(ue=null),Kn.sibling.return=Kn.return,Kn=Kn.sibling}}if(Sr&&!ri&&j.mode&1){Ee=j;for(var kt=j.child;kt!==null;){for(j=Ee=kt;Ee!==null;){X=Ee;var _t=X.child;switch(X.tag){case 0:case 11:case 14:case 15:Fe(4,X,X.return);break;case 1:$e(X,X.return);var Nt=X.stateNode;if(typeof Nt.componentWillUnmount=="function"){var Dn=X.return;try{Nt.props=X.memoizedProps,Nt.state=X.memoizedState,Nt.componentWillUnmount()}catch(Qn){Za(X,Dn,Qn)}}break;case 5:$e(X,X.return);break;case 22:if(X.memoizedState!==null){Ii(j);continue}}_t!==null?(_t.return=X,Ee=_t):Ii(j)}kt=kt.sibling}}}switch(mt&4102){case 2:sn(E),E.flags&=-3;break;case 6:sn(E),E.flags&=-3,un(E.alternate,E);break;case 4096:E.flags&=-4097;break;case 4100:E.flags&=-4097,un(E.alternate,E);break;case 4:un(E.alternate,E)}}catch(Qn){Za(E,E.return,Qn)}if(j=E.sibling,j!==null){j.return=E.return,Ee=j;break}Ee=E.return}}}function Pi(M,E,j){Ee=M,yr(M)}function yr(M,E,j){for(var X=(M.mode&1)!==0;Ee!==null;){var Q=Ee,ue=Q.child;if(Q.tag===22&&X){var He=Q.memoizedState!==null||ae;if(!He){var mt=Q.alternate,Ut=mt!==null&&mt.memoizedState!==null||xe;mt=ae;var fn=xe;if(ae=He,(xe=Ut)&&!fn)for(Ee=Q;Ee!==null;)He=Ee,Ut=He.child,He.tag===22&&He.memoizedState!==null?rs(Q):Ut!==null?(Ut.return=He,Ee=Ut):rs(Q);for(;ue!==null;)Ee=ue,yr(ue),ue=ue.sibling;Ee=Q,ae=mt,xe=fn}Er(M)}else Q.subtreeFlags&8772&&ue!==null?(ue.return=Q,Ee=ue):Er(M)}}function Er(M){for(;Ee!==null;){var E=Ee;if(E.flags&8772){var j=E.alternate;try{if(E.flags&8772)switch(E.tag){case 0:case 11:case 15:xe||ct(5,E);break;case 1:var X=E.stateNode;if(E.flags&4&&!xe)if(j===null)X.componentDidMount();else{var Q=E.elementType===E.type?j.memoizedProps:Gs(E.type,j.memoizedProps);X.componentDidUpdate(Q,j.memoizedState,X.__reactInternalSnapshotBeforeUpdate)}var ue=E.updateQueue;ue!==null&&w_(E,ue,X);break;case 3:var He=E.updateQueue;if(He!==null){if(j=null,E.child!==null)switch(E.child.tag){case 5:j=he(E.child.stateNode);break;case 1:j=E.child.stateNode}w_(E,He,j)}break;case 5:var mt=E.stateNode;j===null&&E.flags&4&&Tn(mt,E.type,E.memoizedProps,E);break;case 6:break;case 4:break;case 12:break;case 13:if(et&&E.memoizedState===null){var Ut=E.alternate;if(Ut!==null){var fn=Ut.memoizedState;if(fn!==null){var Vn=fn.dehydrated;Vn!==null&&Mt(Vn)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(s(163))}xe||E.flags&512&&yt(E)}catch(Sr){Za(E,E.return,Sr)}}if(E===M){Ee=null;break}if(j=E.sibling,j!==null){j.return=E.return,Ee=j;break}Ee=E.return}}function Ii(M){for(;Ee!==null;){var E=Ee;if(E===M){Ee=null;break}var j=E.sibling;if(j!==null){j.return=E.return,Ee=j;break}Ee=E.return}}function rs(M){for(;Ee!==null;){var E=Ee;try{switch(E.tag){case 0:case 11:case 15:var j=E.return;try{ct(4,E)}catch(Ut){Za(E,j,Ut)}break;case 1:var X=E.stateNode;if(typeof X.componentDidMount=="function"){var Q=E.return;try{X.componentDidMount()}catch(Ut){Za(E,Q,Ut)}}var ue=E.return;try{yt(E)}catch(Ut){Za(E,ue,Ut)}break;case 5:var He=E.return;try{yt(E)}catch(Ut){Za(E,He,Ut)}}}catch(Ut){Za(E,E.return,Ut)}if(E===M){Ee=null;break}var mt=E.sibling;if(mt!==null){mt.return=E.return,Ee=mt;break}Ee=E.return}}var Js=0,gi=1,is=2,Vo=3,Oo=4;if(typeof Symbol=="function"&&Symbol.for){var wo=Symbol.for;Js=wo("selector.component"),gi=wo("selector.has_pseudo_class"),is=wo("selector.role"),Vo=wo("selector.test_id"),Oo=wo("selector.text")}function ba(M){var E=Ke(M);if(E!=null){if(typeof E.memoizedProps["data-testname"]!="string")throw Error(s(364));return E}if(M=Ie(M),M===null)throw Error(s(362));return M.stateNode.current}function jc(M,E){switch(E.$$typeof){case Js:if(M.type===E.value)return!0;break;case gi:e:{E=E.value,M=[M,0];for(var j=0;j<M.length;){var X=M[j++],Q=M[j++],ue=E[Q];if(X.tag!==5||!St(X)){for(;ue!=null&&jc(X,ue);)Q++,ue=E[Q];if(Q===E.length){E=!0;break e}else for(X=X.child;X!==null;)M.push(X,Q),X=X.sibling}}E=!1}return E;case is:if(M.tag===5&&Bt(M.stateNode,E.value))return!0;break;case Oo:if((M.tag===5||M.tag===6)&&(M=wt(M),M!==null&&0<=M.indexOf(E.value)))return!0;break;case Vo:if(M.tag===5&&(M=M.memoizedProps["data-testname"],typeof M=="string"&&M.toLowerCase()===E.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Kd(M){switch(M.$$typeof){case Js:return"<"+(B(M.value)||"Unknown")+">";case gi:return":has("+(Kd(M)||"")+")";case is:return'[role="'+M.value+'"]';case Oo:return'"'+M.value+'"';case Vo:return'[data-testname="'+M.value+'"]';default:throw Error(s(365))}}function Gu(M,E){var j=[];M=[M,0];for(var X=0;X<M.length;){var Q=M[X++],ue=M[X++],He=E[ue];if(Q.tag!==5||!St(Q)){for(;He!=null&&jc(Q,He);)ue++,He=E[ue];if(ue===E.length)j.push(Q);else for(Q=Q.child;Q!==null;)M.push(Q,ue),Q=Q.sibling}}return j}function cc(M,E){if(!Qt)throw Error(s(363));M=ba(M),M=Gu(M,E),E=[],M=Array.from(M);for(var j=0;j<M.length;){var X=M[j++];if(X.tag===5)St(X)||E.push(X.stateNode);else for(X=X.child;X!==null;)M.push(X),X=X.sibling}return E}var dg=Math.ceil,cf=a.ReactCurrentDispatcher,Qs=a.ReactCurrentOwner,ni=a.ReactCurrentBatchConfig,vr=0,li=null,Vr=null,Kr=0,ji=0,xi=Gr(0),qi=0,Ka=null,uc=0,hg=0,vv=0,co=null,uo=null,Zd=0,Jd=1/0;function qu(){Jd=Ro()+500}var uf=!1,Mp=null,Ll=null,T_=!1,Xu=null,Ep=0,fg=0,_v=null,Tp=-1,Yu=0;function gs(){return vr&6?Ro():Tp!==-1?Tp:Tp=Ro()}function Qd(M){return M.mode&1?vr&2&&Kr!==0?Kr&-Kr:Br.transition!==null?(Yu===0&&(M=Fd,Fd<<=1,!(Fd&4194240)&&(Fd=64),Yu=M),Yu):(M=Fr,M!==0?M:ke()):1}function Dl(M,E,j){if(50<fg)throw fg=0,_v=null,Error(s(185));var X=C_(M,E);return X===null?null:(Gh(X,E,j),(!(vr&2)||X!==li)&&(X===li&&(!(vr&2)&&(hg|=E),qi===4&&wa(X,Kr)),ea(X,j),E===1&&vr===0&&!(M.mode&1)&&(qu(),Xh&&Is())),X)}function C_(M,E){M.lanes|=E;var j=M.alternate;for(j!==null&&(j.lanes|=E),j=M,M=M.return;M!==null;)M.childLanes|=E,j=M.alternate,j!==null&&(j.childLanes|=E),j=M,M=M.return;return j.tag===3?j.stateNode:null}function ea(M,E){var j=M.callbackNode;Wh(M,E);var X=jd(M,M===li?Kr:0);if(X===0)j!==null&&qh(j),M.callbackNode=null,M.callbackPriority=0;else if(E=X&-X,M.callbackPriority!==E){if(j!=null&&qh(j),E===1)M.tag===0?iv(Ew.bind(null,M)):El(Ew.bind(null,M)),zt?$t(function(){vr===0&&Is()}):Ps(Rc,Is),j=null;else{switch(Ws(X)){case 1:j=Rc;break;case 4:j=x_;break;case 16:j=rv;break;case 536870912:j=bw;break;default:j=rv}j=gg(j,pg.bind(null,M))}M.callbackPriority=E,M.callbackNode=j}}function pg(M,E){if(Tp=-1,Yu=0,vr&6)throw Error(s(327));var j=M.callbackNode;if(Pp()&&M.callbackNode!==j)return null;var X=jd(M,M===li?Kr:0);if(X===0)return null;if(X&30||X&M.expiredLanes||E)E=Ku(M,X);else{E=X;var Q=vr;vr|=2;var ue=A_();(li!==M||Kr!==E)&&(qu(),ff(M,E));do try{I_();break}catch(mt){ho(M,mt)}while(!0);ov(),cf.current=ue,vr=Q,Vr!==null?E=0:(li=null,Kr=0,E=qi)}if(E!==0){if(E===2&&(Q=tv(M),Q!==0&&(X=Q,E=df(M,Q))),E===1)throw j=Ka,ff(M,0),wa(M,X),ea(M,Ro()),j;if(E===6)wa(M,X);else{if(Q=M.current.alternate,!(X&30)&&!Uc(Q)&&(E=Ku(M,X),E===2&&(ue=tv(M),ue!==0&&(X=ue,E=df(M,ue))),E===1))throw j=Ka,ff(M,0),wa(M,X),ea(M,Ro()),j;switch(M.finishedWork=Q,M.finishedLanes=X,E){case 0:case 1:throw Error(s(345));case 2:Ap(M,uo);break;case 3:if(wa(M,X),(X&130023424)===X&&(E=Zd+500-Ro(),10<E)){if(jd(M,0)!==0)break;if(Q=M.suspendedLanes,(Q&X)!==X){gs(),M.pingedLanes|=M.suspendedLanes&Q;break}M.timeoutHandle=It(Ap.bind(null,M,uo),E);break}Ap(M,uo);break;case 4:if(wa(M,X),(X&4194240)===X)break;for(E=M.eventTimes,Q=-1;0<X;){var He=31-_r(X);ue=1<<He,He=E[He],He>Q&&(Q=He),X&=~ue}if(X=Q,X=Ro()-X,X=(120>X?120:480>X?480:1080>X?1080:1920>X?1920:3e3>X?3e3:4320>X?4320:1960*dg(X/1960))-X,10<X){M.timeoutHandle=It(Ap.bind(null,M,uo),X);break}Ap(M,uo);break;case 5:Ap(M,uo);break;default:throw Error(s(329))}}}return ea(M,Ro()),M.callbackNode===j?pg.bind(null,M):null}function df(M,E){var j=co;return M.current.memoizedState.isDehydrated&&(ff(M,E).flags|=256),M=Ku(M,E),M!==2&&(E=uo,uo=j,E!==null&&$c(E)),M}function $c(M){uo===null?uo=M:uo.push.apply(uo,M)}function Uc(M){for(var E=M;;){if(E.flags&16384){var j=E.updateQueue;if(j!==null&&(j=j.stores,j!==null))for(var X=0;X<j.length;X++){var Q=j[X],ue=Q.getSnapshot;Q=Q.value;try{if(!Ua(ue(),Q))return!1}catch{return!1}}}if(j=E.child,E.subtreeFlags&16384&&j!==null)j.return=E,E=j;else{if(E===M)break;for(;E.sibling===null;){if(E.return===null||E.return===M)return!0;E=E.return}E.sibling.return=E.return,E=E.sibling}}return!0}function wa(M,E){for(E&=~vv,E&=~hg,M.suspendedLanes|=E,M.pingedLanes&=~E,M=M.expirationTimes;0<E;){var j=31-_r(E),X=1<<j;M[j]=-1,E&=~X}}function Ew(M){if(vr&6)throw Error(s(327));Pp();var E=jd(M,0);if(!(E&1))return ea(M,Ro()),null;var j=Ku(M,E);if(M.tag!==0&&j===2){var X=tv(M);X!==0&&(E=X,j=df(M,X))}if(j===1)throw j=Ka,ff(M,0),wa(M,E),ea(M,Ro()),j;if(j===6)throw Error(s(345));return M.finishedWork=M.current.alternate,M.finishedLanes=E,Ap(M,uo),ea(M,Ro()),null}function hf(M){Xu!==null&&Xu.tag===0&&!(vr&6)&&Pp();var E=vr;vr|=1;var j=ni.transition,X=Fr;try{if(ni.transition=null,Fr=1,M)return M()}finally{Fr=X,ni.transition=j,vr=E,!(vr&6)&&Is()}}function Tw(){ji=xi.current,sr(xi)}function ff(M,E){M.finishedWork=null,M.finishedLanes=0;var j=M.timeoutHandle;if(j!==lt&&(M.timeoutHandle=lt,Lt(j)),Vr!==null)for(j=Vr.return;j!==null;){var X=j;switch(Zh(X),X.tag){case 1:X=X.type.childContextTypes,X!=null&&Bi();break;case 3:oc(),sr(_i),sr(fr),Wd();break;case 5:Qh(X);break;case 4:oc();break;case 13:sr(Ai);break;case 19:sr(Ai);break;case 10:lp(X.type._context);break;case 22:case 23:Tw()}j=j.return}if(li=M,Vr=M=pf(M.current,null),Kr=ji=E,qi=0,Ka=null,vv=hg=uc=0,uo=co=null,Tl!==null){for(E=0;E<Tl.length;E++)if(j=Tl[E],X=j.interleaved,X!==null){j.interleaved=null;var Q=X.next,ue=j.pending;if(ue!==null){var He=ue.next;ue.next=Q,X.next=He}j.pending=X}Tl=null}return M}function ho(M,E){do{var j=Vr;try{if(ov(),$u.current=lc,ef){for(var X=Qi.memoizedState;X!==null;){var Q=X.queue;Q!==null&&(Q.pending=null),X=X.next}ef=!1}if(Uu=0,ao=ko=Qi=null,Vu=!1,sc=0,Qs.current=null,j===null||j.return===null){qi=1,Ka=E,Vr=null;break}e:{var ue=M,He=j.return,mt=j,Ut=E;if(E=Kr,mt.flags|=32768,Ut!==null&&typeof Ut=="object"&&typeof Ut.then=="function"){var fn=Ut,Vn=mt,Sr=Vn.tag;if(!(Vn.mode&1)&&(Sr===0||Sr===11||Sr===15)){var cr=Vn.alternate;cr?(Vn.updateQueue=cr.updateQueue,Vn.memoizedState=cr.memoizedState,Vn.lanes=cr.lanes):(Vn.updateQueue=null,Vn.memoizedState=null)}var ri=sg(He);if(ri!==null){ri.flags&=-257,mv(ri,He,mt,ue,E),ri.mode&1&&pv(ue,fn,E),E=ri,Ut=fn;var Kn=E.updateQueue;if(Kn===null){var ta=new Set;ta.add(Ut),E.updateQueue=ta}else Kn.add(Ut);break e}else{if(!(E&1)){pv(ue,fn,E),P_();break e}Ut=Error(s(426))}}else if(Ci&&mt.mode&1){var hc=sg(He);if(hc!==null){!(hc.flags&65536)&&(hc.flags|=256),mv(hc,He,mt,ue,E),Jh(Ut);break e}}ue=Ut,qi!==4&&(qi=2),co===null?co=[ue]:co.push(ue),Ut=fv(Ut,mt),mt=He;do{switch(mt.tag){case 3:mt.flags|=65536,E&=-E,mt.lanes|=E;var kt=Rl(mt,Ut,E);cp(mt,kt);break e;case 1:ue=Ut;var _t=mt.type,Nt=mt.stateNode;if(!(mt.flags&128)&&(typeof _t.getDerivedStateFromError=="function"||Nt!==null&&typeof Nt.componentDidCatch=="function"&&(Ll===null||!Ll.has(Nt)))){mt.flags|=65536,E&=-E,mt.lanes|=E;var Dn=Mn(mt,ue,E);cp(mt,Dn);break e}}mt=mt.return}while(mt!==null)}Cw(j)}catch(Qn){E=Qn,Vr===j&&j!==null&&(Vr=j=j.return);continue}break}while(!0)}function A_(){var M=cf.current;return cf.current=lc,M===null?lc:M}function P_(){(qi===0||qi===3||qi===2)&&(qi=4),li===null||!(uc&268435455)&&!(hg&268435455)||wa(li,Kr)}function Ku(M,E){var j=vr;vr|=2;var X=A_();li===M&&Kr===E||ff(M,E);do try{Cp();break}catch(Q){ho(M,Q)}while(!0);if(ov(),vr=j,cf.current=X,Vr!==null)throw Error(s(261));return li=null,Kr=0,qi}function Cp(){for(;Vr!==null;)R_(Vr)}function I_(){for(;Vr!==null&&!zm();)R_(Vr)}function R_(M){var E=wT(M.alternate,M,ji);M.memoizedProps=M.pendingProps,E===null?Cw(M):Vr=E,Qs.current=null}function Cw(M){var E=M;do{var j=E.alternate;if(M=E.return,E.flags&32768){if(j=ce(j,E),j!==null){j.flags&=32767,Vr=j;return}if(M!==null)M.flags|=32768,M.subtreeFlags=0,M.deletions=null;else{qi=6,Vr=null;return}}else if(j=M_(j,E,ji),j!==null){Vr=j;return}if(E=E.sibling,E!==null){Vr=E;return}Vr=E=M}while(E!==null);qi===0&&(qi=5)}function Ap(M,E){var j=Fr,X=ni.transition;try{ni.transition=null,Fr=1,xT(M,E,j)}finally{ni.transition=X,Fr=j}return null}function xT(M,E,j){do Pp();while(Xu!==null);if(vr&6)throw Error(s(327));var X=M.finishedWork,Q=M.finishedLanes;if(X===null)return null;if(M.finishedWork=null,M.finishedLanes=0,X===M.current)throw Error(s(177));M.callbackNode=null,M.callbackPriority=0;var ue=X.lanes|X.childLanes;if(xw(M,ue),M===li&&(Vr=li=null,Kr=0),!(X.subtreeFlags&2064)&&!(X.flags&2064)||T_||(T_=!0,gg(rv,function(){return Pp(),null})),ue=(X.flags&15990)!==0,X.subtreeFlags&15990||ue){ue=ni.transition,ni.transition=null;var He=Fr;Fr=1;var mt=vr;vr|=4,Qs.current=null,nt(M,X),or(M,X),be(M.containerInfo),M.current=X,Pi(X),__(),vr=mt,Fr=He,ni.transition=ue}else M.current=X;if(T_&&(T_=!1,Xu=M,Ep=Q),ue=M.pendingLanes,ue===0&&(Ll=null),ww(X.stateNode),ea(M,Ro()),E!==null)for(j=M.onRecoverableError,X=0;X<E.length;X++)j(E[X]);if(uf)throw uf=!1,M=Mp,Mp=null,M;return Ep&1&&M.tag!==0&&Pp(),ue=M.pendingLanes,ue&1?M===_v?fg++:(fg=0,_v=M):fg=0,Is(),null}function Pp(){if(Xu!==null){var M=Ws(Ep),E=ni.transition,j=Fr;try{if(ni.transition=null,Fr=16>M?16:M,Xu===null)var X=!1;else{if(M=Xu,Xu=null,Ep=0,vr&6)throw Error(s(331));var Q=vr;for(vr|=4,Ee=M.current;Ee!==null;){var ue=Ee,He=ue.child;if(Ee.flags&16){var mt=ue.deletions;if(mt!==null){for(var Ut=0;Ut<mt.length;Ut++){var fn=mt[Ut];for(Ee=fn;Ee!==null;){var Vn=Ee;switch(Vn.tag){case 0:case 11:case 15:Fe(8,Vn,ue)}var Sr=Vn.child;if(Sr!==null)Sr.return=Vn,Ee=Sr;else for(;Ee!==null;){Vn=Ee;var cr=Vn.sibling,ri=Vn.return;if(on(Vn),Vn===fn){Ee=null;break}if(cr!==null){cr.return=ri,Ee=cr;break}Ee=ri}}}var Kn=ue.alternate;if(Kn!==null){var ta=Kn.child;if(ta!==null){Kn.child=null;do{var hc=ta.sibling;ta.sibling=null,ta=hc}while(ta!==null)}}Ee=ue}}if(ue.subtreeFlags&2064&&He!==null)He.return=ue,Ee=He;else e:for(;Ee!==null;){if(ue=Ee,ue.flags&2048)switch(ue.tag){case 0:case 11:case 15:Fe(9,ue,ue.return)}var kt=ue.sibling;if(kt!==null){kt.return=ue.return,Ee=kt;break e}Ee=ue.return}}var _t=M.current;for(Ee=_t;Ee!==null;){He=Ee;var Nt=He.child;if(He.subtreeFlags&2064&&Nt!==null)Nt.return=He,Ee=Nt;else e:for(He=_t;Ee!==null;){if(mt=Ee,mt.flags&2048)try{switch(mt.tag){case 0:case 11:case 15:ct(9,mt)}}catch(Qn){Za(mt,mt.return,Qn)}if(mt===He){Ee=null;break e}var Dn=mt.sibling;if(Dn!==null){Dn.return=mt.return,Ee=Dn;break e}Ee=mt.return}}if(vr=Q,Is(),Ml&&typeof Ml.onPostCommitFiberRoot=="function")try{Ml.onPostCommitFiberRoot(sp,M)}catch{}X=!0}return X}finally{Fr=j,ni.transition=E}}return!1}function k_(M,E,j){E=fv(j,E),E=Rl(M,E,1),Ha(M,E),E=gs(),M=C_(M,1),M!==null&&(Gh(M,1,E),ea(M,E))}function Za(M,E,j){if(M.tag===3)k_(M,M,j);else for(;E!==null;){if(E.tag===3){k_(E,M,j);break}else if(E.tag===1){var X=E.stateNode;if(typeof E.type.getDerivedStateFromError=="function"||typeof X.componentDidCatch=="function"&&(Ll===null||!Ll.has(X))){M=fv(j,M),M=Mn(E,M,1),Ha(E,M),M=gs(),E=C_(E,1),E!==null&&(Gh(E,1,M),ea(E,M));break}}E=E.return}}function Aw(M,E,j){var X=M.pingCache;X!==null&&X.delete(E),E=gs(),M.pingedLanes|=M.suspendedLanes&j,li===M&&(Kr&j)===j&&(qi===4||qi===3&&(Kr&130023424)===Kr&&500>Ro()-Zd?ff(M,0):vv|=j),ea(M,E)}function Pw(M,E){E===0&&(M.mode&1?(E=Bd,Bd<<=1,!(Bd&130023424)&&(Bd=4194304)):E=1);var j=gs();M=C_(M,E),M!==null&&(Gh(M,E,j),ea(M,j))}function bT(M){var E=M.memoizedState,j=0;E!==null&&(j=E.retryLane),Pw(M,j)}function mg(M,E){var j=0;switch(M.tag){case 13:var X=M.stateNode,Q=M.memoizedState;Q!==null&&(j=Q.retryLane);break;case 19:X=M.stateNode;break;default:throw Error(s(314))}X!==null&&X.delete(E),Pw(M,j)}var wT;wT=function(M,E,j){if(M!==null)if(M.memoizedProps!==E.pendingProps||_i.current)Ls=!0;else{if(!(M.lanes&j)&&!(E.flags&128))return Ls=!1,te(M,E,j);Ls=!!(M.flags&131072)}else Ls=!1,Ci&&E.flags&1048576&&zi(E,hp,E.index);switch(E.lanes=0,E.tag){case 2:var X=E.type;M!==null&&(M.alternate=null,E.alternate=null,E.flags|=2),M=E.pendingProps;var Q=As(E,fr.current);$d(E,j),Q=yp(null,E,X,M,Q,j);var ue=Ym();return E.flags|=1,typeof Q=="object"&&Q!==null&&typeof Q.render=="function"&&Q.$$typeof===void 0?(E.tag=1,E.memoizedState=null,E.updateQueue=null,fi(X)?(ue=!0,so(E)):ue=!1,E.memoizedState=Q.state!==null&&Q.state!==void 0?Q.state:null,Um(E),Q.updater=up,E.stateNode=Q,Q._reactInternals=E,Cl(E,X,M,j),E=Wu(null,E,X,!0,ue,j)):(E.tag=0,Ci&&ue&&mi(E),ns(null,E,Q,j),E=E.child),E;case 16:X=E.elementType;e:{switch(M!==null&&(M.alternate=null,E.alternate=null,E.flags|=2),M=E.pendingProps,Q=X._init,X=Q(X._payload),E.type=X,Q=E.tag=ST(X),M=Gs(X,M),Q){case 0:E=lf(null,E,X,M,j);break e;case 1:E=wp(null,E,X,M,j);break e;case 11:E=cg(null,E,X,M,j);break e;case 14:E=ug(null,E,X,Gs(X.type,M),j);break e}throw Error(s(306,X,""))}return E;case 0:return X=E.type,Q=E.pendingProps,Q=E.elementType===X?Q:Gs(X,Q),lf(M,E,X,Q,j);case 1:return X=E.type,Q=E.pendingProps,Q=E.elementType===X?Q:Gs(X,Q),wp(M,E,X,Q,j);case 3:e:{if(gv(E),M===null)throw Error(s(387));X=E.pendingProps,ue=E.memoizedState,Q=ue.element,b_(M,E),Hm(E,X,null,j);var He=E.memoizedState;if(X=He.element,et&&ue.isDehydrated)if(ue={element:X,isDehydrated:!1,cache:He.cache,transitions:He.transitions},E.updateQueue.baseState=ue,E.memoizedState=ue,E.flags&256){Q=Error(s(423)),E=yv(M,E,X,j,Q);break e}else if(X!==Q){Q=Error(s(424)),E=yv(M,E,X,j,Q);break e}else for(et&&(es=rr(E.stateNode.containerInfo),Rs=E,Ci=!0,ya=null,Nu=!1),j=Ud(E,null,X,j),E.child=j;j;)j.flags=j.flags&-3|4096,j=j.sibling;else{if(Wa(),X===Q){E=K(M,E,j);break e}ns(M,E,X,j)}E=E.child}return E;case 5:return Xm(E),M===null&&fp(E),X=E.type,Q=E.pendingProps,ue=M!==null?M.memoizedProps:null,He=Q.children,ot(X,Q)?He=null:ue!==null&&ot(X,ue)&&(E.flags|=32),ai(M,E),ns(M,E,He,j),E.child;case 6:return M===null&&fp(E),null;case 13:return L(M,E,j);case 4:return mp(E,E.stateNode.containerInfo),X=E.pendingProps,M===null?E.child=Al(E,null,X,j):ns(M,E,X,j),E.child;case 11:return X=E.type,Q=E.pendingProps,Q=E.elementType===X?Q:Gs(X,Q),cg(M,E,X,Q,j);case 7:return ns(M,E,E.pendingProps,j),E.child;case 8:return ns(M,E,E.pendingProps.children,j),E.child;case 12:return ns(M,E,E.pendingProps.children,j),E.child;case 10:e:{if(X=E.type._context,Q=E.pendingProps,ue=E.memoizedProps,He=Q.value,sv(E,X,He),ue!==null)if(Ua(ue.value,He)){if(ue.children===Q.children&&!_i.current){E=K(M,E,j);break e}}else for(ue=E.child,ue!==null&&(ue.return=E);ue!==null;){var mt=ue.dependencies;if(mt!==null){He=ue.child;for(var Ut=mt.firstContext;Ut!==null;){if(Ut.context===X){if(ue.tag===1){Ut=rc(-1,j&-j),Ut.tag=2;var fn=ue.updateQueue;if(fn!==null){fn=fn.shared;var Vn=fn.pending;Vn===null?Ut.next=Ut:(Ut.next=Vn.next,Vn.next=Ut),fn.pending=Ut}}ue.lanes|=j,Ut=ue.alternate,Ut!==null&&(Ut.lanes|=j),$m(ue.return,j,E),mt.lanes|=j;break}Ut=Ut.next}}else if(ue.tag===10)He=ue.type===E.type?null:ue.child;else if(ue.tag===18){if(He=ue.return,He===null)throw Error(s(341));He.lanes|=j,mt=He.alternate,mt!==null&&(mt.lanes|=j),$m(He,j,E),He=ue.sibling}else He=ue.child;if(He!==null)He.return=ue;else for(He=ue;He!==null;){if(He===E){He=null;break}if(ue=He.sibling,ue!==null){ue.return=He.return,He=ue;break}He=He.return}ue=He}ns(M,E,Q.children,j),E=E.child}return E;case 9:return Q=E.type,X=E.pendingProps.children,$d(E,j),Q=ga(Q),X=X(Q),E.flags|=1,ns(M,E,X,j),E.child;case 14:return X=E.type,Q=Gs(X,E.pendingProps),Q=Gs(X.type,Q),ug(M,E,X,Q,j);case 15:return E_(M,E,E.type,E.pendingProps,j);case 17:return X=E.type,Q=E.pendingProps,Q=E.elementType===X?Q:Gs(X,Q),M!==null&&(M.alternate=null,E.alternate=null,E.flags|=2),E.tag=1,fi(X)?(M=!0,so(E)):M=!1,$d(E,j),lv(E,X,Q),Cl(E,X,Q,j),Wu(null,E,X,!0,M,j);case 19:return q(M,E,j);case 22:return Ol(M,E,j)}throw Error(s(156,E.tag))};function gg(M,E){return Ps(M,E)}function O_(M,E,j,X){this.tag=M,this.key=j,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=E,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=X,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sa(M,E,j,X){return new O_(M,E,j,X)}function L_(M){return M=M.prototype,!(!M||!M.isReactComponent)}function ST(M){if(typeof M=="function")return L_(M)?1:0;if(M!=null){if(M=M.$$typeof,M===b)return 11;if(M===C)return 14}return 2}function pf(M,E){var j=M.alternate;return j===null?(j=Sa(M.tag,E,M.key,M.mode),j.elementType=M.elementType,j.type=M.type,j.stateNode=M.stateNode,j.alternate=M,M.alternate=j):(j.pendingProps=E,j.type=M.type,j.flags=0,j.subtreeFlags=0,j.deletions=null),j.flags=M.flags&14680064,j.childLanes=M.childLanes,j.lanes=M.lanes,j.child=M.child,j.memoizedProps=M.memoizedProps,j.memoizedState=M.memoizedState,j.updateQueue=M.updateQueue,E=M.dependencies,j.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext},j.sibling=M.sibling,j.index=M.index,j.ref=M.ref,j}function os(M,E,j,X,Q,ue){var He=2;if(X=M,typeof M=="function")L_(M)&&(He=1);else if(typeof M=="string")He=5;else e:switch(M){case h:return dc(j.children,Q,ue,E);case p:He=8,Q|=8;break;case g:return M=Sa(12,j,E,Q|2),M.elementType=g,M.lanes=ue,M;case w:return M=Sa(13,j,E,Q),M.elementType=w,M.lanes=ue,M;case S:return M=Sa(19,j,E,Q),M.elementType=S,M.lanes=ue,M;case P:return yg(j,Q,ue,E);default:if(typeof M=="object"&&M!==null)switch(M.$$typeof){case v:He=10;break e;case x:He=9;break e;case b:He=11;break e;case C:He=14;break e;case A:He=16,X=null;break e}throw Error(s(130,M==null?M:typeof M,""))}return E=Sa(He,j,E,Q),E.elementType=M,E.type=X,E.lanes=ue,E}function dc(M,E,j,X){return M=Sa(7,M,X,E),M.lanes=j,M}function yg(M,E,j,X){return M=Sa(22,M,X,E),M.elementType=P,M.lanes=j,M.stateNode={},M}function D_(M,E,j){return M=Sa(6,M,null,E),M.lanes=j,M}function Ip(M,E,j){return E=Sa(4,M.children!==null?M.children:[],M.key,E),E.lanes=j,E.stateNode={containerInfo:M.containerInfo,pendingChildren:null,implementation:M.implementation},E}function BL(M,E,j,X,Q){this.tag=E,this.containerInfo=M,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=lt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nv(0),this.expirationTimes=nv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nv(0),this.identifierPrefix=X,this.onRecoverableError=Q,et&&(this.mutableSourceEagerHydrationData=null)}function xv(M,E,j,X,Q,ue,He,mt,Ut){return M=new BL(M,E,j,mt,Ut),E===1?(E=1,ue===!0&&(E|=8)):E=0,ue=Sa(3,null,null,E),M.current=ue,ue.stateNode=M,ue.memoizedState={element:X,isDehydrated:j,cache:null,transitions:null},Um(ue),M}function MT(M){if(!M)return ti;M=M._reactInternals;e:{if(J(M)!==M||M.tag!==1)throw Error(s(170));var E=M;do{switch(E.tag){case 3:E=E.stateNode.context;break e;case 1:if(fi(E.type)){E=E.stateNode.__reactInternalMemoizedMergedChildContext;break e}}E=E.return}while(E!==null);throw Error(s(171))}if(M.tag===1){var j=M.type;if(fi(j))return ku(M,j,E)}return E}function Iw(M){var E=M._reactInternals;if(E===void 0)throw typeof M.render=="function"?Error(s(188)):(M=Object.keys(M).join(","),Error(s(268,M)));return M=le(E),M===null?null:M.stateNode}function Rw(M,E){if(M=M.memoizedState,M!==null&&M.dehydrated!==null){var j=M.retryLane;M.retryLane=j!==0&&j<E?j:E}}function N_(M,E){Rw(M,E),(M=M.alternate)&&Rw(M,E)}function jL(M){return M=le(M),M===null?null:M.stateNode}function kw(){return null}return n.attemptContinuousHydration=function(M){if(M.tag===13){var E=gs();Dl(M,134217728,E),N_(M,134217728)}},n.attemptHydrationAtCurrentPriority=function(M){if(M.tag===13){var E=gs(),j=Qd(M);Dl(M,j,E),N_(M,j)}},n.attemptSynchronousHydration=function(M){switch(M.tag){case 3:var E=M.stateNode;if(E.current.memoizedState.isDehydrated){var j=Ou(E.pendingLanes);j!==0&&(nc(E,j|1),ea(E,Ro()),!(vr&6)&&(qu(),Is()))}break;case 13:var X=gs();hf(function(){return Dl(M,1,X)}),N_(M,1)}},n.batchedUpdates=function(M,E){var j=vr;vr|=1;try{return M(E)}finally{vr=j,vr===0&&(qu(),Xh&&Is())}},n.createComponentSelector=function(M){return{$$typeof:Js,value:M}},n.createContainer=function(M,E,j,X,Q,ue,He){return xv(M,E,!1,null,j,X,Q,ue,He)},n.createHasPseudoClassSelector=function(M){return{$$typeof:gi,value:M}},n.createHydrationContainer=function(M,E,j,X,Q,ue,He,mt,Ut){return M=xv(j,X,!0,M,Q,ue,He,mt,Ut),M.context=MT(null),j=M.current,X=gs(),Q=Qd(j),ue=rc(X,Q),ue.callback=E??null,Ha(j,ue),M.current.lanes=Q,Gh(M,Q,X),ea(M,X),M},n.createPortal=function(M,E,j){var X=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:X==null?null:""+X,children:M,containerInfo:E,implementation:j}},n.createRoleSelector=function(M){return{$$typeof:is,value:M}},n.createTestNameSelector=function(M){return{$$typeof:Vo,value:M}},n.createTextSelector=function(M){return{$$typeof:Oo,value:M}},n.deferredUpdates=function(M){var E=Fr,j=ni.transition;try{return ni.transition=null,Fr=16,M()}finally{Fr=E,ni.transition=j}},n.discreteUpdates=function(M,E,j,X,Q){var ue=Fr,He=ni.transition;try{return ni.transition=null,Fr=1,M(E,j,X,Q)}finally{Fr=ue,ni.transition=He,vr===0&&qu()}},n.findAllNodes=cc,n.findBoundingRects=function(M,E){if(!Qt)throw Error(s(363));E=cc(M,E),M=[];for(var j=0;j<E.length;j++)M.push(Me(E[j]));for(E=M.length-1;0<E;E--){j=M[E];for(var X=j.x,Q=X+j.width,ue=j.y,He=ue+j.height,mt=E-1;0<=mt;mt--)if(E!==mt){var Ut=M[mt],fn=Ut.x,Vn=fn+Ut.width,Sr=Ut.y,cr=Sr+Ut.height;if(X>=fn&&ue>=Sr&&Q<=Vn&&He<=cr){M.splice(E,1);break}else if(X!==fn||j.width!==Ut.width||cr<ue||Sr>He){if(!(ue!==Sr||j.height!==Ut.height||Vn<X||fn>Q)){fn>X&&(Ut.width+=fn-X,Ut.x=X),Vn<Q&&(Ut.width=Q-fn),M.splice(E,1);break}}else{Sr>ue&&(Ut.height+=Sr-ue,Ut.y=ue),cr<He&&(Ut.height=He-Sr),M.splice(E,1);break}}}return M},n.findHostInstance=Iw,n.findHostInstanceWithNoPortals=function(M){return M=Y(M),M=M!==null?re(M):null,M===null?null:M.stateNode},n.findHostInstanceWithWarning=function(M){return Iw(M)},n.flushControlled=function(M){var E=vr;vr|=1;var j=ni.transition,X=Fr;try{ni.transition=null,Fr=1,M()}finally{Fr=X,ni.transition=j,vr=E,vr===0&&(qu(),Is())}},n.flushPassiveEffects=Pp,n.flushSync=hf,n.focusWithin=function(M,E){if(!Qt)throw Error(s(363));for(M=ba(M),E=Gu(M,E),E=Array.from(E),M=0;M<E.length;){var j=E[M++];if(!St(j)){if(j.tag===5&&jt(j.stateNode))return!0;for(j=j.child;j!==null;)E.push(j),j=j.sibling}}return!1},n.getCurrentUpdatePriority=function(){return Fr},n.getFindAllNodesFailureDescription=function(M,E){if(!Qt)throw Error(s(363));var j=0,X=[];M=[ba(M),0];for(var Q=0;Q<M.length;){var ue=M[Q++],He=M[Q++],mt=E[He];if((ue.tag!==5||!St(ue))&&(jc(ue,mt)&&(X.push(Kd(mt)),He++,He>j&&(j=He)),He<E.length))for(ue=ue.child;ue!==null;)M.push(ue,He),ue=ue.sibling}if(j<E.length){for(M=[];j<E.length;j++)M.push(Kd(E[j]));return`findAllNodes was able to match part of the selector:
  `+(X.join(" > ")+`

No matching component was found for:
  `)+M.join(" > ")}return null},n.getPublicRootInstance=function(M){if(M=M.current,!M.child)return null;switch(M.child.tag){case 5:return he(M.child.stateNode);default:return M.child.stateNode}},n.injectIntoDevTools=function(M){if(M={bundleType:M.bundleType,version:M.version,rendererPackageName:M.rendererPackageName,rendererConfig:M.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:jL,findFiberByHostInstance:M.findFiberByHostInstance||kw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")M=!1;else{var E=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(E.isDisabled||!E.supportsFiber)M=!0;else{try{sp=E.inject(M),Ml=E}catch{}M=!!E.checkDCE}}return M},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(M,E,j,X){if(!Qt)throw Error(s(363));M=cc(M,E);var Q=Rn(M,j,X).disconnect;return{disconnect:function(){Q()}}},n.registerMutableSourceForHydration=function(M,E){var j=E._getVersion;j=j(E._source),M.mutableSourceEagerHydrationData==null?M.mutableSourceEagerHydrationData=[E,j]:M.mutableSourceEagerHydrationData.push(E,j)},n.runWithPriority=function(M,E){var j=Fr;try{return Fr=M,E()}finally{Fr=j}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(M,E,j,X){var Q=E.current,ue=gs(),He=Qd(Q);return j=MT(j),E.context===null?E.context=j:E.pendingContext=j,E=rc(ue,He),E.payload={element:M},X=X===void 0?null:X,X!==null&&(E.callback=X),Ha(Q,E),M=Dl(Q,He,ue),M!==null&&Vm(M,Q,He),He},n};Dhe.exports=$vt;var Uvt=Dhe.exports;const Vvt=Mi(Uvt);var Nhe={exports:{}},zhe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ee,ye){var be=ee.length;ee.push(ye);e:for(;0<be;){var Le=be-1>>>1,je=ee[Le];if(0<i(je,ye))ee[Le]=ye,ee[be]=je,be=Le;else break e}}function n(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var ye=ee[0],be=ee.pop();if(be!==ye){ee[0]=be;e:for(var Le=0,je=ee.length,dt=je>>>1;Le<dt;){var Be=2*(Le+1)-1,ot=ee[Be],at=Be+1,It=ee[at];if(0>i(ot,be))at<je&&0>i(It,ot)?(ee[Le]=It,ee[at]=be,Le=at):(ee[Le]=ot,ee[Be]=be,Le=Be);else if(at<je&&0>i(It,be))ee[Le]=It,ee[at]=be,Le=at;else break e}}return ye}function i(ee,ye){var be=ee.sortIndex-ye.sortIndex;return be!==0?be:ee.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],d=[],h=1,p=null,g=3,v=!1,x=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(ee){for(var ye=n(d);ye!==null;){if(ye.callback===null)r(d);else if(ye.startTime<=ee)r(d),ye.sortIndex=ye.expirationTime,e(l,ye);else break;ye=n(d)}}function P(ee){if(b=!1,A(ee),!x)if(n(l)!==null)x=!0,he(k);else{var ye=n(d);ye!==null&&we(P,ye.startTime-ee)}}function k(ee,ye){x=!1,b&&(b=!1,S(W),W=-1),v=!0;var be=g;try{for(A(ye),p=n(l);p!==null&&(!(p.expirationTime>ye)||ee&&!Y());){var Le=p.callback;if(typeof Le=="function"){p.callback=null,g=p.priorityLevel;var je=Le(p.expirationTime<=ye);ye=t.unstable_now(),typeof je=="function"?p.callback=je:p===n(l)&&r(l),A(ye)}else r(l);p=n(l)}if(p!==null)var dt=!0;else{var Be=n(d);Be!==null&&we(P,Be.startTime-ye),dt=!1}return dt}finally{p=null,g=be,v=!1}}var F=!1,B=null,W=-1,J=5,H=-1;function Y(){return!(t.unstable_now()-H<J)}function le(){if(B!==null){var ee=t.unstable_now();H=ee;var ye=!0;try{ye=B(!0,ee)}finally{ye?pe():(F=!1,B=null)}}else F=!1}var pe;if(typeof C=="function")pe=function(){C(le)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,me=re.port2;re.port1.onmessage=le,pe=function(){me.postMessage(null)}}else pe=function(){w(le,0)};function he(ee){B=ee,F||(F=!0,pe())}function we(ee,ye){W=w(function(){ee(t.unstable_now())},ye)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_continueExecution=function(){x||v||(x=!0,he(k))},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(ee){switch(g){case 1:case 2:case 3:var ye=3;break;default:ye=g}var be=g;g=ye;try{return ee()}finally{g=be}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ee,ye){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var be=g;g=ee;try{return ye()}finally{g=be}},t.unstable_scheduleCallback=function(ee,ye,be){var Le=t.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Le+be:Le):be=Le,ee){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=be+je,ee={id:h++,callback:ye,priorityLevel:ee,startTime:be,expirationTime:je,sortIndex:-1},be>Le?(ee.sortIndex=be,e(d,ee),n(l)===null&&ee===n(d)&&(b?(S(W),W=-1):b=!0,we(P,be-Le))):(ee.sortIndex=je,e(l,ee),x||v||(x=!0,he(k))),ee},t.unstable_shouldYield=Y,t.unstable_wrapCallback=function(ee){var ye=g;return function(){var be=g;g=ye;try{return ee.apply(this,arguments)}finally{g=be}}}})(zhe);Nhe.exports=zhe;var LJ=Nhe.exports;const uV={},Fhe=t=>void Object.assign(uV,t);function Hvt(t,e){function n(h,{args:p=[],attach:g,...v},x){let b=`${h[0].toUpperCase()}${h.slice(1)}`,w;if(h==="primitive"){if(v.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const S=v.object;w=Dx(S,{type:h,root:x,attach:g,primitive:!0})}else{const S=uV[b];if(!S)throw new Error(`R3F: ${b} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(p))throw new Error("R3F: The args prop must be an array!");w=Dx(new S(...p),{type:h,root:x,attach:g,memoizedProps:{args:p}})}return w.__r3f.attach===void 0&&(w instanceof Pr?w.__r3f.attach="geometry":w instanceof Cs&&(w.__r3f.attach="material")),b!=="inject"&&Ez(w,v),w}function r(h,p){let g=!1;if(p){var v,x;(v=p.__r3f)!=null&&v.attach?Mz(h,p,p.__r3f.attach):p.isObject3D&&h.isObject3D&&(h.add(p),g=!0),g||(x=h.__r3f)==null||x.objects.push(p),p.__r3f||Dx(p,{}),p.__r3f.parent=h,D5(p),Nx(p)}}function i(h,p,g){let v=!1;if(p){var x,b;if((x=p.__r3f)!=null&&x.attach)Mz(h,p,p.__r3f.attach);else if(p.isObject3D&&h.isObject3D){p.parent=h,p.dispatchEvent({type:"added"});const w=h.children.filter(C=>C!==p),S=w.indexOf(g);h.children=[...w.slice(0,S),p,...w.slice(S)],v=!0}v||(b=h.__r3f)==null||b.objects.push(p),p.__r3f||Dx(p,{}),p.__r3f.parent=h,D5(p),Nx(p)}}function o(h,p,g=!1){h&&[...h].forEach(v=>s(p,v,g))}function s(h,p,g){if(p){var v,x,b;if(p.__r3f&&(p.__r3f.parent=null),(v=h.__r3f)!=null&&v.objects&&(h.__r3f.objects=h.__r3f.objects.filter(P=>P!==p)),(x=p.__r3f)!=null&&x.attach)BJ(h,p,p.__r3f.attach);else if(p.isObject3D&&h.isObject3D){var w;h.remove(p),(w=p.__r3f)!=null&&w.root&&Jvt(bP(p),p)}const C=(b=p.__r3f)==null?void 0:b.primitive,A=!C&&(g===void 0?p.dispose!==null:g);if(!C){var S;o((S=p.__r3f)==null?void 0:S.objects,p,A),o(p.children,p,A)}if(delete p.__r3f,A&&p.dispose&&p.type!=="Scene"){const P=()=>{try{p.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?LJ.unstable_scheduleCallback(LJ.unstable_IdlePriority,P):P()}Nx(h)}}function a(h,p,g,v){var x;const b=(x=h.__r3f)==null?void 0:x.parent;if(!b)return;const w=n(p,g,h.__r3f.root);if(h.children){for(const S of h.children)S.__r3f&&r(w,S);h.children=h.children.filter(S=>!S.__r3f)}h.__r3f.objects.forEach(S=>r(w,S)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||s(b,h),w.parent&&(w.__r3f.autoRemovedBeforeAppend=!0),r(b,w),w.raycast&&w.__r3f.eventCount&&bP(w).getState().internal.interaction.push(w),[v,v.alternate].forEach(S=>{S!==null&&(S.stateNode=w,S.ref&&(typeof S.ref=="function"?S.ref(w):S.ref.current=w))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Vvt({createInstance:n,removeChild:s,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,p)=>{if(!p)return;const g=h.getState().scene;g.__r3f&&(g.__r3f.root=h,r(g,p))},removeChildFromContainer:(h,p)=>{p&&s(h.getState().scene,p)},insertInContainerBefore:(h,p,g)=>{if(!p||!g)return;const v=h.getState().scene;v.__r3f&&i(v,p,g)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var p;return!!((p=h==null?void 0:h.__r3f)!=null?p:{}).handlers},prepareUpdate(h,p,g,v){var x;if(((x=h==null?void 0:h.__r3f)!=null?x:{}).primitive&&v.object&&v.object!==h)return[!0];{const{args:w=[],children:S,...C}=v,{args:A=[],children:P,...k}=g;if(!Array.isArray(w))throw new Error("R3F: the args prop must be an array!");if(w.some((B,W)=>B!==A[W]))return[!0];const F=Whe(h,C,k,!0);return F.changes.length?[!1,F]:null}},commitUpdate(h,[p,g],v,x,b,w){p?a(h,v,b,w):Ez(h,g)},commitMount(h,p,g,v){var x;const b=(x=h.__r3f)!=null?x:{};h.raycast&&b.handlers&&b.eventCount&&bP(h).getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>Dx(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var p;const{attach:g,parent:v}=(p=h.__r3f)!=null?p:{};g&&v&&BJ(v,h,g),h.isObject3D&&(h.visible=!1),Nx(h)},unhideInstance(h,p){var g;const{attach:v,parent:x}=(g=h.__r3f)!=null?g:{};v&&x&&Mz(x,h,v),(h.isObject3D&&p.visible==null||p.visible)&&(h.visible=!0),Nx(h)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():hb.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&To.fun(performance.now)?performance.now:To.fun(Date.now)?Date.now:()=>0,scheduleTimeout:To.fun(setTimeout)?setTimeout:void 0,cancelTimeout:To.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Ez}}var DJ,NJ;const Sz=t=>"colorSpace"in t||"outputColorSpace"in t,Bhe=()=>{var t;return(t=uV.ColorManagement)!=null?t:null},jhe=t=>t&&t.isOrthographicCamera,Wvt=t=>t&&t.hasOwnProperty("current"),_T=typeof window<"u"&&((DJ=window.document)!=null&&DJ.createElement||((NJ=window.navigator)==null?void 0:NJ.product)==="ReactNative")?V.useLayoutEffect:V.useEffect;function $he(t){const e=V.useRef(t);return _T(()=>void(e.current=t),[t]),e}function Gvt({set:t}){return _T(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class Uhe extends V.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}Uhe.getDerivedStateFromError=()=>({error:!0});const Vhe="__default",zJ=new Map,qvt=t=>t&&!!t.memoized&&!!t.changes;function Hhe(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const $S=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()};function bP(t){let e=t.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const To={obj:t=>t===Object(t)&&!To.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(To.str(t)||To.num(t))return t===e;const o=To.obj(t);if(o&&r==="reference")return t===e;const s=To.arr(t);if(s&&n==="reference")return t===e;if((s||o)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(o&&n==="shallow"&&r==="shallow"){for(a in i?e:t)if(!To.equ(t[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:t)if(t[a]!==e[a])return!1;if(To.und(a)){if(s&&t.length===0&&e.length===0||o&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function Xvt(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function Dx(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function L5(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce((o,s)=>o[s],t),{target:n,key:i}}else return{target:n,key:e}}const FJ=/-\d+$/;function Mz(t,e,n){if(To.str(n)){if(FJ.test(n)){const o=n.replace(FJ,""),{target:s,key:a}=L5(t,o);Array.isArray(s[a])||(s[a]=[])}const{target:r,key:i}=L5(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function BJ(t,e,n){var r,i;if(To.str(n)){const{target:o,key:s}=L5(t,n),a=e.__r3f.previousAttach;a===void 0?delete o[s]:o[s]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(t,e);(i=e.__r3f)==null||delete i.previousAttach}function Whe(t,{children:e,key:n,ref:r,...i},{children:o,key:s,ref:a,...l}={},d=!1){var h;const p=(h=t==null?void 0:t.__r3f)!=null?h:{},g=Object.entries(i),v=[];if(d){const b=Object.keys(l);for(let w=0;w<b.length;w++)i.hasOwnProperty(b[w])||g.unshift([b[w],Vhe+"remove"])}g.forEach(([b,w])=>{var S;if((S=t.__r3f)!=null&&S.primitive&&b==="object"||To.equ(w,l[b]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(b))return v.push([b,w,!0,[]]);let C=[];b.includes("-")&&(C=b.split("-")),v.push([b,w,!1,C]);for(const A in i){const P=i[A];A.startsWith(`${b}-`)&&v.push([A,P,!1,A.split("-")])}});const x={...i};return p.memoizedProps&&p.memoizedProps.args&&(x.args=p.memoizedProps.args),p.memoizedProps&&p.memoizedProps.attach&&(x.attach=p.memoizedProps.attach),{memoized:x,changes:v}}const Yvt=typeof process<"u"&&!1;function Ez(t,e){var n,r,i;const o=(n=t.__r3f)!=null?n:{},s=o.root,a=(r=s==null||s.getState==null?void 0:s.getState())!=null?r:{},{memoized:l,changes:d}=qvt(e)?e:Whe(t,e),h=o.eventCount;t.__r3f&&(t.__r3f.memoizedProps=l);for(let g=0;g<d.length;g++){let[v,x,b,w]=d[g];if(Sz(t)){const P="srgb",k="srgb-linear";v==="encoding"?(v="colorSpace",x=x===3001?P:k):v==="outputEncoding"&&(v="outputColorSpace",x=x===3001?P:k)}let S=t,C=S[v];if(w.length&&(C=w.reduce((A,P)=>A[P],t),!(C&&C.set))){const[A,...P]=w.reverse();S=P.reverse().reduce((k,F)=>k[F],t),v=A}if(x===Vhe+"remove")if(S.constructor){let A=zJ.get(S.constructor);A||(A=new S.constructor,zJ.set(S.constructor,A)),x=A[v]}else x=0;if(b)x?o.handlers[v]=x:delete o.handlers[v],o.eventCount=Object.keys(o.handlers).length;else if(C&&C.set&&(C.copy||C instanceof P0)){if(Array.isArray(x))C.fromArray?C.fromArray(x):C.set(...x);else if(C.copy&&x&&x.constructor&&(Yvt?C.constructor.name===x.constructor.name:C.constructor===x.constructor))C.copy(x);else if(x!==void 0){const A=C instanceof In;!A&&C.setScalar?C.setScalar(x):C instanceof P0&&x instanceof P0?C.mask=x.mask:C.set(x),!Bhe()&&!a.linear&&A&&C.convertSRGBToLinear()}}else if(S[v]=x,S[v]instanceof _o&&S[v].format===Wl&&S[v].type===Uf){const A=S[v];Sz(A)&&Sz(a.gl)?A.colorSpace=a.gl.outputColorSpace:A.encoding=a.gl.outputEncoding}Nx(t)}if(o.parent&&t.raycast&&h!==o.eventCount){const g=bP(t).getState().internal,v=g.interaction.indexOf(t);v>-1&&g.interaction.splice(v,1),o.eventCount&&g.interaction.push(t)}return!(d.length===1&&d[0][0]==="onUpdate")&&d.length&&(i=t.__r3f)!=null&&i.parent&&D5(t),t}function Nx(t){var e,n;const r=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function D5(t){t.onUpdate==null||t.onUpdate(t)}function Kvt(t,e){t.manual||(jhe(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function zA(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function Zvt(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return hb.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return hb.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return hb.ContinuousEventPriority;default:return hb.DefaultEventPriority}}function Ghe(t,e,n,r){const i=n.get(e);i&&(n.delete(e),n.size===0&&(t.delete(r),i.target.releasePointerCapture(r)))}function Jvt(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{Ghe(n.capturedMap,e,r,i)})}function Qvt(t){function e(l){const{internal:d}=t.getState(),h=l.offsetX-d.initialClick[0],p=l.offsetY-d.initialClick[1];return Math.round(Math.sqrt(h*h+p*p))}function n(l){return l.filter(d=>["Move","Over","Enter","Out","Leave"].some(h=>{var p;return(p=d.__r3f)==null?void 0:p.handlers["onPointer"+h]}))}function r(l,d){const h=t.getState(),p=new Set,g=[],v=d?d(h.internal.interaction):h.internal.interaction;for(let S=0;S<v.length;S++){const C=$S(v[S]);C&&(C.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function x(S){const C=$S(S);if(!C||!C.events.enabled||C.raycaster.camera===null)return[];if(C.raycaster.camera===void 0){var A;C.events.compute==null||C.events.compute(l,C,(A=C.previousRoot)==null?void 0:A.getState()),C.raycaster.camera===void 0&&(C.raycaster.camera=null)}return C.raycaster.camera?C.raycaster.intersectObject(S,!0):[]}let b=v.flatMap(x).sort((S,C)=>{const A=$S(S.object),P=$S(C.object);return!A||!P?S.distance-C.distance:P.events.priority-A.events.priority||S.distance-C.distance}).filter(S=>{const C=zA(S);return p.has(C)?!1:(p.add(C),!0)});h.events.filter&&(b=h.events.filter(b,h));for(const S of b){let C=S.object;for(;C;){var w;(w=C.__r3f)!=null&&w.eventCount&&g.push({...S,eventObject:C}),C=C.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let S of h.internal.capturedMap.get(l.pointerId).values())p.has(zA(S.intersection))||g.push(S.intersection);return g}function i(l,d,h,p){const g=t.getState();if(l.length){const v={stopped:!1};for(const x of l){const b=$S(x.object)||g,{raycaster:w,pointer:S,camera:C,internal:A}=b,P=new Oe(S.x,S.y,0).unproject(C),k=H=>{var Y,le;return(Y=(le=A.capturedMap.get(H))==null?void 0:le.has(x.eventObject))!=null?Y:!1},F=H=>{const Y={intersection:x,target:d.target};A.capturedMap.has(H)?A.capturedMap.get(H).set(x.eventObject,Y):A.capturedMap.set(H,new Map([[x.eventObject,Y]])),d.target.setPointerCapture(H)},B=H=>{const Y=A.capturedMap.get(H);Y&&Ghe(A.capturedMap,x.eventObject,Y,H)};let W={};for(let H in d){let Y=d[H];typeof Y!="function"&&(W[H]=Y)}let J={...x,...W,pointer:S,intersections:l,stopped:v.stopped,delta:h,unprojectedPoint:P,ray:w.ray,camera:C,stopPropagation(){const H="pointerId"in d&&A.capturedMap.get(d.pointerId);if((!H||H.has(x.eventObject))&&(J.stopped=v.stopped=!0,A.hovered.size&&Array.from(A.hovered.values()).find(Y=>Y.eventObject===x.eventObject))){const Y=l.slice(0,l.indexOf(x));o([...Y,x])}},target:{hasPointerCapture:k,setPointerCapture:F,releasePointerCapture:B},currentTarget:{hasPointerCapture:k,setPointerCapture:F,releasePointerCapture:B},nativeEvent:d};if(p(J),v.stopped===!0)break}}return l}function o(l){const{internal:d}=t.getState();for(const h of d.hovered.values())if(!l.length||!l.find(p=>p.object===h.object&&p.index===h.index&&p.instanceId===h.instanceId)){const g=h.eventObject.__r3f,v=g==null?void 0:g.handlers;if(d.hovered.delete(zA(h)),g!=null&&g.eventCount){const x={...h,intersections:l};v.onPointerOut==null||v.onPointerOut(x),v.onPointerLeave==null||v.onPointerLeave(x)}}}function s(l,d){for(let h=0;h<d.length;h++){const p=d[h].__r3f;p==null||p.handlers.onPointerMissed==null||p.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return d=>{const{internal:h}=t.getState();"pointerId"in d&&h.capturedMap.has(d.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(d.pointerId)&&(h.capturedMap.delete(d.pointerId),o([]))})}}return function(h){const{onPointerMissed:p,internal:g}=t.getState();g.lastEvent.current=h;const v=l==="onPointerMove",x=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",w=r(h,v?n:void 0),S=x?e(h):0;l==="onPointerDown"&&(g.initialClick=[h.offsetX,h.offsetY],g.initialHits=w.map(A=>A.eventObject)),x&&!w.length&&S<=2&&(s(h,g.interaction),p&&p(h)),v&&o(w);function C(A){const P=A.eventObject,k=P.__r3f,F=k==null?void 0:k.handlers;if(k!=null&&k.eventCount)if(v){if(F.onPointerOver||F.onPointerEnter||F.onPointerOut||F.onPointerLeave){const B=zA(A),W=g.hovered.get(B);W?W.stopped&&A.stopPropagation():(g.hovered.set(B,A),F.onPointerOver==null||F.onPointerOver(A),F.onPointerEnter==null||F.onPointerEnter(A))}F.onPointerMove==null||F.onPointerMove(A)}else{const B=F[l];B?(!x||g.initialHits.includes(P))&&(s(h,g.interaction.filter(W=>!g.initialHits.includes(W))),B(A)):x&&g.initialHits.includes(P)&&s(h,g.interaction.filter(W=>!g.initialHits.includes(W)))}}i(w,h,S,C)}}return{handlePointer:a}}const qhe=t=>!!(t!=null&&t.render),Xhe=V.createContext(null),e0t=(t,e)=>{const n=Fvt((a,l)=>{const d=new Oe,h=new Oe,p=new Oe;function g(S=l().camera,C=h,A=l().size){const{width:P,height:k,top:F,left:B}=A,W=P/k;C instanceof Oe?p.copy(C):p.set(...C);const J=S.getWorldPosition(d).distanceTo(p);if(jhe(S))return{width:P/S.zoom,height:k/S.zoom,top:F,left:B,factor:1,distance:J,aspect:W};{const H=S.fov*Math.PI/180,Y=2*Math.tan(H/2)*J,le=Y*(P/k);return{width:le,height:Y,top:F,left:B,factor:P/le,distance:J,aspect:W}}}let v;const x=S=>a(C=>({performance:{...C.performance,current:S}})),b=new Ft;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(S=1)=>t(l(),S),advance:(S,C)=>e(S,C,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new oV,pointer:b,mouse:b,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const S=l();v&&clearTimeout(v),S.performance.current!==S.performance.min&&x(S.performance.min),v=setTimeout(()=>x(l().performance.max),S.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:g},setEvents:S=>a(C=>({...C,events:{...C.events,...S}})),setSize:(S,C,A,P,k)=>{const F=l().camera,B={width:S,height:C,top:P||0,left:k||0,updateStyle:A};a(W=>({size:B,viewport:{...W.viewport,...g(F,h,B)}}))},setDpr:S=>a(C=>{const A=Hhe(S);return{viewport:{...C.viewport,dpr:A,initialDpr:C.viewport.initialDpr||A}}}),setFrameloop:(S="always")=>{const C=l().clock;C.stop(),C.elapsedTime=0,S!=="never"&&(C.start(),C.elapsedTime=0),a(()=>({frameloop:S}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:V.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(S,C,A)=>{const P=l().internal;return P.priority=P.priority+(C>0?1:0),P.subscribers.push({ref:S,priority:C,store:A}),P.subscribers=P.subscribers.sort((k,F)=>k.priority-F.priority),()=>{const k=l().internal;k!=null&&k.subscribers&&(k.priority=k.priority-(C>0?1:0),k.subscribers=k.subscribers.filter(F=>F.ref!==S))}}}}}),r=n.getState();let i=r.size,o=r.viewport.dpr,s=r.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:d,gl:h,set:p}=n.getState();if(l.width!==i.width||l.height!==i.height||d.dpr!==o){var g;i=l,o=d.dpr,Kvt(a,l),h.setPixelRatio(d.dpr);const v=(g=l.updateStyle)!=null?g:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,v)}a!==s&&(s=a,p(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};let FA,t0t=new Set,n0t=new Set,r0t=new Set;function Tz(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function US(t,e){switch(t){case"before":return Tz(t0t,e);case"after":return Tz(n0t,e);case"tail":return Tz(r0t,e)}}let Cz,Az;function Pz(t,e,n){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),Cz=e.internal.subscribers,FA=0;FA<Cz.length;FA++)Az=Cz[FA],Az.ref.current(Az.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function i0t(t){let e=!1,n,r,i;function o(l){r=requestAnimationFrame(o),e=!0,n=0,US("before",l);for(const h of t.values()){var d;i=h.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((d=i.gl.xr)!=null&&d.isPresenting)&&(n+=Pz(l,i))}if(US("after",l),n===0)return US("tail",l),e=!1,cancelAnimationFrame(r)}function s(l,d=1){var h;if(!l)return t.forEach(p=>s(p.store.getState(),d));(h=l.gl.xr)!=null&&h.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+d),e||(e=!0,requestAnimationFrame(o)))}function a(l,d=!0,h,p){if(d&&US("before",l),h)Pz(l,h,p);else for(const g of t.values())Pz(l,g.store.getState());d&&US("after",l)}return{loop:o,invalidate:s,advance:a}}function Yhe(){const t=V.useContext(Xhe);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function Bg(t=n=>n,e){return Yhe()(t,e)}function Khe(t,e=0){const n=Yhe(),r=n.getState().internal.subscribe,i=$he(t);return _T(()=>r(i,e,n),[e,r,n]),null}const A1=new Map,{invalidate:jJ,advance:$J}=i0t(A1),{reconciler:CR,applyProps:Rx}=Hvt(A1,Zvt),kx={objects:"shallow",strict:!1},o0t=(t,e)=>{const n=typeof t=="function"?t(e):t;return qhe(n)?n:new hT({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function s0t(t,e){const n=typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:o,left:s,updateStyle:a=n}=e;return{width:r,height:i,top:o,left:s,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:r,height:i,top:o,left:s}=t.parentElement.getBoundingClientRect();return{width:r,height:i,top:o,left:s,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function a0t(t){const e=A1.get(t),n=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,o=r||e0t(jJ,$J),s=n||CR.createContainer(o,hb.ConcurrentRoot,null,!1,null,"",i,null);e||A1.set(t,{fiber:s,store:o});let a,l=!1,d;return{configure(h={}){let{gl:p,size:g,scene:v,events:x,onCreated:b,shadows:w=!1,linear:S=!1,flat:C=!1,legacy:A=!1,orthographic:P=!1,frameloop:k="always",dpr:F=[1,2],performance:B,raycaster:W,camera:J,onPointerMissed:H}=h,Y=o.getState(),le=Y.gl;Y.gl||Y.set({gl:le=o0t(p,t)});let pe=Y.raycaster;pe||Y.set({raycaster:pe=new whe});const{params:re,...me}=W||{};if(To.equ(me,pe,kx)||Rx(pe,{...me}),To.equ(re,pe.params,kx)||Rx(pe,{params:{...pe.params,...re}}),!Y.camera||Y.camera===d&&!To.equ(d,J,kx)){d=J;const be=J instanceof m_,Le=be?J:P?new Rf(0,0,0,0,.1,1e3):new No(75,0,.1,1e3);be||(Le.position.z=5,J&&Rx(Le,J),!Y.camera&&!(J!=null&&J.rotation)&&Le.lookAt(0,0,0)),Y.set({camera:Le}),pe.camera=Le}if(!Y.scene){let be;v instanceof T1?be=v:(be=new T1,v&&Rx(be,v)),Y.set({scene:Dx(be)})}if(!Y.xr){var he;const be=(dt,Be)=>{const ot=o.getState();ot.frameloop!=="never"&&$J(dt,!0,ot,Be)},Le=()=>{const dt=o.getState();dt.gl.xr.enabled=dt.gl.xr.isPresenting,dt.gl.xr.setAnimationLoop(dt.gl.xr.isPresenting?be:null),dt.gl.xr.isPresenting||jJ(dt)},je={connect(){const dt=o.getState().gl;dt.xr.addEventListener("sessionstart",Le),dt.xr.addEventListener("sessionend",Le)},disconnect(){const dt=o.getState().gl;dt.xr.removeEventListener("sessionstart",Le),dt.xr.removeEventListener("sessionend",Le)}};typeof((he=le.xr)==null?void 0:he.addEventListener)=="function"&&je.connect(),Y.set({xr:je})}if(le.shadowMap){const be=le.shadowMap.enabled,Le=le.shadowMap.type;if(le.shadowMap.enabled=!!w,To.boo(w))le.shadowMap.type=P2;else if(To.str(w)){var we;const je={basic:vue,percentage:fL,soft:P2,variance:dh};le.shadowMap.type=(we=je[w])!=null?we:P2}else To.obj(w)&&Object.assign(le.shadowMap,w);(be!==le.shadowMap.enabled||Le!==le.shadowMap.type)&&(le.shadowMap.needsUpdate=!0)}const ee=Bhe();ee&&("enabled"in ee?ee.enabled=!A:"legacyMode"in ee&&(ee.legacyMode=A)),l||Rx(le,{outputEncoding:S?3e3:3001,toneMapping:C?$f:v8}),Y.legacy!==A&&Y.set(()=>({legacy:A})),Y.linear!==S&&Y.set(()=>({linear:S})),Y.flat!==C&&Y.set(()=>({flat:C})),p&&!To.fun(p)&&!qhe(p)&&!To.equ(p,le,kx)&&Rx(le,p),x&&!Y.events.handlers&&Y.set({events:x(o)});const ye=s0t(t,g);return To.equ(ye,Y.size,kx)||Y.setSize(ye.width,ye.height,ye.updateStyle,ye.top,ye.left),F&&Y.viewport.dpr!==Hhe(F)&&Y.setDpr(F),Y.frameloop!==k&&Y.setFrameloop(k),Y.onPointerMissed||Y.set({onPointerMissed:H}),B&&!To.equ(B,Y.performance,kx)&&Y.set(be=>({performance:{...be.performance,...B}})),a=b,l=!0,this},render(h){return l||this.configure(),CR.updateContainer(V.createElement(l0t,{store:o,children:h,onCreated:a,rootElement:t}),s,null,()=>{}),o},unmount(){Zhe(t)}}}function l0t({store:t,children:e,onCreated:n,rootElement:r}){return _T(()=>{const i=t.getState();i.set(o=>({internal:{...o.internal,active:!0}})),n&&n(i),t.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),V.createElement(Xhe.Provider,{value:t},e)}function Zhe(t,e){const n=A1.get(t),r=n==null?void 0:n.fiber;if(r){const i=n==null?void 0:n.store.getState();i&&(i.internal.active=!1),CR.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var o,s,a,l;i.events.disconnect==null||i.events.disconnect(),(o=i.gl)==null||(s=o.renderLists)==null||s.dispose==null||s.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),Xvt(i),A1.delete(t)}catch{}},500)})}}CR.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:V.version});function N5(t,e,n){var r,i,o,s,a;e==null&&(e=100);function l(){var h=Date.now()-s;h<e&&h>=0?r=setTimeout(l,e-h):(r=null,n||(a=t.apply(o,i),o=i=null))}var d=function(){o=this,i=arguments,s=Date.now();var h=n&&!r;return r||(r=setTimeout(l,e)),h&&(a=t.apply(o,i),o=i=null),a};return d.clear=function(){r&&(clearTimeout(r),r=null)},d.flush=function(){r&&(a=t.apply(o,i),o=i=null,clearTimeout(r),r=null)},d}N5.debounce=N5;var c0t=N5;const UJ=Mi(c0t);function u0t(t){let{debounce:e,scroll:n,polyfill:r,offsetSize:i}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const o=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=V.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=V.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s}),d=e?typeof e=="number"?e:e.scroll:null,h=e?typeof e=="number"?e:e.resize:null,p=V.useRef(!1);V.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[g,v,x]=V.useMemo(()=>{const C=()=>{if(!l.current.element)return;const{left:A,top:P,width:k,height:F,bottom:B,right:W,x:J,y:H}=l.current.element.getBoundingClientRect(),Y={left:A,top:P,width:k,height:F,bottom:B,right:W,x:J,y:H};l.current.element instanceof HTMLElement&&i&&(Y.height=l.current.element.offsetHeight,Y.width=l.current.element.offsetWidth),Object.freeze(Y),p.current&&!p0t(l.current.lastBounds,Y)&&a(l.current.lastBounds=Y)};return[C,h?UJ(C,h):C,d?UJ(C,d):C]},[a,i,d,h]);function b(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(C=>C.removeEventListener("scroll",x,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function w(){l.current.element&&(l.current.resizeObserver=new o(x),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(C=>C.addEventListener("scroll",x,{capture:!0,passive:!0})))}const S=C=>{!C||C===l.current.element||(b(),l.current.element=C,l.current.scrollContainers=Jhe(C),w())};return h0t(x,!!n),d0t(v),V.useEffect(()=>{b(),w()},[n,x,v]),V.useEffect(()=>b,[]),[S,s,g]}function d0t(t){V.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function h0t(t,e){V.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function Jhe(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(o=>o==="auto"||o==="scroll")&&e.push(t),[...e,...Jhe(t.parentElement)]}const f0t=["x","y","top","bottom","left","right","width","height"],p0t=(t,e)=>f0t.every(n=>t[n]===e[n]);var m0t=Object.defineProperty,g0t=Object.defineProperties,y0t=Object.getOwnPropertyDescriptors,VJ=Object.getOwnPropertySymbols,v0t=Object.prototype.hasOwnProperty,_0t=Object.prototype.propertyIsEnumerable,HJ=(t,e,n)=>e in t?m0t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,WJ=(t,e)=>{for(var n in e||(e={}))v0t.call(e,n)&&HJ(t,n,e[n]);if(VJ)for(var n of VJ(e))_0t.call(e,n)&&HJ(t,n,e[n]);return t},x0t=(t,e)=>g0t(t,y0t(e));function Qhe(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=t.child;for(;r;){const i=Qhe(r,e,n);if(i)return i;r=r.sibling}}function efe(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const dV=efe(V.createContext(null));class tfe extends V.Component{render(){return V.createElement(dV.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:GJ,ReactCurrentDispatcher:qJ}=V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function b0t(){const t=V.useContext(dV);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=V.useId();return V.useMemo(()=>{for(const r of[GJ==null?void 0:GJ.current,t,t==null?void 0:t.alternate]){if(!r)continue;const i=Qhe(r,!1,o=>{let s=o.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(i)return i}},[t,e])}function w0t(){var t,e;const n=b0t(),[r]=V.useState(()=>new Map);r.clear();let i=n;for(;i;){const o=(t=i.type)==null?void 0:t._context;o&&o!==dV&&!r.has(o)&&r.set(o,(e=qJ==null?void 0:qJ.current)==null?void 0:e.readContext(efe(o))),i=i.return}return r}function S0t(){const t=w0t();return V.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>V.createElement(e,null,V.createElement(n.Provider,x0t(WJ({},r),{value:t.get(n)}))),e=>V.createElement(tfe,WJ({},e))),[t])}const Iz={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function M0t(t){const{handlePointer:e}=Qvt(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(Iz).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:i}=t.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var r;const{set:i,events:o}=t.getState();o.disconnect==null||o.disconnect(),i(s=>({events:{...s.events,connected:n}})),Object.entries((r=o.handlers)!=null?r:[]).forEach(([s,a])=>{const[l,d]=Iz[s];n.addEventListener(l,a,{passive:d})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([o,s])=>{if(r&&r.connected instanceof HTMLElement){const[a]=Iz[o];r.connected.removeEventListener(a,s)}}),n(o=>({events:{...o.events,connected:void 0}}))}}}}const E0t=V.forwardRef(function({children:e,fallback:n,resize:r,style:i,gl:o,events:s=M0t,eventSource:a,eventPrefix:l,shadows:d,linear:h,flat:p,legacy:g,orthographic:v,frameloop:x,dpr:b,performance:w,raycaster:S,camera:C,scene:A,onPointerMissed:P,onCreated:k,...F},B){V.useMemo(()=>Fhe(dyt),[]);const W=S0t(),[J,H]=u0t({scroll:!0,debounce:{scroll:50,resize:0},...r}),Y=V.useRef(null),le=V.useRef(null);V.useImperativeHandle(B,()=>Y.current);const pe=$he(P),[re,me]=V.useState(!1),[he,we]=V.useState(!1);if(re)throw re;if(he)throw he;const ee=V.useRef(null);_T(()=>{const be=Y.current;H.width>0&&H.height>0&&be&&(ee.current||(ee.current=a0t(be)),ee.current.configure({gl:o,events:s,shadows:d,linear:h,flat:p,legacy:g,orthographic:v,frameloop:x,dpr:b,performance:w,raycaster:S,camera:C,scene:A,size:H,onPointerMissed:(...Le)=>pe.current==null?void 0:pe.current(...Le),onCreated:Le=>{Le.events.connect==null||Le.events.connect(a?Wvt(a)?a.current:a:le.current),l&&Le.setEvents({compute:(je,dt)=>{const Be=je[l+"X"],ot=je[l+"Y"];dt.pointer.set(Be/dt.size.width*2-1,-(ot/dt.size.height)*2+1),dt.raycaster.setFromCamera(dt.pointer,dt.camera)}}),k==null||k(Le)}}),ee.current.render(V.createElement(W,null,V.createElement(Uhe,{set:we},V.createElement(V.Suspense,{fallback:V.createElement(Gvt,{set:me})},e)))))}),V.useEffect(()=>{const be=Y.current;if(be)return()=>Zhe(be)},[]);const ye=a?"none":"auto";return V.createElement("div",de({ref:le,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ye,...i}},F),V.createElement("div",{ref:J,style:{width:"100%",height:"100%"}},V.createElement("canvas",{ref:Y,style:{display:"block"}},n)))}),T0t=V.forwardRef(function(e,n){return V.createElement(tfe,null,V.createElement(E0t,de({},e,{ref:n})))});var C0t=Object.defineProperty,A0t=(t,e,n)=>e in t?C0t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,br=(t,e,n)=>(A0t(t,typeof e!="symbol"?e+"":e,n),n);const BA=new Ky,XJ=new Ef,P0t=Math.cos(70*(Math.PI/180)),YJ=(t,e)=>(t%e+e)%e;let I0t=class extends jh{constructor(e,n){super(),br(this,"object"),br(this,"domElement"),br(this,"enabled",!0),br(this,"target",new Oe),br(this,"minDistance",0),br(this,"maxDistance",1/0),br(this,"minZoom",0),br(this,"maxZoom",1/0),br(this,"minPolarAngle",0),br(this,"maxPolarAngle",Math.PI),br(this,"minAzimuthAngle",-1/0),br(this,"maxAzimuthAngle",1/0),br(this,"enableDamping",!1),br(this,"dampingFactor",.05),br(this,"enableZoom",!0),br(this,"zoomSpeed",1),br(this,"enableRotate",!0),br(this,"rotateSpeed",1),br(this,"enablePan",!0),br(this,"panSpeed",1),br(this,"screenSpacePanning",!0),br(this,"keyPanSpeed",7),br(this,"zoomToCursor",!1),br(this,"autoRotate",!1),br(this,"autoRotateSpeed",2),br(this,"reverseOrbit",!1),br(this,"reverseHorizontalOrbit",!1),br(this,"reverseVerticalOrbit",!1),br(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),br(this,"mouseButtons",{LEFT:ru.ROTATE,MIDDLE:ru.DOLLY,RIGHT:ru.PAN}),br(this,"touches",{ONE:iu.ROTATE,TWO:iu.DOLLY_PAN}),br(this,"target0"),br(this,"position0"),br(this,"zoom0"),br(this,"_domElementKeyEvents",null),br(this,"getPolarAngle"),br(this,"getAzimuthalAngle"),br(this,"setPolarAngle"),br(this,"setAzimuthalAngle"),br(this,"getDistance"),br(this,"listenToKeyEvents"),br(this,"stopListenToKeyEvents"),br(this,"saveState"),br(this,"reset"),br(this,"update"),br(this,"connect"),br(this,"dispose"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=Ne=>{let pt=YJ(Ne,2*Math.PI),Te=h.phi;Te<0&&(Te+=2*Math.PI),pt<0&&(pt+=2*Math.PI);let xt=Math.abs(pt-Te);2*Math.PI-xt<xt&&(pt<Te?pt+=2*Math.PI:Te+=2*Math.PI),p.phi=pt-Te,r.update()},this.setAzimuthalAngle=Ne=>{let pt=YJ(Ne,2*Math.PI),Te=h.theta;Te<0&&(Te+=2*Math.PI),pt<0&&(pt+=2*Math.PI);let xt=Math.abs(pt-Te);2*Math.PI-xt<xt&&(pt<Te?pt+=2*Math.PI:Te+=2*Math.PI),p.theta=pt-Te,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=Ne=>{Ne.addEventListener("keydown",ft),this._domElementKeyEvents=Ne},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ft),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const Ne=new Oe,pt=new Oe(0,1,0),Te=new Ts().setFromUnitVectors(e.up,pt),xt=Te.clone().invert(),tn=new Oe,Xe=new Ts,Yt=2*Math.PI;return function(){const ie=r.object.position;Te.setFromUnitVectors(e.up,pt),xt.copy(Te).invert(),Ne.copy(ie).sub(r.target),Ne.applyQuaternion(Te),h.setFromVector3(Ne),r.autoRotate&&l===a.NONE&&re(le()),r.enableDamping?(h.theta+=p.theta*r.dampingFactor,h.phi+=p.phi*r.dampingFactor):(h.theta+=p.theta,h.phi+=p.phi);let se=r.minAzimuthAngle,Se=r.maxAzimuthAngle;isFinite(se)&&isFinite(Se)&&(se<-Math.PI?se+=Yt:se>Math.PI&&(se-=Yt),Se<-Math.PI?Se+=Yt:Se>Math.PI&&(Se-=Yt),se<=Se?h.theta=Math.max(se,Math.min(Se,h.theta)):h.theta=h.theta>(se+Se)/2?Math.max(se,h.theta):Math.min(Se,h.theta)),h.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,h.phi)),h.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(v,r.dampingFactor):r.target.add(v),r.zoomToCursor&&J||r.object.isOrthographicCamera?h.radius=je(h.radius):h.radius=je(h.radius*g),Ne.setFromSpherical(h),Ne.applyQuaternion(xt),ie.copy(r.target).add(Ne),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(p.theta*=1-r.dampingFactor,p.phi*=1-r.dampingFactor,v.multiplyScalar(1-r.dampingFactor)):(p.set(0,0,0),v.set(0,0,0));let De=!1;if(r.zoomToCursor&&J){let We=null;if(r.object instanceof No&&r.object.isPerspectiveCamera){const Ze=Ne.length();We=je(Ze*g);const tt=Ze-We;r.object.position.addScaledVector(B,tt),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Ze=new Oe(W.x,W.y,0);Ze.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/g)),r.object.updateProjectionMatrix(),De=!0;const tt=new Oe(W.x,W.y,0);tt.unproject(r.object),r.object.position.sub(tt).add(Ze),r.object.updateMatrixWorld(),We=Ne.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;We!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(We).add(r.object.position):(BA.origin.copy(r.object.position),BA.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(BA.direction))<P0t?e.lookAt(r.target):(XJ.setFromNormalAndCoplanarPoint(r.object.up,r.target),BA.intersectPlane(XJ,r.target))))}else r.object instanceof Rf&&r.object.isOrthographicCamera&&(De=g!==1,De&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/g)),r.object.updateProjectionMatrix()));return g=1,J=!1,De||tn.distanceToSquared(r.object.position)>d||8*(1-Xe.dot(r.object.quaternion))>d?(r.dispatchEvent(i),tn.copy(r.object.position),Xe.copy(r.object.quaternion),De=!1,!0):!1}})(),this.connect=Ne=>{Ne===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=Ne,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Tn),r.domElement.addEventListener("pointerdown",Ie),r.domElement.addEventListener("pointercancel",St),r.domElement.addEventListener("wheel",Rn)},this.dispose=()=>{var Ne,pt,Te,xt,tn,Xe;(Ne=r.domElement)==null||Ne.removeEventListener("contextmenu",Tn),(pt=r.domElement)==null||pt.removeEventListener("pointerdown",Ie),(Te=r.domElement)==null||Te.removeEventListener("pointercancel",St),(xt=r.domElement)==null||xt.removeEventListener("wheel",Rn),(tn=r.domElement)==null||tn.ownerDocument.removeEventListener("pointermove",Me),(Xe=r.domElement)==null||Xe.ownerDocument.removeEventListener("pointerup",wt),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",ft)};const r=this,i={type:"change"},o={type:"start"},s={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const d=1e-6,h=new yE,p=new yE;let g=1;const v=new Oe,x=new Ft,b=new Ft,w=new Ft,S=new Ft,C=new Ft,A=new Ft,P=new Ft,k=new Ft,F=new Ft,B=new Oe,W=new Ft;let J=!1;const H=[],Y={};function le(){return 2*Math.PI/60/60*r.autoRotateSpeed}function pe(){return Math.pow(.95,r.zoomSpeed)}function re(Ne){r.reverseOrbit||r.reverseHorizontalOrbit?p.theta+=Ne:p.theta-=Ne}function me(Ne){r.reverseOrbit||r.reverseVerticalOrbit?p.phi+=Ne:p.phi-=Ne}const he=(()=>{const Ne=new Oe;return function(Te,xt){Ne.setFromMatrixColumn(xt,0),Ne.multiplyScalar(-Te),v.add(Ne)}})(),we=(()=>{const Ne=new Oe;return function(Te,xt){r.screenSpacePanning===!0?Ne.setFromMatrixColumn(xt,1):(Ne.setFromMatrixColumn(xt,0),Ne.crossVectors(r.object.up,Ne)),Ne.multiplyScalar(Te),v.add(Ne)}})(),ee=(()=>{const Ne=new Oe;return function(Te,xt){const tn=r.domElement;if(tn&&r.object instanceof No&&r.object.isPerspectiveCamera){const Xe=r.object.position;Ne.copy(Xe).sub(r.target);let Yt=Ne.length();Yt*=Math.tan(r.object.fov/2*Math.PI/180),he(2*Te*Yt/tn.clientHeight,r.object.matrix),we(2*xt*Yt/tn.clientHeight,r.object.matrix)}else tn&&r.object instanceof Rf&&r.object.isOrthographicCamera?(he(Te*(r.object.right-r.object.left)/r.object.zoom/tn.clientWidth,r.object.matrix),we(xt*(r.object.top-r.object.bottom)/r.object.zoom/tn.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function ye(Ne){r.object instanceof No&&r.object.isPerspectiveCamera||r.object instanceof Rf&&r.object.isOrthographicCamera?g/=Ne:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function be(Ne){r.object instanceof No&&r.object.isPerspectiveCamera||r.object instanceof Rf&&r.object.isOrthographicCamera?g*=Ne:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function Le(Ne){if(!r.zoomToCursor||!r.domElement)return;J=!0;const pt=r.domElement.getBoundingClientRect(),Te=Ne.clientX-pt.left,xt=Ne.clientY-pt.top,tn=pt.width,Xe=pt.height;W.x=Te/tn*2-1,W.y=-(xt/Xe)*2+1,B.set(W.x,W.y,1).unproject(r.object).sub(r.object.position).normalize()}function je(Ne){return Math.max(r.minDistance,Math.min(r.maxDistance,Ne))}function dt(Ne){x.set(Ne.clientX,Ne.clientY)}function Be(Ne){Le(Ne),P.set(Ne.clientX,Ne.clientY)}function ot(Ne){S.set(Ne.clientX,Ne.clientY)}function at(Ne){b.set(Ne.clientX,Ne.clientY),w.subVectors(b,x).multiplyScalar(r.rotateSpeed);const pt=r.domElement;pt&&(re(2*Math.PI*w.x/pt.clientHeight),me(2*Math.PI*w.y/pt.clientHeight)),x.copy(b),r.update()}function It(Ne){k.set(Ne.clientX,Ne.clientY),F.subVectors(k,P),F.y>0?ye(pe()):F.y<0&&be(pe()),P.copy(k),r.update()}function Lt(Ne){C.set(Ne.clientX,Ne.clientY),A.subVectors(C,S).multiplyScalar(r.panSpeed),ee(A.x,A.y),S.copy(C),r.update()}function lt(Ne){Le(Ne),Ne.deltaY<0?be(pe()):Ne.deltaY>0&&ye(pe()),r.update()}function Je(Ne){let pt=!1;switch(Ne.code){case r.keys.UP:ee(0,r.keyPanSpeed),pt=!0;break;case r.keys.BOTTOM:ee(0,-r.keyPanSpeed),pt=!0;break;case r.keys.LEFT:ee(r.keyPanSpeed,0),pt=!0;break;case r.keys.RIGHT:ee(-r.keyPanSpeed,0),pt=!0;break}pt&&(Ne.preventDefault(),r.update())}function Qe(){if(H.length==1)x.set(H[0].pageX,H[0].pageY);else{const Ne=.5*(H[0].pageX+H[1].pageX),pt=.5*(H[0].pageY+H[1].pageY);x.set(Ne,pt)}}function ge(){if(H.length==1)S.set(H[0].pageX,H[0].pageY);else{const Ne=.5*(H[0].pageX+H[1].pageX),pt=.5*(H[0].pageY+H[1].pageY);S.set(Ne,pt)}}function et(){const Ne=H[0].pageX-H[1].pageX,pt=H[0].pageY-H[1].pageY,Te=Math.sqrt(Ne*Ne+pt*pt);P.set(0,Te)}function Ke(){r.enableZoom&&et(),r.enablePan&&ge()}function Tt(){r.enableZoom&&et(),r.enableRotate&&Qe()}function ke(Ne){if(H.length==1)b.set(Ne.pageX,Ne.pageY);else{const Te=ht(Ne),xt=.5*(Ne.pageX+Te.x),tn=.5*(Ne.pageY+Te.y);b.set(xt,tn)}w.subVectors(b,x).multiplyScalar(r.rotateSpeed);const pt=r.domElement;pt&&(re(2*Math.PI*w.x/pt.clientHeight),me(2*Math.PI*w.y/pt.clientHeight)),x.copy(b)}function Vt(Ne){if(H.length==1)C.set(Ne.pageX,Ne.pageY);else{const pt=ht(Ne),Te=.5*(Ne.pageX+pt.x),xt=.5*(Ne.pageY+pt.y);C.set(Te,xt)}A.subVectors(C,S).multiplyScalar(r.panSpeed),ee(A.x,A.y),S.copy(C)}function zt(Ne){const pt=ht(Ne),Te=Ne.pageX-pt.x,xt=Ne.pageY-pt.y,tn=Math.sqrt(Te*Te+xt*xt);k.set(0,tn),F.set(0,Math.pow(k.y/P.y,r.zoomSpeed)),ye(F.y),P.copy(k)}function $t(Ne){r.enableZoom&&zt(Ne),r.enablePan&&Vt(Ne)}function Qt(Ne){r.enableZoom&&zt(Ne),r.enableRotate&&ke(Ne)}function Ie(Ne){var pt,Te;r.enabled!==!1&&(H.length===0&&((pt=r.domElement)==null||pt.ownerDocument.addEventListener("pointermove",Me),(Te=r.domElement)==null||Te.ownerDocument.addEventListener("pointerup",wt)),en(Ne),Ne.pointerType==="touch"?Rt(Ne):Bt(Ne))}function Me(Ne){r.enabled!==!1&&(Ne.pointerType==="touch"?Xt(Ne):jt(Ne))}function wt(Ne){var pt,Te,xt;Et(Ne),H.length===0&&((pt=r.domElement)==null||pt.releasePointerCapture(Ne.pointerId),(Te=r.domElement)==null||Te.ownerDocument.removeEventListener("pointermove",Me),(xt=r.domElement)==null||xt.ownerDocument.removeEventListener("pointerup",wt)),r.dispatchEvent(s),l=a.NONE}function St(Ne){Et(Ne)}function Bt(Ne){let pt;switch(Ne.button){case 0:pt=r.mouseButtons.LEFT;break;case 1:pt=r.mouseButtons.MIDDLE;break;case 2:pt=r.mouseButtons.RIGHT;break;default:pt=-1}switch(pt){case ru.DOLLY:if(r.enableZoom===!1)return;Be(Ne),l=a.DOLLY;break;case ru.ROTATE:if(Ne.ctrlKey||Ne.metaKey||Ne.shiftKey){if(r.enablePan===!1)return;ot(Ne),l=a.PAN}else{if(r.enableRotate===!1)return;dt(Ne),l=a.ROTATE}break;case ru.PAN:if(Ne.ctrlKey||Ne.metaKey||Ne.shiftKey){if(r.enableRotate===!1)return;dt(Ne),l=a.ROTATE}else{if(r.enablePan===!1)return;ot(Ne),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(o)}function jt(Ne){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;at(Ne);break;case a.DOLLY:if(r.enableZoom===!1)return;It(Ne);break;case a.PAN:if(r.enablePan===!1)return;Lt(Ne);break}}function Rn(Ne){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(Ne.preventDefault(),r.dispatchEvent(o),lt(Ne),r.dispatchEvent(s))}function ft(Ne){r.enabled===!1||r.enablePan===!1||Je(Ne)}function Rt(Ne){switch(qt(Ne),H.length){case 1:switch(r.touches.ONE){case iu.ROTATE:if(r.enableRotate===!1)return;Qe(),l=a.TOUCH_ROTATE;break;case iu.PAN:if(r.enablePan===!1)return;ge(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case iu.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ke(),l=a.TOUCH_DOLLY_PAN;break;case iu.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Tt(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(o)}function Xt(Ne){switch(qt(Ne),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;ke(Ne),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;Vt(Ne),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;$t(Ne),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Qt(Ne),r.update();break;default:l=a.NONE}}function Tn(Ne){r.enabled!==!1&&Ne.preventDefault()}function en(Ne){H.push(Ne)}function Et(Ne){delete Y[Ne.pointerId];for(let pt=0;pt<H.length;pt++)if(H[pt].pointerId==Ne.pointerId){H.splice(pt,1);return}}function qt(Ne){let pt=Y[Ne.pointerId];pt===void 0&&(pt=new Ft,Y[Ne.pointerId]=pt),pt.set(Ne.pageX,Ne.pageY)}function ht(Ne){const pt=Ne.pointerId===H[0].pointerId?H[1]:H[0];return Y[pt.pointerId]}n!==void 0&&this.connect(n),this.update()}};const R0t=V.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:r,enableDamping:i=!0,keyEvents:o=!1,onChange:s,onStart:a,onEnd:l,...d},h)=>{const p=Bg(F=>F.invalidate),g=Bg(F=>F.camera),v=Bg(F=>F.gl),x=Bg(F=>F.events),b=Bg(F=>F.setEvents),w=Bg(F=>F.set),S=Bg(F=>F.get),C=Bg(F=>F.performance),A=e||g,P=r||x.connected||v.domElement,k=V.useMemo(()=>new I0t(A),[A]);return Khe(()=>{k.enabled&&k.update()},-1),V.useEffect(()=>(o&&k.connect(o===!0?P:o),k.connect(P),()=>void k.dispose()),[o,P,n,k,p]),V.useEffect(()=>{const F=J=>{p(),n&&C.regress(),s&&s(J)},B=J=>{a&&a(J)},W=J=>{l&&l(J)};return k.addEventListener("change",F),k.addEventListener("start",B),k.addEventListener("end",W),()=>{k.removeEventListener("start",B),k.removeEventListener("end",W),k.removeEventListener("change",F)}},[s,a,l,k,p,b]),V.useEffect(()=>{if(t){const F=S().controls;return w({controls:k}),()=>w({controls:F})}},[t,k]),V.createElement("primitive",de({ref:h,object:k,enableDamping:i},d))});var hV={},k0t=Xr;Object.defineProperty(hV,"__esModule",{value:!0});var nfe=hV.default=void 0,O0t=k0t(oi()),L0t=z;nfe=hV.default=(0,O0t.default)((0,L0t.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6m0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20"}),"AccountCircle");const D0t=t=>V.createElement("svg",{width:189,height:100,viewBox:"0 0 189 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},V.createElement("g",{filter:"url(#filter0_i_515_194)"},V.createElement("path",{d:"M50.5271 48.0609L50.5394 66.4046C49.79 67.2593 48.6447 68.1767 47.1037 69.1569C45.5836 70.1371 43.6362 70.9822 41.2617 71.6921C38.8871 72.3812 36.054 72.7268 32.7624 72.729C29.7832 72.731 27.0745 72.2537 24.6364 71.297C22.1983 70.3194 20.1035 68.8938 18.3523 67.0199C16.601 65.1253 15.2453 62.8137 14.2851 60.0851C13.3458 57.3566 12.875 54.2319 12.8726 50.7111L12.8708 48.0236C12.8685 44.5028 13.3351 41.3774 14.2708 38.6476C15.2065 35.9179 16.5278 33.6149 18.2349 31.7387C19.942 29.8418 21.9723 28.4029 24.3258 27.4222C26.6793 26.4414 29.2831 25.9501 32.1373 25.9482C36.1998 25.9455 39.5232 26.5995 42.1074 27.9103C44.6916 29.2002 46.6511 30.9906 47.986 33.2813C49.3417 35.5721 50.1768 38.2069 50.4913 41.1859L40.6788 41.1925C40.4694 39.6718 40.0519 38.3596 39.4261 37.2558C38.8212 36.152 37.9561 35.3089 36.8307 34.7263C35.7053 34.1229 34.2467 33.8218 32.4551 33.823C31.0176 33.8239 29.7157 34.1269 28.5494 34.7318C27.404 35.3159 26.4358 36.202 25.645 37.39C24.8541 38.5781 24.2509 40.0576 23.8354 41.8287C23.4199 43.579 23.213 45.6208 23.2145 47.9542L23.2164 50.7042C23.2179 53.0375 23.4276 55.0894 23.8455 56.86C24.2842 58.6305 24.9206 60.1093 25.7547 61.2962C26.5888 62.4623 27.6415 63.347 28.9127 63.9504C30.2048 64.5537 31.705 64.8547 33.4133 64.8536C34.7467 64.8527 35.8716 64.7478 36.7881 64.5388C37.7046 64.3091 38.4545 64.0273 39.0376 63.6936C39.6207 63.339 40.0579 63.0158 40.3494 62.7239L40.3444 55.1614L32.2506 55.1669L32.2459 48.0731L50.5271 48.0609ZM57.4815 26.5875L74.9502 26.5758C78.4294 26.5734 81.4402 27.0923 83.9825 28.1322C86.5457 29.1722 88.5155 30.7125 89.8919 32.7533C91.2682 34.794 91.9574 37.3144 91.9594 40.3144C91.9611 42.8144 91.5563 44.9397 90.7449 46.6902C89.9336 48.4407 88.7888 49.8894 87.3104 51.0363C85.8528 52.1831 84.1451 53.1113 82.1872 53.8209L78.8759 55.6357L64.0009 55.6456L63.9331 47.7394L74.9956 47.732C76.5165 47.731 77.7767 47.4593 78.7763 46.917C79.776 46.3746 80.5255 45.6137 81.0248 44.6342C81.545 43.6339 81.8046 42.467 81.8037 41.1337C81.8028 39.7587 81.5416 38.5714 81.0201 37.5717C80.4986 36.5721 79.7272 35.8122 78.7061 35.292C77.7057 34.751 76.4555 34.481 74.9555 34.482L67.6743 34.4869L67.6994 72.0806L57.5119 72.0875L57.4815 26.5875ZM82.6994 72.0706L72.4672 51.8587L83.2171 51.8202L93.6054 71.5945L93.6057 72.0633L82.6994 72.0706ZM115.068 61.9552L125.169 26.5422L136.513 26.5346L120.949 72.045L113.543 72.0499L115.068 61.9552ZM105.825 26.5551L115.943 61.9546L117.543 72.0473L110.043 72.0523L94.5127 26.5627L105.825 26.5551ZM166.033 56.7648L176.158 56.758C175.993 59.8831 175.141 62.6441 173.601 65.041C172.082 67.417 169.968 69.283 167.261 70.639C164.554 71.9741 161.335 72.6429 157.606 72.6454C154.627 72.6474 151.96 72.1388 149.605 71.1196C147.25 70.1003 145.249 68.6433 143.602 66.7486C141.976 64.833 140.724 62.5317 139.848 59.8448C138.992 57.1371 138.562 54.0853 138.56 50.6894L138.558 47.9082C138.556 44.5124 139.002 41.46 139.896 38.751C140.79 36.0421 142.07 33.7288 143.735 31.811C145.4 29.8932 147.399 28.4231 149.732 27.4007C152.065 26.3783 154.669 25.8662 157.544 25.8642C161.419 25.8616 164.69 26.5574 167.357 27.9514C170.025 29.3455 172.089 31.2607 173.549 33.6973C175.03 36.1338 175.917 38.9144 176.211 42.0392L166.054 42.046C165.97 40.2753 165.635 38.7859 165.051 37.578C164.467 36.3492 163.571 35.4227 162.362 34.7985C161.153 34.1743 159.549 33.8629 157.549 33.8642C156.091 33.8652 154.809 34.1369 153.706 34.6793C152.623 35.2217 151.717 36.066 150.989 37.2124C150.281 38.3587 149.751 39.8174 149.398 41.5884C149.045 43.3387 148.869 45.4221 148.871 47.8388L148.873 50.6825C148.874 53.0784 149.032 55.1512 149.346 56.901C149.659 58.6508 150.16 60.0983 150.848 61.2437C151.558 62.3891 152.464 63.2426 153.569 63.8044C154.673 64.3662 156.017 64.6465 157.601 64.6454C159.413 64.6442 160.923 64.362 162.131 63.7987C163.339 63.2145 164.266 62.3389 164.911 61.1718C165.556 60.0047 165.93 58.5357 166.033 56.7648Z",fill:"#0904D8"})),V.createElement("defs",null,V.createElement("filter",{id:"filter0_i_515_194",x:12.8561,y:25.8517,width:163.375,height:46.8906,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},V.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),V.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),V.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),V.createElement("feOffset",null),V.createElement("feGaussianBlur",{stdDeviation:29.85}),V.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:-1,k3:1}),V.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.227569 0 0 0 0 0.298979 0 0 0 0 0.941667 0 0 0 1 0"}),V.createElement("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow_515_194"})))),N0t=Wr(t=>({toolbar:{backgroundColor:t.palette.background.paper},image:{alignSelf:"center",maxWidth:"240px",maxHeight:"20px",width:"auto",height:"auto"}})),z0t=({title:t,navIcon:e,tabs:n})=>{var b;const r=Jf(),[i,o]=V.useState(null),[s,a]=V.useState(!1),l=N0t(),d=s?"Use Light Mode":"Use Dark Mode",h=z.jsx(Yg,{arrow:!0,title:d,children:z.jsx(hr,{onClick:()=>a(w=>!w),children:s?z.jsx(L3e,{}):z.jsx(D3e,{})})}),p=z.jsx(N3e,{}),g=z.jsx(z3e,{color:"disabled"}),v=z.jsx(Yg,{arrow:!0,title:((b=i==null?void 0:i.ws)==null?void 0:b.url)??"Server unknown",children:z.jsx(hr,{children:i!=null&&i.connected?p:g})}),x=[{title:"ROS",url:"/ros",submenu:[{title:"Connect ROS",action:()=>r("/topics")},{title:"Show Topics",action:()=>r("/topics")},{title:"Show Services",url:"seo",input:"yaml"}]},{title:"uav",url:"/services",submenu:[{title:"Web Design",url:"web-design"},{title:"Web Development",url:"web-dev"},{title:"SEO",url:"seo"}]}];return z.jsx(j1,{position:"static",color:"transparent",className:l.toolbar,children:z.jsx(s_,{maxWidth:"xl",children:z.jsxs(Rm,{variant:"dense",children:[e??z.jsx(hr,{children:z.jsx(D0t,{className:l.image})}),z.jsx(yn,{variant:"h6",style:{flexGrow:1,marginLeft:"1rem"},children:t??"Management Tool"}),n&&z.jsx(z.Fragment,{children:n}),Ye.Children.toArray(x.map((w,S)=>z.jsx(V.Fragment,{children:z.jsx(moe,{items:w,depthLevel:0})},"s1-"+S))),h,v,z.jsx(nfe,{})]})})})},KJ={type:"change"},Rz={type:"start"},ZJ={type:"end"},jA=new Ky,JJ=new Ef,F0t=Math.cos(70*R8.DEG2RAD);class B0t extends jh{constructor(e,n){super(),this.object=e,this.domElement=n,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Oe,this.cursor=new Oe,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:ru.ROTATE,MIDDLE:ru.DOLLY,RIGHT:ru.PAN},this.touches={ONE:iu.ROTATE,TWO:iu.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Te){Te.addEventListener("keydown",ft),this._domElementKeyEvents=Te},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",ft),this._domElementKeyEvents=null},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(KJ),r.update(),o=i.NONE},this.update=function(){const Te=new Oe,xt=new Ts().setFromUnitVectors(e.up,new Oe(0,1,0)),tn=xt.clone().invert(),Xe=new Oe,Yt=new Ts,ve=new Oe,ie=2*Math.PI;return function(Se=null){const De=r.object.position;Te.copy(De).sub(r.target),Te.applyQuaternion(xt),a.setFromVector3(Te),r.autoRotate&&o===i.NONE&&le(H(Se)),r.enableDamping?(a.theta+=l.theta*r.dampingFactor,a.phi+=l.phi*r.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let We=r.minAzimuthAngle,Ze=r.maxAzimuthAngle;isFinite(We)&&isFinite(Ze)&&(We<-Math.PI?We+=ie:We>Math.PI&&(We-=ie),Ze<-Math.PI?Ze+=ie:Ze>Math.PI&&(Ze-=ie),We<=Ze?a.theta=Math.max(We,Math.min(Ze,a.theta)):a.theta=a.theta>(We+Ze)/2?Math.max(We,a.theta):Math.min(Ze,a.theta)),a.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,a.phi)),a.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(h,r.dampingFactor):r.target.add(h),r.target.sub(r.cursor),r.target.clampLength(r.minTargetRadius,r.maxTargetRadius),r.target.add(r.cursor);let tt=!1;if(r.zoomToCursor&&F||r.object.isOrthographicCamera)a.radius=be(a.radius);else{const Ve=a.radius;a.radius=be(a.radius*d),tt=Ve!=a.radius}if(Te.setFromSpherical(a),Te.applyQuaternion(tn),De.copy(r.target).add(Te),r.object.lookAt(r.target),r.enableDamping===!0?(l.theta*=1-r.dampingFactor,l.phi*=1-r.dampingFactor,h.multiplyScalar(1-r.dampingFactor)):(l.set(0,0,0),h.set(0,0,0)),r.zoomToCursor&&F){let Ve=null;if(r.object.isPerspectiveCamera){const At=Te.length();Ve=be(At*d);const Dt=At-Ve;r.object.position.addScaledVector(P,Dt),r.object.updateMatrixWorld(),tt=!!Dt}else if(r.object.isOrthographicCamera){const At=new Oe(k.x,k.y,0);At.unproject(r.object);const Dt=r.object.zoom;r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/d)),r.object.updateProjectionMatrix(),tt=Dt!==r.object.zoom;const Ct=new Oe(k.x,k.y,0);Ct.unproject(r.object),r.object.position.sub(Ct).add(At),r.object.updateMatrixWorld(),Ve=Te.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Ve!==null&&(this.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Ve).add(r.object.position):(jA.origin.copy(r.object.position),jA.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(jA.direction))<F0t?e.lookAt(r.target):(JJ.setFromNormalAndCoplanarPoint(r.object.up,r.target),jA.intersectPlane(JJ,r.target))))}else if(r.object.isOrthographicCamera){const Ve=r.object.zoom;r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/d)),Ve!==r.object.zoom&&(r.object.updateProjectionMatrix(),tt=!0)}return d=1,F=!1,tt||Xe.distanceToSquared(r.object.position)>s||8*(1-Yt.dot(r.object.quaternion))>s||ve.distanceToSquared(r.target)>s?(r.dispatchEvent(KJ),Xe.copy(r.object.position),Yt.copy(r.object.quaternion),ve.copy(r.target),!0):!1}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",Tn),r.domElement.removeEventListener("pointerdown",$t),r.domElement.removeEventListener("pointercancel",Ie),r.domElement.removeEventListener("wheel",St),r.domElement.removeEventListener("pointermove",Qt),r.domElement.removeEventListener("pointerup",Ie),r.domElement.getRootNode().removeEventListener("keydown",jt,{capture:!0}),r._domElementKeyEvents!==null&&(r._domElementKeyEvents.removeEventListener("keydown",ft),r._domElementKeyEvents=null)};const r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=i.NONE;const s=1e-6,a=new yE,l=new yE;let d=1;const h=new Oe,p=new Ft,g=new Ft,v=new Ft,x=new Ft,b=new Ft,w=new Ft,S=new Ft,C=new Ft,A=new Ft,P=new Oe,k=new Ft;let F=!1;const B=[],W={};let J=!1;function H(Te){return Te!==null?2*Math.PI/60*r.autoRotateSpeed*Te:2*Math.PI/60/60*r.autoRotateSpeed}function Y(Te){const xt=Math.abs(Te*.01);return Math.pow(.95,r.zoomSpeed*xt)}function le(Te){l.theta-=Te}function pe(Te){l.phi-=Te}const re=function(){const Te=new Oe;return function(tn,Xe){Te.setFromMatrixColumn(Xe,0),Te.multiplyScalar(-tn),h.add(Te)}}(),me=function(){const Te=new Oe;return function(tn,Xe){r.screenSpacePanning===!0?Te.setFromMatrixColumn(Xe,1):(Te.setFromMatrixColumn(Xe,0),Te.crossVectors(r.object.up,Te)),Te.multiplyScalar(tn),h.add(Te)}}(),he=function(){const Te=new Oe;return function(tn,Xe){const Yt=r.domElement;if(r.object.isPerspectiveCamera){const ve=r.object.position;Te.copy(ve).sub(r.target);let ie=Te.length();ie*=Math.tan(r.object.fov/2*Math.PI/180),re(2*tn*ie/Yt.clientHeight,r.object.matrix),me(2*Xe*ie/Yt.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(re(tn*(r.object.right-r.object.left)/r.object.zoom/Yt.clientWidth,r.object.matrix),me(Xe*(r.object.top-r.object.bottom)/r.object.zoom/Yt.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function we(Te){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?d/=Te:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function ee(Te){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?d*=Te:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function ye(Te,xt){if(!r.zoomToCursor)return;F=!0;const tn=r.domElement.getBoundingClientRect(),Xe=Te-tn.left,Yt=xt-tn.top,ve=tn.width,ie=tn.height;k.x=Xe/ve*2-1,k.y=-(Yt/ie)*2+1,P.set(k.x,k.y,1).unproject(r.object).sub(r.object.position).normalize()}function be(Te){return Math.max(r.minDistance,Math.min(r.maxDistance,Te))}function Le(Te){p.set(Te.clientX,Te.clientY)}function je(Te){ye(Te.clientX,Te.clientX),S.set(Te.clientX,Te.clientY)}function dt(Te){x.set(Te.clientX,Te.clientY)}function Be(Te){g.set(Te.clientX,Te.clientY),v.subVectors(g,p).multiplyScalar(r.rotateSpeed);const xt=r.domElement;le(2*Math.PI*v.x/xt.clientHeight),pe(2*Math.PI*v.y/xt.clientHeight),p.copy(g),r.update()}function ot(Te){C.set(Te.clientX,Te.clientY),A.subVectors(C,S),A.y>0?we(Y(A.y)):A.y<0&&ee(Y(A.y)),S.copy(C),r.update()}function at(Te){b.set(Te.clientX,Te.clientY),w.subVectors(b,x).multiplyScalar(r.panSpeed),he(w.x,w.y),x.copy(b),r.update()}function It(Te){ye(Te.clientX,Te.clientY),Te.deltaY<0?ee(Y(Te.deltaY)):Te.deltaY>0&&we(Y(Te.deltaY)),r.update()}function Lt(Te){let xt=!1;switch(Te.code){case r.keys.UP:Te.ctrlKey||Te.metaKey||Te.shiftKey?pe(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):he(0,r.keyPanSpeed),xt=!0;break;case r.keys.BOTTOM:Te.ctrlKey||Te.metaKey||Te.shiftKey?pe(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):he(0,-r.keyPanSpeed),xt=!0;break;case r.keys.LEFT:Te.ctrlKey||Te.metaKey||Te.shiftKey?le(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):he(r.keyPanSpeed,0),xt=!0;break;case r.keys.RIGHT:Te.ctrlKey||Te.metaKey||Te.shiftKey?le(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):he(-r.keyPanSpeed,0),xt=!0;break}xt&&(Te.preventDefault(),r.update())}function lt(Te){if(B.length===1)p.set(Te.pageX,Te.pageY);else{const xt=Ne(Te),tn=.5*(Te.pageX+xt.x),Xe=.5*(Te.pageY+xt.y);p.set(tn,Xe)}}function Je(Te){if(B.length===1)x.set(Te.pageX,Te.pageY);else{const xt=Ne(Te),tn=.5*(Te.pageX+xt.x),Xe=.5*(Te.pageY+xt.y);x.set(tn,Xe)}}function Qe(Te){const xt=Ne(Te),tn=Te.pageX-xt.x,Xe=Te.pageY-xt.y,Yt=Math.sqrt(tn*tn+Xe*Xe);S.set(0,Yt)}function ge(Te){r.enableZoom&&Qe(Te),r.enablePan&&Je(Te)}function et(Te){r.enableZoom&&Qe(Te),r.enableRotate&&lt(Te)}function Ke(Te){if(B.length==1)g.set(Te.pageX,Te.pageY);else{const tn=Ne(Te),Xe=.5*(Te.pageX+tn.x),Yt=.5*(Te.pageY+tn.y);g.set(Xe,Yt)}v.subVectors(g,p).multiplyScalar(r.rotateSpeed);const xt=r.domElement;le(2*Math.PI*v.x/xt.clientHeight),pe(2*Math.PI*v.y/xt.clientHeight),p.copy(g)}function Tt(Te){if(B.length===1)b.set(Te.pageX,Te.pageY);else{const xt=Ne(Te),tn=.5*(Te.pageX+xt.x),Xe=.5*(Te.pageY+xt.y);b.set(tn,Xe)}w.subVectors(b,x).multiplyScalar(r.panSpeed),he(w.x,w.y),x.copy(b)}function ke(Te){const xt=Ne(Te),tn=Te.pageX-xt.x,Xe=Te.pageY-xt.y,Yt=Math.sqrt(tn*tn+Xe*Xe);C.set(0,Yt),A.set(0,Math.pow(C.y/S.y,r.zoomSpeed)),we(A.y),S.copy(C);const ve=(Te.pageX+xt.x)*.5,ie=(Te.pageY+xt.y)*.5;ye(ve,ie)}function Vt(Te){r.enableZoom&&ke(Te),r.enablePan&&Tt(Te)}function zt(Te){r.enableZoom&&ke(Te),r.enableRotate&&Ke(Te)}function $t(Te){r.enabled!==!1&&(B.length===0&&(r.domElement.setPointerCapture(Te.pointerId),r.domElement.addEventListener("pointermove",Qt),r.domElement.addEventListener("pointerup",Ie)),!qt(Te)&&(en(Te),Te.pointerType==="touch"?Rt(Te):Me(Te)))}function Qt(Te){r.enabled!==!1&&(Te.pointerType==="touch"?Xt(Te):wt(Te))}function Ie(Te){switch(Et(Te),B.length){case 0:r.domElement.releasePointerCapture(Te.pointerId),r.domElement.removeEventListener("pointermove",Qt),r.domElement.removeEventListener("pointerup",Ie),r.dispatchEvent(ZJ),o=i.NONE;break;case 1:const xt=B[0],tn=W[xt];Rt({pointerId:xt,pageX:tn.x,pageY:tn.y});break}}function Me(Te){let xt;switch(Te.button){case 0:xt=r.mouseButtons.LEFT;break;case 1:xt=r.mouseButtons.MIDDLE;break;case 2:xt=r.mouseButtons.RIGHT;break;default:xt=-1}switch(xt){case ru.DOLLY:if(r.enableZoom===!1)return;je(Te),o=i.DOLLY;break;case ru.ROTATE:if(Te.ctrlKey||Te.metaKey||Te.shiftKey){if(r.enablePan===!1)return;dt(Te),o=i.PAN}else{if(r.enableRotate===!1)return;Le(Te),o=i.ROTATE}break;case ru.PAN:if(Te.ctrlKey||Te.metaKey||Te.shiftKey){if(r.enableRotate===!1)return;Le(Te),o=i.ROTATE}else{if(r.enablePan===!1)return;dt(Te),o=i.PAN}break;default:o=i.NONE}o!==i.NONE&&r.dispatchEvent(Rz)}function wt(Te){switch(o){case i.ROTATE:if(r.enableRotate===!1)return;Be(Te);break;case i.DOLLY:if(r.enableZoom===!1)return;ot(Te);break;case i.PAN:if(r.enablePan===!1)return;at(Te);break}}function St(Te){r.enabled===!1||r.enableZoom===!1||o!==i.NONE||(Te.preventDefault(),r.dispatchEvent(Rz),It(Bt(Te)),r.dispatchEvent(ZJ))}function Bt(Te){const xt=Te.deltaMode,tn={clientX:Te.clientX,clientY:Te.clientY,deltaY:Te.deltaY};switch(xt){case 1:tn.deltaY*=16;break;case 2:tn.deltaY*=100;break}return Te.ctrlKey&&!J&&(tn.deltaY*=10),tn}function jt(Te){Te.key==="Control"&&(J=!0,r.domElement.getRootNode().addEventListener("keyup",Rn,{passive:!0,capture:!0}))}function Rn(Te){Te.key==="Control"&&(J=!1,r.domElement.getRootNode().removeEventListener("keyup",Rn,{passive:!0,capture:!0}))}function ft(Te){r.enabled===!1||r.enablePan===!1||Lt(Te)}function Rt(Te){switch(ht(Te),B.length){case 1:switch(r.touches.ONE){case iu.ROTATE:if(r.enableRotate===!1)return;lt(Te),o=i.TOUCH_ROTATE;break;case iu.PAN:if(r.enablePan===!1)return;Je(Te),o=i.TOUCH_PAN;break;default:o=i.NONE}break;case 2:switch(r.touches.TWO){case iu.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ge(Te),o=i.TOUCH_DOLLY_PAN;break;case iu.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;et(Te),o=i.TOUCH_DOLLY_ROTATE;break;default:o=i.NONE}break;default:o=i.NONE}o!==i.NONE&&r.dispatchEvent(Rz)}function Xt(Te){switch(ht(Te),o){case i.TOUCH_ROTATE:if(r.enableRotate===!1)return;Ke(Te),r.update();break;case i.TOUCH_PAN:if(r.enablePan===!1)return;Tt(Te),r.update();break;case i.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Vt(Te),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;zt(Te),r.update();break;default:o=i.NONE}}function Tn(Te){r.enabled!==!1&&Te.preventDefault()}function en(Te){B.push(Te.pointerId)}function Et(Te){delete W[Te.pointerId];for(let xt=0;xt<B.length;xt++)if(B[xt]==Te.pointerId){B.splice(xt,1);return}}function qt(Te){for(let xt=0;xt<B.length;xt++)if(B[xt]==Te.pointerId)return!0;return!1}function ht(Te){let xt=W[Te.pointerId];xt===void 0&&(xt=new Ft,W[Te.pointerId]=xt),xt.set(Te.pageX,Te.pageY)}function Ne(Te){const xt=Te.pointerId===B[0]?B[1]:B[0];return W[xt]}r.domElement.addEventListener("contextmenu",Tn),r.domElement.addEventListener("pointerdown",$t),r.domElement.addEventListener("pointercancel",Ie),r.domElement.addEventListener("wheel",St,{passive:!1}),r.domElement.getRootNode().addEventListener("keydown",jt,{passive:!0,capture:!0}),this.update()}}Fhe({OrbitControls:B0t});function j0t(t){const e=t.materialProps??{wireframe:!0,color:new In(9358407)};return z.jsxs("group",{rotation:[0,0,t.theta],position:[t.x,t.y,0],scale:t.scale??[1,1,1],children:[z.jsxs("mesh",{scale:[.05,.05,.05],children:[z.jsx("boxGeometry",{}),z.jsx("meshBasicMaterial",{color:16711680})]}),z.jsx("group",{position:[.75,0,0],children:z.jsxs("mesh",{rotation:[0,0,-Math.PI/2],scale:[.5,.5,.5],children:[z.jsx("coneGeometry",{}),z.jsx("meshBasicMaterial",{...e})]})}),z.jsx("group",{position:[.25,0,0],children:z.jsxs("mesh",{rotation:[0,0,-Math.PI/2],scale:[.2,.5,.2],children:[z.jsx("cylinderGeometry",{}),z.jsx("meshBasicMaterial",{...e})]})})]})}function $0t({position:t,polyhedron:e}){const n=V.useRef(),[r,i]=V.useState(1);return console.log(e),Khe((o,s)=>{n.current.rotation.x+=s,n.current.rotation.y+=.5*s}),z.jsx("mesh",{position:t,ref:n,onPointerDown:()=>{i((r+1)%3)},geometry:e[r],children:z.jsx("meshBasicMaterial",{color:"lime",wireframe:!0})})}const U0t=Wr(t=>({root:{margin:"0",height:"100vh"},sidebarStyle:{display:"flex",flexDirection:"column",position:"fixed",left:0,top:"88px",height:"calc(100% - 95px)",width:"560px",margin:"0px",zIndex:3},middleStyle:{flex:1,display:"grid"},panelElevation:{display:"flex",flexDirection:"column",position:"fixed",right:0,bottom:0,height:"30vh",width:"calc(100% - 560px)",margin:"0px",zIndex:3}})),V0t=(t,e)=>{setList([...list,toastProperties])},H0t=()=>{const t=U0t(),e=0,[n,r]=V.useState(!1),i=nr(v=>v.data.positions),o=nr(v=>v.mission.route),[s,a]=V.useState([]);V.useState();const[l,d]=V.useState([]),h=[new Zy,new vw(.785398),new gT(.785398)];function p(v,x){const b=v.meterInMercatorCoordinateUnits(),S=(x.x-v.x)/b,A=(v.y-x.y)/b;return{dEastMeter:S,dNorthMeter:A}}V.useEffect(()=>{let v=[],x=null,b=null,w=[],S=[],C=[];o.map((A,P)=>{v=[],A.wp.map((k,F)=>{if(x==null){x=[k.pos[1],k.pos[0],0],b=ka.MercatorCoordinate.fromLngLat({lng:k.pos[1],lat:k.pos[0]},0);let J=ka.MercatorCoordinate.fromLngLat({lng:k.pos[1],lat:k.pos[0]},k.pos[2]),H=p(b,J);console.log(b),console.log(J),console.log(H)}let B=ka.MercatorCoordinate.fromLngLat({lng:k.pos[1],lat:k.pos[0]},k.pos[2]),W=p(b,B);v.push([W.dEastMeter,W.dNorthMeter,k.pos[2]-x[2]])}),S.push(v)}),console.log(v),S.map(A=>{let P=[];A.map(k=>{P.push(new Oe(k[0],k[2],k[1]))}),C.push(new Pr().setFromPoints(P))}),v.map(A=>{w.push(new Oe(A[0],A[2],A[1]))}),a(C)},[o]),V.useEffect(()=>{d(Object.values(i))},[i]);const g=z.jsx(z.Fragment,{children:z.jsxs($re,{value:e,onChange:(v,x)=>navigate(`/robot/${id}/${x}`),style:{flexGrow:1},children:[z.jsx(o0,{label:"Viz"}),z.jsx(o0,{label:"Imagery"}),z.jsx(o0,{label:"Stats"}),z.jsx(o0,{label:"Report"})]})});return z.jsx("div",{className:t.root,children:z.jsx(EO,{children:z.jsxs(Z1,{notification:V0t,children:[z.jsx(z0t,{tabs:g}),z.jsx(J1,{}),z.jsx("div",{style:{float:"right",width:"calc(100% - 560px)",height:"calc(70vh - 95px)",right:"0px",margin:"auto"},children:z.jsxs(T0t,{camera:{position:[1,2,3]},children:[z.jsx($0t,{position:[2,2,0],polyhedron:h}),Ye.Children.toArray(s.map((v,x)=>z.jsx(V.Fragment,{children:z.jsx("line",{geometry:v,children:z.jsx("lineBasicMaterial",{attach:"material",color:Hf.colors_devices[x],linewidth:10,linecap:"round",linejoin:"round"})})},"line"+x))),z.jsxs("mesh",{"rotation-y":2,children:[z.jsx("boxGeometry",{}),z.jsx("meshBasicMaterial",{color:"orange"})]}),z.jsxs("mesh",{rotation:[-Math.PI/2,0,0],children:[z.jsx("planeGeometry",{args:[5,5,64,64]}),z.jsx("meshBasicMaterial",{attach:"material",transparent:!0,side:pd})]}),z.jsx(j0t,{x:0,y:0,theta:0,materialProps:{color:new In(3311528),wireframe:!0}}),z.jsx(R0t,{}),z.jsx("axesHelper",{args:[5]}),z.jsx("gridHelper",{})]})}),z.jsx("div",{className:t.sidebarStyle,children:z.jsx("div",{className:t.middleStyle,children:z.jsx(jo,{square:!0,children:z.jsx(u6,{SetOpenSave:r})})})}),z.jsx("div",{className:t.panelElevation,children:z.jsx("div",{className:t.middleStyle,children:z.jsx(jo,{square:!0,children:z.jsx(dL,{})})})}),n&&z.jsx(y8,{SetOpenSave:r})]})})})},rfe=Wr(t=>({root:{height:"100%",display:"flex",flexDirection:"column"},content:{overflow:"auto",paddingTop:t.spacing(2),paddingBottom:t.spacing(2)},buttons:{marginTop:t.spacing(2),marginBottom:t.spacing(2),display:"flex",justifyContent:"space-evenly","& > *":{flexBasis:"33%"}},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)},card:{pointerEvents:"auto"},media:{width:t.dimensions.popupMaxWidth,display:"flex",justifyContent:"flex-end",alignItems:"flex-start",background:"black"},media1:{width:"95vw",height:"90vh",display:"flex",justifyContent:"flex-end",alignItems:"flex-start",background:"black"},gruopBtn:{display:"flex",right:"5px",height:"40px",position:"absolute"},mediaButton:{color:t.palette.colors.white,mixBlendMode:"difference"},tittle:{display:"block",width:"calc( 100% - 60pt )",paddingLeft:"15pt",paddingTop:"10pt",paddingBottom:"10pt",textAlign:"left"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(1,1,0,2)},root_max:{pointerEvents:"none",position:"fixed",zIndex:6,left:"50%",top:"8vh",transform:"translateX(-50%)"}})),W0t=({file:t,closecard:e})=>{const n=rfe();return z.jsx("div",{className:n.root_max,children:t&&z.jsxs(Nh,{elevation:3,className:n.card,children:[z.jsx(xTe,{action:z.jsx(hr,{"aria-label":"close",onClick:()=>e(),children:z.jsx(Ph,{})}),title:t.name,subheader:"date:September 14, 2016"}),z.jsx(Ire,{component:"img",alt:t.name,image:`/api/files/download/${t.route}${t.name}`}),z.jsx(Fk,{children:z.jsxs(yn,{variant:"body2",color:"text.secondary",children:["Result:",JSON.stringify(t.attributes)]})})]})})},G0t=()=>{const t=rfe(),e=Jf(),{id:n}=bte(),[r,i]=V.useState(null),[o,s]=V.useState(null),[a,l]=V.useState(null),[d,h]=V.useState(null),p="id,initTime,endTime,status";return Vy(async()=>{const g=await fetch(`/api/missions?id=${n}`);if(g.ok){const b=await g.json();i(b),console.log(b)}else throw Error(await g.text());const v=await fetch(`/api/missions/routes?missionId=${n}`);if(v.ok){const b=await v.json();s(b),console.log(b)}else throw Error(await g.text());const x=await fetch(`/api/files/get?missionId=${n}`);if(x.ok){const b=await x.json();l(b),console.log(b)}else throw Error(await g.text())},[]),z.jsxs("div",{className:t.root,children:[z.jsx(j1,{position:"sticky",color:"inherit",children:z.jsxs(Rm,{children:[z.jsx(hr,{color:"inherit",edge:"start",sx:{mr:2},onClick:()=>e(-1),children:z.jsx(d_,{})}),z.jsx(yn,{variant:"h6",component:"div",children:`Mission Reports- ${n}`})]})}),z.jsx("div",{className:t.content,children:z.jsx(s_,{maxWidth:"xl",children:z.jsxs(jo,{style:{padding:30},children:[r&&z.jsxs("div",{children:[z.jsx(yn,{variant:"h4",gutterBottom:!0,children:"Resultado de la Misión"}),z.jsxs(Hg,{container:!0,spacing:2,children:[p.split(",").filter(g=>r.hasOwnProperty(g)).map(g=>z.jsxs(Hg,{item:!0,xs:6,children:[z.jsx(yn,{variant:"subtitle1",style:{fontWeight:"bold"},children:g}),z.jsx(yn,{variant:"body1",children:r[g]})]},g)),z.jsxs(Hg,{item:!0,xs:6,children:[z.jsx(yn,{variant:"subtitle1",style:{fontWeight:"bold"},children:"Result"}),z.jsx(yn,{variant:"body1",children:JSON.stringify(r.results)})]})]})]}),o&&o.map((g,v)=>z.jsxs("div",{children:[z.jsx(Py,{style:{margin:"40px 0"}}),z.jsx(yn,{variant:"h5",gutterBottom:!0,children:`Ruta-${v}`}),z.jsxs(Hg,{container:!0,spacing:2,children:[p.split(",").filter(x=>g.hasOwnProperty(x)).map(x=>z.jsxs(Hg,{item:!0,xs:6,children:[z.jsx(yn,{variant:"subtitle1",style:{fontWeight:"bold"},children:x}),z.jsx(yn,{variant:"body1",children:g[x]})]},x)),z.jsxs(Hg,{item:!0,xs:6,children:[z.jsx(yn,{variant:"subtitle1",style:{fontWeight:"bold"},children:"Result"}),z.jsx(yn,{variant:"body1",children:JSON.stringify(g.result)})]})]}),a&&a.find(x=>x&&x.routeId==g.id)&&z.jsxs(z.Fragment,{children:[z.jsx(yn,{variant:"h6",gutterBottom:!0,style:{marginTop:"20px"},children:"Archivos de la Ruta"}),z.jsx(XCe,{sx:{width:"100%",height:500},cols:3,children:a.filter(x=>x.routeId==g.id&&x.name.endsWith(".jpg")).map(x=>z.jsx(QCe,{children:z.jsx("img",{src:`/api/files/download/${x.route}${x.name}`,alt:x.name,loading:"lazy",onClick:()=>h(x)})},x.id))})]})]},v))]})})}),z.jsx(W0t,{file:d,closecard:()=>h(null)})]})},q0t=()=>{const t=Jf();qR();const e=hLe();return Vy(async()=>{t("/")},[e]),z.jsx(Vye,{children:z.jsxs(cl,{path:"/",element:z.jsx(dLe,{}),children:[z.jsx(cl,{index:!0,element:z.jsx(rje,{})}),z.jsx(cl,{path:"mission",element:z.jsx(bct,{})}),z.jsx(cl,{path:"missiontest",element:z.jsx(Kyt,{})}),z.jsx(cl,{path:"3Dmission",element:z.jsx(H0t,{})}),z.jsx(cl,{path:"planning",element:z.jsx(Dvt,{})}),z.jsx(cl,{path:"camera",element:z.jsx(fvt,{})}),z.jsx(cl,{path:"device/:id",element:z.jsx(uvt,{})}),z.jsx(cl,{path:"replay",element:z.jsx(nvt,{})}),z.jsx(cl,{path:"topics",element:z.jsx(mvt,{})}),z.jsx(cl,{path:"event/:id",element:z.jsx(IJ,{})}),z.jsxs(cl,{path:"reports",children:[z.jsx(cl,{path:"events",element:z.jsx(IJ,{})}),z.jsx(cl,{path:"mission",element:z.jsx(tvt,{})}),z.jsx(cl,{path:"mission/:id",element:z.jsx(G0t,{})})]})]})})},X0t=()=>{const t={white:F0.white,background:Lf[50],primary:Kte[900],secondary:yh[800],positive:yh[500],medium:Fj[700],negative:Gp[500],neutral:Lf[500],geometry:"#3bb2d0"};return{background:{default:t.background},primary:{main:t.primary},secondary:{main:t.secondary,contrastText:t.white},colors:t}},Y0t={sidebarWidth:"28%",sidebarWidthTablet:"52px",drawerWidthDesktop:"360px",drawerWidthTablet:"320px",drawerHeightPhone:"250px",filterFormWidth:"160px",eventsDrawerWidth:"320px",bottomBarHeight:56,popupMapOffset:300,popupMaxWidth:288,popupImageHeight:144},K0t={MuiUseMediaQuery:{defaultProps:{noSsr:!0}},MuiOutlinedInput:{styleOverrides:{root:{backgroundColor:Lf[50]}}},MuiButton:{styleOverrides:{sizeMedium:{height:"40px"}}},MuiFormControl:{defaultProps:{size:"small"}},MuiSnackbar:{defaultProps:{anchorOrigin:{vertical:"bottom",horizontal:"center"}}}},Z0t=()=>V.useMemo(()=>c$({palette:X0t(),dimensions:Y0t,components:K0t}),[]),J0t=({children:t})=>{const e=Z0t();return z.jsx(Swe,{theme:e,children:t})},Q0t=({children:t})=>{const e=Ql(),n=nr(o=>!!o.session.server),[r,i]=V.useState(null);return Vy(async()=>{if(!r)try{const o=await fetch("/api/server");if(o.ok)e(gh.updateServer(await o.json()));else throw Error(await o.text())}catch(o){i(o.message)}},[r]),r?z.jsx(HSe,{severity:"error",action:z.jsx(hr,{color:"inherit",size:"small",onClick:()=>i(null),children:z.jsx(wO,{fontSize:"inherit"})}),children:r}):n?t:z.jsx(MAe,{})};c_e();const e_t=hte(document.getElementById("root"));e_t.render(z.jsx(Xve,{store:G0e,children:z.jsx(wne,{injectFirst:!0,children:z.jsxs(J0t,{children:[z.jsx(WTe,{}),z.jsx(Q0t,{children:z.jsx(Gye,{children:z.jsx(q0t,{})})})]})})}))});export default t_t();
